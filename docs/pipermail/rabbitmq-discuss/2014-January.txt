From srinath.c at gmail.com  Wed Jan  1 06:35:47 2014
From: srinath.c at gmail.com (srinath)
Date: Tue, 31 Dec 2013 22:35:47 -0800 (PST)
Subject: [rabbitmq-discuss] Rabbitmq boot failure with
	"tables_not_present"
In-Reply-To: <52205DCD.3020608@rabbitmq.com>
References: <D963620277BBFD4B87CF34F284738F2D3AA6F5E4@ORSMSX102.amr.corp.intel.com>
 <50F7D3D8.2050501@rabbitmq.com> <1377819672367-29192.post@n5.nabble.com>
 <52205DCD.3020608@rabbitmq.com>
Message-ID: <1388558147263-32351.post@n5.nabble.com>

I faced this issue using RabbitMQ 3.2.2
If you have a process of up-voting an issue, please consider my vote.
Would also be interested to know when this is likely to be fixed.

Btw, what is the bug id?




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Rabbitmq-boot-failure-with-tables-not-present-tp24494p32351.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From guilherme.labigalini at gmail.com  Wed Jan  1 14:19:55 2014
From: guilherme.labigalini at gmail.com (Guilherme Labigalini)
Date: Wed, 1 Jan 2014 12:19:55 -0200
Subject: [rabbitmq-discuss] Cluster to increase availability
Message-ID: <CAFrXCmJaQ8_hJDvyZws6dtgqpyK6YkGXbBOUXmDya2i_H+3f6g@mail.gmail.com>

Hello,

I was doing some tests by setting a RabbitMQ cluster. I have setup two
servers as disk nodes, the queues/exchanges that I created in NODE1 are
visible on the NODE2, I tried to publish one message to the queue on NODE1
by posting to the "replicated" exchanged on the NODE2 and it worked well -
the message was added to the queue on NODE1.

To test the "Availability" of my cluster, I stopped Rabbit on NODE1 and
tried to publish the a message connecting on the NODE2, since the exchange
was bind to a queue on the NODE1 that was down it failed:



My question is, even though I have a cluster, all my nodes must be up
during publish operations? How I can make sure that my 'producers' can
publish messages when at least one node in the cluster is up and running?
Today our code is saving the message in the SQL database if the RabbitMQ is
not running and we have a second job that reads the messages from this
table and send to Rabbit once it is running again.

Another option to increase availability would be setup several
non-clustered Rabbit nodes with the same queues/exchanges and use the
federation/shovel plugin to move the messages to the "master" node that
that my consumers are connected?

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140101/04ffb056/attachment.html>

From tim at rabbitmq.com  Wed Jan  1 20:06:29 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Wed, 1 Jan 2014 20:06:29 +0000
Subject: [rabbitmq-discuss] Cluster to increase availability
In-Reply-To: <CAFrXCmJaQ8_hJDvyZws6dtgqpyK6YkGXbBOUXmDya2i_H+3f6g@mail.gmail.com>
References: <CAFrXCmJaQ8_hJDvyZws6dtgqpyK6YkGXbBOUXmDya2i_H+3f6g@mail.gmail.com>
Message-ID: <3AD1815B-54DA-41F2-B14D-F7F9E9484F65@rabbitmq.com>

On 1 Jan 2014, at 14:19, Guilherme Labigalini wrote:

> Hello,
> 
> I was doing some tests by setting a RabbitMQ cluster. I have setup two servers as disk nodes, the queues/exchanges that I created in NODE1 are visible on the NODE2, I tried to publish one message to the queue on NODE1 by posting to the "replicated" exchanged on the NODE2 and it worked well - the message was added to the queue on NODE1.
> 
> To test the "Availability" of my cluster, I stopped Rabbit on NODE1 and tried to publish the a message connecting on the NODE2, since the exchange was bind to a queue on the NODE1 that was down it failed:
> 

Indeed - if the queue isn't available then the message won't be delivered in that scenario.

> My question is, even though I have a cluster, all my nodes must be up during publish operations?

If you publish to an exchange then messages will be routed (based on your chosen topology) to zero or more queues. If the nodes on which those queues were declared crash (or go offline) then the messages won't be delivered.

> How I can make sure that my 'producers' can publish messages when at least one node in the cluster is up and running?

If I understand your question properly - i.e., you want to know how to ensure that publishing doesn't fail even when nodes crash - then I suggest you take a look at mirrored queues: http://www.rabbitmq.com/ha.html

Cheers,
Tim

From sandy.sandeeep at gmail.com  Thu Jan  2 06:40:00 2014
From: sandy.sandeeep at gmail.com (sandeep kumar)
Date: Wed, 1 Jan 2014 22:40:00 -0800 (PST)
Subject: [rabbitmq-discuss] flow control in rabbitmq
Message-ID: <3d8d73d0-72d5-4d34-8eb9-17e938cb6a91@googlegroups.com>

Hi ,

I have used single rabbitmq node , And I set  memory_high_watermark to a 
small value(0.05)
and messages are being sent to the rabbitmq node at a higher rate.
When memory is about to be breached because of higher rate of messages to 
the node creation of .rdq files is observed.
when the memory consumtion crosses the limit all connections to the node 
getting blocked is observed.
At this point of time there is neither increase in queue size nor .rdq 
size, but publish to queue statemt is getting executed.

Questions are :

where are the published messages are getting store when connections to 
queue are in blocked state

how to handle this kind of scenario gracefully
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140101/3a0ce1f5/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan  2 07:29:27 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 2 Jan 2014 11:29:27 +0400
Subject: [rabbitmq-discuss] flow control in rabbitmq
In-Reply-To: <3d8d73d0-72d5-4d34-8eb9-17e938cb6a91@googlegroups.com>
References: <3d8d73d0-72d5-4d34-8eb9-17e938cb6a91@googlegroups.com>
Message-ID: <CAE3HoVQbhQa8SWEwD53PqxeiucCiYM1vsVEnyfQmMCudJr1K9w@mail.gmail.com>

2014/1/2 sandeep kumar <sandy.sandeeep at gmail.com>

> where are the published messages are getting store when connections to
> queue are in blocked state


Already answered in http://markmail.org/thread/too56pzacwpjtny5
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140102/96921a19/attachment.html>

From Rohit.Patel2 at techmahindra.com  Thu Jan  2 07:31:01 2014
From: Rohit.Patel2 at techmahindra.com (Rohit Patle)
Date: Thu, 2 Jan 2014 07:31:01 +0000
Subject: [rabbitmq-discuss] Quries about amqp_channel_close.
Message-ID: <27E054594442884E9A46DBCF9AE7408162B4AF@BSDMSATMBX001.mahindrasatyam.ad>

Hi,

I am using rabbitmq-c with following specifications:
Name: Librabbitmq
Description: An AMQP 0-9-1 client library
Client library Version: 0.3.0
Rabbitmq server Version: 3.2.2-1

1. I am trying to close the channel and getting the AMQP_RESPONSE_LIBRARY_EXCEPTION in amqp_channel_close API. Can you tell me what are the different reason for :

i. AMQP_RESPONSE_LIBRARY_EXCEPTION,
ii.  AMQP_RESPONSE_SERVER_EXCEPTION
iii. AMQP_RESPONSE_NONE

2. What will be the implication if I call amqp_destroy_connection without calling amqp_connection_close, amqp_queue_unbind and amqp_queue_delete? Will it release all the internal resources acquired while creating the connection? In other words, is there any need to call these APIs if I am going to call amqp_destroy_connection API alone?

Thanks you,
Rohit

________________________________

DISCLAIMER:
This email (including any attachments) is intended for the sole use of the intended recipient/s and may contain material that is CONFIDENTIAL AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or distribution or forwarding of any or all of the contents in this message is STRICTLY PROHIBITED. If you are not the intended recipient, please contact the sender by email and delete all copies; your cooperation in this regard is appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140102/25a8e91b/attachment.html>

From emile at rabbitmq.com  Thu Jan  2 09:54:00 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 02 Jan 2014 09:54:00 +0000
Subject: [rabbitmq-discuss] Cluster + Federation
In-Reply-To: <AFFA651B612BDE4EB570E34F0571834D12CC11CAB8@mail.vfinamex.local>
References: <AFFA651B612BDE4EB570E34F0571834D12CC11CAB8@mail.vfinamex.local>
Message-ID: <52C53738.8010806@rabbitmq.com>


Hi,


You can find information about federation as it relates to clustering
here: http://www.rabbitmq.com/federation.html#clustering

On 30/12/13 20:07, Jose Jimenez Ortiz wrote:

> .Net clients, how know what rabbitmq connecting (2 fedora boxs
> in cluster)?
> Rabbitmq federation, resolve so what cluster box connecting?

See the documentation for link status reporting for information about
federation links:

http://www.rabbitmq.com/federation-reference.html#status

See the rabbitmqctl documentation (in particular "list_connections") for
information about AMQP connections:

http://www.rabbitmq.com/man/rabbitmqctl.1.man.html




-Emile





From viet.hoang at quant-edge.com  Thu Jan  2 10:35:14 2014
From: viet.hoang at quant-edge.com (Hoang Viet)
Date: Thu, 2 Jan 2014 02:35:14 -0800 (PST)
Subject: [rabbitmq-discuss] LDAP authentication
Message-ID: <52ae0ce9-6829-48b9-9131-04c5c03db468@googlegroups.com>

Hello,

I want to have external LDAP authentication, but keep users information and 
permission control inside RabbitMQ. How do I modify the LDAP extension to 
have this? Or anyone can help me to build this customization plugin?

Regards,

Viet
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140102/7d6cc714/attachment.html>

From emile at rabbitmq.com  Thu Jan  2 12:19:05 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 02 Jan 2014 12:19:05 +0000
Subject: [rabbitmq-discuss] MQTT cannot connect client
In-Reply-To: <CALP4UdAZ572vUtCg4+j15KTHmb=__s4x8SO+sDF0bM5Bp8LiUA@mail.gmail.com>
References: <CALP4UdAZ572vUtCg4+j15KTHmb=__s4x8SO+sDF0bM5Bp8LiUA@mail.gmail.com>
Message-ID: <52C55939.70106@rabbitmq.com>


Hi Tom,

On 30/12/13 18:58, tom collins wrote:
> However after about five cycles (The amount of times seems to differ) of
> the client abruptly closing and connecting RMQ seems to hang and does
> not respond to any client connection. The MQTT client attempts to
> connect, appears in the management interface connections but does not
> respond meaning the client times out(or waits for the response if a
> timeout isn't specified).


Can you establish a TCP connection on the MQTT port when the broker is
in this hanging state? Does "rabbitmqctl report" or "rabbitmqctl status"
return results?

There was a bugfix relating to disconnection of clients that share the
same client id - see item 25887 here:
http://www.rabbitmq.com/release-notes/README-3.2.2.txt
Have you tried with the latest version of the broker?

Otherwise, would it be possible to supply a network packet capture that
illustrates the problem?




-Emile





From emile at rabbitmq.com  Thu Jan  2 12:38:01 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 02 Jan 2014 12:38:01 +0000
Subject: [rabbitmq-discuss] rabbitmq-server_3.2.2-1_all.deb installs
 Erlang 14b?
In-Reply-To: <CAChGYf96w_=X88xpMgipktKpOxFBBzsqbUFf+sx71NPke++=kw@mail.gmail.com>
References: <CAChGYf96w_=X88xpMgipktKpOxFBBzsqbUFf+sx71NPke++=kw@mail.gmail.com>
Message-ID: <52C55DA9.7060903@rabbitmq.com>


Hi Ryan,

On 30/12/13 18:08, Ryan Brown wrote:
> During install, the rabbit package installs 14b over the 16 install.
> I assume this is dues to where the ESL package gets installed by
> default. (?) Any ideas of how can I prevent this from happening?

The RabbitMQ package declares a dependency on the disjunction of
"erlang-nox" (>= 1:13.b.3) and "esl-erlang". It is up to the package
manager whether to consider dependencies or how these get resolved.
Depending on which command your fabric script uses to install the deb
you could request it not to perform dependency analysis. Only do this if
you know that this won't result in errors.



-Emile




From emile at rabbitmq.com  Thu Jan  2 14:05:58 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 02 Jan 2014 14:05:58 +0000
Subject: [rabbitmq-discuss] Fwd: RabbitMQ configuration
In-Reply-To: <CAFR5bjCiREVKrQTo+5vN05hk8huqwMCm2E5iunAaoCUbWjLyvg@mail.gmail.com>
References: <CAFR5bjAA87SqA7VHHN0p3zLFu03HU=eaNnBRvr_r11xsLn1H5g@mail.gmail.com>
 <CAFR5bjCiREVKrQTo+5vN05hk8huqwMCm2E5iunAaoCUbWjLyvg@mail.gmail.com>
Message-ID: <52C57246.3@rabbitmq.com>


Hi,

On 26/12/13 09:16, Halil ?brahim S?MER wrote:
> Does RabbitMQ supports server ping service or any other mechanism
> that catch socket connection lost on the client side. If there is
> any, could you help me with setting it.

Keepalives are part of the MQTT specification and supported by the paho
client. (see set & getKeepAliveInterval in MqttConnectOptions). While
the broker will respond to a PINGREQ frame with a with PINGRESP as per
the specification, it will not pro-actively disconnect clients that fail
to make contact with the broker within the keepalive interval negotiated
during CONNECT. This will be added in a future version of the broker.

> Another thing is my subscriptions expires even if there are messages
> waiting to deliver to the clients, is there any configuration to close. 

See the documentation for the subscription_ttl configuration option.
Disable or increase it.

> The last thing, I've read all your documentation on your
> page http://www.rabbitmq.com/configure.html. I've checked my rabbitMQ
> installation directory where RabbitMQ config file should exsists "config
> file(s) : /etc/rabbitmq/rabbitmq.config" but I couldn't found any
> "rabbitmq.config" file.

By default there is no config file. The documentation states:
"The location of these files is distribution-specific. By default, they
are not created,"

> If I create a config file on the directory and save my
> configurations. Does RabbitMQ checks the directory and configure new
> settings or do I need to set "rabbitmq.config" file directory to 
> other RabbitMQ configuration files.
You can create one if you need to. The documentation states:
"If rabbitmq.config doesn't exist, it can be created manually."




-Emile









From mcdonnell.myles at googlemail.com  Thu Jan  2 14:11:41 2014
From: mcdonnell.myles at googlemail.com (Myles McDonnell)
Date: Thu, 2 Jan 2014 14:11:41 +0000
Subject: [rabbitmq-discuss] RMQ Reference Sites
Message-ID: <CAJU1BF6cx9ma7_qdyXPmq2XsGCU0=B+6rnyjNXBp0f+a1Z056Q@mail.gmail.com>

Hello

I am trying to convince a client to adopt Rabbit MQ, Can you direct me to
any reference sites or perhaps a list of companies that use RMQ?

Many Thanks
Myles
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140102/ae09564d/attachment.html>

From videlalvaro at gmail.com  Thu Jan  2 14:29:16 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Thu, 2 Jan 2014 15:29:16 +0100
Subject: [rabbitmq-discuss] RMQ Reference Sites
In-Reply-To: <CAJU1BF6cx9ma7_qdyXPmq2XsGCU0=B+6rnyjNXBp0f+a1Z056Q@mail.gmail.com>
References: <CAJU1BF6cx9ma7_qdyXPmq2XsGCU0=B+6rnyjNXBp0f+a1Z056Q@mail.gmail.com>
Message-ID: <CAMcAHLUeEwcAzm6eix=SxJGuwnEK791OdBwntB1yd=DXGEpooA@mail.gmail.com>

Hi,

Take a look here: http://blog.gopivotal.com/category/case-studies-2
and our old blog here: http://blogs.vmware.com/vfabric/tag/rabbitmq

Regards,

Alvaro

On Thu, Jan 2, 2014 at 3:11 PM, Myles McDonnell
<mcdonnell.myles at googlemail.com> wrote:
> Hello
>
> I am trying to convince a client to adopt Rabbit MQ, Can you direct me to
> any reference sites or perhaps a list of companies that use RMQ?
>
> Many Thanks
> Myles
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From emile at rabbitmq.com  Thu Jan  2 14:32:25 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 02 Jan 2014 14:32:25 +0000
Subject: [rabbitmq-discuss] ssl ciphers with federation
In-Reply-To: <62573470865EAA41A09BB261D33F2DDF0498DA@pragmail3.pragmatics.com>
References: <62573470865EAA41A09BB261D33F2DDF0498DA@pragmail3.pragmatics.com>
Message-ID: <52C57879.7000103@rabbitmq.com>


Hi,

On 20/12/13 20:12, Karras, Thomas wrote:

> I?m having some issues using federation with SSL. We are using a FIPS
> openSSL client 

Is there any reason for that? Dropping in a different OpenSSL library is
not sufficient for FIPS compliance. At the time of writing the
open-source version of Erlang makes use of MD5 internally.

> once we setup a new upstream with SSL the server crashes with the
> same MD5 forbidden error.

Constraining upstream brokers to only use non-MD5 ciphers (using
ssl_options) should prevent the error.



-Emile




From emile at rabbitmq.com  Thu Jan  2 14:44:36 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 02 Jan 2014 14:44:36 +0000
Subject: [rabbitmq-discuss] Rabbit Mq 3.0.2 memory leak
In-Reply-To: <CAPK6Oevr7A1L7HpuuLYfS-2u0-YiEjoJ=Ak3YkCDaVe7csx91w@mail.gmail.com>
References: <CAPK6Oevr7A1L7HpuuLYfS-2u0-YiEjoJ=Ak3YkCDaVe7csx91w@mail.gmail.com>
Message-ID: <52C57B54.8010805@rabbitmq.com>


Hi,

On 27/12/13 16:55, shridharan muthu wrote:

> I know the quick answer is "upgrade" but is there a short term solution
> to fix this before we upgrade? 


Please check whether you can reproduce the problem on the latest version
of the broker. There have been numerous improvements to the broker since
3.0.2. If you can reproduce the problem then please supply the output of
"rabbitmqctl report" while the memory usage is normal and again when it
is abnormal.




-Emile




From roberto at canary.is  Thu Jan  2 15:23:59 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Thu, 2 Jan 2014 10:23:59 -0500
Subject: [rabbitmq-discuss] RabbitMQ for ARM
In-Reply-To: <CANOx8Nn81cn8Z+AWWvbnJ7SN=--QobEYVD1iPsuUJYpK0LifNA@mail.gmail.com>
References: <CANAFtV4_hksr8hYaJBuhPFYjc3uig3ii5dDhVGiTb8XamyotKg@mail.gmail.com>
 <l9v6fd$f6t$1@ger.gmane.org>
 <CANOx8NnY3sjPPSMjnA5midf9J2_K+GyvGnXdcjRrLaguBgUPdw@mail.gmail.com>
 <l9vcm5$afh$1@ger.gmane.org>
 <CANOx8Nn81cn8Z+AWWvbnJ7SN=--QobEYVD1iPsuUJYpK0LifNA@mail.gmail.com>
Message-ID: <CANAFtV4gPRCAg7f=OCpB72qRTaJJNJwrA=v7WMG2mhVL7W2jQg@mail.gmail.com>

Thank you Jerry. I will try.

Roberto



On Tue, Dec 31, 2013 at 5:08 PM, Jerry Kuch <jkuch at gopivotal.com> wrote:

> Agreed. If you need an AMQP client that you have to compile to native code
> somewhere, this is your best choice. It's also a compact and conceptually
> simple enough piece of code that it doesn't benefit hugely from a lot of
> OOP-i-ness spackled atop it anyway...  once library and toolchain
> dependencies grow these things get hard to use pretty quickly.
>
>
>
> On Tue, Dec 31, 2013 at 1:24 PM, Matwey V. Kornilov <
> matwey.kornilov at gmail.com> wrote:
>
>> 31.12.2013 23:44, Jerry Kuch ?????:
>>
>>  That's the one I've used on ARM-based iOS successfully.
>>>
>>
>> Small wonder. I really don't think that this library can include
>> something architecture specific.
>>
>>
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140102/5d43da19/attachment.html>

From emile at rabbitmq.com  Thu Jan  2 15:47:37 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 02 Jan 2014 15:47:37 +0000
Subject: [rabbitmq-discuss] Queue not shown in rabbitmqctl
In-Reply-To: <CANTUpDAjvkxdkDBh=Wy08ruxXfv01iD0oubtdL6JQKvy31P8mg@mail.gmail.com>
References: <CANTUpDAjvkxdkDBh=Wy08ruxXfv01iD0oubtdL6JQKvy31P8mg@mail.gmail.com>
Message-ID: <52C58A19.5030900@rabbitmq.com>


Hi,

On 16/12/13 08:45, Dimitri Minaev wrote:

> These journal.jif and *rdq files consumed all file handles.
> 
> But the strange thing was that the queue with 50 million messages was
> visible in the management interface, but not in `rabbitmqctl
> list_queues' output. What might be the cause?

You can observe undefined behaviour when the VM runs out of file
descriptors. It is possible for this resource exhaustion to manifest in
a different way next time.

> And, while we're at it, shouldn't RabbtiMQ close the temporary files it
> creates when there's not enough memory?

The broker does not coalesce temporary files on the basis of file
descriptor availability. You should make sure that the Erlang VM can
obtain as many descriptors as it needs and avoid running out. For the
message store alone this could be 1 descriptor for every 8Mb of messages
on disk. (or msg_store_file_size_limit * GARBAGE_FRACTION)



-Emile







From emile at rabbitmq.com  Thu Jan  2 16:09:25 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 02 Jan 2014 16:09:25 +0000
Subject: [rabbitmq-discuss] Queue not shown in rabbitmqctl
In-Reply-To: <52C58A19.5030900@rabbitmq.com>
References: <CANTUpDAjvkxdkDBh=Wy08ruxXfv01iD0oubtdL6JQKvy31P8mg@mail.gmail.com>
 <52C58A19.5030900@rabbitmq.com>
Message-ID: <52C58F35.2050102@rabbitmq.com>

On 02/01/14 15:47, Emile Joubert wrote:
> On 16/12/13 08:45, Dimitri Minaev wrote:
> 
>> These journal.jif and *rdq files consumed all file handles.
>>
>> But the strange thing was that the queue with 50 million messages was
>> visible in the management interface, but not in `rabbitmqctl
>> list_queues' output. What might be the cause?
> 
> You can observe undefined behaviour when the VM runs out of file
> descriptors.

But this is extremely unlikely, and you don't provide any evidence for
the assertion that this was the cause of the non-responsiveness/crash.
Are you sure about the diagnosis?

>> And, while we're at it, shouldn't RabbtiMQ close the temporary files it
>> creates when there's not enough memory?
> 
> The broker does not coalesce temporary files on the basis of file
> descriptor availability. You should make sure that the Erlang VM can
> obtain as many descriptors as it needs and avoid running out.


The broker has a pool of file descriptors and these are shared between
different Erlang processes if there are not enough to go round, so the
broker won't crash after all the descriptors are in use. If you can
afford to then you should give the Erlang VM as many file descriptors as
it needs though.



-Emile



From KarrasT at Pragmatics.com  Thu Jan  2 16:38:12 2014
From: KarrasT at Pragmatics.com (karrast)
Date: Thu, 2 Jan 2014 08:38:12 -0800 (PST)
Subject: [rabbitmq-discuss] ssl ciphers with federation
In-Reply-To: <52C57879.7000103@rabbitmq.com>
References: <62573470865EAA41A09BB261D33F2DDF0498DA@pragmail3.pragmatics.com>
 <52C57879.7000103@rabbitmq.com>
Message-ID: <1388680692333-32369.post@n5.nabble.com>

The internal use of MD5 internally does not make something non-FIPS
compliant. FIPS only restricts communication with MD5 such as SSL. As you
mentioned though setting the ciphers in ssl_options on the brokers allow
them to be started without errors.

The problem comes with enabling federation. As soon as an upstream broker is
set on a running RabbitMQ instance using SSL, the server crashes with the
MD5 error. I believe this comes about because the federation plugin uses a
RabbitMQ client to communicate with the upstream broker which uses different
settings than what is set on the server. 

Unfortunately I could not find a way to set ssl_options on the client used
for federation so that I could specify a cipher to use. I did look into the
old federation client which was around for the 3.0.0 release of RabbitMQ
which did allow you to set ssl_options on the federation client but that did
not seem to work any longer in the latest version. 

So my main question was is there a way to set SSL ciphers on the federation
plugin?

Thanks,

Thomas



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/ssl-ciphers-with-federation-tp32276p32369.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From pat at munkiisoft.com  Thu Jan  2 17:56:16 2014
From: pat at munkiisoft.com (Patrick Long)
Date: Thu, 2 Jan 2014 17:56:16 +0000
Subject: [rabbitmq-discuss] BasicGet ignoring routing key . Exchange is
	Direct
Message-ID: <CALDntb_--1KmuiLTciR-Oa37xP3e1OQTz2=57npfSfVP8u80Og@mail.gmail.com>

We are using the C# .NET client library.

I create a channel like so

channel.ExchangeDeclare(workExchangeName, *ExchangeType.Direct*);

Then bind a queue like

channel.QueueBind(this.WorkQueueName, workExchangeName,
*BuildRoutingKey(buildNumber)*);

Today I was trying to debug a failing message from a different environment.
I took the message's JSON from that server, via the Management UI, and
manually created a message on my local machine, again via the Management
UI. There was no option to set a specific RoutingKey, it created one for me
with the same name as the queue 'WorkQueue'.

The local RabbitMQ had a couple of existing messages with a RoutingKey of
'Development:STACK_1_WEBSERVER_V2:1:2.9.0.0'

When I call channel.*BasicGet*(this.WorkQueueName, false) in a loop it
dequeues all three messages even though the channel was created to look at
a queue and exchange with the routing key of
'Development:STACK_1_WEBSERVER_V2:1:2.9.0.0'

Any idea why it would be ignoring the RoutingKey?

Thanks


-- 
Patrick Long - Munkiisoft Ltd
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140102/804ee415/attachment.html>

From alan.antonuk at gmail.com  Thu Jan  2 18:07:25 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Thu, 2 Jan 2014 10:07:25 -0800
Subject: [rabbitmq-discuss] Quries about amqp_channel_close.
In-Reply-To: <27E054594442884E9A46DBCF9AE7408162B4AF@BSDMSATMBX001.mahindrasatyam.ad>
References: <27E054594442884E9A46DBCF9AE7408162B4AF@BSDMSATMBX001.mahindrasatyam.ad>
Message-ID: <CAAt2poJ1oem_UJ3CunsHf93U4r3xTHk57hE7WounQ7i5mLKYNQ@mail.gmail.com>

Rohit;


On Wed, Jan 1, 2014 at 11:31 PM, Rohit Patle
<Rohit.Patel2 at techmahindra.com>wrote:

>  Hi,
>
> I am using rabbitmq-c with following specifications:
> Name: Librabbitmq
> Description: An AMQP 0-9-1 client library
> Client library Version: 0.3.0
> Rabbitmq server Version: 3.2.2-1
>

I would highly recommend upgrading to v0.4.1 if possible, as there have
been several improvements around error handling since v0.3.0.

>
> 1. I am trying to close the channel and getting theAMQP_RESPONSE_LIBRARY_EXCEPTIONin amqp_channel_close API. Can you tell me what are the different reason
> for :
>
> i. AMQP_RESPONSE_LIBRARY_EXCEPTION,
> ii.  AMQP_RESPONSE_SERVER_EXCEPTION
> iii. AMQP_RESPONSE_NONE
>

See:
https://github.com/alanxz/rabbitmq-c/blob/5f291ea772a536da3087f216e240016365e61a82/librabbitmq/amqp.h#L1582

Hopefully you never see an AMQP_RESPONSE_NONE - as that would likely
indicate a bug somewhere.

>
> 2. What will be the implication if I call amqp_destroy_connection without
> calling amqp_connection_close, amqp_queue_unbind and amqp_queue_delete?
> Will it release all the internal resources acquired while creating the
> connection? In other words, is there any need to call these APIs if I am
> going to call amqp_destroy_connection API alone?
>

Calling amqp_destroy_connection without calling amqp_connection_close first
will cause the underlying socket to be closed without sending the
connection.close method to the broker. This should not leak any resources
on the client side.  On the broker side the broker will eventually detect
that the socket has been closed and will emit a warning to the error log
indicating that a connection closed unexpectedly.

As for amqp_queue_unbind and amqp_queue_delete, these only manipulate
objects defined on the broker. A queue may or may not hang around after a
client disconnects depending on how it was declared. A queue binding will
hang around as long as both the exchange and queue still exist.

HTH
-Alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140102/80145ba5/attachment.html>

From pat at munkiisoft.com  Thu Jan  2 18:10:25 2014
From: pat at munkiisoft.com (Patrick Long)
Date: Thu, 2 Jan 2014 18:10:25 +0000
Subject: [rabbitmq-discuss] BasicGet ignoring routing key . Exchange is
	Direct
In-Reply-To: <CALDntb_--1KmuiLTciR-Oa37xP3e1OQTz2=57npfSfVP8u80Og@mail.gmail.com>
References: <CALDntb_--1KmuiLTciR-Oa37xP3e1OQTz2=57npfSfVP8u80Og@mail.gmail.com>
Message-ID: <CALDntb99BdMjfuFa_hi0Atz6_RznJnStpDcwnaBLcc131=_frQ@mail.gmail.com>

More info: The management UI added the Message to the right Queue but the
exchange is not the usual one. It has used "AMQP default" with a
delivery_mode of 1.

Does this explain the unexpected dequeuing?

Thanks


On 2 January 2014 17:56, Patrick Long <pat at munkiisoft.com> wrote:

> We are using the C# .NET client library.
>
> I create a channel like so
>
> channel.ExchangeDeclare(workExchangeName, *ExchangeType.Direct*);
>
> Then bind a queue like
>
> channel.QueueBind(this.WorkQueueName, workExchangeName,
> *BuildRoutingKey(buildNumber)*);
>
> Today I was trying to debug a failing message from a different
> environment. I took the message's JSON from that server, via the Management
> UI, and manually created a message on my local machine, again via the
> Management UI. There was no option to set a specific RoutingKey, it created
> one for me with the same name as the queue 'WorkQueue'.
>
> The local RabbitMQ had a couple of existing messages with a RoutingKey of
> 'Development:STACK_1_WEBSERVER_V2:1:2.9.0.0'
>
> When I call channel.*BasicGet*(this.WorkQueueName, false) in a loop it
> dequeues all three messages even though the channel was created to look at
> a queue and exchange with the routing key of
> 'Development:STACK_1_WEBSERVER_V2:1:2.9.0.0'
>
> Any idea why it would be ignoring the RoutingKey?
>
> Thanks
>
>
> --
> Patrick Long - Munkiisoft Ltd
>



-- 
Patrick Long - Munkiisoft Ltd
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140102/aed7bb3a/attachment.html>

From bs at bit-field.de  Thu Jan  2 15:52:59 2014
From: bs at bit-field.de (bernhard)
Date: Thu, 02 Jan 2014 16:52:59 +0100
Subject: [rabbitmq-discuss] pika/puka
Message-ID: <52C58B5B.8090104@bit-field.de>


Hello,

allow me a beginners question. I played a bit with the pika examples to
see, if I can use amqp in my own projects. Everything looks very
promising for me.
But I did not find a way, to do my own event loop. Then I found puka,
which exposes the raw socket fd and allows for own event loops. Looks
very nice for me too. But it seems to be unsupported for a long time.

The reason, why I want my own event loop, is that I want to avoid
threads (no, I don't want to start a flame war; just my personal style).
And I want to be informed by events from external devices (connected by
serial, ethernet, ...) very fast. So adding the fds to the select()
seems natural for me.

Did I explore pika not good enough (I read about the asynchronous parts,
but as far, as I see, it is not, what I need)? Or is puka maintained
somewhere I didn't look?

Do have any hints for me?

Thank you.

Bernhard


From mklishin at gopivotal.com  Thu Jan  2 19:58:48 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 2 Jan 2014 23:58:48 +0400
Subject: [rabbitmq-discuss] pika/puka
In-Reply-To: <52C58B5B.8090104@bit-field.de>
References: <52C58B5B.8090104@bit-field.de>
Message-ID: <67887F0B-8CE0-4EA0-92BB-E7B28BF7BB99@rabbitmq.com>


On 2 Jan 2014, at 19:52, bernhard <bs at bit-field.de> wrote:

> Did I explore pika not good enough (I read about the asynchronous parts,
> but as far, as I see, it is not, what I need)?

See tornado and asyncore adapters. There is no reason to work with the underlying socket
directly (if you do, you will end up reinventing half of the client).

You still can do anything you want with sockets that talk to external devices, etc, and are not
managed by Pika.

HTH.

MK

Software Engineer, Pivotal/RabbitMQ



From michael.laing at nytimes.com  Thu Jan  2 20:12:45 2014
From: michael.laing at nytimes.com (Laing, Michael)
Date: Thu, 2 Jan 2014 15:12:45 -0500
Subject: [rabbitmq-discuss] pika/puka
In-Reply-To: <52C58B5B.8090104@bit-field.de>
References: <52C58B5B.8090104@bit-field.de>
Message-ID: <CAKgmDnHtFu5fdTk6aig+hxWAOdjoiiDG9CWD5kkM_wQiGGovEw@mail.gmail.com>

pika doesn't use threads.

You can do your own event loop by writing a connector...

However the tornado event loop is plenty fast, or libev if you are
adventurous (9.14).

They are both significantly faster than select (the default).

We use the libev connector in our AMQP/sockjs/websocket gateway launching
today (fully deployed next week).

Where we don't need a combined event loop, we use tornado, which is more
battle-proven.

ml


On Thu, Jan 2, 2014 at 10:52 AM, bernhard <bs at bit-field.de> wrote:

>
> Hello,
>
> allow me a beginners question. I played a bit with the pika examples to
> see, if I can use amqp in my own projects. Everything looks very
> promising for me.
> But I did not find a way, to do my own event loop. Then I found puka,
> which exposes the raw socket fd and allows for own event loops. Looks
> very nice for me too. But it seems to be unsupported for a long time.
>
> The reason, why I want my own event loop, is that I want to avoid
> threads (no, I don't want to start a flame war; just my personal style).
> And I want to be informed by events from external devices (connected by
> serial, ethernet, ...) very fast. So adding the fds to the select()
> seems natural for me.
>
> Did I explore pika not good enough (I read about the asynchronous parts,
> but as far, as I see, it is not, what I need)? Or is puka maintained
> somewhere I didn't look?
>
> Do have any hints for me?
>
> Thank you.
>
> Bernhard
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140102/9ade5ff0/attachment.html>

From videlalvaro at gmail.com  Thu Jan  2 20:47:11 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Thu, 2 Jan 2014 21:47:11 +0100
Subject: [rabbitmq-discuss] BasicGet ignoring routing key . Exchange is
	Direct
In-Reply-To: <CALDntb_--1KmuiLTciR-Oa37xP3e1OQTz2=57npfSfVP8u80Og@mail.gmail.com>
References: <CALDntb_--1KmuiLTciR-Oa37xP3e1OQTz2=57npfSfVP8u80Og@mail.gmail.com>
Message-ID: <CAMcAHLV6gk9Uv_bmVn97NYS4LvC=BB2+RadbO20wHOojzFkv5w@mail.gmail.com>

Hi,

Replies inline:

On Thu, Jan 2, 2014 at 6:56 PM, Patrick Long <pat at munkiisoft.com> wrote:
> We are using the C# .NET client library.
>
> I create a channel like so
>
> channel.ExchangeDeclare(workExchangeName, ExchangeType.Direct);

Here you create an exchange, not a channel. The channel in AMQP is
used to send commands to the broker, like queue declare or exchange
declare, and to also send/receive messages.

>
> Then bind a queue like
>
> channel.QueueBind(this.WorkQueueName, workExchangeName,
> BuildRoutingKey(buildNumber));
>
> Today I was trying to debug a failing message from a different environment.
> I took the message's JSON from that server, via the Management UI, and
> manually created a message on my local machine, again via the Management UI.
> There was no option to set a specific RoutingKey, it created one for me with
> the same name as the queue 'WorkQueue'.
>
> The local RabbitMQ had a couple of existing messages with a RoutingKey of
> 'Development:STACK_1_WEBSERVER_V2:1:2.9.0.0'
>
> When I call channel.BasicGet(this.WorkQueueName, false) in a loop it
> dequeues all three messages even though the channel was created to look at a
> queue and exchange with the routing key of
> 'Development:STACK_1_WEBSERVER_V2:1:2.9.0.0'
>
> Any idea why it would be ignoring the RoutingKey?

basicGet (or basicConsume for that matter), don't look at routing keys
when getting messages. Again, the channel knows nothing about routing
keys used for the bindings above. basicGet or basicConsume will just
get the messages from the queue. That is, if a message was routed to
the queue, with whatever routing key, then that message can be
consumed from that queue using either basicGet or basicConsume. BTW,
unless you want to read one message at a time, then is better to use
basicConsume.

You can read more here: http://www.rabbitmq.com/tutorials/amqp-concepts.html

Regards,

Alvaro

>
> Thanks
>
>
> --
> Patrick Long - Munkiisoft Ltd
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From videlalvaro at gmail.com  Thu Jan  2 20:49:08 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Thu, 2 Jan 2014 21:49:08 +0100
Subject: [rabbitmq-discuss] BasicGet ignoring routing key . Exchange is
	Direct
In-Reply-To: <CALDntb99BdMjfuFa_hi0Atz6_RznJnStpDcwnaBLcc131=_frQ@mail.gmail.com>
References: <CALDntb_--1KmuiLTciR-Oa37xP3e1OQTz2=57npfSfVP8u80Og@mail.gmail.com>
 <CALDntb99BdMjfuFa_hi0Atz6_RznJnStpDcwnaBLcc131=_frQ@mail.gmail.com>
Message-ID: <CAMcAHLVnQcau_1f00oUOJgduJYztw-3dqLqs=8H_kAb+DmgoOw@mail.gmail.com>

Hi,

Replies inline as before:

On Thu, Jan 2, 2014 at 7:10 PM, Patrick Long <pat at munkiisoft.com> wrote:
> More info: The management UI added the Message to the right Queue but the
> exchange is not the usual one. It has used "AMQP default" with a
> delivery_mode of 1.
>
> Does this explain the unexpected dequeuing?

Probably the management UI published the message to the default
exchange, using the queue name as routing key, which is AMQP's way of
saying: "publish directly to a queue". See more here:
http://www.rabbitmq.com/tutorials/tutorial-one-python.html

Regards,

Alvaro

>
> Thanks
>
>
> On 2 January 2014 17:56, Patrick Long <pat at munkiisoft.com> wrote:
>>
>> We are using the C# .NET client library.
>>
>> I create a channel like so
>>
>> channel.ExchangeDeclare(workExchangeName, ExchangeType.Direct);
>>
>> Then bind a queue like
>>
>> channel.QueueBind(this.WorkQueueName, workExchangeName,
>> BuildRoutingKey(buildNumber));
>>
>> Today I was trying to debug a failing message from a different
>> environment. I took the message's JSON from that server, via the Management
>> UI, and manually created a message on my local machine, again via the
>> Management UI. There was no option to set a specific RoutingKey, it created
>> one for me with the same name as the queue 'WorkQueue'.
>>
>> The local RabbitMQ had a couple of existing messages with a RoutingKey of
>> 'Development:STACK_1_WEBSERVER_V2:1:2.9.0.0'
>>
>> When I call channel.BasicGet(this.WorkQueueName, false) in a loop it
>> dequeues all three messages even though the channel was created to look at a
>> queue and exchange with the routing key of
>> 'Development:STACK_1_WEBSERVER_V2:1:2.9.0.0'
>>
>> Any idea why it would be ignoring the RoutingKey?
>>
>> Thanks
>>
>>
>> --
>> Patrick Long - Munkiisoft Ltd
>
>
>
>
> --
> Patrick Long - Munkiisoft Ltd
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From gavinmroy at gmail.com  Thu Jan  2 20:52:53 2014
From: gavinmroy at gmail.com (Gavin M. Roy)
Date: Thu, 2 Jan 2014 15:52:53 -0500
Subject: [rabbitmq-discuss] pika/puka
In-Reply-To: <52C58B5B.8090104@bit-field.de>
References: <52C58B5B.8090104@bit-field.de>
Message-ID: <EDF17BA988F94A15ACD7E0BE64CF3B31@gmail.com>

Pika abstracts multiple event loops including Tornado, Asyncore, Twisted, libev, and one that is native to it. Writing your own adapter should be trivial if you already have your own event loop. Here?s the Tornado adapter as an example of how to adapt pika to an event loop:  

https://github.com/pika/pika/blob/master/pika/adapters/tornado_connection.py

Gavin  


On Thursday, January 2, 2014 at 10:52 AM, bernhard wrote:

>  
> Hello,
>  
> allow me a beginners question. I played a bit with the pika examples to
> see, if I can use amqp in my own projects. Everything looks very
> promising for me.
> But I did not find a way, to do my own event loop. Then I found puka,
> which exposes the raw socket fd and allows for own event loops. Looks
> very nice for me too. But it seems to be unsupported for a long time.
>  
> The reason, why I want my own event loop, is that I want to avoid
> threads (no, I don't want to start a flame war; just my personal style).
> And I want to be informed by events from external devices (connected by
> serial, ethernet, ...) very fast. So adding the fds to the select()
> seems natural for me.
>  
> Did I explore pika not good enough (I read about the asynchronous parts,
> but as far, as I see, it is not, what I need)? Or is puka maintained
> somewhere I didn't look?
>  
> Do have any hints for me?
>  
> Thank you.
>  
> Bernhard
>  
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com (mailto:rabbitmq-discuss at lists.rabbitmq.com)
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>  
>  


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140102/48a6e0d2/attachment.html>

From 314992959 at qq.com  Fri Jan  3 04:02:33 2014
From: 314992959 at qq.com (3k4b251)
Date: Thu, 2 Jan 2014 20:02:33 -0800 (PST)
Subject: [rabbitmq-discuss]
 =?utf-8?q?Rabbitmq_Server=28WINDOWS=29_configu?=
 =?utf-8?q?ration=EF=BC=9A_how__to__change___tcp=5Flistener=3F?=
In-Reply-To: <F2D4DEBF-C4D5-4DCE-83A9-329F225C2ED0@rabbitmq.com>
References: <1388023699234-32304.post@n5.nabble.com>
 <D9051849-CA34-4DA5-B582-970D44E8A4E5@rabbitmq.com>
 <F2D4DEBF-C4D5-4DCE-83A9-329F225C2ED0@rabbitmq.com>
Message-ID: <1388721753600-32379.post@n5.nabble.com>

I'd  like  to make  a cluster  in  one  computer.   if  I  want  to   create  
3   node.   should  I  make  every node's  port   different?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Rabbitmq-Server-WINDOWS-configuration-how-to-change-tcp-listener-tp32304p32379.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From jkuch at gopivotal.com  Fri Jan  3 05:14:02 2014
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Thu, 2 Jan 2014 21:14:02 -0800
Subject: [rabbitmq-discuss]
	=?utf-8?q?Rabbitmq_Server=28WINDOWS=29_configu?=
	=?utf-8?q?ration=EF=BC=9A_how_to_change_tcp=5Flistener=3F?=
In-Reply-To: <1388721753600-32379.post@n5.nabble.com>
References: <1388023699234-32304.post@n5.nabble.com>
 <D9051849-CA34-4DA5-B582-970D44E8A4E5@rabbitmq.com>
 <F2D4DEBF-C4D5-4DCE-83A9-329F225C2ED0@rabbitmq.com>
 <1388721753600-32379.post@n5.nabble.com>
Message-ID: <CANOx8NnY-vD8Dw6c6ZzvUQRGz_kTE9-KZ3Eb21n0bG3wyNEbtg@mail.gmail.com>

Please see:

http://www.rabbitmq.com/clustering.html

in particular the section "A cluster on a single machine."



On Thu, Jan 2, 2014 at 8:02 PM, 3k4b251 <314992959 at qq.com> wrote:

> I'd  like  to make  a cluster  in  one  computer.   if  I  want  to
> create
> 3   node.   should  I  make  every node's  port   different?
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/Rabbitmq-Server-WINDOWS-configuration-how-to-change-tcp-listener-tp32304p32379.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140102/ebc1b2c5/attachment.html>

From bs at bit-field.de  Fri Jan  3 09:30:22 2014
From: bs at bit-field.de (bernhard)
Date: Fri, 03 Jan 2014 10:30:22 +0100
Subject: [rabbitmq-discuss] pika/puka
In-Reply-To: <EDF17BA988F94A15ACD7E0BE64CF3B31@gmail.com>
References: <52C58B5B.8090104@bit-field.de>
 <EDF17BA988F94A15ACD7E0BE64CF3B31@gmail.com>
Message-ID: <52C6832E.7060506@bit-field.de>


Thank you all,
>
> https://github.com/pika/pika/blob/master/pika/adapters/tornado_connection.py
>
Will look to this first and of course all the other recommendations too.

Looks like I have to learn a bit more ;-)

Bernhard


From pat at munkiisoft.com  Fri Jan  3 12:07:44 2014
From: pat at munkiisoft.com (Patrick Long)
Date: Fri, 3 Jan 2014 12:07:44 +0000
Subject: [rabbitmq-discuss] BasicGet ignoring routing key . Exchange is
	Direct
Message-ID: <CALDntb8SfQR3AZNgoqiYsG_ndJwp=MrNybkobdgOmuaLRKDQ4w@mail.gmail.com>

We are using the C# .NET client library.

I create a channel like so

channel.ExchangeDeclare(workExchangeName, *ExchangeType.Direct*);

Then bind a queue like

channel.QueueBind(this.WorkQueueName, workExchangeName,
*BuildRoutingKey(buildNumber)*);

When I call channel.*BasicGet*(this.WorkQueueName, false) in a loop it
dequeues messages ignoring the routingkey set on them.

Any idea why it would be ignoring the RoutingKey?

Thanks

-- 
Patrick Long - Munkiisoft Ltd
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140103/6bd2c32a/attachment.html>

From michael.s.klishin at gmail.com  Fri Jan  3 13:14:44 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 3 Jan 2014 17:14:44 +0400
Subject: [rabbitmq-discuss] BasicGet ignoring routing key . Exchange is
	Direct
In-Reply-To: <CALDntb8SfQR3AZNgoqiYsG_ndJwp=MrNybkobdgOmuaLRKDQ4w@mail.gmail.com>
References: <CALDntb8SfQR3AZNgoqiYsG_ndJwp=MrNybkobdgOmuaLRKDQ4w@mail.gmail.com>
Message-ID: <CAE3HoVR0EPu9hG5AC96GoBHsrxfZnc31aHdo+aWJHNmoostruw@mail.gmail.com>

2014/1/3 Patrick Long <pat at munkiisoft.com>

> When I call channel.*BasicGet*(this.WorkQueueName, false) in a loop it
> dequeues messages ignoring the routingkey set on them.
>
> Any idea why it would be ignoring the RoutingKey?
>

Routing key is used to route messages to queues. They play no part in
consumption of messages.

See http://www.rabbitmq.com/tutorials/amqp-concepts.html

To consume messages selectively you need to make sure they are routed to
different queues, then consume
from the right queue.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140103/ce77f966/attachment.html>

From emile at rabbitmq.com  Fri Jan  3 13:19:54 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 03 Jan 2014 13:19:54 +0000
Subject: [rabbitmq-discuss] ssl ciphers with federation
In-Reply-To: <1388680692333-32369.post@n5.nabble.com>
References: <62573470865EAA41A09BB261D33F2DDF0498DA@pragmail3.pragmatics.com>
 <52C57879.7000103@rabbitmq.com> <1388680692333-32369.post@n5.nabble.com>
Message-ID: <52C6B8FA.4090808@rabbitmq.com>

On 02/01/14 16:38, karrast wrote:
> So my main question was is there a way to set SSL ciphers on the federation
> plugin?

It is not possible to constrain the ciphers that clients advertise, but
you can constrain those that upstream brokers will accept (using the
'ciphers' option within ssl_options).


-Emile


From tim at rabbitmq.com  Fri Jan  3 13:21:43 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Fri, 3 Jan 2014 13:21:43 +0000
Subject: [rabbitmq-discuss] Syncing erlang cookie by editing
	rabbitmq-service
In-Reply-To: <CALDntb-2SDQJ82X=Lr+yjsnRaKA=SCTynFzDgbj-qBVwmAomjg@mail.gmail.com>
References: <CALDntb-2SDQJ82X=Lr+yjsnRaKA=SCTynFzDgbj-qBVwmAomjg@mail.gmail.com>
Message-ID: <00B3F5D4-99AE-483B-B96B-D8D30D8EC4AD@rabbitmq.com>

On 12 Dec 2013, at 19:31, Patrick Long wrote:
> There are lots of posts about copying the cookie file onto all machines in a cluster.
> 
> I don't want to do that. I want to use the setcookie option. I have seen posts on how you can set it via the rabbitmq-server.bat but seeing as we are using the windows service I am guess I need to set it via that.
> 

I think you need to set the environment variable either for the whole system or for the user account under which the service runs. The relevant bit of the documentation (I think) is:

Customise RabbitMQ Service Environment Variables
Note: After setting environment variables, you may need to install the service again.

The rabbitmq-service.bat script recognises many of the same environment variables as rabbitmq-server.bat, as well as a few additional service environment variables.


Have you tried re-installing the service after making those changes?

> I have tried 
> 
> set RABBITMQ_SERVER_START_ARGS=-setcookie "HEYEVHYLJHOBGFQASQHK"
> 

That would only work for the current shell session. You'll need to set it up via "My Computer" > "Advanced" > "Environment Variables" or some variation thereof. Not sure if you can set environment variables for individual services through the service manager these days, but that might work if it's possible.

Cheers,
Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140103/9dd49b48/attachment.html>

From tim at rabbitmq.com  Fri Jan  3 13:22:35 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Fri, 3 Jan 2014 13:22:35 +0000
Subject: [rabbitmq-discuss] How can a consumer get notification of
	arrival of a message in the queue?
In-Reply-To: <1386759179369-31970.post@n5.nabble.com>
References: <1386759179369-31970.post@n5.nabble.com>
Message-ID: <62E37F98-2ED4-4B71-BE1F-EA0993B286A7@rabbitmq.com>

On 11 Dec 2013, at 10:52, kingsmasher1 wrote:
> I understand for Java, there is a subscription mechanism:
> http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-February/011103.html
> 
> But how about C/C++?
> 

Most C/C++ clients should expose the same kind of API, offering a choice between basic.get and basic.consume. So it shouldn't be all that different. Which client library are you using?

Cheers,
Tim


From tim at rabbitmq.com  Fri Jan  3 13:41:41 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Fri, 3 Jan 2014 13:41:41 +0000
Subject: [rabbitmq-discuss] Option for surviving connection failure
	feature suggestion
In-Reply-To: <e1669d74-68d0-4484-a847-7b7d350bd4b0@googlegroups.com>
References: <e1669d74-68d0-4484-a847-7b7d350bd4b0@googlegroups.com>
Message-ID: <8CAE2086-394A-4EAB-AD6F-DABBA9D2CD6D@rabbitmq.com>

On 5 Dec 2013, at 18:17, Wayne Brantley wrote:
> Disclaimer:  I am new to RabbitMQ.  :-)
> 

Welcome to the party! ;)

> I would propose a new option on a queue.
> 
> If the connection is dropped, that would not make the message available to another consumer.
> The message would have a 'processing timeout'.  Only after that time has expired would the message become available to other consumers.
> 
> There would be several different options that could be set on the message for how to determine to deliver the message to another consumer.
> 
> 1)  You could have an 'absolute processing timeout'.  
>     -  RabbitMQ would keep track of how long the consumer has had the message.
>     -  The client could send 'keep alive' acknowledgements to reset the the time RabbitMQ is tracking to zero.
>     -  All that matters is has the message been processing longer than the timeout value.  (where timeout can be reset by client).  A dropped connection would not matter. 
> 

Not sure I follow this properly, so to clarify, you're suggesting that the broker should track the message and if the client doesn't ACK within a specified time frame, consider the message REJECTed and give it to another client? What if the client did send an ACK within the requisite time frame, but the network was congested and therefore the ACK didn't make it to the broker in time? You'd then be in an inconsistent state. Client's already send 'keep-alive' messages for connections - AMQP heartbeats - so are you suggesting that on receipt of a heartbeat, the broker should reset this timer? If so, that would intertwine connection management with queue processing in a fiddly way, that would likely harm performance. If not, then what you're suggesting is an extension of the protocol, since AMQP doesn't have this concept at the moment. Protocol enhancements have been introduced by RabbitMQ in the past, so that's not out of the question, but I'd suggest the semantics need to be formally identified before pursuing that kind of thing.

You might be able to approximate this with multiple queues and TTL, though I'm not sure.

> 2)  You could have a 'broken connection timeout'
>     -  RabbitMQ would keep track of how long the consumer has had the message, AFTER the connection is dropped.
>     -  The client would NOT ever need to send 'keep alive' acknowledgements.
>     -  If a consumer connection is re-established - the consumer should somehow indicate they are still working on the message.
>     -  Potentially - when the consumer is working on the message, they send 'keep alive' every so often.  This way if the connection broke and was reconnected, the next time a 'keep alive' is sent, it would let RabbitMQ know you are still working on the message.
> 

What would the server do if the connection never came back? Presumably you're suggesting that the queue would consider the message still "out on loan" until the timeout expires?

> The above options would probably have default values at the queue level, and each message could override (for example if you know the message takes a long time to process.)
> 
> This makes it where any intermittent connection from consumer to publisher would not necessarily mean the consumer 'failed' and the message should be passed to another consumer.

There are a number of potential races with both (1) and (2) that could be problematic. There's also a lot of overhead for the queues to take on, just to support a fairly narrow use case - i.e., when a consumer dies you wish to wait a while before considering un-acked messages associated with that consumer ready for re-queuing. There's also the problem of "how to identify that it is the same consumer", since the AMQP specification dictates the following: "The consumer tag is local to a channel, so two clients can use the same consumer tags". Since the client will "return" on a new connection and new channel, how does the broker know that this is the same (previously handled) client of a specific queue?

Hopefully those are some useful things to think about whilst pondering how this might work. It's also worth considering whether or not there are other designs that might achieve what you want, based on existing features. We might be able to help with that too.

Cheers,
Tim



From sandy.sandeeep at gmail.com  Fri Jan  3 13:56:25 2014
From: sandy.sandeeep at gmail.com (sandeep kumar)
Date: Fri, 3 Jan 2014 19:26:25 +0530
Subject: [rabbitmq-discuss] flow control in rabbitmq
In-Reply-To: <CAC3dgDeP0n10ODR67Q7DiUEMN4bNWyPwU0O56R1=+VJQtoUU8Q@mail.gmail.com>
References: <CAC3dgDeP0n10ODR67Q7DiUEMN4bNWyPwU0O56R1=+VJQtoUU8Q@mail.gmail.com>
Message-ID: <CAC3dgDc=rY__ViKcEBtjZS1EGVd9MuGvtv9cyJ0LDwRA3UyWBg@mail.gmail.com>

Hi ,

I m using rabbitmqserver v 3.2.0
Scenario 1:
I continously sent messages to rabbitMQ Server using basic publish()
without "publisher confirms".
when the memory limit is breached by the server, the connections are
getting blocked.
Even after the connections are blocked, for some interval of time, i see
publish() being successful .
Those successfully published messages which are sent after blocked
connection are neither in queue nor in rdq files

Is the message loss expected?

Scenario 2:

I continously sent messages to server using basic publish() with "publisher
confirms" for each message.
when the memory limit is breached by the server the connections are getting
blocked.
Even after the connections are blocked, for some interval of time, i see
publish() being successful .
Those successfully published messages which are sent after blocked
connection are neither in queue nor in rdq files
There is message loss and the rate of message publishing is dropping
drastically by 80 to 90 percent if we use " publisher confirms"

Is this expected?

If these  are expected behaviours, how do we avoid message loss ?




On Mon, Dec 30, 2013 at 3:33 PM, sandeep kumar <sandy.sandeeep at gmail.com>wrote:

> Hi ,
>
> I have used single rabbitmq node , And I set  memory_high_watermark to a
> small value(0.05)
> and messages are being sent to the rabbitmq node at a higher rate.
> When memory is about to be breached because of higher rate of messages to
> the node creation of .rdq files is observed.
> when the memory consumtion crosses the limit all connections to the node
> getting blocked is observed.
> At this point of time there is neither increase in queue size nor .rdq
> size, but publish to queue statemt is getting executed.
>
> Questions are :
>
> where are the published messages are getting store when connections to
> queue are in blocked state
>
> how to handle this kind of scenario gracefully
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140103/fbf562c8/attachment.html>

From jesper.louis.andersen at gmail.com  Fri Jan  3 13:59:02 2014
From: jesper.louis.andersen at gmail.com (Jesper Louis Andersen)
Date: Fri, 3 Jan 2014 14:59:02 +0100
Subject: [rabbitmq-discuss] Option for surviving connection failure
 feature suggestion
In-Reply-To: <e1669d74-68d0-4484-a847-7b7d350bd4b0@googlegroups.com>
References: <e1669d74-68d0-4484-a847-7b7d350bd4b0@googlegroups.com>
Message-ID: <CAGrdgiXp9BQitZi+VxTnT3+pPWnxspoP6R3sLTc2Xa2P76TpVQ@mail.gmail.com>

On Thu, Dec 5, 2013 at 7:17 PM, Wayne Brantley <wayne.brantley at gmail.com>wrote:

> When processing long running messages, if the connection drops or gets
> interrupted - the message will be handed to another consumer.
> Meanwhile, the original consumer is still doing the work.
>

This depends on your implementation. In a sane implementaiton, you would
detect the connection drop and stop the work. A common trick is to run the
connection drop concurrently with the processing code and then have the
processing code periodically check a flag or something.


-- 
J.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140103/f8c8abc5/attachment.html>

From sandy.sandeeep at gmail.com  Fri Jan  3 14:03:12 2014
From: sandy.sandeeep at gmail.com (sandeep kumar)
Date: Fri, 3 Jan 2014 19:33:12 +0530
Subject: [rabbitmq-discuss] flow control in rabbitmq
In-Reply-To: <CAC3dgDeP0n10ODR67Q7DiUEMN4bNWyPwU0O56R1=+VJQtoUU8Q@mail.gmail.com>
References: <CAC3dgDeP0n10ODR67Q7DiUEMN4bNWyPwU0O56R1=+VJQtoUU8Q@mail.gmail.com>
Message-ID: <CAC3dgDeHzrq6NJ_fwjX5Eg-gdA5AJ9yEZMGuL8Dh8detosRdZA@mail.gmail.com>

Regarding the two scenarioes mentioned in the previous post
How do we avoid message loss with out affecting performance using
"publisher confirms" method?

Thanks,
sandeep



On Mon, Dec 30, 2013 at 3:33 PM, sandeep kumar <sandy.sandeeep at gmail.com>wrote:

> Hi ,
>
> I have used single rabbitmq node , And I set  memory_high_watermark to a
> small value(0.05)
> and messages are being sent to the rabbitmq node at a higher rate.
> When memory is about to be breached because of higher rate of messages to
> the node creation of .rdq files is observed.
> when the memory consumtion crosses the limit all connections to the node
> getting blocked is observed.
> At this point of time there is neither increase in queue size nor .rdq
> size, but publish to queue statemt is getting executed.
>
> Questions are :
>
> where are the published messages are getting store when connections to
> queue are in blocked state
>
> how to handle this kind of scenario gracefully
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140103/e7202e4e/attachment.html>

From Michel.Grenier at ssc-spc.gc.ca  Fri Jan  3 21:13:05 2014
From: Michel.Grenier at ssc-spc.gc.ca (Grenier,Michel [CMC])
Date: Fri, 3 Jan 2014 16:13:05 -0500
Subject: [rabbitmq-discuss] messages grouped and each group differently
	restricted
Message-ID: <7F414B031B795146A3697F7EF8C50667A1186A@SQYL07EXMAIL7.quebec.int.ec.gc.ca>


Hi  rabbitmq gurus.

    I now have messages on my rabbitmq servers  that I consider public...
    All my users have access to all of them.   
    So  same vhost,  exchange,  exchange_type,  and various exchange_key possibilities
    because the  type of messages varies a lot.
    Everything works fine.

    Now I would like add several new messages and restrict them in this way :

1-	The new messages will be grouped according to their content...  into a bunch of categories
2-	Each category is independent from another (no message in common)
3-	Each category is restricted (not public) 
4-	Only a  few users  will be allow to receive messages from categories
5-	Each user can be granted a different subsets of these categories ...
	
    What is the best way of doing this ?   

    Each  category becomes  a different  vhost    and than
    set  permission for the corresponding vhost   to the targetted users ?   
    I cannot figure out anything else...

    Thanks for you attention and time


Michel Grenier
Sp?cialiste Senior | Senior Specialist
acquisition et distribution de donn?es | data acquisition and distribution
Service Partag?s Canada | Shared Services Canada
Gouvernement du Canada | Government of Canada



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140103/ebed57dc/attachment.html>

From jkuch at gopivotal.com  Fri Jan  3 23:29:32 2014
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Fri, 3 Jan 2014 15:29:32 -0800
Subject: [rabbitmq-discuss] messages grouped and each group differently
	restricted
In-Reply-To: <7F414B031B795146A3697F7EF8C50667A1186A@SQYL07EXMAIL7.quebec.int.ec.gc.ca>
References: <7F414B031B795146A3697F7EF8C50667A1186A@SQYL07EXMAIL7.quebec.int.ec.gc.ca>
Message-ID: <CANOx8NmHD0r811AugtzE7LtAjrGsAb2cLpvp_My-fBVfWxvYQQ@mail.gmail.com>

Michel:

Give this a read:

http://www.rabbitmq.com/access-control.html

Much of what it sounds like you're considering doing might be accomplished
within a single vhost assuming you grant permissions to your users, and
name the resources with which they're working, appropriately.

Do note that rabbitmq permissions aren't ACLs...  rather they're per-user
patterns that specify the names of the objects (queues, exchanges, etc.)
that a user can perform operation classes (read/write/configure) upon.  The
discussion at the above URL, and the summary table, should help you anchor
your design thinking...

Best regards,
Jerry




On Fri, Jan 3, 2014 at 1:13 PM, Grenier,Michel [CMC] <
Michel.Grenier at ssc-spc.gc.ca> wrote:

>   Hi  rabbitmq gurus.
>
>     I now have messages on my rabbitmq servers  that I consider public?
>
>     All my users have access to all of them.
>
>     So  same vhost,  exchange,  exchange_type,  and various exchange_key
> possibilities
>
>     because the  type of messages varies a lot.
>
>     Everything works fine.
>
>     Now I would like add several new messages and restrict them in this
> way :
>
> 1-      The new messages will be grouped according to their content?
> into a bunch of categories
>
> 2-      Each category is independent from another (no message in common)
>
> 3-      Each category is restricted (not public)
>
> 4-      Only a  few users  will be allow to receive messages from
> categories
>
> 5-      Each user can be granted a different subsets of these categories ?
>
>
>     What is the best way of doing this ?
>
>     Each  category becomes  a different  vhost    and than
>
>     set  permission for the corresponding vhost   to the targetted users
> ?
>
>     I cannot figure out anything else?
>
>     Thanks for you attention and time
>
> Michel Grenier
>
> Sp?cialiste Senior | Senior Specialist
>
> acquisition et distribution de donn?es | data acquisition and distribution
>
> Service Partag?s Canada | Shared Services Canada
> Gouvernement du Canada | Government of Canada
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140103/630da8fd/attachment.html>

From roberto at canary.is  Sun Jan  5 00:46:13 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Sat, 4 Jan 2014 16:46:13 -0800
Subject: [rabbitmq-discuss] RabbitMQ for ARM
In-Reply-To: <CANAFtV4gPRCAg7f=OCpB72qRTaJJNJwrA=v7WMG2mhVL7W2jQg@mail.gmail.com>
References: <CANAFtV4_hksr8hYaJBuhPFYjc3uig3ii5dDhVGiTb8XamyotKg@mail.gmail.com>
 <l9v6fd$f6t$1@ger.gmane.org>
 <CANOx8NnY3sjPPSMjnA5midf9J2_K+GyvGnXdcjRrLaguBgUPdw@mail.gmail.com>
 <l9vcm5$afh$1@ger.gmane.org>
 <CANOx8Nn81cn8Z+AWWvbnJ7SN=--QobEYVD1iPsuUJYpK0LifNA@mail.gmail.com>
 <CANAFtV4gPRCAg7f=OCpB72qRTaJJNJwrA=v7WMG2mhVL7W2jQg@mail.gmail.com>
Message-ID: <CANAFtV5y9-aqFU8LH4e5v3JAmMniKRAgMkhdRK07SmjSg3Q9xw@mail.gmail.com>

I'm trying to compile this one

https://github.com/alanxz/rabbitmq-c

without using cake, because I would like to do it with Netbeans, instead.
Can somebody tell me which header, cpp and libraries do I need to include
to the project for compiling the examples?

Thank you,


On Thu, Jan 2, 2014 at 7:23 AM, Roberto Pagliari <roberto at canary.is> wrote:

> Thank you Jerry. I will try.
>
> Roberto
>
>
>
> On Tue, Dec 31, 2013 at 5:08 PM, Jerry Kuch <jkuch at gopivotal.com> wrote:
>
>> Agreed. If you need an AMQP client that you have to compile to native
>> code somewhere, this is your best choice. It's also a compact and
>> conceptually simple enough piece of code that it doesn't benefit hugely
>> from a lot of OOP-i-ness spackled atop it anyway...  once library and
>> toolchain dependencies grow these things get hard to use pretty quickly.
>>
>>
>>
>> On Tue, Dec 31, 2013 at 1:24 PM, Matwey V. Kornilov <
>> matwey.kornilov at gmail.com> wrote:
>>
>>> 31.12.2013 23:44, Jerry Kuch ?????:
>>>
>>>  That's the one I've used on ARM-based iOS successfully.
>>>>
>>>
>>> Small wonder. I really don't think that this library can include
>>> something architecture specific.
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140104/9a000744/attachment.html>

From alan.antonuk at gmail.com  Sun Jan  5 02:16:48 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Sat, 4 Jan 2014 18:16:48 -0800
Subject: [rabbitmq-discuss] RabbitMQ for ARM
In-Reply-To: <CANAFtV5y9-aqFU8LH4e5v3JAmMniKRAgMkhdRK07SmjSg3Q9xw@mail.gmail.com>
References: <CANAFtV4_hksr8hYaJBuhPFYjc3uig3ii5dDhVGiTb8XamyotKg@mail.gmail.com>
 <l9v6fd$f6t$1@ger.gmane.org>
 <CANOx8NnY3sjPPSMjnA5midf9J2_K+GyvGnXdcjRrLaguBgUPdw@mail.gmail.com>
 <l9vcm5$afh$1@ger.gmane.org>
 <CANOx8Nn81cn8Z+AWWvbnJ7SN=--QobEYVD1iPsuUJYpK0LifNA@mail.gmail.com>
 <CANAFtV4gPRCAg7f=OCpB72qRTaJJNJwrA=v7WMG2mhVL7W2jQg@mail.gmail.com>
 <CANAFtV5y9-aqFU8LH4e5v3JAmMniKRAgMkhdRK07SmjSg3Q9xw@mail.gmail.com>
Message-ID: <CAAt2poK2h5dkvQ9a_vtOBeJFXM2t5HY6FBL_LJGQ48a1bFi_1Q@mail.gmail.com>

Netbeans should be able to handle building a CMake project:

See this for details:
http://stackoverflow.com/a/8027379/786714

-Alan


On Sat, Jan 4, 2014 at 4:46 PM, Roberto Pagliari <roberto at canary.is> wrote:

> I'm trying to compile this one
>
> https://github.com/alanxz/rabbitmq-c
>
> without using cake, because I would like to do it with Netbeans, instead.
> Can somebody tell me which header, cpp and libraries do I need to include
> to the project for compiling the examples?
>
> Thank you,
>
>
> On Thu, Jan 2, 2014 at 7:23 AM, Roberto Pagliari <roberto at canary.is>wrote:
>
>> Thank you Jerry. I will try.
>>
>> Roberto
>>
>>
>>
>> On Tue, Dec 31, 2013 at 5:08 PM, Jerry Kuch <jkuch at gopivotal.com> wrote:
>>
>>> Agreed. If you need an AMQP client that you have to compile to native
>>> code somewhere, this is your best choice. It's also a compact and
>>> conceptually simple enough piece of code that it doesn't benefit hugely
>>> from a lot of OOP-i-ness spackled atop it anyway...  once library and
>>> toolchain dependencies grow these things get hard to use pretty quickly.
>>>
>>>
>>>
>>> On Tue, Dec 31, 2013 at 1:24 PM, Matwey V. Kornilov <
>>> matwey.kornilov at gmail.com> wrote:
>>>
>>>> 31.12.2013 23:44, Jerry Kuch ?????:
>>>>
>>>>  That's the one I've used on ARM-based iOS successfully.
>>>>>
>>>>
>>>> Small wonder. I really don't think that this library can include
>>>> something architecture specific.
>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> rabbitmq-discuss mailing list
>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>
>>>
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140104/136d2c96/attachment.html>

From roberto at canary.is  Sun Jan  5 05:08:20 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Sat, 4 Jan 2014 21:08:20 -0800
Subject: [rabbitmq-discuss] RabbitMQ for ARM
In-Reply-To: <CAAt2poK2h5dkvQ9a_vtOBeJFXM2t5HY6FBL_LJGQ48a1bFi_1Q@mail.gmail.com>
References: <CANAFtV4_hksr8hYaJBuhPFYjc3uig3ii5dDhVGiTb8XamyotKg@mail.gmail.com>
 <l9v6fd$f6t$1@ger.gmane.org>
 <CANOx8NnY3sjPPSMjnA5midf9J2_K+GyvGnXdcjRrLaguBgUPdw@mail.gmail.com>
 <l9vcm5$afh$1@ger.gmane.org>
 <CANOx8Nn81cn8Z+AWWvbnJ7SN=--QobEYVD1iPsuUJYpK0LifNA@mail.gmail.com>
 <CANAFtV4gPRCAg7f=OCpB72qRTaJJNJwrA=v7WMG2mhVL7W2jQg@mail.gmail.com>
 <CANAFtV5y9-aqFU8LH4e5v3JAmMniKRAgMkhdRK07SmjSg3Q9xw@mail.gmail.com>
 <CAAt2poK2h5dkvQ9a_vtOBeJFXM2t5HY6FBL_LJGQ48a1bFi_1Q@mail.gmail.com>
Message-ID: <CANAFtV7MjiU6UBdHpODUbfujo6kDdXMLO=yzDUV5Lj-q4JXq-w@mail.gmail.com>

Hi Alan,
I really wanted to make my own appwith  netbeans.

If you tell me which header files, cpp files and libs I have to include,
I will be very happy to try your implementation.

Thank you in advance!!!

Roberto

On Saturday, January 4, 2014, Alan Antonuk wrote:

> Netbeans should be able to handle building a CMake project:
>
> See this for details:
> http://stackoverflow.com/a/8027379/786714
>
> -Alan
>
>
> On Sat, Jan 4, 2014 at 4:46 PM, Roberto Pagliari <roberto at canary.is<javascript:_e({}, 'cvml', 'roberto at canary.is');>
> > wrote:
>
>> I'm trying to compile this one
>>
>> https://github.com/alanxz/rabbitmq-c
>>
>> without using cake, because I would like to do it with Netbeans, instead.
>> Can somebody tell me which header, cpp and libraries do I need to include
>> to the project for compiling the examples?
>>
>> Thank you,
>>
>>
>> On Thu, Jan 2, 2014 at 7:23 AM, Roberto Pagliari <roberto at canary.is<javascript:_e({}, 'cvml', 'roberto at canary.is');>
>> > wrote:
>>
>>> Thank you Jerry. I will try.
>>>
>>> Roberto
>>>
>>>
>>>
>>> On Tue, Dec 31, 2013 at 5:08 PM, Jerry Kuch <jkuch at gopivotal.com<javascript:_e({}, 'cvml', 'jkuch at gopivotal.com');>
>>> > wrote:
>>>
>>>> Agreed. If you need an AMQP client that you have to compile to native
>>>> code somewhere, this is your best choice. It's also a compact and
>>>> conceptually simple enough piece of code that it doesn't benefit hugely
>>>> from a lot of OOP-i-ness spackled atop it anyway...  once library and
>>>> toolchain dependencies grow these things get hard to use pretty quickly.
>>>>
>>>>
>>>>
>>>> On Tue, Dec 31, 2013 at 1:24 PM, Matwey V. Kornilov <
>>>> matwey.kornilov at gmail.com <javascript:_e({}, 'cvml',
>>>> 'matwey.kornilov at gmail.com');>> wrote:
>>>>
>>>>> 31.12.2013 23:44, Jerry Kuch ?????:
>>>>>
>>>>>  That's the one I've used on ARM-based iOS successfully.
>>>>>>
>>>>>
>>>>> Small wonder. I really don't think that this library can include
>>>>> something architecture specific.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> rabbitmq-discuss mailing list
>>>>> rabbitmq-discuss at lists.rabbitmq.com <javascript:_e({}, 'cvml',
>>>>> 'rabbitmq-discuss at lists.rabbitmq.com');>
>>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> rabbitmq-discuss mailing list
>>>> rabbitmq-discuss at lists.rabbitmq.com <javascript:_e({}, 'cvml',
>>>> 'rabbitmq-discuss at lists.rabbitmq.com');>
>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>
>>>>
>>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com <javascript:_e({}, 'cvml',
>> 'rabbitmq-discuss at lists.rabbitmq.com');>
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140104/64950f72/attachment.html>

From alan.antonuk at gmail.com  Sun Jan  5 06:22:50 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Sat, 4 Jan 2014 22:22:50 -0800
Subject: [rabbitmq-discuss] RabbitMQ for ARM
In-Reply-To: <CANAFtV7MjiU6UBdHpODUbfujo6kDdXMLO=yzDUV5Lj-q4JXq-w@mail.gmail.com>
References: <CANAFtV4_hksr8hYaJBuhPFYjc3uig3ii5dDhVGiTb8XamyotKg@mail.gmail.com>
 <l9v6fd$f6t$1@ger.gmane.org>
 <CANOx8NnY3sjPPSMjnA5midf9J2_K+GyvGnXdcjRrLaguBgUPdw@mail.gmail.com>
 <l9vcm5$afh$1@ger.gmane.org>
 <CANOx8Nn81cn8Z+AWWvbnJ7SN=--QobEYVD1iPsuUJYpK0LifNA@mail.gmail.com>
 <CANAFtV4gPRCAg7f=OCpB72qRTaJJNJwrA=v7WMG2mhVL7W2jQg@mail.gmail.com>
 <CANAFtV5y9-aqFU8LH4e5v3JAmMniKRAgMkhdRK07SmjSg3Q9xw@mail.gmail.com>
 <CAAt2poK2h5dkvQ9a_vtOBeJFXM2t5HY6FBL_LJGQ48a1bFi_1Q@mail.gmail.com>
 <CANAFtV7MjiU6UBdHpODUbfujo6kDdXMLO=yzDUV5Lj-q4JXq-w@mail.gmail.com>
Message-ID: <CAAt2poLpk8jPmkwsfLuVxoOt6pQE0WNWrbCU2C7oQhOTvmHx2A@mail.gmail.com>

Compiling rabbitmq-c isn't quite as straight forward as compiling all of
the files and linking them, there's a certain amount of introspection the
build system does to detect what needs to be done correctly build the
library, take a look at the CMakeLists.txt files in source repository to
get an idea of what CMake does.

My suggestion to you is to use the CMake-based build system (which can be
built in NetBeans), then link to that library from your own project.

Unfortunately, I don't have the spare time to support other build systems.

-Alan

On Sat, Jan 4, 2014 at 9:08 PM, Roberto Pagliari <roberto at canary.is> wrote:

> Hi Alan,
> I really wanted to make my own appwith  netbeans.
>
> If you tell me which header files, cpp files and libs I have to include,
> I will be very happy to try your implementation.
>
> Thank you in advance!!!
>
> Roberto
>
> On Saturday, January 4, 2014, Alan Antonuk wrote:
>
>> Netbeans should be able to handle building a CMake project:
>>
>> See this for details:
>> http://stackoverflow.com/a/8027379/786714
>>
>> -Alan
>>
>>
>> On Sat, Jan 4, 2014 at 4:46 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>
>>> I'm trying to compile this one
>>>
>>> https://github.com/alanxz/rabbitmq-c
>>>
>>> without using cake, because I would like to do it with Netbeans,
>>> instead. Can somebody tell me which header, cpp and libraries do I need to
>>> include to the project for compiling the examples?
>>>
>>> Thank you,
>>>
>>>
>>> On Thu, Jan 2, 2014 at 7:23 AM, Roberto Pagliari <roberto at canary.is>wrote:
>>>
>>>> Thank you Jerry. I will try.
>>>>
>>>> Roberto
>>>>
>>>>
>>>>
>>>> On Tue, Dec 31, 2013 at 5:08 PM, Jerry Kuch <jkuch at gopivotal.com>wrote:
>>>>
>>>>> Agreed. If you need an AMQP client that you have to compile to native
>>>>> code somewhere, this is your best choice. It's also a compact and
>>>>> conceptually simple enough piece of code that it doesn't benefit hugely
>>>>> from a lot of OOP-i-ness spackled atop it anyway...  once library and
>>>>> toolchain dependencies grow these things get hard to use pretty quickly.
>>>>>
>>>>>
>>>>>
>>>>> On Tue, Dec 31, 2013 at 1:24 PM, Matwey V. Kornilov <
>>>>> matwey.kornilov at gmail.com> wrote:
>>>>>
>>>>>> 31.12.2013 23:44, Jerry Kuch ?????:
>>>>>>
>>>>>>  That's the one I've used on ARM-based iOS successfully.
>>>>>>>
>>>>>>
>>>>>> Small wonder. I really don't think that this library can include
>>>>>> something architecture specific.
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> rabbitmq-discuss mailing list
>>>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>>>
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> rabbitmq-discuss mailing list
>>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>>
>>>>>
>>>>
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>>
>>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140104/220b9108/attachment.html>

From Rohit.Patel2 at techmahindra.com  Sun Jan  5 14:12:48 2014
From: Rohit.Patel2 at techmahindra.com (Rohit Patle)
Date: Sun, 5 Jan 2014 14:12:48 +0000
Subject: [rabbitmq-discuss] Quries about amqp_channel_close.
Message-ID: <27E054594442884E9A46DBCF9AE7408162B558@BSDMSATMBX001.mahindrasatyam.ad>

Hi Alan,

Thanks you for description.

Thanks & Regards,
Rohit

________________________________

DISCLAIMER:
This email (including any attachments) is intended for the sole use of the intended recipient/s and may contain material that is CONFIDENTIAL AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or distribution or forwarding of any or all of the contents in this message is STRICTLY PROHIBITED. If you are not the intended recipient, please contact the sender by email and delete all copies; your cooperation in this regard is appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140105/86693c1d/attachment.html>

From mgg at giagnocavo.net  Mon Jan  6 04:19:36 2014
From: mgg at giagnocavo.net (Michael Giagnocavo)
Date: Mon, 6 Jan 2014 04:19:36 +0000
Subject: [rabbitmq-discuss] Scaling single queues
Message-ID: <3e93534f5b2b4319a2ec688b535295dc@CO1PR07MB331.namprd07.prod.outlook.com>

I've read that queues are "single threaded", and thus might be a source of bottlenecks. I'd like to know what the best way to get around that limitation is. Here's our scenario:

We have 20+ producing machines running RabbitMQ. A process local to each server drops messages off, around 100/sec.
We have a central RabbitMQ which runs the Shovel plugin and brings all those producer queues into a main fanout exchange.
This exchange fans out to 4 (soon to be 6) separate queues (separate consumers for various processes like logging, archiving, balance updates, partner export, etc.)
The messages are under 300 bytes, and billing records, so we use persistence, durability, and transactions.

The peak rate into the central fanout is around 3000 msg/sec, but averages around 2000msg/sec for most of the day. At night it drops to under 100.
Shoveling works just great; after a backlog, we can see it delivering 4000 msg/sec to each queue from the fanout.
The central server has 8 cores (Xeon 5450), 16GB RAM, and a 512MB battery backed write cache. (Rabbit 3.2.2, Erlang R16B03, although this happened on 3.1.5 as well.)

The problem: No matter how I consume, I can't seem to get above 2000msg/sec from any single queue. Some days, I end up with a backlog of 25M+ messages in a queue. I have a multithreaded consumer process (.NET client), with plenty of CPU and RAM free. It reads batches of messages from RabbitMQ, then does a transaction to SQL Server, then TxCommit to RabbitMQ and repeats. With 2 threads and a batch size of 200, I get 2000msg/sec. I've tried all combinations of batch size, threads, and prefetch. The result is the same: 2000msg/sec average is all it can get from RabbitMQ. Adding more consumers just means each one gets less msgs/sec. Consumers are on a gigabit LAN.

Using iotop, I don't see any disk issues on the Rabbit server, and 6 of the 8 CPUs are free. The fact that setting up huge batches (I tried 500msg/tx) doesn't make any noticeable difference further convinces me it's not related to IO. There's many GB of RAM free (not even halfway to high watermark). I notice that RabbitMQ's CPU never goes much above 210% (2 out of 8 CPUs), and top indicates that 2 CPUs are usually always pegged, although the exact CPUs vary (so it'll run 0 and 1 at 100% , then a few seconds later run 3 and 4 at 200%, and so on).

This leads me to believe there's some sort of CPU-related bottleneck in RabbitMQ related to high rates on a single queue, at least for transactional, persistent messages.

How should I go about solving this? My current idea is to just run another "central" RabbitMQ server, and have it shovel from all producers, then have every consumer connect to every "central" machine. In fact, I could probably accomplish this just by running more shovels with different targets, but within the same RabbitMQ server. The producer servers would distribute the load to the various shovel consumers and eliminate any single bottleneck.

Does that make sense? Is there an easier way? I was considering using consistent hashing, then generating a random routing key to load balance to multiple queues on the same machine. (So I'd have billing1, billing2, archive1, archive2, etc.) But I think that might conflict for our plans to add topic routing (some consumers only need a small subset of the messages).

Currently we are not running in an HA cluster, using the Hypervisor capabilities to provide some disaster recovery. But we plan on turning into a proper cluster, if that makes a difference.

I appreciate any assistance or reading material. I looked at federation, but it seems it's isomorphic to what we're doing with shoveling.

-Michael

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140106/65ec016d/attachment.html>

From kournjaev at gmail.com  Mon Jan  6 08:22:05 2014
From: kournjaev at gmail.com (Roman Kournjaev)
Date: Mon, 6 Jan 2014 00:22:05 -0800 (PST)
Subject: [rabbitmq-discuss] Scaling rabbitmq on ec2
In-Reply-To: <13c5c66f-bbed-4d96-b8e8-03402916c91d@googlegroups.com>
References: <13c5c66f-bbed-4d96-b8e8-03402916c91d@googlegroups.com>
Message-ID: <3a0979c1-3c3b-47fa-9812-dd9b93793af3@googlegroups.com>

Anyone ? There must be at least someone in that group that could answer my 
question ...

On Tuesday, December 31, 2013 11:20:58 AM UTC+2, Roman Kournjaev wrote:
>
> Hi
>
> I hope someone can help me out with some advice , cause I am struggling 
> for quite a while now.
>
> I have some ad server application running on AWS ec2. The server are 
> tomcats that can scale , with the load right now I have 10 servers running. 
> The overall load on the servers is something 1K rps . It produces twice as 
> much messages that have to be persisted eventually.
>
> Right now the servers send these messages to rabbitmq instances ( that are 
> not connected to a cluster ) , each tomcat has an open connection to every 
> rabbitmq broker and just picks one randomly to send a message.
>
> On the other side I have a consumer that consumes all the messages from 
> all the brokers.
>
> The brokers are running on a medium instance ( thats 1 cpu and 3.5 GB ram 
> ) and the queues are not persistent or mirrored. The issue is that the 
> brokers get to 100 cpu at speeds reaching 700 messages/sec. 
>
> I guess connecting the brokers to a cluster will only decrease the 
> performance also i will have to configure a tcp load balancer to connect to 
> the cluster from tomcats. Also creating a rabbitmq cluster is not trivial 
> at all , especially if the brokers are on an auto scaling group.
>
> So for the question : 
>
>
>    1. I read some benchmarks out there and could not understand whether 
>    the 700m/sec is slow or not. I can use a bigger instance with more CPU , 
>    but will the load grow linear ? 
>    2. Do you spot anything wrong in the architecture ? Can you think of 
>    an overall better approach in the message chain ?
>
>
> Thanks
> Roman
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140106/b0e09984/attachment.html>

From mklishin at gopivotal.com  Mon Jan  6 08:31:07 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 6 Jan 2014 12:31:07 +0400
Subject: [rabbitmq-discuss] Scaling rabbitmq on ec2
In-Reply-To: <3a0979c1-3c3b-47fa-9812-dd9b93793af3@googlegroups.com>
References: <13c5c66f-bbed-4d96-b8e8-03402916c91d@googlegroups.com>
 <3a0979c1-3c3b-47fa-9812-dd9b93793af3@googlegroups.com>
Message-ID: <E8175BB8-0070-4467-A44F-211C3354E748@rabbitmq.com>

On 6 Jan 2014, at 12:22, Roman Kournjaev <kournjaev at gmail.com> wrote:

> Anyone ? There must be at least someone in that group that could answer my question ...

Roman,

There was a reply to your question:
http://markmail.org/thread/orxbxrhbbyhjgu5g

Please subscribe to rabbitmq-discuss instead of the google group, which is a mirror
that often lags significantly behind.

MK

Software Engineer, Pivotal/RabbitMQ



From simon at rabbitmq.com  Mon Jan  6 08:38:41 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 06 Jan 2014 08:38:41 +0000
Subject: [rabbitmq-discuss] How to deal with untrusted publishers
In-Reply-To: <5be96243-11c3-4ff7-9a4e-db578acafa56@googlegroups.com>
References: <5be96243-11c3-4ff7-9a4e-db578acafa56@googlegroups.com>
Message-ID: <52CA6B91.6080501@rabbitmq.com>

On 21/12/2013 15:03, Dennis Jacobfeuerborn wrote:
> I really need to insert the <publisher> bit on the broker side based on
> the username the publisher connects with

See http://www.rabbitmq.com/validated-user-id.html

Cheers, Simon

From simon at rabbitmq.com  Mon Jan  6 09:38:15 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 06 Jan 2014 09:38:15 +0000
Subject: [rabbitmq-discuss] Ability to log module & timestamp in startup
 and shutdown_log
In-Reply-To: <1387563663852-32257.post@n5.nabble.com>
References: <1387397542306-32206.post@n5.nabble.com>
 <52B2CFA2.4050405@rabbitmq.com> <1387563663852-32257.post@n5.nabble.com>
Message-ID: <52CA7987.3000405@rabbitmq.com>

Peter,

No, the startup_log and startup_err are just records of what gets 
printed on stdout / stderr during startup.

In more recent versions of RabbitMQ than the one you are using we have 
minimised what gets printed to stdout anyway (prceisely since it doesn't 
go through a real logging mechanism), and the "starting blah" lines are 
gone. The real logs don't contain that info either (it's not very 
interesting).

What are you trying to do?

Cheers, Simon

On 20/12/2013 18:21, Peter Moon wrote:
> Hi Simon,
>
> So from your previous email it seems that turning on a log_level or other
> switch in the above URL will not help with my request - i.e. the bracket
> fields denote information that I would like to get in the logs.
>
> thanks
>
> Peter
>
> <timestamp> <module responsible> starting alarm handler
> ...done
> starting node monitor
> ...done
>
>
>
> --
> View this message in context: http://rabbitmq.1065348.n5.nabble.com/Ability-to-log-module-timestamp-in-startup-and-shutdown-log-tp32206p32257.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


From simon at rabbitmq.com  Mon Jan  6 09:41:56 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 06 Jan 2014 09:41:56 +0000
Subject: [rabbitmq-discuss] When rabbitmq is clustered with one other
 node we see a very slow dequeue of messages
In-Reply-To: <loom.20131227T191248-958@post.gmane.org>
References: <083E352F62C9974389AD0F9F875EA238179D94A4F6@THSONEA03CMS03P.ONE-03.GRP>
 <529F14D9.8060203@rabbitmq.com>
 <083E352F62C9974389AD0F9F875EA238179D94AB3C@THSONEA03CMS03P.ONE-03.GRP>
 <loom.20131206T020729-16@post.gmane.org>
 <loom.20131206T221755-465@post.gmane.org> <52A7343D.4020003@rabbitmq.com>
 <loom.20131227T191248-958@post.gmane.org>
Message-ID: <52CA7A64.3080102@rabbitmq.com>

On 27/12/2013 18:13, James wrote:
> Do you have a target release date/version for this issue?

I'm afraid not. I haven't even had time to look at it yet. It won't get 
forgotten though.

Cheers, Simon


From simon at rabbitmq.com  Mon Jan  6 09:46:41 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 06 Jan 2014 09:46:41 +0000
Subject: [rabbitmq-discuss] MQ consumer become very slow if there are a
 lot of ready message
In-Reply-To: <tencent_6422895F3FA7FA061ED0BAB9@qq.com>
References: <tencent_6422895F3FA7FA061ED0BAB9@qq.com>
Message-ID: <52CA7B81.5090304@rabbitmq.com>

On 30/12/2013 16:44, ?? wrote:
> After a while, the queue consumer become slow, about 2,000,000 messages
> stayed in queue.
> Then I stop the consumer and restart a new consumer, the speed of
> consumption was still very slow, about 10~700/sec.
>
> My question is why the speed of consumption can not back to the 7k/sec?
> How to improve the speed.

The queue may have started to page its contents out to disk - if so, 
retrieving them can get slower. You can look at the queue details page 
in the management plugin to see if this is the case.

See http://www.rabbitmq.com/memory.html#memsup-paging for some 
configuration.

Cheers, Simon

From simon at rabbitmq.com  Mon Jan  6 09:55:33 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 06 Jan 2014 09:55:33 +0000
Subject: [rabbitmq-discuss] flow control in rabbitmq
In-Reply-To: <CAC3dgDc=rY__ViKcEBtjZS1EGVd9MuGvtv9cyJ0LDwRA3UyWBg@mail.gmail.com>
References: <CAC3dgDeP0n10ODR67Q7DiUEMN4bNWyPwU0O56R1=+VJQtoUU8Q@mail.gmail.com>
 <CAC3dgDc=rY__ViKcEBtjZS1EGVd9MuGvtv9cyJ0LDwRA3UyWBg@mail.gmail.com>
Message-ID: <52CA7D95.6090005@rabbitmq.com>

On 03/01/2014 13:56, sandeep kumar wrote:
> Hi ,
>
> I m using rabbitmqserver v 3.2.0
> Scenario 1:
> I continously sent messages to rabbitMQ Server using basic publish()
> without "publisher confirms".
> when the memory limit is breached by the server, the connections are
> getting blocked.
> Even after the connections are blocked, for some interval of time, i see
> publish() being successful .
> Those successfully published messages which are sent after blocked
> connection are neither in queue nor in rdq files
>
> Is the message loss expected?

Note that the messages aren't "lost" exactly; they are in network 
buffers and will get into the broker as soon as the memory alarm clears 
(barring failure).

> Scenario 2:
>
> I continously sent messages to server using basic publish() with
> "publisher confirms" for each message.
> when the memory limit is breached by the server the connections are
> getting blocked.
> Even after the connections are blocked, for some interval of time, i see
> publish() being successful .
> Those successfully published messages which are sent after blocked
> connection are neither in queue nor in rdq files
> There is message loss and the rate of message publishing is dropping
> drastically by 80 to 90 percent if we use " publisher confirms"

I'm not sure how you are seeing "message loss" even by the definition of 
"messages waiting in network buffers" when using publisher confirms.

If you are seeing a performance drop of 90% when using confirms, I 
suspect you are publishing one message, then waiting for a confirm, then 
publishing another. That's an antipattern because network latency 
becomes a limiting factor. You should either publish a batch of 
messages, then wait for them to be confirmed (often easier) or (ideally) 
publish messages as a continuous stream and handle confirms as they come in.

You might also be interested in 
http://www.rabbitmq.com/connection-blocked.html

Cheers, Simon


From simon at rabbitmq.com  Mon Jan  6 09:56:21 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 06 Jan 2014 09:56:21 +0000
Subject: [rabbitmq-discuss] LDAP authentication
In-Reply-To: <52ae0ce9-6829-48b9-9131-04c5c03db468@googlegroups.com>
References: <52ae0ce9-6829-48b9-9131-04c5c03db468@googlegroups.com>
Message-ID: <52CA7DC5.80709@rabbitmq.com>

On 02/01/2014 10:35, Hoang Viet wrote:
> I want to have external LDAP authentication, but keep users information
> and permission control inside RabbitMQ. How do I modify the LDAP
> extension to have this? Or anyone can help me to build this
> customization plugin?

That's not currently possible. It's on its way to being a frequently 
requested feature though, so it's on the radar.

Cheers, Simon

From mandyce2006 at gmail.com  Mon Jan  6 11:36:23 2014
From: mandyce2006 at gmail.com (Mandar Phatak)
Date: Mon, 6 Jan 2014 17:06:23 +0530
Subject: [rabbitmq-discuss] Ability to log module & timestamp in startup
 and shutdown_log
In-Reply-To: <52CA7987.3000405@rabbitmq.com>
References: <1387397542306-32206.post@n5.nabble.com>
 <52B2CFA2.4050405@rabbitmq.com>
 <1387563663852-32257.post@n5.nabble.com> <52CA7987.3000405@rabbitmq.com>
Message-ID: <CAJXycg0526cFk6r21QePuo_oGdU1yFYqmGFYZKm8JfacBy4SaQ@mail.gmail.com>

Please exclude me from mail list.

Best regards,
Mandar


On Mon, Jan 6, 2014 at 3:08 PM, Simon MacMullen <simon at rabbitmq.com> wrote:

> Peter,
>
> No, the startup_log and startup_err are just records of what gets printed
> on stdout / stderr during startup.
>
> In more recent versions of RabbitMQ than the one you are using we have
> minimised what gets printed to stdout anyway (prceisely since it doesn't go
> through a real logging mechanism), and the "starting blah" lines are gone.
> The real logs don't contain that info either (it's not very interesting).
>
> What are you trying to do?
>
> Cheers, Simon
>
> On 20/12/2013 18:21, Peter Moon wrote:
>
>> Hi Simon,
>>
>> So from your previous email it seems that turning on a log_level or other
>> switch in the above URL will not help with my request - i.e. the bracket
>> fields denote information that I would like to get in the logs.
>>
>> thanks
>>
>> Peter
>>
>> <timestamp> <module responsible> starting alarm handler
>> ...done
>> starting node monitor
>> ...done
>>
>>
>>
>> --
>> View this message in context: http://rabbitmq.1065348.n5.
>> nabble.com/Ability-to-log-module-timestamp-in-startup-and-shutdown-log-
>> tp32206p32257.html
>> Sent from the RabbitMQ mailing list archive at Nabble.com.
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140106/df08074e/attachment.html>

From emile at rabbitmq.com  Mon Jan  6 13:54:03 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 06 Jan 2014 13:54:03 +0000
Subject: [rabbitmq-discuss] Scaling single queues
In-Reply-To: <3e93534f5b2b4319a2ec688b535295dc@CO1PR07MB331.namprd07.prod.outlook.com>
References: <3e93534f5b2b4319a2ec688b535295dc@CO1PR07MB331.namprd07.prod.outlook.com>
Message-ID: <52CAB57B.3070505@rabbitmq.com>

On 06/01/14 04:19, Michael Giagnocavo wrote:

> The messages are under 300 bytes, and billing records, so we use
> persistence, durability, and transactions.


How big are the transactions? Are you sure you need transactions? Have
you tried without transactions, or increasing the transaction size?

What is the largest number of unacknowledged messages that you have at
any time? Have you tried to raise that number?

Can you explain what you mean by batch size?

Are you supplying any non-standard parameters to the Erlang VM? Can you
show the output of "rabbitmqctl status" ?



I think this test simulates your environment:

runjava.sh  com.rabbitmq.examples.PerfTest -s 300 -n 200 -q 200 -y 2 -f
persistent

What message rate can the test maintain with these parameters?




-Emile





From viet.hoang at quant-edge.com  Mon Jan  6 14:15:24 2014
From: viet.hoang at quant-edge.com (Viet Hoang (Quant Edge))
Date: Mon, 06 Jan 2014 06:15:24 -0800 (PST)
Subject: [rabbitmq-discuss] LDAP authentication
In-Reply-To: <52CA7DC5.80709@rabbitmq.com>
References: <52CA7DC5.80709@rabbitmq.com>
Message-ID: <1389017723911.5c3962ef@Nodemailer>

Do you know any where I can hire an Erlang developer to contribute for this extension?




This will be made open source for the community.








On Mon, Jan 6, 2014 at 4:56 PM, Simon MacMullen <simon at rabbitmq.com="mailto:simon at rabbitmq.com">> wrote:
On 02/01/2014 10:35, Hoang Viet wrote:

> I want to have external LDAP authentication, but keep users information

> and permission control inside RabbitMQ. How do I modify the LDAP

> extension to have this? Or anyone can help me to build this

> customization plugin?


That's not currently possible. It's on its way to being a frequently 

requested feature though, so it's on the radar.


Cheers, Simon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140106/5ef5a90f/attachment.html>

From mgg at giagnocavo.net  Mon Jan  6 20:13:14 2014
From: mgg at giagnocavo.net (Michael Giagnocavo)
Date: Mon, 6 Jan 2014 20:13:14 +0000
Subject: [rabbitmq-discuss] Scaling single queues
In-Reply-To: <52CAB57B.3070505@rabbitmq.com>
References: <3e93534f5b2b4319a2ec688b535295dc@CO1PR07MB331.namprd07.prod.outlook.com>
 <52CAB57B.3070505@rabbitmq.com>
Message-ID: <c2fb26130afc4857b002485f347013cd@CO1PR07MB331.namprd07.prod.outlook.com>

>> The messages are under 300 bytes, and billing records, so we use 
>> persistence, durability, and transactions.
>How big are the transactions? Are you sure you need transactions? Have you tried without transactions, or increasing the transaction size?

We really want the assurance of transactions so we haven't tried without it. The size of the transaction is our "batch" size. I've tried with as low as 50, and as high as 500. No difference in overall throughput.

>What is the largest number of unacknowledged messages that you have at any time? Have you tried to raise that number?

Usually it's about 0. I set prefetch as high as 25,000 and it didn't seem to help. Almost all the time in the consumer is spent waiting for messages.

>Are you supplying any non-standard parameters to the Erlang VM? Can you show the output of "rabbitmqctl status" ?

Not that I know of. We considered HiPE, but heard so many bad things we figured it wasn't worth the potential data loss if things segfault at the wrong place.

Status at the bottom. The other thing I just thought of is that maybe the messages are being paged to disk when I've got tens of millions backlogged. I think I would have seen that in iotop, but it's a possibility. "Unfortunately", today our consumers have kept up and there's no backlog so I can't tell.

I'll run that perf test tonight when the machine is mostly idle. 

Thank you,
-Michael

connection_procs,4677680},
      {queue_procs,3531416},
      {plugins,1414832},
      {other_proc,17968600},
      {mnesia,109816},
      {mgmt_db,1530208},
      {msg_index,2770832},
      {other_ets,14576224},
      {binary,12647320},
      {code,19818213},
      {atom,1361121},
      {other_system,6527882}]},
 {vm_memory_high_watermark,0.4},
 {vm_memory_limit,8381177856},
 {disk_free_limit,50000000},
 {disk_free,44984172544},
 {file_descriptors,
     [{total_limit,924},
      {total_used,41},
      {sockets_limit,829},
      {sockets_used,29}]},
 {processes,[{limit,1048576},{used,866}]},
 {run_queue,2},
 {uptime,184269}]
...done.

From sandy.sandeeep at gmail.com  Tue Jan  7 06:09:10 2014
From: sandy.sandeeep at gmail.com (sandeep kumar)
Date: Tue, 7 Jan 2014 11:39:10 +0530
Subject: [rabbitmq-discuss] flow control in rabbitmq
Message-ID: <CAC3dgDemwh-9unw5k4Wp3GO+G-iHsLE22eCocPWTh6ZiaF0Rfg@mail.gmail.com>

i have tried again the scenario 1 as mentioned in earlier post and i have
seen loss of messages by running the following scenario.

Code of sender and recevier is taken from here
http://www.rabbitmq.com/tutorials/tutorial-one-java.html

1) I have set the the vm memory high watermark as 0.0 using sudo
rabbitmqctl set_vm_memory_high_watermark 0.0
and this was the rabbitmq status

[{pid,18011},
 {running_applications,[{rabbit,"RabbitMQ","3.2.0"},
                        {os_mon,"CPO  CXC 138 46","2.2.7"},
                        {xmerl,"XML parser","1.2.10"},
                        {mnesia,"MNESIA  CXC 138 12","4.5"},
                        {sasl,"SASL  CXC 138 11","2.1.10"},
                        {stdlib,"ERTS  CXC 138 10","1.17.5"},
                        {kernel,"ERTS  CXC 138 10","2.14.5"}]},
 {os,{unix,linux}},
 {erlang_version,"Erlang R14B04 (erts-5.8.5) [source] [smp:4:4] [rq:4]
[async-threads:30] [kernel-poll:true]\n"},
 {memory,[{total,36566880},
          {connection_procs,4412},
          {queue_procs,7584},
          {plugins,0},
          {other_proc,4730524},
          {mnesia,30868},
          {mgmt_db,0},
          {msg_index,3304196},
          {other_ets,14336920},
          {binary,4477424},
          {code,7676827},
          {atom,907549},
          {other_system,1090576}]},
 {vm_memory_high_watermark,0.0},
 {vm_memory_limit,0},
 {disk_free_limit,10180000000},
 {disk_free,12359700480},
 {file_descriptors,[{total_limit,924},
                    {total_used,4},
                    {sockets_limit,829},
                    {sockets_used,1}]},
 {processes,[{limit,1048576},{used,127}]},
 {run_queue,0},
 {uptime,454}]

2) Now i sent messages to the queue in a loop of 100000
but i could see publish messages successful till 1435 and then publish( )
gets blocked.
i have stopped the sender now.
i have run listqueues command and i could see 0 messages in the queue

3) I have set the the vm memory high watermark as 0.4 using sudo
rabbitmqctl set_vm_memory_high_watermark 0.4

4) i have run listqueues command again expecting the 1435 messages
but i have seen 0 messages in queue.
and now i have run receiver but no received message in the log.


and this was the rabbitmq status

[{pid,18011},
 {running_applications,[{rabbit,"RabbitMQ","3.2.0"},
                        {os_mon,"CPO  CXC 138 46","2.2.7"},
                        {xmerl,"XML parser","1.2.10"},
                        {mnesia,"MNESIA  CXC 138 12","4.5"},
                        {sasl,"SASL  CXC 138 11","2.1.10"},
                        {stdlib,"ERTS  CXC 138 10","1.17.5"},
                        {kernel,"ERTS  CXC 138 10","2.14.5"}]},
 {os,{unix,linux}},
 {erlang_version,"Erlang R14B04 (erts-5.8.5) [source] [smp:4:4] [rq:4]
[async-threads:30] [kernel-poll:true]\n"},
 {memory,[{total,134642952},
          {connection_procs,5920},
          {queue_procs,80505068},
          {plugins,0},
          {other_proc,4761592},
          {mnesia,30868},
          {mgmt_db,0},
          {msg_index,3304196},
          {other_ets,14336920},
          {binary,22022520},
          {code,7676827},
          {atom,907549},
          {other_system,1091492}]},
 {vm_memory_high_watermark,0.4},
 {vm_memory_limit,1650614272},
 {disk_free_limit,10180000000},
 {disk_free,12359540736},
 {file_descriptors,[{total_limit,924},
                    {total_used,4},
                    {sockets_limit,829},
                    {sockets_used,1}]},
 {processes,[{limit,1048576},{used,127}]},
 {run_queue,0},
 {uptime,702}]
...done.


On Mon, Dec 30, 2013 at 3:33 PM, sandeep kumar <sandy.sandeeep at gmail.com>wrote:

> Hi ,
>
> I have used single rabbitmq node , And I set  memory_high_watermark to a
> small value(0.05)
> and messages are being sent to the rabbitmq node at a higher rate.
> When memory is about to be breached because of higher rate of messages to
> the node creation of .rdq files is observed.
> when the memory consumtion crosses the limit all connections to the node
> getting blocked is observed.
> At this point of time there is neither increase in queue size nor .rdq
> size, but publish to queue statemt is getting executed.
>
> Questions are :
>
> where are the published messages are getting store when connections to
> queue are in blocked state
>
> how to handle this kind of scenario gracefully
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/be1018a9/attachment.html>

From mark at wolfe.id.au  Tue Jan  7 07:38:22 2014
From: mark at wolfe.id.au (Mark Wolfe)
Date: Tue, 7 Jan 2014 15:38:22 +0800
Subject: [rabbitmq-discuss] MQTT topic ACLs Query
Message-ID: <CAPwMmOBHjR7Gf3jTgwQTO8CEMKcavbDjY38Yczb8wYG2H8ABYQ@mail.gmail.com>

Interested to hear if anyone intends to add ACL support to the MQTT module?

At the moment it is built around routing keys which as i understand cannot
be controlled by the existing ACLs.

Any suggestions would be appreciated.

-- 
Regards,

Mark Wolfe

--
I am not young enough to know everything.
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/636e8ea4/attachment.html>

From michael.s.klishin at gmail.com  Tue Jan  7 07:46:27 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 7 Jan 2014 11:46:27 +0400
Subject: [rabbitmq-discuss] flow control in rabbitmq
In-Reply-To: <CAC3dgDemwh-9unw5k4Wp3GO+G-iHsLE22eCocPWTh6ZiaF0Rfg@mail.gmail.com>
References: <CAC3dgDemwh-9unw5k4Wp3GO+G-iHsLE22eCocPWTh6ZiaF0Rfg@mail.gmail.com>
Message-ID: <CAE3HoVSsOZAHHecHtvGvRBS3j37CDYO6B3kPyj5LjH9BYzj4eA@mail.gmail.com>

2014/1/7 sandeep kumar <sandy.sandeeep at gmail.com>

> 2) Now i sent messages to the queue in a loop of 100000
> but i could see publish messages successful till 1435 and then publish( )
> gets blocked.
> i have stopped the sender now.
> i have run listqueues command and i could see 0 messages in the queue
>

When you stop the publisher, its socket is closed and OS releases all
buffers it was using.

Keep the publisher process up.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/f450c683/attachment.html>

From michael.s.klishin at gmail.com  Tue Jan  7 09:22:14 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 7 Jan 2014 13:22:14 +0400
Subject: [rabbitmq-discuss] ANN Langohr 2.1.0 is released
Message-ID: <CAE3HoVTR2+8ce3b3V7WuWZHX2Q-5kfo=X036DFoAUoOb_E1VxQ@mail.gmail.com>

Langohr [1] is a small, feature complete Clojure client for RabbitMQ.

2.1.0 is a bug fix and usability improvements release.

Release notes:
http://blog.clojurewerkz.org/blog/2014/01/07/langohr-2-dot-1-0-is-released/

1. http://clojurerabbitmq.info
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/a0e75f55/attachment.html>

From emiel.bruijntjes at copernica.com  Tue Jan  7 09:26:51 2014
From: emiel.bruijntjes at copernica.com (Copernica BV, Emiel Bruijntjes)
Date: Tue, 07 Jan 2014 10:26:51 +0100
Subject: [rabbitmq-discuss] New C++ client API
Message-ID: <52CBC85B.2020904@copernica.com>


Hello,

We've started a new open source C++ client API for RabbitMQ, because we 
were not happy with the ones that were around. Our new API is completely 
asynchronous, does not do any blocking IO operations and can be 
intergrated in event loops. It has a very straightforward API, and is 
well documented.

It would be nice to receive some feedback about this new API, and maybe 
even contributions.

The source code is on GitHub: 
https://github.com/CopernicaMarketingSoftware/AMQP-CPP

And could someone add a link to the 
http://www.rabbitmq.com/devtools.html page?


-- 
Copernica BV

Emiel Bruijntjes

--
Internet: www.copernica.com <http://www.copernica.com>
Tel: +31 (0)20 5206190
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/dfc47f0c/attachment.html>

From sid.young at gmail.com  Tue Jan  7 09:32:56 2014
From: sid.young at gmail.com (Sid Young)
Date: Tue, 7 Jan 2014 19:32:56 +1000
Subject: [rabbitmq-discuss] New C++ client API
In-Reply-To: <52CBC85B.2020904@copernica.com>
References: <52CBC85B.2020904@copernica.com>
Message-ID: <CAEZ+gOzrY74pzX85NbKvkwh8Wf06N_8d5k0JtYvDuBOLdDSDJA@mail.gmail.com>

Sounds awesome - I was starting to write my own limited functinality C++
wrapper so I will be very interested in trying it and seeing how it goes.





On Tue, Jan 7, 2014 at 7:26 PM, Copernica BV, Emiel Bruijntjes <
emiel.bruijntjes at copernica.com> wrote:

>
> Hello,
>
> We've started a new open source C++ client API for RabbitMQ, because we
> were not happy with the ones that were around. Our new API is completely
> asynchronous, does not do any blocking IO operations and can be intergrated
> in event loops. It has a very straightforward API, and is well documented.
>
> It would be nice to receive some feedback about this new API, and maybe
> even contributions.
>
> The source code is on GitHub:
> https://github.com/CopernicaMarketingSoftware/AMQP-CPP
>
> And could someone add a link to the http://www.rabbitmq.com/devtools.htmlpage?
>
>
> --
> Copernica BV
>
>  Emiel Bruijntjes
>
>  --
> Internet: www.copernica.com
> Tel: +31 (0)20 5206190
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
Sid
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/5712fb7a/attachment.html>

From tim at rabbitmq.com  Tue Jan  7 10:04:27 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Tue, 7 Jan 2014 10:04:27 +0000
Subject: [rabbitmq-discuss] please provice snmp MIB file for monitoring
	RabbitMQ
In-Reply-To: <5E87E4D02854184A9C1109F9E906FEAC745AB33F@NDA-ASST-MBS04.ASSOCIATES.CORP.HCL.IN>
References: <5E87E4D02854184A9C1109F9E906FEAC745AB33F@NDA-ASST-MBS04.ASSOCIATES.CORP.HCL.IN>
Message-ID: <6D3330EC-830E-4F3C-885B-079F47F33D00@rabbitmq.com>

Hi,

On 19 Dec 2013, at 03:23, Animesh Routh - HCLI wrote:
> Please provide us the snmp MIB file for monitoring rabbitmq application monitoring.
>  

RabbitMQ doesn't ship with SNMP support built in, but there appears to have been some effort put into building an SNMP plugin in the past. See http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-SNMP-Plugin-td17177.html and https://github.com/kineticsocial/rabbitmq_snmp_plugin, which might be related to the first post. The plugin on github doesn't look like it's been touched since 2010 (ish) though, so it's likely to have bit-rotted quite a lot.

You may also wish to look at http://www.erlang.org/doc/apps/snmp/ as a reference to Erlang's SNMP support, if (for example) you decide to build a plugin of your own.

Cheers,
Tim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/da494c0d/attachment.html>

From tim at rabbitmq.com  Tue Jan  7 10:08:12 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Tue, 7 Jan 2014 10:08:12 +0000
Subject: [rabbitmq-discuss] weird stats tail behavior
In-Reply-To: <1386845484217-32019.post@n5.nabble.com>
References: <1386845484217-32019.post@n5.nabble.com>
Message-ID: <08A3894C-4E35-4FC1-9CA8-E78BE4D51F3D@rabbitmq.com>

Hi Carl,

So sorry for the delayed response - this slipped through the xmas cracks I'm afraid.

On 12 Dec 2013, at 10:51, carlhoerberg wrote:
> We have a "constant spike" at the end of our charts: 
> 
> https://www.dropbox.com/s/8n7p2ih0rhm6nre/Screenshot%202013-12-12%2017.45.41.png
> https://www.dropbox.com/s/y637pm0w66lskm0/Screenshot%202013-12-12%2017.46.08.png
> https://www.dropbox.com/s/g17tna9d390oncn/Screenshot%202013-12-12%2017.46.59.png
> 
> There's always a spike at the end of the 10min chart, no matter how long you
> look at it. 
> 

Hmn, interesting. Can you tell us anything more about the environment/configuration? Do you have logs from these time periods to share?

> Also note that the current msgs rates shows 0, while in fact the pub rate is
> 400msg/s.  
> 

There have been a few bug fixes to the management plugin since 3.1.5 - do you observe the same behaviour with more recent versions? (I do realise that your production environments don't always make it easy/possible to answer that kind of question though!).

Cheers,
Tim

From tim at rabbitmq.com  Tue Jan  7 10:09:49 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Tue, 7 Jan 2014 10:09:49 +0000
Subject: [rabbitmq-discuss] How remove messages which must be ack
In-Reply-To: <1387291762482-32168.post@n5.nabble.com>
References: <1387291762482-32168.post@n5.nabble.com>
Message-ID: <DACA5C9B-4F70-4213-9D79-39A3F209C2E9@rabbitmq.com>

Artur,

On 17 Dec 2013, at 14:49, rabbit15 wrote:

> Hi, I have question about how to remove messages from queue.
> This messages must be ack and I can't stop the consumer.
> I want to stop the consumer and clear the queue (purge)
> 

I don't understand the problem I'm afraid. Are you saying that you want to stop the consumer without loosing messages? Won't clearing/purging the queue lead to message loss anyway? Or are you trying to find a way to stop the consumer only after all the queue's messages have been drained?

Cheers,
Tim

From emile at rabbitmq.com  Tue Jan  7 11:29:05 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 07 Jan 2014 11:29:05 +0000
Subject: [rabbitmq-discuss] MQTT topic ACLs Query
In-Reply-To: <CAPwMmOBHjR7Gf3jTgwQTO8CEMKcavbDjY38Yczb8wYG2H8ABYQ@mail.gmail.com>
References: <CAPwMmOBHjR7Gf3jTgwQTO8CEMKcavbDjY38Yczb8wYG2H8ABYQ@mail.gmail.com>
Message-ID: <52CBE501.8020003@rabbitmq.com>


Hi Mark,

On 07/01/14 07:38, Mark Wolfe wrote:
> Interested to hear if anyone intends to add ACL support to the MQTT module?
> 
> At the moment it is built around routing keys which as i understand
> cannot be controlled by the existing ACLs.

There are no immediate plans to grant permissions on individual topics.
That is because the feature barely mentioned in the current
specification, and also because it has no equivalent in AMQP.

Can you describe your use-case in more detail? This will help us to
determine which features to include.



-Emile

From mark at wolfe.id.au  Tue Jan  7 12:10:13 2014
From: mark at wolfe.id.au (Mark Wolfe)
Date: Tue, 7 Jan 2014 20:10:13 +0800
Subject: [rabbitmq-discuss] MQTT topic ACLs Query
In-Reply-To: <52CBE501.8020003@rabbitmq.com>
References: <CAPwMmOBHjR7Gf3jTgwQTO8CEMKcavbDjY38Yczb8wYG2H8ABYQ@mail.gmail.com>
 <52CBE501.8020003@rabbitmq.com>
Message-ID: <CAPwMmOAsdtVeU=7s2UKPWizc1J6hUnce1CG6CTy=5GJwtr+dWg@mail.gmail.com>

Gday Emile

I am working on moving an IoT platform from a custom TCP protocol across to
MQTT, the aim is to provide a combined topic structure for these devices
partitioned by a user identifier then a group or zone identifier.

We have in home and cloud services, with a range of topics used by either
end.

Incoming messages to the central cloud services, which are sent from the in
home gateway are organised under $cloud base, note variable params are
signified by []:

$cloud/[userid]/[zoneid]/[gwid]/config
$cloud/[userid]/[zoneid]/[gwid]/status
$cloud/[userid]/[zoneid]/[gwid]/events

$cloud/[userid]/[zoneid]/[gwid]/device/[deviceid]/...

Outgoing to the gateway, these are subscribed to by the software on the
device.

$gw/[userid]/[zoneid]/[gwid]/config
$gw/[userid]/[zoneid]/[gwid]/commands

$gw/[userid]/[zoneid]/[gwid]/device/[deviceid]/...


Now given that each gateway authenticates using a username and password the
types of rules we are looking for are very similar to those currently
present in RabbitMQ, for AMQP.

Restrict write access to the outgoing topics
$cloud/[userid]/[zoneid]/[gwid]/.* for a given user.
Restrict read access to the incoming topics $gw/[userid]/[zoneid]/[gwid]/.*
for a given user.

The aim here is to keep a given user constrained to a part of the topic
structure.

The reason I am keen to continue using RabbitMQ is it has done a sterling
job of knitting together a number of internal services, most of which
connect using AMQP, using either amqplib by Michael Bridgen or the golang
AMQP library by Sean Treadway.

Outside our core I am keen to use MQTT as:

- the gateway devices are in a lot of cases are on consumer wireless
networks
- in some cases these will be micro controllers such as Arduinos
- mostly non x86, so arm and mips based systems.

Hopefully that gives you some insight into what I am hoping to achieve.

Cheers


On Tue, Jan 7, 2014 at 7:29 PM, Emile Joubert <emile at rabbitmq.com> wrote:

>
> Hi Mark,
>
> On 07/01/14 07:38, Mark Wolfe wrote:
> > Interested to hear if anyone intends to add ACL support to the MQTT
> module?
> >
> > At the moment it is built around routing keys which as i understand
> > cannot be controlled by the existing ACLs.
>
> There are no immediate plans to grant permissions on individual topics.
> That is because the feature barely mentioned in the current
> specification, and also because it has no equivalent in AMQP.
>
> Can you describe your use-case in more detail? This will help us to
> determine which features to include.
>
>
>
> -Emile
>



-- 
Regards,

Mark Wolfe

--
I am not young enough to know everything.
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/b23cbf6b/attachment.html>

From Rohit.Patel2 at techmahindra.com  Tue Jan  7 14:37:01 2014
From: Rohit.Patel2 at techmahindra.com (Rohit Patle)
Date: Tue, 7 Jan 2014 14:37:01 +0000
Subject: [rabbitmq-discuss] rabbitmq-c Memory-Based Flow Control API.
Message-ID: <27E054594442884E9A46DBCF9AE7408162B5B8@BSDMSATMBX001.mahindrasatyam.ad>

Hi,

Due to vm_memory_high_watermark reached to 0.4%, My publisher gone blocked. Is there any mechanism to identify this in application in rabbitmq-c library just like java and .NET client libraries are having?

Thanks & Regards,
Rohit

________________________________

DISCLAIMER:
This email (including any attachments) is intended for the sole use of the intended recipient/s and may contain material that is CONFIDENTIAL AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or distribution or forwarding of any or all of the contents in this message is STRICTLY PROHIBITED. If you are not the intended recipient, please contact the sender by email and delete all copies; your cooperation in this regard is appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/993d9b54/attachment.html>

From michael.s.klishin at gmail.com  Tue Jan  7 16:49:31 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 7 Jan 2014 20:49:31 +0400
Subject: [rabbitmq-discuss] ANN Machine Head 1.0.0-beta6
Message-ID: <CAE3HoVT_COp8b40SAkGuxEZdgTHJjpGCPS6gUShuYP+2nMF4og@mail.gmail.com>

Machine Head [1] is a small Clojure MQTT client.

Release notes:
http://blog.clojurewerkz.org/blog/2014/01/07/machine-head-1-dot-0-0-beta6-is-released/

1. http://clojuremqtt.info
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/19995694/attachment.html>

From sett.wai at gmail.com  Tue Jan  7 16:38:48 2014
From: sett.wai at gmail.com (Sett Wai)
Date: Tue, 7 Jan 2014 08:38:48 -0800 (PST)
Subject: [rabbitmq-discuss] Django-Celery,
	RabbitMQ creating queue without messages in it.
Message-ID: <04f32817-57bb-44d6-9fb1-b5cd175976ad@googlegroups.com>

Hi,

I've been trying to figure out what's wrong with my Django-Celery(2.5.5) 
and RabbitMQ(2.7.1 / R14B04) for a while now.

Basically, when firing off a task using .delay() in Celery, RabbitMQ 
manages to create a queue for it but it stays forever 'pending' according 
to Celery. Also, when running `# rabbitmqctl list_queues` the 
total_messages in the queue remain 0 forever.

For more context, I have a stackoverflow question 
here: http://stackoverflow.com/questions/20857712/django-celery-and-rabbitmq-not-executing-tasks

Does anyone know anything about this behaviour? This has been running fine 
on a production environment for months.

Thank you!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/3436c3ef/attachment.html>

From sett.wai at gmail.com  Tue Jan  7 16:43:31 2014
From: sett.wai at gmail.com (Sett Wai)
Date: Tue, 7 Jan 2014 08:43:31 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ receiving data,
	but no messages delivered
In-Reply-To: <950a1a78-d365-4122-9cf1-ad4c29e53601@googlegroups.com>
References: <950a1a78-d365-4122-9cf1-ad4c29e53601@googlegroups.com>
Message-ID: <38b14753-b2ce-4c23-b49b-b9a1b1adc8ff@googlegroups.com>

Hi,

We're having a similar problem with our application, although we're using 
Django-Celery(2.5.5) to produce the messages/tasks and RabbitMQ(2.7.1 / 
R14B04).

More details are here: 
http://stackoverflow.com/questions/20857712/django-celery-and-rabbitmq-not-executing-tasks

Have you managed to find a solution?

On Monday, 23 December 2013 22:41:49 UTC+2, Pedro Werneck wrote:
>
>
> We've been running RabbitMQ 3.0.2 with Erlang R14B04 for months, with no 
> issues at all. Recently, our whole AWS infrastructure crashed and we had to 
> rebuild some of it from scratch. Since then, we're having some strange 
> problems with RabbitMQ. We have a main broker used by four applications, 
> let's call them A, B, C and D, using Python 2.7 and Celery 3.0.18. 
> Everything works fine when webservice instances are publishing messages and 
> when worker instances are consuming messages, however, messages published 
> by a worker instance of A and B never reach the queue. 
>
> We can log the calls being made, we can sniff the network and see the 
> packets leaving the worker instance, we can see the packets arriving at the 
> RabbitMQ instance, and if we open the given Connection in the RabbitMQ 
> management plugin we even see data arriving at a rate of 25kb/s, but no 
> messages are delivered. The exchange and bindings are correct, since they 
> work for other cases, and we can see the exchange and routing key are not 
> corrupted or anything when sniffing the packets. If the message is sent by 
> the exact same code and settings from a webservice instance or a 
> shellscript, everything is fine, but when it's sent by the worker 
> instance,  RabbitMQ seems to be ignoring it completely.
>
> Any ideas on what's wrong?
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/d7a69d05/attachment.html>

From ryankbrown at gmail.com  Tue Jan  7 17:56:04 2014
From: ryankbrown at gmail.com (Ryan Brown)
Date: Tue, 7 Jan 2014 10:56:04 -0700
Subject: [rabbitmq-discuss] Publisher confirms requires seperate call to
 get ack?
In-Reply-To: <52B1724D.2060009@rabbitmq.com>
References: <CAChGYf_RLHti7ZJim+SnGEbspVGY+PM_xOvdUmo=6JmS7gJYNw@mail.gmail.com>
 <CAChGYf8ySwwadyENsyVNquqwLrbx_HZtrxR-gEO8DSmGNb4yBQ@mail.gmail.com>
 <CAE3HoVSSaCXdTdq7VMTn-22Fz7S2QNNxB+0DbAWmVxyyCZ0zJA@mail.gmail.com>
 <52B1724D.2060009@rabbitmq.com>
Message-ID: <CAChGYf_qjGFKxP1Vnh06nxSUNt8qQzK9MC4bgqVpMPrw72X6gQ@mail.gmail.com>

I apologize for the silence. I've had an end-of-year rush and vacation. I'm
not picking this up and very much appreciate the great information.

So, question (hopefully responding to this old post is ok). When I receive
a basic.ack, does that confirm that the message has been written to disk?
Or is that just an ack that one of the rabbit nodes has accepted the
publish? My SLA requires the former. One of my coworkers recalled seeing
something that indicated a separate call to confirm the write to disk. (I
am having a hard time finding that article at the moment.)

Best.


On Wed, Dec 18, 2013 at 3:00 AM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 18/12/2013 05:53, Michael Klishin wrote:
>
>> It depends on your client library. E.g. in Java, C# and Ruby (Bunny) you
>> can publish as many messages
>> as you want and then use Channel#waitForConfirms to wait for all
>> outstanding confirms to arrive.
>>
>
> You can do so in the Erlang client - either call amqp_channel:wait_for_confirms/1
> every so often or (better) call amqp_channel:register_conform_handler/2
> and accept the confirms yourself. That's better because every time you call
> amqp_channel:wait_for_confirms/1 the channel comes to a halt until all
> confirms have arrived.
>
>  it doesn't have to be done per message and RabbitMQ pushes confirms to
>> you, you do not poll for acknowledgements.
>>
>
> This is the key point. It sounds like the OP is publishing one message,
> waiting for one confirm, publishing the next message, and so on. That's an
> antipattern (at least when you want to go fast) since you can never go
> faster than 1 / (network round trip time) messages per second.
>
> Cheers, Simon
>
>


-- 
-rb
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/65967867/attachment.html>

From simon at rabbitmq.com  Tue Jan  7 17:53:10 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 07 Jan 2014 17:53:10 +0000
Subject: [rabbitmq-discuss] Publisher confirms requires seperate call to
 get ack?
In-Reply-To: <CAChGYf_qjGFKxP1Vnh06nxSUNt8qQzK9MC4bgqVpMPrw72X6gQ@mail.gmail.com>
References: <CAChGYf_RLHti7ZJim+SnGEbspVGY+PM_xOvdUmo=6JmS7gJYNw@mail.gmail.com>
 <CAChGYf8ySwwadyENsyVNquqwLrbx_HZtrxR-gEO8DSmGNb4yBQ@mail.gmail.com>
 <CAE3HoVSSaCXdTdq7VMTn-22Fz7S2QNNxB+0DbAWmVxyyCZ0zJA@mail.gmail.com>
 <52B1724D.2060009@rabbitmq.com>
 <CAChGYf_qjGFKxP1Vnh06nxSUNt8qQzK9MC4bgqVpMPrw72X6gQ@mail.gmail.com>
Message-ID: <52CC3F06.7010205@rabbitmq.com>

On 07/01/14 17:56, Ryan Brown wrote:
> So, question (hopefully responding to this old post is ok). When I
> receive a basic.ack, does that confirm that the message has been written
> to disk? Or is that just an ack that one of the rabbit nodes has
> accepted the publish? My SLA requires the former. One of my coworkers
> recalled seeing something that indicated a separate call to confirm the
> write to disk. (I am having a hard time finding that article at the moment.)

See http://www.rabbitmq.com/confirms.html#when

So a basic.ack confirms that the message has been written to disc 
(assuming that the message got routed, and was persistent in the first 
place). If mirrored queues are in use the ack will not be issued until 
all mirrors have written the message.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From ryankbrown at gmail.com  Tue Jan  7 19:11:30 2014
From: ryankbrown at gmail.com (Ryan Brown)
Date: Tue, 7 Jan 2014 12:11:30 -0700
Subject: [rabbitmq-discuss] Publisher confirms requires seperate call to
 get ack?
In-Reply-To: <52CC3F06.7010205@rabbitmq.com>
References: <CAChGYf_RLHti7ZJim+SnGEbspVGY+PM_xOvdUmo=6JmS7gJYNw@mail.gmail.com>
 <CAChGYf8ySwwadyENsyVNquqwLrbx_HZtrxR-gEO8DSmGNb4yBQ@mail.gmail.com>
 <CAE3HoVSSaCXdTdq7VMTn-22Fz7S2QNNxB+0DbAWmVxyyCZ0zJA@mail.gmail.com>
 <52B1724D.2060009@rabbitmq.com>
 <CAChGYf_qjGFKxP1Vnh06nxSUNt8qQzK9MC4bgqVpMPrw72X6gQ@mail.gmail.com>
 <52CC3F06.7010205@rabbitmq.com>
Message-ID: <CAChGYf9XZtW=o+AFzHUo+7JE7fVwL_YBN4RcPTSdTHh44PZ0Uw@mail.gmail.com>

Thank you Simon. That is what I thought. But the Notes section confuses me
a bit:

"The broker loses persistent messages if it crashes before said messages
are written to disk. Under certain conditions, this causes the broker to
behave in surprising ways...."

I assume this indicates that an ack will not be recieved by the publisher
thus, the publisher should attempt re-publishing. Correct?

Best,

Ryan


On Tue, Jan 7, 2014 at 10:53 AM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 07/01/14 17:56, Ryan Brown wrote:
>
>> So, question (hopefully responding to this old post is ok). When I
>> receive a basic.ack, does that confirm that the message has been written
>> to disk? Or is that just an ack that one of the rabbit nodes has
>> accepted the publish? My SLA requires the former. One of my coworkers
>> recalled seeing something that indicated a separate call to confirm the
>> write to disk. (I am having a hard time finding that article at the
>> moment.)
>>
>
> See http://www.rabbitmq.com/confirms.html#when
>
> So a basic.ack confirms that the message has been written to disc
> (assuming that the message got routed, and was persistent in the first
> place). If mirrored queues are in use the ack will not be issued until all
> mirrors have written the message.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
>



-- 
-rb
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/93acd81c/attachment.html>

From matthias at rabbitmq.com  Tue Jan  7 19:31:35 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 07 Jan 2014 19:31:35 +0000
Subject: [rabbitmq-discuss] Publisher confirms requires seperate call to
 get ack?
In-Reply-To: <CAChGYf9XZtW=o+AFzHUo+7JE7fVwL_YBN4RcPTSdTHh44PZ0Uw@mail.gmail.com>
References: <CAChGYf_RLHti7ZJim+SnGEbspVGY+PM_xOvdUmo=6JmS7gJYNw@mail.gmail.com>
 <CAChGYf8ySwwadyENsyVNquqwLrbx_HZtrxR-gEO8DSmGNb4yBQ@mail.gmail.com>
 <CAE3HoVSSaCXdTdq7VMTn-22Fz7S2QNNxB+0DbAWmVxyyCZ0zJA@mail.gmail.com>
 <52B1724D.2060009@rabbitmq.com>
 <CAChGYf_qjGFKxP1Vnh06nxSUNt8qQzK9MC4bgqVpMPrw72X6gQ@mail.gmail.com>
 <52CC3F06.7010205@rabbitmq.com>
 <CAChGYf9XZtW=o+AFzHUo+7JE7fVwL_YBN4RcPTSdTHh44PZ0Uw@mail.gmail.com>
Message-ID: <52CC5617.7080205@rabbitmq.com>

On 07/01/14 19:11, Ryan Brown wrote:
> the Notes section confuses me a bit:
>
> "The broker loses persistent messages if it crashes before said messages
> are written to disk. "

Hopefully that bit isn't confusing/surprising.

> "Under certain conditions, this causes the broker to
> behave in surprising ways...."

The surprising bit, as the example illustrates, is that the broker may 
lose a persistent message *after it has sent it to a client*.

> I assume this indicates that an ack will not be recieved by the
> publisher thus, the publisher should attempt re-publishing. Correct?

That's exactly what it says at the end of the section you quoted...

"If the publisher's channel had been in confirm mode, the publisher 
would not have received an ack for the lost message (since the message 
hadn't been written to disk yet)."

Matthias.

From roberto at canary.is  Tue Jan  7 22:12:49 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Tue, 7 Jan 2014 14:12:49 -0800
Subject: [rabbitmq-discuss] Boost libs for SimpleAmpqCliend
Message-ID: <CANAFtV5FxABjL29v6xB9rYVn=5g4cGTwGzymXhLweFOKF-ABfw@mail.gmail.com>

I'm trying to install this library:
https://github.com/alanxz/SimpleAmqpClient

some boost libraries need to be build, so I'd like to know which boost
libraries this client is using.

Also, is there something similar for the Producer? I basically need both
procurer and consumer in the same library.


Thank you,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/839385e3/attachment.html>

From roberto at canary.is  Tue Jan  7 23:51:05 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Tue, 7 Jan 2014 15:51:05 -0800
Subject: [rabbitmq-discuss] rabbitmq-c parameters
Message-ID: <CANAFtV6OsOhsxtM3xa9+QVeq42USvN+=bFswjt59r0B9TcUh0g@mail.gmail.com>

I am looking at the example of the RabbitC library

https://github.com/alanxz/rabbitmq-c/blob/master/examples/amqp_producer.c

1. which port can normally be used for it?
2. what are rate_limit and message_count?


Thanks,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/4c368e7f/attachment.html>

From jonathan.thoms at gmail.com  Tue Jan  7 23:57:02 2014
From: jonathan.thoms at gmail.com (Jonathan Thoms)
Date: Tue, 7 Jan 2014 15:57:02 -0800
Subject: [rabbitmq-discuss] Competing Consumers and Transactional Clients
 Patterns from Enterprise Integration Patterns
Message-ID: <CAOmO7=99uvzLXqY2N9WM7ZC48+GcJSq8TVLdP0TFem2H9UCpEg@mail.gmail.com>

Hi all,

I'm new to RabbitMQ but have read the EIP book by Gregor Hohpe. I'm
currently working on a project where I may use RabbitMQ. However, if I'm
going to go with a queueing approach, I need to have multiple transactional
clients that also act as competing consumers. However, in his book, Hohpe
states that you shouldn't have multiple transactional clients that double
as competing consumers.

Has Rabbit developed a queue that solves this general shortcoming of queues?

Thanks,
Jon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/9eed1987/attachment.html>

From videlalvaro at gmail.com  Wed Jan  8 00:15:54 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Wed, 8 Jan 2014 01:15:54 +0100
Subject: [rabbitmq-discuss] Competing Consumers and Transactional
 Clients Patterns from Enterprise Integration Patterns
In-Reply-To: <CAOmO7=99uvzLXqY2N9WM7ZC48+GcJSq8TVLdP0TFem2H9UCpEg@mail.gmail.com>
References: <CAOmO7=99uvzLXqY2N9WM7ZC48+GcJSq8TVLdP0TFem2H9UCpEg@mail.gmail.com>
Message-ID: <CAMcAHLUYV3WgDUigkaTtGjXCw7vcY6jm-XDZNjeMMCoZYnpWtQ@mail.gmail.com>

Hi,

What are you trying to do? Apart from the pattern spec, what do you
mean by Transactional Clients? Specifically regarding consumers. What
do you expect them to do with each message they receive?

Regards,

Alvaro

On Wed, Jan 8, 2014 at 12:57 AM, Jonathan Thoms
<jonathan.thoms at gmail.com> wrote:
> Hi all,
>
> I'm new to RabbitMQ but have read the EIP book by Gregor Hohpe. I'm
> currently working on a project where I may use RabbitMQ. However, if I'm
> going to go with a queueing approach, I need to have multiple transactional
> clients that also act as competing consumers. However, in his book, Hohpe
> states that you shouldn't have multiple transactional clients that double as
> competing consumers.
>
> Has Rabbit developed a queue that solves this general shortcoming of queues?
>
> Thanks,
> Jon
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From alan.antonuk at gmail.com  Wed Jan  8 05:57:58 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 7 Jan 2014 21:57:58 -0800
Subject: [rabbitmq-discuss] Boost libs for SimpleAmpqCliend
In-Reply-To: <CANAFtV5FxABjL29v6xB9rYVn=5g4cGTwGzymXhLweFOKF-ABfw@mail.gmail.com>
References: <CANAFtV5FxABjL29v6xB9rYVn=5g4cGTwGzymXhLweFOKF-ABfw@mail.gmail.com>
Message-ID: <CAAt2poJKMHxMBTVqps2MvK_sRVaN+BAfHg4A+DmEbpNgOn_3XQ@mail.gmail.com>

Inlined:

On Tue, Jan 7, 2014 at 2:12 PM, Roberto Pagliari <roberto at canary.is> wrote:
>
>
> some boost libraries need to be build, so I'd like to know which boost
> libraries this client is using.
>

I don't have a specific list of the boost header-only libraries that
SimpleAmqpClient uses.  SimpleAmqpClient links to boost.chrono and
boost.system for non-header-only libraries.


> Also, is there something similar for the Producer? I basically need both
> procurer and consumer in the same library.
>

I'm not sure what you mean by "the Producer". It is possible to both
publish and consume messages using SimpleAmqpClient.

-Alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/28410bc5/attachment.html>

From alan.antonuk at gmail.com  Wed Jan  8 06:02:34 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 7 Jan 2014 22:02:34 -0800
Subject: [rabbitmq-discuss] rabbitmq-c parameters
In-Reply-To: <CANAFtV6OsOhsxtM3xa9+QVeq42USvN+=bFswjt59r0B9TcUh0g@mail.gmail.com>
References: <CANAFtV6OsOhsxtM3xa9+QVeq42USvN+=bFswjt59r0B9TcUh0g@mail.gmail.com>
Message-ID: <CAAt2poKKEr=FDGcH+TnHKf7yi+h2GctZ6uYGXNyoO_nqfhz2NQ@mail.gmail.com>

Inlined:

On Tue, Jan 7, 2014 at 3:51 PM, Roberto Pagliari <roberto at canary.is> wrote:

> I am looking at the example of the RabbitC library
>
> https://github.com/alanxz/rabbitmq-c/blob/master/examples/amqp_producer.c
>
> 1. which port can normally be used for it?
>
 You should use the port that you've configured your RabbitMQ broker to
listen on. By default RabbitMQ listens on 5672, and 5671 for SSL
connections, if you have those configured.

2. what are rate_limit and message_count?
>
 rate_limit is the number of messages per second the example will try to
send. The message_count is the number of messages the program will send
before terminating.

-Alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/22ddc0da/attachment.html>

From alan.antonuk at gmail.com  Wed Jan  8 06:10:22 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 7 Jan 2014 22:10:22 -0800
Subject: [rabbitmq-discuss] rabbitmq-c Memory-Based Flow Control API.
In-Reply-To: <27E054594442884E9A46DBCF9AE7408162B5B8@BSDMSATMBX001.mahindrasatyam.ad>
References: <27E054594442884E9A46DBCF9AE7408162B5B8@BSDMSATMBX001.mahindrasatyam.ad>
Message-ID: <CAAt2po+BaNxDLi1OZMgs9No-jV4XSYxi3VmME+da4K7Xydr5Gw@mail.gmail.com>

rabbitmq-c doesn't have an equivalent API that invokes a callback when a
channel is throttled.

That said, rabbitmq-c does support the connection.blocked extension (
http://www.rabbitmq.com/connection-blocked.html), you do have to do a bit
of work to get it to work:

1. You'd need to send the 'connection.blocked'=true value as a part of the
capabilities table when calling amqp_login()
2. As you're publishing you'd need to periodically watch for a
AMQP_CONNECTION_BLOCKED_METHOD (using amqp_simple_wait_frame_noblock(), and
stop publishing when you receive this messages, only resuming when you
receive a AMQP_CONNECTION_UNBLOCKED_METHOD from the broker.

Unfortunately I don't have any example code that demonstrates this at the
moment, but I'll try and put something together in the next few days. You
can track the issue here: https://github.com/alanxz/rabbitmq-c/issues/161

-Alan



On Tue, Jan 7, 2014 at 6:37 AM, Rohit Patle
<Rohit.Patel2 at techmahindra.com>wrote:

>  Hi,
>
> Due to vm_memory_high_watermark reached to 0.4%, My publisher gone
> blocked. Is there any mechanism to identify this in application in
> rabbitmq-c library just like java and .NET client libraries are having?
>
> Thanks & Regards,
> Rohit
>
> ------------------------------
>
> DISCLAIMER:
> This email (including any attachments) is intended for the sole use of the
> intended recipient/s and may contain material that is CONFIDENTIAL AND
> PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or
> distribution or forwarding of any or all of the contents in this message is
> STRICTLY PROHIBITED. If you are not the intended recipient, please contact
> the sender by email and delete all copies; your cooperation in this regard
> is appreciated.
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/6ad48653/attachment.html>

From alan.antonuk at gmail.com  Wed Jan  8 06:10:50 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 7 Jan 2014 22:10:50 -0800
Subject: [rabbitmq-discuss] New C++ client API
In-Reply-To: <52CBC85B.2020904@copernica.com>
References: <52CBC85B.2020904@copernica.com>
Message-ID: <CAAt2poK0eczygg_hRPbAmWGSLYtwgnwnFLrU1_vWzH3L6PVR3Q@mail.gmail.com>

Cool! This library shows a lot of promise - I'm excited to see what
develops from this.

-Alan


On Tue, Jan 7, 2014 at 1:26 AM, Copernica BV, Emiel Bruijntjes <
emiel.bruijntjes at copernica.com> wrote:

>
> Hello,
>
> We've started a new open source C++ client API for RabbitMQ, because we
> were not happy with the ones that were around. Our new API is completely
> asynchronous, does not do any blocking IO operations and can be intergrated
> in event loops. It has a very straightforward API, and is well documented.
>
> It would be nice to receive some feedback about this new API, and maybe
> even contributions.
>
> The source code is on GitHub:
> https://github.com/CopernicaMarketingSoftware/AMQP-CPP
>
> And could someone add a link to the http://www.rabbitmq.com/devtools.htmlpage?
>
>
> --
> Copernica BV
>
>  Emiel Bruijntjes
>
>  --
> Internet: www.copernica.com
> Tel: +31 (0)20 5206190
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/38edc094/attachment.html>

From sandy.sandeeep at gmail.com  Wed Jan  8 10:04:52 2014
From: sandy.sandeeep at gmail.com (sandeep kumar)
Date: Wed, 8 Jan 2014 15:34:52 +0530
Subject: [rabbitmq-discuss] flow control in rabbitmq
Message-ID: <CAC3dgDd7wPQz7NLTZcd8ho2JDRH7v_neS77cA-Lnp3dqPGdTjA@mail.gmail.com>

Hi simon and michael,

Thanks for the help in finding that there is no message loss in rabbitmq
I have some more queires after some experiments i ll get back again here

Regards,
sandeep
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140108/362e2582/attachment.html>

From sekhar434145 at gmail.com  Wed Jan  8 10:41:32 2014
From: sekhar434145 at gmail.com (Rajasekhar P)
Date: Wed, 8 Jan 2014 16:11:32 +0530
Subject: [rabbitmq-discuss] How to handle AcknowledgeMode.MANUAL
 acknowledgements within handleMessage() method at consumer end?
Message-ID: <CAH75Yb6_AwYTmUrx1t_JcQUW3SmkFFbufRtdk8AdUdUBZKrOdQ@mail.gmail.com>

Hi Team,

I want to handle acknowledgements manually, because, if any error occurs
while processing message it should not be deleted from the queue. For this
I have used *AcknowledgeMode.MANUAL , *but am not getting how to set the
acknowledgement after processing the message in handleMessage method. Can
anyone tell me how to do that?

SimpleMessageListenerContainer container = new
SimpleMessageListenerContainer();
container.setConnectionFactory(connectionFactory());
container.setQueueNames(this.reqQueueName);
container.setAcknowledgeMode(AcknowledgeMode.MANUAL);
container.setMessageListener(new MessageListenerAdapter(new
SPMessageListener(), jsonMessageConverter()));

SPMessageListener.java -

public void handleMessage(String message) {

}

Thanks,
Sekhar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140108/2743c675/attachment.html>

From mklishin at gopivotal.com  Wed Jan  8 11:25:36 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 8 Jan 2014 15:25:36 +0400
Subject: [rabbitmq-discuss] How to handle AcknowledgeMode.MANUAL
	acknowledgements within handleMessage() method at consumer end?
In-Reply-To: <CAH75Yb6_AwYTmUrx1t_JcQUW3SmkFFbufRtdk8AdUdUBZKrOdQ@mail.gmail.com>
References: <CAH75Yb6_AwYTmUrx1t_JcQUW3SmkFFbufRtdk8AdUdUBZKrOdQ@mail.gmail.com>
Message-ID: <1DD83BF2-EB60-4856-A912-51D040D5ABDC@rabbitmq.com>

On 8 Jan 2014, at 14:41, Rajasekhar P <sekhar434145 at gmail.com> wrote:

> I want to handle acknowledgements manually, because, if any error occurs while processing message it should not be deleted from the queue. For this I have used AcknowledgeMode.MANUAL , but am not getting how to set the acknowledgement after processing the message in handleMessage method. Can anyone tell me how to do that?

Section 3.11 in [1] suggests you are supposed to use Channel#basicAck from RabbitMQ Java client
directly.

1. http://docs.spring.io/spring-amqp/docs/1.2.1.BUILD-SNAPSHOT/reference/html/amqp.html#d4e329

MK

Software Engineer, Pivotal/RabbitMQ



From ranjithavshet09 at gmail.com  Wed Jan  8 11:38:42 2014
From: ranjithavshet09 at gmail.com (Ranjitha Shet)
Date: Wed, 8 Jan 2014 17:08:42 +0530
Subject: [rabbitmq-discuss] (no subject)
Message-ID: <CAP2+pdzBGGKFyZtYeG8=jwCG6E1ENbeDt2AbdrZyr_9AVF4aVA@mail.gmail.com>

Hi,


channel.exchangeDeclare(exchangeName, "topic", false); // declaring a non
durable exchange
channel.queueDeclare(queueName, false, false, true, null);// non durable,
non exclusive, autoDelete



channel.basicConsume(queueName, true, consumer);



the flag here is set to true.., when gone through many searches.., found
that its defined differntly autoAck and noAck flag and al...
I am publishin Messages with Delivery mode = 1..
whichevr is the case.., are the messages is being stored on disk if the
flag is set to true in basicConsume??

if messages are getting stored.., is ther any way in which it can avoided??
Kindly help..
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140108/dba75e2f/attachment.html>

From michael.s.klishin at gmail.com  Wed Jan  8 11:54:25 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 8 Jan 2014 15:54:25 +0400
Subject: [rabbitmq-discuss] (no subject)
In-Reply-To: <CAP2+pdzBGGKFyZtYeG8=jwCG6E1ENbeDt2AbdrZyr_9AVF4aVA@mail.gmail.com>
References: <CAP2+pdzBGGKFyZtYeG8=jwCG6E1ENbeDt2AbdrZyr_9AVF4aVA@mail.gmail.com>
Message-ID: <CAE3HoVQDXA8VShEkF3+CLmEQxLo9miqHMCUZ18ey6hT_+euKcA@mail.gmail.com>

2014/1/8 Ranjitha Shet <ranjithavshet09 at gmail.com>

> I am publishin Messages with Delivery mode = 1..
> whichevr is the case.., are the messages is being stored on disk if the
> flag is set to true in basicConsume??
>
> if messages are getting stored.., is ther any way in which it can avoided??
>

Manual acknowledgements in basicConsume have nothing to do with messages
being or not
stored on disk.

See tutorial 2:
http://www.rabbitmq.com/getstarted.html

Delivery mode = 1 means "transient", so unless there is serious memory
pressure,
messages should be kept in RAM only.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140108/cc3f11b9/attachment.html>

From simon at rabbitmq.com  Wed Jan  8 13:31:56 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 08 Jan 2014 13:31:56 +0000
Subject: [rabbitmq-discuss] Active Directory users of dn_lookup_attribute?
 (was Re: OpenLDAP-based auth with 'other_bind' option: no DN attribute?)
In-Reply-To: <52A1C130.8010004@rabbitmq.com>
References: <20131205145345.53ac312c@krasoola.nask.waw.pl>
 <52A1C130.8010004@rabbitmq.com>
Message-ID: <52CD534C.9020205@rabbitmq.com>

On 06/12/13 12:21, Simon MacMullen wrote:
> So I'll file a bug for this (your fix looks correct, but I want to make
> sure it doesn't break against AD).

So I haven't made any progress with this, largely because I don't have 
an Active Directory installation any more to test with, and I really 
don't fancy setting one up from scratch.

So is there anyone out there using the LDAP plugin against Active 
Directory, in combination with the dn_lookup_attribute option, who could 
test an updated plugin for me?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From grussell at gopivotal.com  Wed Jan  8 13:57:45 2014
From: grussell at gopivotal.com (Gary Russell)
Date: Wed, 8 Jan 2014 08:57:45 -0500
Subject: [rabbitmq-discuss] How to handle AcknowledgeMode.MANUAL
 acknowledgements within handleMessage() method at consumer end?
In-Reply-To: <1DD83BF2-EB60-4856-A912-51D040D5ABDC@rabbitmq.com>
References: <CAH75Yb6_AwYTmUrx1t_JcQUW3SmkFFbufRtdk8AdUdUBZKrOdQ@mail.gmail.com>
 <1DD83BF2-EB60-4856-A912-51D040D5ABDC@rabbitmq.com>
Message-ID: <CADtU9_utZSRh_j5h0szOXWcZ31T2EJ5K-RexwSqsBASNB+yYgQ@mail.gmail.com>

>public void handleMessage(String message) {
>
>}

This is a MessageListener and doesn't have access to the Channel.


>>Section 3.11 in [1] suggests you are supposed to use Channel#basicAck
from RabbitMQ Java client directly.


Right, and to do that, you have to use a ChannelAwareMessageListener that
has a different signature...

void onMessage(Message message, Channel channel) throws Exception;





On Wed, Jan 8, 2014 at 6:25 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

> On 8 Jan 2014, at 14:41, Rajasekhar P <sekhar434145 at gmail.com> wrote:
>
> > I want to handle acknowledgements manually, because, if any error occurs
> while processing message it should not be deleted from the queue. For this
> I have used AcknowledgeMode.MANUAL , but am not getting how to set the
> acknowledgement after processing the message in handleMessage method. Can
> anyone tell me how to do that?
>
> Section 3.11 in [1] suggests you are supposed to use Channel#basicAck from
> RabbitMQ Java client
> directly.
>
> 1.
> http://docs.spring.io/spring-amqp/docs/1.2.1.BUILD-SNAPSHOT/reference/html/amqp.html#d4e329
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140108/0649cf63/attachment.html>

From grussell at gopivotal.com  Wed Jan  8 13:59:27 2014
From: grussell at gopivotal.com (Gary Russell)
Date: Wed, 8 Jan 2014 08:59:27 -0500
Subject: [rabbitmq-discuss] How to handle AcknowledgeMode.MANUAL
 acknowledgements within handleMessage() method at consumer end?
In-Reply-To: <CADtU9_utZSRh_j5h0szOXWcZ31T2EJ5K-RexwSqsBASNB+yYgQ@mail.gmail.com>
References: <CAH75Yb6_AwYTmUrx1t_JcQUW3SmkFFbufRtdk8AdUdUBZKrOdQ@mail.gmail.com>
 <1DD83BF2-EB60-4856-A912-51D040D5ABDC@rabbitmq.com>
 <CADtU9_utZSRh_j5h0szOXWcZ31T2EJ5K-RexwSqsBASNB+yYgQ@mail.gmail.com>
Message-ID: <CADtU9_uPT326MQ8XP6VGGL-fbiC=qAbM4TjnGc4cjE4F0vTZ=Q@mail.gmail.com>

However, if you use ackMode=AUTO, the container will take care of your
needs - if you throw an exception, the default behavior is to reject (and
requeue). If you don't throw an exception, the message will be ack'd.


On Wed, Jan 8, 2014 at 8:57 AM, Gary Russell <grussell at gopivotal.com> wrote:

> >public void handleMessage(String message) {
> >
> >}
>
> This is a MessageListener and doesn't have access to the Channel.
>
>
> >>Section 3.11 in [1] suggests you are supposed to use Channel#basicAck
> from RabbitMQ Java client directly.
>
>
> Right, and to do that, you have to use a ChannelAwareMessageListener that
> has a different signature...
>
> void onMessage(Message message, Channel channel) throws Exception;
>
>
>
>
>
> On Wed, Jan 8, 2014 at 6:25 AM, Michael Klishin <mklishin at gopivotal.com>wrote:
>
>> On 8 Jan 2014, at 14:41, Rajasekhar P <sekhar434145 at gmail.com> wrote:
>>
>> > I want to handle acknowledgements manually, because, if any error
>> occurs while processing message it should not be deleted from the queue.
>> For this I have used AcknowledgeMode.MANUAL , but am not getting how to set
>> the acknowledgement after processing the message in handleMessage method.
>> Can anyone tell me how to do that?
>>
>> Section 3.11 in [1] suggests you are supposed to use Channel#basicAck
>> from RabbitMQ Java client
>> directly.
>>
>> 1.
>> http://docs.spring.io/spring-amqp/docs/1.2.1.BUILD-SNAPSHOT/reference/html/amqp.html#d4e329
>>
>> MK
>>
>> Software Engineer, Pivotal/RabbitMQ
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140108/b6f6b4a7/attachment.html>

From dubois.sebastien66 at gmail.com  Wed Jan  8 17:43:39 2014
From: dubois.sebastien66 at gmail.com (Sebastien Dubois)
Date: Wed, 8 Jan 2014 09:43:39 -0800 (PST)
Subject: [rabbitmq-discuss] connections/queues hang using IE9 with web-stomp
	plugin
Message-ID: <e1c2d506-4873-4d79-a889-a95921e785dd@googlegroups.com>


Hi,

  In our web application, we are using RabbitMQ with web-stomp to open 
websocket/sockJS channels to push notifications from the AMQP broker to the 
client browsers.

  When using IE9, the rabbitMQ connections are never closed when the client 
gets disconnected.  For example if the browser window/tab is closed, the 
connections/queues used during the session still appears as valid, even 
though they aren't.  This is potentially a big problem, as these "leaked" 
connection reduce the amount of available resources in rabbitMQ.  The only 
way to get rid of these invalid connections is to restart RabbitMQ, which 
is obviously unacceptable for a HA application like ours.

  I believe this might have something to do with the SockJS emulated 
websockets in IE9, as using a websocket-enabled browsers (e.g. IE10 or 11, 
Firefox, Chrome) works just fine (no leaked connections).

  Has anybody encountered this?  Is there a solution/workaround for this? 
 I know IE9 is getting quite old, but given our user base, we have to 
support it.

Thanks and BR,
/Sebastien
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140108/ecf2ad1c/attachment.html>

From michael.laing at nytimes.com  Wed Jan  8 19:26:02 2014
From: michael.laing at nytimes.com (Laing, Michael)
Date: Wed, 8 Jan 2014 14:26:02 -0500
Subject: [rabbitmq-discuss] Latest revision of NYTimes site is supported by
 RabbitMQ - launched 8 January 2014
Message-ID: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>

Just a quick note and thank you to the RabbitMQ team for a great product.

Our premier online offering www.nytimes.com has a new look and new
underpinnings, now including a messaging architecture implemented using
RabbitMQ.

This architecture - nyt?a?rik - has dozens of RabbitMQ instances spread
across 6 AWS zones in Oregon and Dublin. The instances are organized into
"wholesale" and "retail" layers. Connection to clients is via
websockets/sockjs.

Upon launch today, the system autoscaled to ~500,000 users. Connection
times remained flat at ~200ms.

nyt?a?rik provides subscription services for breaking news, video feeds,
etc. and will add more event based services. It also supports individual
messaging related to subscription status for registered users.

This system would not have been possible without RabbitMQ. It was the one
component, used everywhere, that never faltered or failed.

We look forward to contributing our own code to the open source community
but it will be difficult to match the quality of this outstanding product
and its supporting team.

Michael Laing
Systems Architect
NYTimes
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140108/fe6f594f/attachment.html>

From videlalvaro at gmail.com  Wed Jan  8 19:47:14 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Wed, 8 Jan 2014 20:47:14 +0100
Subject: [rabbitmq-discuss] Latest revision of NYTimes site is supported
 by RabbitMQ - launched 8 January 2014
In-Reply-To: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
References: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
Message-ID: <CAMcAHLV2iF7pr+MAOJUkso8=XAK4gkyUzUmPXgV2WAT07MPPbQ@mail.gmail.com>

Michael,

Wow. This is great news ??no pun intended ;-)

It's really cool to hear this.

Regards,

Alvaro

On Wed, Jan 8, 2014 at 8:26 PM, Laing, Michael
<michael.laing at nytimes.com> wrote:
> Just a quick note and thank you to the RabbitMQ team for a great product.
>
> Our premier online offering www.nytimes.com has a new look and new
> underpinnings, now including a messaging architecture implemented using
> RabbitMQ.
>
> This architecture - nyt?a?rik - has dozens of RabbitMQ instances spread
> across 6 AWS zones in Oregon and Dublin. The instances are organized into
> "wholesale" and "retail" layers. Connection to clients is via
> websockets/sockjs.
>
> Upon launch today, the system autoscaled to ~500,000 users. Connection times
> remained flat at ~200ms.
>
> nyt?a?rik provides subscription services for breaking news, video feeds,
> etc. and will add more event based services. It also supports individual
> messaging related to subscription status for registered users.
>
> This system would not have been possible without RabbitMQ. It was the one
> component, used everywhere, that never faltered or failed.
>
> We look forward to contributing our own code to the open source community
> but it will be difficult to match the quality of this outstanding product
> and its supporting team.
>
> Michael Laing
> Systems Architect
> NYTimes
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From arachweb at gmail.com  Wed Jan  8 19:50:25 2014
From: arachweb at gmail.com (Paul Bell)
Date: Wed, 8 Jan 2014 14:50:25 -0500
Subject: [rabbitmq-discuss] Latest revision of NYTimes site is supported
 by RabbitMQ - launched 8 January 2014
In-Reply-To: <CAMcAHLV2iF7pr+MAOJUkso8=XAK4gkyUzUmPXgV2WAT07MPPbQ@mail.gmail.com>
References: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
 <CAMcAHLV2iF7pr+MAOJUkso8=XAK4gkyUzUmPXgV2WAT07MPPbQ@mail.gmail.com>
Message-ID: <CA+ttMd_gDV-n6se3NWFgP2q3iZBd5HKf_uNgxx3iceEn4bbASw@mail.gmail.com>

Michael,

That's very exciting news.

Have you published any documents on this architecture, i.e., stuff you can
share publicly?

I'd be most interested in seeing them.

Cordially,

Paul


On Wed, Jan 8, 2014 at 2:47 PM, Alvaro Videla <videlalvaro at gmail.com> wrote:

> Michael,
>
> Wow. This is great news ??no pun intended ;-)
>
> It's really cool to hear this.
>
> Regards,
>
> Alvaro
>
> On Wed, Jan 8, 2014 at 8:26 PM, Laing, Michael
> <michael.laing at nytimes.com> wrote:
> > Just a quick note and thank you to the RabbitMQ team for a great product.
> >
> > Our premier online offering www.nytimes.com has a new look and new
> > underpinnings, now including a messaging architecture implemented using
> > RabbitMQ.
> >
> > This architecture - nyt?a?rik - has dozens of RabbitMQ instances spread
> > across 6 AWS zones in Oregon and Dublin. The instances are organized into
> > "wholesale" and "retail" layers. Connection to clients is via
> > websockets/sockjs.
> >
> > Upon launch today, the system autoscaled to ~500,000 users. Connection
> times
> > remained flat at ~200ms.
> >
> > nyt?a?rik provides subscription services for breaking news, video feeds,
> > etc. and will add more event based services. It also supports individual
> > messaging related to subscription status for registered users.
> >
> > This system would not have been possible without RabbitMQ. It was the one
> > component, used everywhere, that never faltered or failed.
> >
> > We look forward to contributing our own code to the open source community
> > but it will be difficult to match the quality of this outstanding product
> > and its supporting team.
> >
> > Michael Laing
> > Systems Architect
> > NYTimes
> >
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-discuss at lists.rabbitmq.com
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> >
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140108/f3c28c0d/attachment.html>

From mklishin at gopivotal.com  Wed Jan  8 19:58:26 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 8 Jan 2014 23:58:26 +0400
Subject: [rabbitmq-discuss] Latest revision of NYTimes site is supported
	by RabbitMQ - launched 8 January 2014
In-Reply-To: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
References: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
Message-ID: <549A0F02-A34E-485E-A064-4F578F7F72D7@rabbitmq.com>

On 8 Jan 2014, at 23:26, Laing, Michael <michael.laing at nytimes.com> wrote:

> Our premier online offering www.nytimes.com has a new look and new underpinnings, now including a messaging architecture implemented using RabbitMQ.
> 
> This architecture - nyt?a?rik - has dozens of RabbitMQ instances spread across 6 AWS zones in Oregon and Dublin. The instances are organized into "wholesale" and "retail" layers. Connection to clients is via websockets/sockjs.
> 
> Upon launch today, the system autoscaled to ~500,000 users. Connection times remained flat at ~200ms.
> 
> nyt?a?rik provides subscription services for breaking news, video feeds, etc. and will add more event based services. It also supports individual messaging related to subscription status for registered users.

Michael,

Congrats on the launch!

I?m curious what technologies and RabbitMQ clients do you use and plan on adding
in the future?

MK

Software Engineer, Pivotal/RabbitMQ



From sid.young at gmail.com  Wed Jan  8 20:27:40 2014
From: sid.young at gmail.com (Sid Young)
Date: Thu, 9 Jan 2014 06:27:40 +1000
Subject: [rabbitmq-discuss] Latest revision of NYTimes site is supported
 by RabbitMQ - launched 8 January 2014
In-Reply-To: <549A0F02-A34E-485E-A064-4F578F7F72D7@rabbitmq.com>
References: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
 <549A0F02-A34E-485E-A064-4F578F7F72D7@rabbitmq.com>
Message-ID: <CAEZ+gOwWkwm3tH96CZGVChP5qr9xxjVkgQDx9HPE0E7dgSk4sQ@mail.gmail.com>

as I always blurt out "The world works on Queues".... " I'm designing a
RabbitMQ based monitoring system for an ISP to monitor 1000's of containers
and hosts and then the apps running on them... only way to scale!


Sid




On Thu, Jan 9, 2014 at 5:58 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

> On 8 Jan 2014, at 23:26, Laing, Michael <michael.laing at nytimes.com> wrote:
>
> > Our premier online offering www.nytimes.com has a new look and new
> underpinnings, now including a messaging architecture implemented using
> RabbitMQ.
> >
> > This architecture - nyt?a?rik - has dozens of RabbitMQ instances spread
> across 6 AWS zones in Oregon and Dublin. The instances are organized into
> "wholesale" and "retail" layers. Connection to clients is via
> websockets/sockjs.
> >
> > Upon launch today, the system autoscaled to ~500,000 users. Connection
> times remained flat at ~200ms.
> >
> > nyt?a?rik provides subscription services for breaking news, video feeds,
> etc. and will add more event based services. It also supports individual
> messaging related to subscription status for registered users.
>
> Michael,
>
> Congrats on the launch!
>
> I?m curious what technologies and RabbitMQ clients do you use and plan on
> adding
> in the future?
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>



-- 
Sid Young
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/e4bba992/attachment.html>

From alexis at rabbitmq.com  Wed Jan  8 20:41:17 2014
From: alexis at rabbitmq.com (Alexis Richardson)
Date: Wed, 8 Jan 2014 20:41:17 +0000
Subject: [rabbitmq-discuss] Latest revision of NYTimes site is supported
 by RabbitMQ - launched 8 January 2014
In-Reply-To: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
References: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
Message-ID: <CACOPnvf9RWZTO5nTOK8kjLsYv=p4AyihUYaPEGhbzsFrNcvkLQ@mail.gmail.com>

Michael

Thank you very much indeed for posting this :-)

I hope we can hear more about the details, it sounds very cool.

alexis



On Wed, Jan 8, 2014 at 7:26 PM, Laing, Michael <michael.laing at nytimes.com>wrote:

> Just a quick note and thank you to the RabbitMQ team for a great product.
>
> Our premier online offering www.nytimes.com has a new look and new
> underpinnings, now including a messaging architecture implemented using
> RabbitMQ.
>
> This architecture - nyt?a?rik - has dozens of RabbitMQ instances spread
> across 6 AWS zones in Oregon and Dublin. The instances are organized into
> "wholesale" and "retail" layers. Connection to clients is via
> websockets/sockjs.
>
> Upon launch today, the system autoscaled to ~500,000 users. Connection
> times remained flat at ~200ms.
>
> nyt?a?rik provides subscription services for breaking news, video feeds,
> etc. and will add more event based services. It also supports individual
> messaging related to subscription status for registered users.
>
> This system would not have been possible without RabbitMQ. It was the one
> component, used everywhere, that never faltered or failed.
>
> We look forward to contributing our own code to the open source community
> but it will be difficult to match the quality of this outstanding product
> and its supporting team.
>
> Michael Laing
> Systems Architect
> NYTimes
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140108/ce1f9c58/attachment.html>

From jasonjwwilliams at gmail.com  Wed Jan  8 20:45:12 2014
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 8 Jan 2014 12:45:12 -0800
Subject: [rabbitmq-discuss] Latest revision of NYTimes site is supported
 by RabbitMQ - launched 8 January 2014
In-Reply-To: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
References: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
Message-ID: <CAHZAEpcaY7VaKx_8Y20cjKXw+sK64zat8nXT0PiYb_cYVLyarw@mail.gmail.com>

Wow that's awesome. Congratulations! How you're using Rabbit sounds really
cool.


-J


On Wed, Jan 8, 2014 at 11:26 AM, Laing, Michael
<michael.laing at nytimes.com>wrote:

> Just a quick note and thank you to the RabbitMQ team for a great product.
>
> Our premier online offering www.nytimes.com has a new look and new
> underpinnings, now including a messaging architecture implemented using
> RabbitMQ.
>
> This architecture - nyt?a?rik - has dozens of RabbitMQ instances spread
> across 6 AWS zones in Oregon and Dublin. The instances are organized into
> "wholesale" and "retail" layers. Connection to clients is via
> websockets/sockjs.
>
> Upon launch today, the system autoscaled to ~500,000 users. Connection
> times remained flat at ~200ms.
>
> nyt?a?rik provides subscription services for breaking news, video feeds,
> etc. and will add more event based services. It also supports individual
> messaging related to subscription status for registered users.
>
> This system would not have been possible without RabbitMQ. It was the one
> component, used everywhere, that never faltered or failed.
>
> We look forward to contributing our own code to the open source community
> but it will be difficult to match the quality of this outstanding product
> and its supporting team.
>
> Michael Laing
> Systems Architect
> NYTimes
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140108/c214e244/attachment.html>

From sekhar434145 at gmail.com  Thu Jan  9 05:20:34 2014
From: sekhar434145 at gmail.com (Rajasekhar P)
Date: Thu, 9 Jan 2014 10:50:34 +0530
Subject: [rabbitmq-discuss] How to handle AcknowledgeMode.MANUAL
 acknowledgements within handleMessage() method at consumer end?
In-Reply-To: <CADtU9_uPT326MQ8XP6VGGL-fbiC=qAbM4TjnGc4cjE4F0vTZ=Q@mail.gmail.com>
References: <CAH75Yb6_AwYTmUrx1t_JcQUW3SmkFFbufRtdk8AdUdUBZKrOdQ@mail.gmail.com>
 <1DD83BF2-EB60-4856-A912-51D040D5ABDC@rabbitmq.com>
 <CADtU9_utZSRh_j5h0szOXWcZ31T2EJ5K-RexwSqsBASNB+yYgQ@mail.gmail.com>
 <CADtU9_uPT326MQ8XP6VGGL-fbiC=qAbM4TjnGc4cjE4F0vTZ=Q@mail.gmail.com>
Message-ID: <CAH75Yb4jt0riEqwvhifh2XLwOwSP1-Uv6GuK=adROSNRq946mg@mail.gmail.com>

Am using ackMode=AUTO and if any exception occurs in handleMessage() method
message will be deleted from the queue, it requeued as you mentioned in the
above mail.

Thank you for your support.


On Wed, Jan 8, 2014 at 7:29 PM, Gary Russell <grussell at gopivotal.com> wrote:

> However, if you use ackMode=AUTO, the container will take care of your
> needs - if you throw an exception, the default behavior is to reject (and
> requeue). If you don't throw an exception, the message will be ack'd.
>
>
> On Wed, Jan 8, 2014 at 8:57 AM, Gary Russell <grussell at gopivotal.com>wrote:
>
>> >public void handleMessage(String message) {
>> >
>> >}
>>
>> This is a MessageListener and doesn't have access to the Channel.
>>
>>
>> >>Section 3.11 in [1] suggests you are supposed to use Channel#basicAck
>> from RabbitMQ Java client directly.
>>
>>
>> Right, and to do that, you have to use a ChannelAwareMessageListenerthat has a different signature...
>>
>> void onMessage(Message message, Channel channel) throws Exception;
>>
>>
>>
>>
>>
>> On Wed, Jan 8, 2014 at 6:25 AM, Michael Klishin <mklishin at gopivotal.com>wrote:
>>
>>> On 8 Jan 2014, at 14:41, Rajasekhar P <sekhar434145 at gmail.com> wrote:
>>>
>>> > I want to handle acknowledgements manually, because, if any error
>>> occurs while processing message it should not be deleted from the queue.
>>> For this I have used AcknowledgeMode.MANUAL , but am not getting how to set
>>> the acknowledgement after processing the message in handleMessage method.
>>> Can anyone tell me how to do that?
>>>
>>> Section 3.11 in [1] suggests you are supposed to use Channel#basicAck
>>> from RabbitMQ Java client
>>> directly.
>>>
>>> 1.
>>> http://docs.spring.io/spring-amqp/docs/1.2.1.BUILD-SNAPSHOT/reference/html/amqp.html#d4e329
>>>
>>> MK
>>>
>>> Software Engineer, Pivotal/RabbitMQ
>>>
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/c9f8e660/attachment.html>

From xbhu at 800best.com  Thu Jan  9 04:31:55 2014
From: xbhu at 800best.com (Hu Xiaobin)
Date: Thu, 9 Jan 2014 12:31:55 +0800
Subject: [rabbitmq-discuss] Are there messages priority support in RabbitMQ
	currently?
Message-ID: <FCC24A7B6329164793265018618E4BD5026638CC4A@bestex3.800best.net>

Hi all,
Are there messages priority support in RabbitMQ currently?
Thanks,
Hu

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/ac6d6212/attachment.html>

From tim at rabbitmq.com  Thu Jan  9 09:38:19 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Thu, 9 Jan 2014 09:38:19 +0000
Subject: [rabbitmq-discuss] Are there messages priority support in
	RabbitMQ currently?
In-Reply-To: <FCC24A7B6329164793265018618E4BD5026638CC4A@bestex3.800best.net>
References: <FCC24A7B6329164793265018618E4BD5026638CC4A@bestex3.800best.net>
Message-ID: <012D757C-F9DB-45BD-882B-04226B7A0991@rabbitmq.com>

On 9 Jan 2014, at 04:31, Hu Xiaobin wrote:
> Are there messages priority support in RabbitMQ currently?
> 
Not at the current time. You can emulate priorities with multiple queues, but there's no "built-in" support for message priorities.

Tim 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/95d486f4/attachment.html>

From sekhar434145 at gmail.com  Thu Jan  9 10:13:58 2014
From: sekhar434145 at gmail.com (Rajasekhar P)
Date: Thu, 9 Jan 2014 15:43:58 +0530
Subject: [rabbitmq-discuss] How to handle AcknowledgeMode.MANUAL
 acknowledgements within handleMessage() method at consumer end?
In-Reply-To: <CAH75Yb4jt0riEqwvhifh2XLwOwSP1-Uv6GuK=adROSNRq946mg@mail.gmail.com>
References: <CAH75Yb6_AwYTmUrx1t_JcQUW3SmkFFbufRtdk8AdUdUBZKrOdQ@mail.gmail.com>
 <1DD83BF2-EB60-4856-A912-51D040D5ABDC@rabbitmq.com>
 <CADtU9_utZSRh_j5h0szOXWcZ31T2EJ5K-RexwSqsBASNB+yYgQ@mail.gmail.com>
 <CADtU9_uPT326MQ8XP6VGGL-fbiC=qAbM4TjnGc4cjE4F0vTZ=Q@mail.gmail.com>
 <CAH75Yb4jt0riEqwvhifh2XLwOwSP1-Uv6GuK=adROSNRq946mg@mail.gmail.com>
Message-ID: <CAH75Yb7v_gxdaQ08C=--GxQ5DgcBR3V_1J6dBJUtxJ5KgAzROQ@mail.gmail.com>

Here, after catching the exception I want send it back to the producer, so
that my client will know what kind of error occurred at backend system. As
mentioned above if exception occurred inside the handleMessag method
message will not deleted from the queue, that is fine and to printing that
error message by registering ErrorHandler with the listener container. But,
I want to send that exception to the producer, can you please tell me how
can we send it back to producer?

Error handling at consumer end -

@Override
public void handleError(Throwable t) {
t.printStackTrace();
}


Thanks in advance.



On Thu, Jan 9, 2014 at 10:50 AM, Rajasekhar P <sekhar434145 at gmail.com>wrote:

> Am using ackMode=AUTO and if any exception occurs in handleMessage()
> method message will be deleted from the queue, it requeued as you mentioned
> in the above mail.
>
> Thank you for your support.
>
>
> On Wed, Jan 8, 2014 at 7:29 PM, Gary Russell <grussell at gopivotal.com>wrote:
>
>> However, if you use ackMode=AUTO, the container will take care of your
>> needs - if you throw an exception, the default behavior is to reject (and
>> requeue). If you don't throw an exception, the message will be ack'd.
>>
>>
>> On Wed, Jan 8, 2014 at 8:57 AM, Gary Russell <grussell at gopivotal.com>wrote:
>>
>>> >public void handleMessage(String message) {
>>> >
>>> >}
>>>
>>> This is a MessageListener and doesn't have access to the Channel.
>>>
>>>
>>> >>Section 3.11 in [1] suggests you are supposed to use Channel#basicAck
>>> from RabbitMQ Java client directly.
>>>
>>>
>>> Right, and to do that, you have to use a ChannelAwareMessageListenerthat has a different signature...
>>>
>>> void onMessage(Message message, Channel channel) throws Exception;
>>>
>>>
>>>
>>>
>>>
>>> On Wed, Jan 8, 2014 at 6:25 AM, Michael Klishin <mklishin at gopivotal.com>wrote:
>>>
>>>> On 8 Jan 2014, at 14:41, Rajasekhar P <sekhar434145 at gmail.com> wrote:
>>>>
>>>> > I want to handle acknowledgements manually, because, if any error
>>>> occurs while processing message it should not be deleted from the queue.
>>>> For this I have used AcknowledgeMode.MANUAL , but am not getting how to set
>>>> the acknowledgement after processing the message in handleMessage method.
>>>> Can anyone tell me how to do that?
>>>>
>>>> Section 3.11 in [1] suggests you are supposed to use Channel#basicAck
>>>> from RabbitMQ Java client
>>>> directly.
>>>>
>>>> 1.
>>>> http://docs.spring.io/spring-amqp/docs/1.2.1.BUILD-SNAPSHOT/reference/html/amqp.html#d4e329
>>>>
>>>> MK
>>>>
>>>> Software Engineer, Pivotal/RabbitMQ
>>>>
>>>>
>>>> _______________________________________________
>>>> rabbitmq-discuss mailing list
>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>
>>>
>>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/4ac029a6/attachment.html>

From mklishin at gopivotal.com  Thu Jan  9 10:17:54 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 9 Jan 2014 14:17:54 +0400
Subject: [rabbitmq-discuss] How to handle AcknowledgeMode.MANUAL
	acknowledgements within handleMessage() method at consumer end?
In-Reply-To: <CAH75Yb7v_gxdaQ08C=--GxQ5DgcBR3V_1J6dBJUtxJ5KgAzROQ@mail.gmail.com>
References: <CAH75Yb6_AwYTmUrx1t_JcQUW3SmkFFbufRtdk8AdUdUBZKrOdQ@mail.gmail.com>
 <1DD83BF2-EB60-4856-A912-51D040D5ABDC@rabbitmq.com>
 <CADtU9_utZSRh_j5h0szOXWcZ31T2EJ5K-RexwSqsBASNB+yYgQ@mail.gmail.com>
 <CADtU9_uPT326MQ8XP6VGGL-fbiC=qAbM4TjnGc4cjE4F0vTZ=Q@mail.gmail.com>
 <CAH75Yb4jt0riEqwvhifh2XLwOwSP1-Uv6GuK=adROSNRq946mg@mail.gmail.com>
 <CAH75Yb7v_gxdaQ08C=--GxQ5DgcBR3V_1J6dBJUtxJ5KgAzROQ@mail.gmail.com>
Message-ID: <D420DB67-D8BF-4878-BB5F-F016DC7131B0@rabbitmq.com>

On 9 Jan 2014, at 14:13, Rajasekhar P <sekhar434145 at gmail.com> wrote:

> I want to send that exception to the producer, can you please tell me how can we send it back to producer?

Send a reply message that has its type property set to ?error?. See the RPC tutorial:

http://www.rabbitmq.com/tutorials/tutorial-six-java.html

MK

Software Engineer, Pivotal/RabbitMQ



From Rohit.Patel2 at techmahindra.com  Thu Jan  9 10:25:27 2014
From: Rohit.Patel2 at techmahindra.com (Rohit Patle)
Date: Thu, 9 Jan 2014 10:25:27 +0000
Subject: [rabbitmq-discuss] rabbitmq-c Memory-Based Flow Control API.
Message-ID: <27E054594442884E9A46DBCF9AE7408162BA26@BSDMSATMBX001.mahindrasatyam.ad>

Hi Alan,

Thanks you for your advise. But I am facing following issues with your suggestions as:

1. After doing #rabbitmqctl list_channels client_flow_blocked, I could see the "false" value is default set there. While using amqp_login(), I am unable to find  the "capabilities table" to set 'connection.blocked'=true as mentioned. Please let me know how to do it.

2.  While using amqp_simple_wait_frame_noblock() I am unable to find the enum values you mentioned(AMQP_CONNECTION_BLOCKED_METHOD and AMQP_CONNECTION_UNBLOCKED_METHOD) which I supposed to get as result of amqp_simple_wait_frame_noblock() in amqp.h or amqp_framing.h. Please suggest.

FYI I am using link : http://alanxz.github.io/rabbitmq-c/docs/0.4.0/amqp_8h.html#a9cada07768aa46297acdd701f96d0d7f as documentation guide.

Thanks & Regards,
ROhit

________________________________

DISCLAIMER:
This email (including any attachments) is intended for the sole use of the intended recipient/s and may contain material that is CONFIDENTIAL AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or distribution or forwarding of any or all of the contents in this message is STRICTLY PROHIBITED. If you are not the intended recipient, please contact the sender by email and delete all copies; your cooperation in this regard is appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/1eb35d11/attachment.html>

From sekhar434145 at gmail.com  Thu Jan  9 11:06:14 2014
From: sekhar434145 at gmail.com (Rajasekhar P)
Date: Thu, 9 Jan 2014 16:36:14 +0530
Subject: [rabbitmq-discuss] How to handle AcknowledgeMode.MANUAL
 acknowledgements within handleMessage() method at consumer end?
In-Reply-To: <D420DB67-D8BF-4878-BB5F-F016DC7131B0@rabbitmq.com>
References: <CAH75Yb6_AwYTmUrx1t_JcQUW3SmkFFbufRtdk8AdUdUBZKrOdQ@mail.gmail.com>
 <1DD83BF2-EB60-4856-A912-51D040D5ABDC@rabbitmq.com>
 <CADtU9_utZSRh_j5h0szOXWcZ31T2EJ5K-RexwSqsBASNB+yYgQ@mail.gmail.com>
 <CADtU9_uPT326MQ8XP6VGGL-fbiC=qAbM4TjnGc4cjE4F0vTZ=Q@mail.gmail.com>
 <CAH75Yb4jt0riEqwvhifh2XLwOwSP1-Uv6GuK=adROSNRq946mg@mail.gmail.com>
 <CAH75Yb7v_gxdaQ08C=--GxQ5DgcBR3V_1J6dBJUtxJ5KgAzROQ@mail.gmail.com>
 <D420DB67-D8BF-4878-BB5F-F016DC7131B0@rabbitmq.com>
Message-ID: <CAH75Yb566LNARyCRx7ZYanomFtrZ3yuwsiqnRvz6MBvU-LffsQ@mail.gmail.com>

Am using spring amqp API, where the error is occurred inside
handleMessage() method. Can you please let me know how can we do that?


On Thu, Jan 9, 2014 at 3:47 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> On 9 Jan 2014, at 14:13, Rajasekhar P <sekhar434145 at gmail.com> wrote:
>
> > I want to send that exception to the producer, can you please tell me
> how can we send it back to producer?
>
> Send a reply message that has its type property set to ?error?. See the
> RPC tutorial:
>
> http://www.rabbitmq.com/tutorials/tutorial-six-java.html
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/f774cef6/attachment.html>

From mklishin at gopivotal.com  Thu Jan  9 11:09:53 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 9 Jan 2014 15:09:53 +0400
Subject: [rabbitmq-discuss] How to handle AcknowledgeMode.MANUAL
	acknowledgements within handleMessage() method at consumer end?
In-Reply-To: <CAH75Yb566LNARyCRx7ZYanomFtrZ3yuwsiqnRvz6MBvU-LffsQ@mail.gmail.com>
References: <CAH75Yb6_AwYTmUrx1t_JcQUW3SmkFFbufRtdk8AdUdUBZKrOdQ@mail.gmail.com>
 <1DD83BF2-EB60-4856-A912-51D040D5ABDC@rabbitmq.com>
 <CADtU9_utZSRh_j5h0szOXWcZ31T2EJ5K-RexwSqsBASNB+yYgQ@mail.gmail.com>
 <CADtU9_uPT326MQ8XP6VGGL-fbiC=qAbM4TjnGc4cjE4F0vTZ=Q@mail.gmail.com>
 <CAH75Yb4jt0riEqwvhifh2XLwOwSP1-Uv6GuK=adROSNRq946mg@mail.gmail.com>
 <CAH75Yb7v_gxdaQ08C=--GxQ5DgcBR3V_1J6dBJUtxJ5KgAzROQ@mail.gmail.com>
 <D420DB67-D8BF-4878-BB5F-F016DC7131B0@rabbitmq.com>
 <CAH75Yb566LNARyCRx7ZYanomFtrZ3yuwsiqnRvz6MBvU-LffsQ@mail.gmail.com>
Message-ID: <CD08DE59-3D1B-4180-BEF5-A5C56772FB8B@rabbitmq.com>


On 9 Jan 2014, at 15:06, Rajasekhar P <sekhar434145 at gmail.com> wrote:

> Am using spring amqp API, where the error is occurred inside handleMessage() method. Can you please let me know how can we do that?

Channel#basicPublish.

Please try to do a little bit of research on the Java client, spring-amqp does not try to completely replace it.

MK

Software Engineer, Pivotal/RabbitMQ



From emile at rabbitmq.com  Thu Jan  9 11:10:06 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 09 Jan 2014 11:10:06 +0000
Subject: [rabbitmq-discuss] connections/queues hang using IE9 with
 web-stomp plugin
In-Reply-To: <e1c2d506-4873-4d79-a889-a95921e785dd@googlegroups.com>
References: <e1c2d506-4873-4d79-a889-a95921e785dd@googlegroups.com>
Message-ID: <52CE838E.1000507@rabbitmq.com>


Hi Sebastien,

On 08/01/14 17:43, Sebastien Dubois wrote:
> When using IE9, the rabbitMQ connections are never closed when the 
> client gets disconnected.  For example if the browser window/tab is 
> closed, the connections/queues used during the session still appears
> as valid, even though they aren't.


Have you been able to determine which form of websocket emulation these
connections use?

Have you checked whether the workaround in this issue helps?
https://github.com/sockjs/sockjs-client/issues/54



-Emile






From grussell at gopivotal.com  Thu Jan  9 13:49:53 2014
From: grussell at gopivotal.com (Gary Russell)
Date: Thu, 9 Jan 2014 08:49:53 -0500
Subject: [rabbitmq-discuss] How to handle AcknowledgeMode.MANUAL
 acknowledgements within handleMessage() method at consumer end?
In-Reply-To: <CD08DE59-3D1B-4180-BEF5-A5C56772FB8B@rabbitmq.com>
References: <CAH75Yb6_AwYTmUrx1t_JcQUW3SmkFFbufRtdk8AdUdUBZKrOdQ@mail.gmail.com>
 <1DD83BF2-EB60-4856-A912-51D040D5ABDC@rabbitmq.com>
 <CADtU9_utZSRh_j5h0szOXWcZ31T2EJ5K-RexwSqsBASNB+yYgQ@mail.gmail.com>
 <CADtU9_uPT326MQ8XP6VGGL-fbiC=qAbM4TjnGc4cjE4F0vTZ=Q@mail.gmail.com>
 <CAH75Yb4jt0riEqwvhifh2XLwOwSP1-Uv6GuK=adROSNRq946mg@mail.gmail.com>
 <CAH75Yb7v_gxdaQ08C=--GxQ5DgcBR3V_1J6dBJUtxJ5KgAzROQ@mail.gmail.com>
 <D420DB67-D8BF-4878-BB5F-F016DC7131B0@rabbitmq.com>
 <CAH75Yb566LNARyCRx7ZYanomFtrZ3yuwsiqnRvz6MBvU-LffsQ@mail.gmail.com>
 <CD08DE59-3D1B-4180-BEF5-A5C56772FB8B@rabbitmq.com>
Message-ID: <CADtU9_sDDFRNfWTOJ+qsmCpc6GxTO+6VQMbw947R3WYumBHGsg@mail.gmail.com>

You rarely  need to access the client API directly with Spring AMQP. See
the reference documentation
http://docs.spring.io/spring-amqp/docs/1.3.0.BUILD-SNAPSHOT/reference/html/

You can do the whole thing in Spring without needing to use the client API;
simply inject a RabbitTemplate into your listener call one of its send (or
convertAndSend) methods. The template will automatically use the same
channel (by default); you can then throw an exception and it will be
rejected/requeued,

void onMessage(String Message) {

    try {

    } catch (SomeException) {
        this.rabbitTemplate.converAndSend(someData);
        throw SomeRuntimeException();
    }
}

For Spring-AMQP specific questions, you can use our forum
http://forum.spring.io/forum/spring-projects/integration/amqp or the
spring-amqp tag on StackOverflow.




On Thu, Jan 9, 2014 at 6:09 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

>
> On 9 Jan 2014, at 15:06, Rajasekhar P <sekhar434145 at gmail.com> wrote:
>
> > Am using spring amqp API, where the error is occurred inside
> handleMessage() method. Can you please let me know how can we do that?
>
> Channel#basicPublish.
>
> Please try to do a little bit of research on the Java client, spring-amqp
> does not try to completely replace it.
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/5f7728b2/attachment.html>

From jonathan.thoms at gmail.com  Thu Jan  9 15:37:08 2014
From: jonathan.thoms at gmail.com (Jonathan Thoms)
Date: Thu, 9 Jan 2014 07:37:08 -0800
Subject: [rabbitmq-discuss] Competing Consumers and Transactional
 Clients Patterns from Enterprise Integration Patterns
In-Reply-To: <CAMcAHLUYV3WgDUigkaTtGjXCw7vcY6jm-XDZNjeMMCoZYnpWtQ@mail.gmail.com>
References: <CAOmO7=99uvzLXqY2N9WM7ZC48+GcJSq8TVLdP0TFem2H9UCpEg@mail.gmail.com>
 <CAMcAHLUYV3WgDUigkaTtGjXCw7vcY6jm-XDZNjeMMCoZYnpWtQ@mail.gmail.com>
Message-ID: <CAOmO7=_19XO7v1zxeCckU0MNQOKtaYuMBtZQrd6coZnDNnUR-Q@mail.gmail.com>

Hi Alvaro,

Thanks for responding back to me.

Really what I'm trying to do is have multiple clients get tasks off of the
queue and have them commit the completion of the task to the queue as a
means of popping it off permanently. By committing on completion, I'm
trying to ensure that if a client crashes halfway through executing a task,
the queue doesn't lose the task.

Does that make sense?

Thanks,
Jon


On Tue, Jan 7, 2014 at 4:15 PM, Alvaro Videla <videlalvaro at gmail.com> wrote:

> Hi,
>
> What are you trying to do? Apart from the pattern spec, what do you
> mean by Transactional Clients? Specifically regarding consumers. What
> do you expect them to do with each message they receive?
>
> Regards,
>
> Alvaro
>
> On Wed, Jan 8, 2014 at 12:57 AM, Jonathan Thoms
> <jonathan.thoms at gmail.com> wrote:
> > Hi all,
> >
> > I'm new to RabbitMQ but have read the EIP book by Gregor Hohpe. I'm
> > currently working on a project where I may use RabbitMQ. However, if I'm
> > going to go with a queueing approach, I need to have multiple
> transactional
> > clients that also act as competing consumers. However, in his book, Hohpe
> > states that you shouldn't have multiple transactional clients that
> double as
> > competing consumers.
> >
> > Has Rabbit developed a queue that solves this general shortcoming of
> queues?
> >
> > Thanks,
> > Jon
> >
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-discuss at lists.rabbitmq.com
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> >
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>



-- 
Cheers,
Jon Thoms
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/14753c10/attachment.html>

From videlalvaro at gmail.com  Thu Jan  9 16:27:19 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Thu, 9 Jan 2014 17:27:19 +0100
Subject: [rabbitmq-discuss] Competing Consumers and Transactional
 Clients Patterns from Enterprise Integration Patterns
In-Reply-To: <CAOmO7=_19XO7v1zxeCckU0MNQOKtaYuMBtZQrd6coZnDNnUR-Q@mail.gmail.com>
References: <CAOmO7=99uvzLXqY2N9WM7ZC48+GcJSq8TVLdP0TFem2H9UCpEg@mail.gmail.com>
 <CAMcAHLUYV3WgDUigkaTtGjXCw7vcY6jm-XDZNjeMMCoZYnpWtQ@mail.gmail.com>
 <CAOmO7=_19XO7v1zxeCckU0MNQOKtaYuMBtZQrd6coZnDNnUR-Q@mail.gmail.com>
Message-ID: <CAMcAHLW0fFHOjBoc1kcYq+qtZcXFrNtCAQTs-9HzpP2EhYa1cQ@mail.gmail.com>

Hi,

On Thu, Jan 9, 2014 at 4:37 PM, Jonathan Thoms <jonathan.thoms at gmail.com> wrote:
> Really what I'm trying to do is have multiple clients get tasks off of the
> queue and have them commit the completion of the task to the queue as a
> means of popping it off permanently. By committing on completion, I'm trying
> to ensure that if a client crashes halfway through executing a task, the
> queue doesn't lose the task.

If I understand you correctly, then what you need are message
acknowledgments, which are supported by RabbitMQ.

See: http://www.rabbitmq.com/tutorials/tutorial-two-python.html

Regards,

Alvaro

From jonathan.thoms at gmail.com  Thu Jan  9 17:00:39 2014
From: jonathan.thoms at gmail.com (Jonathan Thoms)
Date: Thu, 9 Jan 2014 09:00:39 -0800
Subject: [rabbitmq-discuss] Competing Consumers and Transactional
 Clients Patterns from Enterprise Integration Patterns
In-Reply-To: <CAMcAHLW0fFHOjBoc1kcYq+qtZcXFrNtCAQTs-9HzpP2EhYa1cQ@mail.gmail.com>
References: <CAOmO7=99uvzLXqY2N9WM7ZC48+GcJSq8TVLdP0TFem2H9UCpEg@mail.gmail.com>
 <CAMcAHLUYV3WgDUigkaTtGjXCw7vcY6jm-XDZNjeMMCoZYnpWtQ@mail.gmail.com>
 <CAOmO7=_19XO7v1zxeCckU0MNQOKtaYuMBtZQrd6coZnDNnUR-Q@mail.gmail.com>
 <CAMcAHLW0fFHOjBoc1kcYq+qtZcXFrNtCAQTs-9HzpP2EhYa1cQ@mail.gmail.com>
Message-ID: <CAOmO7=-u+A7X5DqqsSONEBVqJRBgoeEtibWUYay0SxQjvdjaNg@mail.gmail.com>

Hi Alvaro,

This page looks to be exactly what I need. Thanks so much!


On Thu, Jan 9, 2014 at 8:27 AM, Alvaro Videla <videlalvaro at gmail.com> wrote:

> Hi,
>
> On Thu, Jan 9, 2014 at 4:37 PM, Jonathan Thoms <jonathan.thoms at gmail.com>
> wrote:
> > Really what I'm trying to do is have multiple clients get tasks off of
> the
> > queue and have them commit the completion of the task to the queue as a
> > means of popping it off permanently. By committing on completion, I'm
> trying
> > to ensure that if a client crashes halfway through executing a task, the
> > queue doesn't lose the task.
>
> If I understand you correctly, then what you need are message
> acknowledgments, which are supported by RabbitMQ.
>
> See: http://www.rabbitmq.com/tutorials/tutorial-two-python.html
>
> Regards,
>
> Alvaro
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>



-- 
Cheers,
Jon Thoms
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/a50fc11a/attachment.html>

From dubois.sebastien66 at gmail.com  Thu Jan  9 17:24:07 2014
From: dubois.sebastien66 at gmail.com (Sebastien Dubois)
Date: Thu, 9 Jan 2014 12:24:07 -0500
Subject: [rabbitmq-discuss] connections/queues hang using IE9 with
 web-stomp plugin
In-Reply-To: <52CE838E.1000507@rabbitmq.com>
References: <e1c2d506-4873-4d79-a889-a95921e785dd@googlegroups.com>
 <52CE838E.1000507@rabbitmq.com>
Message-ID: <CAFovD-r9Lw+pKeknjdQSjBUm8px7bPUe-oY4htXG0KF-qL+wtA@mail.gmail.com>

> Have you been able to determine which form of websocket emulation these
connections use?

>From the IE9 traces, it does seems that we use xhr-streaming.

> Have you checked whether the workaround in this issue helps?
https://github.com/sockjs/sockjs-client/issues/54

I'm not sure how to use this workaround.  As I understand, according to
this info, we would need to change the way the SockJS sockets are createdon
the server side, but isn't that done from within the web-stomp plugin
itself?

Thanks & BR,
/Sebastien



On Thu, Jan 9, 2014 at 6:10 AM, Emile Joubert <emile at rabbitmq.com> wrote:

>
> Hi Sebastien,
>
> On 08/01/14 17:43, Sebastien Dubois wrote:
> > When using IE9, the rabbitMQ connections are never closed when the
> > client gets disconnected.  For example if the browser window/tab is
> > closed, the connections/queues used during the session still appears
> > as valid, even though they aren't.
>
>
> Have you been able to determine which form of websocket emulation these
> connections use?
>
> Have you checked whether the workaround in this issue helps?
> https://github.com/sockjs/sockjs-client/issues/54
>
>
>
> -Emile
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/e9b1af85/attachment.html>

From michael.laing at nytimes.com  Thu Jan  9 17:39:58 2014
From: michael.laing at nytimes.com (Laing, Michael)
Date: Thu, 9 Jan 2014 12:39:58 -0500
Subject: [rabbitmq-discuss] Latest revision of NYTimes site is supported
 by RabbitMQ - launched 8 January 2014
In-Reply-To: <CA+ttMd_gDV-n6se3NWFgP2q3iZBd5HKf_uNgxx3iceEn4bbASw@mail.gmail.com>
References: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
 <CAMcAHLV2iF7pr+MAOJUkso8=XAK4gkyUzUmPXgV2WAT07MPPbQ@mail.gmail.com>
 <CA+ttMd_gDV-n6se3NWFgP2q3iZBd5HKf_uNgxx3iceEn4bbASw@mail.gmail.com>
Message-ID: <CAKgmDnG45GoqJyu_MrqNvR_zAspEahsh9eVrr+orn3NkfaEWFQ@mail.gmail.com>

We have not yet published anything but that is in the plan - and soon :)


On Wed, Jan 8, 2014 at 2:50 PM, Paul Bell <arachweb at gmail.com> wrote:

> Michael,
>
> That's very exciting news.
>
> Have you published any documents on this architecture, i.e., stuff you can
> share publicly?
>
> I'd be most interested in seeing them.
>
> Cordially,
>
> Paul
>
>
> On Wed, Jan 8, 2014 at 2:47 PM, Alvaro Videla <videlalvaro at gmail.com>wrote:
>
>> Michael,
>>
>> Wow. This is great news ??no pun intended ;-)
>>
>> It's really cool to hear this.
>>
>> Regards,
>>
>> Alvaro
>>
>> On Wed, Jan 8, 2014 at 8:26 PM, Laing, Michael
>> <michael.laing at nytimes.com> wrote:
>> > Just a quick note and thank you to the RabbitMQ team for a great
>> product.
>> >
>> > Our premier online offering www.nytimes.com has a new look and new
>> > underpinnings, now including a messaging architecture implemented using
>> > RabbitMQ.
>> >
>> > This architecture - nyt?a?rik - has dozens of RabbitMQ instances spread
>> > across 6 AWS zones in Oregon and Dublin. The instances are organized
>> into
>> > "wholesale" and "retail" layers. Connection to clients is via
>> > websockets/sockjs.
>> >
>> > Upon launch today, the system autoscaled to ~500,000 users. Connection
>> times
>> > remained flat at ~200ms.
>> >
>> > nyt?a?rik provides subscription services for breaking news, video feeds,
>> > etc. and will add more event based services. It also supports individual
>> > messaging related to subscription status for registered users.
>> >
>> > This system would not have been possible without RabbitMQ. It was the
>> one
>> > component, used everywhere, that never faltered or failed.
>> >
>> > We look forward to contributing our own code to the open source
>> community
>> > but it will be difficult to match the quality of this outstanding
>> product
>> > and its supporting team.
>> >
>> > Michael Laing
>> > Systems Architect
>> > NYTimes
>> >
>> > _______________________________________________
>> > rabbitmq-discuss mailing list
>> > rabbitmq-discuss at lists.rabbitmq.com
>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>> >
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/d58ac234/attachment.html>

From arachweb at gmail.com  Thu Jan  9 17:50:55 2014
From: arachweb at gmail.com (Paul Bell)
Date: Thu, 9 Jan 2014 12:50:55 -0500
Subject: [rabbitmq-discuss] Latest revision of NYTimes site is supported
 by RabbitMQ - launched 8 January 2014
In-Reply-To: <CAKgmDnG45GoqJyu_MrqNvR_zAspEahsh9eVrr+orn3NkfaEWFQ@mail.gmail.com>
References: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
 <CAMcAHLV2iF7pr+MAOJUkso8=XAK4gkyUzUmPXgV2WAT07MPPbQ@mail.gmail.com>
 <CA+ttMd_gDV-n6se3NWFgP2q3iZBd5HKf_uNgxx3iceEn4bbASw@mail.gmail.com>
 <CAKgmDnG45GoqJyu_MrqNvR_zAspEahsh9eVrr+orn3NkfaEWFQ@mail.gmail.com>
Message-ID: <CA+ttMd9Cd9JA1JoG0eNhevB99FX4YzpggcwxnbdsxLgMkt3hfA@mail.gmail.com>

Terrific, Michael; thanks again.

I'll keep an eye out here for news of their publication.

-Paul


On Thu, Jan 9, 2014 at 12:39 PM, Laing, Michael
<michael.laing at nytimes.com>wrote:

> We have not yet published anything but that is in the plan - and soon :)
>
>
> On Wed, Jan 8, 2014 at 2:50 PM, Paul Bell <arachweb at gmail.com> wrote:
>
>> Michael,
>>
>> That's very exciting news.
>>
>> Have you published any documents on this architecture, i.e., stuff you
>> can share publicly?
>>
>> I'd be most interested in seeing them.
>>
>> Cordially,
>>
>> Paul
>>
>>
>> On Wed, Jan 8, 2014 at 2:47 PM, Alvaro Videla <videlalvaro at gmail.com>wrote:
>>
>>> Michael,
>>>
>>> Wow. This is great news ??no pun intended ;-)
>>>
>>> It's really cool to hear this.
>>>
>>> Regards,
>>>
>>> Alvaro
>>>
>>> On Wed, Jan 8, 2014 at 8:26 PM, Laing, Michael
>>> <michael.laing at nytimes.com> wrote:
>>> > Just a quick note and thank you to the RabbitMQ team for a great
>>> product.
>>> >
>>> > Our premier online offering www.nytimes.com has a new look and new
>>> > underpinnings, now including a messaging architecture implemented using
>>> > RabbitMQ.
>>> >
>>> > This architecture - nyt?a?rik - has dozens of RabbitMQ instances spread
>>> > across 6 AWS zones in Oregon and Dublin. The instances are organized
>>> into
>>> > "wholesale" and "retail" layers. Connection to clients is via
>>> > websockets/sockjs.
>>> >
>>> > Upon launch today, the system autoscaled to ~500,000 users. Connection
>>> times
>>> > remained flat at ~200ms.
>>> >
>>> > nyt?a?rik provides subscription services for breaking news, video
>>> feeds,
>>> > etc. and will add more event based services. It also supports
>>> individual
>>> > messaging related to subscription status for registered users.
>>> >
>>> > This system would not have been possible without RabbitMQ. It was the
>>> one
>>> > component, used everywhere, that never faltered or failed.
>>> >
>>> > We look forward to contributing our own code to the open source
>>> community
>>> > but it will be difficult to match the quality of this outstanding
>>> product
>>> > and its supporting team.
>>> >
>>> > Michael Laing
>>> > Systems Architect
>>> > NYTimes
>>> >
>>> > _______________________________________________
>>> > rabbitmq-discuss mailing list
>>> > rabbitmq-discuss at lists.rabbitmq.com
>>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>> >
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/fe6684b3/attachment.html>

From michael.laing at nytimes.com  Thu Jan  9 18:30:16 2014
From: michael.laing at nytimes.com (Laing, Michael)
Date: Thu, 9 Jan 2014 13:30:16 -0500
Subject: [rabbitmq-discuss] Latest revision of NYTimes site is supported
 by RabbitMQ - launched 8 January 2014
In-Reply-To: <549A0F02-A34E-485E-A064-4F578F7F72D7@rabbitmq.com>
References: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
 <549A0F02-A34E-485E-A064-4F578F7F72D7@rabbitmq.com>
Message-ID: <CAKgmDnHB_NRvxPjLoVs=X7zd0WrNb=_p+MswhXPYdDdx_SpDEg@mail.gmail.com>

We are using: a single Amazon Linux AMI, RabbitMQ, Cassandra 2, python 2

We use pika with tornado and libev for the nyt?a?rik wholesale and retail
pieces; our internal clients use Java and PHP.

We use shovels - lots of shovels - to interconnect.

In production we have a RabbitMQ client 3-cluster and a core 3-cluster in
each region on c1-xlarges. A proxy cluster of c1-mediums in Virginia connects
clients to the client clusters. All services are parallelized so we can add
more cores and clients.

The retail layer autoscales and use c1-mediums with a single rabbit
shovel-connected to one of the core rabbits. Each python websocket/sockjs
gateway supports up to 100K clients.

We autodeploy into subnets within Virtual Private Clouds in AWS. Clients
are routed via least latency to the fastest healthy region.

Of the technical components, the gateway is the most complex. We will be
moving it into open source in pieces and the first piece is likely to be
the python websocket/sockjs libraries which, frankly, beat the crap out of
most other stuff out there and fully conform with the relevant standards.
It can be loosely thought of as a C co-process managed by python, and as
such, may be possible to reuse in other languages/environments.

We have a 12-node Cassandra cluster across the 2 regions / 6 zones. It is
used for persistence of messages and as cache. We do not use persistence in
RabbitMQ. Our services are idempotent and important messages may be
replicated multiple times creating intentional race conditions in which the
fastest wins.

Although it may seem complex, nyt?a?rik has simple components and is mostly
principles and plumbing. The key point to grasp is that there is no head,
no master, no single point of failure. As I write this I can see components
failing (not RabbitMQ), and we are fixing them so they are more reliable.
But the system doesn't fail, users can connect, and messages are delivered,
regardless - all within design parameters.

Michael



On Wed, Jan 8, 2014 at 2:58 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> On 8 Jan 2014, at 23:26, Laing, Michael <michael.laing at nytimes.com> wrote:
>
> > Our premier online offering www.nytimes.com has a new look and new
> underpinnings, now including a messaging architecture implemented using
> RabbitMQ.
> >
> > This architecture - nyt?a?rik - has dozens of RabbitMQ instances spread
> across 6 AWS zones in Oregon and Dublin. The instances are organized into
> "wholesale" and "retail" layers. Connection to clients is via
> websockets/sockjs.
> >
> > Upon launch today, the system autoscaled to ~500,000 users. Connection
> times remained flat at ~200ms.
> >
> > nyt?a?rik provides subscription services for breaking news, video feeds,
> etc. and will add more event based services. It also supports individual
> messaging related to subscription status for registered users.
>
> Michael,
>
> Congrats on the launch!
>
> I?m curious what technologies and RabbitMQ clients do you use and plan on
> adding
> in the future?
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/9831923b/attachment.html>

From cwstorm at gmail.com  Thu Jan  9 18:30:13 2014
From: cwstorm at gmail.com (cw storm)
Date: Thu, 9 Jan 2014 13:30:13 -0500
Subject: [rabbitmq-discuss] How to retrieve connection/channel in order to
 create the subscriber service in Java from the client
Message-ID: <CAETr1H8oOzWVsCNHR78KO=Kh=gMN10yL9ui=fCgW=rh0_M7Wkw@mail.gmail.com>

We have rabbitmq server where there's bunch of open connections/channels
already establish and queues defined.  We have a vendor ESB server (Java)
which will be performing publishing/subscribing to/from the rabbit server.
 Since there's already bunch of open connections/channels for the queues, I
want to write java services on the client (ESB) for the
publishing/subscribing.  I want to be able to use the existing open
connections/channelses without creating a new connection factory for my
publishing/subscribing services in my java service.  In code, how can I get
the existing open  conn/channel for that queue to be able to use the say
basicPublish and basicConsume apis.

Thanks in advance for your immediate responses.

-Phillip
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/b404a024/attachment.html>

From mklishin at gopivotal.com  Thu Jan  9 18:37:37 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 9 Jan 2014 22:37:37 +0400
Subject: [rabbitmq-discuss] How to retrieve connection/channel in order
	to create the subscriber service in Java from the client
In-Reply-To: <CAETr1H8oOzWVsCNHR78KO=Kh=gMN10yL9ui=fCgW=rh0_M7Wkw@mail.gmail.com>
References: <CAETr1H8oOzWVsCNHR78KO=Kh=gMN10yL9ui=fCgW=rh0_M7Wkw@mail.gmail.com>
Message-ID: <17AEEB2B-A105-4B50-813B-315052EFCAB7@rabbitmq.com>

On 9 Jan 2014, at 22:30, cw storm <cwstorm at gmail.com> wrote:

>  want to be able to use the existing open connections/channelses without creating a new connection factory for my publishing/subscribing services in my java service.  In code, how can I get the existing open  conn/channel for that queue to be able to use the say basicPublish and basicConsume apis.

RabbitMQ Java client does not keep track of opened connections. You need to pass them to the
parts of the codebase that you want to use them.

MK

Software Engineer, Pivotal/RabbitMQ



From bakkerthehacker at gmail.com  Thu Jan  9 19:26:54 2014
From: bakkerthehacker at gmail.com (Grant Bakker)
Date: Thu, 9 Jan 2014 11:26:54 -0800 (PST)
Subject: [rabbitmq-discuss] bramqp - AMQP library for node.js
Message-ID: <875dfa03-9758-4098-8ef7-77b37539dc45@googlegroups.com>

Hi!  I have developed an amqp library for node.js.  
You can check it out here: http://github.com/bakkerthehacker/bramqp.  
It would be awesome if this was added to the list of clients and developer 
tools
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/0d4b3ef5/attachment.html>

From dubois.sebastien66 at gmail.com  Thu Jan  9 23:16:25 2014
From: dubois.sebastien66 at gmail.com (Sebastien Dubois)
Date: Thu, 9 Jan 2014 18:16:25 -0500
Subject: [rabbitmq-discuss] connections/queues hang using IE9 with
 web-stomp plugin
In-Reply-To: <CAFovD-r9Lw+pKeknjdQSjBUm8px7bPUe-oY4htXG0KF-qL+wtA@mail.gmail.com>
References: <e1c2d506-4873-4d79-a889-a95921e785dd@googlegroups.com>
 <52CE838E.1000507@rabbitmq.com>
 <CAFovD-r9Lw+pKeknjdQSjBUm8px7bPUe-oY4htXG0KF-qL+wtA@mail.gmail.com>
Message-ID: <CAFovD-qMPxKd7McjmEEd+TF6zF6vF8AQuf0FogoVHVGQo6rWHQ@mail.gmail.com>

Hi again,

  I was finally able to make it work correctly by restricting SockJS to use
xdr-polling and xhr-polling for non websocket-capable browsers instead of
streaming that it was using.

Thx & BR,
/Sebastien


On Thu, Jan 9, 2014 at 12:24 PM, Sebastien Dubois <
dubois.sebastien66 at gmail.com> wrote:

> > Have you been able to determine which form of websocket emulation these
> connections use?
>
> From the IE9 traces, it does seems that we use xhr-streaming.
>
> > Have you checked whether the workaround in this issue helps?
> https://github.com/sockjs/sockjs-client/issues/54
>
> I'm not sure how to use this workaround.  As I understand, according to
> this info, we would need to change the way the SockJS sockets are createdon
> the server side, but isn't that done from within the web-stomp plugin
> itself?
>
> Thanks & BR,
> /Sebastien
>
>
>
> On Thu, Jan 9, 2014 at 6:10 AM, Emile Joubert <emile at rabbitmq.com> wrote:
>
>>
>> Hi Sebastien,
>>
>> On 08/01/14 17:43, Sebastien Dubois wrote:
>> > When using IE9, the rabbitMQ connections are never closed when the
>> > client gets disconnected.  For example if the browser window/tab is
>> > closed, the connections/queues used during the session still appears
>> > as valid, even though they aren't.
>>
>>
>> Have you been able to determine which form of websocket emulation these
>> connections use?
>>
>> Have you checked whether the workaround in this issue helps?
>> https://github.com/sockjs/sockjs-client/issues/54
>>
>>
>>
>> -Emile
>>
>>
>>
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/967182ea/attachment.html>

From roberto at canary.is  Fri Jan 10 05:56:21 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Thu, 9 Jan 2014 21:56:21 -0800
Subject: [rabbitmq-discuss] Rabbitmq-c
Message-ID: <CANAFtV51cK5fvwHt8q8Pnc3qoffr1nPva+yXP6vGGS_6=VYE2w@mail.gmail.com>

I'm not very familiar with cmake. Can somebody tell me what do I need to
change to build rabbitmq-c using another compiler?

In my case it is gnueabi.

Thank you,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/1a3a6eb7/attachment.html>

From michael.s.klishin at gmail.com  Fri Jan 10 06:31:49 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 10 Jan 2014 10:31:49 +0400
Subject: [rabbitmq-discuss] Rabbitmq-c
In-Reply-To: <CANAFtV51cK5fvwHt8q8Pnc3qoffr1nPva+yXP6vGGS_6=VYE2w@mail.gmail.com>
References: <CANAFtV51cK5fvwHt8q8Pnc3qoffr1nPva+yXP6vGGS_6=VYE2w@mail.gmail.com>
Message-ID: <CAE3HoVSejSvX_omhYLhyo0niAzS_PL9YWTWz1Rdn5edaRkpz_Q@mail.gmail.com>

2014/1/10 Roberto Pagliari <roberto at canary.is>

> Can somebody tell me what do I need to change to build rabbitmq-c using
> another compiler?


export CC="clang"

http://www.cmake.org/Wiki/CMake_Useful_Variables
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140110/6f2c4c1c/attachment.html>

From michael.s.klishin at gmail.com  Fri Jan 10 06:34:05 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 10 Jan 2014 10:34:05 +0400
Subject: [rabbitmq-discuss] bramqp - AMQP library for node.js
In-Reply-To: <875dfa03-9758-4098-8ef7-77b37539dc45@googlegroups.com>
References: <875dfa03-9758-4098-8ef7-77b37539dc45@googlegroups.com>
Message-ID: <CAE3HoVRwpZJ2qSvCZKZicDt7jUrhg_UV9dzmWtao_5=sERFZ3g@mail.gmail.com>

2014/1/9 Grant Bakker <bakkerthehacker at gmail.com>

> Hi!  I have developed an amqp library for node.js.
> You can check it out here: http://github.com/bakkerthehacker/bramqp.
> It would be awesome if this was added to the list of clients and developer
> tools


How is it different from amqp.node and node.amqp?
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140110/9cca8bf0/attachment.html>

From roberto at canary.is  Fri Jan 10 07:07:26 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Thu, 9 Jan 2014 23:07:26 -0800
Subject: [rabbitmq-discuss] Rabbitmq-c
In-Reply-To: <CAE3HoVSejSvX_omhYLhyo0niAzS_PL9YWTWz1Rdn5edaRkpz_Q@mail.gmail.com>
References: <CANAFtV51cK5fvwHt8q8Pnc3qoffr1nPva+yXP6vGGS_6=VYE2w@mail.gmail.com>
 <CAE3HoVSejSvX_omhYLhyo0niAzS_PL9YWTWz1Rdn5edaRkpz_Q@mail.gmail.com>
Message-ID: <CANAFtV7kxzrX-KwWTWzRo6+ByOzgT_1EDhJD+cYjW_3MS1659Q@mail.gmail.com>

Only one line? And where do I put it?

On Thursday, January 9, 2014, Michael Klishin wrote:

> 2014/1/10 Roberto Pagliari <roberto at canary.is <javascript:_e({}, 'cvml',
> 'roberto at canary.is');>>
>
>> Can somebody tell me what do I need to change to build rabbitmq-c using
>> another compiler?
>
>
> export CC="clang"
>
> http://www.cmake.org/Wiki/CMake_Useful_Variables
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/3a99109c/attachment.html>

From mklishin at gopivotal.com  Fri Jan 10 07:13:40 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 10 Jan 2014 11:13:40 +0400
Subject: [rabbitmq-discuss] Rabbitmq-c
In-Reply-To: <CANAFtV7kxzrX-KwWTWzRo6+ByOzgT_1EDhJD+cYjW_3MS1659Q@mail.gmail.com>
References: <CANAFtV51cK5fvwHt8q8Pnc3qoffr1nPva+yXP6vGGS_6=VYE2w@mail.gmail.com>
 <CAE3HoVSejSvX_omhYLhyo0niAzS_PL9YWTWz1Rdn5edaRkpz_Q@mail.gmail.com>
 <CANAFtV7kxzrX-KwWTWzRo6+ByOzgT_1EDhJD+cYjW_3MS1659Q@mail.gmail.com>
Message-ID: <1A1DA992-6114-4DDE-BEFE-1EA9C9FC65E8@rabbitmq.com>


On 10 Jan 2014, at 11:07, Roberto Pagliari <roberto at canary.is> wrote:

> Only one line? And where do I put it?

CC is an environment variable that should point to the C compiler you want to use.

You can export it as demonstrated earlier or override it for a single cmake run:

CC=clang cmake

MK

Software Engineer, Pivotal/RabbitMQ



From tlhuang at 800best.com  Fri Jan 10 07:55:03 2014
From: tlhuang at 800best.com (Huang Tonglang)
Date: Fri, 10 Jan 2014 15:55:03 +0800
Subject: [rabbitmq-discuss] which Redhat release is best for rabbitmq? RHEL5
	or RHEL6
In-Reply-To: <1A1DA992-6114-4DDE-BEFE-1EA9C9FC65E8@rabbitmq.com>
References: <CANAFtV51cK5fvwHt8q8Pnc3qoffr1nPva+yXP6vGGS_6=VYE2w@mail.gmail.com>
 <CAE3HoVSejSvX_omhYLhyo0niAzS_PL9YWTWz1Rdn5edaRkpz_Q@mail.gmail.com>
 <CANAFtV7kxzrX-KwWTWzRo6+ByOzgT_1EDhJD+cYjW_3MS1659Q@mail.gmail.com>
 <1A1DA992-6114-4DDE-BEFE-1EA9C9FC65E8@rabbitmq.com>
Message-ID: <023CBAD52AC91842B08759362DE8396C0FD5801C6C@bestex3.800best.net>



Thanks you

Tonglang Huang


From simon at rabbitmq.com  Fri Jan 10 09:52:54 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 10 Jan 2014 09:52:54 +0000
Subject: [rabbitmq-discuss] which Redhat release is best for rabbitmq?
 RHEL5 or RHEL6
In-Reply-To: <023CBAD52AC91842B08759362DE8396C0FD5801C6C@bestex3.800best.net>
References: <CANAFtV51cK5fvwHt8q8Pnc3qoffr1nPva+yXP6vGGS_6=VYE2w@mail.gmail.com>
 <CAE3HoVSejSvX_omhYLhyo0niAzS_PL9YWTWz1Rdn5edaRkpz_Q@mail.gmail.com>
 <CANAFtV7kxzrX-KwWTWzRo6+ByOzgT_1EDhJD+cYjW_3MS1659Q@mail.gmail.com>
 <1A1DA992-6114-4DDE-BEFE-1EA9C9FC65E8@rabbitmq.com>
 <023CBAD52AC91842B08759362DE8396C0FD5801C6C@bestex3.800best.net>
Message-ID: <52CFC2F6.5090902@rabbitmq.com>

In general newer versions are better. You have to do a bit of a 
contrived dance to get Erlang via EPEL in RHEL5 anyway. Also isn't RHEL5 
near EOL?

So I'd definitely say RHEL6.

See http://www.rabbitmq.com/install-rpm.html for installation instructions.

Cheers, Simon

On 10/01/2014 07:55, Huang Tonglang wrote:
>
>
> Thanks you
>
> Tonglang Huang
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


From emile at rabbitmq.com  Fri Jan 10 11:32:07 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 10 Jan 2014 11:32:07 +0000
Subject: [rabbitmq-discuss] MQTT topic ACLs Query
In-Reply-To: <CAPwMmOAsdtVeU=7s2UKPWizc1J6hUnce1CG6CTy=5GJwtr+dWg@mail.gmail.com>
References: <CAPwMmOBHjR7Gf3jTgwQTO8CEMKcavbDjY38Yczb8wYG2H8ABYQ@mail.gmail.com>
 <52CBE501.8020003@rabbitmq.com>
 <CAPwMmOAsdtVeU=7s2UKPWizc1J6hUnce1CG6CTy=5GJwtr+dWg@mail.gmail.com>
Message-ID: <52CFDA37.4080102@rabbitmq.com>


Hi Mark,

On 07/01/14 12:10, Mark Wolfe wrote:

> Hopefully that gives you some insight into what I am hoping to achieve.

It does, thanks for the detail. I have filed a ticket to assess the
feasibility of implementing this feature, preferably in a way that is
compatible with the other protocols implemented by RabbitMQ.



-Emile

From eaitech.2013 at gmail.com  Fri Jan 10 16:14:52 2014
From: eaitech.2013 at gmail.com (EAI Inegration)
Date: Fri, 10 Jan 2014 11:14:52 -0500
Subject: [rabbitmq-discuss] Configure RabbitMQ 3.2.2. with SSL on windows7
Message-ID: <CAB05aS80MDiiAN36UCOMhH=BhgXWyYuBn7_NBfZ9KsUO_U7hsg@mail.gmail.com>

Hi ,

I have installed Erlang's latest version i.e. E16b03.
I am using 64 bit windows 7 for rabbitMQ evaluation.I have installed cygwin
with MinGW 'GCC
I am following the link http://www.rabbitmq.com/ssl.html to configure
rabbitMQ with SSL.
I need to not configured  OpenSSL with current version of erlang on my
machine.
I have  downloaded latest  openssl1.0.01.tar.gz on my machine


But I am not able to understand how do i configure Erlang with this openssl
If anyone could give me step by step instructions,it would be great

Thanks in advance
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140110/0c9ab500/attachment.html>

From stuff at moesel.net  Fri Jan 10 17:09:23 2014
From: stuff at moesel.net (Chris)
Date: Fri, 10 Jan 2014 12:09:23 -0500
Subject: [rabbitmq-discuss] Any message priority support schedule?
Message-ID: <CAHEpgBCDbSwhx1J=QG_G8stOff1vj=giiEiEpTVbEqnyhYpQhQ@mail.gmail.com>

Hi All,

More than a year ago, someone asked if message priority might be
implemented in the near future.  I'm ressurrecting this thread now to ask
again.  Are we any closer to seeing support for Message Priority in
RabbitMQ?  It seems to be one of the very few AMQP "MUST"s that is not yet
supported.

Thanks,
Chris

------------------------------------------------------

Subject:Re: [rabbitmq-discuss] Any message priority support
schedule?<http://markmail.org/message/jpcm6fszhkyrii4j>[image:
permalink] <http://markmail.org/message/jpcm6fszhkyrii4j>From:Francesco
Mazzoli (fran... at rabbitmq.com)Date:Aug 15, 2012 10:08:51 amList:
com.rabbitmq.lists.rabbitmq-discuss

Hi Markiyan,

At Wed, 15 Aug 2012 20:02:08 +0300, Markiyan Kushnir wrote:

Could anybody please shed light on when message priority support would be
added to RabbitMQ? I'm aware of workarounds like "priority-dedicated"
queues or shifting the priority management completely to the application
side. I'm now considering several approaches, and with the priority support
in the RabbitMQ my applications and the infrastructure would become
simpler.

Right now nobody is working on it. We've had a bug open for a long time and
we plan to implement it at some point, but it's not on our list of things
to do now, so it won't happen soon.

-- Francesco * Often in error, never in doubt

_______________________________________________ rabbitmq-discuss mailing
list rabb... at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140110/9afb7832/attachment.html>

From simon at rabbitmq.com  Fri Jan 10 17:12:39 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 10 Jan 2014 17:12:39 +0000
Subject: [rabbitmq-discuss] Configure RabbitMQ 3.2.2. with SSL on
	windows7
In-Reply-To: <CAB05aS80MDiiAN36UCOMhH=BhgXWyYuBn7_NBfZ9KsUO_U7hsg@mail.gmail.com>
References: <CAB05aS80MDiiAN36UCOMhH=BhgXWyYuBn7_NBfZ9KsUO_U7hsg@mail.gmail.com>
Message-ID: <52D02A07.7000803@rabbitmq.com>

If you are using a standard installation of Erlang (which you really 
should be) then it should include an appropriate build of OpenSSL. You 
shouldn't need to do anything.

Cheers, Simon

On 10/01/2014 16:14, EAI Inegration wrote:
> Hi ,
>
> I have installed Erlang's latest version i.e. E16b03.
> I am using 64 bit windows 7 for rabbitMQ evaluation.I have installed
> cygwin with MinGW 'GCC
> I am following the link http://www.rabbitmq.com/ssl.html to configure
> rabbitMQ with SSL.
> I need to not configured  OpenSSL with current version of erlang on my
> machine.
> I have  downloaded latest  openssl1.0.01.tar.gz on my machine
>
>
> But I am not able to understand how do i configure Erlang with this openssl
> If anyone could give me step by step instructions,it would be great
>
> Thanks in advance
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


From shridharan.m at gmail.com  Fri Jan 10 17:54:38 2014
From: shridharan.m at gmail.com (shridharan muthu)
Date: Fri, 10 Jan 2014 09:54:38 -0800
Subject: [rabbitmq-discuss] Rabbit MQ usage
Message-ID: <CAPK6Oeu28rzSSrgYjJFopTLwpftO9WSpqsNZWU_oAAx6pL1SqQ@mail.gmail.com>

Hi there,
  Since our production application tier uses php, publisher connections
can't be long lived. A typical use case is that a publisher will establish
a connection, publish a message and close the connection. Normally, we have
about ~1000 connections open with one or two hundred messages in the queues
and with a publish rate of ~800 msgs/sec. We faced a situation where
consumers weren't consuming for approx 2 mins which caused the cluster to
become slow (probably too many publishers and no consumers). BTW, I am
working on fixing the consumer issue separately. I noticed the connections
started to pile up from the application tier and at one point we had
~11,000 open connections with ~70,000 msgs in the queues. As a result,
cluster wasn't in a usable condition.

   What bothers me most about this situation is the total number of
connections. Total messages seem to be non significant compared to what
Rabbit cluster can handle. I would like to improve this situation by
creating a service layer on top of RabbitMQ cluster with long lived
connections (probably a java service) to avoid creating a connection on the
fly and tearing it down. I am willing to take the performance hit on each
requests for . Does this sound reasonable? Is there a best practice for a
situation like this?

Thanks,
Shri
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140110/af364ad9/attachment.html>

From marti.planellas at acknowledgement.co.uk  Fri Jan 10 18:01:59 2014
From: marti.planellas at acknowledgement.co.uk (=?UTF-8?Q?Mart=C3=AD_Planellas_Rosell?=)
Date: Fri, 10 Jan 2014 10:01:59 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ filling up?
Message-ID: <566100c2-7ddf-47b3-993f-699e80bd480a@googlegroups.com>

I had some problems recently with RabbitMQ freezing now and again 
apparently randomly, and I'm not sure what could be wrong.

When I do a rabbitmqctl report I get a lot of these:

Channels:
pid name connection number user vhost transactional confirm consumer_count 
messages_unacknowledged messages_unconfirmed messages_uncommitted 
acks_uncommitted prefetch_count client_flow_blocked
<'rabbit at edfdr-qb-wb01'.3.8110.0> 127.0.0.1:38774 -> 127.0.0.1:5672 (1) 
<'rabbit at edfdr-qb-wb01'.3.7966.0> 1 guest / false false 0 0 0 0 0 0 false
<'rabbit at edfdr-qb-wb01'.3.9512.0> 127.0.0.1:38775 -> 127.0.0.1:5672 (1) 
<'rabbit at edfdr-qb-wb01'.3.9507.0> 1 guest / false false 0 0 0 0 0 0 false
<'rabbit at edfdr-qb-wb01'.3.9516.0> 127.0.0.1:38775 -> 127.0.0.1:5672 (2) 
<'rabbit at edfdr-qb-wb01'.3.9507.0> 2 guest / false false 0 0 0 0 0 0 false
<'rabbit at edfdr-qb-wb01'.3.9520.0> 127.0.0.1:38775 -> 127.0.0.1:5672 (3) 
<'rabbit at edfdr-qb-wb01'.3.9507.0> 3 guest / false false 0 0 0 0 0 0 false
<'rabbit at edfdr-qb-wb01'.3.9524.0> 127.0.0.1:38775 -> 127.0.0.1:5672 (4) 
<'rabbit at edfdr-qb-wb01'.3.9507.0> 4 guest / false false 0 0 0 0 0 0 false
<'rabbit at edfdr-qb-wb01'.3.9528.0> 127.0.0.1:38775 -> 127.0.0.1:5672 (5) 
<'rabbit at edfdr-qb-wb01'.3.9507.0> 5 guest / false false 0 0 0 0 0 0 false
<'rabbit at edfdr-qb-wb01'.3.9532.0> 127.0.0.1:38775 -> 127.0.0.1:5672 (6) 
<'rabbit at edfdr-qb-wb01'.3.9507.0> 6 guest / false false 0 0 0 0 0 0 false
<'rabbit at edfdr-qb-wb01'.3.9536.0> 127.0.0.1:38775 -> 127.0.0.1:5672 (7) 
<'rabbit at edfdr-qb-wb01'.3.9507.0> 7 guest / false false 0 0 0 0 0 0 false
<'rabbit at edfdr-qb-wb01'.3.9540.0> 127.0.0.1:38775 -> 127.0.0.1:5672 (8) 
<'rabbit at edfdr-qb-wb01'.3.9507.0> 8 guest / false false 0 0 0 0 0 0 false
<'rabbit at edfdr-qb-wb01'.3.9544.0> 127.0.0.1:38775 -> 127.0.0.1:5672 (9) 
<'rabbit at edfdr-qb-wb01'.3.9507.0> 9 guest / false false 0 0 0 0 0 0 false
...
up to 1895

And a lot of:

Consumers on /:
queue_name channel_pid consumer_tag ack_required
updates <'rabbit at edfdr-qb-wb01'.3.16940.0> 
node-amqp-21172-0.15091347694396973 false
updates <'rabbit at edfdr-qb-wb01'.3.16944.0> node-amqp-21172-0.618321357993409 
false
updates <'rabbit at edfdr-qb-wb01'.3.16948.0> 
node-amqp-21172-0.9028398699592799 false
updates <'rabbit at edfdr-qb-wb01'.3.16952.0> 
node-amqp-21172-0.17504629422910511 false
updates <'rabbit at edfdr-qb-wb01'.3.16956.0> 
node-amqp-21172-0.6401850257534534 false
updates <'rabbit at edfdr-qb-wb01'.3.16960.0> node-amqp-21172-0.697384244762361 
false
updates <'rabbit at edfdr-qb-wb01'.3.16964.0> 
node-amqp-21172-0.41653046221472323 false
updates <'rabbit at edfdr-qb-wb01'.3.16968.0> 
node-amqp-21172-0.23239665268920362 false
...
About 40

In theory I only have one producer (PHP process) and one consumer (NodeJS 
server)

Anyone have some idea of what's going on with that?

The beam.smp process would eventually hit more than 50% CPU and memory and 
would stop delivering messages.

Any help will be greatly appreciated.

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140110/ad297f20/attachment.html>

From jhzhang.email at gmail.com  Fri Jan 10 19:09:45 2014
From: jhzhang.email at gmail.com (Jianhui Zhang)
Date: Fri, 10 Jan 2014 11:09:45 -0800
Subject: [rabbitmq-discuss] extremely long and weird delivery tag in amqp.js
	consumer
Message-ID: <CAAAYafP8zYYc07TP4dqBapsdLXdnZXESFAcNNoyJ_zEtah5Haw@mail.gmail.com>

Hi,

We are using amqp.js library to consume messages from rabbitmq. But when we
log the delivery tag, we found them extremely long and weird (aren't they
supposed to be a long int?). For example:

"deliveryTag":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"length":8,"parent":{"0":60,"1":33,"2":68,"3":79,"4":67,"5":84,"6":89,"7":80,"8":69,"9":
>
> 32,"10":104,"11":116,"12":109,"13":108,"14":62,"15":10,"16":60,"17":33,"18":45,"19":45,"20":91,"21":105,"22":102,"23":32,"24":108,"25":116,"26":32,"27":73,"28":
>
> 69,"29":32,"30":55,"31":93,"32":62,"33":32,"34":32,"35":32,"36":32,"37":32,"38":32,"39":60,"40":104,"41":116,"42":109,"43":108,"44":32,"45":99,"46":108,"47":97,
>
> "48":115,"49":115,"50":61,"51":34,"52":110,"53":111,"54":45,"55":106,"56":115,"57":32,"58":108,"59":116,"60":45,"61":105,"62":101,"63":57,"64":32,"65":108,"66":
>
> 116,"67":45,"68":105,"69":101,"70":56,"71":32,"72":108,"73":116,"74":45,"75":105,"76":101,"77":55,"78":34,"79":62,"80":32,"81":60,"82":33,"83":91,"84":101,"85":
>
> 110,"86":100,"87":105,"88":102,"89":93,"90":45,"91":45,"92":62,"93":10,"94":60,"95":33,"96":45,"97":45,"98":91,"99":105,"100":102,"101":32,"102":73,"103":69,"10
>
> 4":32,"105":55,"106":93,"107":62,"108":32,"109":32,"110":32,"111":32,"112":32,"113":32,"114":32,"115":32,"116":32,"117":60,"118":104,"119":116,"120":109,"121":1
>
> 08,"122":32,"123":99,"124":108,"125":97,"126":115,"127":115,"128":61,"129":34,"130":110,"131":111,"132":45,"133":106,"134":115,"135":32,"136":108,"137":116,"138
>
> ":45,"139":105,"140":101,"141":57,"142":32,"143":108,"144":116,"145":45,"146":105,"147":101,"148":56,"149":34,"150":62,"151":32,"152":60,"153":33,"154":91,"155"
>
> :101,"156":110,"157":100,"158":105,"159":102,"160":93,"161":45,"162":45,"163":62,"164":10,"165":60,"166":33,"167":45,"168":45,"169":91,"170":105,"171":102,"172"
>
> :32,"173":73,"174":69,"175":32,"176":56,"177":93,"178":62,"179":32,"180":32,"181":32,"182":32,"183":32,"184":32,"185":32,"186":32,"187":32,"188":60,"189":104,"1
>
> 90":116,"191":109,"192":108,"193":32,"194":99,"195":108,"196":97,"197":115,"198":115,"199":61,"200":34,"201":110,"202":111,"203":45,"204":106,"205":115,"206":32
>
> ,"207":108,"208":116,"209":45,"210":105,"211":101,"212":57,"213":34,"214":62,"215":32,"216":60,"217":33,"218":91,"219":101,"220":110,"221":100,"222":105,"223":1
>
> 02,"224":93,"225":45,"226":45,"227":62,"228":10,"229":60,"230":33,"231":45,"232":45,"233":91,"234":105,"235":102,"236":32,"237":103,"238":116,"239":32,"240":73,
>
> "241":69,"242":32,"243":56,"244":93,"245":62,"246":60,"247":33,"248":45,"249":45,"250":62,"251":32,"252":60,"253":104,"254":116,"255":109,"256":108,"257":32,"25
>
> 8":99,"259":108,"260":97,"261":115,"262":115,"263":61,"264":34,"265":110,"266":111,"267":45,"268":106,"269":115,"270":34,"271":62,"272":32,"273":60,"274":33,"27
>
> 5":45,"276":45,"277":60,"278":33,"279":91,"280":101,"281":110,"282":100,"283":105,"284":102,"285":93,"286":45,"287":45,"288":62,"289":10,"290":9,"291":60,"292":
>
> 104,"293":101,"294":97,"295":100,"296":62,"297":10,"298":32,"299":32,"300":32,"301":32,"302":60,"303":109,"304":101,"305":116,"306":97,"307":32,"308":104,"309":
>
> 116,"310":116,"311":112,"312":45,"313":101,"314":113,"315":117,"316":105,"317":118,"318":61,"319":226,"320":128,"321":157,"322":67,"323":97,"324":99,"325":104,"
>
> 326":101,"327":45,"328":99,"329":111,"330":110,"331":116,"332":114,"333":111,"334":108,"335":226,"336":128,"337":157,"338":32,"339":99,"340":111,"341":110,"342"
>
> :116,"343":101,"344":110,"345":116,"346":61,"347":226,"348":128,"349":157,"350":109,"351":117,"352":115,"353":116,"354":45,"355":114,"356":101,"357":118,"358":9
>
> 7,"359":108,"360":105,"361":100,"362":97,"363":116,"364":101,"365":226,"366":128,"367":157,"368":62,"369":10,"370":9,"371":9,"372":60,"373":109,"374":101,"375":
>
> 116,"376":97,"377":32,"378":99,"379":104,"380":97,"381":114,"382":115,"383":101,"384":116,"385":61,"386":34,"387":117,"388":116,"389":102,"390":45,"391":56,"392
>
> ":34,"393":62,"394":10,"395":9,"396":60,"397":33,"398":45,"399":45,"400":10,"401":9,"402":9,"403":65,"404":108,"405":119,"406":97,"407":121,"408":115,"409":32,"
> 410":102,"411":111,"412":11 ?..
>

Has anybody seen this? And what's the cause for it?

Thank you very much in advance.
James
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140110/500cd826/attachment.html>

From mklishin at gopivotal.com  Sat Jan 11 09:38:09 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Sat, 11 Jan 2014 13:38:09 +0400
Subject: [rabbitmq-discuss] RabbitMQ filling up?
In-Reply-To: <566100c2-7ddf-47b3-993f-699e80bd480a@googlegroups.com>
References: <566100c2-7ddf-47b3-993f-699e80bd480a@googlegroups.com>
Message-ID: <83533FD5-4977-45F0-80D5-B5E195CA73A3@rabbitmq.com>

On 10 Jan 2014, at 22:01, Mart? Planellas Rosell <marti.planellas at acknowledgement.co.uk> wrote:

> Anyone have some idea of what's going on with that?

Some app constantly creates channels and does not close them. The same may be happening with consumers,
just much slower.

What client libraries do you use?

MK

Software Engineer, Pivotal/RabbitMQ



From mklishin at gopivotal.com  Sat Jan 11 09:39:12 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Sat, 11 Jan 2014 13:39:12 +0400
Subject: [rabbitmq-discuss] extremely long and weird delivery tag in
	amqp.js consumer
In-Reply-To: <CAAAYafP8zYYc07TP4dqBapsdLXdnZXESFAcNNoyJ_zEtah5Haw@mail.gmail.com>
References: <CAAAYafP8zYYc07TP4dqBapsdLXdnZXESFAcNNoyJ_zEtah5Haw@mail.gmail.com>
Message-ID: <19CB80C0-59B8-4C21-93EE-A090D53AD112@rabbitmq.com>


On 10 Jan 2014, at 23:09, Jianhui Zhang <jhzhang.email at gmail.com> wrote:

> We are using amqp.js library to consume messages from rabbitmq. But when we log the delivery tag, we found them extremely long and weird (aren't they supposed to be a long int?). For example:

This sounds like a deserialization bug in your library. I?m not aware of amqp.js, is it new? Can you link to the source?

I?d recommend amqp.node [1] for Node.js users.

1. https://github.com/squaremo/amqp.node/

MK

Software Engineer, Pivotal/RabbitMQ



From joshua__lim at hotmail.com  Sat Jan 11 10:21:16 2014
From: joshua__lim at hotmail.com (Joshua Lim)
Date: Sat, 11 Jan 2014 10:21:16 +0000
Subject: [rabbitmq-discuss] How to enable server side heartbeat for RabbitMQ?
Message-ID: <BLU176-W466DD1E9B083DC390B71E9ADB20@phx.gbl>

Hi, 
I'm using web-stomp plugin + SockJS/Stomp.js on PhoneGap and observed that under circumstances (probably related to 3G network instability), traffic can stop without triggering a connection error on the STOMP client.
To solve this problem, I thought that I may use heart beat so I added the following to the Javascript using stomp.js:
function Connect() {    console.log('Connecting...');    // Connect    var ws = new SockJS(mq_url);    client = Stomp.over(ws);    client.heartbeat.outgoing = 5000;   // if 5000 means client will send heart beat every 5000ms    client.heartbeat.incoming = 5000;   // if 0 means client does not want to receive heartbeats from server    client.debug = function (str) {        $("#debug").append(timeStamp() + str + "<br>");          varmessage = str;    };    client.connect(    mq_username, mq_password, on_connect, on_connect_error, mq_vhost);}
However, the following error is thrown by the STOMP JS client, which I assume is because the broker is not sending heart beat (which I assumed so as I don't know how to check).
-> PING-> PINGdid not receive server activity for the last 10017msWhoops!  Lost connection to undefined
I tried adding param to rabbitmq.config, but that didn't appear to work. The doc doesn't mention whether the heartbeat parameter is for client or server heartbeat.
[       {rabbit, [                {cluster_nodes, {['rabbit at server'], disc}},                 {cluster_partition_handling, autoheal},         {heartbeat, 1}        ]},

Rgds,Joshua 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140111/82f5a576/attachment.html>

From jon.forrest at xoom.com  Sat Jan 11 00:12:00 2014
From: jon.forrest at xoom.com (Jon Forrest)
Date: Fri, 10 Jan 2014 16:12:00 -0800
Subject: [rabbitmq-discuss] Minor Correction to AMQP 0.9.1 Model Explained
	Diagram
Message-ID: <52D08C50.2050901@xoom.com>

I'm just starting to learn about RabbitMQ so I was readying the
AMQP 0.9.1 Model Explained Diagram document. It starts off by saying
that

        "messages are published by producers to exchanges"

but then in the "Hello, world" example routing diagram that follows,
the left most box is labeled "Publisher". Shouldn't it be labeled
"Producer"? This change makes the diagram correspond to the text.

Also, it would be slightly clearer if the white box were labeled
"broker".

Jon Forrest
The information transmitted in this email is intended only for the person or entity to which it is addressed, and may contain material confidential to Xoom Corporation, and/or its subsidiary, buyindiaonline.com Inc. Any review, retransmission, dissemination or other use of, or taking of any action in reliance upon, this information by persons or entities other than the intended recipient(s) is prohibited. If you received this email in error, please contact the sender and delete the material from your files.

From unixipc at gmail.com  Sat Jan 11 06:54:07 2014
From: unixipc at gmail.com (Si-li Liu)
Date: Sat, 11 Jan 2014 14:54:07 +0800
Subject: [rabbitmq-discuss] A rabbitmq error in my cluster
Message-ID: <CAD1b-RiRC9V11EW2WQ3LnJj70QP8BxQyYHmEw9WO07rQOgbGug@mail.gmail.com>

I found my rabbitmq node is down in the cluster.

Here is the log

=ERROR REPORT==== 9-Jan-2014::03:17:27 ===
** Generic server rabbit_disk_monitor terminating
** Last message in was update
** When Server state == {state,"/var/lib/rabbitmq/mnesia/rabbitmq at localhost
",
                               1000000000,6201094144,10000,
                               {interval,#Ref<0.0.0.977>},
                               false}
** Reason for termination ==
** {badarg,[{erlang,list_to_integer,["systems"],[]},
            {rabbit_disk_monitor,parse_free_unix,1,[]},
            {rabbit_disk_monitor,internal_update,1,[]},
            {rabbit_disk_monitor,handle_info,2,[]},
            {gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,607}]},

{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,239}]}]}

=INFO REPORT==== 9-Jan-2014::03:17:27 ===
Disabling disk free space monitoring on unsupported platform: {{'EXIT',
                                                                {badarg,
                                                                 [{erlang,

 list_to_integer,

 ["systems"],
                                                                   []},

{rabbit_disk_monitor,

 parse_free_unix,
                                                                   1,[]},

{rabbit_disk_monitor,

 init,1,[]},

{gen_server,

 init_it,6,
                                                                   [{file,

 "gen_server.erl"},
                                                                    {line,
                                                                     304}]},
                                                                  {proc_lib,

 init_p_do_apply,
                                                                   3,
                                                                   [{file,

 "proc_lib.erl"},
                                                                    {line,

 239}]}]}},
                                                               16723951616}

After a while, the log reports

=ERROR REPORT==== 9-Jan-2014::03:20:15 ===
Mnesia(rabbitmq at localhost): ** ERROR ** (core dumped to file:
"/var/lib/rabbitmq/MnesiaCore.rabbitmq at localhost_1389_237615_166554")
 ** FATAL ** {error,{"Cannot rename disk_log file",latest_log,
                     "/var/lib/rabbitmq/mnesia/rabbitmq at localhost
/PREVIOUS.LOG",
                     {log_header,trans_log,"4.3","4.8",rabbitmq at localhost,
                                 {1389,237615,128040}},

 {file_error,"/var/lib/rabbitmq/mnesia/rabbitmq at localhost/PREVIOUS.LOG",
                                 enoent}}}

=ERROR REPORT==== 9-Jan-2014::03:20:25 ===
Mnesia(rabbitmq at localhost): ** ERROR ** mnesia_event got unexpected event:
{'EXIT',

<0.111.0>,

killed}

I found the dump file is actually in my disk, but how to open this dump
file? /var/lib/rabbitmq/MnesiaCore.rabbitmq at localhost_1389_237615_166554

Also rabbitmqctl status command says its status is correct, but rabbitmqctl
list_users, list_exchanges or other commands just print an error message.

Anyone can help with this issue? It can not be reproduced, but happens
sometimes.
-- 
Best regards

Sili Liu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140111/7daa61c5/attachment.html>

From mklishin at gopivotal.com  Sat Jan 11 13:46:39 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Sat, 11 Jan 2014 17:46:39 +0400
Subject: [rabbitmq-discuss] Minor Correction to AMQP 0.9.1 Model
	Explained Diagram
In-Reply-To: <52D08C50.2050901@xoom.com>
References: <52D08C50.2050901@xoom.com>
Message-ID: <B9C72DF0-AE20-4AFE-A625-CDE894F475A2@rabbitmq.com>

On 11 Jan 2014, at 04:12, Jon Forrest <jon.forrest at xoom.com> wrote:

> but then in the "Hello, world" example routing diagram that follows,
> the left most box is labeled "Publisher". Shouldn't it be labeled
> "Producer"? This change makes the diagram correspond to the text.

Both terms are used widely (and interchangeably).

MK

Software Engineer, Pivotal/RabbitMQ



From mark at wolfe.id.au  Sun Jan 12 00:04:01 2014
From: mark at wolfe.id.au (Mark Wolfe)
Date: Sun, 12 Jan 2014 08:04:01 +0800
Subject: [rabbitmq-discuss] MQTT topic ACLs Query
In-Reply-To: <52CFDA37.4080102@rabbitmq.com>
References: <CAPwMmOBHjR7Gf3jTgwQTO8CEMKcavbDjY38Yczb8wYG2H8ABYQ@mail.gmail.com>
 <52CBE501.8020003@rabbitmq.com>
 <CAPwMmOAsdtVeU=7s2UKPWizc1J6hUnce1CG6CTy=5GJwtr+dWg@mail.gmail.com>
 <52CFDA37.4080102@rabbitmq.com>
Message-ID: <CAPwMmOBoUH_SrRdTa2xJU6qDm2xRQf59kaPbfGADBwcn-VM9Fw@mail.gmail.com>

Cheers for the update, I look forward to hearing what ideas come out of it.

In the short term it looks like I am going to have to build an adapter to
solve the problem I currently have, probably in a similar vein to the
current MQTT plugin.

As my requirements are very simple I will probably just partition the
topics for each gateway device.

The basic ideas is to authenticate each gateway device using a
username/pass and once connected add a configurable prefix to the routing
keys using the same pattern as is currently used. this will effectively
partition the topic tree for each gateway. Note the value of the prefix
attribute will be loaded from LDAP and will not be exposed to the gateway.

Just to complete the picture I have a router of sorts on AMQP side which
dispatches these messages to existing application code which interacts
either with the database or forwards it onto some other AMQP driven
services which interface with third parties via REST.

This won't affect MQTT but will influence how the data is bridged into
AMQP, giving me what i am after which is a level of isolation for outside
gateway devices, while retaining the simple internal structure you have now.

If anyone has any other suggestions or questions I am all ears.



On Fri, Jan 10, 2014 at 7:32 PM, Emile Joubert <emile at rabbitmq.com> wrote:

>
> Hi Mark,
>
> On 07/01/14 12:10, Mark Wolfe wrote:
>
> > Hopefully that gives you some insight into what I am hoping to achieve.
>
> It does, thanks for the detail. I have filed a ticket to assess the
> feasibility of implementing this feature, preferably in a way that is
> compatible with the other protocols implemented by RabbitMQ.
>
>
>
> -Emile
>



-- 
Regards,

Mark Wolfe

--
I am not young enough to know everything.
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140112/0f7cdb8a/attachment.html>

From alan.antonuk at gmail.com  Sun Jan 12 00:53:18 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Sat, 11 Jan 2014 16:53:18 -0800
Subject: [rabbitmq-discuss] rabbitmq-c Memory-Based Flow Control API.
In-Reply-To: <27E054594442884E9A46DBCF9AE7408162BA26@BSDMSATMBX001.mahindrasatyam.ad>
References: <27E054594442884E9A46DBCF9AE7408162BA26@BSDMSATMBX001.mahindrasatyam.ad>
Message-ID: <CAAt2poKJPus2UV1Z2A8x3RNMYR1gp1rFNi7df2ULAzyN=C4WSA@mail.gmail.com>

Rohit;

On Thu, Jan 9, 2014 at 2:25 AM, Rohit Patle
<Rohit.Patel2 at techmahindra.com>wrote:

>  Hi Alan,
>
> Thanks you for your advise. But I am facing following issues with your
> suggestions as:
>
> 1. After doing #rabbitmqctl list_channels client_flow_blocked, I could see
> the "false" value is default set there. While using amqp_login(), I am
> unable to find  the "capabilities table" to set 'connection.blocked'=true
> as mentioned. Please let me know how to do it.
>

You pass in an amqp_table_t with an entry with the key 'capabilites' and
type table, that table should contain an entry with a key name
'connection.blocked', type boolean, and value of 1.  SimpleAmqpClient has
some code that does something similar with consumer notifications:
https://github.com/alanxz/SimpleAmqpClient/blob/2847a8cacd6499c9973b99e0b7b3694c36e90f79/src/ChannelImpl.cpp#L71


> 2.  While using amqp_simple_wait_frame_noblock() I am unable to find the
> enum values you mentioned(AMQP_CONNECTION_BLOCKED_METHOD and
> AMQP_CONNECTION_UNBLOCKED_METHOD) which I supposed to get as result of amqp_simple_wait_frame_noblock()
> in amqp.h or amqp_framing.h. Please suggest.
>

The connection.blocked method is fairly new and has only just recently
added to the master branch (there are no tagged releases with
connection.blocked support in it yet). The documentation you're looking has
not caught up. Those values will be in amqp_framing.h (see:
https://github.com/alanxz/rabbitmq-c/blob/master/librabbitmq/amqp_framing.h#L186)

-Alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140111/a79687f2/attachment.html>

From alan.antonuk at gmail.com  Sun Jan 12 01:17:31 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Sat, 11 Jan 2014 17:17:31 -0800
Subject: [rabbitmq-discuss] Change in semantics of {exchange, queue}.{unbind,
	delete}
Message-ID: <CAAt2poLMrEcGyvozUYJy46JXrLxfkiG7W+HddiBfhi133NUNjw@mail.gmail.com>

It appears that the semantics of exchange.delete, exchange.unbind,
queue.delete, and queue.unbind when the entity doesn't exist have changed:
they used to throw a channel exception, now they do not.

It appears like this is intensional:
http://www.rabbitmq.com/specification.html

I cannot seem to find at which version this change was made (it must've
been recently as there was discussion in late september about the older
behavior).

Could someone point me at the release in which this change was made? I'm
also kind of curious as to why this behavior was changed (which I would
assume was for perf reasons).

-Alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140111/7edd854f/attachment.html>

From videlalvaro at gmail.com  Sun Jan 12 02:52:02 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Sun, 12 Jan 2014 03:52:02 +0100
Subject: [rabbitmq-discuss] Change in semantics of {exchange,
 queue}.{unbind, delete}
In-Reply-To: <CAAt2poLMrEcGyvozUYJy46JXrLxfkiG7W+HddiBfhi133NUNjw@mail.gmail.com>
References: <CAAt2poLMrEcGyvozUYJy46JXrLxfkiG7W+HddiBfhi133NUNjw@mail.gmail.com>
Message-ID: <CAMcAHLXU5drrCFf-GFeChedC3MB=EFxNAq_3Cv2GWk4kvqbbWg@mail.gmail.com>

Are you building against the latest default branch?

Is it related to this? http://hg.rabbitmq.com/rabbitmq-server/rev/f4474c43917f

On Sun, Jan 12, 2014 at 2:17 AM, Alan Antonuk <alan.antonuk at gmail.com> wrote:
> It appears that the semantics of exchange.delete, exchange.unbind,
> queue.delete, and queue.unbind when the entity doesn't exist have changed:
> they used to throw a channel exception, now they do not.
>
> It appears like this is intensional:
> http://www.rabbitmq.com/specification.html
>
> I cannot seem to find at which version this change was made (it must've been
> recently as there was discussion in late september about the older
> behavior).
>
> Could someone point me at the release in which this change was made? I'm
> also kind of curious as to why this behavior was changed (which I would
> assume was for perf reasons).
>
> -Alan
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From alan.antonuk at gmail.com  Sun Jan 12 03:46:03 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Sat, 11 Jan 2014 19:46:03 -0800
Subject: [rabbitmq-discuss] Change in semantics of {exchange,
 queue}.{unbind, delete}
In-Reply-To: <CAMcAHLXU5drrCFf-GFeChedC3MB=EFxNAq_3Cv2GWk4kvqbbWg@mail.gmail.com>
References: <CAAt2poLMrEcGyvozUYJy46JXrLxfkiG7W+HddiBfhi133NUNjw@mail.gmail.com>
 <CAMcAHLXU5drrCFf-GFeChedC3MB=EFxNAq_3Cv2GWk4kvqbbWg@mail.gmail.com>
Message-ID: <CAAt2po+xTsB7B+5C_fo2088__HDSHJ3x9SVOEiBmRVDkxsCsgA@mail.gmail.com>

I've observed it in v3.2.2 of the broker thats installed with homebrew on a
mac. I'm also observing it on travis-ci, though I'm not sure which version
is running there.

So I think the change was made before the change you're citing.

-Alan


On Sat, Jan 11, 2014 at 6:52 PM, Alvaro Videla <videlalvaro at gmail.com>wrote:

> Are you building against the latest default branch?
>
> Is it related to this?
> http://hg.rabbitmq.com/rabbitmq-server/rev/f4474c43917f
>
> On Sun, Jan 12, 2014 at 2:17 AM, Alan Antonuk <alan.antonuk at gmail.com>
> wrote:
> > It appears that the semantics of exchange.delete, exchange.unbind,
> > queue.delete, and queue.unbind when the entity doesn't exist have
> changed:
> > they used to throw a channel exception, now they do not.
> >
> > It appears like this is intensional:
> > http://www.rabbitmq.com/specification.html
> >
> > I cannot seem to find at which version this change was made (it must've
> been
> > recently as there was discussion in late september about the older
> > behavior).
> >
> > Could someone point me at the release in which this change was made? I'm
> > also kind of curious as to why this behavior was changed (which I would
> > assume was for perf reasons).
> >
> > -Alan
> >
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-discuss at lists.rabbitmq.com
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> >
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140111/76b2cc97/attachment.html>

From mikeb at squaremobius.net  Sun Jan 12 06:21:31 2014
From: mikeb at squaremobius.net (Michael Bridgen)
Date: Sun, 12 Jan 2014 19:21:31 +1300
Subject: [rabbitmq-discuss] Change in semantics of {exchange,
 queue}.{unbind, delete}
In-Reply-To: <CAAt2poLMrEcGyvozUYJy46JXrLxfkiG7W+HddiBfhi133NUNjw@mail.gmail.com>
References: <CAAt2poLMrEcGyvozUYJy46JXrLxfkiG7W+HddiBfhi133NUNjw@mail.gmail.com>
Message-ID: <CAMZ8XCiKJRqvRTQ4ADV9JvtURcbKDmOnM0SeD-cT2+6=zJzJHA@mail.gmail.com>

On 12 January 2014 14:17, Alan Antonuk <alan.antonuk at gmail.com> wrote:
> It appears that the semantics of exchange.delete, exchange.unbind,
> queue.delete, and queue.unbind when the entity doesn't exist have changed:
> they used to throw a channel exception, now they do not.
>
> It appears like this is intensional:
> http://www.rabbitmq.com/specification.html
>
> I cannot seem to find at which version this change was made (it must've been
> recently as there was discussion in late september about the older
> behavior).

The change was included in RabbitMQ 3.2.0:
http://www.rabbitmq.com/release-notes/README-3.2.0.txt, bug 25716.
At some point RabbitMQ ought to properly fork AMQP.

-Michael

From Rohit.Patel2 at techmahindra.com  Sun Jan 12 07:29:21 2014
From: Rohit.Patel2 at techmahindra.com (Rohit Patle)
Date: Sun, 12 Jan 2014 07:29:21 +0000
Subject: [rabbitmq-discuss] rabbitmq-c Memory-Based Flow Control API.
Message-ID: <27E054594442884E9A46DBCF9AE7408162BAED@BSDMSATMBX001.mahindrasatyam.ad>

Hi Alan,

Thanks you for your advise. But I am facing following issues with your suggestions as:

1. After doing #rabbitmqctl list_channels client_flow_blocked, I could see the "false" value is default set there. While using amqp_login(), I am unable to find  the "capabilities table" to set 'connection.blocked'=true as mentioned. Please let me know how to do it.

2.  While using amqp_simple_wait_frame_noblock() I am unable to find the enum values you mentioned(AMQP_CONNECTION_BLOCKED_METHOD and AMQP_CONNECTION_UNBLOCKED_METHOD) which I supposed to get as result of amqp_simple_wait_frame_noblock() in amqp.h or amqp_framing.h. Please suggest.

FYI I am using link : http://alanxz.github.io/rabbitmq-c/docs/0.4.0/amqp_8h.html#a9cada07768aa46297acdd701f96d0d7f as documentation guide.

Thanks & Regards,
ROhit

________________________________

DISCLAIMER:
This email (including any attachments) is intended for the sole use of the intended recipient/s and may contain material that is CONFIDENTIAL AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or distribution or forwarding of any or all of the contents in this message is STRICTLY PROHIBITED. If you are not the intended recipient, please contact the sender by email and delete all copies; your cooperation in this regard is appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140112/7cb6d62f/attachment.html>

From matthias at rabbitmq.com  Sun Jan 12 09:56:25 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 12 Jan 2014 09:56:25 +0000
Subject: [rabbitmq-discuss] Change in semantics of {exchange,
 queue}.{unbind, delete}
In-Reply-To: <CAAt2poLMrEcGyvozUYJy46JXrLxfkiG7W+HddiBfhi133NUNjw@mail.gmail.com>
References: <CAAt2poLMrEcGyvozUYJy46JXrLxfkiG7W+HddiBfhi133NUNjw@mail.gmail.com>
Message-ID: <52D266C9.5060802@rabbitmq.com>

Alan,

On 12/01/14 01:17, Alan Antonuk wrote:
> It appears that the semantics of exchange.delete, exchange.unbind,
> queue.delete, and queue.unbind when the entity doesn't exist have
> changed: they used to throw a channel exception, now they do not.
> [...]
> I'm also kind of curious as to why this behavior was changed (which I
> would assume was for perf reasons).

The new behaviour is more useful and semantically consistent. AMQP 
generally has an idempotent assertion semantics, i.e. commands indicate 
what should be rather than what should happen. This is so that clients 
can operate independently on the shared space of resources, with each 
client simply asserting what it requires.

So declaring an exchange/queue/binding which already exists is perfectly 
fine. And deleting an exchange/queue/binding which doesn't exist should 
therefore be fine too.

You can get the old behaviour by prefixing the delete with a passive 
declare.

Regards,

Matthias.

From nikita.arykov at gmail.com  Sun Jan 12 12:28:52 2014
From: nikita.arykov at gmail.com (Nikita Arykov)
Date: Sun, 12 Jan 2014 04:28:52 -0800 (PST)
Subject: [rabbitmq-discuss] Tutorial 2 php missprint
Message-ID: <de04d975-c787-4b98-80b2-609c937538d4@googlegroups.com>

Hello,

http://www.rabbitmq.com/tutorials/tutorial-two-php.html

Actual: missprint in You need three consoles open. Two will run the 
*worker.rb* script. These consoles will be our two consumers - C1 and C2.
Expected: You need three consoles open. Two will run the *worker.php* script. 
These consoles will be our two consumers - C1 and C2.

Tnx!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140112/2e19000f/attachment.html>

From joshua__lim at hotmail.com  Sun Jan 12 15:04:27 2014
From: joshua__lim at hotmail.com (Joshua Lim)
Date: Sun, 12 Jan 2014 15:04:27 +0000
Subject: [rabbitmq-discuss] How to use Presence Exchange Plugin using STOMP
 and RabbitMQ Server v3.2.1?
Message-ID: <BLU176-W293642F4DDDF8403CEBE03ADBD0@phx.gbl>

Hi,
I'm currently using RabbitMQ Server 3.2.1 and installed the latest Presence Exchange Plugin for v3.1.3 downloaded from this link - http://eighty-twenty.org/tech/rabbitmq/binary-plugins.html
What I did:
1. I created a new exchange "presence" of the type "x-presence" using http://localhost:15672/#/exchanges
2. Created a STOMP connection using user name: guest and subscribed to destination:/exchange/presence.   ------------------------------------------D:\RabbitMQ\ncat-portable-5.59BETA1>ncat localhost 61613CONNECTpasscode:guestlogin:guest
^@CONNECTEDsession:session-NDd780bT5IJvckp7rDN6bgheart-beat:0,0server:RabbitMQ/3.2.1version:1.0
 SUBSCRIBEdestination:/exchange/presencepersistent:trueid:testreceipt:001
^@RECEIPTreceipt-id:001  ---------------------------------------------
3. Created another STOMP connection using the user name: joshua and subscribed to destination:/exchange/presence/joshua
Immediately after that, the guest STOMP connection crashed when I had expect it to receive messages after user joshua has subscribed to "presence" exchange.  
What have I done wrongly?

D:\Data\ClickAndDeploy\AlertingApp\RabbitMQ\ncat-portable-5.59BETA1>ncat localhost 61613CONNECTlogin:joshuapasscode:joshua
^@CONNECTEDsession:session-Zcca9njV-DNO3mYsQ05d3gheart-beat:0,0server:RabbitMQ/3.2.1version:1.0
 SUBSCRIBEdestination:/exchange/presence/joshuareceipt:002
^@RECEIPTreceipt-id:002

4. Meanwhile, here's the copy and paste of the presence exchange screen on the management console.----------------------------------------------------
Exchange: presence
OverviewMessage rates (chart: last minute) (?)
Currently idle
Details
Type	x-presenceParameters	durable:	truePolicy	Message rates breakdownBindingsThis exchange
?To	Routing key	Arguments	amq.gen-4XGYzwGBOoMmRDbXC9izQQ
amq.gen-aBOn5nOt8vZZrOT69jqfJwjoshua	------------------------------------------------------
Rgds,Joshua
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140112/dfa00e8b/attachment.html>

From mklishin at gopivotal.com  Sun Jan 12 15:07:00 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Sun, 12 Jan 2014 19:07:00 +0400
Subject: [rabbitmq-discuss] Rabbit MQ usage
In-Reply-To: <CAPK6Oeu28rzSSrgYjJFopTLwpftO9WSpqsNZWU_oAAx6pL1SqQ@mail.gmail.com>
References: <CAPK6Oeu28rzSSrgYjJFopTLwpftO9WSpqsNZWU_oAAx6pL1SqQ@mail.gmail.com>
Message-ID: <BEEA565A-6A3A-40E9-B081-DFD1E133A68B@rabbitmq.com>

On 10 Jan 2014, at 21:54, shridharan muthu <shridharan.m at gmail.com> wrote:

>    What bothers me most about this situation is the total number of connections. Total messages seem to be non significant compared to what Rabbit cluster can handle. I would like to improve this situation by creating a service layer on top of RabbitMQ cluster with long lived connections (probably a java service) to avoid creating a connection on the fly and tearing it down. I am willing to take the performance hit on each requests for . Does this sound reasonable? Is there a best practice for a situation like this?

This is a fairly common issue with PHP and the solution you have in mind sounds reasonable.

MK

Software Engineer, Pivotal/RabbitMQ



From michael.s.klishin at gmail.com  Sun Jan 12 15:15:44 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Sun, 12 Jan 2014 19:15:44 +0400
Subject: [rabbitmq-discuss] ANN Langohr 2.2.0 is released
Message-ID: <CAE3HoVQRACfLmCJbnhaiTc09pL4DQjvRVb8ECTNv7d9vnSEqZg@mail.gmail.com>

Langohr [1] is a small, feature complete Clojure client for RabbitMQ.

Release notes:
http://blog.clojurewerkz.org/blog/2014/01/10/langohr-2-dot-2-0-is-released/

1. http://clojurerabbitmq.info
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140112/45737a7e/attachment.html>

From mklishin at gopivotal.com  Sun Jan 12 22:08:43 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 13 Jan 2014 02:08:43 +0400
Subject: [rabbitmq-discuss] RabbitMQ filling up?
In-Reply-To: <CAJZU30wZ1s8=519DNBVtLGEpYXf5zbfBzchiidhXxobeRYVseQ@mail.gmail.com>
References: <566100c2-7ddf-47b3-993f-699e80bd480a@googlegroups.com>
 <83533FD5-4977-45F0-80D5-B5E195CA73A3@rabbitmq.com>
 <CAJZU30wZ1s8=519DNBVtLGEpYXf5zbfBzchiidhXxobeRYVseQ@mail.gmail.com>
Message-ID: <4D8F3647-BFB4-4524-AAD3-22B36FD15306@gopivotal.com>


On 13 Jan 2014, at 01:48, Mart? Planellas Rosell <marti.planellas at acknowledgement.co.uk> wrote:

> And https://github.com/postwait/node-amqp for consuming in NodeJS

This client is known to (try to) be smart and hide channels from developers in the API.
Make sure channels that are no longer needed are closed (or a fixed number of long lived
channels is used).

Lots of consumers named

node-amqp-*

suggest node-amqp also leaves extra consumers behind. I highly recommend giving amqp.node [1]
a try.

> I think it all started when I restarted the server, with service rabbitmq-server restart, it  worked perfectly before...

The restart is unlikely to be the cause here.

1. https://github.com/squaremo/amqp.node/
--
MK

Software Engineer, Pivotal/RabbitMQ


From marti.planellas at acknowledgement.co.uk  Sun Jan 12 21:48:30 2014
From: marti.planellas at acknowledgement.co.uk (=?ISO-8859-1?Q?Mart=ED_Planellas_Rosell?=)
Date: Sun, 12 Jan 2014 21:48:30 +0000
Subject: [rabbitmq-discuss] RabbitMQ filling up?
In-Reply-To: <83533FD5-4977-45F0-80D5-B5E195CA73A3@rabbitmq.com>
References: <566100c2-7ddf-47b3-993f-699e80bd480a@googlegroups.com>
 <83533FD5-4977-45F0-80D5-B5E195CA73A3@rabbitmq.com>
Message-ID: <CAJZU30wZ1s8=519DNBVtLGEpYXf5zbfBzchiidhXxobeRYVseQ@mail.gmail.com>

I'm using https://github.com/videlalvaro/php-amqplib for producing in PHP

And https://github.com/postwait/node-amqp for consuming in NodeJS

I think it all started when I restarted the server, with service
rabbitmq-server restart, it  worked perfectly before...


On 11 January 2014 09:38, Michael Klishin <mklishin at gopivotal.com> wrote:

> On 10 Jan 2014, at 22:01, Mart? Planellas Rosell <
> marti.planellas at acknowledgement.co.uk> wrote:
>
> > Anyone have some idea of what's going on with that?
>
> Some app constantly creates channels and does not close them. The same may
> be happening with consumers,
> just much slower.
>
> What client libraries do you use?
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
>


-- 
Marti Planellas
Senior Front-End Developer

0207 655 6548
marti.planellas at acknowledgement.co.uk
http://www.acknowledgement.co.uk

Acknowledgement Ltd, 11-29 Fashion Street, London, E1 6PX

Switchboard: 020 7655 6555
Fax: 020 7655 6569

This message is private and confidential. If you have received this message
in error, please notify us and remove it from your system.
Acknowledgement Ltd is registered in England and Wales. Company Number
04675294. Registered office as above.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140112/69c1c148/attachment.html>

From videlalvaro at gmail.com  Mon Jan 13 01:12:08 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Mon, 13 Jan 2014 02:12:08 +0100
Subject: [rabbitmq-discuss] RabbitMQ filling up?
In-Reply-To: <4D8F3647-BFB4-4524-AAD3-22B36FD15306@gopivotal.com>
References: <566100c2-7ddf-47b3-993f-699e80bd480a@googlegroups.com>
 <83533FD5-4977-45F0-80D5-B5E195CA73A3@rabbitmq.com>
 <CAJZU30wZ1s8=519DNBVtLGEpYXf5zbfBzchiidhXxobeRYVseQ@mail.gmail.com>
 <4D8F3647-BFB4-4524-AAD3-22B36FD15306@gopivotal.com>
Message-ID: <CAMcAHLXsb8VO_oTmQ1KCAPNUHpj0tg-ac6FPUYrnnhm88mWECg@mail.gmail.com>

Hi,

If you think one app is creating too many channels, then from the
management API you can see to which connection those channels belong.
>From there identify the remote IP (or even the client properties for
the connection) and you could tell if the problem is from PHP or from
node.js

Regards,

Alvaro

On Sun, Jan 12, 2014 at 11:08 PM, Michael Klishin
<mklishin at gopivotal.com> wrote:
>
> On 13 Jan 2014, at 01:48, Mart? Planellas Rosell <marti.planellas at acknowledgement.co.uk> wrote:
>
>> And https://github.com/postwait/node-amqp for consuming in NodeJS
>
> This client is known to (try to) be smart and hide channels from developers in the API.
> Make sure channels that are no longer needed are closed (or a fixed number of long lived
> channels is used).
>
> Lots of consumers named
>
> node-amqp-*
>
> suggest node-amqp also leaves extra consumers behind. I highly recommend giving amqp.node [1]
> a try.
>
>> I think it all started when I restarted the server, with service rabbitmq-server restart, it  worked perfectly before...
>
> The restart is unlikely to be the cause here.
>
> 1. https://github.com/squaremo/amqp.node/
> --
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From lijo at citrusinformatics.com  Mon Jan 13 08:28:11 2014
From: lijo at citrusinformatics.com (Lijo Sebastian)
Date: Mon, 13 Jan 2014 13:58:11 +0530
Subject: [rabbitmq-discuss] Having a PubSub example of RabbitMQ with Mono in
	Linux environment
Message-ID: <52B088CCA91242E4BF2353473C0DBA6F@Lijo>

Hi, 
        Has anyone working with Linux environment here using RabbitMQ client for messaging?

I could not use the same .Net client library in Mono develop.

Is there any compatible library of amqp for both .Net/Mono  platforms?

>From where should i begin? Please guide me through!


Regards, 
Lijo Sebastian
Citrus Informatics (India) Pvt Ltd.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140113/ed45bda6/attachment.html>

From mklishin at gopivotal.com  Mon Jan 13 08:41:54 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 13 Jan 2014 12:41:54 +0400
Subject: [rabbitmq-discuss] Having a PubSub example of RabbitMQ with
	Mono in Linux environment
In-Reply-To: <52B088CCA91242E4BF2353473C0DBA6F@Lijo>
References: <52B088CCA91242E4BF2353473C0DBA6F@Lijo>
Message-ID: <93C07969-F322-434F-B4D9-728A7740E622@rabbitmq.com>

On 13 Jan 2014, at 12:28, Lijo Sebastian <lijo at citrusinformatics.com> wrote:

> Is there any compatible library of amqp for both .Net/Mono  platforms?

The official .NET client is compatible with Mono. The client requires .NET 3.0+,
see http://www.mono-project.com/Compatibility.

Some Mono-specific bits can be found in

http://www.rabbitmq.com/build-dotnet-client.html
http://www.rabbitmq.com/ssl.html

but your issue is likely with one of the solution files, which I think
Xamarin and Mono Develop cannot handle, or WCF bindings
(deprecated) not being supported by Mono.

MK

Software Engineer, Pivotal/RabbitMQ



From mklishin at gopivotal.com  Mon Jan 13 10:31:41 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 13 Jan 2014 14:31:41 +0400
Subject: [rabbitmq-discuss] ANN Bunny 1.1.0 is released
Message-ID: <C2680B70-BAD2-4BF6-971C-5AC81845625F@gopivotal.com>

Bunny [1] is a Ruby RabbitMQ client that focuses on ease of use.

Release notes:
http://blog.rubyrabbitmq.info/blog/2014/01/13/bunny-1-dot-1-0-is-released/

1. http://rubybunny.info
--
MK

Software Engineer, Pivotal/RabbitMQ


From mklishin at gopivotal.com  Mon Jan 13 11:51:06 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 13 Jan 2014 15:51:06 +0400
Subject: [rabbitmq-discuss] Tutorial 2 php missprint
In-Reply-To: <de04d975-c787-4b98-80b2-609c937538d4@googlegroups.com>
References: <de04d975-c787-4b98-80b2-609c937538d4@googlegroups.com>
Message-ID: <843AD0D0-7B4D-45C9-B550-BFEF0CD452DF@rabbitmq.com>

On 12 Jan 2014, at 16:28, Nikita Arykov <nikita.arykov at gmail.com> wrote:

> Actual: missprint in You need three consoles open. Two will run the worker.rb script. These consoles will be our two consumers - C1 and C2.
> Expected: You need three consoles open. Two will run the worker.php script. These consoles will be our two consumers - C1 and C2.

Thanks for reporting. The typo has been corrected, the update will be live soon.

MK

Software Engineer, Pivotal/RabbitMQ



From simon at rabbitmq.com  Mon Jan 13 12:01:56 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 13 Jan 2014 12:01:56 +0000
Subject: [rabbitmq-discuss] A rabbitmq error in my cluster
In-Reply-To: <CAD1b-RiRC9V11EW2WQ3LnJj70QP8BxQyYHmEw9WO07rQOgbGug@mail.gmail.com>
References: <CAD1b-RiRC9V11EW2WQ3LnJj70QP8BxQyYHmEw9WO07rQOgbGug@mail.gmail.com>
Message-ID: <52D3D5B4.8000702@rabbitmq.com>

On 11/01/2014 06:54, Si-li Liu wrote:
> I found my rabbitmq node is down in the cluster.

There are two different issues here.

> =ERROR REPORT==== 9-Jan-2014::03:17:27 ===
> ** Generic server rabbit_disk_monitor terminating
> ** Last message in was update

The problem here is that the disk space monitor can't parse the output 
of "/bin/df -kP /var/lib/rabbitmq/mnesia/". What does that command 
produce on your machine? What OS are you running?

> After a while, the log reports
>
> =ERROR REPORT==== 9-Jan-2014::03:20:15 ===
> Mnesia(rabbitmq at localhost): ** ERROR ** (core dumped to file:
> "/var/lib/rabbitmq/MnesiaCore.rabbitmq at localhost_1389_237615_166554")
>   ** FATAL ** {error,{"Cannot rename disk_log file",latest_log,
>
>   "/var/lib/rabbitmq/mnesia/rabbitmq at localhost/PREVIOUS.LOG",
>                       {log_header,trans_log,"4.3","4.8",rabbitmq at localhost,
>                                   {1389,237615,128040}},

This is more serious - the "Cannot rename disk_log file" is causing real 
problems. Could something be deleting or moving files in 
/var/lib/rabbitmq/? Or changign their permissions?

Cheers, Simon

From simon at rabbitmq.com  Mon Jan 13 12:17:43 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 13 Jan 2014 12:17:43 +0000
Subject: [rabbitmq-discuss] Configure RabbitMQ 3.2.2. with SSL on
	windows7
In-Reply-To: <CAB05aS-=gtxAt-hN3-x-0+8aNfLjPQOfyiK6s4MZDw-Pn2q3vw@mail.gmail.com>
References: <CAB05aS80MDiiAN36UCOMhH=BhgXWyYuBn7_NBfZ9KsUO_U7hsg@mail.gmail.com>
 <52D02A07.7000803@rabbitmq.com>
 <CAB05aS-=gtxAt-hN3-x-0+8aNfLjPQOfyiK6s4MZDw-Pn2q3vw@mail.gmail.com>
Message-ID: <52D3D967.10906@rabbitmq.com>

Please keep rabbitmq-discuss on CC, that way other people can benefit 
from the answer to your question.

As I said, you don't need to install OpenSSL to make it available to Erlang.

It appears that your problem is really in generating certificates. Note 
that you don't have to generate certificates using OpenSSL if you find 
it hard to use, the examples given at http://www.rabbitmq.com/ssl.html 
are... examples.

It looks like you have a problem with your PATH - you will need to 
update it to include the directory containing the openssl binaries.

Cheers, Simon

On 10/01/2014 19:08, EAI Inegration wrote:
> Thank Simon for your reply
> Yes ,I am using standard edition of Erlang.
> I see ssl folder under erlnag folder as well.
> I am following steps from RabbitMQ documentation
> (http://www.rabbitmq.com/ssl.html)
> The documet says crypto and openSSL should be installed.
> In latest version of Erlang ,i.e. 16b03, I see crypto folder under
> erlang installation folder which made me believe that crypto comes by
> default with latest version of Erlang.
> So I opened Erlang command shell and typed Crypto.Start() and got
> response Ok.So I assume that Crypto part is taken care of .
> Then I installed cygWin along with MinGW's 64bit GCC as I am using 64bit
> windows
> Opened bash shell for cygwin
> and entered following commands and created .cnf file under testca directory.
>
> # mkdir testca
> # cd testca
> # mkdir certs private
> # chmod 700 private
> # echo 01 > serial
> # touch index.txt
>
>
>
> I see SSL folder under Erlang's installation folder,so i have not taken
> any steps to install or configure it explicitly.
> Next, when I executed following , I get error 'OpenSSL' is not valid
> bash shell command .
>
> # openssl req -x509 -config openssl.cnf -newkey rsa:2048 -days 365 \
>      -out cacert.pem -outform PEM -subj /CN=MyTestCA/ -nodes
> # openssl x509 -in cacert.pem -out cacert.cer -outform DER
>
>
> I want to create certificates as per this article and test them.
> I was very impressed with the performance and ease of configuration of
> rabbitMQ until I started SSL config on windows :(
> If this does not work , we might have to go for other bus/broker
> application :(
>
>
>
> Thanks in advance for your help
>
>
>
>
> On Fri, Jan 10, 2014 at 12:12 PM, Simon MacMullen <simon at rabbitmq.com
> <mailto:simon at rabbitmq.com>> wrote:
>
>     If you are using a standard installation of Erlang (which you really
>     should be) then it should include an appropriate build of OpenSSL.
>     You shouldn't need to do anything.
>
>     Cheers, Simon
>
>
>     On 10/01/2014 16:14, EAI Inegration wrote:
>
>         Hi ,
>
>         I have installed Erlang's latest version i.e. E16b03.
>         I am using 64 bit windows 7 for rabbitMQ evaluation.I have installed
>         cygwin with MinGW 'GCC
>         I am following the link http://www.rabbitmq.com/ssl.__html
>         <http://www.rabbitmq.com/ssl.html> to configure
>         rabbitMQ with SSL.
>         I need to not configured  OpenSSL with current version of erlang
>         on my
>         machine.
>         I have  downloaded latest  openssl1.0.01.tar.gz on my machine
>
>
>         But I am not able to understand how do i configure Erlang with
>         this openssl
>         If anyone could give me step by step instructions,it would be great
>
>         Thanks in advance
>
>
>
>         _________________________________________________
>         rabbitmq-discuss mailing list
>         rabbitmq-discuss at lists.__rabbitmq.com
>         <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>         https://lists.rabbitmq.com/__cgi-bin/mailman/listinfo/__rabbitmq-discuss
>         <https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>
>
>


From emile at rabbitmq.com  Mon Jan 13 12:45:58 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 13 Jan 2014 12:45:58 +0000
Subject: [rabbitmq-discuss] How to use Presence Exchange Plugin using
 STOMP and RabbitMQ Server v3.2.1?
In-Reply-To: <BLU176-W293642F4DDDF8403CEBE03ADBD0@phx.gbl>
References: <BLU176-W293642F4DDDF8403CEBE03ADBD0@phx.gbl>
Message-ID: <52D3E006.1010904@rabbitmq.com>


Hi Joshua,

On 12/01/14 15:04, Joshua Lim wrote:

> Immediately after that, the guest STOMP connection crashed when I
> had expect it to receive messages after user joshua has subscribed to
> "presence" exchange.  
> 
> What have I done wrongly?


When I try this I see the following error in the logfile:

** Reason for termination ==
** {badarg,[{erlang,binary_to_list,["bind"],[]},


This looks like a problem in the presence exchange. I have submitted a
pull request to the author which appears to solve the problem. With the
patch applied you should see messages like this being delivered to the
first subscriber:


MESSAGE
subscription:test
destination:/exchange/presence
message-id:T_test@@session-Ip9MZyrYrNyRHqVNDM9lpA@@1
action:bind
exchange:presence
queue:amq.gen-1gqzkBxb5AYbBFXGF2GNxw
key:joshua






-Emile




From ceri at lshift.net  Thu Jan  9 13:00:36 2014
From: ceri at lshift.net (Ceri Storey)
Date: Thu, 09 Jan 2014 13:00:36 +0000
Subject: [rabbitmq-discuss] Latest revision of NYTimes site is supported
 by RabbitMQ - launched 8 January 2014
In-Reply-To: <CA+ttMd_gDV-n6se3NWFgP2q3iZBd5HKf_uNgxx3iceEn4bbASw@mail.gmail.com>
References: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
 <CAMcAHLV2iF7pr+MAOJUkso8=XAK4gkyUzUmPXgV2WAT07MPPbQ@mail.gmail.com>
 <CA+ttMd_gDV-n6se3NWFgP2q3iZBd5HKf_uNgxx3iceEn4bbASw@mail.gmail.com>
Message-ID: <52CE9D74.5050105@lshift.net>

(08/01/14 19:50), Paul Bell wrote:
> Michael,
>
> That's very exciting news.
>
> Have you published any documents on this architecture, i.e., stuff you
> can share publicly?

I'll second this. I'm very curious as to what kind of toplogy they're
using, and how they've designed to make it resilient across zones .
>
> I'd be most interested in seeing them.
>
> Cordially,
>
> Paul
>
>
> On Wed, Jan 8, 2014 at 2:47 PM, Alvaro Videla <videlalvaro at gmail.com
> <mailto:videlalvaro at gmail.com>> wrote:
>
>     Michael,
>
>     Wow. This is great news ----no pun intended ;-)
>
>     It's really cool to hear this.
>
>     Regards,
>
>     Alvaro
>
>     On Wed, Jan 8, 2014 at 8:26 PM, Laing, Michael
>     <michael.laing at nytimes.com <mailto:michael.laing at nytimes.com>> wrote:
>     > Just a quick note and thank you to the RabbitMQ team for a great
>     product.
>     >
>     > Our premier online offering www.nytimes.com
>     <http://www.nytimes.com> has a new look and new
>     > underpinnings, now including a messaging architecture
>     implemented using
>     > RabbitMQ.
>     >
>     > This architecture - nyt?a?rik - has dozens of RabbitMQ instances
>     spread
>     > across 6 AWS zones in Oregon and Dublin. The instances are
>     organized into
>     > "wholesale" and "retail" layers. Connection to clients is via
>     > websockets/sockjs.
>     >
>     > Upon launch today, the system autoscaled to ~500,000 users.
>     Connection times
>     > remained flat at ~200ms.
>     >
>     > nyt?a?rik provides subscription services for breaking news,
>     video feeds,
>     > etc. and will add more event based services. It also supports
>     individual
>     > messaging related to subscription status for registered users.
>     >
>     > This system would not have been possible without RabbitMQ. It
>     was the one
>     > component, used everywhere, that never faltered or failed.
>     >
>     > We look forward to contributing our own code to the open source
>     community
>     > but it will be difficult to match the quality of this
>     outstanding product
>     > and its supporting team.
>     >
>     > Michael Laing
>     > Systems Architect
>     > NYTimes
>     >
>     > _______________________________________________
>     > rabbitmq-discuss mailing list
>     > rabbitmq-discuss at lists.rabbitmq.com
>     <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>     > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>     >
>     _______________________________________________
>     rabbitmq-discuss mailing list
>     rabbitmq-discuss at lists.rabbitmq.com
>     <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>     https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140109/1c34d5c0/attachment.html>

From emile at rabbitmq.com  Mon Jan 13 13:09:42 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 13 Jan 2014 13:09:42 +0000
Subject: [rabbitmq-discuss] How to enable server side heartbeat for
	RabbitMQ?
In-Reply-To: <BLU176-W466DD1E9B083DC390B71E9ADB20@phx.gbl>
References: <BLU176-W466DD1E9B083DC390B71E9ADB20@phx.gbl>
Message-ID: <52D3E596.10503@rabbitmq.com>


Hi Joshua,

On 11/01/14 10:21, Joshua Lim wrote:

> To solve this problem, I thought that I may use heart beat so I added
> the following to the Javascript using stomp.js:

The web-stomp documentation explicitly lists heartbeats as a missing
feature, because they do not work with SockJS. Therefore heartbeats must
be disabled when using this client.
See http://www.rabbitmq.com/web-stomp.html

> I tried adding param to rabbitmq.config, but that didn't appear to work.
> The doc doesn't mention whether the heartbeat parameter is for client or
> server heartbeat.
> 
> [
>        {rabbit, [
>                 {cluster_nodes, {['rabbit at server'], disc}},
>                  {cluster_partition_handling, autoheal},
>          {heartbeat, 1}
>         ]},


Heartbeats must be agreed upon by both parties. The broker heartbeat
configuration will be suggested during protocol negotiation, but the
broker may not insist on this value.



-Emile









From emile at rabbitmq.com  Mon Jan 13 14:16:19 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 13 Jan 2014 14:16:19 +0000
Subject: [rabbitmq-discuss] MQTT topic ACLs Query
In-Reply-To: <CAPwMmOBoUH_SrRdTa2xJU6qDm2xRQf59kaPbfGADBwcn-VM9Fw@mail.gmail.com>
References: <CAPwMmOBHjR7Gf3jTgwQTO8CEMKcavbDjY38Yczb8wYG2H8ABYQ@mail.gmail.com>
 <52CBE501.8020003@rabbitmq.com>
 <CAPwMmOAsdtVeU=7s2UKPWizc1J6hUnce1CG6CTy=5GJwtr+dWg@mail.gmail.com>
 <52CFDA37.4080102@rabbitmq.com>
 <CAPwMmOBoUH_SrRdTa2xJU6qDm2xRQf59kaPbfGADBwcn-VM9Fw@mail.gmail.com>
Message-ID: <52D3F533.7060903@rabbitmq.com>

On 12/01/14 00:04, Mark Wolfe wrote:

> If anyone has any other suggestions or questions I am all ears.


It should be possible also to modify the adapter, specifically the
translation between AMQP and MQTT. It could add a prefix or perform
interpolation with the client ID or username. That would involve coding
in Erlang though.



-Emile

From emile at rabbitmq.com  Mon Jan 13 14:21:52 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 13 Jan 2014 14:21:52 +0000
Subject: [rabbitmq-discuss] Any message priority support schedule?
In-Reply-To: <CAHEpgBCDbSwhx1J=QG_G8stOff1vj=giiEiEpTVbEqnyhYpQhQ@mail.gmail.com>
References: <CAHEpgBCDbSwhx1J=QG_G8stOff1vj=giiEiEpTVbEqnyhYpQhQ@mail.gmail.com>
Message-ID: <52D3F680.8010309@rabbitmq.com>


Hi Chris,

On 10/01/14 17:09, Chris wrote:

> More than a year ago, someone asked if message priority might be
> implemented in the near future.  I'm ressurrecting this thread now to
> ask again.  Are we any closer to seeing support for Message Priority in
> RabbitMQ?  It seems to be one of the very few AMQP "MUST"s that is not
> yet supported.

I'm afraid not. This feature has low priority because it is easy to
emulate priorities by using separate queues for each priority.



-Emile




From Mark.deVilliers at Aeriandi.com  Mon Jan 13 14:42:08 2014
From: Mark.deVilliers at Aeriandi.com (Mark DeVilliers)
Date: Mon, 13 Jan 2014 14:42:08 +0000
Subject: [rabbitmq-discuss] extremely long and weird delivery tag in
 amqp.js	consumer
In-Reply-To: <CAAAYafP8zYYc07TP4dqBapsdLXdnZXESFAcNNoyJ_zEtah5Haw@mail.gmail.com>
References: <CAAAYafP8zYYc07TP4dqBapsdLXdnZXESFAcNNoyJ_zEtah5Haw@mail.gmail.com>
Message-ID: <F8529FD7D0704748807B0F0A1B7B4AAB6A8ED7E2@1AERDCEXCHMBX1.AER.AERCO.local>

Plugging the beginning of the parent value into erlang repl it give the following

5> Debug = [60,33,68,79,67,84,89,80,69,32,104,116,109,108,62,10,60,33,45,91,105,102,32,108,116,32,73,69,32].
"<!DOCTYPE html>\n<!-[if lt IE "

So it looks like the parent variable is an HTML page.

Hope that helps,

Mark

From: rabbitmq-discuss [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Jianhui Zhang
Sent: 10 January 2014 19:10
To: rabbitmq-discuss at lists.rabbitmq.com
Subject: [rabbitmq-discuss] extremely long and weird delivery tag in amqp.js consumer

Hi,
We are using amqp.js library to consume messages from rabbitmq. But when we log the delivery tag, we found them extremely long and weird (aren't they supposed to be a long int?). For example:
"deliveryTag":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"length":8,"parent":{"0":60,"1":33,"2":68,"3":79,"4":67,"5":84,"6":89,"7":80,"8":69,"9":
32,"10":104,"11":116,"12":109,"13":108,"14":62,"15":10,"16":60,"17":33,"18":45,"19":45,"20":91,"21":105,"22":102,"23":32,"24":108,"25":116,"26":32,"27":73,"28":
69,"29":32,"30":55,"31":93,"32":62,"33":32,"34":32,"35":32,"36":32,"37":32,"38":32,"39":60,"40":104,"41":116,"42":109,"43":108,"44":32,"45":99,"46":108,"47":97,
"48":115,"49":115,"50":61,"51":34,"52":110,"53":111,"54":45,"55":106,"56":115,"57":32,"58":108,"59":116,"60":45,"61":105,"62":101,"63":57,"64":32,"65":108,"66":
116,"67":45,"68":105,"69":101,"70":56,"71":32,"72":108,"73":116,"74":45,"75":105,"76":101,"77":55,"78":34,"79":62,"80":32,"81":60,"82":33,"83":91,"84":101,"85":
110,"86":100,"87":105,"88":102,"89":93,"90":45,"91":45,"92":62,"93":10,"94":60,"95":33,"96":45,"97":45,"98":91,"99":105,"100":102,"101":32,"102":73,"103":69,"10
4":32,"105":55,"106":93,"107":62,"108":32,"109":32,"110":32,"111":32,"112":32,"113":32,"114":32,"115":32,"116":32,"117":60,"118":104,"119":116,"120":109,"121":1
08,"122":32,"123":99,"124":108,"125":97,"126":115,"127":115,"128":61,"129":34,"130":110,"131":111,"132":45,"133":106,"134":115,"135":32,"136":108,"137":116,"138
":45,"139":105,"140":101,"141":57,"142":32,"143":108,"144":116,"145":45,"146":105,"147":101,"148":56,"149":34,"150":62,"151":32,"152":60,"153":33,"154":91,"155"
:101,"156":110,"157":100,"158":105,"159":102,"160":93,"161":45,"162":45,"163":62,"164":10,"165":60,"166":33,"167":45,"168":45,"169":91,"170":105,"171":102,"172"
:32,"173":73,"174":69,"175":32,"176":56,"177":93,"178":62,"179":32,"180":32,"181":32,"182":32,"183":32,"184":32,"185":32,"186":32,"187":32,"188":60,"189":104,"1
90":116,"191":109,"192":108,"193":32,"194":99,"195":108,"196":97,"197":115,"198":115,"199":61,"200":34,"201":110,"202":111,"203":45,"204":106,"205":115,"206":32
,"207":108,"208":116,"209":45,"210":105,"211":101,"212":57,"213":34,"214":62,"215":32,"216":60,"217":33,"218":91,"219":101,"220":110,"221":100,"222":105,"223":1
02,"224":93,"225":45,"226":45,"227":62,"228":10,"229":60,"230":33,"231":45,"232":45,"233":91,"234":105,"235":102,"236":32,"237":103,"238":116,"239":32,"240":73,
"241":69,"242":32,"243":56,"244":93,"245":62,"246":60,"247":33,"248":45,"249":45,"250":62,"251":32,"252":60,"253":104,"254":116,"255":109,"256":108,"257":32,"25
8":99,"259":108,"260":97,"261":115,"262":115,"263":61,"264":34,"265":110,"266":111,"267":45,"268":106,"269":115,"270":34,"271":62,"272":32,"273":60,"274":33,"27
5":45,"276":45,"277":60,"278":33,"279":91,"280":101,"281":110,"282":100,"283":105,"284":102,"285":93,"286":45,"287":45,"288":62,"289":10,"290":9,"291":60,"292":
104,"293":101,"294":97,"295":100,"296":62,"297":10,"298":32,"299":32,"300":32,"301":32,"302":60,"303":109,"304":101,"305":116,"306":97,"307":32,"308":104,"309":
116,"310":116,"311":112,"312":45,"313":101,"314":113,"315":117,"316":105,"317":118,"318":61,"319":226,"320":128,"321":157,"322":67,"323":97,"324":99,"325":104,"
326":101,"327":45,"328":99,"329":111,"330":110,"331":116,"332":114,"333":111,"334":108,"335":226,"336":128,"337":157,"338":32,"339":99,"340":111,"341":110,"342"
:116,"343":101,"344":110,"345":116,"346":61,"347":226,"348":128,"349":157,"350":109,"351":117,"352":115,"353":116,"354":45,"355":114,"356":101,"357":118,"358":9
7,"359":108,"360":105,"361":100,"362":97,"363":116,"364":101,"365":226,"366":128,"367":157,"368":62,"369":10,"370":9,"371":9,"372":60,"373":109,"374":101,"375":
116,"376":97,"377":32,"378":99,"379":104,"380":97,"381":114,"382":115,"383":101,"384":116,"385":61,"386":34,"387":117,"388":116,"389":102,"390":45,"391":56,"392
":34,"393":62,"394":10,"395":9,"396":60,"397":33,"398":45,"399":45,"400":10,"401":9,"402":9,"403":65,"404":108,"405":119,"406":97,"407":121,"408":115,"409":32,"
410":102,"411":111,"412":11 .....

Has anybody seen this? And what's the cause for it?
Thank you very much in advance.
James
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140113/d076014c/attachment.html>

From mklishin at gopivotal.com  Mon Jan 13 14:42:53 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 13 Jan 2014 18:42:53 +0400
Subject: [rabbitmq-discuss] Any message priority support schedule?
In-Reply-To: <52D3F680.8010309@rabbitmq.com>
References: <CAHEpgBCDbSwhx1J=QG_G8stOff1vj=giiEiEpTVbEqnyhYpQhQ@mail.gmail.com>
 <52D3F680.8010309@rabbitmq.com>
Message-ID: <B2CEDCE2-129E-49DB-A620-3F83CD71F643@rabbitmq.com>

On 13 Jan 2014, at 18:21, Emile Joubert <emile at rabbitmq.com> wrote:

> I'm afraid not. This feature has low priority because it is easy to
> emulate priorities by using separate queues for each priority.

?and give different priorities to consumers on those queues:
http://www.rabbitmq.com/consumer-priority.html

MK

Software Engineer, Pivotal/RabbitMQ



From mklishin at gopivotal.com  Mon Jan 13 14:56:01 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 13 Jan 2014 18:56:01 +0400
Subject: [rabbitmq-discuss] Any message priority support schedule?
In-Reply-To: <B2CEDCE2-129E-49DB-A620-3F83CD71F643@rabbitmq.com>
References: <CAHEpgBCDbSwhx1J=QG_G8stOff1vj=giiEiEpTVbEqnyhYpQhQ@mail.gmail.com>
 <52D3F680.8010309@rabbitmq.com>
 <B2CEDCE2-129E-49DB-A620-3F83CD71F643@rabbitmq.com>
Message-ID: <8BF98C7B-8D69-4C9C-ACB5-A37867AFD073@gopivotal.com>

On 13 Jan 2014, at 18:42, Michael Klishin <mklishin at gopivotal.com> wrote:

> ?and give different priorities to consumers on those queues:
> http://www.rabbitmq.com/consumer-priority.html

Actually, this is incorrect, consumer priorities assume a shared queue.
--
MK

Software Engineer, Pivotal/RabbitMQ



From stuff at moesel.net  Mon Jan 13 15:50:50 2014
From: stuff at moesel.net (Chris)
Date: Mon, 13 Jan 2014 10:50:50 -0500
Subject: [rabbitmq-discuss] Any message priority support schedule?
In-Reply-To: <8BF98C7B-8D69-4C9C-ACB5-A37867AFD073@gopivotal.com>
References: <CAHEpgBCDbSwhx1J=QG_G8stOff1vj=giiEiEpTVbEqnyhYpQhQ@mail.gmail.com>
 <52D3F680.8010309@rabbitmq.com>
 <B2CEDCE2-129E-49DB-A620-3F83CD71F643@rabbitmq.com>
 <8BF98C7B-8D69-4C9C-ACB5-A37867AFD073@gopivotal.com>
Message-ID: <CAHEpgBBEio0stBsEfNNHUWRvbSbQy733Uo-o6S5DTCxqtftqZw@mail.gmail.com>

Thanks for the update.  In our use case, we potentially have hundreds of
queues.  While we could multiply by the # of priorities, it would be a lot
cleaner if we didn't have too.  It would also prevent us from having to
modify all of our consumers to deal with multiple priority queues.

I think that true priorities would make the queue topology a lot simpler
(and smaller) and the consumer implementation a lot simpler as well.  It
would also allow a smoother transition to RabbitMQ for those already using
priorities in other AMQP brokers (like Qpid) or JMS brokers (like
ActiveMQ).  IMHO, it's surprising that more people aren't asking for this,
but I guess it is what it is.

Thanks (as always) for the response and suggestions!

-Chris


On Mon, Jan 13, 2014 at 9:56 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

> On 13 Jan 2014, at 18:42, Michael Klishin <mklishin at gopivotal.com> wrote:
>
> > ?and give different priorities to consumers on those queues:
> > http://www.rabbitmq.com/consumer-priority.html
>
> Actually, this is incorrect, consumer priorities assume a shared queue.
> --
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140113/203c2158/attachment.html>

From joneholland at gmail.com  Mon Jan 13 16:05:09 2014
From: joneholland at gmail.com (Jonathan Holland)
Date: Mon, 13 Jan 2014 08:05:09 -0800
Subject: [rabbitmq-discuss] Any message priority support schedule?
In-Reply-To: <CAHEpgBBEio0stBsEfNNHUWRvbSbQy733Uo-o6S5DTCxqtftqZw@mail.gmail.com>
References: <CAHEpgBCDbSwhx1J=QG_G8stOff1vj=giiEiEpTVbEqnyhYpQhQ@mail.gmail.com>
 <52D3F680.8010309@rabbitmq.com>
 <B2CEDCE2-129E-49DB-A620-3F83CD71F643@rabbitmq.com>
 <8BF98C7B-8D69-4C9C-ACB5-A37867AFD073@gopivotal.com>
 <CAHEpgBBEio0stBsEfNNHUWRvbSbQy733Uo-o6S5DTCxqtftqZw@mail.gmail.com>
Message-ID: <CAPZS+nmN7z9uu8h1MEgMGHyW31dOvDLRAwFyNUESLNP5V_K5ew@mail.gmail.com>

Personally, I find the concept of a FIFO queue and message priorities in
conflict, and it leads towards brittle overall architecture. I blame JMS
for introducing this group-think into so many EA's heads.

Why do you need message priorities? Perhaps we can discuss your use case
and see if it necessary at all.







On Mon, Jan 13, 2014 at 7:50 AM, Chris <stuff at moesel.net> wrote:

> Thanks for the update.  In our use case, we potentially have hundreds of
> queues.  While we could multiply by the # of priorities, it would be a lot
> cleaner if we didn't have too.  It would also prevent us from having to
> modify all of our consumers to deal with multiple priority queues.
>
> I think that true priorities would make the queue topology a lot simpler
> (and smaller) and the consumer implementation a lot simpler as well.  It
> would also allow a smoother transition to RabbitMQ for those already using
> priorities in other AMQP brokers (like Qpid) or JMS brokers (like
> ActiveMQ).  IMHO, it's surprising that more people aren't asking for this,
> but I guess it is what it is.
>
> Thanks (as always) for the response and suggestions!
>
> -Chris
>
>
> On Mon, Jan 13, 2014 at 9:56 AM, Michael Klishin <mklishin at gopivotal.com>wrote:
>
>> On 13 Jan 2014, at 18:42, Michael Klishin <mklishin at gopivotal.com> wrote:
>>
>> > ?and give different priorities to consumers on those queues:
>> > http://www.rabbitmq.com/consumer-priority.html
>>
>> Actually, this is incorrect, consumer priorities assume a shared queue.
>> --
>> MK
>>
>> Software Engineer, Pivotal/RabbitMQ
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140113/13e37fd2/attachment.html>

From shridharan.m at gmail.com  Mon Jan 13 17:47:53 2014
From: shridharan.m at gmail.com (shridharan muthu)
Date: Mon, 13 Jan 2014 09:47:53 -0800
Subject: [rabbitmq-discuss] Rabbit Mq 3.0.2 memory leak
In-Reply-To: <52C57B54.8010805@rabbitmq.com>
References: <CAPK6Oevr7A1L7HpuuLYfS-2u0-YiEjoJ=Ak3YkCDaVe7csx91w@mail.gmail.com>
 <52C57B54.8010805@rabbitmq.com>
Message-ID: <CAPK6Oes0fTravUJHcXb3xfPD0B8UpO7ik+RpODOpdLsWyQ1Zyg@mail.gmail.com>

Hello again,

       I built a new recommended rabbit mq cluster with version 3.2.1
(Erlang R16B) to avoid the the memory leak issue that I mentioned in the
mail below. After building this cluster, I migrated 50% traffic on highest
volume queue (this queue constitutes to 70% of the total our traffic).

Cluster Version           v3.0.2                                  v3.2.1
Erlang                           R13B                                   R16B
# nodes                         2
2
# Connections             850                                      250
Erlang process            2900                                   1500
Publish/Delivery rate  230 / sec                            160 / sec
*Cpu Usage                   15%                                    25%*
*# Running process     2                                           3-4*


After the migration, I am noticing higher cpu usage and total number of
running processes on new cluster for less traffic than the original
cluster.  Also, when is there is an increase in traffic on both clusters,
cpu on new cluster increases significantly than increase in old cluster.
For instance, an increase in 0.4 MB network traffic over 2 mins caused an
increase in cpu of 2% in old cluster vs 6% increase in new cluster.

So I would like to understand why I am noticing increase in cpu and total
number of running processes before migration the whole traffic to new
cluster. Is this expected with new cluster?  I tried searching but couldn't
find any posts/blogs explaining this scenario.

Pls let me know if you need more info on cluster configs.

Thanks,
Shri


On Thu, Jan 2, 2014 at 6:44 AM, Emile Joubert <emile at rabbitmq.com> wrote:

>
> Hi,
>
> On 27/12/13 16:55, shridharan muthu wrote:
>
> > I know the quick answer is "upgrade" but is there a short term solution
> > to fix this before we upgrade?
>
>
> Please check whether you can reproduce the problem on the latest version
> of the broker. There have been numerous improvements to the broker since
> 3.0.2. If you can reproduce the problem then please supply the output of
> "rabbitmqctl report" while the memory usage is normal and again when it
> is abnormal.
>
>
>
>
> -Emile
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140113/0f6d71a4/attachment.html>

From mpietrek at skytap.com  Mon Jan 13 18:08:38 2014
From: mpietrek at skytap.com (Matt Pietrek)
Date: Mon, 13 Jan 2014 10:08:38 -0800
Subject: [rabbitmq-discuss] A question on federation status reporting
Message-ID: <CACLE7iy1MB81xAOgD_71HNN7XTkOumB0e5aVDVfE-=n0VwE=Rw@mail.gmail.com>

We have a bi-directional federation setup between three nodes like this on
RabbitMQ 3.2.2:

mq_integ/sea <===> mq_integ <===> mq_integ/tuk


All three nodes use a "skytap" exchange and the mq_integ/sea
and mq_integ/tuk are *not* federated with each other

Here's what's interesting. In the *mq_integ/sea* broker, the "Federation
Upstreams" page is what I'd expect it to be, that is, a connection to
mq_integ:
NameURIExpiryMessage TTLMax HopsPrefetch CountReconnect DelayAck modeTrust
User-IDupstream-integ<http://tuk5r1mq1.mgt.integ.skytap.com:15672/#/federation-upstreams/%2F/upstream-integ>
amqp://foo:bar at sea_m2:5672??

However, in the "Federation Status" page for *mq_integ/sea* looks strange
(see below). In particular, I see four entries, whereas in RabbitMQ 3.0.2 I
only saw one line.

In addition, the third entry references the mq_integ/tuk broker, even
though I haven't configured mq_integ/sea to know anything about
mq_integ/tuk:


ConnectionURIExchange / QueueNodeStateInbound message rateLast changed
upstream-integamqp://sea_m2:5672federation: skytap -> mq_integqueuerabbit@
sea_r2
running
2014-01-11 1:35:28upstream-integamqp://sea5_m2:5672federation: skytap ->
mq_integ/seaqueuerabbit at sea_r2
running
2014-01-11 1:35:28upstream-integamqp://sea_m2:5672federation: skytap ->
mq_integ/tukqueuerabbit at sea_r2
running
2014-01-11 1:35:29upstream-integamqp://sea_m2:5672skytapexchangerabbit@
sea_r2
running
0.00/s2014-01-11 1:35:29
Is this what you'd expect to see? Am I not understanding something?

Thanks,

Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140113/abeb6361/attachment.html>

From simon at rabbitmq.com  Mon Jan 13 18:21:28 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 13 Jan 2014 18:21:28 +0000
Subject: [rabbitmq-discuss] A question on federation status reporting
In-Reply-To: <CACLE7iy1MB81xAOgD_71HNN7XTkOumB0e5aVDVfE-=n0VwE=Rw@mail.gmail.com>
References: <CACLE7iy1MB81xAOgD_71HNN7XTkOumB0e5aVDVfE-=n0VwE=Rw@mail.gmail.com>
Message-ID: <52D42EA8.7060203@rabbitmq.com>

Hi Matt.

Federated exchanges declare queues for internal use. These are the 
queues with names beginning "federation: " which you have probably 
already seen.

It looks like in your case those internal queues are themselves becoming 
federated. This is unlikely to be a useful thing.

You should review your federation policies and make sure those queues 
are not included in them. If you don't intend to federate queues at all 
then the easiest way is to set the federation policy to only apply to 
exchanges.

I'll also file a bug to prevent those queues from ever federating, 
regardless of policy...

Cheers, Simon

On 13/01/2014 18:08, Matt Pietrek wrote:
> We have a bi-directional federation setup between three nodes like this
> on RabbitMQ 3.2.2:
>
> mq_integ/sea <===> mq_integ <===> mq_integ/tuk
>
>
> All three nodes use a "skytap" exchange and the mq_integ/sea
> and mq_integ/tuk are *_not_* federated with each other
>
> Here's what's interesting. In the *mq_integ/sea* broker, the "Federation
> Upstreams" page is what I'd expect it to be, that is, a connection to
> mq_integ:
> Name	URI	Expiry	Message TTL	Max Hops	Prefetch Count	Reconnect Delay
> Ack mode	Trust User-ID
> upstream-integ
> <http://tuk5r1mq1.mgt.integ.skytap.com:15672/#/federation-upstreams/%2F/upstream-integ>
> amqp://foo:bar at sea_m2:5672						?	?
>
>
> However, in the "Federation Status" page for *mq_integ/sea* looks
> strange (see below). In particular, I see four entries, whereas in
> RabbitMQ 3.0.2 I only saw one line.
>
> In addition, the third entry references the mq_integ/tuk broker, even
> though I haven't configured mq_integ/sea to know anything about
> mq_integ/tuk:
>
>
> Connection	URI	Exchange / Queue	Node	State	Inbound message rate	Last
> changed
> upstream-integ	amqp://sea_m2:5672	federation: skytap -> mq_integ_queue
> rabbit at sea_r2	
> running
> 		2014-01-11 1:35:28
> upstream-integ	amqp://sea5_m2:5672	federation: skytap ->
> mq_integ/sea_queue 	rabbit at sea_r2	
> running
> 		2014-01-11 1:35:28
> upstream-integ	amqp://sea_m2:5672	federation: skytap ->
> mq_integ/tuk_queue 	rabbit at sea_r2	
> running
> 		2014-01-11 1:35:29
> upstream-integ	amqp://sea_m2:5672	skytap_exchange 	rabbit at sea_r2	
> running
> 	0.00/s	2014-01-11 1:35:29
>
>
> Is this what you'd expect to see? Am I not understanding something?
>
> Thanks,
>
> Matt
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


From alan.antonuk at gmail.com  Mon Jan 13 18:54:39 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Mon, 13 Jan 2014 10:54:39 -0800
Subject: [rabbitmq-discuss] Change in semantics of {exchange,
 queue}.{unbind, delete}
In-Reply-To: <52D266C9.5060802@rabbitmq.com>
References: <CAAt2poLMrEcGyvozUYJy46JXrLxfkiG7W+HddiBfhi133NUNjw@mail.gmail.com>
 <52D266C9.5060802@rabbitmq.com>
Message-ID: <CAAt2po+fiOD-RzE8qVa-6eNt_mngHpG4q0aK0o6_OJJMMmCcNA@mail.gmail.com>

That all makes sense.  Thanks for the explanation.

-Alan


On Sun, Jan 12, 2014 at 1:56 AM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> Alan,
>
>
> On 12/01/14 01:17, Alan Antonuk wrote:
>
>> It appears that the semantics of exchange.delete, exchange.unbind,
>> queue.delete, and queue.unbind when the entity doesn't exist have
>> changed: they used to throw a channel exception, now they do not.
>> [...]
>>
>> I'm also kind of curious as to why this behavior was changed (which I
>> would assume was for perf reasons).
>>
>
> The new behaviour is more useful and semantically consistent. AMQP
> generally has an idempotent assertion semantics, i.e. commands indicate
> what should be rather than what should happen. This is so that clients can
> operate independently on the shared space of resources, with each client
> simply asserting what it requires.
>
> So declaring an exchange/queue/binding which already exists is perfectly
> fine. And deleting an exchange/queue/binding which doesn't exist should
> therefore be fine too.
>
> You can get the old behaviour by prefixing the delete with a passive
> declare.
>
> Regards,
>
> Matthias.
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140113/061aa0bc/attachment.html>

From alan.antonuk at gmail.com  Mon Jan 13 18:55:25 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Mon, 13 Jan 2014 10:55:25 -0800
Subject: [rabbitmq-discuss] rabbitmq-c Memory-Based Flow Control API.
In-Reply-To: <27E054594442884E9A46DBCF9AE7408162BAED@BSDMSATMBX001.mahindrasatyam.ad>
References: <27E054594442884E9A46DBCF9AE7408162BAED@BSDMSATMBX001.mahindrasatyam.ad>
Message-ID: <CAAt2poJB2hUNN+aSRcQYAgKLMcmegQKgfhyX3G_ZfQzm9uDVyg@mail.gmail.com>

>
> Rohit;
>
> On Thu, Jan 9, 2014 at 2:25 AM, Rohit Patle <Rohit.Patel2 at techmahindra.com
> > wrote:
>
>> Hi Alan,
>>
>> Thanks you for your advise. But I am facing following issues with your
>> suggestions as:
>>
>> 1. After doing #rabbitmqctl list_channels client_flow_blocked, I could
>> see the "false" value is default set there. While using amqp_login(), I am
>> unable to find  the "capabilities table" to set 'connection.blocked'=true
>> as mentioned. Please let me know how to do it.
>>
>
> You pass in an amqp_table_t with an entry with the key 'capabilites' and
> type table, that table should contain an entry with a key name
> 'connection.blocked', type boolean, and value of 1.  SimpleAmqpClient has
> some code that does something similar with consumer notifications:
>
> https://github.com/alanxz/SimpleAmqpClient/blob/2847a8cacd6499c9973b99e0b7b3694c36e90f79/src/ChannelImpl.cpp#L71
>
>
>> 2.  While using amqp_simple_wait_frame_noblock() I am unable to find the
>> enum values you mentioned(AMQP_CONNECTION_BLOCKED_METHOD and
>> AMQP_CONNECTION_UNBLOCKED_METHOD) which I supposed to get as result of amqp_simple_wait_frame_noblock()
>> in amqp.h or amqp_framing.h. Please suggest.
>>
>
> The connection.blocked method is fairly new and has only just recently
> added to the master branch (there are no tagged releases with
> connection.blocked support in it yet). The documentation you're looking has
> not caught up. Those values will be in amqp_framing.h (see:
> https://github.com/alanxz/rabbitmq-c/blob/master/librabbitmq/amqp_framing.h#L186
>  )
>
> -Alan
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140113/8228839a/attachment.html>

From roberto at canary.is  Mon Jan 13 21:03:21 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Mon, 13 Jan 2014 16:03:21 -0500
Subject: [rabbitmq-discuss] rabbitmq-c parameters
In-Reply-To: <CAAt2poKKEr=FDGcH+TnHKf7yi+h2GctZ6uYGXNyoO_nqfhz2NQ@mail.gmail.com>
References: <CANAFtV6OsOhsxtM3xa9+QVeq42USvN+=bFswjt59r0B9TcUh0g@mail.gmail.com>
 <CAAt2poKKEr=FDGcH+TnHKf7yi+h2GctZ6uYGXNyoO_nqfhz2NQ@mail.gmail.com>
Message-ID: <CANAFtV5dFqFbHqw=exy3ODiyj+r=S1iBaqpqWosQ_74Vfu3F6Q@mail.gmail.com>

I am trying to run amqp_consumer from the examples library, with port
number 5672.

The programs terminates when trying to open the TCP socket

status = amqp_socket_open(socket, hostname, port);
  if (status) {
    die("opening TCP socket");
  }

Any idea why this is happening? Should I change some configuration settings
about the port (I'm using Ubuntu 12 right now)?

Thank you,




On Wed, Jan 8, 2014 at 1:02 AM, Alan Antonuk <alan.antonuk at gmail.com> wrote:

> Inlined:
>
> On Tue, Jan 7, 2014 at 3:51 PM, Roberto Pagliari <roberto at canary.is>wrote:
>
>> I am looking at the example of the RabbitC library
>>
>> https://github.com/alanxz/rabbitmq-c/blob/master/examples/amqp_producer.c
>>
>> 1. which port can normally be used for it?
>>
>  You should use the port that you've configured your RabbitMQ broker to
> listen on. By default RabbitMQ listens on 5672, and 5671 for SSL
> connections, if you have those configured.
>
> 2. what are rate_limit and message_count?
>>
>  rate_limit is the number of messages per second the example will try to
> send. The message_count is the number of messages the program will send
> before terminating.
>
> -Alan
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140113/46ff7fb5/attachment.html>

From mpietrek at skytap.com  Mon Jan 13 23:49:21 2014
From: mpietrek at skytap.com (Matt Pietrek)
Date: Mon, 13 Jan 2014 15:49:21 -0800
Subject: [rabbitmq-discuss] A question on federation status reporting
In-Reply-To: <52D42EA8.7060203@rabbitmq.com>
References: <CACLE7iy1MB81xAOgD_71HNN7XTkOumB0e5aVDVfE-=n0VwE=Rw@mail.gmail.com>
 <52D42EA8.7060203@rabbitmq.com>
Message-ID: <CACLE7iwuQ5+FRZySHZGMzuvZhoFuXT2_ZBAY8Hfo+A_3EHqRTg@mail.gmail.com>

Thanks Simon!

I'm not sure how I manage to misconfigure my federation to include the
internal queues.

If it helps, here's what my Policies page shows for the federation:

skytap-federation<http://tuk5r1mqvip1.mgt.integ.skytap.com:15672/#/policies/%2F/skytap-federation>
skytapallfederation-upstream-set:allha-mode:all0


And her are the snippets of python code I use to set up federation:

rabbitmq_invoke_http_api(broker_host,
                                      'PUT',

'/api/parameters/federation-upstream/%%2f/upstream-%s' %
(quote_plus(federated_broker)),

'{"value":{"uri":"amqp://%(username)s:%(password)s@%(host)s:%(port)s"}}' %
(federated_settings))

then,

rabbitmq_invoke_http_api(broker_host,
                                      'PUT',
                                      '/api/policies/%2f/skytap-federation',
                                      '{"pattern":"skytap",
"definition":{"federation-upstream-set":"all","ha-mode":"all"}}')



Thanks again,

Matt



On Mon, Jan 13, 2014 at 10:21 AM, Simon MacMullen <simon at rabbitmq.com>wrote:

> Hi Matt.
>
> Federated exchanges declare queues for internal use. These are the queues
> with names beginning "federation: " which you have probably already seen.
>
> It looks like in your case those internal queues are themselves becoming
> federated. This is unlikely to be a useful thing.
>
> You should review your federation policies and make sure those queues are
> not included in them. If you don't intend to federate queues at all then
> the easiest way is to set the federation policy to only apply to exchanges.
>
> I'll also file a bug to prevent those queues from ever federating,
> regardless of policy...
>
> Cheers, Simon
>
>
> On 13/01/2014 18:08, Matt Pietrek wrote:
>
>> We have a bi-directional federation setup between three nodes like this
>> on RabbitMQ 3.2.2:
>>
>> mq_integ/sea <===> mq_integ <===> mq_integ/tuk
>>
>>
>> All three nodes use a "skytap" exchange and the mq_integ/sea
>> and mq_integ/tuk are *_not_* federated with each other
>>
>> Here's what's interesting. In the *mq_integ/sea* broker, the "Federation
>>
>> Upstreams" page is what I'd expect it to be, that is, a connection to
>> mq_integ:
>> Name    URI     Expiry  Message TTL     Max Hops        Prefetch Count
>>  Reconnect Delay
>> Ack mode        Trust User-ID
>> upstream-integ
>> <http://tuk5r1mq1.mgt.integ.skytap.com:15672/#/federation-
>> upstreams/%2F/upstream-integ>
>>
>> amqp://foo:bar at sea_m2:5672
>>  ?       ?
>>
>>
>> However, in the "Federation Status" page for *mq_integ/sea* looks
>>
>> strange (see below). In particular, I see four entries, whereas in
>> RabbitMQ 3.0.2 I only saw one line.
>>
>> In addition, the third entry references the mq_integ/tuk broker, even
>> though I haven't configured mq_integ/sea to know anything about
>> mq_integ/tuk:
>>
>>
>> Connection      URI     Exchange / Queue        Node    State   Inbound
>> message rate    Last
>> changed
>> upstream-integ  amqp://sea_m2:5672      federation: skytap ->
>> mq_integ_queue
>>
>> rabbit at sea_r2
>> running
>>                 2014-01-11 1:35:28
>> upstream-integ  amqp://sea5_m2:5672     federation: skytap ->
>> mq_integ/sea_queue      rabbit at sea_r2
>> running
>>                 2014-01-11 1:35:28
>> upstream-integ  amqp://sea_m2:5672      federation: skytap ->
>> mq_integ/tuk_queue      rabbit at sea_r2
>> running
>>                 2014-01-11 1:35:29
>> upstream-integ  amqp://sea_m2:5672      skytap_exchange
>> rabbit at sea_r2
>> running
>>         0.00/s  2014-01-11 1:35:29
>>
>>
>> Is this what you'd expect to see? Am I not understanding something?
>>
>> Thanks,
>>
>> Matt
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140113/019fbdff/attachment.html>

From michael.s.klishin at gmail.com  Tue Jan 14 03:20:27 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 14 Jan 2014 07:20:27 +0400
Subject: [rabbitmq-discuss] rabbitmq-c parameters
In-Reply-To: <CANAFtV5dFqFbHqw=exy3ODiyj+r=S1iBaqpqWosQ_74Vfu3F6Q@mail.gmail.com>
References: <CANAFtV6OsOhsxtM3xa9+QVeq42USvN+=bFswjt59r0B9TcUh0g@mail.gmail.com>
 <CAAt2poKKEr=FDGcH+TnHKf7yi+h2GctZ6uYGXNyoO_nqfhz2NQ@mail.gmail.com>
 <CANAFtV5dFqFbHqw=exy3ODiyj+r=S1iBaqpqWosQ_74Vfu3F6Q@mail.gmail.com>
Message-ID: <CAE3HoVRTcH5tDNnPLvX7a1CVqL9-JPLbTDvapSzz=aBFwO3gjA@mail.gmail.com>

2014/1/14 Roberto Pagliari <roberto at canary.is>

> Any idea why this is happening? Should I change some configuration
> settings about the port (I'm using Ubuntu 12 right now)?


If you use TLS, the default port will be 5671.

Also, make sure RabbitMQ is running and there are no firewall rules that may
block traffic.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/0634c3eb/attachment.html>

From joshua__lim at hotmail.com  Tue Jan 14 05:08:59 2014
From: joshua__lim at hotmail.com (joshua__lim)
Date: Mon, 13 Jan 2014 21:08:59 -0800 (PST)
Subject: [rabbitmq-discuss] Federation and Stomp
In-Reply-To: <C0126B9D-8270-4D00-B773-010B2D3F333D@rabbitmq.com>
References: <7406945.782.1329319767011.JavaMail.geo-discussion-forums@vbbdv1>
 <C0126B9D-8270-4D00-B773-010B2D3F333D@rabbitmq.com>
Message-ID: <1389676138553-32536.post@n5.nabble.com>

Hi Steve, I've been trying to get Durable Exchange to work without success,
both topic and direct exchange.  Here's my findings:

I read somewhere that says to create durable subscription for exchange, I'd
need to set the client-id header on the CONNECT and the id header to a
unique string and set persistent: true.  This doesn't appear to work at this
moment as subscribed-clients will lose messages sent to the exchange if they
are not connected.

What I've observed from the web management console is that the messages are
being sent to and buffered on the "amq.gen-random-characters-here" queue
created when the client was last connected.  Note: This
"amq.gen-random-characters-here" queue is durable.

When the consumer reconnects using the same client-id header and
re-subscribes using the same id, a new queue is generated and this queue has
no messages.

Here's what I did:

Consumer:

ncat localhost 61613
CONNECT
login:joshua
passcode:joshua
client-id:connect-03

^@
CONNECTED
session:session-a5K-Wxdgg0TzUn9Ym6bKgg
heart-beat:0,0
server:RabbitMQ/3.2.1
version:1.0

 SUBSCRIBE
destination:/exchange/topic-x/high.*
ack:client-individual
id:subscribe-03
persistent:true
receipt:001

^@
RECEIPT
receipt-id:001

 MESSAGE
subscription:subscribe-03
destination:/exchange/topic-x/high.alarm
message-id:T_subscribe-03@@session-a5K-Wxdgg0TzUn9Ym6bKgg@@1
delivery-mode:2
receipt:002
app-id:guest
persistent:true
content-length:6

test3
 ^C

Producer:

ncat localhost 61613
CONNECT
login:guest
passcode:guest
client-id:guest

^@
CONNECTED
session:session-Q1Di3bc_DBXPHPT90h55NQ
heart-beat:0,0
server:RabbitMQ/3.2.1
version:1.0

 SEND
destination:/exchange/topic-x2/high.alarm
receipt:001
persistent:true
delivery-mode:2
app-id:guest

test1
^@
RECEIPT
receipt-id:001


Finally, I've tried the Durable Topic Subscription - /topic/<name> using a
unique id in the subscribe header + persistent: true.  It appears that only
the first or first two message that is queued when the subscriber is offline
is delivered when the subscriber is back online.  So even if I sent 10-20
messages, only 1 or 2 messages is successfully delivered.

Rgds,
Joshua



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Federation-and-Stomp-tp20052p32536.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From joshua__lim at hotmail.com  Tue Jan 14 05:09:28 2014
From: joshua__lim at hotmail.com (joshua__lim)
Date: Mon, 13 Jan 2014 21:09:28 -0800 (PST)
Subject: [rabbitmq-discuss] Federation and Stomp
In-Reply-To: <7406945.782.1329319767011.JavaMail.geo-discussion-forums@vbbdv1>
References: <7406945.782.1329319767011.JavaMail.geo-discussion-forums@vbbdv1>
Message-ID: <1389676168738-32537.post@n5.nabble.com>

ps: for follow up email



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Federation-and-Stomp-tp20052p32537.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Tue Jan 14 05:25:23 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 14 Jan 2014 09:25:23 +0400
Subject: [rabbitmq-discuss] ANN Langohr 2.2.1
Message-ID: <CAE3HoVTpxgXF3N5LDPzNLkY-Eap2W-0k=npJ-Ly=SHdO5G0Oxw@mail.gmail.com>

Langohr [1] is a small, feature complete Clojure client for RabbitMQ.

Hot on the heels of 2.2.0, 2.2.1 is out with one bug fix.

Release notes:
http://blog.clojurewerkz.org/blog/2014/01/14/langohr-2-dot-2-1-is-released/

1. http://clojurerabbitmq.info
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/54183734/attachment.html>

From mgg at giagnocavo.net  Tue Jan 14 06:30:05 2014
From: mgg at giagnocavo.net (Michael Giagnocavo)
Date: Tue, 14 Jan 2014 06:30:05 +0000
Subject: [rabbitmq-discuss] Multiple shovels to increase create a LB queue?
Message-ID: <1dd5ee969a004b598e3e97e2709ca941@CO1PR07MB331.namprd07.prod.outlook.com>

Hello,

We use shovel to pull messages from 20 RabbitMQ endpoints, but that'll grow to 40 to 100. At some point, we'll run into the limit of a single queue and eventually broker. Right now all these producing RMQ instances get shoveled into a single master exchange and fanout to 6 queues.

Our plan is to make multiple central RabbitMQ servers, and each one will run Shovel and pull from those producing RabbitMQ instances. The idea is that since consumers get load balanced, we can scale horizontally in a nearly "unlimited" fashion just by adding new "central" servers, each shoveling from each producer. And it just requires our consumers to connect to multiple queues, which is no big deal. And each server can run a mirrored queue giving us HA, and if any central server fails, only a part of the capacity is affected.

Is this a sound approach? Or is there some simpler way?

-Michael
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/be6a7c83/attachment.html>

From mklishin at gopivotal.com  Tue Jan 14 06:41:24 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 14 Jan 2014 10:41:24 +0400
Subject: [rabbitmq-discuss] Multiple shovels to increase create a LB
	queue?
In-Reply-To: <1dd5ee969a004b598e3e97e2709ca941@CO1PR07MB331.namprd07.prod.outlook.com>
References: <1dd5ee969a004b598e3e97e2709ca941@CO1PR07MB331.namprd07.prod.outlook.com>
Message-ID: <19039B0F-7706-42C4-BF45-AF63F1302488@rabbitmq.com>

On 14 Jan 2014, at 10:30, Michael Giagnocavo <mgg at giagnocavo.net> wrote:

> Our plan is to make multiple central RabbitMQ servers, and each one will run Shovel and pull from those producing RabbitMQ instances. The idea is that since consumers get load balanced, we can scale horizontally in a nearly ?unlimited? fashion just by adding new ?central? servers, each shoveling from each producer. And it just requires our consumers to connect to multiple queues, which is no big deal. And each server can run a mirrored queue giving us HA, and if any central server fails, only a part of the capacity is affected.
>  
> Is this a sound approach? Or is there some simpler way?

I?d recommend taking a look at federated queues:
http://www.rabbitmq.com/federated-queues.html

MK

Software Engineer, Pivotal/RabbitMQ



From mgg at giagnocavo.net  Tue Jan 14 06:54:34 2014
From: mgg at giagnocavo.net (Michael Giagnocavo)
Date: Tue, 14 Jan 2014 06:54:34 +0000
Subject: [rabbitmq-discuss] Multiple shovels to increase create a
	LB	queue?
In-Reply-To: <19039B0F-7706-42C4-BF45-AF63F1302488@rabbitmq.com>
References: <1dd5ee969a004b598e3e97e2709ca941@CO1PR07MB331.namprd07.prod.outlook.com>
 <19039B0F-7706-42C4-BF45-AF63F1302488@rabbitmq.com>
Message-ID: <cdb3916cca6b4d39ad21580f582cdb90@CO1PR07MB331.namprd07.prod.outlook.com>

What's the rea difference? It seems if I declare all the upstreams on a few downstream queues, it's the same as shoveling. Except shoveling gets the messages out immediately, instead of on-demand. I've read the comparisons and other docs, but it's not quite clear. And federation can connect the multiple central brokers together, but I'm not sure that really helps us - every consumer can connect to every central.

The only other point of info was a message from Simon saying:

"Since federation has quite a pull-based model it might prove more fiddly 
to use than shovel in a situation where you have a lot of satellite 
brokers publishing to a central broker."

Our satellites are all over the world, over unstable IPSec links, FWIW.

We also plan on setting up mirrored queues for HA, if that changes anything (seems it'd be transparent, at least to shoveling).

Thank you,
-Michael

-----Original Message-----
From: rabbitmq-discuss [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Michael Klishin
Sent: Monday, January 13, 2014 11:41 PM
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Multiple shovels to increase create a LB queue?

On 14 Jan 2014, at 10:30, Michael Giagnocavo <mgg at giagnocavo.net> wrote:

> Our plan is to make multiple central RabbitMQ servers, and each one will run Shovel and pull from those producing RabbitMQ instances. The idea is that since consumers get load balanced, we can scale horizontally in a nearly "unlimited" fashion just by adding new "central" servers, each shoveling from each producer. And it just requires our consumers to connect to multiple queues, which is no big deal. And each server can run a mirrored queue giving us HA, and if any central server fails, only a part of the capacity is affected.
>  
> Is this a sound approach? Or is there some simpler way?

I'd recommend taking a look at federated queues:
http://www.rabbitmq.com/federated-queues.html

MK

Software Engineer, Pivotal/RabbitMQ


_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From mklishin at gopivotal.com  Tue Jan 14 06:58:13 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 14 Jan 2014 10:58:13 +0400
Subject: [rabbitmq-discuss] Multiple shovels to increase create a
	LB	queue?
In-Reply-To: <cdb3916cca6b4d39ad21580f582cdb90@CO1PR07MB331.namprd07.prod.outlook.com>
References: <1dd5ee969a004b598e3e97e2709ca941@CO1PR07MB331.namprd07.prod.outlook.com>
 <19039B0F-7706-42C4-BF45-AF63F1302488@rabbitmq.com>
 <cdb3916cca6b4d39ad21580f582cdb90@CO1PR07MB331.namprd07.prod.outlook.com>
Message-ID: <B492AA46-A2A7-433C-88D7-2428174D6E41@rabbitmq.com>


On 14 Jan 2014, at 10:54, Michael Giagnocavo <mgg at giagnocavo.net> wrote:

> What's the rea difference? It seems if I declare all the upstreams on a few downstream queues, it's the same as shoveling. Except shoveling gets the messages out immediately, instead of on-demand. I've read the comparisons and other docs, but it's not quite clear. And federation can connect the multiple central brokers together, but I'm not sure that really helps us - every consumer can connect to every central.
> 
> The only other point of info was a message from Simon saying:
> 
> "Since federation has quite a pull-based model it might prove more fiddly 
> to use than shovel in a situation where you have a lot of satellite 
> brokers publishing to a central broker."

Your assessment is fair, I just wanted to point out that federated queues
can help achieve a similar architecture.

MK

Software Engineer, Pivotal/RabbitMQ



From jbeaulau at gmail.com  Mon Jan 13 23:39:44 2014
From: jbeaulau at gmail.com (rugman66)
Date: Mon, 13 Jan 2014 15:39:44 -0800 (PST)
Subject: [rabbitmq-discuss] RPM install not detectingErlang
Message-ID: <ffe6d66e-8510-4120-8e67-dc910fed0f01@googlegroups.com>

Hello,

I'm trying to install as root rabbitmq-server-3.2.2-1 on a RHEL 5.5 host 
having successfully installed Erlang R16B03 from source, however
when I try to install the RabbitMQ RPM I receive a failed dependency error.

error: Failed dependencies: erlang >= R13B-03 is needed by 
rabbitmq-server-3.2.2-1.noarch"

Erlang is in root's path.

[root at lnx opt]# erl
Erlang R16B03 (erts-5.10.4) [source] [64-bit] [smp:2:2] [async-threads:10] 
[hipe] [kernel-poll:false]

Eshell V5.10.4  (abort with ^G)
1>
 
Thoughts on why the RabbitMQ RPM is not finding Erlang?

Thanks
-John 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140113/e74b1f2f/attachment.html>

From woodslee at 126.com  Tue Jan 14 08:26:07 2014
From: woodslee at 126.com (woodslee)
Date: Tue, 14 Jan 2014 16:26:07 +0800
Subject: [rabbitmq-discuss] RPM install not detectingErlang
References: <ffe6d66e-8510-4120-8e67-dc910fed0f01@googlegroups.com>
Message-ID: <DM__140114162120_83412702300@smtp.feinno.com>

hi John:

If you are installing RPM of rabbitmq server package, you can try like this:

rpm -ivh --nodeps rabbitmq.rpm

I have encoutered this problem, and successed. the rabbitmq run seemed normally.


woodslee?woodslee at 126.com
2014-1-14 
----- Original Message ----- 
From: rugman66 
To: rabbitmq-discuss 
Sent: 2014-01-14, 07:39:44
Subject: [rabbitmq-discuss] RPM install not detectingErlang


Hello, 


I'm trying to install as root rabbitmq-server-3.2.2-1 on a RHEL 5.5 host having successfully installed Erlang R16B03 from source, however
when I try to install the RabbitMQ RPM I receive a failed dependency error.


error: Failed dependencies: erlang >= R13B-03 is needed by rabbitmq-server-3.2.2-1.noarch"


Erlang is in root's path.


[root at lnx opt]# erl
Erlang R16B03 (erts-5.10.4) [source] [64-bit] [smp:2:2] [async-threads:10] [hipe] [kernel-poll:false]


Eshell V5.10.4  (abort with ^G)
1>

Thoughts on why the RabbitMQ RPM is not finding Erlang?


Thanks
-John 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/69e2cbf5/attachment.html>

From simon at rabbitmq.com  Tue Jan 14 10:00:01 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 14 Jan 2014 10:00:01 +0000
Subject: [rabbitmq-discuss] A question on federation status reporting
In-Reply-To: <CACLE7iwuQ5+FRZySHZGMzuvZhoFuXT2_ZBAY8Hfo+A_3EHqRTg@mail.gmail.com>
References: <CACLE7iy1MB81xAOgD_71HNN7XTkOumB0e5aVDVfE-=n0VwE=Rw@mail.gmail.com>
 <52D42EA8.7060203@rabbitmq.com>
 <CACLE7iwuQ5+FRZySHZGMzuvZhoFuXT2_ZBAY8Hfo+A_3EHqRTg@mail.gmail.com>
Message-ID: <52D50AA1.30602@rabbitmq.com>

Hi Matt.

Your policy applies to exchanges and queues with "skytap" in the name - 
that includes the internal queues. Since the policy includes "ha-mode" 
I'm assuming you want it to apply to both exchanges and queues - so you 
could (1) change the regex to "^skytap" (i.e. names have to start with 
skytap, not just contain it or (2) create a second policy to apply 
"ha-mode" to queues and set the current policy to apply to exchanges only.

Note that as of 3.2.x policies can be set to apply to exchanges or 
queues or both: http://www.rabbitmq.com/parameters.html#policies

Cheers, Simon

On 13/01/2014 23:49, Matt Pietrek wrote:
> Thanks Simon!
>
> I'm not sure how I manage to misconfigure my federation to include the
> internal queues.
>
> If it helps, here's what my Policies page shows for the federation:
>
> skytap-federation
> <http://tuk5r1mqvip1.mgt.integ.skytap.com:15672/#/policies/%2F/skytap-federation>
> skytap	all	
> federation-upstream-set: 	all
> ha-mode:	all
>
> 	0
>
>
>
> And her are the snippets of python code I use to set up federation:
>
> rabbitmq_invoke_http_api(broker_host,
>                                        'PUT',
>
> '/api/parameters/federation-upstream/%%2f/upstream-%s' %
> (quote_plus(federated_broker)),
>
> '{"value":{"uri":"amqp://%(username)s:%(password)s@%(host)s:%(port)s"}}'
> % (federated_settings))
>
> then,
>
> rabbitmq_invoke_http_api(broker_host,
>                                        'PUT',
>
> '/api/policies/%2f/skytap-federation',
>                                        '{"pattern":"skytap",
> "definition":{"federation-upstream-set":"all","ha-mode":"all"}}')
>
>
>
> Thanks again,
>
> Matt
>
>
>
> On Mon, Jan 13, 2014 at 10:21 AM, Simon MacMullen <simon at rabbitmq.com
> <mailto:simon at rabbitmq.com>> wrote:
>
>     Hi Matt.
>
>     Federated exchanges declare queues for internal use. These are the
>     queues with names beginning "federation: " which you have probably
>     already seen.
>
>     It looks like in your case those internal queues are themselves
>     becoming federated. This is unlikely to be a useful thing.
>
>     You should review your federation policies and make sure those
>     queues are not included in them. If you don't intend to federate
>     queues at all then the easiest way is to set the federation policy
>     to only apply to exchanges.
>
>     I'll also file a bug to prevent those queues from ever federating,
>     regardless of policy...
>
>     Cheers, Simon
>
>
>     On 13/01/2014 18:08, Matt Pietrek wrote:
>
>         We have a bi-directional federation setup between three nodes
>         like this
>         on RabbitMQ 3.2.2:
>
>         mq_integ/sea <===> mq_integ <===> mq_integ/tuk
>
>
>         All three nodes use a "skytap" exchange and the mq_integ/sea
>         and mq_integ/tuk are *_not_* federated with each other
>
>         Here's what's interesting. In the *mq_integ/sea* broker, the
>         "Federation
>
>         Upstreams" page is what I'd expect it to be, that is, a
>         connection to
>         mq_integ:
>         Name    URI     Expiry  Message TTL     Max Hops        Prefetch
>         Count  Reconnect Delay
>         Ack mode        Trust User-ID
>         upstream-integ
>         <http://tuk5r1mq1.mgt.integ.__skytap.com:15672/#/federation-__upstreams/%2F/upstream-integ
>         <http://tuk5r1mq1.mgt.integ.skytap.com:15672/#/federation-upstreams/%2F/upstream-integ>>
>
>         amqp://foo:bar at sea_m2:5672
>                 ?       ?
>
>
>         However, in the "Federation Status" page for *mq_integ/sea* looks
>
>         strange (see below). In particular, I see four entries, whereas in
>         RabbitMQ 3.0.2 I only saw one line.
>
>         In addition, the third entry references the mq_integ/tuk broker,
>         even
>         though I haven't configured mq_integ/sea to know anything about
>         mq_integ/tuk:
>
>
>         Connection      URI     Exchange / Queue        Node    State
>         Inbound message rate    Last
>         changed
>         upstream-integ  amqp://sea_m2:5672      federation: skytap ->
>         mq_integ_queue
>
>         rabbit at sea_r2
>         running
>                          2014-01-11 1:35:28
>         upstream-integ  amqp://sea5_m2:5672     federation: skytap ->
>         mq_integ/sea_queue      rabbit at sea_r2
>         running
>                          2014-01-11 1:35:28
>         upstream-integ  amqp://sea_m2:5672      federation: skytap ->
>         mq_integ/tuk_queue      rabbit at sea_r2
>         running
>                          2014-01-11 1:35:29
>         upstream-integ  amqp://sea_m2:5672      skytap_exchange
>         rabbit at sea_r2
>         running
>                  0.00/s  2014-01-11 1:35:29
>
>
>         Is this what you'd expect to see? Am I not understanding something?
>
>         Thanks,
>
>         Matt
>
>
>         _________________________________________________
>         rabbitmq-discuss mailing list
>         rabbitmq-discuss at lists.__rabbitmq.com
>         <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>         https://lists.rabbitmq.com/__cgi-bin/mailman/listinfo/__rabbitmq-discuss
>         <https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>
>
>


From simon at rabbitmq.com  Tue Jan 14 10:09:53 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 14 Jan 2014 10:09:53 +0000
Subject: [rabbitmq-discuss] Multiple shovels to increase create a
	LB	queue?
In-Reply-To: <cdb3916cca6b4d39ad21580f582cdb90@CO1PR07MB331.namprd07.prod.outlook.com>
References: <1dd5ee969a004b598e3e97e2709ca941@CO1PR07MB331.namprd07.prod.outlook.com>
 <19039B0F-7706-42C4-BF45-AF63F1302488@rabbitmq.com>
 <cdb3916cca6b4d39ad21580f582cdb90@CO1PR07MB331.namprd07.prod.outlook.com>
Message-ID: <52D50CF1.3010308@rabbitmq.com>

On 14/01/2014 06:54, Michael Giagnocavo wrote:
> The only other point of info was a message from Simon saying:
>
> "Since federation has quite a pull-based model it might prove more
> fiddly to use than shovel in a situation where you have a lot of
> satellite brokers publishing to a central broker."

Your shovel approach is perfectly reasonable, but I'd just like to 
clarify that quote - I was writing when federation was configured 
through the configuration file - and so in such a star topology you had 
to restart the central broker every time you added a satellite. That was 
what I meant by "fiddly".

Cheers, Simon

From emile at rabbitmq.com  Tue Jan 14 12:41:51 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 14 Jan 2014 12:41:51 +0000
Subject: [rabbitmq-discuss] Federation and Stomp
In-Reply-To: <1389676138553-32536.post@n5.nabble.com>
References: <7406945.782.1329319767011.JavaMail.geo-discussion-forums@vbbdv1>
 <C0126B9D-8270-4D00-B773-010B2D3F333D@rabbitmq.com>
 <1389676138553-32536.post@n5.nabble.com>
Message-ID: <52D5308F.9030503@rabbitmq.com>


Hi Joshua,

On 14/01/14 05:08, joshua__lim wrote:

> I read somewhere that says to create durable subscription for exchange, I'd
> need to set the client-id header on the CONNECT and the id header to a
> unique string and set persistent: true.  This doesn't appear to work 


The "Durable Topic Subscription" section explains how to set up durable
topic subscriptions. This only works for topic subscriptions.
http://www.rabbitmq.com/stomp.html#d.dts

> SUBSCRIBE
> destination:/exchange/topic-x/high.*


The destination must start with "/topic"




-Emile




From grussell at gopivotal.com  Tue Jan 14 14:04:38 2014
From: grussell at gopivotal.com (Gary Russell)
Date: Tue, 14 Jan 2014 09:04:38 -0500
Subject: [rabbitmq-discuss] Spring AMQP New Releases
Message-ID: <CADtU9_sjMNkxb=CAH0xxGCKVBTaNiM6PseVB6f01rYBVzxyYKw@mail.gmail.com>

The Spring team is pleased to announce the availability of the (Java)
Spring AMQP 1.2.1 maintenance release and the first milestone for the new
1.3.0 stream. [1]

Spring AMQP [2] brings the familiar Spring Java programming model to
RabbitMQ with high level abstractions over the client library, including
message-driven POJOs and a RabbitTemplate.

The 1.3 release adds support for the new consumer priority feature [3],
adds dynamic consumer management, provides a fluent API for building
messages, and more. See the release announcement [1] and the links therein
for more information.

Gary Russell
Project Lead, Spring Integration and Spring AMQP
Pivotal


[1]:
https://spring.io/blog/2014/01/13/spring-amqp-1-3-0-m1-and-1-2-1-release-available
[2]:http://projects.spring.io/spring-amqp/
[3]:
http://www.rabbitmq.com/blog/2013/12/16/using-consumer-priorities-with-rabbitmq/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/e2b304c9/attachment.html>

From roberto at canary.is  Tue Jan 14 14:41:35 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Tue, 14 Jan 2014 09:41:35 -0500
Subject: [rabbitmq-discuss] rabbitmq-c parameters
In-Reply-To: <CAE3HoVRTcH5tDNnPLvX7a1CVqL9-JPLbTDvapSzz=aBFwO3gjA@mail.gmail.com>
References: <CANAFtV6OsOhsxtM3xa9+QVeq42USvN+=bFswjt59r0B9TcUh0g@mail.gmail.com>
 <CAAt2poKKEr=FDGcH+TnHKf7yi+h2GctZ6uYGXNyoO_nqfhz2NQ@mail.gmail.com>
 <CANAFtV5dFqFbHqw=exy3ODiyj+r=S1iBaqpqWosQ_74Vfu3F6Q@mail.gmail.com>
 <CAE3HoVRTcH5tDNnPLvX7a1CVqL9-JPLbTDvapSzz=aBFwO3gjA@mail.gmail.com>
Message-ID: <CANAFtV6zGpVnw4=Pp2CxuZg9gOjPcr1hfmO2mGgLY9tQPjvrTw@mail.gmail.com>

I ran netstat and the port seems to be free because I don't see any other
app using it.

I'm running amqp_consumer with the IP of my machine and port 5671. Am I
doing something wrong with it?


On Mon, Jan 13, 2014 at 10:20 PM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

>
> 2014/1/14 Roberto Pagliari <roberto at canary.is>
>
>> Any idea why this is happening? Should I change some configuration
>> settings about the port (I'm using Ubuntu 12 right now)?
>
>
> If you use TLS, the default port will be 5671.
>
> Also, make sure RabbitMQ is running and there are no firewall rules that
> may
> block traffic.
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/c78d900d/attachment.html>

From roberto at canary.is  Tue Jan 14 14:47:11 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Tue, 14 Jan 2014 09:47:11 -0500
Subject: [rabbitmq-discuss] rabbitmq-c parameters
In-Reply-To: <CANAFtV6zGpVnw4=Pp2CxuZg9gOjPcr1hfmO2mGgLY9tQPjvrTw@mail.gmail.com>
References: <CANAFtV6OsOhsxtM3xa9+QVeq42USvN+=bFswjt59r0B9TcUh0g@mail.gmail.com>
 <CAAt2poKKEr=FDGcH+TnHKf7yi+h2GctZ6uYGXNyoO_nqfhz2NQ@mail.gmail.com>
 <CANAFtV5dFqFbHqw=exy3ODiyj+r=S1iBaqpqWosQ_74Vfu3F6Q@mail.gmail.com>
 <CAE3HoVRTcH5tDNnPLvX7a1CVqL9-JPLbTDvapSzz=aBFwO3gjA@mail.gmail.com>
 <CANAFtV6zGpVnw4=Pp2CxuZg9gOjPcr1hfmO2mGgLY9tQPjvrTw@mail.gmail.com>
Message-ID: <CANAFtV5tQUtjoRk30E=xGPJrabnJx7sb-EmUi0R+73VvqeBJ6w@mail.gmail.com>

Currently, my firewall is disabled..


On Tue, Jan 14, 2014 at 9:41 AM, Roberto Pagliari <roberto at canary.is> wrote:

> I ran netstat and the port seems to be free because I don't see any other
> app using it.
>
> I'm running amqp_consumer with the IP of my machine and port 5671. Am I
> doing something wrong with it?
>
>
> On Mon, Jan 13, 2014 at 10:20 PM, Michael Klishin <
> michael.s.klishin at gmail.com> wrote:
>
>>
>> 2014/1/14 Roberto Pagliari <roberto at canary.is>
>>
>>> Any idea why this is happening? Should I change some configuration
>>> settings about the port (I'm using Ubuntu 12 right now)?
>>
>>
>> If you use TLS, the default port will be 5671.
>>
>>  Also, make sure RabbitMQ is running and there are no firewall rules that
>> may
>> block traffic.
>> --
>> MK
>>
>> http://github.com/michaelklishin
>> http://twitter.com/michaelklishin
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/6e9c01b4/attachment.html>

From roberto at canary.is  Tue Jan 14 15:12:36 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Tue, 14 Jan 2014 10:12:36 -0500
Subject: [rabbitmq-discuss] rabbitmq-c parameters
In-Reply-To: <CANAFtV5tQUtjoRk30E=xGPJrabnJx7sb-EmUi0R+73VvqeBJ6w@mail.gmail.com>
References: <CANAFtV6OsOhsxtM3xa9+QVeq42USvN+=bFswjt59r0B9TcUh0g@mail.gmail.com>
 <CAAt2poKKEr=FDGcH+TnHKf7yi+h2GctZ6uYGXNyoO_nqfhz2NQ@mail.gmail.com>
 <CANAFtV5dFqFbHqw=exy3ODiyj+r=S1iBaqpqWosQ_74Vfu3F6Q@mail.gmail.com>
 <CAE3HoVRTcH5tDNnPLvX7a1CVqL9-JPLbTDvapSzz=aBFwO3gjA@mail.gmail.com>
 <CANAFtV6zGpVnw4=Pp2CxuZg9gOjPcr1hfmO2mGgLY9tQPjvrTw@mail.gmail.com>
 <CANAFtV5tQUtjoRk30E=xGPJrabnJx7sb-EmUi0R+73VvqeBJ6w@mail.gmail.com>
Message-ID: <CANAFtV42JktayUQdZ36tj-iVMk3=E+jeFiLV5ZPm2=2gkJnUWA@mail.gmail.com>

For some reason, I no longer get the message if I set the VM to NAT mode,
as opposed to bridge-adapter mode.

Right now, though, I'm running producer and consumer with local IP and port
5671. I'm not seeing any output, that is, they are both running forever. In
particular, the producer never stops and does not generate any output.

So I'm not sure what the issue could be.





On Tue, Jan 14, 2014 at 9:47 AM, Roberto Pagliari <roberto at canary.is> wrote:

> Currently, my firewall is disabled..
>
>
> On Tue, Jan 14, 2014 at 9:41 AM, Roberto Pagliari <roberto at canary.is>wrote:
>
>> I ran netstat and the port seems to be free because I don't see any other
>> app using it.
>>
>> I'm running amqp_consumer with the IP of my machine and port 5671. Am I
>> doing something wrong with it?
>>
>>
>> On Mon, Jan 13, 2014 at 10:20 PM, Michael Klishin <
>> michael.s.klishin at gmail.com> wrote:
>>
>>>
>>> 2014/1/14 Roberto Pagliari <roberto at canary.is>
>>>
>>>> Any idea why this is happening? Should I change some configuration
>>>> settings about the port (I'm using Ubuntu 12 right now)?
>>>
>>>
>>> If you use TLS, the default port will be 5671.
>>>
>>>  Also, make sure RabbitMQ is running and there are no firewall rules
>>> that may
>>> block traffic.
>>> --
>>> MK
>>>
>>> http://github.com/michaelklishin
>>> http://twitter.com/michaelklishin
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/1316b35b/attachment.html>

From kopias.peter at gmail.com  Tue Jan 14 15:15:42 2014
From: kopias.peter at gmail.com (Peter Kopias)
Date: Tue, 14 Jan 2014 16:15:42 +0100
Subject: [rabbitmq-discuss] Rabbitmq 3.2.2 Keeps crashing in different ways
	:(
Message-ID: <CALPks8xwm9_9jOx5iL+o2bkQYwGm+D77otfGDNTXBj6CKx4FeQ@mail.gmail.com>

Cheers!

 I'm in the process of building a rabbitmq cluster, and before going to
production I'd like to produce some benchmarks, and run stresstests.

 Unfortunately rabitmq 3.1.3 (stable ubuntu 13.10), and 3.2.2 (stable
ubuntu 13.10 + rabbitmq.com repository) crashes miserably every time.


 I've got 3 nodes, called node1-2-3, but don't get confused, node1 is for
stresstesting only, and node2+node3 are in a rabbitmq cluster.

 All nodes have 16G of ram and about 100G of disk space. ERLANG16B1. Hipe
is installed, but not enabled in the configuration as it's marked as
experimental, and I'd like to get stability first, performance is
secondary, although that would be nice too. :)

 For benchmarking I'd do a lot of test, most of them do not fail, so we
will skip those for now. :)

 I run perftest to "attack" the cluster like this:

 consumer: /perftest/rabbitmq-java-client-bin-3.2.2//runjava.sh
com.rabbitmq.examples.PerfTest -h 'amqp://benchmark:xxx at node3/benchmark'
--consumers 5 --producers 0 -u benchmarkq -p --cmessages 10000
--multiAckEvery 100 2>&1


publisher: perftest/rabbitmq-java-client-bin-3.2.2//runjava.sh
com.rabbitmq.examples.PerfTest -h 'amqp://benchmark:xxx at node2/benchmark'
--consumers 0 --producers 200 --routingKey 'a.FOOBAR.c' --exchange
'benchmark.topic' -p -u benchmarkq --size 5242880 --pmessages 50   2>&1

 So from node1 I publish 10000 messages (5mbytes each) to a queue on node2,
and simultaneously I consume 10000 messages through node3. (The client is
on node1, which is still NOT PART of the rabbitmq cluster, it just has a
name like node1)

 For the tests I use a HA policy to duplicate the messages on both nodes,
but it should not make a big difference in network transfer, as the
consumer connects to node3, so everything (50Gbyte of data) must go around,
but it surely makes the things slower as node3 has to write everything to
disk.

 The nodes have both management plugin enabled, but have no special
configuration, so no shovel no federation, they are disk nodes, high memory
watermark set to 0.4.

-------------------------
 Crash type 1.

 Previously I've reported this bug on irc to bob235, who got the logs for
that crash and responded as it's a real bug in the software, and asked me
to write down the specifics, so here we are.

 He acknowledged this as a real bug
 ("{gm,find_prefix_common_suffix,2,[]}" in the stacktrace)

 (trace can be found at:
http://corpweb.dunakanyar.net/petrosdump/rabbitcrashlogs.tgz )

 These logs shows the death of a node, and the sasl log has the details...
The "attack" was like the above, 200 producers.

 One thing to note is that the network links were unbalanced:
 - node1->node2  1000mbit
 - node2->node3 100mbit
 - node3->node1 100mbit

 But this is not a reason for rabbitmq to stop working. :)

-------------------------
 Crash type 2.

 Situation: as the consumers have a slower network link, disk runs out on
node2, and while I had the default setting of (I think 50mbytes), rabbitmq
run out of disk space, and CRASHED!.

 I don't think high availability has a part of "if (last_err==E_NOSPC)
die();" or something, so rabbitmq should work like it's documented:
http://www.rabbitmq.com/memory.html

 Flow control should kick in whenever a disk capacity problem is detected,
and publishers should stop for a while, and consumers will help the server
to breath...

 2.1: If the server does not work like it's documented, then it's a bug.
 2.2: If the server's default free space limit (50mybte) does not make
running a stable service, then it's not a good default setting
 2.3 If I have 50gbyte of total data (10000 pcs of 5mbyte messages) in a
single queue (and It's even consumed while published, so there's never a
moment where every message is on the server), I don't believe 90gbyte of
disk space should be allocated, and the server should crash. This is not a
documented feature I think, so maybe the documentation needs to get
extended.
 2.4 Could we get a documentation in a backward accessible way, so for
example rabbitmq.com/doc/3.1.8/flowcontrol.html ?   This would make things
easier when someone does not use the latest.
 2.5 (as a side note to default settings: guest:guest as admin, default
open to everyone may not be the best setting too, as users tend to leave
this enabled, then fail a few months later)  :) )

 So the flow control does not work well for out of disk space situations,
even if the amount of data never reaches the disk space available, the
server can crash, and this is not nice, the server is not failsafe.

--------------------
Crash type 3.

 Situation: Out of memory.

 I've got 16Gbytes of ram in each node. The watermark is set to 7.8Gbyte,
so we should never have memory problems.

 If I start the perftest with 10 publishers (1000messages x 5mbytes), and 5
consumers, the rabbitmq server keeps allocating ram.

 3.1 Management plugin tells me that it's using for example 9 gigabytes
(HOW!?), but in real the os shows me, that it's over 12gbytes.

 As the perftest is on the way, the server keeps allocating more and more
memory. We're swapping now, as rabbitmq is using over 20gigabytes of
memory. (Still has the watermark at 7.8!)

 And at this moment the lighning strikes:

cat /var/log/rabbitmq/startup_err

"Crash dump was written to: erl_crash.dump
eheap_alloc: Cannot allocate 8162366936 bytes of memory (of type
"old_heap").
Aborted (core dumped)"

 WTF (What a terrible failure - after Android SDK :D)

 3.2 So the server configured to use 7.8gbytes memory max tried to allocate
8 gigabytes over the already allocated 20gigabytes. This is surely a bug.

 3.3 flow control kicked in, as the logs show, but memory usage did not
lower... and running out of memory is not something that is out of control
and a failsafe server "could not handle" like a kill -9. It is a bug to let
it go over 3 times the allowed memory limit.
 3.4 and it's an another bug not to handle the E_NOMEM situation.
 3.5 writing a 19gigabyte erl_crash.dump takes a lot of time :), and it's
not even a binary memorydump with all the data, it's just the stacktrace :D

 The full logs are here:

http://corpweb.dunakanyar.net/petrosdump/rabbitmqoutofmemory20140113.tar.bz2(1.3gigabytes,
contains the full 19gbyte stacktrace too, watch out when
uncompressing)

 I'll remove this file at 2014-02-01.

(I know the db contains the users, passes, but they are worthless as it's
just a drop-rebuild machine, even the cookie means nothing)


-------
Crash type 4.
 This happened a few times too, even after fixing the 100m network
bottleneck between node3 and others.

 Sometimes the server goes down with the message

"Absurdly large distribution output data buffer (2427628186 bytes) passed.
Aborted (core dumped)"

 I can't find an erl_crash.dump in this case.

 But I have a log for this too:
http://corpweb.dunakanyar.net/petrosdump/cluster_node2_20140109_163509.tar.bz2

 The test was something similar, probably 200 publishers * 50 messages each
5mbytes.

 So total data amount is always 50gigabytes, the total message count is
10.000, I just play with the producer count sometimes.


---

 Questions:

 - What am I doing wrong? Shouldn't be this "10000 messages from publishers
to consumers" a simple usecase? Why does the message size make difference?
(This is just the size of my local mailbox, and thunderbird does not crash.
:) )
 - How could I help to determine and remove the factors that keep rabbitmq
crashing?
 - What can I do to deliver 50 pcs of message from each of 200 workers?
 - Which is the "pivotal preferred stable version"? And which is the
"pivotal preferred stable linux distribution"?
 - Does rabbitmq have a ticket system somewhere?
 - Where to report bugs to?


  I can reproduce some of these, but it looks random, which problem kills
the server faster. :)

  Of course I've raised the disk free limit, so I don't hit that problem
today.

  As these are testing machines currently it is possible to give a
developer access to them if it helps.

 Please help me get a failsafe rabbitmqnode to build a failsafe rabbitmq
cluster from. :)

 Any ideas?

 Thank you!

 Peter Kopias

ps.: I started with 3.1.3, but I figured that reporing crashes in a year
old release does not interest the devs, so I switched to 3.2.2, as it shows
a lot of crashes fixed in the changelog. All the above happened to 3.2.2
serverd by rabbitmq.com ...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/79420a52/attachment.html>

From roberto at canary.is  Tue Jan 14 17:08:03 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Tue, 14 Jan 2014 12:08:03 -0500
Subject: [rabbitmq-discuss] rabbitmq-c parameters
In-Reply-To: <CANAFtV42JktayUQdZ36tj-iVMk3=E+jeFiLV5ZPm2=2gkJnUWA@mail.gmail.com>
References: <CANAFtV6OsOhsxtM3xa9+QVeq42USvN+=bFswjt59r0B9TcUh0g@mail.gmail.com>
 <CAAt2poKKEr=FDGcH+TnHKf7yi+h2GctZ6uYGXNyoO_nqfhz2NQ@mail.gmail.com>
 <CANAFtV5dFqFbHqw=exy3ODiyj+r=S1iBaqpqWosQ_74Vfu3F6Q@mail.gmail.com>
 <CAE3HoVRTcH5tDNnPLvX7a1CVqL9-JPLbTDvapSzz=aBFwO3gjA@mail.gmail.com>
 <CANAFtV6zGpVnw4=Pp2CxuZg9gOjPcr1hfmO2mGgLY9tQPjvrTw@mail.gmail.com>
 <CANAFtV5tQUtjoRk30E=xGPJrabnJx7sb-EmUi0R+73VvqeBJ6w@mail.gmail.com>
 <CANAFtV42JktayUQdZ36tj-iVMk3=E+jeFiLV5ZPm2=2gkJnUWA@mail.gmail.com>
Message-ID: <CANAFtV5v4_dJ-+EQyjFgcf6Z=cQD2HDbNG1dWP0xw8m0=Hu4mw@mail.gmail.com>

Never mind. it seems to work.




On Tue, Jan 14, 2014 at 10:12 AM, Roberto Pagliari <roberto at canary.is>wrote:

> For some reason, I no longer get the message if I set the VM to NAT mode,
> as opposed to bridge-adapter mode.
>
> Right now, though, I'm running producer and consumer with local IP and
> port 5671. I'm not seeing any output, that is, they are both running
> forever. In particular, the producer never stops and does not generate any
> output.
>
> So I'm not sure what the issue could be.
>
>
>
>
>
> On Tue, Jan 14, 2014 at 9:47 AM, Roberto Pagliari <roberto at canary.is>wrote:
>
>> Currently, my firewall is disabled..
>>
>>
>> On Tue, Jan 14, 2014 at 9:41 AM, Roberto Pagliari <roberto at canary.is>wrote:
>>
>>> I ran netstat and the port seems to be free because I don't see any
>>> other app using it.
>>>
>>> I'm running amqp_consumer with the IP of my machine and port 5671. Am I
>>> doing something wrong with it?
>>>
>>>
>>> On Mon, Jan 13, 2014 at 10:20 PM, Michael Klishin <
>>> michael.s.klishin at gmail.com> wrote:
>>>
>>>>
>>>> 2014/1/14 Roberto Pagliari <roberto at canary.is>
>>>>
>>>>> Any idea why this is happening? Should I change some configuration
>>>>> settings about the port (I'm using Ubuntu 12 right now)?
>>>>
>>>>
>>>> If you use TLS, the default port will be 5671.
>>>>
>>>>  Also, make sure RabbitMQ is running and there are no firewall rules
>>>> that may
>>>> block traffic.
>>>> --
>>>> MK
>>>>
>>>> http://github.com/michaelklishin
>>>> http://twitter.com/michaelklishin
>>>>
>>>> _______________________________________________
>>>> rabbitmq-discuss mailing list
>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>
>>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/87af0378/attachment.html>

From michael.laing at nytimes.com  Tue Jan 14 17:14:29 2014
From: michael.laing at nytimes.com (Laing, Michael)
Date: Tue, 14 Jan 2014 12:14:29 -0500
Subject: [rabbitmq-discuss] Latest revision of NYTimes site is supported
 by RabbitMQ - launched 8 January 2014
In-Reply-To: <52CE9D74.5050105@lshift.net>
References: <CAKgmDnFEDMcC7_5qGAv6Av3BQ9uQgo8zev1wg-UZioO5THi7mA@mail.gmail.com>
 <CAMcAHLV2iF7pr+MAOJUkso8=XAK4gkyUzUmPXgV2WAT07MPPbQ@mail.gmail.com>
 <CA+ttMd_gDV-n6se3NWFgP2q3iZBd5HKf_uNgxx3iceEn4bbASw@mail.gmail.com>
 <52CE9D74.5050105@lshift.net>
Message-ID: <CAKgmDnFXDz0FZR3hcKU0UJobCPU-kNMJY0FSNoDrcTb5ZN273w@mail.gmail.com>

We're busily improving our monitoring and resilience at the moment - there
is nothing like a real load to shake things out!

I will notify this list when we have a post somewhere or a presentation.

I'll be talking at the FOSDEM conference in Brussels 1-2 Feb in the NoSQL
track - and there will be other conferences this year as well.

Meanwhile, if there are particular pieces people are most interested, let
me know via the list and I will prioritize them in our posts and
presentations.

Michael


On Thu, Jan 9, 2014 at 8:00 AM, Ceri Storey <ceri at lshift.net> wrote:

>  (08/01/14 19:50), Paul Bell wrote:
>
>  Michael,
>
>  That's very exciting news.
>
>  Have you published any documents on this architecture, i.e., stuff you
> can share publicly?
>
>
> I'll second this. I'm very curious as to what kind of toplogy they're
> using, and how they've designed to make it resilient across zones .
>
>
>  I'd be most interested in seeing them.
>
>  Cordially,
>
>  Paul
>
>
> On Wed, Jan 8, 2014 at 2:47 PM, Alvaro Videla <videlalvaro at gmail.com>wrote:
>
>> Michael,
>>
>> Wow. This is great news ??no pun intended ;-)
>>
>> It's really cool to hear this.
>>
>> Regards,
>>
>> Alvaro
>>
>> On Wed, Jan 8, 2014 at 8:26 PM, Laing, Michael
>> <michael.laing at nytimes.com> wrote:
>> > Just a quick note and thank you to the RabbitMQ team for a great
>> product.
>> >
>> > Our premier online offering www.nytimes.com has a new look and new
>> > underpinnings, now including a messaging architecture implemented using
>> > RabbitMQ.
>> >
>> > This architecture - nyt?a?rik - has dozens of RabbitMQ instances spread
>> > across 6 AWS zones in Oregon and Dublin. The instances are organized
>> into
>> > "wholesale" and "retail" layers. Connection to clients is via
>> > websockets/sockjs.
>> >
>> > Upon launch today, the system autoscaled to ~500,000 users. Connection
>> times
>> > remained flat at ~200ms.
>> >
>> > nyt?a?rik provides subscription services for breaking news, video feeds,
>> > etc. and will add more event based services. It also supports individual
>> > messaging related to subscription status for registered users.
>> >
>> > This system would not have been possible without RabbitMQ. It was the
>> one
>> > component, used everywhere, that never faltered or failed.
>> >
>> > We look forward to contributing our own code to the open source
>> community
>> > but it will be difficult to match the quality of this outstanding
>> product
>> > and its supporting team.
>> >
>> > Michael Laing
>> > Systems Architect
>> > NYTimes
>> >
>>  > _______________________________________________
>> > rabbitmq-discuss mailing list
>> > rabbitmq-discuss at lists.rabbitmq.com
>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>> >
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing listrabbitmq-discuss at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/ec58c4b4/attachment.html>

From buzz42j at gmail.com  Tue Jan 14 17:17:02 2014
From: buzz42j at gmail.com (Alex L)
Date: Tue, 14 Jan 2014 09:17:02 -0800
Subject: [rabbitmq-discuss] Consumer Priorities in Python
Message-ID: <CAERdRxtrMMdv9BVTq+E5eJk3Jm8m66_T-SWPuuvK_AsEMCrq1Q@mail.gmail.com>

Hello,

I'm trying to implement Consumer Priorities into a test program in Python,
similar to what is going on in here:
http://www.rabbitmq.com/blog/2013/12/16/using-consumer-priorities-with-rabbitmq/#more-489(which
the example is done in Java).

>From looking at the code that's been modified, it looks like that I need to
change the 'arguments' variable in basicConsume to be some 'x-priority'
variable. Can something similar be done in Python (perhaps using pika 0.9.8
that was used in the tutorials?), and if so how?

>From searching on the internet, I've seen that others have tried to use
multiple queues for different priorities, but that seems more like just
using a direct fanout exchange compared to this method.

Thanks
Alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/9f8ef1b4/attachment.html>

From matthew.holt at gmail.com  Tue Jan 14 17:23:56 2014
From: matthew.holt at gmail.com (Matthew Holt)
Date: Tue, 14 Jan 2014 09:23:56 -0800 (PST)
Subject: [rabbitmq-discuss] Using x-max-length custom header with STOMP
	adapter
Message-ID: <31688ffb-61bc-4274-9c80-cdc06dabe2aa@googlegroups.com>

I'm attempting to connect to subscribe to a queue using this STOMP library 
for Go: https://github.com/jjeffery/stomp -- but the codes below are 
through a raw telnet session, for debugging purposes.

I have a queue on my localhost (RabbitMQ 3.2.1) called "test" with a max 
length of 50. The CONNECT frames work fine:

CONNECT
host:/
accept-version:1.0,1.1,1.2
heart-beat:60000,60000
login:guest
passcode:guest
x-max-length:50

^@
CONNECTED
session:session-KH4hELNLLx-xiyFZQhyUcQ
heart-beat:60000,60000
server:RabbitMQ/3.2.1
version:1.0

But when I attempt to SUBSCRIBE to "test", I get this error (I've included 
my TX frame and the response RX frame):

SUBSCRIBE
id:1
ack:client
destination:/queue/test

^@

ERROR
message:precondition_failed
content-type:text/plain
version:1.0,1.1,1.2
content-length:143

PRECONDITION_FAILED - inequivalent arg 'x-max-length'for queue 'test' in 
vhost '/': received none but current is the value '50' of type 'long'
Connection closed by foreign host.

But notice that I *have* specified the x-max-length header in the CONNECT 
frame. I've also tried putting the header in SUBSCRIBE just to see...

Is this a bug in the RabbitMQ STOMP adapter or am I doing something wrong?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/7dc01fc4/attachment.html>

From roberto at canary.is  Tue Jan 14 17:26:24 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Tue, 14 Jan 2014 12:26:24 -0500
Subject: [rabbitmq-discuss] rabbitmq server in c
Message-ID: <CANAFtV61Xtyw9_OGnttNM98kNAMvnoV+imOT1HVB8PYTe9Y+3Q@mail.gmail.com>

is there a rabbitmq server c source code? I'm using rabbitmq-c but I need
the server code and cross compile for a different platform.


Thanks,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/a00c5e84/attachment.html>

From michael.s.klishin at gmail.com  Tue Jan 14 17:29:02 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 14 Jan 2014 21:29:02 +0400
Subject: [rabbitmq-discuss] Consumer Priorities in Python
In-Reply-To: <CAERdRxtrMMdv9BVTq+E5eJk3Jm8m66_T-SWPuuvK_AsEMCrq1Q@mail.gmail.com>
References: <CAERdRxtrMMdv9BVTq+E5eJk3Jm8m66_T-SWPuuvK_AsEMCrq1Q@mail.gmail.com>
Message-ID: <CAE3HoVQbfGqG_T1NhPNpEr6qzF2auKpaXpeXrPw21hz-nabkxg@mail.gmail.com>

2014/1/14 Alex L <buzz42j at gmail.com>

> From looking at the code that's been modified, it looks like that I need
> to change the 'arguments' variable in basicConsume to be some 'x-priority'
> variable. Can something similar be done in Python (perhaps using pika 0.9.8
> that was used in the tutorials?), and if so how?
>

The arguments parameter is a dictionary. It needs to have an entry,
"x-priority": [priority].


>
> From searching on the internet, I've seen that others have tried to use
> multiple queues for different priorities, but that seems more like just
> using a direct fanout exchange compared to this method.
>

Consumer priorities have effect between consumers on a shared queue.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/7bd67daa/attachment.html>

From mklishin at gopivotal.com  Tue Jan 14 17:32:14 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 14 Jan 2014 21:32:14 +0400
Subject: [rabbitmq-discuss] rabbitmq server in c
In-Reply-To: <CANAFtV61Xtyw9_OGnttNM98kNAMvnoV+imOT1HVB8PYTe9Y+3Q@mail.gmail.com>
References: <CANAFtV61Xtyw9_OGnttNM98kNAMvnoV+imOT1HVB8PYTe9Y+3Q@mail.gmail.com>
Message-ID: <166D1D1B-DCD6-4BF6-841A-C7080FDD033C@rabbitmq.com>

On 14 Jan 2014, at 21:26, Roberto Pagliari <roberto at canary.is> wrote:

> is there a rabbitmq server c source code? I'm using rabbitmq-c but I need the server code and cross compile for a different platform.

RabbitMQ server is open source but it is not in C:

http://hg.rabbitmq.com/rabbitmq-server/

rabbitmq-c framing code is generated using codegen which is a submodule in the
same repo: is that what you are looking for?

https://github.com/alanxz/rabbitmq-c
http://hg.rabbitmq.com/rabbitmq-codegen

MK

Software Engineer, Pivotal/RabbitMQ



From steve at rabbitmq.com  Tue Jan 14 17:34:25 2014
From: steve at rabbitmq.com (Steve Powell)
Date: Tue, 14 Jan 2014 17:34:25 +0000
Subject: [rabbitmq-discuss] Federation and Stomp
In-Reply-To: <1389676138553-32536.post@n5.nabble.com>
References: <7406945.782.1329319767011.JavaMail.geo-discussion-forums@vbbdv1>
 <C0126B9D-8270-4D00-B773-010B2D3F333D@rabbitmq.com>
 <1389676138553-32536.post@n5.nabble.com>
Message-ID: <B0BAF117-B92C-4B8F-99FA-F62582AAB0AC@rabbitmq.com>

Joshua,

Emile has replied already, but I wanted to point out that RabbitMQ STOMP adapter
doesn't support "client-id"s on CONNECT (they are ignored), instead just the
destination (/topic/<name>) and the id are used to identify the subscription.

You may have read about client-ids in ActiveMQ documentation.

The SUBSCRIBE you showed us would create an exclusive auto-delete queue (not a
shared one) and this would therefore get deleted when the subscriber disconnected.

Try this:

SUBSCRIBE
destination:/topic/high.*
ack:client-individual
id:subscribe-03
persistent:true

^@

and then use exactly the same subscription after reconnect to receive messages.

You should UNSUBSCRIBE (see the doc) when this is no longer needed, or the
queue may stay around for a long time.

At present you cannot create a durable subscription to an /exchange/<x-name>/<r-key>
destination.

I hope this helps you: please let us know how you get on.

Steve Powell  [M: +44-7815-838-558; H:+44-1962-775-598; W:+44-2380-111-528]
    What I tell you three times is true.
Lewis Carroll; Hunting of the Snark: Fit the First

On 14 Jan 2014, at 05:08, joshua__lim <joshua__lim at hotmail.com> wrote:

> I read somewhere that says to create durable subscription for exchange, I'd
> need to set the client-id header on the CONNECT and the id header to a
> unique string and set persistent: true.  This doesn't appear to work at this
> moment as subscribed-clients will lose messages sent to the exchange if they
> are not connected.


From simon at rabbitmq.com  Tue Jan 14 17:36:11 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 14 Jan 2014 17:36:11 +0000
Subject: [rabbitmq-discuss] Using x-max-length custom header with STOMP
 adapter
In-Reply-To: <31688ffb-61bc-4274-9c80-cdc06dabe2aa@googlegroups.com>
References: <31688ffb-61bc-4274-9c80-cdc06dabe2aa@googlegroups.com>
Message-ID: <52D5758B.5050709@rabbitmq.com>

On 14/01/14 17:23, Matthew Holt wrote:
> PRECONDITION_FAILED - inequivalent arg 'x-max-length'for queue 'test' in
> vhost '/': received none but current is the value '50' of type 'long'
> Connection closed by foreign host.

I don't think you can specify queue arguments in the STOMP plugin, sorry.

You might find that setting the queue's maximum length by policy lets 
you do what you want to do:

# rabbitmqctl set_policy --apply-to queues test-max-length '^test$' 
'{"max-length": 50}'

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From jkuch at gopivotal.com  Tue Jan 14 17:41:03 2014
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Tue, 14 Jan 2014 09:41:03 -0800
Subject: [rabbitmq-discuss] RPM install not detectingErlang
In-Reply-To: <ffe6d66e-8510-4120-8e67-dc910fed0f01@googlegroups.com>
References: <ffe6d66e-8510-4120-8e67-dc910fed0f01@googlegroups.com>
Message-ID: <CANOx8NmteuqkDg1WsEdgrc9uYcj=_6ni5pXVBGDqcHTw+KrjYQ@mail.gmail.com>

If you built Erlang from source, by yourself, how do you expect the RPM
package manager to know it's there?

Either force the Rabbit install by telling RPM to ignore dependencies (and
this can be risky, since you can miss things and create a partially broken
install), or install an Erlang via RPM.




On Mon, Jan 13, 2014 at 3:39 PM, rugman66 <jbeaulau at gmail.com> wrote:

> Hello,
>
> I'm trying to install as root rabbitmq-server-3.2.2-1 on a RHEL 5.5 host
> having successfully installed Erlang R16B03 from source, however
> when I try to install the RabbitMQ RPM I receive a failed dependency error.
>
> error: Failed dependencies: erlang >= R13B-03 is needed by
> rabbitmq-server-3.2.2-1.noarch"
>
> Erlang is in root's path.
>
> [root at lnx opt]# erl
> Erlang R16B03 (erts-5.10.4) [source] [64-bit] [smp:2:2] [async-threads:10]
> [hipe] [kernel-poll:false]
>
> Eshell V5.10.4  (abort with ^G)
> 1>
>
> Thoughts on why the RabbitMQ RPM is not finding Erlang?
>
> Thanks
> -John
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/8c49fb2b/attachment.html>

From buzz42j at gmail.com  Tue Jan 14 17:41:09 2014
From: buzz42j at gmail.com (Alex L)
Date: Tue, 14 Jan 2014 09:41:09 -0800
Subject: [rabbitmq-discuss] Consumer Priorities in Python
In-Reply-To: <CAE3HoVQbfGqG_T1NhPNpEr6qzF2auKpaXpeXrPw21hz-nabkxg@mail.gmail.com>
References: <CAERdRxtrMMdv9BVTq+E5eJk3Jm8m66_T-SWPuuvK_AsEMCrq1Q@mail.gmail.com>
 <CAE3HoVQbfGqG_T1NhPNpEr6qzF2auKpaXpeXrPw21hz-nabkxg@mail.gmail.com>
Message-ID: <CAERdRxv7+KzARhKqdhefpZbL-BB8axLjk-NUQ7kX243D-gbUMg@mail.gmail.com>

I've tried using a dictionary as the arguments parameter, but it seems to
get a TypeError. So I looked up the doc string for that basic_consume, and
it actually doesn't have an 'arguments' parameter at all, and I'm using the
more recent version of pika (0.9.13).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/d1675398/attachment.html>

From mklishin at gopivotal.com  Tue Jan 14 17:44:40 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 14 Jan 2014 21:44:40 +0400
Subject: [rabbitmq-discuss] Consumer Priorities in Python
In-Reply-To: <CAERdRxv7+KzARhKqdhefpZbL-BB8axLjk-NUQ7kX243D-gbUMg@mail.gmail.com>
References: <CAERdRxtrMMdv9BVTq+E5eJk3Jm8m66_T-SWPuuvK_AsEMCrq1Q@mail.gmail.com>
 <CAE3HoVQbfGqG_T1NhPNpEr6qzF2auKpaXpeXrPw21hz-nabkxg@mail.gmail.com>
 <CAERdRxv7+KzARhKqdhefpZbL-BB8axLjk-NUQ7kX243D-gbUMg@mail.gmail.com>
Message-ID: <4EF0E0CA-9A7E-44BE-AB9C-8D12C0368BF2@rabbitmq.com>

On 14 Jan 2014, at 21:41, Alex L <buzz42j at gmail.com> wrote:

> I've tried using a dictionary as the arguments parameter, but it seems to get a TypeError. So I looked up the doc string for that basic_consume, and it actually doesn't have an 'arguments' parameter at all, and I'm using the more recent version of pika (0.9.13).

This is a limitation of Pika which is fixed in master 1 month ago:

https://github.com/pika/pika/blob/master/pika/channel.py#L184
https://github.com/pika/pika/commit/a08dc0d72e8ebcf99f7a647aff574c62bc2402ea

Sounds like Pika needs a new release.

MK

Software Engineer, Pivotal/RabbitMQ



From michael.s.klishin at gmail.com  Tue Jan 14 18:25:19 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 14 Jan 2014 22:25:19 +0400
Subject: [rabbitmq-discuss] ANN Hutch 0.7.0 is released
Message-ID: <CAE3HoVRbJ=QBMFH4P1dryBCxt6ojyT89a7LkS9zh31mW1V38_g@mail.gmail.com>

Hutch [1][2] is a Ruby library for easy inter-service communication over
RabbitMQ.

On behalf of the Hutch maintainers team, I'm happy to announce Hutch 0.7.0.

0.7.0 introduces several minor features contributed by the community.

Release notes:
http://blog.rubyrabbitmq.info/blog/2014/01/14/hutch-0-dot-7-0-is-released/

1. https://github.com/gocardless/hutch
2.
https://gocardless.com/blog/hutch-inter-service-communication-with-rabbitmq/
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/c7dce296/attachment.html>

From asrobson at gmail.com  Tue Jan 14 19:20:57 2014
From: asrobson at gmail.com (Alex Robson)
Date: Tue, 14 Jan 2014 13:20:57 -0600
Subject: [rabbitmq-discuss] Dead-Lettering Queue Contents On Queue Expiration
Message-ID: <CABWF3X0-f8CMJ3PCVjrhcpBaz9bjwC8taO-JszM6R-8UyX9SxQ@mail.gmail.com>

Hello all,

I would like to see messages in an expired queue published to the
dead-letter exchange (if one has been provided) instead of having them lost.

Our use case is somewhat complex to explain, but ultimately, setting TTL on
a message is very different from TTL on a queue in that queue expiry is
based on the presence of a consumer. The utility of having both the queue
disposed and messages re-published seems pretty high to me. Let me try an
explain our use case.

A common pattern I've seen is to have multiple instances of the same
service consuming from the same queue. This makes the system resilient to
individual service instance failures because remaining instances (or new
ones) will continue consuming messages from the queue.

A problem in this pattern is when common state is being mutated as a result
of the messages; you end up with race conditions/last-write-wins style
behaviors that can become problematic.

The way we solve for this (within the realm of Rabbit) is to have a
consistent-hash exchange that hashes the correlation-id which is set to our
aggregate root (parent record id). This allows us to bind a
queue-per-service-instance and get the isolation guarantees we like while
still allowing us to horizontally scale. The problem with this approach is
that in the event that a service loses its connection/falls over, messages
in the queue sit and can be 'orphaned'.

If we use a queue TTL policy for these kinds of queues, it will allow us to
prevent orphaned queues, but presently it does not appear that the messages
in the queue are published to the defined dead letter exchange. Since
messages with a TLL behave this way, it seems logical that messages within
a queue that expires could/should also take advantage of the same behavior.

I believe it would be a real win for users everywhere as it allows for a
really clean way to scale horizontally without increasing race-conditions,
requiring distributed locking patterns or introducing failure modes that
could result in message loss or dramatically increased latency in message
processing.

Interested in your thoughts on this. If folks like the idea but there's not
a great deal of bandwidth, I'd be happy to attempt an initial
implementation via PR.

Thanks so much for RabbitMQ, it's awesome.

Alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/9a9c030a/attachment.html>

From roberto at canary.is  Tue Jan 14 20:07:58 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Tue, 14 Jan 2014 15:07:58 -0500
Subject: [rabbitmq-discuss] [rabbitmq-c] linking libraries for cross
	compiling
Message-ID: <CANAFtV5oF=QsvRmbbdBwt+SSkqe8WteUQRXz6uy4sQFfBDhc+Q@mail.gmail.com>

I'm building rabbitmq-c for ARM. I exported the library by running :

    export LD_LIBRARY_PATH=path_to_library_folder

but I'm still getting this error. Somehow, cmake does not find it.

    $ cmake --build . --target install
    Linking C shared library librabbitmq.so
    /usr/lib/x86_64-linux-gnu/libssl.so: file not recognized: File format
not recognized
    collect2: ld returned 1 exit status
    make[2]: *** [librabbitmq/librabbitmq.so.1.1.1] Error 1
    make[1]: *** [librabbitmq/CMakeFiles/rabbitmq.dir/all] Error 2
    make: *** [all] Error 2

I tried to use LINK_LIBRARIES in the CMakeLists but didn't work...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/8ca136f1/attachment.html>

From alan.antonuk at gmail.com  Tue Jan 14 20:59:28 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 14 Jan 2014 12:59:28 -0800
Subject: [rabbitmq-discuss] [rabbitmq-c] linking libraries for cross
	compiling
In-Reply-To: <CANAFtV5oF=QsvRmbbdBwt+SSkqe8WteUQRXz6uy4sQFfBDhc+Q@mail.gmail.com>
References: <CANAFtV5oF=QsvRmbbdBwt+SSkqe8WteUQRXz6uy4sQFfBDhc+Q@mail.gmail.com>
Message-ID: <CAAt2poLNDPsBrubGL98QBQNiDbG3Urj_PmF_GY-6x4y7Q0-c+Q@mail.gmail.com>

Make sure you're trying to link against the ARM version of libssl.  You
might need to look at the OPENSSL_LIBRARIES (or something like that) CMake
variable and adjust it to point at the correct libssl.

-Alan


On Tue, Jan 14, 2014 at 12:07 PM, Roberto Pagliari <roberto at canary.is>wrote:

> I'm building rabbitmq-c for ARM. I exported the library by running :
>
>     export LD_LIBRARY_PATH=path_to_library_folder
>
> but I'm still getting this error. Somehow, cmake does not find it.
>
>     $ cmake --build . --target install
>     Linking C shared library librabbitmq.so
>     /usr/lib/x86_64-linux-gnu/libssl.so: file not recognized: File format
> not recognized
>     collect2: ld returned 1 exit status
>     make[2]: *** [librabbitmq/librabbitmq.so.1.1.1] Error 1
>     make[1]: *** [librabbitmq/CMakeFiles/rabbitmq.dir/all] Error 2
>     make: *** [all] Error 2
>
> I tried to use LINK_LIBRARIES in the CMakeLists but didn't work...
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/e053c4d9/attachment.html>

From roberto at canary.is  Tue Jan 14 21:17:06 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Tue, 14 Jan 2014 16:17:06 -0500
Subject: [rabbitmq-discuss] [rabbitmq-c] linking libraries for cross
	compiling
In-Reply-To: <CAAt2poLNDPsBrubGL98QBQNiDbG3Urj_PmF_GY-6x4y7Q0-c+Q@mail.gmail.com>
References: <CANAFtV5oF=QsvRmbbdBwt+SSkqe8WteUQRXz6uy4sQFfBDhc+Q@mail.gmail.com>
 <CAAt2poLNDPsBrubGL98QBQNiDbG3Urj_PmF_GY-6x4y7Q0-c+Q@mail.gmail.com>
Message-ID: <CANAFtV4Wo3t8FKGWXLpeucc_He6eZNOX11ExzKxC+dEwsQvYLQ@mail.gmail.com>

I tried to modify like this

cmake_push_check_state()
set(CMAKE_REQUIRED_LIBRARIES ${SOCKET_LIBRARIES})
if (WIN32)
  check_symbol_exists(htonll Winsock2.h HAVE_HTONLL)
else (WIN32)
  check_function_exists(htonll HAVE_HTONLL)
endif (WIN32)
cmake_pop_check_state()

check_library_exists(rt clock_gettime "time.h" CLOCK_GETTIME_NEEDS_LIBRT)
if (CLOCK_GETTIME_NEEDS_LIBRT)
  set(LIBRT rt)
endif()

SET(LINK_LIBRARIES path_to_ssl_folder/)



but it is still pointing to  x86 ssl lib...



On Tue, Jan 14, 2014 at 3:59 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:

> Make sure you're trying to link against the ARM version of libssl.  You
> might need to look at the OPENSSL_LIBRARIES (or something like that) CMake
> variable and adjust it to point at the correct libssl.
>
> -Alan
>
>
> On Tue, Jan 14, 2014 at 12:07 PM, Roberto Pagliari <roberto at canary.is>wrote:
>
>> I'm building rabbitmq-c for ARM. I exported the library by running :
>>
>>     export LD_LIBRARY_PATH=path_to_library_folder
>>
>> but I'm still getting this error. Somehow, cmake does not find it.
>>
>>     $ cmake --build . --target install
>>     Linking C shared library librabbitmq.so
>>     /usr/lib/x86_64-linux-gnu/libssl.so: file not recognized: File format
>> not recognized
>>     collect2: ld returned 1 exit status
>>     make[2]: *** [librabbitmq/librabbitmq.so.1.1.1] Error 1
>>     make[1]: *** [librabbitmq/CMakeFiles/rabbitmq.dir/all] Error 2
>>     make: *** [all] Error 2
>>
>> I tried to use LINK_LIBRARIES in the CMakeLists but didn't work...
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/09bace0f/attachment.html>

From blake-r at mail.ru  Tue Jan 14 19:25:18 2014
From: blake-r at mail.ru (=?UTF-8?B?0J7Qu9C10LMg0KDQvtGB0YE=?=)
Date: Tue, 14 Jan 2014 11:25:18 -0800 (PST)
Subject: [rabbitmq-discuss] badarg in dict,
	fetch problem on basic.consume_ok (or not)
Message-ID: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>

Hello.

Some strange error we have sometimes (1-2 days or 1-2 weeks - differently), 
see attachement.

After this error memory consumption begin grow until watermark reached - 
then rabbitmq start to pressure messages and our clients gave timeout.

At the same time web management begin hanging on (HTTP requests never ends 
without transmit any data).

rabbitmq 3.2.2 (and 3.1.5)
erlang R16B

Oleg.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/5d87a99f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rabbitmq.log
Type: application/octet-stream
Size: 5725 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/5d87a99f/attachment.obj>

From matthias at rabbitmq.com  Tue Jan 14 21:34:17 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 14 Jan 2014 21:34:17 +0000
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
Message-ID: <52D5AD59.5010103@rabbitmq.com>

On 14/01/14 19:25, ???? ???? wrote:
> Some strange error we have sometimes (1-2 days or 1-2 weeks -
> differently), see attachement.

What client(s) are you using?

The only code path I can see to this error entails pipelining of 
synchronous commands on a channel, which the AMQP spec forbids.

Specifically, the error could occur when sending a basic.consume 
followed by a basic.cancel without waiting for the basic.consume_ok first.

Which is pretty much impossible in most clients unless there are 
multiple application threads operating on the same channel, which is 
usually a bad idea.

Matthias.


From roberto at canary.is  Tue Jan 14 22:55:09 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Tue, 14 Jan 2014 17:55:09 -0500
Subject: [rabbitmq-discuss] rabbitmq-c ./configure
Message-ID: <CANAFtV6R1ha6urBShCX9H0DoPkz-2muZCNbKpxio-imT7mQTWw@mail.gmail.com>

I cannot find the ./configure file that can be used to build rabbimq-c.

https://github.com/alanxz/rabbitmq-c


is there a way I can get the file?

Thank you,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/89db70c4/attachment.html>

From jbeaulau at cisco.com  Wed Jan 15 00:11:57 2014
From: jbeaulau at cisco.com (John Beaulaurier -X (jbeaulau - ADVANCED NETWORK INFORMATION INC at
 Cisco))
Date: Wed, 15 Jan 2014 00:11:57 +0000
Subject: [rabbitmq-discuss] RabbitMQ RPM not finding Erlang on system
Message-ID: <565B75ACD9C9964EA087653C7D7A65B70B16C3EC@xmb-aln-x14.cisco.com>

Hello,

I'm trying to install RabbitMQ Server 3.2.2-1 with Erlang R16B03 installed, but the rabbitmq-server-3.2.2-1.noarch.rpm is not finding or recognizing Erlang.

[root at lnx-test opt]# rpm -Uvh rabbitmq-server-3.2.2-1.noarch.rpm
error: Failed dependencies:
        erlang >= R13B-03 is needed by rabbitmq-server-3.2.2-1.noarch

Erlang is in the path.

[root at lnx-test /]# erl
Erlang R16B03 (erts-5.10.4) [source] [64-bit] [smp:2:2] [async-threads:10] [hipe] [kernel-poll:false]

Eshell V5.10.4  (abort with ^G)
1>

Assistance would be great.

thank you
-John
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/a9f4c3bb/attachment.html>

From buzz42j at gmail.com  Wed Jan 15 00:56:15 2014
From: buzz42j at gmail.com (Alex L)
Date: Tue, 14 Jan 2014 16:56:15 -0800
Subject: [rabbitmq-discuss] Mirrored Queues in master and slaves
Message-ID: <CAERdRxvsoDpSkAV9e-H2AwKWpLiPsQ7LnhHPcuUHHoVeVhy9Jg@mail.gmail.com>

Hello,

So far I get how I can enable a queue (by changing it's policy) to be
mirrored to the other nodes, and that queue would be the master, and all
the mirrored nodes are the slaves (referring to
http://www.rabbitmq.com/ha.html).

But when I publish a message, how would I know if I'm using the master's
queue, or specifically one of the slave's queues? Is there a way to find
which queue I'm using?

And would it be possible to send a message directly to a slave without
having it go through it's master?

Thanks
Alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/c70a44a3/attachment.html>

From roberto at canary.is  Wed Jan 15 03:04:30 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Tue, 14 Jan 2014 22:04:30 -0500
Subject: [rabbitmq-discuss] rabbitmq-c ./configure
In-Reply-To: <CANAFtV6R1ha6urBShCX9H0DoPkz-2muZCNbKpxio-imT7mQTWw@mail.gmail.com>
References: <CANAFtV6R1ha6urBShCX9H0DoPkz-2muZCNbKpxio-imT7mQTWw@mail.gmail.com>
Message-ID: <CANAFtV5gVMFuEyUoit-akVGG8aqT7ObkDOp+MPPQxD26+GkbuQ@mail.gmail.com>

Hi Alex/All,
in addition to ./configure and Makefile for building with Autotools, did
you manage to fix the issues discussed over here?

https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ

I'm asking because ARM is my target architecture.

Thank you,



On Tue, Jan 14, 2014 at 5:55 PM, Roberto Pagliari <roberto at canary.is> wrote:

> I cannot find the ./configure file that can be used to build rabbimq-c.
>
> https://github.com/alanxz/rabbitmq-c
>
>
> is there a way I can get the file?
>
> Thank you,
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/aace86e8/attachment.html>

From alan.antonuk at gmail.com  Wed Jan 15 04:43:24 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 14 Jan 2014 20:43:24 -0800
Subject: [rabbitmq-discuss] rabbitmq-c ./configure
In-Reply-To: <CANAFtV5gVMFuEyUoit-akVGG8aqT7ObkDOp+MPPQxD26+GkbuQ@mail.gmail.com>
References: <CANAFtV6R1ha6urBShCX9H0DoPkz-2muZCNbKpxio-imT7mQTWw@mail.gmail.com>
 <CANAFtV5gVMFuEyUoit-akVGG8aqT7ObkDOp+MPPQxD26+GkbuQ@mail.gmail.com>
Message-ID: <CAAt2po+yP8cQJBxOgdCzoWc0F6vYP9_n1y2BRUQAJXzA03AuLQ@mail.gmail.com>

Yes, those changes were merged in over 2 years ago. The library is not
consistently tested on the ARM architecture so I cannot guarantee that it
still works, but I also have no reason to believe otherwise.

You need to run autoreconf -i before trying to run the configure script.

-Alan


On Tue, Jan 14, 2014 at 7:04 PM, Roberto Pagliari <roberto at canary.is> wrote:

> Hi Alex/All,
> in addition to ./configure and Makefile for building with Autotools, did
> you manage to fix the issues discussed over here?
>
> https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ
>
> I'm asking because ARM is my target architecture.
>
> Thank you,
>
>
>
> On Tue, Jan 14, 2014 at 5:55 PM, Roberto Pagliari <roberto at canary.is>wrote:
>
>> I cannot find the ./configure file that can be used to build rabbimq-c.
>>
>> https://github.com/alanxz/rabbitmq-c
>>
>>
>> is there a way I can get the file?
>>
>> Thank you,
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/8e3fdbc0/attachment.html>

From mcintoshj at gmail.com  Wed Jan 15 05:00:53 2014
From: mcintoshj at gmail.com (Jason McIntosh)
Date: Tue, 14 Jan 2014 23:00:53 -0600
Subject: [rabbitmq-discuss] RabbitMQ for distributed processing
Message-ID: <CAD6m6fEsbKEOyb943r8bO0ny=owwq=J6B7OdoUdKB6Yefs4bNg@mail.gmail.com>

http://jaihirsch.github.io/straw-in-a-haystack//mongodb/2014/01/06/mongodb-legacy-migration/

Just thought I'd share with the discussion list :)

Jason

-- 
Jason McIntosh
https://github.com/jasonmcintosh/
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/c73db698/attachment.html>

From simon at rabbitmq.com  Wed Jan 15 07:46:09 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 15 Jan 2014 07:46:09 +0000
Subject: [rabbitmq-discuss] RabbitMQ RPM not finding Erlang on system
In-Reply-To: <565B75ACD9C9964EA087653C7D7A65B70B16C3EC@xmb-aln-x14.cisco.com>
References: <565B75ACD9C9964EA087653C7D7A65B70B16C3EC@xmb-aln-x14.cisco.com>
Message-ID: <52D63CC1.5060105@rabbitmq.com>

Hi.

Did you see the responses to your question in the thread here?

http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2014-January/033014.html

Cheers, Simon

On 15/01/2014 00:11, John Beaulaurier -X (jbeaulau - ADVANCED NETWORK 
INFORMATION INC at Cisco) wrote:
> Hello,
>
> I?m trying to install RabbitMQ Server 3.2.2-1 with Erlang R16B03
> installed, but the rabbitmq-server-3.2.2-1.noarch.rpm is not finding or
> recognizing Erlang.
>
> [root at lnx-test opt]# rpm -Uvh rabbitmq-server-3.2.2-1.noarch.rpm
>
> error: Failed dependencies:
>
>          erlang >= R13B-03 is needed by rabbitmq-server-3.2.2-1.noarch
>
> Erlang is in the path.
>
> [root at lnx-test /]# erl
>
> Erlang R16B03 (erts-5.10.4) [source] [64-bit] [smp:2:2]
> [async-threads:10] [hipe] [kernel-poll:false]
>
> Eshell V5.10.4  (abort with ^G)
>
> 1>
>
> Assistance would be great.
>
> thank you
>
> -John
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


From simon at rabbitmq.com  Wed Jan 15 07:50:09 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 15 Jan 2014 07:50:09 +0000
Subject: [rabbitmq-discuss] Mirrored Queues in master and slaves
In-Reply-To: <CAERdRxvsoDpSkAV9e-H2AwKWpLiPsQ7LnhHPcuUHHoVeVhy9Jg@mail.gmail.com>
References: <CAERdRxvsoDpSkAV9e-H2AwKWpLiPsQ7LnhHPcuUHHoVeVhy9Jg@mail.gmail.com>
Message-ID: <52D63DB1.40502@rabbitmq.com>

On 15/01/2014 00:56, Alex L wrote:
> But when I publish a message, how would I know if I'm using the master's
> queue, or specifically one of the slave's queues?

On a conceptual level, the message will always be routed to the master. 
On a practical level it will also go to all of the slaves (in case the 
master fails before seeing it) but the master will be the one in charge 
of enqueuing it.

> Is there a way to find which queue I'm using?

It's best to view the queue as one distributed object, but if you need 
to find out the current master you can use rabbitmqctl or the management 
API.

> And would it be possible to send a message directly to a slave without
> having it go through it's master?

No.

Cheers, Simon


From blake-r at mail.ru  Tue Jan 14 21:42:32 2014
From: blake-r at mail.ru (=?UTF-8?B?0J7Qu9C10LMg0KDQvtGB0YE=?=)
Date: Tue, 14 Jan 2014 13:42:32 -0800 (PST)
Subject: [rabbitmq-discuss] badarg in dict,
	fetch problem on basic.consume_ok (or not)
In-Reply-To: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
Message-ID: <1213482e-2b86-42ee-b1bf-188be8a9d491@googlegroups.com>

I'm mistake - this error is a consequence of some troubles with rabbitmq - 
but there are no other records in log than badarg
for dict,fetch. :(

Counts of connections, channels, queues and consumers are within +/- 
constant values (queues and consumers are constantly created and destroyed 
for every client).

CPU and LA within constant values too. But from someone point MEM start to 
grow as I'm wrote above (with hang on of any management plugins).

Terminate of our application does't fix memory consumption growing, but 
sometimes help recover management accessibility.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/833f9822/attachment.html>

From Sherri.Conrod at McKesson.com  Tue Jan 14 22:15:59 2014
From: Sherri.Conrod at McKesson.com (Conrod, Sherri (Contractor))
Date: Tue, 14 Jan 2014 22:15:59 +0000
Subject: [rabbitmq-discuss] FW: Urgent: Issues Installing Rabbit MQ on Red
	Hat Linux 6.5
Message-ID: <D2957E20F47AE94C9099B16069045CE350872126@DDCEP50017.na.corp.mckesson.com>


Hi Support,

We have an urgent requirement to install Rabbit MQ on Red Hat Linux 6.5 and we are running into issues as described below. Can you provide the location to obtain the Failed Dependency Files?
We follow steps for installing Rabbit MQ on RPM-based Linux (CentOS, Fedora, OpenSuse, RedHat here:
http://www.rabbitmq.com/install-rpm.html

We chose Option 2:
2.Install Erlang from Erlang Solutions
1.    Download and install the appropriate RPM from Erlang Solutions<https://www.erlang-solutions.com/downloads/download-erlang-otp>.
2.    Download and install the esl-erlang-compat<https://github.com/jasonmcintosh/esl-erlang-compat> RPM (direct download<https://github.com/jasonmcintosh/esl-erlang-compat/blob/master/rpmbuild/RPMS/noarch/esl-erlang-compat-R14B-1.el6.noarch.rpm?raw=true>) produced by Jason McIntosh<https://github.com/jasonmcintosh/>.

This is needed since Erlang Solutions' packages provide "esl-erlang"; this package just requires "esl-erlang" and provides "erlang".

We download Erlang R16B03 64 bit for All Versions of  Centos
https://www.erlang-solutions.com/downloads/download-erlang-otp

[root at SJCFRMQ06 opt]# rpm -Uvh esl-erlang_16.b.3-1~centos~6_amd64.rpm
warning: esl-erlang_16.b.3-1~centos~6_amd64.rpm: Header V4 RSA/SHA1 Signature, key ID a14f4fca: NOKEY
error: Failed dependencies:
        libodbc.so.2()(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_baseu-2.8.so.0()(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_baseu-2.8.so.0(WXU_2.8)(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_baseu_xml-2.8.so.0()(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_adv-2.8.so.0()(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_adv-2.8.so.0(WXU_2.8)(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_aui-2.8.so.0()(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_aui-2.8.so.0(WXU_2.8)(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_aui-2.8.so.0(WXU_2.8.5)(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_core-2.8.so.0()(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_core-2.8.so.0(WXU_2.8)(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_gl-2.8.so.0()(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_gl-2.8.so.0(WXU_2.8)(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_html-2.8.so.0()(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_html-2.8.so.0(WXU_2.8)(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_stc-2.8.so.0()(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_stc-2.8.so.0(WXU_2.8)(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_xrc-2.8.so.0()(64bit) is needed by esl-erlang-R16B03-3.x86_64
        libwx_gtk2u_xrc-2.8.so.0(WXU_2.8)(64bit) is needed by esl-erlang-R16B03-3.x86_64
[root at SJCFRMQ06 opt]#


Sherri Conrod
Sr. Systems Engineer
SAT
510.898.7449  telephone
408.506.7131  cellphone


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140114/cc914940/attachment.html>

From michael.s.klishin at gmail.com  Wed Jan 15 08:51:07 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 15 Jan 2014 12:51:07 +0400
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <1213482e-2b86-42ee-b1bf-188be8a9d491@googlegroups.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <1213482e-2b86-42ee-b1bf-188be8a9d491@googlegroups.com>
Message-ID: <CAE3HoVRTG=FLM3iRcJ_Yc25AWUrEHtt598LEpmG8_1Et3uTcjQ@mail.gmail.com>

2014/1/15 ???? ???? <blake-r at mail.ru>

> Counts of connections, channels, queues and consumers are within +/-
> constant values (queues and consumers are constantly created and destroyed
> for every client).
>
> CPU and LA within constant values too. But from someone point MEM start to
> grow as I'm wrote above (with hang on of any management plugins).
>
> Terminate of our application does't fix memory consumption growing, but
> sometimes help recover management accessibility.
>

Oleg,

Have you seen Matthias' reply? http://markmail.org/thread/brysbyyt45iuc5gj

The issue may be that you use a client that sends basic.consume and then
basic.cancel before
basic.consume-ok is received. This violates AMQP 0.9.1 spec and likely
corrupts consumer dictionary
state.

Synchronizing basic.cancel to be sent after basic.consume-ok should help.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/678c1aa4/attachment.html>

From blake-r at mail.ru  Wed Jan 15 09:23:23 2014
From: blake-r at mail.ru (=?UTF-8?B?0J7Qu9C10LMg0KDQvtGB0YE=?=)
Date: Wed, 15 Jan 2014 01:23:23 -0800 (PST)
Subject: [rabbitmq-discuss] badarg in dict,
	fetch problem on basic.consume_ok (or not)
In-Reply-To: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
Message-ID: <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>

This is how it is look in cacti (data from collectd - curl_json plugin):

<https://lh3.googleusercontent.com/-1GVErJK51R4/UtZR9W0XdBI/AAAAAAAAADs/kSTC_re4MH0/s1600/rabbitmq1.png>

<https://lh5.googleusercontent.com/-Crq2XN9Op5o/UtZSINHW3uI/AAAAAAAAAD0/UXqX1BIq9w0/s1600/rabbitmq2.png>

<https://lh4.googleusercontent.com/-_uLqxiSFY0A/UtZSqaQUIBI/AAAAAAAAAD8/UB0TXZBY9oY/s1600/rabbitmq3.png>

Last try of run (right most, pair of hours) is 
with collect_statistics_interval: 10000 and force_find_statistics: false: 
memory not grown, but management still become inaccessible. :(

On early memory grow peaks our server was stop responding to clients 
through big timeouts. Still no error in logs other than from my first post.

Oleg.

???????, 14 ?????? 2014 ?., 23:25:18 UTC+4 ???????????? ???? ???? ???????:
>
> Hello.
>
> Some strange error we have sometimes (1-2 days or 1-2 weeks - 
> differently), see attachement.
>
> After this error memory consumption begin grow until watermark reached - 
> then rabbitmq start to pressure messages and our clients gave timeout.
>
> At the same time web management begin hanging on (HTTP requests never ends 
> without transmit any data).
>
> rabbitmq 3.2.2 (and 3.1.5)
> erlang R16B
>
> Oleg.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/11af148a/attachment.html>

From mklishin at gopivotal.com  Wed Jan 15 09:35:58 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 15 Jan 2014 13:35:58 +0400
Subject: [rabbitmq-discuss] badarg in dict,
	fetch problem on basic.consume_ok (or not)
In-Reply-To: <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
Message-ID: <37A33FAD-9ED6-4591-9226-000B130D5BE3@rabbitmq.com>

On 15 Jan 2014, at 13:23, ???? ???? <blake-r at mail.ru> wrote:

> Last try of run (right most, pair of hours) is with collect_statistics_interval: 10000 and force_find_statistics: false: memory not grown, but management still become inaccessible. :(
> 
> On early memory grow peaks our server was stop responding to clients through big timeouts. Still no error in logs other than from my first post.

Oleg,

You seem to be using Google Groups, which is a mirror that often falls behind the list.

There were replies to your original post:
http://markmail.org/thread/rzwbcwtxvrfvc32u#query:+page:1+mid:v4juqnkumlx4rjys+state:results

MK

Software Engineer, Pivotal/RabbitMQ



From sid.young at gmail.com  Wed Jan 15 09:58:50 2014
From: sid.young at gmail.com (Sid Young)
Date: Wed, 15 Jan 2014 01:58:50 -0800 (PST)
Subject: [rabbitmq-discuss] OFFTOPIC - Book Review - RabbitMQ Cookbook
Message-ID: <d906905c-e79f-4e94-8737-aca89207b3e0@googlegroups.com>

G'Day all,

Hope this is not out of place, I was asked to review a book on behalf of 
Packt Publishing, its called RabbitMQ Cookbook... a link to the draft 
review is here... 
http://z900collector.wordpress.com/2014/01/15/rabbitmq-cookbook-book-review/

Sid
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/7a07512a/attachment.html>

From blake-r at mail.ru  Wed Jan 15 09:59:16 2014
From: blake-r at mail.ru (=?UTF-8?B?0J7Qu9C10LMg0KDQvtGB0YE=?=)
Date: Wed, 15 Jan 2014 01:59:16 -0800 (PST)
Subject: [rabbitmq-discuss] badarg in dict,
	fetch problem on basic.consume_ok (or not)
In-Reply-To: <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
Message-ID: <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>


>
> Oleg,
> You seem to be using Google Groups, which is a mirror that often falls 
> behind
> the list.
> There were replies to your original post:
>
> http://markmail.org/thread/rzwbcwtxvrfvc32u#query:+page:1+mid:v4juqnkumlx4rjys+state:results
> MK
>  
> Software Engineer, Pivotal/RabbitMQ


Oh, really. Sorry.

As I'm already wrote - I'm spoof your about badarg error - it is just 
effect after something happen with rabbitmq.

What client(s) are you using?
> The only code path I can see to this error entails pipelining of 
> synchronous commands on a channel, which the AMQP spec forbids.
> Specifically, the error could occur when sending a basic.consume 
> followed by a basic.cancel without waiting for the basic.consume_ok first.
> Which is pretty much impossible in most clients unless there are 
> multiple application threads operating on the same channel, which is 
> usually a bad idea.
> Matthias.


Your right about async execution synchronous commands. I will exporer this 
deeper, but do you think that this wrong sequence may disturb of work 
RabbitMQ server at all?

Clients that we are using is librabbitmq-c for C++ and pika for python. 
Messages translate between them.

Oleg.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/3d439570/attachment.html>

From matthias at rabbitmq.com  Wed Jan 15 10:18:25 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 15 Jan 2014 10:18:25 +0000
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
 <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
Message-ID: <52D66071.1070505@rabbitmq.com>

On 15/01/14 09:59, ???? ???? wrote:
> Your right about async execution synchronous commands. I will exporer
> this deeper, but do you think that this wrong sequence may disturb of
> work RabbitMQ server at all?

Yes, that's what I pointed out in 
http://rabbitmq.1065348.n5.nabble.com/badarg-in-dict-fetch-problem-on-basic-consume-ok-or-not-tp32572p32573.html

Matthias.


From emile at rabbitmq.com  Wed Jan 15 10:40:35 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 15 Jan 2014 10:40:35 +0000
Subject: [rabbitmq-discuss] Rabbitmq 3.2.2 Keeps crashing in different
 ways :(
In-Reply-To: <CALPks8xwm9_9jOx5iL+o2bkQYwGm+D77otfGDNTXBj6CKx4FeQ@mail.gmail.com>
References: <CALPks8xwm9_9jOx5iL+o2bkQYwGm+D77otfGDNTXBj6CKx4FeQ@mail.gmail.com>
Message-ID: <52D665A3.2070806@rabbitmq.com>


Hi Peter,

Thanks for the detailed information. I've not been able to access the
large log, but find some interim suggestions/observations inline:

On 14/01/14 15:15, Peter Kopias wrote:

>  He acknowledged this as a real bug
>  ("{gm,find_prefix_common_suffix,2,[]}" in the stacktrace)

It may well end up being related to this error:

> "Absurdly large distribution output data buffer (2427628186 bytes) passed.
> Aborted (core dumped)"

Did these errors appear  near the same time?



> http://corpweb.dunakanyar.net/petrosdump/rabbitmqoutofmemory20140113.tar.bz2

Can you please confirm the hash of this file? I get a bunzip2 data
integrity error when decompressing.


>  I don't think high availability has a part of "if (last_err==E_NOSPC)
> die();"

You probably need a larger disk free limit.

>  I've got 16Gbytes of ram in each node. The watermark is set to 7.8Gbyte,
> so we should never have memory problems.

You could try a lower vm_memory_high_watermark. If you have very fast
publishers then it is possible for available RAM to be consumed faster
than the broker can react.


>  - Which is the "pivotal preferred stable version"? And which is the
> "pivotal preferred stable linux distribution"?

The latest version is generally preferred.

>  - Does rabbitmq have a ticket system somewhere?
>  - Where to report bugs to?

To the mailing list, as you have done. Thank you.


>   As these are testing machines currently it is possible to give a
> developer access to them if it helps.

Thanks, but it is even more useful to be able to reproduce issues. The
error starting "Absurdly large distribution" has been reproduced. Please
see if my suggestions solve the other problems.



-Emile



From blake-r at mail.ru  Wed Jan 15 10:53:34 2014
From: blake-r at mail.ru (Blake-R)
Date: Wed, 15 Jan 2014 14:53:34 +0400
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <52D66071.1070505@rabbitmq.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
 <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
 <52D66071.1070505@rabbitmq.com>
Message-ID: <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>

OK. But as I'm wrote with graphics server still serve other requests -
just with memory grow. I'm looked at list connections/queues and
others with rabbitmqctl - it all in good values, not overflow (I'm
already has bug with non-closing channels and fix them).

2014/1/15 Matthias Radestock <matthias at rabbitmq.com>:
> On 15/01/14 09:59, ???? ???? wrote:
>>
>> Your right about async execution synchronous commands. I will exporer
>> this deeper, but do you think that this wrong sequence may disturb of
>> work RabbitMQ server at all?
>
>
> Yes, that's what I pointed out in
> http://rabbitmq.1065348.n5.nabble.com/badarg-in-dict-fetch-problem-on-basic-consume-ok-or-not-tp32572p32573.html
>
> Matthias.
>

From mklishin at gopivotal.com  Wed Jan 15 10:58:47 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 15 Jan 2014 14:58:47 +0400
Subject: [rabbitmq-discuss] badarg in dict,
	fetch problem on basic.consume_ok (or not)
In-Reply-To: <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
 <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
 <52D66071.1070505@rabbitmq.com>
 <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
Message-ID: <392BCE66-2843-4D50-BBDB-EA7A3EEDFC0D@rabbitmq.com>


On 15 Jan 2014, at 14:53, Blake-R <blake-r at mail.ru> wrote:

> OK. But as I'm wrote with graphics server still serve other requests -
> just with memory grow. I'm looked at list connections/queues and
> others with rabbitmqctl - it all in good values, not overflow (I'm
> already has bug with non-closing channels and fix them).

You can have messages piling up and/or average message size going up.
Both will affect total memory consumption. Use rabbitmqctl report to see
RAM usage breakdown.

MK

Software Engineer, Pivotal/RabbitMQ



From matthias at rabbitmq.com  Wed Jan 15 10:59:29 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 15 Jan 2014 10:59:29 +0000
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>	<43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>	<cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>	<52D66071.1070505@rabbitmq.com>
 <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
Message-ID: <52D66A11.3020205@rabbitmq.com>

On 15/01/14 10:53, Blake-R wrote:
> OK. But as I'm wrote with graphics server still serve other requests -
> just with memory grow. I'm looked at list connections/queues and
> others with rabbitmqctl - it all in good values, not overflow (I'm
> already has bug with non-closing channels and fix them).

The illegal command sequence will result in the Erlang process 
representing the AMQP channel dying - which is what the error report you 
posted indicates. That in turn will cause the associated connection to 
be closed, which too is shown in the error report.

Other than that rabbit will continue to function normally. The memory 
growth you are seeing is presumably due to messages accumulating in 
queues since their consuming channels have crashed due to the above problem.

Matthias.

From blake-r at mail.ru  Wed Jan 15 11:15:40 2014
From: blake-r at mail.ru (Blake-R)
Date: Wed, 15 Jan 2014 15:15:40 +0400
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <52D66A11.3020205@rabbitmq.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
 <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
 <52D66071.1070505@rabbitmq.com>
 <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
 <52D66A11.3020205@rabbitmq.com>
Message-ID: <CAJhFpddg+P0iPKEH7X47M+1+Otm5udUYyWuysVQx75Z4Ao6z3w@mail.gmail.com>

No, all queues was created on same channel which closed with
connection, with exclusive=true. And...

$ rabbitmqctl list_queues -p poker name messages_ready
messages_unacknowledged messages consumers

shows that there are no queues with messages or without consumer.

At this night whiout sleep I'm downgrade erlang (from
erlang-solutions.com R16B to native Ubuntu R14B) and now management
plugin hangs more quickly, but there are no errors in log at all, and
about badarg too.  Memory grow, but for a while can't qualify reason -
may be R14B have other allocations (because number of clients now also
grow). At least it grow not so quickly as prior to.

Oleg.

2014/1/15 Matthias Radestock <matthias at rabbitmq.com>:
> On 15/01/14 10:53, Blake-R wrote:
>>
>> OK. But as I'm wrote with graphics server still serve other requests -
>> just with memory grow. I'm looked at list connections/queues and
>> others with rabbitmqctl - it all in good values, not overflow (I'm
>> already has bug with non-closing channels and fix them).
>
>
> The illegal command sequence will result in the Erlang process representing
> the AMQP channel dying - which is what the error report you posted
> indicates. That in turn will cause the associated connection to be closed,
> which too is shown in the error report.
>
> Other than that rabbit will continue to function normally. The memory growth
> you are seeing is presumably due to messages accumulating in queues since
> their consuming channels have crashed due to the above problem.
>
> Matthias.

From blake-r at mail.ru  Wed Jan 15 11:56:32 2014
From: blake-r at mail.ru (Blake-R)
Date: Wed, 15 Jan 2014 15:56:32 +0400
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <CAJhFpddg+P0iPKEH7X47M+1+Otm5udUYyWuysVQx75Z4Ao6z3w@mail.gmail.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
 <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
 <52D66071.1070505@rabbitmq.com>
 <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
 <52D66A11.3020205@rabbitmq.com>
 <CAJhFpddg+P0iPKEH7X47M+1+Otm5udUYyWuysVQx75Z4Ao6z3w@mail.gmail.com>
Message-ID: <CAJhFpde3K_OUFcTGPj5rFoPPCT+KxHRcuNYxdq4rHggWTc5dEw@mail.gmail.com>

Well. If cause of badarg error was found (but look at our source still
not given me a reason), how about management_plugin hang on - it also
can leak and be factor of big memory consumption.
HTTP hangs after authorization, rabbitmqadmin - on any method requires
HTTP access. Both methods serves only request to /api/users,
parameters and policies.

2014/1/15 Blake-R <blake-r at mail.ru>:
> No, all queues was created on same channel which closed with
> connection, with exclusive=true. And...
>
> $ rabbitmqctl list_queues -p poker name messages_ready
> messages_unacknowledged messages consumers
>
> shows that there are no queues with messages or without consumer.
>
> At this night whiout sleep I'm downgrade erlang (from
> erlang-solutions.com R16B to native Ubuntu R14B) and now management
> plugin hangs more quickly, but there are no errors in log at all, and
> about badarg too.  Memory grow, but for a while can't qualify reason -
> may be R14B have other allocations (because number of clients now also
> grow). At least it grow not so quickly as prior to.
>
> Oleg.
>
> 2014/1/15 Matthias Radestock <matthias at rabbitmq.com>:
>> On 15/01/14 10:53, Blake-R wrote:
>>>
>>> OK. But as I'm wrote with graphics server still serve other requests -
>>> just with memory grow. I'm looked at list connections/queues and
>>> others with rabbitmqctl - it all in good values, not overflow (I'm
>>> already has bug with non-closing channels and fix them).
>>
>>
>> The illegal command sequence will result in the Erlang process representing
>> the AMQP channel dying - which is what the error report you posted
>> indicates. That in turn will cause the associated connection to be closed,
>> which too is shown in the error report.
>>
>> Other than that rabbit will continue to function normally. The memory growth
>> you are seeing is presumably due to messages accumulating in queues since
>> their consuming channels have crashed due to the above problem.
>>
>> Matthias.

From mklishin at gopivotal.com  Wed Jan 15 12:01:29 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 15 Jan 2014 16:01:29 +0400
Subject: [rabbitmq-discuss] badarg in dict,
	fetch problem on basic.consume_ok (or not)
In-Reply-To: <CAJhFpde3K_OUFcTGPj5rFoPPCT+KxHRcuNYxdq4rHggWTc5dEw@mail.gmail.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
 <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
 <52D66071.1070505@rabbitmq.com>
 <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
 <52D66A11.3020205@rabbitmq.com>
 <CAJhFpddg+P0iPKEH7X47M+1+Otm5udUYyWuysVQx75Z4Ao6z3w@mail.gmail.com>
 <CAJhFpde3K_OUFcTGPj5rFoPPCT+KxHRcuNYxdq4rHggWTc5dEw@mail.gmail.com>
Message-ID: <0A42BC2E-5A57-4B08-9578-419F0F065DCC@rabbitmq.com>


On 15 Jan 2014, at 15:56, Blake-R <blake-r at mail.ru> wrote:

> Well. If cause of badarg error was found (but look at our source still
> not given me a reason), how about management_plugin hang on - it also
> can leak and be factor of big memory consumption.
> HTTP hangs after authorization, rabbitmqadmin - on any method requires
> HTTP access. Both methods serves only request to /api/users,
> parameters and policies.

There were memory leaks fixed in various plugins in the past, so this is a possibility.

Please run `rabbitmqctl report` and post the output. Guessing is significantly
less productive.

MK

Software Engineer, Pivotal/RabbitMQ



From blake-r at mail.ru  Wed Jan 15 12:15:55 2014
From: blake-r at mail.ru (Blake-R)
Date: Wed, 15 Jan 2014 16:15:55 +0400
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <0A42BC2E-5A57-4B08-9578-419F0F065DCC@rabbitmq.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
 <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
 <52D66071.1070505@rabbitmq.com>
 <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
 <52D66A11.3020205@rabbitmq.com>
 <CAJhFpddg+P0iPKEH7X47M+1+Otm5udUYyWuysVQx75Z4Ao6z3w@mail.gmail.com>
 <CAJhFpde3K_OUFcTGPj5rFoPPCT+KxHRcuNYxdq4rHggWTc5dEw@mail.gmail.com>
 <0A42BC2E-5A57-4B08-9578-419F0F065DCC@rabbitmq.com>
Message-ID: <CAJhFpdfV0TLSxbOocGzejY1ePnXn=qxKfu=jWqHE++A1Z+qvAg@mail.gmail.com>

Yes, sure: http://files.mail.ru/FB653821148E4505A477C2650BC30582

Just now management plugin is hanging on.

2014/1/15 Michael Klishin <mklishin at gopivotal.com>:
>
> On 15 Jan 2014, at 15:56, Blake-R <blake-r at mail.ru> wrote:
>
>> Well. If cause of badarg error was found (but look at our source still
>> not given me a reason), how about management_plugin hang on - it also
>> can leak and be factor of big memory consumption.
>> HTTP hangs after authorization, rabbitmqadmin - on any method requires
>> HTTP access. Both methods serves only request to /api/users,
>> parameters and policies.
>
> There were memory leaks fixed in various plugins in the past, so this is a possibility.
>
> Please run `rabbitmqctl report` and post the output. Guessing is significantly
> less productive.
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>

From michael.s.klishin at gmail.com  Wed Jan 15 12:18:58 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 15 Jan 2014 16:18:58 +0400
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <CAJhFpdfV0TLSxbOocGzejY1ePnXn=qxKfu=jWqHE++A1Z+qvAg@mail.gmail.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
 <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
 <52D66071.1070505@rabbitmq.com>
 <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
 <52D66A11.3020205@rabbitmq.com>
 <CAJhFpddg+P0iPKEH7X47M+1+Otm5udUYyWuysVQx75Z4Ao6z3w@mail.gmail.com>
 <CAJhFpde3K_OUFcTGPj5rFoPPCT+KxHRcuNYxdq4rHggWTc5dEw@mail.gmail.com>
 <0A42BC2E-5A57-4B08-9578-419F0F065DCC@rabbitmq.com>
 <CAJhFpdfV0TLSxbOocGzejY1ePnXn=qxKfu=jWqHE++A1Z+qvAg@mail.gmail.com>
Message-ID: <CAE3HoVTqGmqG8x+tAn+iv9qnU+7xpce1H-7mYznHjMrw5FwvMw@mail.gmail.com>

2014/1/15 Blake-R <blake-r at mail.ru>

> Yes, sure: http://files.mail.ru/FB653821148E4505A477C2650BC30582
>

Re-posted to a gist:
https://gist.github.com/michaelklishin/73bdf491d98f0ed05c33

-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/0fefe6f8/attachment.html>

From michael.s.klishin at gmail.com  Wed Jan 15 12:28:06 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 15 Jan 2014 16:28:06 +0400
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <CAE3HoVTqGmqG8x+tAn+iv9qnU+7xpce1H-7mYznHjMrw5FwvMw@mail.gmail.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
 <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
 <52D66071.1070505@rabbitmq.com>
 <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
 <52D66A11.3020205@rabbitmq.com>
 <CAJhFpddg+P0iPKEH7X47M+1+Otm5udUYyWuysVQx75Z4Ao6z3w@mail.gmail.com>
 <CAJhFpde3K_OUFcTGPj5rFoPPCT+KxHRcuNYxdq4rHggWTc5dEw@mail.gmail.com>
 <0A42BC2E-5A57-4B08-9578-419F0F065DCC@rabbitmq.com>
 <CAJhFpdfV0TLSxbOocGzejY1ePnXn=qxKfu=jWqHE++A1Z+qvAg@mail.gmail.com>
 <CAE3HoVTqGmqG8x+tAn+iv9qnU+7xpce1H-7mYznHjMrw5FwvMw@mail.gmail.com>
Message-ID: <CAE3HoVSSFBux6b+CSch0Uy=Nv92uXxBk2_1dyYd3k-d8iRiKTQ@mail.gmail.com>

2014/1/15 Michael Klishin <michael.s.klishin at gmail.com>

> Re-posted to a gist:
> https://gist.github.com/michaelklishin/73bdf491d98f0ed05c33
>


So yes, the management DB consumes over 12 GB of RAM.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/9fac627a/attachment.html>

From blake-r at mail.ru  Wed Jan 15 12:56:17 2014
From: blake-r at mail.ru (Blake-R)
Date: Wed, 15 Jan 2014 16:56:17 +0400
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <CAE3HoVSSFBux6b+CSch0Uy=Nv92uXxBk2_1dyYd3k-d8iRiKTQ@mail.gmail.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
 <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
 <52D66071.1070505@rabbitmq.com>
 <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
 <52D66A11.3020205@rabbitmq.com>
 <CAJhFpddg+P0iPKEH7X47M+1+Otm5udUYyWuysVQx75Z4Ao6z3w@mail.gmail.com>
 <CAJhFpde3K_OUFcTGPj5rFoPPCT+KxHRcuNYxdq4rHggWTc5dEw@mail.gmail.com>
 <0A42BC2E-5A57-4B08-9578-419F0F065DCC@rabbitmq.com>
 <CAJhFpdfV0TLSxbOocGzejY1ePnXn=qxKfu=jWqHE++A1Z+qvAg@mail.gmail.com>
 <CAE3HoVTqGmqG8x+tAn+iv9qnU+7xpce1H-7mYznHjMrw5FwvMw@mail.gmail.com>
 <CAE3HoVSSFBux6b+CSch0Uy=Nv92uXxBk2_1dyYd3k-d8iRiKTQ@mail.gmail.com>
Message-ID: <CAJhFpdeaa9Fdotms4K2_JB58X4ppAfPyhjVx5LWWOzqGWE9LOw@mail.gmail.com>

Can I'm flush/reset management DB of unload management plugin on-the-fly?

Just for cogiration - we are using fine-grained per-message (about 10k
deliveries on subscription per second at evening) statistics and have
1 request per second from collectd to display graphics in cacti.

Unfortunately I'm misspelling in options and write
force_find_statistics vice force_fine_statistics in last restart. Next
time server were down I'm try to set right option and look at results
memory consumption.

2014/1/15 Michael Klishin <michael.s.klishin at gmail.com>:
> 2014/1/15 Michael Klishin <michael.s.klishin at gmail.com>
>>
>> Re-posted to a gist:
>> https://gist.github.com/michaelklishin/73bdf491d98f0ed05c33
>
>
>
> So yes, the management DB consumes over 12 GB of RAM.
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin

From michael.s.klishin at gmail.com  Wed Jan 15 13:05:57 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 15 Jan 2014 17:05:57 +0400
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <CAJhFpdeaa9Fdotms4K2_JB58X4ppAfPyhjVx5LWWOzqGWE9LOw@mail.gmail.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
 <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
 <52D66071.1070505@rabbitmq.com>
 <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
 <52D66A11.3020205@rabbitmq.com>
 <CAJhFpddg+P0iPKEH7X47M+1+Otm5udUYyWuysVQx75Z4Ao6z3w@mail.gmail.com>
 <CAJhFpde3K_OUFcTGPj5rFoPPCT+KxHRcuNYxdq4rHggWTc5dEw@mail.gmail.com>
 <0A42BC2E-5A57-4B08-9578-419F0F065DCC@rabbitmq.com>
 <CAJhFpdfV0TLSxbOocGzejY1ePnXn=qxKfu=jWqHE++A1Z+qvAg@mail.gmail.com>
 <CAE3HoVTqGmqG8x+tAn+iv9qnU+7xpce1H-7mYznHjMrw5FwvMw@mail.gmail.com>
 <CAE3HoVSSFBux6b+CSch0Uy=Nv92uXxBk2_1dyYd3k-d8iRiKTQ@mail.gmail.com>
 <CAJhFpdeaa9Fdotms4K2_JB58X4ppAfPyhjVx5LWWOzqGWE9LOw@mail.gmail.com>
Message-ID: <CAE3HoVR0gxFB1hVe-HLkiuLNrxDOYbBj8S3-qRjUc359ONE8fw@mail.gmail.com>

2014/1/15 Blake-R <blake-r at mail.ru>

> Can I'm flush/reset management DB of unload management plugin on-the-fly?


This thread has several messages that explain how to do it:
http://markmail.org/thread/yj7o2c6rizp5lyk2
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/2a4e7cc9/attachment.html>

From ceri at lshift.net  Wed Jan 15 13:32:10 2014
From: ceri at lshift.net (Ceri Storey)
Date: Wed, 15 Jan 2014 13:32:10 +0000
Subject: [rabbitmq-discuss] FW: Urgent: Issues Installing Rabbit MQ on
 Red Hat Linux 6.5
In-Reply-To: <D2957E20F47AE94C9099B16069045CE350872126@DDCEP50017.na.corp.mckesson.com>
References: <D2957E20F47AE94C9099B16069045CE350872126@DDCEP50017.na.corp.mckesson.com>
Message-ID: <52D68DDA.9070708@lshift.net>

(14/01/14 22:15), Conrod, Sherri (Contractor) wrote:
>
>  
>
> Hi Support,
>
>  
>
> We have an urgent requirement to install Rabbit MQ on Red Hat Linux
> 6.5 and we are running into issues as described below. Can you provide
> the location to obtain the Failed Dependency Files?
>
Have you tried using `yum localinstall esl-erlang-some-version.rpm`?
That should resolve and fetch dependencies for you.
>
>
>   We follow steps for installing Rabbit MQ on RPM-based Linux (CentOS,
>   Fedora, OpenSuse, RedHat here:
>
> http://www.rabbitmq.com/install-rpm.html
>
>  
>
> We chose Option 2:
>
>
>       2.Install Erlang from Erlang Solutions 
>
> 1.    Download and install the appropriate RPM from *Erlang Solutions*
> <https://www.erlang-solutions.com/downloads/download-erlang-otp>.
>
> 2.    Download and install the *esl-erlang-compat*
> <https://github.com/jasonmcintosh/esl-erlang-compat> RPM (*direct
> download*
> <https://github.com/jasonmcintosh/esl-erlang-compat/blob/master/rpmbuild/RPMS/noarch/esl-erlang-compat-R14B-1.el6.noarch.rpm?raw=true>)
> produced by *Jason McIntosh* <https://github.com/jasonmcintosh/>.
>
> This is needed since Erlang Solutions' packages provide "esl-erlang";
> this package just requires "esl-erlang" and provides "erlang".
>
>  
>
> We download Erlang R16B03 64 bit for All Versions of  Centos
>
> https://www.erlang-solutions.com/downloads/download-erlang-otp
>
>  
>
> [root at SJCFRMQ06 opt]# rpm -Uvh esl-erlang_16.b.3-1~centos~6_amd64.rpm
>
> warning: esl-erlang_16.b.3-1~centos~6_amd64.rpm: Header V4 RSA/SHA1
> Signature, key ID a14f4fca: NOKEY
>
> error: Failed dependencies:
>
>         libodbc.so.2()(64bit) is needed by esl-erlang-R16B03-3.x86_64
>
>         libwx_baseu-2.8.so.0()(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_baseu-2.8.so.0(WXU_2.8)(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_baseu_xml-2.8.so.0()(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_adv-2.8.so.0()(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_adv-2.8.so.0(WXU_2.8)(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_aui-2.8.so.0()(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_aui-2.8.so.0(WXU_2.8)(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_aui-2.8.so.0(WXU_2.8.5)(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_core-2.8.so.0()(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_core-2.8.so.0(WXU_2.8)(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_gl-2.8.so.0()(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_gl-2.8.so.0(WXU_2.8)(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_html-2.8.so.0()(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_html-2.8.so.0(WXU_2.8)(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_stc-2.8.so.0()(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_stc-2.8.so.0(WXU_2.8)(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_xrc-2.8.so.0()(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
>         libwx_gtk2u_xrc-2.8.so.0(WXU_2.8)(64bit) is needed by
> esl-erlang-R16B03-3.x86_64
>
> [root at SJCFRMQ06 opt]#
>
>  
>
>  
>
> Sherri Conrod
>
> Sr. Systems Engineer
>
> SAT
>
> 510.898.7449  telephone
> 408.506.7131  cellphone
>
>  
>
>  
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/5edd31b3/attachment.html>

From roberto at canary.is  Wed Jan 15 15:45:26 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Wed, 15 Jan 2014 10:45:26 -0500
Subject: [rabbitmq-discuss] rabbitmq-c ./configure
In-Reply-To: <CAAt2po+yP8cQJBxOgdCzoWc0F6vYP9_n1y2BRUQAJXzA03AuLQ@mail.gmail.com>
References: <CANAFtV6R1ha6urBShCX9H0DoPkz-2muZCNbKpxio-imT7mQTWw@mail.gmail.com>
 <CANAFtV5gVMFuEyUoit-akVGG8aqT7ObkDOp+MPPQxD26+GkbuQ@mail.gmail.com>
 <CAAt2po+yP8cQJBxOgdCzoWc0F6vYP9_n1y2BRUQAJXzA03AuLQ@mail.gmail.com>
Message-ID: <CANAFtV5U15_N7j7xWbKxxpkfh_TgvoSGMOHw_k7F8dxkHvD4JA@mail.gmail.com>

Hi,
I'm getting this warning message when running ./configure --host=arm-linux

$ ./configure --host=arm-linux
configure: WARNING: if you wanted to set the --build type, don't use --host.
    If a cross compiler is detected then cross compile mode will be used

and this message to the end:
rabbitmq-c build options:
Host: arm-unknown-linux-gnu
 Version: 0.4.1
SSL/TLS: openssl
Tools: no
Documentation: no
 Examples: yes

Any way I can pass the right compiler to ./configure? I tried with export
CC but it still does not get it.

Thank you,



On Tue, Jan 14, 2014 at 11:43 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:

> Yes, those changes were merged in over 2 years ago. The library is not
> consistently tested on the ARM architecture so I cannot guarantee that it
> still works, but I also have no reason to believe otherwise.
>
> You need to run autoreconf -i before trying to run the configure script.
>
> -Alan
>
>
> On Tue, Jan 14, 2014 at 7:04 PM, Roberto Pagliari <roberto at canary.is>wrote:
>
>> Hi Alex/All,
>> in addition to ./configure and Makefile for building with Autotools, did
>> you manage to fix the issues discussed over here?
>>
>> https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ
>>
>> I'm asking because ARM is my target architecture.
>>
>> Thank you,
>>
>>
>>
>> On Tue, Jan 14, 2014 at 5:55 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>
>>> I cannot find the ./configure file that can be used to build rabbimq-c.
>>>
>>> https://github.com/alanxz/rabbitmq-c
>>>
>>>
>>> is there a way I can get the file?
>>>
>>> Thank you,
>>>
>>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/aaa1e60e/attachment.html>

From roberto at canary.is  Wed Jan 15 16:23:49 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Wed, 15 Jan 2014 11:23:49 -0500
Subject: [rabbitmq-discuss] rabbitmq-c ./configure
In-Reply-To: <CANAFtV5U15_N7j7xWbKxxpkfh_TgvoSGMOHw_k7F8dxkHvD4JA@mail.gmail.com>
References: <CANAFtV6R1ha6urBShCX9H0DoPkz-2muZCNbKpxio-imT7mQTWw@mail.gmail.com>
 <CANAFtV5gVMFuEyUoit-akVGG8aqT7ObkDOp+MPPQxD26+GkbuQ@mail.gmail.com>
 <CAAt2po+yP8cQJBxOgdCzoWc0F6vYP9_n1y2BRUQAJXzA03AuLQ@mail.gmail.com>
 <CANAFtV5U15_N7j7xWbKxxpkfh_TgvoSGMOHw_k7F8dxkHvD4JA@mail.gmail.com>
Message-ID: <CANAFtV6MFvWc=e4vLx9TNaXav0Z_YvmDTXyjo490fBAmLtvjbQ@mail.gmail.com>

What I'm doing right now is this:

./configure CC=/usr/bin/arm-linux-gnueabi-gcc --host=arm-linux
LDFLAGS=path_to_ssl_lib_folder

but somehow it cannot make the compiler work:

configure: WARNING: if you wanted to set the --build type, don't use --host.
If a cross compiler is detected then cross compile mode will be used
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes checking for
arm-linux-strip... no
checking for strip... strip
checking for a thread-safe mkdir -p... /bin/mkdir -p checking for gawk...
gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for style of include used by make... GNU
checking for arm-linux-gcc... /usr/bin/arm-linux-gnueabi-gcc
checking whether the C compiler works... no
configure: error: in /home/username/rabbitmq-c-master-arm': configure:
error: C compiler cannot create executables
Seeconfig.log' for more details

but my arm c compiler is working, so I don't know why it does not work with
this.


On Wed, Jan 15, 2014 at 10:45 AM, Roberto Pagliari <roberto at canary.is>wrote:

> Hi,
> I'm getting this warning message when running ./configure --host=arm-linux
>
> $ ./configure --host=arm-linux
> configure: WARNING: if you wanted to set the --build type, don't use
> --host.
>     If a cross compiler is detected then cross compile mode will be used
>
> and this message to the end:
> rabbitmq-c build options:
> Host: arm-unknown-linux-gnu
>  Version: 0.4.1
> SSL/TLS: openssl
> Tools: no
> Documentation: no
>  Examples: yes
>
> Any way I can pass the right compiler to ./configure? I tried with export
> CC but it still does not get it.
>
> Thank you,
>
>
>
> On Tue, Jan 14, 2014 at 11:43 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:
>
>> Yes, those changes were merged in over 2 years ago. The library is not
>> consistently tested on the ARM architecture so I cannot guarantee that it
>> still works, but I also have no reason to believe otherwise.
>>
>> You need to run autoreconf -i before trying to run the configure script.
>>
>> -Alan
>>
>>
>> On Tue, Jan 14, 2014 at 7:04 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>
>>> Hi Alex/All,
>>> in addition to ./configure and Makefile for building with Autotools, did
>>> you manage to fix the issues discussed over here?
>>>
>>> https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ
>>>
>>> I'm asking because ARM is my target architecture.
>>>
>>> Thank you,
>>>
>>>
>>>
>>> On Tue, Jan 14, 2014 at 5:55 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>>
>>>> I cannot find the ./configure file that can be used to build rabbimq-c.
>>>>
>>>> https://github.com/alanxz/rabbitmq-c
>>>>
>>>>
>>>> is there a way I can get the file?
>>>>
>>>> Thank you,
>>>>
>>>>
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/40d05df6/attachment.html>

From alan.antonuk at gmail.com  Wed Jan 15 17:02:18 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Wed, 15 Jan 2014 09:02:18 -0800
Subject: [rabbitmq-discuss] rabbitmq-c ./configure
In-Reply-To: <CANAFtV6MFvWc=e4vLx9TNaXav0Z_YvmDTXyjo490fBAmLtvjbQ@mail.gmail.com>
References: <CANAFtV6R1ha6urBShCX9H0DoPkz-2muZCNbKpxio-imT7mQTWw@mail.gmail.com>
 <CANAFtV5gVMFuEyUoit-akVGG8aqT7ObkDOp+MPPQxD26+GkbuQ@mail.gmail.com>
 <CAAt2po+yP8cQJBxOgdCzoWc0F6vYP9_n1y2BRUQAJXzA03AuLQ@mail.gmail.com>
 <CANAFtV5U15_N7j7xWbKxxpkfh_TgvoSGMOHw_k7F8dxkHvD4JA@mail.gmail.com>
 <CANAFtV6MFvWc=e4vLx9TNaXav0Z_YvmDTXyjo490fBAmLtvjbQ@mail.gmail.com>
Message-ID: <CAAt2poJUGSeps053p+PO7ZLTm-7oJ+SAoTMrbCG5DpRNdQ275A@mail.gmail.com>

You're confusing host and target I think.  Host is the system you're
building the executable on, target is the system that the executables will
be run on.

Read up on this here:
http://www.sourceware.org/autobook/autobook/autobook_259.html

-Alan


On Wed, Jan 15, 2014 at 8:23 AM, Roberto Pagliari <roberto at canary.is> wrote:

> What I'm doing right now is this:
>
> ./configure CC=/usr/bin/arm-linux-gnueabi-gcc --host=arm-linux LDFLAGS=path_to_ssl_lib_folder
>
> but somehow it cannot make the compiler work:
>
> configure: WARNING: if you wanted to set the --build type, don't use
> --host.
> If a cross compiler is detected then cross compile mode will be used
> checking for a BSD-compatible install... /usr/bin/install -c
> checking whether build environment is sane... yes checking for
> arm-linux-strip... no
> checking for strip... strip
> checking for a thread-safe mkdir -p... /bin/mkdir -p checking for gawk...
> gawk
> checking whether make sets $(MAKE)... yes
> checking whether make supports nested variables... yes
> checking for style of include used by make... GNU
> checking for arm-linux-gcc... /usr/bin/arm-linux-gnueabi-gcc
> checking whether the C compiler works... no
> configure: error: in /home/username/rabbitmq-c-master-arm': configure:
> error: C compiler cannot create executables
> Seeconfig.log' for more details
>
> but my arm c compiler is working, so I don't know why it does not work
> with this.
>
>
> On Wed, Jan 15, 2014 at 10:45 AM, Roberto Pagliari <roberto at canary.is>wrote:
>
>> Hi,
>> I'm getting this warning message when running ./configure --host=arm-linux
>>
>> $ ./configure --host=arm-linux
>> configure: WARNING: if you wanted to set the --build type, don't use
>> --host.
>>     If a cross compiler is detected then cross compile mode will be used
>>
>> and this message to the end:
>> rabbitmq-c build options:
>> Host: arm-unknown-linux-gnu
>>  Version: 0.4.1
>> SSL/TLS: openssl
>> Tools: no
>> Documentation: no
>>  Examples: yes
>>
>> Any way I can pass the right compiler to ./configure? I tried with export
>> CC but it still does not get it.
>>
>> Thank you,
>>
>>
>>
>> On Tue, Jan 14, 2014 at 11:43 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:
>>
>>> Yes, those changes were merged in over 2 years ago. The library is not
>>> consistently tested on the ARM architecture so I cannot guarantee that it
>>> still works, but I also have no reason to believe otherwise.
>>>
>>> You need to run autoreconf -i before trying to run the configure script.
>>>
>>> -Alan
>>>
>>>
>>> On Tue, Jan 14, 2014 at 7:04 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>>
>>>> Hi Alex/All,
>>>> in addition to ./configure and Makefile for building with Autotools,
>>>> did you manage to fix the issues discussed over here?
>>>>
>>>> https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ
>>>>
>>>> I'm asking because ARM is my target architecture.
>>>>
>>>> Thank you,
>>>>
>>>>
>>>>
>>>> On Tue, Jan 14, 2014 at 5:55 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>>>
>>>>> I cannot find the ./configure file that can be used to build rabbimq-c.
>>>>>
>>>>> https://github.com/alanxz/rabbitmq-c
>>>>>
>>>>>
>>>>> is there a way I can get the file?
>>>>>
>>>>> Thank you,
>>>>>
>>>>>
>>>>
>>>> _______________________________________________
>>>> rabbitmq-discuss mailing list
>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>
>>>>
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/b8ef030b/attachment.html>

From roberto at canary.is  Wed Jan 15 17:17:19 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Wed, 15 Jan 2014 12:17:19 -0500
Subject: [rabbitmq-discuss] rabbitmq-c ./configure
In-Reply-To: <CAAt2poJUGSeps053p+PO7ZLTm-7oJ+SAoTMrbCG5DpRNdQ275A@mail.gmail.com>
References: <CANAFtV6R1ha6urBShCX9H0DoPkz-2muZCNbKpxio-imT7mQTWw@mail.gmail.com>
 <CANAFtV5gVMFuEyUoit-akVGG8aqT7ObkDOp+MPPQxD26+GkbuQ@mail.gmail.com>
 <CAAt2po+yP8cQJBxOgdCzoWc0F6vYP9_n1y2BRUQAJXzA03AuLQ@mail.gmail.com>
 <CANAFtV5U15_N7j7xWbKxxpkfh_TgvoSGMOHw_k7F8dxkHvD4JA@mail.gmail.com>
 <CANAFtV6MFvWc=e4vLx9TNaXav0Z_YvmDTXyjo490fBAmLtvjbQ@mail.gmail.com>
 <CAAt2poJUGSeps053p+PO7ZLTm-7oJ+SAoTMrbCG5DpRNdQ275A@mail.gmail.com>
Message-ID: <CANAFtV4xU+qYNf2S=upfht4W3J=9mMfRBJu2Cwv6-fwPNwqYnA@mail.gmail.com>

This command:
./configure --host=arm-linux

is the one I found here:
https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ

Are you sure it's the right command you ran? It builds, but for x86.

Thanks,



On Wed, Jan 15, 2014 at 12:02 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:

> You're confusing host and target I think.  Host is the system you're
> building the executable on, target is the system that the executables will
> be run on.
>
> Read up on this here:
> http://www.sourceware.org/autobook/autobook/autobook_259.html
>
> -Alan
>
>
> On Wed, Jan 15, 2014 at 8:23 AM, Roberto Pagliari <roberto at canary.is>wrote:
>
>> What I'm doing right now is this:
>>
>> ./configure CC=/usr/bin/arm-linux-gnueabi-gcc --host=arm-linux LDFLAGS=path_to_ssl_lib_folder
>>
>> but somehow it cannot make the compiler work:
>>
>>  configure: WARNING: if you wanted to set the --build type, don't use
>> --host.
>> If a cross compiler is detected then cross compile mode will be used
>> checking for a BSD-compatible install... /usr/bin/install -c
>> checking whether build environment is sane... yes checking for
>> arm-linux-strip... no
>> checking for strip... strip
>> checking for a thread-safe mkdir -p... /bin/mkdir -p checking for gawk...
>> gawk
>> checking whether make sets $(MAKE)... yes
>> checking whether make supports nested variables... yes
>> checking for style of include used by make... GNU
>> checking for arm-linux-gcc... /usr/bin/arm-linux-gnueabi-gcc
>> checking whether the C compiler works... no
>> configure: error: in /home/username/rabbitmq-c-master-arm': configure:
>> error: C compiler cannot create executables
>> Seeconfig.log' for more details
>>
>> but my arm c compiler is working, so I don't know why it does not work
>> with this.
>>
>>
>> On Wed, Jan 15, 2014 at 10:45 AM, Roberto Pagliari <roberto at canary.is>wrote:
>>
>>> Hi,
>>> I'm getting this warning message when running ./configure
>>> --host=arm-linux
>>>
>>> $ ./configure --host=arm-linux
>>> configure: WARNING: if you wanted to set the --build type, don't use
>>> --host.
>>>     If a cross compiler is detected then cross compile mode will be used
>>>
>>> and this message to the end:
>>> rabbitmq-c build options:
>>> Host: arm-unknown-linux-gnu
>>>  Version: 0.4.1
>>> SSL/TLS: openssl
>>> Tools: no
>>> Documentation: no
>>>  Examples: yes
>>>
>>> Any way I can pass the right compiler to ./configure? I tried with
>>> export CC but it still does not get it.
>>>
>>> Thank you,
>>>
>>>
>>>
>>> On Tue, Jan 14, 2014 at 11:43 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:
>>>
>>>> Yes, those changes were merged in over 2 years ago. The library is not
>>>> consistently tested on the ARM architecture so I cannot guarantee that it
>>>> still works, but I also have no reason to believe otherwise.
>>>>
>>>> You need to run autoreconf -i before trying to run the configure script.
>>>>
>>>> -Alan
>>>>
>>>>
>>>> On Tue, Jan 14, 2014 at 7:04 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>>>
>>>>> Hi Alex/All,
>>>>> in addition to ./configure and Makefile for building with Autotools,
>>>>> did you manage to fix the issues discussed over here?
>>>>>
>>>>> https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ
>>>>>
>>>>> I'm asking because ARM is my target architecture.
>>>>>
>>>>> Thank you,
>>>>>
>>>>>
>>>>>
>>>>> On Tue, Jan 14, 2014 at 5:55 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>>>>
>>>>>> I cannot find the ./configure file that can be used to build
>>>>>> rabbimq-c.
>>>>>>
>>>>>> https://github.com/alanxz/rabbitmq-c
>>>>>>
>>>>>>
>>>>>> is there a way I can get the file?
>>>>>>
>>>>>> Thank you,
>>>>>>
>>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> rabbitmq-discuss mailing list
>>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>>
>>>>>
>>>>
>>>> _______________________________________________
>>>> rabbitmq-discuss mailing list
>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>
>>>>
>>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/63501da3/attachment.html>

From alan.antonuk at gmail.com  Wed Jan 15 17:37:44 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Wed, 15 Jan 2014 09:37:44 -0800
Subject: [rabbitmq-discuss] rabbitmq-c ./configure
In-Reply-To: <CANAFtV4xU+qYNf2S=upfht4W3J=9mMfRBJu2Cwv6-fwPNwqYnA@mail.gmail.com>
References: <CANAFtV6R1ha6urBShCX9H0DoPkz-2muZCNbKpxio-imT7mQTWw@mail.gmail.com>
 <CANAFtV5gVMFuEyUoit-akVGG8aqT7ObkDOp+MPPQxD26+GkbuQ@mail.gmail.com>
 <CAAt2po+yP8cQJBxOgdCzoWc0F6vYP9_n1y2BRUQAJXzA03AuLQ@mail.gmail.com>
 <CANAFtV5U15_N7j7xWbKxxpkfh_TgvoSGMOHw_k7F8dxkHvD4JA@mail.gmail.com>
 <CANAFtV6MFvWc=e4vLx9TNaXav0Z_YvmDTXyjo490fBAmLtvjbQ@mail.gmail.com>
 <CAAt2poJUGSeps053p+PO7ZLTm-7oJ+SAoTMrbCG5DpRNdQ275A@mail.gmail.com>
 <CANAFtV4xU+qYNf2S=upfht4W3J=9mMfRBJu2Cwv6-fwPNwqYnA@mail.gmail.com>
Message-ID: <CAAt2poKc8gitfZKK8KYoAy2A36wkj9s2om4P0dik5J3Ed9yUuQ@mail.gmail.com>

Yup, if you're building for arm-linux:

./configure --target=arm-linux

-Alan


On Wed, Jan 15, 2014 at 9:17 AM, Roberto Pagliari <roberto at canary.is> wrote:

> This command:
> ./configure --host=arm-linux
>
> is the one I found here:
> https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ
>
> Are you sure it's the right command you ran? It builds, but for x86.
>
> Thanks,
>
>
>
> On Wed, Jan 15, 2014 at 12:02 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:
>
>> You're confusing host and target I think.  Host is the system you're
>> building the executable on, target is the system that the executables will
>> be run on.
>>
>> Read up on this here:
>> http://www.sourceware.org/autobook/autobook/autobook_259.html
>>
>> -Alan
>>
>>
>> On Wed, Jan 15, 2014 at 8:23 AM, Roberto Pagliari <roberto at canary.is>wrote:
>>
>>> What I'm doing right now is this:
>>>
>>> ./configure CC=/usr/bin/arm-linux-gnueabi-gcc --host=arm-linux LDFLAGS=path_to_ssl_lib_folder
>>>
>>> but somehow it cannot make the compiler work:
>>>
>>>  configure: WARNING: if you wanted to set the --build type, don't use
>>> --host.
>>> If a cross compiler is detected then cross compile mode will be used
>>> checking for a BSD-compatible install... /usr/bin/install -c
>>> checking whether build environment is sane... yes checking for
>>> arm-linux-strip... no
>>> checking for strip... strip
>>> checking for a thread-safe mkdir -p... /bin/mkdir -p checking for
>>> gawk... gawk
>>> checking whether make sets $(MAKE)... yes
>>> checking whether make supports nested variables... yes
>>> checking for style of include used by make... GNU
>>> checking for arm-linux-gcc... /usr/bin/arm-linux-gnueabi-gcc
>>> checking whether the C compiler works... no
>>> configure: error: in /home/username/rabbitmq-c-master-arm': configure:
>>> error: C compiler cannot create executables
>>> Seeconfig.log' for more details
>>>
>>> but my arm c compiler is working, so I don't know why it does not work
>>> with this.
>>>
>>>
>>> On Wed, Jan 15, 2014 at 10:45 AM, Roberto Pagliari <roberto at canary.is>wrote:
>>>
>>>> Hi,
>>>> I'm getting this warning message when running ./configure
>>>> --host=arm-linux
>>>>
>>>> $ ./configure --host=arm-linux
>>>> configure: WARNING: if you wanted to set the --build type, don't use
>>>> --host.
>>>>     If a cross compiler is detected then cross compile mode will be used
>>>>
>>>> and this message to the end:
>>>> rabbitmq-c build options:
>>>> Host: arm-unknown-linux-gnu
>>>>  Version: 0.4.1
>>>> SSL/TLS: openssl
>>>> Tools: no
>>>> Documentation: no
>>>>  Examples: yes
>>>>
>>>> Any way I can pass the right compiler to ./configure? I tried with
>>>> export CC but it still does not get it.
>>>>
>>>> Thank you,
>>>>
>>>>
>>>>
>>>> On Tue, Jan 14, 2014 at 11:43 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:
>>>>
>>>>> Yes, those changes were merged in over 2 years ago. The library is not
>>>>> consistently tested on the ARM architecture so I cannot guarantee that it
>>>>> still works, but I also have no reason to believe otherwise.
>>>>>
>>>>> You need to run autoreconf -i before trying to run the configure
>>>>> script.
>>>>>
>>>>> -Alan
>>>>>
>>>>>
>>>>> On Tue, Jan 14, 2014 at 7:04 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>>>>
>>>>>> Hi Alex/All,
>>>>>> in addition to ./configure and Makefile for building with Autotools,
>>>>>> did you manage to fix the issues discussed over here?
>>>>>>
>>>>>> https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ
>>>>>>
>>>>>> I'm asking because ARM is my target architecture.
>>>>>>
>>>>>> Thank you,
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Tue, Jan 14, 2014 at 5:55 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>>>>>
>>>>>>> I cannot find the ./configure file that can be used to build
>>>>>>> rabbimq-c.
>>>>>>>
>>>>>>> https://github.com/alanxz/rabbitmq-c
>>>>>>>
>>>>>>>
>>>>>>> is there a way I can get the file?
>>>>>>>
>>>>>>> Thank you,
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> rabbitmq-discuss mailing list
>>>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>>>
>>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> rabbitmq-discuss mailing list
>>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>>
>>>>>
>>>>
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/322703c6/attachment.html>

From jsw at one.com  Wed Jan 15 19:19:54 2014
From: jsw at one.com (Josh West)
Date: Wed, 15 Jan 2014 14:19:54 -0500
Subject: [rabbitmq-discuss] Federation Topologies & Limitations
Message-ID: <52D6DF5A.6070103@one.com>

Hi folks,

I'm currently working with the federation plugin in order to connect 
potentially 100-200 different brokers.  The purpose is to provide a 
virtual message bus, where systems on any broker can send messages to 
other systems that are likely connected to a different broker. 
Basically, a communication network / message bus.

I am experimenting with different architectures and it seems that in 
order to prevent message duplications, I'll have to go with a complete 
graph and max-hops set to 1 -- or in other words, each broker will have 
to directly federate with the other 100-200 brokers.

I'm wondering about the limitations (if they exist) of the federation 
plugin or this style of architecture.  There isn't much information out 
there on the pro's and con's of different topologies (aside from obvious 
issues with a large ring topology).

Can anybody elaborate or add any input?

Thanks!

-- 
Josh West
One.com - http://www.one.com


From dmcintyre at gopivotal.com  Wed Jan 15 21:10:32 2014
From: dmcintyre at gopivotal.com (dmcintyre at gopivotal.com)
Date: Wed, 15 Jan 2014 13:10:32 -0800 (PST)
Subject: [rabbitmq-discuss] Using SAN replication for DR
Message-ID: <54e4baf9-d84a-4633-9085-9898287f567f@googlegroups.com>

How robust is the on-disk format for persistent messages? 

The scenario I'm looking at uses a SAN for the disk storage, with 
replication to a remote DC for DR. 

What happens if, during the death of the primary DC, e.g. a corrupt block 
gets replicated to the remote? Will all messages in the store be lost, or 
only the ones around the corrupt block? 

D.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/5ff191fc/attachment.html>

From sysadm14 at gmail.com  Wed Jan 15 21:48:16 2014
From: sysadm14 at gmail.com (chris se)
Date: Wed, 15 Jan 2014 15:48:16 -0600
Subject: [rabbitmq-discuss] Install Error rabbitmq-server-3.2.1-1
Message-ID: <CABuSQsm2-=77ZJu4U2Ou_b+C_W=dwv_fRqpcM0dAw-cHXGxZ6Q@mail.gmail.com>

I am facing Issue?s while installing ?*rabbitmq-server-3.2.1-1*? on ?*CentOS
release 6.3*? server.



As a pre-requisite for installing ?rabbitmq?, I am trying to install
?erlang? on the server. But I am facing following error while installing
the package ?erlang?.



[GoodMule1 at ecc-monitoring1 tmp]$ sudo yum install erlang

Loaded plugins: security

Setting up Install Process

Resolving Dependencies

--> Running transaction check

---> Package erlang.x86_64 0:R14B-04.3.el6 will be installed

.

.

.

.

--> Finished Dependency Resolution

Error: Package: *erlang-erts-R14B-04.3.el6.x86_64* (epel)

           Requires*: libz.so.1(ZLIB_1.2.2)(64bit)*

You could try using --skip-broken to work around the problem

You could try running: rpm -Va --nofiles --nodigest



Already I have ?*zlib_1.2.3*? installed on my server, still I am facing the
above error. I thought of installing ?*zlib_1.2.2*? but couldn?t find it in
any repository.



[GoodMule1 at ecc-monitoring1 tmp]$ sudo yum list zlib

Loaded plugins: security

*Installed Packages*

*zlib.i686
1.2.3-27.el6                                 @base*

*zlib.x86_64
1.2.3-27.el6
@anaconda-CentOS-201207061011.x86_64/6.3*

[GoodMule1 at ecc-monitoring1 tmp]$



Could you please advise how can I overcome the above issue.



Thanks In Advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/9a06c84b/attachment.html>

From roberto at canary.is  Wed Jan 15 22:22:01 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Wed, 15 Jan 2014 17:22:01 -0500
Subject: [rabbitmq-discuss] rabbitmq-c ./configure
In-Reply-To: <CAAt2poKc8gitfZKK8KYoAy2A36wkj9s2om4P0dik5J3Ed9yUuQ@mail.gmail.com>
References: <CANAFtV6R1ha6urBShCX9H0DoPkz-2muZCNbKpxio-imT7mQTWw@mail.gmail.com>
 <CANAFtV5gVMFuEyUoit-akVGG8aqT7ObkDOp+MPPQxD26+GkbuQ@mail.gmail.com>
 <CAAt2po+yP8cQJBxOgdCzoWc0F6vYP9_n1y2BRUQAJXzA03AuLQ@mail.gmail.com>
 <CANAFtV5U15_N7j7xWbKxxpkfh_TgvoSGMOHw_k7F8dxkHvD4JA@mail.gmail.com>
 <CANAFtV6MFvWc=e4vLx9TNaXav0Z_YvmDTXyjo490fBAmLtvjbQ@mail.gmail.com>
 <CAAt2poJUGSeps053p+PO7ZLTm-7oJ+SAoTMrbCG5DpRNdQ275A@mail.gmail.com>
 <CANAFtV4xU+qYNf2S=upfht4W3J=9mMfRBJu2Cwv6-fwPNwqYnA@mail.gmail.com>
 <CAAt2poKc8gitfZKK8KYoAy2A36wkj9s2om4P0dik5J3Ed9yUuQ@mail.gmail.com>
Message-ID: <CANAFtV7f7A4EzQbQrE8-=5ABkVxK+r6CtybLNsMCN7TpKUy5Bw@mail.gmail.com>

Hi Alan,
I finally managed to compile, by running this command:

* LDFLAGS=-L/home/username/path_to_arm_libs/ ./configure
--host=x86_64-linux-gnu --target=arm-linux
CC=/usr/bin/arm-linux-gnueabi-gcc
CXX=/usr/local/linaro-armv6k-2013.06-gcc4.8/bin/arm-linux-gnueabi-g++
AR=/path_to/arm-linux-gnueabi-ar  LD=arm-linux-gnueabi-ld *

It looks like some lib is missing, because the output is this:
*# ./amqp_listen *
*./amqp_listen: line 1: syntax error: unexpected word (expecting ")")*

the strange thing is that I only see a static library in build/lib, even if
I add --enable-shared to the ./configure file. This does not happen when I
compile for linux as a target machine, in which case I can see the .so
libs; however, with the linux version I used cmake, not autotools.


Thanks,




On Wed, Jan 15, 2014 at 12:37 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:

> Yup, if you're building for arm-linux:
>
> ./configure --target=arm-linux
>
> -Alan
>
>
> On Wed, Jan 15, 2014 at 9:17 AM, Roberto Pagliari <roberto at canary.is>wrote:
>
>> This command:
>> ./configure --host=arm-linux
>>
>> is the one I found here:
>> https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ
>>
>> Are you sure it's the right command you ran? It builds, but for x86.
>>
>> Thanks,
>>
>>
>>
>> On Wed, Jan 15, 2014 at 12:02 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:
>>
>>> You're confusing host and target I think.  Host is the system you're
>>> building the executable on, target is the system that the executables will
>>> be run on.
>>>
>>> Read up on this here:
>>> http://www.sourceware.org/autobook/autobook/autobook_259.html
>>>
>>> -Alan
>>>
>>>
>>> On Wed, Jan 15, 2014 at 8:23 AM, Roberto Pagliari <roberto at canary.is>wrote:
>>>
>>>> What I'm doing right now is this:
>>>>
>>>> ./configure CC=/usr/bin/arm-linux-gnueabi-gcc --host=arm-linux LDFLAGS=path_to_ssl_lib_folder
>>>>
>>>> but somehow it cannot make the compiler work:
>>>>
>>>>  configure: WARNING: if you wanted to set the --build type, don't use
>>>> --host.
>>>> If a cross compiler is detected then cross compile mode will be used
>>>> checking for a BSD-compatible install... /usr/bin/install -c
>>>> checking whether build environment is sane... yes checking for
>>>> arm-linux-strip... no
>>>> checking for strip... strip
>>>> checking for a thread-safe mkdir -p... /bin/mkdir -p checking for
>>>> gawk... gawk
>>>> checking whether make sets $(MAKE)... yes
>>>> checking whether make supports nested variables... yes
>>>> checking for style of include used by make... GNU
>>>> checking for arm-linux-gcc... /usr/bin/arm-linux-gnueabi-gcc
>>>> checking whether the C compiler works... no
>>>> configure: error: in /home/username/rabbitmq-c-master-arm': configure:
>>>> error: C compiler cannot create executables
>>>> Seeconfig.log' for more details
>>>>
>>>> but my arm c compiler is working, so I don't know why it does not work
>>>> with this.
>>>>
>>>>
>>>> On Wed, Jan 15, 2014 at 10:45 AM, Roberto Pagliari <roberto at canary.is>wrote:
>>>>
>>>>> Hi,
>>>>> I'm getting this warning message when running ./configure
>>>>> --host=arm-linux
>>>>>
>>>>> $ ./configure --host=arm-linux
>>>>> configure: WARNING: if you wanted to set the --build type, don't use
>>>>> --host.
>>>>>     If a cross compiler is detected then cross compile mode will be
>>>>> used
>>>>>
>>>>> and this message to the end:
>>>>> rabbitmq-c build options:
>>>>> Host: arm-unknown-linux-gnu
>>>>>  Version: 0.4.1
>>>>> SSL/TLS: openssl
>>>>> Tools: no
>>>>> Documentation: no
>>>>>  Examples: yes
>>>>>
>>>>> Any way I can pass the right compiler to ./configure? I tried with
>>>>> export CC but it still does not get it.
>>>>>
>>>>> Thank you,
>>>>>
>>>>>
>>>>>
>>>>> On Tue, Jan 14, 2014 at 11:43 PM, Alan Antonuk <alan.antonuk at gmail.com
>>>>> > wrote:
>>>>>
>>>>>> Yes, those changes were merged in over 2 years ago. The library is
>>>>>> not consistently tested on the ARM architecture so I cannot guarantee that
>>>>>> it still works, but I also have no reason to believe otherwise.
>>>>>>
>>>>>> You need to run autoreconf -i before trying to run the configure
>>>>>> script.
>>>>>>
>>>>>> -Alan
>>>>>>
>>>>>>
>>>>>> On Tue, Jan 14, 2014 at 7:04 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>>>>>
>>>>>>> Hi Alex/All,
>>>>>>> in addition to ./configure and Makefile for building with Autotools,
>>>>>>> did you manage to fix the issues discussed over here?
>>>>>>>
>>>>>>> https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ
>>>>>>>
>>>>>>> I'm asking because ARM is my target architecture.
>>>>>>>
>>>>>>> Thank you,
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On Tue, Jan 14, 2014 at 5:55 PM, Roberto Pagliari <roberto at canary.is
>>>>>>> > wrote:
>>>>>>>
>>>>>>>> I cannot find the ./configure file that can be used to build
>>>>>>>> rabbimq-c.
>>>>>>>>
>>>>>>>> https://github.com/alanxz/rabbitmq-c
>>>>>>>>
>>>>>>>>
>>>>>>>> is there a way I can get the file?
>>>>>>>>
>>>>>>>> Thank you,
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> rabbitmq-discuss mailing list
>>>>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> rabbitmq-discuss mailing list
>>>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>>>
>>>>>>
>>>>>
>>>>
>>>> _______________________________________________
>>>> rabbitmq-discuss mailing list
>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>
>>>>
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/a64c0565/attachment.html>

From roberto at canary.is  Wed Jan 15 23:51:41 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Wed, 15 Jan 2014 18:51:41 -0500
Subject: [rabbitmq-discuss] RabbitMQ Community C Client
Message-ID: <CANAFtV4ECoC1wfYD9Ww4ctO=CCp8m34VkJmuj4bGxhpGE4uJWg@mail.gmail.com>

Has this package ever been finalized?


   - You can also try this community C
Client<http://markmail.org/message/2phdwvrvwc57ya5m> and
   a port of this client to d <https://github.com/selivanovm/rabbitmq-d>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/77c21ecb/attachment.html>

From michael.laing at nytimes.com  Thu Jan 16 00:03:26 2014
From: michael.laing at nytimes.com (Laing, Michael)
Date: Wed, 15 Jan 2014 19:03:26 -0500
Subject: [rabbitmq-discuss] Federation Topologies & Limitations
In-Reply-To: <52D6DF5A.6070103@one.com>
References: <52D6DF5A.6070103@one.com>
Message-ID: <CAKgmDnFfivYO4uVNs2LSodrH13VvGtzi_OqUBze9ZP6ThFMLdA@mail.gmail.com>

Not seeing any other answers (yet)...

We have experimented with many topologies and have tried federation, but
the design that has proven the most rugged and simplest and is in
production uses shovels.

We have a core cluster that runs an exchange: the 'postoffice', This
cluster has a 'well-known' address so the retail instances can find it.
Each retail instance that comes up creates and runs 2 shovels:

1) the shovel from the core defines a source queue in the core with an
instance identifier, e.g. 'outbox_i-12345', and a binding to the core
postoffice exchange including that identifier (its address - more about
that later).

2) the shovel to the core uses the instance's 'outbox' queue as source,
which is bound to the instance postoffice exchange and specifies the
destination exchange as postoffice.

We use 'addresses' as routing and binding keys. Our addresses have 3 parts:
'action', 'from_address', 'to_address'. The parts are separated by periods.

Each address has parts: we use 'region', 'product', 'service',
'instance_id', 'pid'. Also separated by periods.

Hence the 'address' of a retail instance is, e.g.:
action: any action => *
from_address:
  region: from any => * (the postoffice actually spans multiple regions)
  product: from any => * (identifies an internal customer)
  service: from any => * (an app or a level of service)
  instance: from any => *
  pid: from any => *
to_address:
  region: mine => us-west-2
  product: for any => *
  service: for any => *
  instance: mine => i-12345
  pid: for any => *

So that is: '*.*.*.*.*.*.us-west-2.*.*.i-12345.*' meaning the instance will
accept anything sent to its region and instance-id.

A typical routing key might be:
'sub-resp.eu-west-1.messaging.update.i-98765.444.us-west-2.messaging.gateway.i-12345.-'
meaning that a service running on a particular pid in another instance is
sending our instance a message for a different service, same product, on an
unknown pid.

There should be an app queue bound to the postoffice on the instance with
an appropriate key to receive the message.

We have standard routines, of course, to handle the creation and
manipulation of keys. Plus our deployments are automated - so all those
asterisks are quite easy to handle in practice although a little hard to
look at!

And of course you can come up with your own addressing scheme to match your
requirements that could be simpler.

This is just a straightforward bus implementation, made possible by the
flexibility of the RabbitMQ routing/binding scheme. We have found it very
useful and have extended the 'postoffice' across all of our instances in
multiple regions with good result.

Michael Laing
NYTimes





On Wed, Jan 15, 2014 at 2:19 PM, Josh West <jsw at one.com> wrote:

> Hi folks,
>
> I'm currently working with the federation plugin in order to connect
> potentially 100-200 different brokers.  The purpose is to provide a virtual
> message bus, where systems on any broker can send messages to other systems
> that are likely connected to a different broker. Basically, a communication
> network / message bus.
>
> I am experimenting with different architectures and it seems that in order
> to prevent message duplications, I'll have to go with a complete graph and
> max-hops set to 1 -- or in other words, each broker will have to directly
> federate with the other 100-200 brokers.
>
> I'm wondering about the limitations (if they exist) of the federation
> plugin or this style of architecture.  There isn't much information out
> there on the pro's and con's of different topologies (aside from obvious
> issues with a large ring topology).
>
> Can anybody elaborate or add any input?
>
> Thanks!
>
> --
> Josh West
> One.com - http://www.one.com
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/cb527f59/attachment.html>

From buzz42j at gmail.com  Thu Jan 16 01:07:37 2014
From: buzz42j at gmail.com (Alex L)
Date: Wed, 15 Jan 2014 17:07:37 -0800
Subject: [rabbitmq-discuss] Unable to connect to rabbit@localhost: nodedown
Message-ID: <CAERdRxua+0JbgVgHs3wbM0jzd0-rcB4gMbNQHh4=Zxn_G2Pvsw@mail.gmail.com>

Hello,

I recently stopped my rabbitmq server and tried to start it again but it
can't reconnect for some reason.

I killed background processes that rabbitmq was running and tried to start
the connection again but every time I try the boot fails. I looked into the
log file and I'm getting a timeout_waiting_for_tables error as well. I'm
not really sure what do to next to solve this.

Thanks
Alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/76880bf1/attachment.html>

From joshua__lim at hotmail.com  Thu Jan 16 03:18:38 2014
From: joshua__lim at hotmail.com (joshua__lim)
Date: Wed, 15 Jan 2014 19:18:38 -0800 (PST)
Subject: [rabbitmq-discuss] Federation and Stomp
In-Reply-To: <B0BAF117-B92C-4B8F-99FA-F62582AAB0AC@rabbitmq.com>
References: <7406945.782.1329319767011.JavaMail.geo-discussion-forums@vbbdv1>
 <C0126B9D-8270-4D00-B773-010B2D3F333D@rabbitmq.com>
 <1389676138553-32536.post@n5.nabble.com>
 <B0BAF117-B92C-4B8F-99FA-F62582AAB0AC@rabbitmq.com>
Message-ID: <BLU176-W47D3F988AA69282318963FADB90@phx.gbl>

Hi Steve, thanks for letting me know.  Yes, I confirm that the following works:
SUBSCRIBE 
destination:/topic/high.* 
ack:client-individual 
id:subscribe-03 
persistent:true 
It worked via ncat, after further testing, I found a js bug in my consumer app that hang Chrome after a message was received.
Rgds,Joshua

Date: Tue, 14 Jan 2014 09:35:26 -0800
From: ml-node+s1065348n32562h36 at n5.nabble.com
To: joshua__lim at hotmail.com
Subject: Re: Federation and Stomp



	Joshua,


Emile has replied already, but I wanted to point out that RabbitMQ STOMP adapter

doesn't support "client-id"s on CONNECT (they are ignored), instead just the

destination (/topic/<name>) and the id are used to identify the subscription.


You may have read about client-ids in ActiveMQ documentation.


The SUBSCRIBE you showed us would create an exclusive auto-delete queue (not a

shared one) and this would therefore get deleted when the subscriber disconnected.


Try this:


SUBSCRIBE

destination:/topic/high.*

ack:client-individual

id:subscribe-03

persistent:true


^@


and then use exactly the same subscription after reconnect to receive messages.


You should UNSUBSCRIBE (see the doc) when this is no longer needed, or the

queue may stay around for a long time.


At present you cannot create a durable subscription to an /exchange/<x-name>/<r-key>

destination.


I hope this helps you: please let us know how you get on.


Steve Powell  [M: +44-7815-838-558; H:+44-1962-775-598; W:+44-2380-111-528]

    What I tell you three times is true.

Lewis Carroll; Hunting of the Snark: Fit the First


On 14 Jan 2014, at 05:08, joshua__lim <[hidden email]> wrote:


> I read somewhere that says to create durable subscription for exchange, I'd

> need to set the client-id header on the CONNECT and the id header to a

> unique string and set persistent: true.  This doesn't appear to work at this

> moment as subscribed-clients will lose messages sent to the exchange if they

> are not connected.


_______________________________________________

rabbitmq-discuss mailing list

[hidden email]

https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


	
	
	
	

	

	
	
		If you reply to this email, your message will be added to the discussion below:
		http://rabbitmq.1065348.n5.nabble.com/Federation-and-Stomp-tp20052p32562.html
	
	
		
		To unsubscribe from Federation and Stomp, click here.

		NAML
	 		 	   		  



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Federation-and-Stomp-tp20052p32616.html
Sent from the RabbitMQ mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/76f1b0d9/attachment.html>

From cbetti at gmail.com  Thu Jan 16 03:19:18 2014
From: cbetti at gmail.com (cbetti)
Date: Wed, 15 Jan 2014 19:19:18 -0800 (PST)
Subject: [rabbitmq-discuss] 2.8.5: high cpu usage on return from standby
In-Reply-To: <5273CD49.3010903@rabbitmq.com>
References: <041701cd7498$3c9a0430$b5ce0c90$@saseco.dk>
 <50211747.20002@rabbitmq.com>
 <C44C93396408924FBBF479F57FD429FCE7AC99@AM2PRD0210MB361.eurprd02.prod.outlook.com>
 <50A3C01C.70606@rabbitmq.com> <1380304107803-29997.post@n5.nabble.com>
 <52468727.3040504@rabbitmq.com> <1383155680214-31012.post@n5.nabble.com>
 <5273B300.10303@rabbitmq.com>
 <CAHcLveKQKMJ0kbDYCvBuL5Bexw6=Ok47aU4GZEX8pejyrJdX_A@mail.gmail.com>
 <5273CD49.3010903@rabbitmq.com>
Message-ID: <1389842358517-32617.post@n5.nabble.com>

FYI, the erl.exe 100% cpu after long standby issue persists.

versions:
RabbitMQ 3.2.2
Erlang R16B03
Windows 7 Home Premium w/ latest updates & service packs (2014/01/15)



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/2-8-5-high-cpu-usage-on-return-from-standby-tp21264p32617.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From woqimingweipeng at gmail.com  Thu Jan 16 03:33:57 2014
From: woqimingweipeng at gmail.com (Xie Yunpeng)
Date: Thu, 16 Jan 2014 11:33:57 +0800
Subject: [rabbitmq-discuss] memory leak with RabbitMQ 3.1.0 and erlang R16B03
Message-ID: <CAAjbVJCntKor1hG+jGeo82No-T+0ePeNUXOeoDjdjF4K2_qN3Q@mail.gmail.com>

my rabbitmq cluster consist of three rabbitmq service on three machine, and
i use lvs to make other services can use one ip address connect to rabbitmq
server. one of the machine handle three hundred connections and more than
four thousand channles, send and revice rate is the same so  there is no
msg in queue.but it's memory usage is growing all the time until i
stop_app/start_app, when i check memory usage on rabbitmq management it
shows 2.3G, but i use top on the machine can see the rabbitmq use about 13G
memory, how to solve this problem? is it a bug?
memory info on this machine with rabbitmqctl report:
 {erlang_version,
     "Erlang R16B03 (erts-5.10.4) [source] [64-bit] [smp:24:24]
[async-threads:30] [hipe] [kernel-poll:true]\n"},
 {memory,
     [{total,2476273832},
      {connection_procs,155880032},
      {queue_procs,5600},
      {plugins,590576},
      {other_proc,22481760},
      {mnesia,104832},
      {mgmt_db,2184042360},
      {msg_index,40560},
      {other_ets,41907368},
      {binary,34012872},
      {code,19853836},
      {atom,703377},
      {other_system,16650659}]},
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/d335f551/attachment.html>

From charanr at shared.performixbiz.com  Wed Jan 15 21:38:41 2014
From: charanr at shared.performixbiz.com (Charan)
Date: Wed, 15 Jan 2014 15:38:41 -0600
Subject: [rabbitmq-discuss] Install Error rabbitmq-server-3.2.1-1
Message-ID: <000301cf123a$29e6fa00$7db4ee00$@performixbiz.com>

Hi Team,

 

I am facing Issue's while installing "rabbitmq-server-3.2.1-1" on "CentOS
release 6.3" server.

 

As a pre-requisite for installing "rabbitmq", I am trying to install
"erlang" on the server. But I am facing following error while installing the
package "erlang".

 

[GoodMule1 at ecc-monitoring1 tmp]$ sudo yum install erlang

Loaded plugins: security

Setting up Install Process

Resolving Dependencies

--> Running transaction check

---> Package erlang.x86_64 0:R14B-04.3.el6 will be installed

.

.

.

.

--> Finished Dependency Resolution

Error: Package: erlang-erts-R14B-04.3.el6.x86_64 (epel)

           Requires: libz.so.1(ZLIB_1.2.2)(64bit)

You could try using --skip-broken to work around the problem

You could try running: rpm -Va --nofiles --nodigest

 

Already I have "zlib_1.2.3" installed on my server, still I am facing the
above error. I thought of installing "zlib_1.2.2" but couldn't find it in
any repository.

 

[GoodMule1 at ecc-monitoring1 tmp]$ sudo yum list zlib

Loaded plugins: security

Installed Packages

zlib.i686                                   1.2.3-27.el6
@base

zlib.x86_64                                 1.2.3-27.el6
@anaconda-CentOS-201207061011.x86_64/6.3

[GoodMule1 at ecc-monitoring1 tmp]$

 

Could you please advise how can I overcome the above issue.

 

Thanks In Advance.

 

Regards,

Charan

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140115/b587ac4b/attachment.html>

From joshua__lim at hotmail.com  Thu Jan 16 04:30:42 2014
From: joshua__lim at hotmail.com (Joshua Lim)
Date: Thu, 16 Jan 2014 04:30:42 +0000
Subject: [rabbitmq-discuss] How to use Presence Exchange Plugin using
 STOMP and RabbitMQ Server v3.2.1?
In-Reply-To: <52D3E006.1010904@rabbitmq.com>
References: <BLU176-W293642F4DDDF8403CEBE03ADBD0@phx.gbl>,
 <52D3E006.1010904@rabbitmq.com>
Message-ID: <BLU176-W365517B65C6C99F17E9A95ADB90@phx.gbl>

Hi Emile,

Thanks.  I encountered the following error while trying to build the presence exchange plugin using MinGW/MSYS on Windows 7 (64 bit).  

escript: exception error: no match of right hand side value {error,enoent}

Note:
1. Even though I'm not able to compile the plugin, I'm able to compile rabbitmq server using the step described here -http://www.rabbitmq.com/build-server.html  One thing though, I had to downgrade from Python 3 to v2 as the print code don't work in v3.

2. I've also tried using CYGWIN but it returns another error - escript: Failed to open file: /home/Fujitsu/rabbitmq/build-source/rabbitmq-public-umbrella/generate_deps

The full error pasted below and the complete code for generate_deps can be found here -  http://pastebin.com/N4HVz8z1

Please let me know I can fix the problem.  Thank you.


Fujitsu at JoshuaNotebook /d/RabbitMQ/build-source/rabbitmq-public-umbrella/presence-exchange-master
$ make
[elided] generate deps
escript: exception error: no match of right hand side value {error,enoent}
  in function  generate_deps__escript__1389__793192__493000:detect_deps/5 (d:/RabbitMQ/build-source/rabbitmq-public-umbrella/generate_deps, line 40)
  in call from generate_deps__escript__1389__793192__493000:'-main/1-fun-0-'/6 (d:/RabbitMQ/build-source/rabbitmq-public-umbrella/generate_deps, line 19)
  in call from lists:foldl/3 (lists.erl, line 1248)
  in call from generate_deps__escript__1389__793192__493000:main/1 (d:/RabbitMQ/build-source/rabbitmq-public-umbrella/generate_deps, line 17)
  in call from escript:run/2 (escript.erl, line 747)
  in call from escript:start/1 (escript.erl, line 277)
  in call from init:start_it/1 (init.erl, line 1054)
  in call from init:start_em/1 (init.erl, line 1034)
[elided] generate deps
escript: exception error: no match of right hand side value {error,enoent}
  in function  generate_deps__escript__1389__793194__76000:detect_deps/5 (d:/RabbitMQ/build-source/rabbitmq-public-umbrella/generate_deps, line 40)
  in call from generate_deps__escript__1389__793194__76000:'-main/1-fun-0-'/6 (d:/RabbitMQ/build-source/rabbitmq-public-umbrella/generate_deps, line 19)
  in call from lists:foldl/3 (lists.erl, line 1248)
  in call from generate_deps__escript__1389__793194__76000:main/1 (d:/RabbitMQ/build-source/rabbitmq-public-umbrella/generate_deps, line 17)
  in call from escript:run/2 (escript.erl, line 747)
  in call from escript:start/1 (escript.erl, line 277)
  in call from init:start_it/1 (init.erl, line 1054)
  in call from init:start_em/1 (init.erl, line 1034)
rm -rf ../rabbitmq-erlang-client/dist
make -C ../rabbitmq-erlang-client
make[1]: Entering directory `/d/RabbitMQ/build-source/rabbitmq-public-umbrella/rabbitmq-erlang-client'
rm -f deps.mk
echo src/amqp_auth_mechanisms.erl:src/amqp_channel.erl:src/amqp_channel_sup.erl:src/amqp_channel_sup_sup.erl:src/amqp_channels_manager.erl:src/amqp_client.erl:src/amqp_connection.erl:src/amqp_connection_sup.erl:src/amqp_connection_type_sup.erl:src/amqp_direct_connecti
erl:src/amqp_gen_connection.erl:src/amqp_gen_consumer.erl:src/amqp_main_reader.erl:src/amqp_network_connection.erl:src/amqp_rpc_client.erl:src/amqp_rpc_server.erl:src/amqp_selective_consumer.erl:src/amqp_sup.erl:src/amqp_uri.erl:src/rabbit_routing_util.erl:src/uri_par
include/amqp_client_internal.hrl:include/amqp_gen_consumer_spec.hrl:include/rabbit_routing_prefixes.hrl: | escript ../rabbitmq-server/generate_deps deps.mk ebin
make[1]: Leaving directory `/d/RabbitMQ/build-source/rabbitmq-public-umbrella/rabbitmq-erlang-client'
make[1]: Entering directory `/d/RabbitMQ/build-source/rabbitmq-public-umbrella/rabbitmq-erlang-client'
escript  ../rabbitmq-server/generate_app rabbit_common.app.in rabbit_common.app src
sed 's/%%VSN%%/0.0.0/' rabbit_common.app > rabbit_common.app.tmp && mv rabbit_common.app.tmp rabbit_common.app
mkdir -p dist
rm -f dist/rabbit_common-0.0.0.ez
make -C ../rabbitmq-server
make[2]: Entering directory `/d/RabbitMQ/build-source/rabbitmq-public-umbrella/rabbitmq-server'
make[2]: Nothing to be done for `all'.
make[2]: Leaving directory `/d/RabbitMQ/build-source/rabbitmq-public-umbrella/rabbitmq-server'
rm -rf dist/rabbit_common-0.0.0
mkdir -p dist/rabbit_common-0.0.0/include
mkdir -p dist/rabbit_common-0.0.0/ebin
cp rabbit_common.app dist/rabbit_common-0.0.0/ebin/
( cp ../rabbitmq-server/ebin/app_utils.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/credit_flow.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/pmon.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/gen_s
.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/mirrored_supervisor.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/priority_queue.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_backing_queue.beam dist/rabbit_common-0.0.0/
r/ebin/rabbit_basic.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_binary_generator.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_binary_parser.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/e
bit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_channel_interceptor.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_runtime_parameter.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_command_assembl
/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_exchange_type.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_exchange_decorator.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_auth_backend.beam dist/rabbit_common
q-server/ebin/rabbit_auth_mechanism.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_framing_amqp_0_8.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_framing_amqp_0_9_1.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp
heartbeat.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_misc.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_msg_store_index.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_net.beam
;  ( cp ../rabbitmq-server/ebin/rabbit_nodes.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_policy_validator.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_reader.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ..
ter.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_event.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_queue_collector.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_queue_decorato
ebin/ );  ( cp ../rabbitmq-server/ebin/rabbit_amqqueue.beam dist/rabbit_common-0.0.0/ebin/ );  ( cp ../rabbitmq-server/ebin/supervisor2.beam dist/rabbit_common-0.0.0/ebin/ );
cp ../rabbitmq-server/include/*.hrl dist/rabbit_common-0.0.0/include/
(cd dist; zip -q -r rabbit_common-0.0.0.ez rabbit_common-0.0.0)
mkdir -p deps
rm -rf deps/rabbit_common-0.0.0
mkdir -p deps/rabbit_common-0.0.0
unzip -q -o dist/rabbit_common-0.0.0.ez -d deps
ERL_LIBS=deps:dist erlc -I include -pa ebin -o ebin -Wall -v +debug_info -Duse_specs src/amqp_auth_mechanisms.erl
{error_logger,{{2014,1,15},{21,40,35}},std_error,"File operation error: eio. Target: deps:dist. Function: list_dir. Process: code_server."}

=ERROR REPORT==== 16-Jan-2014::05:40:35 ===
File operation error: eio. Target: deps:dist. Function: list_dir. Process: code_server.
d://RabbitMQ/BUILD-~1/RABBIT~3/RA9B14~1/include/amqp_client.hrl:20: can't find include lib "rabbit_common/include/rabbit.hrl"
d://RabbitMQ/BUILD-~1/RABBIT~3/RA9B14~1/include/amqp_client.hrl:21: can't find include lib "rabbit_common/include/rabbit_framing.hrl"
d://RabbitMQ/BUILD-~1/RABBIT~3/RA9B14~1/include/amqp_client.hrl:23: record 'P_basic' undefined
make[1]: *** [ebin/amqp_auth_mechanisms.beam] Error 1
make[1]: Leaving directory `/d/RabbitMQ/build-source/rabbitmq-public-umbrella/rabbitmq-erlang-client'
make: *** [../rabbitmq-erlang-client/dist/.done.0.0.0] Error 2

Fujitsu at JoshuaNotebook /d/RabbitMQ/build-source/rabbitmq-public-umbrella/presence-exchange-master
$

> Date: Mon, 13 Jan 2014 12:45:58 +0000
> From: emile at rabbitmq.com
> To: rabbitmq-discuss at lists.rabbitmq.com
> CC: joshua__lim at hotmail.com; tonygarnockjones+rabbitmq at gmail.com
> Subject: Re: [rabbitmq-discuss] How to use Presence Exchange Plugin using STOMP and RabbitMQ Server v3.2.1?
> 
> 
> Hi Joshua,
> 
> On 12/01/14 15:04, Joshua Lim wrote:
> 
> > Immediately after that, the guest STOMP connection crashed when I
> > had expect it to receive messages after user joshua has subscribed to
> > "presence" exchange.  
> > 
> > What have I done wrongly?
> 
> 
> When I try this I see the following error in the logfile:
> 
> ** Reason for termination ==
> ** {badarg,[{erlang,binary_to_list,["bind"],[]},
> 
> 
> This looks like a problem in the presence exchange. I have submitted a
> pull request to the author which appears to solve the problem. With the
> patch applied you should see messages like this being delivered to the
> first subscriber:
> 
> 
> MESSAGE
> subscription:test
> destination:/exchange/presence
> message-id:T_test@@session-Ip9MZyrYrNyRHqVNDM9lpA@@1
> action:bind
> exchange:presence
> queue:amq.gen-1gqzkBxb5AYbBFXGF2GNxw
> key:joshua
> 
> 
> 
> 
> 
> 
> -Emile
> 
> 
> 
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/02e7df0d/attachment.html>

From blake-r at mail.ru  Thu Jan 16 05:54:03 2014
From: blake-r at mail.ru (Blake-R)
Date: Thu, 16 Jan 2014 09:54:03 +0400
Subject: [rabbitmq-discuss] badarg in dict,
 fetch problem on basic.consume_ok (or not)
In-Reply-To: <CAE3HoVR0gxFB1hVe-HLkiuLNrxDOYbBj8S3-qRjUc359ONE8fw@mail.gmail.com>
References: <1e66f666-2715-4f79-b501-4e17aa8689dd@googlegroups.com>
 <43d93ef1-de49-489d-b873-08049fef29ca@googlegroups.com>
 <cb490c91-0c48-4c5c-b51e-faf196b7cec4@googlegroups.com>
 <52D66071.1070505@rabbitmq.com>
 <CAJhFpdfpMD2S4f9p5V6TYKkc3eST0J2Z3_6D=AUrw9rsJv=Mxg@mail.gmail.com>
 <52D66A11.3020205@rabbitmq.com>
 <CAJhFpddg+P0iPKEH7X47M+1+Otm5udUYyWuysVQx75Z4Ao6z3w@mail.gmail.com>
 <CAJhFpde3K_OUFcTGPj5rFoPPCT+KxHRcuNYxdq4rHggWTc5dEw@mail.gmail.com>
 <0A42BC2E-5A57-4B08-9578-419F0F065DCC@rabbitmq.com>
 <CAJhFpdfV0TLSxbOocGzejY1ePnXn=qxKfu=jWqHE++A1Z+qvAg@mail.gmail.com>
 <CAE3HoVTqGmqG8x+tAn+iv9qnU+7xpce1H-7mYznHjMrw5FwvMw@mail.gmail.com>
 <CAE3HoVSSFBux6b+CSch0Uy=Nv92uXxBk2_1dyYd3k-d8iRiKTQ@mail.gmail.com>
 <CAJhFpdeaa9Fdotms4K2_JB58X4ppAfPyhjVx5LWWOzqGWE9LOw@mail.gmail.com>
 <CAE3HoVR0gxFB1hVe-HLkiuLNrxDOYbBj8S3-qRjUc359ONE8fw@mail.gmail.com>
Message-ID: <CAJhFpde+8h8deHqydZrq1g0GRoC9D8RvHepWY0Gej26FTk+_2g@mail.gmail.com>

Yesterday server out of memory. Then I'm revert back erlang R16B and
enable option "force_fine_statistics". Just now all ok: mgmt db was
300MB in peak and down to 140MB today with decay load.

Think that this thread is exhausted with new about same problem
management memory leak:
http://rabbitmq.1065348.n5.nabble.com/memory-leak-with-RabbitMQ-3-1-0-and-erlang-R16B03-tp32618.html
Will be check updates therein.

Thank you, Michael.


2014/1/15 Michael Klishin <michael.s.klishin at gmail.com>:
>
> 2014/1/15 Blake-R <blake-r at mail.ru>
>>
>> Can I'm flush/reset management DB of unload management plugin on-the-fly?
>
>
> This thread has several messages that explain how to do it:
> http://markmail.org/thread/yj7o2c6rizp5lyk2
>
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin

From michael.s.klishin at gmail.com  Thu Jan 16 08:37:02 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 16 Jan 2014 12:37:02 +0400
Subject: [rabbitmq-discuss] 2.8.5: high cpu usage on return from standby
In-Reply-To: <1389842358517-32617.post@n5.nabble.com>
References: <041701cd7498$3c9a0430$b5ce0c90$@saseco.dk>
 <50211747.20002@rabbitmq.com>
 <C44C93396408924FBBF479F57FD429FCE7AC99@AM2PRD0210MB361.eurprd02.prod.outlook.com>
 <50A3C01C.70606@rabbitmq.com> <1380304107803-29997.post@n5.nabble.com>
 <52468727.3040504@rabbitmq.com> <1383155680214-31012.post@n5.nabble.com>
 <5273B300.10303@rabbitmq.com>
 <CAHcLveKQKMJ0kbDYCvBuL5Bexw6=Ok47aU4GZEX8pejyrJdX_A@mail.gmail.com>
 <5273CD49.3010903@rabbitmq.com> <1389842358517-32617.post@n5.nabble.com>
Message-ID: <CAE3HoVSR3jrB3rbh5sXiWR=c7Hrr4xVFL=SAkv4c2EOhdV0TKw@mail.gmail.com>

2014/1/16 cbetti <cbetti at gmail.com>

> FYI, the erl.exe 100% cpu after long standby issue persists.


It is an OTP issue:
http://markmail.org/thread/zlksjp24hifef5qk
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/3cff95a7/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan 16 08:39:36 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 16 Jan 2014 12:39:36 +0400
Subject: [rabbitmq-discuss] Install Error rabbitmq-server-3.2.1-1
In-Reply-To: <000301cf123a$29e6fa00$7db4ee00$@performixbiz.com>
References: <000301cf123a$29e6fa00$7db4ee00$@performixbiz.com>
Message-ID: <CAE3HoVRyG8iHjx5sTf-Z2a0Z_QpWHMOEpv8E6uDPQ4idEJZcbw@mail.gmail.com>

2014/1/16 Charan <charanr at shared.performixbiz.com>

> Already I have ?*zlib_1.2.3*? installed on my server, still I am facing
> the above error. I thought of installing ?*zlib_1.2.2*? but couldn?t find
> it in any repository.
>

You can install Erlang from Erlang Solutions [1]
and then install RabbitMQ RPM with --nodeps.

1. https://www.erlang-solutions.com/downloads/download-erlang-otp
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/d84e2cfc/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan 16 08:45:08 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 16 Jan 2014 12:45:08 +0400
Subject: [rabbitmq-discuss] Unable to connect to rabbit@localhost:
	nodedown
In-Reply-To: <CAERdRxua+0JbgVgHs3wbM0jzd0-rcB4gMbNQHh4=Zxn_G2Pvsw@mail.gmail.com>
References: <CAERdRxua+0JbgVgHs3wbM0jzd0-rcB4gMbNQHh4=Zxn_G2Pvsw@mail.gmail.com>
Message-ID: <CAE3HoVQyX9gGNECjjaH4gdk9iW4B820z2zyBwRmHe1khCvgbOA@mail.gmail.com>

2014/1/16 Alex L <buzz42j at gmail.com>

> I recently stopped my rabbitmq server and tried to start it again but it
> can't reconnect for some reason.
>
> I killed background processes that rabbitmq was running and tried to start
> the connection again but every time I try the boot fails. I looked into the
> log file and I'm getting a timeout_waiting_for_tables error as well. I'm
> not really sure what do to next to solve this.


Has your hostname or /etc/hosts contents changed recently?

RabbitMQ database is stored in a directory that has hostname in the path.
You may need to make the two match (e.g. by renaming the directory).

See Issue With Hostname on http://www.rabbitmq.com/ec2.html
and http://www.rabbitmq.com/relocate.html
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/fbcbb870/attachment.html>

From emile at rabbitmq.com  Thu Jan 16 09:49:58 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 16 Jan 2014 09:49:58 +0000
Subject: [rabbitmq-discuss] How to use Presence Exchange Plugin using
 STOMP and RabbitMQ Server v3.2.1?
In-Reply-To: <BLU176-W365517B65C6C99F17E9A95ADB90@phx.gbl>
References: <BLU176-W293642F4DDDF8403CEBE03ADBD0@phx.gbl>,
 <52D3E006.1010904@rabbitmq.com>
 <BLU176-W365517B65C6C99F17E9A95ADB90@phx.gbl>
Message-ID: <52D7AB46.3050009@rabbitmq.com>


Hi,

On 16/01/14 04:30, Joshua Lim wrote:

> d:/RabbitMQ/build-source/rabbitmq-public-umbrella/generate_deps

Plugin development on Windows is likely to fail due to incompatible
filesystem conventions. Using Linux worked for me.



-Emile



From simon at rabbitmq.com  Thu Jan 16 10:12:45 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 16 Jan 2014 10:12:45 +0000
Subject: [rabbitmq-discuss] Install Error rabbitmq-server-3.2.1-1
In-Reply-To: <CAE3HoVRyG8iHjx5sTf-Z2a0Z_QpWHMOEpv8E6uDPQ4idEJZcbw@mail.gmail.com>
References: <000301cf123a$29e6fa00$7db4ee00$@performixbiz.com>
 <CAE3HoVRyG8iHjx5sTf-Z2a0Z_QpWHMOEpv8E6uDPQ4idEJZcbw@mail.gmail.com>
Message-ID: <52D7B09D.7020201@rabbitmq.com>

On 16/01/14 08:39, Michael Klishin wrote:
> You can install Erlang from Erlang Solutions [1]

Yes, that could well help.

> and then install RabbitMQ RPM with --nodeps.

Or better still, use https://github.com/jasonmcintosh/esl-erlang-compat 
since "--nodeps" is usually not a great idea.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Thu Jan 16 10:39:46 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 16 Jan 2014 10:39:46 +0000
Subject: [rabbitmq-discuss] memory leak with RabbitMQ 3.1.0 and erlang
 R16B03
In-Reply-To: <CAAjbVJCntKor1hG+jGeo82No-T+0ePeNUXOeoDjdjF4K2_qN3Q@mail.gmail.com>
References: <CAAjbVJCntKor1hG+jGeo82No-T+0ePeNUXOeoDjdjF4K2_qN3Q@mail.gmail.com>
Message-ID: <52D7B6F2.8040604@rabbitmq.com>

A couple of memory leaks have been fixed in the management plugin since 
3.1.0. From the changelog:

25600 fix consumer record leak in the management database (since 2.2.0)
25629 fix memory leak in the presence of long-lived channels and
       short-lived queues (since 3.1.0)

So an upgrade is definitely advised.

Cheers, Simon

On 16/01/14 03:33, Xie Yunpeng wrote:
> my rabbitmq cluster consist of three rabbitmq service on three machine,
> and i use lvs to make other services can use one ip address connect to
> rabbitmq server. one of the machine handle three hundred connections and
> more than four thousand channles, send and revice rate is the same so
> there is no msg in queue.but it's memory usage is growing all the time
> until i stop_app/start_app, when i check memory usage on rabbitmq
> management it shows 2.3G, but i use top on the machine can see the
> rabbitmq use about 13G memory, how to solve this problem? is it a bug?
> memory info on this machine with rabbitmqctl report:
>   {erlang_version,
>       "Erlang R16B03 (erts-5.10.4) [source] [64-bit] [smp:24:24]
> [async-threads:30] [hipe] [kernel-poll:true]\n"},
>   {memory,
>       [{total,2476273832},
>        {connection_procs,155880032},
>        {queue_procs,5600},
>        {plugins,590576},
>        {other_proc,22481760},
>        {mnesia,104832},
>        {mgmt_db,2184042360},
>        {msg_index,40560},
>        {other_ets,41907368},
>        {binary,34012872},
>        {code,19853836},
>        {atom,703377},
>        {other_system,16650659}]},
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Thu Jan 16 10:49:56 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 16 Jan 2014 10:49:56 +0000
Subject: [rabbitmq-discuss] Using SAN replication for DR
In-Reply-To: <54e4baf9-d84a-4633-9085-9898287f567f@googlegroups.com>
References: <54e4baf9-d84a-4633-9085-9898287f567f@googlegroups.com>
Message-ID: <52D7B954.5050308@rabbitmq.com>

On 15/01/14 21:10, dmcintyre at gopivotal.com wrote:
> How robust is the on-disk format for persistent messages?

Reasonably.

The format was designed to be robust in the case of power failures or 
broker / VM / OS crashes. It journals changes to both queue indices and 
the message store to make it likely that in such cases the only data 
you'll lose is stuff that hasn't yet been fsync'ed.

> The scenario I'm looking at uses a SAN for the disk storage, with
> replication to a remote DC for DR.
>
> What happens if, during the death of the primary DC, e.g. a corrupt
> block gets replicated to the remote? Will all messages in the store be
> lost, or only the ones around the corrupt block?

However, if the store actually gets *corrupted* then it's more plausible 
that data will be lost; we can't necessarily resynchronise when reading 
one of the journals for instance.

I would hope that your SAN doesn't corrupt data :-)

Another alternative would be to replicate using the shovel or 
federation, and set a message TTL policy globally on the DR server (to 
be removed at failover) to prevent you from eating disk space forever.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From blake-r at mail.ru  Thu Jan 16 10:52:29 2014
From: blake-r at mail.ru (Blake-R)
Date: Thu, 16 Jan 2014 14:52:29 +0400
Subject: [rabbitmq-discuss] memory leak with RabbitMQ 3.1.0 and erlang
	R16B03
In-Reply-To: <52D7B6F2.8040604@rabbitmq.com>
References: <CAAjbVJCntKor1hG+jGeo82No-T+0ePeNUXOeoDjdjF4K2_qN3Q@mail.gmail.com>
 <52D7B6F2.8040604@rabbitmq.com>
Message-ID: <CAJhFpdc6xeWkFFjO7A_8UWd3qciWr91kTuR5czqZhRDL0xc8Ng@mail.gmail.com>

Hi. I'm use last RabbitMQ 3.2.2 and got same problem:
http://rabbitmq.1065348.n5.nabble.com/badarg-in-dict-fetch-problem-on-basic-consume-ok-or-not-tp32572p32597.html

2014/1/16 Simon MacMullen <simon at rabbitmq.com>:
> A couple of memory leaks have been fixed in the management plugin since
> 3.1.0. From the changelog:
>
> 25600 fix consumer record leak in the management database (since 2.2.0)
> 25629 fix memory leak in the presence of long-lived channels and
>       short-lived queues (since 3.1.0)
>
> So an upgrade is definitely advised.
>
> Cheers, Simon
>
>
> On 16/01/14 03:33, Xie Yunpeng wrote:
>>
>> my rabbitmq cluster consist of three rabbitmq service on three machine,
>> and i use lvs to make other services can use one ip address connect to
>> rabbitmq server. one of the machine handle three hundred connections and
>> more than four thousand channles, send and revice rate is the same so
>> there is no msg in queue.but it's memory usage is growing all the time
>> until i stop_app/start_app, when i check memory usage on rabbitmq
>> management it shows 2.3G, but i use top on the machine can see the
>> rabbitmq use about 13G memory, how to solve this problem? is it a bug?
>> memory info on this machine with rabbitmqctl report:
>>   {erlang_version,
>>       "Erlang R16B03 (erts-5.10.4) [source] [64-bit] [smp:24:24]
>> [async-threads:30] [hipe] [kernel-poll:true]\n"},
>>   {memory,
>>       [{total,2476273832},
>>        {connection_procs,155880032},
>>        {queue_procs,5600},
>>        {plugins,590576},
>>        {other_proc,22481760},
>>        {mnesia,104832},
>>        {mgmt_db,2184042360},
>>        {msg_index,40560},
>>        {other_ets,41907368},
>>        {binary,34012872},
>>        {code,19853836},
>>        {atom,703377},
>>        {other_system,16650659}]},
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From simon at rabbitmq.com  Thu Jan 16 10:56:47 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 16 Jan 2014 10:56:47 +0000
Subject: [rabbitmq-discuss] Dead-Lettering Queue Contents On Queue
	Expiration
In-Reply-To: <CABWF3X0-f8CMJ3PCVjrhcpBaz9bjwC8taO-JszM6R-8UyX9SxQ@mail.gmail.com>
References: <CABWF3X0-f8CMJ3PCVjrhcpBaz9bjwC8taO-JszM6R-8UyX9SxQ@mail.gmail.com>
Message-ID: <52D7BAEF.8010208@rabbitmq.com>

On 14/01/14 19:20, Alex Robson wrote:
> Hello all,
>
> I would like to see messages in an expired queue published to the
> dead-letter exchange (if one has been provided) instead of having them lost.

Yes, this would be a nice feature to have.

The reason why we haven't yet implemented this (besides the usual "not 
enough time") is that our current dead-lettering implementation depends 
on the queue republishing messages, and it's not obvious that this would 
perform acceptably in the case where you dead-letter a queue that is too 
large to fit in memory.

<snip explanation of use case>

> Interested in your thoughts on this. If folks like the idea but there's
> not a great deal of bandwidth, I'd be happy to attempt an initial
> implementation via PR.

We've been thinking similar thoughts about load balancing. So there's 
definitely some interest there. If you want to send us a PR then that's 
great, but please be aware that a) you'd need to sign a contributor 
agreement and b) it might be harder than you think. But c) it might not :-)

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Thu Jan 16 11:09:34 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 16 Jan 2014 11:09:34 +0000
Subject: [rabbitmq-discuss] Federation Topologies & Limitations
In-Reply-To: <52D6DF5A.6070103@one.com>
References: <52D6DF5A.6070103@one.com>
Message-ID: <52D7BDEE.5000902@rabbitmq.com>

On 15/01/14 19:19, Josh West wrote:
> I am experimenting with different architectures and it seems that in
> order to prevent message duplications, I'll have to go with a complete
> graph and max-hops set to 1 -- or in other words, each broker will have
> to directly federate with the other 100-200 brokers.

Yeah, there isn't any cycle detection in federated exchanges (yet). I 
keep wondering about adding it, but the trouble is that I suspect people 
really want deduplication rather than cycle detection. So that means 
either deduplication buffers that can get arbitrarily large (when do you 
drop message IDs from them) or some sort of routing algorithm to 
automatically remove duplicate routes from the federated broker set 
(which requires a global view at least, and is also probably quite 
complicated and error prone).

So I don't know of any good solutions for large federations other than 
max-hops = 1.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Thu Jan 16 11:11:51 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 16 Jan 2014 11:11:51 +0000
Subject: [rabbitmq-discuss] Mirrored Queues in master and slaves
In-Reply-To: <CAERdRxt6za2rg2C91vKmuGbfY=Q08t9KH+gf7ohRaxyW7gkyUg@mail.gmail.com>
References: <CAERdRxvsoDpSkAV9e-H2AwKWpLiPsQ7LnhHPcuUHHoVeVhy9Jg@mail.gmail.com>
 <52D63DB1.40502@rabbitmq.com>
 <CAERdRxt6za2rg2C91vKmuGbfY=Q08t9KH+gf7ohRaxyW7gkyUg@mail.gmail.com>
Message-ID: <52D7BE77.1040908@rabbitmq.com>

Please keep rabbitmq-discuss on CC, that way everyone can see the answers.

On 15/01/14 18:14, Alex L wrote:
> So when the master enqueues it, the message will go to a slave.
> Is there a way in Python's pika package (the same one used in the
> tutorials) to find out which particular slave node I'm currently using
> for that message?

When the master enqueues a message it will get routed to all slaves as 
well. When you consume, you consume from the master and the master then 
tells slaves to drop messages that have been consumed.

So you're not really "using" a slave node at any point.

What problem are you trying to solve here?

Cheers, Simon

> On Tue, Jan 14, 2014 at 11:50 PM, Simon MacMullen <simon at rabbitmq.com
> <mailto:simon at rabbitmq.com>> wrote:
>
>     On 15/01/2014 00:56, Alex L wrote:
>
>         But when I publish a message, how would I know if I'm using the
>         master's
>         queue, or specifically one of the slave's queues?
>
>
>     On a conceptual level, the message will always be routed to the
>     master. On a practical level it will also go to all of the slaves
>     (in case the master fails before seeing it) but the master will be
>     the one in charge of enqueuing it.
>
>
>         Is there a way to find which queue I'm using?
>
>
>     It's best to view the queue as one distributed object, but if you
>     need to find out the current master you can use rabbitmqctl or the
>     management API.
>
>
>         And would it be possible to send a message directly to a slave
>         without
>         having it go through it's master?
>
>
>     No.
>
>     Cheers, Simon
>
>


-- 
Simon MacMullen
RabbitMQ, Pivotal

From mklishin at gopivotal.com  Thu Jan 16 11:25:55 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 16 Jan 2014 15:25:55 +0400
Subject: [rabbitmq-discuss] Dead-Lettering Queue Contents On Queue
	Expiration
In-Reply-To: <52D7BAEF.8010208@rabbitmq.com>
References: <CABWF3X0-f8CMJ3PCVjrhcpBaz9bjwC8taO-JszM6R-8UyX9SxQ@mail.gmail.com>
 <52D7BAEF.8010208@rabbitmq.com>
Message-ID: <2D0F726F-6885-44F5-85D1-192853189923@rabbitmq.com>


On 16 Jan 2014, at 14:56, Simon MacMullen <simon at rabbitmq.com> wrote:

> If you want to send us a PR then that's great, but please be aware that a) you'd need to sign a contributor agreement and b) it might be harder than you think. But c) it might not :-)

FTR:
https://github.com/rabbitmq/rabbitmq-server/pull/29/files

MK

Software Engineer, Pivotal/RabbitMQ



From emile at rabbitmq.com  Thu Jan 16 11:45:01 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 16 Jan 2014 11:45:01 +0000
Subject: [rabbitmq-discuss] Using x-max-length custom header with STOMP
 adapter
In-Reply-To: <31688ffb-61bc-4274-9c80-cdc06dabe2aa@googlegroups.com>
References: <31688ffb-61bc-4274-9c80-cdc06dabe2aa@googlegroups.com>
Message-ID: <52D7C63D.80504@rabbitmq.com>


Hi,

On 14/01/14 17:23, Matthew Holt wrote:

> PRECONDITION_FAILED - inequivalent arg 'x-max-length'for queue 'test' in 
> vhost '/': received none but current is the value '50' of type 'long'
> Connection closed by foreign host.

> Is this a bug in the RabbitMQ STOMP adapter or am I doing something wrong?

The STOMP adapter does not interpret additional headers as queue
arguments. I wouldn't call that a bug unless there was documentation
claiming otherwise.

If you want to make use of a pre-declared queue then use the /amq/queue
prefix rather than /queue . That will prevent the "precondition failed"
error.

See "AMQ Queue Destinations":
http://www.rabbitmq.com/stomp.html


-Emile

From michael.s.klishin at gmail.com  Thu Jan 16 11:56:44 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 16 Jan 2014 15:56:44 +0400
Subject: [rabbitmq-discuss] ANN amqp gem 1.2.0 is released
Message-ID: <CAE3HoVTS-MD=KNd=au_dT7vStb5p9xEEzA3HdviiCE9Egn4Tog@mail.gmail.com>

amqp gem [1] 1.2.0 is released to rubygems.org.

Release notes:
http://blog.rubyrabbitmq.info/blog/2014/01/14/amqp-gem-1-dot-2-0-is-released/

1. http://rubyamqp.info
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/93f28e5a/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan 16 11:58:00 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 16 Jan 2014 15:58:00 +0400
Subject: [rabbitmq-discuss] ANN March Hare 2.1.0 is released
Message-ID: <CAE3HoVS0nGdk61+YLRihv6-PGHAFjw9OorGoM6u19jE=uyVmrg@mail.gmail.com>

March Hare (n?e Hot Bunnies) [1] is a very fast, easy to use RabbitMQ
client for JRuby.

Release notes:
http://blog.rubyrabbitmq.info/blog/2014/01/16/march-hare-2-dot-1-0-is-released/

1. http://rubymarchhare.info
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/7c713ac0/attachment.html>

From dmcintyre at gopivotal.com  Thu Jan 16 12:54:28 2014
From: dmcintyre at gopivotal.com (dmcintyre at gopivotal.com)
Date: Thu, 16 Jan 2014 04:54:28 -0800 (PST)
Subject: [rabbitmq-discuss] connection.blocked - documentation inconsistency
Message-ID: <f5ec756d-2853-4e12-95c2-23d259362021@googlegroups.com>

In the code samples for dealing with blocked connections appears the 
comment:

// Connection is now blocked.
            // Note that it may be triggered more than once before
            // the connection unblocks!


And in the description it says:

If before the connections are unblocked the node also starts running low on 
disk space, another connection.blocked will *not* be sent.


Which is correct, and if both are correct, why?

D.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/b80b1d07/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan 16 12:58:20 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 16 Jan 2014 16:58:20 +0400
Subject: [rabbitmq-discuss] connection.blocked - documentation
	inconsistency
In-Reply-To: <f5ec756d-2853-4e12-95c2-23d259362021@googlegroups.com>
References: <f5ec756d-2853-4e12-95c2-23d259362021@googlegroups.com>
Message-ID: <CAE3HoVT5DVBC_czmbn=fif=G1T35nS9acN2K5-qxNHuNkPFM2Q@mail.gmail.com>

2014/1/16 <dmcintyre at gopivotal.com>

> Which is correct, and if both are correct, why?


The description.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/a0efead6/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan 16 13:04:38 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 16 Jan 2014 17:04:38 +0400
Subject: [rabbitmq-discuss] connection.blocked - documentation
	inconsistency
In-Reply-To: <CAE3HoVT5DVBC_czmbn=fif=G1T35nS9acN2K5-qxNHuNkPFM2Q@mail.gmail.com>
References: <f5ec756d-2853-4e12-95c2-23d259362021@googlegroups.com>
 <CAE3HoVT5DVBC_czmbn=fif=G1T35nS9acN2K5-qxNHuNkPFM2Q@mail.gmail.com>
Message-ID: <CAE3HoVRt6iAEOmTLP7LYDked0u_dM8J+LaR-Z9-EmwHTguVH4Q@mail.gmail.com>

2014/1/16 Michael Klishin <michael.s.klishin at gmail.com>

> Which is correct, and if both are correct, why?
>
>
> The description.


Fixed:
http://www.rabbitmq.com/connection-blocked.html
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/f63bbb8f/attachment.html>

From dmcintyre at gopivotal.com  Thu Jan 16 13:09:37 2014
From: dmcintyre at gopivotal.com (Duncan McIntyre)
Date: Thu, 16 Jan 2014 13:09:37 +0000
Subject: [rabbitmq-discuss] connection.blocked - documentation
	inconsistency
In-Reply-To: <CAE3HoVRt6iAEOmTLP7LYDked0u_dM8J+LaR-Z9-EmwHTguVH4Q@mail.gmail.com>
References: <f5ec756d-2853-4e12-95c2-23d259362021@googlegroups.com>
 <CAE3HoVT5DVBC_czmbn=fif=G1T35nS9acN2K5-qxNHuNkPFM2Q@mail.gmail.com>
 <CAE3HoVRt6iAEOmTLP7LYDked0u_dM8J+LaR-Z9-EmwHTguVH4Q@mail.gmail.com>
Message-ID: <CAAaVn2CDdCZcda+1RCHP9fOkr26X_G7dmHi0sfMmPGivx-Lxfw@mail.gmail.com>

Don't forget our .Net friends!

Thanks,

Duncan


On Thu, Jan 16, 2014 at 1:04 PM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

> 2014/1/16 Michael Klishin <michael.s.klishin at gmail.com>
>
>> Which is correct, and if both are correct, why?
>>
>>
>> The description.
>
>
> Fixed:
> http://www.rabbitmq.com/connection-blocked.html
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
----
Duncan McIntyre
Senior Consultant
dmcintyre at gopivotal.com
+44 7917 580 118
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/fc3a7719/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan 16 13:15:24 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 16 Jan 2014 17:15:24 +0400
Subject: [rabbitmq-discuss] connection.blocked - documentation
	inconsistency
In-Reply-To: <CAAaVn2CDdCZcda+1RCHP9fOkr26X_G7dmHi0sfMmPGivx-Lxfw@mail.gmail.com>
References: <f5ec756d-2853-4e12-95c2-23d259362021@googlegroups.com>
 <CAE3HoVT5DVBC_czmbn=fif=G1T35nS9acN2K5-qxNHuNkPFM2Q@mail.gmail.com>
 <CAE3HoVRt6iAEOmTLP7LYDked0u_dM8J+LaR-Z9-EmwHTguVH4Q@mail.gmail.com>
 <CAAaVn2CDdCZcda+1RCHP9fOkr26X_G7dmHi0sfMmPGivx-Lxfw@mail.gmail.com>
Message-ID: <CAE3HoVSRV4SswYgvV-_Zw4TobnLqC=55BbUX0K5myXh-byniFQ@mail.gmail.com>

2014/1/16 Duncan McIntyre <dmcintyre at gopivotal.com>

> Don't forget our .Net friends!


Doh. Fixed, too :)

http://www.rabbitmq.com/connection-blocked.html

-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/5f260702/attachment.html>

From ravir.pandey at commusoft.co.uk  Thu Jan 16 13:28:13 2014
From: ravir.pandey at commusoft.co.uk (Ravir Pandey)
Date: Thu, 16 Jan 2014 18:58:13 +0530
Subject: [rabbitmq-discuss] Send HTTP request and get response using RabbitMQ
Message-ID: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>

Is there any way to send http request and get response from server.

For Ex. - i want to send request to my http server http://341.23.43.21,
after processing request i need a reply from same server.

How can i achieve this?

Ravi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/a3dac5d9/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan 16 13:42:55 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 16 Jan 2014 17:42:55 +0400
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
Message-ID: <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>

2014/1/16 Ravir Pandey <ravir.pandey at commusoft.co.uk>

> For Ex. - i want to send request to my http server http://341.23.43.21,
> after processing request i need a reply from same server.
>
> How can i achieve this?
>

Do you want to send an HTTP request to RabbitMQ or to an HTTP app that
contacts another service
over RabbitMQ?
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/dcbf0032/attachment.html>

From ravir.pandey at commusoft.co.uk  Thu Jan 16 13:53:56 2014
From: ravir.pandey at commusoft.co.uk (Ravir Pandey)
Date: Thu, 16 Jan 2014 19:23:56 +0530
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
Message-ID: <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>

I want to send an HTTP request to HTTP app that contact another service but
through RabbitMQ.


On Thu, Jan 16, 2014 at 7:12 PM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

> 2014/1/16 Ravir Pandey <ravir.pandey at commusoft.co.uk>
>
>> For Ex. - i want to send request to my http server http://341.23.43.21,
>> after processing request i need a reply from same server.
>>
>> How can i achieve this?
>>
>
> Do you want to send an HTTP request to RabbitMQ or to an HTTP app that
> contacts another service
> over RabbitMQ?
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/bf87b774/attachment.html>

From mklishin at gopivotal.com  Thu Jan 16 13:56:16 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 16 Jan 2014 17:56:16 +0400
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
 <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
Message-ID: <B06CC0D0-A3A7-46A1-A3C0-357EEE69E361@rabbitmq.com>

On 16 Jan 2014, at 17:53, Ravir Pandey <ravir.pandey at commusoft.co.uk> wrote:

> I want to send an HTTP request to HTTP app that contact another service but through RabbitMQ.

Take a look at tutorial 6:
http://www.rabbitmq.com/getstarted.html

MK

Software Engineer, Pivotal/RabbitMQ



From ravir.pandey at commusoft.co.uk  Thu Jan 16 14:00:12 2014
From: ravir.pandey at commusoft.co.uk (Ravir Pandey)
Date: Thu, 16 Jan 2014 19:30:12 +0530
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <B06CC0D0-A3A7-46A1-A3C0-357EEE69E361@rabbitmq.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
 <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
 <B06CC0D0-A3A7-46A1-A3C0-357EEE69E361@rabbitmq.com>
Message-ID: <CA+3MLFiUVV+6=L=vs7O=M09=ex5=jT4W_e1wH+V6rLvs2PzWhw@mail.gmail.com>

basically I have my own web application which uses third party API's
through which thousand of HTTP request being sent daily. I want to do this
through RabbitMQ.

Yes mate, i have gone through http://www.rabbitmq.com/getstarted.html. I
got some examples but most of the example uses tcp protocol to send
messages.


On Thu, Jan 16, 2014 at 7:26 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> On 16 Jan 2014, at 17:53, Ravir Pandey <ravir.pandey at commusoft.co.uk>
> wrote:
>
> > I want to send an HTTP request to HTTP app that contact another service
> but through RabbitMQ.
>
> Take a look at tutorial 6:
> http://www.rabbitmq.com/getstarted.html
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/c4146e44/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan 16 14:15:14 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 16 Jan 2014 18:15:14 +0400
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <CA+3MLFiUVV+6=L=vs7O=M09=ex5=jT4W_e1wH+V6rLvs2PzWhw@mail.gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
 <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
 <B06CC0D0-A3A7-46A1-A3C0-357EEE69E361@rabbitmq.com>
 <CA+3MLFiUVV+6=L=vs7O=M09=ex5=jT4W_e1wH+V6rLvs2PzWhw@mail.gmail.com>
Message-ID: <CAE3HoVRLd8DzkQAxB1wfkuGdfT+0+0mK9ng96Gs+4jFiB9tQzg@mail.gmail.com>

2014/1/16 Ravir Pandey <ravir.pandey at commusoft.co.uk>

> basically I have my own web application which uses third party API's
> through which thousand of HTTP request being sent daily. I want to do this
> through RabbitMQ.
>

So you want a separate service (S) to contact HTTP API on behalf of your
Web app? Then you can do RPC over RabbitMQ to S
and then S can issue HTTP requests.


> Yes mate, i have gone through http://www.rabbitmq.com/getstarted.html. I
> got some examples but most of the example uses tcp protocol to send
> messages.
>

RabbitMQ protocol(s) assume TCP. There is no way to do AMQP 0.9.1 over HTTP
or MQTT over HTTP.

RabbitMQ has HTTP API which is focused on monitoring. You can publish and
fetch messages over it but it's not particularly efficient.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/12495bf5/attachment.html>

From kokdemir at gmail.com  Thu Jan 16 17:18:42 2014
From: kokdemir at gmail.com (Ibrahim Edib Kokdemir)
Date: Thu, 16 Jan 2014 09:18:42 -0800 (PST)
Subject: [rabbitmq-discuss] management gui proxypass
Message-ID: <5ac38699-522a-470c-85b3-82250ed0fd18@googlegroups.com>

I want to access management gui via web server proxy like nginx or apache. 
I have installed all necessary thing but there is one problem. when I try 
to access via proxy like /rmq. I can get the main gui and main links. but 
when I try to access links like 
"/rmq/#/queues/%2F/request.13.759.main.queue"  page shows me "not found" 
error. I think that it is related with link type. 
how can I overcome this problem?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/dab62ab3/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan 16 17:54:44 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 16 Jan 2014 21:54:44 +0400
Subject: [rabbitmq-discuss] management gui proxypass
In-Reply-To: <5ac38699-522a-470c-85b3-82250ed0fd18@googlegroups.com>
References: <5ac38699-522a-470c-85b3-82250ed0fd18@googlegroups.com>
Message-ID: <CAE3HoVSOF1CKO=WEa=nRA8_Q1c6adGaLuNCZE8RSm_p54ZPqMw@mail.gmail.com>

2014/1/16 Ibrahim Edib Kokdemir <kokdemir at gmail.com>

> I want to access management gui via web server proxy like nginx or apache.
> I have installed all necessary thing but there is one problem. when I try
> to access via proxy like /rmq. I can get the main gui and main links. but
> when I try to access links like
> "/rmq/#/queues/%2F/request.13.759.main.queue"  page shows me "not found"
> error. I think that it is related with link type.
> how can I overcome this problem?
>

You need to add a rewrite so that the /rmq prefix is stripped before the
request is proxied to
Rabbit.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/58015cab/attachment.html>

From nobozo at gmail.com  Thu Jan 16 18:22:53 2014
From: nobozo at gmail.com (Jon Forrest)
Date: Thu, 16 Jan 2014 10:22:53 -0800
Subject: [rabbitmq-discuss] Minor Correction to AMQP 0.9.1 Model Explained
	Diagram
Message-ID: <CAF0Z9ioH7DpU-NQiVzv-N6o8aW1MBiFy4NKmurWgQe9JqEj2NA@mail.gmail.com>

(I  had posted this to the list before I became a member so I hope it
doesn't go out twice).

I'm just starting to learn about RabbitMQ so I was readying the
AMQP 0.9.1 Model Explained Diagram document. It starts off by saying
that

    "messages are published by producers to exchanges"

but then in the "Hello, world" example routing diagram that follows,
the left most box is labeled "Publisher". Shouldn't it be labeled
"Producer"? This change makes the diagram correspond to the text.

Also, it would be slightly clearer if the white box were labeled
"broker".

Jon Forrest

From mklishin at gopivotal.com  Thu Jan 16 18:27:37 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 16 Jan 2014 22:27:37 +0400
Subject: [rabbitmq-discuss] Minor Correction to AMQP 0.9.1 Model
	Explained Diagram
In-Reply-To: <CAF0Z9ioH7DpU-NQiVzv-N6o8aW1MBiFy4NKmurWgQe9JqEj2NA@mail.gmail.com>
References: <CAF0Z9ioH7DpU-NQiVzv-N6o8aW1MBiFy4NKmurWgQe9JqEj2NA@mail.gmail.com>
Message-ID: <5A712840-7887-4BFB-BBE2-A91A79210406@rabbitmq.com>


On 16 Jan 2014, at 22:22, Jon Forrest <nobozo at gmail.com> wrote:

> I'm just starting to learn about RabbitMQ so I was readying the
> AMQP 0.9.1 Model Explained Diagram document. It starts off by saying
> that
> 
>    "messages are published by producers to exchanges"
> 
> but then in the "Hello, world" example routing diagram that follows,
> the left most box is labeled "Publisher". Shouldn't it be labeled
> "Producer"? This change makes the diagram correspond to the text.

Your earlier email did get to the list and the document was updated:
http://www.rabbitmq.com/tutorials/amqp-concepts.html

MK

Software Engineer, Pivotal/RabbitMQ



From jsw at one.com  Thu Jan 16 22:09:55 2014
From: jsw at one.com (Josh West)
Date: Thu, 16 Jan 2014 17:09:55 -0500
Subject: [rabbitmq-discuss] RPC across Federation
Message-ID: <52D858B3.2020401@one.com>

So, I seem to have encountered a limitation with Federation.  This is 
with regards to how bindings of exchanges/queues are propagated 
asynchronously, thus leading to the possibility of a race condition.

If you take the example outlined in Tutorial Six ( 
http://www.rabbitmq.com/tutorials/tutorial-six-python.html), and modify 
the code so that exchanges are used, you can get RPC requests and 
responses to traverse federated links.  In this example, the rpc_client 
creates a temporary callback queue and attaches the address of that 
queue to the message as a reply_to property.  Once the rpc_server 
receives the message and calculates the Fibonacci number, it sends the 
response back via a new message to the reply_to address...

Ok. This is all simple basic stuff to this point.

The problem lies in when the rpc_client creates it's temporary callback 
queue.  There is a race condition in which the rpc_client may move on by 
then sending the fib(n) message, the rpc_server receives + calculates 
the Fibonacci number, and then sends a response to the rpc_client's 
callback queue specified in props.reply_to -- all before the Federation 
plugin has propagated the binding of the callback queue to the exchange 
and other federated exchanges.  Thus, the response message gets 
lost/dropped.

Has anybody else experienced an issue like this?  Does anybody have 
suggestions as to how to properly provide RPC functionality across 
federated exchanges?

Thanks!

-- 
Josh West
One.com -http://www.one.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/5bc69177/attachment.html>

From mklishin at gopivotal.com  Thu Jan 16 22:36:01 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 17 Jan 2014 02:36:01 +0400
Subject: [rabbitmq-discuss] RPC across Federation
In-Reply-To: <52D858B3.2020401@one.com>
References: <52D858B3.2020401@one.com>
Message-ID: <0F12DF27-A984-49AD-AB23-80796DBC14DD@rabbitmq.com>

On 17 Jan 2014, at 02:09, Josh West <jsw at one.com> wrote:

> The problem lies in when the rpc_client creates it's temporary callback queue.  There is a race condition in which the rpc_client may move on by then sending the fib(n) message, the rpc_server receives + calculates the Fibonacci number, and then sends a response to the rpc_client's callback queue specified in props.reply_to -- all before the Federation plugin has propagated the binding of the callback queue to the exchange and other federated exchanges.  Thus, the response message gets lost/dropped.
> 
> Has anybody else experienced an issue like this?  Does anybody have suggestions as to how to properly provide RPC functionality across federated exchanges?

Federation is built for WAN and is AP in CAP.

The only solution I can think of is using a fixed topology (long lived queues instead of dynamically created ones) for responses.
You then can use correlation_id to tell which request an incoming response is for.

MK

Software Engineer, Pivotal/RabbitMQ



From roberto at canary.is  Fri Jan 17 00:51:35 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Thu, 16 Jan 2014 19:51:35 -0500
Subject: [rabbitmq-discuss] [RabbitMQ-c] Question about amqp_listen example
Message-ID: <CANAFtV5rkZn_N-UH4f28UB6oe3mV9fhZAC71Km8yRiUyFrvNMQ@mail.gmail.com>

I have a couple of questions about the overall functioning of Rabbitmq-c.

>From amqp_listen.c I see the following code:

  {
    while (1) {
      amqp_rpc_reply_t res;
      amqp_envelope_t envelope;

      amqp_maybe_release_buffers(conn);

      res = amqp_consume_message(conn, &envelope, NULL, 0);

      if (AMQP_RESPONSE_NORMAL != res.reply_type) {
        break;
      }

      printf("Delivery %u, exchange %.*s routingkey %.*s\n",
             (unsigned) envelope.delivery_tag,
             (int) envelope.exchange.len, (char *) envelope.exchange.bytes,
             (int) envelope.routing_key.len, (char *)
envelope.routing_key.bytes);

      if (envelope.message.properties._flags & AMQP_BASIC_CONTENT_TYPE_FLAG) {
        printf("Content-type: %.*s\n",
               (int) envelope.message.properties.content_type.len,
               (char *) envelope.message.properties.content_type.bytes);
      }

      amqp_destroy_envelope(&envelope);
    }
  }


First off, the output I'm getting when sending the string "Hello world" is
$ ./amqp_listen localhost 5672 amq.direct test
Delivery 1, exchange amq.direct routingkey test
Content-type: text/plain


1) Is that what the output should be like? I though it was supposed to
print out the string sent with amqp_sendstring on the other side.
2) In the code above, it looks like the printf is performed every time,
regardless of weather a message has been received or not. However, only
when a message is actually received, the printf will execute. Could someone
explain me why this is the case?



Thank you,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/62a0b664/attachment.html>

From gavinmroy at gmail.com  Fri Jan 17 00:57:19 2014
From: gavinmroy at gmail.com (Gavin M. Roy)
Date: Thu, 16 Jan 2014 19:57:19 -0500
Subject: [rabbitmq-discuss] AMQP Field Tables & Short Integers
Message-ID: <etPan.52d87fef.6b8b4567.2ea@gmr-home.local>

Hi all,

I ran into a small bug in pamqp where it tries to determine the best data type for an AMQP field table when packing data. I found that when I allow it to use a short int value, RabbitMQ can not properly decode it. I just went back and looked at the AMQP errata for field types at?http://www.rabbitmq.com/amqp-0-9-1-errata.html#section_3. Seems my mistake was using the AMQP-0-9-1 standard for field types with regard to short integers.

According to that table for 0-9-1, U should indicate a signed 16-bit integer value and?s should indicate a short string. These are the values I used, however RabbitMQ chokes on the U.

In looking at the code for the encoder and decoder in Rabbit, I see that s is used for short ints.

https://github.com/rabbitmq/rabbitmq-server/blob/master/src/rabbit_binary_generator.erl#L133
https://github.com/rabbitmq/rabbitmq-server/blob/master/src/rabbit_binary_parser.erl#L78

And that the AMQP-0-9-1 specified U is not supported at all. Additionally, the 0-9-1 s is only used for short ints. This is mentioned in the remarks.

Will RabbitMQ be staying with the misuse of s for shorts for the foreseeable future? Is there any intention or desire to add the specified U into the decoder and never support s for anything but short-int instead of short-string?

Regards,

Gavin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/50190aa9/attachment.html>

From matthias at rabbitmq.com  Fri Jan 17 00:57:36 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 17 Jan 2014 00:57:36 +0000
Subject: [rabbitmq-discuss] Dead-Lettering Queue Contents On Queue
	Expiration
In-Reply-To: <CABWF3X0-f8CMJ3PCVjrhcpBaz9bjwC8taO-JszM6R-8UyX9SxQ@mail.gmail.com>
References: <CABWF3X0-f8CMJ3PCVjrhcpBaz9bjwC8taO-JszM6R-8UyX9SxQ@mail.gmail.com>
Message-ID: <52D88000.9030907@rabbitmq.com>

On 14/01/14 19:20, Alex Robson wrote:
> The way we solve for this (within the realm of Rabbit) is to have a
> consistent-hash exchange that hashes the correlation-id which is set to
> our aggregate root (parent record id). This allows us to bind a
> queue-per-service-instance and get the isolation guarantees we like
> while still allowing us to horizontally scale. The problem with this
> approach is that in the event that a service loses its connection/falls
> over, messages in the queue sit and can be 'orphaned'.
>
> If we use a queue TTL policy for these kinds of queues, it will allow us
> to prevent orphaned queues, but presently it does not appear that the
> messages in the queue are published to the defined dead letter exchange.
> Since messages with a TLL behave this way, it seems logical that
> messages within a queue that expires could/should also take advantage of
> the same behavior.
>
> I believe it would be a real win for users everywhere as it allows for a
> really clean way to scale horizontally without increasing
> race-conditions, requiring distributed locking patterns or introducing
> failure modes that could result in message loss or dramatically
> increased latency in message processing.

How would you prevent messages from getting lost that are en-route to a 
queue that is about to expire?

Matthias.

From matthias at rabbitmq.com  Fri Jan 17 01:06:16 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 17 Jan 2014 01:06:16 +0000
Subject: [rabbitmq-discuss] Dead-Lettering Queue Contents On Queue
	Expiration
In-Reply-To: <52D88000.9030907@rabbitmq.com>
References: <CABWF3X0-f8CMJ3PCVjrhcpBaz9bjwC8taO-JszM6R-8UyX9SxQ@mail.gmail.com>
 <52D88000.9030907@rabbitmq.com>
Message-ID: <52D88208.3000304@rabbitmq.com>

On 17/01/14 00:57, Matthias Radestock wrote:
> How would you prevent messages from getting lost that are en-route to a
> queue that is about to expire?

And on a related note, since you said you are using the 
consistent-hash-exchange, be mindful of the following (from 
https://github.com/rabbitmq/rabbitmq-consistent-hash-exchange)

<quote>
Each message gets delivered to at most one queue. Normally, each message 
gets delivered to exactly one queue, but there is a race between the 
determination of which queue to send a message to, and the 
deletion/death of that queue that does permit the possibility of the 
message being sent to a queue which then disappears before the message 
is processed. Hence in general, at most one queue.
</quote>

In other words, the consistent-hash-exchange can lose messages when 
queues disappear.

Matthias

From mpietrek at skytap.com  Fri Jan 17 01:11:34 2014
From: mpietrek at skytap.com (Matt Pietrek)
Date: Thu, 16 Jan 2014 17:11:34 -0800
Subject: [rabbitmq-discuss] A question on federation status reporting
In-Reply-To: <52D50AA1.30602@rabbitmq.com>
References: <CACLE7iy1MB81xAOgD_71HNN7XTkOumB0e5aVDVfE-=n0VwE=Rw@mail.gmail.com>
 <52D42EA8.7060203@rabbitmq.com>
 <CACLE7iwuQ5+FRZySHZGMzuvZhoFuXT2_ZBAY8Hfo+A_3EHqRTg@mail.gmail.com>
 <52D50AA1.30602@rabbitmq.com>
Message-ID: <CACLE7ixv8w1s_ftqsgdrxCOSgKPjXJbHFrn0fR36HTVEYk6Hcw@mail.gmail.com>

Simon,

Ultimately, I got this to work by adding:

"apply-to":"exchanges"

to my profile definitions.


However, one issue you may want to know about. After reapplying my profile,
I didn't see a reduction in links like I'd expect, despite the fact that
the

 In fact, even restarting the broker caused the broken state to remain.

In order to get this policy to take effect, I need to restart the brokers.
Not sure if this is expected behavior or not.

Thanks,

Matt


On Tue, Jan 14, 2014 at 2:00 AM, Simon MacMullen <simon at rabbitmq.com> wrote:

> Hi Matt.
>
> Your policy applies to exchanges and queues with "skytap" in the name -
> that includes the internal queues. Since the policy includes "ha-mode" I'm
> assuming you want it to apply to both exchanges and queues - so you could
> (1) change the regex to "^skytap" (i.e. names have to start with skytap,
> not just contain it or (2) create a second policy to apply "ha-mode" to
> queues and set the current policy to apply to exchanges only.
>
> Note that as of 3.2.x policies can be set to apply to exchanges or queues
> or both: http://www.rabbitmq.com/parameters.html#policies
>
> Cheers, Simon
>
>
> On 13/01/2014 23:49, Matt Pietrek wrote:
>
>> Thanks Simon!
>>
>> I'm not sure how I manage to misconfigure my federation to include the
>> internal queues.
>>
>> If it helps, here's what my Policies page shows for the federation:
>>
>> skytap-federation
>> <http://tuk5r1mqvip1.mgt.integ.skytap.com:15672/#/
>> policies/%2F/skytap-federation>
>>
>> skytap  all
>> federation-upstream-set:        all
>> ha-mode:        all
>>
>>         0
>>
>>
>>
>> And her are the snippets of python code I use to set up federation:
>>
>> rabbitmq_invoke_http_api(broker_host,
>>                                        'PUT',
>>
>> '/api/parameters/federation-upstream/%%2f/upstream-%s' %
>> (quote_plus(federated_broker)),
>>
>> '{"value":{"uri":"amqp://%(username)s:%(password)s@%(host)s:%(port)s"}}'
>> % (federated_settings))
>>
>> then,
>>
>> rabbitmq_invoke_http_api(broker_host,
>>                                        'PUT',
>>
>> '/api/policies/%2f/skytap-federation',
>>                                        '{"pattern":"skytap",
>> "definition":{"federation-upstream-set":"all","ha-mode":"all"}}')
>>
>>
>>
>> Thanks again,
>>
>> Matt
>>
>>
>>
>> On Mon, Jan 13, 2014 at 10:21 AM, Simon MacMullen <simon at rabbitmq.com
>> <mailto:simon at rabbitmq.com>> wrote:
>>
>>     Hi Matt.
>>
>>     Federated exchanges declare queues for internal use. These are the
>>     queues with names beginning "federation: " which you have probably
>>     already seen.
>>
>>     It looks like in your case those internal queues are themselves
>>     becoming federated. This is unlikely to be a useful thing.
>>
>>     You should review your federation policies and make sure those
>>     queues are not included in them. If you don't intend to federate
>>     queues at all then the easiest way is to set the federation policy
>>     to only apply to exchanges.
>>
>>     I'll also file a bug to prevent those queues from ever federating,
>>     regardless of policy...
>>
>>     Cheers, Simon
>>
>>
>>     On 13/01/2014 18:08, Matt Pietrek wrote:
>>
>>         We have a bi-directional federation setup between three nodes
>>         like this
>>         on RabbitMQ 3.2.2:
>>
>>         mq_integ/sea <===> mq_integ <===> mq_integ/tuk
>>
>>
>>         All three nodes use a "skytap" exchange and the mq_integ/sea
>>         and mq_integ/tuk are *_not_* federated with each other
>>
>>         Here's what's interesting. In the *mq_integ/sea* broker, the
>>         "Federation
>>
>>         Upstreams" page is what I'd expect it to be, that is, a
>>         connection to
>>         mq_integ:
>>         Name    URI     Expiry  Message TTL     Max Hops        Prefetch
>>         Count  Reconnect Delay
>>         Ack mode        Trust User-ID
>>         upstream-integ
>>         <http://tuk5r1mq1.mgt.integ.__skytap.com:15672/#/federation-
>> __upstreams/%2F/upstream-integ
>>
>>         <http://tuk5r1mq1.mgt.integ.skytap.com:15672/#/federation-
>> upstreams/%2F/upstream-integ>>
>>
>>         amqp://foo:bar at sea_m2:5672
>>                 ?       ?
>>
>>
>>         However, in the "Federation Status" page for *mq_integ/sea* looks
>>
>>         strange (see below). In particular, I see four entries, whereas in
>>         RabbitMQ 3.0.2 I only saw one line.
>>
>>         In addition, the third entry references the mq_integ/tuk broker,
>>         even
>>         though I haven't configured mq_integ/sea to know anything about
>>         mq_integ/tuk:
>>
>>
>>         Connection      URI     Exchange / Queue        Node    State
>>         Inbound message rate    Last
>>         changed
>>         upstream-integ  amqp://sea_m2:5672      federation: skytap ->
>>         mq_integ_queue
>>
>>         rabbit at sea_r2
>>         running
>>                          2014-01-11 1:35:28
>>         upstream-integ  amqp://sea5_m2:5672     federation: skytap ->
>>         mq_integ/sea_queue      rabbit at sea_r2
>>         running
>>                          2014-01-11 1:35:28
>>         upstream-integ  amqp://sea_m2:5672      federation: skytap ->
>>         mq_integ/tuk_queue      rabbit at sea_r2
>>         running
>>                          2014-01-11 1:35:29
>>         upstream-integ  amqp://sea_m2:5672      skytap_exchange
>>         rabbit at sea_r2
>>         running
>>                  0.00/s  2014-01-11 1:35:29
>>
>>
>>         Is this what you'd expect to see? Am I not understanding
>> something?
>>
>>         Thanks,
>>
>>         Matt
>>
>>
>>         _________________________________________________
>>         rabbitmq-discuss mailing list
>>         rabbitmq-discuss at lists.__rabbitmq.com
>>         <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>>         https://lists.rabbitmq.com/__cgi-bin/mailman/listinfo/__
>> rabbitmq-discuss
>>         <https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/
>> rabbitmq-discuss>
>>
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/67ecdca4/attachment.html>

From roberto at canary.is  Fri Jan 17 02:26:08 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Thu, 16 Jan 2014 21:26:08 -0500
Subject: [rabbitmq-discuss] [Rabbitmq-c] die_on_amqp_error documentation
Message-ID: <CANAFtV47Erw5DQRkTa0f6wO6wHdkk0kWDR9xJXX2dcNuBmFLKw@mail.gmail.com>

I'm not finding the documentation of the function die_on_amqp_error(...)

Does anybody know where it is? I can't find it in the docs generated by
doxygen.

Thank you
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/f932ef20/attachment.html>

From alan.antonuk at gmail.com  Fri Jan 17 02:38:27 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Thu, 16 Jan 2014 18:38:27 -0800
Subject: [rabbitmq-discuss] [Rabbitmq-c] die_on_amqp_error documentation
In-Reply-To: <CANAFtV47Erw5DQRkTa0f6wO6wHdkk0kWDR9xJXX2dcNuBmFLKw@mail.gmail.com>
References: <CANAFtV47Erw5DQRkTa0f6wO6wHdkk0kWDR9xJXX2dcNuBmFLKw@mail.gmail.com>
Message-ID: <CAAt2poLY5L6s=tM4mY1CvKd_Yc7C1BhA15tF18pT1rapck1mSA@mail.gmail.com>

die_on_amqp_error(...) is not a part of the rabbitmq-c library API.  Its a
utility function used in the examples. You can find it here:

https://github.com/alanxz/rabbitmq-c/blob/master/examples/utils.h
https://github.com/alanxz/rabbitmq-c/blob/master/examples/utils.c

-Alan


On Thu, Jan 16, 2014 at 6:26 PM, Roberto Pagliari <roberto at canary.is> wrote:

> I'm not finding the documentation of the function die_on_amqp_error(...)
>
> Does anybody know where it is? I can't find it in the docs generated by
> doxygen.
>
> Thank you
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/bf5d8263/attachment.html>

From alan.antonuk at gmail.com  Fri Jan 17 02:44:16 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Thu, 16 Jan 2014 18:44:16 -0800
Subject: [rabbitmq-discuss] [RabbitMQ-c] Question about amqp_listen
	example
In-Reply-To: <CANAFtV5rkZn_N-UH4f28UB6oe3mV9fhZAC71Km8yRiUyFrvNMQ@mail.gmail.com>
References: <CANAFtV5rkZn_N-UH4f28UB6oe3mV9fhZAC71Km8yRiUyFrvNMQ@mail.gmail.com>
Message-ID: <CAAt2poKc7bkpa=bad1Z1Z6qXFOAfps29MK1XdK3Y_CsjZ9KobQ@mail.gmail.com>

On Thu, Jan 16, 2014 at 4:51 PM, Roberto Pagliari <roberto at canary.is> wrote:

> I have a couple of questions about the overall functioning of Rabbitmq-c.
>
> From amqp_listen.c I see the following code:
>
>   {
>     while (1) {
>       amqp_rpc_reply_t res;
>
>       amqp_envelope_t envelope;
>
>       amqp_maybe_release_buffers(conn);
>
>       res = amqp_consume_message(conn, &envelope, NULL, 0);
>
>       if (AMQP_RESPONSE_NORMAL != res.reply_type) {
>         break;
>       }
>
>       printf("Delivery %u, exchange %.*s routingkey %.*s\n",
>              (unsigned) envelope.delivery_tag,
>              (int) envelope.exchange.len, (char *) envelope.exchange.bytes,
>              (int) envelope.routing_key.len, (char *) envelope.routing_key.bytes);
>
>       if (envelope.message.properties._flags & AMQP_BASIC_CONTENT_TYPE_FLAG) {
>         printf("Content-type: %.*s\n",
>                (int) envelope.message.properties.content_type.len,
>                (char *) envelope.message.properties.content_type.bytes);
>       }
>
>       amqp_destroy_envelope(&envelope);
>     }
>   }
>
>
> First off, the output I'm getting when sending the string "Hello world" is
> $ ./amqp_listen localhost 5672 amq.direct test
> Delivery 1, exchange amq.direct routingkey test
> Content-type: text/plain
>
>
> 1) Is that what the output should be like? I though it was supposed to
> print out the string sent with amqp_sendstring on the other side.
>
The output is correct, it does not print out the body of the message.

> 2) In the code above, it looks like the printf is performed every time,
> regardless of weather a message has been received or not. However, only
> when a message is actually received, the printf will execute. Could someone
> explain me why this is the case?
>
The if (AMQP_RESPONSE_NORMAL != res.reply_type) break; statement will break
out of the loop if the message isn't received.

-Alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/e3cefc57/attachment.html>

From tonygarnockjones+rabbitmq at gmail.com  Fri Jan 17 03:11:34 2014
From: tonygarnockjones+rabbitmq at gmail.com (Tony Garnock-Jones)
Date: Thu, 16 Jan 2014 22:11:34 -0500
Subject: [rabbitmq-discuss] AMQP Field Tables & Short Integers
In-Reply-To: <etPan.52d87fef.6b8b4567.2ea@gmr-home.local>
References: <etPan.52d87fef.6b8b4567.2ea@gmr-home.local>
Message-ID: <CAM8fPiRO__Cm+B0sA5gUyChjDD2q7H4etzaWdmDv35bwHcN1ww@mail.gmail.com>

On 16 January 2014 19:57, Gavin M. Roy <gavinmroy at gmail.com> wrote:

> Seems my mistake was using the AMQP-0-9-1 standard for field types with
> regard to short integers.
>

Heh :-) Yep. This is one of the few areas that AMQP 0-9-1 got wrong. It
*should* have standardised actual implementation practice at the time.


> In looking at the code for the encoder and decoder in Rabbit, I see that
> *s* is used for short ints.
>

Yep. This matches what all the brokers were doing at the time.


> Will RabbitMQ be staying with the misuse of *s* for shorts for the
> foreseeable future?
>

I can't speak for the team, of course, but I'd recommend doing so. All the
client libraries I'm aware of ignore 0-9-1 in this area.

If an AMQP 0-9-2 is ever released, IMO it should reflect what the various
libraries actually implement.


> Is there any intention or desire to add the specified *U* into the
> decoder and never support *s* for anything but short-int instead of
> short-string?
>

This sounds like a good idea.

Regards,
  Tony
-- 
Tony Garnock-Jones
tonygarnockjones at gmail.com
http://homepages.kcbbs.gen.nz/tonyg/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/dadd6c3b/attachment.html>

From roberto at canary.is  Fri Jan 17 04:50:00 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Thu, 16 Jan 2014 23:50:00 -0500
Subject: [rabbitmq-discuss] [RabbitMQ-c] Question about amqp_listen
	example
In-Reply-To: <CAAt2poKc7bkpa=bad1Z1Z6qXFOAfps29MK1XdK3Y_CsjZ9KobQ@mail.gmail.com>
References: <CANAFtV5rkZn_N-UH4f28UB6oe3mV9fhZAC71Km8yRiUyFrvNMQ@mail.gmail.com>
 <CAAt2poKc7bkpa=bad1Z1Z6qXFOAfps29MK1XdK3Y_CsjZ9KobQ@mail.gmail.com>
Message-ID: <CANAFtV4wE8bFxGfTCw3tGJc5z9mvecdKUyedPWj2_J5FZ=GN=A@mail.gmail.com>

Hi Alan,
a break statement should exit the while loop isnt it? I expected to see a
'continue', instead...

Roberto



On Thu, Jan 16, 2014 at 9:44 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:

>
>
>
> On Thu, Jan 16, 2014 at 4:51 PM, Roberto Pagliari <roberto at canary.is>wrote:
>
>> I have a couple of questions about the overall functioning of Rabbitmq-c.
>>
>> From amqp_listen.c I see the following code:
>>
>>   {
>>     while (1) {
>>       amqp_rpc_reply_t res;
>>
>>       amqp_envelope_t envelope;
>>
>>       amqp_maybe_release_buffers(conn);
>>
>>       res = amqp_consume_message(conn, &envelope, NULL, 0);
>>
>>
>>       if (AMQP_RESPONSE_NORMAL != res.reply_type) {
>>
>>         break;
>>       }
>>
>>       printf("Delivery %u, exchange %.*s routingkey %.*s\n",
>>
>>              (unsigned) envelope.delivery_tag,
>>
>>              (int) envelope.exchange.len, (char *) envelope.exchange.bytes,
>>
>>              (int) envelope.routing_key.len, (char *) envelope.routing_key.bytes);
>>
>>
>>       if (envelope.message.properties._flags & AMQP_BASIC_CONTENT_TYPE_FLAG) {
>>
>>         printf("Content-type: %.*s\n",
>>
>>                (int) envelope.message.properties.content_type.len,
>>
>>                (char *) envelope.message.properties.content_type.bytes);
>>
>>       }
>>
>>       amqp_destroy_envelope(&envelope);
>>
>>     }
>>   }
>>
>>
>> First off, the output I'm getting when sending the string "Hello world"
>> is
>> $ ./amqp_listen localhost 5672 amq.direct test
>> Delivery 1, exchange amq.direct routingkey test
>> Content-type: text/plain
>>
>>
>> 1) Is that what the output should be like? I though it was supposed to
>> print out the string sent with amqp_sendstring on the other side.
>>
> The output is correct, it does not print out the body of the message.
>
>> 2) In the code above, it looks like the printf is performed every time,
>> regardless of weather a message has been received or not. However, only
>> when a message is actually received, the printf will execute. Could someone
>> explain me why this is the case?
>>
> The if (AMQP_RESPONSE_NORMAL != res.reply_type) break; statement will
> break out of the loop if the message isn't received.
>
> -Alan
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/6d105f9c/attachment.html>

From alan.antonuk at gmail.com  Fri Jan 17 05:53:23 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Thu, 16 Jan 2014 21:53:23 -0800
Subject: [rabbitmq-discuss] [RabbitMQ-c] Question about amqp_listen
	example
In-Reply-To: <CANAFtV4wE8bFxGfTCw3tGJc5z9mvecdKUyedPWj2_J5FZ=GN=A@mail.gmail.com>
References: <CANAFtV5rkZn_N-UH4f28UB6oe3mV9fhZAC71Km8yRiUyFrvNMQ@mail.gmail.com>
 <CAAt2poKc7bkpa=bad1Z1Z6qXFOAfps29MK1XdK3Y_CsjZ9KobQ@mail.gmail.com>
 <CANAFtV4wE8bFxGfTCw3tGJc5z9mvecdKUyedPWj2_J5FZ=GN=A@mail.gmail.com>
Message-ID: <CAAt2poKG_47QqGzUusFvRBRGLj0427=-2zDUj6YQXUs2feqSWw@mail.gmail.com>

Yes.  A continue wouldn't work, calling amqp_consume_message() again after
it fails won't work. See

https://github.com/alanxz/rabbitmq-c/blob/master/librabbitmq/amqp.h#L2152

-Alan


On Thu, Jan 16, 2014 at 8:50 PM, Roberto Pagliari <roberto at canary.is> wrote:

> Hi Alan,
> a break statement should exit the while loop isnt it? I expected to see a
> 'continue', instead...
>
> Roberto
>
>
>
> On Thu, Jan 16, 2014 at 9:44 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:
>
>>
>>
>>
>> On Thu, Jan 16, 2014 at 4:51 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>
>>> I have a couple of questions about the overall functioning of
>>> Rabbitmq-c.
>>>
>>> From amqp_listen.c I see the following code:
>>>
>>>   {
>>>
>>>     while (1) {
>>>       amqp_rpc_reply_t res;
>>>
>>>       amqp_envelope_t envelope;
>>>
>>>       amqp_maybe_release_buffers(conn);
>>>
>>>       res = amqp_consume_message(conn, &envelope, NULL, 0);
>>>
>>>
>>>
>>>       if (AMQP_RESPONSE_NORMAL != res.reply_type) {
>>>
>>>
>>>         break;
>>>       }
>>>
>>>       printf("Delivery %u, exchange %.*s routingkey %.*s\n",
>>>
>>>
>>>              (unsigned) envelope.delivery_tag,
>>>
>>>
>>>              (int) envelope.exchange.len, (char *) envelope.exchange.bytes,
>>>
>>>
>>>              (int) envelope.routing_key.len, (char *) envelope.routing_key.bytes);
>>>
>>>
>>>
>>>       if (envelope.message.properties._flags & AMQP_BASIC_CONTENT_TYPE_FLAG) {
>>>
>>>
>>>         printf("Content-type: %.*s\n",
>>>
>>>
>>>                (int) envelope.message.properties.content_type.len,
>>>
>>>
>>>                (char *) envelope.message.properties.content_type.bytes);
>>>
>>>
>>>       }
>>>
>>>       amqp_destroy_envelope(&envelope);
>>>
>>>
>>>     }
>>>   }
>>>
>>>
>>> First off, the output I'm getting when sending the string "Hello world"
>>> is
>>> $ ./amqp_listen localhost 5672 amq.direct test
>>> Delivery 1, exchange amq.direct routingkey test
>>> Content-type: text/plain
>>>
>>>
>>> 1) Is that what the output should be like? I though it was supposed to
>>> print out the string sent with amqp_sendstring on the other side.
>>>
>> The output is correct, it does not print out the body of the message.
>>
>>>  2) In the code above, it looks like the printf is performed every
>>> time, regardless of weather a message has been received or not. However,
>>> only when a message is actually received, the printf will execute. Could
>>> someone explain me why this is the case?
>>>
>> The if (AMQP_RESPONSE_NORMAL != res.reply_type) break; statement will
>> break out of the loop if the message isn't received.
>>
>> -Alan
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/b9e15835/attachment.html>

From pauldmccann at gmail.com  Thu Jan 16 20:39:47 2014
From: pauldmccann at gmail.com (Paul McCann)
Date: Thu, 16 Jan 2014 12:39:47 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMq node won't stop
Message-ID: <e0363f6c-52c6-4936-bda4-f40b6b2462e1@googlegroups.com>

I have a cluster set up with three nodes, and one of the nodes is 
exhibiting some strange behavior.   When I try to delete or purge a queue 
on that node, the call to delete or purge hangs.  Also when I try stop the 
node using rabbitmqctl stop_app, the stop_app command hangs.   Any advice 
would be greatly appreciated.  This is in a QA environment, so it isn't 
causing major pain, but I am concerned about this happening in a production 
environment.

Thanks,
Paul McCann
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/21f7d35f/attachment.html>

From anup.katariya at integral.com  Fri Jan 17 05:04:59 2014
From: anup.katariya at integral.com (Anup Katariya)
Date: Thu, 16 Jan 2014 21:04:59 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ HA
In-Reply-To: <24684219.1780.1326906982618.JavaMail.geo-discussion-forums@prlk31>
References: <4F0F18BB.7080508@gmail.com>
 <CACOPnvfhbpPdKrNhyE5bbeowBhWeMi+W3wM+Vt5hs0a9PenkZA@mail.gmail.com>
 <11354968.2215.1326848670369.JavaMail.geo-discussion-forums@prdv33>
 <21871097.2232.1326849301680.JavaMail.geo-discussion-forums@prfc16>
 <167F935B-26B4-429E-8756-413BF8B036A2@gmail.com>
 <24684219.1780.1326906982618.JavaMail.geo-discussion-forums@prlk31>
Message-ID: <bab968a1-bf32-4d08-a7cd-4cc85b532317@googlegroups.com>

Hi jrob,

Curious to know whether you pushed this setup in production and how has it 
been? Any surprises? We are also testing this in perf lab and plan to push 
to production in couple of weeks.

Anup

On Wednesday, January 18, 2012 9:16:22 AM UTC-8, jrob wrote:
>
> Yup, that was it exactly.  I just had the diff up, so here are the two 
> major changes I had to make:
>
> -    channel.queue( @queue, :durable => true ).subscribe(:ack=>true) do 
> |header,message|
> +    channel.queue( @queue, :durable => true, :arguments => {'x-ha-policy' 
> => 'all'} ).subscribe(:ack=>true) do |header,message|
>
>    def self.get_channel(host)
>      connection = AMQP.connect( :host=>host )
> +    connection.on_connection_interruption do |conn, settings|
> +      conn.reconnect(false,1)
> +    end
> +
>      channel    = AMQP::Channel.new( connection )
> +    channel.auto_recovery = true
> +
> +    channel
>    end
>
> As I said, this hasn't gone into production yet, but it seems to be doing 
> well in our staging environment.  I don't think our message rate is high 
> enough to really exercise this setup in staging, so I can't really comment 
> on performance yet.  (We're holding off moving this into production as we 
> are trying to provide high availability for our applications and services 
> across the board, which in some cases means we will be using one VM for 
> multiple services.  Since the other services aren't ready to go yet, we 
> haven't pushed this up.)
>
> - jrob
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/f6e5ef62/attachment.html>

From anup.katariya at integral.com  Fri Jan 17 05:04:59 2014
From: anup.katariya at integral.com (Anup Katariya)
Date: Thu, 16 Jan 2014 21:04:59 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ HA
In-Reply-To: <24684219.1780.1326906982618.JavaMail.geo-discussion-forums@prlk31>
References: <4F0F18BB.7080508@gmail.com>
 <CACOPnvfhbpPdKrNhyE5bbeowBhWeMi+W3wM+Vt5hs0a9PenkZA@mail.gmail.com>
 <11354968.2215.1326848670369.JavaMail.geo-discussion-forums@prdv33>
 <21871097.2232.1326849301680.JavaMail.geo-discussion-forums@prfc16>
 <167F935B-26B4-429E-8756-413BF8B036A2@gmail.com>
 <24684219.1780.1326906982618.JavaMail.geo-discussion-forums@prlk31>
Message-ID: <bab968a1-bf32-4d08-a7cd-4cc85b532317@googlegroups.com>

Hi jrob,

Curious to know whether you pushed this setup in production and how has it 
been? Any surprises? We are also testing this in perf lab and plan to push 
to production in couple of weeks.

Anup

On Wednesday, January 18, 2012 9:16:22 AM UTC-8, jrob wrote:
>
> Yup, that was it exactly.  I just had the diff up, so here are the two 
> major changes I had to make:
>
> -    channel.queue( @queue, :durable => true ).subscribe(:ack=>true) do 
> |header,message|
> +    channel.queue( @queue, :durable => true, :arguments => {'x-ha-policy' 
> => 'all'} ).subscribe(:ack=>true) do |header,message|
>
>    def self.get_channel(host)
>      connection = AMQP.connect( :host=>host )
> +    connection.on_connection_interruption do |conn, settings|
> +      conn.reconnect(false,1)
> +    end
> +
>      channel    = AMQP::Channel.new( connection )
> +    channel.auto_recovery = true
> +
> +    channel
>    end
>
> As I said, this hasn't gone into production yet, but it seems to be doing 
> well in our staging environment.  I don't think our message rate is high 
> enough to really exercise this setup in staging, so I can't really comment 
> on performance yet.  (We're holding off moving this into production as we 
> are trying to provide high availability for our applications and services 
> across the board, which in some cases means we will be using one VM for 
> multiple services.  Since the other services aren't ready to go yet, we 
> haven't pushed this up.)
>
> - jrob
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140116/f6e5ef62/attachment-0001.html>

From simon at rabbitmq.com  Fri Jan 17 10:42:28 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 17 Jan 2014 10:42:28 +0000
Subject: [rabbitmq-discuss] AMQP Field Tables & Short Integers
In-Reply-To: <CAM8fPiRO__Cm+B0sA5gUyChjDD2q7H4etzaWdmDv35bwHcN1ww@mail.gmail.com>
References: <etPan.52d87fef.6b8b4567.2ea@gmr-home.local>
 <CAM8fPiRO__Cm+B0sA5gUyChjDD2q7H4etzaWdmDv35bwHcN1ww@mail.gmail.com>
Message-ID: <52D90914.5060504@rabbitmq.com>

On 17/01/2014 03:11, Tony Garnock-Jones wrote:
> On 16 January 2014 19:57, Gavin M. Roy <gavinmroy at gmail.com
> <mailto:gavinmroy at gmail.com>> wrote:
>     Will RabbitMQ be staying with the misuse of /s/ for shorts for the
>     foreseeable future?
>
>
> I can't speak for the team, of course, but I'd recommend doing so. All
> the client libraries I'm aware of ignore 0-9-1 in this area.

Yes. I'm not sure I'd say misuse; it's almost like a typo in the spec 
(see also: "AMQP1191" to negotiate *0-8*). And changing this would cause 
everybody's clients to break, or need to work differently depending on 
the declared server version. Can open; worms everywhere.

> If an AMQP 0-9-2 is ever released, IMO it should reflect what the
> various libraries actually implement.

Very much so!

>     Is there any intention or desire to add the specified /U/ into the
>     decoder and never support /s/ for anything but short-int instead of
>     short-string?
>
>
> This sounds like a good idea.

I'm not so sure. It doesn't really bring compliance with the letter of 
the spec, it doesn't let you do anything new, but it does muddy the 
waters even further. At least at the moment we can say "these are the 
types that are in practice used everywhere".

Cheers, Simon


From simon at rabbitmq.com  Fri Jan 17 11:53:21 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 17 Jan 2014 11:53:21 +0000
Subject: [rabbitmq-discuss] management gui proxypass
In-Reply-To: <CAE3HoVSOF1CKO=WEa=nRA8_Q1c6adGaLuNCZE8RSm_p54ZPqMw@mail.gmail.com>
References: <5ac38699-522a-470c-85b3-82250ed0fd18@googlegroups.com>
 <CAE3HoVSOF1CKO=WEa=nRA8_Q1c6adGaLuNCZE8RSm_p54ZPqMw@mail.gmail.com>
Message-ID: <52D919B1.3050306@rabbitmq.com>

On 16/01/2014 17:54, Michael Klishin wrote:
> 2014/1/16 Ibrahim Edib Kokdemir <kokdemir at gmail.com
> <mailto:kokdemir at gmail.com>>
>
>     I want to access management gui via web server proxy like nginx or
>     apache. I have installed all necessary thing but there is one
>     problem. when I try to access via proxy like /rmq. I can get the
>     main gui and main links. but when I try to access links like
>     "/rmq/#/queues/%2F/request.13.759.main.queue"  page shows me "not
>     found" error. I think that it is related with link type.
>     how can I overcome this problem?
>
>
> You need to add a rewrite so that the /rmq prefix is stripped before the
> request is proxied to
> Rabbit.

And see http://www.rabbitmq.com/management.html#proxy for an example 
configuration for Apache.

Cheers, Simon

From bison_art at o2.pl  Fri Jan 17 14:10:21 2014
From: bison_art at o2.pl (rabbit15)
Date: Fri, 17 Jan 2014 06:10:21 -0800 (PST)
Subject: [rabbitmq-discuss] How remove messages which must be ack
In-Reply-To: <DACA5C9B-4F70-4213-9D79-39A3F209C2E9@rabbitmq.com>
References: <1387291762482-32168.post@n5.nabble.com>
 <DACA5C9B-4F70-4213-9D79-39A3F209C2E9@rabbitmq.com>
Message-ID: <1389967821435-32669.post@n5.nabble.com>

Hi,
My problem can be described, as follows:

There is existing, working Rabbit environment with queues, exchanges,
producers and consumers working. What I need is to clear every queue (delete
ack'ed and unack'ed messages). I have no acces to existing consumers
objects, hovewer i could create new one just for this purpose. Current
consumers should be not disturbed and after clear, whole environment should
work as previously. The main problem is, that Purge method does not delete
messages, which awaits for acknowledments. I want to be sure, that EVERY
message is already deleted.

Is there any way to perform such operation? Or is this contrary to any
Rabbit architecture design?

Best Regards,
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/How-remove-messages-which-must-be-ack-tp32168p32669.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at gopivotal.com  Fri Jan 17 14:19:15 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 17 Jan 2014 18:19:15 +0400
Subject: [rabbitmq-discuss] How remove messages which must be ack
In-Reply-To: <1389967821435-32669.post@n5.nabble.com>
References: <1387291762482-32168.post@n5.nabble.com>
 <DACA5C9B-4F70-4213-9D79-39A3F209C2E9@rabbitmq.com>
 <1389967821435-32669.post@n5.nabble.com>
Message-ID: <793A7420-B621-46C1-9557-8DD936C4FD1C@rabbitmq.com>

On 17 Jan 2014, at 18:10, rabbit15 <bison_art at o2.pl> wrote:

> There is existing, working Rabbit environment with queues, exchanges,
> producers and consumers working. What I need is to clear every queue (delete
> ack'ed and unack'ed messages). I have no acces to existing consumers
> objects, hovewer i could create new one just for this purpose. Current
> consumers should be not disturbed and after clear, whole environment should
> work as previously. The main problem is, that Purge method does not delete
> messages, which awaits for acknowledments. I want to be sure, that EVERY
> message is already deleted.
> 
> Is there any way to perform such operation?

You cannot remove messages that are unacknowledged.

You can forcefully close their connections, which will cause messages to be requeued,
the purge the queue.

MK

Software Engineer, Pivotal/RabbitMQ



From simon at rabbitmq.com  Fri Jan 17 15:41:28 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 17 Jan 2014 15:41:28 +0000
Subject: [rabbitmq-discuss] A question on federation status reporting
In-Reply-To: <CACLE7ixv8w1s_ftqsgdrxCOSgKPjXJbHFrn0fR36HTVEYk6Hcw@mail.gmail.com>
References: <CACLE7iy1MB81xAOgD_71HNN7XTkOumB0e5aVDVfE-=n0VwE=Rw@mail.gmail.com>
 <52D42EA8.7060203@rabbitmq.com>
 <CACLE7iwuQ5+FRZySHZGMzuvZhoFuXT2_ZBAY8Hfo+A_3EHqRTg@mail.gmail.com>
 <52D50AA1.30602@rabbitmq.com>
 <CACLE7ixv8w1s_ftqsgdrxCOSgKPjXJbHFrn0fR36HTVEYk6Hcw@mail.gmail.com>
Message-ID: <52D94F28.6050603@rabbitmq.com>

On 17/01/2014 01:11, Matt Pietrek wrote:
> However, one issue you may want to know about. After reapplying my
> profile, I didn't see a reduction in links like I'd expect, despite the
> fact that the
>
>   In fact, even restarting the broker caused the broken state to remain.
>
> In order to get this policy to take effect, I need to restart the
> brokers. Not sure if this is expected behavior or not.

Hmm. I can't replicate this - changing the apply-to for a policy causes 
links to appear / disappear immediately for me.

Cheers, Simon

From roberto at canary.is  Fri Jan 17 16:40:40 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Fri, 17 Jan 2014 11:40:40 -0500
Subject: [rabbitmq-discuss] create new binding [Web-based version]
Message-ID: <CANAFtV5yHW-KPZ0euvPpDArdg6DWg2GOHaPO7ruTomqq-7ygMg@mail.gmail.com>

I'm trying to create a new binding using the Rabbit Web UI, under the
"exchange" tab.

The destination field (above routing key) required. However, any name I
choose is not valid. It says "no queue xyz found in /".

Any suggestions?

Thank you,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/025baade/attachment.html>

From simon at rabbitmq.com  Fri Jan 17 17:02:39 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 17 Jan 2014 17:02:39 +0000
Subject: [rabbitmq-discuss] create new binding [Web-based version]
In-Reply-To: <CANAFtV5yHW-KPZ0euvPpDArdg6DWg2GOHaPO7ruTomqq-7ygMg@mail.gmail.com>
References: <CANAFtV5yHW-KPZ0euvPpDArdg6DWg2GOHaPO7ruTomqq-7ygMg@mail.gmail.com>
Message-ID: <52D9622F.4030600@rabbitmq.com>

On 17/01/2014 16:40, Roberto Pagliari wrote:
> I'm trying to create a new binding using the Rabbit Web UI, under the
> "exchange" tab.
>
> The destination field (above routing key) required. However, any name I
> choose is not valid. It says "no queue xyz found in /".

Works for me.

Does the queue 'xyz' actually exist?

Cheers, Simon

From gavinmroy at gmail.com  Fri Jan 17 17:37:36 2014
From: gavinmroy at gmail.com (Gavin M. Roy)
Date: Fri, 17 Jan 2014 12:37:36 -0500
Subject: [rabbitmq-discuss] rabbitpy 0.13.0, pamqp 1.3.0 released
Message-ID: <etPan.52d96a60.1f16e9e8.e7d8@gmr-home.local>

rabbitpy 0.13.0 has been released fixing a minor bug with disabled heartbeat checking and adding additional arguments when constructing a queue. rabbitpy aims to provide a simple and easy to use API for interfacing with RabbitMQ, minimizing the programming overhead often found in other libraries. More information can be found at?https://pypi.python.org/pypi/rabbitpy?and?https://rabbitpy.readthedocs.org

pamqp 1.3.0, the low-level AMQP encoding/decoding library has also been released, fixing a bug related to short integers in AMQP Field Table data-structures. More information on pamqp can be found at?https://pypi.python.org/pypi/pamqp?and?https://pamqp.readthedocs.org/en/latest/

Regards,

Gavin


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/ce7a0358/attachment.html>

From roberto at canary.is  Fri Jan 17 17:58:43 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Fri, 17 Jan 2014 12:58:43 -0500
Subject: [rabbitmq-discuss] create new binding [Web-based version]
In-Reply-To: <52D9622F.4030600@rabbitmq.com>
References: <CANAFtV5yHW-KPZ0euvPpDArdg6DWg2GOHaPO7ruTomqq-7ygMg@mail.gmail.com>
 <52D9622F.4030600@rabbitmq.com>
Message-ID: <CANAFtV6mniyJ5sK5YEj2qpvXqmNctn=dSh1gmqjn_O66vLxmFg@mail.gmail.com>

That was an example. Whatever I type in, won't be accepted...




On Fri, Jan 17, 2014 at 12:02 PM, Simon MacMullen <simon at rabbitmq.com>wrote:

> On 17/01/2014 16:40, Roberto Pagliari wrote:
>
>> I'm trying to create a new binding using the Rabbit Web UI, under the
>> "exchange" tab.
>>
>> The destination field (above routing key) required. However, any name I
>> choose is not valid. It says "no queue xyz found in /".
>>
>
> Works for me.
>
> Does the queue 'xyz' actually exist?
>
> Cheers, Simon
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/4419ebe4/attachment.html>

From michael.s.klishin at gmail.com  Fri Jan 17 18:10:35 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 17 Jan 2014 22:10:35 +0400
Subject: [rabbitmq-discuss] create new binding [Web-based version]
In-Reply-To: <CANAFtV5yHW-KPZ0euvPpDArdg6DWg2GOHaPO7ruTomqq-7ygMg@mail.gmail.com>
References: <CANAFtV5yHW-KPZ0euvPpDArdg6DWg2GOHaPO7ruTomqq-7ygMg@mail.gmail.com>
Message-ID: <CAE3HoVSBfFMeJfW99Gt6WM8u=nnG-betqfqo0PPeRs636cjQJQ@mail.gmail.com>

2014/1/17 Roberto Pagliari <roberto at canary.is>

> The destination field (above routing key) required. However, any name I
> choose is not valid. It says "no queue xyz found in /".
>
> Any suggestions?
>

Can it be that your active user doesn't have sufficient permissions?


-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/20a355d3/attachment.html>

From michael.s.klishin at gmail.com  Fri Jan 17 18:12:01 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 17 Jan 2014 22:12:01 +0400
Subject: [rabbitmq-discuss] rabbitpy 0.13.0, pamqp 1.3.0 released
In-Reply-To: <etPan.52d96a60.1f16e9e8.e7d8@gmr-home.local>
References: <etPan.52d96a60.1f16e9e8.e7d8@gmr-home.local>
Message-ID: <CAE3HoVQYtyEO0hrr+VoHhfNvN4t8h2qK-M8foLPt1yveaphZUA@mail.gmail.com>

2014/1/17 Gavin M. Roy <gavinmroy at gmail.com>

> rabbitpy 0.13.0 has been released fixing a minor bug with disabled
> heartbeat checking and adding additional arguments when constructing a
> queue. rabbitpy aims to provide a simple and easy to use API for
> interfacing with RabbitMQ, minimizing the programming overhead often found
> in other libraries. More information can be found at
> https://pypi.python.org/pypi/rabbitpy and https://rabbitpy.readthedocs.org
>
> pamqp 1.3.0, the low-level AMQP encoding/decoding library has also been
> released, fixing a bug related to short integers in AMQP Field Table
> data-structures. More information on pamqp can be found at
> https://pypi.python.org/pypi/pamqp and
> https://pamqp.readthedocs.org/en/latest/
>

Gavin,

Great job!

Will there be a Pika release that makes it possible to specify arguments on
basic.consume?
It's not currently possible to use consumer priorities with it.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/bf9a4f27/attachment.html>

From matthias at rabbitmq.com  Fri Jan 17 18:15:16 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 17 Jan 2014 18:15:16 +0000
Subject: [rabbitmq-discuss] create new binding [Web-based version]
In-Reply-To: <CAE3HoVSBfFMeJfW99Gt6WM8u=nnG-betqfqo0PPeRs636cjQJQ@mail.gmail.com>
References: <CANAFtV5yHW-KPZ0euvPpDArdg6DWg2GOHaPO7ruTomqq-7ygMg@mail.gmail.com>
 <CAE3HoVSBfFMeJfW99Gt6WM8u=nnG-betqfqo0PPeRs636cjQJQ@mail.gmail.com>
Message-ID: <52D97334.1030306@rabbitmq.com>

On 17/01/14 18:10, Michael Klishin wrote:
>
> 2014/1/17 Roberto Pagliari <roberto at canary.is <mailto:roberto at canary.is>>
>
>     The destination field (above routing key) required. However, any
>     name I choose is not valid. It says "no queue xyz found in /".
>
>     Any suggestions?
>
>
> Can it be that your active user doesn't have sufficient permissions?

That would not result in a 'not found' error.

Matthias.


From gavinmroy at gmail.com  Fri Jan 17 18:49:51 2014
From: gavinmroy at gmail.com (Gavin M. Roy)
Date: Fri, 17 Jan 2014 13:49:51 -0500
Subject: [rabbitmq-discuss] rabbitpy 0.13.0, pamqp 1.3.0 released
In-Reply-To: <CAE3HoVQYtyEO0hrr+VoHhfNvN4t8h2qK-M8foLPt1yveaphZUA@mail.gmail.com>
References: <etPan.52d96a60.1f16e9e8.e7d8@gmr-home.local>
 <CAE3HoVQYtyEO0hrr+VoHhfNvN4t8h2qK-M8foLPt1yveaphZUA@mail.gmail.com>
Message-ID: <etPan.52d97b4f.66ef438d.e7d8@gmr-home.local>


From:?Michael Klishin Michael Klishin
Reply:?Discussions about RabbitMQ rabbitmq-discuss at lists.rabbitmq.com
Date:?January 17, 2014 at 1:15:08 PM
To:?Discussions about RabbitMQ rabbitmq-discuss at lists.rabbitmq.com
Subject:? Re: [rabbitmq-discuss] rabbitpy 0.13.0, pamqp 1.3.0 released  

2014/1/17 Gavin M. Roy?<gavinmroy at gmail.com>
rabbitpy 0.13.0 has been released fixing a minor bug with disabled heartbeat checking and adding additional arguments when constructing a queue. rabbitpy aims to provide a simple and easy to use API for interfacing with RabbitMQ, minimizing the programming overhead often found in other libraries. More information can be found at?https://pypi.python.org/pypi/rabbitpy?and?https://rabbitpy.readthedocs.org

pamqp 1.3.0, the low-level AMQP encoding/decoding library has also been released, fixing a bug related to short integers in AMQP Field Table data-structures. More information on pamqp can be found at?https://pypi.python.org/pypi/pamqp?and?https://pamqp.readthedocs.org/en/latest/

Gavin,

Great job!

Will there be a Pika release that makes it possible to specify arguments on basic.consume?
Yes, I?m working on a new branch for Pika, cleaning up stuff and will be adding new features as well. 0.10.0 Beta 1 should drop soon.

Gavin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/37f79469/attachment.html>

From jan.kaliszewski at nask.pl  Fri Jan 17 19:16:13 2014
From: jan.kaliszewski at nask.pl (Jan Kaliszewski)
Date: Fri, 17 Jan 2014 20:16:13 +0100
Subject: [rabbitmq-discuss] Active Directory users of
 dn_lookup_attribute? (was Re: OpenLDAP-based auth with 'other_bind' option:
 no DN attribute?)
In-Reply-To: <52CD534C.9020205@rabbitmq.com>
References: <20131205145345.53ac312c@krasoola.nask.waw.pl>
 <52A1C130.8010004@rabbitmq.com> <52CD534C.9020205@rabbitmq.com>
Message-ID: <20140117201613.1a69be4e@krasoola.nask.waw.pl>

2014-01-08 13:31, Simon MacMullen <simon at rabbitmq.com> dixit:

> On 06/12/13 12:21, Simon MacMullen wrote:
> > So I'll file a bug for this (your fix looks correct, but I want to
> > make sure it doesn't break against AD).
> 
> So I haven't made any progress with this, largely because I don't
> have an Active Directory installation any more to test with, and I
> really don't fancy setting one up from scratch.

Unfortunately, me neither. :(

Cheers.
*j

-- 
Jan Kaliszewski <jan.kaliszewski at nask.pl>

From roberto at canary.is  Fri Jan 17 20:01:29 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Fri, 17 Jan 2014 15:01:29 -0500
Subject: [rabbitmq-discuss] [RabbitMQ-c] Question about amqp_listen
	example
In-Reply-To: <CAAt2poKG_47QqGzUusFvRBRGLj0427=-2zDUj6YQXUs2feqSWw@mail.gmail.com>
References: <CANAFtV5rkZn_N-UH4f28UB6oe3mV9fhZAC71Km8yRiUyFrvNMQ@mail.gmail.com>
 <CAAt2poKc7bkpa=bad1Z1Z6qXFOAfps29MK1XdK3Y_CsjZ9KobQ@mail.gmail.com>
 <CANAFtV4wE8bFxGfTCw3tGJc5z9mvecdKUyedPWj2_J5FZ=GN=A@mail.gmail.com>
 <CAAt2poKG_47QqGzUusFvRBRGLj0427=-2zDUj6YQXUs2feqSWw@mail.gmail.com>
Message-ID: <CANAFtV6D0Di95KphmBqvvvZT_AzZPW0bURj4+sDU9N+XXTeRmg@mail.gmail.com>

Hi Alan,
I'm not sure if I understand correctly. Are you saying that
amqp_consume_message would enter the while loop again? By looking at the
sample code of listen.c I don't think you ever want to leave the while(1)
loop, right?


On Fri, Jan 17, 2014 at 12:53 AM, Alan Antonuk <alan.antonuk at gmail.com>wrote:

> Yes.  A continue wouldn't work, calling amqp_consume_message() again after
> it fails won't work. See
>
> https://github.com/alanxz/rabbitmq-c/blob/master/librabbitmq/amqp.h#L2152
>
> -Alan
>
>
> On Thu, Jan 16, 2014 at 8:50 PM, Roberto Pagliari <roberto at canary.is>wrote:
>
>> Hi Alan,
>> a break statement should exit the while loop isnt it? I expected to see a
>> 'continue', instead...
>>
>> Roberto
>>
>>
>>
>> On Thu, Jan 16, 2014 at 9:44 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:
>>
>>>
>>>
>>>
>>> On Thu, Jan 16, 2014 at 4:51 PM, Roberto Pagliari <roberto at canary.is>wrote:
>>>
>>>> I have a couple of questions about the overall functioning of
>>>> Rabbitmq-c.
>>>>
>>>> From amqp_listen.c I see the following code:
>>>>
>>>>   {
>>>>
>>>>
>>>>     while (1) {
>>>>       amqp_rpc_reply_t res;
>>>>
>>>>       amqp_envelope_t envelope;
>>>>
>>>>       amqp_maybe_release_buffers(conn);
>>>>
>>>>       res = amqp_consume_message(conn, &envelope, NULL, 0);
>>>>
>>>>
>>>>
>>>>
>>>>       if (AMQP_RESPONSE_NORMAL != res.reply_type) {
>>>>
>>>>
>>>>
>>>>         break;
>>>>       }
>>>>
>>>>       printf("Delivery %u, exchange %.*s routingkey %.*s\n",
>>>>
>>>>
>>>>
>>>>              (unsigned) envelope.delivery_tag,
>>>>
>>>>
>>>>
>>>>              (int) envelope.exchange.len, (char *) envelope.exchange.bytes,
>>>>
>>>>
>>>>
>>>>              (int) envelope.routing_key.len, (char *) envelope.routing_key.bytes);
>>>>
>>>>
>>>>
>>>>
>>>>       if (envelope.message.properties._flags & AMQP_BASIC_CONTENT_TYPE_FLAG) {
>>>>
>>>>
>>>>
>>>>         printf("Content-type: %.*s\n",
>>>>
>>>>
>>>>
>>>>                (int) envelope.message.properties.content_type.len,
>>>>
>>>>
>>>>
>>>>                (char *) envelope.message.properties.content_type.bytes);
>>>>
>>>>
>>>>
>>>>       }
>>>>
>>>>       amqp_destroy_envelope(&envelope);
>>>>
>>>>
>>>>
>>>>     }
>>>>   }
>>>>
>>>>
>>>> First off, the output I'm getting when sending the string "Hello world"
>>>> is
>>>> $ ./amqp_listen localhost 5672 amq.direct test
>>>> Delivery 1, exchange amq.direct routingkey test
>>>> Content-type: text/plain
>>>>
>>>>
>>>> 1) Is that what the output should be like? I though it was supposed to
>>>> print out the string sent with amqp_sendstring on the other side.
>>>>
>>> The output is correct, it does not print out the body of the message.
>>>
>>>>  2) In the code above, it looks like the printf is performed every
>>>> time, regardless of weather a message has been received or not. However,
>>>> only when a message is actually received, the printf will execute. Could
>>>> someone explain me why this is the case?
>>>>
>>> The if (AMQP_RESPONSE_NORMAL != res.reply_type) break; statement will
>>> break out of the loop if the message isn't received.
>>>
>>> -Alan
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/9dc03a5e/attachment.html>

From roberto at canary.is  Fri Jan 17 21:57:56 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Fri, 17 Jan 2014 16:57:56 -0500
Subject: [rabbitmq-discuss] [rabbitmq-c] amqp_listen/sendstring not working
	on ARM
Message-ID: <CANAFtV5e3wQTOn4Wq8hzyXxX9NiGD0ANFGuQiJcDfdKvBghSng@mail.gmail.com>

Hi All,
rabbitmq-c is working on my linux VM.

I cross-compiled for ARM. When running either listen or sendstring I get
the following error:

*# ./amqp_sendstring 10.0.1.40 5672 amq.direct test "Hello"*
*Logging in: connection closed unexpectedly*

TCP connection went through and I on linux I can see packets coming from
the ARM device.

This error is caused by:
*die_on_amqp_error(amqp_login(conn, "/", 0, 131072, 0,
AMQP_SASL_METHOD_PLAIN, "guest", "guest"),*
*                    "Logging in");*

I tried changing frame_max to different values (min value, or bigger
values), but it still does not work. So I'm not sure what the problem is.

On a side note, and I'm not sure if this is the issue, when building the
rabbitmq-c framework for ARM, I get some warning messages (but again, I'm
not sure if this might be the issue):


.../openssl/include/openssl/sha.h:178:34: warning: ISO C90 does not support
?long long? [-Wlong-long]
 #define SHA_LONG64 unsigned long long
                                  ^
.../openssl/include/openssl/sha.h:184:2: note: in expansion of macro
?SHA_LONG64?
  SHA_LONG64 h[8];
  ^
.../openssl/include/openssl/sha.h:178:34: warning: ISO C90 does not support
?long long? [-Wlong-long]
 #define SHA_LONG64 unsigned long long
                                  ^
.../openssl/include/openssl/sha.h:185:2: note: in expansion of macro
?SHA_LONG64?
  SHA_LONG64 Nl,Nh;
  ^
.../openssl/include/openssl/sha.h:178:34: warning: ISO C90 does not support
?long long? [-Wlong-long]
 #define SHA_LONG64 unsigned long long
                                  ^
.../openssl/include/openssl/sha.h:187:3: note: in expansion of macro
?SHA_LONG64?
   SHA_LONG64 d[SHA_LBLOCK];





.../rabbitmq-c-master-arm/tests/test_tables.c: In function ?dump_value?:
.../rabbitmq-c-master-arm/tests/test_tables.c:108:5: warning: ISO C90 does
not support the ?ll? gnu_printf length modifier [-Wformat=]
     fprintf(out, " %"PRId64"\n", v.value.i64);
     ^
.../rabbitmq-c-master-arm/tests/test_tables.c:147:5: warning: ISO C90 does
not support the ?ll? gnu_printf length modifier [-Wformat=]
     fprintf(out, " %"PRIu64"\n", v.value.u64);
     ^
.../rabbitmq-c-master-arm/tests/test_tables.c: In function
?test_dump_value?:
.../rabbitmq-c-master-arm/tests/test_tables.c:201:3: warning: integer
constant is too large for ?long? type [-Wlong-long]
   entries[5].value.value.u64 = 1234123412341234;
   ^
.../rabbitmq-c-master-arm/tests/test_tables.c: In function
?test_table_codec?:
.../rabbitmq-c-master-arm/tests/test_tables.c:307:3: warning: integer
constant is too large for ?long? type [-Wlong-long]
   entries[3].value.value.u64 = 109876543209876;


Thank you,
Roberto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/3d502e5a/attachment.html>

From asrobson at gmail.com  Fri Jan 17 22:08:15 2014
From: asrobson at gmail.com (Alex Robson)
Date: Fri, 17 Jan 2014 16:08:15 -0600
Subject: [rabbitmq-discuss] Dead-Lettering Queue Contents On Queue
	Expiration
In-Reply-To: <2D0F726F-6885-44F5-85D1-192853189923@rabbitmq.com>
References: <CABWF3X0-f8CMJ3PCVjrhcpBaz9bjwC8taO-JszM6R-8UyX9SxQ@mail.gmail.com>
 <52D7BAEF.8010208@rabbitmq.com>
 <2D0F726F-6885-44F5-85D1-192853189923@rabbitmq.com>
Message-ID: <CABWF3X1Jq_+9aN-tFO7_hgoYHr0iyz6mC40dnA+AkR=tZjsNSg@mail.gmail.com>

I have updated the pull request. I jumped the gun a bit in thinking that I
had solved this with the initial pull. I still may not have resolved it in
a way that would make sense to devs who know the code base better than I
do. I wasn't sure if there were a better way to remove bindings from an
expiring queue and its DLX, so I'm removing them first from the destination
using rabbit_binding:remove_for_destination and then calling the exchanges
remove_bindings. The latter call is necessary because with out it, a
consistent hash exchange will retain invalid routes and continue to try and
route messages to the expired queue.

Let me know what you think. If there are things I can do to improve it well
enough for consideration, I am happy to do them. I also don't expect I'd
have any problems signing a CLA if you're interested in the PR. I
understand there could be performance implications if one allows a queue to
grow to a massive number of messages and then expires the queue, however,
as I mention in the PR, I can recreate a similar scenario with DLXs and
message TTLs. I think with this kind of system, there's some caveat emptor
in how one manages things like queue depth. In our scenario, the only real
reason for a queue's depth to get large is when a consumer bites the dust.
Having a short TTL on a queue would actually allow us to expire the queue
quickly to prevent an explosion of messages that suddenly have no consumer
(and may never have again).

If the performance considerations make this too rubbishy for inclusion, let
me know. Willing to help out any way I can but also just as willing to step
back and let the pros handle it.

Thanks,
Alex


On Thu, Jan 16, 2014 at 5:25 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

>
> On 16 Jan 2014, at 14:56, Simon MacMullen <simon at rabbitmq.com> wrote:
>
> > If you want to send us a PR then that's great, but please be aware that
> a) you'd need to sign a contributor agreement and b) it might be harder
> than you think. But c) it might not :-)
>
> FTR:
> https://github.com/rabbitmq/rabbitmq-server/pull/29/files
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/fc95f475/attachment.html>

From roberto at canary.is  Sat Jan 18 00:31:24 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Fri, 17 Jan 2014 16:31:24 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ-c @ ARM Targets
In-Reply-To: <20110818100111.GB3055@dakota.eng.vmware.com>
References: <20547897.765.1313568787115.JavaMail.geo-discussion-forums@yqad28>
 <8051645.1367.1313593275456.JavaMail.geo-discussion-forums@yqlo5>
 <yrv4cd3g4xdrg.fsf@dwragg.eng.vmware.com>
 <308500.2860.1313659783949.JavaMail.geo-discussion-forums@yqlo5>
 <CAE3HoVSTVUiPmd5oEcdcd_nn_YPRO9z=_G7w0YfZEUJbxt0t3A@mail.gmail.com>
 <20110818100111.GB3055@dakota.eng.vmware.com>
Message-ID: <532696e5-d255-44c7-b603-5b1df6db3540@googlegroups.com>

Hi All,
two questions/comments:
1. The CMakeLists.txt is missing
2. Has this fixed version been merged into the main branch? I tried to 
cross compile this one for ARM https://github.com/alanxz/rabbitmq-c and the 
examples don't work.  amqp_sendstring, for instance, terminates when 
executing 

die_on_amqp_error(amqp_login(conn, "/", 0, 131072, 0, AMQP_SASL_METHOD_PLAIN, "guest", "guest"),
                    "Logging in");

Thank you,
Roberto 


On Thursday, August 18, 2011 6:01:11 AM UTC-4, Alexandru Scvor?ov wrote:
>
> > Maybe that branch should be merged into master/default then ;)
>
> It's going through QA at the moment.  It will probably be in default
> soon.
>
> Cheers,
> Alex
>
> On Thu, Aug 18, 2011 at 01:53:30PM +0400, Michael Klishin wrote:
> > 2011/8/18 Alex P <oleksand... at gmail.com <javascript:>>
> > 
> > > Thank you for help, seems that it was exactly the deal.
> > 
> > 
> > Maybe that branch should be merged into master/default then ;)
> > -- 
> > MK
> > 
> > http://github.com/michaelklishin
> > http://twitter.com/michaelklishin
>
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq... at lists.rabbitmq.com <javascript:>
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq... at lists.rabbitmq.com <javascript:>
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/04b63697/attachment.html>

From roberto at canary.is  Sat Jan 18 00:31:24 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Fri, 17 Jan 2014 16:31:24 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ-c @ ARM Targets
In-Reply-To: <20110818100111.GB3055@dakota.eng.vmware.com>
References: <20547897.765.1313568787115.JavaMail.geo-discussion-forums@yqad28>
 <8051645.1367.1313593275456.JavaMail.geo-discussion-forums@yqlo5>
 <yrv4cd3g4xdrg.fsf@dwragg.eng.vmware.com>
 <308500.2860.1313659783949.JavaMail.geo-discussion-forums@yqlo5>
 <CAE3HoVSTVUiPmd5oEcdcd_nn_YPRO9z=_G7w0YfZEUJbxt0t3A@mail.gmail.com>
 <20110818100111.GB3055@dakota.eng.vmware.com>
Message-ID: <532696e5-d255-44c7-b603-5b1df6db3540@googlegroups.com>

Hi All,
two questions/comments:
1. The CMakeLists.txt is missing
2. Has this fixed version been merged into the main branch? I tried to 
cross compile this one for ARM https://github.com/alanxz/rabbitmq-c and the 
examples don't work.  amqp_sendstring, for instance, terminates when 
executing 

die_on_amqp_error(amqp_login(conn, "/", 0, 131072, 0, AMQP_SASL_METHOD_PLAIN, "guest", "guest"),
                    "Logging in");

Thank you,
Roberto 


On Thursday, August 18, 2011 6:01:11 AM UTC-4, Alexandru Scvor?ov wrote:
>
> > Maybe that branch should be merged into master/default then ;)
>
> It's going through QA at the moment.  It will probably be in default
> soon.
>
> Cheers,
> Alex
>
> On Thu, Aug 18, 2011 at 01:53:30PM +0400, Michael Klishin wrote:
> > 2011/8/18 Alex P <oleksand... at gmail.com <javascript:>>
> > 
> > > Thank you for help, seems that it was exactly the deal.
> > 
> > 
> > Maybe that branch should be merged into master/default then ;)
> > -- 
> > MK
> > 
> > http://github.com/michaelklishin
> > http://twitter.com/michaelklishin
>
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq... at lists.rabbitmq.com <javascript:>
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq... at lists.rabbitmq.com <javascript:>
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/04b63697/attachment-0001.html>

From roberto at canary.is  Sat Jan 18 00:34:11 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Fri, 17 Jan 2014 19:34:11 -0500
Subject: [rabbitmq-discuss] [Rabbitmq-c] ARM bug fixed?
Message-ID: <CANAFtV7EfsVQJxZf5KFYef2LGnbuc_7VLbb5vegm3KcKFjei1g@mail.gmail.com>

Hi Alan/All,
I just realized there was a bug in rabbitmq-c when cross-compiling for ARM.

Please, see this thread
https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ

has the bug been fixed in the master branch? The examples don't seem to
work, and it might be related to data alignment discussed in the thread
above.


Thank you,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/468c95e8/attachment.html>

From ravir.pandey at commusoft.co.uk  Sat Jan 18 04:51:51 2014
From: ravir.pandey at commusoft.co.uk (Ravir Pandey)
Date: Sat, 18 Jan 2014 10:21:51 +0530
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <CAE3HoVRLd8DzkQAxB1wfkuGdfT+0+0mK9ng96Gs+4jFiB9tQzg@mail.gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
 <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
 <B06CC0D0-A3A7-46A1-A3C0-357EEE69E361@rabbitmq.com>
 <CA+3MLFiUVV+6=L=vs7O=M09=ex5=jT4W_e1wH+V6rLvs2PzWhw@mail.gmail.com>
 <CAE3HoVRLd8DzkQAxB1wfkuGdfT+0+0mK9ng96Gs+4jFiB9tQzg@mail.gmail.com>
Message-ID: <CA+3MLFjBoBaYO_0AfZhu9YVDyAp5WTJFfrC9hgVwTbmcRt+hJw@mail.gmail.com>

All HTTP request willl be in RabbitMQ -> Put all request in queue -> Queue
get processed ( HTTP request to third party API through RabbitMQ ) -> Get
response through RabbitMQ only.

Is this possible?


On Thu, Jan 16, 2014 at 7:45 PM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

>
> 2014/1/16 Ravir Pandey <ravir.pandey at commusoft.co.uk>
>
>> basically I have my own web application which uses third party API's
>> through which thousand of HTTP request being sent daily. I want to do this
>> through RabbitMQ.
>>
>
> So you want a separate service (S) to contact HTTP API on behalf of your
> Web app? Then you can do RPC over RabbitMQ to S
> and then S can issue HTTP requests.
>
>
>> Yes mate, i have gone through http://www.rabbitmq.com/getstarted.html. I
>> got some examples but most of the example uses tcp protocol to send
>> messages.
>>
>
> RabbitMQ protocol(s) assume TCP. There is no way to do AMQP 0.9.1 over
> HTTP or MQTT over HTTP.
>
> RabbitMQ has HTTP API which is focused on monitoring. You can publish and
> fetch messages over it but it's not particularly efficient.
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/c76268f9/attachment.html>

From mcintoshj at gmail.com  Sat Jan 18 06:23:25 2014
From: mcintoshj at gmail.com (McIntosh Jason)
Date: Sat, 18 Jan 2014 00:23:25 -0600
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <CA+3MLFjBoBaYO_0AfZhu9YVDyAp5WTJFfrC9hgVwTbmcRt+hJw@mail.gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
 <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
 <B06CC0D0-A3A7-46A1-A3C0-357EEE69E361@rabbitmq.com>
 <CA+3MLFiUVV+6=L=vs7O=M09=ex5=jT4W_e1wH+V6rLvs2PzWhw@mail.gmail.com>
 <CAE3HoVRLd8DzkQAxB1wfkuGdfT+0+0mK9ng96Gs+4jFiB9tQzg@mail.gmail.com>
 <CA+3MLFjBoBaYO_0AfZhu9YVDyAp5WTJFfrC9hgVwTbmcRt+hJw@mail.gmail.com>
Message-ID: <81E90516-B2FC-4B50-B4E9-A135880CED45@gmail.com>

As I think has been stated RabbitMQ is an amqp server.  Just like you have web and http servers - http, FTP, amqp are protocols.  And amqp is not http nor is it an extension of http.  So if you want to publish to a remote system you can have an application running on a web server that uses one of various libraries to publish to rabbit.  Then a separate process can read those messages for processing either in sending a call to a remote http API, publishing through FTP or ssh or heck just about any protocol. 

I'd highly recommend looking at the fundamentals of tcp/ip, http, FTP and other servers and how they work, 

Jason

Sent from my iPhone

> On Jan 17, 2014, at 10:51 PM, Ravir Pandey <ravir.pandey at commusoft.co.uk> wrote:
> 
> All HTTP request willl be in RabbitMQ -> Put all request in queue -> Queue get processed ( HTTP request to third party API through RabbitMQ ) -> Get response through RabbitMQ only.
> 
> Is this possible?
> 
> 
>> On Thu, Jan 16, 2014 at 7:45 PM, Michael Klishin <michael.s.klishin at gmail.com> wrote:
>> 
>> 2014/1/16 Ravir Pandey <ravir.pandey at commusoft.co.uk>
>>> basically I have my own web application which uses third party API's through which thousand of HTTP request being sent daily. I want to do this through RabbitMQ.
>> 
>> So you want a separate service (S) to contact HTTP API on behalf of your Web app? Then you can do RPC over RabbitMQ to S
>> and then S can issue HTTP requests.
>>  
>>> Yes mate, i have gone through http://www.rabbitmq.com/getstarted.html. I got some examples but most of the example uses tcp protocol to send messages.
>> 
>> RabbitMQ protocol(s) assume TCP. There is no way to do AMQP 0.9.1 over HTTP or MQTT over HTTP.
>> 
>> RabbitMQ has HTTP API which is focused on monitoring. You can publish and fetch messages over it but it's not particularly efficient.
>> -- 
>> MK
>> 
>> http://github.com/michaelklishin
>> http://twitter.com/michaelklishin
>> 
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/6135fc8a/attachment.html>

From michael.s.klishin at gmail.com  Sat Jan 18 06:30:18 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Sat, 18 Jan 2014 10:30:18 +0400
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <CA+3MLFjBoBaYO_0AfZhu9YVDyAp5WTJFfrC9hgVwTbmcRt+hJw@mail.gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
 <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
 <B06CC0D0-A3A7-46A1-A3C0-357EEE69E361@rabbitmq.com>
 <CA+3MLFiUVV+6=L=vs7O=M09=ex5=jT4W_e1wH+V6rLvs2PzWhw@mail.gmail.com>
 <CAE3HoVRLd8DzkQAxB1wfkuGdfT+0+0mK9ng96Gs+4jFiB9tQzg@mail.gmail.com>
 <CA+3MLFjBoBaYO_0AfZhu9YVDyAp5WTJFfrC9hgVwTbmcRt+hJw@mail.gmail.com>
Message-ID: <CAE3HoVT338F4+H4sqG4qy_hOhgf0SDXjdobJ-FJ1hbWjf9Zsyg@mail.gmail.com>

2014/1/18 Ravir Pandey <ravir.pandey at commusoft.co.uk>

> All HTTP request willl be in RabbitMQ -> Put all request in queue -> Queue
> get processed ( HTTP request to third party API through RabbitMQ ) -> Get
> response through RabbitMQ only.
>
> Is this possible?
>

You can publish a message over HTTP API that comes with the management
plugin [1].

However, you can only consume messages over HTTP via polling.

http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_2_2/priv/www/api/index.html

A separate process that communicates with your Web app over RabbitMQ's
other protocols
will yield better throughput and likely will result in code that's more to
the point.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/b59c1fff/attachment.html>

From ravir.pandey at commusoft.co.uk  Sat Jan 18 07:12:45 2014
From: ravir.pandey at commusoft.co.uk (Ravir Pandey)
Date: Sat, 18 Jan 2014 12:42:45 +0530
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <CAE3HoVT338F4+H4sqG4qy_hOhgf0SDXjdobJ-FJ1hbWjf9Zsyg@mail.gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
 <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
 <B06CC0D0-A3A7-46A1-A3C0-357EEE69E361@rabbitmq.com>
 <CA+3MLFiUVV+6=L=vs7O=M09=ex5=jT4W_e1wH+V6rLvs2PzWhw@mail.gmail.com>
 <CAE3HoVRLd8DzkQAxB1wfkuGdfT+0+0mK9ng96Gs+4jFiB9tQzg@mail.gmail.com>
 <CA+3MLFjBoBaYO_0AfZhu9YVDyAp5WTJFfrC9hgVwTbmcRt+hJw@mail.gmail.com>
 <CAE3HoVT338F4+H4sqG4qy_hOhgf0SDXjdobJ-FJ1hbWjf9Zsyg@mail.gmail.com>
Message-ID: <CA+3MLFjyZr-BfptBPhADdCdKNvX=B1eZ1jrWXyTjAXUgOE-Dvw@mail.gmail.com>

Hi Michael,

"you can do RPC over RabbitMQ to S and then S can issue HTTP requests."

Like you said as above ?

and i had gone through HTTP management plugin. However i can install
RabbitMQ on my server but my third party API is nothing to do with RabbitMQ
- in that case it is feasible to send HTTP request through HTTP management
plugin? OR Should i create separate service ( S ) to call third party HTTP
API? I mean when i do RPC over rabbitMQ to S and my S will issue HTTP
request?


On Sat, Jan 18, 2014 at 12:00 PM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

>
> 2014/1/18 Ravir Pandey <ravir.pandey at commusoft.co.uk>
>
>> All HTTP request willl be in RabbitMQ -> Put all request in queue ->
>> Queue get processed ( HTTP request to third party API through RabbitMQ ) ->
>> Get response through RabbitMQ only.
>>
>> Is this possible?
>>
>
> You can publish a message over HTTP API that comes with the management
> plugin [1].
>
> However, you can only consume messages over HTTP via polling.
>
>
> http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_2_2/priv/www/api/index.html
>
> A separate process that communicates with your Web app over RabbitMQ's
> other protocols
> will yield better throughput and likely will result in code that's more to
> the point.
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/2e829d33/attachment.html>

From ravir.pandey at commusoft.co.uk  Sat Jan 18 07:24:20 2014
From: ravir.pandey at commusoft.co.uk (Ravir Pandey)
Date: Sat, 18 Jan 2014 12:54:20 +0530
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <81E90516-B2FC-4B50-B4E9-A135880CED45@gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
 <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
 <B06CC0D0-A3A7-46A1-A3C0-357EEE69E361@rabbitmq.com>
 <CA+3MLFiUVV+6=L=vs7O=M09=ex5=jT4W_e1wH+V6rLvs2PzWhw@mail.gmail.com>
 <CAE3HoVRLd8DzkQAxB1wfkuGdfT+0+0mK9ng96Gs+4jFiB9tQzg@mail.gmail.com>
 <CA+3MLFjBoBaYO_0AfZhu9YVDyAp5WTJFfrC9hgVwTbmcRt+hJw@mail.gmail.com>
 <81E90516-B2FC-4B50-B4E9-A135880CED45@gmail.com>
Message-ID: <CA+3MLFhh7bfY7=d6JQAbXeznqs0kDhcEh+D2ZDBmAB9eKWdUdg@mail.gmail.com>

Hi Jason,

Yes i have my own application running on my own server and my Zend
framework is using RabbitMQ adapter which processed messages in queue. Do
you mean to say - when i get any message through queue ( RabbitMQ Consumer
) then role of RabbitMQ will end and after that i should call my remote API?

Thanks,
Ravi


On Sat, Jan 18, 2014 at 11:53 AM, McIntosh Jason <mcintoshj at gmail.com>wrote:

> As I think has been stated RabbitMQ is an amqp server.  Just like you have
> web and http servers - http, FTP, amqp are protocols.  And amqp is not http
> nor is it an extension of http.  So if you want to publish to a remote
> system you can have an application running on a web server that uses one of
> various libraries to publish to rabbit.  Then a separate process can read
> those messages for processing either in sending a call to a remote http
> API, publishing through FTP or ssh or heck just about any protocol.
>
> I'd highly recommend looking at the fundamentals of tcp/ip, http, FTP and
> other servers and how they work,
>
> Jason
>
> Sent from my iPhone
>
> On Jan 17, 2014, at 10:51 PM, Ravir Pandey <ravir.pandey at commusoft.co.uk>
> wrote:
>
> All HTTP request willl be in RabbitMQ -> Put all request in queue -> Queue
> get processed ( HTTP request to third party API through RabbitMQ ) -> Get
> response through RabbitMQ only.
>
> Is this possible?
>
>
> On Thu, Jan 16, 2014 at 7:45 PM, Michael Klishin <
> michael.s.klishin at gmail.com> wrote:
>
>>
>> 2014/1/16 Ravir Pandey <ravir.pandey at commusoft.co.uk>
>>
>>> basically I have my own web application which uses third party API's
>>> through which thousand of HTTP request being sent daily. I want to do this
>>> through RabbitMQ.
>>>
>>
>>  So you want a separate service (S) to contact HTTP API on behalf of your
>> Web app? Then you can do RPC over RabbitMQ to S
>> and then S can issue HTTP requests.
>>
>>
>>> Yes mate, i have gone through http://www.rabbitmq.com/getstarted.html.
>>> I got some examples but most of the example uses tcp protocol to send
>>> messages.
>>>
>>
>> RabbitMQ protocol(s) assume TCP. There is no way to do AMQP 0.9.1 over
>> HTTP or MQTT over HTTP.
>>
>> RabbitMQ has HTTP API which is focused on monitoring. You can publish and
>> fetch messages over it but it's not particularly efficient.
>>  --
>> MK
>>
>> http://github.com/michaelklishin
>> http://twitter.com/michaelklishin
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/7cfee65d/attachment.html>

From michael.s.klishin at gmail.com  Sat Jan 18 07:43:11 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Sat, 18 Jan 2014 11:43:11 +0400
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <CA+3MLFjyZr-BfptBPhADdCdKNvX=B1eZ1jrWXyTjAXUgOE-Dvw@mail.gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
 <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
 <B06CC0D0-A3A7-46A1-A3C0-357EEE69E361@rabbitmq.com>
 <CA+3MLFiUVV+6=L=vs7O=M09=ex5=jT4W_e1wH+V6rLvs2PzWhw@mail.gmail.com>
 <CAE3HoVRLd8DzkQAxB1wfkuGdfT+0+0mK9ng96Gs+4jFiB9tQzg@mail.gmail.com>
 <CA+3MLFjBoBaYO_0AfZhu9YVDyAp5WTJFfrC9hgVwTbmcRt+hJw@mail.gmail.com>
 <CAE3HoVT338F4+H4sqG4qy_hOhgf0SDXjdobJ-FJ1hbWjf9Zsyg@mail.gmail.com>
 <CA+3MLFjyZr-BfptBPhADdCdKNvX=B1eZ1jrWXyTjAXUgOE-Dvw@mail.gmail.com>
Message-ID: <CAE3HoVQx6m3D1mjrQFCQUg2A+u1o+YFPLjNbVLtqQPkoXy4jvA@mail.gmail.com>

2014/1/18 Ravir Pandey <ravir.pandey at commusoft.co.uk>

> "you can do RPC over RabbitMQ to S and then S can issue HTTP requests."
>
> Like you said as above ?
>
>  and i had gone through HTTP management plugin. However i can install
> RabbitMQ on my server but my third party API is nothing to do with RabbitMQ
> - in that case it is feasible to send HTTP request through HTTP management
> plugin? OR Should i create separate service ( S ) to call third party HTTP
> API? I mean when i do RPC over rabbitMQ to S and my S will issue HTTP
> request?
>

The point of having RabbitMQ (or another messaging technology) is to
connect your Web app (W) with
a separate service (S) that will issue HTTP requests to the 3rd party API.

You can talk to RabbitMQ over AMQP 0-9-1, MQTT, STOMP or HTTP.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/8e4f6e34/attachment.html>

From ravir.pandey at commusoft.co.uk  Sat Jan 18 09:17:39 2014
From: ravir.pandey at commusoft.co.uk (Ravir Pandey)
Date: Sat, 18 Jan 2014 14:47:39 +0530
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <CAE3HoVQx6m3D1mjrQFCQUg2A+u1o+YFPLjNbVLtqQPkoXy4jvA@mail.gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
 <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
 <B06CC0D0-A3A7-46A1-A3C0-357EEE69E361@rabbitmq.com>
 <CA+3MLFiUVV+6=L=vs7O=M09=ex5=jT4W_e1wH+V6rLvs2PzWhw@mail.gmail.com>
 <CAE3HoVRLd8DzkQAxB1wfkuGdfT+0+0mK9ng96Gs+4jFiB9tQzg@mail.gmail.com>
 <CA+3MLFjBoBaYO_0AfZhu9YVDyAp5WTJFfrC9hgVwTbmcRt+hJw@mail.gmail.com>
 <CAE3HoVT338F4+H4sqG4qy_hOhgf0SDXjdobJ-FJ1hbWjf9Zsyg@mail.gmail.com>
 <CA+3MLFjyZr-BfptBPhADdCdKNvX=B1eZ1jrWXyTjAXUgOE-Dvw@mail.gmail.com>
 <CAE3HoVQx6m3D1mjrQFCQUg2A+u1o+YFPLjNbVLtqQPkoXy4jvA@mail.gmail.com>
Message-ID: <CA+3MLFiQpnKswU5LQi--ihTvno5nDYPn7P3fcCGMpOfhBDYt=g@mail.gmail.com>

So you mean to say, i should use RabbitMQ to connect to my Web app (
RabbitMQ role ends here ) and after that, when i get message then through
my separate service i should call my third party API, right?


On Sat, Jan 18, 2014 at 1:13 PM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

>
> 2014/1/18 Ravir Pandey <ravir.pandey at commusoft.co.uk>
>
>> "you can do RPC over RabbitMQ to S and then S can issue HTTP requests."
>>
>> Like you said as above ?
>>
>>  and i had gone through HTTP management plugin. However i can install
>> RabbitMQ on my server but my third party API is nothing to do with RabbitMQ
>> - in that case it is feasible to send HTTP request through HTTP management
>> plugin? OR Should i create separate service ( S ) to call third party HTTP
>> API? I mean when i do RPC over rabbitMQ to S and my S will issue HTTP
>> request?
>>
>
> The point of having RabbitMQ (or another messaging technology) is to
> connect your Web app (W) with
> a separate service (S) that will issue HTTP requests to the 3rd party API.
>
> You can talk to RabbitMQ over AMQP 0-9-1, MQTT, STOMP or HTTP.
>
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/15617a3e/attachment.html>

From kgoess at bepress.com  Sat Jan 18 01:07:05 2014
From: kgoess at bepress.com (kgoess at bepress.com)
Date: Fri, 17 Jan 2014 17:07:05 -0800 (PST)
Subject: [rabbitmq-discuss] looking for a design pattern for an aggregator
	(AMQP)
Message-ID: <67e868ba-8c15-463e-b97a-de98666bae2b@googlegroups.com>

We've been wrestling with this for a couple days and aren't any nearer a 
solution, so any suggestions would be helpful.

We have a queue of unaggregated data, hits per article.  We'd like to have 
a listener on that queue collect messages for, say 10,000 messages, or ten 
minutes, whichever comes first, before aggregating/coalescing the data and 
submitting that to a second queue.

We've been working with python AMQP (pika) code using the 
pika.BlockingConnection and basic_consume, using a SIGALRM timer. We're 
seeing lots of conflicts between the basic_consume callback, the SIGALRM 
callback, sending acknowledgments on the incoming data, and sending the 
outgoing aggregated data to the second queue. 

After a couple days experimenting with different approaches, we thought it 
might be productive to ask if anybody else has already solved this problem 
and can suggest a strategy, or if anybody things pika.BlockingConnection is 
even the right tool for this?

Thanks for any suggestions...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140117/8e525db3/attachment.html>

From simon at rabbitmq.com  Sat Jan 18 11:14:00 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Sat, 18 Jan 2014 11:14:00 +0000
Subject: [rabbitmq-discuss] Active Directory users of
 dn_lookup_attribute? (was Re: OpenLDAP-based auth with 'other_bind' option:
 no DN attribute?)
In-Reply-To: <20140117201613.1a69be4e@krasoola.nask.waw.pl>
References: <20131205145345.53ac312c@krasoola.nask.waw.pl>
 <52A1C130.8010004@rabbitmq.com> <52CD534C.9020205@rabbitmq.com>
 <20140117201613.1a69be4e@krasoola.nask.waw.pl>
Message-ID: <52DA61F8.9010701@rabbitmq.com>

On 17/01/2014 7:16PM, Jan Kaliszewski wrote:
> 2014-01-08 13:31, Simon MacMullen <simon at rabbitmq.com> dixit:
>
>> On 06/12/13 12:21, Simon MacMullen wrote:
>>> So I'll file a bug for this (your fix looks correct, but I want to
>>> make sure it doesn't break against AD).
>>
>> So I haven't made any progress with this, largely because I don't
>> have an Active Directory installation any more to test with, and I
>> really don't fancy setting one up from scratch.
>
> Unfortunately, me neither. :(

The change will be in the next release anyway though; I went back and 
checked RFC4511 and that says the field which populates object_name has 
to be there, so I think we're good.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From michael.laing at nytimes.com  Sat Jan 18 12:41:24 2014
From: michael.laing at nytimes.com (Laing, Michael)
Date: Sat, 18 Jan 2014 07:41:24 -0500
Subject: [rabbitmq-discuss] looking for a design pattern for an
	aggregator (AMQP)
In-Reply-To: <67e868ba-8c15-463e-b97a-de98666bae2b@googlegroups.com>
References: <67e868ba-8c15-463e-b97a-de98666bae2b@googlegroups.com>
Message-ID: <CAKgmDnFEgjDVap2yCzNCLEHh+GooxfSd8yPmohhB2E0LVCiWAQ@mail.gmail.com>

I do this sort of thing in pika using an asynchronous connection. I would
suggest tornado_connection.

Then use pika's connection.add_timeout method.

While doing any operation, like the summarization, you won't be yielding to
pika's event loop. This can cause heartbeat problems if the time taken goes
over the heartbeat interval, so watch for that.

ml


On Fri, Jan 17, 2014 at 8:07 PM, <kgoess at bepress.com> wrote:

> We've been wrestling with this for a couple days and aren't any nearer a
> solution, so any suggestions would be helpful.
>
> We have a queue of unaggregated data, hits per article.  We'd like to have
> a listener on that queue collect messages for, say 10,000 messages, or ten
> minutes, whichever comes first, before aggregating/coalescing the data and
> submitting that to a second queue.
>
> We've been working with python AMQP (pika) code using the
> pika.BlockingConnection and basic_consume, using a SIGALRM timer. We're
> seeing lots of conflicts between the basic_consume callback, the SIGALRM
> callback, sending acknowledgments on the incoming data, and sending the
> outgoing aggregated data to the second queue.
>
> After a couple days experimenting with different approaches, we thought it
> might be productive to ask if anybody else has already solved this problem
> and can suggest a strategy, or if anybody things pika.BlockingConnection is
> even the right tool for this?
>
> Thanks for any suggestions...
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/14e86282/attachment.html>

From michael.s.klishin at gmail.com  Sat Jan 18 16:35:19 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Sat, 18 Jan 2014 20:35:19 +0400
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <CA+3MLFiQpnKswU5LQi--ihTvno5nDYPn7P3fcCGMpOfhBDYt=g@mail.gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
 <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
 <B06CC0D0-A3A7-46A1-A3C0-357EEE69E361@rabbitmq.com>
 <CA+3MLFiUVV+6=L=vs7O=M09=ex5=jT4W_e1wH+V6rLvs2PzWhw@mail.gmail.com>
 <CAE3HoVRLd8DzkQAxB1wfkuGdfT+0+0mK9ng96Gs+4jFiB9tQzg@mail.gmail.com>
 <CA+3MLFjBoBaYO_0AfZhu9YVDyAp5WTJFfrC9hgVwTbmcRt+hJw@mail.gmail.com>
 <CAE3HoVT338F4+H4sqG4qy_hOhgf0SDXjdobJ-FJ1hbWjf9Zsyg@mail.gmail.com>
 <CA+3MLFjyZr-BfptBPhADdCdKNvX=B1eZ1jrWXyTjAXUgOE-Dvw@mail.gmail.com>
 <CAE3HoVQx6m3D1mjrQFCQUg2A+u1o+YFPLjNbVLtqQPkoXy4jvA@mail.gmail.com>
 <CA+3MLFiQpnKswU5LQi--ihTvno5nDYPn7P3fcCGMpOfhBDYt=g@mail.gmail.com>
Message-ID: <CAE3HoVSLW5nASkGM6M+Hk7uxps-K0_wbR-Z4ddrGpdEssVP1JA@mail.gmail.com>

2014/1/18 Ravir Pandey <ravir.pandey at commusoft.co.uk>

> So you mean to say, i should use RabbitMQ to connect to my Web app (
> RabbitMQ role ends here ) and after that, when i get message then through
> my separate service i should call my third party API, right?


Yes, the service S will communicate with the 3rd party API.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/ba106d3b/attachment.html>

From petar.georgie at gmail.com  Sat Jan 18 14:59:47 2014
From: petar.georgie at gmail.com (Petar Georgiev)
Date: Sat, 18 Jan 2014 06:59:47 -0800 (PST)
Subject: [rabbitmq-discuss] retransmiting of failed messages
Message-ID: <d0b9a841-e745-4ba7-8dda-7e391d4a6315@googlegroups.com>

Hi all

I have two rabbit mq nodes. The application componenets are connection to 
one of the two nodes. Compnet A is conetctet to node 1, component B is 
connected to node2. 
I want if node 1 is shutdown by power off the app component A to connect to 
node 2 and retransmit the send message to node1 - to resent the message to 
the available node. 

Is there is some internal rabbitmq way to achive this or there is some 
design patter which i can apply? 

If i publish a message to rabbit mq node that is down will i get 
IOException  and after how much time i will get it?


One more question - is there is some way to be informed when the connection 
with rabbit node is down - heartbeat or tcp keepalive feature? 


Best Regards,
Petar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/585f43f6/attachment.html>

From videlalvaro at gmail.com  Sat Jan 18 19:55:11 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Sat, 18 Jan 2014 20:55:11 +0100
Subject: [rabbitmq-discuss] retransmiting of failed messages
In-Reply-To: <d0b9a841-e745-4ba7-8dda-7e391d4a6315@googlegroups.com>
References: <d0b9a841-e745-4ba7-8dda-7e391d4a6315@googlegroups.com>
Message-ID: <CAMcAHLWY3m79LfyemgXZs1JhafoXMd8Gr1uLtegf1z66rhr4VA@mail.gmail.com>

Hi,

You probably need a load balancer to re route the client to the server
that's still up. You could detect the node shut down on your client,
and act accordingly.

And yes, RabbitMQ supports configurable heartbeats. See here:
http://www.rabbitmq.com/reliability.html

Regards,

Alvaro

From jsw at one.com  Sat Jan 18 20:33:31 2014
From: jsw at one.com (Josh West)
Date: Sat, 18 Jan 2014 15:33:31 -0500
Subject: [rabbitmq-discuss] Federation Topologies & Limitations
In-Reply-To: <CAKgmDnFfivYO4uVNs2LSodrH13VvGtzi_OqUBze9ZP6ThFMLdA@mail.gmail.com>
References: <52D6DF5A.6070103@one.com>
 <CAKgmDnFfivYO4uVNs2LSodrH13VvGtzi_OqUBze9ZP6ThFMLdA@mail.gmail.com>
Message-ID: <52DAE51B.1050503@one.com>

Hi Michael,

Wow great response.  Thanks for the details!

Do you think I could accomplish something similar with federated queue's 
and appropriate federation policies?

Thanks.

On 01/15/2014 07:03 PM, Laing, Michael wrote:
> Not seeing any other answers (yet)...
>
> We have experimented with many topologies and have tried federation, 
> but the design that has proven the most rugged and simplest and is in 
> production uses shovels.
>
> We have a core cluster that runs an exchange: the 'postoffice', This 
> cluster has a 'well-known' address so the retail instances can find 
> it. Each retail instance that comes up creates and runs 2 shovels:
>
> 1) the shovel from the core defines a source queue in the core with an 
> instance identifier, e.g. 'outbox_i-12345', and a binding to the core 
> postoffice exchange including that identifier (its address - more 
> about that later).
>
> 2) the shovel to the core uses the instance's 'outbox' queue as 
> source, which is bound to the instance postoffice exchange and 
> specifies the destination exchange as postoffice.
>
> We use 'addresses' as routing and binding keys. Our addresses have 3 
> parts: 'action', 'from_address', 'to_address'. The parts are separated 
> by periods.
>
> Each address has parts: we use 'region', 'product', 'service', 
> 'instance_id', 'pid'. Also separated by periods.
>
> Hence the 'address' of a retail instance is, e.g.:
> action: any action => *
> from_address:
>   region: from any => * (the postoffice actually spans multiple regions)
>   product: from any => * (identifies an internal customer)
>   service: from any => * (an app or a level of service)
>   instance: from any => *
>   pid: from any => *
> to_address:
>   region: mine => us-west-2
>   product: for any => *
>   service: for any => *
>   instance: mine => i-12345
>   pid: for any => *
>
> So that is: '*.*.*.*.*.*.us-west-2.*.*.i-12345.*' meaning the instance 
> will accept anything sent to its region and instance-id.
>
> A typical routing key might be:
> 'sub-resp.eu-west-1.messaging.update.i-98765.444.us-west-2.messaging.gateway.i-12345.-'
> meaning that a service running on a particular pid in another instance 
> is sending our instance a message for a different service, same 
> product, on an unknown pid.
>
> There should be an app queue bound to the postoffice on the instance 
> with an appropriate key to receive the message.
>
> We have standard routines, of course, to handle the creation and 
> manipulation of keys. Plus our deployments are automated - so all 
> those asterisks are quite easy to handle in practice although a little 
> hard to look at!
>
> And of course you can come up with your own addressing scheme to match 
> your requirements that could be simpler.
>
> This is just a straightforward bus implementation, made possible by 
> the flexibility of the RabbitMQ routing/binding scheme. We have found 
> it very useful and have extended the 'postoffice' across all of our 
> instances in multiple regions with good result.
>
> Michael Laing
> NYTimes
>
>
>
> On Wed, Jan 15, 2014 at 2:19 PM, Josh West <jsw at one.com 
> <mailto:jsw at one.com>> wrote:
>
>     Hi folks,
>
>     I'm currently working with the federation plugin in order to
>     connect potentially 100-200 different brokers.  The purpose is to
>     provide a virtual message bus, where systems on any broker can
>     send messages to other systems that are likely connected to a
>     different broker. Basically, a communication network / message bus.
>
>     I am experimenting with different architectures and it seems that
>     in order to prevent message duplications, I'll have to go with a
>     complete graph and max-hops set to 1 -- or in other words, each
>     broker will have to directly federate with the other 100-200 brokers.
>
>     I'm wondering about the limitations (if they exist) of the
>     federation plugin or this style of architecture.  There isn't much
>     information out there on the pro's and con's of different
>     topologies (aside from obvious issues with a large ring topology).
>
>     Can anybody elaborate or add any input?
>
>     Thanks!
>
>     -- 
>     Josh West
>     One.com - http://www.one.com
>
>     _______________________________________________
>     rabbitmq-discuss mailing list
>     rabbitmq-discuss at lists.rabbitmq.com
>     <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>     https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-- 
Josh West
One.com - http://www.one.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/1f9e7ac5/attachment.html>

From petar.georgie at gmail.com  Sat Jan 18 20:34:16 2014
From: petar.georgie at gmail.com (Petar Georgiev)
Date: Sat, 18 Jan 2014 12:34:16 -0800 (PST)
Subject: [rabbitmq-discuss] retransmiting of failed messages
In-Reply-To: <d0b9a841-e745-4ba7-8dda-7e391d4a6315@googlegroups.com>
References: <d0b9a841-e745-4ba7-8dda-7e391d4a6315@googlegroups.com>
Message-ID: <d04e18fd-cd4a-4d4d-b819-6eec38b48f79@googlegroups.com>

how to detect the node failure - catch io exception?

18 ?????? 2014, ??????, 16:59:47 UTC+2, Petar Georgiev ??????:
>
> Hi all
>
> I have two rabbit mq nodes. The application componenets are connection to 
> one of the two nodes. Compnet A is conetctet to node 1, component B is 
> connected to node2. 
> I want if node 1 is shutdown by power off the app component A to connect 
> to node 2 and retransmit the send message to node1 - to resent the message 
> to the available node. 
>
> Is there is some internal rabbitmq way to achive this or there is some 
> design patter which i can apply? 
>
> If i publish a message to rabbit mq node that is down will i get 
> IOException  and after how much time i will get it?
>
>
> One more question - is there is some way to be informed when the 
> connection with rabbit node is down - heartbeat or tcp keepalive feature? 
>
>
> Best Regards,
> Petar
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/7d79f649/attachment.html>

From michael.laing at nytimes.com  Sat Jan 18 20:47:59 2014
From: michael.laing at nytimes.com (Laing, Michael)
Date: Sat, 18 Jan 2014 15:47:59 -0500
Subject: [rabbitmq-discuss] Federation Topologies & Limitations
In-Reply-To: <52D7BDEE.5000902@rabbitmq.com>
References: <52D6DF5A.6070103@one.com>
	<52D7BDEE.5000902@rabbitmq.com>
Message-ID: <CAKgmDnFucn53389WNSFHZgcSyEKw6gF47o6TVUvEv=PrQ0RPsA@mail.gmail.com>

I would vote for deduplication where the ring buffer size is set by
configuration.

Effectively that is what we do in a little app that runs on each retail
instance.

Michael


On Thu, Jan 16, 2014 at 6:09 AM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 15/01/14 19:19, Josh West wrote:
>
>> I am experimenting with different architectures and it seems that in
>> order to prevent message duplications, I'll have to go with a complete
>> graph and max-hops set to 1 -- or in other words, each broker will have
>> to directly federate with the other 100-200 brokers.
>>
>
> Yeah, there isn't any cycle detection in federated exchanges (yet). I keep
> wondering about adding it, but the trouble is that I suspect people really
> want deduplication rather than cycle detection. So that means either
> deduplication buffers that can get arbitrarily large (when do you drop
> message IDs from them) or some sort of routing algorithm to automatically
> remove duplicate routes from the federated broker set (which requires a
> global view at least, and is also probably quite complicated and error
> prone).
>
> So I don't know of any good solutions for large federations other than
> max-hops = 1.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/f16dee36/attachment.html>

From michael.laing at nytimes.com  Sat Jan 18 20:56:42 2014
From: michael.laing at nytimes.com (Laing, Michael)
Date: Sat, 18 Jan 2014 15:56:42 -0500
Subject: [rabbitmq-discuss] Federation Topologies & Limitations
In-Reply-To: <52DAE51B.1050503@one.com>
References: <52D6DF5A.6070103@one.com>
 <CAKgmDnFfivYO4uVNs2LSodrH13VvGtzi_OqUBze9ZP6ThFMLdA@mail.gmail.com>
 <52DAE51B.1050503@one.com>
Message-ID: <CAKgmDnEJk+BuvdOpXGHHhiTUc1b-M_AgQd8K9S7LOMF8bdbvaA@mail.gmail.com>

It is possible. But it is a while since I set up the 'postoffice' using
federation.

Ultimately I settled on shovels because they are simple, reliable, didn't
create structures I couldn't thoroughly understand or control, and didn't
have the hop count issues.

We auto-generate our configs, alleviating the big pain associated with
shovels.

That said, this year I will look again into federation for at least some of
our requirements.

Michael


On Sat, Jan 18, 2014 at 3:33 PM, Josh West <jsw at one.com> wrote:

>  Hi Michael,
>
> Wow great response.  Thanks for the details!
>
> Do you think I could accomplish something similar with federated queue's
> and appropriate federation policies?
>
> Thanks.
>
>
> On 01/15/2014 07:03 PM, Laing, Michael wrote:
>
> Not seeing any other answers (yet)...
>
>  We have experimented with many topologies and have tried federation, but
> the design that has proven the most rugged and simplest and is in
> production uses shovels.
>
>  We have a core cluster that runs an exchange: the 'postoffice', This
> cluster has a 'well-known' address so the retail instances can find it.
> Each retail instance that comes up creates and runs 2 shovels:
>
>  1) the shovel from the core defines a source queue in the core with an
> instance identifier, e.g. 'outbox_i-12345', and a binding to the core
> postoffice exchange including that identifier (its address - more about
> that later).
>
>  2) the shovel to the core uses the instance's 'outbox' queue as source,
> which is bound to the instance postoffice exchange and specifies the
> destination exchange as postoffice.
>
>  We use 'addresses' as routing and binding keys. Our addresses have 3
> parts: 'action', 'from_address', 'to_address'. The parts are separated by
> periods.
>
>  Each address has parts: we use 'region', 'product', 'service',
> 'instance_id', 'pid'. Also separated by periods.
>
>  Hence the 'address' of a retail instance is, e.g.:
> action: any action => *
> from_address:
>   region: from any => * (the postoffice actually spans multiple regions)
>   product: from any => * (identifies an internal customer)
>   service: from any => * (an app or a level of service)
>   instance: from any => *
>   pid: from any => *
> to_address:
>   region: mine => us-west-2
>   product: for any => *
>   service: for any => *
>   instance: mine => i-12345
>   pid: for any => *
>
>  So that is: '*.*.*.*.*.*.us-west-2.*.*.i-12345.*' meaning the instance
> will accept anything sent to its region and instance-id.
>
>  A typical routing key might be:
>
> 'sub-resp.eu-west-1.messaging.update.i-98765.444.us-west-2.messaging.gateway.i-12345.-'
> meaning that a service running on a particular pid in another instance is
> sending our instance a message for a different service, same product, on an
> unknown pid.
>
>  There should be an app queue bound to the postoffice on the instance
> with an appropriate key to receive the message.
>
>  We have standard routines, of course, to handle the creation and
> manipulation of keys. Plus our deployments are automated - so all those
> asterisks are quite easy to handle in practice although a little hard to
> look at!
>
>  And of course you can come up with your own addressing scheme to match
> your requirements that could be simpler.
>
>  This is just a straightforward bus implementation, made possible by the
> flexibility of the RabbitMQ routing/binding scheme. We have found it very
> useful and have extended the 'postoffice' across all of our instances in
> multiple regions with good result.
>
>  Michael Laing
> NYTimes
>
>
>
>
>
> On Wed, Jan 15, 2014 at 2:19 PM, Josh West <jsw at one.com> wrote:
>
>> Hi folks,
>>
>> I'm currently working with the federation plugin in order to connect
>> potentially 100-200 different brokers.  The purpose is to provide a virtual
>> message bus, where systems on any broker can send messages to other systems
>> that are likely connected to a different broker. Basically, a communication
>> network / message bus.
>>
>> I am experimenting with different architectures and it seems that in
>> order to prevent message duplications, I'll have to go with a complete
>> graph and max-hops set to 1 -- or in other words, each broker will have to
>> directly federate with the other 100-200 brokers.
>>
>> I'm wondering about the limitations (if they exist) of the federation
>> plugin or this style of architecture.  There isn't much information out
>> there on the pro's and con's of different topologies (aside from obvious
>> issues with a large ring topology).
>>
>> Can anybody elaborate or add any input?
>>
>> Thanks!
>>
>> --
>> Josh West
>> One.com - http://www.one.com
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing listrabbitmq-discuss at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
> --
> Josh West
> One.com - http://www.one.com
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140118/8a5f9ccc/attachment.html>

From smallfish.xy at gmail.com  Sun Jan 19 02:39:57 2014
From: smallfish.xy at gmail.com (smallfish)
Date: Sun, 19 Jan 2014 10:39:57 +0800
Subject: [rabbitmq-discuss] Send HTTP request and get response using
	RabbitMQ
In-Reply-To: <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
References: <CA+3MLFhxv9zVJBfKe-fLsQprEMJimgx=-0qZqyr94O3BLsMwuw@mail.gmail.com>
 <CAE3HoVSHen4CmPk-rxRi9N0iMNm1yqgfKyp4w1yJCWeGXG5K+A@mail.gmail.com>
 <CA+3MLFjKsr+yej8wP11KykVdTFwHooZBC5JiSo+2s1SL0n9bBg@mail.gmail.com>
Message-ID: <CACPpB2whdtVDMGEN9B_HyXhVfRSo_Rx_maf1JPqv1SmF350CaA@mail.gmail.com>

I wrote HTTP Service wapper for RabbitMQ. Maybe useful to you.
https://github.com/smallfish/rabbitmq-http

--
smallfish http://chenxiaoyu.org


On Thu, Jan 16, 2014 at 9:53 PM, Ravir Pandey
<ravir.pandey at commusoft.co.uk>wrote:

> I want to send an HTTP request to HTTP app that contact another service
> but through RabbitMQ.
>
>
> On Thu, Jan 16, 2014 at 7:12 PM, Michael Klishin <
> michael.s.klishin at gmail.com> wrote:
>
>> 2014/1/16 Ravir Pandey <ravir.pandey at commusoft.co.uk>
>>
>>> For Ex. - i want to send request to my http server http://341.23.43.21,
>>> after processing request i need a reply from same server.
>>>
>>> How can i achieve this?
>>>
>>
>> Do you want to send an HTTP request to RabbitMQ or to an HTTP app that
>> contacts another service
>> over RabbitMQ?
>> --
>> MK
>>
>> http://github.com/michaelklishin
>> http://twitter.com/michaelklishin
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140119/df4b2ac6/attachment.html>

From joshua__lim at hotmail.com  Sun Jan 19 08:55:33 2014
From: joshua__lim at hotmail.com (Joshua Lim)
Date: Sun, 19 Jan 2014 08:55:33 +0000
Subject: [rabbitmq-discuss] How to use Presence Exchange Plugin using
 STOMP and RabbitMQ Server v3.2.1?
In-Reply-To: <52D7AB46.3050009@rabbitmq.com>
References: <BLU176-W293642F4DDDF8403CEBE03ADBD0@phx.gbl>,
 <52D3E006.1010904@rabbitmq.com>
 <BLU176-W365517B65C6C99F17E9A95ADB90@phx.gbl>, <52D7AB46.3050009@rabbitmq.com>
Message-ID: <BLU176-W4697C47FC193259292FBAAADBA0@phx.gbl>

Hi Emile, 
Thanks.  I managed to compile the plugin using debian on virtualbox.  The presence exchange was able to detect unbind event when the STOMP-WEB connection terminated when I closed the browser, but not when the ncat STOMP connection was terminated.  Not sure what's the problem, but at this monent, I only need to detect the presence of PhoneGap based consumers.
Rgds,Joshua

> Date: Thu, 16 Jan 2014 09:49:58 +0000
> From: emile at rabbitmq.com
> To: joshua__lim at hotmail.com
> CC: rabbitmq-discuss at lists.rabbitmq.com; tonygarnockjones+rabbitmq at gmail.com
> Subject: Re: [rabbitmq-discuss] How to use Presence Exchange Plugin using STOMP and RabbitMQ Server v3.2.1?
> 
> 
> Hi,
> 
> On 16/01/14 04:30, Joshua Lim wrote:
> 
> > d:/RabbitMQ/build-source/rabbitmq-public-umbrella/generate_deps
> 
> Plugin development on Windows is likely to fail due to incompatible
> filesystem conventions. Using Linux worked for me.
> 
> 
> 
> -Emile
> 
> 
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140119/a5a8105b/attachment.html>

From arun.viswanath at gmail.com  Sun Jan 19 09:30:18 2014
From: arun.viswanath at gmail.com (Arun Viswanath)
Date: Sun, 19 Jan 2014 15:00:18 +0530
Subject: [rabbitmq-discuss] RabbitMq server getting ConnectionTimedout
Message-ID: <CAE8rgHkVevdNToNhHR5RtA-hXvpc2Q4FKQRKX16S59ck2VF87Q@mail.gmail.com>

Hi,

My laptop is connected to my local lan so my laptop is having the IP
Address: 192.168.2.2.

But when I try to connect to the rabbitmq server (As a consumer) to the IP
Address 192.168.2.2:(Default Non-ssl port) it is giving Connection TimedOut.

Error during RabbitMq Server Setup : Connection timed out: connect
java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)

Even my firewall is not running in my laptop.

But I'm even able to connect with my "Public IP" and even with "localhost"

Any help is really appreciable.

Thanks In Advance,
Arun V
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140119/55a57799/attachment.html>

From michael.s.klishin at gmail.com  Sun Jan 19 11:05:15 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Sun, 19 Jan 2014 15:05:15 +0400
Subject: [rabbitmq-discuss] retransmiting of failed messages
In-Reply-To: <d04e18fd-cd4a-4d4d-b819-6eec38b48f79@googlegroups.com>
References: <d0b9a841-e745-4ba7-8dda-7e391d4a6315@googlegroups.com>
 <d04e18fd-cd4a-4d4d-b819-6eec38b48f79@googlegroups.com>
Message-ID: <CAE3HoVR4=27vBXogMA+3EC1G6e0AxP_vgB8O2OFrXwsWNru4sw@mail.gmail.com>

2014/1/19 Petar Georgiev <petar.georgie at gmail.com>

> how to detect the node failure - catch io exception?


If you only use Channel#basicPublish, it may suffice.

Otherwise register shutdown a listener and check if the signal is not
initiated
by the app:
http://www.rabbitmq.com/api-guide.html#shutdown
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140119/df487a14/attachment.html>

From arun.viswanath at gmail.com  Mon Jan 20 07:34:53 2014
From: arun.viswanath at gmail.com (Arun Viswanath)
Date: Sun, 19 Jan 2014 23:34:53 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMq Conenction TimedOut Error
Message-ID: <d9b927c8-9119-4eb3-a830-594ec21e813f@googlegroups.com>



My laptop is connected to my local lan so my laptop is having the IP
Address: 192.168.2.2.

But when I try to connect to the rabbitmq server (As a Producer) to the IP
Address 192.168.2.2:(Default Non-ssl port) it is giving Connection TimedOut.

Error during RabbitMq Server Setup : Connection timed out: connect
java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)

Even my firewall is not running in my Windows laptop.

But I'm even able to connect with my "Public IP" and even with "localhost"

Any help is really appreciable.

Thanks In Advance,
Arun V

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140119/e3b5b9be/attachment.html>

From mklishin at gopivotal.com  Mon Jan 20 07:43:03 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 20 Jan 2014 11:43:03 +0400
Subject: [rabbitmq-discuss] RabbitMq server getting ConnectionTimedout
In-Reply-To: <CAE8rgHkVevdNToNhHR5RtA-hXvpc2Q4FKQRKX16S59ck2VF87Q@mail.gmail.com>
References: <CAE8rgHkVevdNToNhHR5RtA-hXvpc2Q4FKQRKX16S59ck2VF87Q@mail.gmail.com>
Message-ID: <B518FD5F-6A6C-4B4C-BF3F-8F85D55404F1@rabbitmq.com>

On 19 Jan 2014, at 13:30, Arun Viswanath <arun.viswanath at gmail.com> wrote:

> My laptop is connected to my local lan so my laptop is having the IP Address: 192.168.2.2.
> 
> But when I try to connect to the rabbitmq server (As a consumer) to the IP Address 192.168.2.2:(Default Non-ssl port) it is giving Connection TimedOut.
> 
> Error during RabbitMq Server Setup : Connection timed out: connect
> java.net.ConnectException: Connection timed out: connect
> 	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
> 	at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
> 	at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
> 	at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
> 	at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
> 
> Even my firewall is not running in my laptop.
> 
> But I'm even able to connect with my "Public IP" and even with "localhost"
> 
> Any help is really appreciable.

Try connecting with telnet first.

You can explicitly tell RabbitMQ what address to bind to
using RABBITMQ_NODE_IP_ADDRESS:

http://www.rabbitmq.com/man/rabbitmq-server.1.man.html

MK

Software Engineer, Pivotal/RabbitMQ



From ashish.mukherjee at gmail.com  Mon Jan 20 09:04:54 2014
From: ashish.mukherjee at gmail.com (Ashish Mukherjee)
Date: Mon, 20 Jan 2014 14:34:54 +0530
Subject: [rabbitmq-discuss] Query about performance
Message-ID: <CACgMzfy3r1=sJGx6szsG97wkKVkbo+B4X2n2tZPf5dQ8BfSJ9w@mail.gmail.com>

Hi,

I have a Web application which submits messages to RabbitMQ consumer for
asynchronous report generation. At the same time, I have a real-time demo
on a very small subset of the data for demo. This is a synchronous
scenario.

When a large number of messages are fed to the queue for async processing,
the messages fed in for demo fall to the bottom of the queue and the
request times out. There is low CPU and memory usage observed. I am trying
to resolve this issue.

I have the following questions -

1) How do I improve throughput further after doing the following?

i) Removed basicQos() call from the consumer code, so that the full
capacity is used

ii) Turned off acknowledgements

2) How do I use multiple queues within the same process?

Is there any code example which demonstrates this and efficient use of
exchanges?

3) What are the metrics I should look at to evaluate performance of the
message queue?

Regards,
Ashish

-- 
M: +91-8800199037
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140120/2e7c354f/attachment.html>

From rtrlists at googlemail.com  Mon Jan 20 09:25:52 2014
From: rtrlists at googlemail.com (Robert Raschke)
Date: Mon, 20 Jan 2014 09:25:52 +0000
Subject: [rabbitmq-discuss] Query about performance
In-Reply-To: <CACgMzfy3r1=sJGx6szsG97wkKVkbo+B4X2n2tZPf5dQ8BfSJ9w@mail.gmail.com>
References: <CACgMzfy3r1=sJGx6szsG97wkKVkbo+B4X2n2tZPf5dQ8BfSJ9w@mail.gmail.com>
Message-ID: <CAH+xwdBGeYyauTRyeux-8UWegTCc+piw+9uLanTVSOUqkq15aQ@mail.gmail.com>

Hi Ashish,

from what you write, it makes me think that you just one queue, for both
the reporting and the demo. If that is correct, then try having two queues,
one just for the reporting and another just for the demo. If you then also
have two separate consumers, then the demo consumer will not be held up by
any reporting messages.

Regards,
Robby



On 20 January 2014 09:04, Ashish Mukherjee <ashish.mukherjee at gmail.com>wrote:

> Hi,
>
> I have a Web application which submits messages to RabbitMQ consumer for
> asynchronous report generation. At the same time, I have a real-time demo
> on a very small subset of the data for demo. This is a synchronous
> scenario.
>
> When a large number of messages are fed to the queue for async processing,
> the messages fed in for demo fall to the bottom of the queue and the
> request times out. There is low CPU and memory usage observed. I am trying
> to resolve this issue.
>
> I have the following questions -
>
> 1) How do I improve throughput further after doing the following?
>
> i) Removed basicQos() call from the consumer code, so that the full
> capacity is used
>
> ii) Turned off acknowledgements
>
> 2) How do I use multiple queues within the same process?
>
> Is there any code example which demonstrates this and efficient use of
> exchanges?
>
> 3) What are the metrics I should look at to evaluate performance of the
> message queue?
>
> Regards,
> Ashish
>
> --
> M: +91-8800199037
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140120/db2371e4/attachment.html>

From simon at rabbitmq.com  Mon Jan 20 09:36:39 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 20 Jan 2014 09:36:39 +0000
Subject: [rabbitmq-discuss] Federation Topologies & Limitations
In-Reply-To: <CAKgmDnEJk+BuvdOpXGHHhiTUc1b-M_AgQd8K9S7LOMF8bdbvaA@mail.gmail.com>
References: <52D6DF5A.6070103@one.com>
 <CAKgmDnFfivYO4uVNs2LSodrH13VvGtzi_OqUBze9ZP6ThFMLdA@mail.gmail.com>
 <52DAE51B.1050503@one.com>
 <CAKgmDnEJk+BuvdOpXGHHhiTUc1b-M_AgQd8K9S7LOMF8bdbvaA@mail.gmail.com>
Message-ID: <52DCEE27.1030708@rabbitmq.com>

Not trying to talk you out of any aspect of your design :-) But it's 
worth pointing out that the shovel doesn't have any issues with hop 
count because it always forwards messages unconditionally - so it can't 
do the thing max-hops is trying to do...

Cheers, Simon

On 18/01/2014 20:56, Laing, Michael wrote:
> It is possible. But it is a while since I set up the 'postoffice' using
> federation.
>
> Ultimately I settled on shovels because they are simple, reliable,
> didn't create structures I couldn't thoroughly understand or control,
> and didn't have the hop count issues.
>
> We auto-generate our configs, alleviating the big pain associated with
> shovels.
>
> That said, this year I will look again into federation for at least some
> of our requirements.
>
> Michael
>
>
> On Sat, Jan 18, 2014 at 3:33 PM, Josh West <jsw at one.com
> <mailto:jsw at one.com>> wrote:
>
>     Hi Michael,
>
>     Wow great response.  Thanks for the details!
>
>     Do you think I could accomplish something similar with federated
>     queue's and appropriate federation policies?
>
>     Thanks.
>
>
>     On 01/15/2014 07:03 PM, Laing, Michael wrote:
>>     Not seeing any other answers (yet)...
>>
>>     We have experimented with many topologies and have tried
>>     federation, but the design that has proven the most rugged and
>>     simplest and is in production uses shovels.
>>
>>     We have a core cluster that runs an exchange: the 'postoffice',
>>     This cluster has a 'well-known' address so the retail instances
>>     can find it. Each retail instance that comes up creates and runs 2
>>     shovels:
>>
>>     1) the shovel from the core defines a source queue in the core
>>     with an instance identifier, e.g. 'outbox_i-12345', and a binding
>>     to the core postoffice exchange including that identifier (its
>>     address - more about that later).
>>
>>     2) the shovel to the core uses the instance's 'outbox' queue as
>>     source, which is bound to the instance postoffice exchange and
>>     specifies the destination exchange as postoffice.
>>
>>     We use 'addresses' as routing and binding keys. Our addresses have
>>     3 parts: 'action', 'from_address', 'to_address'. The parts are
>>     separated by periods.
>>
>>     Each address has parts: we use 'region', 'product', 'service',
>>     'instance_id', 'pid'. Also separated by periods.
>>
>>     Hence the 'address' of a retail instance is, e.g.:
>>     action: any action => *
>>     from_address:
>>       region: from any => * (the postoffice actually spans multiple
>>     regions)
>>       product: from any => * (identifies an internal customer)
>>       service: from any => * (an app or a level of service)
>>       instance: from any => *
>>       pid: from any => *
>>     to_address:
>>       region: mine => us-west-2
>>       product: for any => *
>>       service: for any => *
>>       instance: mine => i-12345
>>       pid: for any => *
>>
>>     So that is: '*.*.*.*.*.*.us-west-2.*.*.i-12345.*' meaning the
>>     instance will accept anything sent to its region and instance-id.
>>
>>     A typical routing key might be:
>>     'sub-resp.eu-west-1.messaging.update.i-98765.444.us-west-2.messaging.gateway.i-12345.-'
>>     meaning that a service running on a particular pid in another
>>     instance is sending our instance a message for a different
>>     service, same product, on an unknown pid.
>>
>>     There should be an app queue bound to the postoffice on the
>>     instance with an appropriate key to receive the message.
>>
>>     We have standard routines, of course, to handle the creation and
>>     manipulation of keys. Plus our deployments are automated - so all
>>     those asterisks are quite easy to handle in practice although a
>>     little hard to look at!
>>
>>     And of course you can come up with your own addressing scheme to
>>     match your requirements that could be simpler.
>>
>>     This is just a straightforward bus implementation, made possible
>>     by the flexibility of the RabbitMQ routing/binding scheme. We have
>>     found it very useful and have extended the 'postoffice' across all
>>     of our instances in multiple regions with good result.
>>
>>     Michael Laing
>>     NYTimes
>>
>>
>>
>>     On Wed, Jan 15, 2014 at 2:19 PM, Josh West <jsw at one.com
>>     <mailto:jsw at one.com>> wrote:
>>
>>         Hi folks,
>>
>>         I'm currently working with the federation plugin in order to
>>         connect potentially 100-200 different brokers.  The purpose is
>>         to provide a virtual message bus, where systems on any broker
>>         can send messages to other systems that are likely connected
>>         to a different broker. Basically, a communication network /
>>         message bus.
>>
>>         I am experimenting with different architectures and it seems
>>         that in order to prevent message duplications, I'll have to go
>>         with a complete graph and max-hops set to 1 -- or in other
>>         words, each broker will have to directly federate with the
>>         other 100-200 brokers.
>>
>>         I'm wondering about the limitations (if they exist) of the
>>         federation plugin or this style of architecture.  There isn't
>>         much information out there on the pro's and con's of different
>>         topologies (aside from obvious issues with a large ring topology).
>>
>>         Can anybody elaborate or add any input?
>>
>>         Thanks!
>>
>>         --
>>         Josh West
>>         One.com - http://www.one.com
>>
>>         _______________________________________________
>>         rabbitmq-discuss mailing list
>>         rabbitmq-discuss at lists.rabbitmq.com
>>         <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>>         https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>>
>>
>>     _______________________________________________
>>     rabbitmq-discuss mailing list
>>     rabbitmq-discuss at lists.rabbitmq.com  <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>>     https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>     --
>     Josh West
>     One.com -http://www.one.com
>
>
>     _______________________________________________
>     rabbitmq-discuss mailing list
>     rabbitmq-discuss at lists.rabbitmq.com
>     <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>     https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


From simon at rabbitmq.com  Mon Jan 20 09:38:26 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 20 Jan 2014 09:38:26 +0000
Subject: [rabbitmq-discuss] Federation Topologies & Limitations
In-Reply-To: <CAKgmDnFucn53389WNSFHZgcSyEKw6gF47o6TVUvEv=PrQ0RPsA@mail.gmail.com>
References: <52D6DF5A.6070103@one.com> <52D7BDEE.5000902@rabbitmq.com>
 <CAKgmDnFucn53389WNSFHZgcSyEKw6gF47o6TVUvEv=PrQ0RPsA@mail.gmail.com>
Message-ID: <52DCEE92.40700@rabbitmq.com>

On 18/01/2014 20:47, Laing, Michael wrote:
> I would vote for deduplication where the ring buffer size is set by
> configuration.
>
> Effectively that is what we do in a little app that runs on each retail
> instance.

Yeah, that might be worth looking at. I always worry about sizes growing 
unbounded, sometimes I forget that you can just set a bound.

Cheers, Simon

From simon at rabbitmq.com  Mon Jan 20 09:41:42 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 20 Jan 2014 09:41:42 +0000
Subject: [rabbitmq-discuss] RabbitMq node won't stop
In-Reply-To: <e0363f6c-52c6-4936-bda4-f40b6b2462e1@googlegroups.com>
References: <e0363f6c-52c6-4936-bda4-f40b6b2462e1@googlegroups.com>
Message-ID: <52DCEF56.7090409@rabbitmq.com>

On 16/01/2014 20:39, Paul McCann wrote:
> I have a cluster set up with three nodes, and one of the nodes is
> exhibiting some strange behavior.   When I try to delete or purge a
> queue on that node, the call to delete or purge hangs.  Also when I try
> stop the node using rabbitmqctl stop_app, the stop_app command hangs.
> Any advice would be greatly appreciated.  This is in a QA environment,
> so it isn't causing major pain, but I am concerned about this happening
> in a production environment.

Which version are you running? Several bugs that can lead to deadlock on 
shutdown have been fixed recently.

Cheers, Simon

From emile at rabbitmq.com  Mon Jan 20 11:05:47 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 20 Jan 2014 11:05:47 +0000
Subject: [rabbitmq-discuss] How to use Presence Exchange Plugin using
 STOMP and RabbitMQ Server v3.2.1?
In-Reply-To: <BLU176-W4697C47FC193259292FBAAADBA0@phx.gbl>
References: <BLU176-W293642F4DDDF8403CEBE03ADBD0@phx.gbl>,
 <52D3E006.1010904@rabbitmq.com>
 <BLU176-W365517B65C6C99F17E9A95ADB90@phx.gbl>,
 <52D7AB46.3050009@rabbitmq.com> <BLU176-W4697C47FC193259292FBAAADBA0@phx.gbl>
Message-ID: <52DD030B.3070704@rabbitmq.com>


Hi Joshua,

On 19/01/14 08:55, Joshua Lim wrote:
>  The presence exchange was able to detect unbind event when the
> STOMP-WEB connection terminated when I closed the browser, but not when
> the ncat STOMP connection was terminated.


It is probably due to heartbeats not being implemented in web-stomp.
See the "Missing features" section on
http://www.rabbitmq.com/web-stomp.html .


-Emile


From emile at rabbitmq.com  Mon Jan 20 11:26:46 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 20 Jan 2014 11:26:46 +0000
Subject: [rabbitmq-discuss] Query about performance
In-Reply-To: <CACgMzfy3r1=sJGx6szsG97wkKVkbo+B4X2n2tZPf5dQ8BfSJ9w@mail.gmail.com>
References: <CACgMzfy3r1=sJGx6szsG97wkKVkbo+B4X2n2tZPf5dQ8BfSJ9w@mail.gmail.com>
Message-ID: <52DD07F6.3030303@rabbitmq.com>


Hi,

On 20/01/14 09:04, Ashish Mukherjee wrote:
> When a large number of messages are fed to the queue for async
> processing, the messages fed in for demo fall to the bottom of the queue
> and the request times out.

New messages will be enqueued at the back, and ready messages will be
dequeued from the front of the queue. It is not possible to insert
messages at the front of the queue (unless they are being requeued).

As Robert suggests, avoid putting different kinds of messages in the
same queue.

> 1) How do I improve throughput further after doing the following?
> 
> i) Removed basicQos() call from the consumer code, so that the full
> capacity is used

Consider using a larger prefetch count instead of unlimited.

> ii) Turned off acknowledgements

You can choose between client or server-side acknowledgements.
Server-side acknowledgements are faster. Batching multiple client-side
acknowledgements is also fast.

> 2) How do I use multiple queues within the same process?

Tutorials 3-6 illustrate the use of multiple queues.

> Is there any code example which demonstrates this and efficient use of
> exchanges?

Exchanges are seldom a performance bottleneck.

> 3) What are the metrics I should look at to evaluate performance of the
> message queue?

It depends on your application. Latency and throughput are often important.


-Emile


From sekhar434145 at gmail.com  Mon Jan 20 11:58:51 2014
From: sekhar434145 at gmail.com (Rajasekhar P)
Date: Mon, 20 Jan 2014 17:28:51 +0530
Subject: [rabbitmq-discuss] JsonMessageConverter for Generics is not working
Message-ID: <CAH75Yb74T87VZ3LXoiwKK4_fCxdPdX0tBk82QfyH5UKHGWCcoA@mail.gmail.com>

Hi Team,

JsonMessageConverter for Generics is not working while message conversion
in AMQP. Is there any alternative approach?

Thanks in advance!!!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140120/f983b3d7/attachment.html>

From mklishin at gopivotal.com  Mon Jan 20 12:04:21 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 20 Jan 2014 16:04:21 +0400
Subject: [rabbitmq-discuss] JsonMessageConverter for Generics is not
	working
In-Reply-To: <CAH75Yb74T87VZ3LXoiwKK4_fCxdPdX0tBk82QfyH5UKHGWCcoA@mail.gmail.com>
References: <CAH75Yb74T87VZ3LXoiwKK4_fCxdPdX0tBk82QfyH5UKHGWCcoA@mail.gmail.com>
Message-ID: <A25B02E3-89AA-449F-BF06-E0AC33FA944A@rabbitmq.com>


On 20 Jan 2014, at 15:58, Rajasekhar P <sekhar434145 at gmail.com> wrote:

> JsonMessageConverter for Generics is not working while message conversion in AMQP

Can you please be a little more specific?

MK

Software Engineer, Pivotal/RabbitMQ



From pauldmccann at gmail.com  Mon Jan 20 13:37:05 2014
From: pauldmccann at gmail.com (Paul McCann)
Date: Mon, 20 Jan 2014 08:37:05 -0500
Subject: [rabbitmq-discuss] RabbitMq node won't stop
In-Reply-To: <FA8B1709-31D2-4B58-B95E-11DA4EE624A0@gmail.com>
References: <e0363f6c-52c6-4936-bda4-f40b6b2462e1@googlegroups.com>
 <52DCEF56.7090409@rabbitmq.com>
 <FA8B1709-31D2-4B58-B95E-11DA4EE624A0@gmail.com>
Message-ID: <CAPgJAVhp4AQj8pPjXLZnr7K=uUOroi1Ynibfxmas9=y8=Ra1Dw@mail.gmail.com>

correction: RabbitMQ 3.2.2, Erlang R14B04


On Mon, Jan 20, 2014 at 7:36 AM, Paul McCann <pauldmccann at gmail.com> wrote:

> Hi Simon,
>  We are using version 3.22.
>
> Sent from my mobile phone
>
> > On Jan 20, 2014, at 4:41 AM, Simon MacMullen <simon at rabbitmq.com> wrote:
> >
> >> On 16/01/2014 20:39, Paul McCann wrote:
> >> I have a cluster set up with three nodes, and one of the nodes is
> >> exhibiting some strange behavior.   When I try to delete or purge a
> >> queue on that node, the call to delete or purge hangs.  Also when I try
> >> stop the node using rabbitmqctl stop_app, the stop_app command hangs.
> >> Any advice would be greatly appreciated.  This is in a QA environment,
> >> so it isn't causing major pain, but I am concerned about this happening
> >> in a production environment.
> >
> > Which version are you running? Several bugs that can lead to deadlock on
> shutdown have been fixed recently.
> >
> > Cheers, Simon
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140120/8b1f4a7c/attachment.html>

From bison_art at o2.pl  Mon Jan 20 14:19:52 2014
From: bison_art at o2.pl (rabbit15)
Date: Mon, 20 Jan 2014 06:19:52 -0800 (PST)
Subject: [rabbitmq-discuss] How remove messages which must be ack
In-Reply-To: <793A7420-B621-46C1-9557-8DD936C4FD1C@rabbitmq.com>
References: <1387291762482-32168.post@n5.nabble.com>
 <DACA5C9B-4F70-4213-9D79-39A3F209C2E9@rabbitmq.com>
 <1389967821435-32669.post@n5.nabble.com>
 <793A7420-B621-46C1-9557-8DD936C4FD1C@rabbitmq.com>
Message-ID: <1390227592860-32719.post@n5.nabble.com>

"I was afraid so.

Thank you for your answers."



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/How-remove-messages-which-must-be-ack-tp32168p32719.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From arun.viswanath at gmail.com  Mon Jan 20 15:43:44 2014
From: arun.viswanath at gmail.com (Arun Viswanath)
Date: Mon, 20 Jan 2014 21:13:44 +0530
Subject: [rabbitmq-discuss] RabbitMq server getting ConnectionTimedout
In-Reply-To: <B518FD5F-6A6C-4B4C-BF3F-8F85D55404F1@rabbitmq.com>
References: <CAE8rgHkVevdNToNhHR5RtA-hXvpc2Q4FKQRKX16S59ck2VF87Q@mail.gmail.com>
 <B518FD5F-6A6C-4B4C-BF3F-8F85D55404F1@rabbitmq.com>
Message-ID: <CAE8rgHkbVk6QNz09Bh2rmN7L0xpd9c_F=vG2XOyVoQ3J6ac3wg@mail.gmail.com>

Hi MK,

Thanks for your reply.

my rabbitmq log is showing the following,

=INFO REPORT==== 20-Jan-2014::20:57:55 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 20-Jan-2014::20:57:55 ===
started TCP Listener on 0.0.0.0:5672

=INFO REPORT==== 20-Jan-2014::20:57:55 ===
Server startup complete; 0 plugins started.


It seems it is binding to all interfaces but why i'm not able to connect.

Also I'm able to connect to rabbitmq when I connect to my office network
with IP address (16.125.x.x) but I'm not able to connect to rabbitmq if I
connect to my home router (via ether-net) which runs the DHCP server and
giving 192.168.2.2 ip address to my laptop.

Also I'm not able to telnet to the rabbitMq machine even with both IP
Addresses (16.125.x.x and 192.168.x.x)

Thanks In Advance

Regards,
Arun V


On Mon, Jan 20, 2014 at 1:13 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> On 19 Jan 2014, at 13:30, Arun Viswanath <arun.viswanath at gmail.com> wrote:
>
> > My laptop is connected to my local lan so my laptop is having the IP
> Address: 192.168.2.2.
> >
> > But when I try to connect to the rabbitmq server (As a consumer) to the
> IP Address 192.168.2.2:(Default Non-ssl port) it is giving Connection
> TimedOut.
> >
> > Error during RabbitMq Server Setup : Connection timed out: connect
> > java.net.ConnectException: Connection timed out: connect
> >       at java.net.DualStackPlainSocketImpl.connect0(Native Method)
> >       at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
> >       at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
> >       at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown
> Source)
> >       at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
> >
> > Even my firewall is not running in my laptop.
> >
> > But I'm even able to connect with my "Public IP" and even with
> "localhost"
> >
> > Any help is really appreciable.
>
> Try connecting with telnet first.
>
> You can explicitly tell RabbitMQ what address to bind to
> using RABBITMQ_NODE_IP_ADDRESS:
>
> http://www.rabbitmq.com/man/rabbitmq-server.1.man.html
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140120/05b461c7/attachment.html>

From mklishin at gopivotal.com  Mon Jan 20 17:56:24 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 20 Jan 2014 21:56:24 +0400
Subject: [rabbitmq-discuss] RabbitMq server getting ConnectionTimedout
In-Reply-To: <CAE8rgHkbVk6QNz09Bh2rmN7L0xpd9c_F=vG2XOyVoQ3J6ac3wg@mail.gmail.com>
References: <CAE8rgHkVevdNToNhHR5RtA-hXvpc2Q4FKQRKX16S59ck2VF87Q@mail.gmail.com>
 <B518FD5F-6A6C-4B4C-BF3F-8F85D55404F1@rabbitmq.com>
 <CAE8rgHkbVk6QNz09Bh2rmN7L0xpd9c_F=vG2XOyVoQ3J6ac3wg@mail.gmail.com>
Message-ID: <D5CF928A-CF97-43AF-B80D-060E2F69C766@gopivotal.com>

On 20 Jan 2014, at 19:43, Arun Viswanath <arun.viswanath at gmail.com> wrote:

> Also I'm able to connect to rabbitmq when I connect to my office network with IP address (16.125.x.x) but I'm not able to connect to rabbitmq if I connect to my home router (via ether-net) which runs the DHCP server and giving 192.168.2.2 ip address to my laptop.
> 
> Also I'm not able to telnet to the rabbitMq machine even with both IP Addresses (16.125.x.x and 192.168.x.x)

I suspect it is a firewall issue of some kind. Use Wireshark (or similar) to
inspect network traffic.

--
MK

Software Engineer, Pivotal/RabbitMQ



From mgg at giagnocavo.net  Mon Jan 20 20:28:07 2014
From: mgg at giagnocavo.net (Michael Giagnocavo)
Date: Mon, 20 Jan 2014 20:28:07 +0000
Subject: [rabbitmq-discuss] Query about performance
In-Reply-To: <52DD07F6.3030303@rabbitmq.com>
References: <CACgMzfy3r1=sJGx6szsG97wkKVkbo+B4X2n2tZPf5dQ8BfSJ9w@mail.gmail.com>
 <52DD07F6.3030303@rabbitmq.com>
Message-ID: <45deaa96ccae41dc9bea4b1d83ae4eec@CO1PR07MB331.namprd07.prod.outlook.com>

>> i) Removed basicQos() call from the consumer code, so that the full 
> capacity is used

>Consider using a larger prefetch count instead of unlimited.

I'll just an an anecdote here: Shovel does unlimited prefetch by default. This lead to our RabbitMQ instances grinding to a halt under any sort of load due to exhausting memory. A 2K msg prefetch solved everything with no perf loss.

-Michael

From arunrao.seattle at gmail.com  Mon Jan 20 22:08:30 2014
From: arunrao.seattle at gmail.com (Arun Rao)
Date: Mon, 20 Jan 2014 14:08:30 -0800
Subject: [rabbitmq-discuss] RabbitMQ API - aliveness-test
Message-ID: <CAEJg2GBa=CMXnJRZyCE2to3aHoT1Fdt-jY8YFWqfk50t_Rvj=A@mail.gmail.com>

Hello -

What are the possible status values for aliveness-test?

aliveness-test for a vhost checks for the vhost health on the node or at a
cluster level?

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140120/c00de3b3/attachment.html>

From arunrao.seattle at gmail.com  Mon Jan 20 22:30:07 2014
From: arunrao.seattle at gmail.com (Arun Rao)
Date: Mon, 20 Jan 2014 14:30:07 -0800
Subject: [rabbitmq-discuss] RabbitMq server getting ConnectionTimedout
In-Reply-To: <D5CF928A-CF97-43AF-B80D-060E2F69C766@gopivotal.com>
References: <CAE8rgHkVevdNToNhHR5RtA-hXvpc2Q4FKQRKX16S59ck2VF87Q@mail.gmail.com>
 <B518FD5F-6A6C-4B4C-BF3F-8F85D55404F1@rabbitmq.com>
 <CAE8rgHkbVk6QNz09Bh2rmN7L0xpd9c_F=vG2XOyVoQ3J6ac3wg@mail.gmail.com>
 <D5CF928A-CF97-43AF-B80D-060E2F69C766@gopivotal.com>
Message-ID: <CAEJg2GAkFsc2uHMMQv-hC4ttcVhTDWEwQv=45ndZDU3VH+emhA@mail.gmail.com>

from your RabbitMQ startup logs, it shows your DHCP lookup failed.

=INFO REPORT==== 20-Jan-2014::20:57:55 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 20-Jan-2014::20:57:55 ===
started TCP Listener on 0.0.0.0:5672

=INFO REPORT==== 20-Jan-2014::20:57:55 ===
Server startup complete; 0 plugins started.

http://en.wikipedia.org/wiki/0.0.0.0

You can do netstat to see if RabbitMQ is listening.

Thanks!


On Mon, Jan 20, 2014 at 9:56 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

> On 20 Jan 2014, at 19:43, Arun Viswanath <arun.viswanath at gmail.com> wrote:
>
> > Also I'm able to connect to rabbitmq when I connect to my office network
> with IP address (16.125.x.x) but I'm not able to connect to rabbitmq if I
> connect to my home router (via ether-net) which runs the DHCP server and
> giving 192.168.2.2 ip address to my laptop.
> >
> > Also I'm not able to telnet to the rabbitMq machine even with both IP
> Addresses (16.125.x.x and 192.168.x.x)
>
> I suspect it is a firewall issue of some kind. Use Wireshark (or similar)
> to
> inspect network traffic.
>
> --
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140120/286a76bf/attachment.html>

From jhzhang.email at gmail.com  Mon Jan 20 23:08:22 2014
From: jhzhang.email at gmail.com (Jianhui Zhang)
Date: Mon, 20 Jan 2014 15:08:22 -0800
Subject: [rabbitmq-discuss] extremely long and weird delivery tag in
 amqp.js consumer
In-Reply-To: <19CB80C0-59B8-4C21-93EE-A090D53AD112@rabbitmq.com>
References: <CAAAYafP8zYYc07TP4dqBapsdLXdnZXESFAcNNoyJ_zEtah5Haw@mail.gmail.com>
 <19CB80C0-59B8-4C21-93EE-A090D53AD112@rabbitmq.com>
Message-ID: <CAAAYafPdGp9O0VepVHL2pFCnv2XxYGPuu5ZoTUm8X3wgY9acTQ@mail.gmail.com>

Michael,

Thanks for the tip. We'll look into amqp.node.

Thanks,
James


On Sat, Jan 11, 2014 at 1:39 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

>
> On 10 Jan 2014, at 23:09, Jianhui Zhang <jhzhang.email at gmail.com> wrote:
>
> > We are using amqp.js library to consume messages from rabbitmq. But when
> we log the delivery tag, we found them extremely long and weird (aren't
> they supposed to be a long int?). For example:
>
> This sounds like a deserialization bug in your library. I?m not aware of
> amqp.js, is it new? Can you link to the source?
>
> I?d recommend amqp.node [1] for Node.js users.
>
> 1. https://github.com/squaremo/amqp.node/
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140120/2c640604/attachment.html>

From jared at kauppi.la  Tue Jan 21 04:20:03 2014
From: jared at kauppi.la (Jared Kauppila)
Date: Mon, 20 Jan 2014 22:20:03 -0600
Subject: [rabbitmq-discuss] RabbitMQ 3.2.2 and Erlang R16B03 - SSL Issue
Message-ID: <001d01cf1660$0f80e250$2e82a6f0$@Kauppi.la>

I am in the process of upgrading our existing (SSL enabled) clusters
(RabbitMQ 3.1.3 and Erlang R16B01) to the most recent versions (RabbitMQ
3.2.2 and Erlang R16B03) and I encountered an issue which may be a problem
with the SSL/TLS implementation on the latest version of Erlang?

 

We have the RabbitMQ Management webui load-balanced via F5 LTMs on Port 443
using Client/Server SSL profiles to terminate SSL at the appliance in order
to use cookie persistence to a node.

 

After updating our Dev cluster, traffic would no longer be sent to the nodes
when traversing the LTMs. Digging into the logs, I found the following F5
error:

 

                01260017 - Connection attempt to insecure SSL server (see
RFC5746) aborted: XX.XX.XX.XX.:443.

 

There is a workaround present in the F5 KB on the issue:

 

                Note: If upgrading the back-end SSL server is not an option,
you can set the Secure Renegotiation setting in the Server SSL profile to
Request, which will allow the back-end SSL server to continue to renegotiate
insecurely.

 

 <http://support.f5.com/kb/en-us/solutions/public/13000/800/sol13860>
http://support.f5.com/kb/en-us/solutions/public/13000/800/sol13860

 

Hitting a node directly with Firefox, you can see the following error in the
Error Console:

 

                server does not support RFC 5746, see CVE-2009-3555

 

Our current Test/Qual/Prod clusters on the previous version (3.1.3 and
R16B01) all work without issue.

 

Thoughts?

 

Thanks

 

-- 
Jared

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140120/8ddab1c4/attachment.html>

From ravindrapandey1982 at gmail.com  Tue Jan 21 05:19:08 2014
From: ravindrapandey1982 at gmail.com (Ravi Pandey)
Date: Tue, 21 Jan 2014 10:49:08 +0530
Subject: [rabbitmq-discuss] Connect two different servers
Message-ID: <CAPCD91nwD5VcCHaJh7sftU51NozCwBMH737gr=xi+NO0r3_-gA@mail.gmail.com>

Hi,

I have installed RabbitMQ on 2 different server ( having different IP
address ). Now i want one to behave like publisher and other want to behave
like consumer but when i connect using TCP socket 5672 it says - PHP
Warning:  stream_socket_client(): unable to connect to
tcp://xx.xx.xx.xx:5672 (No route to host)

What are the possible causes?

Thanks,
Ravi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/97c95a4e/attachment.html>

From sid.young at gmail.com  Tue Jan 21 05:32:50 2014
From: sid.young at gmail.com (Sid Young)
Date: Tue, 21 Jan 2014 15:32:50 +1000
Subject: [rabbitmq-discuss] Connect two different servers
In-Reply-To: <CAPCD91nwD5VcCHaJh7sftU51NozCwBMH737gr=xi+NO0r3_-gA@mail.gmail.com>
References: <CAPCD91nwD5VcCHaJh7sftU51NozCwBMH737gr=xi+NO0r3_-gA@mail.gmail.com>
Message-ID: <CAEZ+gOyKLtGH8nLWr7wWNra+i2uc-GrJaws6rSgxxYTPgZZorA@mail.gmail.com>

Are you using an IP address or FQDN?? can you ping each host from the
other? Have you done any basic network trouble shooting before psoting? If
so what did you do and what did you get?

And..... Do you specifically need 2 servers? You do realise the publisher
and consumer can be on the server or remote to the server(s).....


On Tue, Jan 21, 2014 at 3:19 PM, Ravi Pandey
<ravindrapandey1982 at gmail.com>wrote:

> Hi,
>
> I have installed RabbitMQ on 2 different server ( having different IP
> address ). Now i want one to behave like publisher and other want to behave
> like consumer but when i connect using TCP socket 5672 it says - PHP
> Warning:  stream_socket_client(): unable to connect to
> tcp://xx.xx.xx.xx:5672 (No route to host)
>
> What are the possible causes?
>
> Thanks,
> Ravi
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
Sid
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/9ac42af0/attachment.html>

From roberto at canary.is  Tue Jan 21 05:40:11 2014
From: roberto at canary.is (Roberto Pagliari)
Date: Tue, 21 Jan 2014 00:40:11 -0500
Subject: [rabbitmq-discuss] Rabbitmq <-> MQTT
Message-ID: <CANAFtV4-X5JTCOVSm4OLu=NLKZfAh-+vWYwG60Yri8GM3vtDLw@mail.gmail.com>

I have a couple of questions about using the RabbitMQ MQTT adapter (
https://www.rabbitmq.com/mqtt.html)

1. Where should this config file put, and what would be its name

[{rabbit, [{tcp_listeners, [5672]}]}, {rabbitmq_mqtt, [{default_user,
<<"guest">>}, {default_pass, <<"guest">>}, {allow_anonymous, true}, {vhost,
<<"/">>}, {exchange, <<"amq.topic">>}, {subscription_ttl, 1800000},
{prefetch, 10}, {ssl_listeners, []}, {tcp_listeners, [1883]},
{tcp_listen_options, [binary, {packet, raw}, {reuseaddr, true}, {backlog,
128}, {nodelay, true}]}]} ].


2. Once everything is ready, what should I do? Should I run the MQTT
broker, the Rabbit server and the Rabbit listener on one side, and an MQTT
publisher on the other side?

Thank you,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/4b67a73c/attachment.html>

From ravindrapandey1982 at gmail.com  Tue Jan 21 05:46:03 2014
From: ravindrapandey1982 at gmail.com (Ravi Pandey)
Date: Tue, 21 Jan 2014 11:16:03 +0530
Subject: [rabbitmq-discuss] Connect two different servers
In-Reply-To: <CAEZ+gOyKLtGH8nLWr7wWNra+i2uc-GrJaws6rSgxxYTPgZZorA@mail.gmail.com>
References: <CAPCD91nwD5VcCHaJh7sftU51NozCwBMH737gr=xi+NO0r3_-gA@mail.gmail.com>
 <CAEZ+gOyKLtGH8nLWr7wWNra+i2uc-GrJaws6rSgxxYTPgZZorA@mail.gmail.com>
Message-ID: <CAPCD91=ycWqqaNpqOc5_PT9YDp+ZB2zJ25LN5dtYseUXUofd4A@mail.gmail.com>

I am using IP address and yes i can ping each host from the other. I did
the basic network trouble shooting like ping, route etc and i can also call
API's from each other's host.

Yes i specifically need 2 different servers as i have many third party
API's which calls my application from one server and other server passes
the info to that server. So i assume consumer on one server and publisher
on other server works fine.



On Tue, Jan 21, 2014 at 11:02 AM, Sid Young <sid.young at gmail.com> wrote:

> Are you using an IP address or FQDN?? can you ping each host from the
> other? Have you done any basic network trouble shooting before psoting? If
> so what did you do and what did you get?
>
> And..... Do you specifically need 2 servers? You do realise the publisher
> and consumer can be on the server or remote to the server(s).....
>
>
> On Tue, Jan 21, 2014 at 3:19 PM, Ravi Pandey <ravindrapandey1982 at gmail.com
> > wrote:
>
>> Hi,
>>
>> I have installed RabbitMQ on 2 different server ( having different IP
>> address ). Now i want one to behave like publisher and other want to behave
>> like consumer but when i connect using TCP socket 5672 it says - PHP
>> Warning:  stream_socket_client(): unable to connect to
>> tcp://xx.xx.xx.xx:5672 (No route to host)
>>
>> What are the possible causes?
>>
>> Thanks,
>> Ravi
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
>
> --
> Sid
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/6f939084/attachment.html>

From ravindrapandey1982 at gmail.com  Tue Jan 21 06:10:21 2014
From: ravindrapandey1982 at gmail.com (Ravi Pandey)
Date: Tue, 21 Jan 2014 11:40:21 +0530
Subject: [rabbitmq-discuss] Connect two different servers
In-Reply-To: <CAPCD91=ycWqqaNpqOc5_PT9YDp+ZB2zJ25LN5dtYseUXUofd4A@mail.gmail.com>
References: <CAPCD91nwD5VcCHaJh7sftU51NozCwBMH737gr=xi+NO0r3_-gA@mail.gmail.com>
 <CAEZ+gOyKLtGH8nLWr7wWNra+i2uc-GrJaws6rSgxxYTPgZZorA@mail.gmail.com>
 <CAPCD91=ycWqqaNpqOc5_PT9YDp+ZB2zJ25LN5dtYseUXUofd4A@mail.gmail.com>
Message-ID: <CAPCD91mdJQhRsU+6zQNzXHvTZAqMVq4md5fOG4_8eE6s=To3_g@mail.gmail.com>

Hi Sid,

Thanks. Your question solved my problem :)

The problem was my firewall block external connections.

Ravi


On Tue, Jan 21, 2014 at 11:16 AM, Ravi Pandey
<ravindrapandey1982 at gmail.com>wrote:

> I am using IP address and yes i can ping each host from the other. I did
> the basic network trouble shooting like ping, route etc and i can also call
> API's from each other's host.
>
> Yes i specifically need 2 different servers as i have many third party
> API's which calls my application from one server and other server passes
> the info to that server. So i assume consumer on one server and publisher
> on other server works fine.
>
>
>
> On Tue, Jan 21, 2014 at 11:02 AM, Sid Young <sid.young at gmail.com> wrote:
>
>> Are you using an IP address or FQDN?? can you ping each host from the
>> other? Have you done any basic network trouble shooting before psoting? If
>> so what did you do and what did you get?
>>
>> And..... Do you specifically need 2 servers? You do realise the publisher
>> and consumer can be on the server or remote to the server(s).....
>>
>>
>> On Tue, Jan 21, 2014 at 3:19 PM, Ravi Pandey <
>> ravindrapandey1982 at gmail.com> wrote:
>>
>>> Hi,
>>>
>>> I have installed RabbitMQ on 2 different server ( having different IP
>>> address ). Now i want one to behave like publisher and other want to behave
>>> like consumer but when i connect using TCP socket 5672 it says - PHP
>>> Warning:  stream_socket_client(): unable to connect to
>>> tcp://xx.xx.xx.xx:5672 (No route to host)
>>>
>>> What are the possible causes?
>>>
>>> Thanks,
>>> Ravi
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>>
>>
>>
>> --
>> Sid
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/acf19315/attachment.html>

From mklishin at gopivotal.com  Tue Jan 21 06:15:44 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 21 Jan 2014 10:15:44 +0400
Subject: [rabbitmq-discuss] RabbitMQ API - aliveness-test
In-Reply-To: <CAEJg2GBa=CMXnJRZyCE2to3aHoT1Fdt-jY8YFWqfk50t_Rvj=A@mail.gmail.com>
References: <CAEJg2GBa=CMXnJRZyCE2to3aHoT1Fdt-jY8YFWqfk50t_Rvj=A@mail.gmail.com>
Message-ID: <030AF7E0-3802-48BE-9D36-02C0F78F5D54@rabbitmq.com>

On 21 Jan 2014, at 02:08, Arun Rao <arunrao.seattle at gmail.com> wrote:

> What are the possible status values for aliveness-test? 

200 and "everything else".

> aliveness-test for a vhost checks for the vhost health on the node or at a cluster level?

Aliveness test creates a new connection to the node you contact, declares a queue (which is not mirrored),
publishes a message so that it is routed there, then consumes the message using basic.get.
Other cluster nodes are not involved.

MK

Software Engineer, Pivotal/RabbitMQ



From mklishin at gopivotal.com  Tue Jan 21 06:18:13 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 21 Jan 2014 10:18:13 +0400
Subject: [rabbitmq-discuss] Rabbitmq <-> MQTT
In-Reply-To: <CANAFtV4-X5JTCOVSm4OLu=NLKZfAh-+vWYwG60Yri8GM3vtDLw@mail.gmail.com>
References: <CANAFtV4-X5JTCOVSm4OLu=NLKZfAh-+vWYwG60Yri8GM3vtDLw@mail.gmail.com>
Message-ID: <133CAA3F-A9AC-43D1-9B70-DC3156070815@rabbitmq.com>


On 21 Jan 2014, at 09:40, Roberto Pagliari <roberto at canary.is> wrote:

> 1. Where should this config file put, and what would be its name

http://www.rabbitmq.com/configure.html

> 2. Once everything is ready, what should I do? Should I run the MQTT broker, the Rabbit server and the Rabbit listener on one side, and an MQTT publisher on the other side?

Both AMQP 0-9-1 and MQTT  clients need to connect to RabbitMQ.
Note that since MQTT does not have a concept of vhosts, you need to make sure
both protocols use the same vhost. Connecting to default host, /, over AMQP 0-9-1,
should be sufficient.

MK

Software Engineer, Pivotal/RabbitMQ



From ccherng at gmail.com  Tue Jan 21 07:38:15 2014
From: ccherng at gmail.com (Cary Cherng)
Date: Mon, 20 Jan 2014 23:38:15 -0800
Subject: [rabbitmq-discuss] Poker service architecture using RabbitMQ
Message-ID: <CAPxkqHjbV_N_xYmxhekS4imNzxsyDjM0vB5rPOWcS3zVOzJeyw@mail.gmail.com>

I am learning and trying to understand how to use RabbitMQ to put
together something like a poker service.

Suppore there are many servers and each handles a bunch of poker
games. But how does the routing state get setup with RabbitMQ?

To be concrete consider two players A and B where A challenges B to a
heads up poker game. The game is created on one of the servers. This
create game message is sent to some server through a load balancing
choice made with RabbitMQ somehow? Also later when A sends an action
like raising how does this get routed to the right server and how does
that server then know how to route a message to B?

And suppose B disconnects and then reconnects. How does B figure out
what queue to subscribe to be able to communicate with the server
running the game so that B can acquire the latest state?

I suspect these issues represent typical scenarios in using RabbitMQ.
Is there maybe something written up on how to idiomatically use
RabbitMQ to architect a solution and the typical design patterns to
use?

From mklishin at gopivotal.com  Tue Jan 21 07:54:13 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 21 Jan 2014 11:54:13 +0400
Subject: [rabbitmq-discuss] Poker service architecture using RabbitMQ
In-Reply-To: <CAPxkqHjbV_N_xYmxhekS4imNzxsyDjM0vB5rPOWcS3zVOzJeyw@mail.gmail.com>
References: <CAPxkqHjbV_N_xYmxhekS4imNzxsyDjM0vB5rPOWcS3zVOzJeyw@mail.gmail.com>
Message-ID: <7A0FFA33-6938-4E84-B5A7-6D6943C0530F@rabbitmq.com>

On 21 Jan 2014, at 11:38, Cary Cherng <ccherng at gmail.com> wrote:

> Suppore there are many servers and each handles a bunch of poker
> games. But how does the routing state get setup with RabbitMQ?

By applications, see [1].

> 
> To be concrete consider two players A and B where A challenges B to a
> heads up poker game. The game is created on one of the servers. This
> create game message is sent to some server through a load balancing
> choice made with RabbitMQ somehow? Also later when A sends an action
> like raising how does this get routed to the right server and how does
> that server then know how to route a message to B?

One obvious way would be to create a queue per connected player
(it is possible to create a queue that will be deleted when client closes
its connection), with incoming events having type specified (e.g. lobby.challenges.received
or game.rounds.raise).

Messages sent from player A to B can carry sender queue?s name which can be used
by B to send a reply. See Tutorial 6 [2].

> And suppose B disconnects and then reconnects. How does B figure out
> what queue to subscribe to be able to communicate with the server
> running the game so that B can acquire the latest state?

Queues can have well-known names, e.g. players.{username}.

1. http://www.rabbitmq.com/tutorials/amqp-concepts.html
2. http://www.rabbitmq.com/getstarted.html

MK

Software Engineer, Pivotal/RabbitMQ



From simon at rabbitmq.com  Tue Jan 21 08:20:17 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 21 Jan 2014 08:20:17 +0000
Subject: [rabbitmq-discuss] RabbitMq server getting ConnectionTimedout
In-Reply-To: <CAEJg2GAkFsc2uHMMQv-hC4ttcVhTDWEwQv=45ndZDU3VH+emhA@mail.gmail.com>
References: <CAE8rgHkVevdNToNhHR5RtA-hXvpc2Q4FKQRKX16S59ck2VF87Q@mail.gmail.com>
 <B518FD5F-6A6C-4B4C-BF3F-8F85D55404F1@rabbitmq.com>
 <CAE8rgHkbVk6QNz09Bh2rmN7L0xpd9c_F=vG2XOyVoQ3J6ac3wg@mail.gmail.com>
 <D5CF928A-CF97-43AF-B80D-060E2F69C766@gopivotal.com>
 <CAEJg2GAkFsc2uHMMQv-hC4ttcVhTDWEwQv=45ndZDU3VH+emhA@mail.gmail.com>
Message-ID: <52DE2DC1.2020902@rabbitmq.com>

On 20/01/2014 22:30, Arun Rao wrote:
> from your RabbitMQ startup logs, it shows your DHCP lookup failed.

No.

"0.0.0.0" here means "any IPv4 address", i.e. the server is listening on 
all interfaces. The previous line in the logs ("[::]") is saying the 
same for IPv6.

OP almost certainly has a firewall or similar blocking connection attempts.

Cheers, Simon


From 314992959 at qq.com  Tue Jan 21 10:30:10 2014
From: 314992959 at qq.com (3k4b251)
Date: Tue, 21 Jan 2014 02:30:10 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq-c consumer will lose if Network status
	is bad ?
Message-ID: <1390300210577-32737.post@n5.nabble.com>

  I  use   amqp_basic_consume()   to  create  a consumer  :  C_123  for  
Queue :  Q_123.    

  Then  I  send  message  to  the  Q_123.  At the beginning  I   got  every 
message   I  sended to the  Q_123.   But  after  server  hours,  I can't 
receive  message  from  the Queue   After  I sended  something. 

   I  use   rabbitmq_management  to see   that  I   lot of  Message  In  the 
Queue  can't  be  published ?    So  the  consumer  close   or  lose  ?   



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-consumer-will-lose-if-Network-status-is-bad-tp32737.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Tue Jan 21 10:34:45 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 21 Jan 2014 14:34:45 +0400
Subject: [rabbitmq-discuss] rabbitmq-c consumer will lose if Network
 status is bad ?
In-Reply-To: <1390300210577-32737.post@n5.nabble.com>
References: <1390300210577-32737.post@n5.nabble.com>
Message-ID: <CAE3HoVT+zHz5vWB9L0F3Z5wduA00Feg7-TQAnEN5A5ktbQbGSA@mail.gmail.com>

2014/1/21 3k4b251 <314992959 at qq.com>

>   Then  I  send  message  to  the  Q_123.  At the beginning  I   got  every
> message   I  sended to the  Q_123.   But  after  server  hours,  I can't
> receive  message  from  the Queue   After  I sended  something.
>
>    I  use   rabbitmq_management  to see   that  I   lot of  Message  In
>  the
> Queue  can't  be  published ?    So  the  consumer  close   or  lose  ?
>

If network connection fails, clients need to reconnect and recover queues,
consumers, and so on.

Some clients support automatic recovery. AFAIK librabbitmq-c is not one of
them.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/48a3c922/attachment.html>

From emile at rabbitmq.com  Tue Jan 21 10:39:22 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 21 Jan 2014 10:39:22 +0000
Subject: [rabbitmq-discuss] RabbitMQ 3.2.2 and Erlang R16B03 - SSL Issue
In-Reply-To: <001d01cf1660$0f80e250$2e82a6f0$@Kauppi.la>
References: <001d01cf1660$0f80e250$2e82a6f0$@Kauppi.la>
Message-ID: <52DE4E5A.1050801@rabbitmq.com>


Hi Jared,


On 21/01/14 04:20, Jared Kauppila wrote:

>                 01260017 - Connection attempt to insecure SSL server
> (see RFC5746) aborted: XX.XX.XX.XX.:443.


I would suggest setting "{secure_renegotiate, true}" in the broker SSL
config to see if that helps. See http://www.erlang.org/doc/man/ssl.html
for details.



-Emile



From Shashank.Lothe at techmahindra.com  Tue Jan 21 11:00:58 2014
From: Shashank.Lothe at techmahindra.com (Lothe Shashank)
Date: Tue, 21 Jan 2014 11:00:58 +0000
Subject: [rabbitmq-discuss] Capturing chang in IP address at the listener
Message-ID: <DD7729D61B083D48A2CDCB66A27AD4C98EF848@BSDMSATMBX001.mahindrasatyam.ad>

Hi Alan,

Thank you so much for all your earlier replies. Could you kindly throw some light on following two issues we have faced with rabbitmq-c (V0.3) running in Ubuntu 12.04?

1. I created a listener and a queue is created at the broker. I changed my system IP address and restarted network manager. I could ping to the broker with this new IP address. However the queue created at the broker still shows the old IP address and any message published on this queue after IP change is not received by the client. The amqp_simple_wait_frame_noblock() API does not give any error event for IP address change; it was giving AMQP_STATUS_TIMEOUT. Is there a way capture this run time IP address change at the listener?

2. I created two listener threads having separate connection. I turned off my network router. One listener was able to get AMQP_STATUS_SSL_ERROR/AMQP_STATUS_SSL_CONNECTION_FAILED error while the other listener was still giving AMQP_STATUS_TIMEOUT. I was expecting AMQP_STATUS_SSL_ERROR/AMQP_STATUS_SSL_CONNECTION_FAILED error at both the listener. What could be the reason for this behaviour?

Thanks and regards,
Shashank

________________________________

DISCLAIMER:
This email (including any attachments) is intended for the sole use of the intended recipient/s and may contain material that is CONFIDENTIAL AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or distribution or forwarding of any or all of the contents in this message is STRICTLY PROHIBITED. If you are not the intended recipient, please contact the sender by email and delete all copies; your cooperation in this regard is appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/24c311cf/attachment.html>

From jared at kauppi.la  Tue Jan 21 12:55:14 2014
From: jared at kauppi.la (Jared Kauppila)
Date: Tue, 21 Jan 2014 04:55:14 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ 3.2.2 and Erlang R16B03 - SSL Issue
In-Reply-To: <52DE4E5A.1050801@rabbitmq.com>
References: <52DE4E5A.1050801@rabbitmq.com>
Message-ID: <1390308913801.a40251c1@Nodemailer>

Hi Emile,


There is no difference in behavior with that SSL setting configured.




Thanks

On Tue, Jan 21, 2014 at 4:39 AM, Emile Joubert <emile at rabbitmq.com> wrote:

> Hi Jared,
> On 21/01/14 04:20, Jared Kauppila wrote:
>>                 01260017 - Connection attempt to insecure SSL server
>> (see RFC5746) aborted: XX.XX.XX.XX.:443.
> I would suggest setting "{secure_renegotiate, true}" in the broker SSL
> config to see if that helps. See http://www.erlang.org/doc/man/ssl.html
> for details.
> -Emile
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/77dd66be/attachment.html>

From gui.ouellet at gmail.com  Tue Jan 21 13:50:10 2014
From: gui.ouellet at gmail.com (Guillaume Ouellet)
Date: Tue, 21 Jan 2014 05:50:10 -0800 (PST)
Subject: [rabbitmq-discuss] Basic Nack not working
Message-ID: <3d7b441a-aa8f-4c06-aea0-95158ece2595@googlegroups.com>

Hi guys,

Here is a reference to my stackoverflow post. Basically I'm wondering if 
I'm using nack as intented or not. 

http://stackoverflow.com/questions/21244281/basic-nack-not-being-processed

ere is what I am trying to do:

   1. Dequeue a message
   2. Do an action with the message
   3. If the action fails, put the message back in the queue
   4. If the action succeeds, acknowldge the message

My problem right now is that, if the action fails, the message isn't 
requeued, but stays unacknowledged. If I go in RabbitMQ web congifuration 
interface, I see that the messages are flagged as unacknowledged, even tho, 
the basic.Nack has been stepped over.

var delivery = subscription.Next();
var messageBody = delivery.Body;
try{
   action.Invoke(messageBody);
   subscription.Ack(delivery);}catch (Exception ex){
   subscription.Model..BasicNack(delivery.DeliveryTag, false, true);
   throw ex;}

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/7a252d72/attachment.html>

From simon at rabbitmq.com  Tue Jan 21 14:00:35 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 21 Jan 2014 14:00:35 +0000
Subject: [rabbitmq-discuss] LDAP authentication
In-Reply-To: <52ae0ce9-6829-48b9-9131-04c5c03db468@googlegroups.com>
References: <52ae0ce9-6829-48b9-9131-04c5c03db468@googlegroups.com>
Message-ID: <52DE7D83.6050103@rabbitmq.com>

On 02/01/14 10:35, Hoang Viet wrote:
> I want to have external LDAP authentication, but keep users information
> and permission control inside RabbitMQ. How do I modify the LDAP
> extension to have this? Or anyone can help me to build this
> customization plugin?

BTW, this feature got added to nightly builds last night and will be in 
3.3.0. You need config like:

{rabbit,[{auth_backends,
          [{rabbit_auth_backend_ldap,rabbit_auth_backend_internal}]}]}

See http://next.rabbitmq.com/ldap.html for a few more details.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From mcintoshj at gmail.com  Tue Jan 21 15:37:24 2014
From: mcintoshj at gmail.com (Jason McIntosh)
Date: Tue, 21 Jan 2014 09:37:24 -0600
Subject: [rabbitmq-discuss] RabbitMQ API - aliveness-test
In-Reply-To: <030AF7E0-3802-48BE-9D36-02C0F78F5D54@rabbitmq.com>
References: <CAEJg2GBa=CMXnJRZyCE2to3aHoT1Fdt-jY8YFWqfk50t_Rvj=A@mail.gmail.com>
 <030AF7E0-3802-48BE-9D36-02C0F78F5D54@rabbitmq.com>
Message-ID: <CAD6m6fEQ-mot-6iLfZR3futLn--kSYSuc+d1Po7gRLE5W24m9w@mail.gmail.com>

One question on that MK - if I understand the policy declarations right, if
there's an HA policy that matches all queues, that means that the
TestAliveness queue would automatically get mirrored wouldn't it and so
would also be testing the other nodes?  Also, is the message durable and
published with publisher confirms?

Thanks,
Jason


On Tue, Jan 21, 2014 at 12:15 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

> On 21 Jan 2014, at 02:08, Arun Rao <arunrao.seattle at gmail.com> wrote:
>
> > What are the possible status values for aliveness-test?
>
> 200 and "everything else".
>
> > aliveness-test for a vhost checks for the vhost health on the node or at
> a cluster level?
>
> Aliveness test creates a new connection to the node you contact, declares
> a queue (which is not mirrored),
> publishes a message so that it is routed there, then consumes the message
> using basic.get.
> Other cluster nodes are not involved.
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>



-- 
Jason McIntosh
https://github.com/jasonmcintosh/
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/82df6358/attachment.html>

From emile at rabbitmq.com  Tue Jan 21 16:20:40 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 21 Jan 2014 16:20:40 +0000
Subject: [rabbitmq-discuss] RabbitMQ 3.2.2 and Erlang R16B03 - SSL Issue
In-Reply-To: <1390308913801.a40251c1@Nodemailer>
References: <52DE4E5A.1050801@rabbitmq.com> <1390308913801.a40251c1@Nodemailer>
Message-ID: <52DE9E58.5010408@rabbitmq.com>


Hi Jared,

On 21/01/14 12:55, Jared Kauppila wrote:

> There is no difference in behavior with that SSL setting configured.

This looks like an Erlang bug. I have reported it to the Erlang
developers. In the meantime R16B01 is the most recent version that does
not seem to suffer from the issue. Running with an older version of
Erlang is probably preferable to allowing insecure renegotiation.
However our advice is to avoid R16B01 in production, so R16B is probably
a better option.

http://erlang.org/pipermail/erlang-bugs/2014-January/003984.html




-Emile



From simon at rabbitmq.com  Tue Jan 21 16:26:14 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 21 Jan 2014 16:26:14 +0000
Subject: [rabbitmq-discuss] Basic Nack not working
In-Reply-To: <3d7b441a-aa8f-4c06-aea0-95158ece2595@googlegroups.com>
References: <3d7b441a-aa8f-4c06-aea0-95158ece2595@googlegroups.com>
Message-ID: <52DE9FA6.2050301@rabbitmq.com>

This could be happening:

* You nack the message with requeue=true
* The message goes back in the queue
* The message is immediately redelivered to your consumer again

If there are no other consumers and no other messages, that could happen.

Cheers, Simon

On 21/01/14 13:50, Guillaume Ouellet wrote:
> Hi guys,
>
> Here is a reference to my stackoverflow post. Basically I'm wondering if
> I'm using nack as intented or not.
>
> http://stackoverflow.com/questions/21244281/basic-nack-not-being-processed
>
> ere is what I am trying to do:
>
>  1. Dequeue a message
>  2. Do an action with the message
>  3. If the action fails, put the message back in the queue
>  4. If the action succeeds, acknowldge the message
>
> My problem right now is that, if the action fails, the message isn't
> requeued, but stays unacknowledged. If I go in RabbitMQ web
> congifuration interface, I see that the messages are flagged as
> unacknowledged, even tho, the basic.Nack has been stepped over.
>
> |var  delivery=  subscription.Next();
>
> var  messageBody=  delivery.Body;
>
> try
> {
>     action.Invoke(messageBody);
>     subscription.Ack(delivery);
> }
> catch  (Exception  ex)
> {
>     subscription.Model..BasicNack(delivery.DeliveryTag,  false,  true);
>     throw  ex;
> }|
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


-- 
Simon MacMullen
RabbitMQ, Pivotal

From jared at kauppi.la  Tue Jan 21 17:49:48 2014
From: jared at kauppi.la (Jared Kauppila)
Date: Tue, 21 Jan 2014 09:49:48 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ 3.2.2 and Erlang R16B03 - SSL Issue
In-Reply-To: <52DE9E58.5010408@rabbitmq.com>
References: <52DE9E58.5010408@rabbitmq.com>
Message-ID: <1390326587662.547ccf9a@Nodemailer>

Hi Emile,


What's the reasoning behind avoiding R16B01? That's the version we've used throughout our environments and testing with no issues.




Thanks

On Tue, Jan 21, 2014 at 10:20 AM, Emile Joubert <emile at rabbitmq.com>
wrote:

> Hi Jared,
> On 21/01/14 12:55, Jared Kauppila wrote:
>> There is no difference in behavior with that SSL setting configured.
> This looks like an Erlang bug. I have reported it to the Erlang
> developers. In the meantime R16B01 is the most recent version that does
> not seem to suffer from the issue. Running with an older version of
> Erlang is probably preferable to allowing insecure renegotiation.
> However our advice is to avoid R16B01 in production, so R16B is probably
> a better option.
> http://erlang.org/pipermail/erlang-bugs/2014-January/003984.html
> -Emile
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/559b60fb/attachment.html>

From emile at rabbitmq.com  Tue Jan 21 18:09:48 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 21 Jan 2014 18:09:48 +0000
Subject: [rabbitmq-discuss] RabbitMQ 3.2.2 and Erlang R16B03 - SSL Issue
In-Reply-To: <1390326587662.547ccf9a@Nodemailer>
References: <52DE9E58.5010408@rabbitmq.com> <1390326587662.547ccf9a@Nodemailer>
Message-ID: <52DEB7EC.4040408@rabbitmq.com>

On 21/01/14 17:49, Jared Kauppila wrote:
> What's the reasoning behind avoiding R16B01? That's the version we've
> used throughout our environments and testing with no issues.


I'm thinking in particular of OTP-11225:
http://www.erlang.org/download/otp_src_R16B02.readme

"...PID mix-ups when a lot of processes were spawned and terminated in a
very rapid pace on an SMP emulator...."

Also see
http://erlang.org/pipermail/erlang-bugs/2013-July/003670.html


Normally the latest version of Erlang is recommended.



-Emile






From alan.antonuk at gmail.com  Tue Jan 21 18:40:28 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 21 Jan 2014 10:40:28 -0800
Subject: [rabbitmq-discuss] rabbitmq-c consumer will lose if Network
 status is bad ?
In-Reply-To: <CAE3HoVT+zHz5vWB9L0F3Z5wduA00Feg7-TQAnEN5A5ktbQbGSA@mail.gmail.com>
References: <1390300210577-32737.post@n5.nabble.com>
 <CAE3HoVT+zHz5vWB9L0F3Z5wduA00Feg7-TQAnEN5A5ktbQbGSA@mail.gmail.com>
Message-ID: <CAAt2poJmv=pG8vO2PGRVC9ZYLFk-FpOFDSuW8UHCKRpmuehBwQ@mail.gmail.com>

Confirming that rabbitmq-c does not have any auto-recovery functionality.

-Alan


On Tue, Jan 21, 2014 at 2:34 AM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

>
> 2014/1/21 3k4b251 <314992959 at qq.com>
>
>>   Then  I  send  message  to  the  Q_123.  At the beginning  I   got
>>  every
>> message   I  sended to the  Q_123.   But  after  server  hours,  I can't
>> receive  message  from  the Queue   After  I sended  something.
>>
>>    I  use   rabbitmq_management  to see   that  I   lot of  Message  In
>>  the
>> Queue  can't  be  published ?    So  the  consumer  close   or  lose  ?
>>
>
> If network connection fails, clients need to reconnect and recover queues,
> consumers, and so on.
>
> Some clients support automatic recovery. AFAIK librabbitmq-c is not one of
> them.
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/05d0ffc7/attachment.html>

From alan.antonuk at gmail.com  Tue Jan 21 18:54:45 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 21 Jan 2014 10:54:45 -0800
Subject: [rabbitmq-discuss] [Rabbitmq-c] ARM bug fixed?
In-Reply-To: <CANAFtV7EfsVQJxZf5KFYef2LGnbuc_7VLbb5vegm3KcKFjei1g@mail.gmail.com>
References: <CANAFtV7EfsVQJxZf5KFYef2LGnbuc_7VLbb5vegm3KcKFjei1g@mail.gmail.com>
Message-ID: <CAAt2poKEO2UsrQGrkYqp6bd3QwcZxrV+5BnmTF6J=e+_fAmnoA@mail.gmail.com>

That thread is incredibly old (like 3 years) and before I took over
maintaining the library. I believe the routines that do the encoding and
decoding of wireformat data have been re-written to not do silly aliasing
with pointers that would cause data-alignment issues (you would see crashes
if there were issues with alignment).

Also I have heard reports that rabbitmq-c successfully runs on iOS (which I
believe is ARM based), and Android (which is Linux, and can be ARM based).
 That said, there are many different flavors of ARM out there (both big and
little endian), and rabbitmq-c is not frequently tested on ARM-based
platforms, so its not impossible for there to be bugs in rabbitmq-c when it
comes to running on an ARM based platform.

I don't have access to an ARM platform to test it on - so its hard for me
to repro what you're seeing.

-Alan





On Fri, Jan 17, 2014 at 4:34 PM, Roberto Pagliari <roberto at canary.is> wrote:

> Hi Alan/All,
> I just realized there was a bug in rabbitmq-c when cross-compiling for
> ARM.
>
> Please, see this thread
> https://groups.google.com/forum/#!topic/rabbitmq-discuss/TJcDUubEBFQ
>
> has the bug been fixed in the master branch? The examples don't seem to
> work, and it might be related to data alignment discussed in the thread
> above.
>
>
> Thank you,
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/b4490bc1/attachment.html>

From Nikunj.Badjatya at emc.com  Tue Jan 21 19:21:08 2014
From: Nikunj.Badjatya at emc.com (Badjatya, Nikunj)
Date: Tue, 21 Jan 2014 19:21:08 +0000
Subject: [rabbitmq-discuss] Help with "AttributeError: 'BlockingConnection'
 object has no attribute 'disconnect'"
Message-ID: <022ADF639A140D4790580A766237164C1D439D39@MX101CL02.corp.emc.com>

Hello All,

Need your help with the error I have been facing.
The channel creation (or the basic_publish operation) throws error as "AttributeError: 'BlockingConnection' object has no attribute 'disconnect'", when there is a time gap between connection establishment and channel creation (or basic_publish operation).

I am using Pika python amqp client and running rabbitmq-server ver 3.1.3-1 on SLES-11sp3.

Python 2.6.8 (unknown, May 29 2012, 22:30:44)
[GCC 4.3.4 [gcc-4_3-branch revision 152973]] on linux2
Type "help", "copyright", "credits" or "license" for more information.

>>> import pika
>>> VEXCHANGE = 'exchange.external'
>>> connection = pika.BlockingConnection(pika.ConnectionParameters(host='localhost',connection_attempts=3,retry_delay=5))
>>> vchannel = connection.channel();
>>> BODY = "blahblah"
>>> vchannel.basic_publish(exchange=VEXCHANGE,routing_key='#',body=str(BODY),properties=pika.BasicProperties(delivery_mode = 2,))

This message is getting published without any issues. However, if after sometime (say 5 minutes) I do basic_publish again, I get below error.

>>> vchannel.basic_publish(exchange=VEXCHANGE,routing_key='#',body=str(BODY),properties=pika.BasicProperties(delivery_mode = 2,))
No handlers could be found for logger "pika.adapters.base_connection"
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 540, in basic_publish
    (properties, body), False)
  File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 1121, in _send_method
    self.connection.send_method(self.channel_number, method_frame, content)
  File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 249, in send_method
    self._send_method(channel_number, method_frame, content)
  File "/usr/lib64/python2.6/site-packages/pika/connection.py", line 1489, in _send_method
    self._send_frame(frame.Method(channel_number, method_frame))
  File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 388, in _send_frame
    super(BlockingConnection, self)._send_frame(frame_value)
  File "/usr/lib64/python2.6/site-packages/pika/connection.py", line 1476, in _send_frame
    self._flush_outbound()
  File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 348, in _flush_outbound
    if self._handle_write():
  File "/usr/lib64/python2.6/site-packages/pika/adapters/base_connection.py", line 338, in _handle_write
    return self._handle_error(error)
  File "/usr/lib64/python2.6/site-packages/pika/adapters/base_connection.py", line 282, in _handle_error
    self._handle_disconnect()
  File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 318, in _handle_disconnect
    self.disconnect()
AttributeError: 'BlockingConnection' object has no attribute 'disconnect'

>>>

At this time, I get the same error when I run
>>>vchannel = connection.channel()


The config file has the default heartbeat set to 30 seconds.

Any idea on what causing this error to come?

Thanks,
Nikunj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/7dcfb64a/attachment.html>

From gavinmroy at gmail.com  Tue Jan 21 19:28:55 2014
From: gavinmroy at gmail.com (Gavin M. Roy)
Date: Tue, 21 Jan 2014 14:28:55 -0500
Subject: [rabbitmq-discuss] Help with "AttributeError:
 'BlockingConnection' object has no attribute 'disconnect'"
In-Reply-To: <022ADF639A140D4790580A766237164C1D439D39@MX101CL02.corp.emc.com>
References: <022ADF639A140D4790580A766237164C1D439D39@MX101CL02.corp.emc.com>
Message-ID: <etPan.52deca77.238e1f29.2b84@gmr-home.local>

Looks like a bug. I?ve opened a ticket @?https://github.com/pika/pika/issues/435

Ultimately, you?re being disconnected from RabbitMQ which is causing pika to want to handle the disconnection cleanly, but somehow it?s missing in your version of pika.

Can you please provide the version of pika installed on the ticket?

import pika
pika.__version__

Regards,

Gavin

From:?Badjatya, Nikunj Badjatya, Nikunj
Reply:?Discussions about RabbitMQ rabbitmq-discuss at lists.rabbitmq.com
Date:?January 21, 2014 at 2:26:11 PM
To:?rabbitmq-discuss at lists.rabbitmq.com rabbitmq-discuss at lists.rabbitmq.com
Subject:? [rabbitmq-discuss] Help with "AttributeError: 'BlockingConnection' object has no attribute 'disconnect'"  
Hello All,

?

Need your help with the error I have been facing.

The channel creation (or the basic_publish operation) throws error as ?AttributeError: 'BlockingConnection' object has no attribute 'disconnect'?, when there is a time gap between connection establishment and channel creation (or basic_publish operation).

?

I am using Pika python amqp client and running rabbitmq-server ver 3.1.3-1 on SLES-11sp3.

?

Python 2.6.8 (unknown, May 29 2012, 22:30:44)

[GCC 4.3.4 [gcc-4_3-branch revision 152973]] on linux2

Type "help", "copyright", "credits" or "license" for more information.

?

>>> import pika

>>> VEXCHANGE = 'exchange.external'

>>> connection = pika.BlockingConnection(pika.ConnectionParameters(host='localhost',connection_attempts=3,retry_delay=5))

>>> vchannel = connection.channel();

>>> BODY = "blahblah"

>>> vchannel.basic_publish(exchange=VEXCHANGE,routing_key='#',body=str(BODY),properties=pika.BasicProperties(delivery_mode = 2,))

?

This message is getting published without any issues. However, if after sometime (say 5 minutes) I do basic_publish again, I get below error.

?

>>> vchannel.basic_publish(exchange=VEXCHANGE,routing_key='#',body=str(BODY),properties=pika.BasicProperties(delivery_mode = 2,))

No handlers could be found for logger "pika.adapters.base_connection"

Traceback (most recent call last):

? File "<stdin>", line 1, in <module>

? File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 540, in basic_publish

??? (properties, body), False)

? File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 1121, in _send_method

??? self.connection.send_method(self.channel_number, method_frame, content)

? File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 249, in send_method

??? self._send_method(channel_number, method_frame, content)

? File "/usr/lib64/python2.6/site-packages/pika/connection.py", line 1489, in _send_method

??? self._send_frame(frame.Method(channel_number, method_frame))

? File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 388, in _send_frame

??? super(BlockingConnection, self)._send_frame(frame_value)

? File "/usr/lib64/python2.6/site-packages/pika/connection.py", line 1476, in _send_frame

??? self._flush_outbound()

? File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 348, in _flush_outbound

??? if self._handle_write():

? File "/usr/lib64/python2.6/site-packages/pika/adapters/base_connection.py", line 338, in _handle_write

??? return self._handle_error(error)

? File "/usr/lib64/python2.6/site-packages/pika/adapters/base_connection.py", line 282, in _handle_error

??? self._handle_disconnect()

? File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 318, in _handle_disconnect

??? self.disconnect()

AttributeError: 'BlockingConnection' object has no attribute 'disconnect'

?

>>>

?

At this time, I get the same error when I run

>>>vchannel = connection.channel()

?

?

The config file has the default heartbeat set to 30 seconds.

?

Any idea on what causing this error to come?

?

Thanks,

Nikunj

?

_______________________________________________  
rabbitmq-discuss mailing list  
rabbitmq-discuss at lists.rabbitmq.com  
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/3163eb56/attachment.html>

From Nikunj.Badjatya at emc.com  Tue Jan 21 19:31:56 2014
From: Nikunj.Badjatya at emc.com (Badjatya, Nikunj)
Date: Tue, 21 Jan 2014 19:31:56 +0000
Subject: [rabbitmq-discuss] Help with "AttributeError:
 'BlockingConnection' object has no attribute 'disconnect'"
In-Reply-To: <etPan.52deca77.238e1f29.2b84@gmr-home.local>
References: <022ADF639A140D4790580A766237164C1D439D39@MX101CL02.corp.emc.com>
 <etPan.52deca77.238e1f29.2b84@gmr-home.local>
Message-ID: <022ADF639A140D4790580A766237164C1D439D97@MX101CL02.corp.emc.com>

Thank you for the quick response. It is 0.9.13.

>>> pika.__version__
'0.9.13'
>>>


From: Gavin M. Roy [mailto:gavinmroy at gmail.com]
Sent: Wednesday, January 22, 2014 12:59 AM
To: Badjatya, Nikunj; Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Help with "AttributeError: 'BlockingConnection' object has no attribute 'disconnect'"

Looks like a bug. I?ve opened a ticket @ https://github.com/pika/pika/issues/435

Ultimately, you?re being disconnected from RabbitMQ which is causing pika to want to handle the disconnection cleanly, but somehow it?s missing in your version of pika.

Can you please provide the version of pika installed on the ticket?

import pika
pika.__version__

Regards,

Gavin

________________________________
From: Badjatya, Nikunj Badjatya, Nikunj<mailto:nikunj.badjatya at emc.com>
Reply: Discussions about RabbitMQ rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
Date: January 21, 2014 at 2:26:11 PM
To: rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com> rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
Subject:  [rabbitmq-discuss] Help with "AttributeError: 'BlockingConnection' object has no attribute 'disconnect'"
Hello All,

Need your help with the error I have been facing.
The channel creation (or the basic_publish operation) throws error as ?AttributeError: 'BlockingConnection' object has no attribute 'disconnect'?, when there is a time gap between connection establishment and channel creation (or basic_publish operation).

I am using Pika python amqp client and running rabbitmq-server ver 3.1.3-1 on SLES-11sp3.

Python 2.6.8 (unknown, May 29 2012, 22:30:44)
[GCC 4.3.4 [gcc-4_3-branch revision 152973]] on linux2
Type "help", "copyright", "credits" or "license" for more information.

>>> import pika
>>> VEXCHANGE = 'exchange.external'
>>> connection = pika.BlockingConnection(pika.ConnectionParameters(host='localhost',connection_attempts=3,retry_delay=5))
>>> vchannel = connection.channel();
>>> BODY = "blahblah"
>>> vchannel.basic_publish(exchange=VEXCHANGE,routing_key='#',body=str(BODY),properties=pika.BasicProperties(delivery_mode = 2,))

This message is getting published without any issues. However, if after sometime (say 5 minutes) I do basic_publish again, I get below error.

>>> vchannel.basic_publish(exchange=VEXCHANGE,routing_key='#',body=str(BODY),properties=pika.BasicProperties(delivery_mode = 2,))
No handlers could be found for logger "pika.adapters.base_connection"
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 540, in basic_publish
    (properties, body), False)
  File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 1121, in _send_method
    self.connection.send_method(self.channel_number, method_frame, content)
  File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 249, in send_method
    self._send_method(channel_number, method_frame, content)
  File "/usr/lib64/python2.6/site-packages/pika/connection.py", line 1489, in _send_method
    self._send_frame(frame.Method(channel_number, method_frame))
  File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 388, in _send_frame
    super(BlockingConnection, self)._send_frame(frame_value)
  File "/usr/lib64/python2.6/site-packages/pika/connection.py", line 1476, in _send_frame
    self._flush_outbound()
  File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 348, in _flush_outbound
    if self._handle_write():
  File "/usr/lib64/python2.6/site-packages/pika/adapters/base_connection.py", line 338, in _handle_write
    return self._handle_error(error)
  File "/usr/lib64/python2.6/site-packages/pika/adapters/base_connection.py", line 282, in _handle_error
    self._handle_disconnect()
  File "/usr/lib64/python2.6/site-packages/pika/adapters/blocking_connection.py", line 318, in _handle_disconnect
    self.disconnect()
AttributeError: 'BlockingConnection' object has no attribute 'disconnect'

>>>

At this time, I get the same error when I run
>>>vchannel = connection.channel()


The config file has the default heartbeat set to 30 seconds.

Any idea on what causing this error to come?

Thanks,
Nikunj

_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/4b2a54d3/attachment.html>

From drax68 at gmail.com  Tue Jan 21 19:19:38 2014
From: drax68 at gmail.com (Andrew M.)
Date: Tue, 21 Jan 2014 11:19:38 -0800 (PST)
Subject: [rabbitmq-discuss] Rabbitmq config reload
Message-ID: <704342ac-7cec-4004-b7dd-68b2a1cf9787@googlegroups.com>

Hello, I found thread from previous year with this question and want to 
update things.

Is this possible to reload config/shovel config without restarting whole 
rabbitmq service?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/63bf4a9b/attachment.html>

From simon at rabbitmq.com  Tue Jan 21 21:28:50 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 21 Jan 2014 21:28:50 +0000
Subject: [rabbitmq-discuss] Rabbitmq config reload
In-Reply-To: <704342ac-7cec-4004-b7dd-68b2a1cf9787@googlegroups.com>
References: <704342ac-7cec-4004-b7dd-68b2a1cf9787@googlegroups.com>
Message-ID: <52DEE692.50209@rabbitmq.com>

On 21/01/2014 19:19, Andrew M. wrote:
> Is this possible to reload config/shovel config without restarting whole
> rabbitmq service?

No, there's no built in support for reloading the config I'm afraid.

You might be able to build some "rabbitmqctl eval" command line that 
stops the shovel app, reloads the config and starts the app up again. I 
haven't heard of anybody making that work though.

You can also run shovels in an entirely separate broker (i.e. making 
remote network connections to both source and desitnation brokers). 
Restarting such a broker is then less disruptive.

This will change in 3.3.0 (and is already available in the nightlies) - 
you can manage shovels in the same way as federation works at the moment 
(with rabbitmqctl / management) - see 
http://next.rabbitmq.com/shovel-dynamic.html for more details.

Cheers, Simon


From kane.isturm at gmail.com  Tue Jan 21 21:06:33 2014
From: kane.isturm at gmail.com (Kane Kim)
Date: Tue, 21 Jan 2014 13:06:33 -0800 (PST)
Subject: [rabbitmq-discuss] a lot of unacked messages "in the flight"
Message-ID: <9879c554-2150-43cf-88d6-67058f42c5ce@googlegroups.com>

Is it ok to have many unacked messages in rabbitmq (millions)?

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/732266b3/attachment.html>

From videlalvaro at gmail.com  Tue Jan 21 22:01:14 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Tue, 21 Jan 2014 23:01:14 +0100
Subject: [rabbitmq-discuss] a lot of unacked messages "in the flight"
In-Reply-To: <9879c554-2150-43cf-88d6-67058f42c5ce@googlegroups.com>
References: <9879c554-2150-43cf-88d6-67058f42c5ce@googlegroups.com>
Message-ID: <CAMcAHLV6Cp3sYddS3GgspuDN0S0qOQJmK0YhXiTC0Q3G6wTAjg@mail.gmail.com>

Hi,

Probably you have an unlimited setting for basic.qos

See: http://www.rabbitmq.com/tutorials/tutorial-two-python.html

Regards,

Alvaro

On Tue, Jan 21, 2014 at 10:06 PM, Kane Kim <kane.isturm at gmail.com> wrote:
> Is it ok to have many unacked messages in rabbitmq (millions)?
>
> Thanks.
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From dann.ormond at gmail.com  Tue Jan 21 23:28:54 2014
From: dann.ormond at gmail.com (Dann)
Date: Tue, 21 Jan 2014 16:28:54 -0700
Subject: [rabbitmq-discuss] Federation Upstream Set Policy
Message-ID: <CANjo9ry=kkxmAe7o37uD3KD0bb1LzydGHWVrq=Y8=LiOk+2crA@mail.gmail.com>

I have a case where I need to federate an exchange to two different
upstreams.  The upstreams are part of different federation upstream sets.
 It is possible to define the policy to send to multiple upstream sets
without using the "all" upstream set?

Thanks,

Dann Ormond
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/54823b30/attachment.html>

From videlalvaro at gmail.com  Tue Jan 21 23:35:19 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Wed, 22 Jan 2014 00:35:19 +0100
Subject: [rabbitmq-discuss] Federation Upstream Set Policy
In-Reply-To: <CANjo9ry=kkxmAe7o37uD3KD0bb1LzydGHWVrq=Y8=LiOk+2crA@mail.gmail.com>
References: <CANjo9ry=kkxmAe7o37uD3KD0bb1LzydGHWVrq=Y8=LiOk+2crA@mail.gmail.com>
Message-ID: <CAMcAHLXB9zq2f3LExdpvaE1faM7jSg0WNL0+0141zyRUKoypyw@mail.gmail.com>

Hi,

I think you are understanding the concepts the other way around. Think
of "upstreams" as in a river and the way on how water flows there,
i.e: the data comes from the "upstream" server down to the
"downstream" server(s).

So you can receive data from more than one upstream, and you could
define a new set of "upstream" servers.

Also, an upstream server could be sending data to more than one
"downstream" server.

I hope this helps.

Regards,

Alvaro


On Wed, Jan 22, 2014 at 12:28 AM, Dann <dann.ormond at gmail.com> wrote:
> I have a case where I need to federate an exchange to two different
> upstreams.  The upstreams are part of different federation upstream sets.
> It is possible to define the policy to send to multiple upstream sets
> without using the "all" upstream set?
>
> Thanks,
>
> Dann Ormond
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From 314992959 at qq.com  Wed Jan 22 01:36:25 2014
From: 314992959 at qq.com (3k4b251)
Date: Tue, 21 Jan 2014 17:36:25 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq-c consumer will lose if Network
	status is bad ?
In-Reply-To: <CAAt2poJmv=pG8vO2PGRVC9ZYLFk-FpOFDSuW8UHCKRpmuehBwQ@mail.gmail.com>
References: <1390300210577-32737.post@n5.nabble.com>
 <CAE3HoVT+zHz5vWB9L0F3Z5wduA00Feg7-TQAnEN5A5ktbQbGSA@mail.gmail.com>
 <CAAt2poJmv=pG8vO2PGRVC9ZYLFk-FpOFDSuW8UHCKRpmuehBwQ@mail.gmail.com>
Message-ID: <1390354585326-32760.post@n5.nabble.com>

  I  try  to   use  amqp_basic_cancel(Q_123,...);   and   then  
amqp_basic_consume(Q_123,...);  But  message  in Q_123  still  can't  be
published.   

  finally   I  reconnect   to  the   MQ   Server.  and  use 
amqp_basic_consume(Q_123,...);  I  received  every message  in Q_123.   So 
the  connection  had  a  problem?  if  it  does,  can  I  got  some  notify?




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-consumer-will-lose-if-Network-status-is-bad-tp32737p32760.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From jsw at one.com  Wed Jan 22 03:09:52 2014
From: jsw at one.com (Josh West)
Date: Tue, 21 Jan 2014 22:09:52 -0500
Subject: [rabbitmq-discuss] Bug w/ Federated Queue's & Clustering
Message-ID: <52DF3680.4080506@one.com>

Hi folks,

I'm having an issue with RabbitMQ 3.2.2 (Erlang R15B01).

I have 3 clusters (2-nodes per cluster) configured for federation in a 
complete graph fashion (they all federate with each other).  Each 
cluster has a policy to federate queues with pattern ^cluster1.* (for 
cluster1), ^cluster2.* (for cluster2), and ^cluster3.* (for cluster3).  
So in other words, if clusters #2 or #3 have a queue with a name 
beginning with "cluster1", it will be federated (pulled down to) 
cluster1 upon request.  The policy for federation also has the attribute 
"ha-mode" set to "all", so that messages sent between clusters are not 
lost upon a failure.

The queue's I'm working with have the Auto Delete and Durable flags set.

Without much effort, I'm seeing errors on cluster1 after using the queue 
a few times.  The error is visible within the management console:

TypeError: Cannot read property 'ram_msg_count' of undefined

And federation from that point on for that queue fails.

When I do this complete graph scenario without making use of clusters I 
do not experience this problem.

I've seen mentions on the list that this was an issue with clusters and 
durable queues, but fixed in 3.2.1.  Perhaps it is still an issue?  Or 
still an issue just when federation is involved?

Thanks.

-- 
Josh West
One.com - http://www.one.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/c98a69f5/attachment.html>

From kane.isturm at gmail.com  Wed Jan 22 01:09:04 2014
From: kane.isturm at gmail.com (Kane Kane)
Date: Tue, 21 Jan 2014 17:09:04 -0800
Subject: [rabbitmq-discuss] a lot of unacked messages "in the flight"
In-Reply-To: <CAMcAHLV6Cp3sYddS3GgspuDN0S0qOQJmK0YhXiTC0Q3G6wTAjg@mail.gmail.com>
References: <9879c554-2150-43cf-88d6-67058f42c5ce@googlegroups.com>
 <CAMcAHLV6Cp3sYddS3GgspuDN0S0qOQJmK0YhXiTC0Q3G6wTAjg@mail.gmail.com>
Message-ID: <CAJARbTSM_0eKXVCSvZAF-KUF3HeR=MdBr6qRtrKnnZnZEWiVHQ@mail.gmail.com>

Yes, I know this technically should work, my question was if it's
something natural to rabbitmq or we shouldn't do that.

On Tue, Jan 21, 2014 at 2:01 PM, Alvaro Videla <videlalvaro at gmail.com> wrote:
> Hi,
>
> Probably you have an unlimited setting for basic.qos
>
> See: http://www.rabbitmq.com/tutorials/tutorial-two-python.html
>
> Regards,
>
> Alvaro
>
> On Tue, Jan 21, 2014 at 10:06 PM, Kane Kim <kane.isturm at gmail.com> wrote:
>> Is it ok to have many unacked messages in rabbitmq (millions)?
>>
>> Thanks.
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
> --
> You received this message because you are subscribed to a topic in the Google Groups "rabbitmq-discuss" group.
> To unsubscribe from this topic, visit https://groups.google.com/d/topic/rabbitmq-discuss/_7ewHHiMs74/unsubscribe.
> To unsubscribe from this group and all its topics, send an email to rabbitmq-discuss+unsubscribe at googlegroups.com.
> To post to this group, send email to rabbitmq-discuss at googlegroups.com.
> Visit this group at http://groups.google.com/group/rabbitmq-discuss.
> For more options, visit https://groups.google.com/groups/opt_out.

From michael.s.klishin at gmail.com  Wed Jan 22 06:12:19 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 22 Jan 2014 10:12:19 +0400
Subject: [rabbitmq-discuss] a lot of unacked messages "in the flight"
In-Reply-To: <CAJARbTSM_0eKXVCSvZAF-KUF3HeR=MdBr6qRtrKnnZnZEWiVHQ@mail.gmail.com>
References: <9879c554-2150-43cf-88d6-67058f42c5ce@googlegroups.com>
 <CAMcAHLV6Cp3sYddS3GgspuDN0S0qOQJmK0YhXiTC0Q3G6wTAjg@mail.gmail.com>
 <CAJARbTSM_0eKXVCSvZAF-KUF3HeR=MdBr6qRtrKnnZnZEWiVHQ@mail.gmail.com>
Message-ID: <CAE3HoVRCPZPF024=M_q0zBfBshrFMruzSA2RiySp0ory0e-9Mg@mail.gmail.com>

2014/1/22 Kane Kane <kane.isturm at gmail.com>

> Yes, I know this technically should work, my question was if it's
> something natural to rabbitmq or we shouldn't do that.
>

Default basic.qos value for channels is "no limit".


-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/69aba887/attachment.html>

From michael.s.klishin at gmail.com  Wed Jan 22 06:13:26 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 22 Jan 2014 10:13:26 +0400
Subject: [rabbitmq-discuss] rabbitmq-c consumer will lose if Network
 status is bad ?
In-Reply-To: <1390354585326-32760.post@n5.nabble.com>
References: <1390300210577-32737.post@n5.nabble.com>
 <CAE3HoVT+zHz5vWB9L0F3Z5wduA00Feg7-TQAnEN5A5ktbQbGSA@mail.gmail.com>
 <CAAt2poJmv=pG8vO2PGRVC9ZYLFk-FpOFDSuW8UHCKRpmuehBwQ@mail.gmail.com>
 <1390354585326-32760.post@n5.nabble.com>
Message-ID: <CAE3HoVTZ=bP4J584bOjFJ3H1u=vvf+OANmao19CmGXu8_adXkg@mail.gmail.com>

2014/1/22 3k4b251 <314992959 at qq.com>

>  I  try  to   use  amqp_basic_cancel(Q_123,...);   and   then
> amqp_basic_consume(Q_123,...);  But  message  in Q_123  still  can't  be
> published.
>
>   finally   I  reconnect   to  the   MQ   Server.  and  use
> amqp_basic_consume(Q_123,...);  I  received  every message  in Q_123.   So
> the  connection  had  a  problem?
>

You need to reconnect and reopen the channel(s) before you can recover
your consumer.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/39760918/attachment.html>

From ravindrapandey1982 at gmail.com  Wed Jan 22 06:32:52 2014
From: ravindrapandey1982 at gmail.com (Ravi Pandey)
Date: Wed, 22 Jan 2014 12:02:52 +0530
Subject: [rabbitmq-discuss] RabbitMQ server fail to start
Message-ID: <CAPCD91=S+_pnpjb5D8wn3tWpyKhf+c1NOo0Dg2w4JwD90Mz6hg@mail.gmail.com>

Hi all,

I re-installed RabbitMQ on my serer.

 when i start rabbitMQ then i got following message -

Starting node rabbit at Hardware ...
Error: unable to connect to node rabbit at Hardware: nodedown

DIAGNOSTICS
===========

nodes in question: [rabbit at Hardware]

hosts, their running nodes and ports:
- Hardware: [{rabbitmqctl5656,57043}]

current node details:
- node name: rabbitmqctl5656 at localhost
- home dir: /var/lib/rabbitmq
- cookie hash: 5GmluWt2YobTywy5IipT+Q==


*My error log file contains -*
{"init terminating in
do_boot",{rabbit,failure_during_boot,{could_not_start,rabbitmq_management,{could_not_start_listener,[{port,55672},{ignore_in_use,true}],{'EXIT',{undef,[{lists,keyfind,[name,1,[{loop,{mochiweb_http,loop,[#Fun<rabbit_mochiweb_sup.0.16805770>]}},{name,rabbit_mochiweb_sup_55672},{port,55672}]]},{mochilists,is_defined,2},{mochilists,set_default,2},{lists,foldl,3},{mochiweb_http,start,1},{supervisor,do_start_child,2},{supervisor,handle_start_child,2},{supervisor,handle_call,3}]}}}}}}


Can anyone help me to sort out this problem? :)

Thanks,
Ravi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/9c0fed4c/attachment.html>

From michael.s.klishin at gmail.com  Wed Jan 22 06:55:35 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 22 Jan 2014 10:55:35 +0400
Subject: [rabbitmq-discuss] RabbitMQ server fail to start
In-Reply-To: <CAPCD91=S+_pnpjb5D8wn3tWpyKhf+c1NOo0Dg2w4JwD90Mz6hg@mail.gmail.com>
References: <CAPCD91=S+_pnpjb5D8wn3tWpyKhf+c1NOo0Dg2w4JwD90Mz6hg@mail.gmail.com>
Message-ID: <CAE3HoVQWXs1HLuuRrJvppWCP6C_JV6vJ1=baxivbVEwCW_ivAQ@mail.gmail.com>

2014/1/22 Ravi Pandey <ravindrapandey1982 at gmail.com>

>
> {could_not_start,rabbitmq_management,{could_not_start_listener,[{port,55672},{ignore_in_use,true}
>

RabbitMQ management plugin failed to start because lists:keyfind/3 is
undefined.

Has your Erlang version also changed?
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/55115d2d/attachment.html>

From ravindrapandey1982 at gmail.com  Wed Jan 22 07:13:24 2014
From: ravindrapandey1982 at gmail.com (Ravi Pandey)
Date: Wed, 22 Jan 2014 12:43:24 +0530
Subject: [rabbitmq-discuss] RabbitMQ server fail to start
In-Reply-To: <CAE3HoVQWXs1HLuuRrJvppWCP6C_JV6vJ1=baxivbVEwCW_ivAQ@mail.gmail.com>
References: <CAPCD91=S+_pnpjb5D8wn3tWpyKhf+c1NOo0Dg2w4JwD90Mz6hg@mail.gmail.com>
 <CAE3HoVQWXs1HLuuRrJvppWCP6C_JV6vJ1=baxivbVEwCW_ivAQ@mail.gmail.com>
Message-ID: <CAPCD91=xYnWanvNwx-9trdfTY-0Ss10zCixWBsUzHSVARYrFPw@mail.gmail.com>

I really don't know what's the role of Erlang here :)

I re-installed Erlang and RabbitMQ but still i am getting same error :(

My Erlang version is R12B-5.12.el5.rf  and RabbitMQ version is  3.0.1-1



On Wed, Jan 22, 2014 at 12:25 PM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

> 2014/1/22 Ravi Pandey <ravindrapandey1982 at gmail.com>
>
>>
>> {could_not_start,rabbitmq_management,{could_not_start_listener,[{port,55672},{ignore_in_use,true}
>>
>
> RabbitMQ management plugin failed to start because lists:keyfind/3 is
> undefined.
>
> Has your Erlang version also changed?
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/e8cf1696/attachment.html>

From michael.s.klishin at gmail.com  Wed Jan 22 07:17:48 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 22 Jan 2014 11:17:48 +0400
Subject: [rabbitmq-discuss] RabbitMQ server fail to start
In-Reply-To: <CAPCD91=xYnWanvNwx-9trdfTY-0Ss10zCixWBsUzHSVARYrFPw@mail.gmail.com>
References: <CAPCD91=S+_pnpjb5D8wn3tWpyKhf+c1NOo0Dg2w4JwD90Mz6hg@mail.gmail.com>
 <CAE3HoVQWXs1HLuuRrJvppWCP6C_JV6vJ1=baxivbVEwCW_ivAQ@mail.gmail.com>
 <CAPCD91=xYnWanvNwx-9trdfTY-0Ss10zCixWBsUzHSVARYrFPw@mail.gmail.com>
Message-ID: <CAE3HoVSBfJxGVdV42yq=dPzu98Vh2kJuKmoTk=PV2-hyheicDw@mail.gmail.com>

2014/1/22 Ravi Pandey <ravindrapandey1982 at gmail.com>

> My Erlang version is R12B-5.12.el5.rf  and RabbitMQ version is  3.0.1-1


RabbitMQ requires R13B03+. R16B02 or R16B03 is recommended.


-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/17b2d21a/attachment.html>

From ravindrapandey1982 at gmail.com  Wed Jan 22 07:43:04 2014
From: ravindrapandey1982 at gmail.com (Ravi Pandey)
Date: Wed, 22 Jan 2014 13:13:04 +0530
Subject: [rabbitmq-discuss] RabbitMQ server fail to start
In-Reply-To: <CAE3HoVSBfJxGVdV42yq=dPzu98Vh2kJuKmoTk=PV2-hyheicDw@mail.gmail.com>
References: <CAPCD91=S+_pnpjb5D8wn3tWpyKhf+c1NOo0Dg2w4JwD90Mz6hg@mail.gmail.com>
 <CAE3HoVQWXs1HLuuRrJvppWCP6C_JV6vJ1=baxivbVEwCW_ivAQ@mail.gmail.com>
 <CAPCD91=xYnWanvNwx-9trdfTY-0Ss10zCixWBsUzHSVARYrFPw@mail.gmail.com>
 <CAE3HoVSBfJxGVdV42yq=dPzu98Vh2kJuKmoTk=PV2-hyheicDw@mail.gmail.com>
Message-ID: <CAPCD91nU9vUjpzJnDM+F69gQ8aumpdGHQnU9-fLRYDZJJ_QkTg@mail.gmail.com>

Thanks MK. This http://www.rabbitmq.com/install-rpm.html solved my problem
:)



On Wed, Jan 22, 2014 at 12:47 PM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

>
> 2014/1/22 Ravi Pandey <ravindrapandey1982 at gmail.com>
>
>> My Erlang version is R12B-5.12.el5.rf  and RabbitMQ version is  3.0.1-1
>
>
> RabbitMQ requires R13B03+. R16B02 or R16B03 is recommended.
>
>
>
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/95ecf7ae/attachment.html>

From connect_kausik at yahoo.com  Wed Jan 22 06:43:49 2014
From: connect_kausik at yahoo.com (Kausik Chattopadhyay)
Date: Tue, 21 Jan 2014 22:43:49 -0800 (PST)
Subject: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ server
Message-ID: <1390373029.32279.YahooMailNeo@web141402.mail.bf1.yahoo.com>

Hi ,
I am trying to configure rabbitMQ server with SSL. However it is not working. I was just trying t make sure if my server configuration is fine and I used the openssl s_client ?as per?http://www.rabbitmq.com/troubleshooting-ssl.html
Could you please help me out finding the problem with my setup.
Thanks
Kausik


CLIENT SIDE LOG:


root at master1:~# openssl s_client -connect localhost:5671 -cert client/cert.pem -key client/key.pem -CAfile testca/cacert.pem
CONNECTED(00000003)
write:errno=104
---
no peer certificate available
---
No client certificate CA names sent
---
SSL handshake has read 0 bytes and written 226 bytes
---
New, (NONE), Cipher is (NONE)
Secure Renegotiation IS NOT supported
Compression: NONE
Expansion: NONE
---


SERVER SIDE LOG:

root at master1:~/client# service rabbitmq-server restart
?* Restarting message broker rabbitmq-server ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?[ OK ]?
root at master1:~/client# tail -f /var/log/rabbitmq/rabbit at master1.log
Statistics database started.

=INFO REPORT==== 21-Jan-2014::14:09:13 ===
Server startup complete; 6 plugins started.
?* amqp_client
?* mochiweb
?* rabbitmq_management
?* rabbitmq_management_agent
?* rabbitmq_web_dispatch
?* webmachine



=INFO REPORT==== 21-Jan-2014::14:10:44 ===
accepting AMQP connection <0.320.0> (127.0.0.1:34076 -> 127.0.0.1:5671)

=ERROR REPORT==== 21-Jan-2014::14:10:44 ===
SSL: 1089: error:{error,{badmatch,{error,eacces}}} /root/testca/cacert.pem
? [{ssl_connection,init_certificates,2,
? ? ? ? ? ? ? ? ? ?[{file,"ssl_connection.erl"},{line,1086}]},
? ?{ssl_connection,ssl_init,2,[{file,"ssl_connection.erl"},{line,1062}]},
? ?{ssl_connection,init,1,[{file,"ssl_connection.erl"},{line,316}]},
? ?{gen_fsm,init_it,6,[{file,"gen_fsm.erl"},{line,361}]},
? ?{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,227}]}]


=ERROR REPORT==== 21-Jan-2014::14:10:49 ===
error on AMQP connection <0.320.0>: {ssl_upgrade_error,ecacertfile} (unknown POSIX error)



----------------------------------------------


My serverside configuration is as follows

have provided root priviledges to user "rabbitmq"

root at master1:~/client# rabbitmqctl environment
Application environment of node rabbit at master1 ...
[{auth_backends,[rabbit_auth_backend_internal]},
?{auth_mechanisms,['PLAIN','AMQPLAIN','EXTERNAL']},
?{backing_queue_module,rabbit_variable_queue},
?{cluster_nodes,{[],disc}},
?{cluster_partition_handling,ignore},
?{collect_statistics,fine},
?{collect_statistics_interval,5000},
?{default_permissions,[<<".*">>,<<".*">>,<<".*">>]},
?{default_user,<<"guest">>},
?{default_user_tags,[administrator]},
?{default_vhost,<<"/">>},
?{delegate_count,16},
?{disk_free_limit,50000000},
?{enabled_plugins_file,"/etc/rabbitmq/enabled_plugins"},
?{error_logger,{file,"/var/log/rabbitmq/rabbit at master1.log"}},
?{frame_max,131072},
?{halt_on_upgrade_failure,true},
?{heartbeat,580},
?{hipe_compile,false},
?{hipe_modules,[rabbit_reader,rabbit_channel,gen_server2,rabbit_exchange,
? ? ? ? ? ? ? ? rabbit_command_assembler,rabbit_framing_amqp_0_9_1,
? ? ? ? ? ? ? ? rabbit_basic,rabbit_event,lists,queue,priority_queue,
? ? ? ? ? ? ? ? rabbit_router,rabbit_trace,rabbit_misc,rabbit_binary_parser,
? ? ? ? ? ? ? ? rabbit_exchange_type_direct,rabbit_guid,rabbit_net,
? ? ? ? ? ? ? ? rabbit_amqqueue_process,rabbit_variable_queue,
? ? ? ? ? ? ? ? rabbit_binary_generator,rabbit_writer,delegate,gb_sets,lqueue,
? ? ? ? ? ? ? ? sets,orddict,rabbit_amqqueue,rabbit_limiter,gb_trees,
? ? ? ? ? ? ? ? rabbit_queue_index,rabbit_exchange_decorator,gen,dict,ordsets,
? ? ? ? ? ? ? ? file_handle_cache,rabbit_msg_store,array,
? ? ? ? ? ? ? ? rabbit_msg_store_ets_index,rabbit_msg_file,
? ? ? ? ? ? ? ? rabbit_exchange_type_fanout,rabbit_exchange_type_topic,mnesia,
? ? ? ? ? ? ? ? mnesia_lib,rpc,mnesia_tm,qlc,sofs,proplists,credit_flow,pmon,
? ? ? ? ? ? ? ? ssl_connection,tls_connection,ssl_record,tls_record,gen_fsm,
? ? ? ? ? ? ? ? ssl]},
?{included_applications,[]},
?{log_levels,[{connection,info}]},
?{msg_store_file_size_limit,16777216},
?{msg_store_index_module,rabbit_msg_store_ets_index},
?{plugins_dir,"/usr/lib/rabbitmq/lib/rabbitmq_server-3.2.2/sbin/../plugins"},
?{plugins_expand_dir,"/var/lib/rabbitmq/mnesia/rabbit at master1-plugins-expand"},
?{queue_index_max_journal_entries,65536},
?{reverse_dns_lookups,false},
?{sasl_error_logger,{file,"/var/log/rabbitmq/rabbit at master1-sasl.log"}},
?{server_properties,[]},
?{ssl_apps,[asn1,crypto,public_key,ssl]},
?{ssl_cert_login_from,common_name},
?{ssl_listeners,[5671]},
?{ssl_options,[{cacertfile,"/root/testca/cacert.pem"},
? ? ? ? ? ? ? ?{certfile,"/root/server/cert.pem"},
? ? ? ? ? ? ? ?{keyfile,"/root/server/key.pem"},
? ? ? ? ? ? ? ?{verify,verify_peer},
? ? ? ? ? ? ? ?{fail_if_no_peer_cert,false}]},
?{tcp_listen_options,[binary,
? ? ? ? ? ? ? ? ? ? ? {packet,raw},
? ? ? ? ? ? ? ? ? ? ? {reuseaddr,true},
? ? ? ? ? ? ? ? ? ? ? {backlog,128},
? ? ? ? ? ? ? ? ? ? ? {nodelay,true},
? ? ? ? ? ? ? ? ? ? ? {linger,{true,0}},
? ? ? ? ? ? ? ? ? ? ? {exit_on_close,false}]},
?{tcp_listeners,[5672]},
?{trace_vhosts,[]},
?{vm_memory_high_watermark,0.4},
?{vm_memory_high_watermark_paging_ratio,0.5}]
...done.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/acb73775/attachment.html>

From mklishin at gopivotal.com  Wed Jan 22 08:23:04 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 22 Jan 2014 12:23:04 +0400
Subject: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ
	server
In-Reply-To: <1390373029.32279.YahooMailNeo@web141402.mail.bf1.yahoo.com>
References: <1390373029.32279.YahooMailNeo@web141402.mail.bf1.yahoo.com>
Message-ID: <4DED600F-D7D3-479E-95D4-5693C124C924@rabbitmq.com>

On 22 Jan 2014, at 10:43, Kausik Chattopadhyay <connect_kausik at yahoo.com> wrote:

> {error,{badmatch,{error,eacces}}} /root/testca/cacert.pem

RabbitMQ could not read /root/testca/cacert.pem because it does not exist
or is not readable by the effective user (e.g. rabbitmq).

MK

Software Engineer, Pivotal/RabbitMQ



From simon at rabbitmq.com  Wed Jan 22 10:19:42 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 22 Jan 2014 10:19:42 +0000
Subject: [rabbitmq-discuss] Bug w/ Federated Queue's & Clustering
In-Reply-To: <52DF3680.4080506@one.com>
References: <52DF3680.4080506@one.com>
Message-ID: <52DF9B3E.3040000@rabbitmq.com>

On 22/01/14 03:09, Josh West wrote:
> Without much effort, I'm seeing errors on cluster1 after using the queue
> a few times.  The error is visible within the management console:
>
> TypeError: Cannot read property 'ram_msg_count' of undefined
>
> And federation from that point on for that queue fails.

Can you post logs somewhere?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Wed Jan 22 10:21:53 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 22 Jan 2014 10:21:53 +0000
Subject: [rabbitmq-discuss] Federation Upstream Set Policy
In-Reply-To: <CANjo9ry=kkxmAe7o37uD3KD0bb1LzydGHWVrq=Y8=LiOk+2crA@mail.gmail.com>
References: <CANjo9ry=kkxmAe7o37uD3KD0bb1LzydGHWVrq=Y8=LiOk+2crA@mail.gmail.com>
Message-ID: <52DF9BC1.7050800@rabbitmq.com>

On 21/01/14 23:28, Dann wrote:
> I have a case where I need to federate an exchange to two different
> upstreams.  The upstreams are part of different federation upstream
> sets.  It is possible to define the policy to send to multiple upstream
> sets without using the "all" upstream set?

Alvaro already pointed out that you may have upstream / downstream the 
wrong way round. But no, it's not possible to define more than one 
upstream set for a policy. However, each upstream can be in as many 
upstream sets as you like.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From mklishin at gopivotal.com  Wed Jan 22 11:12:56 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 22 Jan 2014 15:12:56 +0400
Subject: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ
	server
In-Reply-To: <1390388342.78457.YahooMailNeo@web141405.mail.bf1.yahoo.com>
References: <1390373029.32279.YahooMailNeo@web141402.mail.bf1.yahoo.com>
 <4DED600F-D7D3-479E-95D4-5693C124C924@rabbitmq.com>
 <1390388342.78457.YahooMailNeo@web141405.mail.bf1.yahoo.com>
Message-ID: <A9A3A8C6-B08E-4079-9C15-94E78640464F@gopivotal.com>


On 22 Jan 2014, at 14:59, Kausik Chattopadhyay <connect_kausik at yahoo.com> wrote:

> Interestingly, this is the log from rabbit at master1-sasl.log

There is nothing new in the SASL log.

ecacertfile indicates there was an issue with the CA certificate, which cannot
be loaded due to eaccess (according to the other log file).
--
MK

Software Engineer, Pivotal/RabbitMQ


From connect_kausik at yahoo.com  Wed Jan 22 10:59:02 2014
From: connect_kausik at yahoo.com (Kausik Chattopadhyay)
Date: Wed, 22 Jan 2014 02:59:02 -0800 (PST)
Subject: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ
	server
In-Reply-To: <4DED600F-D7D3-479E-95D4-5693C124C924@rabbitmq.com>
References: <1390373029.32279.YahooMailNeo@web141402.mail.bf1.yahoo.com>
 <4DED600F-D7D3-479E-95D4-5693C124C924@rabbitmq.com>
Message-ID: <1390388342.78457.YahooMailNeo@web141405.mail.bf1.yahoo.com>

Hi,
Thanks for the input. However,?I checked that the file exists and "rabbitmq:rabbitmq" is the owner.
Interestingly, this is the log from?rabbit at master1-sasl.log


=CRASH REPORT==== 22-Jan-2014::08:48:51 ===
? crasher:
? ? initial call: ssl_connection:init/1
? ? pid: <0.8752.0>
? ? registered_name: []
? ? exception exit: ecacertfile
? ? ? in function ?gen_fsm:init_it/6 (gen_fsm.erl, line 371)
? ? ancestors: [ssl_connection_sup,ssl_sup,<0.228.0>]
? ? messages: []
? ? links: [<0.231.0>]
? ? dictionary: [{ssl_manager,ssl_manager}]
? ? trap_exit: false
? ? status: running
? ? heap_size: 1597
? ? stack_size: 24
? ? reductions: 1970
? neighbours:

=SUPERVISOR REPORT==== 22-Jan-2014::08:48:51 ===
? ? ?Supervisor: {local,ssl_connection_sup}
? ? ?Context: ? ?child_terminated
? ? ?Reason: ? ? ecacertfile
? ? ?Offender: ? [{pid,<0.8752.0>},
? ? ? ? ? ? ? ? ? {name,undefined},
? ? ? ? ? ? ? ? ? {mfargs,{ssl_connection,start_link,undefined}},
? ? ? ? ? ? ? ? ? {restart_type,temporary},
? ? ? ? ? ? ? ? ? {shutdown,4000},
? ? ? ? ? ? ? ? ? {child_type,worker}]
?



On Wednesday, January 22, 2014 1:53 PM, Michael Klishin <mklishin at gopivotal.com> wrote:
 
On 22 Jan 2014, at 10:43, Kausik Chattopadhyay <connect_kausik at yahoo.com> wrote:


> {error,{badmatch,{error,eacces}}} /root/testca/cacert.pem

RabbitMQ could not read /root/testca/cacert.pem because it does not exist
or is not readable by the effective user (e.g. rabbitmq).

MK

Software Engineer, Pivotal/RabbitMQ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/988d0dea/attachment.html>

From mandyce2006 at gmail.com  Wed Jan 22 13:35:18 2014
From: mandyce2006 at gmail.com (Mandar Phatak)
Date: Wed, 22 Jan 2014 19:05:18 +0530
Subject: [rabbitmq-discuss] Please discard me from this mail list.<EOM>
Message-ID: <CAJXycg0gKGKPft+bsvh8FX-GQe5o=nBvGooQHps0hMz229JA0Q@mail.gmail.com>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/b9d18973/attachment.html>

From ceri at lshift.net  Wed Jan 22 13:42:53 2014
From: ceri at lshift.net (Ceri Storey)
Date: Wed, 22 Jan 2014 13:42:53 +0000
Subject: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ
 server
In-Reply-To: <1390388342.78457.YahooMailNeo@web141405.mail.bf1.yahoo.com>
References: <1390373029.32279.YahooMailNeo@web141402.mail.bf1.yahoo.com>
 <4DED600F-D7D3-479E-95D4-5693C124C924@rabbitmq.com>
 <1390388342.78457.YahooMailNeo@web141405.mail.bf1.yahoo.com>
Message-ID: <52DFCADD.1050701@lshift.net>

(22/01/14 10:59), Kausik Chattopadhyay wrote:
> Hi,
> Thanks for the input. However, I checked that the file exists and
> "rabbitmq:rabbitmq" is the owner.
The rabbitmq user needs to have permissions to access the *entire* path.
So, usually /root only allows root to access items within that directory
(the rather bizarrely chosen "executable" permission on the directory).
Try running "sudo -u rabbitmq namei /root/testca/cacert.pem" to see this
in action. It's probably more sensible however to put the certificate
somewhere under /etc, eg: /etc/rabbitmq or similar.

> Interestingly, this is the log from rabbit at master1-sasl.log
>
>
> =CRASH REPORT==== 22-Jan-2014::08:48:51 ===
>   crasher:
>     initial call: ssl_connection:init/1
>     pid: <0.8752.0>
>     registered_name: []
>     exception exit: ecacertfile
>       in function  gen_fsm:init_it/6 (gen_fsm.erl, line 371)
>     ancestors: [ssl_connection_sup,ssl_sup,<0.228.0>]
>     messages: []
>     links: [<0.231.0>]
>     dictionary: [{ssl_manager,ssl_manager}]
>     trap_exit: false
>     status: running
>     heap_size: 1597
>     stack_size: 24
>     reductions: 1970
>   neighbours:
>
> =SUPERVISOR REPORT==== 22-Jan-2014::08:48:51 ===
>      Supervisor: {local,ssl_connection_sup}
>      Context:    child_terminated
>      Reason:     ecacertfile
>      Offender:   [{pid,<0.8752.0>},
>                   {name,undefined},
>                   {mfargs,{ssl_connection,start_link,undefined}},
>                   {restart_type,temporary},
>                   {shutdown,4000},
>                   {child_type,worker}]
>  
>
>
> On Wednesday, January 22, 2014 1:53 PM, Michael Klishin
> <mklishin at gopivotal.com> wrote:
> On 22 Jan 2014, at 10:43, Kausik Chattopadhyay
> <connect_kausik at yahoo.com <mailto:connect_kausik at yahoo.com>> wrote:
>
>
> > {error,{badmatch,{error,eacces}}} /root/testca/cacert.pem
>
>
> RabbitMQ could not read /root/testca/cacert.pem because it does not exist
> or is not readable by the effective user (e.g. rabbitmq).
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/addf53eb/attachment.html>

From connect_kausik at yahoo.com  Wed Jan 22 14:37:49 2014
From: connect_kausik at yahoo.com (Kausik Chattopadhyay)
Date: Wed, 22 Jan 2014 06:37:49 -0800 (PST)
Subject: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ
	server
In-Reply-To: <A9A3A8C6-B08E-4079-9C15-94E78640464F@gopivotal.com>
References: <1390373029.32279.YahooMailNeo@web141402.mail.bf1.yahoo.com>
 <4DED600F-D7D3-479E-95D4-5693C124C924@rabbitmq.com>
 <1390388342.78457.YahooMailNeo@web141405.mail.bf1.yahoo.com>
 <A9A3A8C6-B08E-4079-9C15-94E78640464F@gopivotal.com>
Message-ID: <1390401469.50206.YahooMailNeo@web141406.mail.bf1.yahoo.com>

Hi Michael,
Thanks.
?Actually the certificates were owned by root.?
I tried the followings:
1. Adding user rabbitmq to group root ?--- didnt work
2. Changing the ownership of all the certficates to rabbitmq:rabbitmq --- didnt work

Finally I tried this. Created a "rabbitmq" sudoer. Installing rabbitmq server. Generating the certificates as a "rabbitmq" user --> this worked

Thanks
Kausik



On Wednesday, January 22, 2014 4:54 PM, Michael Klishin <mklishin at gopivotal.com> wrote:
 

On 22 Jan 2014, at 14:59, Kausik Chattopadhyay <connect_kausik at yahoo.com> wrote:

> Interestingly, this is the log from rabbit at master1-sasl.log

There is nothing new in the SASL log.

ecacertfile indicates there was an issue with the CA certificate, which cannot
be loaded due to eaccess (according to the other log file).

--
MK

Software Engineer, Pivotal/RabbitMQ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/81b0fc7c/attachment.html>

From ravindrapandey1982 at gmail.com  Wed Jan 22 14:41:08 2014
From: ravindrapandey1982 at gmail.com (Ravi Pandey)
Date: Wed, 22 Jan 2014 20:11:08 +0530
Subject: [rabbitmq-discuss] Setting Message priority
Message-ID: <CAPCD91=dzOO2BFx5+5g+s3TBf_VBu97zxBJZ8OYwyzH06YvnKQ@mail.gmail.com>

Hi All,

How message priority works ? Should i set it in my publisher file? In my
consumer file, do i need to do any changes for setting up message priority?

I work in PHP and i am referring
http://www.rabbitmq.com/tutorials/tutorial-two-php.html

Ravi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/7cf44120/attachment.html>

From videlalvaro at gmail.com  Wed Jan 22 14:46:03 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Wed, 22 Jan 2014 15:46:03 +0100
Subject: [rabbitmq-discuss] Setting Message priority
In-Reply-To: <CAPCD91=dzOO2BFx5+5g+s3TBf_VBu97zxBJZ8OYwyzH06YvnKQ@mail.gmail.com>
References: <CAPCD91=dzOO2BFx5+5g+s3TBf_VBu97zxBJZ8OYwyzH06YvnKQ@mail.gmail.com>
Message-ID: <CAMcAHLUE2z=w1i=Boa3-5m_4MpTsb0810tVGFUzFq80DMcKN-Q@mail.gmail.com>

Hi,

RabbitMQ doesn't support message priorities.

Regards,

Alvaro

On Wed, Jan 22, 2014 at 3:41 PM, Ravi Pandey
<ravindrapandey1982 at gmail.com> wrote:
> Hi All,
>
> How message priority works ? Should i set it in my publisher file? In my
> consumer file, do i need to do any changes for setting up message priority?
>
> I work in PHP and i am referring
> http://www.rabbitmq.com/tutorials/tutorial-two-php.html
>
> Ravi
>
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From dann.ormond at gmail.com  Wed Jan 22 14:47:41 2014
From: dann.ormond at gmail.com (Dann)
Date: Wed, 22 Jan 2014 07:47:41 -0700
Subject: [rabbitmq-discuss] Federation Upstream Set Policy
In-Reply-To: <52DF9BC1.7050800@rabbitmq.com>
References: <CANjo9ry=kkxmAe7o37uD3KD0bb1LzydGHWVrq=Y8=LiOk+2crA@mail.gmail.com>
 <52DF9BC1.7050800@rabbitmq.com>
Message-ID: <CANjo9rwA=7ihgAwF-ru6GGeqO=T4Cue7AuxwHCEksiXbZpozYw@mail.gmail.com>

Thank you both Alvaro and Simon.  As was pointed out, I did have the
upstream / downstream backwards and I appreciate the correction there.
 Also, the ability to add an upstream to multiple upstream sets will work.

Thanks all!


On Wed, Jan 22, 2014 at 3:21 AM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 21/01/14 23:28, Dann wrote:
>
>> I have a case where I need to federate an exchange to two different
>> upstreams.  The upstreams are part of different federation upstream
>> sets.  It is possible to define the policy to send to multiple upstream
>> sets without using the "all" upstream set?
>>
>
> Alvaro already pointed out that you may have upstream / downstream the
> wrong way round. But no, it's not possible to define more than one upstream
> set for a policy. However, each upstream can be in as many upstream sets as
> you like.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/002263b1/attachment.html>

From ravindrapandey1982 at gmail.com  Wed Jan 22 14:55:44 2014
From: ravindrapandey1982 at gmail.com (Ravi Pandey)
Date: Wed, 22 Jan 2014 20:25:44 +0530
Subject: [rabbitmq-discuss] Setting Message priority
In-Reply-To: <CAMcAHLUE2z=w1i=Boa3-5m_4MpTsb0810tVGFUzFq80DMcKN-Q@mail.gmail.com>
References: <CAPCD91=dzOO2BFx5+5g+s3TBf_VBu97zxBJZ8OYwyzH06YvnKQ@mail.gmail.com>
 <CAMcAHLUE2z=w1i=Boa3-5m_4MpTsb0810tVGFUzFq80DMcKN-Q@mail.gmail.com>
Message-ID: <CAPCD91nZOWCUMYNawk=fU9pffGyw9NyJqHghZMEjahmMDfzt9A@mail.gmail.com>

Can you please take a look here -
http://www.slideshare.net/carrja99/high-powered-messaging-with

It says - there is a value 0-9 for message priorities


On Wed, Jan 22, 2014 at 8:16 PM, Alvaro Videla <videlalvaro at gmail.com>wrote:

> Hi,
>
> RabbitMQ doesn't support message priorities.
>
> Regards,
>
> Alvaro
>
> On Wed, Jan 22, 2014 at 3:41 PM, Ravi Pandey
> <ravindrapandey1982 at gmail.com> wrote:
> > Hi All,
> >
> > How message priority works ? Should i set it in my publisher file? In my
> > consumer file, do i need to do any changes for setting up message
> priority?
> >
> > I work in PHP and i am referring
> > http://www.rabbitmq.com/tutorials/tutorial-two-php.html
> >
> > Ravi
> >
> >
> >
> >
> >
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-discuss at lists.rabbitmq.com
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> >
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/776d770c/attachment.html>

From simon at rabbitmq.com  Wed Jan 22 14:59:21 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 22 Jan 2014 14:59:21 +0000
Subject: [rabbitmq-discuss] Setting Message priority
In-Reply-To: <CAPCD91nZOWCUMYNawk=fU9pffGyw9NyJqHghZMEjahmMDfzt9A@mail.gmail.com>
References: <CAPCD91=dzOO2BFx5+5g+s3TBf_VBu97zxBJZ8OYwyzH06YvnKQ@mail.gmail.com>
 <CAMcAHLUE2z=w1i=Boa3-5m_4MpTsb0810tVGFUzFq80DMcKN-Q@mail.gmail.com>
 <CAPCD91nZOWCUMYNawk=fU9pffGyw9NyJqHghZMEjahmMDfzt9A@mail.gmail.com>
Message-ID: <52DFDCC9.6030001@rabbitmq.com>

On 22/01/14 14:55, Ravi Pandey wrote:
> Can you please take a look here -
> http://www.slideshare.net/carrja99/high-powered-messaging-with
>
> It says - there is a value 0-9 for message priorities

(On slide 22 if anyone else is looking.)

That's in the AMQP standard. RabbitMQ doesn't support them unfortunately.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From maulik.mihir at gmail.com  Wed Jan 22 13:29:10 2014
From: maulik.mihir at gmail.com (maulik thaker)
Date: Wed, 22 Jan 2014 05:29:10 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ hangs, does not accept connections
In-Reply-To: <CANTUpDDgWVbkXu+2ph9O7VcWCHdXyWXYDi3spEbL03LizdhW+Q@mail.gmail.com>
References: <CANTUpDBuF30tFVcdsG0kcc1in9nwphvaa=L6LPeOenPuhdU7sw@mail.gmail.com>
 <4EF30FE4.8060100@rabbitmq.com>
 <CANTUpDCTBEM1F9-g+8USa2jUuLT6CM2i72y+OhAzeGX+tP=heQ@mail.gmail.com>
 <4EF3162A.7040009@rabbitmq.com>
 <CANTUpDAdvha2aG1zckpywpK-0irDtuDw9en6xJ3Jbr__k7nx8g@mail.gmail.com>
 <CANTUpDA68DkfYF+45rp3E9AQ9p-M_kK1ff9EzOVX7Hmpkz2GwA@mail.gmail.com>
 <4EFC3450.40901@rabbitmq.com>
 <CANTUpDCZNf7+WahP_Y6osyVX+PuxwN7gZnspystbwgPcc-q5nA@mail.gmail.com>
 <4EFDAA72.9090605@rabbitmq.com> <4EFDC47D.7060204@rabbitmq.com>
 <CANTUpDBbvHcQx+pANZLTxYiH010UmXZJDUweW9XwOLLwRT8gMw@mail.gmail.com>
 <4EFDDC6E.8060200@rabbitmq.com>
 <CANTUpDAHi9K_mAHa8hFHTGGy_iAh6ZNWvNsq6kGvDjLn45B5TA@mail.gmail.com>
 <CANTUpDD+MSUSVCTDLtQpeTLsrHyrXv9TVm5a_c-=xCHbWisPrw@mail.gmail.com>
 <4F564161.5040601@rabbitmq.com>
 <CANTUpDBQVtYav2tEWqynEyhSKmvApo4Q1WjCArYB3T_TVLC9FA@mail.gmail.com>
 <4F577D3D.2020003@rabbitmq.com>
 <CANTUpDCYWUD_YxUaZGUz7VZzbWoGAUj72amAWYxVZdG=bhKEow@mail.gmail.com>
 <4F59F976.4060807@rabbitmq.com>
 <CANTUpDDgWVbkXu+2ph9O7VcWCHdXyWXYDi3spEbL03LizdhW+Q@mail.gmail.com>
Message-ID: <c8148af0-744b-479b-a574-4f2ded542200@googlegroups.com>


Hi Dmitri Minaev,

        I am facing same problem with rabbitmq 3.2.2 ( I have gone through 
this thread and already checked memory and number of file-descriptors are 
not causing the problem). If you have solved that problem then please share 
the solution.  

Thanks,
Maulik


On Monday, 26 March 2012 11:15:45 UTC+5:30, Dmitri Minaev wrote:
>
> On 9 March 2012 16:37, Simon MacMullen <si... at rabbitmq.com <javascript:>> 
> wrote:
> > On 09/03/12 07:57, Dmitri Minaev wrote:
>
> >> If I understand correctly, the number of file descriptors used by
> >> RabbitMQ in normal situation is roughly equal to the number of
> >> `rabbitmqctl list_connections` + some constant (~30)? In case of that
> >> hanging server, the number of AMQP connections never was close to the
> >> FD limit (ulimit -n is 1024, fs.file-max = 1605698). The graph
> >> reflecting  the number of open AMQP connections is attached to this
> >> message.
> >
> >
> > It's not really a constant, but to a first approximation, yes.
> >
> > Ultimately, the error I saw being passed up from the OS was ENFILE - 
> that's
> > pretty unambiguous :)
> >
> > It's possible that if you're churning connections then "closed" 
> connections
> > in FIN_WAIT2 could account for the majority of the used FDs. In 2.8.0 
> we'll
> > set SO_LINGER to 0 to prevent this.
>
> I am still not sure about the role of the file descriptors in this
> event. Last Friday, our Rabbit died again. Until the very last moment
> the number of open file descriptors as reported by the management
> plugin was 143 out of the total available number of 32765. It was
> RabbitMQ v.2.7.0. On that same day I have upgraded to 2.8.1. Will
> report on its behaviour later.
>
> -- 
> With best regards,
> Dmitri Minaev
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq... at lists.rabbitmq.com <javascript:>
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/923dea44/attachment.html>

From Punit.Jain at emc.com  Wed Jan 22 15:13:52 2014
From: Punit.Jain at emc.com (Jain, Punit)
Date: Wed, 22 Jan 2014 10:13:52 -0500
Subject: [rabbitmq-discuss] RabbitMQ couldn't recover after the free disk
 space went below the default threshold limit
Message-ID: <DB14E94115BBC84E8960C12C176D06760178F80EDA@MX25A.corp.emc.com>

Hi All,
We are using RabbitMQ 3.1.3. It was running fine, but recently it couldn't recover itself after the free disk space went below the threshold limit. We didn't modify the default threshold. I have appended few excerpts from the logs, which I thought are relevant; let me know if you need any other information or logs.

Thanks in Advance!
Punit

=INFO REPORT==== 18-Jan-2014::11:29:38 ===
accepting AMQP connection <0.6291.2> (127.0.0.1:8198 -> 127.0.0.1:5672)

=INFO REPORT==== 18-Jan-2014::11:29:52 ===
Disk free space insufficient. Free bytes:994299904 Limit:1000000000

=WARNING REPORT==== 18-Jan-2014::11:29:52 ===
disk resource limit alarm set on node rabbit at localhost.

**********************************************************
*** Publishers will be blocked until this alarm clears ***
**********************************************************

=WARNING REPORT==== 18-Jan-2014::11:30:10 ===
closing AMQP connection <0.6280.2> (127.0.0.1:8181 -> 127.0.0.1:5672):
connection_closed_abruptly

=ERROR REPORT==== 18-Jan-2014::14:38:54 ===
** Generic server mnesia_sync terminating
** Last message in was timeout
** When Server state == {state,[{<0.1100.2>,#Ref<0.0.16.193586>}],true}
** Reason for termination ==
** {{badmatch,{error,{file_error,"/var/lib/rabbitmq/mnesia/rabbit at localhost/LATEST.LOG",
                                 enospc}}},
    [{mnesia_sync,handle_info,2,[]},
     {gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,607}]},
     {proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,227}]}]}

=ERROR REPORT==== 18-Jan-2014::14:38:54 ===
webmachine error: path="/api/parameters/federation-upstream/%2f/LocalDir_Upstream"
{error,
    {exit,
        {{{badmatch,
              {error,
                  {file_error,
                      "/var/lib/rabbitmq/mnesia/rabbit at localhost/LATEST.LOG",
                      enospc}}},
          [{mnesia_sync,handle_info,2,[]},
           {gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,607}]},
           {proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,227}]}]},
         {gen_server,call,[mnesia_sync,sync,infinity]}},
        [{gen_server,call,3,[{file,"gen_server.erl"},{line,188}]},
         {rabbit_misc,execute_mnesia_transaction,1,[]},
         {rabbit_runtime_parameters,set_any0,4,[]},
         {rabbit_runtime_parameters,set_any,4,[]},
         {rabbit_mgmt_wm_parameter,'-accept_content/2-fun-0-',5,[]},
         {rabbit_mgmt_util,with_decode,5,[]},
         {webmachine_resource,resource_call,3,[]},
         {webmachine_resource,do,3,[]}]}}
=WARNING REPORT==== 18-Jan-2014::14:38:54 ===
Connection (<0.7261.2>) closing: internal error in channel (<0.7268.2>): shutdown

=WARNING REPORT==== 18-Jan-2014::14:38:54 ===
Connection (<0.7318.2>) closing: internal error in channel (<0.7344.2>): shutdown

=WARNING REPORT==== 18-Jan-2014::14:38:54 ===
Connection (<0.7310.2>) closing: internal error in channel (<0.7335.2>): shutdown

=WARNING REPORT==== 18-Jan-2014::14:38:54 ===
Connection (<0.7328.2>) closing: internal error in channel (<0.7353.2>): shutdown

=INFO REPORT==== 18-Jan-2014::14:38:54 ===
stopped TCP Listener on [::]:5672

=WARNING REPORT==== 18-Jan-2014::14:38:54 ===
Connection (<0.7305.2>) closing: internal error in channel (<0.7323.2>): shutdown

=ERROR REPORT==== 18-Jan-2014::14:38:54 ===
AMQP connection <0.20548.1> (blocking), channel 1 - error:
shutdown

=WARNING REPORT==== 18-Jan-2014::14:38:54 ===
Non-AMQP exit reason 'shutdown'

=ERROR REPORT==== 18-Jan-2014::14:38:54 ===
AMQP connection <0.11369.2> (blocked), channel 3 - error:
shutdown

=WARNING REPORT==== 18-Jan-2014::14:38:54 ===
Non-AMQP exit reason 'shutdown'

=ERROR REPORT==== 18-Jan-2014::14:38:54 ===
AMQP connection <0.6437.2> (blocked), channel 3 - error:
shutdown

=WARNING REPORT==== 18-Jan-2014::14:38:54 ===
Non-AMQP exit reason 'shutdown'

=ERROR REPORT==== 18-Jan-2014::14:38:54 ===
closing AMQP connection <0.6437.2> (127.0.0.1:8950 -> 127.0.0.1:5672):
{inet_error,enotconn}

=ERROR REPORT==== 18-Jan-2014::14:38:54 ===
** Generic server msg_store_persistent terminating
** Last message in was {'EXIT',<0.166.0>,shutdown}
** When Server state == {msstate,
                            "/var/lib/rabbitmq/mnesia/rabbit at localhost/msg_store_persistent",
                            rabbit_msg_store_ets_index,
                            {state,241739,
                                "/var/lib/rabbitmq/mnesia/rabbit at localhost/msg_store_persistent"},
                            0,#Ref<0.0.0.1083>,
                            {dict,0,16,16,8,80,48,
                                {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                 []},
                                {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                  [],[]}}},
                            undefined,657,7536,[],<0.229.0>,245836,237642,
                            249933,254030,
                            {set,0,16,16,8,80,48,
                                {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                 []},
                                {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                  [],[]}}},
                            {dict,4,16,16,8,80,48,
                                {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                 []},
                                {{[],[],[],[],[],[],[],
                                  [[<<47,239,116,176,238,253,171,103,27,228,
                                      101,97,202,108,131,196>>|
                                    {<0.233.0>,
                                     #Fun<rabbit_variable_queue.1.98519756>,
                                     #Fun<rabbit_variable_queue.13.110761503>}]],
                                  [],
                                  [[<<245,14,237,152,23,39,217,67,22,170,155,
                                      57,40,30,29,108>>|
                                    {<0.234.0>,
                                     #Fun<rabbit_variable_queue.1.98519756>,
                                     #Fun<rabbit_variable_queue.13.110761503>}]],
                                  [[<<3,56,140,195,127,215,175,32,168,21,13,
                                      192,178,56,76,211>>|
                                    {<0.4047.0>,
                                     #Fun<rabbit_variable_queue.1.98519756>,
                                     #Fun<rabbit_variable_queue.13.110761503>}]],
                                 [[<<71,36,220,167,246,169,123,248,249,183,
                                      209,118,140,198,38,8>>|
                                    {<0.4010.0>,
                                     #Fun<rabbit_variable_queue.1.98519756>,
                                     #Fun<rabbit_variable_queue.13.110761503>}]],
                                  [],[],[],[]}}},
                            false,16777216,
                            {dict,0,16,16,8,80,48,
                                {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                 []},
                                {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                  [],[]}}}}
** Reason for termination ==
** {{badmatch,{error,{file_error,"/var/lib/rabbitmq/mnesia/rabbit at localhost/msg_store_persistent/file_summary.ets",
                                 enospc}}},
    [{rabbit_msg_store,store_file_summary,2,[]},
     {rabbit_msg_store,terminate,2,[]},
     {gen_server2,terminate,3,[]},
     {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,237}]}]}
** In 'terminate' callback with reason ==
** shutdown
=ERROR REPORT==== 18-Jan-2014::14:38:58 ===
** Generic server rabbit_mgmt_external_stats terminating
** Last message in was emit_update
** When Server state == {state,1024}
** Reason for termination ==
** {noproc,{gen_server,call,[rabbit_node_monitor,partitions,infinity]}}

=ERROR REPORT==== 18-Jan-2014::14:38:59 ===
webmachine error: path="/api/parameters/federation-upstream/%2f/LocalDir_Upstream"
{error,{error,badarg,
              [{ets,lookup,
                    [rabbit_registry,
                     {runtime_parameter,'federation-upstream'}],
                    []},
               {rabbit_registry,lookup_module,2,[]},
               {rabbit_runtime_parameters,lookup_component,1,[]},
               {rabbit_runtime_parameters,set_any0,4,[]},
               {rabbit_runtime_parameters,set_any,4,[]},
               {rabbit_mgmt_wm_parameter,'-accept_content/2-fun-0-',5,[]},
               {rabbit_mgmt_util,with_decode,5,[]},
               {webmachine_resource,resource_call,3,[]}]}}

=INFO REPORT==== 18-Jan-2014::15:20:52 ===
Error description:
   {error,{could_not_write_file,"/var/lib/rabbitmq/mnesia/rabbit at localhost/cluster_nodes.config",
                                enospc}}

Log files (may contain more information):
   /var/log/rabbitmq/rabbit at localhost.log
   /var/log/rabbitmq/rabbit at localhost-sasl.log

Stack trace:
   [{rabbit_node_monitor,write_cluster_status,1,[]},
    {rabbit_node_monitor,prepare_cluster_status_files,0,[]},
    {rabbit,'-boot/0-fun-1-',0,[]},
    {rabbit,start_it,1,[]},
    {init,start_it,1,[]},
    {init,start_em,1,[]}]


=INFO REPORT==== 18-Jan-2014::15:32:08 ===
Error description:
   {error,corrupt_cluster_status_files,[]}

Log files (may contain more information):
   /var/log/rabbitmq/rabbit at localhost.log
   /var/log/rabbitmq/rabbit at localhost-sasl.log

Stack trace:
   [{rabbit_node_monitor,'-prepare_cluster_status_files/0-fun-0-',1,[]},
    {rabbit_node_monitor,prepare_cluster_status_files,0,[]},
    {rabbit,'-boot/0-fun-1-',0,[]},
    {rabbit,start_it,1,[]},
    {init,start_it,1,[]},
    {init,start_em,1,[]}]




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/217d2ecb/attachment.html>

From jsw at one.com  Wed Jan 22 15:23:25 2014
From: jsw at one.com (Josh West)
Date: Wed, 22 Jan 2014 10:23:25 -0500
Subject: [rabbitmq-discuss] Bug w/ Federated Queue's & Clustering
In-Reply-To: <52DF9B3E.3040000@rabbitmq.com>
References: <52DF3680.4080506@one.com> <52DF9B3E.3040000@rabbitmq.com>
Message-ID: <52DFE26D.2050306@one.com>

Hi Simon,

Sure thing.  I've posted the log to a github gist: 
https://gist.github.com/jwestboston/8560559

If you need anything else, let me know.

Thanks.

--
Josh West
One.com - http://www.one.com

On 01/22/2014 05:19 AM, Simon MacMullen wrote:
> On 22/01/14 03:09, Josh West wrote:
>> Without much effort, I'm seeing errors on cluster1 after using the queue
>> a few times.  The error is visible within the management console:
>>
>> TypeError: Cannot read property 'ram_msg_count' of undefined
>>
>> And federation from that point on for that queue fails.
>
> Can you post logs somewhere?
>
> Cheers, Simon
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/95ecb0bd/attachment.html>

From simon at rabbitmq.com  Wed Jan 22 15:26:11 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 22 Jan 2014 15:26:11 +0000
Subject: [rabbitmq-discuss] RabbitMQ couldn't recover after the free
 disk space went below the default threshold limit
In-Reply-To: <DB14E94115BBC84E8960C12C176D06760178F80EDA@MX25A.corp.emc.com>
References: <DB14E94115BBC84E8960C12C176D06760178F80EDA@MX25A.corp.emc.com>
Message-ID: <52DFE313.4000405@rabbitmq.com>

It looks like two hours after you went under the disk space limit, you 
actually ran out of space. RabbitMQ will in general not handle 
out-of-space very well (which is why the limit is there).

While the disk space alarm will try to stop RabbitMQ from using any more 
disk by blocking publishing, there is nothing to stop other applications 
continuing to eat disk space until you run out. The disk space alarm 
will not guarantee you will not run out of disk space.

Furthermore, before version 3.2.0 RabbitMQ could decide to page 
transient messages out to disk even after the disk alarm went off. In 
3.2.0 and later RabbitMQ will ignore memory pressure when the disk alarm 
is active.

You quite possibly want to increase the default disk limit on production 
boxes, or monitor disk space externally to RabbitMQ.

Cheers, Simon

On 22/01/14 15:13, Jain, Punit wrote:
> Hi All,
>
> We are using RabbitMQ 3.1.3. It was running fine, but recently it
> couldn?t recover itself after the free disk space went below the
> threshold limit. We didn?t modify the default threshold. I have appended
> few excerpts from the logs, which I thought are relevant; let me know if
> you need any other information or logs.
>
> Thanks in Advance!
>
> Punit
>
> =INFO REPORT==== 18-Jan-2014::11:29:38 ===
>
> accepting AMQP connection <0.6291.2> (127.0.0.1:8198 -> 127.0.0.1:5672)
>
> =INFO REPORT==== 18-Jan-2014::11:29:52 ===
>
> Disk free space insufficient. Free bytes:994299904 Limit:1000000000
>
> =WARNING REPORT==== 18-Jan-2014::11:29:52 ===
>
> disk resource limit alarm set on node rabbit at localhost.
>
> **********************************************************
>
> *** Publishers will be blocked until this alarm clears ***
>
> **********************************************************
>
> =WARNING REPORT==== 18-Jan-2014::11:30:10 ===
>
> closing AMQP connection <0.6280.2> (127.0.0.1:8181 -> 127.0.0.1:5672):
>
> connection_closed_abruptly
>
> =ERROR REPORT==== 18-Jan-2014::14:38:54 ===
>
> ** Generic server mnesia_sync terminating
>
> ** Last message in was timeout
>
> ** When Server state == {state,[{<0.1100.2>,#Ref<0.0.16.193586>}],true}
>
> ** Reason for termination ==
>
> **
> {{badmatch,{error,{file_error,"/var/lib/rabbitmq/mnesia/rabbit at localhost/LATEST.LOG",
>
>                                   enospc}}},
>
>      [{mnesia_sync,handle_info,2,[]},
>
>       {gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,607}]},
>
>       {proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,227}]}]}
>
> =ERROR REPORT==== 18-Jan-2014::14:38:54 ===
>
> webmachine error:
> path="/api/parameters/federation-upstream/%2f/LocalDir_Upstream"
>
> {error,
>
>      {exit,
>
>          {{{badmatch,
>
>                {error,
>
>                    {file_error,
>
>
> "/var/lib/rabbitmq/mnesia/rabbit at localhost/LATEST.LOG",
>
>                        enospc}}},
>
>            [{mnesia_sync,handle_info,2,[]},
>
>             {gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,607}]},
>
>
> {proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,227}]}]},
>
>           {gen_server,call,[mnesia_sync,sync,infinity]}},
>
>          [{gen_server,call,3,[{file,"gen_server.erl"},{line,188}]},
>
>           {rabbit_misc,execute_mnesia_transaction,1,[]},
>
>           {rabbit_runtime_parameters,set_any0,4,[]},
>
>           {rabbit_runtime_parameters,set_any,4,[]},
>
>           {rabbit_mgmt_wm_parameter,'-accept_content/2-fun-0-',5,[]},
>
>           {rabbit_mgmt_util,with_decode,5,[]},
>
>           {webmachine_resource,resource_call,3,[]},
>
>           {webmachine_resource,do,3,[]}]}}
>
> =WARNING REPORT==== 18-Jan-2014::14:38:54 ===
>
> Connection (<0.7261.2>) closing: internal error in channel (<0.7268.2>):
> shutdown
>
> =WARNING REPORT==== 18-Jan-2014::14:38:54 ===
>
> Connection (<0.7318.2>) closing: internal error in channel (<0.7344.2>):
> shutdown
>
> =WARNING REPORT==== 18-Jan-2014::14:38:54 ===
>
> Connection (<0.7310.2>) closing: internal error in channel (<0.7335.2>):
> shutdown
>
> =WARNING REPORT==== 18-Jan-2014::14:38:54 ===
>
> Connection (<0.7328.2>) closing: internal error in channel (<0.7353.2>):
> shutdown
>
> =INFO REPORT==== 18-Jan-2014::14:38:54 ===
>
> stopped TCP Listener on [::]:5672
>
> =WARNING REPORT==== 18-Jan-2014::14:38:54 ===
>
> Connection (<0.7305.2>) closing: internal error in channel (<0.7323.2>):
> shutdown
>
> =ERROR REPORT==== 18-Jan-2014::14:38:54 ===
>
> AMQP connection <0.20548.1> (blocking), channel 1 - error:
>
> shutdown
>
> =WARNING REPORT==== 18-Jan-2014::14:38:54 ===
>
> Non-AMQP exit reason 'shutdown'
>
> =ERROR REPORT==== 18-Jan-2014::14:38:54 ===
>
> AMQP connection <0.11369.2> (blocked), channel 3 - error:
>
> shutdown
>
> =WARNING REPORT==== 18-Jan-2014::14:38:54 ===
>
> Non-AMQP exit reason 'shutdown'
>
> =ERROR REPORT==== 18-Jan-2014::14:38:54 ===
>
> AMQP connection <0.6437.2> (blocked), channel 3 - error:
>
> shutdown
>
> =WARNING REPORT==== 18-Jan-2014::14:38:54 ===
>
> Non-AMQP exit reason 'shutdown'
>
> =ERROR REPORT==== 18-Jan-2014::14:38:54 ===
>
> closing AMQP connection <0.6437.2> (127.0.0.1:8950 -> 127.0.0.1:5672):
>
> {inet_error,enotconn}
>
> =ERROR REPORT==== 18-Jan-2014::14:38:54 ===
>
> ** Generic server msg_store_persistent terminating
>
> ** Last message in was {'EXIT',<0.166.0>,shutdown}
>
> ** When Server state == {msstate,
>
>
> "/var/lib/rabbitmq/mnesia/rabbit at localhost/msg_store_persistent",
>
>                              rabbit_msg_store_ets_index,
>
>                              {state,241739,
>
>
> "/var/lib/rabbitmq/mnesia/rabbit at localhost/msg_store_persistent"},
>
>                              0,#Ref<0.0.0.1083>,
>
>                              {dict,0,16,16,8,80,48,
>
>
> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>
>                                   []},
>
>
> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>
>                                    [],[]}}},
>
>                              undefined,657,7536,[],<0.229.0>,245836,237642,
>
>                              249933,254030,
>
>                              {set,0,16,16,8,80,48,
>
>
> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>
>                                   []},
>
>
> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>
>                                    [],[]}}},
>
>                              {dict,4,16,16,8,80,48,
>
>
> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>
>                                   []},
>
>                                  {{[],[],[],[],[],[],[],
>
>
> [[<<47,239,116,176,238,253,171,103,27,228,
>
>                                        101,97,202,108,131,196>>|
>
>                                      {<0.233.0>,
>
>
> #Fun<rabbit_variable_queue.1.98519756>,
>
>
> #Fun<rabbit_variable_queue.13.110761503>}]],
>
>                                    [],
>
>
> [[<<245,14,237,152,23,39,217,67,22,170,155,
>
>                                        57,40,30,29,108>>|
>
>                                      {<0.234.0>,
>
>
> #Fun<rabbit_variable_queue.1.98519756>,
>
>
> #Fun<rabbit_variable_queue.13.110761503>}]],
>
>
> [[<<3,56,140,195,127,215,175,32,168,21,13,
>
>                                        192,178,56,76,211>>|
>
>                                      {<0.4047.0>,
>
>
> #Fun<rabbit_variable_queue.1.98519756>,
>
>
> #Fun<rabbit_variable_queue.13.110761503>}]],
>
>                                   [[<<71,36,220,167,246,169,123,248,249,183,
>
>                                        209,118,140,198,38,8>>|
>
>                                      {<0.4010.0>,
>
>
> #Fun<rabbit_variable_queue.1.98519756>,
>
>
> #Fun<rabbit_variable_queue.13.110761503>}]],
>
>                                    [],[],[],[]}}},
>
>                              false,16777216,
>
>                              {dict,0,16,16,8,80,48,
>
>
>             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>
>                                   []},
>
>
> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>
>                                    [],[]}}}}
>
> ** Reason for termination ==
>
> **
> {{badmatch,{error,{file_error,"/var/lib/rabbitmq/mnesia/rabbit at localhost/msg_store_persistent/file_summary.ets",
>
>                                   enospc}}},
>
>      [{rabbit_msg_store,store_file_summary,2,[]},
>
>       {rabbit_msg_store,terminate,2,[]},
>
>       {gen_server2,terminate,3,[]},
>
>       {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,237}]}]}
>
> ** In 'terminate' callback with reason ==
>
> ** shutdown
>
> =ERROR REPORT==== 18-Jan-2014::14:38:58 ===
>
> ** Generic server rabbit_mgmt_external_stats terminating
>
> ** Last message in was emit_update
>
> ** When Server state == {state,1024}
>
> ** Reason for termination ==
>
> ** {noproc,{gen_server,call,[rabbit_node_monitor,partitions,infinity]}}
>
> =ERROR REPORT==== 18-Jan-2014::14:38:59 ===
>
> webmachine error:
> path="/api/parameters/federation-upstream/%2f/LocalDir_Upstream"
>
> {error,{error,badarg,
>
>                [{ets,lookup,
>
>                      [rabbit_registry,
>
>                       {runtime_parameter,'federation-upstream'}],
>
>                      []},
>
>                 {rabbit_registry,lookup_module,2,[]},
>
>                 {rabbit_runtime_parameters,lookup_component,1,[]},
>
>                 {rabbit_runtime_parameters,set_any0,4,[]},
>
>                 {rabbit_runtime_parameters,set_any,4,[]},
>
>                 {rabbit_mgmt_wm_parameter,'-accept_content/2-fun-0-',5,[]},
>
>                 {rabbit_mgmt_util,with_decode,5,[]},
>
>                 {webmachine_resource,resource_call,3,[]}]}}
>
> =INFO REPORT==== 18-Jan-2014::15:20:52 ===
>
> Error description:
>
>
> {error,{could_not_write_file,"/var/lib/rabbitmq/mnesia/rabbit at localhost/cluster_nodes.config",
>
>                                  enospc}}
>
> Log files (may contain more information):
>
>     /var/log/rabbitmq/rabbit at localhost.log
>
>     /var/log/rabbitmq/rabbit at localhost-sasl.log
>
> Stack trace:
>
>     [{rabbit_node_monitor,write_cluster_status,1,[]},
>
>      {rabbit_node_monitor,prepare_cluster_status_files,0,[]},
>
>      {rabbit,'-boot/0-fun-1-',0,[]},
>
>      {rabbit,start_it,1,[]},
>
>      {init,start_it,1,[]},
>
>      {init,start_em,1,[]}]
>
> =INFO REPORT==== 18-Jan-2014::15:32:08 ===
>
> Error description:
>
>     {error,corrupt_cluster_status_files,[]}
>
> Log files (may contain more information):
>
>     /var/log/rabbitmq/rabbit at localhost.log
>
>     /var/log/rabbitmq/rabbit at localhost-sasl.log
>
> Stack trace:
>
>     [{rabbit_node_monitor,'-prepare_cluster_status_files/0-fun-0-',1,[]},
>
>      {rabbit_node_monitor,prepare_cluster_status_files,0,[]},
>
>      {rabbit,'-boot/0-fun-1-',0,[]},
>
>      {rabbit,start_it,1,[]},
>
>      {init,start_it,1,[]},
>
>      {init,start_em,1,[]}]
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Wed Jan 22 15:28:33 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 22 Jan 2014 15:28:33 +0000
Subject: [rabbitmq-discuss] Bug w/ Federated Queue's & Clustering
In-Reply-To: <52DFE26D.2050306@one.com>
References: <52DF3680.4080506@one.com> <52DF9B3E.3040000@rabbitmq.com>
 <52DFE26D.2050306@one.com>
Message-ID: <52DFE3A1.3030502@rabbitmq.com>

On 22/01/14 15:23, Josh West wrote:
> Hi Simon,
>
> Sure thing.  I've posted the log to a github gist:
> https://gist.github.com/jwestboston/8560559
>
> If you need anything else, let me know.

Thanks. That looks like enough to be getting on with.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Wed Jan 22 16:26:53 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 22 Jan 2014 16:26:53 +0000
Subject: [rabbitmq-discuss] Bug w/ Federated Queue's & Clustering
In-Reply-To: <52DF3680.4080506@one.com>
References: <52DF3680.4080506@one.com>
Message-ID: <52DFF14D.9050503@rabbitmq.com>

On 22/01/14 03:09, Josh West wrote:
> I've seen mentions on the list that this was an issue with clusters and
> durable queues, but fixed in 3.2.1.  Perhaps it is still an issue?  Or
> still an issue just when federation is involved?

There was a bug introduced in 3.2.0 and fixed in 3.2.1 which caused 
mirrored queues with more than one slave to be quite unreliable; that's 
probably what you've seen mention of. But this is a previously 
unreported bug where mirroring and federation of queues interact badly. 
It will be fixed soon.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From jsw at one.com  Wed Jan 22 17:00:33 2014
From: jsw at one.com (Josh West)
Date: Wed, 22 Jan 2014 12:00:33 -0500
Subject: [rabbitmq-discuss] Bug w/ Federated Queue's & Clustering
In-Reply-To: <52DFF14D.9050503@rabbitmq.com>
References: <52DF3680.4080506@one.com> <52DFF14D.9050503@rabbitmq.com>
Message-ID: <52DFF931.1070309@one.com>

On 01/22/2014 11:26 AM, Simon MacMullen wrote:
> There was a bug introduced in 3.2.0 and fixed in 3.2.1 which caused 
> mirrored queues with more than one slave to be quite unreliable; 
> that's probably what you've seen mention of. But this is a previously 
> unreported bug where mirroring and federation of queues interact 
> badly. It will be fixed soon.
>
> Cheers, Simon
>

That's great news.  I take it you've identified the cause of the problem?

Looking forward to testing patches or a nightly build.

Thanks again.

--
Josh West
One.com - http://www.one.com



From DBrown at theladders.com  Wed Jan 22 19:45:57 2014
From: DBrown at theladders.com (Derek Brown)
Date: Wed, 22 Jan 2014 19:45:57 +0000
Subject: [rabbitmq-discuss] Looking for tips on upgrading from RMQ 2.x to 3.x
Message-ID: <CF058A25.1683C%dbrown@theladders.com>

I'm looking for tips or documentation on code changes necessary to upgrade from 2.x to 3.x, for producers or consumers.

Assume that the 3.x cluster is already up and running, and the code can point to it.

Also, that data doesn't need to be copied across. Should there be any problem with creating connections to an older 2.x cluster as well as 3.x, in the same application?

Did the API change between versions? As seen in the examples at http://www.rabbitmq.com/api-guide.html

Thanks for any pointers,
Derek

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/83e2098a/attachment.html>

From enzo.mdd.alt at gmail.com  Wed Jan 22 16:59:00 2014
From: enzo.mdd.alt at gmail.com (Johnny Five)
Date: Wed, 22 Jan 2014 08:59:00 -0800 (PST)
Subject: [rabbitmq-discuss] Best practices for starting/managing consumer
	processes, PHP/Linux
Message-ID: <f8a2cfe1-e290-4a55-b868-ff4c4e039777@googlegroups.com>

Hello,

Is there any way to define default consumer processes in a portable way?

Im using message queues for background processing but Im not responsible 
for the operation, only the development of the application.

Are there any tools that work along side RabbitMQ on Linux that would allow 
me to define exactly what consumers should be running for the application 
to be functional, or is this typically done with custom shell scripts etc?

Thanks,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/3fcf428b/attachment.html>

From bheiskell at factset.com  Wed Jan 22 17:02:24 2014
From: bheiskell at factset.com (Ben J. Heiskell)
Date: Wed, 22 Jan 2014 17:02:24 +0000
Subject: [rabbitmq-discuss] Http Management Plugin: statistics_db_node
	not_running
Message-ID: <7EF99EFD88F4A94CB5378840A8A5B8AC500615AB@EXCHMBOXA01.pc.factset.com>

Hello,

I've experienced an issue that is very similar to the following two threads:

http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2013-July/028437.html 
http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-January/010859.html

I'm posting here partially looking for an explanation and partially to document how I "fixed" it. On Saturday, one of my boxes crashed due to a disk failure. The failed node rebooted and rejoined the cluster without any manual intervention. Before the node came back online, a script which gathers statistics from the HTTP API began to error, and it continued to error after the node rejoined. The formatted JSON from the /api/overview resource can be found here: https://gist.github.com/anonymous/fe81ff0e890d26b220e6

I believe the point of interest is "statistics_db_node":"not_running". I resolved the problem by issuing stop_app / start_app for four out of the five nodes, checking the api after each restart.

I'm guessing that through sheer bad luck, the node which crashed was the active statistics_db_node. What I don't understand is why I had to manually intervene to get the statistics db back online. Is this a bug? What is the expected behavior here?

Thanks!
Ben

Additional notes:

- When visiting the management plugin from a browser, the overview tab displays the error message: "TypeError: Cannot read property 'connections' of undefined". Additionally, the connections and channels tabs are both empty. Exchanges and Queues are populated as expected, but the statistics related columns (rates and counts) are all empty. Clicking on an exchange results errors with "ReferenceError: exchange is not defined". Clicking on a queue errors with "TypeError: Cannot read property 'ram_msg_count' of undefined".

- Everything aside from the management API appears to have continued to work correctly.

- I'm running a five node cluster on version 3.2.2 in pause_minority mode.

- I have experienced the same web-client issue on 3.1.1 under different circumstances.

- I found the following message in the crashed host's logs, which repeated once for every host in the cluster:

=ERROR REPORT==== 18-Jan-2014::17:59:26 ===
Mnesia(rabbit at rabbitmq04): ** ERROR ** mnesia_event got {inconsistent_database, starting_partitioned_network, rabbit at rabbitmq05}

From blemasle at allocine.fr  Wed Jan 22 17:07:56 2014
From: blemasle at allocine.fr (Bertrand LEMASLE)
Date: Wed, 22 Jan 2014 18:07:56 +0100
Subject: [rabbitmq-discuss] Publisher confirms always wait for consumer
	ack/nack
Message-ID: <CA+6GtrDtS6jLj7y778TuLEHSbb6_WKW4+57Wctmfg-=O3v75Lg@mail.gmail.com>

Hi,

After reading many docs and mails on this subject (
http://www.rabbitmq.com/confirms.html included which explains when a
message will be confirmed), I still haven't found an answer to my question.
When using publisher confirm (by using confirmSelect on the channel),
messages aren't ack until they are either ack or nack by at least one
consumer.

I've created a rather simple consumer that wait for 10 seconds then ack the
message and noticed that the publisher ack arrives only once the consumer
acked the message. By the meantime, shouldn't the message be persisted to
the disk and so, the publisher ack be sent back ?

Using :
 * RabbitMQ 3.2.2 on Erlang R16B
 * .Net client 3.2.1

Here is the basic code I'm using to publish my message :

IBasicProperties properties = Channel.CreateBasicProperties();
properties.MessageId = Guid.NewGuid().ToString();
properties.DeliveryMode = 2; //persistent

Channel.BasicPublish(Exchange, routingKey, true, properties, message);
published = Channel.WaitForConfirms(TimeSpan.FromSeconds(timeout), out
timedout) && !timedout;

For those who aren't familiar with the .Net client, the "true" argument on
BasicPublish set the mandatory flag.

With my 10 seconds waiting consumer, published is always false as long as
the timeout is less than those 10 seconds...

What am I doing wrong ? Any help would be deeply appreciated !

Cheers
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/a7aa4e91/attachment.html>

From simon at rabbitmq.com  Wed Jan 22 19:52:37 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 22 Jan 2014 19:52:37 +0000
Subject: [rabbitmq-discuss] Looking for tips on upgrading from RMQ 2.x
 to 3.x
In-Reply-To: <CF058A25.1683C%dbrown@theladders.com>
References: <CF058A25.1683C%dbrown@theladders.com>
Message-ID: <52E02185.1070306@rabbitmq.com>

See 
http://www.rabbitmq.com/blog/2012/11/19/breaking-things-with-rabbitmq-3-0/

(Hopefully not too big a deal...)

Cheers, Simon

On 22/01/2014 19:45, Derek Brown wrote:
> I'm looking for tips or documentation on code changes necessary to
> upgrade from 2.x to 3.x, for producers or consumers.
>
> Assume that the 3.x cluster is already up and running, and the code can
> point to it.
>
> Also, that data doesn't need to be copied across. Should there be any
> problem with creating connections to an older 2.x cluster as well as
> 3.x, in the same application?
>
> Did the API change between versions? As seen in the examples at
> http://www.rabbitmq.com/api-guide.html
>
> Thanks for any pointers,
> Derek
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


From videlalvaro at gmail.com  Wed Jan 22 19:54:15 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Wed, 22 Jan 2014 20:54:15 +0100
Subject: [rabbitmq-discuss] Best practices for starting/managing
 consumer processes, PHP/Linux
In-Reply-To: <f8a2cfe1-e290-4a55-b868-ff4c4e039777@googlegroups.com>
References: <f8a2cfe1-e290-4a55-b868-ff4c4e039777@googlegroups.com>
Message-ID: <CAMcAHLVF7-b8oJcLayWgo_tF+N==q26YW+rDX7tbNoDV2iUPyQ@mail.gmail.com>

Hi,

I know in the PHP community people is using this tool to manage
consumers: http://supervisord.org/

NOTE: I have never used it. So don't take my word on it. Try for yourself.

Regards,

Alvaro


On Wed, Jan 22, 2014 at 5:59 PM, Johnny Five <enzo.mdd.alt at gmail.com> wrote:
> Hello,
>
> Is there any way to define default consumer processes in a portable way?
>
> Im using message queues for background processing but Im not responsible for
> the operation, only the development of the application.
>
> Are there any tools that work along side RabbitMQ on Linux that would allow
> me to define exactly what consumers should be running for the application to
> be functional, or is this typically done with custom shell scripts etc?
>
> Thanks,
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From jkuch at gopivotal.com  Wed Jan 22 19:59:08 2014
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Wed, 22 Jan 2014 11:59:08 -0800
Subject: [rabbitmq-discuss] a lot of unacked messages "in the flight"
In-Reply-To: <9879c554-2150-43cf-88d6-67058f42c5ce@googlegroups.com>
References: <9879c554-2150-43cf-88d6-67058f42c5ce@googlegroups.com>
Message-ID: <CANOx8N=P27AW4bqEr3zMFKt4FeeMQ+vVG_V48=Ya48i8G9DBfw@mail.gmail.com>

On Tue, Jan 21, 2014 at 1:06 PM, Kane Kim <kane.isturm at gmail.com> wrote:

> Is it ok to have many unacked messages in rabbitmq (millions)?
>

The real answer is "it depends" but be mindful and understand what it means
and what it depends on.

 A message in the unacked state has been delivered to a consumer, but the
broker is still maintaining knowledge of it.  That way, if the consumer
crashes, and its channel closes, without having sent an ACK, the broker
knows to re-queue the message for another delivery attempt.  It does this,
because, in the absence of the consumer's ACK, it has no way of knowing the
consumer got any useful work done with the consumed message before it
perished.

Messages languishing on the broker in the 'unacked' state consume
resources.  At the very least memory.  If they were published with
persistence requested, or if the broker has paged them to disk under memory
pressure, they will also consume disk space.  Finally, there's some small
in memory indexing overhead associated with each message as well.

If you let messages build up too long you can get into trouble as your
broker runs low on memory or disk resources.  The broker will try to pause
publishers to avoid being swamped, but you're still best managing your
application in a way that such conditions don't exist for long periods.

If you have *millions* of un-acked messages in queues, I would start to
wonder if perhaps your consumers are getting their work done and failing to
ACK.  Or perhaps they're working properly and obeying proper ACK
discipline, but incoming work is arriving at a rate that outpaces them.  In
that case you'd be wise to add more consumers....

A good general mantra:  "A Happy Rabbit is an Empty" rabbit.  Message
brokers will hold messages to buffer against transient spikes in traffic,
but they're not intended to be long term stores of persistent data, and
shouldn't be treated as such.  If you have a lot of messages piling up in
the broker, look at your producer arrival and consumer exit situations to
understand what's happening.  It's often a sign that either the ambient
conditions of your system have changed (e.g. a flood of new demand due to a
surge in work) or something has crashed or backed up...

Knowing the expected and usual queue sizes and whatnot, learned by
experience and observation of your system, is a good practice in
operationalizing this sort of stuff.

Best regards,
Jerry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/0b8f0174/attachment.html>

From daniel.bason at telogis.com  Wed Jan 22 21:13:31 2014
From: daniel.bason at telogis.com (Dan_b)
Date: Wed, 22 Jan 2014 13:13:31 -0800 (PST)
Subject: [rabbitmq-discuss] Rabbitmq crashing every 90 minutes
Message-ID: <1390425211324-32798.post@n5.nabble.com>

Hi,

For the last 6 hours one of our rabbitmq instances has been crashing every
90 minutes with the ram usage spiking up after the crash.  Restarting rabbit
fixes the issue but then it is another 90 minutes and it crashes again.  I
have tried resetting the rabbit instance completely (renaming the
/var/lib/rabbitmq/mnesia database and letting it be recreated) and am
waiting to see if this has resolved the issue.  It would be nice if we would
work out what caused this though.

Rabbitmq status is as follows:
 {running_applications,[{rabbit,"RabbitMQ","3.1.5"},
                        {ssl,"Erlang/OTP SSL application","4.1.6"},
                        {public_key,"Public key infrastructure","0.13"},
                        {crypto,"CRYPTO version 2","2.0.4"},
                        {asn1,"The Erlang ASN1 compiler version 1.6.18",
                              "1.6.18"},
                        {mnesia,"MNESIA  CXC 138 12","4.5"},
                        {os_mon,"CPO  CXC 138 46","2.2.7"},
                        {xmerl,"XML parser","1.2.10"},
                        {sasl,"SASL  CXC 138 11","2.1.10"},
                        {stdlib,"ERTS  CXC 138 10","1.17.5"},
                        {kernel,"ERTS  CXC 138 10","2.14.5"}]},
 {os,{unix,linux}},
 {erlang_version,"Erlang R14B04 (erts-5.8.5) [source] [64-bit] [smp:4:4]
[rq:4] [async-threads:30] [kernel-poll:true]\n"},
 {memory,[{total,57151960},
          {connection_procs,4273224},
          {queue_procs,5370024},
          {plugins,0},
          {other_proc,9627768},
          {mnesia,182848},
          {mgmt_db,0},
          {msg_index,836424},
          {other_ets,1219792},
          {binary,17570544},
          {code,14611134},
          {atom,1362545},
          {other_system,2097657}]},
 {vm_memory_high_watermark,0.8},
 {vm_memory_limit,6871947673},
 {disk_free_limit,1000000000},
 {disk_free,10916909056},
 {file_descriptors,[{total_limit,924},
                    {total_used,66},
                    {sockets_limit,829},
                    {sockets_used,46}]},
 {processes,[{limit,1048576},{used,654}]},
 {run_queue,0},
 {uptime,2820}]
...done.

Output from the sasl log is:
=CRASH REPORT==== 22-Jan-2014::19:37:28 ===
  crasher:
    initial call: tcp_acceptor:init/1
    pid: <0.232.0>
    registered_name: []
    exception exit: {accept_failed,enfile}
      in function  gen_server:terminate/6
    ancestors: ['tcp_acceptor_sup_:::5672',<0.229.0>,rabbit_sup,<0.98.0>]
    messages: []
    links: [<0.230.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 24
    reductions: 1442919
  neighbours:

=SUPERVISOR REPORT==== 22-Jan-2014::19:37:28 ===
     Supervisor: {local,'tcp_acceptor_sup_:::5672'}
     Context:    child_terminated
     Reason:     {accept_failed,enfile}
     Offender:   [{pid,<0.232.0>},
                  {name,tcp_acceptor},
                  {mfargs,
                      {tcp_acceptor,start_link,
                          [{rabbit_networking,start_client,[]},
                           #Port<0.4998>]}},
                  {restart_type,transient},
                  {shutdown,brutal_kill},
                  {child_type,worker}]


=CRASH REPORT==== 22-Jan-2014::19:37:30 ===
  crasher:
    initial call: tcp_acceptor:init/1
    pid: <0.10514.3>
    registered_name: []
    exception exit: {accept_failed,enfile}
      in function  gen_server:terminate/6
    ancestors: ['tcp_acceptor_sup_:::5672',<0.229.0>,rabbit_sup,<0.98.0>]
    messages: []
    links: [<0.230.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 233
    stack_size: 24
    reductions: 148
  neighbours:

=SUPERVISOR REPORT==== 22-Jan-2014::19:37:30 ===
     Supervisor: {local,'tcp_acceptor_sup_:::5672'}
     Context:    child_terminated
     Reason:     {accept_failed,enfile}
     Offender:   [{pid,<0.10514.3>},
                  {name,tcp_acceptor},
                  {mfargs,
                      {tcp_acceptor,start_link,
                          [{rabbit_networking,start_client,[]},
                           #Port<0.4998>]}},
                  {restart_type,transient},
                  {shutdown,brutal_kill},
                  {child_type,worker}]


=CRASH REPORT==== 22-Jan-2014::19:37:31 ===
  crasher:
    initial call: tcp_acceptor:init/1
    pid: <0.10522.3>
    registered_name: []
    exception exit: {accept_failed,enfile}
      in function  gen_server:terminate/6
    ancestors: ['tcp_acceptor_sup_:::5672',<0.229.0>,rabbit_sup,<0.98.0>]
    messages: []
    links: [<0.230.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 233
    stack_size: 24
    reductions: 148
  neighbours:

=SUPERVISOR REPORT==== 22-Jan-2014::19:37:31 ===
     Supervisor: {local,'tcp_acceptor_sup_:::5672'}
     Context:    child_terminated
     Reason:     {accept_failed,enfile}
     Offender:   [{pid,<0.10522.3>},
                  {name,tcp_acceptor},
                  {mfargs,
                      {tcp_acceptor,start_link,
                          [{rabbit_networking,start_client,[]},
                           #Port<0.4998>]}},
                  {restart_type,transient},
                  {shutdown,brutal_kill},
                  {child_type,worker}]


=CRASH REPORT==== 22-Jan-2014::19:37:32 ===
  crasher:
    initial call: tcp_acceptor:init/1
    pid: <0.10523.3>
    registered_name: []
    exception exit: {accept_failed,enfile}
      in function  gen_server:terminate/6
    ancestors: ['tcp_acceptor_sup_:::5672',<0.229.0>,rabbit_sup,<0.98.0>]
    messages: []
    links: [<0.230.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 233
                 
=CRASH REPORT==== 22-Jan-2014::19:37:37 ===
  crasher:
    initial call: rabbit_disk_monitor:init/1
    pid: <0.156.0>
    registered_name: rabbit_disk_monitor
    exception exit: {system_limit,
                        [{erlang,open_port,
                             [{spawn,"/bin/sh -s unix:cmd 2>&1"},[stream]]},
                         {os,start_port_srv_handle,1},
                         {os,start_port_srv_loop,0}]}
      in function  gen_server:terminate/6
    ancestors: [rabbit_disk_monitor_sup,rabbit_sup,<0.98.0>]
    messages: []
    links: [<0.79.0>,<0.155.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 1597
    stack_size: 24
    reductions: 964775
  neighbours:

=SUPERVISOR REPORT==== 22-Jan-2014::19:37:37 ===
     Supervisor: {local,rabbit_disk_monitor_sup}
     Context:    child_terminated
     Reason:     {system_limit,
                     [{erlang,open_port,
                          [{spawn,"/bin/sh -s unix:cmd 2>&1"},[stream]]},
                      {os,start_port_srv_handle,1},
                      {os,start_port_srv_loop,0}]}
     Offender:   [{pid,<0.156.0>},
                  {name,rabbit_disk_monitor},
                  {mfargs,{rabbit_disk_monitor,start_link,[1000000000]}},
                  {restart_type,transient},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 22-Jan-2014::19:37:37 ===
  crasher:
    initial call: rabbit_disk_monitor:init/1
    pid: <0.10529.3>
    registered_name: []
    exception exit: {{badmatch,{error,system_limit}},
                     [{vm_memory_monitor,read_proc_file,1},
                      {vm_memory_monitor,get_total_memory,1},
                      {rabbit_disk_monitor,init,1},
                      {gen_server,init_it,6},
                      {proc_lib,init_p_do_apply,3}]}
      in function  gen_server:init_it/6
    ancestors: [rabbit_disk_monitor_sup,rabbit_sup,<0.98.0>]
    messages: []
    links: [<0.155.0>,<0.79.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 987
    stack_size: 24
    reductions: 482
  neighbours:

And so on.

I can compress and send the actual logs to someone if this will help.  We
also have the erlang crashdump from the issue.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Rabbitmq-crashing-every-90-minutes-tp32798.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From jkuch at gopivotal.com  Wed Jan 22 21:25:22 2014
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Wed, 22 Jan 2014 13:25:22 -0800
Subject: [rabbitmq-discuss] Publisher confirms always wait for consumer
	ack/nack
In-Reply-To: <CA+6GtrDtS6jLj7y778TuLEHSbb6_WKW4+57Wctmfg-=O3v75Lg@mail.gmail.com>
References: <CA+6GtrDtS6jLj7y778TuLEHSbb6_WKW4+57Wctmfg-=O3v75Lg@mail.gmail.com>
Message-ID: <CANOx8N=JtX6sEVm0uqPsZxMoUH1D7OiSxiPmeovYoaocT6uMgw@mail.gmail.com>

On Wed, Jan 22, 2014 at 9:07 AM, Bertrand LEMASLE <blemasle at allocine.fr>wrote:

>
> After reading many docs and mails on this subject (
> http://www.rabbitmq.com/confirms.html included which explains when a
> message will be confirmed), I still haven't found an answer to my question.
> When using publisher confirm (by using confirmSelect on the channel),
> messages aren't ack until they are either ack or nack by at least one
> consumer.
>

Totally unrelated.  The publisher confirm mechanism only goes so far as the
transfer of responsibility for a message's well being from the *publisher*
into the *broker*.

Receipt of a publisher confirm means the broker has accepted your message
and done what you asked of it, e.g. persisted it to disk, made sure it was
replicated to any applicable mirrored queues, etc.

Consumers consume from queues, and their AMQP Ack mechanism is analogous
to, in the sense of responsibility transfer, but *totally uncoupled from*
any publisher confirm happening on the inbound side.

If you really need round trip acknowledgment from producer -> broker ->
consumer -> back to producer, you need to build that into your messaging
workflow as, for example, our simple RPC over AMQP facility does.  You
might look at the tutorial examples using it, since they may directly fit
your intended use case.

Best regards,
Jerry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/c337887b/attachment.html>

From videlalvaro at gmail.com  Wed Jan 22 21:29:35 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Wed, 22 Jan 2014 22:29:35 +0100
Subject: [rabbitmq-discuss] Rabbitmq crashing every 90 minutes
In-Reply-To: <1390425211324-32798.post@n5.nabble.com>
References: <1390425211324-32798.post@n5.nabble.com>
Message-ID: <CAMcAHLW64v+-N_J-QPso9PTQpyOA+=3CaU0Xhp30rHPLvHCJug@mail.gmail.com>

Hi,

On Wed, Jan 22, 2014 at 10:13 PM, Dan_b <daniel.bason at telogis.com> wrote:
>  {file_descriptors,[{total_limit,924},
>                     {total_used,66},
>                     {sockets_limit,829},
>                     {sockets_used,46}]},

<snip>

> =SUPERVISOR REPORT==== 22-Jan-2014::19:37:28 ===
>      Supervisor: {local,'tcp_acceptor_sup_:::5672'}
>      Context:    child_terminated
>      Reason:     {accept_failed,enfile}

My understanding from this line is that your system is running out of
file descriptors.

The file_descriptors entry on your status tells that the limit seen by
RabbitMQ is 924. Maybe your ulimit settings are a bit low?

I think that is probably why you see this happening every 90 minutes.
Try raising that limit.

Regards,

Alvaro

From daniel.bason at telogis.com  Wed Jan 22 21:38:29 2014
From: daniel.bason at telogis.com (Daniel Bason)
Date: Thu, 23 Jan 2014 10:38:29 +1300
Subject: [rabbitmq-discuss] Rabbitmq crashing every 90 minutes
In-Reply-To: <CAMcAHLW64v+-N_J-QPso9PTQpyOA+=3CaU0Xhp30rHPLvHCJug@mail.gmail.com>
References: <1390425211324-32798.post@n5.nabble.com>
 <CAMcAHLW64v+-N_J-QPso9PTQpyOA+=3CaU0Xhp30rHPLvHCJug@mail.gmail.com>
Message-ID: <CAHdxdCcE6N1zFmwNQ2eLx9b3JedvnreLdRFX5YKWBFBxbFMFGA@mail.gmail.com>

Thanks Alvaro,

I have raised the limits now to 4096.  I'm not sure why this started
becoming an issue now after 6 months of stability, but we'll try it out.

Regards
Dan


On Thu, Jan 23, 2014 at 10:29 AM, Alvaro Videla <videlalvaro at gmail.com>wrote:

> Hi,
>
> On Wed, Jan 22, 2014 at 10:13 PM, Dan_b <daniel.bason at telogis.com> wrote:
> >  {file_descriptors,[{total_limit,924},
> >                     {total_used,66},
> >                     {sockets_limit,829},
> >                     {sockets_used,46}]},
>
> <snip>
>
> > =SUPERVISOR REPORT==== 22-Jan-2014::19:37:28 ===
> >      Supervisor: {local,'tcp_acceptor_sup_:::5672'}
> >      Context:    child_terminated
> >      Reason:     {accept_failed,enfile}
>
> My understanding from this line is that your system is running out of
> file descriptors.
>
> The file_descriptors entry on your status tells that the limit seen by
> RabbitMQ is 924. Maybe your ulimit settings are a bit low?
>
> I think that is probably why you see this happening every 90 minutes.
> Try raising that limit.
>
> Regards,
>
> Alvaro
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>



-- 
*Dan Bason *
Infrastructure Engineer ? Telogis
www.telogis.com  www.telogis.co.nz
+1 201 477-1448 (USA)  +64 3 281-8065 (NZ)

<http://www.google.com/url?q=http%3A%2F%2Fwww.telogis.com%2F&sa=D&sntz=1&usg=AFrqEze6z4qIWKcAMjgXqM25xkuw9JMysQ>

*One Platform for Location Intelligence*

-- 


This e-mail, and any attachments, is intended only for use by the 
addressee(s) named herein and may contain legally privileged and/or 
confidential information.  It is the property of Telogis.  If you are not 
the intended recipient of this e-mail, you are hereby notified that any 
dissemination, distribution or copying of this e-mail, any attachments 
thereto, and use of the information contained, is strictly prohibited.  If 
you have received this e-mail in error, please notify the sender and 
permanently delete the original and any copy thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/408e6224/attachment.html>

From matthias at rabbitmq.com  Wed Jan 22 21:54:12 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 22 Jan 2014 21:54:12 +0000
Subject: [rabbitmq-discuss] Rabbitmq crashing every 90 minutes
In-Reply-To: <CAHdxdCcE6N1zFmwNQ2eLx9b3JedvnreLdRFX5YKWBFBxbFMFGA@mail.gmail.com>
References: <1390425211324-32798.post@n5.nabble.com>
 <CAMcAHLW64v+-N_J-QPso9PTQpyOA+=3CaU0Xhp30rHPLvHCJug@mail.gmail.com>
 <CAHdxdCcE6N1zFmwNQ2eLx9b3JedvnreLdRFX5YKWBFBxbFMFGA@mail.gmail.com>
Message-ID: <52E03E04.4090006@rabbitmq.com>

On 22/01/14 21:38, Daniel Bason wrote:
> I have raised the limits now to 4096.  I'm not sure why this started
> becoming an issue now after 6 months of stability, but we'll try it out.

It would be good to get a status report after 90 minutes, to see what 
the file descriptor situation looks like then.

It is quite unusual for rabbit to actually die due to insufficient FDs; 
normally it will just refuse to accept more connections.

I do notice that you are running quite an old Erlang. Definitely worth 
upgrading.

Matthias.

From daniel.bason at telogis.com  Wed Jan 22 22:27:07 2014
From: daniel.bason at telogis.com (Daniel Bason)
Date: Thu, 23 Jan 2014 11:27:07 +1300
Subject: [rabbitmq-discuss] Rabbitmq crashing every 90 minutes
In-Reply-To: <52E03E04.4090006@rabbitmq.com>
References: <1390425211324-32798.post@n5.nabble.com>
 <CAMcAHLW64v+-N_J-QPso9PTQpyOA+=3CaU0Xhp30rHPLvHCJug@mail.gmail.com>
 <CAHdxdCcE6N1zFmwNQ2eLx9b3JedvnreLdRFX5YKWBFBxbFMFGA@mail.gmail.com>
 <52E03E04.4090006@rabbitmq.com>
Message-ID: <CAHdxdCdSBGPYAOuabh2OiA3uPXpeROGnu9v=LbVbQPCemKHfZg@mail.gmail.com>

For the meantime I have left the FD as they are.  After renaming the mnesia
database the server has been running for the last two hours with no issues,
but that could also be that I rebooted the machine earlier as well, and
 there may be a FD leak somewhere.

I also found the following error in the rabbit log as part of the crashes;
not sure if this relates to FDs:


=ERROR REPORT==== 22-Jan-2014::14:54:02 ===
** Generic server <0.197.0> terminating
** Last message in was {'$gen_cast',{combine,29089,29088}}
** When Server state == {state,
                            {dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                 []},
                                {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                  [],[]}}},
                            [],
                            {gc_state,
                                "/var/lib/rabbitmq/mnesia/rabbit at queue1
/msg_store_persistent",
                                rabbit_msg_store_ets_index,
                                {state,233541,
                                    "/var/lib/rabbitmq/mnesia/rabbit at queue1
/msg_store_persistent"},
                                229444,237638,<0.194.0>}}
** Reason for termination ==
** {{badmatch,{error,system_limit}},
    [{rabbit_msg_store,combine_files,3},
     {rabbit_msg_store_gc,attempt_action,3},
     {rabbit_msg_store_gc,handle_cast,2},
     {gen_server2,handle_msg,2},
     {proc_lib,wake_up,3}]}

=ERROR REPORT==== 22-Jan-2014::14:54:02 ===
** Generic server msg_store_persistent terminating
** Last message in was {'EXIT',<0.197.0>,
                               {{badmatch,{error,system_limit}},
                                [{rabbit_msg_store,combine_files,3},
                                 {rabbit_msg_store_gc,attempt_action,3},
                                 {rabbit_msg_store_gc,handle_cast,2},
                                 {gen_server2,handle_msg,2},
                                 {proc_lib,wake_up,3}]}}
** When Server state == {msstate,
                            "/var/lib/rabbitmq/mnesia/rabbit at queue1
/msg_store_persistent",
                            rabbit_msg_store_ets_index,



On Thu, Jan 23, 2014 at 10:54 AM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> On 22/01/14 21:38, Daniel Bason wrote:
>
>> I have raised the limits now to 4096.  I'm not sure why this started
>> becoming an issue now after 6 months of stability, but we'll try it out.
>>
>
> It would be good to get a status report after 90 minutes, to see what the
> file descriptor situation looks like then.
>
> It is quite unusual for rabbit to actually die due to insufficient FDs;
> normally it will just refuse to accept more connections.
>
> I do notice that you are running quite an old Erlang. Definitely worth
> upgrading.
>
> Matthias.
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>



-- 
*Dan Bason *
Infrastructure Engineer ? Telogis
www.telogis.com  www.telogis.co.nz
+1 201 477-1448 (USA)  +64 3 281-8065 (NZ)

<http://www.google.com/url?q=http%3A%2F%2Fwww.telogis.com%2F&sa=D&sntz=1&usg=AFrqEze6z4qIWKcAMjgXqM25xkuw9JMysQ>

*One Platform for Location Intelligence*

-- 


This e-mail, and any attachments, is intended only for use by the 
addressee(s) named herein and may contain legally privileged and/or 
confidential information.  It is the property of Telogis.  If you are not 
the intended recipient of this e-mail, you are hereby notified that any 
dissemination, distribution or copying of this e-mail, any attachments 
thereto, and use of the information contained, is strictly prohibited.  If 
you have received this e-mail in error, please notify the sender and 
permanently delete the original and any copy thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/eed0a2f8/attachment.html>

From anahi.hojnadel at gmail.com  Wed Jan 22 20:51:44 2014
From: anahi.hojnadel at gmail.com (Anahi Hojnadel)
Date: Wed, 22 Jan 2014 12:51:44 -0800 (PST)
Subject: [rabbitmq-discuss] Low performance when there are many messages in
 ready or unacked state
Message-ID: <f675da02-eb67-4a54-b12c-aee889b52eff@googlegroups.com>

Hi guys!

We have an application that has a publisher which sends messages to a 
consumer which process those messages and then stores them in the DB. 
Everything is working fine up to now, but the number of messages we're 
receiving is getting bigger and performance is quite bad. We started to 
analize where the bottleneck was and it seems to be in rabbit queues.

I've been reading many posts in Rabbit's blog about optimization but I 
couldn't find how to solve the problem.

The main problem is that we're publishing messages faster than we can 
consume them. When the number of messages in ready state (or in unacked 
state) increases, the deliver ratio decrease considerably.

I've tried adding more consumers, sending messages more slowly (with time 
sleep)... without luck.

I've seen that sending an ack for each message make things slower but we 
actually need to ensure they're delivered. Our current ack ratio is too 
low, so every time the number of unacked messages increases, the deliver 
ratio decreases.

Do you have any ideas of what could I try to improve our process 
performance? Or should I just make sure not to send more messages than my 
current ack ratio? Is stacking acks and sending them in batches a safe 
strategy to try out?

Adding more queues is not an option since it will add too much complexity 
to our app.

Thanks!!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/ca23af3f/attachment.html>

From videlalvaro at gmail.com  Wed Jan 22 22:46:28 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Wed, 22 Jan 2014 23:46:28 +0100
Subject: [rabbitmq-discuss] Low performance when there are many messages
 in ready or unacked state
In-Reply-To: <f675da02-eb67-4a54-b12c-aee889b52eff@googlegroups.com>
References: <f675da02-eb67-4a54-b12c-aee889b52eff@googlegroups.com>
Message-ID: <CAMcAHLXfs4o-KkCoF=cWerw2upt2xqsN_v0q5W82n_YmSD7ezA@mail.gmail.com>

Hi,

Have you considered the approaches explained here:
http://www.rabbitmq.com/blog/2012/05/11/some-queuing-theory-throughput-latency-and-bandwidth/

Also I think people could help you a bit more if you shared some
numbers about number of messages, consumers, RabbitMQ and Erlang
versions, and so on.

Regards,

Alvaro

On Wed, Jan 22, 2014 at 9:51 PM, Anahi Hojnadel
<anahi.hojnadel at gmail.com> wrote:
> Hi guys!
>
> We have an application that has a publisher which sends messages to a
> consumer which process those messages and then stores them in the DB.
> Everything is working fine up to now, but the number of messages we're
> receiving is getting bigger and performance is quite bad. We started to
> analize where the bottleneck was and it seems to be in rabbit queues.
>
> I've been reading many posts in Rabbit's blog about optimization but I
> couldn't find how to solve the problem.
>
> The main problem is that we're publishing messages faster than we can
> consume them. When the number of messages in ready state (or in unacked
> state) increases, the deliver ratio decrease considerably.
>
> I've tried adding more consumers, sending messages more slowly (with time
> sleep)... without luck.
>
> I've seen that sending an ack for each message make things slower but we
> actually need to ensure they're delivered. Our current ack ratio is too low,
> so every time the number of unacked messages increases, the deliver ratio
> decreases.
>
> Do you have any ideas of what could I try to improve our process
> performance? Or should I just make sure not to send more messages than my
> current ack ratio? Is stacking acks and sending them in batches a safe
> strategy to try out?
>
> Adding more queues is not an option since it will add too much complexity to
> our app.
>
> Thanks!!
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From matthias at rabbitmq.com  Wed Jan 22 23:23:22 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 22 Jan 2014 23:23:22 +0000
Subject: [rabbitmq-discuss] Rabbitmq crashing every 90 minutes
In-Reply-To: <CAHdxdCdSBGPYAOuabh2OiA3uPXpeROGnu9v=LbVbQPCemKHfZg@mail.gmail.com>
References: <1390425211324-32798.post@n5.nabble.com>
 <CAMcAHLW64v+-N_J-QPso9PTQpyOA+=3CaU0Xhp30rHPLvHCJug@mail.gmail.com>
 <CAHdxdCcE6N1zFmwNQ2eLx9b3JedvnreLdRFX5YKWBFBxbFMFGA@mail.gmail.com>
 <52E03E04.4090006@rabbitmq.com>
 <CAHdxdCdSBGPYAOuabh2OiA3uPXpeROGnu9v=LbVbQPCemKHfZg@mail.gmail.com>
Message-ID: <52E052EA.9020604@rabbitmq.com>

On 22/01/14 22:27, Daniel Bason wrote:
> I also found the following error in the rabbit log as part of the
> crashes; not sure if this relates to FDs:
> [...]
> ** Reason for termination ==
> ** {{badmatch,{error,system_limit}},
>      [{rabbit_msg_store,combine_files,3},
>       {rabbit_msg_store_gc,attempt_action,3},
>       {rabbit_msg_store_gc,handle_cast,2},
>       {gen_server2,handle_msg,2},
>       {proc_lib,wake_up,3}]}

That looks like FDs too.

I wonder whether for some reason your O/S enforces a lower limit than 
rabbit thinks.

Matthias.

From gavinmroy at gmail.com  Wed Jan 22 23:44:52 2014
From: gavinmroy at gmail.com (Gavin M. Roy)
Date: Wed, 22 Jan 2014 18:44:52 -0500
Subject: [rabbitmq-discuss] rabbitpy 0.14.0
Message-ID: <etPan.52e057f4.643c9869.aba4@gmr-home.local>

I have pushed rabbitpy 0.14.0 to pypi and it is available for use. It is considered the latest and greatest stable release and all users are urged to upgrade.

This is a feature enhancement version adding the following functionality or features:

- Experimental support for use in Windows
- Support for RabbitMQ?s new authentication_failure_close feature, raising AMQP exceptions upon authentication failure
- Support for consumer priorities
- Remote initiated AMQP exceptions are now native to rabbitpy instead of referencing pamqp exceptions
- rabbitpy.Queue can act as a Python iterator for consuming messages
- rabbitpy.Tx has been updated to act as a context manager, automatically starting (TX.Select) and Committing (TX.Commit) or Rolling-back (TX.Rollback) based upon the exit of the code context.
- Attributes of the rabbitpy.Queue and rabbitpy.Exchange objects are no longer private and can be altered after object creation

In addition, the documentation at https://rabbitpy.readthedocs.org has been significantly updated.

Upgrading rabbitpy will also upgrade pamqp to 1.3.0 fixing the previous bug with small integer table encoding impacting AMQP requests with argument values containing small integer values.

For more information, including installation instructions, please visit https://pypi.python.org/pypi/rabbitpy or the documentation at https://rabbitpy.readthedocs.org?

If you have any issues, please be sure to use the issue tracker at?https://github.com/gmr/rabbitpy/issues

Regards,

Gavin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/0d79df5a/attachment.html>

From liangliangxinxin at yeah.net  Thu Jan 23 01:50:33 2014
From: liangliangxinxin at yeah.net (jack)
Date: Wed, 22 Jan 2014 17:50:33 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq connections
Message-ID: <1390441833333-32808.post@n5.nabble.com>

i write a consumer with rabbitmq-c.when i consume message from the mq
server,i received a library_execption and the errosr string is a socket
error occured. No matter i close the channel and connection,or i quit the
client.from the rabbitmq web ui,i can still saw the connection.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-connections-tp32808.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From ravindrapandey1982 at gmail.com  Thu Jan 23 04:40:31 2014
From: ravindrapandey1982 at gmail.com (Ravi Pandey)
Date: Thu, 23 Jan 2014 10:10:31 +0530
Subject: [rabbitmq-discuss] Setting Message priority
In-Reply-To: <52DFDCC9.6030001@rabbitmq.com>
References: <CAPCD91=dzOO2BFx5+5g+s3TBf_VBu97zxBJZ8OYwyzH06YvnKQ@mail.gmail.com>
 <CAMcAHLUE2z=w1i=Boa3-5m_4MpTsb0810tVGFUzFq80DMcKN-Q@mail.gmail.com>
 <CAPCD91nZOWCUMYNawk=fU9pffGyw9NyJqHghZMEjahmMDfzt9A@mail.gmail.com>
 <52DFDCC9.6030001@rabbitmq.com>
Message-ID: <CAPCD91mL32_ZGYL7P6njMgg6_uuPH=2L2frUB+zyP7xhW7aV9w@mail.gmail.com>

Then what's the alternative solution to set message on priority?


On Wed, Jan 22, 2014 at 8:29 PM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 22/01/14 14:55, Ravi Pandey wrote:
>
>> Can you please take a look here -
>> http://www.slideshare.net/carrja99/high-powered-messaging-with
>>
>> It says - there is a value 0-9 for message priorities
>>
>
> (On slide 22 if anyone else is looking.)
>
> That's in the AMQP standard. RabbitMQ doesn't support them unfortunately.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/7397aac5/attachment.html>

From jkuch at gopivotal.com  Thu Jan 23 04:46:53 2014
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Wed, 22 Jan 2014 20:46:53 -0800
Subject: [rabbitmq-discuss] Setting Message priority
In-Reply-To: <CAPCD91mL32_ZGYL7P6njMgg6_uuPH=2L2frUB+zyP7xhW7aV9w@mail.gmail.com>
References: <CAPCD91=dzOO2BFx5+5g+s3TBf_VBu97zxBJZ8OYwyzH06YvnKQ@mail.gmail.com>
 <CAMcAHLUE2z=w1i=Boa3-5m_4MpTsb0810tVGFUzFq80DMcKN-Q@mail.gmail.com>
 <CAPCD91nZOWCUMYNawk=fU9pffGyw9NyJqHghZMEjahmMDfzt9A@mail.gmail.com>
 <52DFDCC9.6030001@rabbitmq.com>
 <CAPCD91mL32_ZGYL7P6njMgg6_uuPH=2L2frUB+zyP7xhW7aV9w@mail.gmail.com>
Message-ID: <CANOx8Nk+vKA+ngaRv-BtBPbb5f4yiici+swXBg9iYm4CcATQjg@mail.gmail.com>

You could consider structuring your message fabric with multiple queues for
different priorities, binding them to an exchange with binding keys that
correspond to your exchange type and the routing key used on messages at
publish time to distribute them into those queues?




On Wed, Jan 22, 2014 at 8:40 PM, Ravi Pandey
<ravindrapandey1982 at gmail.com>wrote:

> Then what's the alternative solution to set message on priority?
>
>
> On Wed, Jan 22, 2014 at 8:29 PM, Simon MacMullen <simon at rabbitmq.com>wrote:
>
>> On 22/01/14 14:55, Ravi Pandey wrote:
>>
>>> Can you please take a look here -
>>> http://www.slideshare.net/carrja99/high-powered-messaging-with
>>>
>>> It says - there is a value 0-9 for message priorities
>>>
>>
>> (On slide 22 if anyone else is looking.)
>>
>> That's in the AMQP standard. RabbitMQ doesn't support them unfortunately.
>>
>> Cheers, Simon
>>
>> --
>> Simon MacMullen
>> RabbitMQ, Pivotal
>>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140122/8709a351/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan 23 07:16:13 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 23 Jan 2014 11:16:13 +0400
Subject: [rabbitmq-discuss] ANN amqp gem 1.2.1 is released
Message-ID: <CAE3HoVRfxwd=tojNH7ZiKr3vV0SkZ+Kw4v7JzWxM5sfQJGsELg@mail.gmail.com>

amqp gem [1] 1.2.1 is released.

Release notes:
http://blog.rubyrabbitmq.info/blog/2014/01/23/amqp-gem-1-dot-2-1-is-released/

1. http://rubyamqp.info
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/55b1226b/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan 23 07:17:08 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 23 Jan 2014 11:17:08 +0400
Subject: [rabbitmq-discuss] ANN Langohr 2.3.2 is released
Message-ID: <CAE3HoVQhs8SxW0Eb6SEZw0mpyf-WF=GSiTuoV+FGBLnhw4ff_g@mail.gmail.com>

Langohr [1] is a minimalistic, feature complete Clojure client for RabbitMQ.

Release notes:
http://blog.clojurewerkz.org/blog/2014/01/22/langohr-2-dot-3-2-is-released/

1. http://clojurerabbitmq.info
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/a3780862/attachment.html>

From blemasle at allocine.fr  Thu Jan 23 08:54:29 2014
From: blemasle at allocine.fr (Bertrand LEMASLE)
Date: Thu, 23 Jan 2014 09:54:29 +0100
Subject: [rabbitmq-discuss] Publisher confirms always wait for consumer
	ack/nack
In-Reply-To: <CANOx8N=JtX6sEVm0uqPsZxMoUH1D7OiSxiPmeovYoaocT6uMgw@mail.gmail.com>
References: <CA+6GtrDtS6jLj7y778TuLEHSbb6_WKW4+57Wctmfg-=O3v75Lg@mail.gmail.com>
 <CANOx8N=JtX6sEVm0uqPsZxMoUH1D7OiSxiPmeovYoaocT6uMgw@mail.gmail.com>
Message-ID: <CA+6GtrAfWMf_wBHhBoAJdrHfR557TxAC1i+y86J93pUYT05LhA@mail.gmail.com>

Hi,

"Totally unrelated" : that's what I undestand from the documentation, but
it seems to be what's going on in my case.

"you really need round trip acknowledgment from producer -> broker ->
consumer -> back to producer, you need [...] our simple RPC" : that's
exactly what I don't want in this case !

After some digging, I discovered that my producer and consumer run on the
same thread but they souldn't (for now, producer and consumer run in the
same application). So my consumer thread sleep affects my publisher thread.
That's obviously a flaw in my own design and seems to have nothing to do
with RabbitMQ itself.

Thanks for your concern and your clarification about publisher confirms
which made me think about monitoring running threads and so came onto this !

Regards,
Bertrand

 <http://www.allocine.fr/> *Bertrand Lemasle*
Software architect

T?l : 01.71.39.81.20Mail : blemasle at allocine.fr <xxxxxxx at allocine.fr> Mob.
: 06.42.55.93.10
Adresse : 3, avenue Hoche - 75008 Paris (Hall 1, Etage 5) - Tel :
01.71.39.81.00 www.purepeople.com - www.allocine.fr - www.puretrend.com -
www.puremedias <http://www.puremedias.com/> - www.purebreak.com
www.terrafemina.com - www.purecharts.fr - www.canalblog.com -
www.pureshopping.fr - www.newsring.fr



2014/1/22 Jerry Kuch <jkuch at gopivotal.com>

> On Wed, Jan 22, 2014 at 9:07 AM, Bertrand LEMASLE <blemasle at allocine.fr>wrote:
>
>>
>> After reading many docs and mails on this subject (
>> http://www.rabbitmq.com/confirms.html included which explains when a
>> message will be confirmed), I still haven't found an answer to my question.
>> When using publisher confirm (by using confirmSelect on the channel),
>> messages aren't ack until they are either ack or nack by at least one
>> consumer.
>>
>
> Totally unrelated.  The publisher confirm mechanism only goes so far as
> the transfer of responsibility for a message's well being from the
> *publisher* into the *broker*.
>
> Receipt of a publisher confirm means the broker has accepted your message
> and done what you asked of it, e.g. persisted it to disk, made sure it was
> replicated to any applicable mirrored queues, etc.
>
> Consumers consume from queues, and their AMQP Ack mechanism is analogous
> to, in the sense of responsibility transfer, but *totally uncoupled from*
> any publisher confirm happening on the inbound side.
>
> If you really need round trip acknowledgment from producer -> broker ->
> consumer -> back to producer, you need to build that into your messaging
> workflow as, for example, our simple RPC over AMQP facility does.  You
> might look at the tutorial examples using it, since they may directly fit
> your intended use case.
>
> Best regards,
> Jerry
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/1722b22d/attachment.html>

From simon at rabbitmq.com  Thu Jan 23 10:43:58 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 23 Jan 2014 10:43:58 +0000
Subject: [rabbitmq-discuss] Http Management Plugin: statistics_db_node
 not_running
In-Reply-To: <7EF99EFD88F4A94CB5378840A8A5B8AC500615AB@EXCHMBOXA01.pc.factset.com>
References: <7EF99EFD88F4A94CB5378840A8A5B8AC500615AB@EXCHMBOXA01.pc.factset.com>
Message-ID: <52E0F26E.40605@rabbitmq.com>

On 22/01/2014 17:02, Ben J. Heiskell wrote:
> I'm guessing that through sheer bad luck, the node which crashed was
> the active statistics_db_node. What I don't understand is why I had
> to manually intervene to get the statistics db back online. Is this a
> bug? What is the expected behavior here?

The stats DB *should* fail over to any other node which has the full 
management plugin (not just the agent) enabled. And indeed that's what I 
see when starting and stopping nodes in a cluster :-/ As you note we 
have seen the occasional report of this behaviour, but I can't replicate it.

> - When visiting the management plugin from a browser, the overview
> tab displays the error message: "TypeError: Cannot read property
> 'connections' of undefined". Additionally, the connections and
> channels tabs are both empty. Exchanges and Queues are populated as
> expected, but the statistics related columns (rates and counts) are
> all empty. Clicking on an exchange results errors with
> "ReferenceError: exchange is not defined". Clicking on a queue errors
> with "TypeError: Cannot read property 'ram_msg_count' of undefined".

Yes, the web UI will be quite broken without a stats DB.

> - Everything aside from the management API appears to have continued
> to work correctly.

Yes, it doesn't affect anything else.

>  - I found the following message in the crashed host's logs, which
> repeated once for every host in the cluster:
>
> =ERROR REPORT==== 18-Jan-2014::17:59:26 ===
> Mnesia(rabbit at rabbitmq04): ** ERROR ** mnesia_event got
> {inconsistent_database, starting_partitioned_network,
> rabbit at rabbitmq05}

That's evidence of a partitioned network. It's quite possible (even 
likely) that the stats DB failure is related to this. I will 
investigate, but don't hold your breath; this is difficult to replicate.

Cheers, Simon

From hariprasad.kg at nestgroup.net  Thu Jan 23 10:42:35 2014
From: hariprasad.kg at nestgroup.net (Hariprasad K.G. (NeSTIT))
Date: Thu, 23 Jan 2014 16:12:35 +0530
Subject: [rabbitmq-discuss] RabbitMQ server is getting hanged when I run
	continuously
Message-ID: <DFA4DD36883F5641AD609D011918C1B3085427A5@new-ex1.nestgroup.net>

 

Hi ,

 

I wrote a sample application using RabbitMQ. I used fan out exchange for
broad cast . I send 2 MB  messages around 2000 times continuously in a
loop .My concern is while sending the message I observed that around
10-15 times RabbitMQ server is getting hanged .  Here  I am attaching
RabbitMQ console's screen shot which is taken at the time when i
observed spike in my application . Please see message rate graph.Please
any one advice me this is the issue of RabbitMQ server or network issue 

 

 

Thanks & Regards

Hariprasad K.G

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/0cbbebab/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 988 bytes
Desc: image001.jpg
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/0cbbebab/attachment.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Spike.png
Type: image/png
Size: 37440 bytes
Desc: Spike.png
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/0cbbebab/attachment.png>

From videlalvaro at gmail.com  Thu Jan 23 12:43:56 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Thu, 23 Jan 2014 13:43:56 +0100
Subject: [rabbitmq-discuss] RabbitMQ server is getting hanged when I run
	continuously
In-Reply-To: <DFA4DD36883F5641AD609D011918C1B3085427A5@new-ex1.nestgroup.net>
References: <DFA4DD36883F5641AD609D011918C1B3085427A5@new-ex1.nestgroup.net>
Message-ID: <CAMcAHLVR+H6xPpdg8H97AkpkrifG5s5Mvh2-w1wQk13FBo-Ofw@mail.gmail.com>

Hi,

You are probably hitting the flow control mechanisms.

See: http://www.rabbitmq.com/memory.html

Regards,

Alvaro


On Thu, Jan 23, 2014 at 11:42 AM, Hariprasad K.G. (NeSTIT) <
hariprasad.kg at nestgroup.net> wrote:

>
>
> Hi ,
>
>
>
> I wrote a sample application using RabbitMQ. I used fan out exchange for
> broad cast . I send 2 MB  messages around 2000 times continuously in a loop
> .My concern is while sending the message I observed that around  10-15
> times RabbitMQ server is getting hanged .  Here  I am attaching RabbitMQ
> console?s screen shot which is taken at the time when i observed spike in
> my application . Please see message rate graph.Please any one advice me
> this is the issue of RabbitMQ server or network issue
>
>
>
>
>
> Thanks & Regards
>
> Hariprasad K.G
>
>
>
> [image: cid:image001.jpg at 01CC325F.9C79ED60]
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/69276ba5/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 988 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/69276ba5/attachment.jpg>

From simon at rabbitmq.com  Thu Jan 23 12:59:36 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 23 Jan 2014 12:59:36 +0000
Subject: [rabbitmq-discuss] Bug w/ Federated Queue's & Clustering
In-Reply-To: <52DFF931.1070309@one.com>
References: <52DF3680.4080506@one.com> <52DFF14D.9050503@rabbitmq.com>
 <52DFF931.1070309@one.com>
Message-ID: <52E11238.8080809@rabbitmq.com>

On 22/01/2014 17:00, Josh West wrote:
> That's great news.  I take it you've identified the cause of the problem?

Yes.

> Looking forward to testing patches or a nightly build.

You can download a patched federation plugin from 
http://www.rabbitmq.com/releases/plugins/v3.2.2/ now.

Find the existing federation plugin on your system (see 
http://www.rabbitmq.com/plugins.html#installing-plugins) and delete it / 
move it elsewhere. Drop this one in instead.

Hopefully this will fix the problem you are seeing. Let us know how you 
get on, and thanks for reporting this bug.

Cheers, Simon


From mklishin at gopivotal.com  Thu Jan 23 13:19:26 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 23 Jan 2014 17:19:26 +0400
Subject: [rabbitmq-discuss] RabbitMQ server is getting hanged when I run
	continuously
In-Reply-To: <CAMcAHLVR+H6xPpdg8H97AkpkrifG5s5Mvh2-w1wQk13FBo-Ofw@mail.gmail.com>
References: <DFA4DD36883F5641AD609D011918C1B3085427A5@new-ex1.nestgroup.net>
 <CAMcAHLVR+H6xPpdg8H97AkpkrifG5s5Mvh2-w1wQk13FBo-Ofw@mail.gmail.com>
Message-ID: <192435C8-213C-4034-8BDF-53AC20D5C4C2@rabbitmq.com>

On 23 Jan 2014, at 16:43, Alvaro Videla <videlalvaro at gmail.com> wrote:

> You are probably hitting the flow control mechanisms.
> 
> See: http://www.rabbitmq.com/memory.html

To know for sure, see RabbitMQ log and if it mentions any alarms.

MK

Software Engineer, Pivotal/RabbitMQ



From emile at rabbitmq.com  Thu Jan 23 13:37:01 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 23 Jan 2014 13:37:01 +0000
Subject: [rabbitmq-discuss] RabbitMQ 3.2.2 and Erlang R16B03 - SSL Issue
In-Reply-To: <52DE9E58.5010408@rabbitmq.com>
References: <52DE4E5A.1050801@rabbitmq.com>
 <1390308913801.a40251c1@Nodemailer> <52DE9E58.5010408@rabbitmq.com>
Message-ID: <52E11AFD.70407@rabbitmq.com>

On 21/01/14 16:20, Emile Joubert wrote:
> On 21/01/14 12:55, Jared Kauppila wrote:
>> There is no difference in behavior with that SSL setting configured.
> 
> This looks like an Erlang bug.


This has been acknowledged as a bug and a patch has been posted to the
erlang-bugs mailing list. Feel free to try the patch, or wait for a
version of Erlang to be released that contains the fix:

http://erlang.org/pipermail/erlang-bugs/2014-January/003986.html




From mcintoshj at gmail.com  Thu Jan 23 15:55:33 2014
From: mcintoshj at gmail.com (Jason McIntosh)
Date: Thu, 23 Jan 2014 09:55:33 -0600
Subject: [rabbitmq-discuss] Updated zabbix monitoring of RabbitMQ
Message-ID: <CAD6m6fEQaX+W=+8CagdnU04zY7P+A0gP00zB4DqDQx_7QSn_sw@mail.gmail.com>

I've updated the Rabbitmq monitoring template and libraries and merged in
some suggested changes.  Not sure if anyone's using it yet but if so you
might want to take a look here:
https://github.com/jasonmcintosh/rabbitmq-zabbix

This reduces the CPU load on the monitored servers substantially as it's
doing far less hits to the management API but instead gets statistics on
queues in a "batch".

Jason

-- 
Jason McIntosh
https://github.com/jasonmcintosh/
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/c28bc7e8/attachment.html>

From mcintoshj at gmail.com  Thu Jan 23 15:58:39 2014
From: mcintoshj at gmail.com (Jason McIntosh)
Date: Thu, 23 Jan 2014 09:58:39 -0600
Subject: [rabbitmq-discuss] Rabbitmq crashing every 90 minutes
In-Reply-To: <52E052EA.9020604@rabbitmq.com>
References: <1390425211324-32798.post@n5.nabble.com>
 <CAMcAHLW64v+-N_J-QPso9PTQpyOA+=3CaU0Xhp30rHPLvHCJug@mail.gmail.com>
 <CAHdxdCcE6N1zFmwNQ2eLx9b3JedvnreLdRFX5YKWBFBxbFMFGA@mail.gmail.com>
 <52E03E04.4090006@rabbitmq.com>
 <CAHdxdCdSBGPYAOuabh2OiA3uPXpeROGnu9v=LbVbQPCemKHfZg@mail.gmail.com>
 <52E052EA.9020604@rabbitmq.com>
Message-ID: <CAD6m6fGv=Dt5TaT95KKAyVmvnYnHQaEeJ6MwtbV6dS9h712xQQ@mail.gmail.com>

Please note that if you're running on CentOS/RHEL based systems, there's
actually a soft limit on all processes set to 1024.  Look in:
/etc/security/limits.d/
there's a 90-nproc.conf file that has the following:

# Default limit for number of user's processes to prevent
# accidental fork bombs.
# See rhbz #432903 for reasoning.

*          soft    nproc     1024


Jason



On Wed, Jan 22, 2014 at 5:23 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> On 22/01/14 22:27, Daniel Bason wrote:
>
>> I also found the following error in the rabbit log as part of the
>> crashes; not sure if this relates to FDs:
>> [...]
>>
>> ** Reason for termination ==
>> ** {{badmatch,{error,system_limit}},
>>      [{rabbit_msg_store,combine_files,3},
>>       {rabbit_msg_store_gc,attempt_action,3},
>>       {rabbit_msg_store_gc,handle_cast,2},
>>       {gen_server2,handle_msg,2},
>>       {proc_lib,wake_up,3}]}
>>
>
> That looks like FDs too.
>
> I wonder whether for some reason your O/S enforces a lower limit than
> rabbit thinks.
>
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>



-- 
Jason McIntosh
https://github.com/jasonmcintosh/
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/513c8119/attachment.html>

From emile at rabbitmq.com  Thu Jan 23 16:11:52 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 23 Jan 2014 16:11:52 +0000
Subject: [rabbitmq-discuss] RabbitMQ 3.2.3 released
Message-ID: <52E13F48.9050803@rabbitmq.com>

The RabbitMQ team is pleased to announce the release of RabbitMQ 3.2.3

This release fixes a number of bugs in the broker and federation plugin.
Improvements to the LDAP and shovel plugins are also included.

See the release notes at:

http://www.rabbitmq.com/release-notes/README-3.2.3.txt

for more information.

The new release can be downloaded from:

http://www.rabbitmq.com/download.html

As always, we welcome any questions, bug reports, and other feedback on
this release, as well as general suggestions for features and
enhancements in future releases. Mail us via the RabbitMQ discussion
list.

Regards,
                      The RabbitMQ Team
                      (http://www.rabbitmq.com)


-------------- next part --------------
Release: RabbitMQ 3.2.3

Release Highlights
==================

server
------
bug fixes
25936 stem leak when queues with active consumers terminate (since 3.2.0)
25928 fix cosmetic error when sending connection.close-ok after client
      already closed the connection (since 1.0.0)
25965 limit messages to ~2GB to prevent "Absurdly large distribution output
      data buffer" VM crash (since 1.0.0)
24927 avoid broker being overwhelmed while logging benign messages starting with
      "Discarding messages" (since 1.0.0)
25952 prevent "Absurdly large distribution output data buffer" VM crash when
      sending many/large messages to a mirrored queue (since 2.6.0)
25925 remove extraneous service parameters when installing on windows
      (since 1.5.0)
25929 prevent error being logged when connection is closed while it is still
      being opened (since 1.0.0)


federation plugin
-----------------
bug fixes
25945 ensure federated queues correctly stop federating messages when channels
      close or crash without cancellation from consumers (since 3.2.0)
25971 prevent crash of federated mirrored queues on deletion (since 3.2.0)
25956 prevent federation of the queues used internally by federated exchanges
      (since 3.2.0)
25949 prevent unnecessary CPU use when ACKs are not in use (since 2.6.0)


shovel plugin
-----------------
bug fixes
25934 remove ordering constraint on configuration items (since 2.0.0)
25949 prevent unnecessary CPU use when ACKs are not in use (since 2.0.0)


LDAP plugin
-----------
bug fixes
25914 fix use of dn_lookup_attribute configuration on OpenLDAP (since 2.8.0)


Upgrading
=========
To upgrade a non-clustered RabbitMQ from release 2.1.1 or later, simply install
the new version. All configuration and persistent message data is retained.

To upgrade a clustered RabbitMQ from release 2.1.1 or later, install the new
version on all the nodes and follow the instructions at
http://www.rabbitmq.com/clustering.html#upgrading .

To upgrade RabbitMQ from release 2.1.0, first upgrade to 2.1.1 (all data will be
retained), and then to the current version as described above.

When upgrading from RabbitMQ versions prior to 2.1.0, the existing data will be
moved to a backup location and a fresh, empty database will be created. A
warning is recorded in the logs. If your RabbitMQ installation contains
important data then we recommend you contact support at rabbitmq.com for
assistance with the upgrade.

From 1006798382 at qq.com  Thu Jan 23 16:14:45 2014
From: 1006798382 at qq.com (=?gb18030?B?0qy35w==?=)
Date: Fri, 24 Jan 2014 00:14:45 +0800
Subject: [rabbitmq-discuss] What time the rabbitmq to support AMQP 1.0
	version protocol?
Message-ID: <tencent_4E5DF7D8684EB24A24A1959C@qq.com>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/ad89f429/attachment.html>

From jsw at one.com  Thu Jan 23 16:16:59 2014
From: jsw at one.com (Josh West)
Date: Thu, 23 Jan 2014 11:16:59 -0500
Subject: [rabbitmq-discuss] Behaviour of Federated Queues
Message-ID: <52E1407B.8060901@one.com>

Hey folks,

I have a question regarding the behaviour of federated queues...

For this question, assume I have 3 RabbitMQ brokers federated with each 
other in a complete graph fashion (they all talk to each other).  
Broker1 has a federated queue policy to federate queue's having pattern 
^broker1.* with upstreams.  Broker2 does the same, but with pattern 
^broker2.* and Broker3 has pattern ^broker3.* ... this way any client 
can send messages to any client on another broker just by placing a 
message into a queue beginning with the destination broker's name :-)

I have noticed that if I create a queue on broker1 with name 
"broker1.foo.bar" (for example), the queue is automatically created on 
broker2 and broker3.  Should this occur?  Or should federation only 
create the queue on upstream brokers when needed (ad-hoc)?

I ask for two reasons:

1. This could be a waste of resources if one has lots of queues matching 
federation patterns or if one has say 200+ brokers federated with each 
other.

2. When queues are created with the Auto Delete parameter, that 
parameter is of course properly propagated.  But say a client puts a 
message into the queue "broker1.foo.bar" on broker2 and say a client 
retrieves the message from that same queue on broker1.  The Auto Delete 
parameter behaviour would be triggered and the queue is then deleted 
from broker1 and broker2 (upon client disconnection). But... Since 
nobody has ever put any messages into the queue "broker1.foo.bar" 
residing on broker3, the queue will remain defined possibly indefinitely.

Hope somebody can clarify this for me!

Thanks.

--
Josh West
One.com - http://www.one.com


From videlalvaro at gmail.com  Thu Jan 23 16:19:57 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Thu, 23 Jan 2014 17:19:57 +0100
Subject: [rabbitmq-discuss] What time the rabbitmq to support AMQP 1.0
 version protocol?
In-Reply-To: <tencent_4E5DF7D8684EB24A24A1959C@qq.com>
References: <tencent_4E5DF7D8684EB24A24A1959C@qq.com>
Message-ID: <CAMcAHLU48b7D6TQvjXwxxXq-TsetajB5y5R47eUBFag1ep6-Vg@mail.gmail.com>

RabbitMQ already supports AMQP 1.0

See: http://www.rabbitmq.com/protocols.html

It would be interesting to know why do you need 1.0 support.

Regards,

Alvaro



On Thu, Jan 23, 2014 at 5:14 PM, ?? <1006798382 at qq.com> wrote:
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From jsw at one.com  Thu Jan 23 16:21:13 2014
From: jsw at one.com (Josh West)
Date: Thu, 23 Jan 2014 11:21:13 -0500
Subject: [rabbitmq-discuss] Bug w/ Federated Queue's & Clustering
In-Reply-To: <52E11238.8080809@rabbitmq.com>
References: <52DF3680.4080506@one.com> <52DFF14D.9050503@rabbitmq.com>
 <52DFF931.1070309@one.com> <52E11238.8080809@rabbitmq.com>
Message-ID: <52E14179.1030901@one.com>

On 01/23/2014 07:59 AM, Simon MacMullen wrote:
> You can download a patched federation plugin from 
> http://www.rabbitmq.com/releases/plugins/v3.2.2/ now.
>
> Find the existing federation plugin on your system (see 
> http://www.rabbitmq.com/plugins.html#installing-plugins) and delete it 
> / move it elsewhere. Drop this one in instead.
>
> Hopefully this will fix the problem you are seeing. Let us know how 
> you get on, and thanks for reporting this bug.
>

Excellent!

I have tested the patched federation plugin and things are working 
well.  I will keep hammering away at my testing, but I'm not expecting 
to run into this issue any more.

Thanks for the quick fix turnaround!

--
Josh West
One.com - http://www.one.com



From simon at rabbitmq.com  Thu Jan 23 16:23:23 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 23 Jan 2014 16:23:23 +0000
Subject: [rabbitmq-discuss] What time the rabbitmq to support AMQP 1.0
 version protocol?
In-Reply-To: <tencent_4E5DF7D8684EB24A24A1959C@qq.com>
References: <tencent_4E5DF7D8684EB24A24A1959C@qq.com>
Message-ID: <52E141FB.7090704@rabbitmq.com>

May 1st, 2013 :-)

http://www.rabbitmq.com/release-notes/README-3.1.0.txt

On 23/01/2014 16:14, ?? wrote:
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


From enzo.mdd.alt at gmail.com  Thu Jan 23 15:20:52 2014
From: enzo.mdd.alt at gmail.com (Johnny Five)
Date: Thu, 23 Jan 2014 07:20:52 -0800 (PST)
Subject: [rabbitmq-discuss] Best practices for starting/managing
 consumer processes, PHP/Linux
In-Reply-To: <CAMcAHLVF7-b8oJcLayWgo_tF+N==q26YW+rDX7tbNoDV2iUPyQ@mail.gmail.com>
References: <f8a2cfe1-e290-4a55-b868-ff4c4e039777@googlegroups.com>
 <CAMcAHLVF7-b8oJcLayWgo_tF+N==q26YW+rDX7tbNoDV2iUPyQ@mail.gmail.com>
Message-ID: <677811dd-3c69-4e9c-ba3c-19902fe9fe0a@googlegroups.com>

Hey Alvaro,

OK thanks ill take a look.

What about other languages, do people typically use similar tools to 
supervisord?

Cheers, Enzo.

On Wednesday, 22 January 2014 19:54:15 UTC, Alvaro Videla wrote:
>
> Hi, 
>
> I know in the PHP community people is using this tool to manage 
> consumers: http://supervisord.org/ 
>
> NOTE: I have never used it. So don't take my word on it. Try for yourself. 
>
> Regards, 
>
> Alvaro 
>
>
> On Wed, Jan 22, 2014 at 5:59 PM, Johnny Five <enzo.m... at gmail.com<javascript:>> 
> wrote: 
> > Hello, 
> > 
> > Is there any way to define default consumer processes in a portable way? 
> > 
> > Im using message queues for background processing but Im not responsible 
> for 
> > the operation, only the development of the application. 
> > 
> > Are there any tools that work along side RabbitMQ on Linux that would 
> allow 
> > me to define exactly what consumers should be running for the 
> application to 
> > be functional, or is this typically done with custom shell scripts etc? 
> > 
> > Thanks, 
> > 
> > _______________________________________________ 
> > rabbitmq-discuss mailing list 
> > rabbitmq... at lists.rabbitmq.com <javascript:> 
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss 
> > 
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/46b4d62e/attachment.html>

From anahi.hojnadel at gmail.com  Thu Jan 23 18:04:07 2014
From: anahi.hojnadel at gmail.com (Anahi)
Date: Thu, 23 Jan 2014 16:04:07 -0200
Subject: [rabbitmq-discuss] Low performance when there are many messages
 in ready or unacked state
In-Reply-To: <CAMcAHLXfs4o-KkCoF=cWerw2upt2xqsN_v0q5W82n_YmSD7ezA@mail.gmail.com>
References: <f675da02-eb67-4a54-b12c-aee889b52eff@googlegroups.com>
 <CAMcAHLXfs4o-KkCoF=cWerw2upt2xqsN_v0q5W82n_YmSD7ezA@mail.gmail.com>
Message-ID: <CAK24ZruwxPrko7B8fAgS5Xiedc4uub=rqJ3HykadiXeqjqKemA@mail.gmail.com>

Thanks for the info! I read the article, but we can't use that
implementation since it seems to be kind of experimental and we need to
mantain the app as stable as possible,

Regarding the prefetch count, I'm not really sure about how it works in the
.net version. I've tried with this code _channel.BasicQos(0, 50, false) and
the only difference I see is that unacked messages ratio keep constant. But
there's no performance improvement.

We're using: RabbitMQ 3.2.2, Erlang R16B03

*Setting prefetch count before consuming data:*
Deliver 24/s
Ack 20~24/s
Published 1600/s


*Without prefetch count:*
Deliver 10~30/s
Ack 20~30/s
Published 1600/s

When we decreased the publish ratio (by adding sleep after sending each
message) we could increase the deliver ratio up to 90/s, but when the
number of messages within ready state start growing, the deliver ratio
decreases to 20/s again.


Thanks!!!

Anni..


2014/1/22 Alvaro Videla <videlalvaro at gmail.com>

> Hi,
>
> Have you considered the approaches explained here:
>
> http://www.rabbitmq.com/blog/2012/05/11/some-queuing-theory-throughput-latency-and-bandwidth/
>
> Also I think people could help you a bit more if you shared some
> numbers about number of messages, consumers, RabbitMQ and Erlang
> versions, and so on.
>
> Regards,
>
> Alvaro
>
> On Wed, Jan 22, 2014 at 9:51 PM, Anahi Hojnadel
> <anahi.hojnadel at gmail.com> wrote:
> > Hi guys!
> >
> > We have an application that has a publisher which sends messages to a
> > consumer which process those messages and then stores them in the DB.
> > Everything is working fine up to now, but the number of messages we're
> > receiving is getting bigger and performance is quite bad. We started to
> > analize where the bottleneck was and it seems to be in rabbit queues.
> >
> > I've been reading many posts in Rabbit's blog about optimization but I
> > couldn't find how to solve the problem.
> >
> > The main problem is that we're publishing messages faster than we can
> > consume them. When the number of messages in ready state (or in unacked
> > state) increases, the deliver ratio decrease considerably.
> >
> > I've tried adding more consumers, sending messages more slowly (with time
> > sleep)... without luck.
> >
> > I've seen that sending an ack for each message make things slower but we
> > actually need to ensure they're delivered. Our current ack ratio is too
> low,
> > so every time the number of unacked messages increases, the deliver ratio
> > decreases.
> >
> > Do you have any ideas of what could I try to improve our process
> > performance? Or should I just make sure not to send more messages than my
> > current ack ratio? Is stacking acks and sending them in batches a safe
> > strategy to try out?
> >
> > Adding more queues is not an option since it will add too much
> complexity to
> > our app.
> >
> > Thanks!!
> >
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-discuss at lists.rabbitmq.com
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> >
>
> --
> You received this message because you are subscribed to a topic in the
> Google Groups "rabbitmq-discuss" group.
> To unsubscribe from this topic, visit
> https://groups.google.com/d/topic/rabbitmq-discuss/BW62Tn9sQkE/unsubscribe
> .
> To unsubscribe from this group and all its topics, send an email to
> rabbitmq-discuss+unsubscribe at googlegroups.com.
> To post to this group, send email to rabbitmq-discuss at googlegroups.com.
> Visit this group at http://groups.google.com/group/rabbitmq-discuss.
> For more options, visit https://groups.google.com/groups/opt_out.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/d43e75c8/attachment.html>

From vikram.vis at gmail.com  Thu Jan 23 18:43:02 2014
From: vikram.vis at gmail.com (Vikram Viswanathan)
Date: Thu, 23 Jan 2014 10:43:02 -0800
Subject: [rabbitmq-discuss] Consistent hashing exchange
In-Reply-To: <521412E4.90005@gmail.com>
References: <521412E4.90005@gmail.com>
Message-ID: <52E162B6.8080704@gmail.com>


Is Consistent hashing exchange supported by RabbitMq java Client API ? I 
tried with Java Client 3.2.2/server 3.2.2 and I get this error

Caused by: com.rabbitmq.client.ShutdownSignalException: connection 
error; reason: {#method<connection.close>(reply-code=503, 
reply-text=COMMAND_INVALID - unknown exchange type 'x-consistent-hash', 
class-id=40, method-id=10), null, ""}
     at 
com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)
     at 
com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)
     at 
com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)
     at com.rabbitmq.client.impl.AMQChannel.privateRpc(AMQChannel.java:216)
     at 
com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:118)
     ... 5 more

API used,
      channel1.exchangeDeclare("masterExcg", "x-consistent-hash", false);

The server has been enabled with "rabbitmq_consistent_hash_exchange" 
plugin.


Thanks in advance,
-Vikram


From michael.s.klishin at gmail.com  Thu Jan 23 18:47:35 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 23 Jan 2014 22:47:35 +0400
Subject: [rabbitmq-discuss] Consistent hashing exchange
In-Reply-To: <52E162B6.8080704@gmail.com>
References: <521412E4.90005@gmail.com> <52E162B6.8080704@gmail.com>
Message-ID: <CAE3HoVSTQUTFaFLG-T_bH+Bq2KbWpSLfapBZ1d57B-Q_AfUv1g@mail.gmail.com>

2014/1/23 Vikram Viswanathan <vikram.vis at gmail.com>

> The server has been enabled with "rabbitmq_consistent_hash_exchange"
> plugin.
>

Make sure to restart RabbitMQ when you enable or disable a plugin.


-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/8d612abf/attachment.html>

From u.v.poblotzki at gmail.com  Thu Jan 23 21:00:12 2014
From: u.v.poblotzki at gmail.com (Ulrich von Poblotzki)
Date: Thu, 23 Jan 2014 13:00:12 -0800 (PST)
Subject: [rabbitmq-discuss] How to manage changes to exchanges and queues in
 different production environments
Message-ID: <095ab46d-9800-4d29-88e1-0f319bd048b1@googlegroups.com>

Hello, 

what is the best practices for deploying changes to the rabbitmq server 
configuration between different production environments? 

A little background: There are three different production environments 
(develop, test and production). Different teams relay on rabbitmq for there 
services and define queues and exchanges by as needed by there modules. For 
each release I have to select the right configurations for the module 
versions to be deployed. Currently this is done by textual descriptions, 
like ("version X need queues A, and exchanges B"). This is very 
error-prone. I was thinking of using the export and import for the 
management plugin. But I can't take the whole configuration from develop to 
test, to production, because parts of them belong to unfinished versions. 

We are using Liquibase for our database schema migrations and I would like 
to adapt a similar scheme in order to manage change sets to the rabbitmq 
configuration. Are there any tools for this or what is your best practices? 

Best regards,   
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140123/6b46829a/attachment.html>

From tlhuang at 800best.com  Fri Jan 24 04:28:54 2014
From: tlhuang at 800best.com (Huang Tonglang)
Date: Fri, 24 Jan 2014 12:28:54 +0800
Subject: [rabbitmq-discuss] Odd performance testing result
In-Reply-To: <CANOx8Nk+vKA+ngaRv-BtBPbb5f4yiici+swXBg9iYm4CcATQjg@mail.gmail.com>
References: <CAPCD91=dzOO2BFx5+5g+s3TBf_VBu97zxBJZ8OYwyzH06YvnKQ@mail.gmail.com>
 <CAMcAHLUE2z=w1i=Boa3-5m_4MpTsb0810tVGFUzFq80DMcKN-Q@mail.gmail.com>
 <CAPCD91nZOWCUMYNawk=fU9pffGyw9NyJqHghZMEjahmMDfzt9A@mail.gmail.com>
 <52DFDCC9.6030001@rabbitmq.com>
 <CAPCD91mL32_ZGYL7P6njMgg6_uuPH=2L2frUB+zyP7xhW7aV9w@mail.gmail.com>
 <CANOx8Nk+vKA+ngaRv-BtBPbb5f4yiici+swXBg9iYm4CcATQjg@mail.gmail.com>
Message-ID: <023CBAD52AC91842B08759362DE8396C0FD5801CC1@bestex3.800best.net>

Hi there

My test result list below. The odd thing is why performance of machine-2 is worse than machine-3?

Target machine

Configuration

performance-persistence

performance-nonpersistence

machine-1

physical machine
SSD
32 cpu cores(Intel(R) Xeon(R) CPU E5-2650 v2 @ 2.60GHz)
64G Memory

22000

24000

machine-2

vmware machine
ssd
8 cpu cores,
24G Memory
The based physical machine is the same as machine-1, and it is the only vmware machine there.

6000

16000

machine-3

vmware machine
sas
4 cpu cores(Intel(R) Xeon(R) CPU E5-2650 2.0GHz)
8G Memory.
The performance of based physical machine is worse than machine-1.

12000

13000


The test client is the same, 5 queues, 5 producers and 10 consumer each queue. The version of Rabbitmq is 3.2.2.

 I have tried below testing, but the result is the same.

1.       Clone the whole machine-3 to machine2

2.       Save mnesia to SAS disk

3.       Save mnesia to /dev/shm

During testing, I find the cpu us of machine-3 can reach to 90, but it is only about 50 in machine-2. It seems the message persistence stage in machine-2 is very slow. Can someone help me to figure out why.



Thank you

Tonglang Huang

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/a1ed3b28/attachment.html>

From mklishin at gopivotal.com  Fri Jan 24 07:38:19 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 24 Jan 2014 11:38:19 +0400
Subject: [rabbitmq-discuss] Odd performance testing result
In-Reply-To: <023CBAD52AC91842B08759362DE8396C0FD5801CC1@bestex3.800best.net>
References: <CAPCD91=dzOO2BFx5+5g+s3TBf_VBu97zxBJZ8OYwyzH06YvnKQ@mail.gmail.com>
 <CAMcAHLUE2z=w1i=Boa3-5m_4MpTsb0810tVGFUzFq80DMcKN-Q@mail.gmail.com>
 <CAPCD91nZOWCUMYNawk=fU9pffGyw9NyJqHghZMEjahmMDfzt9A@mail.gmail.com>
 <52DFDCC9.6030001@rabbitmq.com>
 <CAPCD91mL32_ZGYL7P6njMgg6_uuPH=2L2frUB+zyP7xhW7aV9w@mail.gmail.com>
 <CANOx8Nk+vKA+ngaRv-BtBPbb5f4yiici+swXBg9iYm4CcATQjg@mail.gmail.com>
 <023CBAD52AC91842B08759362DE8396C0FD5801CC1@bestex3.800best.net>
Message-ID: <52925647-0E25-4B61-BBF8-38DEB659801C@rabbitmq.com>

On 24 Jan 2014, at 08:28, Huang Tonglang <tlhuang at 800best.com> wrote:

> During testing, I find the cpu us of machine-3 can reach to 90, but it is only about 50 in machine-2. It seems the message persistence stage in machine-2 is very slow.

If you have 50 or even 90 cores and want to achieve max throughput, use more queues (e.g. as many as you have cores).

> Can someone help me to figure out why.

vmstat and iostat can help with that.

MK

Software Engineer, Pivotal/RabbitMQ



From mklishin at gopivotal.com  Fri Jan 24 09:15:59 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 24 Jan 2014 13:15:59 +0400
Subject: [rabbitmq-discuss] Odd performance testing result
In-Reply-To: <52925647-0E25-4B61-BBF8-38DEB659801C@rabbitmq.com>
References: <CAPCD91=dzOO2BFx5+5g+s3TBf_VBu97zxBJZ8OYwyzH06YvnKQ@mail.gmail.com>
 <CAMcAHLUE2z=w1i=Boa3-5m_4MpTsb0810tVGFUzFq80DMcKN-Q@mail.gmail.com>
 <CAPCD91nZOWCUMYNawk=fU9pffGyw9NyJqHghZMEjahmMDfzt9A@mail.gmail.com>
 <52DFDCC9.6030001@rabbitmq.com>
 <CAPCD91mL32_ZGYL7P6njMgg6_uuPH=2L2frUB+zyP7xhW7aV9w@mail.gmail.com>
 <CANOx8Nk+vKA+ngaRv-BtBPbb5f4yiici+swXBg9iYm4CcATQjg@mail.gmail.com>
 <023CBAD52AC91842B08759362DE8396C0FD5801CC1@bestex3.800best.net>
 <52925647-0E25-4B61-BBF8-38DEB659801C@rabbitmq.com>
Message-ID: <4737A1A2-56B4-4E8A-9463-88C8585C7AC0@gopivotal.com>

On 24 Jan 2014, at 11:38, Michael Klishin <mklishin at gopivotal.com> wrote:

> If you have 50 or even 90 cores and want to achieve max throughput, use more queues (e.g. as many as you have cores).

Oops, I did not notice the # of cores in your table.

Can you clarify a few things?

 * How do you run your benchmarks. Do you use PerfTest [1]?
 * What?s the average message size?
 * Are you sure messages are always routed?
 * Do you see messages piling up in the queues?
 * Can you post ps aux | grep beam output? (this will display Erlang VM flags)

1. http://www.rabbitmq.com/java-tools.html
--
MK

Software Engineer, Pivotal/RabbitMQ


From varsha_dashputre at persistent.co.in  Fri Jan 24 07:12:14 2014
From: varsha_dashputre at persistent.co.in (Varsha Dashputre)
Date: Fri, 24 Jan 2014 07:12:14 +0000
Subject: [rabbitmq-discuss] Question about message priority
Message-ID: <11a0209bf5934fd79dfce49e7f9fc99c@SINPR04MB057.apcprd04.prod.outlook.com>

Hi,

I have found that we can specify message priority while publishing a message as

                 AMQP.BasicProperties.Builder builder = new AMQP.BasicProperties.Builder();
   //
   //set priority to 9
   //
                 builder.priority(9).contentType("text/plain").deliveryMode(2);

                 channel.basicPublish("", QUEUE_NAME, builder.build(), message.getBytes());

However at the receiver's end, messages are received in FIFO manner. Am I missing on anything?
Which version of RabbitMQ supports message delivery with message priority?
Or it is not yet supported?

Please advise.

Thanks,
Varsha.

DISCLAIMER
==========
This e-mail may contain privileged and confidential information which is the property of Persistent Systems Ltd. It is intended only for the use of the individual or entity to which it is addressed. If you are not the intended recipient, you are not authorized to read, retain, copy, print, distribute or use this message. If you have received this communication in error, please notify the sender and delete all copies of this message. Persistent Systems Ltd. does not accept any liability for virus infected mails.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/3a999105/attachment.html>

From michael.s.klishin at gmail.com  Fri Jan 24 10:31:00 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 24 Jan 2014 14:31:00 +0400
Subject: [rabbitmq-discuss] Question about message priority
In-Reply-To: <11a0209bf5934fd79dfce49e7f9fc99c@SINPR04MB057.apcprd04.prod.outlook.com>
References: <11a0209bf5934fd79dfce49e7f9fc99c@SINPR04MB057.apcprd04.prod.outlook.com>
Message-ID: <CAE3HoVTNqLWFK=2e0O3hN77O7Lt6nO2mmd+XnKe-0mbNyd1Byw@mail.gmail.com>

2014/1/24 Varsha Dashputre <varsha_dashputre at persistent.co.in>

> However at the receiver?s end, messages are received in FIFO manner. Am I
> missing on anything?
>
> Which version of RabbitMQ supports message delivery with message priority?
>
> Or it is not yet supported?
>

They are not supported.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/10c9a944/attachment.html>

From emile at rabbitmq.com  Fri Jan 24 10:35:44 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 24 Jan 2014 10:35:44 +0000
Subject: [rabbitmq-discuss] Question about message priority
In-Reply-To: <11a0209bf5934fd79dfce49e7f9fc99c@SINPR04MB057.apcprd04.prod.outlook.com>
References: <11a0209bf5934fd79dfce49e7f9fc99c@SINPR04MB057.apcprd04.prod.outlook.com>
Message-ID: <52E24200.8010903@rabbitmq.com>


Hi,

On 24/01/14 07:12, Varsha Dashputre wrote:
> Which version of RabbitMQ supports message delivery with message priority?



This feature is not yet supported. See "basic / 06" here:

https://www.rabbitmq.com/specification.html




-Emile

From varsha_dashputre at persistent.co.in  Fri Jan 24 10:40:07 2014
From: varsha_dashputre at persistent.co.in (Varsha Dashputre)
Date: Fri, 24 Jan 2014 10:40:07 +0000
Subject: [rabbitmq-discuss] Question about message priority
In-Reply-To: <CAE3HoVTNqLWFK=2e0O3hN77O7Lt6nO2mmd+XnKe-0mbNyd1Byw@mail.gmail.com>
References: <11a0209bf5934fd79dfce49e7f9fc99c@SINPR04MB057.apcprd04.prod.outlook.com>
 <CAE3HoVTNqLWFK=2e0O3hN77O7Lt6nO2mmd+XnKe-0mbNyd1Byw@mail.gmail.com>
Message-ID: <bf54c5c6f7f34393967ecaebe1820c92@SINPR04MB057.apcprd04.prod.outlook.com>

Thanks for your response.

Is there a plan to support those? We are using rabbit MQ and need support for at least 2 level priority for messages.

We want to avoid using slow track and fast track queue. ( 2 queues ).

Thanks,
Varsha.

From: rabbitmq-discuss [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Michael Klishin
Sent: Friday, January 24, 2014 5:31 AM
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Question about message priority

2014/1/24 Varsha Dashputre <varsha_dashputre at persistent.co.in<mailto:varsha_dashputre at persistent.co.in>>
However at the receiver?s end, messages are received in FIFO manner. Am I missing on anything?
Which version of RabbitMQ supports message delivery with message priority?
Or it is not yet supported?

They are not supported.
--
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin

DISCLAIMER
==========
This e-mail may contain privileged and confidential information which is the property of Persistent Systems Ltd. It is intended only for the use of the individual or entity to which it is addressed. If you are not the intended recipient, you are not authorized to read, retain, copy, print, distribute or use this message. If you have received this communication in error, please notify the sender and delete all copies of this message. Persistent Systems Ltd. does not accept any liability for virus infected mails.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/7d627d9e/attachment.html>

From drax68 at gmail.com  Fri Jan 24 10:48:21 2014
From: drax68 at gmail.com (Andrew M.)
Date: Fri, 24 Jan 2014 14:48:21 +0400
Subject: [rabbitmq-discuss] Rabbitmq config reload
In-Reply-To: <52DEE692.50209@rabbitmq.com>
References: <704342ac-7cec-4004-b7dd-68b2a1cf9787@googlegroups.com>
 <52DEE692.50209@rabbitmq.com>
Message-ID: <52E244F5.1080607@gmail.com>

On 22.01.2014 01:28, Simon MacMullen wrote:
> On 21/01/2014 19:19, Andrew M. wrote:
>> Is this possible to reload config/shovel config without restarting whole
>> rabbitmq service?
>
> No, there's no built in support for reloading the config I'm afraid.
>
> You might be able to build some "rabbitmqctl eval" command line that
> stops the shovel app, reloads the config and starts the app up again. I
> haven't heard of anybody making that work though.
>
> You can also run shovels in an entirely separate broker (i.e. making
> remote network connections to both source and desitnation brokers).
> Restarting such a broker is then less disruptive.
>
> This will change in 3.3.0 (and is already available in the nightlies) -
> you can manage shovels in the same way as federation works at the moment
> (with rabbitmqctl / management) - see
> http://next.rabbitmq.com/shovel-dynamic.html for more details.
>
> Cheers, Simon
>

Thanks for answer, Simon. For now we started to use eval expression for 
reloading shovel application on config update. Another question is - for 
reloading shovel application to be a non-disruptive, fail-safe 
operation, how we can be sure that no messages from source server were 
lost during reload?

From simon at rabbitmq.com  Fri Jan 24 10:51:46 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 24 Jan 2014 10:51:46 +0000
Subject: [rabbitmq-discuss] Rabbitmq config reload
In-Reply-To: <52E244F5.1080607@gmail.com>
References: <704342ac-7cec-4004-b7dd-68b2a1cf9787@googlegroups.com>
 <52DEE692.50209@rabbitmq.com> <52E244F5.1080607@gmail.com>
Message-ID: <52E245C2.9000301@rabbitmq.com>

On 24/01/2014 10:48, Andrew M. wrote:
> Thanks for answer, Simon. For now we started to use eval expression for
> reloading shovel application on config update. Another question is - for
> reloading shovel application to be a non-disruptive, fail-safe
> operation, how we can be sure that no messages from source server were
> lost during reload?

As long as the shovel is in on_confirm mode you should be fine (that's 
the default).

Cheers, Simon

From simon at rabbitmq.com  Fri Jan 24 10:54:56 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 24 Jan 2014 10:54:56 +0000
Subject: [rabbitmq-discuss] How to manage changes to exchanges and
 queues in different production environments
In-Reply-To: <095ab46d-9800-4d29-88e1-0f319bd048b1@googlegroups.com>
References: <095ab46d-9800-4d29-88e1-0f319bd048b1@googlegroups.com>
Message-ID: <52E24680.1020702@rabbitmq.com>

On 23/01/2014 21:00, Ulrich von Poblotzki wrote:
> I was thinking of using the export and import for the
> management plugin. But I can't take the whole configuration from develop
> to test, to production, because parts of them belong to unfinished
> versions.

You can hand edit the exported config file to remove the bits you don't 
want?

The AMQPish approach is to have your applications declare the entities 
they need when they start up. That way there's no change management 
involved, things should Just Work. I certainly haven't heard of an 
equivalent of Liquibase.

Cheers, Simon


From mklishin at gopivotal.com  Fri Jan 24 11:02:51 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 24 Jan 2014 15:02:51 +0400
Subject: [rabbitmq-discuss] Question about message priority
In-Reply-To: <bf54c5c6f7f34393967ecaebe1820c92@SINPR04MB057.apcprd04.prod.outlook.com>
References: <11a0209bf5934fd79dfce49e7f9fc99c@SINPR04MB057.apcprd04.prod.outlook.com>
 <CAE3HoVTNqLWFK=2e0O3hN77O7Lt6nO2mmd+XnKe-0mbNyd1Byw@mail.gmail.com>
 <bf54c5c6f7f34393967ecaebe1820c92@SINPR04MB057.apcprd04.prod.outlook.com>
Message-ID: <A7CCD4D6-0E32-4E99-9026-34A5BEBEA51F@rabbitmq.com>


On 24 Jan 2014, at 14:40, Varsha Dashputre <varsha_dashputre at persistent.co.in> wrote:

> Is there a plan to support those?

There is but there is no timeline.

> We are using rabbit MQ and need support for at least 2 level priority for messages.
>  
> We want to avoid using slow track and fast track queue. ( 2 queues ).

Can you explain why? If you primarily want messages from the ?fast? queue be consumed
without waiting for all the ?slow? queue or you want that if there?s at least one ?fast? message
enqueued, all ?slow? message processing stops until there are no more ?fast? ones?

In the former case, you can simply use two queues and two consumers on separate channels. 

MK

Software Engineer, Pivotal/RabbitMQ



From mklishin at gopivotal.com  Fri Jan 24 11:05:32 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 24 Jan 2014 15:05:32 +0400
Subject: [rabbitmq-discuss] Question about message priority
In-Reply-To: <A7CCD4D6-0E32-4E99-9026-34A5BEBEA51F@rabbitmq.com>
References: <11a0209bf5934fd79dfce49e7f9fc99c@SINPR04MB057.apcprd04.prod.outlook.com>
 <CAE3HoVTNqLWFK=2e0O3hN77O7Lt6nO2mmd+XnKe-0mbNyd1Byw@mail.gmail.com>
 <bf54c5c6f7f34393967ecaebe1820c92@SINPR04MB057.apcprd04.prod.outlook.com>
 <A7CCD4D6-0E32-4E99-9026-34A5BEBEA51F@rabbitmq.com>
Message-ID: <54A746DD-D01C-435A-B829-6FCB55720EE3@gopivotal.com>

On 24 Jan 2014, at 15:02, Michael Klishin <mklishin at gopivotal.com> wrote:

>  If you primarily want messages from the ?fast? queue be consumed
> without waiting for all the ?slow? queue

This should read ?do you want ?"
--
MK

Software Engineer, Pivotal/RabbitMQ



From michael.justin at gmx.net  Fri Jan 24 11:18:37 2014
From: michael.justin at gmx.net (Michael Justin)
Date: Fri, 24 Jan 2014 12:18:37 +0100
Subject: [rabbitmq-discuss] [rabbitmq-stomp] Is the use of receipt header
 for SUBSCRIBE still recommended?
Message-ID: <lbti62$735$1@ger.gmane.org>

Hello,

following the suggestions in a thread of 2011, I have implemented a 
'wait for receipt' in my Stomp library for RabbitMQ. This was a 
workaround based on the asynchronous processing of SUBSCRIBE frames on 
the broker which could cause loss of messages which have been sent after 
the SUBSCRIBE, but before the broker finished its processing:

"[2.4.0] random message loss with Stomp and topics?"
http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-April/012470.html

The suggested way to guarantee that a SUBSCRIBE has finished was to 
provide a receipt: header and then wait for the receipt.


Has there been a change in the RabbitMQ STOMP plug-in since, which makes 
this workaround obsolete, or is it still recommended to use a receipt?


Many thanks in advance
-- 
Michael Justin
habarisoft - Enterprise Messaging Software for Delphi
http://www.habarisoft.com/


From emile at rabbitmq.com  Fri Jan 24 11:52:47 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 24 Jan 2014 11:52:47 +0000
Subject: [rabbitmq-discuss] [rabbitmq-stomp] Is the use of receipt
 header for SUBSCRIBE still recommended?
In-Reply-To: <lbti62$735$1@ger.gmane.org>
References: <lbti62$735$1@ger.gmane.org>
Message-ID: <52E2540F.3090700@rabbitmq.com>


Hi Michael,

On 24/01/14 11:18, Michael Justin wrote:

> Has there been a change in the RabbitMQ STOMP plug-in since, which makes 
> this workaround obsolete, or is it still recommended to use a receipt?

There have been numerous improvements to the STOMP adapter since v2.4.0,
but SUBSCRIBE remains an asynchronous operation. As Rob suggested,
requiring a receipt makes it a synchronous operation. If your
application requires confirmation that the subscription is in place then
you need the synchronous version.



-Emile





From simon at rabbitmq.com  Fri Jan 24 12:20:47 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 24 Jan 2014 12:20:47 +0000
Subject: [rabbitmq-discuss] Behaviour of Federated Queues
In-Reply-To: <52E1407B.8060901@one.com>
References: <52E1407B.8060901@one.com>
Message-ID: <52E25A9F.2090802@rabbitmq.com>

On 23/01/2014 16:16, Josh West wrote:
> I have a question regarding the behaviour of federated queues...

<snip>

> I have noticed that if I create a queue on broker1 with name
> "broker1.foo.bar" (for example), the queue is automatically created on
> broker2 and broker3.  Should this occur?  Or should federation only
> create the queue on upstream brokers when needed (ad-hoc)?

It should occur. I'm not sure when 'needed' would be; when you publish 
to it?

If your aim is to make sure that you can publish anywhere and have the 
publishing application determine which node the message ends up on, you 
might find that exchange federation works better for you; have a single 
federated exchange and bind (unfederated) queues to it with routing keys 
like broker1.*.

Not that federated queues are necessarily bad in this scenario, but yes, 
you'll have a lot of queues around.

> I ask for two reasons:
>
> 1. This could be a waste of resources if one has lots of queues matching
> federation patterns or if one has say 200+ brokers federated with each
> other.

200 queues is not actually a huge number. Plenty of people have many 
thousands of queues.

> 2. When queues are created with the Auto Delete parameter, that
> parameter is of course properly propagated.  But say a client puts a
> message into the queue "broker1.foo.bar" on broker2 and say a client
> retrieves the message from that same queue on broker1.  The Auto Delete
> parameter behaviour would be triggered and the queue is then deleted
> from broker1 and broker2 (upon client disconnection). But... Since
> nobody has ever put any messages into the queue "broker1.foo.bar"
> residing on broker3, the queue will remain defined possibly indefinitely.

That's not how autodelete works - queues autodelete when their last 
consumer goes away, regardless of whether messages have been published 
to them.

So I see this working correctly - when a consumer consumes from 
broker1.foo.bar on broker1, that consumer gets propagated to 
broker1.foo.bar on broker3. When the consumer is cancelled, cancel is 
also propagated and both queues delete.

However, I think there is the opposite problem around auto-delete and 
queue federation - since the federation mechanism controls message flow 
by consuming and cancelling from the upstream, it could cause federated 
autodelete queues to delete themselves too early.

I'm not sure what, if anything, can be done about that. It might be that 
autodelete and queue federation just don't work well together.

Cheers, Simon

From jan.kaliszewski at nask.pl  Fri Jan 24 12:44:55 2014
From: jan.kaliszewski at nask.pl (Jan Kaliszewski)
Date: Fri, 24 Jan 2014 13:44:55 +0100
Subject: [rabbitmq-discuss] Active Directory users of
 dn_lookup_attribute? (was Re: OpenLDAP-based auth with 'other_bind' option:
 no DN attribute?)
In-Reply-To: <52DA61F8.9010701@rabbitmq.com>
References: <20131205145345.53ac312c@krasoola.nask.waw.pl>
 <52A1C130.8010004@rabbitmq.com> <52CD534C.9020205@rabbitmq.com>
 <20140117201613.1a69be4e@krasoola.nask.waw.pl>
 <52DA61F8.9010701@rabbitmq.com>
Message-ID: <20140124134455.70282912@krasoola.nask.waw.pl>

2014-01-18 11:14, Simon MacMullen <simon at rabbitmq.com> dixit:

> On 17/01/2014 7:16PM, Jan Kaliszewski wrote:
> > 2014-01-08 13:31, Simon MacMullen <simon at rabbitmq.com> dixit:
> >
> >> On 06/12/13 12:21, Simon MacMullen wrote:
> >>> So I'll file a bug for this (your fix looks correct, but I want to
> >>> make sure it doesn't break against AD).
> >>
> >> So I haven't made any progress with this, largely because I don't
> >> have an Active Directory installation any more to test with, and I
> >> really don't fancy setting one up from scratch.
> >
> > Unfortunately, me neither. :(
> 
> The change will be in the next release anyway though; I went back and 
> checked RFC4511 and that says the field which populates object_name
> has to be there, so I think we're good.
> 
> Cheers, Simon

Thank you very much! :)

Cheers.
*j

-- 
Jan Kaliszewski <jan.kaliszewski at nask.pl>

From minaev at gmail.com  Fri Jan 24 13:06:40 2014
From: minaev at gmail.com (Dimitri Minaev)
Date: Fri, 24 Jan 2014 17:06:40 +0400
Subject: [rabbitmq-discuss] RabbitMQ hangs, does not accept connections
In-Reply-To: <c8148af0-744b-479b-a574-4f2ded542200@googlegroups.com>
References: <CANTUpDBuF30tFVcdsG0kcc1in9nwphvaa=L6LPeOenPuhdU7sw@mail.gmail.com>
 <4EF30FE4.8060100@rabbitmq.com>
 <CANTUpDCTBEM1F9-g+8USa2jUuLT6CM2i72y+OhAzeGX+tP=heQ@mail.gmail.com>
 <4EF3162A.7040009@rabbitmq.com>
 <CANTUpDAdvha2aG1zckpywpK-0irDtuDw9en6xJ3Jbr__k7nx8g@mail.gmail.com>
 <CANTUpDA68DkfYF+45rp3E9AQ9p-M_kK1ff9EzOVX7Hmpkz2GwA@mail.gmail.com>
 <4EFC3450.40901@rabbitmq.com>
 <CANTUpDCZNf7+WahP_Y6osyVX+PuxwN7gZnspystbwgPcc-q5nA@mail.gmail.com>
 <4EFDAA72.9090605@rabbitmq.com> <4EFDC47D.7060204@rabbitmq.com>
 <CANTUpDBbvHcQx+pANZLTxYiH010UmXZJDUweW9XwOLLwRT8gMw@mail.gmail.com>
 <4EFDDC6E.8060200@rabbitmq.com>
 <CANTUpDAHi9K_mAHa8hFHTGGy_iAh6ZNWvNsq6kGvDjLn45B5TA@mail.gmail.com>
 <CANTUpDD+MSUSVCTDLtQpeTLsrHyrXv9TVm5a_c-=xCHbWisPrw@mail.gmail.com>
 <4F564161.5040601@rabbitmq.com>
 <CANTUpDBQVtYav2tEWqynEyhSKmvApo4Q1WjCArYB3T_TVLC9FA@mail.gmail.com>
 <4F577D3D.2020003@rabbitmq.com>
 <CANTUpDCYWUD_YxUaZGUz7VZzbWoGAUj72amAWYxVZdG=bhKEow@mail.gmail.com>
 <4F59F976.4060807@rabbitmq.com>
 <CANTUpDDgWVbkXu+2ph9O7VcWCHdXyWXYDi3spEbL03LizdhW+Q@mail.gmail.com>
 <c8148af0-744b-479b-a574-4f2ded542200@googlegroups.com>
Message-ID: <CANTUpDAnX7OGpu0HTNUje7uGaA_G8r6yVFDj3Riba1qtDhXaYw@mail.gmail.com>

Hello, Maulik,

I believe, your problem is a different one, because the bug was gone since
we had upgraded to 2.8.7. The final message from the support service was:

> The Erlang/OTP team believe that the problem was due to a bug in their
code. A small change introduced in RabbitMQ 2.8.7 had the coincidental
fortunate effect of bypassing the bug, so the problem should not occur in
2.8.7 or later versions of RabbitMQ.

Good luck!



On 22 January 2014 17:29, maulik thaker <maulik.mihir at gmail.com> wrote:

>
> Hi Dmitri Minaev,
>
>         I am facing same problem with rabbitmq 3.2.2 ( I have gone through
> this thread and already checked memory and number of file-descriptors are
> not causing the problem). If you have solved that problem then please share
> the solution.
>
> Thanks,
> Maulik
>
>
> On Monday, 26 March 2012 11:15:45 UTC+5:30, Dmitri Minaev wrote:
>>
>> On 9 March 2012 16:37, Simon MacMullen <si... at rabbitmq.com> wrote:
>> > On 09/03/12 07:57, Dmitri Minaev wrote:
>>
>> >> If I understand correctly, the number of file descriptors used by
>> >> RabbitMQ in normal situation is roughly equal to the number of
>> >> `rabbitmqctl list_connections` + some constant (~30)? In case of that
>> >> hanging server, the number of AMQP connections never was close to the
>> >> FD limit (ulimit -n is 1024, fs.file-max = 1605698). The graph
>> >> reflecting  the number of open AMQP connections is attached to this
>> >> message.
>> >
>> >
>> > It's not really a constant, but to a first approximation, yes.
>> >
>> > Ultimately, the error I saw being passed up from the OS was ENFILE -
>> that's
>> > pretty unambiguous :)
>> >
>> > It's possible that if you're churning connections then "closed"
>> connections
>> > in FIN_WAIT2 could account for the majority of the used FDs. In 2.8.0
>> we'll
>> > set SO_LINGER to 0 to prevent this.
>>
>> I am still not sure about the role of the file descriptors in this
>> event. Last Friday, our Rabbit died again. Until the very last moment
>> the number of open file descriptors as reported by the management
>> plugin was 143 out of the total available number of 32765. It was
>> RabbitMQ v.2.7.0. On that same day I have upgraded to 2.8.1. Will
>> report on its behaviour later.
>>
>> --
>> With best regards,
>> Dmitri Minaev
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq... at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>


-- 
With best regards,
Dimitri Minaev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/d65236f1/attachment.html>

From jsw at one.com  Fri Jan 24 15:26:16 2014
From: jsw at one.com (Josh West)
Date: Fri, 24 Jan 2014 10:26:16 -0500
Subject: [rabbitmq-discuss] Behaviour of Federated Queues
In-Reply-To: <52E25A9F.2090802@rabbitmq.com>
References: <52E1407B.8060901@one.com> <52E25A9F.2090802@rabbitmq.com>
Message-ID: <52E28618.8010905@one.com>

On 01/24/2014 07:20 AM, Simon MacMullen wrote:
>
>> I have noticed that if I create a queue on broker1 with name
>> "broker1.foo.bar" (for example), the queue is automatically created on
>> broker2 and broker3.  Should this occur?  Or should federation only
>> create the queue on upstream brokers when needed (ad-hoc)?
>
> It should occur. I'm not sure when 'needed' would be; when you publish 
> to it?
>
> If your aim is to make sure that you can publish anywhere and have the 
> publishing application determine which node the message ends up on, 
> you might find that exchange federation works better for you; have a 
> single federated exchange and bind (unfederated) queues to it with 
> routing keys like broker1.*.

Yeah, this is a good idea.  This is actually the first route I 
attempted.  The issue I ran into was attempting RPC across federation -- 
where the callback queue may not be propagated in time.  Using federated 
queues solved the problem as long as the RPC callback queue begins with 
brokerN, where brokerN is the original caller.  This way I don't need to 
wait for the asynchronous federation.  The RPC server creates the 
reply_to queue on their end and of course the RPC client has also 
created that callback queue. As long as the names match up, whenever the 
async federation takes place, the message(s) in the callback queue on 
the RPC server side will zip on over to the callback queue on the RPC 
client side.  Very cool stuff :-)

>
>> 2. When queues are created with the Auto Delete parameter, that
>> parameter is of course properly propagated.  But say a client puts a
>> message into the queue "broker1.foo.bar" on broker2 and say a client
>> retrieves the message from that same queue on broker1.  The Auto Delete
>> parameter behaviour would be triggered and the queue is then deleted
>> from broker1 and broker2 (upon client disconnection). But... Since
>> nobody has ever put any messages into the queue "broker1.foo.bar"
>> residing on broker3, the queue will remain defined possibly 
>> indefinitely.
>
> That's not how autodelete works - queues autodelete when their last 
> consumer goes away, regardless of whether messages have been published 
> to them.
>
> So I see this working correctly - when a consumer consumes from 
> broker1.foo.bar on broker1, that consumer gets propagated to 
> broker1.foo.bar on broker3. When the consumer is cancelled, cancel is 
> also propagated and both queues delete.

I would think this would be the case.  But I believe I have found a 
situation where this is only happening properly 80% of the time.

I have modified the RPC code example from the rabbitmq tutorial. The 
modifications are such that the RPC server will also define the queue on 
their end with queue_declare().  Additionally, the RPC client chooses an 
explicit name for the RPC callback queue instead of an automatically 
assigned one.  The naming format is <broker>.<uuid> (e.g. 
broker2.3e815ef7-1322-49f1-8ca8-14118b4308df) if the RPC client is 
making the request from broker2.  If I run the RPC client 100 times, the 
code works all 100 times.  However keep in mind that there are 3 brokers 
in the federation scheme here, but broker1 and broker2 are the only ones 
communicating in this RPC example.  The <broker>.<uuid> queues are still 
declared/propagated over to broker3.  But only 80% of the time are the 
deletions also propagated.  Thus if I run the RPC client 100 times, with 
broker2 making an RPC fib(n) request to a server running on broker1, the 
RPC callback queue remains on broker3 20% of the time and is never deleted.

>
> However, I think there is the opposite problem around auto-delete and 
> queue federation - since the federation mechanism controls message 
> flow by consuming and cancelling from the upstream, it could cause 
> federated autodelete queues to delete themselves too early.

Interesting.

>
> I'm not sure what, if anything, can be done about that. It might be 
> that autodelete and queue federation just don't work well together.
>

It may be more than an issue just with auto delete.  It looks like 
deletions themselves may not be propagated at all.  For example:


#!/usr/bin/python

import pika

credentials = pika.PlainCredentials("guest", "guest")
conn_params = pika.ConnectionParameters("localhost", credentials = 
credentials)
connection  = pika.BlockingConnection(conn_params)
channel     = connection.channel()

for i in range(1,100):
         queue = "broker1.queue.%i" % (i)
         channel.queue_declare(queue=queue, auto_delete=True)
         channel.queue_delete(queue=queue)

channel.close()
connection.close()


While the queues are deleted from broker1, they still remain on broker2 
and broker3 :-(

Josh West
One.com - http://www.one.com


From Andrew.Dupont at sandisk.com  Fri Jan 24 15:41:23 2014
From: Andrew.Dupont at sandisk.com (Andrew Dupont)
Date: Fri, 24 Jan 2014 15:41:23 +0000
Subject: [rabbitmq-discuss] Cannot join cluster
Message-ID: <D319EC79FC9CEA47A2F1D21E7DDCB760BD648A@SACMBXIP01.sdcorp.global.sandisk.com>

Folks,

   I am attempting to cluster between a Windows 7 machine and a Ubuntu Linux machine. The hash values and cookies are identical, the host name of the windows machine is defined in /etc/hosts, the nodes appear healthy after boot up. When I try to join the cluster I get the following error :

root at UbuntuGuard:/usr/sbin# rabbitmqctl join_cluster --ram rabbit at WST-406379
Clustering node rabbit at UbuntuGuard with 'rabbit at WST-406379' ...
Error: {{case_clause,
            {{error,
                 {aborted,
                     {function_clause,
                         [{mnesia_schema,cs2list,
                              [{cstruct,schema,set,[],
                                   ['rabbit at WST-406379'],
                                   [],0,read_write,false,[],[],false,schema,
                                   [table,cstruct],
                                   [],[],[],
                                   {{1387,380707,385006},'rabbit at WST-406379'},
                                   {{2,0},[]}}]},
                          {mnesia_schema,do_merge_schema,1},
                          {mnesia_tm,apply_fun,3},
                          {mnesia_tm,execute_transaction,5},
                          {mnesia_schema,schema_coordinator,3}]}}},
             ['rabbit at WST-406379']}},
        [{rabbit_mnesia,change_extra_db_nodes,2},
         {rabbit_mnesia,init_db,3},
         {rabbit_mnesia,init_db_and_upgrade,3},
         {rabbit_mnesia,init_db_with_mnesia,4},
         {rabbit_mnesia,join_cluster,2},
         {rpc,'-handle_call_call/6-fun-0-',5}]}

Here is the content of the first log file 'rabbit at UbuntuGuard.log' :


=INFO REPORT==== 23-Jan-2014::14:48:47 ===
Stopping RabbitMQ

=INFO REPORT==== 23-Jan-2014::14:48:47 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : gMmCWNI4xHVsuha+KHhcCg==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 23-Jan-2014::14:51:33 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Disk free limit set to 50MB

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Management plugin started. Port: 15672

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Statistics database started.

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Server startup complete; 6 plugins started.
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine
* mochiweb
* amqp_client

=INFO REPORT==== 23-Jan-2014::15:21:44 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jan-2014::15:21:44 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 23-Jan-2014::15:21:45 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Disk free limit set to 50MB

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=WARNING REPORT==== 23-Jan-2014::15:21:45 ===
msg_store_persistent: rebuilding indices from scratch

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Management plugin started. Port: 15672

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Statistics database started.

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Server startup complete; 6 plugins started.
* amqp_client
* mochiweb
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine

=INFO REPORT==== 23-Jan-2014::15:23:10 ===
Stopping RabbitMQ

=INFO REPORT==== 23-Jan-2014::15:23:10 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 23-Jan-2014::15:26:34 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Disk free limit set to 50MB

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Management plugin started. Port: 15672

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Statistics database started.

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Server startup complete; 6 plugins started.
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine
* mochiweb
* amqp_client

=INFO REPORT==== 23-Jan-2014::15:29:23 ===
Stopping RabbitMQ

=INFO REPORT==== 23-Jan-2014::15:29:23 ===
stopped TCP Listener on [::]:5672

=ERROR REPORT==== 23-Jan-2014::15:36:49 ===
** System NOT running to use fully qualified hostnames **
** Hostname 192.168.1.101 is illegal **

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 23-Jan-2014::15:43:28 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Disk free limit set to 50MB

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Management plugin started. Port: 15672

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Statistics database started.

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Server startup complete; 6 plugins started.
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine
* mochiweb
* amqp_client

=INFO REPORT==== 24-Jan-2014::08:35:19 ===
Stopping RabbitMQ

=INFO REPORT==== 24-Jan-2014::08:35:19 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::08:36:41 ===
Halting Erlang VM

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 24-Jan-2014::08:37:29 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Disk free limit set to 50MB

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Management plugin started. Port: 15672

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Statistics database started.

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Server startup complete; 6 plugins started.
* amqp_client
* mochiweb
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine

=INFO REPORT==== 24-Jan-2014::08:47:03 ===
Stopping RabbitMQ

=INFO REPORT==== 24-Jan-2014::08:47:03 ===
stopped TCP Listener on [::]:5672

=ERROR REPORT==== 24-Jan-2014::08:47:29 ===
** System NOT running to use fully qualified hostnames **
** Hostname 192.168.1.101 is illegal **

=INFO REPORT==== 24-Jan-2014::10:12:33 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:13:11 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:15:04 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:17:31 ===
Halting Erlang VM

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 24-Jan-2014::10:18:19 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Disk free limit set to 50MB

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=WARNING REPORT==== 24-Jan-2014::10:18:19 ===
msg_store_persistent: rebuilding indices from scratch

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Adding vhost '/'

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Creating user 'guest'

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Setting user tags for user 'guest' to [administrator]

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Setting permissions for 'guest' in '/' to '.*', '.*', '.*'

=INFO REPORT==== 24-Jan-2014::10:18:20 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::10:18:20 ===
Management plugin started. Port: 15672

=INFO REPORT==== 24-Jan-2014::10:18:20 ===
Statistics database started.

=INFO REPORT==== 24-Jan-2014::10:18:20 ===
Server startup complete; 6 plugins started.
* amqp_client
* mochiweb
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine

=INFO REPORT==== 24-Jan-2014::10:22:17 ===
Stopping RabbitMQ

=INFO REPORT==== 24-Jan-2014::10:22:17 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::10:22:45 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:26:15 ===
Clustering with ['rabbit at WST-406379'] as ram node

=INFO REPORT==== 24-Jan-2014::10:30:08 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 24-Jan-2014::10:30:08 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 24-Jan-2014::10:30:08 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 24-Jan-2014::10:30:09 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Disk free limit set to 50MB

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=WARNING REPORT==== 24-Jan-2014::10:30:09 ===
msg_store_persistent: rebuilding indices from scratch

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Adding vhost '/'

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Creating user 'guest'

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Setting user tags for user 'guest' to [administrator]

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Setting permissions for 'guest' in '/' to '.*', '.*', '.*'

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Management plugin started. Port: 15672

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Statistics database started.

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Server startup complete; 6 plugins started.
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine
* mochiweb
* amqp_client

=INFO REPORT==== 24-Jan-2014::10:30:34 ===
Stopping RabbitMQ

=INFO REPORT==== 24-Jan-2014::10:30:34 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::10:31:02 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:31:08 ===
Clustering with ['rabbit at WST-406379'] as ram node

=INFO REPORT==== 24-Jan-2014::10:31:49 ===
Clustering with ['rabbit at WST-406379'] as ram node


Any idea what I may be doing wrong?

Thanks,
Andy



________________________________

PLEASE NOTE: The information contained in this electronic mail message is intended only for the use of the designated recipient(s) named above. If the reader of this message is not the intended recipient, you are hereby notified that you have received this message in error and that any review, dissemination, distribution, or copying of this message is strictly prohibited. If you have received this communication in error, please notify the sender by telephone or e-mail (as shown above) immediately and destroy any and all copies of this message in your possession (whether hard copies or electronically stored copies).

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/73bb6700/attachment.html>

From Andrew.Dupont at sandisk.com  Fri Jan 24 16:16:13 2014
From: Andrew.Dupont at sandisk.com (Andrew Dupont)
Date: Fri, 24 Jan 2014 16:16:13 +0000
Subject: [rabbitmq-discuss] Cannot join cluster
Message-ID: <D319EC79FC9CEA47A2F1D21E7DDCB760BD64D8@SACMBXIP01.sdcorp.global.sandisk.com>

Folks,

    I tried going the other direction, joining the Linux node cluster from the Windows side and I get the following error :

Clustering node 'rabbit at WST-406379' with rabbit at UbuntuGuard ...
Error : (inconsistent_cluster,"OTP version mismatch: local nmode is R15B03, remote node R14B04")

It appears to be a version mismatch issue. Is there a way to get specific versions for windows and Linux that match?

Thanks,
Andy

From: Andrew Dupont
Sent: Friday, January 24, 2014 10:41 AM
To: 'rabbitmq-discuss at lists.rabbitmq.com'
Subject: Cannot join cluster

Folks,

   I am attempting to cluster between a Windows 7 machine and a Ubuntu Linux machine. The hash values and cookies are identical, the host name of the windows machine is defined in /etc/hosts, the nodes appear healthy after boot up. When I try to join the cluster I get the following error :

root at UbuntuGuard:/usr/sbin# rabbitmqctl join_cluster --ram rabbit at WST-406379
Clustering node rabbit at UbuntuGuard with 'rabbit at WST-406379' ...
Error: {{case_clause,
            {{error,
                 {aborted,
                     {function_clause,
                         [{mnesia_schema,cs2list,
                              [{cstruct,schema,set,[],
                                   ['rabbit at WST-406379'],
                                   [],0,read_write,false,[],[],false,schema,
                                   [table,cstruct],
                                   [],[],[],
                                   {{1387,380707,385006},'rabbit at WST-406379'},
                                   {{2,0},[]}}]},
                          {mnesia_schema,do_merge_schema,1},
                          {mnesia_tm,apply_fun,3},
                          {mnesia_tm,execute_transaction,5},
                          {mnesia_schema,schema_coordinator,3}]}}},
             ['rabbit at WST-406379']}},
        [{rabbit_mnesia,change_extra_db_nodes,2},
         {rabbit_mnesia,init_db,3},
         {rabbit_mnesia,init_db_and_upgrade,3},
         {rabbit_mnesia,init_db_with_mnesia,4},
         {rabbit_mnesia,join_cluster,2},
         {rpc,'-handle_call_call/6-fun-0-',5}]}

Here is the content of the first log file 'rabbit at UbuntuGuard.log' :


=INFO REPORT==== 23-Jan-2014::14:48:47 ===
Stopping RabbitMQ

=INFO REPORT==== 23-Jan-2014::14:48:47 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : gMmCWNI4xHVsuha+KHhcCg==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 23-Jan-2014::14:51:33 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Disk free limit set to 50MB

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Management plugin started. Port: 15672

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Statistics database started.

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Server startup complete; 6 plugins started.
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine
* mochiweb
* amqp_client

=INFO REPORT==== 23-Jan-2014::15:21:44 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jan-2014::15:21:44 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 23-Jan-2014::15:21:45 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Disk free limit set to 50MB

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=WARNING REPORT==== 23-Jan-2014::15:21:45 ===
msg_store_persistent: rebuilding indices from scratch

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Management plugin started. Port: 15672

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Statistics database started.

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Server startup complete; 6 plugins started.
* amqp_client
* mochiweb
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine

=INFO REPORT==== 23-Jan-2014::15:23:10 ===
Stopping RabbitMQ

=INFO REPORT==== 23-Jan-2014::15:23:10 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 23-Jan-2014::15:26:34 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Disk free limit set to 50MB

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Management plugin started. Port: 15672

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Statistics database started.

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Server startup complete; 6 plugins started.
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine
* mochiweb
* amqp_client

=INFO REPORT==== 23-Jan-2014::15:29:23 ===
Stopping RabbitMQ

=INFO REPORT==== 23-Jan-2014::15:29:23 ===
stopped TCP Listener on [::]:5672

=ERROR REPORT==== 23-Jan-2014::15:36:49 ===
** System NOT running to use fully qualified hostnames **
** Hostname 192.168.1.101 is illegal **

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 23-Jan-2014::15:43:28 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Disk free limit set to 50MB

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Management plugin started. Port: 15672

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Statistics database started.

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Server startup complete; 6 plugins started.
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine
* mochiweb
* amqp_client

=INFO REPORT==== 24-Jan-2014::08:35:19 ===
Stopping RabbitMQ

=INFO REPORT==== 24-Jan-2014::08:35:19 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::08:36:41 ===
Halting Erlang VM

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 24-Jan-2014::08:37:29 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Disk free limit set to 50MB

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Management plugin started. Port: 15672

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Statistics database started.

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Server startup complete; 6 plugins started.
* amqp_client
* mochiweb
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine

=INFO REPORT==== 24-Jan-2014::08:47:03 ===
Stopping RabbitMQ

=INFO REPORT==== 24-Jan-2014::08:47:03 ===
stopped TCP Listener on [::]:5672

=ERROR REPORT==== 24-Jan-2014::08:47:29 ===
** System NOT running to use fully qualified hostnames **
** Hostname 192.168.1.101 is illegal **

=INFO REPORT==== 24-Jan-2014::10:12:33 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:13:11 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:15:04 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:17:31 ===
Halting Erlang VM

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 24-Jan-2014::10:18:19 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Disk free limit set to 50MB

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=WARNING REPORT==== 24-Jan-2014::10:18:19 ===
msg_store_persistent: rebuilding indices from scratch

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Adding vhost '/'

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Creating user 'guest'

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Setting user tags for user 'guest' to [administrator]

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Setting permissions for 'guest' in '/' to '.*', '.*', '.*'

=INFO REPORT==== 24-Jan-2014::10:18:20 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::10:18:20 ===
Management plugin started. Port: 15672

=INFO REPORT==== 24-Jan-2014::10:18:20 ===
Statistics database started.

=INFO REPORT==== 24-Jan-2014::10:18:20 ===
Server startup complete; 6 plugins started.
* amqp_client
* mochiweb
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine

=INFO REPORT==== 24-Jan-2014::10:22:17 ===
Stopping RabbitMQ

=INFO REPORT==== 24-Jan-2014::10:22:17 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::10:22:45 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:26:15 ===
Clustering with ['rabbit at WST-406379'] as ram node

=INFO REPORT==== 24-Jan-2014::10:30:08 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 24-Jan-2014::10:30:08 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 24-Jan-2014::10:30:08 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 24-Jan-2014::10:30:09 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Disk free limit set to 50MB

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=WARNING REPORT==== 24-Jan-2014::10:30:09 ===
msg_store_persistent: rebuilding indices from scratch

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Adding vhost '/'

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Creating user 'guest'

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Setting user tags for user 'guest' to [administrator]

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Setting permissions for 'guest' in '/' to '.*', '.*', '.*'

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Management plugin started. Port: 15672

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Statistics database started.

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Server startup complete; 6 plugins started.
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine
* mochiweb
* amqp_client

=INFO REPORT==== 24-Jan-2014::10:30:34 ===
Stopping RabbitMQ

=INFO REPORT==== 24-Jan-2014::10:30:34 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::10:31:02 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:31:08 ===
Clustering with ['rabbit at WST-406379'] as ram node

=INFO REPORT==== 24-Jan-2014::10:31:49 ===
Clustering with ['rabbit at WST-406379'] as ram node


Any idea what I may be doing wrong?

Thanks,
Andy



________________________________

PLEASE NOTE: The information contained in this electronic mail message is intended only for the use of the designated recipient(s) named above. If the reader of this message is not the intended recipient, you are hereby notified that you have received this message in error and that any review, dissemination, distribution, or copying of this message is strictly prohibited. If you have received this communication in error, please notify the sender by telephone or e-mail (as shown above) immediately and destroy any and all copies of this message in your possession (whether hard copies or electronically stored copies).

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/1887515a/attachment.html>

From simon at rabbitmq.com  Fri Jan 24 16:18:07 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 24 Jan 2014 16:18:07 +0000
Subject: [rabbitmq-discuss] Cannot join cluster
In-Reply-To: <D319EC79FC9CEA47A2F1D21E7DDCB760BD648A@SACMBXIP01.sdcorp.global.sandisk.com>
References: <D319EC79FC9CEA47A2F1D21E7DDCB760BD648A@SACMBXIP01.sdcorp.global.sandisk.com>
Message-ID: <52E2923F.2050908@rabbitmq.com>

On 24/01/2014 15:41, Andrew Dupont wrote:
> Any idea what I may be doing wrong?

I think you have incompatible Erlang versions on the two cluster nodes. 
Although I'm a bit sad to see that we don't produce a better error 
message in this case.

Cheers, Simon


From dmcintyre at gopivotal.com  Fri Jan 24 16:23:36 2014
From: dmcintyre at gopivotal.com (Duncan McIntyre)
Date: Fri, 24 Jan 2014 16:23:36 +0000
Subject: [rabbitmq-discuss] Cannot join cluster
In-Reply-To: <D319EC79FC9CEA47A2F1D21E7DDCB760BD64D8@SACMBXIP01.sdcorp.global.sandisk.com>
References: <D319EC79FC9CEA47A2F1D21E7DDCB760BD64D8@SACMBXIP01.sdcorp.global.sandisk.com>
Message-ID: <CAAaVn2C-HJ4FaauJzyq2eLL0Ca08kB5C6NNJMOo1tXFTf9-9NA@mail.gmail.com>

Andrew,

Follow these links to get other versions:

https://www.erlang-solutions.com/downloads/download-erlang-otp
http://www.erlang.org/download_release/16

Duncan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/a6f0d6be/attachment.html>

From Andrew.Dupont at sandisk.com  Fri Jan 24 16:28:25 2014
From: Andrew.Dupont at sandisk.com (Andrew Dupont)
Date: Fri, 24 Jan 2014 16:28:25 +0000
Subject: [rabbitmq-discuss] Cannot join cluster
Message-ID: <D319EC79FC9CEA47A2F1D21E7DDCB760BD64FC@SACMBXIP01.sdcorp.global.sandisk.com>

Folks,

  Issue resolved. I had already updated erlang on Linux to v15B03, but the old binaries for v14 were still in the path. I removed the old binaries and now the nodes are clustering correctly.

Thanks,
Andy

From: Andrew Dupont
Sent: Friday, January 24, 2014 11:16 AM
To: 'rabbitmq-discuss at lists.rabbitmq.com'
Subject: RE: Cannot join cluster

Folks,

    I tried going the other direction, joining the Linux node cluster from the Windows side and I get the following error :

Clustering node 'rabbit at WST-406379' with rabbit at UbuntuGuard ...
Error : (inconsistent_cluster,"OTP version mismatch: local nmode is R15B03, remote node R14B04")

It appears to be a version mismatch issue. Is there a way to get specific versions for windows and Linux that match?

Thanks,
Andy

From: Andrew Dupont
Sent: Friday, January 24, 2014 10:41 AM
To: 'rabbitmq-discuss at lists.rabbitmq.com'
Subject: Cannot join cluster

Folks,

   I am attempting to cluster between a Windows 7 machine and a Ubuntu Linux machine. The hash values and cookies are identical, the host name of the windows machine is defined in /etc/hosts, the nodes appear healthy after boot up. When I try to join the cluster I get the following error :

root at UbuntuGuard:/usr/sbin# rabbitmqctl join_cluster --ram rabbit at WST-406379
Clustering node rabbit at UbuntuGuard with 'rabbit at WST-406379' ...
Error: {{case_clause,
            {{error,
                 {aborted,
                     {function_clause,
                         [{mnesia_schema,cs2list,
                              [{cstruct,schema,set,[],
                                   ['rabbit at WST-406379'],
                                   [],0,read_write,false,[],[],false,schema,
                                   [table,cstruct],
                                   [],[],[],
                                   {{1387,380707,385006},'rabbit at WST-406379'},
                                   {{2,0},[]}}]},
                          {mnesia_schema,do_merge_schema,1},
                          {mnesia_tm,apply_fun,3},
                          {mnesia_tm,execute_transaction,5},
                          {mnesia_schema,schema_coordinator,3}]}}},
             ['rabbit at WST-406379']}},
        [{rabbit_mnesia,change_extra_db_nodes,2},
         {rabbit_mnesia,init_db,3},
         {rabbit_mnesia,init_db_and_upgrade,3},
         {rabbit_mnesia,init_db_with_mnesia,4},
         {rabbit_mnesia,join_cluster,2},
         {rpc,'-handle_call_call/6-fun-0-',5}]}

Here is the content of the first log file 'rabbit at UbuntuGuard.log' :


=INFO REPORT==== 23-Jan-2014::14:48:47 ===
Stopping RabbitMQ

=INFO REPORT==== 23-Jan-2014::14:48:47 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : gMmCWNI4xHVsuha+KHhcCg==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 23-Jan-2014::14:51:33 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Disk free limit set to 50MB

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Management plugin started. Port: 15672

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Statistics database started.

=INFO REPORT==== 23-Jan-2014::14:51:33 ===
Server startup complete; 6 plugins started.
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine
* mochiweb
* amqp_client

=INFO REPORT==== 23-Jan-2014::15:21:44 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jan-2014::15:21:44 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 23-Jan-2014::15:21:45 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Disk free limit set to 50MB

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=WARNING REPORT==== 23-Jan-2014::15:21:45 ===
msg_store_persistent: rebuilding indices from scratch

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Management plugin started. Port: 15672

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Statistics database started.

=INFO REPORT==== 23-Jan-2014::15:21:45 ===
Server startup complete; 6 plugins started.
* amqp_client
* mochiweb
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine

=INFO REPORT==== 23-Jan-2014::15:23:10 ===
Stopping RabbitMQ

=INFO REPORT==== 23-Jan-2014::15:23:10 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 23-Jan-2014::15:26:34 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Disk free limit set to 50MB

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Management plugin started. Port: 15672

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Statistics database started.

=INFO REPORT==== 23-Jan-2014::15:26:34 ===
Server startup complete; 6 plugins started.
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine
* mochiweb
* amqp_client

=INFO REPORT==== 23-Jan-2014::15:29:23 ===
Stopping RabbitMQ

=INFO REPORT==== 23-Jan-2014::15:29:23 ===
stopped TCP Listener on [::]:5672

=ERROR REPORT==== 23-Jan-2014::15:36:49 ===
** System NOT running to use fully qualified hostnames **
** Hostname 192.168.1.101 is illegal **

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 23-Jan-2014::15:43:28 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Disk free limit set to 50MB

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Management plugin started. Port: 15672

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Statistics database started.

=INFO REPORT==== 23-Jan-2014::15:43:28 ===
Server startup complete; 6 plugins started.
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine
* mochiweb
* amqp_client

=INFO REPORT==== 24-Jan-2014::08:35:19 ===
Stopping RabbitMQ

=INFO REPORT==== 24-Jan-2014::08:35:19 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::08:36:41 ===
Halting Erlang VM

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 24-Jan-2014::08:37:29 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Disk free limit set to 50MB

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Management plugin started. Port: 15672

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Statistics database started.

=INFO REPORT==== 24-Jan-2014::08:37:29 ===
Server startup complete; 6 plugins started.
* amqp_client
* mochiweb
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine

=INFO REPORT==== 24-Jan-2014::08:47:03 ===
Stopping RabbitMQ

=INFO REPORT==== 24-Jan-2014::08:47:03 ===
stopped TCP Listener on [::]:5672

=ERROR REPORT==== 24-Jan-2014::08:47:29 ===
** System NOT running to use fully qualified hostnames **
** Hostname 192.168.1.101 is illegal **

=INFO REPORT==== 24-Jan-2014::10:12:33 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:13:11 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:15:04 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:17:31 ===
Halting Erlang VM

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 24-Jan-2014::10:18:19 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Disk free limit set to 50MB

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=WARNING REPORT==== 24-Jan-2014::10:18:19 ===
msg_store_persistent: rebuilding indices from scratch

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Adding vhost '/'

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Creating user 'guest'

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Setting user tags for user 'guest' to [administrator]

=INFO REPORT==== 24-Jan-2014::10:18:19 ===
Setting permissions for 'guest' in '/' to '.*', '.*', '.*'

=INFO REPORT==== 24-Jan-2014::10:18:20 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::10:18:20 ===
Management plugin started. Port: 15672

=INFO REPORT==== 24-Jan-2014::10:18:20 ===
Statistics database started.

=INFO REPORT==== 24-Jan-2014::10:18:20 ===
Server startup complete; 6 plugins started.
* amqp_client
* mochiweb
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine

=INFO REPORT==== 24-Jan-2014::10:22:17 ===
Stopping RabbitMQ

=INFO REPORT==== 24-Jan-2014::10:22:17 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::10:22:45 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:26:15 ===
Clustering with ['rabbit at WST-406379'] as ram node

=INFO REPORT==== 24-Jan-2014::10:30:08 ===
Starting RabbitMQ 3.2.2 on Erlang R14B04
Copyright (C) 2007-2013 GoPivotal, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 24-Jan-2014::10:30:08 ===
node           : rabbit at UbuntuGuard
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : GUR/NXfFK6d+uLiFw1EL9g==
log            : /var/log/rabbitmq/rabbit at UbuntuGuard.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard.log>
sasl log       : /var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log<mailto:/var/log/rabbitmq/rabbit at UbuntuGuard-sasl.log>
database dir   : /var/lib/rabbitmq/mnesia/rabbit at UbuntuGuard

=INFO REPORT==== 24-Jan-2014::10:30:08 ===
Limiting to approx 924 file handles (829 sockets)

=WARNING REPORT==== 24-Jan-2014::10:30:09 ===
Only 2048MB of 3755MB memory usable due to limited address space.

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Memory limit set to 819MB of 3755MB total.

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Disk free limit set to 50MB

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=WARNING REPORT==== 24-Jan-2014::10:30:09 ===
msg_store_persistent: rebuilding indices from scratch

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Adding vhost '/'

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Creating user 'guest'

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Setting user tags for user 'guest' to [administrator]

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Setting permissions for 'guest' in '/' to '.*', '.*', '.*'

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Management plugin started. Port: 15672

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Statistics database started.

=INFO REPORT==== 24-Jan-2014::10:30:09 ===
Server startup complete; 6 plugins started.
* rabbitmq_management
* rabbitmq_management_agent
* rabbitmq_web_dispatch
* webmachine
* mochiweb
* amqp_client

=INFO REPORT==== 24-Jan-2014::10:30:34 ===
Stopping RabbitMQ

=INFO REPORT==== 24-Jan-2014::10:30:34 ===
stopped TCP Listener on [::]:5672

=INFO REPORT==== 24-Jan-2014::10:31:02 ===
Clustering with ['rabbit at WST-406379'] as disc node

=INFO REPORT==== 24-Jan-2014::10:31:08 ===
Clustering with ['rabbit at WST-406379'] as ram node

=INFO REPORT==== 24-Jan-2014::10:31:49 ===
Clustering with ['rabbit at WST-406379'] as ram node


Any idea what I may be doing wrong?

Thanks,
Andy



________________________________

PLEASE NOTE: The information contained in this electronic mail message is intended only for the use of the designated recipient(s) named above. If the reader of this message is not the intended recipient, you are hereby notified that you have received this message in error and that any review, dissemination, distribution, or copying of this message is strictly prohibited. If you have received this communication in error, please notify the sender by telephone or e-mail (as shown above) immediately and destroy any and all copies of this message in your possession (whether hard copies or electronically stored copies).

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/dcd401a7/attachment.html>

From jkuch at gopivotal.com  Fri Jan 24 17:56:34 2014
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Fri, 24 Jan 2014 09:56:34 -0800
Subject: [rabbitmq-discuss] Publisher confirms always wait for consumer
	ack/nack
In-Reply-To: <CA+6GtrAfWMf_wBHhBoAJdrHfR557TxAC1i+y86J93pUYT05LhA@mail.gmail.com>
References: <CA+6GtrDtS6jLj7y778TuLEHSbb6_WKW4+57Wctmfg-=O3v75Lg@mail.gmail.com>
 <CANOx8N=JtX6sEVm0uqPsZxMoUH1D7OiSxiPmeovYoaocT6uMgw@mail.gmail.com>
 <CA+6GtrAfWMf_wBHhBoAJdrHfR557TxAC1i+y86J93pUYT05LhA@mail.gmail.com>
Message-ID: <CANOx8NksMdgoQkdjNsz+16rmC5Cwe5Vd=K9udTgm8pONm3_8QQ@mail.gmail.com>

Hi, Bertrand...

On Thu, Jan 23, 2014 at 12:54 AM, Bertrand LEMASLE <blemasle at allocine.fr>wrote:

>
> "Totally unrelated" : that's what I undestand from the documentation, but
> it seems to be what's going on in my case.
>

My apologies... I confess I misread your original report by skimming over
the meaty part of it and reading what I expected to see rather than what
you in fact wrote.

After some digging, I discovered that my producer and consumer run on the
> same thread but they souldn't (for now, producer and consumer run in the
> same application). So my consumer thread sleep affects my publisher thread.
> That's obviously a flaw in my own design and seems to have nothing to do
> with RabbitMQ itself.
>
> Thanks for your concern and your clarification about publisher confirms
> which made me think about monitoring running threads and so came onto this !
>

Ah, gotcha!  Glad you found an external to Rabbit cause for the weird
behavior.

When Matthias pointed out my carelessness in misreading your original
message I made a note to come back to your report and try to reproduce your
observations, but knew I wouldn't be able to get to it for a couple of
days.

The behavior you were describing was indeed surprising to us (when I became
less daft and actually grasped what you were saying), as it was to you.

Again, my apologies for my sloppiness and adding confusion to the situation.

Best regards,
Jerry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/b956be6c/attachment.html>

From k.madnani84 at gmail.com  Fri Jan 24 18:53:30 2014
From: k.madnani84 at gmail.com (k.madnani84)
Date: Fri, 24 Jan 2014 10:53:30 -0800 (PST)
Subject: [rabbitmq-discuss] connection_closed_abruptly Message
Message-ID: <1390589610450-32857.post@n5.nabble.com>

Hi,

I am connecting my rabbitmq with Jmeter for performance testing using a non
GUI mode.I am trying to find out the max number of connections rabbit can
handle but after certain amount of time the connections start getting closed
automatically.I have set heartbeat to 0 both in the rabbitmq.config as well
as in my client and my timeout is also way to high.I am getting these in
logs:

=WARNING REPORT==== 24-Jan-2014::10:48:55 ===
closing AMQP connection <0.11119.1> (135.213.25.220:33885 ->
135.213.26.33:5672):
connection_closed_abruptly

Could anybody tell why its hapening so?

Thanks & Regards,
Kuldip



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/connection-closed-abruptly-Message-tp32857.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From viraj.gupte at credorax.com  Fri Jan 24 20:34:45 2014
From: viraj.gupte at credorax.com (Viraj Gupte)
Date: Fri, 24 Jan 2014 12:34:45 -0800 (PST)
Subject: [rabbitmq-discuss] Compression of messages in RabbitMQ
Message-ID: <2db6eabb-e7f9-4e59-b128-0db388dcff57@googlegroups.com>

Is it possible to compress messages in RabbitMQ to minimize the traffic 
over WAN links. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/7593473c/attachment.html>

From jkuch at gopivotal.com  Fri Jan 24 20:42:47 2014
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Fri, 24 Jan 2014 12:42:47 -0800
Subject: [rabbitmq-discuss] Compression of messages in RabbitMQ
In-Reply-To: <2db6eabb-e7f9-4e59-b128-0db388dcff57@googlegroups.com>
References: <2db6eabb-e7f9-4e59-b128-0db388dcff57@googlegroups.com>
Message-ID: <CANOx8NnuR0vT7c=Pq0DD7RELzq9vM0CVHwMt_EpHCXaAg1oT3Q@mail.gmail.com>

Rabbit doesn't care about the payloads of your messages, viewing them as
opaque binary data that it doesn't tamper with, so you're free to
compress/decompress at your producers and consumers.




On Fri, Jan 24, 2014 at 12:34 PM, Viraj Gupte <viraj.gupte at credorax.com>wrote:

> Is it possible to compress messages in RabbitMQ to minimize the traffic
> over WAN links.
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/d9173ab4/attachment.html>

From jkuch at gopivotal.com  Fri Jan 24 20:42:48 2014
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Fri, 24 Jan 2014 12:42:48 -0800
Subject: [rabbitmq-discuss] Compression of messages in RabbitMQ
In-Reply-To: <2db6eabb-e7f9-4e59-b128-0db388dcff57@googlegroups.com>
References: <2db6eabb-e7f9-4e59-b128-0db388dcff57@googlegroups.com>
Message-ID: <CANOx8NkGyzyEwyvEkUQsO2-JF7W5GF4GPcpg=nPHYyNkrs_8Ww@mail.gmail.com>

Rabbit doesn't care about the payloads of your messages, viewing them as
opaque binary data that it doesn't tamper with, so you're free to
compress/decompress at your producers and consumers.




On Fri, Jan 24, 2014 at 12:34 PM, Viraj Gupte <viraj.gupte at credorax.com>wrote:

> Is it possible to compress messages in RabbitMQ to minimize the traffic
> over WAN links.
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140124/ab15d0cc/attachment.html>

From simon at rabbitmq.com  Sat Jan 25 10:02:10 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Sat, 25 Jan 2014 10:02:10 +0000
Subject: [rabbitmq-discuss] connection_closed_abruptly Message
In-Reply-To: <1390589610450-32857.post@n5.nabble.com>
References: <1390589610450-32857.post@n5.nabble.com>
Message-ID: <52E38BA2.3060609@rabbitmq.com>

connection_closed_abruptly means the client closed the connection 
without going through the AMQP connection close handshake. So whatever 
the problem is, it's likely to be on the client.

Cheers, Simon

On 24/01/2014 6:53PM, k.madnani84 wrote:
> Hi,
>
> I am connecting my rabbitmq with Jmeter for performance testing using a non
> GUI mode.I am trying to find out the max number of connections rabbit can
> handle but after certain amount of time the connections start getting closed
> automatically.I have set heartbeat to 0 both in the rabbitmq.config as well
> as in my client and my timeout is also way to high.I am getting these in
> logs:
>
> =WARNING REPORT==== 24-Jan-2014::10:48:55 ===
> closing AMQP connection <0.11119.1> (135.213.25.220:33885 ->
> 135.213.26.33:5672):
> connection_closed_abruptly
>
> Could anybody tell why its hapening so?
>
> Thanks & Regards,
> Kuldip
>
>
>
> --
> View this message in context: http://rabbitmq.1065348.n5.nabble.com/connection-closed-abruptly-Message-tp32857.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

-- 
Simon MacMullen
RabbitMQ, Pivotal

From michael.s.klishin at gmail.com  Sat Jan 25 10:37:30 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Sat, 25 Jan 2014 14:37:30 +0400
Subject: [rabbitmq-discuss] connection_closed_abruptly Message
In-Reply-To: <1390589610450-32857.post@n5.nabble.com>
References: <1390589610450-32857.post@n5.nabble.com>
Message-ID: <CAE3HoVShBRN=Vf2E0xWu+=Efu7QHPW+2Z0kBnYRnPL0QQuvxSQ@mail.gmail.com>

2014/1/24 k.madnani84 <k.madnani84 at gmail.com>

> =WARNING REPORT==== 24-Jan-2014::10:48:55 ===
> closing AMQP connection <0.11119.1> (135.213.25.220:33885 ->
> 135.213.26.33:5672):
> connection_closed_abruptly
>
> Could anybody tell why its hapening so?
>

Client closed TCP connection without closing AMQP 0-9-1 connection properly.

This is harmless and can indicate a client issue ranging from abrupt
process termination
to client library bugs.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140125/5fbc6797/attachment.html>

From jesper.louis.andersen at gmail.com  Sat Jan 25 10:51:05 2014
From: jesper.louis.andersen at gmail.com (Jesper Louis Andersen)
Date: Sat, 25 Jan 2014 11:51:05 +0100
Subject: [rabbitmq-discuss] connection_closed_abruptly Message
In-Reply-To: <CAE3HoVShBRN=Vf2E0xWu+=Efu7QHPW+2Z0kBnYRnPL0QQuvxSQ@mail.gmail.com>
References: <1390589610450-32857.post@n5.nabble.com>
 <CAE3HoVShBRN=Vf2E0xWu+=Efu7QHPW+2Z0kBnYRnPL0QQuvxSQ@mail.gmail.com>
Message-ID: <CAGrdgiVZjMHFzmVx1=GuF5rEDHpO62eTzLXf4PoBJMkVVHo1Qg@mail.gmail.com>

On Sat, Jan 25, 2014 at 11:37 AM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

> Client closed TCP connection without closing AMQP 0-9-1 connection
> properly.


If I remember correctly, that error message is sent if a client closes the
connection before the handshake has even happened. In other words, you have
a connection which gets closed down in the handshake. I have seen this on
some Node.js clients and/or Python clients I think, for one reason of the
other. If you want to dig further, RabbitMQ only has that atom defined in a
few places, so it should be easy to verify.

-- 
J.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140125/87e86162/attachment.html>

From woqimingweipeng at gmail.com  Sun Jan 26 03:20:31 2014
From: woqimingweipeng at gmail.com (Xie Yunpeng)
Date: Sun, 26 Jan 2014 11:20:31 +0800
Subject: [rabbitmq-discuss] memory leak with RabbitMQ 3.1.0 and erlang
	R16B03
In-Reply-To: <CAJhFpdc6xeWkFFjO7A_8UWd3qciWr91kTuR5czqZhRDL0xc8Ng@mail.gmail.com>
References: <CAAjbVJCntKor1hG+jGeo82No-T+0ePeNUXOeoDjdjF4K2_qN3Q@mail.gmail.com>
 <52D7B6F2.8040604@rabbitmq.com>
 <CAJhFpdc6xeWkFFjO7A_8UWd3qciWr91kTuR5czqZhRDL0xc8Ng@mail.gmail.com>
Message-ID: <CAAjbVJBogrqmY8+Yod1arrCh0pi9APeYucLaSqN1GavVK=3Fhw@mail.gmail.com>

after i upgrade rabbitmq to the latest version 3.2.2, all rabbitmq services
work well,the memory usage of  the most is about 200M


2014-01-16 Blake-R <blake-r at mail.ru>

> Hi. I'm use last RabbitMQ 3.2.2 and got same problem:
>
> http://rabbitmq.1065348.n5.nabble.com/badarg-in-dict-fetch-problem-on-basic-consume-ok-or-not-tp32572p32597.html
>
> 2014/1/16 Simon MacMullen <simon at rabbitmq.com>:
> > A couple of memory leaks have been fixed in the management plugin since
> > 3.1.0. From the changelog:
> >
> > 25600 fix consumer record leak in the management database (since 2.2.0)
> > 25629 fix memory leak in the presence of long-lived channels and
> >       short-lived queues (since 3.1.0)
> >
> > So an upgrade is definitely advised.
> >
> > Cheers, Simon
> >
> >
> > On 16/01/14 03:33, Xie Yunpeng wrote:
> >>
> >> my rabbitmq cluster consist of three rabbitmq service on three machine,
> >> and i use lvs to make other services can use one ip address connect to
> >> rabbitmq server. one of the machine handle three hundred connections and
> >> more than four thousand channles, send and revice rate is the same so
> >> there is no msg in queue.but it's memory usage is growing all the time
> >> until i stop_app/start_app, when i check memory usage on rabbitmq
> >> management it shows 2.3G, but i use top on the machine can see the
> >> rabbitmq use about 13G memory, how to solve this problem? is it a bug?
> >> memory info on this machine with rabbitmqctl report:
> >>   {erlang_version,
> >>       "Erlang R16B03 (erts-5.10.4) [source] [64-bit] [smp:24:24]
> >> [async-threads:30] [hipe] [kernel-poll:true]\n"},
> >>   {memory,
> >>       [{total,2476273832},
> >>        {connection_procs,155880032},
> >>        {queue_procs,5600},
> >>        {plugins,590576},
> >>        {other_proc,22481760},
> >>        {mnesia,104832},
> >>        {mgmt_db,2184042360},
> >>        {msg_index,40560},
> >>        {other_ets,41907368},
> >>        {binary,34012872},
> >>        {code,19853836},
> >>        {atom,703377},
> >>        {other_system,16650659}]},
> >>
> >>
> >> _______________________________________________
> >> rabbitmq-discuss mailing list
> >> rabbitmq-discuss at lists.rabbitmq.com
> >> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> >>
> >
> >
> > --
> > Simon MacMullen
> > RabbitMQ, Pivotal
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-discuss at lists.rabbitmq.com
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140126/6a416d31/attachment.html>

From tlhuang at 800best.com  Sun Jan 26 03:33:16 2014
From: tlhuang at 800best.com (Huang Tonglang)
Date: Sun, 26 Jan 2014 11:33:16 +0800
Subject: [rabbitmq-discuss] =?gb2312?b?tPC4tDogIE9kZCBwZXJmb3JtYW5jZSB0?=
 =?gb2312?b?ZXN0aW5nIHJlc3VsdA==?=
In-Reply-To: <4737A1A2-56B4-4E8A-9463-88C8585C7AC0@gopivotal.com>
References: <CAPCD91=dzOO2BFx5+5g+s3TBf_VBu97zxBJZ8OYwyzH06YvnKQ@mail.gmail.com>
 <CAMcAHLUE2z=w1i=Boa3-5m_4MpTsb0810tVGFUzFq80DMcKN-Q@mail.gmail.com>
 <CAPCD91nZOWCUMYNawk=fU9pffGyw9NyJqHghZMEjahmMDfzt9A@mail.gmail.com>
 <52DFDCC9.6030001@rabbitmq.com>
 <CAPCD91mL32_ZGYL7P6njMgg6_uuPH=2L2frUB+zyP7xhW7aV9w@mail.gmail.com>
 <CANOx8Nk+vKA+ngaRv-BtBPbb5f4yiici+swXBg9iYm4CcATQjg@mail.gmail.com>
 <023CBAD52AC91842B08759362DE8396C0FD5801CC1@bestex3.800best.net>
 <52925647-0E25-4B61-BBF8-38DEB659801C@rabbitmq.com>
 <4737A1A2-56B4-4E8A-9463-88C8585C7AC0@gopivotal.com>
Message-ID: <023CBAD52AC91842B08759362DE8396C0FD5801CCC@bestex3.800best.net>

1. I just test with a simple java client. 5 producer and 10 consumer for each of five queues,and ACK is on. 
2.The average message size is 1K.
3.4, I can see the ready messages are always 0
5. output of ps aux | grep beam: 
rabbitmq  3454 13.5  1.9 4694376 389988 ?      Sl   Jan21 957:54 /usr/local/lib/erlang/erts-5.10.4/bin/beam.smp -W w -K true -A30 -P 1048576 -- -root /usr/local/lib/erlang -progname erl -- -home /home/rabbitmq -- -pa /usr/local/sbin/../ebin -noshell -noinput -s rabbit boot -sname rabbit at rabbitmq-test -boot start_sasl -config /etc/rabbitmq/rabbitmq -kernel inet_default_connect_options [{nodelay,true}] -sasl errlog_type error -sasl sasl_error_logger false -rabbit error_logger {file,"/var/log/rabbitmq/rabbit at rabbitmq-test.log"} -rabbit sasl_error_logger {file,"/var/log/rabbitmq/rabbit at rabbitmq-test-sasl.log"} -rabbit enabled_plugins_file "/etc/rabbitmq/enabled_plugins" -rabbit plugins_dir "/usr/local/sbin/../plugins" -rabbit plugins_expand_dir "/data1/rabbitmq/mnesia/rabbit at rabbitmq-test-plugins-expand" -os_mon start_cpu_sup false -os_mon start_disksup false -os_mon start_memsup false -mnesia dir "/data1/rabbitmq/mnesia/rabbit at rabbitmq-test" -noshell -noinput
rabbitmq 21489  0.0  0.0 103240   868 pts/0    S+   11:31   0:00 grep beam
 
Another observation is producer connection is under flow control.

Thank you

Tonglang Huang

-----????-----
???: rabbitmq-discuss [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] ?? Michael Klishin
????: 2014?1?24? 17:16
???: Discussions about RabbitMQ
??: Re: [rabbitmq-discuss] Odd performance testing result

On 24 Jan 2014, at 11:38, Michael Klishin <mklishin at gopivotal.com> wrote:

> If you have 50 or even 90 cores and want to achieve max throughput, use more queues (e.g. as many as you have cores).

Oops, I did not notice the # of cores in your table.

Can you clarify a few things?

 * How do you run your benchmarks. Do you use PerfTest [1]?
 * What?s the average message size?
 * Are you sure messages are always routed?
 * Do you see messages piling up in the queues?
 * Can you post ps aux | grep beam output? (this will display Erlang VM flags)

1. http://www.rabbitmq.com/java-tools.html
--
MK

Software Engineer, Pivotal/RabbitMQ

_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From k.madnani84 at gmail.com  Sun Jan 26 08:02:09 2014
From: k.madnani84 at gmail.com (k.madnani84)
Date: Sun, 26 Jan 2014 00:02:09 -0800 (PST)
Subject: [rabbitmq-discuss] connection_closed_abruptly Message
In-Reply-To: <CAGrdgiVZjMHFzmVx1=GuF5rEDHpO62eTzLXf4PoBJMkVVHo1Qg@mail.gmail.com>
References: <1390589610450-32857.post@n5.nabble.com>
 <CAE3HoVShBRN=Vf2E0xWu+=Efu7QHPW+2Z0kBnYRnPL0QQuvxSQ@mail.gmail.com>
 <CAGrdgiVZjMHFzmVx1=GuF5rEDHpO62eTzLXf4PoBJMkVVHo1Qg@mail.gmail.com>
Message-ID: <1390723329008-32866.post@n5.nabble.com>

I further researched on it and here is my conclusion....I have 3 slaves which
hit the rabbitMQ node.Once they are able to make 800 succesfull connections
each, totalling to around 2400,then after it starts throwing this error:
com.rabbitmq.client.ShutdownSignalException: connection error; reason:
java.net.SocketTimeoutException: Timeout during Connection negotiation
	at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)
	at
com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)
	at
com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:313)
	... 9 more

I have my heartbeat set to 0 as well as conection.setConnectionTimeout(0);
which means the timeout is unlimited.The rabbitmq shows that 29415 sockets
are still available

Could anybody tell why the above error?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/connection-closed-abruptly-Message-tp32857p32866.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.justin at gmx.net  Sun Jan 26 09:53:37 2014
From: michael.justin at gmx.net (Michael Justin)
Date: Sun, 26 Jan 2014 10:53:37 +0100
Subject: [rabbitmq-discuss] [rabbitmq-stomp] Is the use of receipt
 header for SUBSCRIBE still recommended?
In-Reply-To: <52E2540F.3090700@rabbitmq.com>
References: <lbti62$735$1@ger.gmane.org> <52E2540F.3090700@rabbitmq.com>
Message-ID: <lc2lum$ci2$1@ger.gmane.org>

On 24.01.2014 12:52, Emile Joubert wrote:
>
> Hi Michael,
>
> On 24/01/14 11:18, Michael Justin wrote:
>
>> Has there been a change in the RabbitMQ STOMP plug-in since, which makes
>> this workaround obsolete, or is it still recommended to use a receipt?
>
> There have been numerous improvements to the STOMP adapter since v2.4.0,
> but SUBSCRIBE remains an asynchronous operation. As Rob suggested,
> requiring a receipt makes it a synchronous operation. If your
> application requires confirmation that the subscription is in place then
> you need the synchronous version.

Hi Emile,

thank you for the information! The synchronous solution using a receipt 
header works very well, good to know that it is unchanged, so my app 
(client library) docs are still valid and up-to-date.

Regards
-- 
Michael


From matthias at rabbitmq.com  Sun Jan 26 11:17:55 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 26 Jan 2014 11:17:55 +0000
Subject: [rabbitmq-discuss] [rabbitmq-stomp] Is the use of receipt
 header for SUBSCRIBE still recommended?
In-Reply-To: <lc2lum$ci2$1@ger.gmane.org>
References: <lbti62$735$1@ger.gmane.org> <52E2540F.3090700@rabbitmq.com>
 <lc2lum$ci2$1@ger.gmane.org>
Message-ID: <52E4EEE3.9050602@rabbitmq.com>

On 26/01/14 09:53, Michael Justin wrote:
> On 24.01.2014 12:52, Emile Joubert wrote:
>> On 24/01/14 11:18, Michael Justin wrote:
>>
>>> Has there been a change in the RabbitMQ STOMP plug-in since, which makes
>>> this workaround obsolete, or is it still recommended to use a receipt?
>>
>> There have been numerous improvements to the STOMP adapter since v2.4.0,
>> but SUBSCRIBE remains an asynchronous operation. As Rob suggested,
>> requiring a receipt makes it a synchronous operation. If your
>> application requires confirmation that the subscription is in place then
>> you need the synchronous version.
>
> thank you for the information! The synchronous solution using a receipt
> header works very well, good to know that it is unchanged, so my app
> (client library) docs are still valid and up-to-date.

There is actually no other way it could work. i.e. if you issue a 
SUBSCRIBE on one connection and then a SEND on another, in the absence 
of an acknowledgement from the server - which is what the RECEIPT header 
provides - then those two commands will simply race each other, leading 
to a non-deterministic outcome.

Now, if the SUBSCRIBE and SEND were issued on the *same* connection then 
I'd expect no such race, i.e. the SEND should only be processed after 
the SUBSCRIBE and thus if the subscription matches the sent message then 
the subscriber should receive that.

Matthias.


From stammailbox at gmail.com  Sun Jan 26 12:27:11 2014
From: stammailbox at gmail.com (Mysurf Mail)
Date: Sun, 26 Jan 2014 14:27:11 +0200
Subject: [rabbitmq-discuss] Message order of delivery
Message-ID: <CAJ2-Vr=1vECgoBfDhO_QTuxp95KUByG4z6CfRg21L5WE153=ng@mail.gmail.com>

Hi,
I need to choose a new Queue broker for my new project.
This time I need a scalable queue that supports pub/sub, and keeping
message ordering is a must.

I read Alexis comment to an ancient
question<http://www.quora.com/RabbitMQ/RabbitMQ-vs-Kafka-which-one-for-durable-messaging-with-good-query-features>in
Quoara. He writes

"Indeed, we think RabbitMQ provides stronger ordering than Kafka"

I read the message ordering section in rabbitmq
docs<http://www.rabbitmq.com/semantics.html>
:

"Messages can be returned to the queue using AMQP methods that feature a
requeue parameter (basic.recover, basic.reject and basic.nack), or due to a
channel closing while holding unacknowledged messages...*With release 2.7.0
and later it is still possible for individual consumers to observe messages
out of order* if the queue has multiple subscribers. This is due to the
actions of other subscribers who may requeue messages. From the perspective
of the queue the messages are always held in the publication order."

So, if I need to handle messages by their Order, I can only use rabbitMQ
with an exclusive queue  to each consumer? Is RabbitMQ still considered a
good solution for ordered message queuing?
Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140126/981394f9/attachment.html>

From mklishin at gopivotal.com  Sun Jan 26 14:57:08 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Sun, 26 Jan 2014 18:57:08 +0400
Subject: [rabbitmq-discuss] Message order of delivery
In-Reply-To: <CAJ2-Vr=1vECgoBfDhO_QTuxp95KUByG4z6CfRg21L5WE153=ng@mail.gmail.com>
References: <CAJ2-Vr=1vECgoBfDhO_QTuxp95KUByG4z6CfRg21L5WE153=ng@mail.gmail.com>
Message-ID: <432FD120-01CC-407B-A37B-5F35BD2AF191@rabbitmq.com>


On 26 Jan 2014, at 16:27, Mysurf Mail <stammailbox at gmail.com> wrote:

> So, if I need to handle messages by their Order, I can only use rabbitMQ with an exclusive queue  to each consumer?
> Is RabbitMQ still considered a good solution for ordered message queuing?

The problem is with multiple consumers some of which may re-queue messages. In such scenarios,
preserving original message ordering would require synchronization of all consumers, with which performance would
go out the window.

If you don?t have multiple consumers per queue or do not re-queue messages, the issue
is not relevant to you. Using exclusive queues does not prevent you from having multiple
consumers on it, by the way, but you can make a consumer exclusive. Note that this is
a rarely used feature that some clients may entirely omit from the API.

MK

Software Engineer, Pivotal/RabbitMQ



From michael.laing at nytimes.com  Sun Jan 26 16:29:14 2014
From: michael.laing at nytimes.com (Laing, Michael)
Date: Sun, 26 Jan 2014 11:29:14 -0500
Subject: [rabbitmq-discuss] Message order of delivery
In-Reply-To: <CAJ2-Vr=1vECgoBfDhO_QTuxp95KUByG4z6CfRg21L5WE153=ng@mail.gmail.com>
References: <CAJ2-Vr=1vECgoBfDhO_QTuxp95KUByG4z6CfRg21L5WE153=ng@mail.gmail.com>
Message-ID: <CAKgmDnEyQ-SZu8awd2P=2F7CH+j_KWVjzNL9SjQQCi8FJ2m8ug@mail.gmail.com>

Since it is a new project, might be worthwhile to consider a design that
tolerates occasional minor ordering differences.

That is what we do, so we can scale horizontally.

For example, the messages originating from our internal groups are always
cached for up to 30 days in our global data store (Cassandra). It's
important to them that the messages are retrievable in order, and by this
they mean the order in which they submit them.

Basically, we insist that *they* timestamp them to the microsecond. We use
their timestamp, ultimately, as the Cassandra timestamp for that message,
guaranteeing order where it counts. Meanwhile, because we have many
clusters involved with parallelized services and may, in fact, be
replicating important messages, we cannot guarantee exact order during
processing.

Some funny stuff happened in staging using this approach due to lack of
time synchronization, but in production it has worked very well.

Michael Laing
NYTimes


On Sun, Jan 26, 2014 at 7:27 AM, Mysurf Mail <stammailbox at gmail.com> wrote:

> Hi,
> I need to choose a new Queue broker for my new project.
> This time I need a scalable queue that supports pub/sub, and keeping
> message ordering is a must.
>
> I read Alexis comment to an ancient question<http://www.quora.com/RabbitMQ/RabbitMQ-vs-Kafka-which-one-for-durable-messaging-with-good-query-features>in Quoara. He writes
>
> "Indeed, we think RabbitMQ provides stronger ordering than Kafka"
>
> I read the message ordering section in rabbitmq docs<http://www.rabbitmq.com/semantics.html>
> :
>
> "Messages can be returned to the queue using AMQP methods that feature a
> requeue parameter (basic.recover, basic.reject and basic.nack), or due to
> a channel closing while holding unacknowledged messages...*With release
> 2.7.0 and later it is still possible for individual consumers to observe
> messages out of order* if the queue has multiple subscribers. This is due
> to the actions of other subscribers who may requeue messages. From the
> perspective of the queue the messages are always held in the publication
> order."
>
> So, if I need to handle messages by their Order, I can only use rabbitMQ
> with an exclusive queue  to each consumer? Is RabbitMQ still considered a
> good solution for ordered message queuing?
> Thanks.
>
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140126/f520a1af/attachment.html>

From jesper.louis.andersen at gmail.com  Sun Jan 26 17:13:13 2014
From: jesper.louis.andersen at gmail.com (Jesper Louis Andersen)
Date: Sun, 26 Jan 2014 18:13:13 +0100
Subject: [rabbitmq-discuss] Message order of delivery
In-Reply-To: <CAJ2-Vr=1vECgoBfDhO_QTuxp95KUByG4z6CfRg21L5WE153=ng@mail.gmail.com>
References: <CAJ2-Vr=1vECgoBfDhO_QTuxp95KUByG4z6CfRg21L5WE153=ng@mail.gmail.com>
Message-ID: <CAGrdgiVk14RRudAVo7AzV-ugWByOFc5b=UseRTCTL9_C8gJVNQ@mail.gmail.com>

On Sun, Jan 26, 2014 at 1:27 PM, Mysurf Mail <stammailbox at gmail.com> wrote:

> So, if I need to handle messages by their Order, I can only use rabbitMQ
> with an exclusive queue  to each consumer? Is RabbitMQ still considered a
> good solution for ordered message queuing?


Example: We deliver messages to the queue Q and we have a single subscriber
S1.

Message delivery will be made in order to S1. Unless precisely this happens:

* S1 rejects a message which puts it back in the end of the queue
* S1 closes the connection while having unacknowledged messages

If we add another subscriber S2 to Q, things are more complicated. Messages
are processed through the queue in order, but now both S1 and S2 may get
messages. There are no guarantee that they are equally fast at processing
messages, so depending on what S1 and S2 does, they may overrun each other.

The consequence is that either you need to have a queue per subscriber and
deliver them to these, or you need to model an ordering primitive into your
solution. I usually advocate against using timestamps for this since they
drift. A better model would be to make messages idempotent.


-- 
J.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140126/b775cb1a/attachment.html>

From matthias at rabbitmq.com  Sun Jan 26 17:22:37 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 26 Jan 2014 17:22:37 +0000
Subject: [rabbitmq-discuss] Message order of delivery
In-Reply-To: <CAGrdgiVk14RRudAVo7AzV-ugWByOFc5b=UseRTCTL9_C8gJVNQ@mail.gmail.com>
References: <CAJ2-Vr=1vECgoBfDhO_QTuxp95KUByG4z6CfRg21L5WE153=ng@mail.gmail.com>
 <CAGrdgiVk14RRudAVo7AzV-ugWByOFc5b=UseRTCTL9_C8gJVNQ@mail.gmail.com>
Message-ID: <52E5445D.3050000@rabbitmq.com>

just a minor correction...

On 26/01/14 17:13, Jesper Louis Andersen wrote:
> Example: We deliver messages to the queue Q and we have a single
> subscriber S1.
>
> Message delivery will be made in order to S1. Unless precisely this happens:
>
> * S1 rejects a message which puts it back in the end of the queue

That's what rabbits older than 2.7.0 did. From 
http://www.rabbitmq.com/semantics.html#ordering
<quote>
"From RabbitMQ release 2.7.0, messages are always held in the queue in 
publication order, even in the presence of requeueing or channel closure."
</quote>

You can still get re-ordering though even then, since requeued messages 
end up "behind" messages alright in flight to the consuming client (or 
sitting in that client's buffers).

Matthias.

From michael.laing at nytimes.com  Sun Jan 26 17:33:14 2014
From: michael.laing at nytimes.com (Laing, Michael)
Date: Sun, 26 Jan 2014 12:33:14 -0500
Subject: [rabbitmq-discuss] Message order of delivery
In-Reply-To: <CAGrdgiVk14RRudAVo7AzV-ugWByOFc5b=UseRTCTL9_C8gJVNQ@mail.gmail.com>
References: <CAJ2-Vr=1vECgoBfDhO_QTuxp95KUByG4z6CfRg21L5WE153=ng@mail.gmail.com>
 <CAGrdgiVk14RRudAVo7AzV-ugWByOFc5b=UseRTCTL9_C8gJVNQ@mail.gmail.com>
Message-ID: <CAKgmDnFmt68fHi0W_PcK4gXLNAY64vt_vAAvh1WE2im-Va3y3Q@mail.gmail.com>

Which is why we let our internal clients assign the timestamp, typically
from a single source. Our own processing is idempotent.


The consequence is that either you need to have a queue per subscriber and
> deliver them to these, or you need to model an ordering primitive into your
> solution. I usually advocate against using timestamps for this since they
> drift. A better model would be to make messages idempotent.
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140126/ae82acde/attachment.html>

From carl.hoerberg at gmail.com  Sun Jan 26 19:30:26 2014
From: carl.hoerberg at gmail.com (carlhoerberg)
Date: Sun, 26 Jan 2014 11:30:26 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ 3.2.3 released
In-Reply-To: <52E13F48.9050803@rabbitmq.com>
References: <52E13F48.9050803@rabbitmq.com>
Message-ID: <1390764626556-32875.post@n5.nabble.com>

We upgraded one node in a 3.2.1 cluster (Erlang R16B02) to 3.2.3 but now a
couple of clients have connecting problems. 

Some .NET clients report: 

AMQP server protocol negotiation failure: server version unknown-unknown,
client version 0-9

And py-amqp clients just timeout. 

Also, the server log is filled with: 

error on AMQP connection <0.27782.81>: {ssl_upgrade_error,closed} (unknown
POSIX error)

But the clients above haven't used AMQPS. 



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-3-2-3-released-tp32822p32875.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Sun Jan 26 20:39:28 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 26 Jan 2014 20:39:28 +0000
Subject: [rabbitmq-discuss] RabbitMQ 3.2.3 released
In-Reply-To: <1390764626556-32875.post@n5.nabble.com>
References: <52E13F48.9050803@rabbitmq.com>
 <1390764626556-32875.post@n5.nabble.com>
Message-ID: <52E57280.2090909@rabbitmq.com>

On 26/01/14 19:30, carlhoerberg wrote:
> We upgraded one node in a 3.2.1 cluster (Erlang R16B02) to 3.2.3 but now a
> couple of clients have connecting problems.
>
> Some .NET clients report:
>
> AMQP server protocol negotiation failure: server version unknown-unknown,
> client version 0-9
>
> And py-amqp clients just timeout.
>
> Also, the server log is filled with:
>
> error on AMQP connection <0.27782.81>: {ssl_upgrade_error,closed} (unknown
> POSIX error)
>
> But the clients above haven't used AMQPS.

This has all the hallmarks of plain AMQP connections being made on the 
AMQPS port.

Doesn't look like a rabbit problem to me, or anything to do with the 
version upgrade. I'd suspect it's a config problem (e.g. the rabbit 
listener ports are configured with amqps on a port that is meant for 
amqp) or an issue with a proxy (similar ssl/non-ssl port mixup there), 
or the apps (ditto).


Matthias.

From michael.s.klishin at gmail.com  Sun Jan 26 20:40:26 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Mon, 27 Jan 2014 00:40:26 +0400
Subject: [rabbitmq-discuss] RabbitMQ 3.2.3 released
In-Reply-To: <1390764626556-32875.post@n5.nabble.com>
References: <52E13F48.9050803@rabbitmq.com>
 <1390764626556-32875.post@n5.nabble.com>
Message-ID: <CAE3HoVQjZ=VJM7ShZnLD5vaR0KJJE0bS0f7=eRRKZ=vofDwL0w@mail.gmail.com>

2014-01-26 carlhoerberg <carl.hoerberg at gmail.com>

> Some .NET clients report:
>
> AMQP server protocol negotiation failure: server version unknown-unknown,
> client version 0-9
>
> And py-amqp clients just timeout.
>
> Also, the server log is filled with:
>
> error on AMQP connection <0.27782.81>: {ssl_upgrade_error,closed} (unknown
> POSIX error)
>
> But the clients above haven't used AMQPS.
>

Carl,

Can you post a small script that uses py-amqp
that reproduces the issue on a standalone 3.2.3 node?
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/3f272334/attachment.html>

From connect_kausik at yahoo.com  Mon Jan 27 11:01:41 2014
From: connect_kausik at yahoo.com (Kausik Chattopadhyay)
Date: Mon, 27 Jan 2014 03:01:41 -0800 (PST)
Subject: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ
	server
In-Reply-To: <1390401469.50206.YahooMailNeo@web141406.mail.bf1.yahoo.com>
References: <1390373029.32279.YahooMailNeo@web141402.mail.bf1.yahoo.com>
 <4DED600F-D7D3-479E-95D4-5693C124C924@rabbitmq.com>
 <1390388342.78457.YahooMailNeo@web141405.mail.bf1.yahoo.com>
 <A9A3A8C6-B08E-4079-9C15-94E78640464F@gopivotal.com>
 <1390401469.50206.YahooMailNeo@web141406.mail.bf1.yahoo.com> 
Message-ID: <1390820501.39514.YahooMailNeo@web141405.mail.bf1.yahoo.com>

Hi Michael,
So far I ?was working with SelectConnection using pika and it is good.
Today I tried to get a publisher working with BlockingConnection with SSL. Normal connection works however failing with SSL. The same setup works with SelectConnection. Any idea ?

My publisher code is as follows:

?parameters = ConnectionParameters(HOST, PORT,
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ssl=True,
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ssl_options=ssl_options)
connection = pika.BlockingConnection(parameters)




I am getting the following error:

------------------------------------------
DEBUG ? ? ?2014-01-27 16:25:27,901 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_error of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': False, 'arguments': None}

DEBUG ? ? ?2014-01-27 16:25:27,901 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_start of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}
INFO ? ? ? 2014-01-27 16:25:27,901 pika.adapters.base_connection ?_create_and_connect_to_socket ? ? ? ?164 : Connecting to 172.16.47.133:5671 with SSL
DEBUG ? ? ?2014-01-27 16:25:27,925 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?217 : Processing 0:Connection.Start
DEBUG ? ? ?2014-01-27 16:25:27,925 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 390 : Processing use of oneshot callback
DEBUG ? ? ?2014-01-27 16:25:27,925 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 392 : 0 registered uses left
DEBUG ? ? ?2014-01-27 16:25:27,925 pika.callback ? ? ? ? ? ? ? ? ?remove ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 260 : Removing callback #0: {'callback': <bound method BlockingConnection._on_connection_start of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 0}
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?231 : Calling <bound method BlockingConnection._on_connection_start of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>> for "0:Connection.Start"
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_tune of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?217 : Processing 0:Connection.Tune
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 390 : Processing use of oneshot callback
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 392 : 0 registered uses left
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?remove ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 260 : Removing callback #0: {'callback': <bound method BlockingConnection._on_connection_tune of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 0}
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?231 : Calling <bound method BlockingConnection._on_connection_tune of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>> for "0:Connection.Tune"
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.connection ? ? ? ? ? ? ? ?_create_heartbeat_checker ? ? ? ? ? ?946 : Creating a HeartbeatChecker: 600
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_open of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?217 : Processing 0:Connection.OpenOk
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 390 : Processing use of oneshot callback
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 392 : 0 registered uses left
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?remove ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 260 : Removing callback #0: {'callback': <bound method BlockingConnection._on_connection_open of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 0}
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?231 : Calling <bound method BlockingConnection._on_connection_open of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>> for "0:Connection.OpenOk"
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_closed of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}

---------------------------------------?


Serverside log shows:

=INFO REPORT==== 27-Jan-2014::05:55:47 ===
accepting AMQP connection <0.6427.1> (172.16.47.1:56458 -> 172.16.47.133:5671)

=WARNING REPORT==== 27-Jan-2014::05:55:47 ===
closing AMQP connection <0.6427.1> (172.16.47.1:56458 -> 172.16.47.133:5671):
connection_closed_abruptly





On Wednesday, January 22, 2014 8:07 PM, Kausik Chattopadhyay <connect_kausik at yahoo.com> wrote:
 
Hi Michael,
Thanks.
?Actually the certificates were owned by root.?
I tried the followings:
1. Adding user rabbitmq to group root ?--- didnt work
2. Changing the ownership of all the certficates to rabbitmq:rabbitmq --- didnt work

Finally I tried this. Created a "rabbitmq" sudoer. Installing rabbitmq server. Generating the certificates as a "rabbitmq" user --> this worked

Thanks
Kausik



On Wednesday, January 22, 2014 4:54 PM, Michael Klishin <mklishin at gopivotal.com> wrote:
 

On 22 Jan 2014, at 14:59, Kausik Chattopadhyay <connect_kausik at yahoo.com> wrote:

> Interestingly, this is the log from rabbit at master1-sasl.log

There is nothing new in the SASL log.

ecacertfile indicates there was an issue with the CA certificate, which cannot
be loaded due to eaccess (according to the other log file).

--
MK

Software Engineer, Pivotal/RabbitMQ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/f215467c/attachment.html>

From pat at munkiisoft.com  Mon Jan 27 11:27:00 2014
From: pat at munkiisoft.com (Patrick Long)
Date: Mon, 27 Jan 2014 11:27:00 +0000
Subject: [rabbitmq-discuss] RabbtMQ heart beat
Message-ID: <CALDntb8_F+QLmN-7nOO+ERGWd6Pao+sNDtV9bDdztU=DOtvAoA@mail.gmail.com>

We have a load balancer in front of our RabbitMQ cluster. Currently it is
operating a simple round robin algorithm. It will consider a RabbitMQ node
of line if the actually Windows Server is offline.

What is the RabbitMQ specific test to see if the node is up and running? Is
there a specific port the load balancer should ping?

Thanks

Pat

-- 
Patrick Long - Munkiisoft Ltd
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/c6016a04/attachment.html>

From mklishin at gopivotal.com  Mon Jan 27 11:34:42 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 27 Jan 2014 15:34:42 +0400
Subject: [rabbitmq-discuss] RabbtMQ heart beat
In-Reply-To: <CALDntb8_F+QLmN-7nOO+ERGWd6Pao+sNDtV9bDdztU=DOtvAoA@mail.gmail.com>
References: <CALDntb8_F+QLmN-7nOO+ERGWd6Pao+sNDtV9bDdztU=DOtvAoA@mail.gmail.com>
Message-ID: <847E11FC-1CEE-43C0-9818-F200A5D98EDC@rabbitmq.com>


On 27 Jan 2014, at 15:27, Patrick Long <pat at munkiisoft.com> wrote:

> What is the RabbitMQ specific test to see if the node is up and running? Is there a specific port the load balancer should ping?

If you have management plugin [1] enabled, there is an HTTP API endpoint [2].

Otherwise, you can connect with valid credentials, open a channel, close it
and close the connection.


1. http://rabbitmq.com/management.html
2. http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_2_3/priv/www/api/index.html

MK

Software Engineer, Pivotal/RabbitMQ



From NursingProvidesSecurity at kgjthyr.me  Mon Jan 27 11:50:11 2014
From: NursingProvidesSecurity at kgjthyr.me (Nursing Provides Security)
Date: Mon, 27 Jan 2014 03:50:11 -0800
Subject: [rabbitmq-discuss] Become a Nursing Professional
Message-ID: <3644104198467533644101216133225137@0wf4jb04.kgjthyr.me>

An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/fa3bd155/attachment.html>

From blemasle at allocine.fr  Mon Jan 27 13:58:47 2014
From: blemasle at allocine.fr (Bertrand LEMASLE)
Date: Mon, 27 Jan 2014 14:58:47 +0100
Subject: [rabbitmq-discuss] Publisher confirms always wait for consumer
	ack/nack
In-Reply-To: <CANOx8NksMdgoQkdjNsz+16rmC5Cwe5Vd=K9udTgm8pONm3_8QQ@mail.gmail.com>
References: <CA+6GtrDtS6jLj7y778TuLEHSbb6_WKW4+57Wctmfg-=O3v75Lg@mail.gmail.com>
 <CANOx8N=JtX6sEVm0uqPsZxMoUH1D7OiSxiPmeovYoaocT6uMgw@mail.gmail.com>
 <CA+6GtrAfWMf_wBHhBoAJdrHfR557TxAC1i+y86J93pUYT05LhA@mail.gmail.com>
 <CANOx8NksMdgoQkdjNsz+16rmC5Cwe5Vd=K9udTgm8pONm3_8QQ@mail.gmail.com>
Message-ID: <CA+6GtrDLTced1e0hUyjhbJfy7j1=ACU4UFzH+5bQVS_F3m+Bbw@mail.gmail.com>

2014-01-24 Jerry Kuch <jkuch at gopivotal.com>

> Hi, Bertrand...
>
> On Thu, Jan 23, 2014 at 12:54 AM, Bertrand LEMASLE <blemasle at allocine.fr>wrote:
>
>>
>> "Totally unrelated" : that's what I undestand from the documentation, but
>> it seems to be what's going on in my case.
>>
>
> My apologies... I confess I misread your original report by skimming over
> the meaty part of it and reading what I expected to see rather than what
> you in fact wrote.
>
> After some digging, I discovered that my producer and consumer run on the
>> same thread but they souldn't (for now, producer and consumer run in the
>> same application). So my consumer thread sleep affects my publisher thread.
>> That's obviously a flaw in my own design and seems to have nothing to do
>> with RabbitMQ itself.
>>
>> Thanks for your concern and your clarification about publisher confirms
>> which made me think about monitoring running threads and so came onto this !
>>
>
> Ah, gotcha!  Glad you found an external to Rabbit cause for the weird
> behavior.
>
> When Matthias pointed out my carelessness in misreading your original
> message I made a note to come back to your report and try to reproduce your
> observations, but knew I wouldn't be able to get to it for a couple of
> days.
>
> The behavior you were describing was indeed surprising to us (when I
> became less daft and actually grasped what you were saying), as it was to
> you.
>
> Again, my apologies for my sloppiness and adding confusion to the
> situation.
>
>
You're welcome. Again, you lead me to the right path :) This behaviour
should be mentionned in the .NET client because (even if this is not a
classic pattern) it could be very hard to find when producing and consuming
in the same application !


> Best regards,
> Jerry
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
Thanks again !!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/47ebd724/attachment.html>

From k.madnani84 at gmail.com  Mon Jan 27 14:01:14 2014
From: k.madnani84 at gmail.com (k.madnani84)
Date: Mon, 27 Jan 2014 06:01:14 -0800 (PST)
Subject: [rabbitmq-discuss] java.net.SocketTimeoutException: Timeout during
 Connection negotiation
Message-ID: <1390831274825-32882.post@n5.nabble.com>

Hi,

I am trying to connect to connect large number of threads from Jmeter(Java
plugin) to my RabbitMQ after making the Heartbeat and timeout setting to 0
meaning infinite but i still face this exception after certain amount of
threads.Could anybody tell the reason and how can we fix it.

com.zeroclue.jmeter.protocol.amqp.AMQPPublisher: Failed to initialize
channel :  java.io.IOException
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:106)
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:102)
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:360)
	at
com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:516)
	at
com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:533)
	at
com.zeroclue.jmeter.protocol.amqp.AMQPSampler.createChannel(AMQPSampler.java:406)
	at
com.zeroclue.jmeter.protocol.amqp.AMQPSampler.initChannel(AMQPSampler.java:78)
	at
com.zeroclue.jmeter.protocol.amqp.AMQPPublisher.initChannel(AMQPPublisher.java:229)
	at
com.zeroclue.jmeter.protocol.amqp.AMQPPublisher.sample(AMQPPublisher.java:62)
	at
org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:429)
	at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:257)
	at java.lang.Thread.run(Thread.java:724)
Caused by: com.rabbitmq.client.ShutdownSignalException: connection error;
reason: java.net.SocketTimeoutException: Timeout during Connection
negotiation
	at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)
	at
com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)
	at
com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:313)
	... 9 more





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/java-net-SocketTimeoutException-Timeout-during-Connection-negotiation-tp32882.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Mon Jan 27 14:32:54 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 27 Jan 2014 14:32:54 +0000
Subject: [rabbitmq-discuss] Dead-Lettering Queue Contents On Queue
	Expiration
In-Reply-To: <CABWF3X1Jq_+9aN-tFO7_hgoYHr0iyz6mC40dnA+AkR=tZjsNSg@mail.gmail.com>
References: <CABWF3X0-f8CMJ3PCVjrhcpBaz9bjwC8taO-JszM6R-8UyX9SxQ@mail.gmail.com>
 <52D7BAEF.8010208@rabbitmq.com>
 <2D0F726F-6885-44F5-85D1-192853189923@rabbitmq.com>
 <CABWF3X1Jq_+9aN-tFO7_hgoYHr0iyz6mC40dnA+AkR=tZjsNSg@mail.gmail.com>
Message-ID: <52E66E16.2040600@rabbitmq.com>

Alex,

On 17/01/14 22:08, Alex Robson wrote:
> I have updated the pull request. I jumped the gun a bit in thinking that
> I had solved this with the initial pull. I still may not have resolved
> it in a way that would make sense to devs who know the code base better
> than I do. I wasn't sure if there were a better way to remove bindings
> from an expiring queue and its DLX, so I'm removing them first from the
> destination using rabbit_binding:remove_for_destination and then calling
> the exchanges remove_bindings. The latter call is necessary because with
> out it, a consistent hash exchange will retain invalid routes and
> continue to try and route messages to the expired queue.

I can see why this is necessary, but it makes a whole bunch of 
assumptions about topology that work for c-h-x but not in general.

Wwhy not remove all bindings, indeed even perhaps the queue itself? i.e. 
bring forward part of what happens in terminate_delete, in particular 
the call to rabbit_amqqueue:internal_delete.

That is not w/o problems either since now you have a "dark" queue, i.e. 
a queue that is completely invisible to routing and management. Yet that 
queue is still operating - it's dead-lettering - and using the backing 
queue, etc. That is likely problematic. So, for example, a client could 
come along and create a new queue with the same name, which would end up 
stomping on or tripping over the persistent storage of the dark queue.

Yet if you don't remove the queue record then there is nothing stopping 
clients from creating new bindings for it. Including to the DLX.

So perhaps this queue record in mnesia needs to indicate some limbo 
state, similar to what happens to durable queues residing on down nodes. 
In that state, the existence of the queue is known but no operations can 
be performed on it.

This is all getting rather tricky.

Plus we still have to deal with the issue I mentioned previously, of 
messages that are in-flight between the exchange and 
in-the-process-of-deletion queue getting lost. That can actually be 
addressed for specific use cases, namely those where the message is 
expected to reach exactly one queue - by publishing in mandatory mode 
and re-sending the message when a basic.return is received. Obviously 
this can create dups, but they are inevitable in most cases anyway. It's 
also rather slow since it's synchronous (though that will change in the 
next RabbitMQ feature release).

Trouble is, you'd also have to get the dead-lettering to publish in 
mandatory mode. Which introduces all sorts of complications.

Also note, btw, that, in general, dead-lettering is not guaranteed. It 
doesn't use confirms (and doing so would be very complex indeed), so 
messages can get lost due to failures during dead lettering.


Summary: It's all rather complicated.


Regards,

Matthias.

From gavinmroy at gmail.com  Mon Jan 27 15:56:07 2014
From: gavinmroy at gmail.com (Gavin M. Roy)
Date: Mon, 27 Jan 2014 10:56:07 -0500
Subject: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ
 server
In-Reply-To: <1390820501.39514.YahooMailNeo@web141405.mail.bf1.yahoo.com>
References: <1390373029.32279.YahooMailNeo@web141402.mail.bf1.yahoo.com>
 <4DED600F-D7D3-479E-95D4-5693C124C924@rabbitmq.com>
 <1390388342.78457.YahooMailNeo@web141405.mail.bf1.yahoo.com>
 <A9A3A8C6-B08E-4079-9C15-94E78640464F@gopivotal.com>
 <1390401469.50206.YahooMailNeo@web141406.mail.bf1.yahoo.com>
 <1390820501.39514.YahooMailNeo@web141405.mail.bf1.yahoo.com>
Message-ID: <etPan.52e68197.66ef438d.aba4@gmr-home.local>

Your ssl_options are a pretty important part of the SSL connection in this code and they are omitted, same with your other email thread. Without them, it?s hard to debug for you. The underlying code is the same regardless of the connection adapter. If we can see what those are, it should help.

Also, any related snippets from rabbit@[NODE].log could be helpful.

Gavin

From:?Kausik Chattopadhyay Kausik Chattopadhyay
Reply:?Kausik Chattopadhyay connect_kausik at yahoo.com, Discussions about RabbitMQ rabbitmq-discuss at lists.rabbitmq.com
Date:?January 27, 2014 at 6:03:05 AM
To:?Michael Klishin mklishin at gopivotal.com
Subject:? Re: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ server  
Hi Michael,
So far I ?was working with SelectConnection using pika and it is good.
Today I tried to get a publisher working with BlockingConnection with SSL. Normal connection works however failing with SSL. The same setup works with SelectConnection. Any idea ?

My publisher code is as follows:

?parameters = ConnectionParameters(HOST, PORT,
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ssl=True,
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ssl_options=ssl_options)
connection = pika.BlockingConnection(parameters)




I am getting the following error:
------------------------------------------
DEBUG ? ? ?2014-01-27 16:25:27,901 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_error of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': False, 'arguments': None}
DEBUG ? ? ?2014-01-27 16:25:27,901 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_start of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}
INFO ? ? ? 2014-01-27 16:25:27,901 pika.adapters.base_connection ?_create_and_connect_to_socket ? ? ? ?164 : Connecting to 172.16.47.133:5671 with SSL
DEBUG ? ? ?2014-01-27 16:25:27,925 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?217 : Processing 0:Connection.Start
DEBUG ? ? ?2014-01-27 16:25:27,925 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 390 : Processing use of oneshot callback
DEBUG ? ? ?2014-01-27 16:25:27,925 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 392 : 0 registered uses left
DEBUG ? ? ?2014-01-27 16:25:27,925 pika.callback ? ? ? ? ? ? ? ? ?remove ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 260 : Removing callback #0: {'callback': <bound method BlockingConnection._on_connection_start of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 0}
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?231 : Calling <bound method BlockingConnection._on_connection_start of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>> for "0:Connection.Start"
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_tune of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?217 : Processing 0:Connection.Tune
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 390 : Processing use of oneshot callback
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 392 : 0 registered uses left
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?remove ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 260 : Removing callback #0: {'callback': <bound method BlockingConnection._on_connection_tune of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 0}
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?231 : Calling <bound method BlockingConnection._on_connection_tune of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>> for "0:Connection.Tune"
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.connection ? ? ? ? ? ? ? ?_create_heartbeat_checker ? ? ? ? ? ?946 : Creating a HeartbeatChecker: 600
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_open of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?217 : Processing 0:Connection.OpenOk
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 390 : Processing use of oneshot callback
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 392 : 0 registered uses left
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?remove ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 260 : Removing callback #0: {'callback': <bound method BlockingConnection._on_connection_open of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 0}
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?231 : Calling <bound method BlockingConnection._on_connection_open of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>> for "0:Connection.OpenOk"
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_closed of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}

---------------------------------------?

Serverside log shows:

=INFO REPORT==== 27-Jan-2014::05:55:47 ===
accepting AMQP connection <0.6427.1> (172.16.47.1:56458 -> 172.16.47.133:5671)

=WARNING REPORT==== 27-Jan-2014::05:55:47 ===
closing AMQP connection <0.6427.1> (172.16.47.1:56458 -> 172.16.47.133:5671):
connection_closed_abruptly




On Wednesday, January 22, 2014 8:07 PM, Kausik Chattopadhyay <connect_kausik at yahoo.com> wrote:
Hi Michael,
Thanks.
?Actually the certificates were owned by root.?
I tried the followings:
1. Adding user rabbitmq to group root ?--- didnt work
2. Changing the ownership of all the certficates to rabbitmq:rabbitmq --- didnt work

Finally I tried this. Created a "rabbitmq" sudoer. Installing rabbitmq server. Generating the certificates as a "rabbitmq" user --> this worked

Thanks
Kausik


On Wednesday, January 22, 2014 4:54 PM, Michael Klishin <mklishin at gopivotal.com> wrote:

On 22 Jan 2014, at 14:59, Kausik Chattopadhyay <connect_kausik at yahoo.com> wrote:

> Interestingly, this is the log from rabbit at master1-sasl.log

There is nothing new in the SASL log.

ecacertfile indicates there was an issue with the CA certificate, which cannot
be loaded due to eaccess (according to the other log file).

--
MK

Software Engineer, Pivotal/RabbitMQ




_______________________________________________  
rabbitmq-discuss mailing list  
rabbitmq-discuss at lists.rabbitmq.com  
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/be91ac05/attachment.html>

From jsw at one.com  Mon Jan 27 15:59:42 2014
From: jsw at one.com (Josh West)
Date: Mon, 27 Jan 2014 10:59:42 -0500
Subject: [rabbitmq-discuss] Behaviour of Federated Queues
In-Reply-To: <52E28618.8010905@one.com>
References: <52E1407B.8060901@one.com> <52E25A9F.2090802@rabbitmq.com>
 <52E28618.8010905@one.com>
Message-ID: <52E6826E.8010907@one.com>

This is confirmed.  If you create and immediately delete a queue, with 
federation configured, the upstream will also create the queue but not 
delete the queue.

This sounds like it may be a bug with federated queues.

Josh West
One.com - http://www.one.com

On 01/24/2014 10:26 AM, Josh West wrote:
> It may be more than an issue just with auto delete.  It looks like 
> deletions themselves may not be propagated at all.  For example:
>
>
> #!/usr/bin/python
>
> import pika
>
> credentials = pika.PlainCredentials("guest", "guest")
> conn_params = pika.ConnectionParameters("localhost", credentials = 
> credentials)
> connection  = pika.BlockingConnection(conn_params)
> channel     = connection.channel()
>
> for i in range(1,100):
>         queue = "broker1.queue.%i" % (i)
>         channel.queue_declare(queue=queue, auto_delete=True)
>         channel.queue_delete(queue=queue)
>
> channel.close()
> connection.close()
>
>
> While the queues are deleted from broker1, they still remain on 
> broker2 and broker3 :-(
>
> Josh West
> One.com - http://www.one.com
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


From emile at rabbitmq.com  Mon Jan 27 16:13:31 2014
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 27 Jan 2014 16:13:31 +0000
Subject: [rabbitmq-discuss] RabbitMQ 3.2.2 and Erlang R16B03 - SSL Issue
In-Reply-To: <52DE9E58.5010408@rabbitmq.com>
References: <52DE4E5A.1050801@rabbitmq.com>
 <1390308913801.a40251c1@Nodemailer> <52DE9E58.5010408@rabbitmq.com>
Message-ID: <52E685AB.3050106@rabbitmq.com>


Hi Jared,

On 21/01/14 16:20, Emile Joubert wrote:
> On 21/01/14 12:55, Jared Kauppila wrote:
>> There is no difference in behavior with that SSL setting configured.
> 
> This looks like an Erlang bug. I have reported it to the Erlang
> developers. In the meantime


It looks like R16B03-1 contains the fix (OTP-11595). Could you try with
that and let us know if it works for you?


-Emile



From gavinmroy at gmail.com  Mon Jan 27 16:21:59 2014
From: gavinmroy at gmail.com (Gavin M. Roy)
Date: Mon, 27 Jan 2014 11:21:59 -0500
Subject: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ
 server
In-Reply-To: <etPan.52e68197.66ef438d.aba4@gmr-home.local>
References: <1390373029.32279.YahooMailNeo@web141402.mail.bf1.yahoo.com>
 <4DED600F-D7D3-479E-95D4-5693C124C924@rabbitmq.com>
 <1390388342.78457.YahooMailNeo@web141405.mail.bf1.yahoo.com>
 <A9A3A8C6-B08E-4079-9C15-94E78640464F@gopivotal.com>
 <1390401469.50206.YahooMailNeo@web141406.mail.bf1.yahoo.com>
 <1390820501.39514.YahooMailNeo@web141405.mail.bf1.yahoo.com>
 <etPan.52e68197.66ef438d.aba4@gmr-home.local>
Message-ID: <etPan.52e687a7.3352255a.aba4@gmr-home.local>

Here?s a gist of both my rabbitmq.config, an example python script using BlockingConnection on 0.9.13 and the interactive session running the script, all working with SSL using pika:

https://gist.github.com/gmr/8651586

I?m going to guess that either your RabbitMQ SSL configuration is incorrect or that your ssl_options specified are preventing you from connecting.

Also, looking at your output, you appear to be connecting just fine. Any abrupt connection disconnects are happening after your connection is established. These last two lines specify:

DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?231 : Calling <bound method BlockingConnection._on_connection_open of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>> for "0:Connection.OpenOk"
The connection has been established ok

DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_closed of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}

The adapter has registered to be notified when the connection is closed.

If your python app stops there, the connection will be closed abruptly with RabbitMQ since you?re not telling it to shutdown the connection.

Hope this helps,

Gavin


From:?Gavin M. Roy Gavin M. Roy
Reply:?Gavin M. Roy gavinmroy at gmail.com
Date:?January 27, 2014 at 10:56:25 AM
To:?Michael Klishin mklishin at gopivotal.com, Kausik Chattopadhyay connect_kausik at yahoo.com
Subject:? Re: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ server  
Your ssl_options are a pretty important part of the SSL connection in this code and they are omitted, same with your other email thread. Without them, it?s hard to debug for you. The underlying code is the same regardless of the connection adapter. If we can see what those are, it should help.

Also, any related snippets from rabbit@[NODE].log could be helpful.

Gavin

From:?Kausik Chattopadhyay Kausik Chattopadhyay
Reply:?Kausik Chattopadhyay connect_kausik at yahoo.com, Discussions about RabbitMQ rabbitmq-discuss at lists.rabbitmq.com
Date:?January 27, 2014 at 6:03:05 AM
To:?Michael Klishin mklishin at gopivotal.com
Subject:? Re: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ server
Hi Michael,
So far I ?was working with SelectConnection using pika and it is good.
Today I tried to get a publisher working with BlockingConnection with SSL. Normal connection works however failing with SSL. The same setup works with SelectConnection. Any idea ?

My publisher code is as follows:

?parameters = ConnectionParameters(HOST, PORT,
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ssl=True,
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ssl_options=ssl_options)
connection = pika.BlockingConnection(parameters)




I am getting the following error:
------------------------------------------
DEBUG ? ? ?2014-01-27 16:25:27,901 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_error of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': False, 'arguments': None}
DEBUG ? ? ?2014-01-27 16:25:27,901 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_start of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}
INFO ? ? ? 2014-01-27 16:25:27,901 pika.adapters.base_connection ?_create_and_connect_to_socket ? ? ? ?164 : Connecting to 172.16.47.133:5671 with SSL
DEBUG ? ? ?2014-01-27 16:25:27,925 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?217 : Processing 0:Connection.Start
DEBUG ? ? ?2014-01-27 16:25:27,925 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 390 : Processing use of oneshot callback
DEBUG ? ? ?2014-01-27 16:25:27,925 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 392 : 0 registered uses left
DEBUG ? ? ?2014-01-27 16:25:27,925 pika.callback ? ? ? ? ? ? ? ? ?remove ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 260 : Removing callback #0: {'callback': <bound method BlockingConnection._on_connection_start of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 0}
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?231 : Calling <bound method BlockingConnection._on_connection_start of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>> for "0:Connection.Start"
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_tune of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?217 : Processing 0:Connection.Tune
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 390 : Processing use of oneshot callback
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 392 : 0 registered uses left
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?remove ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 260 : Removing callback #0: {'callback': <bound method BlockingConnection._on_connection_tune of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 0}
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?231 : Calling <bound method BlockingConnection._on_connection_tune of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>> for "0:Connection.Tune"
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.connection ? ? ? ? ? ? ? ?_create_heartbeat_checker ? ? ? ? ? ?946 : Creating a HeartbeatChecker: 600
DEBUG ? ? ?2014-01-27 16:25:27,926 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_open of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?217 : Processing 0:Connection.OpenOk
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 390 : Processing use of oneshot callback
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?_use_one_shot_callback ? ? ? ? ? ? ? 392 : 0 registered uses left
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?remove ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 260 : Removing callback #0: {'callback': <bound method BlockingConnection._on_connection_open of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 0}
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?231 : Calling <bound method BlockingConnection._on_connection_open of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>> for "0:Connection.OpenOk"
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_closed of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}

---------------------------------------?

Serverside log shows:

=INFO REPORT==== 27-Jan-2014::05:55:47 ===
accepting AMQP connection <0.6427.1> (172.16.47.1:56458 -> 172.16.47.133:5671)

=WARNING REPORT==== 27-Jan-2014::05:55:47 ===
closing AMQP connection <0.6427.1> (172.16.47.1:56458 -> 172.16.47.133:5671):
connection_closed_abruptly




On Wednesday, January 22, 2014 8:07 PM, Kausik Chattopadhyay <connect_kausik at yahoo.com> wrote:
Hi Michael,
Thanks.
?Actually the certificates were owned by root.?
I tried the followings:
1. Adding user rabbitmq to group root ?--- didnt work
2. Changing the ownership of all the certficates to rabbitmq:rabbitmq --- didnt work

Finally I tried this. Created a "rabbitmq" sudoer. Installing rabbitmq server. Generating the certificates as a "rabbitmq" user --> this worked

Thanks
Kausik


On Wednesday, January 22, 2014 4:54 PM, Michael Klishin <mklishin at gopivotal.com> wrote:

On 22 Jan 2014, at 14:59, Kausik Chattopadhyay <connect_kausik at yahoo.com> wrote:

> Interestingly, this is the log from rabbit at master1-sasl.log

There is nothing new in the SASL log.

ecacertfile indicates there was an issue with the CA certificate, which cannot
be loaded due to eaccess (according to the other log file).

--
MK

Software Engineer, Pivotal/RabbitMQ




_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/4780ba89/attachment.html>

From gavinmroy at gmail.com  Mon Jan 27 16:23:26 2014
From: gavinmroy at gmail.com (Gavin M. Roy)
Date: Mon, 27 Jan 2014 11:23:26 -0500
Subject: [rabbitmq-discuss] Pika + SSL
In-Reply-To: <b0eedbf5-52f2-4a0c-a872-682e87b1b7c1@googlegroups.com>
References: <BANLkTinttufojhdk2xvhqw4eOtrX58V-Wg@mail.gmail.com>
 <01150BCECF2C4D6BAFCBEFBA483CAEEC@myyearbook.com>
 <F6D3AE44EDB946DC87ACCC5D32F4E123@myyearbook.com>
 <b0eedbf5-52f2-4a0c-a872-682e87b1b7c1@googlegroups.com>
Message-ID: <etPan.52e687fe.ded7263.aba4@gmr-home.local>

I?ve responded in your other thread on the same issue.

Also note there is a current thread discussing RabbitMQ & Erlang R16B3 SSL issues, I?d check that as well as my responses in the other thread to see if you can resolve your issue.

Regards,

Gavin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/e2321c95/attachment.html>

From dmcintyre at gopivotal.com  Mon Jan 27 16:36:14 2014
From: dmcintyre at gopivotal.com (Duncan McIntyre)
Date: Mon, 27 Jan 2014 16:36:14 +0000
Subject: [rabbitmq-discuss] Federated Exchange - behaviour after delete
Message-ID: <CAAaVn2AzUKgFbgow7UQf8Y4Q6HknXiBZdU=D4tGshB_+edrbRg@mail.gmail.com>

Unexpected behaviour. Running RabbitMQ 3.2.3 / Erlang 14B04

serverA: exchange 'fedex', fanout

serverB: exchange 'fedex', fanout upstream serverA
  queue fdq bound to fedex

serverC: exchange 'fedex', fanout upstream serverA
  queue fdq bound to fedex

Delete serverA/fedex. Exchange remains deleted on serverA.

Restart either serverB or serverC
  serverA/fedex is recreated
  messages sent to serverA/fedex arrive in serverA/fdq and serverC/fdq

So far, all as expected. Now:

1. Delete serverB/fedex
2. Declare serverB/fedex, type=topic
3. Re-bind serverB/fdq to serverB/fedex
4. Delete serverA/fedex
5. At this point serverA/fedex is recreated, type=topic
6. Send a message to serverA/fedex
  => Message only goes to serverB, no copy to serverC
  => But serverC still shows Federation Status as up and running

I'm not sure what the expected behaviour should be, but it would be nice to
get an error somewhere.


D.



----
Duncan McIntyre
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/368b0c5a/attachment.html>

From dann.ormond at gmail.com  Mon Jan 27 16:36:31 2014
From: dann.ormond at gmail.com (Dann)
Date: Mon, 27 Jan 2014 09:36:31 -0700
Subject: [rabbitmq-discuss] Federation Duplicates and Filtering
Message-ID: <CANjo9rxLsjytMTY7T9k20+62AACO9sWpVEwgYLcaDWJBue07CA@mail.gmail.com>

How hard would it be to implement an option for federation that would use
the x-received-from header to know if a message came from an upstream and
then not send it back that way?

The reason I am asking is that I have a setup in JMS that is a hub and
spoke with my brokers.  My hub broker is the only way any of the other
brokers can get data from other brokers.  Also, the traffic is
bidirectional between the broker through the hub broker.  I don't have the
freedom to change the current hub and spoke setup but I want to use
federation to allow message traffic to flow and not receive duplicates at
any broker.

My thought is that when choosing where to send the data, the federation
plugin could check the x-received-from header and make sure it only sends
it to new brokers and not to brokers that have already seen the message.

Everything sounds simple in my mind but I am sure there are some
interesting gotchas with this option.

Thanks,

Dann
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/b8b50983/attachment.html>

From k.madnani84 at gmail.com  Mon Jan 27 16:43:08 2014
From: k.madnani84 at gmail.com (k.madnani84)
Date: Mon, 27 Jan 2014 08:43:08 -0800 (PST)
Subject: [rabbitmq-discuss] does.erlang.cookie gets overriden with some
	other value
Message-ID: <1390840988139-32892.post@n5.nabble.com>

Hi,

Does RabbitMQ overrides the .erlang.cookie by picking it up from some other
location.I am trying to have a two node cluster.Both are having exactly the
same cookie value in .erlang.cookie but when i check logs the cookie hash
value is different and it is happening just with one specific node.I have
done multiple clean installations and even tried to join other different
nodes with this node but this particular node is not able to form cluster
with any other nodes whereas other nodes are able to form cluster.

Is it something i am missing or the .erlang.cookie is getting overriden with
some other cookie value picking frm some other place?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/does-erlang-cookie-gets-overriden-with-some-other-value-tp32892.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From simon at rabbitmq.com  Mon Jan 27 16:48:38 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 27 Jan 2014 16:48:38 +0000
Subject: [rabbitmq-discuss] Federation Duplicates and Filtering
In-Reply-To: <CANjo9rxLsjytMTY7T9k20+62AACO9sWpVEwgYLcaDWJBue07CA@mail.gmail.com>
References: <CANjo9rxLsjytMTY7T9k20+62AACO9sWpVEwgYLcaDWJBue07CA@mail.gmail.com>
Message-ID: <52E68DE6.70605@rabbitmq.com>

On 27/01/2014 16:36, Dann wrote:
> How hard would it be to implement an option for federation that would
> use the x-received-from header to know if a message came from an
> upstream and then not send it back that way?

It's on the TODO list. It *might* be in 3.3.0. (I would certainly like 
it to be.)

> Everything sounds simple in my mind but I am sure there are some
> interesting gotchas with this option.

It's a bit harder than it looks, yes. The problem is that there are two 
notions of node identity in federation - what a node knows itself as 
(the local_nodename, defaulting to but not necessarily the hostname) and 
what other nodes know it as (the DNS name, ending up in the URI). Maybe 
if you are lucky then the two coincide, but I would not want to assume 
that. Plus federation links really connect clusters, which don't have 
DNS names anyway. And we want to drop messages at the upstream, for 
efficiency, so we only have the local_nodename to go on - but 
x-received-from contains URIs.

So we need to sort that lot out before it can happen. Not impossible, 
but just a bit fiddly.

Cheers, Simon


From k.madnani84 at gmail.com  Mon Jan 27 16:48:33 2014
From: k.madnani84 at gmail.com (k.madnani84)
Date: Mon, 27 Jan 2014 08:48:33 -0800 (PST)
Subject: [rabbitmq-discuss] does.erlang.cookie gets overriden with some
	other value
In-Reply-To: <1390840988139-32892.post@n5.nabble.com>
References: <1390840988139-32892.post@n5.nabble.com>
Message-ID: <1390841313320-32893.post@n5.nabble.com>

And to add to it even if i am changing the value of .erlang.cookie the cookie
hash always remains the same so definetly it is picking the cookie value
from some other location.Any idea from where it could be?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/does-erlang-cookie-gets-overriden-with-some-other-value-tp32892p32893.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From gavinmroy at gmail.com  Mon Jan 27 17:05:29 2014
From: gavinmroy at gmail.com (Gavin M. Roy)
Date: Mon, 27 Jan 2014 12:05:29 -0500
Subject: [rabbitmq-discuss] rabbitpy 0.15.0
Message-ID: <CAPnH5ko-kL11TT2G9UigHrReG-+37YPJB-Bx+e1XRc0xdTCz4A@mail.gmail.com>

I have pushed rabbitpy 0.15.0 to pypi and it is available for use. It is
considered the latest and greatest stable release and all users are urged
to upgrade.

This release is primarily a bug fix release but includes several behavioral
changes:

- Fix for SSL connections that do not specify the SSL version
- Change default durability for queues and exchanges, changing them from
durable to not durable to match a majority of other AMQP/RabbitMQ clients.
- Cleaned up Python context manager exiting for Channels and Connections
- Cleaned up exception raising from rabbitpy.io
- Fix for rabbitpy.Channel.close being invoked multiple times on unclean
shutdown
- Ensure that all consumers are canceled if possible on unclean shutdown
- Wait for Basic.CancelOk when sending Basic.Cancel
- Exit out of rabbitpy.base.AMQPChannel.wait_on_frame if there are any
pending exceptions instead of infinitely looping
- Remove the default prefetch value of 100 when consuming, reverting to not
specifying a Basic.QoS prefetch-count

For more information, including installation instructions, please visit
https://pypi.python.org/pypi/rabbitpy or the documentation at
https://rabbitpy.readthedocs.org

If you have any issues, please be sure to use the issue tracker at
https://github.com/gmr/rabbitpy/issues

Regards,

Gavin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/caf83850/attachment.html>

From simon at rabbitmq.com  Mon Jan 27 17:09:19 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 27 Jan 2014 17:09:19 +0000
Subject: [rabbitmq-discuss] Federated Exchange - behaviour after delete
In-Reply-To: <CAAaVn2AzUKgFbgow7UQf8Y4Q6HknXiBZdU=D4tGshB_+edrbRg@mail.gmail.com>
References: <CAAaVn2AzUKgFbgow7UQf8Y4Q6HknXiBZdU=D4tGshB_+edrbRg@mail.gmail.com>
Message-ID: <52E692BF.4060002@rabbitmq.com>

On 27/01/2014 16:36, Duncan McIntyre wrote:
> Unexpected behaviour. Running RabbitMQ 3.2.3 / Erlang 14B04

<snip>

So to summarise: have A as upstream to B and C. Delete A and restart B; 
B recreates A and works fine. C does not realise that anything has gone 
wrong, although its bindings are all missing.

I don't think the change of exchange type is important BTW.

> I'm not sure what the expected behaviour should be, but it would be nice
> to get an error somewhere.

Hmm, yes. Really C should see that its connection to the exchange has 
gone away, but the trouble is it only really gets to see the queue.

I will have a think about what we can do about this.

Cheers, Simon

From simon at rabbitmq.com  Mon Jan 27 17:26:31 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 27 Jan 2014 17:26:31 +0000
Subject: [rabbitmq-discuss] Behaviour of Federated Queues
In-Reply-To: <52E6826E.8010907@one.com>
References: <52E1407B.8060901@one.com> <52E25A9F.2090802@rabbitmq.com>
 <52E28618.8010905@one.com> <52E6826E.8010907@one.com>
Message-ID: <52E696C7.1060007@rabbitmq.com>

On 27/01/2014 15:59, Josh West wrote:
> This is confirmed.  If you create and immediately delete a queue, with
> federation configured, the upstream will also create the queue but not
> delete the queue.
>
> This sounds like it may be a bug with federated queues.

I don't think it is - in general it's not intended that deletion of 
objects should get transferred across federation links. There's no grand 
theoretical reason for that, just that I thought that it might be a good 
way to shoot yourself in the foot. It's OK to accidentally create a 
bunch of federated stuff on remote servers; you can just go and delete 
it if you don't want it. But to delete things remotely seems like the 
sort of thing that will make somebody very unhappy one day.

Cheers, Simon


From dann.ormond at gmail.com  Mon Jan 27 17:31:08 2014
From: dann.ormond at gmail.com (Dann)
Date: Mon, 27 Jan 2014 10:31:08 -0700
Subject: [rabbitmq-discuss] Federation Duplicates and Filtering
In-Reply-To: <52E68DE6.70605@rabbitmq.com>
References: <CANjo9rxLsjytMTY7T9k20+62AACO9sWpVEwgYLcaDWJBue07CA@mail.gmail.com>
 <52E68DE6.70605@rabbitmq.com>
Message-ID: <CANjo9ryo1zQA5eFcUmMF3bkR-p0SSm5M-SdG++Mvf-m9-+6srw@mail.gmail.com>

Thanks!  Is there a release date for 3.3.0?  I hope it is also in 3.3.0. :-)


On Mon, Jan 27, 2014 at 9:48 AM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 27/01/2014 16:36, Dann wrote:
>
>> How hard would it be to implement an option for federation that would
>> use the x-received-from header to know if a message came from an
>> upstream and then not send it back that way?
>>
>
> It's on the TODO list. It *might* be in 3.3.0. (I would certainly like it
> to be.)
>
>
>  Everything sounds simple in my mind but I am sure there are some
>> interesting gotchas with this option.
>>
>
> It's a bit harder than it looks, yes. The problem is that there are two
> notions of node identity in federation - what a node knows itself as (the
> local_nodename, defaulting to but not necessarily the hostname) and what
> other nodes know it as (the DNS name, ending up in the URI). Maybe if you
> are lucky then the two coincide, but I would not want to assume that. Plus
> federation links really connect clusters, which don't have DNS names
> anyway. And we want to drop messages at the upstream, for efficiency, so we
> only have the local_nodename to go on - but x-received-from contains URIs.
>
> So we need to sort that lot out before it can happen. Not impossible, but
> just a bit fiddly.
>
> Cheers, Simon
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/e1ab31e8/attachment.html>

From simon at rabbitmq.com  Mon Jan 27 17:32:55 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 27 Jan 2014 17:32:55 +0000
Subject: [rabbitmq-discuss] Federation Duplicates and Filtering
In-Reply-To: <CANjo9ryo1zQA5eFcUmMF3bkR-p0SSm5M-SdG++Mvf-m9-+6srw@mail.gmail.com>
References: <CANjo9rxLsjytMTY7T9k20+62AACO9sWpVEwgYLcaDWJBue07CA@mail.gmail.com>	<52E68DE6.70605@rabbitmq.com>
 <CANjo9ryo1zQA5eFcUmMF3bkR-p0SSm5M-SdG++Mvf-m9-+6srw@mail.gmail.com>
Message-ID: <52E69847.9060901@rabbitmq.com>

On 27/01/2014 17:31, Dann wrote:
> Thanks!  Is there a release date for 3.3.0?

The first half of this year.

So there is a date, but not a very precise one.

> I hope it is also in 3.3.0. :-)

I should emphasise that no work has been done yet...

Cheers, Simon

From jsw at one.com  Mon Jan 27 17:35:18 2014
From: jsw at one.com (Josh West)
Date: Mon, 27 Jan 2014 12:35:18 -0500
Subject: [rabbitmq-discuss] Behaviour of Federated Queues
In-Reply-To: <52E696C7.1060007@rabbitmq.com>
References: <52E1407B.8060901@one.com> <52E25A9F.2090802@rabbitmq.com>
 <52E28618.8010905@one.com> <52E6826E.8010907@one.com>
 <52E696C7.1060007@rabbitmq.com>
Message-ID: <52E698D6.9090205@one.com>

On 01/27/2014 12:26 PM, Simon MacMullen wrote:
> On 27/01/2014 15:59, Josh West wrote:
>> This is confirmed.  If you create and immediately delete a queue, with
>> federation configured, the upstream will also create the queue but not
>> delete the queue.
>>
>> This sounds like it may be a bug with federated queues.
>
> I don't think it is - in general it's not intended that deletion of 
> objects should get transferred across federation links. There's no 
> grand theoretical reason for that, just that I thought that it might 
> be a good way to shoot yourself in the foot. It's OK to accidentally 
> create a bunch of federated stuff on remote servers; you can just go 
> and delete it if you don't want it. But to delete things remotely 
> seems like the sort of thing that will make somebody very unhappy one 
> day.
>
> Cheers, Simon
>

Oh ok.  If it is intended behaviour to not have deletions propagated, 
then this throws a wrench in my RPC-via-Federated-Queues design.  Unless 
I'm ok with just setting queue expiration to some sufficient amount of 
time for each of the RPC callback queues.

Josh West
One.com - http://www.one.com



From prabodh.upreti at vce.com  Mon Jan 27 18:27:07 2014
From: prabodh.upreti at vce.com (Prabodh Upreti)
Date: Mon, 27 Jan 2014 10:27:07 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmqadmin syntax for parameters
Message-ID: <1390847227921-32901.post@n5.nabble.com>

Hello

I am trying to run the following command on my centos box

./rabbitmqadmin declare queue name="xyz" durable=true
'arguments={"x-message-ttl":"86400000"}'

and keep getting 

Argument "arguments" not recognised

I am running on 2.8.6

Is there a different way I need to pass the arguments?  Java client api is
working fine.

thanks in advance. 

regards




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmqadmin-syntax-for-parameters-tp32901.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From kldavis4 at gmail.com  Mon Jan 27 17:57:56 2014
From: kldavis4 at gmail.com (Kelly Davis)
Date: Mon, 27 Jan 2014 09:57:56 -0800 (PST)
Subject: [rabbitmq-discuss] Troubleshooting reject with requeue
Message-ID: <66efde7b-18ed-44e9-b26e-5ef5aa8896e2@googlegroups.com>

I am running Rabbitmq 2.8.1 with mirrored queues. 

I have an application that runs periodically to process messages in a 
queue. When processing a message fails, the application rejects the message 
with requeue = true. On subsequent executions of the application, the 
rejected message doesn't get processed and appears to have been dropped 
completely instead of re-queued. 

I am not able to replicate this behavior in my dev environment but I am 
stumped as to how to troubleshoot further in production. Any suggestions?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/ea541630/attachment.html>

From jared at kauppi.la  Mon Jan 27 19:37:19 2014
From: jared at kauppi.la (Jared Kauppila)
Date: Mon, 27 Jan 2014 11:37:19 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ 3.2.2 and Erlang R16B03 - SSL Issue
In-Reply-To: <52E685AB.3050106@rabbitmq.com>
References: <52E685AB.3050106@rabbitmq.com>
Message-ID: <1390851439628.2747401c@Nodemailer>

Hi Emile,


R16B03-1 does fix the issue I was experiencing.




Thanks!

On Mon, Jan 27, 2014 at 10:13 AM, Emile Joubert <emile at rabbitmq.com>
wrote:

> Hi Jared,
> On 21/01/14 16:20, Emile Joubert wrote:
>> On 21/01/14 12:55, Jared Kauppila wrote:
>>> There is no difference in behavior with that SSL setting configured.
>> 
>> This looks like an Erlang bug. I have reported it to the Erlang
>> developers. In the meantime
> It looks like R16B03-1 contains the fix (OTP-11595). Could you try with
> that and let us know if it works for you?
> -Emile
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140127/d04cc61e/attachment.html>

From simon at rabbitmq.com  Tue Jan 28 08:40:33 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 28 Jan 2014 08:40:33 +0000
Subject: [rabbitmq-discuss] rabbitmqadmin syntax for parameters
In-Reply-To: <1390847227921-32901.post@n5.nabble.com>
References: <1390847227921-32901.post@n5.nabble.com>
Message-ID: <52E76D01.9060002@rabbitmq.com>

On 27/01/2014 18:27, Prabodh Upreti wrote:
> I am running on 2.8.6
>
> Is there a different way I need to pass the arguments?  Java client api is
> working fine.

rabbitmqadmin didn't support passing arguments until 3.1.0.

You should be able to download the latest version of rabbitmqadmin from

http://hg.rabbitmq.com/rabbitmq-management/raw-file/stable/bin/rabbitmqadmin

which should still work with the 2.8.6 management plugin.

Cheers, Simon

From simon at rabbitmq.com  Tue Jan 28 09:41:37 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 28 Jan 2014 09:41:37 +0000
Subject: [rabbitmq-discuss] Troubleshooting reject with requeue
In-Reply-To: <66efde7b-18ed-44e9-b26e-5ef5aa8896e2@googlegroups.com>
References: <66efde7b-18ed-44e9-b26e-5ef5aa8896e2@googlegroups.com>
Message-ID: <52E77B51.7000503@rabbitmq.com>

I'm not aware of any bugs specifically around reject and mirrored 
queues. However, it's certainly the case that we have fixed a large 
number of bugs in mirrored queues since 2.8.1. I could certainly believe 
that some of these bugs might cause the behaviour you're seeing, so I 
would have to suggest you upgrade and see if the problem persists.

Cheers, Simon

On 27/01/2014 17:57, Kelly Davis wrote:
> I am running Rabbitmq 2.8.1 with mirrored queues.
>
> I have an application that runs periodically to process messages in a
> queue. When processing a message fails, the application rejects the
> message with requeue = true. On subsequent executions of the
> application, the rejected message doesn't get processed and appears to
> have been dropped completely instead of re-queued.
>
> I am not able to replicate this behavior in my dev environment but I am
> stumped as to how to troubleshoot further in production. Any suggestions?
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


From connect_kausik at yahoo.com  Tue Jan 28 09:55:00 2014
From: connect_kausik at yahoo.com (Kausik Chattopadhyay)
Date: Tue, 28 Jan 2014 01:55:00 -0800 (PST)
Subject: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ
	server
In-Reply-To: <etPan.52e687a7.3352255a.aba4@gmr-home.local>
References: <1390373029.32279.YahooMailNeo@web141402.mail.bf1.yahoo.com>
 <4DED600F-D7D3-479E-95D4-5693C124C924@rabbitmq.com>
 <1390388342.78457.YahooMailNeo@web141405.mail.bf1.yahoo.com>
 <A9A3A8C6-B08E-4079-9C15-94E78640464F@gopivotal.com>
 <1390401469.50206.YahooMailNeo@web141406.mail.bf1.yahoo.com>
 <1390820501.39514.YahooMailNeo@web141405.mail.bf1.yahoo.com>
 <etPan.52e68197.66ef438d.aba4@gmr-home.local>
 <etPan.52e687a7.3352255a.aba4@gmr-home.local>
Message-ID: <1390902900.87968.YahooMailNeo@web141406.mail.bf1.yahoo.com>

Thank you Gavin.
?Actually I tried with your code-sample.py. It worked and then it worked with my client as well. A bit surprised. This s my ssl_options
?ssl_options = {"ca_certs": "cacert.pem",
? ? ? ? ? ? ? ? ? ?"certfile": "cert.pem",
? ? ? ? ? ? ? ? ? ?"keyfile": "key.pem",
? ? ? ? ? ? ? ? ? ?"cert_reqs": True}

In the serverside the configuration is as follows:

rabbitmq at ubuntuvm:~$ rabbitmqctl environment

Application environment of node rabbit at ubuntuvm ...
[{auth_backends,[rabbit_auth_backend_internal]},
?{auth_mechanisms,['PLAIN','AMQPLAIN']},
?{backing_queue_module,rabbit_variable_queue},
?{cluster_nodes,{[],disc}},
?{collect_statistics,none},
?{collect_statistics_interval,5000},
?{default_permissions,[<<".*">>,<<".*">>,<<".*">>]},
?{default_user,<<"guest">>},
?{default_user_tags,[administrator]},
?{default_vhost,<<"/">>},
?{delegate_count,16},
?{disk_free_limit,1000000000},
?{enabled_plugins_file,"/etc/rabbitmq/enabled_plugins"},
?{error_logger,{file,"/var/log/rabbitmq/rabbit at ubuntuvm.log"}},
?{frame_max,131072},
?{heartbeat,600},
?{hipe_compile,false},
?{included_applications,[]},
?{log_levels,[{connection,info}]},
?{msg_store_file_size_limit,16777216},
?{msg_store_index_module,rabbit_msg_store_ets_index},
?{plugins_dir,"/usr/lib/rabbitmq/lib/rabbitmq_server-3.0.2/sbin/../plugins"},
?{plugins_expand_dir,"/var/lib/rabbitmq/mnesia/rabbit at ubuntuvm-plugins-expand"},
?{queue_index_max_journal_entries,262144},
?{reverse_dns_lookups,false},
?{sasl_error_logger,{file,"/var/log/rabbitmq/rabbit at ubuntuvm-sasl.log"}},
?{server_properties,[]},
?{ssl_cert_login_from,distinguished_name},
?{ssl_listeners,[5671]},
?{ssl_options,[{cacertfile,"/home/rabbitmq/testca/cacert.pem"},
? ? ? ? ? ? ? ?{certfile,"/home/rabbitmq/server/cert.pem"},
? ? ? ? ? ? ? ?{keyfile,"/home/rabbitmq/server/key.pem"},
? ? ? ? ? ? ? ?{verify,verify_peer},
? ? ? ? ? ? ? ?{fail_if_no_peer_cert,false}]},
?{tcp_listen_options,[binary,
? ? ? ? ? ? ? ? ? ? ? {packet,raw},
? ? ? ? ? ? ? ? ? ? ? {reuseaddr,true},
? ? ? ? ? ? ? ? ? ? ? {backlog,128},
? ? ? ? ? ? ? ? ? ? ? {nodelay,true},
? ? ? ? ? ? ? ? ? ? ? {linger,{true,0}},
? ? ? ? ? ? ? ? ? ? ? {exit_on_close,false}]},
?{tcp_listeners,[5672]},
?{trace_vhosts,[]},
?{vm_memory_high_watermark,0.4}]
...done.


Trying to debug why it was failing earlier.




On Monday, January 27, 2014 10:12 PM, Gavin M. Roy <gavinmroy at gmail.com> wrote:
 
Here?s a gist of both my rabbitmq.config, an example python script using BlockingConnection on 0.9.13 and the interactive session running the script, all working with SSL using pika:

https://gist.github.com/gmr/8651586

I?m going to guess that either your RabbitMQ SSL configuration is incorrect or that your ssl_options specified are preventing you from connecting.

Also, looking at your output, you appear to be connecting just fine. Any abrupt connection disconnects are happening after your connection is established. These last two lines specify:

DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?process ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?231 : Calling <bound method BlockingConnection._on_connection_open of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>> for "0:Connection.OpenOk"
The connection has been established ok
DEBUG ? ? ?2014-01-27 16:25:27,927 pika.callback ? ? ? ? ? ? ? ? ?add ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?161 : Added: {'callback': <bound method BlockingConnection._on_connection_closed of <pika.adapters.blocking_connection.BlockingConnection object at 0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments': None, 'calls': 1}

The adapter has registered to be notified when the connection is closed.

If your python app stops there, the connection will be closed abruptly with RabbitMQ since you?re not telling it to shutdown the connection.

Hope this helps,

Gavin



________________________________
From:?Gavin M. Roy Gavin M. Roy
Reply:?Gavin M. Roy gavinmroy at gmail.com
Date:?January 27, 2014 at 10:56:25 AM
To:?Michael Klishin mklishin at gopivotal.com, Kausik Chattopadhyay connect_kausik at yahoo.com
Subject:?Re: [rabbitmq-discuss] Not able to get ssl working with rabbitMQ server 

Your ssl_options are a pretty important
part of the SSL connection in this code and they are omitted, same
with your other email thread. Without them, it?s hard to debug for
you. The underlying code is the same regardless of the connection
adapter. If we can see what those are, it should help.

Also, any related snippets from rabbit@[NODE].log could be
helpful.

Gavin


________________________________
 From:?Kausik Chattopadhyay Kausik
Chattopadhyay
Reply:?Kausik Chattopadhyay connect_kausik at yahoo.com, Discussions about RabbitMQ rabbitmq-discuss at lists.rabbitmq.com
Date:?January 27, 2014 at 6:03:05
AM
To:?Michael Klishin mklishin at gopivotal.com
Subject:? Re: [rabbitmq-discuss] Not
able to get ssl working with rabbitMQ server

Hi
Michael,
>So far I
?was working with SelectConnection using pika and it is
good.
>Today I
tried to get a publisher working with BlockingConnection with SSL.
Normal connection works however failing with SSL. The same setup
works with SelectConnection. Any idea ?
>
>
>My
publisher code is as follows:
>
>
>?parameters =
ConnectionParameters(HOST, PORT,
>? ? ? ? ?
? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ?
ssl=True,
>? ? ? ? ?
? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ?
ssl_options=ssl_options)
>connection =
pika.BlockingConnection(parameters)
>
>
>
>
>
>
>
>
>I am
getting the following error:
>
>------------------------------------------
>DEBUG ?
? ?2014-01-27 16:25:27,901 pika.callback ? ?
? ? ? ? ? ? ?add ? ?
? ? ? ? ? ? ? ? ?
? ? ? ? ? ?161 : Added: {'callback':
<bound method BlockingConnection._on_connection_error of
<pika.adapters.blocking_connection.BlockingConnection object at
0x2d6be90>>, 'only': None, 'one_shot': False, 'arguments':
None}
>
>DEBUG ? ?
?2014-01-27 16:25:27,901 pika.callback ? ? ?
? ? ? ? ? ?add ? ? ?
? ? ? ? ? ? ? ? ?
? ? ? ? ?161 : Added: {'callback':
<bound method BlockingConnection._on_connection_start of
<pika.adapters.blocking_connection.BlockingConnection object at
0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments':
None, 'calls': 1}
>INFO ? ? ?
2014-01-27 16:25:27,901 pika.adapters.base_connection
?_create_and_connect_to_socket ? ? ? ?164
: Connecting to 172.16.47.133:5671 with SSL
>DEBUG ? ?
?2014-01-27 16:25:27,925 pika.callback ? ? ?
? ? ? ? ? ?process ? ?
? ? ? ? ? ? ? ? ?
? ? ? ?217 : Processing
0:Connection.Start
>DEBUG ? ?
?2014-01-27 16:25:27,925 pika.callback ? ? ?
? ? ? ? ? ?_use_one_shot_callback
? ? ? ? ? ? ? 390 : Processing
use of oneshot callback
>DEBUG ? ?
?2014-01-27 16:25:27,925 pika.callback ? ? ?
? ? ? ? ? ?_use_one_shot_callback
? ? ? ? ? ? ? 392 : 0 registered
uses left
>DEBUG ? ?
?2014-01-27 16:25:27,925 pika.callback ? ? ?
? ? ? ? ? ?remove ? ?
? ? ? ? ? ? ? ? ?
? ? ? ? 260 : Removing callback #0:
{'callback': <bound method
BlockingConnection._on_connection_start of
<pika.adapters.blocking_connection.BlockingConnection object at
0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments':
None, 'calls': 0}
>DEBUG ? ?
?2014-01-27 16:25:27,926 pika.callback ? ? ?
? ? ? ? ? ?process ? ?
? ? ? ? ? ? ? ? ?
? ? ? ?231 : Calling <bound method
BlockingConnection._on_connection_start of
<pika.adapters.blocking_connection.BlockingConnection object at
0x2d6be90>> for "0:Connection.Start"
>DEBUG ? ?
?2014-01-27 16:25:27,926 pika.callback ? ? ?
? ? ? ? ? ?add ? ? ?
? ? ? ? ? ? ? ? ?
? ? ? ? ?161 : Added: {'callback':
<bound method BlockingConnection._on_connection_tune of
<pika.adapters.blocking_connection.BlockingConnection object at
0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments':
None, 'calls': 1}
>DEBUG ? ?
?2014-01-27 16:25:27,926 pika.callback ? ? ?
? ? ? ? ? ?process ? ?
? ? ? ? ? ? ? ? ?
? ? ? ?217 : Processing 0:Connection.Tune
>DEBUG ? ?
?2014-01-27 16:25:27,926 pika.callback ? ? ?
? ? ? ? ? ?_use_one_shot_callback
? ? ? ? ? ? ? 390 : Processing
use of oneshot callback
>DEBUG ? ?
?2014-01-27 16:25:27,926 pika.callback ? ? ?
? ? ? ? ? ?_use_one_shot_callback
? ? ? ? ? ? ? 392 : 0 registered
uses left
>DEBUG ? ?
?2014-01-27 16:25:27,926 pika.callback ? ? ?
? ? ? ? ? ?remove ? ?
? ? ? ? ? ? ? ? ?
? ? ? ? 260 : Removing callback #0:
{'callback': <bound method
BlockingConnection._on_connection_tune of
<pika.adapters.blocking_connection.BlockingConnection object at
0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments':
None, 'calls': 0}
>DEBUG ? ?
?2014-01-27 16:25:27,926 pika.callback ? ? ?
? ? ? ? ? ?process ? ?
? ? ? ? ? ? ? ? ?
? ? ? ?231 : Calling <bound method
BlockingConnection._on_connection_tune of
<pika.adapters.blocking_connection.BlockingConnection object at
0x2d6be90>> for "0:Connection.Tune"
>DEBUG ? ?
?2014-01-27 16:25:27,926 pika.connection ? ? ?
? ? ? ? ?_create_heartbeat_checker ?
? ? ? ? ?946 : Creating a
HeartbeatChecker: 600
>DEBUG ? ?
?2014-01-27 16:25:27,926 pika.callback ? ? ?
? ? ? ? ? ?add ? ? ?
? ? ? ? ? ? ? ? ?
? ? ? ? ?161 : Added: {'callback':
<bound method BlockingConnection._on_connection_open of
<pika.adapters.blocking_connection.BlockingConnection object at
0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments':
None, 'calls': 1}
>DEBUG ? ?
?2014-01-27 16:25:27,927 pika.callback ? ? ?
? ? ? ? ? ?process ? ?
? ? ? ? ? ? ? ? ?
? ? ? ?217 : Processing
0:Connection.OpenOk
>DEBUG ? ?
?2014-01-27 16:25:27,927 pika.callback ? ? ?
? ? ? ? ? ?_use_one_shot_callback
? ? ? ? ? ? ? 390 : Processing
use of oneshot callback
>DEBUG ? ?
?2014-01-27 16:25:27,927 pika.callback ? ? ?
? ? ? ? ? ?_use_one_shot_callback
? ? ? ? ? ? ? 392 : 0 registered
uses left
>DEBUG ? ?
?2014-01-27 16:25:27,927 pika.callback ? ? ?
? ? ? ? ? ?remove ? ?
? ? ? ? ? ? ? ? ?
? ? ? ? 260 : Removing callback #0:
{'callback': <bound method
BlockingConnection._on_connection_open of
<pika.adapters.blocking_connection.BlockingConnection object at
0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments':
None, 'calls': 0}
>DEBUG ? ?
?2014-01-27 16:25:27,927 pika.callback ? ? ?
? ? ? ? ? ?process ? ?
? ? ? ? ? ? ? ? ?
? ? ? ?231 : Calling <bound method
BlockingConnection._on_connection_open of
<pika.adapters.blocking_connection.BlockingConnection object at
0x2d6be90>> for "0:Connection.OpenOk"
>DEBUG ? ?
?2014-01-27 16:25:27,927 pika.callback ? ? ?
? ? ? ? ? ?add ? ? ?
? ? ? ? ? ? ? ? ?
? ? ? ? ?161 : Added: {'callback':
<bound method BlockingConnection._on_connection_closed of
<pika.adapters.blocking_connection.BlockingConnection object at
0x2d6be90>>, 'only': None, 'one_shot': True, 'arguments':
None, 'calls': 1}
>
>
>---------------------------------------?
>
>
>
>Serverside log shows:
>
>
>=INFO REPORT====
27-Jan-2014::05:55:47 ===
>accepting AMQP connection
<0.6427.1> (172.16.47.1:56458 -> 172.16.47.133:5671)
>
>
>=WARNING REPORT====
27-Jan-2014::05:55:47 ===
>closing AMQP connection
<0.6427.1> (172.16.47.1:56458 ->
172.16.47.133:5671):
>connection_closed_abruptly
>
>
>
>
>
>
>
>On Wednesday, January
22, 2014 8:07 PM, Kausik Chattopadhyay
<connect_kausik at yahoo.com> wrote:
>
>Hi Michael,
>Thanks.
>?Actually the
certificates were owned by root.?
>I tried the
followings:
>1. Adding user
rabbitmq to group root ?--- didnt work
>2. Changing the
ownership of all the certficates to rabbitmq:rabbitmq --- didnt
work
>
>
>Finally I tried
this. Created a "rabbitmq" sudoer. Installing rabbitmq server.
Generating the certificates as a "rabbitmq" user --> this
worked
>
>
>Thanks
>Kausik
>
>
>
>On Wednesday, January
22, 2014 4:54 PM, Michael Klishin <mklishin at gopivotal.com>
wrote:
>
>
>On 22 Jan 2014, at 14:59, Kausik Chattopadhyay <connect_kausik at yahoo.com>
wrote:
>
>> Interestingly, this is the log from rabbit at master1-sasl.log
>
>There is nothing new in the SASL log.
>
>ecacertfile indicates there was an issue with the CA certificate,
which cannot
>be loaded due to eaccess (according to the other log file). 
>
>--
>MK
>
>Software Engineer, Pivotal/RabbitMQ
>
>
>
>
>
_______________________________________________
>rabbitmq-discuss mailing list
>rabbitmq-discuss at lists.rabbitmq.com
>https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/7f70e6b0/attachment.html>

From dmcintyre at gopivotal.com  Tue Jan 28 14:15:26 2014
From: dmcintyre at gopivotal.com (Duncan McIntyre)
Date: Tue, 28 Jan 2014 14:15:26 +0000
Subject: [rabbitmq-discuss] Who created a queue?
Message-ID: <CAAaVn2A7vzLpBHdo19W9=o17M4nEiabquYDYGHzoutOvw+vscw@mail.gmail.com>

Is there a way to tell which user created a queue?

Ideally this information would be available via the API, but parsing logs
would be acceptable.

-------
Duncan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/3ec7d976/attachment.html>

From dmcintyre at gopivotal.com  Tue Jan 28 14:21:19 2014
From: dmcintyre at gopivotal.com (Duncan McIntyre)
Date: Tue, 28 Jan 2014 14:21:19 +0000
Subject: [rabbitmq-discuss] Order of publication to queues and HA nodes
Message-ID: <CAAaVn2AO=KZ-yiRF35zb2bkceuPQ4N56afiLeo589g+1evFf_g@mail.gmail.com>

Let's say I have a fanout exchange bound to a set of HA queues across 3
nodes.

When a message is published to the exchange, is there any deterministic
ordering when the messages become available on the queues? Some customers
care that there should be no advantage to one consumer over another in
terms of when such a message becomes available.

----

Duncan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/9437f1dc/attachment.html>

From michael.s.klishin at gmail.com  Tue Jan 28 14:34:23 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 28 Jan 2014 18:34:23 +0400
Subject: [rabbitmq-discuss] Who created a queue?
In-Reply-To: <CAAaVn2A7vzLpBHdo19W9=o17M4nEiabquYDYGHzoutOvw+vscw@mail.gmail.com>
References: <CAAaVn2A7vzLpBHdo19W9=o17M4nEiabquYDYGHzoutOvw+vscw@mail.gmail.com>
Message-ID: <CAE3HoVRgvmNZ6Q+2sNp0Q6ajKiawCDLYhQCt0S81ez0-+juAfg@mail.gmail.com>

2014-01-28 Duncan McIntyre <dmcintyre at gopivotal.com>

> Is there a way to tell which user created a queue?
>
> Ideally this information would be available via the API, but parsing logs
> would be acceptable.
>

Duncan,

RabbitMQ does not track which user created a particular entity.
Such operations are also not logged.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/a34b1fbb/attachment.html>

From dmcintyre at gopivotal.com  Tue Jan 28 14:38:22 2014
From: dmcintyre at gopivotal.com (Duncan McIntyre)
Date: Tue, 28 Jan 2014 14:38:22 +0000
Subject: [rabbitmq-discuss] Who created a queue?
In-Reply-To: <CAE3HoVRgvmNZ6Q+2sNp0Q6ajKiawCDLYhQCt0S81ez0-+juAfg@mail.gmail.com>
References: <CAAaVn2A7vzLpBHdo19W9=o17M4nEiabquYDYGHzoutOvw+vscw@mail.gmail.com>
 <CAE3HoVRgvmNZ6Q+2sNp0Q6ajKiawCDLYhQCt0S81ez0-+juAfg@mail.gmail.com>
Message-ID: <CAAaVn2AYNxTOxyP-NNFCsNhHwKL6bQ_Vau1tS1EJWaB-L4dLhQ@mail.gmail.com>

Feature request? :-)


On Tue, Jan 28, 2014 at 2:34 PM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

>
> 2014-01-28 Duncan McIntyre <dmcintyre at gopivotal.com>
>
>> Is there a way to tell which user created a queue?
>>
>> Ideally this information would be available via the API, but parsing logs
>> would be acceptable.
>>
>
> Duncan,
>
> RabbitMQ does not track which user created a particular entity.
> Such operations are also not logged.
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
----
Duncan McIntyre
Senior Consultant
dmcintyre at gopivotal.com
+44 7917 580 118
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/e7d63973/attachment.html>

From mklishin at gopivotal.com  Tue Jan 28 14:58:59 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 28 Jan 2014 18:58:59 +0400
Subject: [rabbitmq-discuss] Who created a queue?
In-Reply-To: <CAAaVn2AYNxTOxyP-NNFCsNhHwKL6bQ_Vau1tS1EJWaB-L4dLhQ@mail.gmail.com>
References: <CAAaVn2A7vzLpBHdo19W9=o17M4nEiabquYDYGHzoutOvw+vscw@mail.gmail.com>
 <CAE3HoVRgvmNZ6Q+2sNp0Q6ajKiawCDLYhQCt0S81ez0-+juAfg@mail.gmail.com>
 <CAAaVn2AYNxTOxyP-NNFCsNhHwKL6bQ_Vau1tS1EJWaB-L4dLhQ@mail.gmail.com>
Message-ID: <4F3D12AD-5DD6-4426-A2A5-E6B765A3EA5C@rabbitmq.com>


On 28 Jan 2014, at 18:38, Duncan McIntyre <dmcintyre at gopivotal.com> wrote:

> Feature request? :-)

Noted. There is a good chance such functionality can be implemented in a plugin.

Firehose [1] lets you build similar tools in any language, but I doubt information
about connection user is available through it at the moment.

1. http://www.rabbitmq.com/firehose.html

MK

Software Engineer, Pivotal/RabbitMQ



From mklishin at gopivotal.com  Tue Jan 28 15:01:31 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 28 Jan 2014 19:01:31 +0400
Subject: [rabbitmq-discuss] Who created a queue?
In-Reply-To: <4F3D12AD-5DD6-4426-A2A5-E6B765A3EA5C@rabbitmq.com>
References: <CAAaVn2A7vzLpBHdo19W9=o17M4nEiabquYDYGHzoutOvw+vscw@mail.gmail.com>
 <CAE3HoVRgvmNZ6Q+2sNp0Q6ajKiawCDLYhQCt0S81ez0-+juAfg@mail.gmail.com>
 <CAAaVn2AYNxTOxyP-NNFCsNhHwKL6bQ_Vau1tS1EJWaB-L4dLhQ@mail.gmail.com>
 <4F3D12AD-5DD6-4426-A2A5-E6B765A3EA5C@rabbitmq.com>
Message-ID: <FE70EFED-BF5D-44E7-B69F-6F742F8FCE28@gopivotal.com>


On 28 Jan 2014, at 18:58, Michael Klishin <mklishin at gopivotal.com> wrote:

> Firehose [1] lets you build similar tools in any language, but I doubt information
> about connection user is available through it at the moment.
> 
> 1. http://www.rabbitmq.com/firehose.html

Scratch that. Firehose only provides a stream of events for published messages.

It sounds natural to extend it a bit at some future point, though.
--
MK

Software Engineer, Pivotal/RabbitMQ



From simon at rabbitmq.com  Tue Jan 28 15:07:56 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 28 Jan 2014 15:07:56 +0000
Subject: [rabbitmq-discuss] Order of publication to queues and HA nodes
In-Reply-To: <CAAaVn2AO=KZ-yiRF35zb2bkceuPQ4N56afiLeo589g+1evFf_g@mail.gmail.com>
References: <CAAaVn2AO=KZ-yiRF35zb2bkceuPQ4N56afiLeo589g+1evFf_g@mail.gmail.com>
Message-ID: <52E7C7CC.2040506@rabbitmq.com>

On 28/01/14 14:21, Duncan McIntyre wrote:
> Let's say I have a fanout exchange bound to a set of HA queues across 3
> nodes.
>
> When a message is published to the exchange, is there any deterministic
> ordering when the messages become available on the queues?

No.

RabbitMQ gives ordering guarantees for any given (publishing channel) -> 
(queue) -> (consuming channel) route. There aren't any ordering 
guarantees that make sense when more than one queue is involved, since 
the queues run in parallel.

> Some
> customers care that there should be no advantage to one consumer over
> another in terms of when such a message becomes available.

Depends what you mean. It's obviously the case that the queues cannot 
all receive the message simultaneously and transmit to all consumers 
simultaneously too; even if we have more cores than consumers we 
probably have fewer network cables...

But if you just mean "is there a systemic bias"? - the answer is 
probably not. The publishing channel will dispatch the message to 
multiple queues in a predictable order - but it's sending the message 
asynchronously. Which queues receive the message first is then in the 
hands of the scheduler - which is likely to impart enough randomness to 
things for most purposes.

Having said which, I haven't tried to test this. Have you?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From tomas.tulka at atos.net  Tue Jan 28 15:14:56 2014
From: tomas.tulka at atos.net (tt)
Date: Tue, 28 Jan 2014 07:14:56 -0800 (PST)
Subject: [rabbitmq-discuss] shovel with authentization
Message-ID: <1390922096974-32914.post@n5.nabble.com>

Hi, my conf of a shovel with authentization doesnt work. RabbitMQ 3.1.5
standalone.
Without authentization everything is ok.

Java code:
        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("localhost");
        factory.setPort(5671);
        factory.setSaslConfig(DefaultSaslConfig.PLAIN);
	factory.setUsername("guest");
	factory.setPassword("guest");
        Connection conn = factory.newConnection();

Shovel def:
     {queue1_shovel,
      [{sources,      [{broker,"amqps://guest:guest at Server1"},
        {declarations, [
                {'exchange.declare', [
                    {exchange, <<"MyQ-exchange">>},
                    {type, <<"direct">>},
                    auto_delete
                    ]},
                {'queue.declare', [
                    {queue, <<"MyQ">>},
                    {arguments,[{<<"x-expires">>, long, 15000}]}
                ]},
                {'queue.bind', [
                    {exchange, <<"MyQ-exchange">>},
                    {queue,    <<"MyQ">>}
                ]}

        ]}]},
       {destinations, [{broker, "amqps://guest:guest at Server2"}]},
       {queue, <<"MyQ">>},
       {ack_mode, no_ack},
       {reconnect_delay, 5}
      ]}

The shovel seems to be running:
{queue1_shovel,
     {running,
         {source,
             {amqp_params_network,<<"guest">>,<<"guest">>,<<"/">>,"Server1",
                 undefined,0,0,0,infinity,[],
                 [#Fun<amqp_uri.7.32597394>,#Fun<amqp_uri.7.32597394>],
                 [],[]}},
         {destination,
             {amqp_params_network,<<"guest">>,<<"guest">>,<<"/">>,
                 "Server2",undefined,0,0,0,infinity,[],
                 [#Fun<amqp_uri.7.32597394>,#Fun<amqp_uri.7.32597394>],
                 [],[]}}},
     {{2014,1,28},{16,10,5}}},

I don't get any error from Java nor in log.

Sending a message on Server1's side is ok, but I will never receive on
Server2's.

Getting "guest:guest" off from brokers definitions and removing setUsername
and setPassword it starts working fine.

I tried it with a different user, but the same result...

Where can be a problem?

Thank you in advance!        



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentization-tp32914.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Tue Jan 28 15:23:27 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 28 Jan 2014 19:23:27 +0400
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <1390922096974-32914.post@n5.nabble.com>
References: <1390922096974-32914.post@n5.nabble.com>
Message-ID: <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>

2014-01-28 tt <tomas.tulka at atos.net>

> Where can be a problem?


Have you tried specifying certificate and keys as query parameters?

http://www.rabbitmq.com/uri-query-parameters.html
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/cf5f1a0d/attachment.html>

From tomas.tulka at atos.net  Tue Jan 28 15:29:28 2014
From: tomas.tulka at atos.net (Tomas Tulka)
Date: Tue, 28 Jan 2014 07:29:28 -0800 (PST)
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
Message-ID: <1390922968966-32916.post@n5.nabble.com>

> Have you tried specifying certificate and keys as query parameters?

I need only PLAIN auth and by the def. it should work with user:pass at host
And I don't see a parameter for auth in URI query parameters.

Auth works in general, because I am able to connect and send a message, the
problem must be in the shovel

Thx



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32916.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From dmcintyre at gopivotal.com  Tue Jan 28 16:00:44 2014
From: dmcintyre at gopivotal.com (Duncan McIntyre)
Date: Tue, 28 Jan 2014 16:00:44 +0000
Subject: [rabbitmq-discuss] Expired, consumed,
	but not yet acked - what happens?
Message-ID: <CAAaVn2A0tBSKU2PkDa_CmMRK7j34HL4dKxuDLkF_8_To9RPDFA@mail.gmail.com>

What happens if a consumer gets a message and holds on to it for a long
time (maybe getting more messages afterwards), without closing the
connection or acking it, and the message passes it's expiry?

I assume the server just builds up state and starts to slow down. The
expired messages will only be dropped/dead-lettered once acked or the
connection dropped.

Am I correct?

----

Duncan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/903ce570/attachment.html>

From dmcintyre at gopivotal.com  Tue Jan 28 16:13:18 2014
From: dmcintyre at gopivotal.com (Duncan McIntyre)
Date: Tue, 28 Jan 2014 16:13:18 +0000
Subject: [rabbitmq-discuss] Binding to OSPF physical interface rather than
	virtual
Message-ID: <CAAaVn2Czvv9t+0FZda6v19vbmD_rYSJp0ec=3Qh-1J7nXo7ZcA@mail.gmail.com>

A machine has a virtual interface.

OSPF is used to route that two two physical interfaces.

RabbitMQ is configured to use the IP address of the virtual i/f, but always
actually binds to one of the physical interfaces.

Is there a way to get RabbitMQ to only bind to the virtual i/f?

---

Duncan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/955f08f8/attachment.html>

From mcintoshj at gmail.com  Tue Jan 28 17:48:40 2014
From: mcintoshj at gmail.com (Jason McIntosh)
Date: Tue, 28 Jan 2014 11:48:40 -0600
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <1390922968966-32916.post@n5.nabble.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
Message-ID: <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>

If the shovel is running you have a connection to the remote system (I
usually look at the web management interface to verify this, plus log
files).  At that point I'd guess a routing issue is to blame.  If you can
successfully publish a message to Server1 and then that message disappears
and never shows up on Server2.  You can try adding:
{publish_fields, [{exchange, <<"">>},{routing_key, <<"MyQ">>}]}
to your shovel configuration.  Of course make sure the routing/binding
works on both sides.  E.g. if you publish a message to Server2 that's
identical to the publish to Server1, does it show up in a Queue?

Jason



On Tue, Jan 28, 2014 at 9:29 AM, Tomas Tulka <tomas.tulka at atos.net> wrote:

> > Have you tried specifying certificate and keys as query parameters?
>
> I need only PLAIN auth and by the def. it should work with user:pass at host
> And I don't see a parameter for auth in URI query parameters.
>
> Auth works in general, because I am able to connect and send a message, the
> problem must be in the shovel
>
> Thx
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32916.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>



-- 
Jason McIntosh
https://github.com/jasonmcintosh/
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/31cb55c4/attachment.html>

From mcintoshj at gmail.com  Tue Jan 28 18:00:36 2014
From: mcintoshj at gmail.com (Jason McIntosh)
Date: Tue, 28 Jan 2014 12:00:36 -0600
Subject: [rabbitmq-discuss] RabbtMQ heart beat
In-Reply-To: <847E11FC-1CEE-43C0-9818-F200A5D98EDC@rabbitmq.com>
References: <CALDntb8_F+QLmN-7nOO+ERGWd6Pao+sNDtV9bDdztU=DOtvAoA@mail.gmail.com>
 <847E11FC-1CEE-43C0-9818-F200A5D98EDC@rabbitmq.com>
Message-ID: <CAD6m6fHVSFv8Utc3mrk86CFUZKtOEuhFTK03hHDPxxzTW5jB+A@mail.gmail.com>

I'd also recommend looking at the Aliveness test.  See the management API
for details:
http://hg.rabbitmq.com/rabbitmq-management/raw-file/default/priv/www/api/index.html

This is a very simple check that can be done from the load balancer
typically to see not only if the host is up, but also in a state that can
publish & consume messages.  You can also have the load balancer do a port
check on 5672 (by default port can be changed) but you will get lots of
errors in your rabbit log files about this.

Jason


On Mon, Jan 27, 2014 at 5:34 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

>
> On 27 Jan 2014, at 15:27, Patrick Long <pat at munkiisoft.com> wrote:
>
> > What is the RabbitMQ specific test to see if the node is up and running?
> Is there a specific port the load balancer should ping?
>
> If you have management plugin [1] enabled, there is an HTTP API endpoint
> [2].
>
> Otherwise, you can connect with valid credentials, open a channel, close it
> and close the connection.
>
>
> 1. http://rabbitmq.com/management.html
> 2.
> http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_2_3/priv/www/api/index.html
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>



-- 
Jason McIntosh
https://github.com/jasonmcintosh/
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/b3488bbf/attachment.html>

From michael.justin at gmx.net  Tue Jan 28 18:58:13 2014
From: michael.justin at gmx.net (Michael Justin)
Date: Tue, 28 Jan 2014 19:58:13 +0100
Subject: [rabbitmq-discuss] [rabbitmq-stomp] Is the use of receipt
 header for SUBSCRIBE still recommended?
In-Reply-To: <52E4EEE3.9050602@rabbitmq.com>
References: <lbti62$735$1@ger.gmane.org> <52E2540F.3090700@rabbitmq.com>
 <lc2lum$ci2$1@ger.gmane.org> <52E4EEE3.9050602@rabbitmq.com>
Message-ID: <lc8ujq$n59$1@ger.gmane.org>

On 26.01.2014 12:17, Matthias Radestock wrote:

 > There is actually no other way it could work. i.e. if you issue a
 > SUBSCRIBE on one connection and then a SEND on another, in the absence
 > of an acknowledgement from the server - which is what the RECEIPT header
 > provides - then those two commands will simply race each other, leading
 > to a non-deterministic outcome.

Yes, I was in error - there is obviously a race condition in this case 
which makes the RECEIPT necessary for the SUBSCRIBE, to guarantee that 
the destination exists before any messages are sent. Thank you for 
clarifying this, obviously this is the only way it can work.

Regards
-- 
Michael Justin


From stammailbox at gmail.com  Tue Jan 28 21:43:48 2014
From: stammailbox at gmail.com (Mysurf Mail)
Date: Tue, 28 Jan 2014 23:43:48 +0200
Subject: [rabbitmq-discuss] active active solution over wan and lan
Message-ID: <CAJ2-Vrm8VPvvLTEUyhw=85AsTxKvyXPhoygMXJ8NFTdeecGosg@mail.gmail.com>

>From the active/active documentation -
we have developed active/active high availability for
queues<http://www.rabbitmq.com/ha.html>


   "This solution still requires a RabbitMQ cluster, which means that it
will not cope

    seamlessly with network partitions within the cluster and, for that
reason, is not

    recommended for use across a WAN (though of course, clients can still
connect from

    as near and as far as needed)"

What does it mean "not recommended for use across a WAN"?
I cant understand this remark - If I buy three machines on ec2 will I need
to establish a domain controller/dns server?
What does this restriction mean? and why?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/8b5d1fb8/attachment.html>

From mklishin at gopivotal.com  Tue Jan 28 21:52:56 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 29 Jan 2014 01:52:56 +0400
Subject: [rabbitmq-discuss] active active solution over wan and lan
In-Reply-To: <CAJ2-Vrm8VPvvLTEUyhw=85AsTxKvyXPhoygMXJ8NFTdeecGosg@mail.gmail.com>
References: <CAJ2-Vrm8VPvvLTEUyhw=85AsTxKvyXPhoygMXJ8NFTdeecGosg@mail.gmail.com>
Message-ID: <3049059D-6696-40FA-B970-1D9A291EAA3A@rabbitmq.com>

On 29 Jan 2014, at 01:43, Mysurf Mail <stammailbox at gmail.com> wrote:

> What does it mean "not recommended for use across a WAN"?
> I cant understand this remark - If I buy three machines on ec2 will I need to establish a domain controller/dns server?

WAN means Wide Area Network. It has nothing to do with DNS or AD domains.
In the EC2 example, your cluster nodes should be in one availability zone, or at least region.

Cross-region replication should happen over Shovel or Federation plugins: they handle network
partitions well at the cost of weak inter-cluster consistency (AP in CAP). To put it differently,
they offer asynchronous replication, while mirrored queues offers synchronous replication
(CP in CAP).

See http://www.rabbitmq.com/partitions.html for all the gory details about what options
you have when handling network failures. Pick the strategy that suits your project/team
best.

MK

Software Engineer, Pivotal/RabbitMQ



From prabodh.upreti at vce.com  Tue Jan 28 23:05:35 2014
From: prabodh.upreti at vce.com (Prabodh Upreti)
Date: Tue, 28 Jan 2014 15:05:35 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmqadmin syntax for parameters
In-Reply-To: <52E76D01.9060002@rabbitmq.com>
References: <1390847227921-32901.post@n5.nabble.com>
 <52E76D01.9060002@rabbitmq.com>
Message-ID: <1390950335972-32924.post@n5.nabble.com>

I keep getting

*** Could not connect: [Errno 111] Connection refused

Could it be trying to connect to a different port. thx.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmqadmin-syntax-for-parameters-tp32901p32924.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From maxfisher05 at gmail.com  Tue Jan 28 23:51:33 2014
From: maxfisher05 at gmail.com (Jon Vollmer)
Date: Tue, 28 Jan 2014 17:51:33 -0600
Subject: [rabbitmq-discuss] MQTT plugin message delivery mode
Message-ID: <CAAEZByWEF200h-QLZ9gf-VZH-ULSXm0A89JHSNKBPmnpeEOisA@mail.gmail.com>

I'm using the Paho python MQTT client to send messages to rabbit.  I have a
binding set up from the amq.topic to a durable queue. I would like to set
the messages as delivery mode: 2 so that they will be persisted to disk if
there is no consumer listening on the queue to pick them up.

However I am not seeing a way to set something in the mqtt message that
relates to delivery mode.  Am I just missing something or is this not
supported?
Any way to set message delivery mode in an exchange binding as a workaround?

Thanks
Jon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/30588909/attachment.html>

From maulik.mihir at gmail.com  Wed Jan 29 03:14:52 2014
From: maulik.mihir at gmail.com (maulik thaker)
Date: Wed, 29 Jan 2014 08:44:52 +0530
Subject: [rabbitmq-discuss] RabbitMQ hangs, does not accept connections
In-Reply-To: <CANTUpDAnX7OGpu0HTNUje7uGaA_G8r6yVFDj3Riba1qtDhXaYw@mail.gmail.com>
References: <CANTUpDBuF30tFVcdsG0kcc1in9nwphvaa=L6LPeOenPuhdU7sw@mail.gmail.com>
 <4EF30FE4.8060100@rabbitmq.com>
 <CANTUpDCTBEM1F9-g+8USa2jUuLT6CM2i72y+OhAzeGX+tP=heQ@mail.gmail.com>
 <4EF3162A.7040009@rabbitmq.com>
 <CANTUpDAdvha2aG1zckpywpK-0irDtuDw9en6xJ3Jbr__k7nx8g@mail.gmail.com>
 <CANTUpDA68DkfYF+45rp3E9AQ9p-M_kK1ff9EzOVX7Hmpkz2GwA@mail.gmail.com>
 <4EFC3450.40901@rabbitmq.com>
 <CANTUpDCZNf7+WahP_Y6osyVX+PuxwN7gZnspystbwgPcc-q5nA@mail.gmail.com>
 <4EFDAA72.9090605@rabbitmq.com> <4EFDC47D.7060204@rabbitmq.com>
 <CANTUpDBbvHcQx+pANZLTxYiH010UmXZJDUweW9XwOLLwRT8gMw@mail.gmail.com>
 <4EFDDC6E.8060200@rabbitmq.com>
 <CANTUpDAHi9K_mAHa8hFHTGGy_iAh6ZNWvNsq6kGvDjLn45B5TA@mail.gmail.com>
 <CANTUpDD+MSUSVCTDLtQpeTLsrHyrXv9TVm5a_c-=xCHbWisPrw@mail.gmail.com>
 <4F564161.5040601@rabbitmq.com>
 <CANTUpDBQVtYav2tEWqynEyhSKmvApo4Q1WjCArYB3T_TVLC9FA@mail.gmail.com>
 <4F577D3D.2020003@rabbitmq.com>
 <CANTUpDCYWUD_YxUaZGUz7VZzbWoGAUj72amAWYxVZdG=bhKEow@mail.gmail.com>
 <4F59F976.4060807@rabbitmq.com>
 <CANTUpDDgWVbkXu+2ph9O7VcWCHdXyWXYDi3spEbL03LizdhW+Q@mail.gmail.com>
 <c8148af0-744b-479b-a574-4f2ded542200@googlegroups.com>
 <CANTUpDAnX7OGpu0HTNUje7uGaA_G8r6yVFDj3Riba1qtDhXaYw@mail.gmail.com>
Message-ID: <CACPyHCOqiYFDrQ7RZpQrvv8TQa=Y9pUBtn9bDPsc=E0YXD5STQ@mail.gmail.com>

Hello Dimitri Minaev,

         Thanks for the reply.

          Finally we got the issue, there was a connection leakage in other
module that caused problem in our module.

Thanks,
Maulik


On Fri, Jan 24, 2014 at 6:36 PM, Dimitri Minaev <minaev at gmail.com> wrote:

> Hello, Maulik,
>
> I believe, your problem is a different one, because the bug was gone since
> we had upgraded to 2.8.7. The final message from the support service was:
>
> > The Erlang/OTP team believe that the problem was due to a bug in their
> code. A small change introduced in RabbitMQ 2.8.7 had the coincidental
> fortunate effect of bypassing the bug, so the problem should not occur in
> 2.8.7 or later versions of RabbitMQ.
>
> Good luck!
>
>
>
> On 22 January 2014 17:29, maulik thaker <maulik.mihir at gmail.com> wrote:
>
>>
>> Hi Dmitri Minaev,
>>
>>         I am facing same problem with rabbitmq 3.2.2 ( I have gone
>> through this thread and already checked memory and number of
>> file-descriptors are not causing the problem). If you have solved that
>> problem then please share the solution.
>>
>> Thanks,
>> Maulik
>>
>>
>> On Monday, 26 March 2012 11:15:45 UTC+5:30, Dmitri Minaev wrote:
>>>
>>> On 9 March 2012 16:37, Simon MacMullen <si... at rabbitmq.com> wrote:
>>> > On 09/03/12 07:57, Dmitri Minaev wrote:
>>>
>>> >> If I understand correctly, the number of file descriptors used by
>>> >> RabbitMQ in normal situation is roughly equal to the number of
>>> >> `rabbitmqctl list_connections` + some constant (~30)? In case of that
>>> >> hanging server, the number of AMQP connections never was close to the
>>> >> FD limit (ulimit -n is 1024, fs.file-max = 1605698). The graph
>>> >> reflecting  the number of open AMQP connections is attached to this
>>> >> message.
>>> >
>>> >
>>> > It's not really a constant, but to a first approximation, yes.
>>> >
>>> > Ultimately, the error I saw being passed up from the OS was ENFILE -
>>> that's
>>> > pretty unambiguous :)
>>> >
>>> > It's possible that if you're churning connections then "closed"
>>> connections
>>> > in FIN_WAIT2 could account for the majority of the used FDs. In 2.8.0
>>> we'll
>>> > set SO_LINGER to 0 to prevent this.
>>>
>>> I am still not sure about the role of the file descriptors in this
>>> event. Last Friday, our Rabbit died again. Until the very last moment
>>> the number of open file descriptors as reported by the management
>>> plugin was 143 out of the total available number of 32765. It was
>>> RabbitMQ v.2.7.0. On that same day I have upgraded to 2.8.1. Will
>>> report on its behaviour later.
>>>
>>> --
>>> With best regards,
>>> Dmitri Minaev
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq... at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>>
>
>
> --
> With best regards,
> Dimitri Minaev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/39fe3d66/attachment.html>

From michael.s.klishin at gmail.com  Wed Jan 29 05:09:44 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 29 Jan 2014 09:09:44 +0400
Subject: [rabbitmq-discuss] rabbitmqadmin syntax for parameters
In-Reply-To: <1390950335972-32924.post@n5.nabble.com>
References: <1390847227921-32901.post@n5.nabble.com>
 <52E76D01.9060002@rabbitmq.com>
 <1390950335972-32924.post@n5.nabble.com>
Message-ID: <CAE3HoVQsxsQW6W7Fy6-D8D3gjqXXu4pDDxqnbseQ=TKFMbN6og@mail.gmail.com>

2014-01-29 Prabodh Upreti <prabodh.upreti at vce.com>

> I keep getting
>
> *** Could not connect: [Errno 111] Connection refused
>
> Could it be trying to connect to a different port. thx.
>


Default management API port in 3.x is 15672, not 55672.

You can configure the port in ~/.rabbitmqadmin.conf:

[host_normal]
hostname = localhost
port = 15672
username = guest
password = guest
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/d3f0d82e/attachment.html>

From mklishin at gopivotal.com  Wed Jan 29 05:15:03 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 29 Jan 2014 09:15:03 +0400
Subject: [rabbitmq-discuss] MQTT plugin message delivery mode
In-Reply-To: <CAAEZByWEF200h-QLZ9gf-VZH-ULSXm0A89JHSNKBPmnpeEOisA@mail.gmail.com>
References: <CAAEZByWEF200h-QLZ9gf-VZH-ULSXm0A89JHSNKBPmnpeEOisA@mail.gmail.com>
Message-ID: <FE261D85-C6DB-4A2B-8C77-C38344D73A56@rabbitmq.com>


On 29 Jan 2014, at 03:51, Jon Vollmer <maxfisher05 at gmail.com> wrote:

> However I am not seeing a way to set something in the mqtt message that relates to delivery mode.  Am I just missing something or is this not supported?  
> Any way to set message delivery mode in an exchange binding as a workaround?

QoS is set the same way with any other MQTT broker. RabbitMQ MQTT plugin does not support QoS = 2,
however:

http://www.rabbitmq.com/mqtt.html

MK

Software Engineer, Pivotal/RabbitMQ



From alan.antonuk at gmail.com  Wed Jan 29 05:26:28 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 28 Jan 2014 21:26:28 -0800
Subject: [rabbitmq-discuss] rabbitmq connections
In-Reply-To: <1390441833333-32808.post@n5.nabble.com>
References: <1390441833333-32808.post@n5.nabble.com>
Message-ID: <CAAt2poKcSPgYe+cgxU-k3KfmOJNsm8-tjOjmuMACNR-MnnSSQw@mail.gmail.com>

It depends on which library_exception you get back from rabbitmq-c.  Most
likely is something in the network has closed the connection, and
rabbitmq-c has detected this, and has shut down the connection. The broker
on the other hand doesn't know that the TCP connection has been closed and
thus shows the connection as active.

-Alan


On Wed, Jan 22, 2014 at 5:50 PM, jack <liangliangxinxin at yeah.net> wrote:

> i write a consumer with rabbitmq-c.when i consume message from the mq
> server,i received a library_execption and the errosr string is a socket
> error occured. No matter i close the channel and connection,or i quit the
> client.from the rabbitmq web ui,i can still saw the connection.
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/rabbitmq-connections-tp32808.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/f43422e6/attachment.html>

From tomas.tulka at atos.net  Wed Jan 29 06:52:05 2014
From: tomas.tulka at atos.net (Tomas Tulka)
Date: Tue, 28 Jan 2014 22:52:05 -0800 (PST)
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
Message-ID: <1390978325570-32930.post@n5.nabble.com>

> At that point I'd guess a routing issue is to blame

but if it is true, a message shouldn't have arrived to Server2 even in case
with no auth, but it does...

maybe it needs some additional setup on Server2...???



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32930.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From akesler.work at gmail.com  Wed Jan 29 00:03:05 2014
From: akesler.work at gmail.com (Alex Kesler)
Date: Tue, 28 Jan 2014 16:03:05 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ 3.0.4 crash
Message-ID: <837b4ab2-d982-43de-a726-ecad357de4d7@googlegroups.com>

Hello,

We have RabbitMQ 3.0.4, Erlang R16B running in production on Windows 2008 
R2 x64 VM's and have had RabbitMQ crash, where a number of durable queues 
disappeared after recovery. Specifically, we determined that the RabbitMQ 
Windows service did not crash, but components thereof became unresponsive. 
It is possible that the said queues that disappeared never had messages 
placed in them, but the queues were definitely configured and available at 
one point in time.

We also have a test environment that we had upgraded to RabbitMQ 3.2.2, Erlang 
R16B03. However, we see some errors in that environment that appear eerily 
similar to the errors appearing for RabbitMQ 3.0.4 in production. 
Therefore, we'd like some help diagnosing the root cause of the crash in 
our production environment to assess whether the issue was environmental or 
whether the production environment deserves immediate upgrade to the latest 
version of RabbitMQ.

Here is a little bit more information about our environments. We are 
running a 3-node cluster (RMQV01, RMQV02, RMQV03) with HA mirroring for all 
queues. 

Can someone please take a look at the attached RabbitMQ log files and 
suggest some direction for further action?

I have attached 4 files: a composite of log files from the 3 production 
servers for the outlined crash incident, a composite of sasl-log files from 
the 3 production servers for the outlined crash incident, a log file for 
one of the 3.2.2 servers in our test environment, and also a sasl-log file 
for the 3.2.2 server.

Thanks in advance!

- Alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/33db6a4f/attachment-0001.html>
-------------- next part --------------
RMQV03 .log *******************************************************************************************************************************

=ERROR REPORT==== 24-Jan-2014::00:50:33 ===
** Generic server <0.206.0> terminating
** Last message in was {mnesia_locker,'rabbit at IAD2-NH1-RMQV01',
                                      {tid_released,{tid,6346,<0.206.0>}}}
** When Server state == 3
** Reason for termination == 
** {unexpected_info,{mnesia_locker,'rabbit at IAD2-NH1-RMQV01',
                                   {tid_released,{tid,6346,<0.206.0>}}}}

=ERROR REPORT==== 24-Jan-2014::00:50:34 ===
** Generic server <0.204.0> terminating
** Last message in was {mnesia_locker,'rabbit at IAD2-NH1-RMQV02',granted}
** When Server state == 1
** Reason for termination == 
** {unexpected_info,{mnesia_locker,'rabbit at IAD2-NH1-RMQV02',granted}}

=ERROR REPORT==== 24-Jan-2014::00:50:34 ===
** Generic server <0.205.0> terminating
** Last message in was {mnesia_locker,'rabbit at IAD2-NH1-RMQV02',granted}
** When Server state == 2
** Reason for termination == 
** {unexpected_info,{mnesia_locker,'rabbit at IAD2-NH1-RMQV02',granted}}

=ERROR REPORT==== 24-Jan-2014::00:50:34 ===
** Generic server <0.207.0> terminating
** Last message in was {mnesia_locker,'rabbit at IAD2-NH1-RMQV02',granted}
** When Server state == 4
** Reason for termination == 
** {unexpected_info,{mnesia_locker,'rabbit at IAD2-NH1-RMQV02',granted}}

=ERROR REPORT==== 24-Jan-2014::01:25:01 ===
Mnesia('rabbit at IAD2-NH1-RMQV03'): ** ERROR ** mnesia_event got {inconsistent_database, starting_partitioned_network, 'rabbit at IAD2-NH1-RMQV02'}

=INFO REPORT==== 24-Jan-2014::01:27:01 ===
    application: rabbitmq_management
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:27:01 ===
    application: amqp_client
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:27:01 ===
    application: rabbitmq_web_dispatch
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:27:01 ===
    application: webmachine
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:27:01 ===
    application: mochiweb
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:27:01 ===
    application: rabbitmq_management_agent
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:27:01 ===
stopped TCP Listener on 0.0.0.0:8002

=INFO REPORT==== 24-Jan-2014::01:27:01 ===
stopped TCP Listener on [::]:8002

=ERROR REPORT==== 24-Jan-2014::01:27:01 ===
** Generic server <0.4622.0> terminating
** Last message in was {'EXIT',<0.264.0>,shutdown}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.NHDataPushSvc_control">>},
                          true,false,none,[],<2864.6225.0>,
                          [<2864.6225.0>],
                          [],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2864.6226.0>,<2864.6225.0>},
                           {<2865.4425.0>,<2865.4423.0>}]},
                         <0.4623.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV03-mnesia/queues/1BFCLDY0W1RY4OR8XB2DG4O5T",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<138,235,55,8,157,54,27,32,26,174,231,83,218,234,
                              75,22>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV03-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV03-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<130,208,112,187,5,72,140,200,197,12,32,141,31,
                              230,107,155>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV03-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV03-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1390,524642,329190},0},
                           {{1390,524642,329190},0},
                           0.0,0.0,
                           {1390,526689,103140}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1390,524642,329190},0},
                           {{1390,524642,329190},0},
                           0.0,0.0,
                           {1390,526689,103140}}},
                         undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {{badmatch,{error,eexist}},
    [{rabbit_queue_index,store_clean_shutdown,2,[]},
     {rabbit_queue_index,terminate,2,[]},
     {rabbit_variable_queue,terminate,2,[]},
     {rabbit_amqqueue_process,terminate_shutdown,2,[]},
     {gen_server2,terminate,3,[]},
     {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}
** In 'terminate' callback with reason ==
** shutdown

=INFO REPORT==== 24-Jan-2014::01:27:01 ===
    application: rabbit
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:27:01 ===
    application: mnesia
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:27:01 ===
    application: os_mon
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:27:01 ===
Halting Erlang VM

=INFO REPORT==== 24-Jan-2014::01:27:18 ===
Starting RabbitMQ 3.0.4 on Erlang R16B

=INFO REPORT==== 24-Jan-2014::01:27:23 ===
Limiting to approx 8092 file handles (7280 sockets)

=INFO REPORT==== 24-Jan-2014::01:27:23 ===
Memory limit set to 2047MB of 4095MB total.

=INFO REPORT==== 24-Jan-2014::01:27:25 ===
started TCP Listener on [::]:8002

=INFO REPORT==== 24-Jan-2014::01:27:25 ===
started TCP Listener on 0.0.0.0:8002

=ERROR REPORT==== 24-Jan-2014::17:45:35 ===
** Connection attempt from disallowed node 'rabbitmqctl1213117 at IAD2-NH1-RMQV03' ** 


RMQV02 .log *******************************************************************************************************************************

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.312.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.2116>,process,<2866.312.0>,
                               noconnection}
** When Server state == {state,
                            {7,<0.312.0>},
                            {{10,<2864.312.0>},#Ref<0.0.0.4470>},
                            {{4,<2866.312.0>},#Ref<0.0.0.2116>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.DataInGateway_control">>},
                            rabbit_mirror_queue_slave,
                            {11,
                             [{{4,<2866.312.0>},
                               {view_member,
                                   {4,<2866.312.0>},
                                   [],
                                   {7,<0.312.0>},
                                   {10,<2864.312.0>}}},
                              {{7,<0.312.0>},
                               {view_member,
                                   {7,<0.312.0>},
                                   [],
                                   {10,<2864.312.0>},
                                   {4,<2866.312.0>}}},
                              {{10,<2864.312.0>},
                               {view_member,
                                   {10,<2864.312.0>},
                                   [],
                                   {4,<2866.312.0>},
                                   {7,<0.312.0>}}}]},
                            1,
                            [{{4,<2866.312.0>},{member,{[],[]},21,21}},
                             {{7,<0.312.0>},{member,{[],[]},1,1}},
                             {{10,<2864.312.0>},{member,{[],[]},0,0}}],
                            [<0.311.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.312.0>},
             [{{10,<2864.312.0>},
               {view_member,
                   {10,<2864.312.0>},
                   [{4,<2866.312.0>},{7,<0.312.0>}],
                   {10,<2864.312.0>},
                   {10,<2864.312.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.4425.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.88936>,process,<2866.4623.0>,
                               noconnection}
** When Server state == {state,
                            {0,<0.4425.0>},
                            {{1,<2866.4623.0>},#Ref<0.0.0.88936>},
                            {{0,<2864.6226.0>},#Ref<0.0.0.88930>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.NHDataPushSvc_control">>},
                            rabbit_mirror_queue_coordinator,
                            {2,
                             [{{0,<0.4425.0>},
                               {view_member,
                                   {0,<0.4425.0>},
                                   [],
                                   {1,<2866.4623.0>},
                                   {0,<2864.6226.0>}}},
                              {{0,<2864.6226.0>},
                               {view_member,
                                   {0,<2864.6226.0>},
                                   [],
                                   {0,<0.4425.0>},
                                   {1,<2866.4623.0>}}},
                              {{1,<2866.4623.0>},
                               {view_member,
                                   {1,<2866.4623.0>},
                                   [],
                                   {0,<2864.6226.0>},
                                   {0,<0.4425.0>}}}]},
                            17,
                            [{{0,<0.4425.0>},{member,{[],[]},17,17}},
                             {{0,<2864.6226.0>},{member,{[],[]},0,0}},
                             {{1,<2866.4623.0>},{member,{[],[]},0,0}}],
                            [<0.4424.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{0,<0.4425.0>},
             [{{0,<2864.6226.0>},
               {view_member,
                   {0,<2864.6226.0>},
                   [{0,<0.4425.0>},{1,<2866.4623.0>}],
                   {0,<2864.6226.0>},
                   {0,<2864.6226.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.4423.0> terminating
** Last message in was {'EXIT',<0.4424.0>,
                        {function_clause,
                         [{orddict,fetch,
                           [{0,<0.4425.0>},
                            [{{0,<2864.6226.0>},
                              {view_member,
                               {0,<2864.6226.0>},
                               [{0,<0.4425.0>},{1,<2866.4623.0>}],
                               {0,<2864.6226.0>},
                               {0,<2864.6226.0>}}}]],
                           [{file,"orddict.erl"},{line,72}]},
                          {gm,check_neighbours,1,[]},
                          {gm,handle_info,2,[]},
                          {gen_server2,handle_msg,2,[]},
                          {proc_lib,wake_up,3,
                           [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {q,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.NHDataPushSvc_control">>},
                          true,false,none,[],<0.4423.0>,[],[],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          []},
                         none,true,rabbit_mirror_queue_master,
                         {state,<0.4425.0>,<0.4424.0>,rabbit_variable_queue,
                          {vqstate,
                           {0,{[],[]}},
                           {0,{[],[]}},
                           {delta,undefined,0,undefined},
                           {0,{[],[]}},
                           {0,{[],[]}},
                           0,
                           {0,nil},
                           undefined,
                           {0,nil},
                           {qistate,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/1BFCLDY0W1RY4OR8XB2DG4O5T",
                            {{dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             []},
                            undefined,0,262144,
                            #Fun<rabbit_variable_queue.2.41635915>,
                            {0,nil}},
                           {{client_msstate,msg_store_persistent,
                             <<162,116,172,35,209,102,204,240,241,196,54,220,
                               221,228,80,157>>,
                             {dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             {state,344140,
                              "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                             rabbit_msg_store_ets_index,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                             <0.257.0>,348237,340043,352334,356431},
                            {client_msstate,msg_store_transient,
                             <<117,88,51,166,85,250,201,138,121,218,175,203,
                               164,62,255,86>>,
                             {dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             {state,323655,
                              "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                             rabbit_msg_store_ets_index,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                             <0.252.0>,327752,319558,331849,335946}},
                           true,0,#Fun<rabbit_amqqueue_process.5.64830354>,0,
                           0,infinity,0,0,0,0,0,
                           {rates,
                            {{1387,532200,881051},0},
                            {{1387,532200,881051},0},
                            0.0,0.0,
                            {1389,621511,516050}},
                           {0,nil},
                           {0,nil},
                           {0,nil},
                           {0,nil},
                           0,0,
                           {rates,
                            {{1387,532200,881051},0},
                            {{1387,532200,881051},0},
                            0.0,0.0,
                            {1389,621511,516050}}},
                          0,
                          {dict,0,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}},
                          [],
                          {dict,0,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}},
                          {set,0,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}}},
                         {[],[]},
                         undefined,undefined,undefined,undefined,
                         {state,fine,5000,undefined},
                         {0,nil},
                         undefined,undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         1,
                         {{0,nil},{0,nil}},
                         undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         undefined,undefined}
** Reason for termination == 
** {noproc,{gen_server2,call,[<0.4425.0>,info,infinity]}}
** In 'terminate' callback with reason ==
** {function_clause,
       [{orddict,fetch,
            [{0,<0.4425.0>},
             [{{0,<2864.6226.0>},
               {view_member,
                   {0,<2864.6226.0>},
                   [{0,<0.4425.0>},{1,<2866.4623.0>}],
                   {0,<2864.6226.0>},
                   {0,<2864.6226.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.316.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.2170>,process,<2866.316.0>,
                               noconnection}
** When Server state == {state,
                            {7,<0.316.0>},
                            {{10,<2864.316.0>},#Ref<0.0.0.4474>},
                            {{4,<2866.316.0>},#Ref<0.0.0.2170>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.NHBssSvc">>},
                            rabbit_mirror_queue_slave,
                            {11,
                             [{{4,<2866.316.0>},
                               {view_member,
                                   {4,<2866.316.0>},
                                   [],
                                   {7,<0.316.0>},
                                   {10,<2864.316.0>}}},
                              {{7,<0.316.0>},
                               {view_member,
                                   {7,<0.316.0>},
                                   [],
                                   {10,<2864.316.0>},
                                   {4,<2866.316.0>}}},
                              {{10,<2864.316.0>},
                               {view_member,
                                   {10,<2864.316.0>},
                                   [],
                                   {4,<2866.316.0>},
                                   {7,<0.316.0>}}}]},
                            1,
                            [{{4,<2866.316.0>},{member,{[],[]},12,12}},
                             {{7,<0.316.0>},{member,{[],[]},1,1}},
                             {{10,<2864.316.0>},{member,{[],[]},0,0}}],
                            [<0.315.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.316.0>},
             [{{10,<2864.316.0>},
               {view_member,
                   {10,<2864.316.0>},
                   [{4,<2866.316.0>},{7,<0.316.0>}],
                   {10,<2864.316.0>},
                   {10,<2864.316.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.336.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.2442>,process,<2866.336.0>,
                               noconnection}
** When Server state == {state,
                            {7,<0.336.0>},
                            {{4,<2866.336.0>},#Ref<0.0.0.2442>},
                            {{10,<2864.336.0>},#Ref<0.0.0.4528>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.VLReadyGateway">>},
                            rabbit_mirror_queue_slave,
                            {11,
                             [{{4,<2866.336.0>},
                               {view_member,
                                   {4,<2866.336.0>},
                                   [],
                                   {10,<2864.336.0>},
                                   {7,<0.336.0>}}},
                              {{7,<0.336.0>},
                               {view_member,
                                   {7,<0.336.0>},
                                   [],
                                   {4,<2866.336.0>},
                                   {10,<2864.336.0>}}},
                              {{10,<2864.336.0>},
                               {view_member,
                                   {10,<2864.336.0>},
                                   [],
                                   {7,<0.336.0>},
                                   {4,<2866.336.0>}}}]},
                            1,
                            [{{4,<2866.336.0>},{member,{[],[]},3,3}},
                             {{7,<0.336.0>},{member,{[],[]},1,1}},
                             {{10,<2864.336.0>},{member,{[],[]},0,0}}],
                            [<0.335.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.336.0>},
             [{{10,<2864.336.0>},
               {view_member,
                   {10,<2864.336.0>},
                   [{4,<2866.336.0>},{7,<0.336.0>}],
                   {10,<2864.336.0>},
                   {10,<2864.336.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.314.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.3247>,process,<2866.314.0>,
                               noconnection}
** When Server state == {state,
                            {7,<0.314.0>},
                            {{10,<2864.314.0>},#Ref<0.0.0.4472>},
                            {{4,<2866.314.0>},#Ref<0.0.0.3247>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.VLReadyServicesApi_error">>},
                            rabbit_mirror_queue_slave,
                            {11,
                             [{{4,<2866.314.0>},
                               {view_member,
                                   {4,<2866.314.0>},
                                   [],
                                   {7,<0.314.0>},
                                   {10,<2864.314.0>}}},
                              {{7,<0.314.0>},
                               {view_member,
                                   {7,<0.314.0>},
                                   [],
                                   {10,<2864.314.0>},
                                   {4,<2866.314.0>}}},
                              {{10,<2864.314.0>},
                               {view_member,
                                   {10,<2864.314.0>},
                                   [],
                                   {4,<2866.314.0>},
                                   {7,<0.314.0>}}}]},
                            1,
                            [{{4,<2866.314.0>},{member,{[],[]},3,3}},
                             {{7,<0.314.0>},{member,{[],[]},1,1}},
                             {{10,<2864.314.0>},{member,{[],[]},0,0}}],
                            [<0.313.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.314.0>},
             [{{10,<2864.314.0>},
               {view_member,
                   {10,<2864.314.0>},
                   [{4,<2866.314.0>},{7,<0.314.0>}],
                   {10,<2864.314.0>},
                   {10,<2864.314.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.320.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.2224>,process,<2866.320.0>,
                               noconnection}
** When Server state == {state,
                            {7,<0.320.0>},
                            {{10,<2864.320.0>},#Ref<0.0.0.4482>},
                            {{4,<2866.320.0>},#Ref<0.0.0.2224>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.DataOut_error_control">>},
                            rabbit_mirror_queue_slave,
                            {11,
                             [{{4,<2866.320.0>},
                               {view_member,
                                   {4,<2866.320.0>},
                                   [],
                                   {7,<0.320.0>},
                                   {10,<2864.320.0>}}},
                              {{7,<0.320.0>},
                               {view_member,
                                   {7,<0.320.0>},
                                   [],
                                   {10,<2864.320.0>},
                                   {4,<2866.320.0>}}},
                              {{10,<2864.320.0>},
                               {view_member,
                                   {10,<2864.320.0>},
                                   [],
                                   {4,<2866.320.0>},
                                   {7,<0.320.0>}}}]},
                            1,
                            [{{4,<2866.320.0>},{member,{[],[]},47,47}},
                             {{7,<0.320.0>},{member,{[],[]},1,1}},
                             {{10,<2864.320.0>},{member,{[],[]},0,0}}],
                            [<0.319.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.320.0>},
             [{{10,<2864.320.0>},
               {view_member,
                   {10,<2864.320.0>},
                   [{4,<2866.320.0>},{7,<0.320.0>}],
                   {10,<2864.320.0>},
                   {10,<2864.320.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.4338.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.87216>,process,<2866.4486.0>,
                               noconnection}
** When Server state == {state,
                            {1,<0.4338.0>},
                            {{0,<2866.4486.0>},#Ref<0.0.0.87216>},
                            {{0,<2864.6121.0>},#Ref<0.0.0.87217>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.MTS_control">>},
                            rabbit_mirror_queue_slave,
                            {2,
                             [{{0,<2866.4486.0>},
                               {view_member,
                                   {0,<2866.4486.0>},
                                   [],
                                   {0,<2864.6121.0>},
                                   {1,<0.4338.0>}}},
                              {{0,<2864.6121.0>},
                               {view_member,
                                   {0,<2864.6121.0>},
                                   [],
                                   {1,<0.4338.0>},
                                   {0,<2866.4486.0>}}},
                              {{1,<0.4338.0>},
                               {view_member,
                                   {1,<0.4338.0>},
                                   [],
                                   {0,<2866.4486.0>},
                                   {0,<2864.6121.0>}}}]},
                            0,
                            [{{0,<2866.4486.0>},{member,{[],[]},26,26}},
                             {{0,<2864.6121.0>},{member,{[],[]},0,0}},
                             {{1,<0.4338.0>},{member,{[],[]},0,0}}],
                            [<0.4337.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,[{orddict,fetch,
                              [{1,<0.4338.0>},[]],
                              [{file,"orddict.erl"},{line,72}]},
                     {gm,check_neighbours,1,[]},
                     {gm,handle_info,2,[]},
                     {gen_server2,handle_msg,2,[]},
                     {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.318.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.3166>,process,<2866.318.0>,
                               noconnection}
** When Server state == {state,
                            {7,<0.318.0>},
                            {{4,<2866.318.0>},#Ref<0.0.0.3166>},
                            {{10,<2864.318.0>},#Ref<0.0.0.4480>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.NHDataPushSvc_error">>},
                            rabbit_mirror_queue_slave,
                            {11,
                             [{{4,<2866.318.0>},
                               {view_member,
                                   {4,<2866.318.0>},
                                   [],
                                   {10,<2864.318.0>},
                                   {7,<0.318.0>}}},
                              {{7,<0.318.0>},
                               {view_member,
                                   {7,<0.318.0>},
                                   [],
                                   {4,<2866.318.0>},
                                   {10,<2864.318.0>}}},
                              {{10,<2864.318.0>},
                               {view_member,
                                   {10,<2864.318.0>},
                                   [],
                                   {7,<0.318.0>},
                                   {4,<2866.318.0>}}}]},
                            1,
                            [{{4,<2866.318.0>},{member,{[],[]},3,3}},
                             {{7,<0.318.0>},{member,{[],[]},1,1}},
                             {{10,<2864.318.0>},{member,{[],[]},0,0}}],
                            [<0.317.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.318.0>},
             [{{10,<2864.318.0>},
               {view_member,
                   {10,<2864.318.0>},
                   [{4,<2866.318.0>},{7,<0.318.0>}],
                   {10,<2864.318.0>},
                   {10,<2864.318.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.322.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.3029>,process,<2866.322.0>,
                               noconnection}
** When Server state == {state,
                            {32,<0.322.0>},
                            {{35,<2864.322.0>},#Ref<0.0.0.4484>},
                            {{31,<2866.322.0>},#Ref<0.0.0.3029>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.DataOut_error">>},
                            rabbit_mirror_queue_slave,
                            {36,
                             [{{31,<2866.322.0>},
                               {view_member,
                                   {31,<2866.322.0>},
                                   [],
                                   {32,<0.322.0>},
                                   {35,<2864.322.0>}}},
                              {{32,<0.322.0>},
                               {view_member,
                                   {32,<0.322.0>},
                                   [],
                                   {35,<2864.322.0>},
                                   {31,<2866.322.0>}}},
                              {{35,<2864.322.0>},
                               {view_member,
                                   {35,<2864.322.0>},
                                   [],
                                   {31,<2866.322.0>},
                                   {32,<0.322.0>}}}]},
                            1,
                            [{{31,<2866.322.0>},{member,{[],[]},46,46}},
                             {{32,<0.322.0>},{member,{[],[]},1,1}},
                             {{35,<2864.322.0>},{member,{[],[]},0,0}}],
                            [<0.321.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{32,<0.322.0>},
             [{{35,<2864.322.0>},
               {view_member,
                   {35,<2864.322.0>},
                   [{31,<2866.322.0>},{32,<0.322.0>}],
                   {35,<2864.322.0>},
                   {35,<2864.322.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.296.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.3058>,process,<2866.296.0>,
                               noconnection}
** When Server state == {state,
                            {32,<0.296.0>},
                            {{35,<2864.296.0>},#Ref<0.0.0.4437>},
                            {{31,<2866.296.0>},#Ref<0.0.0.3058>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.NHDataSvc_control">>},
                            rabbit_mirror_queue_slave,
                            {36,
                             [{{31,<2866.296.0>},
                               {view_member,
                                   {31,<2866.296.0>},
                                   [],
                                   {32,<0.296.0>},
                                   {35,<2864.296.0>}}},
                              {{32,<0.296.0>},
                               {view_member,
                                   {32,<0.296.0>},
                                   [],
                                   {35,<2864.296.0>},
                                   {31,<2866.296.0>}}},
                              {{35,<2864.296.0>},
                               {view_member,
                                   {35,<2864.296.0>},
                                   [],
                                   {31,<2866.296.0>},
                                   {32,<0.296.0>}}}]},
                            1,
                            [{{31,<2866.296.0>},{member,{[],[]},42,42}},
                             {{32,<0.296.0>},{member,{[],[]},1,1}},
                             {{35,<2864.296.0>},{member,{[],[]},0,0}}],
                            [<0.295.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{32,<0.296.0>},
             [{{35,<2864.296.0>},
               {view_member,
                   {35,<2864.296.0>},
                   [{31,<2866.296.0>},{32,<0.296.0>}],
                   {35,<2864.296.0>},
                   {35,<2864.296.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.324.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.2277>,process,<2866.324.0>,
                               noconnection}
** When Server state == {state,
                            {7,<0.324.0>},
                            {{4,<2866.324.0>},#Ref<0.0.0.2277>},
                            {{10,<2864.324.0>},#Ref<0.0.0.4491>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.FlexGateway_error">>},
                            rabbit_mirror_queue_slave,
                            {11,
                             [{{4,<2866.324.0>},
                               {view_member,
                                   {4,<2866.324.0>},
                                   [],
                                   {10,<2864.324.0>},
                                   {7,<0.324.0>}}},
                              {{7,<0.324.0>},
                               {view_member,
                                   {7,<0.324.0>},
                                   [],
                                   {4,<2866.324.0>},
                                   {10,<2864.324.0>}}},
                              {{10,<2864.324.0>},
                               {view_member,
                                   {10,<2864.324.0>},
                                   [],
                                   {7,<0.324.0>},
                                   {4,<2866.324.0>}}}]},
                            1,
                            [{{4,<2866.324.0>},{member,{[],[]},3,3}},
                             {{7,<0.324.0>},{member,{[],[]},1,1}},
                             {{10,<2864.324.0>},{member,{[],[]},0,0}}],
                            [<0.323.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.324.0>},
             [{{10,<2864.324.0>},
               {view_member,
                   {10,<2864.324.0>},
                   [{4,<2866.324.0>},{7,<0.324.0>}],
                   {10,<2864.324.0>},
                   {10,<2864.324.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.268.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.1521>,process,<2866.268.0>,
                               noconnection}
** When Server state == {state,
                            {7,<0.268.0>},
                            {{4,<2866.268.0>},#Ref<0.0.0.1521>},
                            {{10,<2864.268.0>},#Ref<0.0.0.4385>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.DataInGateway_error">>},
                            rabbit_mirror_queue_slave,
                            {11,
                             [{{4,<2866.268.0>},
                               {view_member,
                                   {4,<2866.268.0>},
                                   [],
                                   {10,<2864.268.0>},
                                   {7,<0.268.0>}}},
                              {{7,<0.268.0>},
                               {view_member,
                                   {7,<0.268.0>},
                                   [],
                                   {4,<2866.268.0>},
                                   {10,<2864.268.0>}}},
                              {{10,<2864.268.0>},
                               {view_member,
                                   {10,<2864.268.0>},
                                   [],
                                   {7,<0.268.0>},
                                   {4,<2866.268.0>}}}]},
                            1,
                            [{{4,<2866.268.0>},{member,{[],[]},3,3}},
                             {{7,<0.268.0>},{member,{[],[]},1,1}},
                             {{10,<2864.268.0>},{member,{[],[]},0,0}}],
                            [<0.267.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.268.0>},
             [{{10,<2864.268.0>},
               {view_member,
                   {10,<2864.268.0>},
                   [{4,<2866.268.0>},{7,<0.268.0>}],
                   {10,<2864.268.0>},
                   {10,<2864.268.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.311.0> terminating
** Last message in was {'EXIT',<0.312.0>,
                        {function_clause,
                         [{orddict,fetch,
                           [{7,<0.312.0>},
                            [{{10,<2864.312.0>},
                              {view_member,
                               {10,<2864.312.0>},
                               [{4,<2866.312.0>},{7,<0.312.0>}],
                               {10,<2864.312.0>},
                               {10,<2864.312.0>}}}]],
                           [{file,"orddict.erl"},{line,72}]},
                          {gm,check_neighbours,1,[]},
                          {gm,handle_info,2,[]},
                          {gen_server2,handle_msg,2,[]},
                          {proc_lib,wake_up,3,
                           [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.DataInGateway_control">>},
                          true,false,none,[],<2866.311.0>,
                          [<2866.311.0>],
                          [<2866.311.0>],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2866.312.0>,<2866.311.0>},
                           {<2864.15605.269>,<2864.15604.269>}]},
                         <0.312.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/BM4B7G95VEK9CFDUB50KL6FSK",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<204,53,24,29,84,49,116,124,9,208,15,146,53,17,
                              202,118>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<225,125,146,252,188,156,233,18,128,93,44,246,181,
                              76,230,128>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1390,522182,818810},0},
                           {{1390,522182,818810},0},
                           0.0,0.0,
                           {1390,524649,256890}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1390,522182,818810},0},
                           {{1390,522182,818810},0},
                           0.0,0.0,
                           {1390,524649,256890}}},
                         undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.312.0>},
             [{{10,<2864.312.0>},
               {view_member,
                   {10,<2864.312.0>},
                   [{4,<2866.312.0>},{7,<0.312.0>}],
                   {10,<2864.312.0>},
                   {10,<2864.312.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.315.0> terminating
** Last message in was {'EXIT',<0.316.0>,
                        {function_clause,
                         [{orddict,fetch,
                           [{7,<0.316.0>},
                            [{{10,<2864.316.0>},
                              {view_member,
                               {10,<2864.316.0>},
                               [{4,<2866.316.0>},{7,<0.316.0>}],
                               {10,<2864.316.0>},
                               {10,<2864.316.0>}}}]],
                           [{file,"orddict.erl"},{line,72}]},
                          {gm,check_neighbours,1,[]},
                          {gm,handle_info,2,[]},
                          {gen_server2,handle_msg,2,[]},
                          {proc_lib,wake_up,3,
                           [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,<<"HA.NHBssSvc">>},
                          true,false,none,[],<2866.315.0>,
                          [<2866.315.0>],
                          [<2866.315.0>],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2866.316.0>,<2866.315.0>},
                           {<2864.26435.319>,<2864.26433.319>}]},
                         <0.316.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/4W7ZEUS2VKRURYWOKKRGHFENC",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<152,139,144,26,199,169,126,158,149,217,222,34,
                              112,56,57,205>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<67,50,144,206,17,66,48,114,244,163,215,157,132,
                              155,238,80>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1389,621513,279050},0},
                           {{1389,621513,279050},0},
                           0.0,0.0,
                           {1390,524651,190890}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1389,621513,279050},0},
                           {{1389,621513,279050},0},
                           0.0,0.0,
                           {1390,524651,190890}}},
                         undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.316.0>},
             [{{10,<2864.316.0>},
               {view_member,
                   {10,<2864.316.0>},
                   [{4,<2866.316.0>},{7,<0.316.0>}],
                   {10,<2864.316.0>},
                   {10,<2864.316.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.335.0> terminating
** Last message in was {'EXIT',<0.336.0>,
                        {function_clause,
                         [{orddict,fetch,
                           [{7,<0.336.0>},
                            [{{10,<2864.336.0>},
                              {view_member,
                               {10,<2864.336.0>},
                               [{4,<2866.336.0>},{7,<0.336.0>}],
                               {10,<2864.336.0>},
                               {10,<2864.336.0>}}}]],
                           [{file,"orddict.erl"},{line,72}]},
                          {gm,check_neighbours,1,[]},
                          {gm,handle_info,2,[]},
                          {gen_server2,handle_msg,2,[]},
                          {proc_lib,wake_up,3,
                           [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.VLReadyGateway">>},
                          true,false,none,[],<2866.335.0>,
                          [<2866.335.0>],
                          [<2866.335.0>],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2866.336.0>,<2866.335.0>},
                           {<2864.26139.319>,<2864.26137.319>}]},
                         <0.336.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/BHREJFY6I1FAP03LVGXP9HTN1",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<236,129,250,115,168,83,207,133,86,198,191,110,
                              181,42,8,225>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<144,137,97,140,110,28,17,103,141,240,166,232,56,
                              218,174,9>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1384,895566,191076},0},
                           {{1384,895566,191076},0},
                           0.0,0.0,
                           {1390,524651,846890}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1384,895566,191076},0},
                           {{1384,895566,191076},0},
                           0.0,0.0,
                           {1390,524651,846890}}},
                         undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.336.0>},
             [{{10,<2864.336.0>},
               {view_member,
                   {10,<2864.336.0>},
                   [{4,<2866.336.0>},{7,<0.336.0>}],
                   {10,<2864.336.0>},
                   {10,<2864.336.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.4378.0> terminating
** Last message in was {'DOWN',#Ref<0.0.0.88102>,process,<2866.4527.0>,
                               noconnection}
** When Server state == {state,
                            {1,<0.4378.0>},
                            {{0,<2866.4527.0>},#Ref<0.0.0.88102>},
                            {{0,<2864.6184.0>},#Ref<0.0.0.88103>},
                            {resource,<<"VisionLink">>,queue,
                                <<"HA.VLReadyServicesApi_control">>},
                            rabbit_mirror_queue_slave,
                            {2,
                             [{{0,<2866.4527.0>},
                               {view_member,
                                   {0,<2866.4527.0>},
                                   [],
                                   {0,<2864.6184.0>},
                                   {1,<0.4378.0>}}},
                              {{0,<2864.6184.0>},
                               {view_member,
                                   {0,<2864.6184.0>},
                                   [],
                                   {1,<0.4378.0>},
                                   {0,<2866.4527.0>}}},
                              {{1,<0.4378.0>},
                               {view_member,
                                   {1,<0.4378.0>},
                                   [],
                                   {0,<2866.4527.0>},
                                   {0,<2864.6184.0>}}}]},
                            0,
                            [{{0,<2866.4527.0>},{member,{[],[]},25,25}},
                             {{0,<2864.6184.0>},{member,{[],[]},0,0}},
                             {{1,<0.4378.0>},{member,{[],[]},0,0}}],
                            [<0.4377.0>],
                            {[],[]},
                            [],undefined,
                            #Fun<rabbit_misc.execute_mnesia_transaction.1>}
** Reason for termination == 
** {function_clause,[{orddict,fetch,
                              [{1,<0.4378.0>},[]],
                              [{file,"orddict.erl"},{line,72}]},
                     {gm,check_neighbours,1,[]},
                     {gm,handle_info,2,[]},
                     {gen_server2,handle_msg,2,[]},
                     {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.267.0> terminating
** Last message in was {'EXIT',<0.268.0>,
                        {function_clause,
                         [{orddict,fetch,
                           [{7,<0.268.0>},
                            [{{10,<2864.268.0>},
                              {view_member,
                               {10,<2864.268.0>},
                               [{4,<2866.268.0>},{7,<0.268.0>}],
                               {10,<2864.268.0>},
                               {10,<2864.268.0>}}}]],
                           [{file,"orddict.erl"},{line,72}]},
                          {gm,check_neighbours,1,[]},
                          {gm,handle_info,2,[]},
                          {gen_server2,handle_msg,2,[]},
                          {proc_lib,wake_up,3,
                           [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.DataInGateway_error">>},
                          true,false,none,[],<2866.267.0>,
                          [<2866.267.0>],
                          [<2866.267.0>],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2866.268.0>,<2866.267.0>},
                           {<2864.21214.281>,<2864.21211.281>}]},
                         <0.268.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/2XNLCZEP85FZHB5EXZF2B7QT0",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<45,17,16,148,193,184,77,22,6,158,107,138,140,31,
                              125,134>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<84,84,74,75,147,114,108,215,25,243,122,219,149,
                              236,7,93>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1390,524652,891892},0},
                           {{1390,524652,891892},0},
                           0.0,0.0,
                           {1390,524657,945890}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1390,524652,891892},0},
                           {{1390,524652,891892},0},
                           0.0,0.0,
                           {1390,524657,945890}}},
                         undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.268.0>},
             [{{10,<2864.268.0>},
               {view_member,
                   {10,<2864.268.0>},
                   [{4,<2866.268.0>},{7,<0.268.0>}],
                   {10,<2864.268.0>},
                   {10,<2864.268.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.321.0> terminating
** Last message in was {'EXIT',<0.322.0>,
                        {function_clause,
                         [{orddict,fetch,
                           [{32,<0.322.0>},
                            [{{35,<2864.322.0>},
                              {view_member,
                               {35,<2864.322.0>},
                               [{31,<2866.322.0>},{32,<0.322.0>}],
                               {35,<2864.322.0>},
                               {35,<2864.322.0>}}}]],
                           [{file,"orddict.erl"},{line,72}]},
                          {gm,check_neighbours,1,[]},
                          {gm,handle_info,2,[]},
                          {gen_server2,handle_msg,2,[]},
                          {proc_lib,wake_up,3,
                           [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.DataOut_error">>},
                          true,false,none,[],<2866.321.0>,
                          [<2866.321.0>],
                          [<2866.321.0>],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2866.322.0>,<2866.321.0>},
                           {<2864.283.0>,<2864.282.0>},
                           {<0.279.0>,<0.278.0>},
                           {<2866.281.0>,<2866.280.0>},
                           {<0.4166.0>,<0.4165.0>}]},
                         <0.322.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/BK7HOLUZCURXDS06F1WV3PH60",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<129,215,124,65,255,95,225,88,33,95,115,237,78,84,
                              172,160>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<19,180,1,84,205,180,147,225,162,191,76,172,236,
                              235,224,12>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1390,500738,952000},0},
                           {{1390,500738,952000},0},
                           0.0,0.0,
                           {1390,524649,568890}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1390,500738,952000},0},
                           {{1390,500738,952000},0},
                           0.0,0.0,
                           {1390,524649,568890}}},
                         undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{32,<0.322.0>},
             [{{35,<2864.322.0>},
               {view_member,
                   {35,<2864.322.0>},
                   [{31,<2866.322.0>},{32,<0.322.0>}],
                   {35,<2864.322.0>},
                   {35,<2864.322.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.295.0> terminating
** Last message in was {'EXIT',<0.296.0>,
                        {function_clause,
                         [{orddict,fetch,
                           [{32,<0.296.0>},
                            [{{35,<2864.296.0>},
                              {view_member,
                               {35,<2864.296.0>},
                               [{31,<2866.296.0>},{32,<0.296.0>}],
                               {35,<2864.296.0>},
                               {35,<2864.296.0>}}}]],
                           [{file,"orddict.erl"},{line,72}]},
                          {gm,check_neighbours,1,[]},
                          {gm,handle_info,2,[]},
                          {gen_server2,handle_msg,2,[]},
                          {proc_lib,wake_up,3,
                           [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.NHDataSvc_control">>},
                          true,false,none,[],<2866.295.0>,
                          [<2866.295.0>],
                          [<2866.295.0>],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2866.296.0>,<2866.295.0>},
                           {<2864.275.0>,<2864.274.0>}]},
                         <0.296.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/9NEBFVAUZOASATPLVW7AMI94E",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<8,147,173,213,72,70,154,71,45,117,13,212,166,6,
                              100,230>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<238,184,61,32,139,139,170,179,0,248,195,129,166,
                              254,167,103>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1389,621512,109051},0},
                           {{1389,621512,109051},0},
                           0.0,0.0,
                           {1390,524649,942890}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1389,621512,109051},0},
                           {{1389,621512,109051},0},
                           0.0,0.0,
                           {1390,524649,942890}}},
                         undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{32,<0.296.0>},
             [{{35,<2864.296.0>},
               {view_member,
                   {35,<2864.296.0>},
                   [{31,<2866.296.0>},{32,<0.296.0>}],
                   {35,<2864.296.0>},
                   {35,<2864.296.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.323.0> terminating
** Last message in was {'EXIT',<0.324.0>,
                        {function_clause,
                         [{orddict,fetch,
                           [{7,<0.324.0>},
                            [{{10,<2864.324.0>},
                              {view_member,
                               {10,<2864.324.0>},
                               [{4,<2866.324.0>},{7,<0.324.0>}],
                               {10,<2864.324.0>},
                               {10,<2864.324.0>}}}]],
                           [{file,"orddict.erl"},{line,72}]},
                          {gm,check_neighbours,1,[]},
                          {gm,handle_info,2,[]},
                          {gen_server2,handle_msg,2,[]},
                          {proc_lib,wake_up,3,
                           [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.FlexGateway_error">>},
                          true,false,none,[],<2866.323.0>,
                          [<2866.323.0>],
                          [<2866.323.0>],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2866.324.0>,<2866.323.0>},
                           {<2864.21508.281>,<2864.21505.281>}]},
                         <0.324.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/2NNLEHS5NKFM7ALROLLQ2M1G0",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<180,185,25,15,86,226,34,37,165,111,174,171,86,59,
                              63,16>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<210,228,199,214,33,105,75,88,210,61,218,227,132,
                              6,229,243>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1384,895566,893070},0},
                           {{1384,895566,893070},0},
                           0.0,0.0,
                           {1390,524650,941890}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1384,895566,893070},0},
                           {{1384,895566,893070},0},
                           0.0,0.0,
                           {1390,524650,941890}}},
                         undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.324.0>},
             [{{10,<2864.324.0>},
               {view_member,
                   {10,<2864.324.0>},
                   [{4,<2866.324.0>},{7,<0.324.0>}],
                   {10,<2864.324.0>},
                   {10,<2864.324.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.4337.0> terminating
** Last message in was {'EXIT',<0.4338.0>,
                           {function_clause,
                               [{orddict,fetch,
                                    [{1,<0.4338.0>},[]],
                                    [{file,"orddict.erl"},{line,72}]},
                                {gm,check_neighbours,1,[]},
                                {gm,handle_info,2,[]},
                                {gen_server2,handle_msg,2,[]},
                                {proc_lib,wake_up,3,
                                    [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.MTS_control">>},
                          true,false,none,[],<2866.4484.0>,
                          [<2864.6120.0>],
                          [],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2864.6121.0>,<2864.6120.0>},
                           {<2866.4486.0>,<2866.4484.0>}]},
                         <0.4338.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/8VMCW0L9B0PB0EBNKB3DKGLE",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<110,39,209,213,113,122,201,171,25,155,174,46,83,
                              31,89,0>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<247,165,70,64,159,68,33,197,213,192,214,235,134,
                              223,143,235>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1390,471296,278004},0},
                           {{1390,471296,278004},0},
                           0.0,0.0,
                           {1390,524649,786893}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1390,471296,278004},0},
                           {{1390,471296,278004},0},
                           0.0,0.0,
                           {1390,524649,786893}}},
                         undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {function_clause,[{orddict,fetch,
                              [{1,<0.4338.0>},[]],
                              [{file,"orddict.erl"},{line,72}]},
                     {gm,check_neighbours,1,[]},
                     {gm,handle_info,2,[]},
                     {gen_server2,handle_msg,2,[]},
                     {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.317.0> terminating
** Last message in was {'EXIT',<0.318.0>,
                        {function_clause,
                         [{orddict,fetch,
                           [{7,<0.318.0>},
                            [{{10,<2864.318.0>},
                              {view_member,
                               {10,<2864.318.0>},
                               [{4,<2866.318.0>},{7,<0.318.0>}],
                               {10,<2864.318.0>},
                               {10,<2864.318.0>}}}]],
                           [{file,"orddict.erl"},{line,72}]},
                          {gm,check_neighbours,1,[]},
                          {gm,handle_info,2,[]},
                          {gen_server2,handle_msg,2,[]},
                          {proc_lib,wake_up,3,
                           [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.NHDataPushSvc_error">>},
                          true,false,none,[],<2866.317.0>,
                          [<2866.317.0>],
                          [<2866.317.0>],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2866.318.0>,<2866.317.0>},
                           {<2864.26504.319>,<2864.26502.319>}]},
                         <0.318.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/7LYJVW46VR63UQJTSCVX0G611",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<200,76,94,115,91,215,36,143,4,177,116,50,7,135,
                              158,216>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<203,183,148,216,148,209,196,101,151,231,46,143,
                              144,96,176,87>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1384,895566,893073},0},
                           {{1384,895566,893073},0},
                           0.0,0.0,
                           {1390,524650,988890}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1384,895566,893073},0},
                           {{1384,895566,893073},0},
                           0.0,0.0,
                           {1390,524650,988890}}},
                         undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.318.0>},
             [{{10,<2864.318.0>},
               {view_member,
                   {10,<2864.318.0>},
                   [{4,<2866.318.0>},{7,<0.318.0>}],
                   {10,<2864.318.0>},
                   {10,<2864.318.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.313.0> terminating
** Last message in was {'EXIT',<0.314.0>,
                        {function_clause,
                         [{orddict,fetch,
                           [{7,<0.314.0>},
                            [{{10,<2864.314.0>},
                              {view_member,
                               {10,<2864.314.0>},
                               [{4,<2866.314.0>},{7,<0.314.0>}],
                               {10,<2864.314.0>},
                               {10,<2864.314.0>}}}]],
                           [{file,"orddict.erl"},{line,72}]},
                          {gm,check_neighbours,1,[]},
                          {gm,handle_info,2,[]},
                          {gen_server2,handle_msg,2,[]},
                          {proc_lib,wake_up,3,
                           [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.VLReadyServicesApi_error">>},
                          true,false,none,[],<2866.313.0>,
                          [<2866.313.0>],
                          [<2866.313.0>],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2866.314.0>,<2866.313.0>},
                           {<2864.26209.319>,<2864.26207.319>}]},
                         <0.314.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/C03DFE1BHHQ1Y5LNPX0S4YZZX",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<217,134,68,222,31,161,10,99,81,17,155,122,94,234,
                              115,46>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<232,53,146,12,166,133,3,21,169,126,235,65,247,
                              148,152,111>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1384,895566,253070},0},
                           {{1384,895566,253070},0},
                           0.0,0.0,
                           {1390,524650,894890}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1384,895566,253070},0},
                           {{1384,895566,253070},0},
                           0.0,0.0,
                           {1390,524650,894890}}},
                         undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.314.0>},
             [{{10,<2864.314.0>},
               {view_member,
                   {10,<2864.314.0>},
                   [{4,<2866.314.0>},{7,<0.314.0>}],
                   {10,<2864.314.0>},
                   {10,<2864.314.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:05 ===
** Generic server <0.319.0> terminating
** Last message in was {'EXIT',<0.320.0>,
                        {function_clause,
                         [{orddict,fetch,
                           [{7,<0.320.0>},
                            [{{10,<2864.320.0>},
                              {view_member,
                               {10,<2864.320.0>},
                               [{4,<2866.320.0>},{7,<0.320.0>}],
                               {10,<2864.320.0>},
                               {10,<2864.320.0>}}}]],
                           [{file,"orddict.erl"},{line,72}]},
                          {gm,check_neighbours,1,[]},
                          {gm,handle_info,2,[]},
                          {gen_server2,handle_msg,2,[]},
                          {proc_lib,wake_up,3,
                           [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.DataOut_error_control">>},
                          true,false,none,[],<2866.319.0>,
                          [<2866.319.0>],
                          [<2866.319.0>],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2866.320.0>,<2866.319.0>},
                           {<2864.4327.123>,<2864.4326.123>}]},
                         <0.320.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/3IFM6PX579EO8PUTTSKZ1KNIV",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<100,24,247,132,8,255,35,93,13,220,201,24,213,27,
                              220,40>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<76,250,174,109,73,217,68,40,145,30,81,24,68,5,
                              141,48>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1390,500738,125000},0},
                           {{1390,500738,125000},0},
                           0.0,0.0,
                           {1390,524649,802892}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1390,500738,125000},0},
                           {{1390,500738,125000},0},
                           0.0,0.0,
                           {1390,524649,802892}}},
                         undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {function_clause,
       [{orddict,fetch,
            [{7,<0.320.0>},
             [{{10,<2864.320.0>},
               {view_member,
                   {10,<2864.320.0>},
                   [{4,<2866.320.0>},{7,<0.320.0>}],
                   {10,<2864.320.0>},
                   {10,<2864.320.0>}}}]],
            [{file,"orddict.erl"},{line,72}]},
        {gm,check_neighbours,1,[]},
        {gm,handle_info,2,[]},
        {gen_server2,handle_msg,2,[]},
        {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:06 ===
** Generic server <0.4377.0> terminating
** Last message in was {'EXIT',<0.4378.0>,
                           {function_clause,
                               [{orddict,fetch,
                                    [{1,<0.4378.0>},[]],
                                    [{file,"orddict.erl"},{line,72}]},
                                {gm,check_neighbours,1,[]},
                                {gm,handle_info,2,[]},
                                {gen_server2,handle_msg,2,[]},
                                {proc_lib,wake_up,3,
                                    [{file,"proc_lib.erl"},{line,249}]}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.VLReadyServicesApi_control">>},
                          true,false,none,[],<2864.6183.0>,
                          [<2864.6183.0>],
                          [],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2864.6184.0>,<2864.6183.0>},
                           {<2866.4527.0>,<2866.4524.0>}]},
                         <0.4378.0>,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/queues/7KJQGQXMNQVIIQX05NTIXB139",
                           {{dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun<rabbit_variable_queue.2.41635915>,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,
                            <<92,9,62,244,181,114,56,111,151,147,56,192,33,2,
                              198,115>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,344140,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_persistent",
                            <0.257.0>,348237,340043,352334,356431},
                           {client_msstate,msg_store_transient,
                            <<245,31,175,177,215,254,175,30,97,111,81,173,64,
                              109,151,222>>,
                            {dict,0,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,323655,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient"},
                            rabbit_msg_store_ets_index,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV02-mnesia/msg_store_transient",
                            <0.252.0>,327752,319558,331849,335946}},
                          true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1390,494352,70001},0},
                           {{1390,494352,70001},0},
                           0.0,0.0,
                           {1390,524649,849890}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1390,494352,70001},0},
                           {{1390,494352,70001},0},
                           0.0,0.0,
                           {1390,524649,849890}}},
                         undefined,#Ref<0.0.2591.138565>,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0}
** Reason for termination == 
** {function_clause,[{orddict,fetch,
                              [{1,<0.4378.0>},[]],
                              [{file,"orddict.erl"},{line,72}]},
                     {gm,check_neighbours,1,[]},
                     {gm,handle_info,2,[]},
                     {gen_server2,handle_msg,2,[]},
                     {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::01:25:01 ===
Mnesia('rabbit at IAD2-NH1-RMQV02'): ** ERROR ** mnesia_event got {inconsistent_database, starting_partitioned_network, 'rabbit at IAD2-NH1-RMQV03'}

=INFO REPORT==== 24-Jan-2014::01:26:07 ===
    application: rabbitmq_management
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:26:07 ===
    application: amqp_client
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:26:07 ===
    application: rabbitmq_web_dispatch
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:26:07 ===
    application: webmachine
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:26:07 ===
    application: mochiweb
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:26:07 ===
    application: rabbitmq_management_agent
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:26:07 ===
stopped TCP Listener on 0.0.0.0:8002

=INFO REPORT==== 24-Jan-2014::01:26:07 ===
stopped TCP Listener on [::]:8002

=INFO REPORT==== 24-Jan-2014::01:26:07 ===
    application: rabbit
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:26:07 ===
    application: mnesia
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:26:07 ===
    application: os_mon
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:26:07 ===
Halting Erlang VM

=INFO REPORT==== 24-Jan-2014::01:26:20 ===
Starting RabbitMQ 3.0.4 on Erlang R16B

=INFO REPORT==== 24-Jan-2014::01:26:24 ===
Limiting to approx 8092 file handles (7280 sockets)

=INFO REPORT==== 24-Jan-2014::01:26:24 ===
Memory limit set to 2047MB of 4095MB total.

=INFO REPORT==== 24-Jan-2014::01:26:25 ===
started TCP Listener on [::]:8002

=INFO REPORT==== 24-Jan-2014::01:26:25 ===
started TCP Listener on 0.0.0.0:8002

=ERROR REPORT==== 24-Jan-2014::01:26:26 ===
Discarding message {'$gen_call',{<0.398.0>,#Ref<0.0.0.3146>},which_children} from <0.398.0> to <0.400.0> in an old incarnation (3) of this node (1)


RMQV01 .log *******************************************************************************************************************************

=ERROR REPORT==== 24-Jan-2014::00:51:10 ===
** Generic server <0.295.0> terminating
** Last message in was emit_stats
** When Server state == {q,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.NHDataSvc_control">>},
                          true,false,none,[],<0.295.0>,
                          [<2865.295.0>],
                          [<2865.295.0>],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2865.296.0>,<2865.295.0>},
                           {<2866.296.0>,<2866.295.0>}]},
                         none,false,rabbit_mirror_queue_master,
                         {state,<0.296.0>,<0.4476.377>,rabbit_variable_queue,
                          {vqstate,
                           {0,{[],[]}},
                           {0,{[],[]}},
                           {delta,undefined,0,undefined},
                           {0,{[],[]}},
                           {0,{[],[]}},
                           0,
                           {0,nil},
                           undefined,
                           {0,nil},
                           {qistate,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/queues/9NEBFVAUZOASATPLVW7AMI94E",
                            {{dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             []},
                            undefined,0,262144,
                            #Fun<rabbit_variable_queue.2.41635915>,
                            {0,nil}},
                           {{client_msstate,msg_store_persistent,
                             <<15,23,159,157,208,73,255,178,180,153,49,41,221,
                               144,176,232>>,
                             {dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             {state,344140,
                              "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/msg_store_persistent"},
                             rabbit_msg_store_ets_index,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/msg_store_persistent",
                             <0.257.0>,348237,340043,352334,356431},
                            {client_msstate,msg_store_transient,
                             <<114,107,50,175,22,187,252,52,127,178,125,245,
                               162,34,205,29>>,
                             {dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             {state,323655,
                              "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/msg_store_transient"},
                             rabbit_msg_store_ets_index,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/msg_store_transient",
                             <0.252.0>,327752,319558,331849,335946}},
                           true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                           0,infinity,0,0,0,0,0,
                           {rates,
                            {{1387,532092,741441},0},
                            {{1387,532092,741441},0},
                            0.0,0.0,
                            {1390,524669,76917}},
                           {0,nil},
                           {0,nil},
                           {0,nil},
                           {0,nil},
                           0,0,
                           {rates,
                            {{1387,532092,741441},0},
                            {{1387,532092,741441},0},
                            0.0,0.0,
                            {1390,524669,76917}}},
                          0,
                          {dict,0,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}},
                          [],
                          {dict,0,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}},
                          {set,0,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}}},
                         {[],[]},
                         undefined,undefined,undefined,undefined,
                         {state,fine,5000,#Ref<0.0.2754.256342>},
                         {0,nil},
                         undefined,undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         1,
                         {{0,nil},{0,nil}},
                         undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         undefined,undefined}
** Reason for termination == 
** {{badmatch,{error,not_found}},
    [{rabbit_amqqueue_process,i,2,[]},
     {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
     {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
     {rabbit_amqqueue_process,emit_stats,2,[]},
     {rabbit_amqqueue_process,handle_info,2,[]},
     {gen_server2,handle_msg,2,[]},
     {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:10 ===
** Generic server <0.267.0> terminating
** Last message in was emit_stats
** When Server state == {q,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.DataInGateway_error">>},
                          true,false,none,[],<0.267.0>,
                          [<2865.267.0>],
                          [<2865.267.0>],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2865.268.0>,<2865.267.0>},
                           {<2866.268.0>,<2866.267.0>}]},
                         none,false,rabbit_mirror_queue_master,
                         {state,<0.268.0>,<0.4475.377>,rabbit_variable_queue,
                          {vqstate,
                           {0,{[],[]}},
                           {0,{[],[]}},
                           {delta,undefined,0,undefined},
                           {0,{[],[]}},
                           {0,{[],[]}},
                           0,
                           {0,nil},
                           undefined,
                           {0,nil},
                           {qistate,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/queues/2XNLCZEP85FZHB5EXZF2B7QT0",
                            {{dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             []},
                            undefined,0,262144,
                            #Fun<rabbit_variable_queue.2.41635915>,
                            {0,nil}},
                           {{client_msstate,msg_store_persistent,
                             <<252,4,31,26,113,87,108,94,51,209,72,69,4,154,62,
                               170>>,
                             {dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             {state,344140,
                              "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/msg_store_persistent"},
                             rabbit_msg_store_ets_index,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/msg_store_persistent",
                             <0.257.0>,348237,340043,352334,356431},
                            {client_msstate,msg_store_transient,
                             <<124,53,186,195,62,179,158,216,9,248,232,55,13,
                               98,214,157>>,
                             {dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             {state,323655,
                              "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/msg_store_transient"},
                             rabbit_msg_store_ets_index,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/msg_store_transient",
                             <0.252.0>,327752,319558,331849,335946}},
                           true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                           0,infinity,0,0,0,0,0,
                           {rates,
                            {{1384,906896,323743},0},
                            {{1384,906896,323743},0},
                            0.0,0.0,
                            {1390,524669,76930}},
                           {0,nil},
                           {0,nil},
                           {0,nil},
                           {0,nil},
                           0,0,
                           {rates,
                            {{1384,906896,323743},0},
                            {{1384,906896,323743},0},
                            0.0,0.0,
                            {1390,524669,76930}}},
                          0,
                          {dict,0,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}},
                          [],
                          {dict,0,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}},
                          {set,0,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}}},
                         {[],[]},
                         undefined,undefined,undefined,undefined,
                         {state,fine,5000,#Ref<0.0.2754.256341>},
                         {0,nil},
                         undefined,undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         1,
                         {{0,nil},{0,nil}},
                         undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         undefined,undefined}
** Reason for termination == 
** {{badmatch,{error,not_found}},
    [{rabbit_amqqueue_process,i,2,[]},
     {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
     {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
     {rabbit_amqqueue_process,emit_stats,2,[]},
     {rabbit_amqqueue_process,handle_info,2,[]},
     {gen_server2,handle_msg,2,[]},
     {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=ERROR REPORT==== 24-Jan-2014::00:51:10 ===
** Generic server <0.6183.0> terminating
** Last message in was emit_stats
** When Server state == {q,
                         {amqqueue,
                          {resource,<<"VisionLink">>,queue,
                           <<"HA.VLReadyServicesApi_control">>},
                          true,false,none,[],<0.6183.0>,[],[],
                          [{vhost,<<"VisionLink">>},
                           {name,<<"HA-VisionLink">>},
                           {pattern,<<"^HA\\.">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          [{<2866.4527.0>,<2866.4524.0>}]},
                         none,false,rabbit_mirror_queue_master,
                         {state,<0.6184.0>,<0.4474.377>,
                          rabbit_variable_queue,
                          {vqstate,
                           {0,{[],[]}},
                           {0,{[],[]}},
                           {delta,undefined,0,undefined},
                           {0,{[],[]}},
                           {0,{[],[]}},
                           0,
                           {0,nil},
                           undefined,
                           {0,nil},
                           {qistate,
                            "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/queues/7KJQGQXMNQVIIQX05NTIXB139",
                            {{dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             []},
                            undefined,0,262144,
                            #Fun<rabbit_variable_queue.2.41635915>,
                            {0,nil}},
                           {{client_msstate,msg_store_persistent,
                             <<51,218,54,7,117,73,196,73,219,103,132,43,79,121,
                               202,176>>,
                             {dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             {state,344140,
                              "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/msg_store_persistent"},
                             rabbit_msg_store_ets_index,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/msg_store_persistent",
                             <0.257.0>,348237,340043,352334,356431},
                            {client_msstate,msg_store_transient,
                             <<75,85,1,36,229,123,65,70,113,101,15,221,62,28,
                               197,109>>,
                             {dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             {state,323655,
                              "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/msg_store_transient"},
                             rabbit_msg_store_ets_index,
                             "d:/rabbitmq/base/db/rabbit at IAD2-NH1-RMQV01-mnesia/msg_store_transient",
                             <0.252.0>,327752,319558,331849,335946}},
                           true,0,#Fun<rabbit_mirror_queue_slave.1.5393384>,0,
                           0,infinity,0,0,0,0,0,
                           {rates,
                            {{1390,494363,79450},0},
                            {{1390,494363,79450},0},
                            0.0,0.0,
                            {1390,524669,76915}},
                           {0,nil},
                           {0,nil},
                           {0,nil},
                           {0,nil},
                           0,0,
                           {rates,
                            {{1390,494363,79450},0},
                            {{1390,494363,79450},0},
                            0.0,0.0,
                            {1390,524669,76915}}},
                          0,
                          {dict,0,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}},
                          [],
                          {dict,0,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}},
                          {set,0,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}}},
                         {[],[]},
                         undefined,undefined,undefined,undefined,
                         {state,fine,5000,#Ref<0.0.2754.256340>},
                         {0,nil},
                         undefined,undefined,undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         1,
                         {{0,nil},{0,nil}},
                         undefined,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         undefined,undefined}
** Reason for termination == 
** {{badmatch,{error,not_found}},
    [{rabbit_amqqueue_process,i,2,[]},
     {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
     {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
     {rabbit_amqqueue_process,emit_stats,2,[]},
     {rabbit_amqqueue_process,handle_info,2,[]},
     {gen_server2,handle_msg,2,[]},
     {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}

=INFO REPORT==== 24-Jan-2014::01:24:46 ===
    application: rabbitmq_management
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:24:46 ===
    application: amqp_client
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:24:46 ===
    application: rabbitmq_web_dispatch
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:24:46 ===
    application: webmachine
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:24:46 ===
    application: mochiweb
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:24:46 ===
    application: rabbitmq_management_agent
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:24:46 ===
stopped TCP Listener on 0.0.0.0:8002

=INFO REPORT==== 24-Jan-2014::01:24:46 ===
stopped TCP Listener on [::]:8002

=INFO REPORT==== 24-Jan-2014::01:24:46 ===
    application: rabbit
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:24:46 ===
    application: mnesia
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:24:46 ===
    application: os_mon
    exited: stopped
    type: temporary

=INFO REPORT==== 24-Jan-2014::01:24:46 ===
Halting Erlang VM

=ERROR REPORT==== 24-Jan-2014::01:25:01 ===
Mnesia('rabbit at IAD2-NH1-RMQV01'): ** ERROR ** mnesia_event got {inconsistent_database, starting_partitioned_network, 'rabbit at IAD2-NH1-RMQV03'}

=INFO REPORT==== 24-Jan-2014::01:25:02 ===
Starting RabbitMQ 3.0.4 on Erlang R16B

=INFO REPORT==== 24-Jan-2014::01:25:06 ===
Limiting to approx 8092 file handles (7280 sockets)

=INFO REPORT==== 24-Jan-2014::01:25:06 ===
Memory limit set to 2047MB of 4095MB total.

=ERROR REPORT==== 24-Jan-2014::01:25:06 ===
Discarding message {'$gen_call',{<0.262.0>,#Ref<0.0.0.1279>},{add_on_right,{5,<0.262.0>}}} from <0.262.0> to <0.6226.0> in an old incarnation (3) of this node (1)


=INFO REPORT==== 24-Jan-2014::01:25:07 ===
started TCP Listener on [::]:8002

=INFO REPORT==== 24-Jan-2014::01:25:07 ===
started TCP Listener on 0.0.0.0:8002

=ERROR REPORT==== 24-Jan-2014::13:05:19 ===
Discarding message {'$gen_call',{<0.2035.4>,#Ref<0.0.96.229051>},{add_on_right,{14,<0.2035.4>}}} from <0.2035.4> to <0.268.0> in an old incarnation (3) of this node (1)


=ERROR REPORT==== 24-Jan-2014::13:06:34 ===
Discarding message {'$gen_call',{<0.2315.4>,#Ref<0.0.97.29420>},{add_on_right,{14,<0.2315.4>}}} from <0.2315.4> to <0.324.0> in an old incarnation (3) of this node (1)


=ERROR REPORT==== 24-Jan-2014::13:07:27 ===
Discarding message {'$gen_call',{<0.2515.4>,#Ref<0.0.97.78163>},{add_on_right,{14,<0.2515.4>}}} from <0.2515.4> to <0.316.0> in an old incarnation (3) of this node (1)


=ERROR REPORT==== 24-Jan-2014::13:08:03 ===
Discarding message {'$gen_call',{<0.2689.4>,#Ref<0.0.97.107431>},{add_on_right,{14,<0.2689.4>}}} from <0.2689.4> to <0.318.0> in an old incarnation (3) of this node (1)


=ERROR REPORT==== 24-Jan-2014::13:08:37 ===
Discarding message {'$gen_call',{<0.2848.4>,#Ref<0.0.97.137690>},{add_on_right,{14,<0.2848.4>}}} from <0.2848.4> to <0.336.0> in an old incarnation (3) of this node (1)


=ERROR REPORT==== 24-Jan-2014::13:08:55 ===
Discarding message {'$gen_call',{<0.2927.4>,#Ref<0.0.97.149904>},{add_on_right,{14,<0.2927.4>}}} from <0.2927.4> to <0.314.0> in an old incarnation (3) of this node (1)


=ERROR REPORT==== 24-Jan-2014::16:19:46 ===
** Connection attempt from disallowed node 'rabbitmqctl2814081 at IAD2-NH1-RMQV01' ** 
-------------- next part --------------
RMQV03 errors from sasl.log ********************************************************************************************************************************************


=CRASH REPORT==== 24-Jan-2014::00:50:34 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.206.0>
    registered_name: []
    exception exit: {unexpected_info,
                        {mnesia_locker,'rabbit at IAD2-NH1-RMQV01',
                            {tid_released,{tid,6346,<0.206.0>}}}}
      in function  gen_server2:terminate/3 
    ancestors: [worker_pool_sup,rabbit_sup,<0.194.0>]
    messages: []
    links: [<0.202.0>]
    dictionary: [{random_seed,{4196,9644,14650}},
                  {{xtype_to_module,fanout},rabbit_exchange_type_fanout},
                  {worker_pool_worker,true},
                  {fhc_age_tree,{0,nil}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 161790
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::00:50:34 ===
     Supervisor: {local,worker_pool_sup}
     Context:    child_terminated
     Reason:     {unexpected_info,
                     {mnesia_locker,'rabbit at IAD2-NH1-RMQV01',
                         {tid_released,{tid,6346,<0.206.0>}}}}
     Offender:   [{pid,<0.206.0>},
                  {name,3},
                  {mfargs,{worker_pool_worker,start_link,[3]}},
                  {restart_type,transient},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 24-Jan-2014::00:50:34 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.204.0>
    registered_name: []
    exception exit: {unexpected_info,
                        {mnesia_locker,'rabbit at IAD2-NH1-RMQV02',granted}}
      in function  gen_server2:terminate/3 
    ancestors: [worker_pool_sup,rabbit_sup,<0.194.0>]
    messages: []
    links: [<0.202.0>]
    dictionary: [{random_seed,{22256,18305,19904}},
                  {{xtype_to_module,fanout},rabbit_exchange_type_fanout},
                  {worker_pool_worker,true}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 168807
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:50:34 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.205.0>
    registered_name: []
    exception exit: {unexpected_info,
                        {mnesia_locker,'rabbit at IAD2-NH1-RMQV02',granted}}
      in function  gen_server2:terminate/3 
    ancestors: [worker_pool_sup,rabbit_sup,<0.194.0>]
    messages: []
    links: [<0.202.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {random_seed,{28098,29180,17412}},
                  {{xtype_to_module,fanout},rabbit_exchange_type_fanout},
                  {worker_pool_worker,true}]
    trap_exit: false
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 168036
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:50:34 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.207.0>
    registered_name: []
    exception exit: {unexpected_info,
                        {mnesia_locker,'rabbit at IAD2-NH1-RMQV02',granted}}
      in function  gen_server2:terminate/3 
    ancestors: [worker_pool_sup,rabbit_sup,<0.194.0>]
    messages: []
    links: [<0.202.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {random_seed,{22256,18305,5340}},
                  {{xtype_to_module,fanout},rabbit_exchange_type_fanout},
                  {worker_pool_worker,true},
                  {fhc_age_tree,{0,nil}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 187868
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::00:50:34 ===
     Supervisor: {local,worker_pool_sup}
     Context:    child_terminated
     Reason:     {unexpected_info,
                     {mnesia_locker,'rabbit at IAD2-NH1-RMQV02',granted}}
     Offender:   [{pid,<0.204.0>},
                  {name,1},
                  {mfargs,{worker_pool_worker,start_link,[1]}},
                  {restart_type,transient},
                  {shutdown,4294967295},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 24-Jan-2014::00:50:34 ===
     Supervisor: {local,worker_pool_sup}
     Context:    child_terminated
     Reason:     {unexpected_info,
                     {mnesia_locker,'rabbit at IAD2-NH1-RMQV02',granted}}
     Offender:   [{pid,<0.205.0>},
                  {name,2},
                  {mfargs,{worker_pool_worker,start_link,[2]}},
                  {restart_type,transient},
                  {shutdown,4294967295},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 24-Jan-2014::00:50:34 ===
     Supervisor: {local,worker_pool_sup}
     Context:    child_terminated
     Reason:     {unexpected_info,
                     {mnesia_locker,'rabbit at IAD2-NH1-RMQV02',granted}}
     Offender:   [{pid,<0.207.0>},
                  {name,4},
                  {mfargs,{worker_pool_worker,start_link,[4]}},
                  {restart_type,transient},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 24-Jan-2014::01:27:01 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.4622.0>
    registered_name: []
    exception exit: {{badmatch,{error,eexist}},
                     [{rabbit_queue_index,store_clean_shutdown,2,[]},
                      {rabbit_queue_index,terminate,2,[]},
                      {rabbit_variable_queue,terminate,2,[]},
                      {rabbit_amqqueue_process,terminate_shutdown,2,[]},
                      {gen_server2,terminate,3,[]},
                      {proc_lib,wake_up,3,
                                [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.194.0>]
    messages: [{'EXIT',<0.4623.0>,normal}]
    links: []
    dictionary: [{guid,{{2194698427,88640712,3305906317,535194523},1}}]
    trap_exit: true
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 196893
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::01:27:01 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    shutdown_error
     Reason:     {{badmatch,{error,eexist}},
                  [{rabbit_queue_index,store_clean_shutdown,2,[]},
                   {rabbit_queue_index,terminate,2,[]},
                   {rabbit_variable_queue,terminate,2,[]},
                   {rabbit_amqqueue_process,terminate_shutdown,2,[]},
                   {gen_server2,terminate,3,[]},
                   {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.4622.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,{rabbit_mirror_queue_slave,start_link,[]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 24-Jan-2014::01:27:23 ===
  crasher:
    initial call: rabbit_log:init/1
    pid: <0.218.0>
    registered_name: []
    exception exit: {{case_clause,{{[{connection,warning}]}}},
                     [{rabbit_log,'-init/1-lc$^0/1-0-',1,[]},
                      {rabbit_log,init,1,[]},
                      {gen_server,init_it,6,
                                  [{file,"gen_server.erl"},{line,304}]},
                      {proc_lib,init_p_do_apply,3,
                                [{file,"proc_lib.erl"},{line,239}]}]}
      in function  gen_server:init_it/6 (gen_server.erl, line 328)
    ancestors: [rabbit_log_sup,rabbit_sup,<0.197.0>]
    messages: []
    links: [<0.217.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 376
    stack_size: 27
    reductions: 351
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::01:27:23 ===
     Supervisor: {local,rabbit_log_sup}
     Context:    start_error
     Reason:     {{case_clause,{{[{connection,warning}]}}},
                  [{rabbit_log,'-init/1-lc$^0/1-0-',1,[]},
                   {rabbit_log,init,1,[]},
                   {gen_server,init_it,6,[{file,"gen_server.erl"},{line,304}]},
                   {proc_lib,init_p_do_apply,3,
                             [{file,"proc_lib.erl"},{line,239}]}]}
     Offender:   [{pid,undefined},
                  {name,rabbit_log},
                  {mfargs,{rabbit_log,start_link,[]}},
                  {restart_type,transient},
                  {shutdown,4294967295},
                  {child_type,worker}]


				  

RMQV02 errors from sasl.log ********************************************************************************************************************************************

=CRASH REPORT==== 23-Jan-2014::11:58:35 ===
  crasher:
    initial call: mochiweb_acceptor:init/3
    pid: <0.27801.373>
    registered_name: []
    exception error: no match of right hand side value {error,einval}
      in function  mochiweb_http:new_request/3 
      in call from mochiweb_http:handle_invalid_request/3 
      in call from mochiweb_http:handle_invalid_request/1 
    ancestors: [rabbit_web_dispatch_sup_15672,rabbit_web_dispatch_sup,
                  <0.360.0>]
    messages: [{tcp_closed,#Port<0.5605830>}]
    links: [<0.383.0>]
    dictionary: [{reqstate,
                   {wm_reqstate,#Port<0.5605830>,
                    {dict,3,16,16,8,80,48,
                     {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                     {{[],[],[],[],[],
                       [[resource_module|rabbit_mgmt_wm_node],
                        ['content-type',97,112,112,108,105,99,97,116,105,111,
                         110,47,106,115,111,110]],
                       [],
                       [['content-encoding',105,100,101,110,116,105,116,121]],
                       [],[],[],[],[],[],[],[]}}},
                    undefined,"10.121.1.15",
                    {wm_reqdata,'GET',http,
                     {1,1},
                     "10.121.1.15",
                     {wm_reqstate,#Port<0.5605830>,
                      {dict,3,16,16,8,80,48,
                       {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                       {{[],[],[],[],[],
                         [[resource_module|rabbit_mgmt_wm_node],
                          ['content-type',97,112,112,108,105,99,97,116,105,
                           111,110,47,106,115,111,110]],
                         [],
                         [['content-encoding',105,100,101,110,116,105,116,
                           121]],
                         [],[],[],[],[],[],[],[]}}},
                      undefined,"10.121.1.15",
                      {wm_reqdata,'GET',http,
                       {1,1},
                       "10.121.1.15",
                       {wm_reqstate,#Port<0.5605830>,
                        {dict,3,16,16,8,80,48,
                         {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                         {{[],[],[],[],[],
                           [[resource_module|rabbit_mgmt_wm_node],
                            ['content-type',97,112,112,108,105,99,97,116,105,
                             111,110,47,106,115,111,110]],
                           [],
                           [['content-encoding',105,100,101,110,116,105,116,
                             121]],
                           [],[],[],[],[],[],[],[]}}},
                        undefined,"10.121.1.15",
                        {wm_reqdata,'GET',http,
                         {1,1},
                         "10.121.1.15",
                         {wm_reqstate,#Port<0.5605830>,
                          {dict,3,16,16,8,80,48,
                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],
                             [[resource_module|rabbit_mgmt_wm_node],
                              ['content-type',97,112,112,108,105,99,97,116,
                               105,111,110,47,106,115,111,110]],
                             [],
                             [['content-encoding',105,100,101,110,116,105,116,
                               121]],
                             [],[],[],[],[],[],[],[]}}},
                          undefined,"10.121.1.15",
                          {wm_reqdata,'GET',http,
                           {1,1},
                           "10.121.1.15",
                           {wm_reqstate,#Port<0.5605830>,
                            {dict,3,16,16,8,80,48,
                             {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],
                               [[resource_module|rabbit_mgmt_wm_node],
                                ['content-type',97,112,112,108,105,99,97,116,
                                 105,111,110,47,106,115,111,110]],
                               [],
                               [['content-encoding',105,100,101,110,116,105,
                                 116,121]],
                               [],[],[],[],[],[],[],[]}}},
                            undefined,"10.121.1.15",
                            {wm_reqdata,'GET',http,
                             {1,1},
                             "10.121.1.15",
                             {wm_reqstate,#Port<0.5605830>,
                              {dict,3,16,16,8,80,48,
                               {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []},
                               {{[],[],[],[],[],
                                 [[resource_module|rabbit_mgmt_wm_node],
                                  ['content-type',97,112,112,108,105,99,97,
                                   116,105,111,110,47,106,115,111,110]],
                                 [],
                                 [['content-encoding',105,100,101,110,116,105,
                                   116,121]],
                                 [],[],[],[],[],[],[],[]}}},
                              undefined,"10.121.1.15",
                              {wm_reqdata,'GET',http,
                               {1,1},
                               "10.121.1.15",
                               {wm_reqstate,#Port<0.5605830>,
                                {dict,3,16,16,8,80,48,
                                 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                  [],[]},
                                 {{[],[],[],[],[],
                                   [[resource_module|rabbit_mgmt_wm_node],
                                    ['content-type',97,112,112,108,105,99,97,
                                     116,105,111,110,47,106,115,111,110]],
                                   [],
                                   [['content-encoding',105,100,101,110,116,
                                     105,116,121]],
                                   [],[],[],[],[],[],[],[]}}},
                                undefined,"10.121.1.15",
                                {wm_reqdata,'GET',http,
                                 {1,1},
                                 "10.121.1.15",
                                 {wm_reqstate,#Port<0.5605830>,
                                  {dict,3,16,16,8,80,48,
                                   {[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                    [],[]},
                                   {{[],[],[],[],[],
                                     [[resource_module|rabbit_mgmt_wm_node],
                                      ['content-type',97,112,112,108,105,99,
                                       97,116,105,111,110,47,106,115,111,110]],
                                     [],
                                     [['content-encoding',105,100,101,110,116,
                                       105,116,121]],
                                     [],[],[],[],[],[],[],[]}}},
                                  undefined,"10.121.1.15",
                                  {wm_reqdata,'GET',http,
                                   {1,1},
                                   "10.121.1.15",
                                   {wm_reqstate,#Port<0.5605830>,
                                    {dict,3,16,16,8,80,48,
                                     {[],[],[],[],[],[],[],[],[],[],[],[],[],
                                      [],[],[]},
                                     {{[],[],[],[],[],
                                       [[resource_module|rabbit_mgmt_wm_node],
                                        ['content-type',97,112,112,108,105,99,
                                         97,116,105,111,110,47,106,115,111,
                                         110]],
                                       [],
                                       [['content-encoding',105,100,101,110,
                                         116,105,116,121]],
                                       [],[],[],[],[],[],[],[]}}},
                                    undefined,"10.121.1.15",
                                    {wm_reqdata,'GET',http,
                                     {1,1},
                                     "10.121.1.15",
                                     {wm_reqstate,#Port<0.5605830>,
                                      {dict,3,16,16,8,80,48,
                                       {[],[],[],[],[],[],[],[],[],[],[],[],
                                        [],[],[],[]},
                                       {{[],[],[],[],[],
                                         [[resource_module|
                                           rabbit_mgmt_wm_node],
                                          ['content-type',97,112,112,108,105,
                                           99,97,116,105,111,110,47,106,115,
                                           111,110]],
                                         [],
                                         [['content-encoding',105,100,101,110,
                                           116,105,116,121]],
                                         [],[],[],[],[],[],[],[]}}},
                                      undefined,"10.121.1.15",
                                      {wm_reqdata,'GET',http,
                                       {1,1},
                                       "10.121.1.15",
                                       {wm_reqstate,#Port<0.5605830>,
                                        {dict,3,16,16,8,80,48,
                                         {[],[],[],[],[],[],[],[],[],[],[],[],
                                          [],[],[],[]},
                                         {{[],[],[],[],[],
                                           [[resource_module|
                                             rabbit_mgmt_wm_node],
                                            ['content-type',97,112,112,108,
                                             105,99,97,116,105,111,110,47,106,
                                             115,111,110]],
                                           [],
                                           [['content-encoding',105,100,101,
                                             110,116,105,116,121]],
                                           [],[],[],[],[],[],[],[]}}},
                                        undefined,"10.121.1.15",
                                        {wm_reqdata,'GET',http,
                                         {1,1},
                                         "10.121.1.15",
                                         {wm_reqstate,#Port<0.5605830>,
                                          {dict,3,16,16,8,80,48,
                                           {[],[],[],[],[],[],[],[],[],[],[],
                                            [],[],[],[],[]},
                                           {{[],[],[],[],[],
                                             [[resource_module|
                                               rabbit_mgmt_wm_node],
                                              ['content-type',97,112,112,108,
                                               105,99,97,116,105,111,110,47,
                                               106,115,111,110]],
                                             [],
                                             [['content-encoding',105,100,101,
                                               110,116,105,116,121]],
                                             [],[],[],[],[],[],[],[]}}},
                                          undefined,"10.121.1.15",
                                          {wm_reqdata,'GET',http,
                                           {1,1},
                                           "10.121.1.15",
                                           {wm_reqstate,#Port<0.5605830>,
                                            {dict,3,16,16,8,80,48,
                                             {[],[],[],[],[],[],[],[],[],[],
                                              [],[],[],[],[],[]},
                                             {{[],[],[],[],[],
                                               [[resource_module|
                                                 rabbit_mgmt_wm_node],
                                                ['content-type',97,112,112,
                                                 108,105,99,97,116,105,111,
                                                 110,47,106,115,111,110]],
                                               [],
                                               [['content-encoding',105,100,
                                                 101,110,116,105,116,121]],
                                               [],[],[],[],[],[],[],[]}}},
                                            undefined,"10.121.1.15",
                                            {wm_reqdata,'GET',http,
                                             {1,1},
                                             "10.121.1.15",
                                             {wm_reqstate,#Port<0.5605830>,
                                              {dict,3,16,16,8,80,48,
                                               {[],[],[],[],[],[],[],[],[],[],
                                                [],[],[],[],[],[]},
                                               {{[],[],[],[],[],
                                                 [[resource_module|
                                                   rabbit_mgmt_wm_node],
                                                  ['content-type',97,112,112,
                                                   108,105,99,97,116,105,111,
                                                   110,47,106,115,111,110]],
                                                 [],
                                                 [['content-encoding',105,100,
                                                   101,110,116,105,116,121]],
                                                 [],[],[],[],[],[],[],[]}}},
                                              undefined,"10.121.1.15",
                                              {wm_reqdata,'GET',http,
                                               {1,1},
                                               "10.121.1.15",
                                               {wm_reqstate,#Port<0.5605830>,
                                                {dict,3,16,16,8,80,48,
                                                 {[],[],[],[],[],[],[],[],[],
                                                  [],[],[],[],[],[],[]},
                                                 {{[],[],[],[],[],
                                                   [[resource_module|
                                                     rabbit_mgmt_wm_node],
                                                    ['content-type',97,112,
                                                     112,108,105,99,97,116,
                                                     105,111,110,47,106,115,
                                                     111,110]],
                                                   [],
                                                   [['content-encoding',105,
                                                     100,101,110,116,105,116,
                                                     121]],
                                                   [],[],[],[],[],[],[],[]}}},
                                                undefined,"10.121.1.15",
                                                {wm_reqdata,'GET',http,
                                                 {1,1},
                                                 "10.121.1.15",
                                                 {wm_reqstate,
                                                  #Port<0.5605830>,
                                                  {dict,2,16,16,8,80,48,
                                                   {[],[],[],[],[],[],[],[],
                                                    [],[],[],[],[],[],[],[]},
                                                   {{[],[],[],[],[],
                                                     [[resource_module|
                                                       rabbit_mgmt_wm_node],
                                                      ['content-type',97,112,
                                                       112,108,105,99,97,116,
                                                       105,111,110,47,106,115,
                                                       111,110]],
                                                     [],[],[],[],[],[],[],[],
                                                     [],[]}}},
                                                  undefined,"10.121.1.15",
                                                  {wm_reqdata,'GET',http,
                                                   {1,1},
                                                   "10.121.1.15",
                                                   {wm_reqstate,
                                                    #Port<0.5605830>,
                                                    {dict,2,16,16,8,80,48,
                                                     {[],[],[],[],[],[],[],[],
                                                      [],[],[],[],[],[],[],[]},
                                                     {{[],[],[],[],[],
                                                       [[resource_module|
                                                         rabbit_mgmt_wm_node],
                                                        ['content-type',97,
                                                         112,112,108,105,99,
                                                         97,116,105,111,110,
                                                         47,106,115,111,110]],
                                                       [],[],[],[],[],[],[],
                                                       [],[],[]}}},
                                                    undefined,"10.121.1.15",
                                                    {wm_reqdata,'GET',http,
                                                     {1,1},
                                                     "10.121.1.15",
                                                     {wm_reqstate,
                                                      #Port<0.5605830>,
                                                      {dict,1,16,16,8,80,48,
                                                       {[],[],[],[],[],[],[],
                                                        [],[],[],[],[],[],[],
                                                        [],[]},
                                                       {{[],[],[],[],[],
                                                         [[resource_module|
                                                           rabbit_mgmt_wm_node]],
                                                         [],[],[],[],[],[],[],
                                                         [],[],[]}}},
                                                      undefined,"10.121.1.15",
                                                      {wm_reqdata,'GET',http,
                                                       {1,1},
                                                       "10.121.1.15",
                                                       {wm_reqstate,
                                                        #Port<0.5605830>,
                                                        {dict,1,16,16,8,80,
                                                         48,
                                                         {[],[],[],[],[],[],
                                                          [],[],[],[],[],[],
                                                          [],[],[],[]},
                                                         {{[],[],[],[],[],
                                                           [[resource_module|
                                                             rabbit_mgmt_wm_node]],
                                                           [],[],[],[],[],[],
                                                           [],[],[],[]}}},
                                                        undefined,
                                                        "10.121.1.15",
                                                        {wm_reqdata,'GET',
                                                         http,
                                                         {1,1},
                                                         "10.121.1.15",
                                                         {wm_reqstate,
                                                          #Port<0.5605830>,
                                                          {dict,1,16,16,8,80,
                                                           48,
                                                           {[],[],[],[],[],[],
                                                            [],[],[],[],[],[],
                                                            [],[],[],[]},
                                                           {{[],[],[],[],[],
                                                             [[resource_module|
                                                               rabbit_mgmt_wm_node]],
                                                             [],[],[],[],[],
                                                             [],[],[],[],[]}}},
                                                          undefined,
                                                          "10.121.1.15",
                                                          {wm_reqdata,'GET',
                                                           http,
                                                           {1,1},
                                                           "10.121.1.15",
                                                           {wm_reqstate,
                                                            #Port<0.5605830>,
                                                            {dict,1,16,16,8,
                                                             80,48,
                                                             {[],[],[],[],[],
                                                              [],[],[],[],[],
                                                              [],[],[],[],[],
                                                              []},
                                                             {{[],[],[],[],[],
                                                               [[resource_module|
                                                                 rabbit_mgmt_wm_node]],
                                                               [],[],[],[],[],
                                                               [],[],[],[],
                                                               []}}},
                                                            undefined,
                                                            "10.121.1.15",
                                                            {wm_reqdata,
                                                             'GET',http,
                                                             {1,1},
                                                             "10.121.1.15",
                                                             {wm_reqstate,
                                                              #Port<0.5605830>,
                                                              {dict,1,16,16,
                                                               8,80,48,
                                                               {[],[],[],[],
                                                                [],[],[],[],
                                                                [],[],[],[],
                                                                [],[],[],[]},
                                                               {{[],[],[],[],
                                                                 [],
                                                                 [[resource_module|
                                                                   rabbit_mgmt_wm_node]],
                                                                 [],[],[],[],
                                                                 [],[],[],[],
                                                                 [],[]}}},
                                                              undefined,
                                                              "10.121.1.15",
                                                              {wm_reqdata,
                                                               'GET',http,
                                                               {1,1},
                                                               "10.121.1.15",
                                                               {wm_reqstate,
                                                                #Port<0.5605830>,
                                                                {dict,1,16,
                                                                 16,8,80,48,
                                                                 {[],[],[],[],
                                                                  [],[],[],[],
                                                                  [],[],[],[],
                                                                  [],[],[],[]},
                                                                 {{[],[],[],
                                                                   [],[],
                                                                   [[resource_module|
                                                                     rabbit_mgmt_wm_node]],
                                                                   [],[],[],
                                                                   [],[],[],
                                                                   [],[],[],
                                                                   []}}},
                                                                undefined,
                                                                "10.121.1.15",
                                                                {wm_reqdata,
                                                                 'GET',http,
                                                                 {1,1},
                                                                 "10.121.1.15",
                                                                 {wm_reqstate,
                                                                  #Port<0.5605830>,
                                                                  {dict,1,16,
                                                                   16,8,80,48,
                                                                   {[],[],[],
                                                                    [],[],[],
                                                                    [],[],[],
                                                                    [],[],[],
                                                                    [],[],[],
                                                                    []},
                                                                   {{[],[],[],
                                                                     [],[],
                                                                     [[resource_module|
                                                                       rabbit_mgmt_wm_node]],
                                                                     [],[],[],
                                                                     [],[],[],
                                                                     [],[],[],
                                                                     []}}},
                                                                  undefined,
                                                                  "10.121.1.15",
                                                                  {wm_reqdata,
                                                                   'GET',http,
                                                                   {1,1},
                                                                   "10.121.1.15",
                                                                   {wm_reqstate,
                                                                    #Port<0.5605830>,
                                                                    {dict,1,
                                                                     16,16,8,
                                                                     80,48,
                                                                     {[],[],
                                                                      [],[],
                                                                      [],[],
                                                                      [],[],
                                                                      [],[],
                                                                      [],[],
                                                                      [],[],
                                                                      [],[]},
                                                                     {{[],[],
                                                                       [],[],
                                                                       [],
                                                                       [[resource_module|
                                                                         rabbit_mgmt_wm_node]],
                                                                       [],[],
                                                                       [],[],
                                                                       [],[],
                                                                       [],[],
                                                                       [],
                                                                       []}}},
                                                                    undefined,
                                                                    "10.121.1.15",
                                                                    {wm_reqdata,
                                                                     'GET',
                                                                     http,
                                                                     {1,1},
                                                                     "10.121.1.15",
                                                                     {wm_reqstate,
                                                                      #Port<0.5605830>,
                                                                      {dict,
                                                                       1,16,
                                                                       16,8,
                                                                       80,48,
                                                                       {[],[],
                                                                        [],[],
                                                                        [],[],
                                                                        [],[],
                                                                        [],[],
                                                                        [],[],
                                                                        [],[],
                                                                        [],[]},
                                                                       {{[],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [[resource_module|
                                                                           rabbit_mgmt_wm_node]],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         []}}},
                                                                      undefined,
                                                                      "10.121.1.15",
                                                                      {wm_reqdata,
                                                                       'GET',
                                                                       http,
                                                                       {1,1},
                                                                       "10.121.1.15",
                                                                       {wm_reqstate,
                                                                        #Port<0.5605830>,
                                                                        {dict,
                                                                         1,16,
                                                                         16,8,
                                                                         80,
                                                                         48,
                                                                         {[],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          []},
                                                                         {{[],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [[resource_module|
                                                                             rabbit_mgmt_wm_node]],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           []}}},
                                                                        undefined,
                                                                        "10.121.1.15",
                                                                        {wm_reqdata,
                                                                         'GET',
                                                                         http,
                                                                         {1,1},
                                                                         "10.121.1.15",
                                                                         {wm_reqstate,
                                                                          #Port<0.5605830>,
                                                                          {dict,
                                                                           1,
                                                                           16,
                                                                           16,
                                                                           8,
                                                                           80,
                                                                           48,
                                                                           {[],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            []},
                                                                           {{[],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [[resource_module|
                                                                               rabbit_mgmt_wm_node]],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             []}}},
                                                                          undefined,
                                                                          "10.121.1.15",
                                                                          {wm_reqdata,
                                                                           'GET',
                                                                           http,
                                                                           {1,
                                                                            1},
                                                                           "10.121.1.15",
                                                                           {wm_reqstate,
                                                                            #Port<0.5605830>,
                                                                            {dict,
                                                                             1,
                                                                             16,
                                                                             16,
                                                                             8,
                                                                             80,
                                                                             48,
                                                                             {[],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              []},
                                                                             {{[],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [[resource_module|
                                                                                 rabbit_mgmt_wm_node]],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               []}}},
                                                                            undefined,
                                                                            "10.121.1.15",
                                                                            {wm_reqdata,
                                                                             'GET',
                                                                             http,
                                                                             {1,
                                                                              1},
                                                                             "10.121.1.15",
                                                                             {wm_reqstate,
                                                                              #Port<0.5605830>,
                                                                              {dict,
                                                                               1,
                                                                               16,
                                                                               16,
                                                                               8,
                                                                               80,
                                                                               48,
                                                                               {[],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                []},
                                                                               {{[],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [[resource_module|
                                                                                   rabbit_mgmt_wm_node]],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 []}}},
                                                                              undefined,
                                                                              "10.121.1.15",
                                                                              {wm_reqdata,
                                                                               'GET',
                                                                               http,
                                                                               {1,
                                                                                1},
                                                                               "10.121.1.15",
                                                                               defined_on_call,
                                                                               [],
                                                                               "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                               "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                               {dict,
                                                                                1,
                                                                                16,
                                                                                16,
                                                                                8,
                                                                                80,
                                                                                48,
                                                                                {[],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 [],
                                                                                 []},
                                                                                {{[],
                                                                                  [],
                                                                                  [],
                                                                                  [],
                                                                                  [],
                                                                                  [[node,
                                                                                    114,
                                                                                    97,
                                                                                    98,
                                                                                    98,
                                                                                    105,
                                                                                    116,
                                                                                    64,
                                                                                    73,
                                                                                    65,
                                                                                    68,
                                                                                    50,
                                                                                    45,
                                                                                    78,
                                                                                    72,
                                                                                    49,
                                                                                    45,
                                                                                    82,
                                                                                    77,
                                                                                    81,
                                                                                    86,
                                                                                    48,
                                                                                    51]],
                                                                                  [],
                                                                                  [],
                                                                                  [],
                                                                                  [],
                                                                                  [],
                                                                                  [],
                                                                                  [],
                                                                                  [],
                                                                                  [],
                                                                                  []}}},
                                                                               [],
                                                                               "../../..",
                                                                               500,
                                                                               1073741824,
                                                                               67108864,
                                                                               [],
                                                                               [],
                                                                               {5,
                                                                                {"user-agent",
                                                                                 {'User-Agent',
                                                                                  "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                                 {"pragma",
                                                                                  {'Pragma',
                                                                                   "No-Cache"},
                                                                                  {"accept",
                                                                                   {'Accept',
                                                                                    "*/*"},
                                                                                   nil,
                                                                                   {"authorization",
                                                                                    {'Authorization',
                                                                                     "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                                    nil,
                                                                                    {"host",
                                                                                     {'Host',
                                                                                      "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                                     nil,
                                                                                     nil}}},
                                                                                  nil},
                                                                                 nil}},
                                                                               not_fetched_yet,
                                                                               false,
                                                                               {0,
                                                                                nil},
                                                                               <<>>,
                                                                               [],
                                                                               80,
                                                                               []},
                                                                              undefined,
                                                                              undefined,
                                                                              {wm_log_data,
                                                                               undefined,
                                                                               {1390,
                                                                                478314,
                                                                                412005},
                                                                               'GET',
                                                                               {5,
                                                                                {"user-agent",
                                                                                 {'User-Agent',
                                                                                  "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                                 {"pragma",
                                                                                  {'Pragma',
                                                                                   "No-Cache"},
                                                                                  {"accept",
                                                                                   {'Accept',
                                                                                    "*/*"},
                                                                                   nil,
                                                                                   {"authorization",
                                                                                    {'Authorization',
                                                                                     "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                                    nil,
                                                                                    {"host",
                                                                                     {'Host',
                                                                                      "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                                     nil,
                                                                                     nil}}},
                                                                                  nil},
                                                                                 nil}},
                                                                               "10.121.1.15",
                                                                               "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                               {1,
                                                                                1},
                                                                               404,
                                                                               0,
                                                                               undefined,
                                                                               undefined,
                                                                               undefined}},
                                                                             [],
                                                                             "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                             "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                             {dict,
                                                                              1,
                                                                              16,
                                                                              16,
                                                                              8,
                                                                              80,
                                                                              48,
                                                                              {[],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               [],
                                                                               []},
                                                                              {{[],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [[node,
                                                                                  114,
                                                                                  97,
                                                                                  98,
                                                                                  98,
                                                                                  105,
                                                                                  116,
                                                                                  64,
                                                                                  73,
                                                                                  65,
                                                                                  68,
                                                                                  50,
                                                                                  45,
                                                                                  78,
                                                                                  72,
                                                                                  49,
                                                                                  45,
                                                                                  82,
                                                                                  77,
                                                                                  81,
                                                                                  86,
                                                                                  48,
                                                                                  51]],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                [],
                                                                                []}}},
                                                                             [],
                                                                             "../../..",
                                                                             500,
                                                                             1073741824,
                                                                             67108864,
                                                                             [],
                                                                             [],
                                                                             {5,
                                                                              {"user-agent",
                                                                               {'User-Agent',
                                                                                "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                               {"pragma",
                                                                                {'Pragma',
                                                                                 "No-Cache"},
                                                                                {"accept",
                                                                                 {'Accept',
                                                                                  "*/*"},
                                                                                 nil,
                                                                                 {"authorization",
                                                                                  {'Authorization',
                                                                                   "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                                  nil,
                                                                                  {"host",
                                                                                   {'Host',
                                                                                    "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                                   nil,
                                                                                   nil}}},
                                                                                nil},
                                                                               nil}},
                                                                             not_fetched_yet,
                                                                             false,
                                                                             {0,
                                                                              nil},
                                                                             <<>>,
                                                                             [],
                                                                             80,
                                                                             []},
                                                                            undefined,
                                                                            undefined,
                                                                            {wm_log_data,
                                                                             undefined,
                                                                             {1390,
                                                                              478314,
                                                                              412005},
                                                                             'GET',
                                                                             {5,
                                                                              {"user-agent",
                                                                               {'User-Agent',
                                                                                "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                               {"pragma",
                                                                                {'Pragma',
                                                                                 "No-Cache"},
                                                                                {"accept",
                                                                                 {'Accept',
                                                                                  "*/*"},
                                                                                 nil,
                                                                                 {"authorization",
                                                                                  {'Authorization',
                                                                                   "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                                  nil,
                                                                                  {"host",
                                                                                   {'Host',
                                                                                    "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                                   nil,
                                                                                   nil}}},
                                                                                nil},
                                                                               nil}},
                                                                             "10.121.1.15",
                                                                             "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                             {1,
                                                                              1},
                                                                             404,
                                                                             0,
                                                                             undefined,
                                                                             undefined,
                                                                             undefined}},
                                                                           [],
                                                                           "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                           "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                           {dict,
                                                                            1,
                                                                            16,
                                                                            16,
                                                                            8,
                                                                            80,
                                                                            48,
                                                                            {[],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             [],
                                                                             []},
                                                                            {{[],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [[node,
                                                                                114,
                                                                                97,
                                                                                98,
                                                                                98,
                                                                                105,
                                                                                116,
                                                                                64,
                                                                                73,
                                                                                65,
                                                                                68,
                                                                                50,
                                                                                45,
                                                                                78,
                                                                                72,
                                                                                49,
                                                                                45,
                                                                                82,
                                                                                77,
                                                                                81,
                                                                                86,
                                                                                48,
                                                                                51]],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              [],
                                                                              []}}},
                                                                           [],
                                                                           "../../..",
                                                                           500,
                                                                           1073741824,
                                                                           67108864,
                                                                           [],
                                                                           [],
                                                                           {5,
                                                                            {"user-agent",
                                                                             {'User-Agent',
                                                                              "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                             {"pragma",
                                                                              {'Pragma',
                                                                               "No-Cache"},
                                                                              {"accept",
                                                                               {'Accept',
                                                                                "*/*"},
                                                                               nil,
                                                                               {"authorization",
                                                                                {'Authorization',
                                                                                 "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                                nil,
                                                                                {"host",
                                                                                 {'Host',
                                                                                  "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                                 nil,
                                                                                 nil}}},
                                                                              nil},
                                                                             nil}},
                                                                           not_fetched_yet,
                                                                           false,
                                                                           {0,
                                                                            nil},
                                                                           <<>>,
                                                                           [],
                                                                           80,
                                                                           []},
                                                                          undefined,
                                                                          undefined,
                                                                          {wm_log_data,
                                                                           undefined,
                                                                           {1390,
                                                                            478314,
                                                                            412005},
                                                                           'GET',
                                                                           {5,
                                                                            {"user-agent",
                                                                             {'User-Agent',
                                                                              "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                             {"pragma",
                                                                              {'Pragma',
                                                                               "No-Cache"},
                                                                              {"accept",
                                                                               {'Accept',
                                                                                "*/*"},
                                                                               nil,
                                                                               {"authorization",
                                                                                {'Authorization',
                                                                                 "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                                nil,
                                                                                {"host",
                                                                                 {'Host',
                                                                                  "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                                 nil,
                                                                                 nil}}},
                                                                              nil},
                                                                             nil}},
                                                                           "10.121.1.15",
                                                                           "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                           {1,
                                                                            1},
                                                                           404,
                                                                           0,
                                                                           undefined,
                                                                           undefined,
                                                                           undefined}},
                                                                         [],
                                                                         "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                         "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                         {dict,
                                                                          1,
                                                                          16,
                                                                          16,
                                                                          8,
                                                                          80,
                                                                          48,
                                                                          {[],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           [],
                                                                           []},
                                                                          {{[],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [[node,
                                                                              114,
                                                                              97,
                                                                              98,
                                                                              98,
                                                                              105,
                                                                              116,
                                                                              64,
                                                                              73,
                                                                              65,
                                                                              68,
                                                                              50,
                                                                              45,
                                                                              78,
                                                                              72,
                                                                              49,
                                                                              45,
                                                                              82,
                                                                              77,
                                                                              81,
                                                                              86,
                                                                              48,
                                                                              51]],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            [],
                                                                            []}}},
                                                                         [],
                                                                         "../../..",
                                                                         500,
                                                                         1073741824,
                                                                         67108864,
                                                                         [],
                                                                         [],
                                                                         {5,
                                                                          {"user-agent",
                                                                           {'User-Agent',
                                                                            "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                           {"pragma",
                                                                            {'Pragma',
                                                                             "No-Cache"},
                                                                            {"accept",
                                                                             {'Accept',
                                                                              "*/*"},
                                                                             nil,
                                                                             {"authorization",
                                                                              {'Authorization',
                                                                               "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                              nil,
                                                                              {"host",
                                                                               {'Host',
                                                                                "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                               nil,
                                                                               nil}}},
                                                                            nil},
                                                                           nil}},
                                                                         not_fetched_yet,
                                                                         false,
                                                                         {0,
                                                                          nil},
                                                                         <<>>,
                                                                         [],
                                                                         80,
                                                                         []},
                                                                        undefined,
                                                                        undefined,
                                                                        {wm_log_data,
                                                                         undefined,
                                                                         {1390,
                                                                          478314,
                                                                          412005},
                                                                         'GET',
                                                                         {5,
                                                                          {"user-agent",
                                                                           {'User-Agent',
                                                                            "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                           {"pragma",
                                                                            {'Pragma',
                                                                             "No-Cache"},
                                                                            {"accept",
                                                                             {'Accept',
                                                                              "*/*"},
                                                                             nil,
                                                                             {"authorization",
                                                                              {'Authorization',
                                                                               "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                              nil,
                                                                              {"host",
                                                                               {'Host',
                                                                                "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                               nil,
                                                                               nil}}},
                                                                            nil},
                                                                           nil}},
                                                                         "10.121.1.15",
                                                                         "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                         {1,1},
                                                                         404,
                                                                         0,
                                                                         undefined,
                                                                         undefined,
                                                                         undefined}},
                                                                       [],
                                                                       "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                       "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                       {dict,
                                                                        1,16,
                                                                        16,8,
                                                                        80,48,
                                                                        {[],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         [],
                                                                         []},
                                                                        {{[],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [[node,
                                                                            114,
                                                                            97,
                                                                            98,
                                                                            98,
                                                                            105,
                                                                            116,
                                                                            64,
                                                                            73,
                                                                            65,
                                                                            68,
                                                                            50,
                                                                            45,
                                                                            78,
                                                                            72,
                                                                            49,
                                                                            45,
                                                                            82,
                                                                            77,
                                                                            81,
                                                                            86,
                                                                            48,
                                                                            51]],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          [],
                                                                          []}}},
                                                                       [],
                                                                       "../../..",
                                                                       500,
                                                                       1073741824,
                                                                       67108864,
                                                                       [],[],
                                                                       {5,
                                                                        {"user-agent",
                                                                         {'User-Agent',
                                                                          "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                         {"pragma",
                                                                          {'Pragma',
                                                                           "No-Cache"},
                                                                          {"accept",
                                                                           {'Accept',
                                                                            "*/*"},
                                                                           nil,
                                                                           {"authorization",
                                                                            {'Authorization',
                                                                             "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                            nil,
                                                                            {"host",
                                                                             {'Host',
                                                                              "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                             nil,
                                                                             nil}}},
                                                                          nil},
                                                                         nil}},
                                                                       not_fetched_yet,
                                                                       false,
                                                                       {0,nil},
                                                                       <<>>,
                                                                       [],80,
                                                                       []},
                                                                      undefined,
                                                                      undefined,
                                                                      {wm_log_data,
                                                                       undefined,
                                                                       {1390,
                                                                        478314,
                                                                        412005},
                                                                       'GET',
                                                                       {5,
                                                                        {"user-agent",
                                                                         {'User-Agent',
                                                                          "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                         {"pragma",
                                                                          {'Pragma',
                                                                           "No-Cache"},
                                                                          {"accept",
                                                                           {'Accept',
                                                                            "*/*"},
                                                                           nil,
                                                                           {"authorization",
                                                                            {'Authorization',
                                                                             "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                            nil,
                                                                            {"host",
                                                                             {'Host',
                                                                              "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                             nil,
                                                                             nil}}},
                                                                          nil},
                                                                         nil}},
                                                                       "10.121.1.15",
                                                                       "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                       {1,1},
                                                                       404,0,
                                                                       undefined,
                                                                       undefined,
                                                                       undefined}},
                                                                     [],
                                                                     "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                     "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                     {dict,1,
                                                                      16,16,8,
                                                                      80,48,
                                                                      {[],[],
                                                                       [],[],
                                                                       [],[],
                                                                       [],[],
                                                                       [],[],
                                                                       [],[],
                                                                       [],[],
                                                                       [],[]},
                                                                      {{[],[],
                                                                        [],[],
                                                                        [],
                                                                        [[node,
                                                                          114,
                                                                          97,
                                                                          98,
                                                                          98,
                                                                          105,
                                                                          116,
                                                                          64,
                                                                          73,
                                                                          65,
                                                                          68,
                                                                          50,
                                                                          45,
                                                                          78,
                                                                          72,
                                                                          49,
                                                                          45,
                                                                          82,
                                                                          77,
                                                                          81,
                                                                          86,
                                                                          48,
                                                                          51]],
                                                                        [],[],
                                                                        [],[],
                                                                        [],[],
                                                                        [],[],
                                                                        [],
                                                                        []}}},
                                                                     [],
                                                                     "../../..",
                                                                     500,
                                                                     1073741824,
                                                                     67108864,
                                                                     [],[],
                                                                     {5,
                                                                      {"user-agent",
                                                                       {'User-Agent',
                                                                        "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                       {"pragma",
                                                                        {'Pragma',
                                                                         "No-Cache"},
                                                                        {"accept",
                                                                         {'Accept',
                                                                          "*/*"},
                                                                         nil,
                                                                         {"authorization",
                                                                          {'Authorization',
                                                                           "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                          nil,
                                                                          {"host",
                                                                           {'Host',
                                                                            "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                           nil,
                                                                           nil}}},
                                                                        nil},
                                                                       nil}},
                                                                     not_fetched_yet,
                                                                     false,
                                                                     {0,nil},
                                                                     <<>>,[],
                                                                     80,[]},
                                                                    undefined,
                                                                    undefined,
                                                                    {wm_log_data,
                                                                     undefined,
                                                                     {1390,
                                                                      478314,
                                                                      412005},
                                                                     'GET',
                                                                     {5,
                                                                      {"user-agent",
                                                                       {'User-Agent',
                                                                        "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                       {"pragma",
                                                                        {'Pragma',
                                                                         "No-Cache"},
                                                                        {"accept",
                                                                         {'Accept',
                                                                          "*/*"},
                                                                         nil,
                                                                         {"authorization",
                                                                          {'Authorization',
                                                                           "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                          nil,
                                                                          {"host",
                                                                           {'Host',
                                                                            "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                           nil,
                                                                           nil}}},
                                                                        nil},
                                                                       nil}},
                                                                     "10.121.1.15",
                                                                     "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                     {1,1},
                                                                     404,0,
                                                                     undefined,
                                                                     undefined,
                                                                     undefined}},
                                                                   [],
                                                                   "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                   "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                   {dict,1,
                                                                    16,16,8,
                                                                    80,48,
                                                                    {[],[],[],
                                                                     [],[],[],
                                                                     [],[],[],
                                                                     [],[],[],
                                                                     [],[],[],
                                                                     []},
                                                                    {{[],[],
                                                                      [],[],
                                                                      [],
                                                                      [[node,
                                                                        114,
                                                                        97,98,
                                                                        98,
                                                                        105,
                                                                        116,
                                                                        64,73,
                                                                        65,68,
                                                                        50,45,
                                                                        78,72,
                                                                        49,45,
                                                                        82,77,
                                                                        81,86,
                                                                        48,
                                                                        51]],
                                                                      [],[],
                                                                      [],[],
                                                                      [],[],
                                                                      [],[],
                                                                      [],[]}}},
                                                                   [],
                                                                   "../../..",
                                                                   500,
                                                                   1073741824,
                                                                   67108864,
                                                                   [],[],
                                                                   {5,
                                                                    {"user-agent",
                                                                     {'User-Agent',
                                                                      "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                     {"pragma",
                                                                      {'Pragma',
                                                                       "No-Cache"},
                                                                      {"accept",
                                                                       {'Accept',
                                                                        "*/*"},
                                                                       nil,
                                                                       {"authorization",
                                                                        {'Authorization',
                                                                         "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                        nil,
                                                                        {"host",
                                                                         {'Host',
                                                                          "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                         nil,
                                                                         nil}}},
                                                                      nil},
                                                                     nil}},
                                                                   not_fetched_yet,
                                                                   false,
                                                                   {0,nil},
                                                                   <<>>,[],80,
                                                                   []},
                                                                  undefined,
                                                                  undefined,
                                                                  {wm_log_data,
                                                                   undefined,
                                                                   {1390,
                                                                    478314,
                                                                    412005},
                                                                   'GET',
                                                                   {5,
                                                                    {"user-agent",
                                                                     {'User-Agent',
                                                                      "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                     {"pragma",
                                                                      {'Pragma',
                                                                       "No-Cache"},
                                                                      {"accept",
                                                                       {'Accept',
                                                                        "*/*"},
                                                                       nil,
                                                                       {"authorization",
                                                                        {'Authorization',
                                                                         "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                        nil,
                                                                        {"host",
                                                                         {'Host',
                                                                          "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                         nil,
                                                                         nil}}},
                                                                      nil},
                                                                     nil}},
                                                                   "10.121.1.15",
                                                                   "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                   {1,1},
                                                                   404,0,
                                                                   undefined,
                                                                   undefined,
                                                                   undefined}},
                                                                 [],
                                                                 "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                 "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                 {dict,1,16,
                                                                  16,8,80,48,
                                                                  {[],[],[],
                                                                   [],[],[],
                                                                   [],[],[],
                                                                   [],[],[],
                                                                   [],[],[],
                                                                   []},
                                                                  {{[],[],[],
                                                                    [],[],
                                                                    [[node,
                                                                      114,97,
                                                                      98,98,
                                                                      105,116,
                                                                      64,73,
                                                                      65,68,
                                                                      50,45,
                                                                      78,72,
                                                                      49,45,
                                                                      82,77,
                                                                      81,86,
                                                                      48,51]],
                                                                    [],[],[],
                                                                    [],[],[],
                                                                    [],[],[],
                                                                    []}}},
                                                                 [],
                                                                 "../../..",
                                                                 500,
                                                                 1073741824,
                                                                 67108864,[],
                                                                 [],
                                                                 {5,
                                                                  {"user-agent",
                                                                   {'User-Agent',
                                                                    "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                   {"pragma",
                                                                    {'Pragma',
                                                                     "No-Cache"},
                                                                    {"accept",
                                                                     {'Accept',
                                                                      "*/*"},
                                                                     nil,
                                                                     {"authorization",
                                                                      {'Authorization',
                                                                       "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                      nil,
                                                                      {"host",
                                                                       {'Host',
                                                                        "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                       nil,
                                                                       nil}}},
                                                                    nil},
                                                                   nil}},
                                                                 not_fetched_yet,
                                                                 false,
                                                                 {0,nil},
                                                                 <<>>,[],80,
                                                                 []},
                                                                undefined,
                                                                undefined,
                                                                {wm_log_data,
                                                                 undefined,
                                                                 {1390,478314,
                                                                  412005},
                                                                 'GET',
                                                                 {5,
                                                                  {"user-agent",
                                                                   {'User-Agent',
                                                                    "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                   {"pragma",
                                                                    {'Pragma',
                                                                     "No-Cache"},
                                                                    {"accept",
                                                                     {'Accept',
                                                                      "*/*"},
                                                                     nil,
                                                                     {"authorization",
                                                                      {'Authorization',
                                                                       "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                      nil,
                                                                      {"host",
                                                                       {'Host',
                                                                        "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                       nil,
                                                                       nil}}},
                                                                    nil},
                                                                   nil}},
                                                                 "10.121.1.15",
                                                                 "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                                 {1,1},
                                                                 404,0,
                                                                 undefined,
                                                                 undefined,
                                                                 undefined}},
                                                               [],
                                                               "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                               "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                               {dict,1,16,16,
                                                                8,80,48,
                                                                {[],[],[],[],
                                                                 [],[],[],[],
                                                                 [],[],[],[],
                                                                 [],[],[],[]},
                                                                {{[],[],[],[],
                                                                  [],
                                                                  [[node,114,
                                                                    97,98,98,
                                                                    105,116,
                                                                    64,73,65,
                                                                    68,50,45,
                                                                    78,72,49,
                                                                    45,82,77,
                                                                    81,86,48,
                                                                    51]],
                                                                  [],[],[],[],
                                                                  [],[],[],[],
                                                                  [],[]}}},
                                                               [],"../../..",
                                                               500,1073741824,
                                                               67108864,[],[],
                                                               {5,
                                                                {"user-agent",
                                                                 {'User-Agent',
                                                                  "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                 {"pragma",
                                                                  {'Pragma',
                                                                   "No-Cache"},
                                                                  {"accept",
                                                                   {'Accept',
                                                                    "*/*"},
                                                                   nil,
                                                                   {"authorization",
                                                                    {'Authorization',
                                                                     "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                    nil,
                                                                    {"host",
                                                                     {'Host',
                                                                      "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                     nil,
                                                                     nil}}},
                                                                  nil},
                                                                 nil}},
                                                               not_fetched_yet,
                                                               false,
                                                               {0,nil},
                                                               <<>>,[],80,[]},
                                                              undefined,
                                                              undefined,
                                                              {wm_log_data,
                                                               undefined,
                                                               {1390,478314,
                                                                412005},
                                                               'GET',
                                                               {5,
                                                                {"user-agent",
                                                                 {'User-Agent',
                                                                  "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                                 {"pragma",
                                                                  {'Pragma',
                                                                   "No-Cache"},
                                                                  {"accept",
                                                                   {'Accept',
                                                                    "*/*"},
                                                                   nil,
                                                                   {"authorization",
                                                                    {'Authorization',
                                                                     "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                    nil,
                                                                    {"host",
                                                                     {'Host',
                                                                      "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                     nil,
                                                                     nil}}},
                                                                  nil},
                                                                 nil}},
                                                               "10.121.1.15",
                                                               "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                               {1,1},
                                                               404,0,
                                                               undefined,
                                                               undefined,
                                                               undefined}},
                                                             [],
                                                             "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                             "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                             {dict,1,16,16,8,
                                                              80,48,
                                                              {[],[],[],[],[],
                                                               [],[],[],[],[],
                                                               [],[],[],[],[],
                                                               []},
                                                              {{[],[],[],[],
                                                                [],
                                                                [[node,114,97,
                                                                  98,98,105,
                                                                  116,64,73,
                                                                  65,68,50,45,
                                                                  78,72,49,45,
                                                                  82,77,81,86,
                                                                  48,51]],
                                                                [],[],[],[],
                                                                [],[],[],[],
                                                                [],[]}}},
                                                             [],"../../..",
                                                             500,1073741824,
                                                             67108864,[],[],
                                                             {5,
                                                              {"user-agent",
                                                               {'User-Agent',
                                                                "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                               {"pragma",
                                                                {'Pragma',
                                                                 "No-Cache"},
                                                                {"accept",
                                                                 {'Accept',
                                                                  "*/*"},
                                                                 nil,
                                                                 {"authorization",
                                                                  {'Authorization',
                                                                   "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                  nil,
                                                                  {"host",
                                                                   {'Host',
                                                                    "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                   nil,nil}}},
                                                                nil},
                                                               nil}},
                                                             not_fetched_yet,
                                                             false,
                                                             {0,nil},
                                                             <<>>,[],80,[]},
                                                            undefined,
                                                            undefined,
                                                            {wm_log_data,
                                                             undefined,
                                                             {1390,478314,
                                                              412005},
                                                             'GET',
                                                             {5,
                                                              {"user-agent",
                                                               {'User-Agent',
                                                                "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                               {"pragma",
                                                                {'Pragma',
                                                                 "No-Cache"},
                                                                {"accept",
                                                                 {'Accept',
                                                                  "*/*"},
                                                                 nil,
                                                                 {"authorization",
                                                                  {'Authorization',
                                                                   "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                  nil,
                                                                  {"host",
                                                                   {'Host',
                                                                    "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                   nil,nil}}},
                                                                nil},
                                                               nil}},
                                                             "10.121.1.15",
                                                             "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                             {1,1},
                                                             404,0,undefined,
                                                             undefined,
                                                             undefined}},
                                                           [],
                                                           "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                           "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                           {dict,1,16,16,8,
                                                            80,48,
                                                            {[],[],[],[],[],
                                                             [],[],[],[],[],
                                                             [],[],[],[],[],
                                                             []},
                                                            {{[],[],[],[],[],
                                                              [[node,114,97,
                                                                98,98,105,116,
                                                                64,73,65,68,
                                                                50,45,78,72,
                                                                49,45,82,77,
                                                                81,86,48,51]],
                                                              [],[],[],[],[],
                                                              [],[],[],[],
                                                              []}}},
                                                           [],"../../..",500,
                                                           1073741824,
                                                           67108864,[],[],
                                                           {5,
                                                            {"user-agent",
                                                             {'User-Agent',
                                                              "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                             {"pragma",
                                                              {'Pragma',
                                                               "No-Cache"},
                                                              {"accept",
                                                               {'Accept',
                                                                "*/*"},
                                                               nil,
                                                               {"authorization",
                                                                {'Authorization',
                                                                 "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                nil,
                                                                {"host",
                                                                 {'Host',
                                                                  "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                 nil,nil}}},
                                                              nil},
                                                             nil}},
                                                           not_fetched_yet,
                                                           false,
                                                           {0,nil},
                                                           <<>>,[],80,[]},
                                                          undefined,undefined,
                                                          {wm_log_data,
                                                           undefined,
                                                           {1390,478314,
                                                            412005},
                                                           'GET',
                                                           {5,
                                                            {"user-agent",
                                                             {'User-Agent',
                                                              "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                             {"pragma",
                                                              {'Pragma',
                                                               "No-Cache"},
                                                              {"accept",
                                                               {'Accept',
                                                                "*/*"},
                                                               nil,
                                                               {"authorization",
                                                                {'Authorization',
                                                                 "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                                nil,
                                                                {"host",
                                                                 {'Host',
                                                                  "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                                 nil,nil}}},
                                                              nil},
                                                             nil}},
                                                           "10.121.1.15",
                                                           "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                           {1,1},
                                                           404,0,undefined,
                                                           undefined,
                                                           undefined}},
                                                         [],
                                                         "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                         "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                         {dict,1,16,16,8,80,
                                                          48,
                                                          {[],[],[],[],[],[],
                                                           [],[],[],[],[],[],
                                                           [],[],[],[]},
                                                          {{[],[],[],[],[],
                                                            [[node,114,97,98,
                                                              98,105,116,64,
                                                              73,65,68,50,45,
                                                              78,72,49,45,82,
                                                              77,81,86,48,51]],
                                                            [],[],[],[],[],[],
                                                            [],[],[],[]}}},
                                                         [],"../../..",500,
                                                         1073741824,67108864,
                                                         [],[],
                                                         {5,
                                                          {"user-agent",
                                                           {'User-Agent',
                                                            "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                           {"pragma",
                                                            {'Pragma',
                                                             "No-Cache"},
                                                            {"accept",
                                                             {'Accept',"*/*"},
                                                             nil,
                                                             {"authorization",
                                                              {'Authorization',
                                                               "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                              nil,
                                                              {"host",
                                                               {'Host',
                                                                "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                               nil,nil}}},
                                                            nil},
                                                           nil}},
                                                         not_fetched_yet,
                                                         false,
                                                         {0,nil},
                                                         <<>>,[],80,[]},
                                                        undefined,undefined,
                                                        {wm_log_data,
                                                         undefined,
                                                         {1390,478314,412005},
                                                         'GET',
                                                         {5,
                                                          {"user-agent",
                                                           {'User-Agent',
                                                            "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                           {"pragma",
                                                            {'Pragma',
                                                             "No-Cache"},
                                                            {"accept",
                                                             {'Accept',"*/*"},
                                                             nil,
                                                             {"authorization",
                                                              {'Authorization',
                                                               "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                              nil,
                                                              {"host",
                                                               {'Host',
                                                                "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                               nil,nil}}},
                                                            nil},
                                                           nil}},
                                                         "10.121.1.15",
                                                         "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                         {1,1},
                                                         404,0,undefined,
                                                         undefined,undefined}},
                                                       [],
                                                       "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                       "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                       {dict,1,16,16,8,80,48,
                                                        {[],[],[],[],[],[],[],
                                                         [],[],[],[],[],[],[],
                                                         [],[]},
                                                        {{[],[],[],[],[],
                                                          [[node,114,97,98,98,
                                                            105,116,64,73,65,
                                                            68,50,45,78,72,49,
                                                            45,82,77,81,86,48,
                                                            51]],
                                                          [],[],[],[],[],[],
                                                          [],[],[],[]}}},
                                                       [],"../../..",500,
                                                       1073741824,67108864,[],
                                                       [],
                                                       {5,
                                                        {"user-agent",
                                                         {'User-Agent',
                                                          "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                         {"pragma",
                                                          {'Pragma',
                                                           "No-Cache"},
                                                          {"accept",
                                                           {'Accept',"*/*"},
                                                           nil,
                                                           {"authorization",
                                                            {'Authorization',
                                                             "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                            nil,
                                                            {"host",
                                                             {'Host',
                                                              "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                             nil,nil}}},
                                                          nil},
                                                         nil}},
                                                       not_fetched_yet,false,
                                                       {0,nil},
                                                       <<>>,[],80,[]},
                                                      undefined,undefined,
                                                      {wm_log_data,undefined,
                                                       {1390,478314,412005},
                                                       'GET',
                                                       {5,
                                                        {"user-agent",
                                                         {'User-Agent',
                                                          "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                         {"pragma",
                                                          {'Pragma',
                                                           "No-Cache"},
                                                          {"accept",
                                                           {'Accept',"*/*"},
                                                           nil,
                                                           {"authorization",
                                                            {'Authorization',
                                                             "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                            nil,
                                                            {"host",
                                                             {'Host',
                                                              "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                             nil,nil}}},
                                                          nil},
                                                         nil}},
                                                       "10.121.1.15",
                                                       "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                       {1,1},
                                                       404,0,undefined,
                                                       undefined,undefined}},
                                                     [],
                                                     "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                     "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                     {dict,1,16,16,8,80,48,
                                                      {[],[],[],[],[],[],[],
                                                       [],[],[],[],[],[],[],
                                                       [],[]},
                                                      {{[],[],[],[],[],
                                                        [[node,114,97,98,98,
                                                          105,116,64,73,65,68,
                                                          50,45,78,72,49,45,
                                                          82,77,81,86,48,51]],
                                                        [],[],[],[],[],[],[],
                                                        [],[],[]}}},
                                                     [],"../../..",500,
                                                     1073741824,67108864,[],
                                                     [],
                                                     {5,
                                                      {"user-agent",
                                                       {'User-Agent',
                                                        "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                       {"pragma",
                                                        {'Pragma',"No-Cache"},
                                                        {"accept",
                                                         {'Accept',"*/*"},
                                                         nil,
                                                         {"authorization",
                                                          {'Authorization',
                                                           "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                          nil,
                                                          {"host",
                                                           {'Host',
                                                            "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                           nil,nil}}},
                                                        nil},
                                                       nil}},
                                                     not_fetched_yet,false,
                                                     {0,nil},
                                                     <<>>,[],80,[]},
                                                    undefined,undefined,
                                                    {wm_log_data,undefined,
                                                     {1390,478314,412005},
                                                     'GET',
                                                     {5,
                                                      {"user-agent",
                                                       {'User-Agent',
                                                        "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                       {"pragma",
                                                        {'Pragma',"No-Cache"},
                                                        {"accept",
                                                         {'Accept',"*/*"},
                                                         nil,
                                                         {"authorization",
                                                          {'Authorization',
                                                           "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                          nil,
                                                          {"host",
                                                           {'Host',
                                                            "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                           nil,nil}}},
                                                        nil},
                                                       nil}},
                                                     "10.121.1.15",
                                                     "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                     {1,1},
                                                     404,0,undefined,
                                                     undefined,undefined}},
                                                   [],
                                                   "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                   "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                   {dict,1,16,16,8,80,48,
                                                    {[],[],[],[],[],[],[],[],
                                                     [],[],[],[],[],[],[],[]},
                                                    {{[],[],[],[],[],
                                                      [[node,114,97,98,98,105,
                                                        116,64,73,65,68,50,45,
                                                        78,72,49,45,82,77,81,
                                                        86,48,51]],
                                                      [],[],[],[],[],[],[],[],
                                                      [],[]}}},
                                                   [],"../../..",500,
                                                   1073741824,67108864,[],[],
                                                   {5,
                                                    {"user-agent",
                                                     {'User-Agent',
                                                      "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                     {"pragma",
                                                      {'Pragma',"No-Cache"},
                                                      {"accept",
                                                       {'Accept',"*/*"},
                                                       nil,
                                                       {"authorization",
                                                        {'Authorization',
                                                         "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                        nil,
                                                        {"host",
                                                         {'Host',
                                                          "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                         nil,nil}}},
                                                      nil},
                                                     nil}},
                                                   not_fetched_yet,false,
                                                   {1,
                                                    {"content-type",
                                                     {"Content-Type",
                                                      "application/json"},
                                                     nil,nil}},
                                                   <<>>,[],80,[]},
                                                  undefined,undefined,
                                                  {wm_log_data,undefined,
                                                   {1390,478314,412005},
                                                   'GET',
                                                   {5,
                                                    {"user-agent",
                                                     {'User-Agent',
                                                      "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                     {"pragma",
                                                      {'Pragma',"No-Cache"},
                                                      {"accept",
                                                       {'Accept',"*/*"},
                                                       nil,
                                                       {"authorization",
                                                        {'Authorization',
                                                         "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                        nil,
                                                        {"host",
                                                         {'Host',
                                                          "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                         nil,nil}}},
                                                      nil},
                                                     nil}},
                                                   "10.121.1.15",
                                                   "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                   {1,1},
                                                   404,0,undefined,undefined,
                                                   undefined}},
                                                 [],
                                                 "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                 "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                 {dict,1,16,16,8,80,48,
                                                  {[],[],[],[],[],[],[],[],[],
                                                   [],[],[],[],[],[],[]},
                                                  {{[],[],[],[],[],
                                                    [[node,114,97,98,98,105,
                                                      116,64,73,65,68,50,45,
                                                      78,72,49,45,82,77,81,86,
                                                      48,51]],
                                                    [],[],[],[],[],[],[],[],
                                                    [],[]}}},
                                                 [],"../../..",500,1073741824,
                                                 67108864,[],[],
                                                 {5,
                                                  {"user-agent",
                                                   {'User-Agent',
                                                    "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                   {"pragma",
                                                    {'Pragma',"No-Cache"},
                                                    {"accept",
                                                     {'Accept',"*/*"},
                                                     nil,
                                                     {"authorization",
                                                      {'Authorization',
                                                       "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                      nil,
                                                      {"host",
                                                       {'Host',
                                                        "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                       nil,nil}}},
                                                    nil},
                                                   nil}},
                                                 not_fetched_yet,false,
                                                 {1,
                                                  {"content-type",
                                                   {"Content-Type",
                                                    "application/json"},
                                                   nil,nil}},
                                                 <<>>,[],80,[]},
                                                undefined,undefined,
                                                {wm_log_data,undefined,
                                                 {1390,478314,412005},
                                                 'GET',
                                                 {5,
                                                  {"user-agent",
                                                   {'User-Agent',
                                                    "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                   {"pragma",
                                                    {'Pragma',"No-Cache"},
                                                    {"accept",
                                                     {'Accept',"*/*"},
                                                     nil,
                                                     {"authorization",
                                                      {'Authorization',
                                                       "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                      nil,
                                                      {"host",
                                                       {'Host',
                                                        "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                       nil,nil}}},
                                                    nil},
                                                   nil}},
                                                 "10.121.1.15",
                                                 "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                                 {1,1},
                                                 404,0,undefined,undefined,
                                                 undefined}},
                                               [],
                                               "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                               "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                               {dict,1,16,16,8,80,48,
                                                {[],[],[],[],[],[],[],[],[],
                                                 [],[],[],[],[],[],[]},
                                                {{[],[],[],[],[],
                                                  [[node,114,97,98,98,105,116,
                                                    64,73,65,68,50,45,78,72,
                                                    49,45,82,77,81,86,48,51]],
                                                  [],[],[],[],[],[],[],[],[],
                                                  []}}},
                                               [],"../../..",500,1073741824,
                                               67108864,[],[],
                                               {5,
                                                {"user-agent",
                                                 {'User-Agent',
                                                  "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                 {"pragma",
                                                  {'Pragma',"No-Cache"},
                                                  {"accept",
                                                   {'Accept',"*/*"},
                                                   nil,
                                                   {"authorization",
                                                    {'Authorization',
                                                     "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                    nil,
                                                    {"host",
                                                     {'Host',
                                                      "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                     nil,nil}}},
                                                  nil},
                                                 nil}},
                                               not_fetched_yet,false,
                                               {1,
                                                {"content-type",
                                                 {"Content-Type",
                                                  "application/json"},
                                                 nil,nil}},
                                               <<>>,[],80,[]},
                                              undefined,undefined,
                                              {wm_log_data,undefined,
                                               {1390,478314,412005},
                                               'GET',
                                               {5,
                                                {"user-agent",
                                                 {'User-Agent',
                                                  "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                                 {"pragma",
                                                  {'Pragma',"No-Cache"},
                                                  {"accept",
                                                   {'Accept',"*/*"},
                                                   nil,
                                                   {"authorization",
                                                    {'Authorization',
                                                     "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                    nil,
                                                    {"host",
                                                     {'Host',
                                                      "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                     nil,nil}}},
                                                  nil},
                                                 nil}},
                                               "10.121.1.15",
                                               "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                               {1,1},
                                               404,0,undefined,undefined,
                                               undefined}},
                                             [],
                                             "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                             "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                             {dict,1,16,16,8,80,48,
                                              {[],[],[],[],[],[],[],[],[],[],
                                               [],[],[],[],[],[]},
                                              {{[],[],[],[],[],
                                                [[node,114,97,98,98,105,116,
                                                  64,73,65,68,50,45,78,72,49,
                                                  45,82,77,81,86,48,51]],
                                                [],[],[],[],[],[],[],[],[],
                                                []}}},
                                             [],"../../..",500,1073741824,
                                             67108864,[],[],
                                             {5,
                                              {"user-agent",
                                               {'User-Agent',
                                                "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                               {"pragma",
                                                {'Pragma',"No-Cache"},
                                                {"accept",
                                                 {'Accept',"*/*"},
                                                 nil,
                                                 {"authorization",
                                                  {'Authorization',
                                                   "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                  nil,
                                                  {"host",
                                                   {'Host',
                                                    "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                   nil,nil}}},
                                                nil},
                                               nil}},
                                             not_fetched_yet,false,
                                             {1,
                                              {"content-type",
                                               {"Content-Type",
                                                "application/json"},
                                               nil,nil}},
                                             <<>>,[],80,[]},
                                            undefined,undefined,
                                            {wm_log_data,undefined,
                                             {1390,478314,412005},
                                             'GET',
                                             {5,
                                              {"user-agent",
                                               {'User-Agent',
                                                "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                               {"pragma",
                                                {'Pragma',"No-Cache"},
                                                {"accept",
                                                 {'Accept',"*/*"},
                                                 nil,
                                                 {"authorization",
                                                  {'Authorization',
                                                   "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                  nil,
                                                  {"host",
                                                   {'Host',
                                                    "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                   nil,nil}}},
                                                nil},
                                               nil}},
                                             "10.121.1.15",
                                             "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                             {1,1},
                                             404,0,undefined,undefined,
                                             undefined}},
                                           [],
                                           "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                           "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                           {dict,1,16,16,8,80,48,
                                            {[],[],[],[],[],[],[],[],[],[],[],
                                             [],[],[],[],[]},
                                            {{[],[],[],[],[],
                                              [[node,114,97,98,98,105,116,64,
                                                73,65,68,50,45,78,72,49,45,82,
                                                77,81,86,48,51]],
                                              [],[],[],[],[],[],[],[],[],[]}}},
                                           [],"../../..",500,1073741824,
                                           67108864,[],[],
                                           {5,
                                            {"user-agent",
                                             {'User-Agent',
                                              "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                             {"pragma",
                                              {'Pragma',"No-Cache"},
                                              {"accept",
                                               {'Accept',"*/*"},
                                               nil,
                                               {"authorization",
                                                {'Authorization',
                                                 "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                nil,
                                                {"host",
                                                 {'Host',
                                                  "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                 nil,nil}}},
                                              nil},
                                             nil}},
                                           not_fetched_yet,false,
                                           {1,
                                            {"content-type",
                                             {"Content-Type",
                                              "application/json"},
                                             nil,nil}},
                                           <<>>,[],80,[]},
                                          undefined,undefined,
                                          {wm_log_data,undefined,
                                           {1390,478314,412005},
                                           'GET',
                                           {5,
                                            {"user-agent",
                                             {'User-Agent',
                                              "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                             {"pragma",
                                              {'Pragma',"No-Cache"},
                                              {"accept",
                                               {'Accept',"*/*"},
                                               nil,
                                               {"authorization",
                                                {'Authorization',
                                                 "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                                nil,
                                                {"host",
                                                 {'Host',
                                                  "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                                 nil,nil}}},
                                              nil},
                                             nil}},
                                           "10.121.1.15",
                                           "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                           {1,1},
                                           404,0,undefined,undefined,
                                           undefined}},
                                         [],
                                         "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                         "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                         {dict,1,16,16,8,80,48,
                                          {[],[],[],[],[],[],[],[],[],[],[],
                                           [],[],[],[],[]},
                                          {{[],[],[],[],[],
                                            [[node,114,97,98,98,105,116,64,73,
                                              65,68,50,45,78,72,49,45,82,77,
                                              81,86,48,51]],
                                            [],[],[],[],[],[],[],[],[],[]}}},
                                         [],"../../..",500,1073741824,
                                         67108864,[],[],
                                         {5,
                                          {"user-agent",
                                           {'User-Agent',
                                            "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                           {"pragma",
                                            {'Pragma',"No-Cache"},
                                            {"accept",
                                             {'Accept',"*/*"},
                                             nil,
                                             {"authorization",
                                              {'Authorization',
                                               "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                              nil,
                                              {"host",
                                               {'Host',
                                                "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                               nil,nil}}},
                                            nil},
                                           nil}},
                                         not_fetched_yet,false,
                                         {1,
                                          {"content-type",
                                           {"Content-Type","application/json"},
                                           nil,nil}},
                                         <<>>,[],80,[]},
                                        undefined,undefined,
                                        {wm_log_data,undefined,
                                         {1390,478314,412005},
                                         'GET',
                                         {5,
                                          {"user-agent",
                                           {'User-Agent',
                                            "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                           {"pragma",
                                            {'Pragma',"No-Cache"},
                                            {"accept",
                                             {'Accept',"*/*"},
                                             nil,
                                             {"authorization",
                                              {'Authorization',
                                               "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                              nil,
                                              {"host",
                                               {'Host',
                                                "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                               nil,nil}}},
                                            nil},
                                           nil}},
                                         "10.121.1.15",
                                         "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                         {1,1},
                                         404,0,undefined,undefined,undefined}},
                                       [],"/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                       "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                       {dict,1,16,16,8,80,48,
                                        {[],[],[],[],[],[],[],[],[],[],[],[],
                                         [],[],[],[]},
                                        {{[],[],[],[],[],
                                          [[node,114,97,98,98,105,116,64,73,
                                            65,68,50,45,78,72,49,45,82,77,81,
                                            86,48,51]],
                                          [],[],[],[],[],[],[],[],[],[]}}},
                                       [],"../../..",500,1073741824,67108864,
                                       [],[],
                                       {5,
                                        {"user-agent",
                                         {'User-Agent',
                                          "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                         {"pragma",
                                          {'Pragma',"No-Cache"},
                                          {"accept",
                                           {'Accept',"*/*"},
                                           nil,
                                           {"authorization",
                                            {'Authorization',
                                             "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                            nil,
                                            {"host",
                                             {'Host',
                                              "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                             nil,nil}}},
                                          nil},
                                         nil}},
                                       not_fetched_yet,false,
                                       {1,
                                        {"content-type",
                                         {"Content-Type","application/json"},
                                         nil,nil}},
                                       <<>>,[],80,[]},
                                      undefined,undefined,
                                      {wm_log_data,undefined,
                                       {1390,478314,412005},
                                       'GET',
                                       {5,
                                        {"user-agent",
                                         {'User-Agent',
                                          "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                         {"pragma",
                                          {'Pragma',"No-Cache"},
                                          {"accept",
                                           {'Accept',"*/*"},
                                           nil,
                                           {"authorization",
                                            {'Authorization',
                                             "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                            nil,
                                            {"host",
                                             {'Host',
                                              "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                             nil,nil}}},
                                          nil},
                                         nil}},
                                       "10.121.1.15",
                                       "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                       {1,1},
                                       404,0,undefined,undefined,undefined}},
                                     [],"/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                     "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                     {dict,1,16,16,8,80,48,
                                      {[],[],[],[],[],[],[],[],[],[],[],[],[],
                                       [],[],[]},
                                      {{[],[],[],[],[],
                                        [[node,114,97,98,98,105,116,64,73,65,
                                          68,50,45,78,72,49,45,82,77,81,86,48,
                                          51]],
                                        [],[],[],[],[],[],[],[],[],[]}}},
                                     [],"../../..",500,1073741824,67108864,[],
                                     [],
                                     {5,
                                      {"user-agent",
                                       {'User-Agent',
                                        "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                       {"pragma",
                                        {'Pragma',"No-Cache"},
                                        {"accept",
                                         {'Accept',"*/*"},
                                         nil,
                                         {"authorization",
                                          {'Authorization',
                                           "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                          nil,
                                          {"host",
                                           {'Host',
                                            "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                           nil,nil}}},
                                        nil},
                                       nil}},
                                     not_fetched_yet,false,
                                     {1,
                                      {"content-type",
                                       {"Content-Type","application/json"},
                                       nil,nil}},
                                     <<>>,[],80,[]},
                                    undefined,undefined,
                                    {wm_log_data,undefined,
                                     {1390,478314,412005},
                                     'GET',
                                     {5,
                                      {"user-agent",
                                       {'User-Agent',
                                        "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                       {"pragma",
                                        {'Pragma',"No-Cache"},
                                        {"accept",
                                         {'Accept',"*/*"},
                                         nil,
                                         {"authorization",
                                          {'Authorization',
                                           "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                          nil,
                                          {"host",
                                           {'Host',
                                            "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                           nil,nil}}},
                                        nil},
                                       nil}},
                                     "10.121.1.15",
                                     "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                     {1,1},
                                     404,0,undefined,undefined,undefined}},
                                   [],"/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                   "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                   {dict,1,16,16,8,80,48,
                                    {[],[],[],[],[],[],[],[],[],[],[],[],[],
                                     [],[],[]},
                                    {{[],[],[],[],[],
                                      [[node,114,97,98,98,105,116,64,73,65,68,
                                        50,45,78,72,49,45,82,77,81,86,48,51]],
                                      [],[],[],[],[],[],[],[],[],[]}}},
                                   [],"../../..",500,1073741824,67108864,[],
                                   [],
                                   {5,
                                    {"user-agent",
                                     {'User-Agent',
                                      "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                     {"pragma",
                                      {'Pragma',"No-Cache"},
                                      {"accept",
                                       {'Accept',"*/*"},
                                       nil,
                                       {"authorization",
                                        {'Authorization',
                                         "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                        nil,
                                        {"host",
                                         {'Host',
                                          "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                         nil,nil}}},
                                      nil},
                                     nil}},
                                   not_fetched_yet,false,
                                   {1,
                                    {"content-type",
                                     {"Content-Type","application/json"},
                                     nil,nil}},
                                   <<>>,[],80,[]},
                                  undefined,undefined,
                                  {wm_log_data,undefined,
                                   {1390,478314,412005},
                                   'GET',
                                   {5,
                                    {"user-agent",
                                     {'User-Agent',
                                      "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                     {"pragma",
                                      {'Pragma',"No-Cache"},
                                      {"accept",
                                       {'Accept',"*/*"},
                                       nil,
                                       {"authorization",
                                        {'Authorization',
                                         "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                        nil,
                                        {"host",
                                         {'Host',
                                          "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                         nil,nil}}},
                                      nil},
                                     nil}},
                                   "10.121.1.15",
                                   "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                   {1,1},
                                   404,0,undefined,undefined,undefined}},
                                 [],"/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                 "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                 {dict,1,16,16,8,80,48,
                                  {[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                   [],[]},
                                  {{[],[],[],[],[],
                                    [[node,114,97,98,98,105,116,64,73,65,68,
                                      50,45,78,72,49,45,82,77,81,86,48,51]],
                                    [],[],[],[],[],[],[],[],[],[]}}},
                                 [],"../../..",500,1073741824,67108864,[],[],
                                 {5,
                                  {"user-agent",
                                   {'User-Agent',
                                    "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                   {"pragma",
                                    {'Pragma',"No-Cache"},
                                    {"accept",
                                     {'Accept',"*/*"},
                                     nil,
                                     {"authorization",
                                      {'Authorization',
                                       "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                      nil,
                                      {"host",
                                       {'Host',
                                        "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                       nil,nil}}},
                                    nil},
                                   nil}},
                                 not_fetched_yet,false,
                                 {1,
                                  {"content-type",
                                   {"Content-Type","application/json"},
                                   nil,nil}},
                                 <<>>,[],80,[]},
                                undefined,undefined,
                                {wm_log_data,undefined,
                                 {1390,478314,412005},
                                 'GET',
                                 {5,
                                  {"user-agent",
                                   {'User-Agent',
                                    "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                   {"pragma",
                                    {'Pragma',"No-Cache"},
                                    {"accept",
                                     {'Accept',"*/*"},
                                     nil,
                                     {"authorization",
                                      {'Authorization',
                                       "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                      nil,
                                      {"host",
                                       {'Host',
                                        "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                       nil,nil}}},
                                    nil},
                                   nil}},
                                 "10.121.1.15",
                                 "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                                 {1,1},
                                 404,0,undefined,undefined,undefined}},
                               [],"/api/nodes/rabbit at IAD2-NH1-RMQV03",
                               "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                               {dict,1,16,16,8,80,48,
                                {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                 []},
                                {{[],[],[],[],[],
                                  [[node,114,97,98,98,105,116,64,73,65,68,50,
                                    45,78,72,49,45,82,77,81,86,48,51]],
                                  [],[],[],[],[],[],[],[],[],[]}}},
                               [],"../../..",500,1073741824,67108864,[],[],
                               {5,
                                {"user-agent",
                                 {'User-Agent',
                                  "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                 {"pragma",
                                  {'Pragma',"No-Cache"},
                                  {"accept",
                                   {'Accept',"*/*"},
                                   nil,
                                   {"authorization",
                                    {'Authorization',
                                     "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                    nil,
                                    {"host",
                                     {'Host',
                                      "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                     nil,nil}}},
                                  nil},
                                 nil}},
                               not_fetched_yet,false,
                               {1,
                                {"content-type",
                                 {"Content-Type","application/json"},
                                 nil,nil}},
                               <<>>,[],80,[]},
                              undefined,undefined,
                              {wm_log_data,undefined,
                               {1390,478314,412005},
                               'GET',
                               {5,
                                {"user-agent",
                                 {'User-Agent',
                                  "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                                 {"pragma",
                                  {'Pragma',"No-Cache"},
                                  {"accept",
                                   {'Accept',"*/*"},
                                   nil,
                                   {"authorization",
                                    {'Authorization',
                                     "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                    nil,
                                    {"host",
                                     {'Host',
                                      "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                     nil,nil}}},
                                  nil},
                                 nil}},
                               "10.121.1.15",
                               "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                               {1,1},
                               404,0,undefined,undefined,undefined}},
                             [],"/api/nodes/rabbit at IAD2-NH1-RMQV03",
                             "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                             {dict,1,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},
                              {{[],[],[],[],[],
                                [[node,114,97,98,98,105,116,64,73,65,68,50,45,
                                  78,72,49,45,82,77,81,86,48,51]],
                                [],[],[],[],[],[],[],[],[],[]}}},
                             [],"../../..",500,1073741824,67108864,[],[],
                             {5,
                              {"user-agent",
                               {'User-Agent',
                                "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                               {"pragma",
                                {'Pragma',"No-Cache"},
                                {"accept",
                                 {'Accept',"*/*"},
                                 nil,
                                 {"authorization",
                                  {'Authorization',
                                   "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                  nil,
                                  {"host",
                                   {'Host',
                                    "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                   nil,nil}}},
                                nil},
                               nil}},
                             not_fetched_yet,false,
                             {2,
                              {"content-type",
                               {"Content-Type","application/json"},
                               {"cache-control",
                                {"Cache-Control","no-cache"},
                                nil,nil},
                               nil}},
                             <<>>,[],80,[]},
                            undefined,undefined,
                            {wm_log_data,undefined,
                             {1390,478314,412005},
                             'GET',
                             {5,
                              {"user-agent",
                               {'User-Agent',
                                "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                               {"pragma",
                                {'Pragma',"No-Cache"},
                                {"accept",
                                 {'Accept',"*/*"},
                                 nil,
                                 {"authorization",
                                  {'Authorization',
                                   "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                  nil,
                                  {"host",
                                   {'Host',
                                    "IAD2-NH1-rabbit.vss-eng.com:15672"},
                                   nil,nil}}},
                                nil},
                               nil}},
                             "10.121.1.15",
                             "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                             {1,1},
                             404,0,undefined,undefined,undefined}},
                           [],"/api/nodes/rabbit at IAD2-NH1-RMQV03",
                           "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                           {dict,1,16,16,8,80,48,
                            {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                            {{[],[],[],[],[],
                              [[node,114,97,98,98,105,116,64,73,65,68,50,45,
                                78,72,49,45,82,77,81,86,48,51]],
                              [],[],[],[],[],[],[],[],[],[]}}},
                           [],"../../..",500,1073741824,67108864,[],[],
                           {5,
                            {"user-agent",
                             {'User-Agent',
                              "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                             {"pragma",
                              {'Pragma',"No-Cache"},
                              {"accept",
                               {'Accept',"*/*"},
                               nil,
                               {"authorization",
                                {'Authorization',
                                 "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                nil,
                                {"host",
                                 {'Host',"IAD2-NH1-rabbit.vss-eng.com:15672"},
                                 nil,nil}}},
                              nil},
                             nil}},
                           not_fetched_yet,false,
                           {2,
                            {"content-type",
                             {"Content-Type","application/json"},
                             {"cache-control",
                              {"Cache-Control","no-cache"},
                              nil,nil},
                             nil}},
                           <<>>,[],80,[]},
                          undefined,undefined,
                          {wm_log_data,undefined,
                           {1390,478314,412005},
                           'GET',
                           {5,
                            {"user-agent",
                             {'User-Agent',
                              "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                             {"pragma",
                              {'Pragma',"No-Cache"},
                              {"accept",
                               {'Accept',"*/*"},
                               nil,
                               {"authorization",
                                {'Authorization',
                                 "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                                nil,
                                {"host",
                                 {'Host',"IAD2-NH1-rabbit.vss-eng.com:15672"},
                                 nil,nil}}},
                              nil},
                             nil}},
                           "10.121.1.15","/api/nodes/rabbit at IAD2-NH1-RMQV03",
                           {1,1},
                           404,0,undefined,undefined,undefined}},
                         [],"/api/nodes/rabbit at IAD2-NH1-RMQV03",
                         "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                         {dict,1,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],
                            [[node,114,97,98,98,105,116,64,73,65,68,50,45,78,
                              72,49,45,82,77,81,86,48,51]],
                            [],[],[],[],[],[],[],[],[],[]}}},
                         [],"../../..",500,1073741824,67108864,[],[],
                         {5,
                          {"user-agent",
                           {'User-Agent',
                            "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                           {"pragma",
                            {'Pragma',"No-Cache"},
                            {"accept",
                             {'Accept',"*/*"},
                             nil,
                             {"authorization",
                              {'Authorization',
                               "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                              nil,
                              {"host",
                               {'Host',"IAD2-NH1-rabbit.vss-eng.com:15672"},
                               nil,nil}}},
                            nil},
                           nil}},
                         not_fetched_yet,false,
                         {2,
                          {"content-type",
                           {"Content-Type","application/json"},
                           {"cache-control",
                            {"Cache-Control","no-cache"},
                            nil,nil},
                           nil}},
                         <<"{\"partitions\":[],\"os_pid\":\"3240\",\"fd_used\":51,\"fd_total\":8192,\"sockets_used\":20,\"sockets_total\":7280,\"mem_used\":132793904,\"mem_limit\":2147217408,\"mem_alarm\":false,\"disk_free_limit\":4000000000,\"disk_free\":85525172224,\"disk_free_alarm\":false,\"proc_used\":691,\"proc_total\":1048576,\"statistics_level\":\"fine\",\"uptime\":5911760988,\"run_queue\":0,\"processors\":4,\"exchange_types\":[{\"name\":\"topic\",\"description\":\"AMQP topic exchange, as per the AMQP specification\",\"enabled\":true},{\"name\":\"fanout\",\"description\":\"AMQP fanout exchange, as per the AMQP specification\",\"enabled\":true},{\"name\":\"direct\",\"description\":\"AMQP direct exchange, as per the AMQP specification\",\"enabled\":true},{\"name\":\"headers\",\"description\":\"AMQP headers exchange, as per the AMQP specification\",\"enabled\":true}],\"auth_mechanisms\":[{\"name\":\"AMQPLAIN\",\"description\":\"QPid AMQPLAIN mechanism\",\"enabled\":true},{\"name\":\"PLAIN\",\"description\":\"SASL PLAIN authentication mechanism\",\"enabled\":true},{\"name\":\"RABBIT-CR-DEMO\",\"description\":\"RabbitMQ Demo challenge-response authentication mechanism\",\"enabled\":false}],\"applications\":[{\"name\":\"amqp_client\",\"description\":\"RabbitMQ AMQP Client\",\"version\":\"3.0.4\"},{\"name\":\"inets\",\"description\":\"INETS  CXC 138 49\",\"version\":\"5.9.4\"},{\"name\":\"kernel\",\"description\":\"ERTS  CXC 138 10\",\"version\":\"2.16.1\"},{\"name\":\"mnesia\",\"description\":\"MNESIA  CXC 138 12\",\"version\":\"4.8\"},{\"name\":\"mochiweb\",\"description\":\"MochiMedia Web Server\",\"version\":\"2.3.1-rmq3.0.4-gitd541e9a\"},{\"name\":\"os_mon\",\"description\":\"CPO  CXC 138 46\",\"version\":\"2.2.11\"},{\"name\":\"rabbit\",\"description\":\"RabbitMQ\",\"version\":\"3.0.4\"},{\"name\":\"rabbitmq_management\",\"description\":\"RabbitMQ Management Console\",\"version\":\"3.0.4\"},{\"name\":\"rabbitmq_management_agent\",\"description\":\"RabbitMQ Management Agent\",\"version\":\"3.0.4\"},{\"name\":\"rabbitmq_web_dispatch\",\"description\":\"RabbitMQ Web Dispatcher\",\"version\":\"3.0.4\"},{\"name\":\"sasl\",\"description\":\"SASL  CXC 138 11\",\"version\":\"2.3.1\"},{\"name\":\"stdlib\",\"description\":\"ERTS  CXC 138 10\",\"version\":\"1.19.1\"},{\"name\":\"webmachine\",\"description\":\"webmachine\",\"version\":\"1.9.1-rmq3.0.4-git52e62bc\"},{\"name\":\"xmerl\",\"description\":\"XML parser\",\"version\":\"1.3.3\"}],\"contexts\":[{\"description\":\"Redirect to port 15672\",\"path\":\"/\",\"port\":55672,\"ignore_in_use\":true},{\"description\":\"RabbitMQ Management\",\"path\":\"/\",\"port\":15672}],\"name\":\"rabbit at IAD2-NH1-RMQV03\",\"type\":\"disc\",\"running\":true}">>,
                         [],80,[]},
                        undefined,undefined,
                        {wm_log_data,undefined,
                         {1390,478314,412005},
                         'GET',
                         {5,
                          {"user-agent",
                           {'User-Agent',
                            "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                           {"pragma",
                            {'Pragma',"No-Cache"},
                            {"accept",
                             {'Accept',"*/*"},
                             nil,
                             {"authorization",
                              {'Authorization',
                               "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                              nil,
                              {"host",
                               {'Host',"IAD2-NH1-rabbit.vss-eng.com:15672"},
                               nil,nil}}},
                            nil},
                           nil}},
                         "10.121.1.15","/api/nodes/rabbit at IAD2-NH1-RMQV03",
                         {1,1},
                         404,0,undefined,undefined,undefined}},
                       [],"/api/nodes/rabbit at IAD2-NH1-RMQV03",
                       "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                       {dict,1,16,16,8,80,48,
                        {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                        {{[],[],[],[],[],
                          [[node,114,97,98,98,105,116,64,73,65,68,50,45,78,72,
                            49,45,82,77,81,86,48,51]],
                          [],[],[],[],[],[],[],[],[],[]}}},
                       [],"../../..",200,1073741824,67108864,[],[],
                       {5,
                        {"user-agent",
                         {'User-Agent',
                          "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                         {"pragma",
                          {'Pragma',"No-Cache"},
                          {"accept",
                           {'Accept',"*/*"},
                           nil,
                           {"authorization",
                            {'Authorization',
                             "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                            nil,
                            {"host",
                             {'Host',"IAD2-NH1-rabbit.vss-eng.com:15672"},
                             nil,nil}}},
                          nil},
                         nil}},
                       not_fetched_yet,false,
                       {2,
                        {"content-type",
                         {"Content-Type","application/json"},
                         {"cache-control",
                          {"Cache-Control","no-cache"},
                          nil,nil},
                         nil}},
                       <<"{\"partitions\":[],\"os_pid\":\"3240\",\"fd_used\":51,\"fd_total\":8192,\"sockets_used\":20,\"sockets_total\":7280,\"mem_used\":132793904,\"mem_limit\":2147217408,\"mem_alarm\":false,\"disk_free_limit\":4000000000,\"disk_free\":85525172224,\"disk_free_alarm\":false,\"proc_used\":691,\"proc_total\":1048576,\"statistics_level\":\"fine\",\"uptime\":5911760988,\"run_queue\":0,\"processors\":4,\"exchange_types\":[{\"name\":\"topic\",\"description\":\"AMQP topic exchange, as per the AMQP specification\",\"enabled\":true},{\"name\":\"fanout\",\"description\":\"AMQP fanout exchange, as per the AMQP specification\",\"enabled\":true},{\"name\":\"direct\",\"description\":\"AMQP direct exchange, as per the AMQP specification\",\"enabled\":true},{\"name\":\"headers\",\"description\":\"AMQP headers exchange, as per the AMQP specification\",\"enabled\":true}],\"auth_mechanisms\":[{\"name\":\"AMQPLAIN\",\"description\":\"QPid AMQPLAIN mechanism\",\"enabled\":true},{\"name\":\"PLAIN\",\"description\":\"SASL PLAIN authentication mechanism\",\"enabled\":true},{\"name\":\"RABBIT-CR-DEMO\",\"description\":\"RabbitMQ Demo challenge-response authentication mechanism\",\"enabled\":false}],\"applications\":[{\"name\":\"amqp_client\",\"description\":\"RabbitMQ AMQP Client\",\"version\":\"3.0.4\"},{\"name\":\"inets\",\"description\":\"INETS  CXC 138 49\",\"version\":\"5.9.4\"},{\"name\":\"kernel\",\"description\":\"ERTS  CXC 138 10\",\"version\":\"2.16.1\"},{\"name\":\"mnesia\",\"description\":\"MNESIA  CXC 138 12\",\"version\":\"4.8\"},{\"name\":\"mochiweb\",\"description\":\"MochiMedia Web Server\",\"version\":\"2.3.1-rmq3.0.4-gitd541e9a\"},{\"name\":\"os_mon\",\"description\":\"CPO  CXC 138 46\",\"version\":\"2.2.11\"},{\"name\":\"rabbit\",\"description\":\"RabbitMQ\",\"version\":\"3.0.4\"},{\"name\":\"rabbitmq_management\",\"description\":\"RabbitMQ Management Console\",\"version\":\"3.0.4\"},{\"name\":\"rabbitmq_management_agent\",\"description\":\"RabbitMQ Management Agent\",\"version\":\"3.0.4\"},{\"name\":\"rabbitmq_web_dispatch\",\"description\":\"RabbitMQ Web Dispatcher\",\"version\":\"3.0.4\"},{\"name\":\"sasl\",\"description\":\"SASL  CXC 138 11\",\"version\":\"2.3.1\"},{\"name\":\"stdlib\",\"description\":\"ERTS  CXC 138 10\",\"version\":\"1.19.1\"},{\"name\":\"webmachine\",\"description\":\"webmachine\",\"version\":\"1.9.1-rmq3.0.4-git52e62bc\"},{\"name\":\"xmerl\",\"description\":\"XML parser\",\"version\":\"1.3.3\"}],\"contexts\":[{\"description\":\"Redirect to port 15672\",\"path\":\"/\",\"port\":55672,\"ignore_in_use\":true},{\"description\":\"RabbitMQ Management\",\"path\":\"/\",\"port\":15672}],\"name\":\"rabbit at IAD2-NH1-RMQV03\",\"type\":\"disc\",\"running\":true}">>,
                       [],80,[]},
                      undefined,undefined,
                      {wm_log_data,undefined,
                       {1390,478314,412005},
                       'GET',
                       {5,
                        {"user-agent",
                         {'User-Agent',
                          "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                         {"pragma",
                          {'Pragma',"No-Cache"},
                          {"accept",
                           {'Accept',"*/*"},
                           nil,
                           {"authorization",
                            {'Authorization',
                             "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                            nil,
                            {"host",
                             {'Host',"IAD2-NH1-rabbit.vss-eng.com:15672"},
                             nil,nil}}},
                          nil},
                         nil}},
                       "10.121.1.15","/api/nodes/rabbit at IAD2-NH1-RMQV03",
                       {1,1},
                       404,0,undefined,undefined,undefined}},
                     [],"/api/nodes/rabbit at IAD2-NH1-RMQV03",
                     "/api/nodes/rabbit at IAD2-NH1-RMQV03",
                     {dict,1,16,16,8,80,48,
                      {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                      {{[],[],[],[],[],
                        [[node,114,97,98,98,105,116,64,73,65,68,50,45,78,72,
                          49,45,82,77,81,86,48,51]],
                        [],[],[],[],[],[],[],[],[],[]}}},
                     [],"../../..",200,1073741824,67108864,[],[],
                     {5,
                      {"user-agent",
                       {'User-Agent',
                        "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                       {"pragma",
                        {'Pragma',"No-Cache"},
                        {"accept",
                         {'Accept',"*/*"},
                         nil,
                         {"authorization",
                          {'Authorization',
                           "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                          nil,
                          {"host",
                           {'Host',"IAD2-NH1-rabbit.vss-eng.com:15672"},
                           nil,nil}}},
                        nil},
                       nil}},
                     not_fetched_yet,false,
                     {2,
                      {"content-type",
                       {"Content-Type","application/json"},
                       {"cache-control",{"Cache-Control","no-cache"},nil,nil},
                       nil}},
                     <<"{\"partitions\":[],\"os_pid\":\"3240\",\"fd_used\":51,\"fd_total\":8192,\"sockets_used\":20,\"sockets_total\":7280,\"mem_used\":132793904,\"mem_limit\":2147217408,\"mem_alarm\":false,\"disk_free_limit\":4000000000,\"disk_free\":85525172224,\"disk_free_alarm\":false,\"proc_used\":691,\"proc_total\":1048576,\"statistics_level\":\"fine\",\"uptime\":5911760988,\"run_queue\":0,\"processors\":4,\"exchange_types\":[{\"name\":\"topic\",\"description\":\"AMQP topic exchange, as per the AMQP specification\",\"enabled\":true},{\"name\":\"fanout\",\"description\":\"AMQP fanout exchange, as per the AMQP specification\",\"enabled\":true},{\"name\":\"direct\",\"description\":\"AMQP direct exchange, as per the AMQP specification\",\"enabled\":true},{\"name\":\"headers\",\"description\":\"AMQP headers exchange, as per the AMQP specification\",\"enabled\":true}],\"auth_mechanisms\":[{\"name\":\"AMQPLAIN\",\"description\":\"QPid AMQPLAIN mechanism\",\"enabled\":true},{\"name\":\"PLAIN\",\"description\":\"SASL PLAIN authentication mechanism\",\"enabled\":true},{\"name\":\"RABBIT-CR-DEMO\",\"description\":\"RabbitMQ Demo challenge-response authentication mechanism\",\"enabled\":false}],\"applications\":[{\"name\":\"amqp_client\",\"description\":\"RabbitMQ AMQP Client\",\"version\":\"3.0.4\"},{\"name\":\"inets\",\"description\":\"INETS  CXC 138 49\",\"version\":\"5.9.4\"},{\"name\":\"kernel\",\"description\":\"ERTS  CXC 138 10\",\"version\":\"2.16.1\"},{\"name\":\"mnesia\",\"description\":\"MNESIA  CXC 138 12\",\"version\":\"4.8\"},{\"name\":\"mochiweb\",\"description\":\"MochiMedia Web Server\",\"version\":\"2.3.1-rmq3.0.4-gitd541e9a\"},{\"name\":\"os_mon\",\"description\":\"CPO  CXC 138 46\",\"version\":\"2.2.11\"},{\"name\":\"rabbit\",\"description\":\"RabbitMQ\",\"version\":\"3.0.4\"},{\"name\":\"rabbitmq_management\",\"description\":\"RabbitMQ Management Console\",\"version\":\"3.0.4\"},{\"name\":\"rabbitmq_management_agent\",\"description\":\"RabbitMQ Management Agent\",\"version\":\"3.0.4\"},{\"name\":\"rabbitmq_web_dispatch\",\"description\":\"RabbitMQ Web Dispatcher\",\"version\":\"3.0.4\"},{\"name\":\"sasl\",\"description\":\"SASL  CXC 138 11\",\"version\":\"2.3.1\"},{\"name\":\"stdlib\",\"description\":\"ERTS  CXC 138 10\",\"version\":\"1.19.1\"},{\"name\":\"webmachine\",\"description\":\"webmachine\",\"version\":\"1.9.1-rmq3.0.4-git52e62bc\"},{\"name\":\"xmerl\",\"description\":\"XML parser\",\"version\":\"1.3.3\"}],\"contexts\":[{\"description\":\"Redirect to port 15672\",\"path\":\"/\",\"port\":55672,\"ignore_in_use\":true},{\"description\":\"RabbitMQ Management\",\"path\":\"/\",\"port\":15672}],\"name\":\"rabbit at IAD2-NH1-RMQV03\",\"type\":\"disc\",\"running\":true}">>,
                     [],80,[]},
                    undefined,undefined,
                    {wm_log_data,undefined,
                     {1390,478314,412005},
                     'GET',
                     {5,
                      {"user-agent",
                       {'User-Agent',
                        "Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)"},
                       {"pragma",
                        {'Pragma',"No-Cache"},
                        {"accept",
                         {'Accept',"*/*"},
                         nil,
                         {"authorization",
                          {'Authorization',
                           "Basic Uk1RX1NpdGVTY29wZVByb2JlOiRpdDMkY29wM1Byb2Iz"},
                          nil,
                          {"host",
                           {'Host',"IAD2-NH1-rabbit.vss-eng.com:15672"},
                           nil,nil}}},
                        nil},
                       nil}},
                     "10.121.1.15","/api/nodes/rabbit at IAD2-NH1-RMQV03",
                     {1,1},
                     200,2388,undefined,
                     {1390,478315,722001},
                     undefined}}},
                  {decision,v3o18b},
                  {code,200},
                  {tmp_reqstate,empty},
                  {resource,
                   {webmachine_resource,rabbit_mgmt_wm_node,
                    {context,
                     {user,<<"RMQ_SiteScopeProbe">>,
                      [monitoring],
                      rabbit_auth_backend_internal,
                      {internal_user,<<"RMQ_SiteScopeProbe">>,
                       <<226,64,247,133,150,69,33,15,234,219,67,83,140,234,37,
                         170,159,197,70,160>>,
                       [monitoring]}},
                     <<"$it3$cop3Prob3">>},
                    {dict,7,16,16,8,80,48,
                     {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                     {{[],[],[],
                       [[resource_exists|2]],
                       [[init|1],[content_types_provided|2],[is_authorized|2]],
                       [],[],
                       [[ping|2]],
                       [],[],[],[],[],[],
                       [[to_json|2]],
                       [[module_info|1]]}}},
                    false}}]
    trap_exit: false
    status: running
    heap_size: 121536
    stack_size: 27
    reductions: 13830
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.312.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.312.0>},
                              [{{10,<2864.312.0>},
                                {view_member,
                                    {10,<2864.312.0>},
                                    [{4,<2866.312.0>},{7,<0.312.0>}],
                                    {10,<2864.312.0>},
                                    {10,<2864.312.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.311.0>,rabbit_mirror_queue_slave_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{'$gm',12,check_neighbours}}]
    links: [<0.311.0>]
    dictionary: [{random_seed,{24952,10111,9202}}]
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 8293
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.4425.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{0,<0.4425.0>},
                              [{{0,<2864.6226.0>},
                                {view_member,
                                    {0,<2864.6226.0>},
                                    [{0,<0.4425.0>},{1,<2866.4623.0>}],
                                    {0,<2864.6226.0>},
                                    {0,<2864.6226.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.4424.0>,<0.4423.0>,rabbit_amqqueue_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{'$gm',3,check_neighbours}}]
    links: [<0.4424.0>]
    dictionary: [{random_seed,{1385,24579,17449}}]
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 7394
  neighbours:
    neighbour: [{pid,<0.4424.0>},
                  {registered_name,[]},
                  {initial_call,{gen,init_it,
                                     ['Argument__1','Argument__2',
                                      'Argument__3','Argument__4',
                                      'Argument__5','Argument__6']}},
                  {current_function,{erlang,hibernate,3}},
                  {ancestors,[<0.4423.0>,rabbit_amqqueue_sup,rabbit_sup,
                              <0.196.0>]},
                  {messages,[]},
                  {links,[<0.4423.0>,<0.4425.0>]},
                  {dictionary,[]},
                  {trap_exit,false},
                  {status,waiting},
                  {heap_size,376},
                  {stack_size,0},
                  {reductions,173}]

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.4423.0>
    registered_name: []
    exception exit: {noproc,{gen_server2,call,[<0.4425.0>,info,infinity]}}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_amqqueue_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.260.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {guid,{{1968714662,1442498954,2044374987,2755592022},1}}]
    trap_exit: true
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 798758
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::00:51:05 ===
     Supervisor: {local,rabbit_amqqueue_sup}
     Context:    child_terminated
     Reason:     {noproc,{gen_server2,call,[<0.4425.0>,info,infinity]}}
     Offender:   [{pid,<0.4423.0>},
                  {name,rabbit_amqqueue},
                  {mfa,
                      {rabbit_amqqueue_process,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.NHDataPushSvc_control">>},
                               true,false,none,[],none,[],[],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               []}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.316.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.316.0>},
                              [{{10,<2864.316.0>},
                                {view_member,
                                    {10,<2864.316.0>},
                                    [{4,<2866.316.0>},{7,<0.316.0>}],
                                    {10,<2864.316.0>},
                                    {10,<2864.316.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.315.0>,rabbit_mirror_queue_slave_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{'$gm',12,check_neighbours}}]
    links: [<0.315.0>]
    dictionary: [{random_seed,{24952,10111,3170}}]
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 6045
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.336.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.336.0>},
                              [{{10,<2864.336.0>},
                                {view_member,
                                    {10,<2864.336.0>},
                                    [{4,<2866.336.0>},{7,<0.336.0>}],
                                    {10,<2864.336.0>},
                                    {10,<2864.336.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.335.0>,rabbit_mirror_queue_slave_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{'$gm',12,check_neighbours}}]
    links: [<0.335.0>]
    dictionary: [{random_seed,{24952,10111,21718}}]
    trap_exit: false
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 3615
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.314.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.314.0>},
                              [{{10,<2864.314.0>},
                                {view_member,
                                    {10,<2864.314.0>},
                                    [{4,<2866.314.0>},{7,<0.314.0>}],
                                    {10,<2864.314.0>},
                                    {10,<2864.314.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.313.0>,rabbit_mirror_queue_slave_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{broadcast,process_death}},
                  {'$gen_cast',{'$gm',12,check_neighbours}}]
    links: [<0.313.0>]
    dictionary: [{random_seed,{24952,10111,12240}}]
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 3736
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.320.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.320.0>},
                              [{{10,<2864.320.0>},
                                {view_member,
                                    {10,<2864.320.0>},
                                    [{4,<2866.320.0>},{7,<0.320.0>}],
                                    {10,<2864.320.0>},
                                    {10,<2864.320.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.319.0>,rabbit_mirror_queue_slave_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{broadcast,process_death}},
                  {'$gen_cast',{'$gm',12,check_neighbours}}]
    links: [<0.319.0>]
    dictionary: [{random_seed,{24952,10111,27461}}]
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 14375
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.4338.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{1,<0.4338.0>},[]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.4337.0>,rabbit_mirror_queue_slave_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{broadcast,process_death}},
                  {'$gen_cast',{'$gm',3,check_neighbours}}]
    links: [<0.4337.0>]
    dictionary: [{random_seed,{24952,13539,22466}}]
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 7643
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.318.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.318.0>},
                              [{{10,<2864.318.0>},
                                {view_member,
                                    {10,<2864.318.0>},
                                    [{4,<2866.318.0>},{7,<0.318.0>}],
                                    {10,<2864.318.0>},
                                    {10,<2864.318.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.317.0>,rabbit_mirror_queue_slave_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{'$gm',12,check_neighbours}}]
    links: [<0.317.0>]
    dictionary: [{random_seed,{24952,10111,6208}}]
    trap_exit: false
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 3802
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.322.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{32,<0.322.0>},
                              [{{35,<2864.322.0>},
                                {view_member,
                                    {35,<2864.322.0>},
                                    [{31,<2866.322.0>},{32,<0.322.0>}],
                                    {35,<2864.322.0>},
                                    {35,<2864.322.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.321.0>,rabbit_mirror_queue_slave_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{'$gm',37,check_neighbours}}]
    links: [<0.321.0>]
    dictionary: [{random_seed,{24952,10111,18561}}]
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 14134
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.296.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{32,<0.296.0>},
                              [{{35,<2864.296.0>},
                                {view_member,
                                    {35,<2864.296.0>},
                                    [{31,<2866.296.0>},{32,<0.296.0>}],
                                    {35,<2864.296.0>},
                                    {35,<2864.296.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.295.0>,rabbit_mirror_queue_slave_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{'$gm',37,check_neighbours}}]
    links: [<0.295.0>]
    dictionary: [{random_seed,{24952,10111,23845}}]
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 13204
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.324.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.324.0>},
                              [{{10,<2864.324.0>},
                                {view_member,
                                    {10,<2864.324.0>},
                                    [{4,<2866.324.0>},{7,<0.324.0>}],
                                    {10,<2864.324.0>},
                                    {10,<2864.324.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.323.0>,rabbit_mirror_queue_slave_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{'$gm',12,check_neighbours}}]
    links: [<0.323.0>]
    dictionary: [{random_seed,{24952,10111,21429}}]
    trap_exit: false
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 3678
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.268.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.268.0>},
                              [{{10,<2864.268.0>},
                                {view_member,
                                    {10,<2864.268.0>},
                                    [{4,<2866.268.0>},{7,<0.268.0>}],
                                    {10,<2864.268.0>},
                                    {10,<2864.268.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.267.0>,rabbit_mirror_queue_slave_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{'$gm',12,check_neighbours}}]
    links: [<0.267.0>]
    dictionary: [{random_seed,{24952,9939,17012}}]
    trap_exit: false
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 3593
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.311.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.312.0>},
                              [{{10,<2864.312.0>},
                                {view_member,
                                    {10,<2864.312.0>},
                                    [{4,<2866.312.0>},{7,<0.312.0>}],
                                    {10,<2864.312.0>},
                                    {10,<2864.312.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.264.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {{xtype_to_module,fanout},rabbit_exchange_type_fanout},
                  {guid,{{3783103228,3164399890,2153590006,3041715840},1}}]
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 86649
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::00:51:05 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {function_clause,
                     [{orddict,fetch,
                          [{7,<0.312.0>},
                           [{{10,<2864.312.0>},
                             {view_member,
                                 {10,<2864.312.0>},
                                 [{4,<2866.312.0>},{7,<0.312.0>}],
                                 {10,<2864.312.0>},
                                 {10,<2864.312.0>}}}]],
                          [{file,"orddict.erl"},{line,72}]},
                      {gm,check_neighbours,1,[]},
                      {gm,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                          [{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.311.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.DataInGateway_control">>},
                               true,false,none,[],<2864.15604.269>,
                               [<2866.311.0>],
                               [<2866.311.0>],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2866.312.0>,<2866.311.0>},
                                {<2864.15605.269>,<2864.15604.269>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.315.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.316.0>},
                              [{{10,<2864.316.0>},
                                {view_member,
                                    {10,<2864.316.0>},
                                    [{4,<2866.316.0>},{7,<0.316.0>}],
                                    {10,<2864.316.0>},
                                    {10,<2864.316.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.264.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {{xtype_to_module,fanout},rabbit_exchange_type_fanout},
                  {guid,{{1127387342,289550450,4104378269,2224811600},1}}]
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 363036
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::00:51:05 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {function_clause,
                     [{orddict,fetch,
                          [{7,<0.316.0>},
                           [{{10,<2864.316.0>},
                             {view_member,
                                 {10,<2864.316.0>},
                                 [{4,<2866.316.0>},{7,<0.316.0>}],
                                 {10,<2864.316.0>},
                                 {10,<2864.316.0>}}}]],
                          [{file,"orddict.erl"},{line,72}]},
                      {gm,check_neighbours,1,[]},
                      {gm,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                          [{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.315.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.NHBssSvc">>},
                               true,false,none,[],<2864.26433.319>,
                               [<2866.315.0>],
                               [<2866.315.0>],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2866.316.0>,<2866.315.0>},
                                {<2864.26435.319>,<2864.26433.319>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.335.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.336.0>},
                              [{{10,<2864.336.0>},
                                {view_member,
                                    {10,<2864.336.0>},
                                    [{4,<2866.336.0>},{7,<0.336.0>}],
                                    {10,<2864.336.0>},
                                    {10,<2864.336.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.264.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {guid,{{2424922508,1847333223,2381358824,953855497},1}}]
    trap_exit: true
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 88136
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::00:51:05 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {function_clause,
                     [{orddict,fetch,
                          [{7,<0.336.0>},
                           [{{10,<2864.336.0>},
                             {view_member,
                                 {10,<2864.336.0>},
                                 [{4,<2866.336.0>},{7,<0.336.0>}],
                                 {10,<2864.336.0>},
                                 {10,<2864.336.0>}}}]],
                          [{file,"orddict.erl"},{line,72}]},
                      {gm,check_neighbours,1,[]},
                      {gm,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                          [{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.335.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.VLReadyGateway">>},
                               true,false,none,[],<2864.26137.319>,
                               [<2866.335.0>],
                               [<2866.335.0>],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2866.336.0>,<2866.335.0>},
                                {<2864.26139.319>,<2864.26137.319>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.4378.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{1,<0.4378.0>},[]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [<0.4377.0>,rabbit_mirror_queue_slave_sup,rabbit_sup,
                  <0.196.0>]
    messages: [{'$gen_cast',{broadcast,process_death}},
                  {'$gen_cast',{'$gm',3,check_neighbours}}]
    links: [<0.4377.0>]
    dictionary: [{random_seed,{24952,14399,5719}}]
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 7542
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.267.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.268.0>},
                              [{{10,<2864.268.0>},
                                {view_member,
                                    {10,<2864.268.0>},
                                    [{4,<2866.268.0>},{7,<0.268.0>}],
                                    {10,<2864.268.0>},
                                    {10,<2864.268.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.264.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {guid,{{1414810187,2473749719,435387099,2515273565},1}}]
    trap_exit: true
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 88107
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.321.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{32,<0.322.0>},
                              [{{35,<2864.322.0>},
                                {view_member,
                                    {35,<2864.322.0>},
                                    [{31,<2866.322.0>},{32,<0.322.0>}],
                                    {35,<2864.322.0>},
                                    {35,<2864.322.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.264.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {{xtype_to_module,fanout},rabbit_exchange_type_fanout},
                  {guid,{{330563924,3451163617,2730445996,3974881292},1}}]
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 89899
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.295.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{32,<0.296.0>},
                              [{{35,<2864.296.0>},
                                {view_member,
                                    {35,<2864.296.0>},
                                    [{31,<2866.296.0>},{32,<0.296.0>}],
                                    {35,<2864.296.0>},
                                    {35,<2864.296.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.264.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {{xtype_to_module,fanout},rabbit_exchange_type_fanout},
                  {guid,{{4005051680,2341186227,16302977,2801706855},1}}]
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 336511
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.323.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.324.0>},
                              [{{10,<2864.324.0>},
                                {view_member,
                                    {10,<2864.324.0>},
                                    [{4,<2866.324.0>},{7,<0.324.0>}],
                                    {10,<2864.324.0>},
                                    {10,<2864.324.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.264.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {guid,{{3538208726,560548696,3527269091,2215044595},1}}]
    trap_exit: true
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 80532
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.4337.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{1,<0.4338.0>},[]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.264.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {{xtype_to_module,fanout},rabbit_exchange_type_fanout},
                  {guid,{{4154803776,2672042437,3586184939,2262798315},1}}]
    trap_exit: true
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 293969
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.317.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.318.0>},
                              [{{10,<2864.318.0>},
                                {view_member,
                                    {10,<2864.318.0>},
                                    [{4,<2866.318.0>},{7,<0.318.0>}],
                                    {10,<2864.318.0>},
                                    {10,<2864.318.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.264.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {guid,{{3417806040,2496775269,2548510351,2422255703},1}}]
    trap_exit: true
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 87556
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.313.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.314.0>},
                              [{{10,<2864.314.0>},
                                {view_member,
                                    {10,<2864.314.0>},
                                    [{4,<2866.314.0>},{7,<0.314.0>}],
                                    {10,<2864.314.0>},
                                    {10,<2864.314.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.264.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {guid,{{3895824908,2793734933,2843667265,4153710703},1}}]
    trap_exit: true
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 79160
  neighbours:

=CRASH REPORT==== 24-Jan-2014::00:51:05 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.319.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{7,<0.320.0>},
                              [{{10,<2864.320.0>},
                                {view_member,
                                    {10,<2864.320.0>},
                                    [{4,<2866.320.0>},{7,<0.320.0>}],
                                    {10,<2864.320.0>},
                                    {10,<2864.320.0>}}}]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.264.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {{xtype_to_module,fanout},rabbit_exchange_type_fanout},
                  {guid,{{1291497069,1238975528,2434683160,1141214512},1}}]
    trap_exit: true
    status: running
    heap_size: 1598
    stack_size: 27
    reductions: 321226
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::00:51:05 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {function_clause,
                     [{orddict,fetch,
                          [{7,<0.268.0>},
                           [{{10,<2864.268.0>},
                             {view_member,
                                 {10,<2864.268.0>},
                                 [{4,<2866.268.0>},{7,<0.268.0>}],
                                 {10,<2864.268.0>},
                                 {10,<2864.268.0>}}}]],
                          [{file,"orddict.erl"},{line,72}]},
                      {gm,check_neighbours,1,[]},
                      {gm,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                          [{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.267.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.DataInGateway_error">>},
                               true,false,none,[],<2864.21211.281>,
                               [<2866.267.0>],
                               [<2866.267.0>],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2866.268.0>,<2866.267.0>},
                                {<2864.21214.281>,<2864.21211.281>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 24-Jan-2014::00:51:05 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {function_clause,
                     [{orddict,fetch,
                          [{32,<0.322.0>},
                           [{{35,<2864.322.0>},
                             {view_member,
                                 {35,<2864.322.0>},
                                 [{31,<2866.322.0>},{32,<0.322.0>}],
                                 {35,<2864.322.0>},
                                 {35,<2864.322.0>}}}]],
                          [{file,"orddict.erl"},{line,72}]},
                      {gm,check_neighbours,1,[]},
                      {gm,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                          [{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.321.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.DataOut_error">>},
                               true,false,none,[],<2864.282.0>,
                               [<2866.321.0>],
                               [<2866.321.0>],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2866.322.0>,<2866.321.0>},
                                {<2864.283.0>,<2864.282.0>},
                                {<0.279.0>,<0.278.0>},
                                {<2866.281.0>,<2866.280.0>},
                                {<0.4166.0>,<0.4165.0>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 24-Jan-2014::00:51:05 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {function_clause,
                     [{orddict,fetch,
                          [{32,<0.296.0>},
                           [{{35,<2864.296.0>},
                             {view_member,
                                 {35,<2864.296.0>},
                                 [{31,<2866.296.0>},{32,<0.296.0>}],
                                 {35,<2864.296.0>},
                                 {35,<2864.296.0>}}}]],
                          [{file,"orddict.erl"},{line,72}]},
                      {gm,check_neighbours,1,[]},
                      {gm,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                          [{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.295.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.NHDataSvc_control">>},
                               true,false,none,[],<2864.274.0>,
                               [<2866.295.0>],
                               [<2866.295.0>],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2866.296.0>,<2866.295.0>},
                                {<2864.275.0>,<2864.274.0>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 24-Jan-2014::00:51:05 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {function_clause,
                     [{orddict,fetch,
                          [{7,<0.324.0>},
                           [{{10,<2864.324.0>},
                             {view_member,
                                 {10,<2864.324.0>},
                                 [{4,<2866.324.0>},{7,<0.324.0>}],
                                 {10,<2864.324.0>},
                                 {10,<2864.324.0>}}}]],
                          [{file,"orddict.erl"},{line,72}]},
                      {gm,check_neighbours,1,[]},
                      {gm,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                          [{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.323.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.FlexGateway_error">>},
                               true,false,none,[],<2864.21505.281>,
                               [<2866.323.0>],
                               [<2866.323.0>],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2866.324.0>,<2866.323.0>},
                                {<2864.21508.281>,<2864.21505.281>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 24-Jan-2014::00:51:05 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {function_clause,
                     [{orddict,fetch,
                          [{1,<0.4338.0>},[]],
                          [{file,"orddict.erl"},{line,72}]},
                      {gm,check_neighbours,1,[]},
                      {gm,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                          [{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.4337.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.MTS_control">>},
                               true,false,none,[],<2866.4484.0>,
                               [<2864.6120.0>],
                               [],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2864.6121.0>,<2864.6120.0>},
                                {<2866.4486.0>,<2866.4484.0>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 24-Jan-2014::00:51:05 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {function_clause,
                     [{orddict,fetch,
                          [{7,<0.318.0>},
                           [{{10,<2864.318.0>},
                             {view_member,
                                 {10,<2864.318.0>},
                                 [{4,<2866.318.0>},{7,<0.318.0>}],
                                 {10,<2864.318.0>},
                                 {10,<2864.318.0>}}}]],
                          [{file,"orddict.erl"},{line,72}]},
                      {gm,check_neighbours,1,[]},
                      {gm,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                          [{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.317.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.NHDataPushSvc_error">>},
                               true,false,none,[],<2864.26502.319>,
                               [<2866.317.0>],
                               [<2866.317.0>],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2866.318.0>,<2866.317.0>},
                                {<2864.26504.319>,<2864.26502.319>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 24-Jan-2014::00:51:05 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {function_clause,
                     [{orddict,fetch,
                          [{7,<0.314.0>},
                           [{{10,<2864.314.0>},
                             {view_member,
                                 {10,<2864.314.0>},
                                 [{4,<2866.314.0>},{7,<0.314.0>}],
                                 {10,<2864.314.0>},
                                 {10,<2864.314.0>}}}]],
                          [{file,"orddict.erl"},{line,72}]},
                      {gm,check_neighbours,1,[]},
                      {gm,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                          [{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.313.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.VLReadyServicesApi_error">>},
                               true,false,none,[],<2864.26207.319>,
                               [<2866.313.0>],
                               [<2866.313.0>],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2866.314.0>,<2866.313.0>},
                                {<2864.26209.319>,<2864.26207.319>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 24-Jan-2014::00:51:05 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {function_clause,
                     [{orddict,fetch,
                          [{7,<0.320.0>},
                           [{{10,<2864.320.0>},
                             {view_member,
                                 {10,<2864.320.0>},
                                 [{4,<2866.320.0>},{7,<0.320.0>}],
                                 {10,<2864.320.0>},
                                 {10,<2864.320.0>}}}]],
                          [{file,"orddict.erl"},{line,72}]},
                      {gm,check_neighbours,1,[]},
                      {gm,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                          [{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.319.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.DataOut_error_control">>},
                               true,false,none,[],<2864.4326.123>,
                               [<2866.319.0>],
                               [<2866.319.0>],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2866.320.0>,<2866.319.0>},
                                {<2864.4327.123>,<2864.4326.123>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 24-Jan-2014::00:51:06 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.4377.0>
    registered_name: []
    exception exit: {function_clause,
                        [{orddict,fetch,
                             [{1,<0.4378.0>},[]],
                             [{file,"orddict.erl"},{line,72}]},
                         {gm,check_neighbours,1,[]},
                         {gm,handle_info,2,[]},
                         {gen_server2,handle_msg,2,[]},
                         {proc_lib,wake_up,3,
                             [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.264.0>]
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {{xtype_to_module,fanout},rabbit_exchange_type_fanout},
                  {guid,{{4112494513,3623792414,1634685357,1080924126},1}}]
    trap_exit: true
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 368365
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::00:51:06 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {function_clause,
                     [{orddict,fetch,
                          [{1,<0.4378.0>},[]],
                          [{file,"orddict.erl"},{line,72}]},
                      {gm,check_neighbours,1,[]},
                      {gm,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                          [{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.4377.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.VLReadyServicesApi_control">>},
                               true,false,none,[],<2866.4524.0>,
                               [<2864.6183.0>],
                               [],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2864.6184.0>,<2864.6183.0>},
                                {<2866.4527.0>,<2866.4524.0>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 24-Jan-2014::01:26:24 ===
  crasher:
    initial call: rabbit_log:init/1
    pid: <0.216.0>
    registered_name: []
    exception exit: {{case_clause,{{[{connection,warning}]}}},
                     [{rabbit_log,'-init/1-lc$^0/1-0-',1,[]},
                      {rabbit_log,init,1,[]},
                      {gen_server,init_it,6,
                                  [{file,"gen_server.erl"},{line,304}]},
                      {proc_lib,init_p_do_apply,3,
                                [{file,"proc_lib.erl"},{line,239}]}]}
      in function  gen_server:init_it/6 (gen_server.erl, line 328)
    ancestors: [rabbit_log_sup,rabbit_sup,<0.196.0>]
    messages: []
    links: [<0.215.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 376
    stack_size: 27
    reductions: 351
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::01:26:24 ===
     Supervisor: {local,rabbit_log_sup}
     Context:    start_error
     Reason:     {{case_clause,{{[{connection,warning}]}}},
                  [{rabbit_log,'-init/1-lc$^0/1-0-',1,[]},
                   {rabbit_log,init,1,[]},
                   {gen_server,init_it,6,[{file,"gen_server.erl"},{line,304}]},
                   {proc_lib,init_p_do_apply,3,
                             [{file,"proc_lib.erl"},{line,239}]}]}
     Offender:   [{pid,undefined},
                  {name,rabbit_log},
                  {mfargs,{rabbit_log,start_link,[]}},
                  {restart_type,transient},
                  {shutdown,4294967295},
                  {child_type,worker}]

				  

RMQV01 errors from sasl.log ********************************************************************************************************************************************

=CRASH REPORT==== 24-Jan-2014::00:51:10 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.295.0>
    registered_name: []
    exception exit: {{badmatch,{error,not_found}},
                     [{rabbit_amqqueue_process,i,2,[]},
                      {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
                      {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
                      {rabbit_amqqueue_process,emit_stats,2,[]},
                      {rabbit_amqqueue_process,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                                [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: [{'EXIT',<0.4476.377>,{shutdown,ring_shutdown}}]
    links: [<0.264.0>]
    dictionary: [{guid,{{1919627951,381418548,2142404085,2720189725},1}}]
    trap_exit: true
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 259974
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::00:51:10 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {{badmatch,{error,not_found}},
                  [{rabbit_amqqueue_process,i,2,[]},
                   {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
                   {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
                   {rabbit_amqqueue_process,emit_stats,2,[]},
                   {rabbit_amqqueue_process,handle_info,2,[]},
                   {gen_server2,handle_msg,2,[]},
                   {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.295.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.NHDataSvc_control">>},
                               true,false,none,[],<2866.295.0>,
                               [<2865.295.0>],
                               [<2865.295.0>],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2865.296.0>,<2865.295.0>},
                                {<2866.296.0>,<2866.295.0>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 24-Jan-2014::00:51:10 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.267.0>
    registered_name: []
    exception exit: {{badmatch,{error,not_found}},
                     [{rabbit_amqqueue_process,i,2,[]},
                      {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
                      {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
                      {rabbit_amqqueue_process,emit_stats,2,[]},
                      {rabbit_amqqueue_process,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                                [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: [{'EXIT',<0.4475.377>,{shutdown,ring_shutdown}}]
    links: [<0.264.0>]
    dictionary: [{guid,{{2083896003,1051959000,167307319,224581277},1}}]
    trap_exit: true
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 66594
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::00:51:10 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {{badmatch,{error,not_found}},
                  [{rabbit_amqqueue_process,i,2,[]},
                   {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
                   {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
                   {rabbit_amqqueue_process,emit_stats,2,[]},
                   {rabbit_amqqueue_process,handle_info,2,[]},
                   {gen_server2,handle_msg,2,[]},
                   {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.267.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.DataInGateway_error">>},
                               true,false,none,[],<2866.267.0>,
                               [<2865.267.0>],
                               [<2865.267.0>],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2865.268.0>,<2865.267.0>},
                                {<2866.268.0>,<2866.267.0>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 24-Jan-2014::00:51:10 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.6183.0>
    registered_name: []
    exception exit: {{badmatch,{error,not_found}},
                     [{rabbit_amqqueue_process,i,2,[]},
                      {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
                      {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
                      {rabbit_amqqueue_process,emit_stats,2,[]},
                      {rabbit_amqqueue_process,handle_info,2,[]},
                      {gen_server2,handle_msg,2,[]},
                      {proc_lib,wake_up,3,
                                [{file,"proc_lib.erl"},{line,249}]}]}
      in function  gen_server2:terminate/3 
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,<0.196.0>]
    messages: [{'EXIT',<0.4474.377>,{shutdown,ring_shutdown}}]
    links: [<0.264.0>]
    dictionary: [{guid,{{1263862052,3850060102,1902448605,1042072941},1}}]
    trap_exit: true
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 144898
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::00:51:10 ===
     Supervisor: {local,
                                           rabbit_mirror_queue_slave_sup}
     Context:    child_terminated
     Reason:     {{badmatch,{error,not_found}},
                  [{rabbit_amqqueue_process,i,2,[]},
                   {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
                   {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
                   {rabbit_amqqueue_process,emit_stats,2,[]},
                   {rabbit_amqqueue_process,handle_info,2,[]},
                   {gen_server2,handle_msg,2,[]},
                   {proc_lib,wake_up,3,[{file,"proc_lib.erl"},{line,249}]}]}
     Offender:   [{pid,<0.6183.0>},
                  {name,rabbit_mirror_queue_slave},
                  {mfa,
                      {rabbit_mirror_queue_slave,start_link,
                          [{amqqueue,
                               {resource,<<"VisionLink">>,queue,
                                   <<"HA.VLReadyServicesApi_control">>},
                               true,false,none,[],<2866.4524.0>,[],[],
                               [{vhost,<<"VisionLink">>},
                                {name,<<"HA-VisionLink">>},
                                {pattern,<<"^HA\\.">>},
                                {definition,[{<<"ha-mode">>,<<"all">>}]},
                                {priority,0}],
                               [{<2866.4527.0>,<2866.4524.0>}]}]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 24-Jan-2014::01:25:06 ===
  crasher:
    initial call: rabbit_log:init/1
    pid: <0.217.0>
    registered_name: []
    exception exit: {{case_clause,{{[{connection,warning}]}}},
                     [{rabbit_log,'-init/1-lc$^0/1-0-',1,[]},
                      {rabbit_log,init,1,[]},
                      {gen_server,init_it,6,
                                  [{file,"gen_server.erl"},{line,304}]},
                      {proc_lib,init_p_do_apply,3,
                                [{file,"proc_lib.erl"},{line,239}]}]}
      in function  gen_server:init_it/6 (gen_server.erl, line 328)
    ancestors: [rabbit_log_sup,rabbit_sup,<0.197.0>]
    messages: []
    links: [<0.216.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 376
    stack_size: 27
    reductions: 351
  neighbours:

=SUPERVISOR REPORT==== 24-Jan-2014::01:25:06 ===
     Supervisor: {local,rabbit_log_sup}
     Context:    start_error
     Reason:     {{case_clause,{{[{connection,warning}]}}},
                  [{rabbit_log,'-init/1-lc$^0/1-0-',1,[]},
                   {rabbit_log,init,1,[]},
                   {gen_server,init_it,6,[{file,"gen_server.erl"},{line,304}]},
                   {proc_lib,init_p_do_apply,3,
                             [{file,"proc_lib.erl"},{line,239}]}]}
     Offender:   [{pid,undefined},
                  {name,rabbit_log},
                  {mfargs,{rabbit_log,start_link,[]}},
                  {restart_type,transient},
                  {shutdown,4294967295},
                  {child_type,worker}]



-------------- next part --------------
A non-text attachment was scrubbed...
Name: rabbit at SJC3-NT2-RMQV01.log
Type: application/octet-stream
Size: 1383795 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/33db6a4f/attachment-0002.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rabbit at SJC3-NT2-RMQV01-sasl.log
Type: application/octet-stream
Size: 198999 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140128/33db6a4f/attachment-0003.obj>

From simon at rabbitmq.com  Wed Jan 29 10:36:07 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 29 Jan 2014 10:36:07 +0000
Subject: [rabbitmq-discuss] MQTT plugin message delivery mode
In-Reply-To: <FE261D85-C6DB-4A2B-8C77-C38344D73A56@rabbitmq.com>
References: <CAAEZByWEF200h-QLZ9gf-VZH-ULSXm0A89JHSNKBPmnpeEOisA@mail.gmail.com>
 <FE261D85-C6DB-4A2B-8C77-C38344D73A56@rabbitmq.com>
Message-ID: <52E8D997.1040309@rabbitmq.com>

On 29/01/14 05:15, Michael Klishin wrote:
>
> On 29 Jan 2014, at 03:51, Jon Vollmer <maxfisher05 at gmail.com> wrote:
>
>> However I am not seeing a way to set something in the mqtt message
>> that relates to delivery mode.  Am I just missing something or is
>> this not supported? Any way to set message delivery mode in an
>> exchange binding as a workaround?
>
> QoS is set the same way with any other MQTT broker. RabbitMQ MQTT
> plugin does not support QoS = 2, however:

So in MQTT the concept of QoS combines the AMQP concepts of ack mode and 
delivery mode; publishing with QoS 1 is the equivalent of publishing 
persistent messages in confirm mode.

However, I am not sure that the RabbitMQ MQTT plugin actually does this; 
it looks like it publishes transient messages only. I will file a bug to 
fix that.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From tim at rabbitmq.com  Wed Jan 29 11:01:53 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Wed, 29 Jan 2014 11:01:53 +0000
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <1390978325570-32930.post@n5.nabble.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
 <1390978325570-32930.post@n5.nabble.com>
Message-ID: <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>

In the URI's you're asking the shovel to connect on (i.e., "amqps://guest:guest at Server1" and "amqps://guest:guest at Server2"), do the "Server1" and "Server2" portions refer to both the correct IP address *and* the correct port on which those RabbitMQ instances are listening for SSL connections? Your java code connects to 5671, which is typically the non-ssl port. If the shovel is trying to establish SSL connections (which is what the "amqps://" prefix means) on the wrong port, it will fail. I'd expect to see something in the logs though.

Cheers,
Tim

On 29 Jan 2014, at 06:52, Tomas Tulka wrote:

>> At that point I'd guess a routing issue is to blame
> 
> but if it is true, a message shouldn't have arrived to Server2 even in case
> with no auth, but it does...
> 
> maybe it needs some additional setup on Server2...???
> 
> 
> 
> --
> View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32930.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/e1e4b9f5/attachment.html>

From tomas.tulka at atos.net  Wed Jan 29 11:06:58 2014
From: tomas.tulka at atos.net (Tomas Tulka)
Date: Wed, 29 Jan 2014 03:06:58 -0800 (PST)
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
 <1390978325570-32930.post@n5.nabble.com>
 <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
Message-ID: <1390993618887-32934.post@n5.nabble.com>

Hi Tim,
SSL works fine (a message is sent and received). The problem occurs when I
add "guest:guest" to broker url and make java clients to connect with the
credentials (a message is sent but not received).



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32934.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From tim at rabbitmq.com  Wed Jan 29 11:10:24 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Wed, 29 Jan 2014 11:10:24 +0000
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
 <1390978325570-32930.post@n5.nabble.com>
 <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
Message-ID: <059080E5-47CC-4F6F-A824-8E11EE1113E1@rabbitmq.com>

On 29 Jan 2014, at 11:01, Tim Watson wrote:

> Your java code connects to 5671, which is typically the non-ssl port.

Er, *cough*, no it isn't - that would be 5672. Derp.


From simon at rabbitmq.com  Wed Jan 29 11:08:26 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 29 Jan 2014 11:08:26 +0000
Subject: [rabbitmq-discuss] Expired, consumed,
 but not yet acked - what happens?
In-Reply-To: <CAAaVn2A0tBSKU2PkDa_CmMRK7j34HL4dKxuDLkF_8_To9RPDFA@mail.gmail.com>
References: <CAAaVn2A0tBSKU2PkDa_CmMRK7j34HL4dKxuDLkF_8_To9RPDFA@mail.gmail.com>
Message-ID: <52E8E12A.6040902@rabbitmq.com>

On 28/01/14 16:00, Duncan McIntyre wrote:
> What happens if a consumer gets a message and holds on to it for a long
> time (maybe getting more messages afterwards), without closing the
> connection or acking it, and the message passes it's expiry?
>
> I assume the server just builds up state and starts to slow down. The
> expired messages will only be dropped/dead-lettered once acked or the
> connection dropped.
>
> Am I correct?

Yes.

As with other messages, the unacked messages can be paged to disk in 
this scenario though.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From piyush.nagar at winshuttle.com  Wed Jan 29 12:51:20 2014
From: piyush.nagar at winshuttle.com (Piyush Nagar)
Date: Wed, 29 Jan 2014 12:51:20 +0000
Subject: [rabbitmq-discuss] RabbitMQ publishing is taking time
Message-ID: <F83BA833AB75C246895C67CF618594F74C2B2E3A@WSS-CHA-MX01.WSE.wsmain.local>

Hello,

We are using RabbitMQ 2.8.6. Messages are published to RabbitMQ from a publisher service and received by some subscriber services. Publisher service is on the same machine as RabbitMQ but currently there are 5 subscriber services, all are on different machines.
The publisher handler multiple concurrent requests in multiple threads and publish the message to queue. The issue, I am facing is that the number of messages that publisher is publishing to a queue are not getting reflected in queue in Management console. I am using .NET client and each thread creates its own channel to publish a message. But they use same connection.
So for example, let there are 50 requests that my publisher receives and it sends 50 messages to queue. Publish call gets completed immediately. But after publishing when I check queue in management console, it shows only 8-12 calls in queue. Logs on my subscriber also says that only 8-12 calls are reached to the subscribers. All has prefetch count set to 20 so that means 100 requests can be handled at the same time.
All the messages in queue are in unack state. Not a single message is left in ready state so I guess that my subscriptions are working fine. But what is surprising is that, there is no message lost and all 50 messages reach to queue eventually and deliver to subscribers. So there is no data lost. But why it is taking that much time. The 60th message took almost 5 minutes to reach to queue and then to subscriber. Those are sent to broker but taking lots of time to reaching to queue.

I am clue less what is happening here. Can anyone tell me what should I search for or what other monitoring I can do her for RabbitMQ.

Thanks & Regards,
Piyush Nagar | Senior Software Design Engineer | Winshuttle<http://bit.ly/JE3TFa>
Phone +91 (172)-6639847 | Mobile +91-98888-68955

________________________________
Winshuttle Important Notice: The information contained in this e-mail message and any attachments hereto is confidential and is intended solely for the person to whom it is addressed. Any use, disclosure, reproduction, modification or distribution of the contents of this e-mail, or any part thereof, other than by the intended recipient, is strictly prohibited. If you are not the intended recipient or have received this message in error, please notify the sender of this e-mail immediately by return e-mail and destroy the message and all copies in your possession. Our messages are checked for viruses but please note that we do not accept liability for any viruses which may be transmitted in or with this message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/04abbc42/attachment.html>

From simon at rabbitmq.com  Wed Jan 29 13:00:16 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 29 Jan 2014 13:00:16 +0000
Subject: [rabbitmq-discuss] RabbitMQ publishing is taking time
In-Reply-To: <F83BA833AB75C246895C67CF618594F74C2B2E3A@WSS-CHA-MX01.WSE.wsmain.local>
References: <F83BA833AB75C246895C67CF618594F74C2B2E3A@WSS-CHA-MX01.WSE.wsmain.local>
Message-ID: <52E8FB60.4060303@rabbitmq.com>

On 29/01/14 12:51, Piyush Nagar wrote:
> I am clue less what is happening here. Can anyone tell me what should I
> search for or what other monitoring I can do her for RabbitMQ.

You could use tracing / firehose to generate trace messages with 
timestamps when the broker receives the messages.

http://www.rabbitmq.com/firehose.html
http://hg.rabbitmq.com/rabbitmq-tracing/file/rabbitmq_v3_2_3/README

That would give you some confirmation that the messages are not getting 
delayed in queues somehow.

But I suspect you'll find that the delay is before the broker generates 
the firehose message. So the next step would be to watch the publishing 
connection with Wireshark; that can analyse AMQP frames so you should be 
able to see the messages just before they reach the broker.

I strongly suspect you'll find the problem lies in your client 
application though...

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Wed Jan 29 13:13:48 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 29 Jan 2014 13:13:48 +0000
Subject: [rabbitmq-discuss] MQTT plugin message delivery mode
In-Reply-To: <CAAEZByU88_g=w5_F+dpxoTbbwQ=H7Q8uypX-C30O8W7LeZgqGg@mail.gmail.com>
References: <CAAEZByWEF200h-QLZ9gf-VZH-ULSXm0A89JHSNKBPmnpeEOisA@mail.gmail.com>
 <FE261D85-C6DB-4A2B-8C77-C38344D73A56@rabbitmq.com>
 <52E8D997.1040309@rabbitmq.com>
 <CAAEZByU88_g=w5_F+dpxoTbbwQ=H7Q8uypX-C30O8W7LeZgqGg@mail.gmail.com>
Message-ID: <52E8FE8C.70408@rabbitmq.com>

Please keep rabbitmq-discuss on CC.

On 29/01/14 13:09, Jon Vollmer wrote:
> Thanks for the info Simon.  I think that is an area where documentation
> could be improved because the QoS concept really is different from the
> concept of message persistence, it really only deals with message
> delivery in the MQTT spec.

QoS *does* deal with persistence.

 From section 3.3 PUBLISH:
> PUBLISH messages can be sent either from a publisher to the server,
> or from the server to a subscriber. The action of the recipient when
> it receives a message depends on the QoS level of the message:
>
> QoS 0
> Make the message available to any interested parties.
> QoS 1
> Log the message to persistent storage, make it available to any
> interested parties, and return a PUBACK message to the sender.

On 29/01/14 13:09, Jon Vollmer wrote:
> It makes sense to combine the concepts though, but I agree that there
> does seem to be a bug.  When publishing a QoS 1 MQTT message I can see
> the "x-mqtt-publish-qos : 1" header but there is no delivery mode header
> and if I stop/start the broker before a consumer grabs the message then
> it will not be there when I restart.

Oh, that's a bug, absolutely.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From steve at yuppiechef.com  Wed Jan 29 12:36:59 2014
From: steve at yuppiechef.com (stix_121)
Date: Wed, 29 Jan 2014 04:36:59 -0800 (PST)
Subject: [rabbitmq-discuss] Node statistics not available v3.2.0
Message-ID: <1390999019060-32937.post@n5.nabble.com>

As of today our 3.2.0 instance is giving the error on the management
interface "Node statistics not available".

This is a new one for us. Any pointers?

Thanks.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Node-statistics-not-available-v3-2-0-tp32937.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From simon at rabbitmq.com  Wed Jan 29 13:18:59 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 29 Jan 2014 13:18:59 +0000
Subject: [rabbitmq-discuss] Node statistics not available v3.2.0
In-Reply-To: <1390999019060-32937.post@n5.nabble.com>
References: <1390999019060-32937.post@n5.nabble.com>
Message-ID: <52E8FFC3.4090605@rabbitmq.com>

On 29/01/14 12:36, stix_121 wrote:
> As of today our 3.2.0 instance is giving the error on the management
> interface "Node statistics not available".

Single node or cluster? If it's in a cluster, then the node that's 
showing that message needs to have either rabbitmq_management or 
rabbitmq_management_agent enabled.

If that's not it, do message rates show up? Are there any interesting 
looking messages in the log for that node?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Wed Jan 29 14:14:34 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 29 Jan 2014 14:14:34 +0000
Subject: [rabbitmq-discuss] Node statistics not available v3.2.0
In-Reply-To: <CAFtb_JumWY0V5o8ZB4UoK1PRrPmMynaWaGvFL_Qr9xnTxXd37A@mail.gmail.com>
References: <1390999019060-32937.post@n5.nabble.com>
 <52E8FFC3.4090605@rabbitmq.com>
 <CAFtb_JumWY0V5o8ZB4UoK1PRrPmMynaWaGvFL_Qr9xnTxXd37A@mail.gmail.com>
Message-ID: <52E90CCA.6010008@rabbitmq.com>

On 29/01/14 14:09, Steve Porter wrote:
>    crasher:
>      initial call: rabbit_mgmt_external_stats:init/1
>      pid: <0.24548.0>
>      registered_name: rabbit_mgmt_external_stats
>      exception exit: {badarg,
>                          [{erlang,list_to_binary,
>                               [[{dhe_rsa,aes_256_cbc,sha},
>                                 {dhe_dss,aes_256_cbc,sha},
>                                 {rsa,aes_256_cbc,sha}]]},
> {rabbit_mgmt_external_stats,format_mochiweb_option,2},
>                           {rabbit_mgmt_external_stats,
> '-format_mochiweb_option_list/1-lc$^0/1-0-',1},
>                           {rabbit_mgmt_external_stats,
> '-format_mochiweb_option_list/1-lc$^0/1-0-',1},
>                           {rabbit_mgmt_external_stats,

OK, so when the node stats process is reporting the Mochiweb 
configuration it looks like it's choking on some SSL options that are 
configured there.

Looks like a bug in that process; we should be able to fix that in the 
next release.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From cwstorm at gmail.com  Wed Jan 29 15:27:42 2014
From: cwstorm at gmail.com (cw storm)
Date: Wed, 29 Jan 2014 10:27:42 -0500
Subject: [rabbitmq-discuss] How to get custom header
Message-ID: <CAETr1H9aZqrP21CduaYps5uGhG4d4cHNi-RDsezAxoyW2_ffVQ@mail.gmail.com>

I'm having difficulty trying to understand how to code to extract custom
headers.  I was able to put the custom header info by issuing below:

java.util.Map<String,Object> headers = new
java.util.HashMap<String,Object>();
headers.put("FirstName", strFirstName);

So, when I consume the message, how can I get "Firstname" value?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/26e50ade/attachment.html>

From michael.s.klishin at gmail.com  Wed Jan 29 15:54:14 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 29 Jan 2014 19:54:14 +0400
Subject: [rabbitmq-discuss] How to get custom header
In-Reply-To: <CAETr1H9aZqrP21CduaYps5uGhG4d4cHNi-RDsezAxoyW2_ffVQ@mail.gmail.com>
References: <CAETr1H9aZqrP21CduaYps5uGhG4d4cHNi-RDsezAxoyW2_ffVQ@mail.gmail.com>
Message-ID: <CAE3HoVSKBQy-RT4ucvVObDeRRm-izXY8iy4-oxpHFwPAJEYH7g@mail.gmail.com>

2014-01-29 cw storm <cwstorm at gmail.com>

> java.util.Map<String,Object> headers = new
> java.util.HashMap<String,Object>();
> headers.put("FirstName", strFirstName);
>
> So, when I consume the message, how can I get "Firstname" value?
>

properties.getHeaders().get("FirstName"");
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/30e3e761/attachment.html>

From cwstorm at gmail.com  Wed Jan 29 16:08:10 2014
From: cwstorm at gmail.com (cw storm)
Date: Wed, 29 Jan 2014 11:08:10 -0500
Subject: [rabbitmq-discuss] How to get custom header
In-Reply-To: <CAE3HoVSKBQy-RT4ucvVObDeRRm-izXY8iy4-oxpHFwPAJEYH7g@mail.gmail.com>
References: <CAETr1H9aZqrP21CduaYps5uGhG4d4cHNi-RDsezAxoyW2_ffVQ@mail.gmail.com>
 <CAE3HoVSKBQy-RT4ucvVObDeRRm-izXY8iy4-oxpHFwPAJEYH7g@mail.gmail.com>
Message-ID: <CAETr1H8qky9WYnn5aoRatsWAQDj6PaCFZ7Ww+s1+1uxmPazN7A@mail.gmail.com>

Thanks MK.  I'll give that a try.  So, can I map it to a string like this:

String strFirstName = properties.getHeaders().get("FirstName");


On Wed, Jan 29, 2014 at 10:54 AM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

>
> 2014-01-29 cw storm <cwstorm at gmail.com>
>
> java.util.Map<String,Object> headers = new
>> java.util.HashMap<String,Object>();
>> headers.put("FirstName", strFirstName);
>>
>> So, when I consume the message, how can I get "Firstname" value?
>>
>
> properties.getHeaders().get("FirstName"");
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/33d48be0/attachment.html>

From cwstorm at gmail.com  Wed Jan 29 16:10:55 2014
From: cwstorm at gmail.com (cw storm)
Date: Wed, 29 Jan 2014 11:10:55 -0500
Subject: [rabbitmq-discuss] How to get custom header
In-Reply-To: <CAETr1H8qky9WYnn5aoRatsWAQDj6PaCFZ7Ww+s1+1uxmPazN7A@mail.gmail.com>
References: <CAETr1H9aZqrP21CduaYps5uGhG4d4cHNi-RDsezAxoyW2_ffVQ@mail.gmail.com>
 <CAE3HoVSKBQy-RT4ucvVObDeRRm-izXY8iy4-oxpHFwPAJEYH7g@mail.gmail.com>
 <CAETr1H8qky9WYnn5aoRatsWAQDj6PaCFZ7Ww+s1+1uxmPazN7A@mail.gmail.com>
Message-ID: <CAETr1H9jQnTh2ogd8bVY-x-iodbAkaAz=Fi-6RzV4cQdBk30Ug@mail.gmail.com>

Actually, I have to cast it to a string and it compile successfully.
 Thanks MK

String strFirstName = properties.getHeaders().get("FirstName").toString();


On Wed, Jan 29, 2014 at 11:08 AM, cw storm <cwstorm at gmail.com> wrote:

> Thanks MK.  I'll give that a try.  So, can I map it to a string like this:
>
> String strFirstName = properties.getHeaders().get("FirstName");
>
>
> On Wed, Jan 29, 2014 at 10:54 AM, Michael Klishin <
> michael.s.klishin at gmail.com> wrote:
>
>>
>> 2014-01-29 cw storm <cwstorm at gmail.com>
>>
>> java.util.Map<String,Object> headers = new
>>> java.util.HashMap<String,Object>();
>>> headers.put("FirstName", strFirstName);
>>>
>>> So, when I consume the message, how can I get "Firstname" value?
>>>
>>
>> properties.getHeaders().get("FirstName"");
>>  --
>> MK
>>
>> http://github.com/michaelklishin
>> http://twitter.com/michaelklishin
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/8a526326/attachment.html>

From michael.s.klishin at gmail.com  Wed Jan 29 16:13:24 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 29 Jan 2014 20:13:24 +0400
Subject: [rabbitmq-discuss] How to get custom header
In-Reply-To: <CAETr1H9jQnTh2ogd8bVY-x-iodbAkaAz=Fi-6RzV4cQdBk30Ug@mail.gmail.com>
References: <CAETr1H9aZqrP21CduaYps5uGhG4d4cHNi-RDsezAxoyW2_ffVQ@mail.gmail.com>
 <CAE3HoVSKBQy-RT4ucvVObDeRRm-izXY8iy4-oxpHFwPAJEYH7g@mail.gmail.com>
 <CAETr1H8qky9WYnn5aoRatsWAQDj6PaCFZ7Ww+s1+1uxmPazN7A@mail.gmail.com>
 <CAETr1H9jQnTh2ogd8bVY-x-iodbAkaAz=Fi-6RzV4cQdBk30Ug@mail.gmail.com>
Message-ID: <CAE3HoVQz-YuTf+yf7aakqAO=j0XVusZHSm8orDqvywQeKGebbA@mail.gmail.com>

2014-01-29 cw storm <cwstorm at gmail.com>

> Actually, I have to cast it to a string and it compile successfully.
>  Thanks MK
>
> String strFirstName = properties.getHeaders().get("FirstName").toString();
>

Right. Headers is a Map<String, Object>.


-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/d32442d4/attachment.html>

From maxfisher05 at gmail.com  Wed Jan 29 16:24:15 2014
From: maxfisher05 at gmail.com (Jon Vollmer)
Date: Wed, 29 Jan 2014 10:24:15 -0600
Subject: [rabbitmq-discuss] MQTT plugin message delivery mode
In-Reply-To: <52E8FE8C.70408@rabbitmq.com>
References: <CAAEZByWEF200h-QLZ9gf-VZH-ULSXm0A89JHSNKBPmnpeEOisA@mail.gmail.com>
 <FE261D85-C6DB-4A2B-8C77-C38344D73A56@rabbitmq.com>
 <52E8D997.1040309@rabbitmq.com>
 <CAAEZByU88_g=w5_F+dpxoTbbwQ=H7Q8uypX-C30O8W7LeZgqGg@mail.gmail.com>
 <52E8FE8C.70408@rabbitmq.com>
Message-ID: <CAAEZByVkHzC+109WQqkk2ywBjDAXfqVAXYzfidB6_y0FE2K5yw@mail.gmail.com>

Thanks for the help Simon.  Definitely cleared some things up for me.
Is there a way to track the bug or get notified when it is resolved?
On Jan 29, 2014 7:16 AM, "Simon MacMullen" <simon at rabbitmq.com> wrote:

> Please keep rabbitmq-discuss on CC.
>
> On 29/01/14 13:09, Jon Vollmer wrote:
>
>> Thanks for the info Simon.  I think that is an area where documentation
>> could be improved because the QoS concept really is different from the
>> concept of message persistence, it really only deals with message
>> delivery in the MQTT spec.
>>
>
> QoS *does* deal with persistence.
>
> From section 3.3 PUBLISH:
>
>> PUBLISH messages can be sent either from a publisher to the server,
>> or from the server to a subscriber. The action of the recipient when
>> it receives a message depends on the QoS level of the message:
>>
>> QoS 0
>> Make the message available to any interested parties.
>> QoS 1
>> Log the message to persistent storage, make it available to any
>> interested parties, and return a PUBACK message to the sender.
>>
>
> On 29/01/14 13:09, Jon Vollmer wrote:
>
>> It makes sense to combine the concepts though, but I agree that there
>> does seem to be a bug.  When publishing a QoS 1 MQTT message I can see
>> the "x-mqtt-publish-qos : 1" header but there is no delivery mode header
>> and if I stop/start the broker before a consumer grabs the message then
>> it will not be there when I restart.
>>
>
> Oh, that's a bug, absolutely.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/01d0629c/attachment.html>

From steve at yuppiechef.com  Wed Jan 29 14:29:41 2014
From: steve at yuppiechef.com (stix_121)
Date: Wed, 29 Jan 2014 06:29:41 -0800 (PST)
Subject: [rabbitmq-discuss] Node statistics not available v3.2.0
In-Reply-To: <52E90CCA.6010008@rabbitmq.com>
References: <1390999019060-32937.post@n5.nabble.com>
 <52E8FFC3.4090605@rabbitmq.com> <52E90CCA.6010008@rabbitmq.com>
Message-ID: <CAFtb_JusWV_ngRH5QRF8YdvKSUWa13_Jq06SFtSWBTz8paYgug@mail.gmail.com>

Cool - the config I have for that section is:

{rabbitmq_management, [

        {listener, [{port, 15672},

        {ssl, true},

        {ssl_opts, [{cacertfile,"/etc/rabbitmq/cacert.pem"},

                {certfile,"/etc/rabbitmq/cert.pem"},

                {keyfile,"/etc/rabbitmq/key.pem"},

                {verify,verify_none},

                {fail_if_no_peer_cert,false},

                        {ciphers,[{dhe_rsa,aes_256_cbc,sha},

                                {dhe_dss,aes_256_cbc,sha},

                                {rsa,aes_256_cbc,sha}]}

                ]}

        ]}

]},

Just fyi, I have tested on 3.2.0, 3.2.1 & 3.2.3-1...all seem to be the same.

Appreciate the help.

Take care,

Steve




[image: Yuppiechef] <http://www.yuppiechef.com/>
Steve Porter
steve at yuppiechef.com | www.yuppiechef.com
Tel: +27 21 702 4969 | Cell: +27 83 375 0320
2 Tifosa Park, Bell Crescent, Westlake Business Park, 7945, South Africa
Facing the Tweets: We do a bunch of
not-so-serious-but-often-interesting-and-
sometimes-ridiculous stuff on
www.facebook.com/yuppiechef<http://www.facebook.com/photo.php?fbid=10150156515060864&set=a.7168410863.20172.7168140863>
and
on www.twitter.com/yuppiechef <http://twitter.com/#!/yuppiechef/favorites>.
Visit us or bring us a cupcake.


On Wed, Jan 29, 2014 at 4:18 PM, Simon MacMullen-2 [via RabbitMQ] <
ml-node+s1065348n32942h68 at n5.nabble.com> wrote:

> On 29/01/14 14:09, Steve Porter wrote:
>
> >    crasher:
> >      initial call: rabbit_mgmt_external_stats:init/1
> >      pid: <0.24548.0>
> >      registered_name: rabbit_mgmt_external_stats
> >      exception exit: {badarg,
> >                          [{erlang,list_to_binary,
> >                               [[{dhe_rsa,aes_256_cbc,sha},
> >                                 {dhe_dss,aes_256_cbc,sha},
> >                                 {rsa,aes_256_cbc,sha}]]},
> > {rabbit_mgmt_external_stats,format_mochiweb_option,2},
> >                           {rabbit_mgmt_external_stats,
> > '-format_mochiweb_option_list/1-lc$^0/1-0-',1},
> >                           {rabbit_mgmt_external_stats,
> > '-format_mochiweb_option_list/1-lc$^0/1-0-',1},
> >                           {rabbit_mgmt_external_stats,
>
> OK, so when the node stats process is reporting the Mochiweb
> configuration it looks like it's choking on some SSL options that are
> configured there.
>
> Looks like a bug in that process; we should be able to fix that in the
> next release.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
> _______________________________________________
> rabbitmq-discuss mailing list
> [hidden email] <http://user/SendEmail.jtp?type=node&node=32942&i=0>
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://rabbitmq.1065348.n5.nabble.com/Node-statistics-not-available-v3-2-0-tp32937p32942.html
>  To unsubscribe from Node statistics not available v3.2.0, click here<http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=32937&code=c3RldmVAeXVwcGllY2hlZi5jb218MzI5Mzd8LTE0NDkwNDc3MTQ=>
> .
> NAML<http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Node-statistics-not-available-v3-2-0-tp32937p32943.html
Sent from the RabbitMQ mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/3d04dda7/attachment.html>

From simon at rabbitmq.com  Wed Jan 29 16:23:03 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 29 Jan 2014 16:23:03 +0000
Subject: [rabbitmq-discuss] MQTT plugin message delivery mode
In-Reply-To: <CAAEZByVkHzC+109WQqkk2ywBjDAXfqVAXYzfidB6_y0FE2K5yw@mail.gmail.com>
References: <CAAEZByWEF200h-QLZ9gf-VZH-ULSXm0A89JHSNKBPmnpeEOisA@mail.gmail.com>
 <FE261D85-C6DB-4A2B-8C77-C38344D73A56@rabbitmq.com>
 <52E8D997.1040309@rabbitmq.com>
 <CAAEZByU88_g=w5_F+dpxoTbbwQ=H7Q8uypX-C30O8W7LeZgqGg@mail.gmail.com>
 <52E8FE8C.70408@rabbitmq.com>
 <CAAEZByVkHzC+109WQqkk2ywBjDAXfqVAXYzfidB6_y0FE2K5yw@mail.gmail.com>
Message-ID: <52E92AE7.4090702@rabbitmq.com>

On 29/01/14 16:24, Jon Vollmer wrote:
> Thanks for the help Simon.  Definitely cleared some things up for me.
> Is there a way to track the bug

I'm afraid not, our bug tracker is not public.

> or get notified when it is resolved?

Bug fixes are listed in release notes, linked from the changelog:

http://www.rabbitmq.com/changelog.html

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From prabodh.upreti at vce.com  Wed Jan 29 17:49:41 2014
From: prabodh.upreti at vce.com (Prabodh Upreti)
Date: Wed, 29 Jan 2014 09:49:41 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmqadmin syntax for parameters
In-Reply-To: <CAE3HoVQsxsQW6W7Fy6-D8D3gjqXXu4pDDxqnbseQ=TKFMbN6og@mail.gmail.com>
References: <1390847227921-32901.post@n5.nabble.com>
 <52E76D01.9060002@rabbitmq.com> <1390950335972-32924.post@n5.nabble.com>
 <CAE3HoVQsxsQW6W7Fy6-D8D3gjqXXu4pDDxqnbseQ=TKFMbN6og@mail.gmail.com>
Message-ID: <1391017781072-32951.post@n5.nabble.com>

Thank you.

I am trying that.

I am getting "connection reset by peer" and in the log I see

=INFO REPORT==== 29-Jan-2014::12:35:05 ===
accepting AMQP connection <0.7853.0> (x.x.x.x:35458 -> x.x.x.x:5672)

=ERROR REPORT==== 29-Jan-2014::12:35:05 ===
closing AMQP connection <0.7853.0> (x.x.x.x:35458 -> x.x.x.x:5672):
{bad_header,<<"GET /api">>}


Could I be missing somethig? thx.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmqadmin-syntax-for-parameters-tp32901p32951.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Wed Jan 29 18:41:52 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 29 Jan 2014 22:41:52 +0400
Subject: [rabbitmq-discuss] rabbitmqadmin syntax for parameters
In-Reply-To: <1391017781072-32951.post@n5.nabble.com>
References: <1390847227921-32901.post@n5.nabble.com>
 <52E76D01.9060002@rabbitmq.com>
 <1390950335972-32924.post@n5.nabble.com>
 <CAE3HoVQsxsQW6W7Fy6-D8D3gjqXXu4pDDxqnbseQ=TKFMbN6og@mail.gmail.com>
 <1391017781072-32951.post@n5.nabble.com>
Message-ID: <CAE3HoVRUsj=5Lm=FjKk9-k9i=Un3MPfEQ1SuX8W0kwXf_TfKdw@mail.gmail.com>

2014-01-29 Prabodh Upreti <prabodh.upreti at vce.com>

> =ERROR REPORT==== 29-Jan-2014::12:35:05 ===
> closing AMQP connection <0.7853.0> (x.x.x.x:35458 -> x.x.x.x:5672):
> {bad_header,<<"GET /api">>}
>
>
> Could I be missing somethig? thx.
>

You point rabbitmqadmin at AMQP port, while it uses HTTP API.


-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/df393dd5/attachment.html>

From prabodh.upreti at vce.com  Wed Jan 29 19:35:24 2014
From: prabodh.upreti at vce.com (Prabodh Upreti)
Date: Wed, 29 Jan 2014 11:35:24 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmqadmin syntax for parameters
In-Reply-To: <CAE3HoVRUsj=5Lm=FjKk9-k9i=Un3MPfEQ1SuX8W0kwXf_TfKdw@mail.gmail.com>
References: <1390847227921-32901.post@n5.nabble.com>
 <52E76D01.9060002@rabbitmq.com> <1390950335972-32924.post@n5.nabble.com>
 <CAE3HoVQsxsQW6W7Fy6-D8D3gjqXXu4pDDxqnbseQ=TKFMbN6og@mail.gmail.com>
 <1391017781072-32951.post@n5.nabble.com>
 <CAE3HoVRUsj=5Lm=FjKk9-k9i=Un3MPfEQ1SuX8W0kwXf_TfKdw@mail.gmail.com>
Message-ID: <1391024124689-32953.post@n5.nabble.com>

Thank you. that was it. Now I am able to run the rabbitmqadmin for other
commands except

rabbitmqadmin -c rabbitmqadmin.conf -N host_normal declare queue name="AAA"
durable=true 'arguments={"x-message-ttl":"86400000"}'

I keep getting

ERROR: Argument "arguments" not recognised

is there something wrong with that syntax. thx.





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmqadmin-syntax-for-parameters-tp32901p32953.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From prabodh.upreti at vce.com  Wed Jan 29 20:39:29 2014
From: prabodh.upreti at vce.com (Prabodh Upreti)
Date: Wed, 29 Jan 2014 12:39:29 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmqadmin syntax for parameters
In-Reply-To: <1391024124689-32953.post@n5.nabble.com>
References: <1390847227921-32901.post@n5.nabble.com>
 <52E76D01.9060002@rabbitmq.com> <1390950335972-32924.post@n5.nabble.com>
 <CAE3HoVQsxsQW6W7Fy6-D8D3gjqXXu4pDDxqnbseQ=TKFMbN6og@mail.gmail.com>
 <1391017781072-32951.post@n5.nabble.com>
 <CAE3HoVRUsj=5Lm=FjKk9-k9i=Un3MPfEQ1SuX8W0kwXf_TfKdw@mail.gmail.com>
 <1391024124689-32953.post@n5.nabble.com>
Message-ID: <1391027969051-32954.post@n5.nabble.com>

now I am getting

*** 406 PRECONDITION_FAILED - invalid arg 'x-message-ttl' for queue 'AAA' in
vhost '/': {unacceptable_type,longstr}


thx.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmqadmin-syntax-for-parameters-tp32901p32954.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From simon at rabbitmq.com  Wed Jan 29 21:00:24 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 29 Jan 2014 21:00:24 +0000
Subject: [rabbitmq-discuss] rabbitmqadmin syntax for parameters
In-Reply-To: <1391024124689-32953.post@n5.nabble.com>
References: <1390847227921-32901.post@n5.nabble.com>
 <52E76D01.9060002@rabbitmq.com> <1390950335972-32924.post@n5.nabble.com>
 <CAE3HoVQsxsQW6W7Fy6-D8D3gjqXXu4pDDxqnbseQ=TKFMbN6og@mail.gmail.com>
 <1391017781072-32951.post@n5.nabble.com>
 <CAE3HoVRUsj=5Lm=FjKk9-k9i=Un3MPfEQ1SuX8W0kwXf_TfKdw@mail.gmail.com>
 <1391024124689-32953.post@n5.nabble.com>
Message-ID: <52E96BE8.3080207@rabbitmq.com>

On 29/01/2014 19:35, Prabodh Upreti wrote:
> rabbitmqadmin -c rabbitmqadmin.conf -N host_normal declare queue name="AAA"
> durable=true 'arguments={"x-message-ttl":"86400000"}'

> *** 406 PRECONDITION_FAILED - invalid arg 'x-message-ttl' for queue 'AAA' in
> vhost '/': {unacceptable_type,longstr}

You want

$ rabbitmqadmin -c rabbitmqadmin.conf -N host_normal declare queue 
name="AAA" durable=true 'arguments={"x-message-ttl":86400000}'

since 86400000 is not a string.

Cheers, Simon

From alan.antonuk at gmail.com  Thu Jan 30 06:32:31 2014
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Wed, 29 Jan 2014 22:32:31 -0800
Subject: [rabbitmq-discuss] ANN: rabbitmq-c v0.5.0 is released
Message-ID: <CAAt2po+jdzL7bfTyn4EX-__v=994-7XY08T13rtxC=QjSOPLfA@mail.gmail.com>

rabbitmq-c is the C-language AMQP client for RabbitMQ

Highlights of changes since v0.5.0:

- Support for connection.blocked/connection.unblocked RabbitMQ broker
extension
- amqp_basic_nack() and amqp_get_broker_properties() APIs
- Removal of distro-specific packaging
- Add delivery mode constants to amqp.h
- and many bug fixes (thanks to all who contributed!)

A full listing of changes can be found in the change log:
https://github.com/alanxz/rabbitmq-c/blob/v0.5.0/ChangeLog.md

You can get the latest package from:
https://github.com/alanxz/rabbitmq-c/releases/tag/v0.5.0

-Alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140129/7b5318b3/attachment.html>

From tomas.tulka at atos.net  Thu Jan 30 07:20:13 2014
From: tomas.tulka at atos.net (Tomas Tulka)
Date: Wed, 29 Jan 2014 23:20:13 -0800 (PST)
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <059080E5-47CC-4F6F-A824-8E11EE1113E1@rabbitmq.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
 <1390978325570-32930.post@n5.nabble.com>
 <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
 <059080E5-47CC-4F6F-A824-8E11EE1113E1@rabbitmq.com>
Message-ID: <1391066413178-32957.post@n5.nabble.com>

> Er, *cough*, no it isn't - that would be 5672. Derp. 

with port 5672 a client is unable to connect



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32957.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Thu Jan 30 07:25:30 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 30 Jan 2014 11:25:30 +0400
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <1391066413178-32957.post@n5.nabble.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
 <1390978325570-32930.post@n5.nabble.com>
 <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
 <059080E5-47CC-4F6F-A824-8E11EE1113E1@rabbitmq.com>
 <1391066413178-32957.post@n5.nabble.com>
Message-ID: <CAE3HoVRNexBaj-rN4=7chkFPb=TbFpVYjeF5-BiuLT=VAYPQQg@mail.gmail.com>

2014-01-30 Tomas Tulka <tomas.tulka at atos.net>

> with port 5672 a client is unable to connect


This means

 * you have a non-standard RabbitMQ configuration
 * a firewall gets in the way
 * you are trying to use SSL over non-SSL port

the first two cases can be verified by connecting with telnet. The latter
will result in error
messages in RabbitMQ log.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/246df5ba/attachment.html>

From tomas.tulka at atos.net  Thu Jan 30 07:31:22 2014
From: tomas.tulka at atos.net (Tomas Tulka)
Date: Wed, 29 Jan 2014 23:31:22 -0800 (PST)
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <CAE3HoVRNexBaj-rN4=7chkFPb=TbFpVYjeF5-BiuLT=VAYPQQg@mail.gmail.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
 <1390978325570-32930.post@n5.nabble.com>
 <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
 <059080E5-47CC-4F6F-A824-8E11EE1113E1@rabbitmq.com>
 <1391066413178-32957.post@n5.nabble.com>
 <CAE3HoVRNexBaj-rN4=7chkFPb=TbFpVYjeF5-BiuLT=VAYPQQg@mail.gmail.com>
Message-ID: <1391067082384-32959.post@n5.nabble.com>

> the first two cases can be verified by connecting with telnet. The latter
will result in error
messages in RabbitMQ log.

it is verified, no error in any log.

everything works fine without using credentials in the java client > getting
off setUsername and setPassword from java code, it starts to work (with SSL)
-> no problem of SSL which in fact working fine, problem must be with
authentization



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32959.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From tomas.tulka at atos.net  Thu Jan 30 07:54:10 2014
From: tomas.tulka at atos.net (Tomas Tulka)
Date: Wed, 29 Jan 2014 23:54:10 -0800 (PST)
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <059080E5-47CC-4F6F-A824-8E11EE1113E1@rabbitmq.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
 <1390978325570-32930.post@n5.nabble.com>
 <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
 <059080E5-47CC-4F6F-A824-8E11EE1113E1@rabbitmq.com>
Message-ID: <1391068450164-32960.post@n5.nabble.com>

Regarding the port 5672: I used the same configuration as in the
documentation:
http://www.rabbitmq.com/ssl.html

and it works fine. When the port in the conf is changed to 5672 I got error
in the startup and the broker will never start:

{"init terminating in
do_boot",{rabbit,failure_during_boot,{could_not_start,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot,{case_clause,{error,{already_started,<0.227.0>}}}}}}}}}}

This is confusing 



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32960.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Thu Jan 30 07:55:30 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 30 Jan 2014 11:55:30 +0400
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <1391067082384-32959.post@n5.nabble.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
 <1390978325570-32930.post@n5.nabble.com>
 <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
 <059080E5-47CC-4F6F-A824-8E11EE1113E1@rabbitmq.com>
 <1391066413178-32957.post@n5.nabble.com>
 <CAE3HoVRNexBaj-rN4=7chkFPb=TbFpVYjeF5-BiuLT=VAYPQQg@mail.gmail.com>
 <1391067082384-32959.post@n5.nabble.com>
Message-ID: <CAE3HoVSJMVamDrNdfzEuyzFOnq-LDZZ98eRw7gLz8zYwTn9=XQ@mail.gmail.com>

2014-01-30 Tomas Tulka <tomas.tulka at atos.net>

> everything works fine without using credentials in the java client >
> getting
> off setUsername and setPassword from java code, it starts to work (with
> SSL)
> -> no problem of SSL which in fact working fine, problem must be with
> authentization
>

If the problem is with authentication (credentials) or incorrect access
rights, there must be errors in the log
about refused access.

Make sure your user has access to the vhost being used:
http://www.rabbitmq.com/access-control.html

-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/1b3c3f7c/attachment.html>

From michael.s.klishin at gmail.com  Thu Jan 30 07:56:22 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 30 Jan 2014 11:56:22 +0400
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <1391068450164-32960.post@n5.nabble.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
 <1390978325570-32930.post@n5.nabble.com>
 <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
 <059080E5-47CC-4F6F-A824-8E11EE1113E1@rabbitmq.com>
 <1391068450164-32960.post@n5.nabble.com>
Message-ID: <CAE3HoVT6jMrW4qgdJiT1nQPAVpkTL9vvanHaoDuGDSW1MMxqHA@mail.gmail.com>

2014-01-30 Tomas Tulka <tomas.tulka at atos.net>

> {"init terminating in
>
> do_boot",{rabbit,failure_during_boot,{could_not_start,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot,{case_clause,{error,{already_started,<0.227.0>}}}}}}}}}}
>
> This is confusing
>

You cannot use the same port for both SSL and non-SSL. A non-SSL TCP
listener is already running on 5672.

If you want SSL, use 5671.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/41462f84/attachment.html>

From tomas.tulka at atos.net  Thu Jan 30 08:00:52 2014
From: tomas.tulka at atos.net (Tomas Tulka)
Date: Thu, 30 Jan 2014 00:00:52 -0800 (PST)
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <CAE3HoVSJMVamDrNdfzEuyzFOnq-LDZZ98eRw7gLz8zYwTn9=XQ@mail.gmail.com>
References: <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
 <1390978325570-32930.post@n5.nabble.com>
 <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
 <059080E5-47CC-4F6F-A824-8E11EE1113E1@rabbitmq.com>
 <1391066413178-32957.post@n5.nabble.com>
 <CAE3HoVRNexBaj-rN4=7chkFPb=TbFpVYjeF5-BiuLT=VAYPQQg@mail.gmail.com>
 <1391067082384-32959.post@n5.nabble.com>
 <CAE3HoVSJMVamDrNdfzEuyzFOnq-LDZZ98eRw7gLz8zYwTn9=XQ@mail.gmail.com>
Message-ID: <1391068852901-32963.post@n5.nabble.com>

> If the problem is with authentication (credentials) or incorrect access
rights

No error in logs. The thing is that I can create a connection with
credentials (I tried a wrong pass and I was refused by an error -> ok) and I
can send a message to the broker by such a connection, but I will never
receive it. When no credentials -> send and receive as well successfully.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32963.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From akhil.pillai at gslab.com  Thu Jan 30 08:02:31 2014
From: akhil.pillai at gslab.com (Akhil Pillai)
Date: Thu, 30 Jan 2014 13:32:31 +0530
Subject: [rabbitmq-discuss] RabbitMQ consumer cancel notification callback
	is not called
Message-ID: <CAF+BKCtewQ6+YDPexJYi4ogi+4sB_4Gb6J9WViO27miX3dWr=w@mail.gmail.com>

Hi All,

I am working on RabbitMQ HA cluster .  I want my client to connect to slave
node when the master node goes down.
I am trying to achieve this using consumer cancel notification.
I am using python amqp 1.4.2 library . I have set the capability
'consumer_cancel_notify' as True in client_properties.
In basic_consume() I have passed a callback function to on_cancel
parameter. But this callback is not called when master goes down.

Can someone tell where I am going wrong.

Thanks,
Akhil


Following is my code :

import amqp

# this is the callback function to receive the messages published to the
queue
def myCallback(message):
    print "messsage received",message.body

# this is the  callback Function for consumer cancel notification
def cancelCallback():
    print "cancelCallback called"


cpDict = {"capabilities":{"consumer_cancel_notify": True, },}
con = amqp.Connection(host ="localhost:5672",userid
="guest",password="guest",client_properties=cpDict)
channel = con.channel()
channel.exchange_declare(exchange="exchange1",type='direct', durable=True,
auto_delete=False)
channel.queue_declare(queue="bm2_execQ", durable=True,exclusive=True,
auto_delete=False)
channel.queue_bind(queue="bm2_execQ",exchange="exchange1",
routing_key="bm2_execQ")
channel.basic_consume(queue="bm2_execQ",callback=myCallback,
consumer_tag="bm2_tag",on_cancel=cancelCallback)

msg = amqp.Message("hi")
msg.properties["content_type"] = "text/plain"
msg.properties["delivery_mode"] = 2

channel.basic_publish(msg,"exchange1","bm2_execQ")

while True :
    channel.wait()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/72594816/attachment.html>

From tomas.tulka at atos.net  Thu Jan 30 08:02:51 2014
From: tomas.tulka at atos.net (Tomas Tulka)
Date: Thu, 30 Jan 2014 00:02:51 -0800 (PST)
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <CAE3HoVT6jMrW4qgdJiT1nQPAVpkTL9vvanHaoDuGDSW1MMxqHA@mail.gmail.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
 <1390978325570-32930.post@n5.nabble.com>
 <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
 <059080E5-47CC-4F6F-A824-8E11EE1113E1@rabbitmq.com>
 <1391068450164-32960.post@n5.nabble.com>
 <CAE3HoVT6jMrW4qgdJiT1nQPAVpkTL9vvanHaoDuGDSW1MMxqHA@mail.gmail.com>
Message-ID: <1391068971634-32964.post@n5.nabble.com>

> If you want SSL, use 5671.

alright, so I am using SSL and 5671 and it works fine. Only the auth problem
(see my previous reply)



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32964.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Thu Jan 30 08:20:43 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 30 Jan 2014 12:20:43 +0400
Subject: [rabbitmq-discuss] shovel with authentization
In-Reply-To: <1391068852901-32963.post@n5.nabble.com>
References: <CAE3HoVQ2Zzqo-zdpv=DWyOpTfLb_AC1eqxOSa2_gRhAsrLL_5w@mail.gmail.com>
 <1390922968966-32916.post@n5.nabble.com>
 <CAD6m6fHU7uAaB3FHDNWp8ALASagCWQOtNYMCLa18fHyoNjenRA@mail.gmail.com>
 <1390978325570-32930.post@n5.nabble.com>
 <9406A365-AD36-4C96-BBA2-29E071C01A82@rabbitmq.com>
 <059080E5-47CC-4F6F-A824-8E11EE1113E1@rabbitmq.com>
 <1391066413178-32957.post@n5.nabble.com>
 <CAE3HoVRNexBaj-rN4=7chkFPb=TbFpVYjeF5-BiuLT=VAYPQQg@mail.gmail.com>
 <1391067082384-32959.post@n5.nabble.com>
 <CAE3HoVSJMVamDrNdfzEuyzFOnq-LDZZ98eRw7gLz8zYwTn9=XQ@mail.gmail.com>
 <1391068852901-32963.post@n5.nabble.com>
Message-ID: <CAE3HoVQ7-XjJN6yRP5=amvCZd5P=kwEVUkRQgYn2O=CSyNM21g@mail.gmail.com>

2014-01-30 Tomas Tulka <tomas.tulka at atos.net>

> When no credentials -> send and receive as well successfully.


There is no such thing as "no credentials" in RabbitMQ. If you specify no
credentials, then guest/guest is used.

I'm confused at this point, is it a client to node A connection that
presumably
has silent authentication failures or node A to node B with Shovel over
amqps?
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/fc935633/attachment.html>

From tomas.tulka at atos.net  Thu Jan 30 09:11:47 2014
From: tomas.tulka at atos.net (Tomas Tulka)
Date: Thu, 30 Jan 2014 01:11:47 -0800 (PST)
Subject: [rabbitmq-discuss] shovel with authentication
In-Reply-To: <1390922096974-32914.post@n5.nabble.com>
References: <1390922096974-32914.post@n5.nabble.com>
Message-ID: <1391073107027-32967.post@n5.nabble.com>

I have solved this strange issue!
Consider this declaration of a source broker:
        {declarations, [
                {'exchange.declare', [
                    {exchange, <<"MyQ-exchange">>},
                    {type, <<"direct">>},
                    *auto_delete*
                    ]},
                {'queue.declare', [
                    {queue, <<"MyQ">>},
                    *{arguments,[{<<"x-expires">>, long, 15000}]}*
                ]},
                {'queue.bind', [
                    {exchange, <<"MyQ-exchange">>},
                    {queue,    <<"MyQ">>}
                ]}

        ]}]}, 

Removing those two lines it started to work! So strange...



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32967.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Thu Jan 30 09:19:13 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 30 Jan 2014 13:19:13 +0400
Subject: [rabbitmq-discuss] shovel with authentication
In-Reply-To: <1391073107027-32967.post@n5.nabble.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <1391073107027-32967.post@n5.nabble.com>
Message-ID: <CAE3HoVQrxaXrz_fM8o9T628743=MFHQt7KHYXiKUyt4dmRMhAQ@mail.gmail.com>

2014-01-30 Tomas Tulka <tomas.tulka at atos.net>:

>         {declarations, [
>                 {'exchange.declare', [
>                     {exchange, <<"MyQ-exchange">>},
>                     {type, <<"direct">>},
>                     *auto_delete*
>                     ]},
>                 {'queue.declare', [
>                     {queue, <<"MyQ">>},
>                     *{arguments,[{<<"x-expires">>, long, 15000}]}*
>                 ]},
>                 {'queue.bind', [
>                     {exchange, <<"MyQ-exchange">>},
>                     {queue,    <<"MyQ">>}
>                 ]}
>
>         ]}]},
>
> Removing those two lines it started to work! So strange...
>

This suggests that the queue already existed but with different arguments.

If Shovel doesn't handle it, it should at least complain in the log.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/e17a6f6c/attachment.html>

From tomas.tulka at atos.net  Thu Jan 30 09:23:16 2014
From: tomas.tulka at atos.net (Tomas Tulka)
Date: Thu, 30 Jan 2014 01:23:16 -0800 (PST)
Subject: [rabbitmq-discuss] shovel with authentication
In-Reply-To: <CAE3HoVQrxaXrz_fM8o9T628743=MFHQt7KHYXiKUyt4dmRMhAQ@mail.gmail.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <1391073107027-32967.post@n5.nabble.com>
 <CAE3HoVQrxaXrz_fM8o9T628743=MFHQt7KHYXiKUyt4dmRMhAQ@mail.gmail.com>
Message-ID: <1391073796862-32969.post@n5.nabble.com>

> This suggests that the queue already existed but with different arguments.

Sure, for this test I changes the name of a queue to avoid this error...

Maybe the authorization and SSL deal badly with auto-deleting queues...
donno



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32969.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Thu Jan 30 09:27:19 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 30 Jan 2014 13:27:19 +0400
Subject: [rabbitmq-discuss] shovel with authentication
In-Reply-To: <1391073796862-32969.post@n5.nabble.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <1391073107027-32967.post@n5.nabble.com>
 <CAE3HoVQrxaXrz_fM8o9T628743=MFHQt7KHYXiKUyt4dmRMhAQ@mail.gmail.com>
 <1391073796862-32969.post@n5.nabble.com>
Message-ID: <CAE3HoVT1qtB3UkrG1qxZUAcvNe8ZFE9piFLunW_E44w0r8VxrQ@mail.gmail.com>

2014-01-30 Tomas Tulka <tomas.tulka at atos.net>:

> Sure, for this test I changes the name of a queue to avoid this error...
>
> Maybe the authorization and SSL deal badly with auto-deleting queues
>

No. When you try to re-declare a queue with different arguments, it results
in a channel error,
which closes the channel and makes messages published on it go to void.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/3b710ec3/attachment.html>

From tomas.tulka at atos.net  Thu Jan 30 09:43:42 2014
From: tomas.tulka at atos.net (Tomas Tulka)
Date: Thu, 30 Jan 2014 01:43:42 -0800 (PST)
Subject: [rabbitmq-discuss] shovel with authentication
In-Reply-To: <CAE3HoVT1qtB3UkrG1qxZUAcvNe8ZFE9piFLunW_E44w0r8VxrQ@mail.gmail.com>
References: <1390922096974-32914.post@n5.nabble.com>
 <1391073107027-32967.post@n5.nabble.com>
 <CAE3HoVQrxaXrz_fM8o9T628743=MFHQt7KHYXiKUyt4dmRMhAQ@mail.gmail.com>
 <1391073796862-32969.post@n5.nabble.com>
 <CAE3HoVT1qtB3UkrG1qxZUAcvNe8ZFE9piFLunW_E44w0r8VxrQ@mail.gmail.com>
Message-ID: <1391075022232-32971.post@n5.nabble.com>

> When you try to re-declare a queue with different arguments, it results in
a channel error
yes, I know, that's way I changed the name of the queue to create a complete
new one (see my previous post).




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/shovel-with-authentication-tp32914p32971.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at gopivotal.com  Thu Jan 30 10:00:24 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 30 Jan 2014 14:00:24 +0400
Subject: [rabbitmq-discuss] ANN Bunny 1.1.1 is released
Message-ID: <552FE0A5-F9F4-4E65-AFD0-3E38D01D6AAC@gopivotal.com>

Bunny [1] 1.1.1 is released.

Release notes:
http://blog.rubyrabbitmq.info/blog/2014/01/30/bunny-1-dot-1-1-is-released/

http://rubybunny.info
--
MK

Software Engineer, Pivotal/RabbitMQ


From mklishin at gopivotal.com  Thu Jan 30 10:01:07 2014
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 30 Jan 2014 14:01:07 +0400
Subject: [rabbitmq-discuss] ANN March Hare 2.1.1 is released
Message-ID: <31343788-666D-474F-B522-B9995BC7E465@gopivotal.com>

March Hare [1] 2.1.1 is released.

Release notes:
http://blog.rubyrabbitmq.info/blog/2014/01/30/march-hare-2-dot-1-1-is-released/

1. http://rubymarchhare.info
--
MK

Software Engineer, Pivotal/RabbitMQ


From naveen291983 at gmail.com  Thu Jan 30 10:16:03 2014
From: naveen291983 at gmail.com (naveen)
Date: Thu, 30 Jan 2014 02:16:03 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMq Clustering in AWS - Differnt Subnets
Message-ID: <1391076963032-32974.post@n5.nabble.com>

Hi ,

rabbitmq cluster not working 

>From rabbitmq1: rabbitmqctl join_cluster --ram rabbit at rabbitmq2
Clustering node 'rabbit at rabbitmq1' with 'rabbit at rabbitmq2' ...
Error: {cannot_discover_cluster,"The nodes provided are either offline or
not running"}

Confirmed below steps.

1. Able to ping with host names

2. Telnet to 4369 in both servers working fine

3. hash cookies are same at start up.

Start Up Logs: 

node           : rabbit at rabbitmq2
app descriptor :
/usr/lib/rabbitmq/lib/rabbitmq_server-3.0.4/sbin/../ebin/rabbit.app
home dir       : /var/lib/rabbitmq
config file(s) : /etc/rabbitmq/rabbitmq.config
cookie hash    : dpw2JO16GYICL07YCmCHOA==
log            : /var/log/rabbitmq/rabbit at rabbitmq2-.log
sasl log       : /var/log/rabbitmq/rabbit at rabbitmq2-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at rabbitmq2
erlang version : 5.8.5


node           : rabbit at rabbitmq1
app descriptor :
/usr/lib/rabbitmq/lib/rabbitmq_server-3.0.4/sbin/../ebin/rabbit.app
home dir       : /var/lib/rabbitmq
config file(s) : /etc/rabbitmq/rabbitmq.config
cookie hash    : dpw2JO16GYICL07YCmCHOA==
log            : /var/log/rabbitmq/rabbit at rabbitmq.log
sasl log       : /var/log/rabbitmq/rabbit at rabbitmq-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at rabbitmq
erlang version : 5.8.5

Please help me to resolve the issue

Thanks in advance
Naveen K




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMq-Clustering-in-AWS-Differnt-Subnets-tp32974.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From cwstorm at gmail.com  Thu Jan 30 15:13:07 2014
From: cwstorm at gmail.com (cw storm)
Date: Thu, 30 Jan 2014 10:13:07 -0500
Subject: [rabbitmq-discuss] How remove messages which must be ack
In-Reply-To: <793A7420-B621-46C1-9557-8DD936C4FD1C@rabbitmq.com>
References: <1387291762482-32168.post@n5.nabble.com>
 <DACA5C9B-4F70-4213-9D79-39A3F209C2E9@rabbitmq.com>
 <1389967821435-32669.post@n5.nabble.com>
 <793A7420-B621-46C1-9557-8DD936C4FD1C@rabbitmq.com>
Message-ID: <CAETr1H8stWG==bi7VCKkLfLh787CmruNZ2UMLw-5LtU=dfu=8w@mail.gmail.com>

Hi MK,

Couldn't something be configured on the queue that if the message is in
"unack" status for certain amount of time, it can be requeue or that
connection could be automatically closed?


On Fri, Jan 17, 2014 at 9:19 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

> On 17 Jan 2014, at 18:10, rabbit15 <bison_art at o2.pl> wrote:
>
> > There is existing, working Rabbit environment with queues, exchanges,
> > producers and consumers working. What I need is to clear every queue
> (delete
> > ack'ed and unack'ed messages). I have no acces to existing consumers
> > objects, hovewer i could create new one just for this purpose. Current
> > consumers should be not disturbed and after clear, whole environment
> should
> > work as previously. The main problem is, that Purge method does not
> delete
> > messages, which awaits for acknowledments. I want to be sure, that EVERY
> > message is already deleted.
> >
> > Is there any way to perform such operation?
>
> You cannot remove messages that are unacknowledged.
>
> You can forcefully close their connections, which will cause messages to
> be requeued,
> the purge the queue.
>
> MK
>
> Software Engineer, Pivotal/RabbitMQ
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/d706d882/attachment.html>

From stammailbox at gmail.com  Thu Jan 30 15:41:37 2014
From: stammailbox at gmail.com (rails)
Date: Thu, 30 Jan 2014 17:41:37 +0200
Subject: [rabbitmq-discuss] Replacing the management plugin default port
Message-ID: <CAJ2-VrnUvB105ODdsZcKXHp_3NgB0kZ1mBC3qPypqUVvL_AF4A@mail.gmail.com>

I am running 3 instances of rabbit in my windows computer (to learn about
clustering)
I am trying activate the managment plugin for all three instances.

I have updated the batch file and the instances are loaded each with the
management plugin.
but not together.
I need to change the default port.

So I renamed rabbitmq.config.example  to rabbitmq.config (in
..\rabbitmq_server-3.2.2\etc)

And I have replaced all of the text under


 {rabbitmq_management,
  [%% Pre-Load schema definitions from the following JSON file. See
   ...


   %%
   %% {listener, [{port,     12345},
   %%             {ip,       "127.0.0.1"},
   %%             {ssl,      true},
   %%             {ssl_opts, [{cacertfile, "/path/to/cacert.pem"},
   %%                         {certfile,   "/path/to/cert.pem"},
   %%                         {keyfile,    "/path/to/key.pem"}]}]},

   ...
  ]},

with the following:


    {rabbitmq_management,
     [
{listener, [{port, 5690}]}
     ]},

But still I was able to connect to the ui through 15672 (default) only.

What did I do wrong?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/8c3da12d/attachment.html>

From kyleo at 0b10.mx  Thu Jan 30 15:54:45 2014
From: kyleo at 0b10.mx (Kyle O'Donnell)
Date: Thu, 30 Jan 2014 10:54:45 -0500 (EST)
Subject: [rabbitmq-discuss] Replacing the management plugin default port
In-Reply-To: <CAJ2-VrnUvB105ODdsZcKXHp_3NgB0kZ1mBC3qPypqUVvL_AF4A@mail.gmail.com>
References: <CAJ2-VrnUvB105ODdsZcKXHp_3NgB0kZ1mBC3qPypqUVvL_AF4A@mail.gmail.com>
Message-ID: <517495158.68952.1391097285968.JavaMail.zimbra@0b10.mx>

i think you might need to disable the old port:

 {rabbitmq_management,
  [{listener, [{port, 15672}
              ]},
                {redirect_old_port,false}




----- Original Message -----
From: "rails" <stammailbox at gmail.com>
To: rabbitmq-discuss at lists.rabbitmq.com
Sent: Thursday, January 30, 2014 10:41:37 AM
Subject: [rabbitmq-discuss] Replacing the management plugin default port

I am running 3 instances of rabbit in my windows computer (to learn about clustering) 
I am trying activate the managment plugin for all three instances. 

I have updated the batch file and the instances are loaded each with the management plugin. 
but not together. 
I need to change the default port. 

So I renamed rabbitmq.config.example to rabbitmq.config (in ..\rabbitmq_server-3.2.2\etc) 

And I have replaced all of the text under 


{rabbitmq_management, 
[%% Pre-Load schema definitions from the following JSON file. See 
... 


%% 
%% {listener, [{port, 12345}, 
%% {ip, "127.0.0.1"}, 
%% {ssl, true}, 
%% {ssl_opts, [{cacertfile, "/path/to/cacert.pem"}, 
%% {certfile, "/path/to/cert.pem"}, 
%% {keyfile, "/path/to/key.pem"}]}]}, 

... 
]}, 

with the following: 


{rabbitmq_management, 
[ 
{listener, [{port, 5690}]} 
]}, 

But still I was able to connect to the ui through 15672 (default) only. 

What did I do wrong? 

_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From cwstorm at gmail.com  Thu Jan 30 16:30:06 2014
From: cwstorm at gmail.com (cw storm)
Date: Thu, 30 Jan 2014 11:30:06 -0500
Subject: [rabbitmq-discuss] How to check if custom headers attribute exist
Message-ID: <CAETr1H8rxOK91Cd50OPzyOPYZNZ-m+iBcb_oShn5s14Lh9QNwQ@mail.gmail.com>

Please forgive me but I have a simple question.  How can I check to see if
there's custom header attribute exist or not before I perform the below:

String strFirstName = props.getHeaders().get("FirstName").toString()

I believe if there's no custom headers, then it'll exception.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/e113423b/attachment.html>

From not.drew.stevens at gmail.com  Thu Jan 30 16:33:24 2014
From: not.drew.stevens at gmail.com (Not Drew Stevens)
Date: Thu, 30 Jan 2014 08:33:24 -0800
Subject: [rabbitmq-discuss] exact number of mirrored queues on selective set
	of nodes
Message-ID: <52EA7ED4.7060409@gmail.com>

Hello,

I'm interested in setting up a rabbit cluster topology containing four
nodes. (A, B, C, D)

Based on a pattern match, a subset of HA queues are required to be
mirrored on two nodes, *but* only on the nodes A, B or C, never D.

What I'm after amounts to a hybrid of ha-mode options: exactly and
nodes.  Is this possible?

Thank you for the help.

Cheers,
Drew
RabbitMQ in Action RabbitMQ in Action
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/b9e086f3/attachment.html>

From bj2 at sanger.ac.uk  Thu Jan 30 16:39:35 2014
From: bj2 at sanger.ac.uk (Beth Jones)
Date: Thu, 30 Jan 2014 16:39:35 +0000
Subject: [rabbitmq-discuss] Backing up persisted messages
Message-ID: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>

Hello

What's the best way to backup persistent messages?  I have a queue that contains messages that aren't being consumed and I want to create a back up of them.

Thanks in advance.

Beth

-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

From simon at rabbitmq.com  Thu Jan 30 16:40:06 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 30 Jan 2014 16:40:06 +0000
Subject: [rabbitmq-discuss] exact number of mirrored queues on selective
 set of nodes
In-Reply-To: <52EA7ED4.7060409@gmail.com>
References: <52EA7ED4.7060409@gmail.com>
Message-ID: <52EA8066.5090606@rabbitmq.com>

On 30/01/14 16:33, Not Drew Stevens wrote:
> What I'm after amounts to a hybrid of ha-mode options: exactly and
> nodes.  Is this possible?

Not built into the server, no.

You could get this behaviour with an external agent monitoring queues 
and driving changes to a nodes policy for each queue, or by doing some 
Erlang hacking and implementing the rabbit_mirror_queue_mode behaviour 
in a plugin.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From pat at munkiisoft.com  Thu Jan 30 16:47:12 2014
From: pat at munkiisoft.com (Patrick Long)
Date: Thu, 30 Jan 2014 16:47:12 +0000
Subject: [rabbitmq-discuss] Messages unexpectedly moving from Unacked to
	Ready
Message-ID: <CALDntb9_jh+zf0MOuOvsx9h642ksEC6Amqk8m+oAF1rF+e5ZEA@mail.gmail.com>

We are seeing messages occasionally moving from Unacked back to Ready
whilst we are busy process them

Our windows service dequeues

channel.BasicGet(workQueueName, *false*);

(Note NoAck being set to false.)

Once we finish processing the contents of the message we will call

channel.BasicAck(message.DeliveryTag, false)

Some messages are being moved back to Ready in the test environment even
without us explicitly called BasciAck

The test environment where we are seeing this has a Load Balancer in from
of the 2 node RabbitMq cluster

Does anyone have any idea what would be causing the message to go back to
Ready?

Thanks



-- 
Patrick Long - Munkiisoft Ltd
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/af630fbc/attachment.html>

From simon at rabbitmq.com  Thu Jan 30 16:51:31 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 30 Jan 2014 16:51:31 +0000
Subject: [rabbitmq-discuss] Messages unexpectedly moving from Unacked to
 Ready
In-Reply-To: <CALDntb9_jh+zf0MOuOvsx9h642ksEC6Amqk8m+oAF1rF+e5ZEA@mail.gmail.com>
References: <CALDntb9_jh+zf0MOuOvsx9h642ksEC6Amqk8m+oAF1rF+e5ZEA@mail.gmail.com>
Message-ID: <52EA8313.8060007@rabbitmq.com>

On 30/01/14 16:47, Patrick Long wrote:
> Does anyone have any idea what would be causing the message to go back
> to Ready?

One of three things (in roughly descending order of likelihood):

* if the client closes its connection / channel without acknowledging 
the message

* if the client sends basic.reject or basic.nack with requeue=true for 
the message

* if the client calls basic.recover without acknowledging the message

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From tim at rabbitmq.com  Thu Jan 30 16:58:49 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Thu, 30 Jan 2014 16:58:49 +0000
Subject: [rabbitmq-discuss] How to check if custom headers attribute
	exist
In-Reply-To: <CAETr1H8rxOK91Cd50OPzyOPYZNZ-m+iBcb_oShn5s14Lh9QNwQ@mail.gmail.com>
References: <CAETr1H8rxOK91Cd50OPzyOPYZNZ-m+iBcb_oShn5s14Lh9QNwQ@mail.gmail.com>
Message-ID: <559E9622-07C2-4C53-BF20-F3944D6D8C51@rabbitmq.com>

BasicProperties#getHeaders() returns a Map, so Map#get(key) will return `null' if the key isn't present. It's your #toString() on `null' that is likely causing the problem. You could also call Map#containsKey("FirstName") instead of checking for `null' if you prefer.

Cheers,
Tim

On 30 Jan 2014, at 16:30, cw storm wrote:

> Please forgive me but I have a simple question.  How can I check to see if there's custom header attribute exist or not before I perform the below:
> 
> String strFirstName = props.getHeaders().get("FirstName").toString()
> 
> I believe if there's no custom headers, then it'll exception.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


From simon at rabbitmq.com  Thu Jan 30 17:00:56 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 30 Jan 2014 17:00:56 +0000
Subject: [rabbitmq-discuss] Messages unexpectedly moving from Unacked to
 Ready
In-Reply-To: <52EA8313.8060007@rabbitmq.com>
References: <CALDntb9_jh+zf0MOuOvsx9h642ksEC6Amqk8m+oAF1rF+e5ZEA@mail.gmail.com>
 <52EA8313.8060007@rabbitmq.com>
Message-ID: <52EA8548.2060503@rabbitmq.com>

On 30/01/14 16:51, Simon MacMullen wrote:
> * if the client closes its connection / channel without acknowledging
> the message

Of course the client might not be the one deciding this, the load 
balancer might close the connection for some reason.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From tim at rabbitmq.com  Thu Jan 30 17:04:58 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Thu, 30 Jan 2014 17:04:58 +0000
Subject: [rabbitmq-discuss] Backing up persisted messages
In-Reply-To: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>
References: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>
Message-ID: <5A215BC7-7608-40C7-AA69-8DA37E1CD547@rabbitmq.com>

It really depends on what you mean by "backup". What are you trying to achieve? Do you need resiliency (i.e., avoiding data loss), are you trying to conserve disk space, or is there some other requirement at play?

For resiliency, clustering + HA offers a good set of guarantees if you're on a reliable network. You can also use the shovel and/or federation plugins to replicate messages between RabbitMQ nodes. The only other alternative would be backing up the mnesia directory, but that would copy all the data for all queues (and a bunch of other stuff too).

I'd suggest looking at the shovel or federation plugins. You can replicate data and handle it differently depending on your needs, e.g., to archive messages you want to deal with much later on, you might consume the replicated messages and archive them to a persistent storage medium of your choice, to be "replayed" later.

http://www.rabbitmq.com/distributed.html is probably worth a read. 

Cheers,
Tim

On 30 Jan 2014, at 16:39, Beth Jones wrote:

> Hello
> 
> What's the best way to backup persistent messages?  I have a queue that contains messages that aren't being consumed and I want to create a back up of them.
> 
> Thanks in advance.
> 
> Beth
> 
> -- 
> The Wellcome Trust Sanger Institute is operated by Genome Research 
> Limited, a charity registered in England with number 1021457 and a 
> company registered in England with number 2742969, whose registered 
> office is 215 Euston Road, London, NW1 2BE. 
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


From pat at munkiisoft.com  Thu Jan 30 17:12:37 2014
From: pat at munkiisoft.com (Patrick Long)
Date: Thu, 30 Jan 2014 17:12:37 +0000
Subject: [rabbitmq-discuss] Messages unexpectedly moving from Unacked to
	Ready
In-Reply-To: <52EA8548.2060503@rabbitmq.com>
References: <CALDntb9_jh+zf0MOuOvsx9h642ksEC6Amqk8m+oAF1rF+e5ZEA@mail.gmail.com>
 <52EA8313.8060007@rabbitmq.com> <52EA8548.2060503@rabbitmq.com>
Message-ID: <CALDntb8-4rFO9hSmokJMuJbB1b=HUgJvkrwpuvvwJYrYBvWEJg@mail.gmail.com>

Ah so that makes it sound like the connection does not need to be closed by
the specific channel for that to happen


On 30 January 2014 17:00, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 30/01/14 16:51, Simon MacMullen wrote:
>
>> * if the client closes its connection / channel without acknowledging
>> the message
>>
>
> Of course the client might not be the one deciding this, the load balancer
> might close the connection for some reason.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
>



-- 
Patrick Long - Munkiisoft Ltd
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/74d6cbb7/attachment.html>

From simon at rabbitmq.com  Thu Jan 30 17:13:06 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 30 Jan 2014 17:13:06 +0000
Subject: [rabbitmq-discuss] Messages unexpectedly moving from Unacked to
 Ready
In-Reply-To: <CALDntb8p1DDXu1DQhe=-i0XUdTH+1Tkz8Feugnd9x-R0i1AqqQ@mail.gmail.com>
References: <CALDntb9_jh+zf0MOuOvsx9h642ksEC6Amqk8m+oAF1rF+e5ZEA@mail.gmail.com>
 <52EA8313.8060007@rabbitmq.com>
 <CALDntb8p1DDXu1DQhe=-i0XUdTH+1Tkz8Feugnd9x-R0i1AqqQ@mail.gmail.com>
Message-ID: <52EA8822.1050706@rabbitmq.com>

On 30/01/14 17:10, Patrick Long wrote:
> The only way I could see it happen was if one of the other processing
> threads looking at the _*same *_queue called close. However they do not
> share channels and I assume that closing on a channel different to the
> one that retrieved the message would not effect the Unacked state, correct?

That's correct. Closing a channel releases all the unacked messages on 
that channel...

On 30/01/14 17:12, Patrick Long wrote:
> Ah so that makes it sound like the connection does not need to be
> closed by the specific channel for that to happen

...and closing a connection implicitly closes all the channels on that 
connection, releasing all their unacked messages.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From cwstorm at gmail.com  Thu Jan 30 17:18:59 2014
From: cwstorm at gmail.com (cw storm)
Date: Thu, 30 Jan 2014 12:18:59 -0500
Subject: [rabbitmq-discuss] How to check if custom headers attribute
	exist
In-Reply-To: <559E9622-07C2-4C53-BF20-F3944D6D8C51@rabbitmq.com>
References: <CAETr1H8rxOK91Cd50OPzyOPYZNZ-m+iBcb_oShn5s14Lh9QNwQ@mail.gmail.com>
 <559E9622-07C2-4C53-BF20-F3944D6D8C51@rabbitmq.com>
Message-ID: <CAETr1H_-f=Wx7ut6kc7SHTMD3eu2Ynx0h_afWzgOg3wHmhmT6A@mail.gmail.com>

Thanks Tim.  How do code to see if the key is there or not?


On Thu, Jan 30, 2014 at 11:58 AM, Tim Watson <tim at rabbitmq.com> wrote:

> BasicProperties#getHeaders() returns a Map, so Map#get(key) will return
> `null' if the key isn't present. It's your #toString() on `null' that is
> likely causing the problem. You could also call
> Map#containsKey("FirstName") instead of checking for `null' if you prefer.
>
> Cheers,
> Tim
>
> On 30 Jan 2014, at 16:30, cw storm wrote:
>
> > Please forgive me but I have a simple question.  How can I check to see
> if there's custom header attribute exist or not before I perform the below:
> >
> > String strFirstName = props.getHeaders().get("FirstName").toString()
> >
> > I believe if there's no custom headers, then it'll exception.
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-discuss at lists.rabbitmq.com
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/cb7ec20c/attachment.html>

From cwstorm at gmail.com  Thu Jan 30 17:26:12 2014
From: cwstorm at gmail.com (cw storm)
Date: Thu, 30 Jan 2014 12:26:12 -0500
Subject: [rabbitmq-discuss] How to check if custom headers attribute
	exist
In-Reply-To: <CAETr1H_-f=Wx7ut6kc7SHTMD3eu2Ynx0h_afWzgOg3wHmhmT6A@mail.gmail.com>
References: <CAETr1H8rxOK91Cd50OPzyOPYZNZ-m+iBcb_oShn5s14Lh9QNwQ@mail.gmail.com>
 <559E9622-07C2-4C53-BF20-F3944D6D8C51@rabbitmq.com>
 <CAETr1H_-f=Wx7ut6kc7SHTMD3eu2Ynx0h_afWzgOg3wHmhmT6A@mail.gmail.com>
Message-ID: <CAETr1H_Y_EbvFM0t7XvoNz1H9hSMt7fwz55W9rFC_pkb8ucUXQ@mail.gmail.com>

Does this look right?

Map<String,object> headers = properties.getHeaders();

if (headers.containsKey("FirstName")) {
        String strFirstName = props.getHeaders().get("
FirstName").toString();
}



On Thu, Jan 30, 2014 at 12:18 PM, cw storm <cwstorm at gmail.com> wrote:

> Thanks Tim.  How do code to see if the key is there or not?
>
>
> On Thu, Jan 30, 2014 at 11:58 AM, Tim Watson <tim at rabbitmq.com> wrote:
>
>> BasicProperties#getHeaders() returns a Map, so Map#get(key) will return
>> `null' if the key isn't present. It's your #toString() on `null' that is
>> likely causing the problem. You could also call
>> Map#containsKey("FirstName") instead of checking for `null' if you prefer.
>>
>> Cheers,
>> Tim
>>
>> On 30 Jan 2014, at 16:30, cw storm wrote:
>>
>> > Please forgive me but I have a simple question.  How can I check to see
>> if there's custom header attribute exist or not before I perform the below:
>> >
>> > String strFirstName = props.getHeaders().get("FirstName").toString()
>> >
>> > I believe if there's no custom headers, then it'll exception.
>> > _______________________________________________
>> > rabbitmq-discuss mailing list
>> > rabbitmq-discuss at lists.rabbitmq.com
>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/c7cf296a/attachment.html>

From pat at munkiisoft.com  Thu Jan 30 17:26:56 2014
From: pat at munkiisoft.com (Patrick Long)
Date: Thu, 30 Jan 2014 17:26:56 +0000
Subject: [rabbitmq-discuss] Messages unexpectedly moving from Unacked to
	Ready
In-Reply-To: <52EA8822.1050706@rabbitmq.com>
References: <CALDntb9_jh+zf0MOuOvsx9h642ksEC6Amqk8m+oAF1rF+e5ZEA@mail.gmail.com>
 <52EA8313.8060007@rabbitmq.com>
 <CALDntb8p1DDXu1DQhe=-i0XUdTH+1Tkz8Feugnd9x-R0i1AqqQ@mail.gmail.com>
 <52EA8822.1050706@rabbitmq.com>
Message-ID: <CALDntb9zt-CQX=2itdPuXLtQcrUvw0Utt8m3Qn094036GxiJKA@mail.gmail.com>

The load balancer closing connections would look something like this in the
RMQ logs, yes?

=WARNING REPORT==== 30-Jan-2014::15:25:08 ===
closing AMQP connection <0.31743.12> (10.206.20.1:2750 -> 10.206.20.167:5672
):
connection_closed_abruptly

Those happen between 1 and 3 times a minute. Is this a common problem? We
obviously need load balancing to make use of clustering.

Is there a way of keeping the connection Alive?

Pat




On 30 January 2014 17:13, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 30/01/14 17:10, Patrick Long wrote:
>
>> The only way I could see it happen was if one of the other processing
>> threads looking at the _*same *_queue called close. However they do not
>> share channels and I assume that closing on a channel different to the
>> one that retrieved the message would not effect the Unacked state,
>> correct?
>>
>
> That's correct. Closing a channel releases all the unacked messages on
> that channel...
>
> On 30/01/14 17:12, Patrick Long wrote:
>
>> Ah so that makes it sound like the connection does not need to be
>> closed by the specific channel for that to happen
>>
>
> ...and closing a connection implicitly closes all the channels on that
> connection, releasing all their unacked messages.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
>



-- 
Patrick Long - Munkiisoft Ltd
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/ed2d5742/attachment.html>

From simon at rabbitmq.com  Thu Jan 30 17:28:31 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 30 Jan 2014 17:28:31 +0000
Subject: [rabbitmq-discuss] Messages unexpectedly moving from Unacked to
 Ready
In-Reply-To: <CALDntb9zt-CQX=2itdPuXLtQcrUvw0Utt8m3Qn094036GxiJKA@mail.gmail.com>
References: <CALDntb9_jh+zf0MOuOvsx9h642ksEC6Amqk8m+oAF1rF+e5ZEA@mail.gmail.com>
 <52EA8313.8060007@rabbitmq.com>
 <CALDntb8p1DDXu1DQhe=-i0XUdTH+1Tkz8Feugnd9x-R0i1AqqQ@mail.gmail.com>
 <52EA8822.1050706@rabbitmq.com>
 <CALDntb9zt-CQX=2itdPuXLtQcrUvw0Utt8m3Qn094036GxiJKA@mail.gmail.com>
Message-ID: <52EA8BBF.20600@rabbitmq.com>

On 30/01/14 17:26, Patrick Long wrote:
> The load balancer closing connections would look something like this in
> the RMQ logs, yes?
>
> =WARNING REPORT==== 30-Jan-2014::15:25:08 ===
> closing AMQP connection <0.31743.12> (10.206.20.1:2750
> <http://10.206.20.1:2750> -> 10.206.20.167:5672
> <http://10.206.20.167:5672>):
> connection_closed_abruptly

Yes.

> Those happen between 1 and 3 times a minute. Is this a common problem?
> We obviously need load balancing to make use of clustering.
>
> Is there a way of keeping the connection Alive?

That's down to how the load balancer is configured. If the load balancer 
is closing connections because it perceives them to be inactive, 
lowering the AMQP heartbeat interval might prevent you from having to 
reconfigure the load balancer.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From michael.laing at nytimes.com  Thu Jan 30 17:34:21 2014
From: michael.laing at nytimes.com (Laing, Michael)
Date: Thu, 30 Jan 2014 12:34:21 -0500
Subject: [rabbitmq-discuss] Messages unexpectedly moving from Unacked to
	Ready
In-Reply-To: <52EA8BBF.20600@rabbitmq.com>
References: <CALDntb9_jh+zf0MOuOvsx9h642ksEC6Amqk8m+oAF1rF+e5ZEA@mail.gmail.com>
 <52EA8313.8060007@rabbitmq.com>
 <CALDntb8p1DDXu1DQhe=-i0XUdTH+1Tkz8Feugnd9x-R0i1AqqQ@mail.gmail.com>
 <52EA8822.1050706@rabbitmq.com>
 <CALDntb9zt-CQX=2itdPuXLtQcrUvw0Utt8m3Qn094036GxiJKA@mail.gmail.com>
 <52EA8BBF.20600@rabbitmq.com>
Message-ID: <CAKgmDnF4MeNgWfOv6r70jS+yysh4Fbkxh+pLpYCwEFfOhb3Y5A@mail.gmail.com>

20 seconds is a good heartbeat interval for most load balancers that I have
tried. -ml


On Thu, Jan 30, 2014 at 12:28 PM, Simon MacMullen <simon at rabbitmq.com>wrote:

> On 30/01/14 17:26, Patrick Long wrote:
>
>> The load balancer closing connections would look something like this in
>> the RMQ logs, yes?
>>
>> =WARNING REPORT==== 30-Jan-2014::15:25:08 ===
>> closing AMQP connection <0.31743.12> (10.206.20.1:2750
>> <http://10.206.20.1:2750> -> 10.206.20.167:5672
>> <http://10.206.20.167:5672>):
>> connection_closed_abruptly
>>
>
> Yes.
>
>
>  Those happen between 1 and 3 times a minute. Is this a common problem?
>> We obviously need load balancing to make use of clustering.
>>
>> Is there a way of keeping the connection Alive?
>>
>
> That's down to how the load balancer is configured. If the load balancer
> is closing connections because it perceives them to be inactive, lowering
> the AMQP heartbeat interval might prevent you from having to reconfigure
> the load balancer.
>
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/e8bc0691/attachment.html>

From cwstorm at gmail.com  Thu Jan 30 17:35:48 2014
From: cwstorm at gmail.com (cw storm)
Date: Thu, 30 Jan 2014 12:35:48 -0500
Subject: [rabbitmq-discuss] How to check if custom headers attribute
	exist
In-Reply-To: <CAETr1H_Y_EbvFM0t7XvoNz1H9hSMt7fwz55W9rFC_pkb8ucUXQ@mail.gmail.com>
References: <CAETr1H8rxOK91Cd50OPzyOPYZNZ-m+iBcb_oShn5s14Lh9QNwQ@mail.gmail.com>
 <559E9622-07C2-4C53-BF20-F3944D6D8C51@rabbitmq.com>
 <CAETr1H_-f=Wx7ut6kc7SHTMD3eu2Ynx0h_afWzgOg3wHmhmT6A@mail.gmail.com>
 <CAETr1H_Y_EbvFM0t7XvoNz1H9hSMt7fwz55W9rFC_pkb8ucUXQ@mail.gmail.com>
Message-ID: <CAETr1H_2jBX6ekWB1UmKeETHLdM2CdsuogBTOXSy4R9om2vQVg@mail.gmail.com>

Actually, I need to check if "FirstName" is null or not in order to use
toString().


On Thu, Jan 30, 2014 at 12:26 PM, cw storm <cwstorm at gmail.com> wrote:

> Does this look right?
>
> Map<String,object> headers = properties.getHeaders();
>
> if (headers.containsKey("FirstName")) {
>         String strFirstName = props.getHeaders().get("
> FirstName").toString();
> }
>
>
>
> On Thu, Jan 30, 2014 at 12:18 PM, cw storm <cwstorm at gmail.com> wrote:
>
>> Thanks Tim.  How do code to see if the key is there or not?
>>
>>
>> On Thu, Jan 30, 2014 at 11:58 AM, Tim Watson <tim at rabbitmq.com> wrote:
>>
>>> BasicProperties#getHeaders() returns a Map, so Map#get(key) will return
>>> `null' if the key isn't present. It's your #toString() on `null' that is
>>> likely causing the problem. You could also call
>>> Map#containsKey("FirstName") instead of checking for `null' if you prefer.
>>>
>>> Cheers,
>>> Tim
>>>
>>> On 30 Jan 2014, at 16:30, cw storm wrote:
>>>
>>> > Please forgive me but I have a simple question.  How can I check to
>>> see if there's custom header attribute exist or not before I perform the
>>> below:
>>> >
>>> > String strFirstName = props.getHeaders().get("FirstName").toString()
>>> >
>>> > I believe if there's no custom headers, then it'll exception.
>>> > _______________________________________________
>>> > rabbitmq-discuss mailing list
>>> > rabbitmq-discuss at lists.rabbitmq.com
>>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/36283220/attachment.html>

From cwstorm at gmail.com  Thu Jan 30 17:38:44 2014
From: cwstorm at gmail.com (cw storm)
Date: Thu, 30 Jan 2014 12:38:44 -0500
Subject: [rabbitmq-discuss] How to check if custom headers attribute
	exist
In-Reply-To: <CAETr1H_2jBX6ekWB1UmKeETHLdM2CdsuogBTOXSy4R9om2vQVg@mail.gmail.com>
References: <CAETr1H8rxOK91Cd50OPzyOPYZNZ-m+iBcb_oShn5s14Lh9QNwQ@mail.gmail.com>
 <559E9622-07C2-4C53-BF20-F3944D6D8C51@rabbitmq.com>
 <CAETr1H_-f=Wx7ut6kc7SHTMD3eu2Ynx0h_afWzgOg3wHmhmT6A@mail.gmail.com>
 <CAETr1H_Y_EbvFM0t7XvoNz1H9hSMt7fwz55W9rFC_pkb8ucUXQ@mail.gmail.com>
 <CAETr1H_2jBX6ekWB1UmKeETHLdM2CdsuogBTOXSy4R9om2vQVg@mail.gmail.com>
Message-ID: <CAETr1H98m+8cSXP_kmJEVmSZ6PUE=CphPe8mN07Qn4ckPRzVwQ@mail.gmail.com>

Can I do a check something like below?

if (headers.getHeaders().get("FirstName") != null))


On Thu, Jan 30, 2014 at 12:35 PM, cw storm <cwstorm at gmail.com> wrote:

> Actually, I need to check if "FirstName" is null or not in order to use
> toString().
>
>
> On Thu, Jan 30, 2014 at 12:26 PM, cw storm <cwstorm at gmail.com> wrote:
>
>> Does this look right?
>>
>> Map<String,object> headers = properties.getHeaders();
>>
>> if (headers.containsKey("FirstName")) {
>>         String strFirstName = props.getHeaders().get("
>> FirstName").toString();
>>  }
>>
>>
>>
>> On Thu, Jan 30, 2014 at 12:18 PM, cw storm <cwstorm at gmail.com> wrote:
>>
>>> Thanks Tim.  How do code to see if the key is there or not?
>>>
>>>
>>> On Thu, Jan 30, 2014 at 11:58 AM, Tim Watson <tim at rabbitmq.com> wrote:
>>>
>>>> BasicProperties#getHeaders() returns a Map, so Map#get(key) will return
>>>> `null' if the key isn't present. It's your #toString() on `null' that is
>>>> likely causing the problem. You could also call
>>>> Map#containsKey("FirstName") instead of checking for `null' if you prefer.
>>>>
>>>> Cheers,
>>>> Tim
>>>>
>>>> On 30 Jan 2014, at 16:30, cw storm wrote:
>>>>
>>>> > Please forgive me but I have a simple question.  How can I check to
>>>> see if there's custom header attribute exist or not before I perform the
>>>> below:
>>>> >
>>>> > String strFirstName = props.getHeaders().get("FirstName").toString()
>>>> >
>>>> > I believe if there's no custom headers, then it'll exception.
>>>> > _______________________________________________
>>>> > rabbitmq-discuss mailing list
>>>> > rabbitmq-discuss at lists.rabbitmq.com
>>>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>
>>>> _______________________________________________
>>>> rabbitmq-discuss mailing list
>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>
>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/85f21637/attachment.html>

From bj2 at sanger.ac.uk  Thu Jan 30 17:58:08 2014
From: bj2 at sanger.ac.uk (Beth Jones)
Date: Thu, 30 Jan 2014 17:58:08 +0000
Subject: [rabbitmq-discuss] Backing up persisted messages
In-Reply-To: <5A215BC7-7608-40C7-AA69-8DA37E1CD547@rabbitmq.com>
References: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>
 <5A215BC7-7608-40C7-AA69-8DA37E1CD547@rabbitmq.com>
Message-ID: <35AFF8FD-1F60-447A-8AF7-F403059C9481@sanger.ac.uk>

Thanks Tim.

Specifically I have a queue that is accumulating messages and I'm worried about those messages being deleted accidentally.  I want to be able to back up that queue on a regular basis (say daily or hourly) to a location on disk.  

I read about copying the mnesia directory.  Does that copy all the data for all of the queue on that node?  Is there something similar that is queue specific?

Beth



On 30 Jan 2014, at 17:04, Tim Watson wrote:

> It really depends on what you mean by "backup". What are you trying to achieve? Do you need resiliency (i.e., avoiding data loss), are you trying to conserve disk space, or is there some other requirement at play?
> 
> For resiliency, clustering + HA offers a good set of guarantees if you're on a reliable network. You can also use the shovel and/or federation plugins to replicate messages between RabbitMQ nodes. The only other alternative would be backing up the mnesia directory, but that would copy all the data for all queues (and a bunch of other stuff too).
> 
> I'd suggest looking at the shovel or federation plugins. You can replicate data and handle it differently depending on your needs, e.g., to archive messages you want to deal with much later on, you might consume the replicated messages and archive them to a persistent storage medium of your choice, to be "replayed" later.
> 
> http://www.rabbitmq.com/distributed.html is probably worth a read. 
> 
> Cheers,
> Tim
> 
> On 30 Jan 2014, at 16:39, Beth Jones wrote:
> 
>> Hello
>> 
>> What's the best way to backup persistent messages?  I have a queue that contains messages that aren't being consumed and I want to create a back up of them.
>> 
>> Thanks in advance.
>> 
>> Beth
>> 
>> -- 
>> The Wellcome Trust Sanger Institute is operated by Genome Research 
>> Limited, a charity registered in England with number 1021457 and a 
>> company registered in England with number 2742969, whose registered 
>> office is 215 Euston Road, London, NW1 2BE. 
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss



-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

From cwstorm at gmail.com  Thu Jan 30 18:24:38 2014
From: cwstorm at gmail.com (cw storm)
Date: Thu, 30 Jan 2014 13:24:38 -0500
Subject: [rabbitmq-discuss] How to check if custom headers attribute
	exist
In-Reply-To: <CAETr1H98m+8cSXP_kmJEVmSZ6PUE=CphPe8mN07Qn4ckPRzVwQ@mail.gmail.com>
References: <CAETr1H8rxOK91Cd50OPzyOPYZNZ-m+iBcb_oShn5s14Lh9QNwQ@mail.gmail.com>
 <559E9622-07C2-4C53-BF20-F3944D6D8C51@rabbitmq.com>
 <CAETr1H_-f=Wx7ut6kc7SHTMD3eu2Ynx0h_afWzgOg3wHmhmT6A@mail.gmail.com>
 <CAETr1H_Y_EbvFM0t7XvoNz1H9hSMt7fwz55W9rFC_pkb8ucUXQ@mail.gmail.com>
 <CAETr1H_2jBX6ekWB1UmKeETHLdM2CdsuogBTOXSy4R9om2vQVg@mail.gmail.com>
 <CAETr1H98m+8cSXP_kmJEVmSZ6PUE=CphPe8mN07Qn4ckPRzVwQ@mail.gmail.com>
Message-ID: <CAETr1H9zBe=87H169svWCJ57FLHJCFnbdLh6msmUDjB=4VDD1A@mail.gmail.com>

Nevermind.  I was able to get around my issue.  During publish, I should
not populate the key.  That way, during consumption, I can use the method
"containsKey" properly.  Thanks.

-PH


On Thu, Jan 30, 2014 at 12:38 PM, cw storm <cwstorm at gmail.com> wrote:

> Can I do a check something like below?
>
> if (headers.getHeaders().get("FirstName") != null))
>
>
> On Thu, Jan 30, 2014 at 12:35 PM, cw storm <cwstorm at gmail.com> wrote:
>
>> Actually, I need to check if "FirstName" is null or not in order to use
>> toString().
>>
>>
>> On Thu, Jan 30, 2014 at 12:26 PM, cw storm <cwstorm at gmail.com> wrote:
>>
>>> Does this look right?
>>>
>>> Map<String,object> headers = properties.getHeaders();
>>>
>>> if (headers.containsKey("FirstName")) {
>>>         String strFirstName = props.getHeaders().get("
>>> FirstName").toString();
>>>  }
>>>
>>>
>>>
>>> On Thu, Jan 30, 2014 at 12:18 PM, cw storm <cwstorm at gmail.com> wrote:
>>>
>>>> Thanks Tim.  How do code to see if the key is there or not?
>>>>
>>>>
>>>> On Thu, Jan 30, 2014 at 11:58 AM, Tim Watson <tim at rabbitmq.com> wrote:
>>>>
>>>>> BasicProperties#getHeaders() returns a Map, so Map#get(key) will
>>>>> return `null' if the key isn't present. It's your #toString() on `null'
>>>>> that is likely causing the problem. You could also call
>>>>> Map#containsKey("FirstName") instead of checking for `null' if you prefer.
>>>>>
>>>>> Cheers,
>>>>> Tim
>>>>>
>>>>> On 30 Jan 2014, at 16:30, cw storm wrote:
>>>>>
>>>>> > Please forgive me but I have a simple question.  How can I check to
>>>>> see if there's custom header attribute exist or not before I perform the
>>>>> below:
>>>>> >
>>>>> > String strFirstName = props.getHeaders().get("FirstName").toString()
>>>>> >
>>>>> > I believe if there's no custom headers, then it'll exception.
>>>>> > _______________________________________________
>>>>> > rabbitmq-discuss mailing list
>>>>> > rabbitmq-discuss at lists.rabbitmq.com
>>>>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>>
>>>>> _______________________________________________
>>>>> rabbitmq-discuss mailing list
>>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>>>
>>>>
>>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/20b6a353/attachment.html>

From tim at rabbitmq.com  Thu Jan 30 18:34:18 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Thu, 30 Jan 2014 18:34:18 +0000
Subject: [rabbitmq-discuss] Backing up persisted messages
In-Reply-To: <35AFF8FD-1F60-447A-8AF7-F403059C9481@sanger.ac.uk>
References: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>
 <5A215BC7-7608-40C7-AA69-8DA37E1CD547@rabbitmq.com>
 <35AFF8FD-1F60-447A-8AF7-F403059C9481@sanger.ac.uk>
Message-ID: <52E39448-B7B4-4AAD-88E4-DBE6E2823F05@rabbitmq.com>

On 30 Jan 2014, at 17:58, Beth Jones wrote:
> Specifically I have a queue that is accumulating messages and I'm worried about those messages being deleted accidentally.  I want to be able to back up that queue on a regular basis (say daily or hourly) to a location on disk.  
> 
> I read about copying the mnesia directory.  Does that copy all the data for all of the queue on that node?  Is there something similar that is queue specific?
> 

The queue specific thing would be to cluster two or more RabbitMQ brokers and set a High Availability policy on the queue so that all its messages are replicated to the other node(s). If the primary node crashes, one of the replicas will take over and you won't loose any messages (that have already been written to disk). Take a look at http://www.rabbitmq.com/ha.html for more details.

If your network is potentially unreliable (i.e., network partitions are quite likely) then you might want to consider using a federated exchange instead. This will perform the replication for you (i.e., copy messages from the exchange to another node(s) as per your configuration/policy) and the receiving node will effectively have a backup of all the data sent to the original exchange. I'd go for HA if you've got a reliable network though, since for your use-case it is ideal.

Cheers,
Tim

From tim at rabbitmq.com  Thu Jan 30 18:34:54 2014
From: tim at rabbitmq.com (Tim Watson)
Date: Thu, 30 Jan 2014 18:34:54 +0000
Subject: [rabbitmq-discuss] How to check if custom headers attribute
	exist
In-Reply-To: <CAETr1H9zBe=87H169svWCJ57FLHJCFnbdLh6msmUDjB=4VDD1A@mail.gmail.com>
References: <CAETr1H8rxOK91Cd50OPzyOPYZNZ-m+iBcb_oShn5s14Lh9QNwQ@mail.gmail.com>
 <559E9622-07C2-4C53-BF20-F3944D6D8C51@rabbitmq.com>
 <CAETr1H_-f=Wx7ut6kc7SHTMD3eu2Ynx0h_afWzgOg3wHmhmT6A@mail.gmail.com>
 <CAETr1H_Y_EbvFM0t7XvoNz1H9hSMt7fwz55W9rFC_pkb8ucUXQ@mail.gmail.com>
 <CAETr1H_2jBX6ekWB1UmKeETHLdM2CdsuogBTOXSy4R9om2vQVg@mail.gmail.com>
 <CAETr1H98m+8cSXP_kmJEVmSZ6PUE=CphPe8mN07Qn4ckPRzVwQ@mail.gmail.com>
 <CAETr1H9zBe=87H169svWCJ57FLHJCFnbdLh6msmUDjB=4VDD1A@mail.gmail.com>
Message-ID: <33991E0B-665A-43C8-B2C2-6674AFDC2F6F@rabbitmq.com>

On 30 Jan 2014, at 18:24, cw storm wrote:

> Nevermind.  I was able to get around my issue.  During publish, I should not populate the key.  That way, during consumption, I can use the method "containsKey" properly.  Thanks.
> 

Glad you figured it out.

Cheers,
Tim

From michael.s.klishin at gmail.com  Thu Jan 30 19:40:47 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 30 Jan 2014 23:40:47 +0400
Subject: [rabbitmq-discuss] How remove messages which must be ack
In-Reply-To: <CAETr1H8stWG==bi7VCKkLfLh787CmruNZ2UMLw-5LtU=dfu=8w@mail.gmail.com>
References: <1387291762482-32168.post@n5.nabble.com>
 <DACA5C9B-4F70-4213-9D79-39A3F209C2E9@rabbitmq.com>
 <1389967821435-32669.post@n5.nabble.com>
 <793A7420-B621-46C1-9557-8DD936C4FD1C@rabbitmq.com>
 <CAETr1H8stWG==bi7VCKkLfLh787CmruNZ2UMLw-5LtU=dfu=8w@mail.gmail.com>
Message-ID: <CAE3HoVQ5sz3uGCPm6Ojr=STmDf+b-M-xA50fqbdbTPetpNfeGA@mail.gmail.com>

2014-01-30 cw storm <cwstorm at gmail.com>

> Couldn't something be configured on the queue that if the message is in
> "unack" status for certain amount of time, it can be requeue or that
> connection could be automatically closed?


There is no such feature in RabbitMQ.

Applications can track how long it takes for a delivery to be processed and
close
the channel on timeout.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/17049fe7/attachment.html>

From arunrao.seattle at gmail.com  Thu Jan 30 20:00:18 2014
From: arunrao.seattle at gmail.com (Arun Rao)
Date: Thu, 30 Jan 2014 12:00:18 -0800
Subject: [rabbitmq-discuss] Deleting vhosts
Message-ID: <CAEJg2GBQBRnMjeJwmJbhnwhKY-UrebDgnetQJ5cSapxoh-mZSA@mail.gmail.com>

Hello -

When I am deleting a vhost I keep getting the following error message:

Error: {{badmatch,{error_string,"Validation failed\n\nname not recognised:
undefined\n"}},

        [{rabbit_vhost,'-internal_delete/1-lc$^1/1-1-',2},

         {rabbit_vhost,internal_delete,1},

         {rabbit_vhost,'-delete/1-fun-0-',1},

         {mnesia_tm,apply_fun,3},

         {mnesia_tm,execute_transaction,5},

         {rabbit_misc,'-execute_mnesia_transaction/1-fun-0-',1},

         {worker_pool_worker,handle_call,3},

         {gen_server2,handle_msg,2}]}


when i list the vhosts info, I still see the vhost listed. This issue is
not going away even after restarting the rabbitmq service.


Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/3e5a6a19/attachment.html>

From matthias at rabbitmq.com  Thu Jan 30 20:22:35 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 30 Jan 2014 20:22:35 +0000
Subject: [rabbitmq-discuss] Deleting vhosts
In-Reply-To: <CAEJg2GBQBRnMjeJwmJbhnwhKY-UrebDgnetQJ5cSapxoh-mZSA@mail.gmail.com>
References: <CAEJg2GBQBRnMjeJwmJbhnwhKY-UrebDgnetQJ5cSapxoh-mZSA@mail.gmail.com>
Message-ID: <52EAB48B.3040309@rabbitmq.com>

On 30/01/14 20:00, Arun Rao wrote:
> When I am deleting a vhost I keep getting the following error message:
> [...]

rabbit version?

and *how* are you deleting the vhost?

Matthias.

From arunrao.seattle at gmail.com  Thu Jan 30 20:23:32 2014
From: arunrao.seattle at gmail.com (Arun Rao)
Date: Thu, 30 Jan 2014 12:23:32 -0800
Subject: [rabbitmq-discuss] Shovel and Federation
Message-ID: <CAEJg2GAza_PGf1ccmBixVcrRtkyo_dZC08ntzuvyJ087do+13A@mail.gmail.com>

Hello -

I tried to setup an upstream federation, which is already serving another
node as source for shovel. This upstream federation did not go into a
running state until i changed the upstream federation to another node in
the same cluster.

This scenario might sound puzzling. But basically i have a scenario where I
have to multiplex messages for multiple users, based on different
requirements.

Thanks for your help!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/97443612/attachment.html>

From arunrao.seattle at gmail.com  Thu Jan 30 20:26:03 2014
From: arunrao.seattle at gmail.com (Arun Rao)
Date: Thu, 30 Jan 2014 12:26:03 -0800
Subject: [rabbitmq-discuss] Deleting vhosts
In-Reply-To: <52EAB48B.3040309@rabbitmq.com>
References: <CAEJg2GBQBRnMjeJwmJbhnwhKY-UrebDgnetQJ5cSapxoh-mZSA@mail.gmail.com>
 <52EAB48B.3040309@rabbitmq.com>
Message-ID: <CAEJg2GDd6VDzCveFYQsi2nS4nA+0ORUk+iGt4Yo9Mqxm=_ANPQ@mail.gmail.com>

{rabbit,"RabbitMQ","3.0.2"},

cat /etc/redhat-release

Red Hat Enterprise Linux Server release 6.4 (Santiago)

I tried - rabbitmqctl and Management page (15672)


On Thu, Jan 30, 2014 at 12:22 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> On 30/01/14 20:00, Arun Rao wrote:
>
>> When I am deleting a vhost I keep getting the following error message:
>> [...]
>>
>
> rabbit version?
>
> and *how* are you deleting the vhost?
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/56e60247/attachment.html>

From ranjitiyer at gmail.com  Thu Jan 30 20:40:06 2014
From: ranjitiyer at gmail.com (ranjitiyer)
Date: Thu, 30 Jan 2014 12:40:06 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ, Erlang and OpenSSL
Message-ID: <1391114406330-33005.post@n5.nabble.com>

We plan to bundle RabbitMQ 3.5.3 and Erlang R16B03-1 (5.10.4) into our
product which is supported on Windows, RHEL 5/6 and SUSE 11. Because
RabbitMQ does not bundle Erlang so we are doing that ourselves. (Would
really appreciate is RabbitMQ does this (RIAK does it), because its very
painful and can hurt adoption).

For various reasons, I am choosing to compile Erlang source on each of RHEL
and SUSE platforms. When compiling on Suse11 Erlang complained that it
couldn't find OpenSSL and I stopped and asked myself

Q1. Does RabbitMQ's SSL feature depends on SSL support in Erlang? 

Q2. Does that imply that the user's Suse machine (where our application,
including RabbitMQ will be deployed) must have OpenSSL installed? 

Q3. I guess this relates to Q2. Does Erlang statically include OpenSSL or
dynamically link against it? I would prefer that it statically includes it
so our users don't need to install OpenSSL separately on their Suse
machines.

Thanks,
Ranjit



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-Erlang-and-OpenSSL-tp33005.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From simon at rabbitmq.com  Thu Jan 30 20:49:55 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 30 Jan 2014 20:49:55 +0000
Subject: [rabbitmq-discuss] Deleting vhosts
In-Reply-To: <CAEJg2GDd6VDzCveFYQsi2nS4nA+0ORUk+iGt4Yo9Mqxm=_ANPQ@mail.gmail.com>
References: <CAEJg2GBQBRnMjeJwmJbhnwhKY-UrebDgnetQJ5cSapxoh-mZSA@mail.gmail.com>
 <52EAB48B.3040309@rabbitmq.com>
 <CAEJg2GDd6VDzCveFYQsi2nS4nA+0ORUk+iGt4Yo9Mqxm=_ANPQ@mail.gmail.com>
Message-ID: <52EABAF3.1050109@rabbitmq.com>

There was a bug around deleting vhosts containing policies / parameters 
which was fixed in 3.0.3.

I *think* you can work around it by deleting all policies and parameters 
first, then deleting the vhost.

Cheers, Simon

On 30/01/2014 20:26, Arun Rao wrote:
> {rabbit,"RabbitMQ","3.0.2"},
>
> cat /etc/redhat-release
>
> Red Hat Enterprise Linux Server release 6.4 (Santiago)
>
> I tried - rabbitmqctl and Management page (15672)
>
>
>
> On Thu, Jan 30, 2014 at 12:22 PM, Matthias Radestock
> <matthias at rabbitmq.com <mailto:matthias at rabbitmq.com>> wrote:
>
>     On 30/01/14 20:00, Arun Rao wrote:
>
>         When I am deleting a vhost I keep getting the following error
>         message:
>         [...]
>
>
>     rabbit version?
>
>     and *how* are you deleting the vhost?
>
>     Matthias.
>     _________________________________________________
>     rabbitmq-discuss mailing list
>     rabbitmq-discuss at lists.__rabbitmq.com
>     <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>     https://lists.rabbitmq.com/__cgi-bin/mailman/listinfo/__rabbitmq-discuss
>     <https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


From daniel at danielgarcia.info  Thu Jan 30 23:49:20 2014
From: daniel at danielgarcia.info (Daniel Garcia)
Date: Thu, 30 Jan 2014 15:49:20 -0800 (PST)
Subject: [rabbitmq-discuss] Stop rabbitmq from sending/receiving messages
	temporarily
Message-ID: <42737f6f-aca6-49dd-9552-5b06718277f4@googlegroups.com>


I want to be able to snapshot rabbitmq's current state by making a copy of 
it's data directory. The data dir could be copied with rsync or btrfs 
subvolume snapshots, zfs snapshots, etc. I want to stop rabbitmq from 
sending and receiving messages so that the copy of the data is consistent 
with other data in the system(like a mysql snapshot being taken at the same 
time). I've seen the memory/disk thresholds for stopping publishers from 
sending more messages. Is there a way to stop consumers (acks)?

Regards,
Daniel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140130/a4662a44/attachment.html>

From naveen291983 at gmail.com  Fri Jan 31 04:50:09 2014
From: naveen291983 at gmail.com (naveen)
Date: Thu, 30 Jan 2014 20:50:09 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMq Clustering in AWS - Differnt Subnets
In-Reply-To: <1391076963032-32974.post@n5.nabble.com>
References: <1391076963032-32974.post@n5.nabble.com>
Message-ID: <1391143809444-33008.post@n5.nabble.com>

Any one can help regarding this issue 



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMq-Clustering-in-AWS-Differnt-Subnets-tp32974p33008.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Fri Jan 31 05:39:26 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 31 Jan 2014 09:39:26 +0400
Subject: [rabbitmq-discuss] Replacing the management plugin default port
In-Reply-To: <517495158.68952.1391097285968.JavaMail.zimbra@0b10.mx>
References: <CAJ2-VrnUvB105ODdsZcKXHp_3NgB0kZ1mBC3qPypqUVvL_AF4A@mail.gmail.com>
 <517495158.68952.1391097285968.JavaMail.zimbra@0b10.mx>
Message-ID: <CAE3HoVTymdoZADUWaSX83kpmvGWSLBP3VD61g2_ufPdmmMD56Q@mail.gmail.com>

2014-01-30 Kyle O'Donnell <kyleo at 0b10.mx>:

> i think you might need to disable the old port:
>
>  {rabbitmq_management,
>   [{listener, [{port, 15672}
>               ]},
>                 {redirect_old_port,false}
>

redirect_old_port disables redirects from port 55672 to 15672.


-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140131/501f702c/attachment.html>

From michael.s.klishin at gmail.com  Fri Jan 31 05:39:43 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 31 Jan 2014 09:39:43 +0400
Subject: [rabbitmq-discuss] Replacing the management plugin default port
In-Reply-To: <CAE3HoVTymdoZADUWaSX83kpmvGWSLBP3VD61g2_ufPdmmMD56Q@mail.gmail.com>
References: <CAJ2-VrnUvB105ODdsZcKXHp_3NgB0kZ1mBC3qPypqUVvL_AF4A@mail.gmail.com>
 <517495158.68952.1391097285968.JavaMail.zimbra@0b10.mx>
 <CAE3HoVTymdoZADUWaSX83kpmvGWSLBP3VD61g2_ufPdmmMD56Q@mail.gmail.com>
Message-ID: <CAE3HoVR740SpiGziHgFKCn5SgHr1LeaAr1acczpgrfXM9Brs5g@mail.gmail.com>

2014-01-31 Michael Klishin <michael.s.klishin at gmail.com>:

> redirect_old_port disables redirects from port 55672 to 15672.


or rather, the port that the plugin is configured to use.


-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140131/46ab7601/attachment.html>

From michael.s.klishin at gmail.com  Fri Jan 31 05:44:56 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 31 Jan 2014 09:44:56 +0400
Subject: [rabbitmq-discuss] Replacing the management plugin default port
In-Reply-To: <CAJ2-VrnUvB105ODdsZcKXHp_3NgB0kZ1mBC3qPypqUVvL_AF4A@mail.gmail.com>
References: <CAJ2-VrnUvB105ODdsZcKXHp_3NgB0kZ1mBC3qPypqUVvL_AF4A@mail.gmail.com>
Message-ID: <CAE3HoVTwKQ5z-+j50i7y5rD=r+nbjYF1ZMURhnw-QyOrENiUcw@mail.gmail.com>

2014-01-30 rails <stammailbox at gmail.com>:

>     {rabbitmq_management,
>      [
> {listener, [{port, 5690}]}
>      ]},
>
> But still I was able to connect to the ui through 15672 (default) only.
>
> What did I do wrong?
>

Restart RabbitMQ and see the log.

There should be a message like

=INFO REPORT==== 31-Jan-2014::09:43:34 ===
Management plugin started. Port: 15676

or an error indicating that management listener failed to start (e.g.
because the port
is already in use).
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140131/9f44e6c5/attachment.html>

From bj2 at sanger.ac.uk  Fri Jan 31 09:24:03 2014
From: bj2 at sanger.ac.uk (Beth Jones)
Date: Fri, 31 Jan 2014 09:24:03 +0000
Subject: [rabbitmq-discuss] Backing up persisted messages
In-Reply-To: <52E39448-B7B4-4AAD-88E4-DBE6E2823F05@rabbitmq.com>
References: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>
 <5A215BC7-7608-40C7-AA69-8DA37E1CD547@rabbitmq.com>
 <35AFF8FD-1F60-447A-8AF7-F403059C9481@sanger.ac.uk>
 <52E39448-B7B4-4AAD-88E4-DBE6E2823F05@rabbitmq.com>
Message-ID: <E6D90403-E6F7-4E8B-8D9F-369162C97780@sanger.ac.uk>

The scenario I'm looking at, is someone accidentally / inadvertently / deliberately deleting the messages from the queue.  I want to be able to take a snapshot of the messages that are in a particular queue and put them somewhere else on disk outside of RabbitMQ.  Then if someone/something does delete the messages, I want to be able to restore them.

Having the messages replicated on multiple nodes goes someway towards mitigating the risk, but it doesn't stop someone accidentally clearing out multiple queues.

Beth


On 30 Jan 2014, at 18:34, Tim Watson wrote:

> On 30 Jan 2014, at 17:58, Beth Jones wrote:
>> Specifically I have a queue that is accumulating messages and I'm worried about those messages being deleted accidentally.  I want to be able to back up that queue on a regular basis (say daily or hourly) to a location on disk.  
>> 
>> I read about copying the mnesia directory.  Does that copy all the data for all of the queue on that node?  Is there something similar that is queue specific?
>> 
> 
> The queue specific thing would be to cluster two or more RabbitMQ brokers and set a High Availability policy on the queue so that all its messages are replicated to the other node(s). If the primary node crashes, one of the replicas will take over and you won't loose any messages (that have already been written to disk). Take a look at http://www.rabbitmq.com/ha.html for more details.
> 
> If your network is potentially unreliable (i.e., network partitions are quite likely) then you might want to consider using a federated exchange instead. This will perform the replication for you (i.e., copy messages from the exchange to another node(s) as per your configuration/policy) and the receiving node will effectively have a backup of all the data sent to the original exchange. I'd go for HA if you've got a reliable network though, since for your use-case it is ideal.
> 
> Cheers,
> Tim
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss



-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

From videlalvaro at gmail.com  Fri Jan 31 09:32:33 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Fri, 31 Jan 2014 10:32:33 +0100
Subject: [rabbitmq-discuss] Backing up persisted messages
In-Reply-To: <E6D90403-E6F7-4E8B-8D9F-369162C97780@sanger.ac.uk>
References: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>
 <5A215BC7-7608-40C7-AA69-8DA37E1CD547@rabbitmq.com>
 <35AFF8FD-1F60-447A-8AF7-F403059C9481@sanger.ac.uk>
 <52E39448-B7B4-4AAD-88E4-DBE6E2823F05@rabbitmq.com>
 <E6D90403-E6F7-4E8B-8D9F-369162C97780@sanger.ac.uk>
Message-ID: <CAMcAHLUbVKkyXXmL4X5E1sjNK7UWFNKW-K6K3HrhE1J-hJ2a9A@mail.gmail.com>

Hi,

What if you replicate the messages to a node on different
administrative domain, using exchange federation?
http://www.rabbitmq.com/federation.html

That way you can prevent people from connecting there and deleting messages.

Regards,

Alvaro

On Fri, Jan 31, 2014 at 10:24 AM, Beth Jones <bj2 at sanger.ac.uk> wrote:
> The scenario I'm looking at, is someone accidentally / inadvertently / deliberately deleting the messages from the queue.  I want to be able to take a snapshot of the messages that are in a particular queue and put them somewhere else on disk outside of RabbitMQ.  Then if someone/something does delete the messages, I want to be able to restore them.
>
> Having the messages replicated on multiple nodes goes someway towards mitigating the risk, but it doesn't stop someone accidentally clearing out multiple queues.
>
> Beth
>
>
> On 30 Jan 2014, at 18:34, Tim Watson wrote:
>
>> On 30 Jan 2014, at 17:58, Beth Jones wrote:
>>> Specifically I have a queue that is accumulating messages and I'm worried about those messages being deleted accidentally.  I want to be able to back up that queue on a regular basis (say daily or hourly) to a location on disk.
>>>
>>> I read about copying the mnesia directory.  Does that copy all the data for all of the queue on that node?  Is there something similar that is queue specific?
>>>
>>
>> The queue specific thing would be to cluster two or more RabbitMQ brokers and set a High Availability policy on the queue so that all its messages are replicated to the other node(s). If the primary node crashes, one of the replicas will take over and you won't loose any messages (that have already been written to disk). Take a look at http://www.rabbitmq.com/ha.html for more details.
>>
>> If your network is potentially unreliable (i.e., network partitions are quite likely) then you might want to consider using a federated exchange instead. This will perform the replication for you (i.e., copy messages from the exchange to another node(s) as per your configuration/policy) and the receiving node will effectively have a backup of all the data sent to the original exchange. I'd go for HA if you've got a reliable network though, since for your use-case it is ideal.
>>
>> Cheers,
>> Tim
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
>
> --
>  The Wellcome Trust Sanger Institute is operated by Genome Research
>  Limited, a charity registered in England with number 1021457 and a
>  company registered in England with number 2742969, whose registered
>  office is 215 Euston Road, London, NW1 2BE.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From simon at rabbitmq.com  Fri Jan 31 10:01:24 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 31 Jan 2014 10:01:24 +0000
Subject: [rabbitmq-discuss] Stop rabbitmq from sending/receiving
 messages temporarily
In-Reply-To: <42737f6f-aca6-49dd-9552-5b06718277f4@googlegroups.com>
References: <42737f6f-aca6-49dd-9552-5b06718277f4@googlegroups.com>
Message-ID: <52EB7474.2020803@rabbitmq.com>

On 30/01/2014 23:49, Daniel Garcia wrote:
> Is there a way to stop consumers (acks)?

I'm not sure there is a good way. Besides SIGTSTP anyway. Mind you, that 
might be all you need.

Cheers, Simon

From bj2 at sanger.ac.uk  Fri Jan 31 10:01:22 2014
From: bj2 at sanger.ac.uk (Beth Jones)
Date: Fri, 31 Jan 2014 10:01:22 +0000
Subject: [rabbitmq-discuss] Backing up persisted messages
In-Reply-To: <CAMcAHLUbVKkyXXmL4X5E1sjNK7UWFNKW-K6K3HrhE1J-hJ2a9A@mail.gmail.com>
References: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>
 <5A215BC7-7608-40C7-AA69-8DA37E1CD547@rabbitmq.com>
 <35AFF8FD-1F60-447A-8AF7-F403059C9481@sanger.ac.uk>
 <52E39448-B7B4-4AAD-88E4-DBE6E2823F05@rabbitmq.com>
 <E6D90403-E6F7-4E8B-8D9F-369162C97780@sanger.ac.uk>
 <CAMcAHLUbVKkyXXmL4X5E1sjNK7UWFNKW-K6K3HrhE1J-hJ2a9A@mail.gmail.com>
Message-ID: <1AE89438-C065-412B-8006-DA4B4E5BD4DC@sanger.ac.uk>

I'll have a look at exchange federation - thanks for the suggestion.

I'm surprised that this isn't something that's supported out of the box - is it on the TODO list?

Beth


On 31 Jan 2014, at 09:32, Alvaro Videla wrote:

> Hi,
> 
> What if you replicate the messages to a node on different
> administrative domain, using exchange federation?
> http://www.rabbitmq.com/federation.html
> 
> That way you can prevent people from connecting there and deleting messages.
> 
> Regards,
> 
> Alvaro
> 
> On Fri, Jan 31, 2014 at 10:24 AM, Beth Jones <bj2 at sanger.ac.uk> wrote:
>> The scenario I'm looking at, is someone accidentally / inadvertently / deliberately deleting the messages from the queue.  I want to be able to take a snapshot of the messages that are in a particular queue and put them somewhere else on disk outside of RabbitMQ.  Then if someone/something does delete the messages, I want to be able to restore them.
>> 
>> Having the messages replicated on multiple nodes goes someway towards mitigating the risk, but it doesn't stop someone accidentally clearing out multiple queues.
>> 
>> Beth
>> 
>> 
>> On 30 Jan 2014, at 18:34, Tim Watson wrote:
>> 
>>> On 30 Jan 2014, at 17:58, Beth Jones wrote:
>>>> Specifically I have a queue that is accumulating messages and I'm worried about those messages being deleted accidentally.  I want to be able to back up that queue on a regular basis (say daily or hourly) to a location on disk.
>>>> 
>>>> I read about copying the mnesia directory.  Does that copy all the data for all of the queue on that node?  Is there something similar that is queue specific?
>>>> 
>>> 
>>> The queue specific thing would be to cluster two or more RabbitMQ brokers and set a High Availability policy on the queue so that all its messages are replicated to the other node(s). If the primary node crashes, one of the replicas will take over and you won't loose any messages (that have already been written to disk). Take a look at http://www.rabbitmq.com/ha.html for more details.
>>> 
>>> If your network is potentially unreliable (i.e., network partitions are quite likely) then you might want to consider using a federated exchange instead. This will perform the replication for you (i.e., copy messages from the exchange to another node(s) as per your configuration/policy) and the receiving node will effectively have a backup of all the data sent to the original exchange. I'd go for HA if you've got a reliable network though, since for your use-case it is ideal.
>>> 
>>> Cheers,
>>> Tim
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>> 
>> 
>> 
>> --
>> The Wellcome Trust Sanger Institute is operated by Genome Research
>> Limited, a charity registered in England with number 1021457 and a
>> company registered in England with number 2742969, whose registered
>> office is 215 Euston Road, London, NW1 2BE.
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss



-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

From videlalvaro at gmail.com  Fri Jan 31 10:06:41 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Fri, 31 Jan 2014 11:06:41 +0100
Subject: [rabbitmq-discuss] Backing up persisted messages
In-Reply-To: <1AE89438-C065-412B-8006-DA4B4E5BD4DC@sanger.ac.uk>
References: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>
 <5A215BC7-7608-40C7-AA69-8DA37E1CD547@rabbitmq.com>
 <35AFF8FD-1F60-447A-8AF7-F403059C9481@sanger.ac.uk>
 <52E39448-B7B4-4AAD-88E4-DBE6E2823F05@rabbitmq.com>
 <E6D90403-E6F7-4E8B-8D9F-369162C97780@sanger.ac.uk>
 <CAMcAHLUbVKkyXXmL4X5E1sjNK7UWFNKW-K6K3HrhE1J-hJ2a9A@mail.gmail.com>
 <1AE89438-C065-412B-8006-DA4B4E5BD4DC@sanger.ac.uk>
Message-ID: <CAMcAHLXUwZ7ovOyXRO-0yUavT+NoxP9ZsUcmXn+c++_+4ZUG7g@mail.gmail.com>

If what you want is to backup the Mnesia folder, then yes, that would
backup queue contents, but it won't be specific to one queue.

What should be on the TODO list?

On Fri, Jan 31, 2014 at 11:01 AM, Beth Jones <bj2 at sanger.ac.uk> wrote:
> I'll have a look at exchange federation - thanks for the suggestion.
>
> I'm surprised that this isn't something that's supported out of the box - is it on the TODO list?
>
> Beth
>
>
> On 31 Jan 2014, at 09:32, Alvaro Videla wrote:
>
>> Hi,
>>
>> What if you replicate the messages to a node on different
>> administrative domain, using exchange federation?
>> http://www.rabbitmq.com/federation.html
>>
>> That way you can prevent people from connecting there and deleting messages.
>>
>> Regards,
>>
>> Alvaro
>>
>> On Fri, Jan 31, 2014 at 10:24 AM, Beth Jones <bj2 at sanger.ac.uk> wrote:
>>> The scenario I'm looking at, is someone accidentally / inadvertently / deliberately deleting the messages from the queue.  I want to be able to take a snapshot of the messages that are in a particular queue and put them somewhere else on disk outside of RabbitMQ.  Then if someone/something does delete the messages, I want to be able to restore them.
>>>
>>> Having the messages replicated on multiple nodes goes someway towards mitigating the risk, but it doesn't stop someone accidentally clearing out multiple queues.
>>>
>>> Beth
>>>
>>>
>>> On 30 Jan 2014, at 18:34, Tim Watson wrote:
>>>
>>>> On 30 Jan 2014, at 17:58, Beth Jones wrote:
>>>>> Specifically I have a queue that is accumulating messages and I'm worried about those messages being deleted accidentally.  I want to be able to back up that queue on a regular basis (say daily or hourly) to a location on disk.
>>>>>
>>>>> I read about copying the mnesia directory.  Does that copy all the data for all of the queue on that node?  Is there something similar that is queue specific?
>>>>>
>>>>
>>>> The queue specific thing would be to cluster two or more RabbitMQ brokers and set a High Availability policy on the queue so that all its messages are replicated to the other node(s). If the primary node crashes, one of the replicas will take over and you won't loose any messages (that have already been written to disk). Take a look at http://www.rabbitmq.com/ha.html for more details.
>>>>
>>>> If your network is potentially unreliable (i.e., network partitions are quite likely) then you might want to consider using a federated exchange instead. This will perform the replication for you (i.e., copy messages from the exchange to another node(s) as per your configuration/policy) and the receiving node will effectively have a backup of all the data sent to the original exchange. I'd go for HA if you've got a reliable network though, since for your use-case it is ideal.
>>>>
>>>> Cheers,
>>>> Tim
>>>> _______________________________________________
>>>> rabbitmq-discuss mailing list
>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>>
>>>
>>> --
>>> The Wellcome Trust Sanger Institute is operated by Genome Research
>>> Limited, a charity registered in England with number 1021457 and a
>>> company registered in England with number 2742969, whose registered
>>> office is 215 Euston Road, London, NW1 2BE.
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
>
> --
>  The Wellcome Trust Sanger Institute is operated by Genome Research
>  Limited, a charity registered in England with number 1021457 and a
>  company registered in England with number 2742969, whose registered
>  office is 215 Euston Road, London, NW1 2BE.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From simon at rabbitmq.com  Fri Jan 31 10:08:41 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 31 Jan 2014 10:08:41 +0000
Subject: [rabbitmq-discuss] Shovel and Federation
In-Reply-To: <CAEJg2GAza_PGf1ccmBixVcrRtkyo_dZC08ntzuvyJ087do+13A@mail.gmail.com>
References: <CAEJg2GAza_PGf1ccmBixVcrRtkyo_dZC08ntzuvyJ087do+13A@mail.gmail.com>
Message-ID: <52EB7629.8030301@rabbitmq.com>

On 30/01/2014 20:23, Arun Rao wrote:
> I tried to setup an upstream federation, which is already serving
> another node as source for shovel. This upstream federation did not go
> into a running state until i changed the upstream federation to another
> node in the same cluster.

This is a bit vague. Could you explain what nodes exist, what exchanges 
are on them, and how the shovel and federation plugins are configured?

Regardless though, you certainly should be able to use shovel and 
federation at the same time. When you say "this upstream federation did 
not go into a running state" do you mean it was in a failed state? If so 
there should be an error message which might prove informative (mouse 
over to see it in the web UI).

Cheers, Simon

From bj2 at sanger.ac.uk  Fri Jan 31 10:11:20 2014
From: bj2 at sanger.ac.uk (Beth Jones)
Date: Fri, 31 Jan 2014 10:11:20 +0000
Subject: [rabbitmq-discuss] Backing up persisted messages
In-Reply-To: <CAMcAHLXUwZ7ovOyXRO-0yUavT+NoxP9ZsUcmXn+c++_+4ZUG7g@mail.gmail.com>
References: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>
 <5A215BC7-7608-40C7-AA69-8DA37E1CD547@rabbitmq.com>
 <35AFF8FD-1F60-447A-8AF7-F403059C9481@sanger.ac.uk>
 <52E39448-B7B4-4AAD-88E4-DBE6E2823F05@rabbitmq.com>
 <E6D90403-E6F7-4E8B-8D9F-369162C97780@sanger.ac.uk>
 <CAMcAHLUbVKkyXXmL4X5E1sjNK7UWFNKW-K6K3HrhE1J-hJ2a9A@mail.gmail.com>
 <1AE89438-C065-412B-8006-DA4B4E5BD4DC@sanger.ac.uk>
 <CAMcAHLXUwZ7ovOyXRO-0yUavT+NoxP9ZsUcmXn+c++_+4ZUG7g@mail.gmail.com>
Message-ID: <3C599BF2-1AF4-45B9-9C41-DDF23CD7517D@sanger.ac.uk>

I was wondering if the ability to back up a specific queue would ever make it onto the TODO list.

Beth

On 31 Jan 2014, at 10:06, Alvaro Videla wrote:

> If what you want is to backup the Mnesia folder, then yes, that would
> backup queue contents, but it won't be specific to one queue.
> 
> What should be on the TODO list?
> 
> On Fri, Jan 31, 2014 at 11:01 AM, Beth Jones <bj2 at sanger.ac.uk> wrote:
>> I'll have a look at exchange federation - thanks for the suggestion.
>> 
>> I'm surprised that this isn't something that's supported out of the box - is it on the TODO list?
>> 
>> Beth
>> 
>> 
>> On 31 Jan 2014, at 09:32, Alvaro Videla wrote:
>> 
>>> Hi,
>>> 
>>> What if you replicate the messages to a node on different
>>> administrative domain, using exchange federation?
>>> http://www.rabbitmq.com/federation.html
>>> 
>>> That way you can prevent people from connecting there and deleting messages.
>>> 
>>> Regards,
>>> 
>>> Alvaro
>>> 
>>> On Fri, Jan 31, 2014 at 10:24 AM, Beth Jones <bj2 at sanger.ac.uk> wrote:
>>>> The scenario I'm looking at, is someone accidentally / inadvertently / deliberately deleting the messages from the queue.  I want to be able to take a snapshot of the messages that are in a particular queue and put them somewhere else on disk outside of RabbitMQ.  Then if someone/something does delete the messages, I want to be able to restore them.
>>>> 
>>>> Having the messages replicated on multiple nodes goes someway towards mitigating the risk, but it doesn't stop someone accidentally clearing out multiple queues.
>>>> 
>>>> Beth
>>>> 
>>>> 
>>>> On 30 Jan 2014, at 18:34, Tim Watson wrote:
>>>> 
>>>>> On 30 Jan 2014, at 17:58, Beth Jones wrote:
>>>>>> Specifically I have a queue that is accumulating messages and I'm worried about those messages being deleted accidentally.  I want to be able to back up that queue on a regular basis (say daily or hourly) to a location on disk.
>>>>>> 
>>>>>> I read about copying the mnesia directory.  Does that copy all the data for all of the queue on that node?  Is there something similar that is queue specific?
>>>>>> 
>>>>> 
>>>>> The queue specific thing would be to cluster two or more RabbitMQ brokers and set a High Availability policy on the queue so that all its messages are replicated to the other node(s). If the primary node crashes, one of the replicas will take over and you won't loose any messages (that have already been written to disk). Take a look at http://www.rabbitmq.com/ha.html for more details.
>>>>> 
>>>>> If your network is potentially unreliable (i.e., network partitions are quite likely) then you might want to consider using a federated exchange instead. This will perform the replication for you (i.e., copy messages from the exchange to another node(s) as per your configuration/policy) and the receiving node will effectively have a backup of all the data sent to the original exchange. I'd go for HA if you've got a reliable network though, since for your use-case it is ideal.
>>>>> 
>>>>> Cheers,
>>>>> Tim
>>>>> _______________________________________________
>>>>> rabbitmq-discuss mailing list
>>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>> 
>>>> 
>>>> 
>>>> --
>>>> The Wellcome Trust Sanger Institute is operated by Genome Research
>>>> Limited, a charity registered in England with number 1021457 and a
>>>> company registered in England with number 2742969, whose registered
>>>> office is 215 Euston Road, London, NW1 2BE.
>>>> _______________________________________________
>>>> rabbitmq-discuss mailing list
>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>> 
>> 
>> 
>> --
>> The Wellcome Trust Sanger Institute is operated by Genome Research
>> Limited, a charity registered in England with number 1021457 and a
>> company registered in England with number 2742969, whose registered
>> office is 215 Euston Road, London, NW1 2BE.
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss



-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

From matthias at rabbitmq.com  Fri Jan 31 11:15:01 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 31 Jan 2014 11:15:01 +0000
Subject: [rabbitmq-discuss] Backing up persisted messages
In-Reply-To: <CAMcAHLUbVKkyXXmL4X5E1sjNK7UWFNKW-K6K3HrhE1J-hJ2a9A@mail.gmail.com>
References: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>
 <5A215BC7-7608-40C7-AA69-8DA37E1CD547@rabbitmq.com>
 <35AFF8FD-1F60-447A-8AF7-F403059C9481@sanger.ac.uk>
 <52E39448-B7B4-4AAD-88E4-DBE6E2823F05@rabbitmq.com>
 <E6D90403-E6F7-4E8B-8D9F-369162C97780@sanger.ac.uk>
 <CAMcAHLUbVKkyXXmL4X5E1sjNK7UWFNKW-K6K3HrhE1J-hJ2a9A@mail.gmail.com>
Message-ID: <52EB85B5.2080402@rabbitmq.com>

On 31/01/14 09:32, Alvaro Videla wrote:
> What if you replicate the messages to a node on different
> administrative domain, using exchange federation?
> http://www.rabbitmq.com/federation.html
>
> That way you can prevent people from connecting there and deleting
> messages.

Furthermore, if you configure the queue(s) on the backup rabbit with 
some per-queue message ttl, you effectively end up with a async rolling 
backup.

Matthias.

From pat at munkiisoft.com  Fri Jan 31 11:44:54 2014
From: pat at munkiisoft.com (Patrick Long)
Date: Fri, 31 Jan 2014 11:44:54 +0000
Subject: [rabbitmq-discuss] Messages unexpectedly moving from Unacked to
	Ready
In-Reply-To: <52EA8BBF.20600@rabbitmq.com>
References: <CALDntb9_jh+zf0MOuOvsx9h642ksEC6Amqk8m+oAF1rF+e5ZEA@mail.gmail.com>
 <52EA8313.8060007@rabbitmq.com>
 <CALDntb8p1DDXu1DQhe=-i0XUdTH+1Tkz8Feugnd9x-R0i1AqqQ@mail.gmail.com>
 <52EA8822.1050706@rabbitmq.com>
 <CALDntb9zt-CQX=2itdPuXLtQcrUvw0Utt8m3Qn094036GxiJKA@mail.gmail.com>
 <52EA8BBF.20600@rabbitmq.com>
Message-ID: <CALDntb_+pR0JvJ0Cu1-0E=wnEd=QpneMdbOndA3xhX51=a6fyg@mail.gmail.com>

Looks like it was the load balancer (LB), as you suggested, because when we
configured the code to go direct at a specific node in the cluster rather
than via the LB it works as expected.

Wrt the AMQP heartbeat. We are using the official >NET client and I am now
setting the RequestedHeartbeat property, on the factory, to 10 (seconds).

Is that how I control that heartbeat? It was defaulting  0.

Thanks

Patrick


On 30 January 2014 17:28, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 30/01/14 17:26, Patrick Long wrote:
>
>> The load balancer closing connections would look something like this in
>> the RMQ logs, yes?
>>
>> =WARNING REPORT==== 30-Jan-2014::15:25:08 ===
>> closing AMQP connection <0.31743.12> (10.206.20.1:2750
>> <http://10.206.20.1:2750> -> 10.206.20.167:5672
>> <http://10.206.20.167:5672>):
>> connection_closed_abruptly
>>
>
> Yes.
>
>  Those happen between 1 and 3 times a minute. Is this a common problem?
>> We obviously need load balancing to make use of clustering.
>>
>> Is there a way of keeping the connection Alive?
>>
>
> That's down to how the load balancer is configured. If the load balancer
> is closing connections because it perceives them to be inactive, lowering
> the AMQP heartbeat interval might prevent you from having to reconfigure
> the load balancer.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
>



-- 
Patrick Long - Munkiisoft Ltd
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140131/3165b815/attachment.html>

From carl.hoerberg at gmail.com  Fri Jan 31 12:01:42 2014
From: carl.hoerberg at gmail.com (carlhoerberg)
Date: Fri, 31 Jan 2014 04:01:42 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMq Clustering in AWS - Differnt Subnets
In-Reply-To: <1391143809444-33008.post@n5.nabble.com>
References: <1391076963032-32974.post@n5.nabble.com>
 <1391143809444-33008.post@n5.nabble.com>
Message-ID: <1391169702946-33021.post@n5.nabble.com>

have you configured and open inet_dist_listen_min to inet_dist_listen_max?
http://www.rabbitmq.com/clustering.html#firewall



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMq-Clustering-in-AWS-Differnt-Subnets-tp32974p33021.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From dmcintyre at gopivotal.com  Fri Jan 31 13:00:51 2014
From: dmcintyre at gopivotal.com (Duncan McIntyre)
Date: Fri, 31 Jan 2014 13:00:51 +0000
Subject: [rabbitmq-discuss] Backing up persisted messages
In-Reply-To: <52EB85B5.2080402@rabbitmq.com>
References: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>
 <5A215BC7-7608-40C7-AA69-8DA37E1CD547@rabbitmq.com>
 <35AFF8FD-1F60-447A-8AF7-F403059C9481@sanger.ac.uk>
 <52E39448-B7B4-4AAD-88E4-DBE6E2823F05@rabbitmq.com>
 <E6D90403-E6F7-4E8B-8D9F-369162C97780@sanger.ac.uk>
 <CAMcAHLUbVKkyXXmL4X5E1sjNK7UWFNKW-K6K3HrhE1J-hJ2a9A@mail.gmail.com>
 <52EB85B5.2080402@rabbitmq.com>
Message-ID: <CAAaVn2DR6Fi-Hp4SqXyW8bsEkpOw_1_2dEfLFRntvTP2brG6ow@mail.gmail.com>

I can see that if a per-queue message ttl is set, messages in RAM get
deleted after the timeout.

But what happens if there are a lot of messages in the queue and they have
been overflowed to disk? Is that garbage-collected, or does it just fill up?

How does this interact with message persistence?


On Fri, Jan 31, 2014 at 11:15 AM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> On 31/01/14 09:32, Alvaro Videla wrote:
>
>> What if you replicate the messages to a node on different
>> administrative domain, using exchange federation?
>> http://www.rabbitmq.com/federation.html
>>
>> That way you can prevent people from connecting there and deleting
>> messages.
>>
>
> Furthermore, if you configure the queue(s) on the backup rabbit with some
> per-queue message ttl, you effectively end up with a async rolling backup.
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


Duncan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140131/9838a8f0/attachment.html>

From matthias at rabbitmq.com  Fri Jan 31 13:12:32 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 31 Jan 2014 13:12:32 +0000
Subject: [rabbitmq-discuss] Backing up persisted messages
In-Reply-To: <CAAaVn2DR6Fi-Hp4SqXyW8bsEkpOw_1_2dEfLFRntvTP2brG6ow@mail.gmail.com>
References: <9430C8CE-94D4-4134-88BB-054B0E77DDCB@sanger.ac.uk>
 <5A215BC7-7608-40C7-AA69-8DA37E1CD547@rabbitmq.com>
 <35AFF8FD-1F60-447A-8AF7-F403059C9481@sanger.ac.uk>
 <52E39448-B7B4-4AAD-88E4-DBE6E2823F05@rabbitmq.com>
 <E6D90403-E6F7-4E8B-8D9F-369162C97780@sanger.ac.uk>
 <CAMcAHLUbVKkyXXmL4X5E1sjNK7UWFNKW-K6K3HrhE1J-hJ2a9A@mail.gmail.com>
 <52EB85B5.2080402@rabbitmq.com>
 <CAAaVn2DR6Fi-Hp4SqXyW8bsEkpOw_1_2dEfLFRntvTP2brG6ow@mail.gmail.com>
Message-ID: <52EBA140.3000609@rabbitmq.com>

On 31/01/14 13:00, Duncan McIntyre wrote:
> I can see that if a per-queue message ttl is set, messages in RAM get
> deleted after the timeout.
>
> But what happens if there are a lot of messages in the queue and they
> have been overflowed to disk? Is that garbage-collected, or does it just
> fill up?
>
> How does this interact with message persistence?

It works as you'd expect; expired messages are (logically) removed from 
the queue regardless of whether they have been paged out.

Disk space in the persistent message store is reclaimed by a garbage 
collector, which has a guaranteed upper bound on the amount of garbage 
left around (50% of the total).

Matthias.

From videlalvaro at gmail.com  Fri Jan 31 13:18:34 2014
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Fri, 31 Jan 2014 14:18:34 +0100
Subject: [rabbitmq-discuss] RabbitMQ, Erlang and OpenSSL
In-Reply-To: <1391114406330-33005.post@n5.nabble.com>
References: <1391114406330-33005.post@n5.nabble.com>
Message-ID: <CAMcAHLVjZmXk56j4HXO7ctYfSK6gBcD+4TZ28wBrf-FfqM-MAw@mail.gmail.com>

Hi,

Doing what you say is the right thing to do(tm) but it's very hard. Just
ask the Basho people about all the difficulties they had to build
their packages. The main problem being OpenSSL support. I've tried
this, and even minor versions differences on the linked libraries will
make everything to fall apart.

What I understood is that if you want to bundle Erlang, then you'll
need basically one bundle per OS version you would want to support.

In our case, that's not practical, since most of our users just install Erlang.

The only platform where we provide a bundle is OS X. You can see more
about how we build it here:
http://hg.rabbitmq.com/rabbitmq-server/file/240502c05dbc/packaging/standalone/Makefile
and the related files on that packaging folder.

Q1. Yes, AFAIK RabbitMQ SSL depends on Erlang
Q2. Q3. Yes, it must be installed since Erlang dynamically links to
it. And the problem is even bigger since Erlang tags the linked
library up to the minor version, which makes it incompatible between
OSes. Say you build Erlang against OpenSSL 1.0.1, then the other OS
has 1.0.0 which according to OpenSSL should be compatible and have the
same API, but the bundled Erlang won't be able to find it/use it.

Regards,

Alvaro

On Thu, Jan 30, 2014 at 9:40 PM, ranjitiyer <ranjitiyer at gmail.com> wrote:
> We plan to bundle RabbitMQ 3.5.3 and Erlang R16B03-1 (5.10.4) into our
> product which is supported on Windows, RHEL 5/6 and SUSE 11. Because
> RabbitMQ does not bundle Erlang so we are doing that ourselves. (Would
> really appreciate is RabbitMQ does this (RIAK does it), because its very
> painful and can hurt adoption).
>
> For various reasons, I am choosing to compile Erlang source on each of RHEL
> and SUSE platforms. When compiling on Suse11 Erlang complained that it
> couldn't find OpenSSL and I stopped and asked myself
>
> Q1. Does RabbitMQ's SSL feature depends on SSL support in Erlang?
>
> Q2. Does that imply that the user's Suse machine (where our application,
> including RabbitMQ will be deployed) must have OpenSSL installed?
>
> Q3. I guess this relates to Q2. Does Erlang statically include OpenSSL or
> dynamically link against it? I would prefer that it statically includes it
> so our users don't need to install OpenSSL separately on their Suse
> machines.
>
> Thanks,
> Ranjit
>
>
>
> --
> View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-Erlang-and-OpenSSL-tp33005.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From naveen291983 at gmail.com  Fri Jan 31 13:22:46 2014
From: naveen291983 at gmail.com (naveen)
Date: Fri, 31 Jan 2014 05:22:46 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMq Clustering in AWS - Differnt Subnets
In-Reply-To: <1391169702946-33021.post@n5.nabble.com>
References: <1391076963032-32974.post@n5.nabble.com>
 <1391143809444-33008.post@n5.nabble.com>
 <1391169702946-33021.post@n5.nabble.com>
Message-ID: <1391174566787-33025.post@n5.nabble.com>

Finally worked.. :) 



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMq-Clustering-in-AWS-Differnt-Subnets-tp32974p33025.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Fri Jan 31 13:33:49 2014
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 31 Jan 2014 17:33:49 +0400
Subject: [rabbitmq-discuss] RabbitMQ, Erlang and OpenSSL
In-Reply-To: <1391114406330-33005.post@n5.nabble.com>
References: <1391114406330-33005.post@n5.nabble.com>
Message-ID: <CAE3HoVR8kUZu4TgZ-iRApAP8SnqyG_oOBnkjExqZXiUdB8cuBA@mail.gmail.com>

2014-01-31 ranjitiyer <ranjitiyer at gmail.com>

> Q1. Does RabbitMQ's SSL feature depends on SSL support in Erlang?
>

Yes.


>  Q2. Does that imply that the user's Suse machine (where our application,
> including RabbitMQ will be deployed) must have OpenSSL installed?
>

Yes, see section 3.4:
http://www.erlang.org/doc/installation_guide/INSTALL.html

Q3. I guess this relates to Q2. Does Erlang statically include OpenSSL or
> dynamically link against it? I would prefer that it statically includes it
> so our users don't need to install OpenSSL separately on their Suse
> machines.
>

Erlang/OTP's configure supports both --disable-dynamic-ssl-lib and
--enable-dynamic-ssl-lib.

MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140131/e42aec30/attachment.html>

From matthias at rabbitmq.com  Fri Jan 31 13:58:18 2014
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 31 Jan 2014 13:58:18 +0000
Subject: [rabbitmq-discuss] Messages unexpectedly moving from Unacked to
 Ready
In-Reply-To: <CALDntb_+pR0JvJ0Cu1-0E=wnEd=QpneMdbOndA3xhX51=a6fyg@mail.gmail.com>
References: <CALDntb9_jh+zf0MOuOvsx9h642ksEC6Amqk8m+oAF1rF+e5ZEA@mail.gmail.com>
 <52EA8313.8060007@rabbitmq.com>
 <CALDntb8p1DDXu1DQhe=-i0XUdTH+1Tkz8Feugnd9x-R0i1AqqQ@mail.gmail.com>
 <52EA8822.1050706@rabbitmq.com>
 <CALDntb9zt-CQX=2itdPuXLtQcrUvw0Utt8m3Qn094036GxiJKA@mail.gmail.com>
 <52EA8BBF.20600@rabbitmq.com>
 <CALDntb_+pR0JvJ0Cu1-0E=wnEd=QpneMdbOndA3xhX51=a6fyg@mail.gmail.com>
Message-ID: <52EBABFA.9060305@rabbitmq.com>

On 31/01/14 11:44, Patrick Long wrote:
> Wrt the AMQP heartbeat. We are using the official >NET client and I am
> now setting the RequestedHeartbeat property, on the factory, to 10
> (seconds).
>
> Is that how I control that heartbeat? It was defaulting  0.

The hearbeat can be controlled server-side too. See the 'heartbeat' 
config item in http://www.rabbitmq.com/configure.html#config-items

Most clients, the .net client included, will take the server's 
suggestion when that is lower than their own (or their own is 0 i.e. 
infinity).

Matthias.

From arunrao.seattle at gmail.com  Fri Jan 31 18:28:35 2014
From: arunrao.seattle at gmail.com (Arun Rao)
Date: Fri, 31 Jan 2014 10:28:35 -0800
Subject: [rabbitmq-discuss] Order of restarts - Federation of federation
Message-ID: <CAEJg2GCppJN5i39PkowzuZhsMUS_-SX5VJy=x9L=-gZSTg3LsQ@mail.gmail.com>

Hello -

There seems to be an order in restarting rabbitmq servers if you have a
downstream rabbitmq server to a downstream rabbitmq server. So if there is
a downstream server D1 pulling messages from Upstream server U and
Downstream server D2 pulling messages from D1. When restarting D1 and D2,
if D2 comes up first I dont see messages flowing. When D1 comes up first
followed by D2, then everything is fine.

Can someone please confirm? If this is true, it is good to have this in
documentation.

RabbitMQ documentation and mailing list support is the best.

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140131/c498e7fc/attachment.html>

