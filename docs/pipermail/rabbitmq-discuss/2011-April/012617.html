<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Question about architecture
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Question%20about%20architecture&In-Reply-To=%3CFBEFCDAE-12ED-494A-ABD3-2CCF8525B8CE%40mac.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012605.html">
   <LINK REL="Next"  HREF="012627.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Question about architecture</H1>
    <B>Michael Beam</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Question%20about%20architecture&In-Reply-To=%3CFBEFCDAE-12ED-494A-ABD3-2CCF8525B8CE%40mac.com%3E"
       TITLE="[rabbitmq-discuss] Question about architecture">mikebeam at mac.com
       </A><BR>
    <I>Thu Apr 28 18:06:54 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012605.html">[rabbitmq-discuss] Cluster, shovel, how to accomplish this scenario?
</A></li>
        <LI>Next message: <A HREF="012627.html">[rabbitmq-discuss] [announce] amqp gem 0.8.0.rc3 is released &#8212; please help us test this RC!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12617">[ date ]</a>
              <a href="thread.html#12617">[ thread ]</a>
              <a href="subject.html#12617">[ subject ]</a>
              <a href="author.html#12617">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I'm new to RabbitMQ and AMQP, and I'd like to see what people with more experience have to say about exchange &amp; queue design.  I'm experimenting with using RabbitMQ to replace a homegrown thrift-based messaging solution that is used to relay change notifications from 10 or so CouchDB databases to several hundred running instances of our application.

My first thought was to create an exchange for each observed database observed, each exchange named after the database (i.e., couchdb_changes.db1 ... couchdb_changes.db10).  A routing key would be set for messages based on the value of some field in the database document. Each client application session would then create and bind a queue to each of the exchanges.

My second thought was that I could create a single exchange named &quot;couchdb_changes&quot;, and then add the database name to the routing key. When binding queues to the exchange the application would also incorporate the database name into the routing key.

So, are there advantages or disadvantages between the two approaches here, or are they largely functionally equivalent.  I prefer the feel an exchange per observed database; just curious if there are established patterns that I should know about to better inform design decisions.

Thanks!

Mike Beam


</PRE>







































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012605.html">[rabbitmq-discuss] Cluster, shovel, how to accomplish this scenario?
</A></li>
	<LI>Next message: <A HREF="012627.html">[rabbitmq-discuss] [announce] amqp gem 0.8.0.rc3 is released &#8212; please help us test this RC!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12617">[ date ]</a>
              <a href="thread.html#12617">[ thread ]</a>
              <a href="subject.html#12617">[ subject ]</a>
              <a href="author.html#12617">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
