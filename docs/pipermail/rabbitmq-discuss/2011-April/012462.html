<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Management UI plugin issue on 2 node cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20UI%20plugin%20issue%20on%202%20node%20cluster&In-Reply-To=%3CBANLkTiksTzwArnaoF-cO4T3axFaLhRaQOA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012461.html">
   <LINK REL="Next"  HREF="012506.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Management UI plugin issue on 2 node cluster</H1>
    <B>Aaron Westendorf</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20UI%20plugin%20issue%20on%202%20node%20cluster&In-Reply-To=%3CBANLkTiksTzwArnaoF-cO4T3axFaLhRaQOA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Management UI plugin issue on 2 node cluster">aaron at agoragames.com
       </A><BR>
    <I>Tue Apr 19 14:07:04 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012461.html">[rabbitmq-discuss] Management UI plugin issue on 2 node cluster
</A></li>
        <LI>Next message: <A HREF="012506.html">[rabbitmq-discuss] Management UI plugin issue on 2 node cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12462">[ date ]</a>
              <a href="thread.html#12462">[ thread ]</a>
              <a href="subject.html#12462">[ subject ]</a>
              <a href="author.html#12462">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Do you have a lot of traffic on your cluster? We were stress testing
and found the UI plugin rapidly consuming CPU and RAM even though we
weren't sending any traffic to its node. Eventually the kernel killed
the process, which is what I'm seeing implied in your logs.

I've been meaning to write up a bug report but we've been really busy
gearing up for todays big launch of Mortal Kombat.

-Aaron

On Tue, Apr 19, 2011 at 7:45 AM, Matthias Radestock
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt; wrote:
&gt;<i> Jos,
</I>&gt;<i>
</I>&gt;<i> Jos Boumans wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 18 Apr 2011, at 16:43, Matthias Radestock wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Is there anything of note in the rabbit.log and rabbit-sasl.log?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Nothing stood out before, but looking again i see:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> =WARNING REPORT==== 16-Apr-2011::21:55:15 ===
</I>&gt;&gt;<i> Mnesia('<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>'): ** WARNING ** Mnesia is overloaded:
</I>&gt;&gt;<i> {dump_log,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> time_threshold}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> =WARNING REPORT==== 16-Apr-2011::21:55:15 ===
</I>&gt;&gt;<i> Mnesia('<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>'): ** WARNING ** Mnesia is overloaded:
</I>&gt;&gt;<i> {dump_log,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> time_threshold}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> =ERROR REPORT==== 16-Apr-2011::21:55:15 ===
</I>&gt;&gt;<i> Mnesia('<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>'): ** ERROR ** mnesia_event got
</I>&gt;&gt;<i> {inconsistent_database, running_partitioned_network, '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a001</A>'}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> And from the sasl log:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> =CRASH REPORT==== 9-Apr-2011::03:24:03 ===
</I>&gt;&gt;<i> &#160;crasher:
</I>&gt;&gt;<i> &#160; &#160;initial call: gen:init_it/6
</I>&gt;&gt;<i> &#160; &#160;pid: &lt;0.158.0&gt;
</I>&gt;&gt;<i> &#160; &#160;registered_name: []
</I>&gt;&gt;<i> &#160; &#160;exception exit: {unexpected_info,
</I>&gt;&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{mnesia_locker,'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a001</A>',granted}}
</I>&gt;&gt;<i> &#160; &#160; &#160;in function &#160;gen_server2:terminate/3
</I>&gt;&gt;<i> &#160; &#160;ancestors: [worker_pool_sup,rabbit_sup,&lt;0.109.0&gt;]
</I>&gt;&gt;<i> &#160; &#160;messages: []
</I>&gt;&gt;<i> &#160; &#160;links: [&lt;0.156.0&gt;]
</I>&gt;&gt;<i> &#160; &#160;dictionary:
</I>&gt;&gt;<i> [{random_seed,{10759,27224,17036}},{worker_pool_worker,true}]
</I>&gt;&gt;<i> &#160; &#160;trap_exit: false
</I>&gt;&gt;<i> &#160; &#160;status: running
</I>&gt;&gt;<i> &#160; &#160;heap_size: 233
</I>&gt;&gt;<i> &#160; &#160;stack_size: 24
</I>&gt;&gt;<i> &#160; &#160;reductions: 310874
</I>&gt;&gt;<i> &#160;neighbours:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've attached the full logs the server has produced in the hope they
</I>&gt;&gt;<i> shed more light on the situation.
</I>&gt;<i>
</I>&gt;<i> Interesting. I gather this is reproducible, right? In which case could you
</I>&gt;<i> please package up the various bits that make up the rabbit installation on
</I>&gt;<i> those two machines - rabbit installation dir, plugins dir, mnesia dir,
</I>&gt;<i> config files - and put them somewhere we can grab them?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>


-- 
Aaron Westendorf
Senior Software Engineer
Agora Games
359 Broadway
Troy, NY 12180
Phone: 518.268.1000
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aaron at agoragames.com</A>
www.agoragames.com
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012461.html">[rabbitmq-discuss] Management UI plugin issue on 2 node cluster
</A></li>
	<LI>Next message: <A HREF="012506.html">[rabbitmq-discuss] Management UI plugin issue on 2 node cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12462">[ date ]</a>
              <a href="thread.html#12462">[ thread ]</a>
              <a href="subject.html#12462">[ subject ]</a>
              <a href="author.html#12462">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
