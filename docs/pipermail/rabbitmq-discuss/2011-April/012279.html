<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] BasicQoS usage: consuming 1 by 1 messages avoind	unacking the whole queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20BasicQoS%20usage%3A%20consuming%201%20by%201%20messages%0A%20avoind%09unacking%20the%20whole%20queue&In-Reply-To=%3C4D9C9940.2080009%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012278.html">
   <LINK REL="Next"  HREF="012299.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] BasicQoS usage: consuming 1 by 1 messages avoind	unacking the whole queue</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20BasicQoS%20usage%3A%20consuming%201%20by%201%20messages%0A%20avoind%09unacking%20the%20whole%20queue&In-Reply-To=%3C4D9C9940.2080009%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] BasicQoS usage: consuming 1 by 1 messages avoind	unacking the whole queue">simon at rabbitmq.com
       </A><BR>
    <I>Wed Apr  6 17:48:00 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012278.html">[rabbitmq-discuss] BasicQoS usage: consuming 1 by 1 messages avoind	unacking the whole queue
</A></li>
        <LI>Next message: <A HREF="012299.html">[rabbitmq-discuss] BasicQoS usage: consuming 1 by 1 messages avoind unacking the whole queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12279">[ date ]</a>
              <a href="thread.html#12279">[ thread ]</a>
              <a href="subject.html#12279">[ subject ]</a>
              <a href="author.html#12279">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06/04/11 17:20, Alfonso Pantoja wrote:
&gt;<i> I'm testing if it is possible to recover 1 by 1 message in order to
</I>&gt;<i> keep in limbo state (unacked) only that message.
</I>&gt;<i> It is posible?
</I>
Yes.

&gt;<i> I'm using .NET API 2.4.0 (method call BasicQoS(0,1,false) ) against
</I>&gt;<i> RabbitMQ 2.2.0
</I>&gt;<i> but does not work (API get all messages from the queue so all of them
</I>&gt;<i> stay unacked If no ack is sent).
</I>
That certainly should work. Are you sending basic.qos *before* 
consuming? If you consume first you may get a load of messages sent 
immediately, before the qos takes effect.

&gt;<i> Also BasicQoS does not work if first parameter is !=0 (I get a
</I>&gt;<i> NOT_IMPLEMENTED error)
</I>&gt;<i> and the same with third parameter set to true.
</I>
Yes. The first of those would be to ration bytes rather than messages, 
the second would mean to apply the count over the whole connection 
rather than the channel. We don't implement either.

&gt;<i> By the way, parameters are:
</I>&gt;<i> BasicQoS(uint prefetchSize, uint prefecthCount, bool global) They are
</I>&gt;<i> not documented but I suppose the
</I>&gt;<i> the call BasicQoS(0,1,false)should be what I want...
</I>
See documentation at:

<A HREF="http://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.qos">http://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.qos</A>

&gt;<i> The other option would be to use BasicGet but I don't know if this
</I>&gt;<i> method keeps unack only 1 message (didn't tested yet) but I'm thinking
</I>&gt;<i> that the performance will be very low. Am I right?
</I>
If you keep invoking get without acking then you could have more than 
one unacked, but that's up to you. The performance is not great, that's 
right. And you'd have to poll. Ugh.

Cheers, Simon

-- 
Simon MacMullen
Staff Engineer, RabbitMQ
SpringSource, a division of VMware

</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012278.html">[rabbitmq-discuss] BasicQoS usage: consuming 1 by 1 messages avoind	unacking the whole queue
</A></li>
	<LI>Next message: <A HREF="012299.html">[rabbitmq-discuss] BasicQoS usage: consuming 1 by 1 messages avoind unacking the whole queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12279">[ date ]</a>
              <a href="thread.html#12279">[ thread ]</a>
              <a href="subject.html#12279">[ subject ]</a>
              <a href="author.html#12279">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
