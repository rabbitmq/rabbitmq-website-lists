<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Management UI plugin issue on 2 node cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20UI%20plugin%20issue%20on%202%20node%20cluster&In-Reply-To=%3C63179669-3E49-4F2C-A471-875725038BC7%40vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012445.html">
   <LINK REL="Next"  HREF="012447.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Management UI plugin issue on 2 node cluster</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20UI%20plugin%20issue%20on%202%20node%20cluster&In-Reply-To=%3C63179669-3E49-4F2C-A471-875725038BC7%40vmware.com%3E"
       TITLE="[rabbitmq-discuss] Management UI plugin issue on 2 node cluster">jerryk at vmware.com
       </A><BR>
    <I>Tue Apr 19 00:39:14 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012445.html">[rabbitmq-discuss] Management UI plugin issue on 2 node cluster
</A></li>
        <LI>Next message: <A HREF="012447.html">[rabbitmq-discuss] Management UI plugin issue on 2 node cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12446">[ date ]</a>
              <a href="thread.html#12446">[ thread ]</a>
              <a href="subject.html#12446">[ subject ]</a>
              <a href="author.html#12446">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Jos...  Did you upgrade the plugin versions at the same time?

Best regards,
Jerry

Sent from my iPad.

On Apr 18, 2011, at 4:35 PM, &quot;Jos I. Boumans&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jos at dwim.org</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I've just upgraded my 2 node cluster from 2.4.0 to 2.4.1 on Ubuntu
</I>&gt;<i> 10.04.2 on ec2. Both nodes have the plugins installed for the
</I>&gt;<i> management UI (+agent) and the stomp adapter.
</I>&gt;<i> 
</I>&gt;<i> The second node in the cluster won't start with the management UI
</I>&gt;<i> installed. If i remove the UI and leave the agent + stomp adapter,
</I>&gt;<i> it starts and joins the cluster as expected. This configuration
</I>&gt;<i> worked fine on 2.4.0.
</I>&gt;<i> 
</I>&gt;<i> I have a huge erlang crash dump file, but nothing that seems to
</I>&gt;<i> indicate anything about the management plugin. The error log shows:
</I>&gt;<i> 
</I>&gt;<i>  Kernel pid terminated (application_controller)  
</I>&gt;<i> ({application_terminated,rabbit,shutdown})
</I>&gt;<i> 
</I>&gt;<i> and not much more than that.
</I>&gt;<i> 
</I>&gt;<i> The full output of a console session is below the sig showing how
</I>&gt;<i> it works without the UI plugin, and fails when enabling it.
</I>&gt;<i> 
</I>&gt;<i> The full erlang crash dump is available here:
</I>&gt;<i> 
</I>&gt;<i>  <A HREF="http://krux-temp.s3.amazonaws.com/erl_crash.dump">http://krux-temp.s3.amazonaws.com/erl_crash.dump</A>
</I>&gt;<i> 
</I>&gt;<i> Can someone help me diagnose and address the problem?
</I>&gt;<i> 
</I>&gt;<i> I'm also found on Freenode/#rabbitmq as 'jiboumans'.
</I>&gt;<i> 
</I>&gt;<i> Thank you,
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> 
</I>&gt;<i>    Jos Boumans
</I>&gt;<i> 
</I>&gt;<i>    &quot;Whenever you find you are on the side of the majority,
</I>&gt;<i>    it is time to pause and reflect.&quot; - Mark Twain
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ubuntu at rabbit-a002</A>:/usr/lib/rabbitmq/lib/rabbitmq_server-2.4.1/plugins 
</I>&gt;<i> $ ls
</I>&gt;<i> amqp_client-2.4.1.ez  rabbitmq-management-agent-2.4.1.ez   
</I>&gt;<i> rabbit_stomp-2.4.1.ez
</I>&gt;<i> mochiweb-2.4.1.ez     rabbitmq-mochiweb-2.4.1.ez           
</I>&gt;<i> webmachine-2.4.1.ez
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ubuntu at rabbit-a002</A>:/usr/lib/rabbitmq/lib/rabbitmq_server-2.4.1/plugins 
</I>&gt;<i> $ sudo rabbitmqctl status
</I>&gt;<i> Status of node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>' ...
</I>&gt;<i> [{pid,30804},
</I>&gt;<i> {running_applications,
</I>&gt;<i>     [{webmachine,&quot;webmachine&quot;,&quot;1.7.0&quot;},
</I>&gt;<i>      {rabbit_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;2.4.1&quot;},
</I>&gt;<i>      {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;2.4.1&quot;},
</I>&gt;<i>      {rabbit_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;2.4.1&quot;},
</I>&gt;<i>      {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;1.3&quot;},
</I>&gt;<i>      {inets,&quot;INETS  CXC 138 49&quot;,&quot;5.2&quot;},
</I>&gt;<i>      {rabbit_stomp,&quot;Embedded Rabbit Stomp Adapter&quot;,&quot;2.4.1&quot;},
</I>&gt;<i>      {rabbit,&quot;RabbitMQ&quot;,&quot;2.4.1&quot;},
</I>&gt;<i>      {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.4.12&quot;},
</I>&gt;<i>      {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.4&quot;},
</I>&gt;<i>      {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.8&quot;},
</I>&gt;<i>      {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.16.4&quot;},
</I>&gt;<i>      {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.13.4&quot;}]},
</I>&gt;<i> {nodes,[{disc,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>','<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a001</A>']}]},
</I>&gt;<i> {running_nodes,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a001</A>','<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>']}]
</I>&gt;<i> ...done.
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ubuntu at rabbit-a002</A>:/usr/lib/rabbitmq/lib/rabbitmq_server-2.4.1/plugins 
</I>&gt;<i> $ sudo mv /tmp/rabbitmq-management-2.4.1.ez .
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ubuntu at rabbit-a002</A>:/usr/lib/rabbitmq/lib/rabbitmq_server-2.4.1/plugins 
</I>&gt;<i> $ sudo /etc/init.d/rabbitmq-server restart
</I>&gt;<i> Restarting rabbitmq-server: FAILED - check /var/log/rabbitmq/ 
</I>&gt;<i> startup_{log, _err}
</I>&gt;<i> rabbitmq-server.
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ubuntu at rabbit-a002</A>:/usr/lib/rabbitmq/lib/rabbitmq_server-2.4.1/plugins 
</I>&gt;<i> $ cat  /var/log/rabbitmq/startup_{log,err}
</I>&gt;<i> Activating RabbitMQ plugins ...
</I>&gt;<i> *WARNING* Undefined function fdsrv:bind_socket/2
</I>&gt;<i> *WARNING* Undefined function fdsrv:start/0
</I>&gt;<i> *WARNING* Undefined function fdsrv:stop/0
</I>&gt;<i> *WARNING* Undefined function webmachine_resource:start_link/2
</I>&gt;<i> 7 plugins activated:
</I>&gt;<i> * amqp_client-2.4.1
</I>&gt;<i> * mochiweb-1.3
</I>&gt;<i> * rabbit_stomp-2.4.1
</I>&gt;<i> * rabbit_management-2.4.1
</I>&gt;<i> * rabbit_management_agent-2.4.1
</I>&gt;<i> * rabbit_mochiweb-2.4.1
</I>&gt;<i> * webmachine-1.7.0
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> +---+   +---+
</I>&gt;<i> |   |   |   |
</I>&gt;<i> |   |   |   |
</I>&gt;<i> |   |   |   |
</I>&gt;<i> |   +---+   +-------+
</I>&gt;<i> |                   |
</I>&gt;<i> | RabbitMQ  +---+   |
</I>&gt;<i> |           |   |   |
</I>&gt;<i> |   v2.4.1  +---+   |
</I>&gt;<i> |                   |
</I>&gt;<i> +-------------------+
</I>&gt;<i> AMQP 0-9-1 / 0-9 / 0-8
</I>&gt;<i> Copyright (C) 2007-2011 VMware, Inc.
</I>&gt;<i> Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>
</I>&gt;<i> 
</I>&gt;<i> node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>
</I>&gt;<i> app descriptor : /usr/lib/rabbitmq/lib/rabbitmq_server-2.4.1/sbin/../ 
</I>&gt;<i> ebin/rabbit.app
</I>&gt;<i> home dir       : /var/lib/rabbitmq
</I>&gt;<i> config file(s) : (none)
</I>&gt;<i> cookie hash    : soP1A0eax4HhjRzyXNgpFA==
</I>&gt;<i> log            : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002.log</A>
</I>&gt;<i> sasl log       : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002-sasl.log</A>
</I>&gt;<i> database dir   : /var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>
</I>&gt;<i> erlang version : 5.7.4
</I>&gt;<i> 
</I>&gt;<i> starting file handle cache  
</I>&gt;<i> server                                     ...done
</I>&gt;<i> starting worker  
</I>&gt;<i> pool                                                  ...done
</I>&gt;<i> starting  
</I>&gt;<i> database                                                     ...done
</I>&gt;<i> starting codec correctness  
</I>&gt;<i> check                                      ...done
</I>&gt;<i> -- external infrastructure ready
</I>&gt;<i> starting plugin  
</I>&gt;<i> registry                                              ...done
</I>&gt;<i> starting auth mechanism cr- 
</I>&gt;<i> demo                                       ...done
</I>&gt;<i> starting auth mechanism  
</I>&gt;<i> amqplain                                      ...done
</I>&gt;<i> starting auth mechanism  
</I>&gt;<i> plain                                         ...done
</I>&gt;<i> starting statistics event  
</I>&gt;<i> manager                                     ...done
</I>&gt;<i> starting logging  
</I>&gt;<i> server                                               ...done
</I>&gt;<i> starting exchange type  
</I>&gt;<i> direct                                         ...done
</I>&gt;<i> starting exchange type  
</I>&gt;<i> fanout                                         ...done
</I>&gt;<i> starting exchange type  
</I>&gt;<i> headers                                        ...done
</I>&gt;<i> starting exchange type  
</I>&gt;<i> topic                                          ...done
</I>&gt;<i> -- kernel ready
</I>&gt;<i> starting alarm  
</I>&gt;<i> handler                                                ...done
</I>&gt;<i> starting node  
</I>&gt;<i> monitor                                                 ...done
</I>&gt;<i> starting cluster  
</I>&gt;<i> delegate                                             ...done
</I>&gt;<i> starting guid  
</I>&gt;<i> generator                                               ...done
</I>&gt;<i> starting memory  
</I>&gt;<i> monitor                                               ...done
</I>&gt;<i> -- core initialized
</I>&gt;<i> starting empty DB  
</I>&gt;<i> check                                               ...done
</I>&gt;<i> starting exchange  
</I>&gt;<i> recovery                                            ...done
</I>&gt;<i> starting management  
</I>&gt;<i> agent                                             ...done
</I>&gt;<i> starting management statistics  
</I>&gt;<i> database                               ...done
</I>&gt;<i> starting queue supervisor and queue  
</I>&gt;<i> recovery                          ...done
</I>&gt;<i> -- message delivery logic ready
</I>&gt;<i> starting error log  
</I>&gt;<i> relay                                              ...done
</I>&gt;<i> starting  
</I>&gt;<i> networking                                                   ...done
</I>&gt;<i> starting  
</I>&gt;<i> direct_client                                                ...done
</I>&gt;<i> starting notify cluster  
</I>&gt;<i> nodes                                         ...done
</I>&gt;<i> 
</I>&gt;<i> broker running
</I>&gt;<i> starting STOMP Adapter (binding to [61613])  ...done
</I>&gt;<i> ** Found 0 name clashes in code paths
</I>&gt;<i> {&quot;Kernel pid  
</I>&gt;<i> terminated 
</I>&gt;<i> &quot;,application_controller,&quot;{application_terminated,rabbit,shutdown}&quot;}
</I>&gt;<i> Erlang has closed
</I>&gt;<i> 
</I>&gt;<i> Crash dump was written to: erl_crash.dump
</I>&gt;<i> Kernel pid terminated (application_controller)  
</I>&gt;<i> ({application_terminated,rabbit,shutdown})
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ubuntu at rabbit-a002</A>:/usr/lib/rabbitmq/lib/rabbitmq_server-2.4.1/plugins 
</I>&gt;<i> $ sudo rabbitmqctl status
</I>&gt;<i> Status of node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>' ...
</I>&gt;<i> Error: unable to connect to node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>': nodedown
</I>&gt;<i> diagnostics:
</I>&gt;<i> - nodes and their ports on rabbit-a002: [{rabbitmqctl31379,54031}]
</I>&gt;<i> - current node: '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl31379 at rabbit-a002</A>'
</I>&gt;<i> - current node home dir: /var/lib/rabbitmq
</I>&gt;<i> - current node cookie hash: soP1A0eax4HhjRzyXNgpFA==
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ubuntu at rabbit-a002</A>:/usr/lib/rabbitmq/lib/rabbitmq_server-2.4.1/plugins 
</I>&gt;<i> $ sudo mv rabbitmq-management-2.4.1.ez /tmp
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ubuntu at rabbit-a002</A>:/usr/lib/rabbitmq/lib/rabbitmq_server-2.4.1/plugins 
</I>&gt;<i> $ sudo /etc/init.d/rabbitmq-server restart
</I>&gt;<i> Restarting rabbitmq-server: RabbitMQ is not running
</I>&gt;<i> SUCCESS
</I>&gt;<i> rabbitmq-server.
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ubuntu at rabbit-a002</A>:/usr/lib/rabbitmq/lib/rabbitmq_server-2.4.1/plugins 
</I>&gt;<i> $ sudo rabbitmqctl status
</I>&gt;<i> Status of node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>' ...
</I>&gt;<i> [{pid,31513},
</I>&gt;<i> {running_applications,
</I>&gt;<i>     [{webmachine,&quot;webmachine&quot;,&quot;1.7.0&quot;},
</I>&gt;<i>      {rabbit_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;2.4.1&quot;},
</I>&gt;<i>      {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;2.4.1&quot;},
</I>&gt;<i>      {rabbit_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;2.4.1&quot;},
</I>&gt;<i>      {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;1.3&quot;},
</I>&gt;<i>      {inets,&quot;INETS  CXC 138 49&quot;,&quot;5.2&quot;},
</I>&gt;<i>      {rabbit_stomp,&quot;Embedded Rabbit Stomp Adapter&quot;,&quot;2.4.1&quot;},
</I>&gt;<i>      {rabbit,&quot;RabbitMQ&quot;,&quot;2.4.1&quot;},
</I>&gt;<i>      {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.4.12&quot;},
</I>&gt;<i>      {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.4&quot;},
</I>&gt;<i>      {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.8&quot;},
</I>&gt;<i>      {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.16.4&quot;},
</I>&gt;<i>      {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.13.4&quot;}]},
</I>&gt;<i> {nodes,[{disc,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>','<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a001</A>']}]},
</I>&gt;<i> {running_nodes,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a001</A>','<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>']}]
</I>&gt;<i> ...done.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012445.html">[rabbitmq-discuss] Management UI plugin issue on 2 node cluster
</A></li>
	<LI>Next message: <A HREF="012447.html">[rabbitmq-discuss] Management UI plugin issue on 2 node cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12446">[ date ]</a>
              <a href="thread.html#12446">[ thread ]</a>
              <a href="subject.html#12446">[ subject ]</a>
              <a href="author.html#12446">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
