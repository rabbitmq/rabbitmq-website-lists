<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Transaction Dependencies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Transaction%20Dependencies&In-Reply-To=%3C4DA3D5BA.9080403%40shiftmethod.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012550.html">
   <LINK REL="Next"  HREF="012361.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Transaction Dependencies</H1>
    <B>Vaughn Vernon</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Transaction%20Dependencies&In-Reply-To=%3C4DA3D5BA.9080403%40shiftmethod.com%3E"
       TITLE="[rabbitmq-discuss] Transaction Dependencies">vvernon at shiftmethod.com
       </A><BR>
    <I>Tue Apr 12 05:31:54 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012550.html">[rabbitmq-discuss] Fwd: Management UI plugin issue on 2 node cluster
</A></li>
        <LI>Next message: <A HREF="012361.html">[rabbitmq-discuss] Transaction Dependencies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12327">[ date ]</a>
              <a href="thread.html#12327">[ thread ]</a>
              <a href="subject.html#12327">[ subject ]</a>
              <a href="author.html#12327">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

How do you recommend handling the case where a local application 
database transaction may commit or rollback, and you don't want to 
publish the event unless it commits? In other words:

1 - application transaction begins
     2 - application writes to database
     3 - rmq message published (publish must succeed for application 
transaction to succeed)
4 - application transaction commits; however, issue occurs, transaction 
does not complete; must prevent rmq publish

Can't move #3 after #4 because the possibility exists that rmq publish 
will fail and message will never be published.

This points to 2pc of application and rmq, but unavailable for the 
application database. BTW, does rmq 2pc with other databases?

Vaughn

--

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110411/746d8e5b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110411/746d8e5b/attachment.htm</A>&gt;
</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012550.html">[rabbitmq-discuss] Fwd: Management UI plugin issue on 2 node cluster
</A></li>
	<LI>Next message: <A HREF="012361.html">[rabbitmq-discuss] Transaction Dependencies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12327">[ date ]</a>
              <a href="thread.html#12327">[ thread ]</a>
              <a href="subject.html#12327">[ subject ]</a>
              <a href="author.html#12327">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
