<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> No subject
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.59.1328922968.2895.rabbitmq-discuss%40lists.rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018033.html">
   <LINK REL="Next"  HREF="013699.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>No subject</H1>
    <B></B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.59.1328922968.2895.rabbitmq-discuss%40lists.rabbitmq.com%3E"
       TITLE="No subject">
       </A><BR>
    <I>Tue Apr 12 10:32:41 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="018033.html">No subject
</A></li>
        <LI>Next message: <A HREF="013699.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18083">[ date ]</a>
              <a href="thread.html#18083">[ thread ]</a>
              <a href="subject.html#18083">[ subject ]</a>
              <a href="author.html#18083">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>queues, one from which the monitor reads MGMT messages and one from which 
something else reads HB messages.  You could imagine binding both of those
queues to a topic exchange and have your producer use routing keys to land
your messages in the desired place.

Make sense?

Best regards,
Jerry

----- Original Message -----
From: &quot;Paul M. Bell&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">pbell at syncsort.com</A>&gt;
To: &quot;RabbitMQ List&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Sent: Friday, February 10, 2012 3:36:47 PM
Subject: [rabbitmq-discuss] Naive Question

All,

Hi again.

Only after trying to think through a real world scenario did I realize that my grasp of certain fundamental AMQP concepts is tenuous.

Specifically, given a producer and a consumer, is the normative behavior for only *one* of them to declare (create?) the queue over which they communicate? As I look over the examples that I've &quot;written&quot; (&quot;copied&quot; would be more accurate), I see my producer doing this:


RabbitAdmin admin = new RabbitAdmin(rabbitTemplate.getConnectionFactory());
Exchange ex = new FanoutExchange(routingKey, true, false);
admin.declareExchange(ex);
admin.declareQueue(new Queue(this.queueName));


And I see my consumer doing this:


ConsumerSimpleMessageListenerContainer container = new ConsumerSimpleMessageListenerContainer();
container.setConnectionFactory(connectionFactory());
container.setQueueNames(this.queueName);
container.setConcurrentConsumers(this.onOfConsumer);
container.setMessageListener(new MessageListenerAdapter(new ConsumerHandler(), new SimpleMessageConverter()));
container.startConsumers();


What would happen if each declared a queue of the same name and type - would that give rise to two distinct queues, leaving the producer and consumer unable to communicate?

If it's normative for only one party to create the queue and the other to bind to it, what will happen if, when I try to bind to the queue, it doesn't yet exist?

Here's what I am trying to get to (I assume it requires a topic exchange):

a. a queue that holds two different message types, call them &quot;MGMT&quot; and &quot;HB.&quot;
b. a producer writes MGMT messages to this queue
c. something called a &quot;monitor&quot; writes HB messages to this queue
d. consumer reads HB messages from this queue
e. monitor reads MGMT messages from this queue

Schematically I think it looks like this:

Producer(MGMT) -&gt; monitor
Monitor(HB)    -&gt; consumer

How would I define these relationships via RabbitMQ? Who does what to whom?! I suspect it's simple, but after two solid weeks of 10 hour days, I am fried.

Thank you for your help.

-Paul

PS: What follows is not an attempt to curry favor - but this is a really fine list; folks are friendly, knowledgeable, and eager to help. I really appreciate it.





ATTENTION: -----

The information contained in this message (including any files transmitted with this message) may contain proprietary, trade secret or other  confidential and/or legally privileged information. Any pricing information contained in this message or in any files transmitted with this message is always confidential and cannot be shared with any third parties without prior written approval from Syncsort. This message is intended to be read only by the individual or entity to whom it is addressed or by their designee. If the reader of this message is not the intended recipient, you are on notice that any use, disclosure, copying or distribution of this message, in any form, is strictly prohibited. If you have received this message in error, please immediately notify the sender and/or Syncsort and destroy all copies of this message in your possession, custody or control.
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018033.html">No subject
</A></li>
	<LI>Next message: <A HREF="013699.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18083">[ date ]</a>
              <a href="thread.html#18083">[ thread ]</a>
              <a href="subject.html#18083">[ subject ]</a>
              <a href="author.html#18083">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
