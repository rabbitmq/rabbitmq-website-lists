<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Management UI plugin issue on 2 node cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20UI%20plugin%20issue%20on%202%20node%20cluster&In-Reply-To=%3C00135F66-AEC2-4E30-BA6B-4B5EF93B42AD%40dwim.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012462.html">
   <LINK REL="Next"  HREF="012507.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Management UI plugin issue on 2 node cluster</H1>
    <B>Jos Boumans</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20UI%20plugin%20issue%20on%202%20node%20cluster&In-Reply-To=%3C00135F66-AEC2-4E30-BA6B-4B5EF93B42AD%40dwim.org%3E"
       TITLE="[rabbitmq-discuss] Management UI plugin issue on 2 node cluster">jos at dwim.org
       </A><BR>
    <I>Thu Apr 21 19:26:53 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012462.html">[rabbitmq-discuss] Management UI plugin issue on 2 node cluster
</A></li>
        <LI>Next message: <A HREF="012507.html">[rabbitmq-discuss] Management UI plugin issue on 2 node cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12506">[ date ]</a>
              <a href="thread.html#12506">[ thread ]</a>
              <a href="subject.html#12506">[ subject ]</a>
              <a href="author.html#12506">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Aaron,

On 19 Apr 2011, at 06:07, Aaron Westendorf wrote:

&gt;<i> Do you have a lot of traffic on your cluster? We were stress testing
</I>&gt;<i> and found the UI plugin rapidly consuming CPU and RAM even though we
</I>&gt;<i> weren't sending any traffic to its node. Eventually the kernel killed
</I>&gt;<i> the process, which is what I'm seeing implied in your logs.
</I>
A few requests per second at best; we're just gearing up to use rabbit
in production and basically just the messages for the monitoring system
are flowing through there right now.

No real load to speak of to be honest.

&gt;<i>
</I>&gt;<i> I've been meaning to write up a bug report but we've been really busy
</I>&gt;<i> gearing up for todays big launch of Mortal Kombat.
</I>&gt;<i>
</I>&gt;<i> -Aaron
</I>&gt;<i>
</I>&gt;<i> On Tue, Apr 19, 2011 at 7:45 AM, Matthias Radestock
</I>&gt;<i> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt; wrote:
</I>&gt;&gt;<i> Jos,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jos Boumans wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On 18 Apr 2011, at 16:43, Matthias Radestock wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Is there anything of note in the rabbit.log and rabbit-sasl.log?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Nothing stood out before, but looking again i see:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> =WARNING REPORT==== 16-Apr-2011::21:55:15 ===
</I>&gt;&gt;&gt;<i> Mnesia('<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>'): ** WARNING ** Mnesia is overloaded:
</I>&gt;&gt;&gt;<i> {dump_log,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> time_threshold}
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> =WARNING REPORT==== 16-Apr-2011::21:55:15 ===
</I>&gt;&gt;&gt;<i> Mnesia('<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>'): ** WARNING ** Mnesia is overloaded:
</I>&gt;&gt;&gt;<i> {dump_log,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> time_threshold}
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> =ERROR REPORT==== 16-Apr-2011::21:55:15 ===
</I>&gt;&gt;&gt;<i> Mnesia('<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a002</A>'): ** ERROR ** mnesia_event got
</I>&gt;&gt;&gt;<i> {inconsistent_database, running_partitioned_network,  
</I>&gt;&gt;&gt;<i> '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a001</A>'}
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> And from the sasl log:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> =CRASH REPORT==== 9-Apr-2011::03:24:03 ===
</I>&gt;&gt;&gt;<i>  crasher:
</I>&gt;&gt;&gt;<i>    initial call: gen:init_it/6
</I>&gt;&gt;&gt;<i>    pid: &lt;0.158.0&gt;
</I>&gt;&gt;&gt;<i>    registered_name: []
</I>&gt;&gt;&gt;<i>    exception exit: {unexpected_info,
</I>&gt;&gt;&gt;<i>                        {mnesia_locker,'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-a001</A>',granted}}
</I>&gt;&gt;&gt;<i>      in function  gen_server2:terminate/3
</I>&gt;&gt;&gt;<i>    ancestors: [worker_pool_sup,rabbit_sup,&lt;0.109.0&gt;]
</I>&gt;&gt;&gt;<i>    messages: []
</I>&gt;&gt;&gt;<i>    links: [&lt;0.156.0&gt;]
</I>&gt;&gt;&gt;<i>    dictionary:
</I>&gt;&gt;&gt;<i> [{random_seed,{10759,27224,17036}},{worker_pool_worker,true}]
</I>&gt;&gt;&gt;<i>    trap_exit: false
</I>&gt;&gt;&gt;<i>    status: running
</I>&gt;&gt;&gt;<i>    heap_size: 233
</I>&gt;&gt;&gt;<i>    stack_size: 24
</I>&gt;&gt;&gt;<i>    reductions: 310874
</I>&gt;&gt;&gt;<i>  neighbours:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I've attached the full logs the server has produced in the hope they
</I>&gt;&gt;&gt;<i> shed more light on the situation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Interesting. I gather this is reproducible, right? In which case  
</I>&gt;&gt;<i> could you
</I>&gt;&gt;<i> please package up the various bits that make up the rabbit  
</I>&gt;&gt;<i> installation on
</I>&gt;&gt;<i> those two machines - rabbit installation dir, plugins dir, mnesia  
</I>&gt;&gt;<i> dir,
</I>&gt;&gt;<i> config files - and put them somewhere we can grab them?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Matthias.
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Aaron Westendorf
</I>&gt;<i> Senior Software Engineer
</I>&gt;<i> Agora Games
</I>&gt;<i> 359 Broadway
</I>&gt;<i> Troy, NY 12180
</I>&gt;<i> Phone: 518.268.1000
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aaron at agoragames.com</A>
</I>&gt;<i> www.agoragames.com
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012462.html">[rabbitmq-discuss] Management UI plugin issue on 2 node cluster
</A></li>
	<LI>Next message: <A HREF="012507.html">[rabbitmq-discuss] Management UI plugin issue on 2 node cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12506">[ date ]</a>
              <a href="thread.html#12506">[ thread ]</a>
              <a href="subject.html#12506">[ subject ]</a>
              <a href="author.html#12506">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
