<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Upgrading windows bundle?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Upgrading%20windows%20bundle%3F&In-Reply-To=%3C20110428120619.GF5427%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012513.html">
   <LINK REL="Next"  HREF="012596.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Upgrading windows bundle?</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Upgrading%20windows%20bundle%3F&In-Reply-To=%3C20110428120619.GF5427%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Upgrading windows bundle?">matthew at rabbitmq.com
       </A><BR>
    <I>Thu Apr 28 13:06:19 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012513.html">[rabbitmq-discuss] Upgrading windows bundle?
</A></li>
        <LI>Next message: <A HREF="012596.html">[rabbitmq-discuss] Upgrading windows bundle?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12586">[ date ]</a>
              <a href="thread.html#12586">[ thread ]</a>
              <a href="subject.html#12586">[ subject ]</a>
              <a href="author.html#12586">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Thu, Apr 21, 2011 at 05:50:48PM -0500, Derek Chen-Becker wrote:
&gt;<i>     We're looking at deploying a RabbitMQ broker on Windows at
</I>&gt;<i> potentially several thousand sites and our QA group has come up with a
</I>&gt;<i> few questions. First, the windows bundle is essentially a zip file that
</I>&gt;<i> we unpack to a specific directory for the install. When we want to
</I>&gt;<i> upgrade can we just stop the service, unpack the new files to the same
</I>&gt;<i> location and then start the service, or do we need to additionally
</I>&gt;<i> deregister the service, remove all of the old files, and then unpack and
</I>&gt;<i> re-register the service?
</I>
The latter is likely the safest route. The minimum you'll need to do is
unpack, reinstall the service, and then start the service.

&gt;<i>     They were also wondering if the permissions are stored in a file
</I>&gt;<i> somewhere that we could push out if we decide we want to add users,
</I>&gt;<i> perms, etc, or if we'll need to run a script against rabbitmqctl on each
</I>&gt;<i> box (slightly more work but not a big deal). I know RabbitMQ stores that
</I>&gt;<i> data somewhere, we're just not sure if it's the same name on each box
</I>&gt;<i> and if it's safe to copy that file to a different host (each host is
</I>&gt;<i> going to have a unique node name based on the computer name).
</I>
The permissions and most other meta-data are stored in an mnesia
database that Rabbit uses. The only way of modifying permissions is
through the rabbitmqctl command, so yes, I'm afraid you will need to
script that.

It's not safe to copy the mnesia files from computer to computer
because, for one, mnesia stores the host name in those files, and will
refuse to start if it finds the stored host name does not match the
machine's host name. The important implication of this is that if you
change the host name of a machine, you'll need to wipe out any data
Rabbit has stored on that machine and restart Rabbit.

Matthew
</PRE>






























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012513.html">[rabbitmq-discuss] Upgrading windows bundle?
</A></li>
	<LI>Next message: <A HREF="012596.html">[rabbitmq-discuss] Upgrading windows bundle?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12586">[ date ]</a>
              <a href="thread.html#12586">[ thread ]</a>
              <a href="subject.html#12586">[ subject ]</a>
              <a href="author.html#12586">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
