<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Message Aggregating Queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20Aggregating%20Queue&In-Reply-To=%3CA29C0517-62E7-4C7E-A648-288938CA751D%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012599.html">
   <LINK REL="Next"  HREF="012606.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Message Aggregating Queue</H1>
    <B>Alvaro Videla</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20Aggregating%20Queue&In-Reply-To=%3CA29C0517-62E7-4C7E-A648-288938CA751D%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] Message Aggregating Queue">videlalvaro at gmail.com
       </A><BR>
    <I>Thu Apr 28 14:06:56 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012599.html">[rabbitmq-discuss] Message Aggregating Queue
</A></li>
        <LI>Next message: <A HREF="012606.html">[rabbitmq-discuss] Message Aggregating Queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12600">[ date ]</a>
              <a href="thread.html#12600">[ thread ]</a>
              <a href="subject.html#12600">[ subject ]</a>
              <a href="author.html#12600">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jason,

What I understood yesterday is that you will have one queue for UBS, another queue for Credit Suisse and so on. You mentioned something about unique identifiers per tick type which could be used as routing keys, then having a direct exchange bound to all those queues based on the tick type. My custom queue proposal is based on such assumptions.

-Alvaro


On Apr 28, 2011, at 3:01 PM, Alexis Richardson wrote:

&gt;<i> Jason
</I>&gt;<i> 
</I>&gt;<i> On Thu, Apr 28, 2011 at 1:54 PM, Jason Zaugg &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jzaugg at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Thanks for the great ideas and discussion so far!
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Another requirement I should make explicit: we have a single consumer
</I>&gt;&gt;<i> reading the stream of price updates for all stocks; and it should
</I>&gt;&gt;<i> process them the order. That is, we don't want to 'UBS' to move to the
</I>&gt;&gt;<i> back of the queue if it updates before the previous message is
</I>&gt;&gt;<i> processed. So a data structure like as LinkedHashMap would be needed
</I>&gt;&gt;<i> for the custom queue proposed by Alvaro.
</I>&gt;<i> 
</I>&gt;<i> I'm confused.  Would this stream contain exactly one price per ticker
</I>&gt;<i> symbol?  If so then why does it have to be a stream and not a set?  If
</I>&gt;<i> it must be a stream with multiple values per ticker, then just use
</I>&gt;<i> direct exchanges and one queue for the full stream.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> The Last Value Caching Exchange seems to solve a slightly different
</I>&gt;&gt;<i> problem (although one that we also have!). If I understand it, a queue
</I>&gt;&gt;<i> attached to the LVC exchange would receive *every* newly delivered
</I>&gt;&gt;<i> message, regardless of how fast it is able to process them.
</I>&gt;<i> 
</I>&gt;<i> Correct.  The LVC exchange is just a map from ticker to last value.
</I>&gt;<i> It does not affect delivery of subsequent messages.
</I>&gt;<i> 
</I>&gt;<i> Are you sure you wouldn't be better off using a cache?
</I>&gt;<i> 
</I>&gt;&gt;<i> In
</I>&gt;&gt;<i> addition, as soon as the queue is bound the the exchange, it would
</I>&gt;&gt;<i> receive the last value for each routing key.
</I>&gt;<i> 
</I>&gt;<i> Correct.
</I>&gt;<i> 
</I>&gt;<i> alexis
</I>
Sent form my Nokia 1100



</PRE>









































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012599.html">[rabbitmq-discuss] Message Aggregating Queue
</A></li>
	<LI>Next message: <A HREF="012606.html">[rabbitmq-discuss] Message Aggregating Queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12600">[ date ]</a>
              <a href="thread.html#12600">[ thread ]</a>
              <a href="subject.html#12600">[ subject ]</a>
              <a href="author.html#12600">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
