<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Scheduled/postponed messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Scheduled/postponed%20messages&In-Reply-To=%3CBANLkTinyHaf7goKipY_bZhu60XUYnjuVCQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012533.html">
   <LINK REL="Next"  HREF="012534.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Scheduled/postponed messages</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Scheduled/postponed%20messages&In-Reply-To=%3CBANLkTinyHaf7goKipY_bZhu60XUYnjuVCQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Scheduled/postponed messages">alexis at rabbitmq.com
       </A><BR>
    <I>Thu Apr 28 10:37:01 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012533.html">[rabbitmq-discuss] Scheduled/postponed messages
</A></li>
        <LI>Next message: <A HREF="012534.html">[rabbitmq-discuss] Unable to start RabbitMQ on Ubuntu 8.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12574">[ date ]</a>
              <a href="thread.html#12574">[ thread ]</a>
              <a href="subject.html#12574">[ subject ]</a>
              <a href="author.html#12574">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Konstantin

Or you could set your consumers to connect at time T.  If a queue has
no connected consumers, it can hold the messages till consumers
connect.  After that they will flow until there are no more messages
or the queue is deleted or the consumers disconnect.

alexis


On Mon, Apr 25, 2011 at 3:53 PM, Jon Brisbin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jon at jbrisbin.com</A>&gt; wrote:
&gt;<i> On Apr 25, 2011, at 9:47 AM, Konstantin Tjuterev wrote:
</I>&gt;<i>
</I>&gt;<i> So, until this feature is implemented, which strategy do you think would be
</I>&gt;<i> best as a workaround?
</I>&gt;<i>
</I>&gt;<i> This is completely off-the-cuff, but by using the new Riak RabbitMQ
</I>&gt;<i> postcommit hook, you could store your messages in Riak first with the
</I>&gt;<i> &quot;ignore&quot; flag set to true. At 8:00 a cron job could simply roll through all
</I>&gt;<i> the entries in that bucket and turn off the ignore flag, which would cause
</I>&gt;<i> all those messages to be sent out at once.
</I>&gt;<i> jb
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i> Konstantin.
</I>&gt;<i>
</I>&gt;<i> On Mon, Apr 25, 2011 at 4:58 PM, Jon Brisbin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jon at jbrisbin.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This sounds to me like the function of a queue type that buffers messages
</I>&gt;&gt;<i> until a specific threshold is reached (either of number or of time window).
</I>&gt;&gt;<i> Ideally, this should be implemented in the broker.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That wouldn't be an immediate fix, unfortunately, as implementing a new
</I>&gt;&gt;<i> queue type is non-trivial.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> jb
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Apr 25, 2011, at 6:02 AM, Konstantin Tjuterev wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Hi, I'm trying to implement the following scenario with RabbitMQ:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; - a site which generates various emails according to user actions (like
</I>&gt;&gt;<i> &gt; registration, ordering etc.), or according to schedule (daily
</I>&gt;&gt;<i> &gt; announcements); emails are published into an RabbitMQ exchange
</I>&gt;&gt;<i> &gt; - a set of workers which read the queue and send out emails, do some
</I>&gt;&gt;<i> &gt; logging
</I>&gt;&gt;<i> &gt; - some emails need to be sent immediately
</I>&gt;&gt;<i> &gt; - some should be sent precisely at specific time (or as close as
</I>&gt;&gt;<i> &gt; possible), like daily announcement should go out exactly at 8:00AM
</I>&gt;&gt;<i> &gt; - generating daily announcements involves complex logic and takes some
</I>&gt;&gt;<i> &gt; time (more than actual delivery), so there is a job which prepares it before
</I>&gt;&gt;<i> &gt; time X and publishes into an exchange
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; So, my question is if there is a native way to schedule messages to be
</I>&gt;&gt;<i> &gt; delivered to workers exactly at specific time? If there is not, which
</I>&gt;&gt;<i> &gt; strategy do you think would be the best:
</I>&gt;&gt;<i> &gt; - declaring a separate queue for such scheduled/postponed messages and
</I>&gt;&gt;<i> &gt; starting workers at required time (by cron)
</I>&gt;&gt;<i> &gt; - having a check-what-time-is-it/sleep cycle in the workers (which are
</I>&gt;&gt;<i> &gt; always running)
</I>&gt;&gt;<i> &gt; - having workers consume the message, check time and do NOT send
</I>&gt;&gt;<i> &gt; acknowledgement if it's not yet the time to process it (this is the only
</I>&gt;&gt;<i> &gt; strategy I see, NOT requiring separate workers, but it will use a lot of
</I>&gt;&gt;<i> &gt; resources for retrying message delivery)
</I>&gt;&gt;<i> &gt; - anything else?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Thanks in advance,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Konstantin.
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jon Brisbin
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://jbrisbin.com">http://jbrisbin.com</A>
</I>&gt;&gt;<i> Twitter: @j_brisbin
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i> Jon Brisbin
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://jbrisbin.com">http://jbrisbin.com</A>
</I>&gt;<i> Twitter: @j_brisbin
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>












































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012533.html">[rabbitmq-discuss] Scheduled/postponed messages
</A></li>
	<LI>Next message: <A HREF="012534.html">[rabbitmq-discuss] Unable to start RabbitMQ on Ubuntu 8.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12574">[ date ]</a>
              <a href="thread.html#12574">[ thread ]</a>
              <a href="subject.html#12574">[ subject ]</a>
              <a href="author.html#12574">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
