<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cluster size limit
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20size%20limit&In-Reply-To=%3C20110419105727.GL7850%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012277.html">
   <LINK REL="Next"  HREF="012491.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cluster size limit</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20size%20limit&In-Reply-To=%3C20110419105727.GL7850%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] Cluster size limit">matthew at rabbitmq.com
       </A><BR>
    <I>Tue Apr 19 11:57:27 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012277.html">[rabbitmq-discuss] Cluster size limit
</A></li>
        <LI>Next message: <A HREF="012491.html">[rabbitmq-discuss] Cluster size limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12459">[ date ]</a>
              <a href="thread.html#12459">[ thread ]</a>
              <a href="subject.html#12459">[ subject ]</a>
              <a href="author.html#12459">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Apr 06, 2011 at 09:39:40PM +0530, Advait Alai wrote:
&gt;<i> &gt;
</I>&gt;<i> &gt; Hmm. What version of Erlang are you running? I get a slightly different
</I>&gt;<i> &gt; error from the area of code I think is exploding...
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> I'm not very familiar with Erlang... 'erl -v' gives
</I>&gt;<i> 
</I>&gt;<i> Erlang R13B01 (erts-5.7.2)
</I>
Hmm, that's a little old, but I'm not sure it should really be causing
the issue you're seeing.

You should essentially be doing:
for node_to_add in $NODES; do \
	rabbitmqctl -n $node_to_add stop_app;
	rabbitmqctl -n $node_to_add reset;
	rabbitmqctl -n $node_to_add cluster $other_node $node_to_add;
	rabbitmqctl -n $node_to_add start_app;
done

If that's what you're doing and it's not working, after the reset, have
a poke around in that node's mnesia dir, and see if there's anything in
there - there really shouldn't be - it should be empty. For some reason,
the error you're getting is suggesting that on start_app, it's trying to
recover a queue on the node newly added to the cluster, which turns out
not to exist - this is hardly surprising - the reset will ensure there
are no queues on that node. But I don't understand why it would be
trying to do this.

Try to make sure that you're starting with absolutely no queues or
exchanges or anything configured in any node at all.

As I say, it does work for me, so I'm not quite sure why it's going
wrong for you.

Matthew
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012277.html">[rabbitmq-discuss] Cluster size limit
</A></li>
	<LI>Next message: <A HREF="012491.html">[rabbitmq-discuss] Cluster size limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12459">[ date ]</a>
              <a href="thread.html#12459">[ thread ]</a>
              <a href="subject.html#12459">[ subject ]</a>
              <a href="author.html#12459">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
