<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Data is feteched from the queue in random order
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Data%20is%20feteched%20from%20the%20queue%20in%20random%20order&In-Reply-To=%3C2146BC1F0A992D4782CBFA1477321427022AC3%40mbox.impetus.co.in%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012487.html">
   <LINK REL="Next"  HREF="012565.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Data is feteched from the queue in random order</H1>
    <B>Kamal  Nandan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Data%20is%20feteched%20from%20the%20queue%20in%20random%20order&In-Reply-To=%3C2146BC1F0A992D4782CBFA1477321427022AC3%40mbox.impetus.co.in%3E"
       TITLE="[rabbitmq-discuss] Data is feteched from the queue in random order">kamal.nandan at impetus.co.in
       </A><BR>
    <I>Wed Apr 20 10:25:12 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012487.html">[rabbitmq-discuss] a request for a new feature in rabbitmq - prefix to randomly named queues.
</A></li>
        <LI>Next message: <A HREF="012565.html">[rabbitmq-discuss] Data is feteched from the queue in random	order
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12479">[ date ]</a>
              <a href="thread.html#12479">[ thread ]</a>
              <a href="subject.html#12479">[ subject ]</a>
              <a href="author.html#12479">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am trying to dequeue data from the RabbitMQ. Why is it so that the data is not dequeued in the same order in which it was enqueued into the queue?

I see that the data is dequeued in a random order. Is it an expected behavior?

Following is the block of code that I am using to dequeue:


      public int init(String hostName, int port, String userName, String password, String queueName) throws OceRecoverableException
      {
            if(true == LOG.isDebugEnabled()) {
                  LOG.debug(&quot;Executing RabbitMqConsumer::init&quot;);
            }

            try {
                  super.initialize(hostName, port, userName, password, queueName);
            } catch (IOException ioe) {
                  String message = &quot;RabbitMQ consumer failed to create connection with the RabbitMQ server.&quot;;
                  LOG.error( message + &quot; [ERROR: &quot; + ioe.getMessage() + &quot;]&quot;);
                  throw new OceRecoverableException(ioe);
            }

            this.queueingConsumer = new QueueingConsumer(this.channel); //channel is the member of parent class

            try {
                  this.channel.basicConsume(queueName, false, this.queueingConsumer);
            } catch(IOException ioe) {
                  String message = &quot;RabbitMQ consumer failed to set the QueueingConsumer callback for consuming data.&quot;;
                  LOG.error( message + &quot; [ERROR: &quot; + ioe.getMessage() + &quot;]&quot;);
                  throw new OceRecoverableException(ioe);
            }

            return 0;
      }


      public byte[] fetchMessage(int timeout) throws OceRecoverableException
      {
            LOG.debug(&quot;RabbitMqConsumer::fetchMessage&quot;);

            if(this.channel == null)
            {
                  throw new OceRecoverableException(&quot;The channel is not initialized; Initilize the channel by calling init method&quot;);
            }

            QueueingConsumer.Delivery delivery;

            try {
                  delivery = this.queueingConsumer.nextDelivery(timeout);
            } catch(Exception ex) {
                  String message = &quot;Error occurred while fetching data from the RabbitMQ server.&quot;;
                  LOG.error( message + &quot; [ERROR: &quot; + ex.getMessage() + &quot;]&quot;);
                  throw new OceRecoverableException(ex);
            }

            if(delivery != null)
            {
                  try {
                        this.channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);
                  } catch (IOException ioe) {
                        String message = &quot;Error occurred while sending acknowledgement to the RabbitMQ server for the fetched message.&quot;;
                        LOG.error( message + &quot; [ERROR: &quot; + ioe.getMessage() + &quot;]&quot;);
                        throw new OceRecoverableException(ioe);
                  }

                  byte[] body = delivery.getBody();
                  return body;
            }
            else
            {
                  return null;
            }
      }

}


It would be great, if someone could guide me regarding this?  I want the data to be fetched in the order it was enqueued.

Thanks &amp; Regards,
Kamal

________________________________

Are you exploring a Big Data Strategy ? Listen to this recorded webinar on Planning your Hadoop/ NoSQL projects for 2011 at www.impetus.com/featured_webinar?eventid=37

Follow us on www.twitter.com/impetuscalling or visit www.impetus.com to know more.


NOTE: This message may contain information that is confidential, proprietary, privileged or otherwise protected by law. The message is intended solely for the named addressee. If received in error, please destroy and notify the sender. Any use of this email is prohibited when received in error. Impetus does not represent, warrant and/or guarantee, that the integrity of this communication has been maintained nor that the communication is free of errors, virus, interception or interference.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110420/e73f3bb8/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110420/e73f3bb8/attachment.htm</A>&gt;
</PRE>


























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012487.html">[rabbitmq-discuss] a request for a new feature in rabbitmq - prefix to randomly named queues.
</A></li>
	<LI>Next message: <A HREF="012565.html">[rabbitmq-discuss] Data is feteched from the queue in random	order
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12479">[ date ]</a>
              <a href="thread.html#12479">[ thread ]</a>
              <a href="subject.html#12479">[ subject ]</a>
              <a href="author.html#12479">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
