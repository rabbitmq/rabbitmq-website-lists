<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] question on custom exchanges
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20question%20on%20custom%20exchanges&In-Reply-To=%3C4D959B5E.6050309%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012222.html">
   <LINK REL="Next"  HREF="012230.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] question on custom exchanges</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20question%20on%20custom%20exchanges&In-Reply-To=%3C4D959B5E.6050309%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] question on custom exchanges">simon at rabbitmq.com
       </A><BR>
    <I>Fri Apr  1 10:31:10 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012222.html">[rabbitmq-discuss] Fault-tolerant subscriptions using the .NET	client
</A></li>
        <LI>Next message: <A HREF="012230.html">[rabbitmq-discuss] question on custom exchanges
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12224">[ date ]</a>
              <a href="thread.html#12224">[ thread ]</a>
              <a href="subject.html#12224">[ subject ]</a>
              <a href="author.html#12224">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 31/03/11 20:21, Jon Brisbin wrote:
&gt;<i> Sorry for the bang-bang, scatter-shot nature of these questions,
</I>&gt;<i> but...
</I>&gt;<i>
</I>&gt;<i> How would I go about creating resources that are unique to a given
</I>&gt;<i> custom exchange? For example, if I have hostname and port parameters
</I>&gt;<i> as arguments to my custom exchange, how can I manage a process that
</I>&gt;<i> is unique to that exchange (because it connects to a possibly-unique
</I>&gt;<i> combo of hostname and port) from my module?
</I>&gt;<i>
</I>&gt;<i> Do I construct some key based on vhost and exchange name and store a
</I>&gt;<i> Pid in an ets table or something?
</I>
I don't know whether you still need answers based on your tweets last 
night, but here goes. I've been working through some of the same issues 
with the federation plugin. Also I hope I'm understanding your questions 
correctly - let me know if not.

You should start your process up when the create() or recover() 
callbacks are invoked. (create() means a new exchange was created while 
Rabbit was running; recover() means Rabbit started up and found your 
exchange in Mnesia).

In terms of associating a PID with your exchange, you could use ETS or 
DETS but that won't be very wise around clusters. You could create an 
Mnesia table or use process groups (pg2) and create a process group per 
exchange. That's what I'm doing, but I have more than one process per 
exchange.

 &gt; What is the lifecycle of a custom exchange module? Does it even have
 &gt; one?

The module itself doesn't, it's just callbacks.

Finally, I'm working on changing some of these APIs to fix some edge 
cases that we're encountering, mostly around bindings. Once it's merged 
I'll mail you again to let know where we ended up.

Cheers, Simon

-- 
Simon MacMullen
Staff Engineer, RabbitMQ
SpringSource, a division of VMware

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012222.html">[rabbitmq-discuss] Fault-tolerant subscriptions using the .NET	client
</A></li>
	<LI>Next message: <A HREF="012230.html">[rabbitmq-discuss] question on custom exchanges
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12224">[ date ]</a>
              <a href="thread.html#12224">[ thread ]</a>
              <a href="subject.html#12224">[ subject ]</a>
              <a href="author.html#12224">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
