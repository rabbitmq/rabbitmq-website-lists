<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Shovel bug in 2.2.0? (fixed in 2.4.0?)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20bug%20in%202.2.0%3F%20%28fixed%20in%202.4.0%3F%29&In-Reply-To=%3C20110401165529.GD15292%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012236.html">
   <LINK REL="Next"  HREF="012238.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Shovel bug in 2.2.0? (fixed in 2.4.0?)</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20bug%20in%202.2.0%3F%20%28fixed%20in%202.4.0%3F%29&In-Reply-To=%3C20110401165529.GD15292%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Shovel bug in 2.2.0? (fixed in 2.4.0?)">matthew at rabbitmq.com
       </A><BR>
    <I>Fri Apr  1 17:55:29 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012236.html">[rabbitmq-discuss] Shovel bug in 2.2.0? (fixed in 2.4.0?)
</A></li>
        <LI>Next message: <A HREF="012238.html">[rabbitmq-discuss] Shovel bug in 2.2.0? (fixed in 2.4.0?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12237">[ date ]</a>
              <a href="thread.html#12237">[ thread ]</a>
              <a href="subject.html#12237">[ subject ]</a>
              <a href="author.html#12237">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Apr 01, 2011 at 06:48:37PM +0200, &#216;yvind Tjervaag wrote:
&gt;<i> Ah, better go and upgrade some production servers then!
</I>
Be careful. There is, sadly, a bug in 2.4.0 which means that upgrades
from 2.3.1 or earlier will fail to automatically upgrade the on-disk
format of msgs will fail in some cases.

No data will be lost - the upgrade code is very careful to take backups
before it starts, and will say where in the logs.

If you have durable queues with msgs on disk that you need to preserve
then I do not recommend upgrading to 2.4.0. In this case, 2.3.1 is a
much better idea.

If you do not have any persisted msgs in durable queues, or you don't
care about losing any such messages, then upgrading to 2.4.0 is fine,
though you'll have to manually wipe out your mnesia dir (the logs will
tell you where this is) after upgrading.

Best wishes,

Matthew
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012236.html">[rabbitmq-discuss] Shovel bug in 2.2.0? (fixed in 2.4.0?)
</A></li>
	<LI>Next message: <A HREF="012238.html">[rabbitmq-discuss] Shovel bug in 2.2.0? (fixed in 2.4.0?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12237">[ date ]</a>
              <a href="thread.html#12237">[ thread ]</a>
              <a href="subject.html#12237">[ subject ]</a>
              <a href="author.html#12237">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
