<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Portability of mnesia and other data between IP addresses
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Portability%20of%20mnesia%20and%20other%20data%20between%0A%20IP%20addresses&In-Reply-To=%3CBANLkTik3fjwWW%2BcP3XTUztJBu4YhOS3VtA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012399.html">
   <LINK REL="Next"  HREF="012319.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Portability of mnesia and other data between IP addresses</H1>
    <B>Robert Raschke</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Portability%20of%20mnesia%20and%20other%20data%20between%0A%20IP%20addresses&In-Reply-To=%3CBANLkTik3fjwWW%2BcP3XTUztJBu4YhOS3VtA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Portability of mnesia and other data between IP addresses">rtrlists at googlemail.com
       </A><BR>
    <I>Fri Apr 15 18:16:42 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012399.html">[rabbitmq-discuss] Portability of mnesia and other data between IP addresses
</A></li>
        <LI>Next message: <A HREF="012319.html">[rabbitmq-discuss] Queue Bindings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12407">[ date ]</a>
              <a href="thread.html#12407">[ thread ]</a>
              <a href="subject.html#12407">[ subject ]</a>
              <a href="author.html#12407">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It is the full Erlang node name that is stashed in the mnesia structures.
This is set either via the -name (uses full hostname) or -sname (use only
local machine name) erl command line option. So it'll depend a bit on what
your rabbit configuration/startup scripts say.

One way of making a particular Erlang node with mnesia easily relocatable is
to specify -sname <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">myname at localhost</A>, explicitly overriding the local machine
name by using localhost. This obviously only works if you're not doing
anything distributed, like clustering.

Robby


On Fri, Apr 15, 2011 at 11:35 AM, Alext0 &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">althomas at maninvestments.com</A>&gt;wrote:

&gt;<i>
</I>&gt;<i> Thanks Simon, that's good news.
</I>&gt;<i>
</I>&gt;<i> This did come from a reputable source (!) - perhaps it applies to clusters?
</I>&gt;<i> I mentioned mnesia, but of course we don't want any file to be &quot;pinned&quot;.
</I>&gt;<i>
</I>&gt;<i> We'll probably ask for some confirmation that this is the case (and will
</I>&gt;<i> hold for future releases) via official channels so that we have confidence
</I>&gt;<i> our disaster recovery plan is valid.
</I>&gt;<i>
</I>&gt;<i> cheers
</I>&gt;<i> Alex
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Simon MacMullen-2 wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 11/04/11 15:18, Alext0 wrote:
</I>&gt;<i> &gt;&gt; OK, a query with almost the same subject was posted a while ago!
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; But that concerned clustering, DRBD etc, and our scenario is much
</I>&gt;<i> &gt;&gt; simpler...
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; We want to migrate an RMQ instance from one machine to another by
</I>&gt;<i> &gt;&gt; stopping
</I>&gt;<i> &gt;&gt; it, transferring the data files and restarting it at the destination.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Externally, the DNS hostname is migrated from one IP address to the
</I>&gt;<i> &gt;&gt; other.
</I>&gt;<i> &gt;&gt; Our RMQ nodename will use the DNS name (e.g. RMQ1 - not a FQDN) so this
</I>&gt;<i> &gt;&gt; won't need to change.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Despite this, we heard there might be references to the IP address in
</I>&gt;<i> &gt;&gt; mnesia
</I>&gt;<i> &gt;&gt; files and hence migrating the IP address too would be required (i.e. we
</I>&gt;<i> &gt;&gt; need
</I>&gt;<i> &gt;&gt; a VIP) - can we get away without this?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I don't believe Mnesia embeds IP addresses (where did you hear that?).
</I>&gt;<i> &gt; You should be fine.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cheers, Simon
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Simon MacMullen
</I>&gt;<i> &gt; Staff Engineer, RabbitMQ
</I>&gt;<i> &gt; SpringSource, a division of VMware
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://old.nabble.com/Portability-of-mnesia-and-other-data-between-IP-addresses-tp31370661p31404585.html">http://old.nabble.com/Portability-of-mnesia-and-other-data-between-IP-addresses-tp31370661p31404585.html</A>
</I>&gt;<i> Sent from the RabbitMQ mailing list archive at Nabble.com.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110415/260944a1/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110415/260944a1/attachment.htm</A>&gt;
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012399.html">[rabbitmq-discuss] Portability of mnesia and other data between IP addresses
</A></li>
	<LI>Next message: <A HREF="012319.html">[rabbitmq-discuss] Queue Bindings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12407">[ date ]</a>
              <a href="thread.html#12407">[ thread ]</a>
              <a href="subject.html#12407">[ subject ]</a>
              <a href="author.html#12407">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
