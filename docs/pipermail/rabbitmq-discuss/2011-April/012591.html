<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] For speed, use Shovel or not?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20For%20speed%2C%20use%20Shovel%20or%20not%3F&In-Reply-To=%3C20110428122246.GG5427%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012571.html">
   <LINK REL="Next"  HREF="012619.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] For speed, use Shovel or not?</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20For%20speed%2C%20use%20Shovel%20or%20not%3F&In-Reply-To=%3C20110428122246.GG5427%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] For speed, use Shovel or not?">matthew at rabbitmq.com
       </A><BR>
    <I>Thu Apr 28 13:22:47 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012571.html">[rabbitmq-discuss] For speed, use Shovel or not?
</A></li>
        <LI>Next message: <A HREF="012619.html">[rabbitmq-discuss] For speed, use Shovel or not?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12591">[ date ]</a>
              <a href="thread.html#12591">[ thread ]</a>
              <a href="subject.html#12591">[ subject ]</a>
              <a href="author.html#12591">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Sun, Apr 24, 2011 at 02:13:13PM -0700, ristretto.rb wrote:
&gt;<i> Suppose there are two servers connected across a WAN (read internet),
</I>&gt;<i> sending transient messages, with all else held constant what is the
</I>&gt;<i> faster method in terms of messages / sec:  Two brokers and a Shovel,
</I>&gt;<i> one broker with a remote publisher, or one broker with a remote
</I>&gt;<i> consumer.  (The last two cases might be really just one case.)
</I>&gt;<i> 
</I>&gt;<i> msg -&gt; X -&gt; Q -&gt; Shovel -&gt; X -&gt; Q -&gt; Consume
</I>&gt;<i> vs
</I>&gt;<i> msg ---------------------------&gt; X -&gt; Q -&gt; Consume
</I>&gt;<i> 
</I>&gt;<i> What if durability is required?  Does this change the decision?
</I>
Regardless of whether you're using the shovel or not, over the WAN link
will flow AMQP msgs over TCP/IP. There is no compression or any batching
used by shovel, so your throughput and latency won't be different in any
of the combinations you suggest.

However, you might wish for, eg the publisher to very quickly be able to
publish a msg and get a confirmation back that the msg has been
published and accepted by the broker. If the latency of this operation
is important then it makes sense to have the broker near the publisher.

The next thing to consider is whether it's actually going to make any
difference to the consumer whether or not it's got a broker very near
it. For example, is it going to be doing any synchronous operations
regularly. If not (i.e. it's just receiving msgs and acking them), then
there probably isn't much difference whether it's connected to a local
broker or a remote one.

Matthew
</PRE>































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012571.html">[rabbitmq-discuss] For speed, use Shovel or not?
</A></li>
	<LI>Next message: <A HREF="012619.html">[rabbitmq-discuss] For speed, use Shovel or not?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12591">[ date ]</a>
              <a href="thread.html#12591">[ thread ]</a>
              <a href="subject.html#12591">[ subject ]</a>
              <a href="author.html#12591">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
