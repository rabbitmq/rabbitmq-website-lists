<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Basic help with Shovel
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Basic%20help%20with%20Shovel&In-Reply-To=%3CBANLkTi%3DxnPHSZUyy4zPv63MS2HMVxk4hOg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012514.html">
   <LINK REL="Next"  HREF="012490.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Basic help with Shovel</H1>
    <B>ristretto.rb</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Basic%20help%20with%20Shovel&In-Reply-To=%3CBANLkTi%3DxnPHSZUyy4zPv63MS2HMVxk4hOg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Basic help with Shovel">ristretto.rb at gmail.com
       </A><BR>
    <I>Wed Apr 20 06:25:47 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012514.html">[rabbitmq-discuss] python fabric stalls when using apt-get to install 2.4.1 rabbitmq-server
</A></li>
        <LI>Next message: <A HREF="012490.html">[rabbitmq-discuss] Basic help with Shovel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12473">[ date ]</a>
              <a href="thread.html#12473">[ thread ]</a>
              <a href="subject.html#12473">[ subject ]</a>
              <a href="author.html#12473">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Rabbitmq is a very nice product.  Thanks to all the people that have
put in time to creating this excellent bit of software.

I am trying to get a simple example of rabbitmq-shovel working between
two rabbitmq brokers.  I have the shovel plugin installed
(rabbitmq-shovel-2.4.1.ez.)  I'm using the rabbit 2.4.0:

I have tried a number of config files. Here is a basic one:

[{rabbit_shovel,
  [{shovels,
    [{outgoing,
      [{sources,  [{brokers,
                          [&quot;<A HREF="amqp://&quot;]}">amqp://&quot;]}</A>
                       ]},
       {destinations, [{broker, &quot;<A HREF="amqp://tortuga/&quot;}">amqp://tortuga/&quot;}</A>
                       ]},
       {queue, &lt;&lt;&quot;outgoing&quot;&gt;&gt;},
       {prefetch_count, 1},
       {auto_ack, false},
       {tx_size, 0},
       {publish_properties, [{delivery_mode, 2}]},
       {publish_fields, [{exchange, &lt;&lt;&quot;test_exchange&quot;&gt;&gt;},
                        {routing_key, &lt;&lt;&quot;from_shovel&quot;&gt;&gt;}]},
      {reconnect_delay, 5}
      ]}
     ]
   }]
}].

My local system is the source, and my server named tortuga is the destination.

When I start the server, I get no errors.  But, when I look at
rabbit_shovel_status:status(), I see that the 'outgoing' exchange is
not found.  Should Shovel be creating that?

&gt;<i> rabbit_shovel_status:status().
</I>[{outgoing,{terminated,{{shutdown,{server_initiated_close,404,
                                                          &lt;&lt;&quot;NOT_FOUND
- no queue 'outgoing' in vhost '/'&quot;&gt;&gt;}},
                        {gen_server,call,
                                    [&lt;0.12894.0&gt;,

{subscribe,{'basic.consume',0,&lt;&lt;&quot;outgoing&quot;&gt;&gt;,&lt;&lt;&gt;&gt;,false,

false,false,false,[]},
                                                &lt;0.12886.0&gt;},
                                     infinity]}}},
           {{2011,4,19},{22,12,0}}}]


In addition to all this, it seem that Shovel might be creating a bunch
of unnamed queues

$ sudo rabbitmqctl list_queues
[sudo] password for gbc:
Listing queues ...
amq.gen-Mi/SRrrk8QayvJsAGHgU3A==	0
amq.gen-tmkeQdFucANNYBE+Cvv2VQ==	0
amq.gen-iNur60R7wa1LOCMa6R6Klw==	0
amq.gen-AKxkcLiF1zh9EP6ArECZ3g==	0
amq.gen-htu38N+C5w2gCiTMdU3bug==	0
amq.gen-0vYlOHEJc0YjjBMZGecRng==	0
amq.gen-8n2ik3Z2+K/2D6SGS1dFjQ==	0
amq.gen-9Iys32AxkmLb6/9QW1jV3Q==	0
amq.gen-COSLe9fteqxWxcPGRm+1EQ==	0
amq.gen-fwJtLeLJQUqHeQP5fQzjsw==	0
amq.gen-P8c2DgxawkRAIWzP/8GeKw==	0
amq.gen-OxwGmt3k+3vDrt6Mhl1Emw==	0
amq.gen-oCLpwM/nNVmCXT1rr/pJ6A==	0
amq.gen-+aEtMLnGXrcTCs+WHVeStA==	0
amq.gen-vOzzeILG+M7iynDRmyypaQ==	0
amq.gen-q8CYOBNl8JXketYJq6Je5Q==	0
amq.gen-9cQqY8oqkPYj+cSS9fuOQw==	0
:<i>
</I>:<i>
</I>
Thank you



Finally, if I put a declaration in to the sources or destinations it
makes no difference.  I thought, perhaps, that these lines would
create the exchange for me.

:<i>
</I>{declarations,
     ['queue.declare',
         {'queue.bind',
          [{exchange, &lt;&lt;&quot;test_exchange&quot;&gt;&gt;},
           {queue,    &lt;&lt;&gt;&gt;}]}
      ]}
:<i>
</I>
Do I need to pre-create the exchanges and queues?

Thanks
</PRE>























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012514.html">[rabbitmq-discuss] python fabric stalls when using apt-get to install 2.4.1 rabbitmq-server
</A></li>
	<LI>Next message: <A HREF="012490.html">[rabbitmq-discuss] Basic help with Shovel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12473">[ date ]</a>
              <a href="thread.html#12473">[ thread ]</a>
              <a href="subject.html#12473">[ subject ]</a>
              <a href="author.html#12473">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
