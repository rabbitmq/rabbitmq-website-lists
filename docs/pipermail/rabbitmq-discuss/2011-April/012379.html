<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Using .NET types as routing keys
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20.NET%20types%20as%20routing%20keys&In-Reply-To=%3C2305a1d5-4db8-4302-9cd6-1e608eb4b4ca%40a19g2000prj.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012374.html">
   <LINK REL="Next"  HREF="012382.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Using .NET types as routing keys</H1>
    <B>Alfonso Pantoja</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20.NET%20types%20as%20routing%20keys&In-Reply-To=%3C2305a1d5-4db8-4302-9cd6-1e608eb4b4ca%40a19g2000prj.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Using .NET types as routing keys">alfonso.pantoja at gmail.com
       </A><BR>
    <I>Wed Apr 13 15:30:53 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012374.html">[rabbitmq-discuss] Using .NET types as routing keys
</A></li>
        <LI>Next message: <A HREF="012382.html">[rabbitmq-discuss] Using .NET types as routing keys
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12379">[ date ]</a>
              <a href="thread.html#12379">[ thread ]</a>
              <a href="subject.html#12379">[ subject ]</a>
              <a href="author.html#12379">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 13 abr, 13:33, Mike Hadlow &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mike.had... at 15below.com</A>&gt; wrote:
&gt;<i> Hi, I'm new to Rabbit MQ. I want to build a simple .NET API with methods like Publish&lt;T&gt;(T message). It strikes me that using the .NET type as the routing key would be a very elegant way routing messages. Has anyone used RabbitMQ like this? Is it a stupid idea?
</I>
Hi Mike,

In my opinion is good idea because there is no need to encapsulate
data into a container with a field &quot;messageType&quot;
since you hace the routing key in the AMQP header (so the consumer can
read it and deserialize the message according that)

As far as I know your options are:

1. Your routing keys can be namespaces or  &quot;non-namespace keys&quot; that
you should map in a configuration file, for example, for translate it
to the proper namespace.

2. To instance your handlers with IoC  (using Castle Project for
example) depending on your routing keys. This is the choice I tested
and works good.

3. Create queues which name is a namespace binded with a fanout
exchange and instancing there messages as using the queue name
(drawbacks are those queues only can contain 1 kind of message and you
are not using the &quot;power&quot; of routing keys). I wouldn't recommend this
strategy.

4. Not using routing keys: To send your entities encapsulated in a
fixed container with at least 2 fields (messageBody, messageType).
Every time you receive a message you need to deserialize the envelope
and read the &quot;messageType&quot; field and deserialize the messageBody (it
should be an array of bytes) which holds your business entity. This
approach is not faster as others due to the need of deserialize twice.


Regards,



Alfonso
</PRE>



































































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012374.html">[rabbitmq-discuss] Using .NET types as routing keys
</A></li>
	<LI>Next message: <A HREF="012382.html">[rabbitmq-discuss] Using .NET types as routing keys
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12379">[ date ]</a>
              <a href="thread.html#12379">[ thread ]</a>
              <a href="subject.html#12379">[ subject ]</a>
              <a href="author.html#12379">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
