<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Pika + SSL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20%2B%20SSL&In-Reply-To=%3CBANLkTikKsVAL2BAipiQ3GiCiBB5HnoVBxw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012293.html">
   <LINK REL="Next"  HREF="012305.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Pika + SSL</H1>
    <B>Matthew Long</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20%2B%20SSL&In-Reply-To=%3CBANLkTikKsVAL2BAipiQ3GiCiBB5HnoVBxw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Pika + SSL">mlong at rozoom.com
       </A><BR>
    <I>Thu Apr  7 18:26:26 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012293.html">[rabbitmq-discuss] Pika + SSL
</A></li>
        <LI>Next message: <A HREF="012305.html">[rabbitmq-discuss] Pika + SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12303">[ date ]</a>
              <a href="thread.html#12303">[ thread ]</a>
              <a href="subject.html#12303">[ subject ]</a>
              <a href="author.html#12303">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Gavin,

We tried it with logging turned on in pika but could not see any errors
created. When we start the application it seems to connect for maybe a few
seconds but dies right after that.

These are the options we are using:

#! /usr/bin/env python
import ssl
from QO.RabbitMQ.SpecialPublisher import SpecialPubliser

###Some other code

#192.168.4.76:10000

publ = SpecialPubliser()
publ.host = 'IM02'
publ.port = 5671
publ.ssl = True
publ.ssl_options = ({
                                &quot;cacertfile&quot;:
&quot;/home/rouser/certs/testca/cacert.pem&quot;,
                                &quot;certfile&quot;:
&quot;/home/rouser/certs/client/cert.pem&quot;,
                                &quot;keyfile&quot;:
&quot;/home/rouser/certs/client/key.pem&quot;,
                                #'cert_reqs': ssl.CERT_REQUIRED
                                &quot;verify&quot;: &quot;verify_peer&quot;,
                                &quot;fail_if_no_peer_cert&quot;: True
                            })
publ.username = 'guest'
publ.password = 'guest'
publ.exchange = 'test'
publ.queue = 'test'
publ.messagesNum = 10
publ.message = message
publ.Publish()

We have the keys created and RabbitMQ running with SSL enabled. Does it work
on your end? What else might be the issue?

Let me know.

Thanks,
Matthew


On Wed, Apr 6, 2011 at 6:59 PM, Gavin M. Roy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gmr at myyearbook.com</A>&gt; wrote:

&gt;<i>  Good news, it was fairly painless to implement. I've pushed the commits
</I>&gt;<i> to <A HREF="https://github.com/pika/pika">https://github.com/pika/pika</A> in master, if you'd like to test it out. I
</I>&gt;<i> used the instructions on <A HREF="http://www.rabbitmq.com/ssl.html">http://www.rabbitmq.com/ssl.html</A> to setup SSL on
</I>&gt;<i> the RabbitMQ server and tested against that.
</I>&gt;<i>
</I>&gt;<i> Currently this only works with the BlockingConnection, SelectConnection and
</I>&gt;<i> TornadoConnection.
</I>&gt;<i>
</I>&gt;<i> There are two new files in the examples: demo_ssl_send.py and
</I>&gt;<i> demo_ssl_receive.py.
</I>&gt;<i>
</I>&gt;<i> The SSL connection syntax is fairly painless:
</I>&gt;<i>
</I>&gt;<i>     connection = SelectConnection(ConnectionParameters(host, 5671),
</I>&gt;<i>                                   on_open_callback=on_connected,
</I>&gt;<i>                                   ssl=True)
</I>&gt;<i>
</I>&gt;<i> The ssl_options argument, if used, should be a dictionary of key-value
</I>&gt;<i> pairs for the arguments of ssl.wrap_socket as found at:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://docs.python.org/dev/library/ssl.html#socket-creation">http://docs.python.org/dev/library/ssl.html#socket-creation</A>
</I>&gt;<i>
</I>&gt;<i> If you don't mind, please clone the repo and install from source and let me
</I>&gt;<i> know your results.
</I>&gt;<i>
</I>&gt;<i> Gavin
</I>&gt;<i>
</I>&gt;<i> On Wednesday, April 6, 2011 at 6:50 PM, Gavin M. Roy wrote:
</I>&gt;<i>
</I>&gt;<i>  On Wednesday, April 6, 2011 at 6:25 PM, Matthew Long wrote:
</I>&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> Is there a way to use the amqp python library pika with rabbitmq configured
</I>&gt;<i> for ssl? I've looked at the code and the docs but there doesn't seem to be
</I>&gt;<i> ssl support built in.
</I>&gt;<i>
</I>&gt;<i> Not currently, I can look and see what's involved. I'm hacking on Pika 2
</I>&gt;<i> right now, but give me a few hours and I'll let you know what I find.
</I>&gt;<i>
</I>&gt;<i>  Does anyone know how we would go about using our application with pika
</I>&gt;<i> amqp connecting to rabbitmq ssl without switching to py-amqplib?
</I>&gt;<i>
</I>&gt;<i> Off the cuff, it's not possible without some sort of proxy. Just to
</I>&gt;<i> confirm, which version of Pika are you using?
</I>&gt;<i>
</I>&gt;<i> Gavin
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Matthew Long
CEO - roZoom, Inc
Phone: 773-584-8225
Email: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mlong at rozoom.com</A>
*www.rozoom.com*
&lt;<A HREF="http://rozoom.com">http://rozoom.com</A>&gt;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110407/1d2fb668/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110407/1d2fb668/attachment-0001.htm</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012293.html">[rabbitmq-discuss] Pika + SSL
</A></li>
	<LI>Next message: <A HREF="012305.html">[rabbitmq-discuss] Pika + SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12303">[ date ]</a>
              <a href="thread.html#12303">[ thread ]</a>
              <a href="subject.html#12303">[ subject ]</a>
              <a href="author.html#12303">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
