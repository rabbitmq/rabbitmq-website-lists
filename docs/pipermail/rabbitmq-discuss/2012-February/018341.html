<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Ensuring low latency for publishers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ensuring%20low%20latency%20for%20publishers&In-Reply-To=%3C4f4690a9-038d-4fdb-bce1-ae8c246a3247%40ub4g2000pbc.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018340.html">
   <LINK REL="Next"  HREF="018342.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Ensuring low latency for publishers</H1>
    <B>Eric</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ensuring%20low%20latency%20for%20publishers&In-Reply-To=%3C4f4690a9-038d-4fdb-bce1-ae8c246a3247%40ub4g2000pbc.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Ensuring low latency for publishers">ejarendt at gmail.com
       </A><BR>
    <I>Wed Feb 22 17:48:58 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018340.html">[rabbitmq-discuss] Ensuring low latency for publishers
</A></li>
        <LI>Next message: <A HREF="018342.html">[rabbitmq-discuss] Ensuring low latency for publishers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18341">[ date ]</a>
              <a href="thread.html#18341">[ thread ]</a>
              <a href="subject.html#18341">[ subject ]</a>
              <a href="author.html#18341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Is it possible to configure the broker to never page to disk so that
it never throttles?  Basically, when it hits its high watermark for
memory can it just drop inbound messages?

On Feb 22, 9:44&#160;am, Eric &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ejare... at gmail.com</A>&gt; wrote:
&gt;<i> I think I found my answer in another thread:<A HREF="http://groups.google.com/group/rabbitmq-discuss/browse_thread/thread/...">http://groups.google.com/group/rabbitmq-discuss/browse_thread/thread/...</A>
</I>&gt;<i>
</I>&gt;<i> In summary: &#160;there's no way to know you're being throttled and no way
</I>&gt;<i> to timeout during a throttled publish. &#160;That means that publishing
</I>&gt;<i> should be really fast! ...unless the broker's out of memory, and then
</I>&gt;<i> you'll be stuck waiting for an undefined amount of time. &#160;That's a
</I>&gt;<i> really disappointing situation.
</I>&gt;<i>
</I>&gt;<i> The solution proposed in that thread is to use a blocking queue with a
</I>&gt;<i> single publisher, which I threw out already due to worries about lock
</I>&gt;<i> contention.
</I>&gt;<i>
</I>&gt;<i> On Feb 21, 10:11&#160;am, Eric &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ejare... at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Thanks for the quick reply.
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; No. Well, there are various ways you can force it to, but by default
</I>&gt;<i> &gt; &gt; it's async.
</I>&gt;<i>
</I>&gt;<i> &gt; Awesome! &#160;Great that publishing is async.
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; Well, you still have the one way network latency - or do you mean from
</I>&gt;<i> &gt; &gt; the point of view of the client?
</I>&gt;<i>
</I>&gt;<i> &gt; Right, sorry. &#160;I mean ~0ms from the point of view of the client. &#160;I
</I>&gt;<i> &gt; don't care too much about message latency from publisher to the
</I>&gt;<i> &gt; eventual consumer, just so long as the publisher doesn't experience
</I>&gt;<i> &gt; any delay.
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; Maybe we should call it TCP flow control? But yes, if your broker is out
</I>&gt;<i> &gt; &gt; of memory, publishing will block until the broker is ready to read again.
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; Would you rather drop the message at this point?
</I>&gt;<i>
</I>&gt;<i> &gt; &quot;TCP flow control&quot; got me to a helpful Wikipedia article much faster,
</I>&gt;<i> &gt; so maybe that's better. &#160;:) &#160;I would rather drop the message at that
</I>&gt;<i> &gt; point. &#160;Ideally there'd be some timeout to specify there... if I've
</I>&gt;<i> &gt; been blocked for a few ms, it's time to give up. &#160;But publisher
</I>&gt;<i> &gt; throttling is supposed to be transparent to the publisher, right?
</I>&gt;<i>
</I>&gt;<i> &gt; On Feb 21, 9:58&#160;am, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">si... at rabbitmq.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; On 21/02/12 17:51, Eric wrote:
</I>&gt;<i> &gt; &gt; &#160;&gt; First, does publishing
</I>&gt;<i> &gt; &gt; &#160;&gt; a message require a roundtrip to the broker?
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; No. Well, there are various ways you can force it to, but by default
</I>&gt;<i> &gt; &gt; it's async.
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; &#160;&gt; so I'm assuming publishing is essentially a 0ms
</I>&gt;<i> &gt; &gt; &#160;&gt; operation
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; Well, you still have the one way network latency - or do you mean from
</I>&gt;<i> &gt; &gt; the point of view of the client?
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; &#160;&gt; but I want to be sure. &#160;Second, if the broker is throttling
</I>&gt;<i> &gt; &gt; &#160;&gt; via &quot;TCP backpressure&quot; (which I'm having a hard time finding a good
</I>&gt;<i> &gt; &gt; &#160;&gt; definition for) will that increase publisher latency?
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; Maybe we should call it TCP flow control? But yes, if your broker is out
</I>&gt;<i> &gt; &gt; of memory, publishing will block until the broker is ready to read again.
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; Would you rather drop the message at this point?
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; --
</I>&gt;<i> &gt; &gt; Simon MacMullen
</I>&gt;<i> &gt; &gt; RabbitMQ, VMware
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I>&gt;<i>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>











































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018340.html">[rabbitmq-discuss] Ensuring low latency for publishers
</A></li>
	<LI>Next message: <A HREF="018342.html">[rabbitmq-discuss] Ensuring low latency for publishers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18341">[ date ]</a>
              <a href="thread.html#18341">[ thread ]</a>
              <a href="subject.html#18341">[ subject ]</a>
              <a href="author.html#18341">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
