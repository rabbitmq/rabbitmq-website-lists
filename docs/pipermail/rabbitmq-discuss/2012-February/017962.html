<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Possibly latency issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Possibly%20latency%20issues&In-Reply-To=%3C1328582743.2123.28.camel%40samc-pc.wgtn.cat-it.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017969.html">
   <LINK REL="Next"  HREF="017964.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Possibly latency issues</H1>
    <B>Sam Crawley</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Possibly%20latency%20issues&In-Reply-To=%3C1328582743.2123.28.camel%40samc-pc.wgtn.cat-it.co.nz%3E"
       TITLE="[rabbitmq-discuss] Possibly latency issues">samc at catalyst.net.nz
       </A><BR>
    <I>Tue Feb  7 02:45:43 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017969.html">[rabbitmq-discuss] blocked during stopping MQ
</A></li>
        <LI>Next message: <A HREF="017964.html">[rabbitmq-discuss] Possibly latency issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17962">[ date ]</a>
              <a href="thread.html#17962">[ thread ]</a>
              <a href="subject.html#17962">[ subject ]</a>
              <a href="author.html#17962">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've been trying to track down some performance issues in our
application since switching to RabbitMQ (previously used Spread), and it
seems latency for a single round trip message is an issue.

In a simple(ish) benchmark I've created, I have a daemon that blocks,
waiting for a message. When it receives one, it sends a message back to
the original sender. I then have a script that runs on another machine
(on the same LAN), which sends messages of about 5k in size, and records
the time for the round trip.

In these tests, I get an average of about 0.1s for the round trip. Does
this seem unreasonably slow? In an identical test using Spread, I get
times of around 0.01s (the application performance issue we're seeing is
showing RabbitMQ about 3-4 times slower than Spread).

I realise it's quite likely the problem is something odd I'm doing, but
I just want to rule out anything obvious at this stage. Could it be OS,
Erlang version, etc?

I'm running on Debian Lenny, with RabbitMQ 2.7.1, and Erlang 12b3 (from
the standard Lenny package). Are there any known issues with this
configuration, or any other factors I might be missing?

The client is written in Perl, using a home-grown client (but based on
Net::AMQP), as there wasn't really much suitable to our purposes on
CPAN. I hope to have this client on CPAN sometime soon, and will likely
ask for a review for people who might have comments. It's possible
(likely?) it's not as efficient as it could be, and would be nice to
rule that out somehow.

Would appreciate any help.. apologies if I haven't given all the
relevant information.

Thanks,
Sam Crawley.

</PRE>
























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017969.html">[rabbitmq-discuss] blocked during stopping MQ
</A></li>
	<LI>Next message: <A HREF="017964.html">[rabbitmq-discuss] Possibly latency issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17962">[ date ]</a>
              <a href="thread.html#17962">[ thread ]</a>
              <a href="subject.html#17962">[ subject ]</a>
              <a href="author.html#17962">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
