<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Does clustering increase throughput?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Does%20clustering%20increase%20throughput%3F&In-Reply-To=%3Ce8d172a4-8921-4c22-869b-9638c37970f8%40w4g2000vbc.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018421.html">
   <LINK REL="Next"  HREF="018422.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Does clustering increase throughput?</H1>
    <B>matan zinger</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Does%20clustering%20increase%20throughput%3F&In-Reply-To=%3Ce8d172a4-8921-4c22-869b-9638c37970f8%40w4g2000vbc.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Does clustering increase throughput?">matanzinger at gmail.com
       </A><BR>
    <I>Sun Feb 26 17:29:39 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018421.html">[rabbitmq-discuss] RabbitMQ/Shovel &amp; Compression
</A></li>
        <LI>Next message: <A HREF="018422.html">[rabbitmq-discuss] (no subject)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18547">[ date ]</a>
              <a href="thread.html#18547">[ thread ]</a>
              <a href="subject.html#18547">[ subject ]</a>
              <a href="author.html#18547">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I've read and experienced with rabbit mq clustering feature over 2
machines.
Below are the results I found, which I found quite strange:

0. Direct exchange named &quot;myexchange&quot; was defined.
1. rabbit1 &amp; rabbit2 were configured to work in a cluster. both are
using disc.
2. queue named &quot;in.queue&quot; was configured, and binded to routing key
&quot;in&quot;
3. 100k messages were enqueued with routing key &quot;in&quot;. connection was
to rabbit1.
4. Running a single message handler on rabbit1 machine, connected to
rabbit1 mq.
Handling throuput: 2k messages / second
5. Running handlers on both rabbit1 &amp; rabbit2 - each reached the
throuput of ~400 messages / second.
After stopping the message handler on rabbit2, handler on rabbit1
returned to 2k messages / second.
6. Running a single message handler on rabbit1 machine, connected to
rabbit2 mq.
Handling throuput: 400 messages / second

I still can't figure out this behavior:
I understood form the documentation that adding nodes to a cluster is
done in order to INCREASE throughput.
However, adding an additional handler leads to a degredation in
performance!

The second thing I can't figure out is the difference is throughput
between the cases of a single handler on rabbit1, and a single handler
on rabbit2.
If both nodes are active, and are using discs, than they should be
exactly the same.
There is no notion of master/slave.
If so - how come a different throughput received when running a single
handler on each of them?

Please help me understand these conflicts.

Thanks,
Matan
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018421.html">[rabbitmq-discuss] RabbitMQ/Shovel &amp; Compression
</A></li>
	<LI>Next message: <A HREF="018422.html">[rabbitmq-discuss] (no subject)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18547">[ date ]</a>
              <a href="thread.html#18547">[ thread ]</a>
              <a href="subject.html#18547">[ subject ]</a>
              <a href="author.html#18547">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
