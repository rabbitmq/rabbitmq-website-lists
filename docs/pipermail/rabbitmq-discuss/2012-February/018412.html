<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Design for Comet
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Design%20for%20Comet&In-Reply-To=%3CCABzX%2BqyfTEM4Yzmb3d5%2BHjDAQN5xJTtVAZyd3VL5c%2Bv%3D6ne_Rg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018411.html">
   <LINK REL="Next"  HREF="018392.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Design for Comet</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Design%20for%20Comet&In-Reply-To=%3CCABzX%2BqyfTEM4Yzmb3d5%2BHjDAQN5xJTtVAZyd3VL5c%2Bv%3D6ne_Rg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Design for Comet">majek04 at gmail.com
       </A><BR>
    <I>Fri Feb 24 16:57:53 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018411.html">[rabbitmq-discuss] Design for Comet
</A></li>
        <LI>Next message: <A HREF="018392.html">[rabbitmq-discuss] Filter by presence in a header Exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18412">[ date ]</a>
              <a href="thread.html#18412">[ thread ]</a>
              <a href="subject.html#18412">[ subject ]</a>
              <a href="author.html#18412">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Feb 24, 2012 at 16:13, tsuraan &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tsuraan at gmail.com</A>&gt; wrote:
&gt;&gt;<i> Does it mean that every page is user specific? Or is &quot;user&quot; exchange
</I>&gt;&gt;<i> not for per-user messages but rather global ones?
</I>&gt;<i>
</I>&gt;<i> The user exchange is for messages that are addressed to specific
</I>&gt;<i> users, so every web page that a given user has open (on all their
</I>&gt;<i> different browsers, etc) would get all messages addressed to that
</I>&gt;<i> user. &#160;Global messages get sent to all pages that are opened in all
</I>&gt;<i> browsers, topic messages get sent to all subscribers to a topic, and
</I>&gt;<i> there are &quot;page&quot; messages that are targeted towards a specific
</I>&gt;<i> instance of a page (i.e. a specific tab that's opened on one of our
</I>&gt;<i> pages).
</I>&gt;<i>
</I>&gt;&gt;<i> Like always - you need to prototype and benchmark it :)
</I>&gt;<i>
</I>&gt;<i> Yeah, I'm really wondering about hidden things, like &quot;that will work
</I>&gt;<i> for a week, but then mnesia will start on fire&quot; or something to that
</I>&gt;<i> effect :)
</I>&gt;<i>
</I>&gt;&gt;<i> But generally, I would probably go for a different setup.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think we can assume with reasonable confidence that number
</I>&gt;&gt;<i> of concurrent users on your site is constant. (as opposed to
</I>&gt;&gt;<i> dynamic pages AFAIU)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So why not create queue-per-user? (for users actively browsing).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> When user enters a page - you can subscribe the queue to a per-page
</I>&gt;&gt;<i> exchange. When user navigates away - you unsubscribe.
</I>&gt;<i>
</I>&gt;<i> Ok, I think I'm missing something. &#160;Are you saying to create per-page
</I>&gt;<i> exchanges rather than per-page queues, and then subscribe the
</I>&gt;<i> exchanges to queues? &#160;Is it cheaper to create exchanges than to create
</I>&gt;<i> queues?
</I>
Yes, exchanges have no state, while queues actually store data.
Exchanges - light, Queues - heavy.

&gt;<i> Also, binding a queue to an exchange isn't something I was
</I>&gt;<i> aware could be done; does it just use the normal queue.bind command,
</I>&gt;<i> but putting the exchange name where the queue name normally goes, and
</I>&gt;<i> vice versa?
</I>
I said:
&gt;&gt;<i> When user enters a page - you can subscribe the queue to a per-page
</I>&gt;&gt;<i> exchange. When user navigates away - you unsubscribe.
</I>
So, I suggest to bind the per-user-queue to an per-page-exchange.
(or, bind per-user-queue to a all-pages-exchange but with a binding
key that will catch only messages flying to the particular page
on which the user is right now)

Marek
</PRE>





















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018411.html">[rabbitmq-discuss] Design for Comet
</A></li>
	<LI>Next message: <A HREF="018392.html">[rabbitmq-discuss] Filter by presence in a header Exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18412">[ date ]</a>
              <a href="thread.html#18412">[ thread ]</a>
              <a href="subject.html#18412">[ subject ]</a>
              <a href="author.html#18412">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
