<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> No subject
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.12.1335482892.2884.rabbitmq-discuss%40lists.rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019728.html">
   <LINK REL="Next"  HREF="019787.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>No subject</H1>
    <B></B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.12.1335482892.2884.rabbitmq-discuss%40lists.rabbitmq.com%3E"
       TITLE="No subject">
       </A><BR>
    <I>Thu Feb 16 03:44:05 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019728.html">No subject
</A></li>
        <LI>Next message: <A HREF="019787.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19774">[ date ]</a>
              <a href="thread.html#19774">[ thread ]</a>
              <a href="subject.html#19774">[ subject ]</a>
              <a href="author.html#19774">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>explicitly specified

--047d7b33d9bef7fea004be9d55ad
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

&lt;div class=3D&quot;gmail_extra&quot;&gt;Hi Matthew,&lt;br&gt;&lt;br&gt;Thanks for your reply. At lea=
st web UI reports that all 3 nodes are 2.8.1 so I guess they are=A0 up to d=
ate.&lt;br&gt;Reproducing this bug is difficult. I&amp;#39;ll work on it for may be 2=
 more days, trying to find a combination which would be reproducible. Very =
preliminary, I have impression that &amp;quot;exclusive&amp;quot; queue flag have s=
omething to do with it, but I will experiment with ttl too, as you suggeste=
d. &lt;br&gt;
&lt;br&gt;I dont know if it is related, but I had a strange situation when there =
was an exclusive autodelete queue without a connection (connection reported=
 &amp;quot;unknown&amp;quot;) and it was impossible to delete it because &amp;quot;reso=
urce lock&amp;quot; error. &lt;br&gt;
Hopefully I&amp;#39;ll be able to report more tomorrow.&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;Vadim=
.&lt;br&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;On Thu, Apr 26, 2012 at 3:31 PM, Matthe=
w Sackman &lt;span dir=3D&quot;ltr&quot;&gt;&amp;lt;&lt;a href=3D&quot;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at rabbitmq.com</A>&quot; tar=
get=3D&quot;_blank&quot;&gt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at rabbitmq.com</A>&lt;/a&gt;&amp;gt;&lt;/span&gt; wrote:&lt;br&gt;
&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex&quot;&gt;Hi Vadim,&lt;br&gt;
&lt;div class=3D&quot;im&quot;&gt;&lt;br&gt;
On Thu, Apr 26, 2012 at 01:01:20PM -0700, Vadim Chekan wrote:&lt;br&gt;
&amp;gt;<i> I&amp;#39;m testing my active-active setup (2.8.1, linux 64) and I am rand=
</I>omly&lt;br&gt;
&amp;gt;<i> running into some crashes when I&amp;#39;m stopping a node. I can stop one=
</I> node&lt;br&gt;
&amp;gt;<i> abut another one fails along with it. Below is a crash log.&lt;br&gt;
</I>&amp;gt;<i>&lt;br&gt;
</I>&lt;/div&gt;&lt;div class=3D&quot;im&quot;&gt;&amp;gt; =3DERROR REPORT=3D=3D=3D=3D 26-Apr-2012::12:15=
:<i>59 =3D=3D=3D&lt;br&gt;
</I>&amp;gt;<i> Discarding message&lt;br&gt;
</I>&amp;gt;<i> {&amp;#39;$gen_call&amp;#39;,{&amp;lt;0.1955.0&amp;gt;,#Ref&amp;lt;0.0.0.5513&amp;gt;},{add_on=
</I>_right,{9,&amp;lt;0.1955.0&amp;gt;}}}&lt;br&gt;
&amp;gt;<i> from &amp;lt;0.1955.0&amp;gt; to &amp;lt;0.26823.834&amp;gt;&lt;br&gt;
</I>&amp;gt;<i> =A0in an old incarnation (2) of this node (3)&lt;br&gt;
</I>&lt;br&gt;
&lt;/div&gt;I&amp;#39;m worried about these messages. Someone else on this list has s=
een&lt;br&gt;
this sort of thing too and it&amp;#39;s causing them trouble. I&amp;#39;ve not seen=
 this&lt;br&gt;
issue myself in testing which is frustrating. However, that&amp;#39;s not the&lt;b=
r&gt;
cause of your crash in this case (I think).&lt;br&gt;
&lt;div class=3D&quot;im&quot;&gt;&lt;br&gt;
&amp;gt;<i> ** Generic server &amp;lt;0.1800.0&amp;gt; terminating&lt;br&gt;
</I>&amp;gt;<i> ** Last message in was {&amp;#39;$gen_cast&amp;#39;,{gm_deaths,[&amp;lt;0.4684.0&amp;g=
</I>t;]}}&lt;br&gt;
&amp;gt;<i> ** When Server state =3D=3D {state,&lt;br&gt;
</I>&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 {amqqueue,&lt;br&gt;
</I>&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 {resou=
</I>rce,&amp;lt;&amp;lt;&amp;quot;/&amp;quot;&amp;gt;&amp;gt;,queue,&amp;lt;&amp;lt;&amp;quot;test_29&amp;quot;&amp;gt;&amp;gt;=
},&lt;br&gt;
&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 true,f=
</I>alse,&amp;lt;0.1433.0&amp;gt;,&lt;br&gt;
&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 [{&amp;lt;=
</I>&amp;lt;&amp;quot;x-ha-policy&amp;quot;&amp;gt;&amp;gt;,longstr,&amp;lt;&amp;lt;&amp;quot;all&amp;quot;&amp;gt;&amp;gt;=
},&lt;br&gt;
&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{&amp;l=
</I>t;&amp;lt;&amp;quot;x-message-ttl&amp;quot;&amp;gt;&amp;gt;,signedint,600000}],&lt;br&gt;
&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &amp;lt;0.=
</I>1799.0&amp;gt;,[],all},&lt;br&gt;
&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &amp;lt;0.1801.0&amp;g=
</I>t;,&lt;br&gt;
&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 {dict,0,16,16,=
</I>8,80,48,&lt;br&gt;
&amp;gt;<i>&lt;br&gt;
</I>&amp;gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;
</I>&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[]}=
</I>,&lt;br&gt;
&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 {{[],[=
</I>],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;
&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 []=
</I>,[]}}},&lt;br&gt;
&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 #Fun&amp;lt;rabbit=
</I>_mirror_queue_master.1.2951048&amp;gt;,&lt;br&gt;
&amp;gt;<i> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 #Fun&amp;lt;rabbit=
</I>_mirror_queue_master.2.72654940&amp;gt;}&lt;br&gt;
&amp;gt;<i> ** Reason for termination =3D=3D&lt;br&gt;
</I>&amp;gt;<i> ** {{case_clause,{ok,&amp;lt;3066.9234.0&amp;gt;,[&amp;lt;0.4683.0&amp;gt;]}},&lt;br&gt;
</I>&amp;gt;<i> =A0 =A0 [{rabbit_mirror_queue_coordinator,handle_cast,2},&lt;br&gt;
</I>&amp;gt;<i> =A0 =A0 =A0{gen_server2,handle_msg,2},&lt;br&gt;
</I>&amp;gt;<i> =A0 =A0 =A0{proc_lib,wake_up,3}]}&lt;br&gt;
</I>&lt;br&gt;
&lt;/div&gt;Well this is very odd. We fixed a bug that looked like this, but it g=
ot&lt;br&gt;
fixed in 2.7.1 (and related to x-ha-policy =3D nodes. Could you just check&lt;=
br&gt;
that you really are running 2.8.1? We&amp;#39;re not aware of any bug in this&lt;b=
r&gt;
area in 2.8.1, but that&amp;#39;s certainly not saying there&amp;#39;s not one ther=
e! Is&lt;br&gt;
there any particular sequence of events that you can perform that&lt;br&gt;
reliably triggers this crash? Could you also check the logs of the other&lt;br=
&gt;<i>
</I>nodes (both .log and -sasl.log) to see if there&amp;#39;s further crash reports=
&lt;br&gt;
in there?&lt;br&gt;
&lt;br&gt;
Also, there have been discovered lots of bugs relating to the code&lt;br&gt;
changes made to add DLX support in 2.8.1, especially in relation to HA.&lt;br&gt;
It&amp;#39;s possible one of the issues I found with TTL and HA is causing this=
.&lt;br&gt;
2.8.2 should be out soonish which might introduce fewer new bugs than it&lt;br=
&gt;<i>
</I>fixes, but in the mean time, could you try without the TTL and see if&lt;br&gt;
that helps?&lt;br&gt;
&lt;br&gt;
Matthew&lt;br&gt;
_______________________________________________&lt;br&gt;
rabbitmq-discuss mailing list&lt;br&gt;
&lt;a href=3D&quot;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&quot;&gt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lis</A>=
ts.rabbitmq.com&lt;/a&gt;&lt;br&gt;
&lt;a href=3D&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-dis=">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-dis=</A>
cuss&quot; target=3D&quot;_blank&quot;&gt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo=">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo=</A>
/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br clear=3D&quot;all&quot;&gt;&lt;br&gt;-- &lt;br&gt;From RFC 2631: In ASN.1=
, EXPLICIT tagging is implicit unless IMPLICIT is explicitly specified&lt;br&gt;
&lt;/div&gt;

--047d7b33d9bef7fea004be9d55ad--
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019728.html">No subject
</A></li>
	<LI>Next message: <A HREF="019787.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19774">[ date ]</a>
              <a href="thread.html#19774">[ thread ]</a>
              <a href="subject.html#19774">[ subject ]</a>
              <a href="author.html#19774">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
