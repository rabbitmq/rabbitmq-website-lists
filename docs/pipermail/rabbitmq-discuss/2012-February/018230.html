<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Question about using multi-channel
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Question%20about%20using%20multi-channel&In-Reply-To=%3C20120217131146.GB25862%40southbank.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018222.html">
   <LINK REL="Next"  HREF="018236.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Question about using multi-channel</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Question%20about%20using%20multi-channel&In-Reply-To=%3C20120217131146.GB25862%40southbank.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] Question about using multi-channel">alexandru at rabbitmq.com
       </A><BR>
    <I>Fri Feb 17 13:11:46 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018222.html">[rabbitmq-discuss] Question about using multi-channel
</A></li>
        <LI>Next message: <A HREF="018236.html">[rabbitmq-discuss] Consumers may hang after network instability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18230">[ date ]</a>
              <a href="thread.html#18230">[ thread ]</a>
              <a href="subject.html#18230">[ subject ]</a>
              <a href="author.html#18230">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi David,

&gt;<i> 1. If in the process-1 step-6, I subscribe queue 1 with process by channel 2, when I send the basic.ack by channel 1 in process 2, it will cause the channel 1 closed. Why the channel closed if I change the subscribe channel? Must I send msg use the same channel as which I subscribe the the queue?
</I>
Yes, acks are local to the channel the broker sent them on.  In other
words, you need to ack on the same channel you did the
basic.get/basic.consume.

&gt;<i> 2. Because the two processes need to send/receive message parallelly, so I open two channels, and each process use one of the channels to send/receive message. Do I need to open two channels to let each process send/receive message by their own channel? Can I use only one channel in 2 or more erlang processes?
</I>
It would be better if you didn't share channels between processes.  If
you do use a channel on multiple processes, it will probably not cause 
an error, but some things might not work as you expect them to.

Channels are very cheap, btw.  There's no harm in using a lot of them.

Cheers,
Alex

On Fri, Feb 17, 2012 at 06:56:00AM +0000, Liuzhuofu wrote:
&gt;<i> Hi all:
</I>&gt;<i> My application has 2 erlang processes, and runs ok now :
</I>&gt;<i> In process 1:
</I>&gt;<i> 1. I connect to the mq-server and got the Connection.
</I>&gt;<i> 2. open 2 channel by Connection at one time, I name they channel 1 and channel 2.
</I>&gt;<i> 3. create exchange 1 by channel 2 (type : direct, durable : false)
</I>&gt;<i> 4. create queue 1 by channel 2 (durable : false, passive : false, exclusive : false, auto_delete : true)
</I>&gt;<i> 5. bind queue1 to exchange 1 by channel 2
</I>&gt;<i> 6. create process 2, and subscribe queue 1 with process 2 by channel 1
</I>&gt;<i> 
</I>&gt;<i> In process 2:
</I>&gt;<i> 1. when I receive a mq message, I send the basic.ack back by channel 1
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> My question is:
</I>&gt;<i> 1. If in the process-1 step-6, I subscribe queue 1 with process by channel 2, when I send the basic.ack by channel 1 in process 2, it will cause the channel 1 closed. Why the channel closed if I change the subscribe channel? Must I send msg use the same channel as which I subscribe the the queue?
</I>&gt;<i> 
</I>&gt;<i> 2. Because the two processes need to send/receive message parallelly, so I open two channels, and each process use one of the channels to send/receive message. Do I need to open two channels to let each process send/receive message by their own channel? Can I use only one channel in 2 or more erlang processes?
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> David
</I>
&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>






































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018222.html">[rabbitmq-discuss] Question about using multi-channel
</A></li>
	<LI>Next message: <A HREF="018236.html">[rabbitmq-discuss] Consumers may hang after network instability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18230">[ date ]</a>
              <a href="thread.html#18230">[ thread ]</a>
              <a href="subject.html#18230">[ subject ]</a>
              <a href="author.html#18230">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
