<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Passive queue declaration and channel closure
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Passive%20queue%20declaration%20and%20channel%20closure&In-Reply-To=%3C88E590DC4586974D825FC82AE798294E520F1E82%40GSVCLU04.ges.ferlan.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018223.html">
   <LINK REL="Next"  HREF="018227.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Passive queue declaration and channel closure</H1>
    <B>Busoli, Simone</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Passive%20queue%20declaration%20and%20channel%20closure&In-Reply-To=%3C88E590DC4586974D825FC82AE798294E520F1E82%40GSVCLU04.ges.ferlan.it%3E"
       TITLE="[rabbitmq-discuss] Passive queue declaration and channel closure">Simone.Busoli at ferrari.com
       </A><BR>
    <I>Thu Feb 16 17:10:14 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018223.html">[rabbitmq-discuss] Multi-threading in c/c++
</A></li>
        <LI>Next message: <A HREF="018227.html">[rabbitmq-discuss] Passive queue declaration and channel closure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18207">[ date ]</a>
              <a href="thread.html#18207">[ thread ]</a>
              <a href="subject.html#18207">[ subject ]</a>
              <a href="author.html#18207">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, I'm revamping this&lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-February/011314.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-February/011314.html</A>&gt; old thread because I'm trying to solve pretty much the same problem. I need to know whether a queue that I have declared still exists on the server or has for any reason been deleted.
Without relying on the management plugin I think the only way to do that is to declare the queue as passive. At least with the .NET client and apparently the Java client too, when the queue does not exist, besides throwing an exception, the channel is closed as well. From the spec:

If set, the server will reply with Declare-Ok if the queue already exists with the same name, and raise an error if not. The client can use this to check whether a queue exists without modifying the server state.

There is no mention of channel closure, while the last sentence implies that using the passive bit is indeed a way for a client to check queue existence, so closing the channel when it doesn't is a bit unexpected.
That said, it's not a big deal to recreate the channel in such cases, but I'd appreciate your opinion. Any chance this behavior can be changed in the client libraries?

_________________________________________________________________________________________________________________
Questo messaggio e da intendersi esclusivamente ad uso del destinatario e puo contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non e il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione e 
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from 
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the 
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly 
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from 
your system.
_________________________________________________________________________________________________________________

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120216/ec501cfc/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120216/ec501cfc/attachment.htm</A>&gt;
</PRE>





































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018223.html">[rabbitmq-discuss] Multi-threading in c/c++
</A></li>
	<LI>Next message: <A HREF="018227.html">[rabbitmq-discuss] Passive queue declaration and channel closure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18207">[ date ]</a>
              <a href="thread.html#18207">[ thread ]</a>
              <a href="subject.html#18207">[ subject ]</a>
              <a href="author.html#18207">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
