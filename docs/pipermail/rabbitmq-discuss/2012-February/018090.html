<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Consequences of not ACK-ing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consequences%20of%20not%20ACK-ing&In-Reply-To=%3CAF4AD4ADFB23054CB4C75F50FF8C40B73B4044C1F6%40MAILCCR.us.syncsort.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018089.html">
   <LINK REL="Next"  HREF="018091.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Consequences of not ACK-ing</H1>
    <B>Bell, Paul M.</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consequences%20of%20not%20ACK-ing&In-Reply-To=%3CAF4AD4ADFB23054CB4C75F50FF8C40B73B4044C1F6%40MAILCCR.us.syncsort.com%3E"
       TITLE="[rabbitmq-discuss] Consequences of not ACK-ing">pbell at syncsort.com
       </A><BR>
    <I>Sat Feb 11 13:35:52 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018089.html">[rabbitmq-discuss] Multithreading and rabbitmq-c
</A></li>
        <LI>Next message: <A HREF="018091.html">[rabbitmq-discuss] Consequences of not ACK-ing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18090">[ date ]</a>
              <a href="thread.html#18090">[ thread ]</a>
              <a href="subject.html#18090">[ subject ]</a>
              <a href="author.html#18090">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>All,

In putting together a system architecture that tries to leverage Rabbit, I decided that I'd best not wait until end of March to get Alvaro and Jason's book. So I yesterday got the MEAP version and last night began reading it.

I came across something that is, at first blush, a fly in the ointment. Specifically, I read that if a consumer doesn't ACK (and assuming no auto-ack), then the broker will NOT deliver another message to that consumer, until it does ACK the previous message.

My consumers quickly hand-off the work task represented by the message. That is, they quickly dispatch a message to other threads which can carry on asynchronously. And then they are ready to receive another message. I had assumed and hoped that Rabbit would simply keep delivering messages despite this lack of ACK. This would allow me to maintain a high level of paraellism from the consumer &quot;downwards.&quot; But it would also give me a means by which, should a work task fail, its message could be redelivered and the task retried.

A few questions:

a. can this behavior on the part of the broker be circumvented?

b. any ideas on ways of achieving my intent?

In re (b): I am beginning to think that my only choice (assuming answer to (a) is &quot;no&quot;) will be to ACK the message as soon as I can. And, in my architecture, this would mean that I would need to create in the persistence layer some kind of task &quot;status record&quot; that records task state (e.g., &quot;in-flight&quot;, &quot;failed&quot; &quot;succeeded&quot;), AND that the retry mechanism would have to depend on visiting the persistence layer to obtain the status record and take the appropriate action based on the last recorded task status. It seems to me it would be much easier if the message were still in a queue and could be redelivered from &quot;above.&quot;

Thanks for your help.

-Paul



ATTENTION: -----

The information contained in this message (including any files transmitted with this message) may contain proprietary, trade secret or other  confidential and/or legally privileged information. Any pricing information contained in this message or in any files transmitted with this message is always confidential and cannot be shared with any third parties without prior written approval from Syncsort. This message is intended to be read only by the individual or entity to whom it is addressed or by their designee. If the reader of this message is not the intended recipient, you are on notice that any use, disclosure, copying or distribution of this message, in any form, is strictly prohibited. If you have received this message in error, please immediately notify the sender and/or Syncsort and destroy all copies of this message in your possession, custody or control.
</PRE>


















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018089.html">[rabbitmq-discuss] Multithreading and rabbitmq-c
</A></li>
	<LI>Next message: <A HREF="018091.html">[rabbitmq-discuss] Consequences of not ACK-ing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18090">[ date ]</a>
              <a href="thread.html#18090">[ thread ]</a>
              <a href="subject.html#18090">[ subject ]</a>
              <a href="author.html#18090">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
