<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Binding to multiple queues in a round-robin style using the PIKA library
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Binding%20to%20multiple%20queues%20in%20a%20round-robin%0A%20style%20using%20the%20PIKA%20library&In-Reply-To=%3C4F2C0B5E.5040108%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017897.html">
   <LINK REL="Next"  HREF="017910.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Binding to multiple queues in a round-robin style using the PIKA library</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Binding%20to%20multiple%20queues%20in%20a%20round-robin%0A%20style%20using%20the%20PIKA%20library&In-Reply-To=%3C4F2C0B5E.5040108%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Binding to multiple queues in a round-robin style using the PIKA library">emile at rabbitmq.com
       </A><BR>
    <I>Fri Feb  3 16:29:18 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017897.html">[rabbitmq-discuss] Binding to multiple queues in a round-robin	style using the PIKA library
</A></li>
        <LI>Next message: <A HREF="017910.html">[rabbitmq-discuss] Binding to multiple queues in a round-robin	style using the PIKA library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17900">[ date ]</a>
              <a href="thread.html#17900">[ thread ]</a>
              <a href="subject.html#17900">[ subject ]</a>
              <a href="author.html#17900">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Stephen,

On 03/02/12 15:49, Stephen Young wrote:
&gt;<i> Q1...Qn are the queues I have created
</I>&gt;<i> Each consumer binds to all queues, and has the capability of parsing
</I>&gt;<i> and using data from each queue.
</I>&gt;<i> 
</I>&gt;<i> A request is pushed through a broker and generates a set of queue
</I>&gt;<i> entries, E1...En
</I>&gt;<i> Ej must be processed for Ej+1...En to be processed, the rest are
</I>&gt;<i> independent of the result of Ej.
</I>&gt;<i> Bundling requests together causes the system to be significantly
</I>&gt;<i> slower, as it doesn't capitalize on the heavy parallelism of running
</I>&gt;<i> E1..Ej simultaneously, and once Ej is processed, Ej+1...En
</I>&gt;<i> simultaneously.
</I>
This is just a suggestion and might not be possible, but why not treat
Ej completely separately from other entries on the publishing side?
Process Ej perhaps using an RPC call and include the result in all
messages Ej+1..En. Or make the result of Ej available to consumers in
some other way if it is large. You should obtain good parallelism that way.

&gt;<i> When I don't have these consumers, or have a single consumer managing
</I>&gt;<i> the whole system, what seems to be happening is that the consumer will
</I>&gt;<i> stop on one of the queues Qj+m, and read a request, determine that it
</I>&gt;<i> cant complete, send basic_reject, and then read again from the same
</I>&gt;<i> queue. This is not problematic all the time, but occasionally
</I>&gt;<i> generates a loop on that queue by the consumer. What i'd like to do is
</I>&gt;<i> have the consumer act like:
</I>&gt;<i> 
</I>&gt;<i> read queue Qi
</I>&gt;<i> determine blockage, send basic_reject
</I>&gt;<i> read queue Qk
</I>&gt;<i> process, send basic_ack
</I>
I'm not familiar with Pika, but can you unsubscribe from Qi before the
basic_reject?


-Emile
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017897.html">[rabbitmq-discuss] Binding to multiple queues in a round-robin	style using the PIKA library
</A></li>
	<LI>Next message: <A HREF="017910.html">[rabbitmq-discuss] Binding to multiple queues in a round-robin	style using the PIKA library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17900">[ date ]</a>
              <a href="thread.html#17900">[ thread ]</a>
              <a href="subject.html#17900">[ subject ]</a>
              <a href="author.html#17900">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
