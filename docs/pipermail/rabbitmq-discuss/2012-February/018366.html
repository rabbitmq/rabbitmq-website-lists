<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Message presence notification
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20presence%20notification&In-Reply-To=%3CF1A539826FC33E4CA602BB52E5C450220F88D475%40FR44EX3004.global.ds.honeywell.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018359.html">
   <LINK REL="Next"  HREF="018373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Message presence notification</H1>
    <B>Cermak, Marek</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20presence%20notification&In-Reply-To=%3CF1A539826FC33E4CA602BB52E5C450220F88D475%40FR44EX3004.global.ds.honeywell.com%3E"
       TITLE="[rabbitmq-discuss] Message presence notification">Marek.Cermak at Honeywell.com
       </A><BR>
    <I>Thu Feb 23 12:15:19 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018359.html">[rabbitmq-discuss] Message presence notification
</A></li>
        <LI>Next message: <A HREF="018373.html">[rabbitmq-discuss] Message presence notification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18366">[ date ]</a>
              <a href="thread.html#18366">[ thread ]</a>
              <a href="subject.html#18366">[ subject ]</a>
              <a href="author.html#18366">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Marek,

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Marek Majkowski [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">majek04 at gmail.com</A>]
</I>&gt;<i> Sent: Thursday, February 23, 2012 12:21
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] Message presence notification
</I>&gt;<i> 
</I>&gt;<i> On Thu, Feb 23, 2012 at 09:51, Cermak, Marek 
</I>&gt;<i> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Marek.Cermak at honeywell.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; in our scenario we use two different connections to rabbitmq server 
</I>&gt;<i> &gt; &#8211; one is using a slow and permanently open link the second is very 
</I>&gt;<i> &gt; fast but opens only on demand and should be closed once it is not in use.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; These two connection we want to use for consuming messages from many 
</I>&gt;<i> &gt; (tens,
</I>&gt;<i> &gt; hundreds) queues in the following way
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 1.       open the connection on a slow link and &quot;watch&quot; the queues;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2.       once there is a message in one of the watched queues, the 
</I>&gt;<i> &gt; client receives a notification (no message) from rabbit;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 3.       client opens the fast link, consumes available messages 
</I>&gt;<i> &gt; from queues and closes  the link;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 4.       back to #2.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; How can we achieve this with AMQP (0.9.1 or 1.0) ? Can we do it with 
</I>&gt;<i> &gt; no RabbitMQ protocol extension?
</I>&gt;<i> 
</I>&gt;<i> Why not just send two messages? One to a real queue, and another one, 
</I>&gt;<i> with no payload, to a queue called 'notifications'.
</I>&gt;<i> 
</I>&gt;<i> In this case, whenever there is a new message coming to 'notifications'
</I>&gt;<i> queue, the consumer will know that there should be another, big, 
</I>&gt;<i> message in some other queue.
</I>&gt;<i> 
</I>&gt;<i> Does it make sense?
</I>&gt;<i> 
</I>
It indeed does, but it would be useful in case there is only one producer (or not many of them). We can have lot of producers and that would bring tons of messages in notification queue (in the worst case one for every message in the 'real' queue). 
Another issue would be sending of such notification messages since producers are not willing to be changed ;-)


&gt;<i> &gt; I was thinking about channel.basicQoS(0) but what would I get in that case?
</I>&gt;<i> 
</I>&gt;<i> Spec says:
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.qos">http://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.qos</A>
</I>&gt;<i> 
</I>&gt;<i> &gt; May be set to zero, meaning &quot;no specific limit&quot;, although other 
</I>&gt;<i> &gt; prefetch limits may still apply.
</I>&gt;<i> 
</I>
True, you're right.


&gt;<i> Cheers,
</I>&gt;<i>     Marek
</I>
Thanks.

Regards
Marek
</PRE>





































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018359.html">[rabbitmq-discuss] Message presence notification
</A></li>
	<LI>Next message: <A HREF="018373.html">[rabbitmq-discuss] Message presence notification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18366">[ date ]</a>
              <a href="thread.html#18366">[ thread ]</a>
              <a href="subject.html#18366">[ subject ]</a>
              <a href="author.html#18366">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
