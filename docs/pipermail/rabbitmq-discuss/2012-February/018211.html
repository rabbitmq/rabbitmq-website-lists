<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Performance of &quot;blocking publisher-confirms&quot; vs. transactions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Performance%20of%20%22blocking%20publisher-confirms%22%0A%20vs.%20transactions&In-Reply-To=%3CCAOn7oW8C-u2oJ7eYvKHE0EDL5japasAB%2BZL_sME88Hk7SWE45Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018209.html">
   <LINK REL="Next"  HREF="018212.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Performance of &quot;blocking publisher-confirms&quot; vs. transactions</H1>
    <B>Simone Busoli</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Performance%20of%20%22blocking%20publisher-confirms%22%0A%20vs.%20transactions&In-Reply-To=%3CCAOn7oW8C-u2oJ7eYvKHE0EDL5japasAB%2BZL_sME88Hk7SWE45Q%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Performance of &quot;blocking publisher-confirms&quot; vs. transactions">simone.busoli at gmail.com
       </A><BR>
    <I>Thu Feb 16 21:08:12 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018209.html">[rabbitmq-discuss] Performance of &quot;blocking publisher-confirms&quot; vs.	transactions
</A></li>
        <LI>Next message: <A HREF="018212.html">[rabbitmq-discuss] Performance of &quot;blocking publisher-confirms&quot; vs. transactions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18211">[ date ]</a>
              <a href="thread.html#18211">[ thread ]</a>
              <a href="subject.html#18211">[ subject ]</a>
              <a href="author.html#18211">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matt, I've gone through the old thread very quickly so forgive me if I'm
missing something. Your first sentence leaves me with some doubts:

As I've detailed in other posts to this DL (<A HREF="http://bit.ly/zf6sKC">http://bit.ly/zf6sKC</A>), we have
&gt;<i> situation where straightforward publisher-confirms aren't appropriate in
</I>&gt;<i> our scenario. We need to know the broker has received the message, and we
</I>&gt;<i> have to assume our client can die at any moment, so retransmitting messages
</I>&gt;<i> is not an option for us.
</I>&gt;<i>
</I>
Publisher confirms guarantee that the broker has taken care of the message
and it has been either delivered to a queue or to a consumer. This is a
strong delivery guarantee, even if the client dies. Coupled with persistent
messages and durable exchange/queues, it guarantees at-least-once delivery.
Can you describe why you think publisher confirms are not appropriate in
your scenario?


&gt;<i> What I'd like to know is: Is there any benefit to creating our own
</I>&gt;<i> &quot;blocking publisher-confirm publishing&quot;? That is, we'd do the following:
</I>&gt;<i>
</I>&gt;<i> Publish a single message
</I>&gt;<i> Block on an event 'X'
</I>&gt;<i> When the publisher confirm comes in, signal 'X'
</I>&gt;<i> Return from the publish call
</I>&gt;<i>
</I>
If you happen to be using the .NET API this is already implemented, the
WaitForConfirms and WaitForConfirmsOrDie on the IModel interface provide
this behavior.


&gt;<i> In a mirrored queue scenario, is there any advantage to doing this vs.
</I>&gt;<i> using straight-up transactions?
</I>&gt;<i>
</I>&gt;<i> Matt
</I>&gt;<i>
</I>&gt;<i> p.s. I realize in the above pseudocode that multiple threads would be
</I>&gt;<i> necessary - One to block and the other to listen for the publisher-confirm.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120216/6d6f4ed0/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120216/6d6f4ed0/attachment.htm</A>&gt;
</PRE>










































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018209.html">[rabbitmq-discuss] Performance of &quot;blocking publisher-confirms&quot; vs.	transactions
</A></li>
	<LI>Next message: <A HREF="018212.html">[rabbitmq-discuss] Performance of &quot;blocking publisher-confirms&quot; vs. transactions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18211">[ date ]</a>
              <a href="thread.html#18211">[ thread ]</a>
              <a href="subject.html#18211">[ subject ]</a>
              <a href="author.html#18211">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
