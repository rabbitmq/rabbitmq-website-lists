<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Mnesia connection error in a clustered node on a	multi NIC PC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Mnesia%20connection%20error%20in%20a%20clustered%20node%20on%20a%0A%09multi%20NIC%20PC&In-Reply-To=%3C139a51c7-a8c3-4d47-b0d4-ea5f5b2a67bb%40t15g2000yqi.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017990.html">
   <LINK REL="Next"  HREF="018069.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Mnesia connection error in a clustered node on a	multi NIC PC</H1>
    <B>davidib</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Mnesia%20connection%20error%20in%20a%20clustered%20node%20on%20a%0A%09multi%20NIC%20PC&In-Reply-To=%3C139a51c7-a8c3-4d47-b0d4-ea5f5b2a67bb%40t15g2000yqi.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Mnesia connection error in a clustered node on a	multi NIC PC">davidib2001 at yahoo.com
       </A><BR>
    <I>Tue Feb  7 15:02:04 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017990.html">[rabbitmq-discuss] Pika - Catch amqp error - Cannot	redeclare	exchange with different type
</A></li>
        <LI>Next message: <A HREF="018069.html">[rabbitmq-discuss] Mnesia connection error in a clustered node on a multi NIC PC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17984">[ date ]</a>
              <a href="thread.html#17984">[ thread ]</a>
              <a href="subject.html#17984">[ subject ]</a>
              <a href="author.html#17984">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,


After getting a small test cluster to run successfully, I am now
getting an unexpected Mnesia error on one of the nodes.  Here is a
snippet of the messages in my RabbitMQ log for the node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-</A>
HP165:

Mnesia('<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-HP165</A>'): ** ERROR ** Mnesia on '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-HP165</A>'
could not connect to node(s) ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-DS140</A>']

This message is apparently being generated about every 30 seconds!


The cluster seemed to work initially, i.e. I could send out a message
from any node to a pub/sub exchange, and each queue/node properly
received the message.  But after that initial test the RabbitMQ
install on the <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-HP165</A> does not seem to work, none of the
other nodes can see it if I do a rabbitmqctl -n ... status, the queue
that I created for this node does not show up in the management
console, when I do a rabbitmqctl status on the problem node, none of
the plugins show up, yet they did show up when I initially instaleld
Rabbit, etc.


Two of the nodes in the cluster are dual NIC machines, i.e. the PCs
sit on two different networks (i.e. one NIC is mapped to 172.x.x.x,
other NIC is mapped to 10.x.x.x).  The node/PC that seems to have
failed has two NICs, but one is permanent (i.e. a true NIC card mapped
to 172.x.x.x) and one (mapped to 10.x.x.x) is via a VPN connection
that I connect/disconnect to as needed.

So, quick questions:
1) Is the dual NIC setup of the nodes the cause of the problem (I
realize that a cluster is not designed to work over a partitioned
network)

2) I know that RabbitMQ/erlang can be 'pinned' to a specific IP
address.port.  Would this be a solution if the dual NICS are the
problem?

OR

Is it just not safe to use a cluster on a dual NIC node (i.e. do I
have to use a federation?)

Well, thanks in advance for any help

Regards
David



I've got a small test cluster of three nodes.  Each node is is Windows
XP machine.  Each node has two NICs, one NIC is mapped to our
development environment network, the other NIC is mapped to our
production network.


</PRE>




































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017990.html">[rabbitmq-discuss] Pika - Catch amqp error - Cannot	redeclare	exchange with different type
</A></li>
	<LI>Next message: <A HREF="018069.html">[rabbitmq-discuss] Mnesia connection error in a clustered node on a multi NIC PC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17984">[ date ]</a>
              <a href="thread.html#17984">[ thread ]</a>
              <a href="subject.html#17984">[ subject ]</a>
              <a href="author.html#17984">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
