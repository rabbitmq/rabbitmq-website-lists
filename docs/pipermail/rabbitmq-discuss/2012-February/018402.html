<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Ensuring low latency for publishers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ensuring%20low%20latency%20for%20publishers&In-Reply-To=%3C4F47726A.7000401%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018388.html">
   <LINK REL="Next"  HREF="018413.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Ensuring low latency for publishers</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ensuring%20low%20latency%20for%20publishers&In-Reply-To=%3C4F47726A.7000401%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Ensuring low latency for publishers">simon at rabbitmq.com
       </A><BR>
    <I>Fri Feb 24 11:20:10 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018388.html">[rabbitmq-discuss] Ensuring low latency for publishers
</A></li>
        <LI>Next message: <A HREF="018413.html">[rabbitmq-discuss] Ensuring low latency for publishers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18402">[ date ]</a>
              <a href="thread.html#18402">[ thread ]</a>
              <a href="subject.html#18402">[ subject ]</a>
              <a href="author.html#18402">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/02/12 20:27, Eric wrote:
&gt;<i> Well... I would find it useful.  And the person in the thread I linked
</I>&gt;<i> to would have found it useful as well.
</I>
Sure, I'm trying to gauge how widespread such a demand is. It looks like 
we could plausibly do something in this direction.

&gt;<i> It's pretty tough to go into a production environment with the
</I>&gt;<i> statement &quot;Publishing should be fast unless the broker is throttling.
</I>&gt;<i> If the broker is throttling we won't be able to tell, we don't have a
</I>&gt;<i> good way of knowing beforehand, and we don't know how long the threads
</I>&gt;<i> will be blocked&quot;.  It's useful in any case where an application would
</I>&gt;<i> rather not publish the message rather than waiting to publish it
</I>&gt;<i> indefinitely.
</I>
Yeah, the problem is that we've historically optimised for Never 
Throwing Away Messages Ever Ever...

&gt;<i> The net result is that a struggling broker will cause a chain
</I>&gt;<i> reaction; publishers will block indefinitely, which may bring the
</I>&gt;<i> publishing application to a halt.  In that case I'd like to abandon
</I>&gt;<i> the publishing process, but it's quite impossible at that point - it's
</I>&gt;<i> too late, the broker is already throttling, and there's no timeout.
</I>&gt;<i> The thread could block for seconds, or more.  I'm concerned about not
</I>&gt;<i> throwing the message away, but I'm more concerned about being able to
</I>&gt;<i> isolate services from RabbitMQ broker events.
</I>
If it's any consolation the flow control stuff that's coming in 2.8.0 
will make it much harder to make the memory alarm go off, so blocking 
for seconds should be much less likely.

&gt;<i> One more question along this line.  The flow control document says &quot;By
</I>&gt;<i> default, when the RabbitMQ server uses above 40% of the installed RAM,
</I>&gt;<i> it raises a memory alarm... Connection heartbeat monitoring gets
</I>&gt;<i> disabled too.&quot;  If I set up a connection heartbeat on the shared
</I>&gt;<i> connection, will the heartbeat detect a broker alarm that exceeds the
</I>&gt;<i> interval and disconnect?  A disconnect would terminate the publisher
</I>&gt;<i> channels and free things up.
</I>
No - the whole point of disabling heartbeats is to make sure connections 
stay up when this happens...

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018388.html">[rabbitmq-discuss] Ensuring low latency for publishers
</A></li>
	<LI>Next message: <A HREF="018413.html">[rabbitmq-discuss] Ensuring low latency for publishers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18402">[ date ]</a>
              <a href="thread.html#18402">[ thread ]</a>
              <a href="subject.html#18402">[ subject ]</a>
              <a href="author.html#18402">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
