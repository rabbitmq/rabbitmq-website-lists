<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Ensuring low latency for publishers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ensuring%20low%20latency%20for%20publishers&In-Reply-To=%3Cb16ad838-4b64-4cae-8f07-b4d086332418%40m3g2000pbi.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018367.html">
   <LINK REL="Next"  HREF="018402.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Ensuring low latency for publishers</H1>
    <B>Eric</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ensuring%20low%20latency%20for%20publishers&In-Reply-To=%3Cb16ad838-4b64-4cae-8f07-b4d086332418%40m3g2000pbi.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Ensuring low latency for publishers">ejarendt at gmail.com
       </A><BR>
    <I>Thu Feb 23 20:27:48 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018367.html">[rabbitmq-discuss] Ensuring low latency for publishers
</A></li>
        <LI>Next message: <A HREF="018402.html">[rabbitmq-discuss] Ensuring low latency for publishers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18388">[ date ]</a>
              <a href="thread.html#18388">[ thread ]</a>
              <a href="subject.html#18388">[ subject ]</a>
              <a href="author.html#18388">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well... I would find it useful.  And the person in the thread I linked
to would have found it useful as well.

It's pretty tough to go into a production environment with the
statement &quot;Publishing should be fast unless the broker is throttling.
If the broker is throttling we won't be able to tell, we don't have a
good way of knowing beforehand, and we don't know how long the threads
will be blocked&quot;.  It's useful in any case where an application would
rather not publish the message rather than waiting to publish it
indefinitely.

The net result is that a struggling broker will cause a chain
reaction; publishers will block indefinitely, which may bring the
publishing application to a halt.  In that case I'd like to abandon
the publishing process, but it's quite impossible at that point - it's
too late, the broker is already throttling, and there's no timeout.
The thread could block for seconds, or more.  I'm concerned about not
throwing the message away, but I'm more concerned about being able to
isolate services from RabbitMQ broker events.

I know that this is solved by decoupling the publishing process, but
then I'm back to the data structure conundrum I mentioned in my first
post.  It's very elegant if a thread can simply publish a message and
move on with life, and that's only problematic if there's no guarantee
as to how long that publish can take.

One more question along this line.  The flow control document says &quot;By
default, when the RabbitMQ server uses above 40% of the installed RAM,
it raises a memory alarm... Connection heartbeat monitoring gets
disabled too.&quot;  If I set up a connection heartbeat on the shared
connection, will the heartbeat detect a broker alarm that exceeds the
interval and disconnect?  A disconnect would terminate the publisher
channels and free things up.

 - Eric

On Feb 23, 4:15&#160;am, Michael Bridgen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mi... at rabbitmq.com</A>&gt; wrote:
&gt;<i> On 02/23/2012 12:09 PM, Simon MacMullen wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; On 22/02/12 17:52, Matthew Sackman wrote:
</I>&gt;<i> &gt;&gt;&gt; &gt; Is it possible to configure the broker to never page to disk so that
</I>&gt;<i> &gt;&gt;&gt; &gt; it never throttles? Basically, when it hits its high watermark for
</I>&gt;<i> &gt;&gt;&gt; &gt; memory can it just drop inbound messages?
</I>&gt;<i> &gt;&gt; Nope.
</I>&gt;<i>
</I>&gt;<i> &gt; I find myself wondering whether some such feature may be useful though.
</I>&gt;<i> &gt; At the moment Rabbit is concerned with never throwing anything away, how
</I>&gt;<i> &gt; many people would find it useful to drop messages when the server is busy?
</I>&gt;<i>
</I>&gt;<i> If data needs to be timely in preference to being reliable -- better to
</I>&gt;<i> throw away data if it looks like connections are blocked, and send fresh
</I>&gt;<i> data when things are clear again.
</I>&gt;<i>
</I>&gt;<i> -Michael
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018367.html">[rabbitmq-discuss] Ensuring low latency for publishers
</A></li>
	<LI>Next message: <A HREF="018402.html">[rabbitmq-discuss] Ensuring low latency for publishers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18388">[ date ]</a>
              <a href="thread.html#18388">[ thread ]</a>
              <a href="subject.html#18388">[ subject ]</a>
              <a href="author.html#18388">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
