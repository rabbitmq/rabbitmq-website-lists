<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmqctl -n ..... status fails one way but	not the other
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmqctl%20-n%20.....%20status%20fails%20one%20way%20but%0A%09not%20the%20other&In-Reply-To=%3C98246079-1a87-4ab6-b136-a8a7ce9a65e3%40d11g2000yqg.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018021.html">
   <LINK REL="Next"  HREF="018038.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmqctl -n ..... status fails one way but	not the other</H1>
    <B>davidib</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmqctl%20-n%20.....%20status%20fails%20one%20way%20but%0A%09not%20the%20other&In-Reply-To=%3C98246079-1a87-4ab6-b136-a8a7ce9a65e3%40d11g2000yqg.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmqctl -n ..... status fails one way but	not the other">davidib2001 at yahoo.com
       </A><BR>
    <I>Wed Feb  8 17:25:35 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018021.html">[rabbitmq-discuss] &#31572;&#22797;:  A question about RabbitMQ &quot;Presence Exchange&quot; Plugin
</A></li>
        <LI>Next message: <A HREF="018038.html">[rabbitmq-discuss] rabbitmqctl -n ..... status fails one way but not the other
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18025">[ date ]</a>
              <a href="thread.html#18025">[ thread ]</a>
              <a href="subject.html#18025">[ subject ]</a>
              <a href="author.html#18025">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I've got a sick rabbit cluster which is acting unusual and things have
gone from bad to worse.  Initially, the cluster, consisting of three
nodes/PCs worked ok, i.e. was able to setup a pub/sub test exchange
and worked as expected. Now, not only is the cluster not working (one
machine's rabbitmq log reports Mnesia cannot connect a node on another
machine) but the status command is only working one way!

Basically, I can &quot;rabbitmqctl -n <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at A</A> status&quot; while on node B (and
properly see rabbitmq node on A), but &quot;rabbitmqctl -n <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at B</A> status&quot;
while on machine A reports the node on B is not running.

I can ping all the machines (nodes A,B,C), all the firewalls have the
proper ports open.  All erlang cookies are the same, etc. I've tried
reinstalling from scratch erlang/Rabbitmq on one of the nodes, still
get the same results.



ACTUAL RESULTS:NODE B (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-DS140</A>) CAN SEE NODE A (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-</A>
HP166)
C:\Documents and Settings\lst&gt;rabbitmqctl -n <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-HP166</A> status
Status of node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-HP166</A>' ...
[{pid,672},
 {running_applications,
     [{rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;2.7.1&quot;},
      {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;2.7.1&quot;},
      {rabbit,&quot;RabbitMQ&quot;,&quot;2.7.1&quot;},
      {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.8&quot;},
      {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.6&quot;},
      {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;2.7.1&quot;},
      {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.2&quot;},
      {rabbitmq_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;2.7.1&quot;},
      {webmachine,&quot;webmachine&quot;,&quot;1.7.0-rmq2.7.1-hg&quot;},
      {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;1.3-rmq2.7.1-git&quot;},
      {inets,&quot;INETS  CXC 138 49&quot;,&quot;5.8&quot;},
      {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.18&quot;},
      {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.15&quot;}]},
 {os,{win32,nt}},
 {erlang_version,&quot;Erlang R15B (erts-5.9) [smp:2:2] [async-threads:
30]\n&quot;},
 {memory,
     [{total,18332328},
      {processes,6829982},
      {processes_used,6823567},
      {system,11502346},
      {atom,428361},
      {atom_used,409004},
      {binary,216704},
      {code,8085351},
      {ets,654612}]},
 {vm_memory_high_watermark,0.2287319764753309},
 {vm_memory_limit,858993459}]
...done.


BUT NODE A (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-HP166</A>) CANNOT SEE NODE B (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-DS140</A>)
F:\Program Files\erl5.9\erts-5.9\bin&gt;rabbitmqctl -n <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-DS140</A>
status
Status of node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-DS140</A>' ...
Error: unable to connect to node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at LAKE-DS140</A>': nodedown
diagnostics:
- nodes and their ports on LAKE-DS140: [{rabbit,1052}]
- current node: '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl4211 at lake-hp166</A>'
- current node home dir: F:\Documents and Settings\prm
- current node cookie hash: OkIu/5IPQIZ171ZMFGQ8nQ==

any help very much appreciated

Thanks
David
</PRE>

























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018021.html">[rabbitmq-discuss] &#31572;&#22797;:  A question about RabbitMQ &quot;Presence Exchange&quot; Plugin
</A></li>
	<LI>Next message: <A HREF="018038.html">[rabbitmq-discuss] rabbitmqctl -n ..... status fails one way but not the other
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18025">[ date ]</a>
              <a href="thread.html#18025">[ thread ]</a>
              <a href="subject.html#18025">[ subject ]</a>
              <a href="author.html#18025">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
