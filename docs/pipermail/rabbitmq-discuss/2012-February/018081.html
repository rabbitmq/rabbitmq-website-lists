<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Naive Question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Naive%20Question&In-Reply-To=%3CAF4AD4ADFB23054CB4C75F50FF8C40B73B40447DD7%40MAILCCR.us.syncsort.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018001.html">
   <LINK REL="Next"  HREF="018082.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Naive Question</H1>
    <B>Bell, Paul M.</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Naive%20Question&In-Reply-To=%3CAF4AD4ADFB23054CB4C75F50FF8C40B73B40447DD7%40MAILCCR.us.syncsort.com%3E"
       TITLE="[rabbitmq-discuss] Naive Question">pbell at syncsort.com
       </A><BR>
    <I>Fri Feb 10 23:36:47 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018001.html">[rabbitmq-discuss] Queue Look-ahead, et alia
</A></li>
        <LI>Next message: <A HREF="018082.html">[rabbitmq-discuss] Naive Question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18081">[ date ]</a>
              <a href="thread.html#18081">[ thread ]</a>
              <a href="subject.html#18081">[ subject ]</a>
              <a href="author.html#18081">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>All,

Hi again.

Only after trying to think through a real world scenario did I realize that my grasp of certain fundamental AMQP concepts is tenuous.

Specifically, given a producer and a consumer, is the normative behavior for only *one* of them to declare (create?) the queue over which they communicate? As I look over the examples that I've &quot;written&quot; (&quot;copied&quot; would be more accurate), I see my producer doing this:


RabbitAdmin admin = new RabbitAdmin(rabbitTemplate.getConnectionFactory());
Exchange ex = new FanoutExchange(routingKey, true, false);
admin.declareExchange(ex);
admin.declareQueue(new Queue(this.queueName));


And I see my consumer doing this:


ConsumerSimpleMessageListenerContainer container = new ConsumerSimpleMessageListenerContainer();
container.setConnectionFactory(connectionFactory());
container.setQueueNames(this.queueName);
container.setConcurrentConsumers(this.onOfConsumer);
container.setMessageListener(new MessageListenerAdapter(new ConsumerHandler(), new SimpleMessageConverter()));
container.startConsumers();


What would happen if each declared a queue of the same name and type - would that give rise to two distinct queues, leaving the producer and consumer unable to communicate?

If it's normative for only one party to create the queue and the other to bind to it, what will happen if, when I try to bind to the queue, it doesn't yet exist?

Here's what I am trying to get to (I assume it requires a topic exchange):

a. a queue that holds two different message types, call them &quot;MGMT&quot; and &quot;HB.&quot;
b. a producer writes MGMT messages to this queue
c. something called a &quot;monitor&quot; writes HB messages to this queue
d. consumer reads HB messages from this queue
e. monitor reads MGMT messages from this queue

Schematically I think it looks like this:

Producer(MGMT) -&gt; monitor
Monitor(HB)    -&gt; consumer

How would I define these relationships via RabbitMQ? Who does what to whom?! I suspect it's simple, but after two solid weeks of 10 hour days, I am fried.

Thank you for your help.

-Paul

PS: What follows is not an attempt to curry favor - but this is a really fine list; folks are friendly, knowledgeable, and eager to help. I really appreciate it.





ATTENTION: -----

The information contained in this message (including any files transmitted with this message) may contain proprietary, trade secret or other  confidential and/or legally privileged information. Any pricing information contained in this message or in any files transmitted with this message is always confidential and cannot be shared with any third parties without prior written approval from Syncsort. This message is intended to be read only by the individual or entity to whom it is addressed or by their designee. If the reader of this message is not the intended recipient, you are on notice that any use, disclosure, copying or distribution of this message, in any form, is strictly prohibited. If you have received this message in error, please immediately notify the sender and/or Syncsort and destroy all copies of this message in your possession, custody or control.
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018001.html">[rabbitmq-discuss] Queue Look-ahead, et alia
</A></li>
	<LI>Next message: <A HREF="018082.html">[rabbitmq-discuss] Naive Question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18081">[ date ]</a>
              <a href="thread.html#18081">[ thread ]</a>
              <a href="subject.html#18081">[ subject ]</a>
              <a href="author.html#18081">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
