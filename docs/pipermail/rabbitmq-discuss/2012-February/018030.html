<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Active/Active: shutdown of one service brings	down the cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Active/Active%3A%20shutdown%20of%20one%20service%20brings%0A%09down%20the%20cluster&In-Reply-To=%3CCAFWGgNHb9bjDPiW5uR9upBug-eaR2k8nYxhi8TN-vZwA419e1A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018061.html">
   <LINK REL="Next"  HREF="018039.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Active/Active: shutdown of one service brings	down the cluster</H1>
    <B>Vadim Chekan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Active/Active%3A%20shutdown%20of%20one%20service%20brings%0A%09down%20the%20cluster&In-Reply-To=%3CCAFWGgNHb9bjDPiW5uR9upBug-eaR2k8nYxhi8TN-vZwA419e1A%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Active/Active: shutdown of one service brings	down the cluster">kot.begemot at gmail.com
       </A><BR>
    <I>Thu Feb  9 02:42:56 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018061.html">[rabbitmq-discuss] Max Consumers?
</A></li>
        <LI>Next message: <A HREF="018039.html">[rabbitmq-discuss] Active/Active: shutdown of one service brings down the cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18030">[ date ]</a>
              <a href="thread.html#18030">[ thread ]</a>
              <a href="subject.html#18030">[ subject ]</a>
              <a href="author.html#18030">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

Given: 3 servers in active/active configuration, rabbit: 2.7.1, erlang
R14B03, CentOS, 64bits.
We experienced at least 2 occasions of the following situation: we observe
abnormal high CPU utilization on one of rabbit servers (40% when &lt;10% is a
norm) without any obvious reason. We did nice restart rabbit service and
the whole cluster went down (restarted).
Another effect is that cluster seems to enters some (inconsistent?) state
and queues can not be registered/deleted, list of queues can not be viewed
through management UI, etc.

Here is a log which contains errors when cluster in broken state:
<A HREF="http://pastebin.com/6rweU3MD">http://pastebin.com/6rweU3MD</A>

Questions:
  Are those errors critical?
  If we experience a high CPU situation again, what can we do, any
additional logging, profiling, process snapshots, etc?

Vadim.

-- 
</PRE>
































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018061.html">[rabbitmq-discuss] Max Consumers?
</A></li>
	<LI>Next message: <A HREF="018039.html">[rabbitmq-discuss] Active/Active: shutdown of one service brings down the cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18030">[ date ]</a>
              <a href="thread.html#18030">[ thread ]</a>
              <a href="subject.html#18030">[ subject ]</a>
              <a href="author.html#18030">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
