<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Correct way of determining which node is master?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Correct%20way%20of%20determining%20which%20node%20is%20master%3F&In-Reply-To=%3CCB692AB0.2EDD5%25mpietrek%40skytap.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018323.html">
   <LINK REL="Next"  HREF="018329.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Correct way of determining which node is master?</H1>
    <B>Matt Pietrek</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Correct%20way%20of%20determining%20which%20node%20is%20master%3F&In-Reply-To=%3CCB692AB0.2EDD5%25mpietrek%40skytap.com%3E"
       TITLE="[rabbitmq-discuss] Correct way of determining which node is master?">mpietrek at skytap.com
       </A><BR>
    <I>Tue Feb 21 19:04:16 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018323.html">[rabbitmq-discuss] FIPS Compliance
</A></li>
        <LI>Next message: <A HREF="018329.html">[rabbitmq-discuss] Correct way of determining which node is	master?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18324">[ date ]</a>
              <a href="thread.html#18324">[ thread ]</a>
              <a href="subject.html#18324">[ subject ]</a>
              <a href="author.html#18324">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In a clustered scenario (3 brokers) with mirrored queues, what is the
correct way to determine which node is the &quot;master&quot; via inspection?

On approach would be to look at the list of queues and see which node is
hosting the queue (as opposed to slave_nodes). However, I'm unsure if
there's some scenario where queue 'A' is hosted by one broker, while queue
'B' is hosted by another.

Another approach is to go off of whichever node has the statistics database,
but I'm unsure if there's a 1:1 correlation there.

If I were to use some combination of rabbitmqctl or rabbitmqadmin commands,
what heuristic should I use?

Background info, in case it matters:

We're using keepalived to maintain a virtual IP that all clients connect to.
We'd obviously like keepalived to put the VIP on whatever node is the master
rather than on a slave node. Our understanding is that if the master has
messages that aren't in the slave node, a client that connects via the VIP
to the slave node and tries to read messages won't see them as they're only
on the master.

Thanks,

Matt


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120221/d2ce196b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120221/d2ce196b/attachment.htm</A>&gt;
</PRE>

































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018323.html">[rabbitmq-discuss] FIPS Compliance
</A></li>
	<LI>Next message: <A HREF="018329.html">[rabbitmq-discuss] Correct way of determining which node is	master?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18324">[ date ]</a>
              <a href="thread.html#18324">[ thread ]</a>
              <a href="subject.html#18324">[ subject ]</a>
              <a href="author.html#18324">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
