<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Persisting Messages on a Direct Exchange, Selectively Looking for Particular Messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Persisting%20Messages%20on%20a%20Direct%20Exchange%2C%0A%20Selectively%20Looking%20for%20Particular%20Messages&In-Reply-To=%3CC974010E949511448F6DC6F748F604D90FEB0A95%40TSEAMB01%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018192.html">
   <LINK REL="Next"  HREF="018201.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Persisting Messages on a Direct Exchange, Selectively Looking for Particular Messages</H1>
    <B>McMahon, James S (TASC)</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Persisting%20Messages%20on%20a%20Direct%20Exchange%2C%0A%20Selectively%20Looking%20for%20Particular%20Messages&In-Reply-To=%3CC974010E949511448F6DC6F748F604D90FEB0A95%40TSEAMB01%3E"
       TITLE="[rabbitmq-discuss] Persisting Messages on a Direct Exchange, Selectively Looking for Particular Messages">james.mcmahon at TASC.COM
       </A><BR>
    <I>Thu Feb 16 12:08:35 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018192.html">[rabbitmq-discuss] Persisting Messages on a Direct Exchange, Selectively Looking for Particular Messages
</A></li>
        <LI>Next message: <A HREF="018201.html">[rabbitmq-discuss] Persisting Messages on a Direct Exchange, Selectively Looking for Particular Messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18197">[ date ]</a>
              <a href="thread.html#18197">[ thread ]</a>
              <a href="subject.html#18197">[ subject ]</a>
              <a href="author.html#18197">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you for taking the time to reply, Emile. This is very helpful. I understand now that my exchange is exclusively for routing. Can I ask you a few follow up questions?

Is there an example you can direct me towards that shows the Java implementation to guarantee that messages are persisted by declaring queues as durable and setting the delivery-mode to 2?

So assuming that I use my direct exchange to route messages to appropriate queues, and my queues are declared as durable with delivery-mode 2, then multiple consumers will see those messages on that queue regardless of whether they were connected at the time the message was published to that queue through the direct exchange?

Thank you again for your help. If I can see an example I will be off to the races this evening, refining my initial code.

-Jim


________________________________________
From: Emile Joubert [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>]
Sent: Thursday, February 16, 2012 6:01 AM
To: McMahon, James S (TASC)
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Persisting Messages on a Direct Exchange, Selectively Looking for Particular Messages

Hi James,

On 16/02/12 00:45, McMahon, James S (TASC) wrote:
&gt;<i> How would one persist messages on the directed exchange? I want to do
</I>
You can guarantee that messages are persisted by declaring queues as
durable and setting the delivery-mode to 2. The exchange plays no part
in determining whether a message will be persisted.

&gt;<i> My messages are directed to exchanges by a qmsgTarget field. My messages
</I>&gt;<i> have a field in their structure called srcId. My messages also have a
</I>&gt;<i> field in their structure called seqNum. Thus a consumer may wish to say
</I>&gt;<i> &quot;Please get me message 3 from srcid 666 from the qmsgtarget Server
</I>&gt;<i> direct exchange&quot;. Another consumer may later issue the same request, so
</I>&gt;<i> this third message in the sequence for srcid 666 must remain on the
</I>&gt;<i> directed exchange.
</I>
Messages are stored in queues, and exchanges maintain no state. If you
need multiple consumers to receive the same message then you should
route the message to multiple queues (tutorial 3). If you need to route
messages based on headers then you will find the headers exchange useful:
<A HREF="http://www.rabbitmq.com/tutorials/amqp-concepts.html#exchange-headers">http://www.rabbitmq.com/tutorials/amqp-concepts.html#exchange-headers</A>

&gt;<i> I will be implementing a method deleteQmsg() that I intend to use to
</I>&gt;<i> delete messages selectively.
</I>
Queues are not well suited to selective manipulation of messages beyond
the head of the queue. If the problem cannot be expressed in terms of
messaging then a relational database is more suitable for your purposes
than a message broker.



-Emile
CONFIDENTIALITY NOTICE: This message and any attachments or files transmitted with it (collectively, the &quot;Message&quot;) are intended only for the addressee and may contain information that is privileged, proprietary and/or prohibited from disclosure by law or contract. If you are not the intended recipient: (a) please do not read, copy or retransmit the Message; (b) permanently delete and/or destroy all electronic and hard copies of the Message; (c) notify us by return email; and (d) you are hereby notified that any dissemination, distribution or copying of the Message is strictly prohibited.
</PRE>



















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018192.html">[rabbitmq-discuss] Persisting Messages on a Direct Exchange, Selectively Looking for Particular Messages
</A></li>
	<LI>Next message: <A HREF="018201.html">[rabbitmq-discuss] Persisting Messages on a Direct Exchange, Selectively Looking for Particular Messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18197">[ date ]</a>
              <a href="thread.html#18197">[ thread ]</a>
              <a href="subject.html#18197">[ subject ]</a>
              <a href="author.html#18197">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
