<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Pika - Catch amqp error - Cannot	redeclare	exchange with different type
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20-%20Catch%20amqp%20error%20-%20Cannot%0A%09redeclare%09exchange%20with%20different%20type&In-Reply-To=%3C8452277c-a6d0-4ed4-b90f-1eebb1ca4920%40strongmad.batnest.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017979.html">
   <LINK REL="Next"  HREF="017984.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Pika - Catch amqp error - Cannot	redeclare	exchange with different type</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20-%20Catch%20amqp%20error%20-%20Cannot%0A%09redeclare%09exchange%20with%20different%20type&In-Reply-To=%3C8452277c-a6d0-4ed4-b90f-1eebb1ca4920%40strongmad.batnest.org%3E"
       TITLE="[rabbitmq-discuss] Pika - Catch amqp error - Cannot	redeclare	exchange with different type">jerryk at vmware.com
       </A><BR>
    <I>Tue Feb  7 16:34:27 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017979.html">[rabbitmq-discuss] Pika - Catch amqp error - Cannot redeclare	exchange with different type
</A></li>
        <LI>Next message: <A HREF="017984.html">[rabbitmq-discuss] Mnesia connection error in a clustered node on a	multi NIC PC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17990">[ date ]</a>
              <a href="thread.html#17990">[ thread ]</a>
              <a href="subject.html#17990">[ subject ]</a>
              <a href="author.html#17990">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Raphael:

This is actually a behavior defined in the AMQP specification.
AMQP allows applications quite a free hand (within the bounds
of permissions) to declare elements of their messaging fabric
such as queues, exchanges and the bindings between them.

A common idiom in AMQP programs is to defensively declare a
resource you're about to use prior to its use.  If the resource
already exists, and its properties entirely agree with what
you're asking for, the operation succeeds idempotently and life
goes on.  If, however, there was already an entity with the
given name, but different properties, it's not safe to toss the
old one and create you a new one (who else might be using it?)
so you end up with 404/not-found.

If you really want a new entity with new properties, you'll have
to delete the old one and create anew...

Best regards,
Jerry

----- Original Message -----
From: &quot;Rapha&#235;l De GIUSTI&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">raphael.degiusti at guardis.com</A>&gt;
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Sent: Tuesday, February 7, 2012 5:42:37 AM
Subject: [rabbitmq-discuss] Pika - Catch amqp error - Cannot redeclare	exchange with different type


Hi,


I'm using Pika 0.9.5 with python 2.7 successfully, but I'm running into some issues when it comes to handle errors from the RabbitMQ broker.
I would like to deal programmatically with errors of this kind :



=ERROR REPORT==== 7-Feb-2012::14:13:40 ===
connection &lt;0.25027.3&gt;, channel 1 - error:
{amqp_error,precondition_failed,
&quot;cannot redeclare exchange 'status' in vhost '/' with different type, durable, internal or autodelete value&quot;,
'exchange.declare'}


This log is from the rabbitmq log.


I'm using the Pika SelectConnection, and my app is hanging somewhere after calling channel.exchange_declare and never gets into my callback.



def on_channel_open(channel):
channel.exchange_declare(
exchange=&quot;status&quot;,
callback=on_exchange_declared)


What would be the way, in this case (and more generally) to &quot;catch&quot; errors like this one in my code ?




Rapha&#235;l
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</PRE>






























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017979.html">[rabbitmq-discuss] Pika - Catch amqp error - Cannot redeclare	exchange with different type
</A></li>
	<LI>Next message: <A HREF="017984.html">[rabbitmq-discuss] Mnesia connection error in a clustered node on a	multi NIC PC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17990">[ date ]</a>
              <a href="thread.html#17990">[ thread ]</a>
              <a href="subject.html#17990">[ subject ]</a>
              <a href="author.html#17990">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
