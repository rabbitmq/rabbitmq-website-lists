<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Increasing base memory.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Increasing%20base%20memory.&In-Reply-To=5ef296b31003221204i586008aakbfb818fbbeb5acfc%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006700.html">
   <LINK REL="Next"  HREF="006689.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Increasing base memory.</H1>
    <B>majek04</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Increasing%20base%20memory.&In-Reply-To=5ef296b31003221204i586008aakbfb818fbbeb5acfc%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Increasing base memory.">majek04 at gmail.com
       </A><BR>
    <I>Fri Mar 26 12:07:36 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006700.html">[rabbitmq-discuss] Increasing base memory.
</A></li>
        <LI>Next message: <A HREF="006689.html">[rabbitmq-discuss] Adapter merges tornado and pika
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6725">[ date ]</a>
              <a href="thread.html#6725">[ thread ]</a>
              <a href="subject.html#6725">[ subject ]</a>
              <a href="author.html#6725">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Mar 22, 2010 at 19:04, Gustavo Aquino &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aquino.gustavo at gmail.com</A>&gt; wrote:
&gt;<i> Well, I think that I discovery a problem in documentation.
</I>&gt;<i> I do a config and now Rabbit are running with 8Gb under a ppc environment
</I>&gt;<i> with 12Gb. I just change the rabbitmq.config to
</I>&gt;<i> &#160;[{rabbit, [{vm_memory_high_watermark,&#160;1.8}]}]. If I change to 2.0 it get
</I>&gt;<i> 10Gb o.O... well I don't understand the pattern for it,
</I>
Gustavo,

&gt;<i> according to
</I>&gt;<i> documentation 0.8 equals 80% of memory... but 1.8 ??? and 2.0 ??? what is ?
</I>
0.8 equals 80% of _detected memory_. It looks like erlang on your machine
is confused and doesn't correctly recognize the amount of real memory.

Easy calculation shows that erlang believes that your machine has
about 4.4GB RAM:
8GB/1.8 = 4.4GB

Please feel free to twek the 'vm_memory_high_watermark' ratio until
the &quot;memory limit&quot; will be set to whatever you want.

Please do remember that you should keep &quot;Memory limit&quot; value reported
by RabbitMQ
to be around half of available RAM on your box (that's why the default is 0.4).

That way RabbitMQ will try to constatnly use around half of your memory,
but you'll still have another half for Erlang VM memory spikes during
garbage collection.

Hope that helps.

 Marek Majkowski


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006700.html">[rabbitmq-discuss] Increasing base memory.
</A></li>
	<LI>Next message: <A HREF="006689.html">[rabbitmq-discuss] Adapter merges tornado and pika
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6725">[ date ]</a>
              <a href="thread.html#6725">[ thread ]</a>
              <a href="subject.html#6725">[ subject ]</a>
              <a href="author.html#6725">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
