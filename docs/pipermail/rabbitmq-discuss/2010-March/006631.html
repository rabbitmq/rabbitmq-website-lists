<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Stop producer and queue continue growing...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Stop%20producer%20and%20queue%20continue%20growing...&In-Reply-To=5ef296b31003120417g4092b771p4b836f9b61f9a374%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006628.html">
   <LINK REL="Next"  HREF="006633.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Stop producer and queue continue growing...</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Stop%20producer%20and%20queue%20continue%20growing...&In-Reply-To=5ef296b31003120417g4092b771p4b836f9b61f9a374%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Stop producer and queue continue growing...">matthew at lshift.net
       </A><BR>
    <I>Fri Mar 12 12:30:18 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006628.html">[rabbitmq-discuss] Stop producer and queue continue growing...
</A></li>
        <LI>Next message: <A HREF="006633.html">[rabbitmq-discuss] Stop producer and queue continue growing...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6631">[ date ]</a>
              <a href="thread.html#6631">[ thread ]</a>
              <a href="subject.html#6631">[ subject ]</a>
              <a href="author.html#6631">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Mar 12, 2010 at 09:17:22AM -0300, Gustavo Aquino wrote:
&gt;<i> If I have one persistent queue binding this Exchange where messages was
</I>&gt;<i> posted and all of this messages are in buffer going to queue and server
</I>&gt;<i> crash so I will lose all this buffered messages right ?
</I>
Correct. Transactions exist for a reason. Publishing is an async
activity and you as the producer have (almost) no idea whether it's even
hit a queue, let alone whether it's gone to disk. Furthermore, even if
it's gone to disk, you have no idea if it's been flushed from the disk
caches and so can really survive a powerfailure to the server.

If you use transactions, however, then by the time you get back the
commit_ok messages, you are *guaranteed* that the persistent messages
have been written to disk and flushed. Correspondingly, performance is
crippled, though the transaction handling in the new persister branch
(bug21673) is much better (anywhere up to 2 orders of magnitude,
depending on disks and filesystem tuning) than in the released versions
of Rabbit.

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006628.html">[rabbitmq-discuss] Stop producer and queue continue growing...
</A></li>
	<LI>Next message: <A HREF="006633.html">[rabbitmq-discuss] Stop producer and queue continue growing...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6631">[ date ]</a>
              <a href="thread.html#6631">[ thread ]</a>
              <a href="subject.html#6631">[ subject ]</a>
              <a href="author.html#6631">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
