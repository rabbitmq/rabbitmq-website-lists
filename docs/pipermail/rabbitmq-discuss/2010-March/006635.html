<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Stop producer and queue continue growing...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Stop%20producer%20and%20queue%20continue%20growing...&In-Reply-To=5ef296b31003120636j5d5e9ce6kb43b580b998c03bc%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006633.html">
   <LINK REL="Next"  HREF="006638.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Stop producer and queue continue growing...</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Stop%20producer%20and%20queue%20continue%20growing...&In-Reply-To=5ef296b31003120636j5d5e9ce6kb43b580b998c03bc%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Stop producer and queue continue growing...">matthew at lshift.net
       </A><BR>
    <I>Fri Mar 12 14:58:26 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006633.html">[rabbitmq-discuss] Stop producer and queue continue growing...
</A></li>
        <LI>Next message: <A HREF="006638.html">[rabbitmq-discuss] Stop producer and queue continue growing...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6635">[ date ]</a>
              <a href="thread.html#6635">[ thread ]</a>
              <a href="subject.html#6635">[ subject ]</a>
              <a href="author.html#6635">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Mar 12, 2010 at 11:36:31AM -0300, Gustavo Aquino wrote:
&gt;<i> This is my biggest concern.
</I>
It's the nature of AMQP.

&gt;<i> Look about this scenario I have one Exchange and one persistent queue.I'm
</I>&gt;<i> posting transient messages to this Exchange (to get better performance) if
</I>&gt;<i> my Exchanges messages are in buffer and server crash I will be loose all
</I>&gt;<i> messages in buffer and it is a big problem.... I cannot lose any messages,
</I>
Not true. There is no messaging product available (nor will there ever
be) that can guarantee it can't lose messages. Do you have infinite disk
space? Is there no event that can cause power loss? Even in the event of
the sun exploding you want to ensure no message loss?

The fact is, message loss is unavoidable. You can take many steps to
avoid this, by using transactions and buffering messages in the client
so that if the connection to the broker dies you can reconnect and
republish, but at that point you risk duplicates, so you need
application logic on the consumer side to watch for duplicates and
remove them as necessary.

&gt;<i> this messages are business it represent money, so if I loose one we loose
</I>&gt;<i> money and It cannot happen, in other way I need to be the fastest we
</I>&gt;<i> need overrides in nanoseconds or 1 millisecond is the limit, so post
</I>&gt;<i> messages in persistent queue is out of the scope, or  have one way to be
</I>&gt;<i> fast with persistent ?
</I>
Right, so you can't afford the delay of writing to disk, and yet you
want to ensure messages can't be lost in the event of a crash, or
comet strike. You may wish then to explore multiple brokers, publish, in
transactions to duplicate resources (queues) on every broker, and then
simultaneously consume from all of them, deduplicating as you go. Thus
you don't need to write to disk, and by shear strength of numbers, you
should be able to survive crashes. However, really these various brokers
should be in different data centres, probably on different continents,
so the 1ms max delay may be challenging...

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006633.html">[rabbitmq-discuss] Stop producer and queue continue growing...
</A></li>
	<LI>Next message: <A HREF="006638.html">[rabbitmq-discuss] Stop producer and queue continue growing...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6635">[ date ]</a>
              <a href="thread.html#6635">[ thread ]</a>
              <a href="subject.html#6635">[ subject ]</a>
              <a href="author.html#6635">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
