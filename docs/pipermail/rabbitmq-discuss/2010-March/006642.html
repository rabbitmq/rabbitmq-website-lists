<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq_status_web crashed on daylight savings time switchover, took 	down RabbitMQ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq_status_web%20crashed%20on%20daylight%0A%20savings%20time%20switchover%2C%20took%20%09down%20RabbitMQ&In-Reply-To=ac6faba21003141945p1cd5effdu1755db8f10f9a827%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006641.html">
   <LINK REL="Next"  HREF="006643.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq_status_web crashed on daylight savings time switchover, took 	down RabbitMQ</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq_status_web%20crashed%20on%20daylight%0A%20savings%20time%20switchover%2C%20took%20%09down%20RabbitMQ&In-Reply-To=ac6faba21003141945p1cd5effdu1755db8f10f9a827%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] rabbitmq_status_web crashed on daylight savings time switchover, took 	down RabbitMQ">matthew at lshift.net
       </A><BR>
    <I>Mon Mar 15 16:29:30 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006641.html">[rabbitmq-discuss] rabbitmq_status_web crashed on daylight savings	time switchover, took 	down RabbitMQ
</A></li>
        <LI>Next message: <A HREF="006643.html">[rabbitmq-discuss] rabbitmq_status_web crashed on daylight	savings time switchover, took down RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6642">[ date ]</a>
              <a href="thread.html#6642">[ thread ]</a>
              <a href="subject.html#6642">[ subject ]</a>
              <a href="author.html#6642">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Greg,

On Sun, Mar 14, 2010 at 07:45:35PM -0700, Greg Campbell wrote:
&gt;<i> ** Generic server rabbit_status_web terminating
</I>&gt;<i> ** Last message in was get_context
</I>&gt;<i> ** When Server state == {state,1268531993140,&quot;Sun, 14 Mar 2010 09:59:53
</I>&gt;<i> GMT&quot;,
</I>&gt;<i> 
</I>&gt;<i> ... a bunch of queue status data...
</I>&gt;<i> 
</I>&gt;<i> ** Reason for termination ==
</I>&gt;<i> ** {{case_clause,[]},
</I>&gt;<i>     [{httpd_util,rfc1123_date,1},
</I>&gt;<i>      {rabbit_status_web,internal_update,1},
</I>&gt;<i>      {rabbit_status_web,handle_call,3},
</I>&gt;<i>      {gen_server,handle_msg,5},
</I>&gt;<i>      {proc_lib,init_p_do_apply,3}]}
</I>
This doesn't indicate that Rabbit itself crashed, only that the
rabbit_status_web process crashed. That process is under a supervisor
hierarchy and should have been automatically restarted.

I have reproduced this (in that I can get a very similar crash to happen,
though without messing with my clock), and whilst similar entries in the
logs appear, the rabbit_status_web process restarts correctly, and
Rabbit itself continues on, perfectly happily.

&gt;<i> The underlying issue in httpd_util:rfc1123_date appears to be an Erlang bug,
</I>&gt;<i> which I believe has been fixed in R13B04 (we're still running R13B03 on the
</I>&gt;<i> server, though):
</I>&gt;<i> <A HREF="http://www.erlang.org/cgi-bin/ezmlm-cgi?2:mss:1681:201001:jffdfifdokimdicjnpcp">http://www.erlang.org/cgi-bin/ezmlm-cgi?2:mss:1681:201001:jffdfifdokimdicjnpcp</A>
</I>&gt;<i> .
</I>
Interesting bug, and I'm glad it's now been fixed.

&gt;<i> However, it might be worth ensuring that a crash in a plugin doesn't cause
</I>&gt;<i> the entire system to shut down.
</I>
We don't think it did ;) Are there any more entries in the logs that you
have that indicate anything else went wrong? It's possible the same bug
affected more than just the plugin, but certainly the entry you showed
us just shows a process within the status plugin going down which should
have been immediately restarted.

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006641.html">[rabbitmq-discuss] rabbitmq_status_web crashed on daylight savings	time switchover, took 	down RabbitMQ
</A></li>
	<LI>Next message: <A HREF="006643.html">[rabbitmq-discuss] rabbitmq_status_web crashed on daylight	savings time switchover, took down RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6642">[ date ]</a>
              <a href="thread.html#6642">[ thread ]</a>
              <a href="subject.html#6642">[ subject ]</a>
              <a href="author.html#6642">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
