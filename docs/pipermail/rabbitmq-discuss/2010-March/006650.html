<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Ordering of messages from a fanout exchange
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Ordering%20of%20messages%20from%20a%20fanout%20exchange&In-Reply-To=20100316103630.GA27749%40mrnibble.lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006649.html">
   <LINK REL="Next"  HREF="006651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Ordering of messages from a fanout exchange</H1>
    <B>James Pettit</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Ordering%20of%20messages%20from%20a%20fanout%20exchange&In-Reply-To=20100316103630.GA27749%40mrnibble.lshift.net"
       TITLE="[rabbitmq-discuss] Ordering of messages from a fanout exchange">james.l.pettit at gmail.com
       </A><BR>
    <I>Tue Mar 16 16:46:22 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006649.html">[rabbitmq-discuss] Ordering of messages from a fanout exchange
</A></li>
        <LI>Next message: <A HREF="006651.html">[rabbitmq-discuss] Ordering of messages from a fanout exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6650">[ date ]</a>
              <a href="thread.html#6650">[ thread ]</a>
              <a href="subject.html#6650">[ subject ]</a>
              <a href="author.html#6650">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to get high availability with live failover. Both nodes would be
bound to the same fanout exchange, and keep synchronized by the fact that
message come to each in the same order. I do realize now why this is
impossible - the same virtual exchange might be multiple physical machines,
and if order were required, these would have to communicate to each other
before sending any message, a terrible toll for performance. I believe the
correct way to do this is to have one of my live nodes be the designated
master, and the master can send the ordering of events to all secondary
nodes (to maintain state in sync). The secondary nodes could then determine
when the master is down and one of them can take up the baton, as it were.
In this case, all that's required is the ordering on messages from the same
channel (the master). Anything wrong with this scenario?
- James

On Tue, Mar 16, 2010 at 3:36 AM, Matthew Sackman &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at lshift.net</A>&gt; wrote:

&gt;<i> Hi James,
</I>&gt;<i>
</I>&gt;<i> On Mon, Mar 15, 2010 at 06:55:13PM -0700, James Pettit wrote:
</I>&gt;<i> &gt; Is it possible to have a fanout exchange ensure that it routes messages
</I>&gt;<i> to
</I>&gt;<i> &gt; each queue bound to it in the same order? For example, if Message A and
</I>&gt;<i> &gt; Message B are sent to Queue 1 in the order A &lt; B, they will be sent to
</I>&gt;<i> Queue
</I>&gt;<i> &gt; 2 (and all others) in the order A &lt; B? I have a specific example where
</I>&gt;<i> two
</I>&gt;<i> &gt; consumers are getting the correct messages, but in a different order.
</I>&gt;<i>
</I>&gt;<i> If A and B come from the same channel then yes, their order will be
</I>&gt;<i> preserved. If they come from different channels then all bets are off,
</I>&gt;<i> and there is no knob to turn here - this is just the nature of AMQP I'm
</I>&gt;<i> afraid. If you can give us some more details about the type of problem
</I>&gt;<i> you're trying to solve we may be able to suggest some solutions.
</I>&gt;<i>
</I>&gt;<i> Matthew
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100316/b54a4dd6/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100316/b54a4dd6/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006649.html">[rabbitmq-discuss] Ordering of messages from a fanout exchange
</A></li>
	<LI>Next message: <A HREF="006651.html">[rabbitmq-discuss] Ordering of messages from a fanout exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6650">[ date ]</a>
              <a href="thread.html#6650">[ thread ]</a>
              <a href="subject.html#6650">[ subject ]</a>
              <a href="author.html#6650">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
