<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq_status_web crashed on daylight savings time switchover, took down RabbitMQ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq_status_web%20crashed%20on%20daylight%0A%20savings%20time%20switchover%2C%20took%20down%20RabbitMQ&In-Reply-To=ac6faba21003151210j38493965t7426145bbe8942ca%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006737.html">
   <LINK REL="Next"  HREF="006648.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq_status_web crashed on daylight savings time switchover, took down RabbitMQ</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq_status_web%20crashed%20on%20daylight%0A%20savings%20time%20switchover%2C%20took%20down%20RabbitMQ&In-Reply-To=ac6faba21003151210j38493965t7426145bbe8942ca%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] rabbitmq_status_web crashed on daylight savings time switchover, took down RabbitMQ">matthew at lshift.net
       </A><BR>
    <I>Mon Mar 15 22:23:45 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006737.html">[rabbitmq-discuss] rabbitmq-jsonrpc &quot;shortcut&quot; HTTP calls?
</A></li>
        <LI>Next message: <A HREF="006648.html">[rabbitmq-discuss] Ordering of messages from a fanout exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6647">[ date ]</a>
              <a href="thread.html#6647">[ thread ]</a>
              <a href="subject.html#6647">[ subject ]</a>
              <a href="author.html#6647">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Greg,

On Mon, Mar 15, 2010 at 12:10:08PM -0700, Greg Campbell wrote:
&gt;<i> Let me
</I>&gt;<i> know if you could use any other information.  As mentioned, this happened
</I>&gt;<i> across multiple machines (QA, staging, production) simultaneously, and in
</I>&gt;<i> all cases RabbitMQ shut down.  We're using version 1.7.2.
</I>
We did eventually trace this down. Rabbit would have done a controlled
shutdown so there was never any risk of persistent messages being lost.
It's difficult to see what should happen: the status plugin crashed, and
restarted and crashed again fast enough to convince Erlang that this
wasn't an error that could be recovered from. Erlang then shut down all
the other applications, which is what it's meant to do. We could change
this latter behaviour, but then again, that suggests that you could
classify some plugins as &quot;crucial&quot; (i.e. if they go down, you do want
everything else to go down too) and others as &quot;non-crucial&quot;. But as soon
as you make such a suggestion, you rather wonder a) why are you running
plugins that are &quot;non-crucial&quot; - if you don't need them, then don't run
them; and b) if you found that the status plugin had crashed and had
been shutdown, but the rest of rabbit had survived, what would you have
then done? Surely restarting Rabbit would have been your next step?

I think really what this is getting towards is that we need a way of
dynamically starting and stopping plugins in a running Rabbit instance.
This may not be possible with all plugins - some hook into the boot
sequence of Rabbit very early on and so couldn't be started up once
Rabbit is up and running, but others could potentially be started and
stopped and restarted dynamically.

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006737.html">[rabbitmq-discuss] rabbitmq-jsonrpc &quot;shortcut&quot; HTTP calls?
</A></li>
	<LI>Next message: <A HREF="006648.html">[rabbitmq-discuss] Ordering of messages from a fanout exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6647">[ date ]</a>
              <a href="thread.html#6647">[ thread ]</a>
              <a href="subject.html#6647">[ subject ]</a>
              <a href="author.html#6647">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
