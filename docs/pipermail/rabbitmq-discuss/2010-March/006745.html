<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] &quot;Returning&quot; values
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%22Returning%22%20values&In-Reply-To=ce2570e21003290806n34475bc5udf961e8b0217ebfe%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006743.html">
   <LINK REL="Next"  HREF="006746.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] &quot;Returning&quot; values</H1>
    <B>Andreas Jung</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%22Returning%22%20values&In-Reply-To=ce2570e21003290806n34475bc5udf961e8b0217ebfe%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] &quot;Returning&quot; values">lists at zopyx.com
       </A><BR>
    <I>Mon Mar 29 16:39:46 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006743.html">[rabbitmq-discuss] &quot;Returning&quot; values
</A></li>
        <LI>Next message: <A HREF="006746.html">[rabbitmq-discuss] &quot;Returning&quot; values
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6745">[ date ]</a>
              <a href="thread.html#6745">[ thread ]</a>
              <a href="subject.html#6745">[ subject ]</a>
              <a href="author.html#6745">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

First, I know about the explained concepts very well.

The main question is: assuming you have 10k visitors on a portal and
each visitor would need a queue...you might run out of resources (I was
able to create 16k queues at a time before I got errors). So this
approach does not scale very well. Of course you can create individual
queues for each client on request and as needed...no idea about the
overhead for creating and destroying queues...

Andreas

Garrett Smith wrote:
&gt;<i> On Sun, Mar 28, 2010 at 11:56 PM, Andreas Jung &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lists at zopyx.com</A>&gt; wrote:
</I>&gt;&gt;<i> Hi there,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am aware that a message queue does not support returning value. Is there a
</I>&gt;&gt;<i> pattern for the following usecase:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> User submits a data set through the browser to the backend application. The
</I>&gt;&gt;<i> backend puts the data into a queue in order to be processed by one of a
</I>&gt;&gt;<i> worker processes running on some other machine taking requests from the
</I>&gt;&gt;<i> queue.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The client application should be notified or take notice when the data has
</I>&gt;&gt;<i> been processed and get hold of some return value.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I was thinking for having some client specific 'return queue' where the
</I>&gt;&gt;<i> worker could insert the return value...however the number of queues is
</I>&gt;&gt;<i> limited ( by RAM?) and the number of possible clients may exceed the number
</I>&gt;&gt;<i> of maximum queues....so not a solution..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Is there a pattern for implementing this usecase with RabbitMQ?
</I>&gt;<i> 
</I>&gt;<i> As Alvaro stated, you setup a queue that's used to communicate results
</I>&gt;<i> from you backend to your front end.
</I>&gt;<i> 
</I>&gt;<i> This is a super common pattern, sometimes referred to as RPC.
</I>&gt;<i> Depending on the AMQP client's you're using, you should be able to
</I>&gt;<i> find some examples of RPC like communication over AMQP. Look around
</I>&gt;<i> for a tell tale &quot;reply-to&quot; queue property being set somewhere in code.
</I>&gt;<i> 
</I>&gt;<i> Short of a code example (definitely try to locate one - folks here can
</I>&gt;<i> help based on your language environment), it looks like this:
</I>&gt;<i> 
</I>&gt;<i> - Client wants to &quot;call&quot; a server and get a response, so sends a
</I>&gt;<i> message with the reply-to property set to a queue, generally one
</I>&gt;<i> declared specifically that call or for any response back to that
</I>&gt;<i> particular client
</I>&gt;<i> - Server (can be zero, one or more depending on the exchange and
</I>&gt;<i> routing rules) receives the message, does some work, notes the
</I>&gt;<i> reply-to queue and sends a response message via amq.direct to that
</I>&gt;<i> queue
</I>&gt;<i> - Client either polls or is otherwise notified that the a response
</I>&gt;<i> arrived in its reply-to queue
</I>&gt;<i> - Client needs to handle a &quot;no reply&quot; condition via a timeout
</I>&gt;<i> 
</I>&gt;<i> It's not uncommon for a client to block during the entire sequence,
</I>&gt;<i> which is probably what you want to do for a traditional web front end.
</I>&gt;<i> 
</I>&gt;<i> I find it helpful to think of AMQP (and any messaging scheme) as
</I>&gt;<i> essentially the same as email exchanges: You have a request, you send
</I>&gt;<i> an email message to one or more people who can help. Those people have
</I>&gt;<i> your reply-to address and will get back to you in due time, or not.
</I>&gt;<i> You impatiently check you in box for the results :)
</I>&gt;<i> 
</I>&gt;<i> It's definitely more work than a traditional RPC setup (SOAP, REST,
</I>&gt;<i> etc.) but it gives a ton more leverage over your architecture.
</I>&gt;<i> 
</I>&gt;<i> Garrett
</I>

- -- 
ZOPYX Limited              \ zopyx group
Charlottenstr. 37/1         \ The full-service network for your
D-72070 T&#252;bingen             \ Python, Zope and Plone projects
www.zopyx.com, <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">info at zopyx.com</A> \ www.zopyxgroup.com
- ------------------------------------------------------------------------
E-Publishing, Python, Zope &amp; Plone development, Consulting


-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (Darwin)
Comment: Using GnuPG with Mozilla - <A HREF="http://enigmail.mozdev.org/">http://enigmail.mozdev.org/</A>

iEYEARECAAYFAkuwycIACgkQCJIWIbr9KYwnOgCfXMPiVL6aXX06M1jWQVO96hbx
EUYAnjek2cPw5y9kIc/gOnVp8kqF4Tj6
=NAU8
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lists.vcf
Type: text/x-vcard
Size: 316 bytes
Desc: not available
Url : <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100329/754df2d8/attachment.vcf">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100329/754df2d8/attachment.vcf</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006743.html">[rabbitmq-discuss] &quot;Returning&quot; values
</A></li>
	<LI>Next message: <A HREF="006746.html">[rabbitmq-discuss] &quot;Returning&quot; values
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6745">[ date ]</a>
              <a href="thread.html#6745">[ thread ]</a>
              <a href="subject.html#6745">[ subject ]</a>
              <a href="author.html#6745">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
