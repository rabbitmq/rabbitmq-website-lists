<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Flag implemented in exchange.delete but not in	queue.delete?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Flag%20implemented%20in%20exchange.delete%20but%20not%0A%20in%09queue.delete%3F&In-Reply-To=1d492d71003060417v26dd3692k67c8fbd1b9016a2a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006566.html">
   <LINK REL="Next"  HREF="006568.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Flag implemented in exchange.delete but not in	queue.delete?</H1>
    <B>Martin Sustrik</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Flag%20implemented%20in%20exchange.delete%20but%20not%0A%20in%09queue.delete%3F&In-Reply-To=1d492d71003060417v26dd3692k67c8fbd1b9016a2a%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Flag implemented in exchange.delete but not in	queue.delete?">sustrik at 250bpm.com
       </A><BR>
    <I>Sat Mar  6 12:22:51 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006566.html">[rabbitmq-discuss] Flag implemented in exchange.delete but not in	queue.delete?
</A></li>
        <LI>Next message: <A HREF="006568.html">[rabbitmq-discuss] Flag implemented in exchange.delete but not	in queue.delete?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6567">[ date ]</a>
              <a href="thread.html#6567">[ thread ]</a>
              <a href="subject.html#6567">[ subject ]</a>
              <a href="author.html#6567">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Peter,

&gt;<i>   I have an interesting problem (I'm using version 1.7.0 of the broker): 
</I>&gt;<i> both the exchange.delete and queue.delete have a if_unused flag. The 
</I>&gt;<i> specs state, that if the if_unused flag is true, then an exchange will 
</I>&gt;<i> only be deleted if it does not have any bindings (basically I don't have 
</I>&gt;<i> to keep track of everything, but simply ask the server to only delete if 
</I>&gt;<i> nobody is using it any more). Now my problem is, that the queue.delete 
</I>&gt;<i> also has such a flag, but alas does nothing (and I also haven't found 
</I>&gt;<i> any infos about it). My reasoning would be that it should do exactly the 
</I>&gt;<i> same thing: if there are exchanges still bound to the queue, it 
</I>&gt;<i> shouldn't be deleted, nonetheless it deletes it. Any ideas why this 
</I>&gt;<i> strange behaviour?
</I>
Here's what AMQP documentation says:

       The server SHOULD allow for a reasonable delay between the point
       when it determines that a queue is not being used (or no longer
       used), and the point when it deletes the queue.  At the least it
       must allow a client to create a queue and then create a consumer
       to read from it, with a small but non-zero delay between these
       two actions.  The server should equally allow for clients that may
       be disconnected prematurely, and wish to re-consume from the same
       queue without losing messages.  We would recommend a configurable
       timeout, with a suitable default value being one minute.


Martin


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006566.html">[rabbitmq-discuss] Flag implemented in exchange.delete but not in	queue.delete?
</A></li>
	<LI>Next message: <A HREF="006568.html">[rabbitmq-discuss] Flag implemented in exchange.delete but not	in queue.delete?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6567">[ date ]</a>
              <a href="thread.html#6567">[ thread ]</a>
              <a href="subject.html#6567">[ subject ]</a>
              <a href="author.html#6567">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
