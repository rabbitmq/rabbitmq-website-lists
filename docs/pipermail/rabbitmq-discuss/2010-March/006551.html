<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Handling Channel.Flow method
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Handling%20Channel.Flow%20method&In-Reply-To=4B7B91E0.8000805%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006550.html">
   <LINK REL="Next"  HREF="006552.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Handling Channel.Flow method</H1>
    <B>Chris Duncan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Handling%20Channel.Flow%20method&In-Reply-To=4B7B91E0.8000805%40lshift.net"
       TITLE="[rabbitmq-discuss] Handling Channel.Flow method">celldee at gmail.com
       </A><BR>
    <I>Thu Mar  4 20:39:09 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006550.html">[rabbitmq-discuss] Draft of C++ rabbitMq API
</A></li>
        <LI>Next message: <A HREF="006552.html">[rabbitmq-discuss] Pluggable exchange types (bug 22169) landed on	default
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6551">[ date ]</a>
              <a href="thread.html#6551">[ thread ]</a>
              <a href="subject.html#6551">[ subject ]</a>
              <a href="author.html#6551">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Tony,

Thanks for the response. Sorry I've taken a while to reply.

On 17 Feb 2010, at 06:51, Tony Garnock-Jones wrote:

&gt;<i> Chris Duncan wrote:
</I>&gt;&gt;<i> Transactions may give me what I want but I don't think that I  
</I>&gt;&gt;<i> should be
</I>&gt;&gt;<i> enforcing the use of transactions in my client library just so  
</I>&gt;&gt;<i> that it
</I>&gt;&gt;<i> will handle Channel.Flow methods properly.
</I>&gt;<i>
</I>&gt;<i> The way channel.flow works, if I understand it correctly, is that the
</I>&gt;<i> server sends channel.flow, the client receives it, and eventually  
</I>&gt;<i> sends
</I>&gt;<i> a channel.flow-ok in response, which acts as a promise not to send any
</I>&gt;<i> more content until another channel.flow lets it continue. The key word
</I>&gt;<i> is &quot;eventually&quot;, meaning that the server has to give it a little  
</I>&gt;<i> slack,
</I>&gt;<i> and sometimes quite a lot of slack, heuristically.
</I>&gt;<i>
</I>&gt;<i> Clients must be permitted to continue sending content frames, and
</I>&gt;<i> servers should probably go to reasonable lengths to handle such  
</I>&gt;<i> content
</I>&gt;<i> frames, after the channel.flow is sent and before the channel.flow- 
</I>&gt;<i> ok is
</I>&gt;<i> received by the server, simply because of the separation between  
</I>&gt;<i> the two
</I>&gt;<i> parties.
</I>&gt;<i>
</I>&gt;<i> If you defer emitting your channel.flow-ok until all in-progress
</I>&gt;<i> channel.publish operations have cleared the line, then you should be
</I>&gt;<i> cool. There should be no need to interact with the transaction  
</I>&gt;<i> machinery
</I>&gt;<i> at all. Your client library API should reflect the fact that the  
</I>&gt;<i> client
</I>&gt;<i> has been asked and has promised to be silent, perhaps by indicating
</I>&gt;<i> failure somehow for *subsequent* publish operations after the
</I>&gt;<i> channel.flow is received.
</I>&gt;<i>
</I>&gt;<i> Um. I'm not sure that was the clearest explanation of what I mean :-)
</I>&gt;<i> I'm basically trying to get at the fact that you don't have to stop
</I>&gt;<i> sending content until you've sent the channel.flow-ok, and you can use
</I>&gt;<i> that to make a clean switch from XON to XOFF state, more or less. Does
</I>&gt;<i> that make sense?
</I>&gt;<i>
</I>&gt;<i> Tony
</I>&gt;<i>
</I>
It was a clear explanation and does make very good sense.

Regards,

Chris


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006550.html">[rabbitmq-discuss] Draft of C++ rabbitMq API
</A></li>
	<LI>Next message: <A HREF="006552.html">[rabbitmq-discuss] Pluggable exchange types (bug 22169) landed on	default
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6551">[ date ]</a>
              <a href="thread.html#6551">[ thread ]</a>
              <a href="subject.html#6551">[ subject ]</a>
              <a href="author.html#6551">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
