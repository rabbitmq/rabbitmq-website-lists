<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] &quot;Returning&quot; values
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%22Returning%22%20values&In-Reply-To=42d8a3d11003282156o45e14cf8l748c37531c988d30%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006740.html">
   <LINK REL="Next"  HREF="006745.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] &quot;Returning&quot; values</H1>
    <B>Garrett Smith</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%22Returning%22%20values&In-Reply-To=42d8a3d11003282156o45e14cf8l748c37531c988d30%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] &quot;Returning&quot; values">g at rre.tt
       </A><BR>
    <I>Mon Mar 29 16:06:10 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006740.html">[rabbitmq-discuss] &quot;Returning&quot; values
</A></li>
        <LI>Next message: <A HREF="006745.html">[rabbitmq-discuss] &quot;Returning&quot; values
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6743">[ date ]</a>
              <a href="thread.html#6743">[ thread ]</a>
              <a href="subject.html#6743">[ subject ]</a>
              <a href="author.html#6743">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Mar 28, 2010 at 11:56 PM, Andreas Jung &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lists at zopyx.com</A>&gt; wrote:
&gt;<i> Hi there,
</I>&gt;<i>
</I>&gt;<i> I am aware that a message queue does not support returning value. Is there a
</I>&gt;<i> pattern for the following usecase:
</I>&gt;<i>
</I>&gt;<i> User submits a data set through the browser to the backend application. The
</I>&gt;<i> backend puts the data into a queue in order to be processed by one of a
</I>&gt;<i> worker processes running on some other machine taking requests from the
</I>&gt;<i> queue.
</I>&gt;<i>
</I>&gt;<i> The client application should be notified or take notice when the data has
</I>&gt;<i> been processed and get hold of some return value.
</I>&gt;<i>
</I>&gt;<i> I was thinking for having some client specific 'return queue' where the
</I>&gt;<i> worker could insert the return value...however the number of queues is
</I>&gt;<i> limited ( by RAM?) and the number of possible clients may exceed the number
</I>&gt;<i> of maximum queues....so not a solution..
</I>&gt;<i>
</I>&gt;<i> Is there a pattern for implementing this usecase with RabbitMQ?
</I>
As Alvaro stated, you setup a queue that's used to communicate results
from you backend to your front end.

This is a super common pattern, sometimes referred to as RPC.
Depending on the AMQP client's you're using, you should be able to
find some examples of RPC like communication over AMQP. Look around
for a tell tale &quot;reply-to&quot; queue property being set somewhere in code.

Short of a code example (definitely try to locate one - folks here can
help based on your language environment), it looks like this:

- Client wants to &quot;call&quot; a server and get a response, so sends a
message with the reply-to property set to a queue, generally one
declared specifically that call or for any response back to that
particular client
- Server (can be zero, one or more depending on the exchange and
routing rules) receives the message, does some work, notes the
reply-to queue and sends a response message via amq.direct to that
queue
- Client either polls or is otherwise notified that the a response
arrived in its reply-to queue
- Client needs to handle a &quot;no reply&quot; condition via a timeout

It's not uncommon for a client to block during the entire sequence,
which is probably what you want to do for a traditional web front end.

I find it helpful to think of AMQP (and any messaging scheme) as
essentially the same as email exchanges: You have a request, you send
an email message to one or more people who can help. Those people have
your reply-to address and will get back to you in due time, or not.
You impatiently check you in box for the results :)

It's definitely more work than a traditional RPC setup (SOAP, REST,
etc.) but it gives a ton more leverage over your architecture.

Garrett


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006740.html">[rabbitmq-discuss] &quot;Returning&quot; values
</A></li>
	<LI>Next message: <A HREF="006745.html">[rabbitmq-discuss] &quot;Returning&quot; values
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6743">[ date ]</a>
              <a href="thread.html#6743">[ thread ]</a>
              <a href="subject.html#6743">[ subject ]</a>
              <a href="author.html#6743">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
