<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Flag implemented in exchange.delete but not	in queue.delete?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Flag%20implemented%20in%20exchange.delete%20but%20not%0A%09in%20queue.delete%3F&In-Reply-To=4B92491B.3070309%40250bpm.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006567.html">
   <LINK REL="Next"  HREF="006569.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Flag implemented in exchange.delete but not	in queue.delete?</H1>
    <B>P&#233;ter Szil&#225;gyi</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Flag%20implemented%20in%20exchange.delete%20but%20not%0A%09in%20queue.delete%3F&In-Reply-To=4B92491B.3070309%40250bpm.com"
       TITLE="[rabbitmq-discuss] Flag implemented in exchange.delete but not	in queue.delete?">peterke at gmail.com
       </A><BR>
    <I>Sat Mar  6 12:31:23 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006567.html">[rabbitmq-discuss] Flag implemented in exchange.delete but not in	queue.delete?
</A></li>
        <LI>Next message: <A HREF="006569.html">[rabbitmq-discuss] erlang client direct connection fails with	bug21673
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6568">[ date ]</a>
              <a href="thread.html#6568">[ thread ]</a>
              <a href="subject.html#6568">[ subject ]</a>
              <a href="author.html#6568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

  Hmm... ok, I've checked the AMQP specs and now I see, that the if-unused
flag for queues is different than the is-unused flag for exchanges. I
thought the two would be the same.

Thanks and have a great weekend,
   Peter

2010/3/6 Martin Sustrik &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sustrik at 250bpm.com</A>&gt;

&gt;<i> Peter,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   I have an interesting problem (I'm using version 1.7.0 of the broker):
</I>&gt;&gt;<i> both the exchange.delete and queue.delete have a if_unused flag. The specs
</I>&gt;&gt;<i> state, that if the if_unused flag is true, then an exchange will only be
</I>&gt;&gt;<i> deleted if it does not have any bindings (basically I don't have to keep
</I>&gt;&gt;<i> track of everything, but simply ask the server to only delete if nobody is
</I>&gt;&gt;<i> using it any more). Now my problem is, that the queue.delete also has such a
</I>&gt;&gt;<i> flag, but alas does nothing (and I also haven't found any infos about it).
</I>&gt;&gt;<i> My reasoning would be that it should do exactly the same thing: if there are
</I>&gt;&gt;<i> exchanges still bound to the queue, it shouldn't be deleted, nonetheless it
</I>&gt;&gt;<i> deletes it. Any ideas why this strange behaviour?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Here's what AMQP documentation says:
</I>&gt;<i>
</I>&gt;<i>      The server SHOULD allow for a reasonable delay between the point
</I>&gt;<i>      when it determines that a queue is not being used (or no longer
</I>&gt;<i>      used), and the point when it deletes the queue.  At the least it
</I>&gt;<i>      must allow a client to create a queue and then create a consumer
</I>&gt;<i>      to read from it, with a small but non-zero delay between these
</I>&gt;<i>      two actions.  The server should equally allow for clients that may
</I>&gt;<i>      be disconnected prematurely, and wish to re-consume from the same
</I>&gt;<i>      queue without losing messages.  We would recommend a configurable
</I>&gt;<i>      timeout, with a suitable default value being one minute.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Martin
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100306/743d27d4/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100306/743d27d4/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006567.html">[rabbitmq-discuss] Flag implemented in exchange.delete but not in	queue.delete?
</A></li>
	<LI>Next message: <A HREF="006569.html">[rabbitmq-discuss] erlang client direct connection fails with	bug21673
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6568">[ date ]</a>
              <a href="thread.html#6568">[ thread ]</a>
              <a href="subject.html#6568">[ subject ]</a>
              <a href="author.html#6568">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
