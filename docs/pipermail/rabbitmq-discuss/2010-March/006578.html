<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Crash reports for bug21673 branch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Crash%20reports%20for%20bug21673%20branch&In-Reply-To=401b577e1003030830m51aa1043mc00dab8fe4582e68%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006536.html">
   <LINK REL="Next"  HREF="006579.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Crash reports for bug21673 branch</H1>
    <B>scott w</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Crash%20reports%20for%20bug21673%20branch&In-Reply-To=401b577e1003030830m51aa1043mc00dab8fe4582e68%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Crash reports for bug21673 branch">scottblanc at gmail.com
       </A><BR>
    <I>Mon Mar  8 22:04:52 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006536.html">[rabbitmq-discuss] Crash reports for bug21673 branch
</A></li>
        <LI>Next message: <A HREF="006579.html">[rabbitmq-discuss] Crash reports for bug21673 branch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6578">[ date ]</a>
              <a href="thread.html#6578">[ thread ]</a>
              <a href="subject.html#6578">[ subject ]</a>
              <a href="author.html#6578">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matthias --

I upgraded my version of the branch as you suggested below below and
rebuilt. Upon startup of rabbitmq, I get the error below. Any ideas? I am
using the same config as before. The only that should be different is the
new code.

thanks,
Scott

Here is the error:

starting file handle cache server
...BOOT ERROR: FAILED
Reason: {{badmatch,
             {error,
                 {{'EXIT',
                      {undef,
                          [{rabbit_restartable_sup,start_link,
                               [file_handle_cache_sup,
                                {file_handle_cache,start_link,[]}]},
                           {supervisor,do_start_child,2},
                           {supervisor,handle_start_child,2},
                           {supervisor,handle_call,3},
                           {gen_server,handle_msg,5},
                           {proc_lib,init_p_do_apply,3}]}},
                  {child,undefined,file_handle_cache_sup,
                      {rabbit_restartable_sup,start_link,
                          [file_handle_cache_sup,
                           {file_handle_cache,start_link,[]}]},
                      transient,infinity,supervisor,
                      [rabbit_restartable_sup]}}}},
         [{rabbit_sup,start_restartable_child,2},
          {rabbit,'-run_boot_step/1-lc$^1/1-1-',1},
          {rabbit,run_boot_step,1},
          {rabbit,'-start/2-lc$^0/1-0-',1},
          {rabbit,start,2},
          {application_master,start_it_old,4}]}


On Wed, Mar 3, 2010 at 8:30 AM, scott w &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">scottblanc at gmail.com</A>&gt; wrote:

&gt;<i> Ah ok great to know. Thanks Matthias!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Mar 2, 2010 at 4:55 PM, Matthias Radestock &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Scott,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> scott w wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The whole file is hundreds of MB. I've attached a gzipped copy of the
</I>&gt;&gt;&gt;<i> first 10K lines of output from rabbit-sasl.log. The rabbit.log file doesn't
</I>&gt;&gt;&gt;<i> have anything interesting, just info level messages about connections being
</I>&gt;&gt;&gt;<i> established.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'm not forwarding to the main list since I don't want to send 66K of
</I>&gt;&gt;&gt;<i> data to everyone.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Also to answer Matthew's question about which version I am using, here is
</I>&gt;&gt;&gt;<i> what &quot;hg summary&quot; reports:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> parent: 2781:9e0c76ab1039 tip
</I>&gt;&gt;&gt;<i>  merge default &#8680; bug 21673
</I>&gt;&gt;&gt;<i> branch: bug21673
</I>&gt;&gt;&gt;<i> commit: 182 unknown (clean)
</I>&gt;&gt;&gt;<i> update: (current)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Any feedback would be helpful.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The first entry in the sasl log does indeed point to the problem:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> =CRASH REPORT==== 27-Feb-2010::22:18:11 ===
</I>&gt;&gt;<i>  crasher:
</I>&gt;&gt;<i>    initial call: gen:init_it/7
</I>&gt;&gt;<i>    pid: &lt;0.194.0&gt;
</I>&gt;&gt;<i>    registered_name: rabbit_msg_store_gc
</I>&gt;&gt;<i>    exception exit: {unhandled_info,
</I>&gt;&gt;<i>                        {file_handle_cache,maximum_eldest_since_use,
</I>&gt;&gt;<i>                            1586.6666666666667}}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      in function  gen_server2:terminate/6
</I>&gt;&gt;<i>    ancestors: [rabbit_msg_store,rabbit_sup,&lt;0.76.0&gt;]
</I>&gt;&gt;<i>    messages: []
</I>&gt;&gt;<i>    links: [&lt;0.193.0&gt;]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    dictionary: [{fhc_age_tree,{0,nil}}]
</I>&gt;&gt;<i>    trap_exit: false
</I>&gt;&gt;<i>    status: running
</I>&gt;&gt;<i>    heap_size: 10946
</I>&gt;&gt;<i>    stack_size: 24
</I>&gt;&gt;<i>    reductions: 42501230341
</I>&gt;&gt;<i>  neighbours:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The bug that causes this got fixed on 18-Feb, whereas the version you are
</I>&gt;&gt;<i> running is two days older. So updating your checkout to the latest version
</I>&gt;&gt;<i> will give you happier rabbit.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Matthias.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100308/5f5f61fd/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100308/5f5f61fd/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006536.html">[rabbitmq-discuss] Crash reports for bug21673 branch
</A></li>
	<LI>Next message: <A HREF="006579.html">[rabbitmq-discuss] Crash reports for bug21673 branch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6578">[ date ]</a>
              <a href="thread.html#6578">[ thread ]</a>
              <a href="subject.html#6578">[ subject ]</a>
              <a href="author.html#6578">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
