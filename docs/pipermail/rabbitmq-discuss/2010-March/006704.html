<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] sub-request a message using a message batch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20sub-request%20a%20message%20using%20a%20message%20batch&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006721.html">
   <LINK REL="Next"  HREF="006705.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] sub-request a message using a message batch</H1>
    <B>Jon Brisbin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20sub-request%20a%20message%20using%20a%20message%20batch&In-Reply-To="
       TITLE="[rabbitmq-discuss] sub-request a message using a message batch">jon.brisbin at npcinternational.com
       </A><BR>
    <I>Tue Mar 23 13:19:28 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006721.html">[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 34, Issue 41
</A></li>
        <LI>Next message: <A HREF="006705.html">[rabbitmq-discuss] Architecture Question for webservice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6704">[ date ]</a>
              <a href="thread.html#6704">[ thread ]</a>
              <a href="subject.html#6704">[ subject ]</a>
              <a href="author.html#6704">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a situation where remote sites need to send messages to a central set of load-balanced RabbitMQ servers. Due to low network bandwidth at the these sites, I have to zip up a series of requests into a zip file, which is the body of the message. When the batch listener gets a new batch message, it opens it up, then dumps each individual request back into the appropriate queue for that request. 

Now comes the part I'm having trouble with...

When I'm in my handleDelivery() method of my batch message listener, it seems I can't create a new, anonymous queue which I can listen to for the results of this &quot;sub-request&quot;, which I will grab, put into a new zip file, and send back to the requestor, along with the results from all their other requests.

I'm using Spring to create ConnectionFactorys, Connections, and Channels, but I'm wondering if there isn't some per-thread something going on that I receive errors to the effect that I can only do one thing at a time during a synchronous request.

Can someone point me to some guidance on how I can have a listener create a new queue which it listens to, so it can intercept the results of a sub-request and respond to the original requestor?

I hope what I'm trying to do here makes sense. I may not have explained it well...

Jon Brisbin
Portal Webmaster
NPC International, Inc.





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006721.html">[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 34, Issue 41
</A></li>
	<LI>Next message: <A HREF="006705.html">[rabbitmq-discuss] Architecture Question for webservice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6704">[ date ]</a>
              <a href="thread.html#6704">[ thread ]</a>
              <a href="subject.html#6704">[ subject ]</a>
              <a href="author.html#6704">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
