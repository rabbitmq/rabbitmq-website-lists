<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Python Client for RabbitMQ/AMQP?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Python%20Client%20for%20RabbitMQ/AMQP%3F&In-Reply-To=46CDCD4B.8050402%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000151.html">
   <LINK REL="Next"  HREF="000153.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Python Client for RabbitMQ/AMQP?</H1>
    <B>Jeff Rogers</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Python%20Client%20for%20RabbitMQ/AMQP%3F&In-Reply-To=46CDCD4B.8050402%40lshift.net"
       TITLE="[rabbitmq-discuss] Python Client for RabbitMQ/AMQP?">dvrsn at diphi.com
       </A><BR>
    <I>Thu Aug 23 19:57:20 BST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000151.html">[rabbitmq-discuss] Python Client for RabbitMQ/AMQP?
</A></li>
        <LI>Next message: <A HREF="000153.html">[rabbitmq-discuss] Python Client for RabbitMQ/AMQP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#152">[ date ]</a>
              <a href="thread.html#152">[ thread ]</a>
              <a href="subject.html#152">[ subject ]</a>
              <a href="author.html#152">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias Radestock wrote:
&gt;<i> Alexis Richardson wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> We want to fix this.  Do you have any other examples of mismatch
</I>&gt;&gt;<i> between OpenAMQ and RabbitMQ?
</I>&gt;<i> 
</I>&gt;<i> I thought OpenAMQ implements 0-9.
</I>&gt;<i>
</I>&gt;<i>  &gt;&gt; On the side of rabbitmq doing things wrong, the
</I>&gt;<i>  &gt;&gt; authentication is completely screwy - the server response says that
</I>&gt;<i>  &gt;&gt; it only supports PLAIN authentication but the server only implements
</I>&gt;<i>  &gt;&gt; AMQPLAIN.
</I>&gt;<i>  &gt;&gt; [...]
</I>&gt;<i>  &gt;&gt; particularly in the case of the authentication rabbitmq
</I>&gt;<i>  &gt;&gt; seems to be making specific allowances for qpid even tho it appears
</I>&gt;<i>  &gt;&gt; qpid is not following the spec exactly.
</I>&gt;<i> 
</I>&gt;<i> We have hacked the PLAIN authentication to match Qpids. Our AMQPLAIN 
</I>&gt;<i> authentication is what the spec defines as PLAIN authentication.
</I>&gt;<i> 
</I>&gt;<i> Is OpenAMQ doing PLAIN authentication in conformance with the spec?
</I>&gt;<i> 
</I>&gt;<i> If so, the only way I can think of addressing the discrepancy at our end 
</I>&gt;<i> is to check what client is trying to connect to the RabbitMQ server and 
</I>&gt;<i> make PLAIN auth behave accordingly. Same in our client code. That's 
</I>&gt;<i> rather gross and brittle though.
</I>
I think part of the problem is that the 0.8 spec is confusing on this 
point.  It says:
&quot;The contents of this data are defined by the SASL security 
mechanism.For the PLAIN security mechanism this is defined as a field 
table holding two fields,LOGIN and PASSWORD.&quot;

However, SASL also defines a mechanism called PLAIN in rfc4616 which is
    message   = [authzid] UTF8NUL authcid UTF8NUL passwd
This is what OpenAMQ implements as PLAIN and probably what qpid is doing 
also (I have a vague recollection that qpid incorrectly leaves off the 
initial null but that may be bad memory on my part).

So which PLAIN is PLAIN?  Considering that the security is specified in 
several places as using SASL mechanisms and that language about a 
LOGIN/PASSWORD field table has been dropped in the 0.9 spec, I think the 
SASL PLAIN mechanism is the right one to follow.

Confusion in the spec notwithstanding, my bigger gripe about how 
rabbitmq is handling it is that the AMQPLAIN method is not advertised at 
all in the connection.start call, so any use of it is going to be well, 
gross and brittle as you say.

ejabberd appears to have implementations of SASL-PLAIN and 
SASL-DIGEST-MD5 - I wonder if it would be worth adapting their code.

-J


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000151.html">[rabbitmq-discuss] Python Client for RabbitMQ/AMQP?
</A></li>
	<LI>Next message: <A HREF="000153.html">[rabbitmq-discuss] Python Client for RabbitMQ/AMQP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#152">[ date ]</a>
              <a href="thread.html#152">[ thread ]</a>
              <a href="subject.html#152">[ subject ]</a>
              <a href="author.html#152">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
