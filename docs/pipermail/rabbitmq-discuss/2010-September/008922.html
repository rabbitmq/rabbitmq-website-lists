<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ keeps crashing,	wrong rabbitmqctl nodedown
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20keeps%20crashing%2C%0A%09wrong%20rabbitmqctl%20nodedown&In-Reply-To=%3C1350837.77261284546841125.JavaMail.webmail%40ps15zhb.bluewin.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008921.html">
   <LINK REL="Next"  HREF="008923.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ keeps crashing,	wrong rabbitmqctl nodedown</H1>
    <B>josua.troesch at bluewin.ch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20keeps%20crashing%2C%0A%09wrong%20rabbitmqctl%20nodedown&In-Reply-To=%3C1350837.77261284546841125.JavaMail.webmail%40ps15zhb.bluewin.ch%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ keeps crashing,	wrong rabbitmqctl nodedown">josua.troesch at bluewin.ch
       </A><BR>
    <I>Wed Sep 15 11:34:01 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008921.html">[rabbitmq-discuss] new fork of php-amqplib on github
</A></li>
        <LI>Next message: <A HREF="008923.html">[rabbitmq-discuss] RabbitMQ keeps crashing,	wrong rabbitmqctl nodedown
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8922">[ date ]</a>
              <a href="thread.html#8922">[ thread ]</a>
              <a href="subject.html#8922">[ subject ]</a>
              <a href="author.html#8922">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Our RabbitMQ instance keeps crashing with an error like this:
eheap_alloc: Cannot allocate 373662860 bytes of 
memory (of type &quot;old_heap&quot;)

Its still a version 1.6.0 but because of some application constraints we can't update yet. 
Also, I can't check the status with rabbitmqctl as this always reports a {badrpc,nodedown}

The crash dump is too long 
to post here, starts like this:

=erl_crash_dump:0.1
Wed Sep 15 10:37:25 2010
Slogan: eheap_alloc: Cannot allocate 
373662860 bytes of memory (of type &quot;old_heap&quot;).
System version: Erlang R13B01 (erts-5.7.2) [smp:8:8] [rq:8] [async-
threads:30]
Compiled: Sun Jun  7 19:22:30 2009

rabbit-sasl.log reports this crash dump:

=CRASH REPORT==== 15-Sep-
2010::12:11:19 ===
  crasher:
    initial call: gen:init_it/6
    pid: &lt;0.1559.0&gt;
    registered_name: []
    exception 
exit: {writer,send_failed,badarg}
      in function  gen_server2:terminate/6
    ancestors: [&lt;0.1558.0&gt;]
    messages: 
[{'EXIT',&lt;0.1558.0&gt;,normal}]
    links: []
    dictionary: [{permission_cache,
                      [{{resource,&lt;&lt;&quot;
/prd&quot;&gt;&gt;,queue,
                            &lt;&lt;&quot;amq.gen-U0srCoW8TsaXjNh73pnVAw==&quot;&gt;&gt;},
                        read},

                       {{resource,&lt;&lt;&quot;/prd&quot;&gt;&gt;,exchange,
                            &lt;&lt;&quot;myapp&quot;&gt;&gt;},

                        read},
                       {{resource,&lt;&lt;&quot;/prd&quot;&gt;&gt;,queue,
                            &lt;&lt;&quot;amq.
gen-U0srCoW8TsaXjNh73pnVAw==&quot;&gt;&gt;},
                        write},
                       {{resource,&lt;&lt;&quot;/prd&quot;&gt;&gt;,
exchange,
                            &lt;&lt;&quot;myapp&quot;&gt;&gt;},
                        configure},
                       
{{resource,&lt;&lt;&quot;/prd&quot;&gt;&gt;,queue,
                            &lt;&lt;&quot;amq.gen-U0srCoW8TsaXjNh73pnVAw==&quot;&gt;&gt;},

                        configure}]},
                  {guid,{{177,&lt;0.1559.0&gt;},3}}]
    trap_exit: true
    status: 
running
    heap_size: 17711
    stack_size: 24
    reductions: 72448611
  neighbours:

Thanks for any hints!
</PRE>





































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008921.html">[rabbitmq-discuss] new fork of php-amqplib on github
</A></li>
	<LI>Next message: <A HREF="008923.html">[rabbitmq-discuss] RabbitMQ keeps crashing,	wrong rabbitmqctl nodedown
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8922">[ date ]</a>
              <a href="thread.html#8922">[ thread ]</a>
              <a href="subject.html#8922">[ subject ]</a>
              <a href="author.html#8922">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
