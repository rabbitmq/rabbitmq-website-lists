<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] HA and database schema changes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20HA%20and%20database%20schema%20changes&In-Reply-To=%3C4C90E6FE.1070502%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008917.html">
   <LINK REL="Next"  HREF="009025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] HA and database schema changes</H1>
    <B>Vlad Alexandru Ionescu</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20HA%20and%20database%20schema%20changes&In-Reply-To=%3C4C90E6FE.1070502%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] HA and database schema changes">vlad at rabbitmq.com
       </A><BR>
    <I>Wed Sep 15 16:32:14 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008917.html">[rabbitmq-discuss] HA and database schema changes
</A></li>
        <LI>Next message: <A HREF="009025.html">[rabbitmq-discuss] HA and database schema changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8948">[ date ]</a>
              <a href="thread.html#8948">[ thread ]</a>
              <a href="subject.html#8948">[ subject ]</a>
              <a href="author.html#8948">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Steve,

There is currently no easy way to migrate the database.

In general, it is advisable to use the same code which you first used to 
create the exchanges, queues etc. on the new version of Rabbit to 
reconstruct your setup.
In order to migrate messages, you would have to use the rabbitmq-shovel 
plugin, which would consume messages from the old broker and would 
publish them into the new one (you must come up with a sensible 
configuration, depending on you setup).

Hope that answers your question.

Rgds,
Vlad.



On 09/14/2010 09:28 PM, Steve Haneman wrote:
&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I was looking over the release notes for &quot;Release: RabbitMQ 2.0.0&quot; and 
</I>&gt;<i> saw the following:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-announce/attachments/20100825/2c672695/attachment.txt">http://lists.rabbitmq.com/pipermail/rabbitmq-announce/attachments/20100825/2c672695/attachment.txt</A>
</I>&gt;<i>
</I>&gt;<i> Upgrading
</I>&gt;<i> =========
</I>&gt;<i> The database schema and the format in which persistent messages are
</I>&gt;<i> stored have both changed since the last release (1.8.1). When
</I>&gt;<i> starting, the RabbitMQ server will detect the existence of an old
</I>&gt;<i> database and will move it to a backup location, before creating a
</I>&gt;<i> fresh, empty database, and will log a warning. If your RabbitMQ
</I>&gt;<i> installation contains important data then we recommend you contact
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">support at ...</A> for assistance with the upgrade.
</I>&gt;<i>
</I>&gt;<i> We are considering deploying a HA RabbitMQ cluster with Pacemaker and 
</I>&gt;<i> DRBD.  HA is very important for us.
</I>&gt;<i>
</I>&gt;<i> If there is a database schema change in the future, specifically what 
</I>&gt;<i> is the process for the upgrade and how does it affect HA during the 
</I>&gt;<i> upgrade?
</I>&gt;<i>
</I>&gt;<i> Also during the upgrade, how do we maintain durable exchanges and queues?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i>    Steve
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>    
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100915/0664b115/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100915/0664b115/attachment.htm</A>&gt;
</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008917.html">[rabbitmq-discuss] HA and database schema changes
</A></li>
	<LI>Next message: <A HREF="009025.html">[rabbitmq-discuss] HA and database schema changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8948">[ date ]</a>
              <a href="thread.html#8948">[ thread ]</a>
              <a href="subject.html#8948">[ subject ]</a>
              <a href="author.html#8948">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
