<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Delay delivering messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Delay%20delivering%20messages&In-Reply-To=%3C20100918223406.GD16939%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008978.html">
   <LINK REL="Next"  HREF="009018.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Delay delivering messages</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Delay%20delivering%20messages&In-Reply-To=%3C20100918223406.GD16939%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] Delay delivering messages">matthew at rabbitmq.com
       </A><BR>
    <I>Sat Sep 18 23:34:07 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008978.html">[rabbitmq-discuss] Delay delivering messages
</A></li>
        <LI>Next message: <A HREF="009018.html">[rabbitmq-discuss] Delay delivering messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8992">[ date ]</a>
              <a href="thread.html#8992">[ thread ]</a>
              <a href="subject.html#8992">[ subject ]</a>
              <a href="author.html#8992">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Sep 16, 2010 at 09:01:17AM +0100, Michael Burns wrote:
&gt;<i> I've noticed sometimes that there are extra connections hanging about on the
</I>&gt;<i> RabbitMQ broker (using rabbitmqctl  list_connections).
</I>&gt;<i> It's possible sometimes in our consumers that we are not always closing the
</I>&gt;<i> connection cleanly (sometimes people are simply killing their app rather
</I>&gt;<i> than shutting down cleanly).
</I>&gt;<i> 
</I>&gt;<i> Could this somehow explain why we experience these delays?
</I>
Yes. If the TCP socket is still alive then Rabbit will not believe the
connection has died, and so will not make unacknowledged messages
available to other consumers.

It would seem that this is your problem. To ensure that the connection
is promptly detected to be detached, you could either turn on AMQP
heartbeats or TCP KeepAlive. Either should suffice.

Matthew
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008978.html">[rabbitmq-discuss] Delay delivering messages
</A></li>
	<LI>Next message: <A HREF="009018.html">[rabbitmq-discuss] Delay delivering messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8992">[ date ]</a>
              <a href="thread.html#8992">[ thread ]</a>
              <a href="subject.html#8992">[ subject ]</a>
              <a href="author.html#8992">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
