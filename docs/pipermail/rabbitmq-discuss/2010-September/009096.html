<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Questions on RabbitMQ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Questions%20on%20RabbitMQ&In-Reply-To=%3CAANLkTikrFyz3FiBf9cqEhizWUehAOgjZtFd4H81KYUgB%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009093.html">
   <LINK REL="Next"  HREF="009098.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Questions on RabbitMQ</H1>
    <B>Ralf Kistner</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Questions%20on%20RabbitMQ&In-Reply-To=%3CAANLkTikrFyz3FiBf9cqEhizWUehAOgjZtFd4H81KYUgB%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Questions on RabbitMQ">ralf.kistner at gmail.com
       </A><BR>
    <I>Sat Sep 25 12:07:11 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009093.html">[rabbitmq-discuss] Atencion
</A></li>
        <LI>Next message: <A HREF="009098.html">[rabbitmq-discuss] Questions on RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9096">[ date ]</a>
              <a href="thread.html#9096">[ thread ]</a>
              <a href="subject.html#9096">[ subject ]</a>
              <a href="author.html#9096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm new to RabbitMQ (and AMQP), but I'm considering its use in an application.

I currently have a web application (Rails), and a mobile client (J2ME)
communicating with the web server via HTTP. The mobile client has to
operate in offline mode, so it keeps a persistent queue of messages to
be sent to the server. It periodically tries to send these messages to
the server, and keeps them if there is a network or server error.

I'd like to use RabbitMQ to improve the reliability, and to move to
socket connections instead of HTTP. I'd like to do the following:

1. Have the mobile client send messages to RabbitMQ using the STOMP plugin.
2. Have a Ruby script that consumes the messages on the server.
3. Keep a backup of all the messages sent to the server.

I have some questions about the above:

1 a. The client needs to be authenticated. I already have a simple
authentication system in the web application. Is it possible to use
this for authentication, or would I need to copy the authentication
data to RabbitMQ?

1 b. Is there a simple way to use SSL/TLS for the STOMP connection?

2 a. Are there any recommended practices for running a (Ruby) process
to consume messages in an infinite loop?

2 b. The Ruby script would occasionally be unable to process a
message. This could be because of a temporary lock on the database, an
invalid message from the mobile client, or a bug on the server. The
ideal would be for these messages to be retried a few times, then
moved to a different queue if it still fails. The messages in the
queue could then be inspected manually, and moved back to the original
queue when the bug was fixed.
How would this be accomplished? Does RabbitMQ have something like a
dead letter queue? Or would I have to move the message to a different
queue myself (in the Ruby script), in case of an error?
Note that I can't return any messages to the sender, I want to keep it
on the server in a different queue.

3. What is the best way to create a backup of all the message sent to
the server? Does RabbitMQ automatically do this, or should I write an
additional consumer to create a backup?


Regards,
Ralf Kistner
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009093.html">[rabbitmq-discuss] Atencion
</A></li>
	<LI>Next message: <A HREF="009098.html">[rabbitmq-discuss] Questions on RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9096">[ date ]</a>
              <a href="thread.html#9096">[ thread ]</a>
              <a href="subject.html#9096">[ subject ]</a>
              <a href="author.html#9096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
