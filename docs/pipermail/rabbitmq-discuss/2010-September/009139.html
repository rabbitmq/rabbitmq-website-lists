<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] suggestions for failover
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20suggestions%20for%20failover&In-Reply-To=%3Cyrv4cr5gej69d.fsf%40dwragg.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009137.html">
   <LINK REL="Next"  HREF="009169.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] suggestions for failover</H1>
    <B>David Wragg</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20suggestions%20for%20failover&In-Reply-To=%3Cyrv4cr5gej69d.fsf%40dwragg.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] suggestions for failover">david at rabbitmq.com
       </A><BR>
    <I>Tue Sep 28 15:24:14 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009137.html">[rabbitmq-discuss] suggestions for failover
</A></li>
        <LI>Next message: <A HREF="009169.html">[rabbitmq-discuss] suggestions for failover
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9139">[ date ]</a>
              <a href="thread.html#9139">[ thread ]</a>
              <a href="subject.html#9139">[ subject ]</a>
              <a href="author.html#9139">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Shane,

Shane &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">shane at digitalsanctum.com</A>&gt; writes:
&gt;<i> I'd like suggestions on automating failover of brokers and the
</I>&gt;<i> consumers that are connected to them. The failover doesn't have to be
</I>&gt;<i> active/active and may take up to a half hour. Ideally, I'd like to
</I>&gt;<i> have at least two brokers located on different hosts. The hosts will
</I>&gt;<i> have access to the same file system (NFS). The number of messages will
</I>&gt;<i> be relatively small (&lt;5K/day) and the number of queues no more than 10
</I>&gt;<i> so one broker running at a time should be sufficient.
</I>
Note that while RabbitMQ persistence is intended to work on top of NFS,
we haven't done performance testing of that configuration.  With the
message rates you mention, it seems unlikely that you'll run into
problems in that regards, but it's something to be aware of.

&gt;<i> I've looked at the clustering guide and it's purpose seems to be for
</I>&gt;<i> scaling but not failover.
</I>
That's correct.  What we have traditionally termed clustering is
intended for scaling, not availability.

&gt;<i> I've also looked at the Pacemaker guide but it seems to be an involved
</I>&gt;<i> and more complicated setup than what I need.
</I>&gt;<i>
</I>&gt;<i> What steps are others doing for failover? What are my options beyond
</I>&gt;<i> the Pacemaker guide?
</I>
The pacemaker guide is intended to be illustrative, as well as giving a
concrete guide on one way to implement failover with RabbitMQ.  There
are alternative technologies, both open source and proprietary, that can
be used instead of pacemaker, drbd, etc.  We'd welcome reports from
users that have implemented failover using other products.

If you have configured rabbit to store its data on NFS, then you won't
need the drbd component.  And if you already have appropriate monitoring
and alerting arrangements in place, then you might well be able to
achieve a 30 minute failover time without using pacemaker or some other
cluster resource manager.  Even a manual failover process might be
acceptable in such a context.

David

-- 
David Wragg
Staff Engineer, RabbitMQ
SpringSource, a division of VMware
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009137.html">[rabbitmq-discuss] suggestions for failover
</A></li>
	<LI>Next message: <A HREF="009169.html">[rabbitmq-discuss] suggestions for failover
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9139">[ date ]</a>
              <a href="thread.html#9139">[ thread ]</a>
              <a href="subject.html#9139">[ subject ]</a>
              <a href="author.html#9139">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
