<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Active/active HA setup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Active/active%20HA%20setup&In-Reply-To=%3CAANLkTinLaUb3MiE1M4OMcfd12K-CunBiaq_n2DnCRMS4%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008764.html">
   <LINK REL="Next"  HREF="008767.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Active/active HA setup</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Active/active%20HA%20setup&In-Reply-To=%3CAANLkTinLaUb3MiE1M4OMcfd12K-CunBiaq_n2DnCRMS4%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Active/active HA setup">alexis at rabbitmq.com
       </A><BR>
    <I>Thu Sep  2 18:44:21 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008764.html">[rabbitmq-discuss] Active/active HA setup
</A></li>
        <LI>Next message: <A HREF="008767.html">[rabbitmq-discuss] Active/active HA setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8765">[ date ]</a>
              <a href="thread.html#8765">[ thread ]</a>
              <a href="subject.html#8765">[ subject ]</a>
              <a href="author.html#8765">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jiri

That answered my questions.  Now, as I understood your example:

a. you don't mind messages being lost
*and*
b. you don't use the secondary until after the primary has failed.

Note that if consumption is completely 'fire and forget' then it is possible
that a message from the primary may *arrive* after a message from the
secondary.  But this can happen whether you use sequence numbers or not.

So if the primary broker fails, why not just forget all undelivered
messages?  Consumers will know that any message consumed from the secondary
must be later in *all* orderings than any message consumed from the primary.
 So, additional sequence numbering is not necessary.

alexis





On Thu, Sep 2, 2010 at 6:12 PM, Jiri Krutil &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jiri at krutil.com</A>&gt; wrote:

&gt;<i> Alex,
</I>&gt;<i>
</I>&gt;<i> Not sure if I got your questons, but will try to answer...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 2 Sep 2010, at 18:02, Alexis Richardson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis at rabbitmq.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>  1. How will out-of-order behaviour be observed in your use case?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Our client-server contract promises that requests from a given client will
</I>&gt;<i> always be processed in the order in which they were delivered to the broker.
</I>&gt;<i> The same applies for the server responses. This is strictly required for our
</I>&gt;<i> business. It is acceptable though that requests from different clients
</I>&gt;<i> connected to different brokers are delivered in a different order.
</I>&gt;<i>
</I>&gt;<i> Our server could detect out-of-order requests using a request sequence
</I>&gt;<i> number and throw them away. This would however require cooperation from the
</I>&gt;<i> clients (always fill in the seq no).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  2. Do you plan to use shared queues, or will each queue have just one
</I>&gt;&gt;<i> consumer client so that all pubsub happens using the exchange?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Clients receive broadcasts by declaring an exclusive queue and binding a
</I>&gt;<i> well-known topic exchange to it.
</I>&gt;<i>
</I>&gt;<i> Requests are processed by one (singleton) service, possibly consuming from
</I>&gt;<i> two brokers, one request queue per broker.
</I>&gt;<i>
</I>&gt;<i> Nothing at all is shared among the brokers.
</I>&gt;<i>
</I>&gt;<i> Regards
</I>&gt;<i> Jiri
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100902/8cdd3b8b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100902/8cdd3b8b/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008764.html">[rabbitmq-discuss] Active/active HA setup
</A></li>
	<LI>Next message: <A HREF="008767.html">[rabbitmq-discuss] Active/active HA setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8765">[ date ]</a>
              <a href="thread.html#8765">[ thread ]</a>
              <a href="subject.html#8765">[ subject ]</a>
              <a href="author.html#8765">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
