<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Active/active HA setup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Active/active%20HA%20setup&In-Reply-To=%3C20100902170920.19781kbuh1o0cd9c%40webmail.active24.cz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008828.html">
   <LINK REL="Next"  HREF="008763.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Active/active HA setup</H1>
    <B>jiri at krutil.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Active/active%20HA%20setup&In-Reply-To=%3C20100902170920.19781kbuh1o0cd9c%40webmail.active24.cz%3E"
       TITLE="[rabbitmq-discuss] Active/active HA setup">jiri at krutil.com
       </A><BR>
    <I>Thu Sep  2 16:09:20 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008828.html">[rabbitmq-discuss] gen_server2 ques. and was: Re: clarifying plugin supervision, configuration
</A></li>
        <LI>Next message: <A HREF="008763.html">[rabbitmq-discuss] Active/active HA setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8761">[ date ]</a>
              <a href="thread.html#8761">[ thread ]</a>
              <a href="subject.html#8761">[ subject ]</a>
              <a href="author.html#8761">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello together

We are considering an active-active high availability broker setup and  
I wanted to check if there is someone here who could help with  
experience/advice.

We plan to run two RabbitMQ brokers with the same setup (same queues,  
exchanges, bindings), which are independent and not aware of each  
other. These would be behind a load balancer, so this should be  
transparent to client applications.

We use AMQP for two things:
- pub/sub broadcasts from back-end to clients (all clients bind to the  
same topic exchange)
- P2P request-response, where back-end responds to client requests  
(all clients send to the same request queue)

We have only one back-end server that serves the clients. Of course  
the back-end would have to publish broadcasts to and consume requests  
from both brokers.

When one broker dies, the clients will re-connect via load balancer to  
the other broker and continue. Of course any messages on the dead  
broker will be lost. We don't use persistent messages and can live  
with messages being lost.

So far I have only identified one problem - the order of message  
delivery across brokers. Since the design of our client-server  
interface relies on the guaranteed order of message delivery, we would  
probably have to force clients to put request sequence numbers to  
message headers, remember the last seen request number on the back-end  
for each client, and throw away any requests out of order.

Any ideas or hints will be much appreciated.

Cheers

Jiri
Deutsche Boerse Systems AG

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008828.html">[rabbitmq-discuss] gen_server2 ques. and was: Re: clarifying plugin supervision, configuration
</A></li>
	<LI>Next message: <A HREF="008763.html">[rabbitmq-discuss] Active/active HA setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8761">[ date ]</a>
              <a href="thread.html#8761">[ thread ]</a>
              <a href="subject.html#8761">[ subject ]</a>
              <a href="author.html#8761">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
