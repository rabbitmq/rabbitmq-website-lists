<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Java Client Heartbeat
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Java%20Client%20Heartbeat&In-Reply-To=%3Cdb219b5a-71f0-4051-bb1d-38453b92577a%40j18g2000yqd.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009166.html">
   <LINK REL="Next"  HREF="009149.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Java Client Heartbeat</H1>
    <B>Danielius Jurna</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Java%20Client%20Heartbeat&In-Reply-To=%3Cdb219b5a-71f0-4051-bb1d-38453b92577a%40j18g2000yqd.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Java Client Heartbeat">danielius.jurna at gmail.com
       </A><BR>
    <I>Wed Sep 29 07:03:42 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009166.html">[rabbitmq-discuss] question on message delivery
</A></li>
        <LI>Next message: <A HREF="009149.html">[rabbitmq-discuss] RabbitMQ Java Client Example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9148">[ date ]</a>
              <a href="thread.html#9148">[ thread ]</a>
              <a href="subject.html#9148">[ subject ]</a>
              <a href="author.html#9148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.
I'm testing the robustness of rabbitmq server/java client on
unreliable network.
It seems that there is a flaw in heartbeat implementatin in java
client.
Here is the scenario.
1. Message producer tries to publish message to server. During this
connection is lost in the network. Client blocks on socket write.
(SocketFrameHandler.writeFrame)
2. Heartbeat implementation tries to send heartbeat message to server.
It also blocks in SocketFrameHandler.writeFrame on synchronized
statement.
3. The whole client blocks until tcp timeouts. This takes ages.

I cannot see how current implementation can work correctly until you
have separate heartbeat thread.
Is there a plan to improve java client robustness on unreliabile
networks?
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009166.html">[rabbitmq-discuss] question on message delivery
</A></li>
	<LI>Next message: <A HREF="009149.html">[rabbitmq-discuss] RabbitMQ Java Client Example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9148">[ date ]</a>
              <a href="thread.html#9148">[ thread ]</a>
              <a href="subject.html#9148">[ subject ]</a>
              <a href="author.html#9148">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
