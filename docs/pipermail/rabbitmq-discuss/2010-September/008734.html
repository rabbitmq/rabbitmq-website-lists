<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] erlang client blowing chunks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20erlang%20client%20blowing%20chunks&In-Reply-To=%3C4C7E68CF.6020105%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008732.html">
   <LINK REL="Next"  HREF="008735.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] erlang client blowing chunks</H1>
    <B>Vlad Alexandru Ionescu</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20erlang%20client%20blowing%20chunks&In-Reply-To=%3C4C7E68CF.6020105%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] erlang client blowing chunks">vlad at rabbitmq.com
       </A><BR>
    <I>Wed Sep  1 15:53:03 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008732.html">[rabbitmq-discuss] erlang client blowing chunks
</A></li>
        <LI>Next message: <A HREF="008735.html">[rabbitmq-discuss] erlang client blowing chunks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8734">[ date ]</a>
              <a href="thread.html#8734">[ thread ]</a>
              <a href="subject.html#8734">[ subject ]</a>
              <a href="author.html#8734">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Jon,


It seems you found a bug. Thank you for that.

Still, you are not using version 2.0.0, since this bug does not 
reproduce in 2.0.0.
Can you try the series of commands:

$ hg clone -u rabbitmq_v2_0_0 <A HREF="http://hg.rabbitmq.com/rabbitmq-server">http://hg.rabbitmq.com/rabbitmq-server</A>
$ hg clone -u rabbitmq_v2_0_0 <A HREF="http://hg.rabbitmq.com/rabbitmq-codegen">http://hg.rabbitmq.com/rabbitmq-codegen</A>
$ hg clone -u rabbitmq_v2_0_0 <A HREF="http://hg.rabbitmq.com/rabbitmq-erlang-client">http://hg.rabbitmq.com/rabbitmq-erlang-client</A>
$ cd rabbitmq-erlang-client
$ make test_network

After these, you should get a &quot;dist&quot; folder in the rabbitmq-erlang-client which contains the two .ez files. By looking inside these, you could deduce what source files you would need (from the generated .beam file names). If you then grab the source files from rabbitmq-server/src and rabbitmq-erlang-client/src (*after* having done the build) plus the includes, you should be fine.


Rgds,
Vlad.



On 09/01/2010 03:23 PM, Jon Brisbin wrote:
&gt;<i> Doing make test_network in the public-umbrella which I checked and using fresh checkouts out gives this error on Mac OS X 10.6.4 with macports Erlang installed (Erlang R14A (erts-5.8) [source] [64-bit] [smp:2:2] [rq:2] [async-threads:0] [hipe] [kernel-poll:false]):
</I>&gt;<i>
</I>&gt;<i> +-( ~/src/rabbitmq-2.0/rabbitmq-erlang-client ):&gt;  make test_network
</I>&gt;<i> uname: illegal option -- o
</I>&gt;<i> usage: uname [-amnprsv]
</I>&gt;<i> make -C test
</I>&gt;<i> ERL_LIBS=../deps erlc -I ../include -o ./ -Wall -v +debug_info amqp_dbg.erl
</I>&gt;<i> ERL_LIBS=../deps erlc -I ../include -o ./ -Wall -v +debug_info direct_client_SUITE.erl
</I>&gt;<i> ERL_LIBS=../deps erlc -I ../include -o ./ -Wall -v +debug_info negative_test_util.erl
</I>&gt;<i> ERL_LIBS=../deps erlc -I ../include -o ./ -Wall -v +debug_info network_client_SUITE.erl
</I>&gt;<i> ERL_LIBS=../deps erlc -I ../include -o ./ -Wall -v +debug_info ssl_client_SUITE.erl
</I>&gt;<i> ERL_LIBS=../deps erlc -I ../include -o ./ -Wall -v +debug_info test_util.erl
</I>&gt;<i> make run_test_broker RUN_TEST_BROKER_ARGS=&quot;-s network_client_SUITE test&quot;
</I>&gt;<i> uname: illegal option -- o
</I>&gt;<i> usage: uname [-amnprsv]
</I>&gt;<i> make -C ../rabbitmq-server start-background-node
</I>&gt;<i> RABBITMQ_NODE_IP_ADDRESS=&quot;&quot; RABBITMQ_NODE_PORT=&quot;&quot; RABBITMQ_LOG_BASE=&quot;/var/folders/+E/+EAa1V61EkOEVs83Nv6vbU+++TI/-Tmp-/&quot; RABBITMQ_MNESIA_DIR=&quot;/var/folders/+E/+EAa1V61EkOEVs83Nv6vbU+++TI/-Tmp-//rabbitmq-rabbit-mnesia&quot; \
</I>&gt;<i> 		RABBITMQ_NODE_ONLY=true \
</I>&gt;<i> 		RABBITMQ_SERVER_START_ARGS=&quot; -detached&quot; \
</I>&gt;<i> 		./scripts/rabbitmq-server ; sleep 1
</I>&gt;<i> make -C ../rabbitmq-server start-rabbit-on-node
</I>&gt;<i> echo &quot;rabbit:start().&quot; | erl_call -sname rabbit -e
</I>&gt;<i> /bin/sh: erl_call: command not found
</I>&gt;<i> make[2]: *** [start-rabbit-on-node] Error 127
</I>&gt;<i> make[1]: *** [boot_broker] Error 2
</I>&gt;<i> make: *** [test_network] Error 2
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Jon Brisbin
</I>&gt;<i> Portal Webmaster
</I>&gt;<i> NPC International, Inc.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Sep 1, 2010, at 9:14 AM, Vlad Alexandru Ionescu wrote:
</I>&gt;<i>
</I>&gt;<i>    
</I>&gt;&gt;<i> Hi Jon,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Doing
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> $ hg clone -u rabbitmq_v2_0_0 <A HREF="http://hg.rabbitmq.com/rabbitmq-server">http://hg.rabbitmq.com/rabbitmq-server</A>
</I>&gt;&gt;<i> $ hg clone -u rabbitmq_v2_0_0 <A HREF="http://hg.rabbitmq.com/rabbitmq-codegen">http://hg.rabbitmq.com/rabbitmq-codegen</A>
</I>&gt;&gt;<i> $ hg clone -u rabbitmq_v2_0_0 <A HREF="http://hg.rabbitmq.com/rabbitmq-erlang-client">http://hg.rabbitmq.com/rabbitmq-erlang-client</A>
</I>&gt;&gt;<i> $ cd rabbitmq-erlang-client
</I>&gt;&gt;<i> $ make test_network
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> works for me: &quot;All 29 tests passed.&quot; Does it work for you?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Rgds,
</I>&gt;&gt;<i> Vlad.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      
</I>&gt;<i>    
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008732.html">[rabbitmq-discuss] erlang client blowing chunks
</A></li>
	<LI>Next message: <A HREF="008735.html">[rabbitmq-discuss] erlang client blowing chunks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8734">[ date ]</a>
              <a href="thread.html#8734">[ thread ]</a>
              <a href="subject.html#8734">[ subject ]</a>
              <a href="author.html#8734">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
