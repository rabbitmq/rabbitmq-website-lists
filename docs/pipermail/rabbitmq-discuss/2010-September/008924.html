<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Shutdown Listener on Java Client API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shutdown%20Listener%20on%20Java%20Client%20API&In-Reply-To=%3C4C90B33F.6090002%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008895.html">
   <LINK REL="Next"  HREF="009145.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Shutdown Listener on Java Client API</H1>
    <B>Vlad Alexandru Ionescu</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shutdown%20Listener%20on%20Java%20Client%20API&In-Reply-To=%3C4C90B33F.6090002%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Shutdown Listener on Java Client API">vlad at rabbitmq.com
       </A><BR>
    <I>Wed Sep 15 12:51:27 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008895.html">[rabbitmq-discuss] Shutdown Listener on Java Client API
</A></li>
        <LI>Next message: <A HREF="009145.html">[rabbitmq-discuss] Shutdown Listener on Java Client API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8924">[ date ]</a>
              <a href="thread.html#8924">[ thread ]</a>
              <a href="subject.html#8924">[ subject ]</a>
              <a href="author.html#8924">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Dave,

AFAIK, the event should fire regardless of the shutdown reason (be it 
connection loss, server initiated connection close, sudden socket 
closed, heartbeat timeout etc.). It appears to me that you are using it 
correctly.

Depending on the type of load balancer you are using, perhaps the 
clients never got disconnected? It is also possible that there is a bug 
in the client code.

Rgds,
Vlad.


On 09/13/2010 04:12 PM, Dave Greggory wrote:
&gt;<i> We register a shutdown listener to listen for connection-loss events and
</I>&gt;<i> automatically re-connect clients to other RabbitMQ nodes in the cluster. This
</I>&gt;<i> weekend we had to restart the load balancer that sits between rabbitmq and it's
</I>&gt;<i> clients for some maintenance, but the ShutdownCompleted/ShutdownSignalException
</I>&gt;<i> event never fired in the clients.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm trying to understand how the shutdown signal works. Does it only fire the
</I>&gt;<i> ShutDownCompleted event if RabbitMQ node shuts down and sends the signal back to
</I>&gt;<i> clients? If that's the case, I'm probably misusing it to detect connection-loss.
</I>&gt;<i> Is there a different way of detecting connection loss?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Dave
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>    
</I></PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008895.html">[rabbitmq-discuss] Shutdown Listener on Java Client API
</A></li>
	<LI>Next message: <A HREF="009145.html">[rabbitmq-discuss] Shutdown Listener on Java Client API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8924">[ date ]</a>
              <a href="thread.html#8924">[ thread ]</a>
              <a href="subject.html#8924">[ subject ]</a>
              <a href="author.html#8924">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
