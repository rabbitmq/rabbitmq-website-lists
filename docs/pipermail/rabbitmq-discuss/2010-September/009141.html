<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Erlang has closed?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Erlang%20has%20closed%3F&In-Reply-To=%3C68EE72DD-80B4-4614-8A12-8378608BFEF9%40vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009140.html">
   <LINK REL="Next"  HREF="009142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Erlang has closed?</H1>
    <B>Greg Turnquist</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Erlang%20has%20closed%3F&In-Reply-To=%3C68EE72DD-80B4-4614-8A12-8378608BFEF9%40vmware.com%3E"
       TITLE="[rabbitmq-discuss] Erlang has closed?">gturnquist at vmware.com
       </A><BR>
    <I>Tue Sep 28 17:00:21 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009140.html">[rabbitmq-discuss] Erlang has closed?
</A></li>
        <LI>Next message: <A HREF="009142.html">[rabbitmq-discuss] Erlang has closed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9141">[ date ]</a>
              <a href="thread.html#9141">[ thread ]</a>
              <a href="subject.html#9141">[ subject ]</a>
              <a href="author.html#9141">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>There is a third option to check out: pika (<A HREF="http://github.com/tonyg/pika">http://github.com/tonyg/pika</A>)

For a couple blog articles showing it's usage, checkout:
* <A HREF="http://blog.springsource.com/2010/08/19/building-rabbitmq-apps-using-python/">http://blog.springsource.com/2010/08/19/building-rabbitmq-apps-using-python/</A> - comparison of using pika vs. py-amqplib
* <A HREF="http://blog.springsource.com/2010/09/20/mixing-rabbitmq-with-spring-python/">http://blog.springsource.com/2010/09/20/mixing-rabbitmq-with-spring-python/</A> - showing how pika-based apps can be mixed in with Spring Python, an IoC container for python

I haven't used pika in this type of environment, so I can't tell you if it suffers the same problems.

On Sep 28, 2010, at 10:42 AM, Brian_Fox wrote:




Matthew Sackman wrote:

On Wed, May 19, 2010 at 11:06:23AM -0400, Tyler Williams wrote:
=INFO REPORT==== 17-May-2010::14:24:30 ===
   application: rabbit
   exited: {{timeout_waiting_for_tables,[rabbit_disk_queue]},
            {rabbit,start,[normal,[]]}}
   type: temporary

=ERROR REPORT==== 17-May-2010::14:24:30 ===
Error in process &lt;0.100.0&gt; on node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at echonest03</A>' with exit
value:
{badarg,[{ets,insert,[rabbit_disk_queue,[{dq_msg_loc,{{resource,&lt;&lt;1
byte&gt;&gt;,queue,&lt;&lt;9 bytes&gt;&gt;},553567},false,true,&lt;&lt;16
bytes&gt;&gt;},{dq_msg_loc,{{resource,&lt;&lt;1 byte&gt;&gt;,queue,&lt;&lt;18
bytes&gt;&gt;},563611},false,true,&lt;&lt;16 bytes&gt;&gt;},{dq_msg_loc,{{resource,&lt;&lt;1
byte&gt;&gt;,queue,&lt;&lt;18 bytes&gt;&gt;},80964},false,true,&lt;&lt;16
bytes&gt;&gt;},{dq_msg_loc,{{resource,&lt;&lt;1 byte&gt;&gt;,queue...


=INFO REPORT==== 17-May-2010::14:24:33 ===
   application: mnesia
   exited: stopped
   type: temporary

=INFO REPORT==== 17-May-2010::14:24:33 ===
   application: os_mon
   exited: stopped
   type: temporary

Can you shed any light on this error?

I might have been able to last October when I was writing that code. So
much has changed since then that I really can't remember too much about
what was going on back then.

Also, pyamqplib does not support channel.flow. Even with the new
persister, there are times where rabbit gets overwhelmed (disks just
aren't fast enough most of the time) and so needs to temporarily stop
publishers. It does this by using channel.flow. Given that pyamqplib
doesn't support channel.flow, you are very likely to run into problems.
There's a highly experimental patch by Tony (search the mailing list for
it) which adds support for channel.flow, but you might also try looking
at the other python clients such as txamqp and pika.

Matthew


(Sorry to resurrect an older thread)

Has this rabbitmq + pyamqplib problem ever been resolved?

Our group is experimenting with bringing up a massive amount of AMQP clients
using EC2.  And we're running into the same error described above,
presumably slamming memory on the broker.  It seems like we have a few
choices: bump up the memory (8GB currently), choose a different library with
flow control, or choose a different strategy to rapidly boot several hundred
clients.  Of the three, the last would be the least attractive option.

Any suggestions on the best alternative lib to avoid this error?  I'm
hearing mixed things about txAMQP's support of channel flow.

Would clustering help the issue or make it worse?  (we're currently a single
broker on a development platform)

Thanks much,
Brian
--
View this message in context: <A HREF="http://old.nabble.com/Erlang-has-closed--tp28600093p29827331.html">http://old.nabble.com/Erlang-has-closed--tp28600093p29827331.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com&lt;<A HREF="http://Nabble.com">http://Nabble.com</A>&gt;.

_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>

--
Greg Turnquist (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gturnquist at vmware.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gturnquist at vmware.com</A>&gt;)
Senior Software Engineer
SpringSource, A division of VMware
<A HREF="http://springsource.com">http://springsource.com</A>

</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009140.html">[rabbitmq-discuss] Erlang has closed?
</A></li>
	<LI>Next message: <A HREF="009142.html">[rabbitmq-discuss] Erlang has closed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9141">[ date ]</a>
              <a href="thread.html#9141">[ thread ]</a>
              <a href="subject.html#9141">[ subject ]</a>
              <a href="author.html#9141">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
