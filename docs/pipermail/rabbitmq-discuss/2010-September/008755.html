<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ and queue message limits?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20queue%20message%20limits%3F&In-Reply-To=%3Cyrv4cd3sw8bsl.fsf%40dwragg.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008754.html">
   <LINK REL="Next"  HREF="008766.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ and queue message limits?</H1>
    <B>David Wragg</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20queue%20message%20limits%3F&In-Reply-To=%3Cyrv4cd3sw8bsl.fsf%40dwragg.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ and queue message limits?">david at rabbitmq.com
       </A><BR>
    <I>Thu Sep  2 15:23:06 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008754.html">[rabbitmq-discuss] rabbitmq-erlang-client: How to configure connection's heartbeat ?
</A></li>
        <LI>Next message: <A HREF="008766.html">[rabbitmq-discuss] RabbitMQ and queue message limits?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8755">[ date ]</a>
              <a href="thread.html#8755">[ thread ]</a>
              <a href="subject.html#8755">[ subject ]</a>
              <a href="author.html#8755">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Christian,

Christian Legnitto &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">clegnitto at mozilla.com</A>&gt; writes:
&gt;<i> My main issue is I intend to have hundreds of queues with 100k+
</I>&gt;<i> messages that may or may not be processed in a timely manner. Memory
</I>&gt;<i> is ok with the new persister (yay!), but the disk fills up
</I>&gt;<i> quickly. Right now with only 1 consumer, if I don't ack messages
</I>&gt;<i> coming from bugzilla for 2 days I use up 20GB of disk. I can of course
</I>&gt;<i> throw hardware at the problem, but it seems I'd reach a point where it
</I>&gt;<i> merely wouldn't scale. I don't think it is unreasonable to tell
</I>&gt;<i> consumers that all messages up to a point will be persisted, but once
</I>&gt;<i> a threshold is reached only x amount of messages will persist. I see
</I>&gt;<i> other brokers support such a thing, though it sounds like RabbitMQ
</I>&gt;<i> likely does not.
</I>
It should be possible to achieve what you describe outside of the
RabbitMQ broker: A program could periodically use rabbitmqctl (or
whatever new improved monitoring interfaces we might add) to find queues
that are over their limit. And then, where necessary, it could consume
from queues to reduce their size.

You may already realize that, but it seems worth pointing out for the
general rabbitmq-discuss audience.

David

-- 
David Wragg
Staff Engineer, RabbitMQ
SpringSource, a division of VMware
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008754.html">[rabbitmq-discuss] rabbitmq-erlang-client: How to configure connection's heartbeat ?
</A></li>
	<LI>Next message: <A HREF="008766.html">[rabbitmq-discuss] RabbitMQ and queue message limits?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8755">[ date ]</a>
              <a href="thread.html#8755">[ thread ]</a>
              <a href="subject.html#8755">[ subject ]</a>
              <a href="author.html#8755">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
