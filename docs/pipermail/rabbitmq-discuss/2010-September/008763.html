<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Active/active HA setup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Active/active%20HA%20setup&In-Reply-To=%3CAANLkTi%3DU%2BaMTDG_N8TYHbkgTwESGFsgAvgdqhFR%3D7NLe%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008761.html">
   <LINK REL="Next"  HREF="008764.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Active/active HA setup</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Active/active%20HA%20setup&In-Reply-To=%3CAANLkTi%3DU%2BaMTDG_N8TYHbkgTwESGFsgAvgdqhFR%3D7NLe%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Active/active HA setup">alexis at rabbitmq.com
       </A><BR>
    <I>Thu Sep  2 17:02:54 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008761.html">[rabbitmq-discuss] Active/active HA setup
</A></li>
        <LI>Next message: <A HREF="008764.html">[rabbitmq-discuss] Active/active HA setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8763">[ date ]</a>
              <a href="thread.html#8763">[ thread ]</a>
              <a href="subject.html#8763">[ subject ]</a>
              <a href="author.html#8763">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jiri

Thank-you for bringing this up.

I have two (initial) questions:

1. How will out-of-order behaviour be observed in your use case?

2. Do you plan to use shared queues, or will each queue have just one
consumer client so that all pubsub happens using the exchange?

Best wishes

alexis




On Thu, Sep 2, 2010 at 4:09 PM, &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jiri at krutil.com</A>&gt; wrote:

&gt;<i> Hello together
</I>&gt;<i>
</I>&gt;<i> We are considering an active-active high availability broker setup and I
</I>&gt;<i> wanted to check if there is someone here who could help with
</I>&gt;<i> experience/advice.
</I>&gt;<i>
</I>&gt;<i> We plan to run two RabbitMQ brokers with the same setup (same queues,
</I>&gt;<i> exchanges, bindings), which are independent and not aware of each other.
</I>&gt;<i> These would be behind a load balancer, so this should be transparent to
</I>&gt;<i> client applications.
</I>&gt;<i>
</I>&gt;<i> We use AMQP for two things:
</I>&gt;<i> - pub/sub broadcasts from back-end to clients (all clients bind to the same
</I>&gt;<i> topic exchange)
</I>&gt;<i> - P2P request-response, where back-end responds to client requests (all
</I>&gt;<i> clients send to the same request queue)
</I>&gt;<i>
</I>&gt;<i> We have only one back-end server that serves the clients. Of course the
</I>&gt;<i> back-end would have to publish broadcasts to and consume requests from both
</I>&gt;<i> brokers.
</I>&gt;<i>
</I>&gt;<i> When one broker dies, the clients will re-connect via load balancer to the
</I>&gt;<i> other broker and continue. Of course any messages on the dead broker will be
</I>&gt;<i> lost. We don't use persistent messages and can live with messages being
</I>&gt;<i> lost.
</I>&gt;<i>
</I>&gt;<i> So far I have only identified one problem - the order of message delivery
</I>&gt;<i> across brokers. Since the design of our client-server interface relies on
</I>&gt;<i> the guaranteed order of message delivery, we would probably have to force
</I>&gt;<i> clients to put request sequence numbers to message headers, remember the
</I>&gt;<i> last seen request number on the back-end for each client, and throw away any
</I>&gt;<i> requests out of order.
</I>&gt;<i>
</I>&gt;<i> Any ideas or hints will be much appreciated.
</I>&gt;<i>
</I>&gt;<i> Cheers
</I>&gt;<i>
</I>&gt;<i> Jiri
</I>&gt;<i> Deutsche Boerse Systems AG
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100902/48086790/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100902/48086790/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008761.html">[rabbitmq-discuss] Active/active HA setup
</A></li>
	<LI>Next message: <A HREF="008764.html">[rabbitmq-discuss] Active/active HA setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8763">[ date ]</a>
              <a href="thread.html#8763">[ thread ]</a>
              <a href="subject.html#8763">[ subject ]</a>
              <a href="author.html#8763">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
