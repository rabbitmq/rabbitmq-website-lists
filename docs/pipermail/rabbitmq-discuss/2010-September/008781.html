<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Delay delivering messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Delay%20delivering%20messages&In-Reply-To=%3C20100903082934.GB2873%40dakota.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008779.html">
   <LINK REL="Next"  HREF="008793.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Delay delivering messages</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Delay%20delivering%20messages&In-Reply-To=%3C20100903082934.GB2873%40dakota.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] Delay delivering messages">alexandru at rabbitmq.com
       </A><BR>
    <I>Fri Sep  3 09:29:34 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008779.html">[rabbitmq-discuss] Delay delivering messages
</A></li>
        <LI>Next message: <A HREF="008793.html">[rabbitmq-discuss] Delay delivering messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8781">[ date ]</a>
              <a href="thread.html#8781">[ thread ]</a>
              <a href="subject.html#8781">[ subject ]</a>
              <a href="author.html#8781">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Michael,

&gt;<i> We are putting a very low volume of messages through and have sometimes had
</I>&gt;<i> to wait up to 15 minutes for a single message to be delivered (at the time
</I>&gt;<i> this was the only message in the system).
</I>
That sounds strage.  Are you up for a bit of debugging?

Download the java client,
 <A HREF="http://www.rabbitmq.com/java-client.html">http://www.rabbitmq.com/java-client.html</A>

Unpack it, and run
  sh runjava.sh com.rabbitmq.examples.MulticastMain -x 1 -y 1

That command will run one of our example programmes in a way that
matches your setup: 1 producer (-x 1) and 1 consumer (-y 1).

When I run it, I get speeds like:
  recving rate: 6052 msg/s, min/avg/max latency: 1063522/1118048/1164637 microseconds
  sending rate: 6419 msg/s, basic returns: 0 ret/s

If you're getting similar speeds, there's probably something wrong with
the consumers/producers.  If not, it might be something to do with the
server.

Could you please try it?

Also, which version the broker and which client are you using?

Cheers,
Alex

On Fri, Sep 03, 2010 at 09:03:25AM +0100, Michael Burns wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> We're just starting out with RabbitMQ and have a very simple setup: one
</I>&gt;<i> queue, one producer doing a basicPublish and one consumer doing a
</I>&gt;<i> basicConsume using QueueingConsumer.
</I>&gt;<i> 
</I>&gt;<i> For the most part it works fine however at fairly regular intervals we are
</I>&gt;<i> finding that messages remain on the queue for a considerable period before
</I>&gt;<i> being delivered to the consumer.
</I>&gt;<i> 
</I>&gt;<i> We are putting a very low volume of messages through and have sometimes had
</I>&gt;<i> to wait up to 15 minutes for a single message to be delivered (at the time
</I>&gt;<i> this was the only message in the system).
</I>&gt;<i> 
</I>&gt;<i> In all cases the messages are eventually delivered.
</I>&gt;<i> 
</I>&gt;<i> I dont know where to start debugging this as there is nothing in the
</I>&gt;<i> RabbitMQ logs thats suggests something is going wrong - could anyone point
</I>&gt;<i> me in the right direction as to what may be causing this?
</I>&gt;<i> 
</I>&gt;<i> Many Thanks,
</I>&gt;<i> Michael
</I>
&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008779.html">[rabbitmq-discuss] Delay delivering messages
</A></li>
	<LI>Next message: <A HREF="008793.html">[rabbitmq-discuss] Delay delivering messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8781">[ date ]</a>
              <a href="thread.html#8781">[ thread ]</a>
              <a href="subject.html#8781">[ subject ]</a>
              <a href="author.html#8781">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
