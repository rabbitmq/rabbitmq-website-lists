<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] millions of unack'd messages in a day--	disk	store instead of ram?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20millions%20of%20unack%27d%20messages%20in%20a%20day--%09disk%0A%09store%20instead%20of%20ram%3F&In-Reply-To=0B391593-838F-422B-AFA4-902C331133A0%40lindenlab.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003541.html">
   <LINK REL="Next"  HREF="003544.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] millions of unack'd messages in a day--	disk	store instead of ram?</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20millions%20of%20unack%27d%20messages%20in%20a%20day--%09disk%0A%09store%20instead%20of%20ram%3F&In-Reply-To=0B391593-838F-422B-AFA4-902C331133A0%40lindenlab.com"
       TITLE="[rabbitmq-discuss] millions of unack'd messages in a day--	disk	store instead of ram?">matthew at lshift.net
       </A><BR>
    <I>Sun May 10 13:02:52 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003541.html">[rabbitmq-discuss] millions of unack'd messages in a day--	disk	store instead of ram?
</A></li>
        <LI>Next message: <A HREF="003544.html">[rabbitmq-discuss] creating fanout exchange gives	ShutdownSignalException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3543">[ date ]</a>
              <a href="thread.html#3543">[ thread ]</a>
              <a href="subject.html#3543">[ subject ]</a>
              <a href="author.html#3543">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Brian,

On Fri, May 08, 2009 at 10:41:07AM -0700, Brian Sullivan wrote:
&gt;&gt;<i> [snip] Beware though that the broker you are using could have internal
</I>&gt;&gt;<i> messages timeout on it - this was fixed in bug 20546 which is in our
</I>&gt;&gt;<i> &quot;default&quot; development branch, not the stable &quot;v1_5&quot; branch. As such,  
</I>&gt;&gt;<i> you
</I>&gt;&gt;<i> may see messages coming out of the broker which indicate strange  
</I>&gt;&gt;<i> timeouts
</I>&gt;&gt;<i> occurred. [snip]
</I>&gt;<i>
</I>&gt;<i> Would this timeout error you mention possibly be the reason I have seen 
</I>&gt;<i> this error crop up once every few days?  If so, do you know when the fix 
</I>&gt;<i> will make it to the stable branch?
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 1-May-2009::16:29:00 ===
</I>&gt;<i> starting TCP connection &lt;0.17070.115&gt; from 10.0.4.56:51169
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 1-May-2009::19:09:53 ===
</I>&gt;<i> connection &lt;0.17070.115&gt; (running), channel 1 - error:
</I>&gt;<i> {{timeout,{gen_server,call,[&lt;0.17078.115&gt;,stat]}},
</I>
Yep. That is a synchronous call within rabbit timing out. By default the
OTP platform sets these timeouts to be 5 seconds. When a machine is very
heavily loaded, it's very possible for calls to take more than 5 seconds
to complete. We have changed all the timeouts to 'infinity' now because
doing so allows rabbit to continue to operate successfully in heavily
loaded situations and also because we don't think there's any value in
trying to catch such timeout errors - it's not like there's something
other than retrying that we could do when a timeout like this occurs, thus
it's better to just remove the timeout completely.

I'd be interested to know if there are any specific circumstances which
cause your broker to emit these timeout errors.

Wrt these changes landing in a stable branch, it's very unlikely they'll
hit in 1.5. They will, I suspect, be in 1.6, but we don't have a timetable
as to when we're planning on forking that. Sorry I can't help more.

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003541.html">[rabbitmq-discuss] millions of unack'd messages in a day--	disk	store instead of ram?
</A></li>
	<LI>Next message: <A HREF="003544.html">[rabbitmq-discuss] creating fanout exchange gives	ShutdownSignalException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3543">[ date ]</a>
              <a href="thread.html#3543">[ thread ]</a>
              <a href="subject.html#3543">[ subject ]</a>
              <a href="author.html#3543">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
