<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] NPE in RpcClient
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20NPE%20in%20RpcClient&In-Reply-To=B925AD96-A41F-4932-AF02-5916FB6DFD50%40mangala.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000666.html">
   <LINK REL="Next"  HREF="000669.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] NPE in RpcClient</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20NPE%20in%20RpcClient&In-Reply-To=B925AD96-A41F-4932-AF02-5916FB6DFD50%40mangala.co.uk"
       TITLE="[rabbitmq-discuss] NPE in RpcClient">matthias at lshift.net
       </A><BR>
    <I>Fri Apr  4 20:50:13 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000666.html">[rabbitmq-discuss] NPE in RpcClient
</A></li>
        <LI>Next message: <A HREF="000669.html">[rabbitmq-discuss] pub-sub erlang problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#667">[ date ]</a>
              <a href="thread.html#667">[ thread ]</a>
              <a href="subject.html#667">[ subject ]</a>
              <a href="author.html#667">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Neil,

Neil Ellis wrote:

&gt;<i> That's just how it's done in the Mule connector, it's making use of the 
</I>&gt;<i> same client for RPC calls and non RPC calls. I think Tony put that 
</I>&gt;<i> together so you may want to chat with him, I'm sure Ross would be happy 
</I>&gt;<i> to change it if there is a better strategy.
</I>
Actually, using RpcClient.publish should be perfectly safe, if a little 
weird and undocumented. I cannot see the publish would end up placing 
messages in the reply queue of the same RpcClient. The reply queue is 
given a server-generated name and is bound to the default exchange (&quot;&quot;), 
which is a direct exchange. To send a message to the reply queue it 
would have to be sent to the default exchange with a routing key equal 
to the generated queue name. Since both the exchange name and routing 
key are supplied to the constructor of the RpcClient there is no way for 
that to happen.

Instead what I suspect might be causing the problem is an rpc server 
replying to a message twice, or perhaps two rpc servers replying to the 
same message. Do you think that can occur in your set up?

The arrival of the second reply would indeed trigger an NPE. That's 
perhaps not the nicest exception to throw under the circumstances, but 
*some* exception is certainly warranted.


Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000666.html">[rabbitmq-discuss] NPE in RpcClient
</A></li>
	<LI>Next message: <A HREF="000669.html">[rabbitmq-discuss] pub-sub erlang problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#667">[ date ]</a>
              <a href="thread.html#667">[ thread ]</a>
              <a href="subject.html#667">[ subject ]</a>
              <a href="author.html#667">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
