<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cluster setup : rabbitmq server stops responding to rabbitmqctl commands
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20setup%20%3A%20rabbitmq%20server%20stops%20responding%0A%20to%20rabbitmqctl%20commands&In-Reply-To=%3CEEA1DC407D5C23479BEAAF68C3D560400531C4CA%40048-CH1MPN1-213.048d.mgd.msft.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021279.html">
   <LINK REL="Next"  HREF="021176.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cluster setup : rabbitmq server stops responding to rabbitmqctl commands</H1>
    <B>sanjiv.kumar.jha at accenture.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20setup%20%3A%20rabbitmq%20server%20stops%20responding%0A%20to%20rabbitmqctl%20commands&In-Reply-To=%3CEEA1DC407D5C23479BEAAF68C3D560400531C4CA%40048-CH1MPN1-213.048d.mgd.msft.net%3E"
       TITLE="[rabbitmq-discuss] Cluster setup : rabbitmq server stops responding to rabbitmqctl commands">sanjiv.kumar.jha at accenture.com
       </A><BR>
    <I>Wed Jul 11 11:43:46 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021279.html">[rabbitmq-discuss] RabbitMQ Cluster High CPU Usage 100-200%+
</A></li>
        <LI>Next message: <A HREF="021176.html">[rabbitmq-discuss] Cluster setup : rabbitmq server stops	responding to rabbitmqctl commands
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21172">[ date ]</a>
              <a href="thread.html#21172">[ thread ]</a>
              <a href="subject.html#21172">[ subject ]</a>
              <a href="author.html#21172">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We have a RabbitMQ cluster of 2 nodes (say NODE-A and NODE-B) having mirrored queues running on 2 separate Linux servers (RabbitMQ-Server 2.7.1), but facing issues with RabbitMQ Server.
If NODE-A is brought down, the clients are able to connect to NODE-B successfully; no issues observed till this point.
Now if NODE-A is brought up and NODE-B is brought down, the rabbitmq server tends to slow down and does not even respond to simple command like rabbitmqctl list_queues - keeps waiting endlessly.

Please let us know, if there any clues or ideas to rectify this issue.

Thanks

Sanjiv

Startup_err:

Erlang has closed
Erlang has closed


Startup_log:


+---+   +---+
|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   +---+   +-------+
</I>|<i>                   |
</I>|<i> RabbitMQ  +---+   |
</I>|<i>           |   |   |
</I>|<i>   v2.7.1  +---+   |
</I>|<i>                   |
</I>+-------------------+
AMQP 0-9-1 / 0-9 / 0-8
Copyright (C) 2007-2011 VMware, Inc.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at AD1SP1</A>
app descriptor : /usr/lib/rabbitmq/lib/rabbitmq_server-2.7.1/sbin/../ebin/rabbit.app
home dir       : /var/lib/rabbitmq
config file(s) : /etc/rabbitmq/rabbitmq.config
cookie hash    : pmUAo68V6W8JgxZU0MHCNw==
log            : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at AD1SP1.log</A>
sasl log       : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at AD1SP1-sasl.log</A>
database dir   : /var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at AD1SP1</A>
erlang version : 5.6.3

-- rabbit boot start
starting file handle cache server                                     ...done
starting worker pool                                                  ...done
starting database                                                     ...

<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at NODE-A.log</A>:

=INFO REPORT==== 9-Jul-2012::17:47:29 ===
closing TCP connection &lt;0.7287.0&gt; from 144.36.234.81:22348

=INFO REPORT==== 9-Jul-2012::17:47:29 ===
closing TCP connection &lt;0.8371.0&gt; from 144.36.234.81:22354

=INFO REPORT==== 9-Jul-2012::17:47:29 ===
    application: rabbit
    exited: stopped
    type: temporary

=INFO REPORT==== 9-Jul-2012::17:47:29 ===
    application: mnesia
    exited: stopped
    type: temporary

=INFO REPORT==== 9-Jul-2012::17:47:29 ===
    application: os_mon
    exited: stopped
    type: temporary

=INFO REPORT==== 9-Jul-2012::17:52:28 ===
Limiting to approx 924 file handles (829 sockets)

<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at NODE-A-sasl.log</A>:

=SUPERVISOR REPORT==== 9-Jul-2012::17:47:29 ===
     Supervisor: {&lt;0.8370.0&gt;,rabbit_channel_sup_sup}
     Context:    shutdown_error
     Reason:     shutdown
     Offender:   [{pid,&lt;0.10329.0&gt;},
                  {name,channel_sup},
                  {mfa,{rabbit_channel_sup,start_link,[]}},
                  {restart_type,temporary},
                  {shutdown,infinity},
                  {child_type,supervisor}]

________________________________
Subject to local law, communications with Accenture and its affiliates including telephone calls and emails (including content), may be monitored by our systems for the purposes of security and the assessment of internal compliance with Accenture policy.
______________________________________________________________________________________

www.accenture.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120711/cdfe52cc/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120711/cdfe52cc/attachment.htm</A>&gt;
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021279.html">[rabbitmq-discuss] RabbitMQ Cluster High CPU Usage 100-200%+
</A></li>
	<LI>Next message: <A HREF="021176.html">[rabbitmq-discuss] Cluster setup : rabbitmq server stops	responding to rabbitmqctl commands
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21172">[ date ]</a>
              <a href="thread.html#21172">[ thread ]</a>
              <a href="subject.html#21172">[ subject ]</a>
              <a href="author.html#21172">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
