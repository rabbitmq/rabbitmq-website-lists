<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Handle Stale Connections on Clients
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Handle%20Stale%20Connections%20on%20Clients&In-Reply-To=%3C4FFDCBAA.1070001%40vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021191.html">
   <LINK REL="Next"  HREF="021195.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Handle Stale Connections on Clients</H1>
    <B>Gary Russell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Handle%20Stale%20Connections%20on%20Clients&In-Reply-To=%3C4FFDCBAA.1070001%40vmware.com%3E"
       TITLE="[rabbitmq-discuss] Handle Stale Connections on Clients">grussell at vmware.com
       </A><BR>
    <I>Wed Jul 11 19:53:30 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021191.html">[rabbitmq-discuss] Handle Stale Connections on Clients
</A></li>
        <LI>Next message: <A HREF="021195.html">[rabbitmq-discuss] Handle Stale Connections on Clients
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21193">[ date ]</a>
              <a href="thread.html#21193">[ thread ]</a>
              <a href="subject.html#21193">[ subject ]</a>
              <a href="author.html#21193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>See <A HREF="http://static.springsource.org/spring-amqp/docs/1.1.1.RELEASE/reference/html/#d0e999">http://static.springsource.org/spring-amqp/docs/1.1.1.RELEASE/reference/html/#d0e999</A>

It shouldn't take much heavy lifting to use spring-amqp instead of the raw apis, and it will take care of reconnecting, setting up queues etc, via the ConnectionListener callback in the RabbitAdmin class.

On the receiving side, you don't have to write any special listeners etc to use spring-amqp; you can just write your code as a POJO and the container uses an adapter to call your code. On the outbound side just use a RabbitTemplate; in most cases you can use high-level APIs, while still having access to the low level APIs (channel) if you ever need them.

If you can't move to spring-amqp, you might be able to leverage some of the code from RabbitAdmin.

Gary


On 07/11/2012 02:16 PM, cogitate wrote:


Jerry Kuch-2 wrote



Hi, Monish:

If you're using the naked Java client, you'll have to implement your own
reconnection logic.  If you're using Spring AMQP there's some helper code
that wraps your connections with some retry logic for you.

Best regards,
Jerry



thanks much Jerry for such a prompt reply. I would love to re-use
spring-amqp and use the wrapped connection( it seems CachedConnectionFactory
+ SimpleListenerContainer ).
what i am wondering for a simple amqp client that simply wants to re-connect
when a broker shutsdown, is there any way i can re-initialize all my
reply-queues( i have uuids associated with them), channels (wrapped channel
objects associated with connections) without having to re-write the code
with spring-amqp?

sorry to be presume that you would know the answer to this.....but a simple
logic/example would be great of how to go about it.
the spring-amqp project seems to be quite complicated as it seems to have
logic for transactions ( also it's not entirely clear to me if i need to
write a listener container or just register a shutdownlistener etc).

thanks and regards,
-monish



--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/Handle-Stale-Connections-on-Clients-tp20687p20721.html">http://rabbitmq.1065348.n5.nabble.com/Handle-Stale-Connections-on-Clients-tp20687p20721.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>




-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120711/99c589bc/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120711/99c589bc/attachment.htm</A>&gt;
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021191.html">[rabbitmq-discuss] Handle Stale Connections on Clients
</A></li>
	<LI>Next message: <A HREF="021195.html">[rabbitmq-discuss] Handle Stale Connections on Clients
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21193">[ date ]</a>
              <a href="thread.html#21193">[ thread ]</a>
              <a href="subject.html#21193">[ subject ]</a>
              <a href="author.html#21193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
