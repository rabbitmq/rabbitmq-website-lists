<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] help - design pattern for an our use case
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20help%20-%20design%20pattern%20for%20an%20our%20use%20case&In-Reply-To=%3C50069C99.2010607%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021340.html">
   <LINK REL="Next"  HREF="021524.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] help - design pattern for an our use case</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20help%20-%20design%20pattern%20for%20an%20our%20use%20case&In-Reply-To=%3C50069C99.2010607%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] help - design pattern for an our use case">emile at rabbitmq.com
       </A><BR>
    <I>Wed Jul 18 12:23:05 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021340.html">[rabbitmq-discuss] help - design pattern for an our use case
</A></li>
        <LI>Next message: <A HREF="021524.html">[rabbitmq-discuss] help - design pattern for an our use case
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21346">[ date ]</a>
              <a href="thread.html#21346">[ thread ]</a>
              <a href="subject.html#21346">[ subject ]</a>
              <a href="author.html#21346">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 18/07/12 06:41, Bhaskar teja wrote:
&gt;<i> What is a good design pattern for our use case - like number of queues?,
</I>&gt;<i> exchange type?, number of exchanges( web, e-mail ) ??
</I>
This looks like a potential application of topics and a topic exchange.
Allocate a queue for each user. Bind each user queue with appropriate
routing keys. So a queue for user &quot;alice&quot; belonging to two communities
might have these bindings:

users.alice
communities.pet-owners
communities.music-collectors

When &quot;alice&quot; takes an action that her communities may be interested in
then a message must be sent to the topic exchange with a routing key for
each of the communities that she belongs to. It is possible to do this
in a single operation using CC routing. See
<A HREF="http://www.rabbitmq.com/extensions.html#sender-selected-distribution">http://www.rabbitmq.com/extensions.html#sender-selected-distribution</A>

Depending on the complexity of when groups are notified you could
implement groups as sub-topics, so a group within pet-owners might be:

communities.pet-owners.dog-lovers

Depending on the rules for email notifications you could use a
combination of dead letter exchanges and queue-TTL to detect when
notifications have been waiting in the queue for too long and send them
to the user by email. See:

<A HREF="http://www.rabbitmq.com/extensions.html#dead-letter-exchanges">http://www.rabbitmq.com/extensions.html#dead-letter-exchanges</A>
<A HREF="http://www.rabbitmq.com/extensions.html#queue-ttl">http://www.rabbitmq.com/extensions.html#queue-ttl</A>

A possible problem with this design is the large number of bindings
involved. This could be slow and difficult to manage, depending on the
branching factor. You could contain the complexity by using
exchange-to-exchange bindings and internal exchanges for groups (and
communities).

-Emile

</PRE>





































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021340.html">[rabbitmq-discuss] help - design pattern for an our use case
</A></li>
	<LI>Next message: <A HREF="021524.html">[rabbitmq-discuss] help - design pattern for an our use case
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21346">[ date ]</a>
              <a href="thread.html#21346">[ thread ]</a>
              <a href="subject.html#21346">[ subject ]</a>
              <a href="author.html#21346">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
