<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding	to	rabbitmqctl	commands
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%0A%09Cluster%09setup%09%3A%09rabbitmq%09server%09stops%09responding%09to%09rabbitmqctl%0A%09commands&In-Reply-To=%3C87obnjq5dr.wl%25francesco%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021248.html">
   <LINK REL="Next"  HREF="021286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding	to	rabbitmqctl	commands</H1>
    <B>Francesco Mazzoli</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%0A%09Cluster%09setup%09%3A%09rabbitmq%09server%09stops%09responding%09to%09rabbitmqctl%0A%09commands&In-Reply-To=%3C87obnjq5dr.wl%25francesco%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding	to	rabbitmqctl	commands">francesco at rabbitmq.com
       </A><BR>
    <I>Fri Jul 13 12:15:12 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021248.html">[rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding	to	rabbitmqctl commands
</A></li>
        <LI>Next message: <A HREF="021286.html">[rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding	to	rabbitmqctl	commands
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21253">[ date ]</a>
              <a href="thread.html#21253">[ thread ]</a>
              <a href="subject.html#21253">[ subject ]</a>
              <a href="author.html#21253">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At Fri, 13 Jul 2012 10:23:15 +0000,
Hi Sanjiv,

I have hacked up a quick script to try to reproduce your problem. It is a bash
script that starts/stops/cluster and a python script used by the bash script to
declare 100 HA queues; I have attached them. I'm running the two nodes on the
same machine, this makes a difference but hopefully the problem is not there.

Looking at your logs, it looks like DV1SP001 sees BSPEVSDK001 going down, but
there is no trace of that in the BSPEVSDK001 logs, which looks like it's running
all the way through. Are the clocks on the two nodes synchronised?  If they are,
what I see in the logs looks like a netsplit, which is a bad thing for rabbit
clusters, and can cause mnesia to act funny.

It's also not clear from your email and the logs how you set up the cluster in
the first place.

Can you confirm that what I do in the script is more or less what you are doing?
If it's not, can you give more details on your setup?

--
Francesco * Often in error, never in doubt

-------------- next part --------------
A non-text attachment was scrubbed...
Name: test
Type: application/octet-stream
Size: 1165 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120713/9184c92c/attachment.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120713/9184c92c/attachment.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: declare.py
Type: application/octet-stream
Size: 330 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120713/9184c92c/attachment-0001.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120713/9184c92c/attachment-0001.obj</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021248.html">[rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding	to	rabbitmqctl commands
</A></li>
	<LI>Next message: <A HREF="021286.html">[rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding	to	rabbitmqctl	commands
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21253">[ date ]</a>
              <a href="thread.html#21253">[ thread ]</a>
              <a href="subject.html#21253">[ subject ]</a>
              <a href="author.html#21253">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
