<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] AMQP heartbeat - Expected behaviors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20AMQP%20heartbeat%20-%20Expected%20behaviors&In-Reply-To=%3CCACLE7izcnAOO4hZ%2BWrHZj3x_wntz6DVifSkcK9Uvgvjuxkk04g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021042.html">
   <LINK REL="Next"  HREF="021044.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] AMQP heartbeat - Expected behaviors</H1>
    <B>Matt Pietrek</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20AMQP%20heartbeat%20-%20Expected%20behaviors&In-Reply-To=%3CCACLE7izcnAOO4hZ%2BWrHZj3x_wntz6DVifSkcK9Uvgvjuxkk04g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] AMQP heartbeat - Expected behaviors">mpietrek at skytap.com
       </A><BR>
    <I>Tue Jul  3 22:24:51 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021042.html">[rabbitmq-discuss] AMQP heartbeat - Expected behaviors
</A></li>
        <LI>Next message: <A HREF="021044.html">[rabbitmq-discuss] Problems installing LVC exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21043">[ date ]</a>
              <a href="thread.html#21043">[ thread ]</a>
              <a href="subject.html#21043">[ subject ]</a>
              <a href="author.html#21043">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Mathias and Gavin!

Just to add some additional insight into the Pika case, we're actually
using heartbeat with the BlockingConnection.

There were a couple of minor bugs I had to fix in heartbeat. py, and yes, I
hope to file bugs/pull requests.

With this added info, I can better explain the original issue. When we read
a message, we may not ack it for hours. Since there's no other activity on
the queue connection, the heartbeat.py logic never gets a chance to
execute. Eventually the server times out our connection because it's sent
frames but no Pika code gets run while we're working away.

Matt

On Tue, Jul 3, 2012 at 1:25 PM, Gavin M. Roy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gmr at myyearbook.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> On Jul 3, 2012, at 4:18 PM, Matthias Radestock wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; On 03/07/12 21:14, Gavin M. Roy wrote:
</I>&gt;<i> &gt;&gt; we're sending a Heartbeat frame and expecting the response.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Erhm. There is no response.
</I>&gt;<i>
</I>&gt;<i> LOL well there you go, I'm going off memory (a bit rusty memory).  In
</I>&gt;<i> looking at the code, it's sending the frame on an IOLoop timer and looking
</I>&gt;<i> for byte counter changes.
</I>&gt;<i>
</I>&gt;<i> Gavin
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120703/0defd18e/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120703/0defd18e/attachment.htm</A>&gt;
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021042.html">[rabbitmq-discuss] AMQP heartbeat - Expected behaviors
</A></li>
	<LI>Next message: <A HREF="021044.html">[rabbitmq-discuss] Problems installing LVC exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21043">[ date ]</a>
              <a href="thread.html#21043">[ thread ]</a>
              <a href="subject.html#21043">[ subject ]</a>
              <a href="author.html#21043">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
