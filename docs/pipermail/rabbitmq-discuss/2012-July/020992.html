<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Issue in creating a RabbitMQ Cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Issue%20in%20creating%20a%20RabbitMQ%20Cluster&In-Reply-To=%3CCAL696ubrR66MQnYUK_8KdOA6HDW3mFgHTW5BnWQ2mngCd7E2-g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020985.html">
   <LINK REL="Next"  HREF="020996.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Issue in creating a RabbitMQ Cluster</H1>
    <B>Aravindh S</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Issue%20in%20creating%20a%20RabbitMQ%20Cluster&In-Reply-To=%3CCAL696ubrR66MQnYUK_8KdOA6HDW3mFgHTW5BnWQ2mngCd7E2-g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Issue in creating a RabbitMQ Cluster">aravindh86 at gmail.com
       </A><BR>
    <I>Mon Jul  2 22:05:00 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020985.html">[rabbitmq-discuss] RabbitMQ subscriber loses connection across	firewalls after long idle
</A></li>
        <LI>Next message: <A HREF="020996.html">[rabbitmq-discuss] Issue in creating a RabbitMQ Cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20992">[ date ]</a>
              <a href="thread.html#20992">[ thread ]</a>
              <a href="subject.html#20992">[ subject ]</a>
              <a href="author.html#20992">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.

I am trying to create a cluster of three RabbitMQ nodes.
I am having trouble setting the &quot;.erlang.cookie&quot; file correctly.

Node1 - x.y.z.28        - Ubuntu 12.04 - RabbitMQ installed from
repositories.
Node2 - x.y.z.38        - Ubuntu 12.04 - RabbitMQ installed from
repositories.
Node3 - x.y.z.39        - Ubuntu 12.04 - RabbitMQ installed from
repositories.

Individually all the three nodes are working fine.

Step 1 : copy the erlang magic cookie between the nodes

   - I replace the /var/lib/rabbitmq/.erlang.cookie file in Node 2 with
   that of Node 1
   - ls -al shows the file is owned by &quot;rabbitmq&quot; user

step 2 : I try to add Node2 to a cluster with Node1

   - Every rabbitmqctl command fails like below

<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at rabbit3</A>:/home/aravindh# rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at 130.127.39.28</A>
Clustering node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit3</A> with ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at 130.127.39.28</A>'] ...
Error: unable to connect to node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit3</A>: nodedown
diagnostics:
- nodes and their ports on rabbit3:
[{rabbit,37223},{rabbitmqctl12238,44154}]
- current node: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl12238 at rabbit3</A>
- current node home dir: /var/lib/rabbitmq
- current node cookie hash: rMqeVIBUabtB2sZrvleTTQ==


<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at rabbit3</A>:/home/aravindh# rabbitmqctl status
Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit3</A> ...
Error: unable to connect to node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit3</A>: nodedown
diagnostics:
- nodes and their ports on rabbit3:
[{rabbit,37223},{rabbitmqctl12271,38179}]
- current node: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl12271 at rabbit3</A>
- current node home dir: /var/lib/rabbitmq
- current node cookie hash: rMqeVIBUabtB2sZrvleTTQ==

Reverting back to the original .erlang.cookie file gets rid of the error,
but I cannot proceed with cluster without this cookie step right ?

please help me find where I am going wrong ....

--

Aravindh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120702/4d6775bb/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120702/4d6775bb/attachment.htm</A>&gt;
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020985.html">[rabbitmq-discuss] RabbitMQ subscriber loses connection across	firewalls after long idle
</A></li>
	<LI>Next message: <A HREF="020996.html">[rabbitmq-discuss] Issue in creating a RabbitMQ Cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20992">[ date ]</a>
              <a href="thread.html#20992">[ thread ]</a>
              <a href="subject.html#20992">[ subject ]</a>
              <a href="author.html#20992">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
