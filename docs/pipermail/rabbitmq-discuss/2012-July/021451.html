<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] active-active implementation in php
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20active-active%20implementation%20in%20php&In-Reply-To=%3CCAOvN6FAUT%2BdOd034VfCWqPbCY%3DB%3DP-YCSZUWMTGuHst-bR6xQQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021450.html">
   <LINK REL="Next"  HREF="021452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] active-active implementation in php</H1>
    <B>Robin Harvey</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20active-active%20implementation%20in%20php&In-Reply-To=%3CCAOvN6FAUT%2BdOd034VfCWqPbCY%3DB%3DP-YCSZUWMTGuHst-bR6xQQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] active-active implementation in php">harvey.robin at gmail.com
       </A><BR>
    <I>Sun Jul 22 12:36:21 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021450.html">[rabbitmq-discuss] active-active implementation in php
</A></li>
        <LI>Next message: <A HREF="021452.html">[rabbitmq-discuss] active-active implementation in php
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21451">[ date ]</a>
              <a href="thread.html#21451">[ thread ]</a>
              <a href="subject.html#21451">[ subject ]</a>
              <a href="author.html#21451">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Frank,

I'll reply on behalf of my Amqp bindings, Amqphp.

Amqphp doesn't support active-active &quot;out of the box&quot;, but there is support
for incoming consumer.cancel messages, which AFAIK is one of
the prerequisites for AA.  I'm still unsure how this feature is implemented
in Rabbit, as per my question further up this thread:

Out of interest, how does the client know where to re-connect to when a
&gt;<i> queue fails (i.e. which slave got promoted)?  I've seen the following
</I>&gt;<i> (here: <A HREF="http://www.rabbitmq.com/ha.html">http://www.rabbitmq.com/ha.html</A>):
</I>&gt;<i> &gt; Clients that were consuming from the mirrored-queue and support our
</I>&gt;<i> Consumer Cancellation Notifications extension will receive a notification
</I>&gt;<i> that their subscription to the mirrored-queue has been abruptly cancelled.
</I>&gt;<i> At this point they should re-consume from the queue, which will pick up the
</I>&gt;<i> new master
</I>&gt;<i> ...but this doesn't give much detail.  Are the reconnection parameters in
</I>&gt;<i> the consumer.cancel method?
</I>


I must admit that there hasn't been much interest for AA in Amqphp, so I've
left it for now (as I'm working on a new project!).  If people are now
becoming interested in this I would happily look in to what's involved in
setting this up.


Thanks,
--Robin

On 22 July 2012 05:29, thesilentman &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">od.ravani at gmail.com</A>&gt; wrote:

&gt;<i> Hello Alvaro,
</I>&gt;<i>
</I>&gt;<i> did you find time to test this? I am evaluating rabbitmq for a php project
</I>&gt;<i> and need to know what lib I can use?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Frank
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tuesday, January 3, 2012 11:00:22 PM UTC+2, Alvaro Videla wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi Robin,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The library implements the basic.cancel method but I haven't tested this
</I>&gt;&gt;<i> yet.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think I will try to set up a Demo and implement any missing features in
</I>&gt;&gt;<i> case they are needed.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alvaro
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Jan 3, 2012, at 9:03 PM, Robin Harvey wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alvaro - does php-amqplib support incoming consumer cancels?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Out of interest, how does the client know where to re-connect to when a
</I>&gt;&gt;<i> queue fails (i.e. which slave got promoted)?  I've seen the following
</I>&gt;&gt;<i> (here: <A HREF="http://www.rabbitmq.com/ha.**html&lt;http://www.rabbitmq.com/ha.html">http://www.rabbitmq.com/ha.**html&lt;http://www.rabbitmq.com/ha.html</A>&gt;
</I>&gt;&gt;<i> ):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Clients that were consuming from the mirrored-queue and support our Consumer
</I>&gt;&gt;<i> Cancellation Notifications&lt;<A HREF="http://www.rabbitmq.com/extensions.html#consumer-cancel-notify">http://www.rabbitmq.com/extensions.html#consumer-cancel-notify</A>&gt;extension will receive a notification that their subscription to the
</I>&gt;&gt;<i> mirrored-queue has been abruptly cancelled. At this point they should
</I>&gt;&gt;<i> re-consume from the queue, which will pick up the new master
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ...but this doesn't give much detail.  Are the reconnection parameters in
</I>&gt;&gt;<i> the consumer.cancel method?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i> --Robin
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 3 January 2012 15:07, Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Yes&#8230; it should support the arguments parameter.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> BTW&#8230; I recommend that you use this version of the library:
</I>&gt;&gt;&gt;<i> <A HREF="https://github.com/**videlalvaro/php-amqplib&lt;https://github.com/videlalvaro/php-amqplib">https://github.com/**videlalvaro/php-amqplib&lt;https://github.com/videlalvaro/php-amqplib</A>&gt;for the reasons stated here:
</I>&gt;&gt;&gt;<i> <A HREF="http://videlalvaro.**github.com/2011/11/php-**amqplib-future.html&lt;http://videlalvaro.github.com/2011/11/php-amqplib-future.html">http://videlalvaro.**github.com/2011/11/php-**amqplib-future.html&lt;http://videlalvaro.github.com/2011/11/php-amqplib-future.html</A>&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Regards,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Alvaro
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Tue, Jan 3, 2012 at 4:00 PM, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt;wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hi Dhaneesh,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On 30/12/11 04:25, Dhaneesh Radhakrishnan wrote:
</I>&gt;&gt;&gt;&gt;<i> &gt; Hi
</I>&gt;&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;  Is it possible to  implement Mirrored Queue ( active-active )using
</I>&gt;&gt;&gt;&gt;<i> &gt; php-ampliqb  for
</I>&gt;&gt;&gt;&gt;<i> &gt; HA
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Judging by the queue_declare() function, php-amqplib does support
</I>&gt;&gt;&gt;&gt;<i> arguments, so it is possible to make use of mirrored queues using this
</I>&gt;&gt;&gt;&gt;<i> library.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> See <A HREF="http://www.rabbitmq.com/ha.**html">http://www.rabbitmq.com/ha.**html</A> &lt;<A HREF="http://www.rabbitmq.com/ha.html">http://www.rabbitmq.com/ha.html</A>&gt;for details on how to set the
</I>&gt;&gt;&gt;&gt;<i> &quot;x-ha-policy&quot; argument.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> -Emile
</I>&gt;&gt;&gt;&gt;<i> ______________________________**_________________
</I>&gt;&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.</A>**rabbitmq.com&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**">https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**</A>
</I>&gt;&gt;&gt;&gt;<i> rabbitmq-discuss&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>&gt;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ______________________________**_________________
</I>&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.</A>**rabbitmq.com&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sent form my Nokia 1100
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120722/e5347482/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120722/e5347482/attachment.htm</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021450.html">[rabbitmq-discuss] active-active implementation in php
</A></li>
	<LI>Next message: <A HREF="021452.html">[rabbitmq-discuss] active-active implementation in php
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21451">[ date ]</a>
              <a href="thread.html#21451">[ thread ]</a>
              <a href="subject.html#21451">[ subject ]</a>
              <a href="author.html#21451">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
