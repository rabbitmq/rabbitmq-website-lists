<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] basicPublish() Hangs on the Upstream Node in a Federation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20basicPublish%28%29%20Hangs%20on%20the%20Upstream%20Node%20in%0A%20a%20Federation&In-Reply-To=%3CSNT127-W189232D7C87742955A45C6D5C50%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021591.html">
   <LINK REL="Next"  HREF="021551.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] basicPublish() Hangs on the Upstream Node in a Federation</H1>
    <B>Chris Judkins-Fisher</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20basicPublish%28%29%20Hangs%20on%20the%20Upstream%20Node%20in%0A%20a%20Federation&In-Reply-To=%3CSNT127-W189232D7C87742955A45C6D5C50%40phx.gbl%3E"
       TITLE="[rabbitmq-discuss] basicPublish() Hangs on the Upstream Node in a Federation">squall1386 at hotmail.com
       </A><BR>
    <I>Tue Jul 31 23:49:56 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021591.html">[rabbitmq-discuss] basicPublish() Hangs on the Upstream Node in a Federation
</A></li>
        <LI>Next message: <A HREF="021551.html">[rabbitmq-discuss] Why do we need rabbitmq-web-stomp and why not rabitmq-web-amqp (over websockets)?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21615">[ date ]</a>
              <a href="thread.html#21615">[ thread ]</a>
              <a href="subject.html#21615">[ subject ]</a>
              <a href="author.html#21615">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Emile,

I can see the appropriate exchange and queue when list_exchanges or list_queues. Also, this exact code works on rabbit1, and also on my own computer.

The only line logged in <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2.log</A> when I run that code is &quot;accepting AMQP connection&quot;. Is there a way to configure the broker to log any more information?

I should also say that, since sending this message, I've recreated the VM and reinstalled everything without activating the federation plugin or anything, and I'm still getting the same problem. I'm installing rabbitmq on CentOS 5.7, and I have to compile Erlang source because of the problem explained at <A HREF="http://stackoverflow.com/questions/5463503/rabbitmq-install-issue-on-centos-5-5.">http://stackoverflow.com/questions/5463503/rabbitmq-install-issue-on-centos-5-5.</A> Everything appears to work with the manual compile, but I'm wondering if this bug has something to do with the Erlang version I'm using. It doesn't seem likely, since I did basically the same setup on rabbit1 and it worked, but it's the only thing I can think of at this point.

Thanks,
Chris

&gt;<i> Date: Mon, 30 Jul 2012 12:00:20 +0100
</I>&gt;<i> From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>
</I>&gt;<i> To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> CC: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">squall1386 at hotmail.com</A>
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] basicPublish() Hangs on the Upstream Node in a Federation
</I>&gt;<i> 
</I>&gt;<i> Hi Chris,
</I>&gt;<i> 
</I>&gt;<i> On 26/07/12 19:59, Chris Judkins-Fisher wrote:
</I>&gt;<i> &gt; are also automatically created on rabbit2. However, if I try to publish
</I>&gt;<i> &gt; to an exchange from rabbit2, the code appears to hang and the message is
</I>&gt;<i> &gt; never delivered. This happens whether I'm publishing to the upstream
</I>&gt;<i> 
</I>&gt;<i> From your description further on it sounds like the channel close
</I>&gt;<i> immediately following the publish is failing. Is it possible that you
</I>&gt;<i> are publishing to a non-existent exchange (testexchange)? What does the
</I>&gt;<i> broker logfile say? The solution in this case is to make sure that the
</I>&gt;<i> exchange you publish to exists.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -Emile
</I>&gt;<i> 
</I> 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120731/30ad3a1e/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120731/30ad3a1e/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021591.html">[rabbitmq-discuss] basicPublish() Hangs on the Upstream Node in a Federation
</A></li>
	<LI>Next message: <A HREF="021551.html">[rabbitmq-discuss] Why do we need rabbitmq-web-stomp and why not rabitmq-web-amqp (over websockets)?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21615">[ date ]</a>
              <a href="thread.html#21615">[ thread ]</a>
              <a href="subject.html#21615">[ subject ]</a>
              <a href="author.html#21615">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
