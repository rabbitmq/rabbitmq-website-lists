<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ SSL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20SSL&In-Reply-To=%3CCAE8G%2ByS99%3DRyFSZgL-Ldnf-hriN885xK2i0V6_kvwsVeAzoTdA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021257.html">
   <LINK REL="Next"  HREF="021296.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ SSL</H1>
    <B>Prashanth</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20SSL&In-Reply-To=%3CCAE8G%2ByS99%3DRyFSZgL-Ldnf-hriN885xK2i0V6_kvwsVeAzoTdA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ SSL">meetprashanth437 at gmail.com
       </A><BR>
    <I>Mon Jul 16 16:18:29 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021257.html">[rabbitmq-discuss] RabbitMQ SSL
</A></li>
        <LI>Next message: <A HREF="021296.html">[rabbitmq-discuss] RabbitMQ SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21295">[ date ]</a>
              <a href="thread.html#21295">[ thread ]</a>
              <a href="subject.html#21295">[ subject ]</a>
              <a href="author.html#21295">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Emile,

Thank you for the response. I tried all the steps from SSL troubleshoot
document.

In SSL connection to broker

when I make a connection, connection gets closed after a couple of seconds.
I tried sending 8 bytes my response is a string AMQP and it closes the
connection immediately.

Copied by response.

openssl s_client -connect localhost:5671 -cert client/cert.pem -key
client/key.pem -CAfile testca/cacert.pem
CONNECTED(00000003)
depth=1 CN = MyTestCA
verify return:1
depth=0 CN = Core28, O = server
verify return:1
---
Certificate chain
 0 s:/CN=Core28/O=server
   i:/CN=MyTestCA
 1 s:/CN=MyTestCA
   i:/CN=MyTestCA
---
Server certificate
-----BEGIN CERTIFICATE-----
MIIC4TCCAcmgAwIBAgIBATANBgkqhkiG9w0BAQUFADATMREwDwYDVQQDEwhNeVRl
c3RDQTAeFw0xMjA3MTMxMzE0MDFaFw0xMzA3MTMxMzE0MDFaMCQxETAPBgNVBAMM
CEdYQ29yZTI4MQ8wDQYDVQQKDAZzZXJ2ZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IB
DwAwggEKAoIBAQDBQpQ/dR8Aim9qqP2EfxStf+F6rME4soPxjY0PzFUzXKslNkTl
hCeoRSElnpOKwqK16SzOr2N9HNxivkqjmCvB3WSwqf6LT1gRuVzCB36zwD2dOIZ1
5JU4JWtAcpNZMhwMLkReE1h3L5UBXSjqKhpyuKdYqWKTMzFJiu28WFOLS/XMz6K2
Y9gk5O7zWu5AcJyJssr2xMisoNFmq5USfHkt5UWoHd3YzReUfxZmjhzSRT9TRvBY
NIlNm41JljtXBea9sITIuGq8eSgvO87+N70uSRcuXBCk9fn5S8I0TUh+4bUVnP8F
Ryg/uSO+WkNeOzjYUpaBAR/4v2UQTl4QlkgTAgMBAAGjLzAtMAkGA1UdEwQCMAAw
CwYDVR0PBAQDAgUgMBMGA1UdJQQMMAoGCCsGAQUFBwMBMA0GCSqGSIb3DQEBBQUA
A4IBAQCI41d129BaDyzihtGH6yu0dOT9mT0U1Mv5FcBTERmYsyn+Adjmo/+jF9HZ
Q3m1Wc7hV30nSnhJPUKV8dgDPKUNt4Mj3ZRsPZUEFv128rbkk9der+t3Z1tYKcrX
0HiYNqdsKyuhXUB8P4g1TW0t/pLhvsO734+eQDtjmi//K4AevS/hz+9cVhx9Asrk
ca/EdIw+xtRxNFbGCACZW8CUlP24z7YL3QYbZA44H9jKMHNN0vwkeJ4nDiby0ySJ
FX5xDWMksSON636pachSqMzZL8dj3ijTfBEV7jLeH/fYkcK8K0rzzZVFhVrBnK+O
k/Uc5ZRhf9E5F9U3cLy0f7Br2eFp
-----END CERTIFICATE-----
subject=/CN=Core28/O=server
issuer=/CN=MyTestCA
---
Acceptable client certificate CA names
/CN=MyTestCA
---
SSL handshake has read 1663 bytes and written 2179 bytes
---
New, TLSv1/SSLv3, Cipher is AES256-SHA
Server public key is 2048 bit
Secure Renegotiation IS supported
Compression: NONE
Expansion: NONE
SSL-Session:
    Protocol  : TLSv1
    Cipher    : AES256-SHA
    Session-ID:
60281E9B3DA64177D15C7DC4E0F2C5467A76170ADFFF9C23C9A6AFEE3F8D5129
    Session-ID-ctx:
    Master-Key:
4111FDE14CC847C17445136C3057CBBDB5D23752AF61F2481BB6F259CBAE94C75E23FE85F20E83E12AD1EA3674709FDB
    Key-Arg   : None
    Krb5 Principal: None
    PSK identity: None
    PSK identity hint: None
    Start Time: 1342449654
    Timeout   : 300 (sec)
    Verify return code: 0 (ok)
---
closed

Thanks,
Prashanth.

On Fri, Jul 13, 2012 at 10:14 AM, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> On 13/07/12 15:02, Prashanth wrote:
</I>&gt;<i> &gt; I get a message Logging in: (end-of-stream)
</I>&gt;<i> &gt; connecting to server fails.
</I>&gt;<i>
</I>&gt;<i> It is challenging to assist here, given how little information you have
</I>&gt;<i> provided. As a first step could you try to verify your setup using the
</I>&gt;<i> troubleshooting steps outlined here:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/troubleshooting-ssl.html">http://www.rabbitmq.com/troubleshooting-ssl.html</A>
</I>&gt;<i>
</I>&gt;<i> Let us know how far you get, which of the steps fail and the diagnostic
</I>&gt;<i> output.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Emile
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120716/90045fe5/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120716/90045fe5/attachment.htm</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021257.html">[rabbitmq-discuss] RabbitMQ SSL
</A></li>
	<LI>Next message: <A HREF="021296.html">[rabbitmq-discuss] RabbitMQ SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21295">[ date ]</a>
              <a href="thread.html#21295">[ thread ]</a>
              <a href="subject.html#21295">[ subject ]</a>
              <a href="author.html#21295">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
