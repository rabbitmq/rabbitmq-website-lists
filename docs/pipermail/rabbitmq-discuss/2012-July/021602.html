<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Crashes - init terminating?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Crashes%20-%20init%20terminating%3F&In-Reply-To=%3CA5777F79-73AB-4CC6-9336-E13BDF155C6F%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021613.html">
   <LINK REL="Next"  HREF="021605.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Crashes - init terminating?</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Crashes%20-%20init%20terminating%3F&In-Reply-To=%3CA5777F79-73AB-4CC6-9336-E13BDF155C6F%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Crashes - init terminating?">steve at rabbitmq.com
       </A><BR>
    <I>Tue Jul 31 11:56:18 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021613.html">[rabbitmq-discuss] .NET ssl_upgrade_failure
</A></li>
        <LI>Next message: <A HREF="021605.html">[rabbitmq-discuss] Crashes - init terminating?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21602">[ date ]</a>
              <a href="thread.html#21602">[ thread ]</a>
              <a href="subject.html#21602">[ subject ]</a>
              <a href="author.html#21602">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dan,
Reposting on Discuss.  Please continue correspondence on ths rabbitmq-discuss mailing list.

From: 	Dan Dart &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dan at canddi.com</A>&gt;
Subject: 	Re: [rabbitmq-discuss] Crashes - init terminating?
Date: 	30 July 2012 18:07:05 GMT+01:00
To: 	Steve Powell &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">steve at rabbitmq.com</A>&gt;

&gt;<i> Did you run `sudo port load rabbitmq-server` which starts the service in
</I>&gt;<i> the background?
</I>No - and I've never had to before.

&gt;<i> 
</I>&gt;<i> Now accessing the rabbitmqctl and rabbitmq-server scripts from the
</I>&gt;<i> command line requires that you issue them as root, done with sudo:
</I>&gt;<i> 
</I>&gt;<i>    sudo rabbitmqctl status
</I>&gt;<i> 
</I>&gt;<i> This should give a reasonable response.
</I>
Doesn't look reasonable to me:
{&quot;init terminating in
do_boot&quot;,{undef,[{rabbit_control,start,[]},{init,start_it,1},{init,start_em,1}]}}

Crash dump was written to: erl_crash.dump
init terminating in do_boot ()

&gt;<i> To see if the server has problems you should look in the log directory
</I>&gt;<i> (/opt/local/var/log/rabbitmq/*) where you should have two logs for each
</I>&gt;<i> rabbitmq node you run. (By default this is rabbit@&lt;hostname&gt;.log and
</I>&gt;<i> -sasl.log.) I suspect there will be nothing untoward there.
</I>
Getting lots of connection_closed_abruptly - although I suspect this is normal.
And nothing in the sasl log.

&gt;<i> I cannot reproduce your symptoms unless I disable the -pa option on the
</I>&gt;<i> (eventual) erl command, so it looks as though you have an environment
</I>&gt;<i> problem. Please check the following directory:
</I>&gt;<i> 
</I>&gt;<i>    /opt/local/lib/rabbitmq/lib/rabbitmq_server-2.8.2/
</I>&gt;<i> 
</I>&gt;<i> and see if the scripts are in sbin/, and there are a lot of beam files
</I>&gt;<i> in ebin/.
</I>[Dan-Darts-iMac:lib/rabbitmq_server-2.8.2/sbin] DanDart% ls
rabbitmq-defaults	rabbitmq-env		rabbitmq-plugins	rabbitmq-server		rabbitmqctl

[Dan-Darts-iMac:lib/rabbitmq_server-2.8.2/ebin] DanDart% ls
credit_flow.beam
[...snip...]

&gt;<i> PS:
</I>&gt;<i> [You might be using a non-standard prefix for macport install
</I>&gt;<i> files -- if so, the /opt/local in this directory path might be something
</I>&gt;<i> different for you -- and we may have a bug, since we are supposed to
</I>&gt;<i> cope with that.]
</I>
Nope - it's the same. I just used a standard &quot;port install
rabbitmq-server&quot; and don't remember doing anything that would break
it.

Is that any help?

Regards
Dan

Steve Powell  (a happy bunny)
----------yet more definitions from the SPD----------
corrugate (n.) T.V. soap scandal.
olympic (n.) A camp road-digger.
jamboree (n.) A conserve made from French cheese.

On 19 Jun 2012, at 14:04, Steve Powell wrote:

&gt;<i> Hi Dan,
</I>&gt;<i> 
</I>&gt;<i> The Erlang crash dumps for rabbitmq-server and rabbitmqctl are because
</I>&gt;<i> of failures to run these Erlang programs (actually a prelaunch program
</I>&gt;<i> in the former case). They should not affect the rabbitmq-server service
</I>&gt;<i> if it is already running (which it appears to be since you say sending
</I>&gt;<i> and receiving messages are fine).
</I>&gt;<i> 
</I>&gt;<i> I assume that by the latest version of rabbitmq you are running
</I>&gt;<i> rabbitmq-server 2.8.2, and Erlang R15B, which is what I get from my
</I>&gt;<i> macports (on OS X 10.6.8, macports 2.1.1). You should check that any
</I>&gt;<i> earlier version(s) is(are) uninstalled.
</I>&gt;<i> 
</I>&gt;<i> Did you run `sudo port load rabbitmq-server` which starts the service in
</I>&gt;<i> the background?
</I>&gt;<i> 
</I>&gt;<i> Now accessing the rabbitmqctl and rabbitmq-server scripts from the
</I>&gt;<i> command line requires that you issue them as root, done with sudo:
</I>&gt;<i> 
</I>&gt;<i>    sudo rabbitmqctl status
</I>&gt;<i> 
</I>&gt;<i> This should give a reasonable response.
</I>&gt;<i> 
</I>&gt;<i> To see if the server has problems you should look in the log directory
</I>&gt;<i> (/opt/local/var/log/rabbitmq/*) where you should have two logs for each
</I>&gt;<i> rabbitmq node you run. (By default this is rabbit@&lt;hostname&gt;.log and
</I>&gt;<i> -sasl.log.) I suspect there will be nothing untoward there.
</I>&gt;<i> 
</I>&gt;<i> I cannot reproduce your symptoms unless I disable the -pa option on the
</I>&gt;<i> (eventual) erl command, so it looks as though you have an environment
</I>&gt;<i> problem. Please check the following directory:
</I>&gt;<i> 
</I>&gt;<i>    /opt/local/lib/rabbitmq/lib/rabbitmq_server-2.8.2/
</I>&gt;<i> 
</I>&gt;<i> and see if the scripts are in sbin/, and there are a lot of beam files
</I>&gt;<i> in ebin/.
</I>&gt;<i> 
</I>&gt;<i> PS: 
</I>&gt;<i> [You might be using a non-standard prefix for macport install
</I>&gt;<i> files -- if so, the /opt/local in this directory path might be something
</I>&gt;<i> different for you -- and we may have a bug, since we are supposed to
</I>&gt;<i> cope with that.]
</I>&gt;<i> 
</I>&gt;<i> Steve Powell  (a happy bunny)
</I>&gt;<i> ----------yet more definitions from the SPD----------
</I>&gt;<i> corrugate (n.) T.V. soap scandal.
</I>&gt;<i> olympic (n.) A camp road-digger.
</I>&gt;<i> jamboree (n.) A conserve made from French cheese.
</I>&gt;<i> 
</I>&gt;<i> On 19 Jun 2012, at 10:44, Dan Dart wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I'm having a problem in that sending and receiving messages is fine,
</I>&gt;&gt;<i> but doing either of these commands:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> rabbitmqctl list_exchanges
</I>&gt;&gt;<i> rabbitmqctl list_queues
</I>&gt;&gt;<i> rabbitmqctl list_bindings
</I>&gt;&gt;<i> rabbitmqctl delete_user
</I>&gt;&gt;<i> rabbitmqctl add_user
</I>&gt;&gt;<i> rabbitmqctl delete_vhost
</I>&gt;&gt;<i> rabbitmqctl add_vhost
</I>&gt;&gt;<i> rabbitmqctl set_permissions
</I>&gt;&gt;<i> rabbitmqctl stop
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> echoes the following to stderr:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> {&quot;init terminating in
</I>&gt;&gt;<i> do_boot&quot;,{undef,[{rabbit_control,start,[]},{init,start_it,1},{init,start_em,1}]}}
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Crash dump was written to: erl_crash.dump
</I>&gt;&gt;<i> init terminating in do_boot ()
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> and rabbitmq-server results in:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> {&quot;init terminating in
</I>&gt;&gt;<i> do_boot&quot;,{undef,[{rabbit_prelaunch,start,[]},{init,start_it,1},{init,start_em,1}]}}
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Crash dump was written to: erl_crash.dump
</I>&gt;&gt;<i> init terminating in do_boot ()
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> My Rabbit version is the latest from MacPorts on OSX 10.6 (and will
</I>&gt;&gt;<i> not tell me itself).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> My erl_crash.dump:
</I>&gt;&gt;<i> <A HREF="https://gist.github.com/2953290">https://gist.github.com/2953290</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Cheers
</I>&gt;&gt;<i> Dan
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120731/cab6d6b8/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120731/cab6d6b8/attachment.htm</A>&gt;
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021613.html">[rabbitmq-discuss] .NET ssl_upgrade_failure
</A></li>
	<LI>Next message: <A HREF="021605.html">[rabbitmq-discuss] Crashes - init terminating?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21602">[ date ]</a>
              <a href="thread.html#21602">[ thread ]</a>
              <a href="subject.html#21602">[ subject ]</a>
              <a href="author.html#21602">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
