<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clustering issue: Error: unable to connect to node rabbit at CNTD3BWEB87O: nodedown
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%20issue%3A%20Error%3A%20unable%20to%20connect%0A%20to%20node%20rabbit%40CNTD3BWEB87O%3A%20nodedown&In-Reply-To=%3C587CA72CD3D0044E8AC7E34292AEE2EE5E7384A0%40retda2mbxp006.legal.regn.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021165.html">
   <LINK REL="Next"  HREF="021157.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clustering issue: Error: unable to connect to node rabbit at CNTD3BWEB87O: nodedown</H1>
    <B>Wood, Eric (LNG-RDU)</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%20issue%3A%20Error%3A%20unable%20to%20connect%0A%20to%20node%20rabbit%40CNTD3BWEB87O%3A%20nodedown&In-Reply-To=%3C587CA72CD3D0044E8AC7E34292AEE2EE5E7384A0%40retda2mbxp006.legal.regn.net%3E"
       TITLE="[rabbitmq-discuss] Clustering issue: Error: unable to connect to node rabbit at CNTD3BWEB87O: nodedown">eric.wood at lexisnexis.com
       </A><BR>
    <I>Wed Jul 11 17:55:08 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021165.html">[rabbitmq-discuss] Clustering issue: Error: unable to connect to node rabbit at CNTD3BWEB87O: nodedown
</A></li>
        <LI>Next message: <A HREF="021157.html">[rabbitmq-discuss] Handle Stale Connections on Clients
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21187">[ date ]</a>
              <a href="thread.html#21187">[ thread ]</a>
              <a href="subject.html#21187">[ subject ]</a>
              <a href="author.html#21187">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here was the issue that I had ...
When I installed Rabbit MQ on my windows server, it created a .erland.cookie file in both:
   1) c:\Windows
   2) c:\users\&lt;adminUser&gt;

I installed the software under the user &lt;adminUser&gt;, but the service that it created was running under a system account and creating a cookie file under the c:\windows folder.  I changed the service to run under the &lt;adminUser&gt; account and then copied the .erlang.cokkie file to the c:\users\&lt;adminuser&gt; folder on all servers abnd was able to successfully cluster my nodes.



-----Original Message-----
From: Emile Joubert [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>] 
Sent: Wednesday, July 11, 2012 5:47 AM
To: Wood, Eric (LNG-RDU)
Cc: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Clustering issue: Error: unable to connect to node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CNTD3BWEB87O</A>: nodedown

Hi,

On 10/07/12 17:33, Wood, Eric (LNG-RDU) wrote:
&gt;<i> Help.
</I>
Your earlier emails had
- cookie hash: VWZk1leRufUBRYr1dwMuJg==
but more recently you report
- cookie hash: 0xT5raNnyX73mPb3lJZWuQ==

If the cookie hash reported by rabbitmqctl differs from the hash that appears in the startup banner then you will be unable to manage that node. The startup banner contains an ASCII-art rabbit, platform version numbers and some diagnostic information, such as the location of the active config file, logfiles, etc. Amongst this diagnostic information is the cookie hash. Compare this with the information reported by rabbitmqctl - you will probably find they are different, which means the cookie file was not copied over correctly. Make sure you follow the instructions about Erlang cookies on this page:
<A HREF="http://www.rabbitmq.com/install-windows-manual.html">http://www.rabbitmq.com/install-windows-manual.html</A>

&gt;<i> I have tried this on several servers and get the same results.  What 
</I>&gt;<i> steps are required to execute when I copy the cookie file from one 
</I>&gt;<i> server to the next?  I copy it after both installations have been 
</I>&gt;<i> completed and both nodes are up and running as &quot;detached&quot; nodes.
</I>
You will need to restart the nodes after copying the cookie files. Their contents is only read at startup, so modifications will not affect a running broker.

You might be copying the cookie file to the wrong location. If you are running the broker as a non-system user then the file should be copied to %HOMEDRIVE%\%HOMEPATH%, or what the Windows API call
GetWindowsDirectory() would return. If running the broker as a service, as a system user then use %windir% (typically C:\WINDOWS).



-Emile


</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021165.html">[rabbitmq-discuss] Clustering issue: Error: unable to connect to node rabbit at CNTD3BWEB87O: nodedown
</A></li>
	<LI>Next message: <A HREF="021157.html">[rabbitmq-discuss] Handle Stale Connections on Clients
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21187">[ date ]</a>
              <a href="thread.html#21187">[ thread ]</a>
              <a href="subject.html#21187">[ subject ]</a>
              <a href="author.html#21187">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
