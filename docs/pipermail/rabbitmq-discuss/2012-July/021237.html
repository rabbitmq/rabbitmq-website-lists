<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cluster	setup	:	rabbitmq	server	stops	responding to rabbitmqctl commands
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%0A%09setup%09%3A%09rabbitmq%09server%09stops%09responding%20to%20rabbitmqctl%20commands&In-Reply-To=%3CEEA1DC407D5C23479BEAAF68C3D560400531C8C8%40048-CH1MPN1-213.048d.mgd.msft.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021216.html">
   <LINK REL="Next"  HREF="021247.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cluster	setup	:	rabbitmq	server	stops	responding to rabbitmqctl commands</H1>
    <B>sanjiv.kumar.jha at accenture.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%0A%09setup%09%3A%09rabbitmq%09server%09stops%09responding%20to%20rabbitmqctl%20commands&In-Reply-To=%3CEEA1DC407D5C23479BEAAF68C3D560400531C8C8%40048-CH1MPN1-213.048d.mgd.msft.net%3E"
       TITLE="[rabbitmq-discuss] Cluster	setup	:	rabbitmq	server	stops	responding to rabbitmqctl commands">sanjiv.kumar.jha at accenture.com
       </A><BR>
    <I>Fri Jul 13 07:05:51 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021216.html">[rabbitmq-discuss] Cluster setup	:	rabbitmq	server	stops	responding to rabbitmqctl commands
</A></li>
        <LI>Next message: <A HREF="021247.html">[rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding to	rabbitmqctl commands
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21237">[ date ]</a>
              <a href="thread.html#21237">[ thread ]</a>
              <a href="subject.html#21237">[ subject ]</a>
              <a href="author.html#21237">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Francesco for quick response!!

I don't have script as such to reproduce this issue and all these tests are performed manually.

However, I am repeating the following steps in order to reproduce this issue:

I have node A and B clustered and with HA queues on them

1st iteration:
  * Bring down A
  * Bring up A
  * Bring down B after A is brought up

2nd iteration:
  * Bring up B
  * Bring down A after B is brought up

3rd iteration:
  * Bring up A
  * Bring down B after A is brought up

Attaching logs for both the nodes.

Thanks,

Sanjiv


-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Francesco Mazzoli
Sent: 12 July 2012 18:56
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Cluster setup : rabbitmq server stops responding to rabbitmqctl commands

At Thu, 12 Jul 2012 12:57:31 +0000,
sanjiv kumar jha wrote:
&gt;<i> I tried replicating this using rabbitmq-server 2.8.4 version, but
</I>&gt;<i> noticed a different kind of issue. In current setup, 'rabbitmqctl
</I>&gt;<i> list_queues' is working whereas 'rabbitmqctl status' is not
</I>&gt;<i> responding. Even 'rabbitmqctl wait /var/run/rabbitmq/pid' does not respond, keeps waiting.
</I>
If I understand correctly the log you posted is on node-A *after* you brought down node-B, right? In any case, things look OK. Could you attach the logs in their entirety (both node A and B)?

The best thing would be for you to post a script that replicates what you're trying to do and reproduces the behaviour you're seeing. Needless to say I have tried to replicate your problem to no avail.

--
Francesco * Often in error, never in doubt _______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>


Subject to local law, communications with Accenture and its affiliates including telephone calls and emails (including content), may be monitored by our systems for the purposes of security and the assessment of internal compliance with Accenture policy.
______________________________________________________________________________________

www.accenture.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: RabbitMQ_HA_Issue_Node-A_startup_log
Type: application/octet-stream
Size: 6557 bytes
Desc: RabbitMQ_HA_Issue_Node-A_startup_log
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120713/31f235fb/attachment.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120713/31f235fb/attachment.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: RabbitMQ_HA_Issue_Node-B_startup_log
Type: application/octet-stream
Size: 12795 bytes
Desc: RabbitMQ_HA_Issue_Node-B_startup_log
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120713/31f235fb/attachment-0001.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120713/31f235fb/attachment-0001.obj</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021216.html">[rabbitmq-discuss] Cluster setup	:	rabbitmq	server	stops	responding to rabbitmqctl commands
</A></li>
	<LI>Next message: <A HREF="021247.html">[rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding to	rabbitmqctl commands
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21237">[ date ]</a>
              <a href="thread.html#21237">[ thread ]</a>
              <a href="subject.html#21237">[ subject ]</a>
              <a href="author.html#21237">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
