<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consumer&In-Reply-To=%3C4FF19C9A.8050600%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020982.html">
   <LINK REL="Next"  HREF="020981.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Consumer</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consumer&In-Reply-To=%3C4FF19C9A.8050600%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Consumer">emile at rabbitmq.com
       </A><BR>
    <I>Mon Jul  2 14:05:30 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020982.html">[rabbitmq-discuss] Failure starting up after power pulled from machine
</A></li>
        <LI>Next message: <A HREF="020981.html">[rabbitmq-discuss] Consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20973">[ date ]</a>
              <a href="thread.html#20973">[ thread ]</a>
              <a href="subject.html#20973">[ subject ]</a>
              <a href="author.html#20973">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 30/06/12 22:16, Yurisleidy Hern&#225;ndez Moya wrote:
&gt;<i> In the Producer I need to know if there are Consumers connected
</I>
&gt;<i> 1- to use the method getConsumerCount of the queue.
</I>
The other problem with this approach is that you will fail to account
for any clients consuming messages synchronously, using basic.get.

Another option that you may consider is to monitor the queue length
instead of the number of consumers. The assumption is that if the queue
gets too long then there are probably too few or no consumers servicing
that queue.

&gt;<i> 2-  Declaring a queue as passive in the Producer and autodelete in the
</I>&gt;<i> Consumer. Thus, the queue  only exists when the Consumer is connected
</I>&gt;<i> and the queue is destroyed when the Consumer dies.
</I>
A possible solution is to publish with the &quot;immediate&quot; flag:

<A HREF="http://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.publish.immediate">http://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.publish.immediate</A>

This will immediately return the messages to the publisher if the
message cannot be routed to a queue with consumers.


-Emile


</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020982.html">[rabbitmq-discuss] Failure starting up after power pulled from machine
</A></li>
	<LI>Next message: <A HREF="020981.html">[rabbitmq-discuss] Consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20973">[ date ]</a>
              <a href="thread.html#20973">[ thread ]</a>
              <a href="subject.html#20973">[ subject ]</a>
              <a href="author.html#20973">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
