<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding	to	rabbitmqctl	commands
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%0A%09Cluster%09setup%09%3A%09rabbitmq%09server%09stops%09responding%09to%09rabbitmqctl%09commands&In-Reply-To=%3CEEA1DC407D5C23479BEAAF68C3D560400531CB87%40048-CH1MPN1-213.048d.mgd.msft.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021253.html">
   <LINK REL="Next"  HREF="021178.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding	to	rabbitmqctl	commands</H1>
    <B>sanjiv.kumar.jha at accenture.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%0A%09Cluster%09setup%09%3A%09rabbitmq%09server%09stops%09responding%09to%09rabbitmqctl%09commands&In-Reply-To=%3CEEA1DC407D5C23479BEAAF68C3D560400531CB87%40048-CH1MPN1-213.048d.mgd.msft.net%3E"
       TITLE="[rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding	to	rabbitmqctl	commands">sanjiv.kumar.jha at accenture.com
       </A><BR>
    <I>Mon Jul 16 14:14:05 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021253.html">[rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding	to	rabbitmqctl	commands
</A></li>
        <LI>Next message: <A HREF="021178.html">[rabbitmq-discuss] Problem in checkinh out rabbitMQ	public	umbrella
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21286">[ date ]</a>
              <a href="thread.html#21286">[ thread ]</a>
              <a href="subject.html#21286">[ subject ]</a>
              <a href="author.html#21286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Francesco,

I am using the rabbitmq.config file to setup the cluster:


[{rabbit, [{cluster_nodes, ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A>', '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A>']}]}].


I am doing the similar steps (more or less) as described in your script. Also, this cluster sits on two different VMs.

I am checking on whether two clocks are in synch or not and will get back to you.

Thanks,

Sanjiv



-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Francesco Mazzoli
Sent: 13 July 2012 16:45
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Cluster setup : rabbitmq server stops responding to rabbitmqctl commands

At Fri, 13 Jul 2012 10:23:15 +0000,
Hi Sanjiv,

I have hacked up a quick script to try to reproduce your problem. It is a bash script that starts/stops/cluster and a python script used by the bash script to declare 100 HA queues; I have attached them. I'm running the two nodes on the same machine, this makes a difference but hopefully the problem is not there.

Looking at your logs, it looks like DV1SP001 sees BSPEVSDK001 going down, but there is no trace of that in the BSPEVSDK001 logs, which looks like it's running all the way through. Are the clocks on the two nodes synchronised?  If they are, what I see in the logs looks like a netsplit, which is a bad thing for rabbit clusters, and can cause mnesia to act funny.

It's also not clear from your email and the logs how you set up the cluster in the first place.

Can you confirm that what I do in the script is more or less what you are doing?
If it's not, can you give more details on your setup?

--
Francesco * Often in error, never in doubt


Subject to local law, communications with Accenture and its affiliates including telephone calls and emails (including content), may be monitored by our systems for the purposes of security and the assessment of internal compliance with Accenture policy.
______________________________________________________________________________________

www.accenture.com

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021253.html">[rabbitmq-discuss]	Cluster	setup	:	rabbitmq	server	stops	responding	to	rabbitmqctl	commands
</A></li>
	<LI>Next message: <A HREF="021178.html">[rabbitmq-discuss] Problem in checkinh out rabbitMQ	public	umbrella
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21286">[ date ]</a>
              <a href="thread.html#21286">[ thread ]</a>
              <a href="subject.html#21286">[ subject ]</a>
              <a href="author.html#21286">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
