<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] What can I do about this ioloop error and subsequent write buffer exceeded warnings?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20What%20can%20I%20do%20about%20this%20ioloop%20error%20and%0A%20subsequent%20write%20buffer%20exceeded%20warnings%3F&In-Reply-To=%3CCALTR4%3DO93vYiboac8CG_bLgcdqdAUgF0Ouf%3Dd83HVOq5jD8y8g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021012.html">
   <LINK REL="Next"  HREF="021004.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] What can I do about this ioloop error and subsequent write buffer exceeded warnings?</H1>
    <B>&#197;ke Kullenberg</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20What%20can%20I%20do%20about%20this%20ioloop%20error%20and%0A%20subsequent%20write%20buffer%20exceeded%20warnings%3F&In-Reply-To=%3CCALTR4%3DO93vYiboac8CG_bLgcdqdAUgF0Ouf%3Dd83HVOq5jD8y8g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] What can I do about this ioloop error and subsequent write buffer exceeded warnings?">ake.kullenberg at gmail.com
       </A><BR>
    <I>Tue Jul  3 03:53:27 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021012.html">[rabbitmq-discuss] Rabbitmq-server Fails to Start
</A></li>
        <LI>Next message: <A HREF="021004.html">[rabbitmq-discuss] time to live (ttl) in c++ client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21007">[ date ]</a>
              <a href="thread.html#21007">[ thread ]</a>
              <a href="subject.html#21007">[ subject ]</a>
              <a href="author.html#21007">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes I am using one connection per thread. It works well, but I'd say once
every day this error pops up. The messaging performed is not very high
intensity so I don't think it is a performance issue.

I have attached the sender thread code. The code is very straight forward,
pretty much taken straight from the pika website. The ioloop is started in
run, and then the main thread will call the send function to send messages.

I am going to do some digging on my end to try to catch the error upstream
from where I catch it now.

On Sat, Jun 30, 2012 at 2:54 AM, Gavin M. Roy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gmr at myyearbook.com</A>&gt; wrote:

&gt;<i> Unless you're using a connection per thread, I'd not use threads. If you
</I>&gt;<i> want to create a simple example recreating the issue I can try and track it
</I>&gt;<i> down.
</I>&gt;<i>
</I>&gt;<i> Gavin
</I>&gt;<i>
</I>&gt;<i> On Friday, June 29, 2012 at 2:49 PM, Ask Solem wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 25 Jun 2012, at 10:18, c00kiemonster wrote:
</I>&gt;<i>
</I>&gt;<i> I have a server script running three threads. One main thread with the
</I>&gt;<i> inner core of the server instance, and then one receiver thread, and one
</I>&gt;<i> sender thread. The receiver thread has one asynchronous pika connection
</I>&gt;<i> receiving messages, and the sender thread has another asynchronous pika
</I>&gt;<i> connection sending messages. This server instance is running just fine, but
</I>&gt;<i> here and there this error pops up, and after the error comes write buffer
</I>&gt;<i> exceeded warnings. At this point I simply restart the server script and
</I>&gt;<i> everything is fine again.
</I>&gt;<i>
</I>&gt;<i> How can I track this issue down? It's not easy to replicate, usually it
</I>&gt;<i> happens every second day or so. I guess the question is actually two fold.
</I>&gt;<i> First, looking in the base_connection.py file on line 106, it seems that
</I>&gt;<i> the error variable passed to the _handle_error is None which makes it
</I>&gt;<i> problematic to get the error_code. At this point in the code it seems odd
</I>&gt;<i> for error to be None, but on line 137 error has a default value of None. So
</I>&gt;<i> the first thing is to try to figure out whether the error is a proper
</I>&gt;<i> error, or if it's just a bug somewhere in the event handling. Second, if it
</I>&gt;<i> turns out to be a proper error, how can I debug to see which message /
</I>&gt;<i> event triggered the error? Is there any way that I can see inspect the
</I>&gt;<i> traffic to try to find the bad message / event?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Looks like a bug in pika to me, maybe you should open up an issue
</I>&gt;<i> at <A HREF="https://github.com/pika/pika/issues">https://github.com/pika/pika/issues</A>
</I>&gt;<i>
</I>&gt;<i> This looks hard to track down indeed, but in general you should probably
</I>&gt;<i> expect
</I>&gt;<i> that such errors can happen, and retry the operation if it does.
</I>&gt;<i>
</I>&gt;<i> pika should raise some connection related error if there is no error code,
</I>&gt;<i> so that you can depend on catching some other exception than TypeError.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120703/531d4a39/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120703/531d4a39/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: example.py
Type: application/octet-stream
Size: 1292 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120703/531d4a39/attachment.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120703/531d4a39/attachment.obj</A>&gt;
</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021012.html">[rabbitmq-discuss] Rabbitmq-server Fails to Start
</A></li>
	<LI>Next message: <A HREF="021004.html">[rabbitmq-discuss] time to live (ttl) in c++ client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21007">[ date ]</a>
              <a href="thread.html#21007">[ thread ]</a>
              <a href="subject.html#21007">[ subject ]</a>
              <a href="author.html#21007">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
