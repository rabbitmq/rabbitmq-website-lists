<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Client 2.7.1 Memory Leak?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Client%202.7.1%20Memory%20Leak%3F&In-Reply-To=%3CCAHPrJT1spJk_tECuv4ZvBH3gd3PkQ-O6%3D37uyi_x73GpaxrJsg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021277.html">
   <LINK REL="Next"  HREF="021266.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Client 2.7.1 Memory Leak?</H1>
    <B>Vijay Lakshmi</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Client%202.7.1%20Memory%20Leak%3F&In-Reply-To=%3CCAHPrJT1spJk_tECuv4ZvBH3gd3PkQ-O6%3D37uyi_x73GpaxrJsg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Client 2.7.1 Memory Leak?">vijjivinay at gmail.com
       </A><BR>
    <I>Sat Jul 14 15:35:26 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021277.html">[rabbitmq-discuss] error while installing RabbitMQ from your APT repo
</A></li>
        <LI>Next message: <A HREF="021266.html">[rabbitmq-discuss] RabbitMQ Client 2.7.1 Memory Leak?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21265">[ date ]</a>
              <a href="thread.html#21265">[ thread ]</a>
              <a href="subject.html#21265">[ subject ]</a>
              <a href="author.html#21265">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We are using RabbitMQ 2.7.1 Java Client and Server 2.7.1.
While we were running load tests using our clients we observed that our
memory has reached to 2GB.

Below is the snapshot of heap analysis.

We are closing the channels properly using channel.close().
Could someone suggest what could be the problem for this memory leak. Do
the later versions of RabbitMQ solve this problem?


Instance Counts for All Classes (excluding platform)

311681 instances&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2finstances%2f0x77c6f06a0&gt;
 of class com.rabbitmq.client.impl.AMQCommand&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2fclass%2f0x77c6f06a0&gt;

311681 instances&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2finstances%2f0x77c6f3228&gt;
 of class com.rabbitmq.client.impl.CommandAssembler&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2fclass%2f0x77c6f3228&gt;

295730 instances&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2finstances%2f0x77d438380&gt;
 of class com.rabbitmq.client.impl.ChannelN&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2fclass%2f0x77d438380&gt;

295730 instances&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2finstances%2f0x77d43ff30&gt;
 of class com.rabbitmq.client.impl.ConsumerDispatcher&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2fclass%2f0x77d43ff30&gt;

295715 instances&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2finstances%2f0x77c60b280&gt;
 of class com.rabbitmq.client.ShutdownSignalException&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2fclass%2f0x77c60b280&gt;

295703 instances&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2finstances%2f0x77c75a540&gt;
 of class com.rabbitmq.client.impl.AMQImpl$Channel$Close&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2fclass%2f0x77c75a540&gt;

271315 instances&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2finstances%2f0x77d4d5590&gt;
 of class com.rabbitmq.client.QueueingConsumer&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2fclass%2f0x77d4d5590&gt;

60523 instances&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2finstances%2f0x77cea18a0&gt;
 of class org.json.simple.parser.Yytoken&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2fclass%2f0x77cea18a0&gt;

31600 instances&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2finstances%2f0x77c73fa58&gt;
 of class com.rabbitmq.client.AMQP$BasicProperties&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2fclass%2f0x77c73fa58&gt;

31210 instances&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2finstances%2f0x77d4d7358&gt;
 of class com.rabbitmq.client.QueueingConsumer$Delivery&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2fclass%2f0x77d4d7358&gt;

31209 instances&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2finstances%2f0x77d4dc1d0&gt;
 of class com.rabbitmq.client.Envelope&lt;redir.aspx?C=dba9a335a30e4feb822ceaa30de7f654&amp;URL=http%3a%2f%2flocalhost%3a7000%2fclass%2f0x77d4dc1d0&gt;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120714/53264700/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120714/53264700/attachment.htm</A>&gt;
</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021277.html">[rabbitmq-discuss] error while installing RabbitMQ from your APT repo
</A></li>
	<LI>Next message: <A HREF="021266.html">[rabbitmq-discuss] RabbitMQ Client 2.7.1 Memory Leak?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21265">[ date ]</a>
              <a href="thread.html#21265">[ thread ]</a>
              <a href="subject.html#21265">[ subject ]</a>
              <a href="author.html#21265">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
