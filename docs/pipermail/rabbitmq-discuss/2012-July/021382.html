<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Consumer's confirm
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consumer%27s%20confirm&In-Reply-To=%3C037FFC17-EA00-4079-B26E-B41E7D19A152%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021376.html">
   <LINK REL="Next"  HREF="021384.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Consumer's confirm</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consumer%27s%20confirm&In-Reply-To=%3C037FFC17-EA00-4079-B26E-B41E7D19A152%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Consumer's confirm">steve at rabbitmq.com
       </A><BR>
    <I>Thu Jul 19 11:38:45 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021376.html">[rabbitmq-discuss] Consumer's confirm
</A></li>
        <LI>Next message: <A HREF="021384.html">[rabbitmq-discuss] Consumer's confirm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21382">[ date ]</a>
              <a href="thread.html#21382">[ thread ]</a>
              <a href="subject.html#21382">[ subject ]</a>
              <a href="author.html#21382">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>ML,

The definitive guide to Publish-confirms is in the extensions
documentation [1], where it says:

&gt;<i> By confirming a message the broker assumes responsibility for it and
</I>&gt;<i> indicates that it has done something it deems reasonable with it.
</I>&gt;<i> Unroutable mandatory or immediate messages are confirmed right after
</I>&gt;<i> thebasic.return. Transient messages are confirmed as soon as they arrive
</I>&gt;<i> on all the queues they were routed to. Persistent messages are confirmed
</I>&gt;<i> when all queues have either delivered the message and received an
</I>&gt;<i> acknowledgement (if required), or persisted the message.
</I>
Notice that a confirmation does not necessarily mean that a consumer has
received and acknowledged the message; in general it means that RabbitMQ
has successfully 'processed' the message, which might mean 'persisted' it, if
it is persistent, or returned it, if it was unroutable (and marked
mandatory), etc.

You may wish to investigate the 'immediate' and 'mandatory' flags. Be
aware that you cannot use 'publisher confirms' on a transactional
channel.

[1] <A HREF="http://www.rabbitmq.com/extensions.html#confirms">http://www.rabbitmq.com/extensions.html#confirms</A>

Steve Powell
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">steve at rabbitmq.com</A>
[wrk: +44-2380-111-528] [mob: +44-7815-838-558]

On 19 Jul 2012, at 10:25, Mohsen Lotfizad wrote:

&gt;<i> Hi
</I>&gt;<i> 
</I>&gt;<i> I have a project that producers want to assure their message are delivered to consumers.
</I>&gt;<i> I make a Google search and find rabbitMQ transaction and confirm from (<A HREF="http://www.rabbitmq.com/blog/2011/02/10/introducing-publisher-confirms/">http://www.rabbitmq.com/blog/2011/02/10/introducing-publisher-confirms/</A>) . I download discussed examples and run them. But I comment the consumer part. with my surprise producer gives ack, even if I uncomment  consumer part and send NACK instead of ack!
</I>&gt;<i> 
</I>&gt;<i> what should I do to route consumers ack to producer?
</I>&gt;<i> 
</I>&gt;<i> ps: does com.rabbitmq.client.Channel#addReturnListener helps me?
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> 
</I>&gt;<i> Sincerely 
</I>&gt;<i> ML
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021376.html">[rabbitmq-discuss] Consumer's confirm
</A></li>
	<LI>Next message: <A HREF="021384.html">[rabbitmq-discuss] Consumer's confirm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21382">[ date ]</a>
              <a href="thread.html#21382">[ thread ]</a>
              <a href="subject.html#21382">[ subject ]</a>
              <a href="author.html#21382">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
