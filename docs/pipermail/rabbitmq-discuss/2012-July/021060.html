<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Messages lost with RabbitMQ Federation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Messages%20lost%20with%20RabbitMQ%20Federation&In-Reply-To=%3C4FF591ED.3010100%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021058.html">
   <LINK REL="Next"  HREF="021062.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Messages lost with RabbitMQ Federation</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Messages%20lost%20with%20RabbitMQ%20Federation&In-Reply-To=%3C4FF591ED.3010100%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Messages lost with RabbitMQ Federation">simon at rabbitmq.com
       </A><BR>
    <I>Thu Jul  5 14:09:01 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021058.html">[rabbitmq-discuss] Messages lost with RabbitMQ Federation
</A></li>
        <LI>Next message: <A HREF="021062.html">[rabbitmq-discuss] Messages lost with RabbitMQ Federation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21060">[ date ]</a>
              <a href="thread.html#21060">[ thread ]</a>
              <a href="subject.html#21060">[ subject ]</a>
              <a href="author.html#21060">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/07/12 12:08, Roman Gaufman wrote:
&gt;<i> However when I restart the VPN, the UK server has received 43737
</I>&gt;<i> messages while the US only received 43708 messages. Where did 29
</I>&gt;<i> messages disappear?
</I>
Is it instead possible that 29 messages have been duplicated? Remember 
that when you kill an AMQP connection where A is consuming from B, A can 
have sent acknowledgements which B has not yet received. In this case 
when the federation link comes back up again, those messages will be 
retransmitted. You will be able to see this as there will be a 
redelivered flag set in the federation headers. (But don't just throw 
away redelivered messages - they might not have reached A when the 
connection went down.)

I suggest you modify your tests to send a fixed number of messages and 
see what happens.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021058.html">[rabbitmq-discuss] Messages lost with RabbitMQ Federation
</A></li>
	<LI>Next message: <A HREF="021062.html">[rabbitmq-discuss] Messages lost with RabbitMQ Federation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21060">[ date ]</a>
              <a href="thread.html#21060">[ thread ]</a>
              <a href="subject.html#21060">[ subject ]</a>
              <a href="author.html#21060">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
