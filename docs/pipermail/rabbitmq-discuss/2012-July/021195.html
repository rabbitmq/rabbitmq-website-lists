<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Handle Stale Connections on Clients
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Handle%20Stale%20Connections%20on%20Clients&In-Reply-To=%3C1342042707718-20725.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021193.html">
   <LINK REL="Next"  HREF="021213.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Handle Stale Connections on Clients</H1>
    <B>cogitate</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Handle%20Stale%20Connections%20on%20Clients&In-Reply-To=%3C1342042707718-20725.post%40n5.nabble.com%3E"
       TITLE="[rabbitmq-discuss] Handle Stale Connections on Clients">monish.unni at gmail.com
       </A><BR>
    <I>Wed Jul 11 22:38:27 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021193.html">[rabbitmq-discuss] Handle Stale Connections on Clients
</A></li>
        <LI>Next message: <A HREF="021213.html">[rabbitmq-discuss] Handle Stale Connections on Clients
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21195">[ date ]</a>
              <a href="thread.html#21195">[ thread ]</a>
              <a href="subject.html#21195">[ subject ]</a>
              <a href="author.html#21195">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Gary! 
i also use spring-amqp and amqp inbound listener in spring-integration.
however, my issue is with reply-queue implementation of spring-amqp. i need
pre-made reply-queues that can be re-used (setup by configuration) even for
RPC semantics. i believe spring-amqp for RPC uses anonymous reply-queues and
also does consumer.cancel(benchmarks showed a 5ms delay for this on 24 core
cpu with broker and client running on the same box), which turns out to have
performance impact. thus, this rules out use of RabbitTemplate ( i wish it
had a way to use pre-made reply-queues that could be re-used).

thus, my wrappers around raw rabbitmq apis and even if i use
CachingConnectionFactory, i'd need to register a callback listener to
re-register my channels and reply-queues.

will definitely look at RabbitAdmin to learn how to do this.

thanks and regards,
-monish


Gary Russell wrote
&gt;<i> 
</I>&gt;<i> See
</I>&gt;<i> <A HREF="http://static.springsource.org/spring-amqp/docs/1.1.1.RELEASE/reference/html/#d0e999">http://static.springsource.org/spring-amqp/docs/1.1.1.RELEASE/reference/html/#d0e999</A>
</I>&gt;<i> 
</I>&gt;<i> It shouldn't take much heavy lifting to use spring-amqp instead of the raw
</I>&gt;<i> apis, and it will take care of reconnecting, setting up queues etc, via
</I>&gt;<i> the ConnectionListener callback in the RabbitAdmin class.
</I>&gt;<i> 
</I>&gt;<i> On the receiving side, you don't have to write any special listeners etc
</I>&gt;<i> to use spring-amqp; you can just write your code as a POJO and the
</I>&gt;<i> container uses an adapter to call your code. On the outbound side just use
</I>&gt;<i> a RabbitTemplate; in most cases you can use high-level APIs, while still
</I>&gt;<i> having access to the low level APIs (channel) if you ever need them.
</I>&gt;<i> 
</I>&gt;<i> If you can't move to spring-amqp, you might be able to leverage some of
</I>&gt;<i> the code from RabbitAdmin.
</I>&gt;<i> 
</I>&gt;<i> Gary
</I>&gt;<i> 
</I>

--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/Handle-Stale-Connections-on-Clients-tp20687p20725.html">http://rabbitmq.1065348.n5.nabble.com/Handle-Stale-Connections-on-Clients-tp20687p20725.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021193.html">[rabbitmq-discuss] Handle Stale Connections on Clients
</A></li>
	<LI>Next message: <A HREF="021213.html">[rabbitmq-discuss] Handle Stale Connections on Clients
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21195">[ date ]</a>
              <a href="thread.html#21195">[ thread ]</a>
              <a href="subject.html#21195">[ subject ]</a>
              <a href="author.html#21195">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
