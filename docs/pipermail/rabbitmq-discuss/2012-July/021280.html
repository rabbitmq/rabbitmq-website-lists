<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Crash with active-active setup,	durable and mirrored queues and persistent messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Crash%20with%20active-active%20setup%2C%0A%09durable%20and%20mirrored%20queues%20and%20persistent%20messages&In-Reply-To=%3C6B5EF8EE-2111-4249-BBA6-D7D9F7C37596%40internations.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021354.html">
   <LINK REL="Next"  HREF="021282.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Crash with active-active setup,	durable and mirrored queues and persistent messages</H1>
    <B>Lars Strojny</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Crash%20with%20active-active%20setup%2C%0A%09durable%20and%20mirrored%20queues%20and%20persistent%20messages&In-Reply-To=%3C6B5EF8EE-2111-4249-BBA6-D7D9F7C37596%40internations.org%3E"
       TITLE="[rabbitmq-discuss] Crash with active-active setup,	durable and mirrored queues and persistent messages">lars.strojny at internations.org
       </A><BR>
    <I>Mon Jul 16 11:32:24 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021354.html">[rabbitmq-discuss] Cluster Setup
</A></li>
        <LI>Next message: <A HREF="021282.html">[rabbitmq-discuss] Crash with active-active setup, durable and mirrored queues and persistent messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21280">[ date ]</a>
              <a href="thread.html#21280">[ thread ]</a>
              <a href="subject.html#21280">[ subject ]</a>
              <a href="author.html#21280">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everybody,

as discussed on IRC, we had a crash with our active/active setup. We have two servers, rabbit01 and rabbit02, both disk nodes. Our queues are all durable and mirrored. All messages have the X-HA-Policy of &quot;all&quot;. We use haproxy as a load balancer.

Unfortunately I was not able to reproduce the crash. A little context as a long shot: we were deploying a new version of our software. Our deployment process does queue housekeeping (creating queues and exchanges, adding routing keys). During the deployment at least one consumer was running that processed messages. The consumer does the usual read, accept/reject pattern.

RabbitMQ Log message: <A HREF="http://pastebin.com/wjYjz4H4">http://pastebin.com/wjYjz4H4</A>
Our application log messages (not sure if that is helpful): <A HREF="http://pastebin.com/DrQwKuwL">http://pastebin.com/DrQwKuwL</A>
rabbitmq-server --version: <A HREF="http://pastebin.com/nX3PuaTU">http://pastebin.com/nX3PuaTU</A>

Best regards,
-- 
Lars Strojny
Chief Technical Officer

InterNations GmbH
Schwanthalerstrasse 39
80336 M&#252;nchen
Germany
 
Phone:        +49 - (0)89 - 46 133 24 - 63
Fax:          +49 - (0)89 - 46 133 24 - 99
Mobile:       +49 - (0)151 - 2351 5701
Email:        <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lars.strojny at internations.org</A>
 
www.internations.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120716/58f1e99e/attachment.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120716/58f1e99e/attachment.pgp</A>&gt;
</PRE>





































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021354.html">[rabbitmq-discuss] Cluster Setup
</A></li>
	<LI>Next message: <A HREF="021282.html">[rabbitmq-discuss] Crash with active-active setup, durable and mirrored queues and persistent messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21280">[ date ]</a>
              <a href="thread.html#21280">[ thread ]</a>
              <a href="subject.html#21280">[ subject ]</a>
              <a href="author.html#21280">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
