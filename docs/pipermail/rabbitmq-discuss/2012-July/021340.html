<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] help - design pattern for an our use case
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20help%20-%20design%20pattern%20for%20an%20our%20use%20case&In-Reply-To=%3CCAEMO9cBFeuTCn-fbftXjGeGTBY2vRXBQEKr3mpk4sDVo%2B7G5KA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021337.html">
   <LINK REL="Next"  HREF="021346.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] help - design pattern for an our use case</H1>
    <B>Bhaskar teja</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20help%20-%20design%20pattern%20for%20an%20our%20use%20case&In-Reply-To=%3CCAEMO9cBFeuTCn-fbftXjGeGTBY2vRXBQEKr3mpk4sDVo%2B7G5KA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] help - design pattern for an our use case">prudhviy at gmail.com
       </A><BR>
    <I>Wed Jul 18 06:41:07 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021337.html">[rabbitmq-discuss] Status of RabbitMQ-C
</A></li>
        <LI>Next message: <A HREF="021346.html">[rabbitmq-discuss] help - design pattern for an our use case
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21340">[ date ]</a>
              <a href="thread.html#21340">[ thread ]</a>
              <a href="subject.html#21340">[ subject ]</a>
              <a href="author.html#21340">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

Our website have daily active users around 50,000 and we want use rabbitmq
as message broker for &quot;~real time web notifications&quot; for lot of events
generated by users.
Need some help in designing for our use case. our requirements are as
follows,

1. Users are part of different communities, a user can be part of multiple
communities.
2. when a user uploads a Image, all the users in that community need to be
notified like on facebook.
3. users can form groups inside each community. the targeted group alone
need to be notified based on scenario.

here, user uploading an image is just one of the scenarios we have.
right now we have designed the following way,

Producer -
      Exchange name - &quot;web notifications&quot;
      Exchange Type - &quot;direct&quot;
      Routing key - &quot;gallery&quot;
      message body - { producer_user_Id: 123, target_user_Ids: [23, 45,
56], type: &quot;image_upload&quot; }
Consumer -
      Exchange name - &quot;web notifications&quot;
      Exchange type - &quot;direct&quot;
      Routing key - &quot;gallery&quot;
      queue name - no name given - auto generated
we are consuming the messages and processing them based on type in message
body and storing it in redis for each user in target_user_Ids,
so regardless of user being online or offline we are persisting
notifications and delivering them once user logs in.
we are not sure if the current design is proper since all messages from 50k
users are routed to only few queues( &lt; 10 ) and few worker-consumers.
we also need to notify the users via e-mail about the events.
What is a good design pattern for our use case - like number of queues?,
exchange type?, number of exchanges( web, e-mail ) ??
Please let me know if anyone need more information.

Thank you,
Bhaskar teja
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120718/2ede5294/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120718/2ede5294/attachment.htm</A>&gt;
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021337.html">[rabbitmq-discuss] Status of RabbitMQ-C
</A></li>
	<LI>Next message: <A HREF="021346.html">[rabbitmq-discuss] help - design pattern for an our use case
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21340">[ date ]</a>
              <a href="thread.html#21340">[ thread ]</a>
              <a href="subject.html#21340">[ subject ]</a>
              <a href="author.html#21340">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
