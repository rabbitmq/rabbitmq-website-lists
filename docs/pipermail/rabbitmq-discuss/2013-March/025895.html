<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq_mochiweb timeout fix is in rabbitmq	2.7.1?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq_mochiweb%20timeout%20fix%20is%20in%20rabbitmq%0A%092.7.1%3F&In-Reply-To=%3C5F389C517756284F80239F55BCA5DDDD67F0245F%40G4W3295.americas.hpqcorp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025893.html">
   <LINK REL="Next"  HREF="025900.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq_mochiweb timeout fix is in rabbitmq	2.7.1?</H1>
    <B>Rosa, Andrea (HP Cloud Services)</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq_mochiweb%20timeout%20fix%20is%20in%20rabbitmq%0A%092.7.1%3F&In-Reply-To=%3C5F389C517756284F80239F55BCA5DDDD67F0245F%40G4W3295.americas.hpqcorp.net%3E"
       TITLE="[rabbitmq-discuss] rabbitmq_mochiweb timeout fix is in rabbitmq	2.7.1?">andrea.rosa at hp.com
       </A><BR>
    <I>Wed Mar 13 09:59:42 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025893.html">[rabbitmq-discuss] Calling unbind() without calling bind()
</A></li>
        <LI>Next message: <A HREF="025900.html">[rabbitmq-discuss] rabbitmq_mochiweb timeout fix is in rabbitmq 2.7.1?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25895">[ date ]</a>
              <a href="thread.html#25895">[ thread ]</a>
              <a href="subject.html#25895">[ subject ]</a>
              <a href="author.html#25895">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

Sometime I get errors (reported at the bottom of this message) and, browsing the mailing list archive, I found that a possibly cause for that is when mochiweb takes more than 5 seconds to start.
That appeared in the 2.5.1 version and there was a fix proposed for it:

<A HREF="http://www.rabbitmq.com/releases/plugins/v2.5.1/rabbitmq_mochiweb-2.5.1-registry-timeout-fix.ez">http://www.rabbitmq.com/releases/plugins/v2.5.1/rabbitmq_mochiweb-2.5.1-registry-timeout-fix.ez</A>
is that fix included in the 2.7.1 version?
That error happens to me when I run &quot;service rabbitmq-server restart&quot; command  2 -3 times in a row, but unfortunately I am not able to reproduce it.

Regards
--
Andrea Rosa


=ERROR REPORT==== 11-Feb-2013::15:44:13 ===
** Generic server rabbit_mochiweb_registry terminating 
** Last message in was {add,rabbit_mgmt,#Fun&lt;rabbit_mochiweb.2.75707079&gt;,
                            #Fun&lt;rabbit_mochiweb.0.51174676&gt;,
                            {[],&quot;RabbitMQ Management&quot;}}
** When Server state == undefined
** Reason for termination == 
** {{case_clause,
        {error,
            {eaddrinuse,
                {child,undefined,
                    {rabbit_mochiweb_web,mgmt},
                    {rabbit_mochiweb_web,start,[{mgmt,[{port,55672}]}]},
                    transient,5000,worker,dynamic}}}},
    [{rabbit_mochiweb_sup,ensure_listener,1},
     {rabbit_mochiweb_registry,handle_call,3},
     {gen_server,handle_msg,5},
     {proc_lib,init_p_do_apply,3}]}

=INFO REPORT==== 11-Feb-2013::15:44:13 ===
    application: rabbitmq_management
    exited: {bad_return,
             {{rabbit_mgmt_app,start,[normal,[]]},
              {'EXIT',
               {{{case_clause,
                  {error,
                   {eaddrinuse,
                    {child,undefined,
                     {rabbit_mochiweb_web,mgmt},
                     {rabbit_mochiweb_web,start,[{mgmt,[{port,55672}]}]},
                     transient,5000,worker,dynamic}}}},
                 [{rabbit_mochiweb_sup,ensure_listener,1},
                  {rabbit_mochiweb_registry,handle_call,3},
                  {gen_server,handle_msg,5},
                  {proc_lib,init_p_do_apply,3}]},
                {gen_server,call,
                 [rabbit_mochiweb_registry,
                  {add,rabbit_mgmt,#Fun&lt;rabbit_mochiweb.2.75707079&gt;,
                   #Fun&lt;rabbit_mochiweb.0.51174676&gt;,
                   {[],&quot;RabbitMQ Management&quot;}},
                  infinity]}}}}}
    type: permanent


from sasl log
=CRASH REPORT==== 11-Feb-2013::16:45:27 ===
  crasher:
    initial call: rabbit_mochiweb_registry:init/1
    pid: &lt;0.2051.0&gt;
    registered_name: []
    exception exit: {timeout,
                        {gen_server,call,
                            [application_controller,
                             {set_env,rabbitmq_mochiweb,
                                 {dispatch,'*'},
                                 {[],
                                  #Fun&lt;rabbit_mochiweb_registry.0.32312211&gt;}}]}}
      in function  gen_server:init_it/6
    ancestors: [rabbit_mochiweb_sup,&lt;0.133.0&gt;]
    messages: []
    links: [&lt;0.134.0&gt;]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 377
    stack_size: 24
    reductions: 115
  neighbours:
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025893.html">[rabbitmq-discuss] Calling unbind() without calling bind()
</A></li>
	<LI>Next message: <A HREF="025900.html">[rabbitmq-discuss] rabbitmq_mochiweb timeout fix is in rabbitmq 2.7.1?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25895">[ date ]</a>
              <a href="thread.html#25895">[ thread ]</a>
              <a href="subject.html#25895">[ subject ]</a>
              <a href="author.html#25895">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
