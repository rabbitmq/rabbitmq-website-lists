<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] &#31572;&#22797;:  [SOS] About MQ server connection reset issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%3D%3Fgb2312%3Fb%3FtPC4tDogIFtTT1NdIEFib3V0IE1RIHNl%3F%3D%0A%09%3D%3Fgb2312%3Fb%3FcnZlciBjb25uZWN0aW9uIHJlc2V0IGlzc3Vlcw%3D%3D%3F%3D&In-Reply-To=%3C004901ce2a16%244c3d0e80%24e4b72b80%24%40li%40quanshi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026172.html">
   <LINK REL="Next"  HREF="026190.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] &#31572;&#22797;:  [SOS] About MQ server connection reset issues</H1>
    <B>Li, Chenglin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%3D%3Fgb2312%3Fb%3FtPC4tDogIFtTT1NdIEFib3V0IE1RIHNl%3F%3D%0A%09%3D%3Fgb2312%3Fb%3FcnZlciBjb25uZWN0aW9uIHJlc2V0IGlzc3Vlcw%3D%3D%3F%3D&In-Reply-To=%3C004901ce2a16%244c3d0e80%24e4b72b80%24%40li%40quanshi.com%3E"
       TITLE="[rabbitmq-discuss] &#31572;&#22797;:  [SOS] About MQ server connection reset issues">chenglin.li at quanshi.com
       </A><BR>
    <I>Tue Mar 26 11:37:28 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026172.html">[rabbitmq-discuss] [SOS] About MQ server connection reset issues
</A></li>
        <LI>Next message: <A HREF="026190.html">[rabbitmq-discuss] &#31572;&#22797;:  [SOS] About MQ server connection reset issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26187">[ date ]</a>
              <a href="thread.html#26187">[ thread ]</a>
              <a href="subject.html#26187">[ subject ]</a>
              <a href="author.html#26187">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Tim. 

Yes, this log comes from client, sorry.

We found this is a network issue, if network is stable, all is fine. But in
user's environment, we can not make sure network is stable, in this case,
how to handle? Try another times, or other? 


Thanks,
Jack


-----&#37038;&#20214;&#21407;&#20214;-----
&#21457;&#20214;&#20154;: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>
[mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] &#20195;&#34920; Tim Watson
&#21457;&#36865;&#26102;&#38388;: 2013&#24180;3&#26376;25&#26085; 23:05
&#25910;&#20214;&#20154;: Discussions about RabbitMQ
&#20027;&#39064;: Re: [rabbitmq-discuss] [SOS] About MQ server connection reset issues

Hi,

On 25 Mar 2013, at 14:28, Li, Chenglin wrote:
&gt;<i> We use rabbitmq as message delivery channel to mobile client. And in our
</I>DEV environment, all works fine, but in our QA environment, we deploy LVS as
load balance and cluster, and after server run for some time(about 2-3
hours), the server will throw below error log, can someone give us some
ideas for this issue? Thanks in advance.
&gt;<i>  
</I>
Looking at this - &quot;the server will throw below error log&quot; is incorrect. That
error log comes from the client, not the server.

&gt;<i> com.rabbitmq.client.ShutdownSignalException: connection error; reason: 
</I>&gt;<i> java.net.SocketException: Connection reset
</I>
... and the cause is pretty clear. The connection has been closed. Could
this be a network disruption perhaps? Does your load balancer by any chance
have some threshold after which connections it deems to be 'idle' are
bounced or something like that?


Cheers,
Tim

&gt;<i>          at
</I>com.rabbitmq.client.QueueingConsumer.handle(QueueingConsumer.java:198)
&gt;<i>          at
</I>com.rabbitmq.client.QueueingConsumer.nextDelivery(QueueingConsumer.java:214)
&gt;<i>          at
</I>com.gnet.ms.util.thread.task.impl.ActionExchangeTask.execute(ActionExchangeT
ask.java:65)
&gt;<i>          at com.gnet.ms.util.thread.WorkThread.run(WorkThread.java:43)
</I>&gt;<i> Caused by: java.net.SocketException: Connection reset
</I>&gt;<i>          at java.net.SocketInputStream.read(SocketInputStream.java:185)
</I>&gt;<i>          at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
</I>&gt;<i>          at java.io.BufferedInputStream.read(BufferedInputStream.java:254)
</I>&gt;<i>          at
</I>java.io.DataInputStream.readUnsignedByte(DataInputStream.java:288)
&gt;<i>          at com.rabbitmq.client.impl.Frame.readFrom(Frame.java:95)
</I>&gt;<i>          at
</I>com.rabbitmq.client.impl.SocketFrameHandler.readFrame(SocketFrameHandler.jav
a:131)
&gt;<i>          at 
</I>&gt;<i> com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java
</I>&gt;<i> :501) 
</I>&gt;<i> /*********************************************************************
</I>&gt;<i> ************/
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> Thanks,
</I>&gt;<i> Jack
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>

</PRE>















































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026172.html">[rabbitmq-discuss] [SOS] About MQ server connection reset issues
</A></li>
	<LI>Next message: <A HREF="026190.html">[rabbitmq-discuss] &#31572;&#22797;:  [SOS] About MQ server connection reset issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26187">[ date ]</a>
              <a href="thread.html#26187">[ thread ]</a>
              <a href="subject.html#26187">[ subject ]</a>
              <a href="author.html#26187">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
