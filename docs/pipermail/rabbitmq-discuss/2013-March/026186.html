<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Optimizing Tips for beginner rabbitMQ user
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Optimizing%20Tips%20for%20beginner%20rabbitMQ%20user&In-Reply-To=%3CCAGrdgiVP-BcROEmL7H_-jA%2B1Wm1mkDymwtKiXcuhvS6_%2BKO5tw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026183.html">
   <LINK REL="Next"  HREF="026192.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Optimizing Tips for beginner rabbitMQ user</H1>
    <B>Jesper Louis Andersen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Optimizing%20Tips%20for%20beginner%20rabbitMQ%20user&In-Reply-To=%3CCAGrdgiVP-BcROEmL7H_-jA%2B1Wm1mkDymwtKiXcuhvS6_%2BKO5tw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Optimizing Tips for beginner rabbitMQ user">jesper.louis.andersen at gmail.com
       </A><BR>
    <I>Tue Mar 26 10:46:06 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026183.html">[rabbitmq-discuss] Optimizing Tips for beginner rabbitMQ user
</A></li>
        <LI>Next message: <A HREF="026192.html">[rabbitmq-discuss] Running RabbitMQ server as embedded application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26186">[ date ]</a>
              <a href="thread.html#26186">[ thread ]</a>
              <a href="subject.html#26186">[ subject ]</a>
              <a href="author.html#26186">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>My primary first thing would be to drop all your processing and just accept
the messages and throw them away. That would immediately tell you where the
performance problem is. Next, I would not rule out the possibility of
something being wrong at a lower level (e.g., network). 2-3 msg/s is a
fairly low rate, which suggest something is wrong somewhere, or you are
doing some serious heavy lifting for each message.

Increasing the possible parallelism though more channels is one important
trick. The other is to eliminate latency by setting up some prefetching via
QoS. But beware of giving it too much prefetching.

Finally, do not forget to measure. Measurement can often show why something
doesn't work as expected.


On Tue, Mar 26, 2013 at 12:47 AM, extofer &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">extofer at gmail.com</A>&gt; wrote:

&gt;<i> Here is my setup: I've implemented rabbitMQ on a centOS environment  I
</I>&gt;<i> have one tomcat application publishing messages at an average of 30 msg/s.
</I>&gt;<i> The consumer apps are in 3 different servers running the same process, each
</I>&gt;<i> consuming at an average of 2~3 msg/s. I've tried optimizing our process on
</I>&gt;<i> the consumer applications as much as possible, now I want to look at the
</I>&gt;<i> queue and try to get more than 2~3 msg/s.
</I>&gt;<i>
</I>&gt;<i> Here are some questions, and perhaps someone can assist me with
</I>&gt;<i> suggestions:
</I>&gt;<i>
</I>&gt;<i> I use the same user authentications on all 3 consumers.... will having
</I>&gt;<i> different users help bump the message rate?
</I>&gt;<i>
</I>&gt;<i> I've tried using more channels, but all in all, it doesn't change a thing,
</I>&gt;<i> it still gets 1 or 25 messages depending on channels, but the message rate
</I>&gt;<i> is the same.
</I>&gt;<i>
</I>&gt;<i> What are some common optimization tips for faster performance?
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i> The consumer application is a Tomcat application and I'm using rabbit-amqp
</I>&gt;<i> configured below.
</I>&gt;<i> &lt;bean id=&quot;rabbitConnectionFactory&quot;
</I>&gt;<i>
</I>&gt;<i> class=&quot;org.springframework.amqp.rabbit.connection.CachingConnectionFactory&quot;
</I>&gt;<i> p:username=&quot;USER&quot; p:password=&quot;PSWD!&quot; p:virtualHost=&quot;VHNAME&quot;
</I>&gt;<i>  p:port=&quot;5672&quot;&gt;
</I>&gt;<i> &lt;constructor-arg value=&quot;DOMAIN&quot; /&gt;
</I>&gt;<i>  &lt;property name=&quot;channelCacheSize&quot; value=&quot;1&quot; /&gt;
</I>&gt;<i> &lt;/bean&gt;
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Thanks,
</I>&gt;<i> Gabriel Villa
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
J.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130326/4a1f48dc/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130326/4a1f48dc/attachment.htm</A>&gt;
</PRE>
























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026183.html">[rabbitmq-discuss] Optimizing Tips for beginner rabbitMQ user
</A></li>
	<LI>Next message: <A HREF="026192.html">[rabbitmq-discuss] Running RabbitMQ server as embedded application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26186">[ date ]</a>
              <a href="thread.html#26186">[ thread ]</a>
              <a href="subject.html#26186">[ subject ]</a>
              <a href="author.html#26186">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
