<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> No subject
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.11.1370558778.3387.rabbitmq-discuss%40lists.rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027647.html">
   <LINK REL="Next"  HREF="027764.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>No subject</H1>
    <B></B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.11.1370558778.3387.rabbitmq-discuss%40lists.rabbitmq.com%3E"
       TITLE="No subject">
       </A><BR>
    <I>Thu Mar 14 15:04:54 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027647.html">No subject
</A></li>
        <LI>Next message: <A HREF="027764.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27743">[ date ]</a>
              <a href="thread.html#27743">[ thread ]</a>
              <a href="subject.html#27743">[ subject ]</a>
              <a href="author.html#27743">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>1370554962786: &lt;Tracer-0&gt; ch#1 &lt;- {#method&lt;channel.close&gt;(reply-code=3D404,
reply-text=3DNOT_FOUND - no exchange 'foo' in vhost '/', class-id=3D60,
method-id=3D40), null, &quot;&quot;}
1370554962788: &lt;Tracer-0&gt; ch#1 -&gt; {#method&lt;channel.close-ok&gt;(), null, &quot;&quot;}
1370554974891: &lt;Tracer-0&gt; ch#1 -&gt; {#method&lt;channel.open&gt;(out-of-band=3D),
null, &quot;&quot;}
1370554974970: &lt;Tracer-0&gt; ch#1 &lt;- {#method&lt;channel.open-ok&gt;(channel-id=3D),
null, &quot;&quot;}

Any ideas why things are hanging?

Thanks
- jonathan

--089e0102e0dccb73e204de840768
Content-Type: text/html; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

&lt;div&gt;I hit on a scenario where connection.createChannel() may hang forever.=
 The scenario: obtain a channel and attempt to publish to a non-existent ex=
change. The channel will be shutdown. Attempt to establish a new (replaceme=
nt) channel via Connection.createChannel(), which hangs forever. A simple v=
ersion of this scenario:&lt;/div&gt;
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;public Channel channelFor(final String tenantId) throws=
 Exception {&lt;/div&gt;&lt;div&gt;=A0 Channel channel =3D connection.createChannel();&lt;=
/div&gt;&lt;div&gt;=A0 channel.addShutdownListener(new ShutdownListener() {&lt;/div&gt;&lt;di=
v&gt;
=A0 =A0 public void shutdownCompleted(ShutdownSignalException e) {&lt;/div&gt;&lt;di=
v&gt;=A0 =A0 =A0 if (!e.isInitiatedByApplication())=A0&lt;/div&gt;&lt;div&gt;=A0 =A0 =A0 =
=A0 channelFor(tenantId);&lt;/div&gt;&lt;div&gt;=A0 =A0 }&lt;/div&gt;&lt;div&gt;=A0 });&lt;/div&gt;&lt;div&gt;&lt;=
br&gt;&lt;/div&gt;&lt;div&gt;=A0 return channel;&lt;/div&gt;
&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Channel channel =3D channelFor(&amp;quot;foo&amp;qu=
ot;);&lt;/div&gt;&lt;div&gt;channel.basicPublish(someNonExistentExchange, =85&lt;/div&gt;&lt;div=
&gt;<i>&lt;br&gt;&lt;/div&gt;&lt;div&gt;From Tracer:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1370554962786: &amp;lt;Tr=
</I>acer-0&amp;gt; ch#1 &amp;lt;- {#method&amp;lt;channel.close&amp;gt;(reply-code=3D404, reply=
-text=3DNOT_FOUND - no exchange &amp;#39;foo&amp;#39; in vhost &amp;#39;/&amp;#39;, class-i=
d=3D60, method-id=3D40), null, &amp;quot;&amp;quot;}&lt;/div&gt;
&lt;div&gt;1370554962788: &amp;lt;Tracer-0&amp;gt; ch#1 -&amp;gt; {#method&amp;lt;channel.close-o=
k&amp;gt;(), null, &amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;1370554974891: &amp;lt;Tracer-0&amp;gt; ch#1=
 -&amp;gt; {#method&amp;lt;channel.open&amp;gt;(out-of-band=3D), null, &amp;quot;&amp;quot;}&lt;/d=
iv&gt;
&lt;div&gt;1370554974970: &amp;lt;Tracer-0&amp;gt; ch#1 &amp;lt;- {#method&amp;lt;channel.open-ok=
&amp;gt;<i>(channel-id=3D), null, &amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any ideas=
</I> why things are hanging?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks=A0&lt;/div&gt;&lt;div&gt;- jon=
athan&lt;/div&gt;

--089e0102e0dccb73e204de840768--
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027647.html">No subject
</A></li>
	<LI>Next message: <A HREF="027764.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27743">[ date ]</a>
              <a href="thread.html#27743">[ thread ]</a>
              <a href="subject.html#27743">[ subject ]</a>
              <a href="author.html#27743">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
