<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> No subject
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.5.1367440297.3387.rabbitmq-discuss%40lists.rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032090.html">
   <LINK REL="Next"  HREF="026834.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>No subject</H1>
    <B></B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.5.1367440297.3387.rabbitmq-discuss%40lists.rabbitmq.com%3E"
       TITLE="No subject">
       </A><BR>
    <I>Thu Mar 14 15:04:54 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032090.html">No subject
</A></li>
        <LI>Next message: <A HREF="026834.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26826">[ date ]</a>
              <a href="thread.html#26826">[ thread ]</a>
              <a href="subject.html#26826">[ subject ]</a>
              <a href="author.html#26826">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In order to get the service approach to work correctly, I modified rabbitmq-server in /etc/init.d as follows:
[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at cluster1</A> init.d]# diff rabbitmq-server.20130501 rabbitmq-server
63c63
&lt;         RABBITMQ_PID_FILE=$PID_FILE $START_PROG $DAEMON \
---
&gt;<i>         RABBITMQ_PID_FILE=$PID_FILE $START_PROG $DAEMON -detached \
</I>[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at cluster1</A> init.d]#

I changed it there because DAEMON appears to be the rabbitmq-server

[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at cluster1</A> init.d]# grep DAEMON rabbitmq-server
DAEMON=/usr/sbin/${NAME}
test -x $DAEMON || exit 0
        RABBITMQ_PID_FILE=$PID_FILE $START_PROG $DAEMON -detached \
[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at cluster1</A> init.d]#

When I performed service rabbitmq-server start

It just hung and never came back with a prompt.

However in another window I confirmed the rabbitmq-server was running

I then killed the service console window and looked at the startup_err file:
[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at cluster1</A> init.d]# more /var/log/rabbitmq/startup_err
Warning: PID file not written; -detached was passed.

and then i had to separately kill the process(s) associated with rabbitmq.

so my questions are thus:
   1) the documentation states this is how to normally start the server.  Is that normally for all modes or just for a clustered node approach?
   2) What can I do to keep the command from hanging if started as a service?  
       


&gt;<i>  -------Original Message-------
</I>&gt;<i>  From: Gerald Kuch &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jkuch at gopivotal.com</A>&gt;
</I>&gt;<i>  To: srd &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">srd at duneram.com</A>&gt;, Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i>  Subject: Re: [rabbitmq-discuss] another question on cookies version 3.0.4
</I>&gt;<i>  Sent: 01 May '13 19:52
</I>&gt;<i>  
</I>&gt;<i>  Ooops, my fingers auto-completed the &quot;/etc/init.d&quot; on the end of the
</I>&gt;<i>  sentence. &#160;Forget about that part.
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i>  On Wed, May 1, 2013 at 12:51 PM, Gerald Kuch &lt;[LINK:
</I>&gt;<i>  mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jkuch at gopivotal.com</A>] <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jkuch at gopivotal.com</A>&gt; wrote:
</I>&gt;<i>  
</I>&gt;<i>  Depends how you started it: &#160;Either /sbin/service/rabbitmq-server stop or
</I>&gt;<i>  /etc/init.d/.
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i>  Of course 'kill' will stop it, but the cleanliness of doing the
</I>&gt;<i>  former is preferable in non-emergency circumstances.
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i>  On Wed, May 1, 2013 at 6:26 AM, srd &lt;[LINK: mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">srd at duneram.com</A>]
</I>&gt;<i>  <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">srd at duneram.com</A>&gt; wrote:
</I>&gt;<i>  Thank you for your help. &#160;I will give this a try.
</I>&gt;<i>  
</I>&gt;<i>  I've been starting it wrong all this time.
</I>&gt;<i>  
</I>&gt;<i>  what is the best way to stop the server? &#160;up until now I have found no
</I>&gt;<i>  good way to stop it except
</I>&gt;<i>  
</I>&gt;<i>  ps -efwww | grep rabbit
</I>&gt;<i>  and then with that kill off the 4-6 associated jobs.
</I>&gt;<i>  
</I>&gt;<i>  Dave
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i>  &gt; &#160;-------Original Message-------
</I>&gt;<i>  &gt; &#160;From: Tim Watson &lt;[LINK: mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>] <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt;
</I>&gt;<i>  &gt; &#160;To: srd &lt;[LINK: mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">srd at duneram.com</A>] <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">srd at duneram.com</A>&gt;, Discussions
</I>&gt;<i>  about RabbitMQ &lt;[LINK: mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>]
</I>&gt;<i>  <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i>  &gt; &#160;Subject: Re: [rabbitmq-discuss] another question on cookies version
</I>&gt;<i>  3.0.4
</I>&gt;<i>  &gt; &#160;Sent: 01 May '13 13:21
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;Hi,
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;On 1 May 2013, at 14:15, srd wrote:
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;&gt; so my questions are:
</I>&gt;<i>  &gt; &#160;&gt; 1) How does one normally start the server?
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;Depending on the platform, either /sbin/service rabbitmq-server start
</I>&gt;<i>  or via /etc/init.d/.
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;&gt; 2) my reason for wanting to do cookies is I wanted to setup a multi
</I>&gt;<i>  node cluster (different servers)
</I>&gt;<i>  &gt; &#160;&gt;&#160;&#160;&#160;&#160;If I start a server (no parameters) on each server the cookie
</I>&gt;<i>  hash is different.
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;You need to ensure that all the cookies are the same. You can do this
</I>&gt;<i>  by placing the .erlang.cookie file in the /home/rabbitmq directory on each
</I>&gt;<i>  server.
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;&gt; 3) I have looked at the clustering guide but haven't succeeded
</I>&gt;<i>  in a setup using it.&#160;&#160;How does one normally synchronize the cookies
</I>&gt;<i>  across servers?
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;That's up to you - rabbit doesn't provide anything out of the
</I>&gt;<i>  box to do this.
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;&gt; 4) where is the cookie file stored?&#160;&#160; I found one on the rabbitmq
</I>&gt;<i>  user's root directory.&#160;&#160; Is that where it is stored?
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;That's correct.
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;&gt; 5) If I have to set a cookie value, is there a config file where it
</I>&gt;<i>  can be set (or env variable?) and what is the syntax to set it?
</I>&gt;<i>  &gt; &#160;&gt;
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;I would recommend just using the cookie stored in the rabbitmq
</I>&gt;<i>  user's home directory.
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; &#160;Cheers,
</I>&gt;<i>  &gt; &#160;Tim
</I>&gt;<i>  _______________________________________________
</I>&gt;<i>  rabbitmq-discuss mailing list
</I>&gt;<i>  [LINK: mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>]
</I>&gt;<i>  <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i>  [LINK:
</I>&gt;<i>  <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss]">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss]</A>
</I>&gt;<i>  <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032090.html">No subject
</A></li>
	<LI>Next message: <A HREF="026834.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26826">[ date ]</a>
              <a href="thread.html#26826">[ thread ]</a>
              <a href="subject.html#26826">[ subject ]</a>
              <a href="author.html#26826">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
