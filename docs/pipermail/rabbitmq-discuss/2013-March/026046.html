<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Scaling Throughput with Highly Available	Queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Scaling%20Throughput%20with%20Highly%20Available%0A%09Queues&In-Reply-To=%3C5148E65A.7000602%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026045.html">
   <LINK REL="Next"  HREF="026049.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Scaling Throughput with Highly Available	Queues</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Scaling%20Throughput%20with%20Highly%20Available%0A%09Queues&In-Reply-To=%3C5148E65A.7000602%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Scaling Throughput with Highly Available	Queues">matthias at rabbitmq.com
       </A><BR>
    <I>Tue Mar 19 22:27:38 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026045.html">[rabbitmq-discuss] Scaling Throughput with Highly Available	Queues
</A></li>
        <LI>Next message: <A HREF="026049.html">[rabbitmq-discuss] Scaling Throughput with Highly Available	Queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26046">[ date ]</a>
              <a href="thread.html#26046">[ thread ]</a>
              <a href="subject.html#26046">[ subject ]</a>
              <a href="author.html#26046">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/03/13 22:12, Richard Raseley wrote:
&gt;<i> There are four servers named rmq01, rmq02, rmq03, and rmq04. Servers
</I>&gt;<i> rmq01 and rmq02 are clustered; servers rmq03 and rmq04 are clustered (so
</I>&gt;<i> we now have 2x two node clusters).
</I>&gt;<i>
</I>&gt;<i> On both clusters we create a vhost named &quot;default&quot;, a direct exchange
</I>&gt;<i> named &quot;default&quot;, a queue named &quot;default&quot;, a user &quot;default&quot; (which has
</I>&gt;<i> read, write and config access to the aforementioned objects) with a
</I>&gt;<i> password of &quot;default&quot; and apply the ha-all mode to the &quot;default&quot; vhost.
</I>&gt;<i>
</I>&gt;<i> We place these two identically configured clusters inside of a load
</I>&gt;<i> balanced pool with a &quot;least queue depth&quot; configuration. We then
</I>&gt;<i> configure the consumers and producers associated with this app to
</I>&gt;<i> connect to the VIP (which maps to the load balanced pool) to send
</I>&gt;<i> messages to the &quot;default&quot; exchange and consume messages from the
</I>&gt;<i> &quot;default&quot; queue.
</I>&gt;<i>
</I>&gt;<i> Assuming we have more producers and consumers than we do RabbitMQ nodes
</I>&gt;<i> (and they get distributed properly), we've now increased our throughput
</I>&gt;<i> - as we now have two master queue processes to work with on this
</I>&gt;<i> &quot;single&quot; queue.
</I>
I thought that's where you were heading :)

You really have two queues in the above. Message order is no longer 
preserved between messages ending up in different (real) queues. And 
consumers on one (real) queue will never see the messages published to 
the other. If that is ok in your use case then fine.

You could get the same effect by just having two queues in the same 
cluster, though obviously that requires them to be named differently and 
hence is not transparent to clients.

Matthias.
</PRE>






































































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026045.html">[rabbitmq-discuss] Scaling Throughput with Highly Available	Queues
</A></li>
	<LI>Next message: <A HREF="026049.html">[rabbitmq-discuss] Scaling Throughput with Highly Available	Queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26046">[ date ]</a>
              <a href="thread.html#26046">[ thread ]</a>
              <a href="subject.html#26046">[ subject ]</a>
              <a href="author.html#26046">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
