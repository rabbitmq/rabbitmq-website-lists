<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] socket_error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20socket_error&In-Reply-To=%3C5149F4A7.6090903%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026087.html">
   <LINK REL="Next"  HREF="026032.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] socket_error</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20socket_error&In-Reply-To=%3C5149F4A7.6090903%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] socket_error">emile at rabbitmq.com
       </A><BR>
    <I>Wed Mar 20 17:40:55 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026087.html">[rabbitmq-discuss] socket_error
</A></li>
        <LI>Next message: <A HREF="026032.html">[rabbitmq-discuss] Scaling Throughput with Highly Available Queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26089">[ date ]</a>
              <a href="thread.html#26089">[ thread ]</a>
              <a href="subject.html#26089">[ subject ]</a>
              <a href="author.html#26089">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Elizabeth,

On 19/03/13 19:49, Elizabeth Liao wrote:
&gt;<i> ** When Server state == {state,#Port&lt;0.141701&gt;,&lt;0.7764.12&gt;,&lt;0.7766.12&gt;,
</I>&gt;<i>                                {method,rabbit_framing_amqp_0_9_1},
</I>&gt;<i>                                {65,19793,1342243080}}
</I>Having looked at this in more detail we have a better hypothesis for
what's happening. You are probably connecting to a pre v2.0.0 version of
the broker supporting only AMQP 0.8. The older broker reports that it
does not understand AMQP 0.9.1. Its response is misinterpreted by the
shovel and goes on to cause framing errors and a request to allocate too
much memory.

I will file a bug so that the shovel interprets the response from old
brokers correctly. This will lead to a more intelligible error message.
There is no way of downgrading the shovel to AMQP 0.8, so the solution
is for you to upgrade the AMQP 0.8 broker to at least v2.0.0.

If you are trying to extract messages from an old broker without
upgrading then you may be able to do that with a modern .net client or a
pre v2.0.0 Java client. See
<A HREF="http://www.rabbitmq.com/specification.html">http://www.rabbitmq.com/specification.html</A> for the compatibility matrix.



-Emile






</PRE>




















































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026087.html">[rabbitmq-discuss] socket_error
</A></li>
	<LI>Next message: <A HREF="026032.html">[rabbitmq-discuss] Scaling Throughput with Highly Available Queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26089">[ date ]</a>
              <a href="thread.html#26089">[ thread ]</a>
              <a href="subject.html#26089">[ subject ]</a>
              <a href="author.html#26089">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
