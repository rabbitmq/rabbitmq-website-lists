<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> No subject
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.37.1380299365.3387.rabbitmq-discuss%40lists.rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030475.html">
   <LINK REL="Next"  HREF="030582.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>No subject</H1>
    <B></B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.37.1380299365.3387.rabbitmq-discuss%40lists.rabbitmq.com%3E"
       TITLE="No subject">
       </A><BR>
    <I>Thu Mar 14 15:04:54 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030475.html">No subject
</A></li>
        <LI>Next message: <A HREF="030582.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30489">[ date ]</a>
              <a href="thread.html#30489">[ thread ]</a>
              <a href="subject.html#30489">[ subject ]</a>
              <a href="author.html#30489">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&quot;local&quot; one, and there are a lot of examples in internet doing &quot;just use
/temp-queue/ for reply&quot;.
But relying on replicating autogenerated queues is probably a bad practice
and one that could generate hard to debug problems for application
developer, or in best case just add unnecesary overhead by replicating
queues that don't need to be replicated at all.


&gt;<i>
</I>&gt;<i>  I'm trying to fix mcollective over federated servers, the original code
</I>&gt;&gt;<i> used very simple method of sending request to exchange with 'reply-to'
</I>&gt;&gt;<i> header containing name of autogenerated queue, and server then sent
</I>&gt;&gt;<i> reply to that address. Obviously that didnt work over federation
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Interesting. I hadn't really thought people would do RPC over federation
</I>&gt;<i> but I think your plan should work.
</I>&gt;<i>
</I>It is mainly because we tried ActiveMQ clustering, and while clustering
worked fine over WAN, we couldn't make ActiveMQ work more than few days
without it going OOM and dying, and even buitin watchdog didnt help much


&gt;<i>
</I>&gt;<i>  My first try was just replacing reply queue with direct exchange that
</I>&gt;&gt;<i> client subscribed to to get replies and it worked partially, over
</I>&gt;&gt;<i> federation when client did simple
</I>&gt;&gt;<i> &quot;subscribe(reply_exchange);**publish(request_exchange), but sometimes
</I>&gt;&gt;<i> messages were &quot;lost&quot; probably because server sent reply too fast (before
</I>&gt;&gt;<i> federation managed to subscribe to remote exchange.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yeah, I think that analysis is right.
</I>&gt;<i>
</I>Is there any way to query exchange about what queues are subscribed to it
over STOMP? I'd like to fix it by simply making server wait for client
subscription to exchange before sending reply.

Cheers,
Mariusz

--20cf30780db0a71bd104e75eb128
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

&lt;div dir=3D&quot;ltr&quot;&gt;&lt;div class=3D&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;=
2013/9/27 Simon MacMullen &lt;span dir=3D&quot;ltr&quot;&gt;&amp;lt;&lt;a href=3D&quot;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rab</A>=
bitmq.com&quot; target=3D&quot;_blank&quot;&gt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquo=
te class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0px 0px 0px 0.8ex;border-left:1px =
solid rgb(204,204,204);padding-left:1ex&quot;&gt;
On 27/09/2013 2:16PM, Mariusz Gronczewski wrote:&lt;br&gt;
&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0px 0px 0px 0.8ex;border-=
left:1px solid rgb(204,204,204);padding-left:1ex&quot;&gt;
I&amp;#39;ve tested it for a bit and have another question: Is federating&lt;br&gt;
autogenerated (amq.*) queues planned (on current nightly trying to&lt;br&gt;
federate those returns &amp;quot;queue name contains reserved prefix amq&amp;quot;)=
 or it&lt;br&gt;
is something that should not be used at all ?&lt;br&gt;
&lt;/blockquote&gt;
&lt;br&gt;
Hmm. That&amp;#39;s kinda problematic - you shouldn&amp;#39;t be able to declare yo=
ur own named queue in the server-generated namespace. But the downstream fe=
derated queue is just another AMQP client from the perspective of the upstr=
eam, so it can&amp;#39;t violate that requirement.&lt;br&gt;

=C2=A0&lt;/blockquote&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0px 0p=
x 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex&quot;&gt;
Not sure if that&amp;#39;s the right thing to do, but that&amp;#39;s how it is now.=
 Hmm.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0px=
 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex&quot;&gt;
&lt;br&gt;
Of course, you could have your client generate a reply queue name based on =
a UUID or something, that would get round the problem.=C2=A0&lt;br&gt;&lt;/blockquot=
e&gt;&lt;div&gt;&lt;br&gt;From the point of the client federated queue should work exactly=
 like=20
&amp;quot;local&amp;quot; one, and there are a lot of examples in internet doing &amp;q=
uot;just use
 /temp-queue/ for reply&amp;quot;. &lt;br&gt;But relying on replicating autogenerated=
=20
queues is probably a bad practice and one that could generate hard to=20
debug problems for application developer, or in best case just add unnecesa=
ry overhead by replicating queues that don&amp;#39;t need to be replicated at a=
ll.&lt;br&gt;=C2=A0&lt;/div&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0px 0p=
x 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex&quot;&gt;

&lt;br&gt;
&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0px 0px 0px 0.8ex;border-=
left:1px solid rgb(204,204,204);padding-left:1ex&quot;&gt;
I&amp;#39;m trying to fix mcollective over federated servers, the original code=
&lt;br&gt;
used very simple method of sending request to exchange with &amp;#39;reply-to&amp;#=
39;&lt;br&gt;
header containing name of autogenerated queue, and server then sent&lt;br&gt;
reply to that address. Obviously that didnt work over federation&lt;br&gt;
&lt;/blockquote&gt;
&lt;br&gt;
Interesting. I hadn&amp;#39;t really thought people would do RPC over federatio=
n but I think your plan should work.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;It is mainly beca=
use we tried ActiveMQ clustering, and while clustering worked fine over WAN=
, we couldn&amp;#39;t make ActiveMQ work more than few days without it going OO=
M and dying, and even buitin watchdog didnt help much&lt;br&gt;
=C2=A0&lt;br&gt;&lt;/div&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0px 0px 0=
px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex&quot;&gt;
&lt;br&gt;
&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0px 0px 0px 0.8ex;border-=
left:1px solid rgb(204,204,204);padding-left:1ex&quot;&gt;
My first try was just replacing reply queue with direct exchange that&lt;br&gt;
client subscribed to to get replies and it worked partially, over&lt;br&gt;
federation when client did simple&lt;br&gt;
&amp;quot;subscribe(reply_exchange);&lt;u&gt;&lt;/u&gt;publish(request_exchange), but somet=
imes&lt;br&gt;
messages were &amp;quot;lost&amp;quot; probably because server sent reply too fast =
(before&lt;br&gt;
federation managed to subscribe to remote exchange.&lt;br&gt;
&lt;/blockquote&gt;
&lt;br&gt;
Yeah, I think that analysis is right.&lt;span class=3D&quot;&quot;&gt;&lt;font color=3D&quot;#88888=
8&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;Is there any way to query exchange a=
bout what queues are subscribed to it over STOMP? I&amp;#39;d like to fix it by=
 simply making server wait for client subscription to exchange before sendi=
ng reply.&lt;br&gt;
&lt;/div&gt;&lt;/div&gt;&lt;br&gt;Cheers,&lt;br&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_extra&quot;&gt;Mariusz&lt;br&gt;
&lt;/div&gt;&lt;/div&gt;

--20cf30780db0a71bd104e75eb128--
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030475.html">No subject
</A></li>
	<LI>Next message: <A HREF="030582.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30489">[ date ]</a>
              <a href="thread.html#30489">[ thread ]</a>
              <a href="subject.html#30489">[ subject ]</a>
              <a href="author.html#30489">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
