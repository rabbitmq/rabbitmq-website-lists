<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [SOS] About MQ server connection reset issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BSOS%5D%20About%20MQ%20server%20connection%20reset%20issues&In-Reply-To=%3CAA51FFAF-E3B3-4BEB-B7A6-C055B649BE4D%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026168.html">
   <LINK REL="Next"  HREF="026187.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [SOS] About MQ server connection reset issues</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BSOS%5D%20About%20MQ%20server%20connection%20reset%20issues&In-Reply-To=%3CAA51FFAF-E3B3-4BEB-B7A6-C055B649BE4D%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] [SOS] About MQ server connection reset issues">tim at rabbitmq.com
       </A><BR>
    <I>Mon Mar 25 15:05:29 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026168.html">[rabbitmq-discuss] [SOS] About MQ server connection reset issues
</A></li>
        <LI>Next message: <A HREF="026187.html">[rabbitmq-discuss] &#31572;&#22797;:  [SOS] About MQ server connection reset issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26172">[ date ]</a>
              <a href="thread.html#26172">[ thread ]</a>
              <a href="subject.html#26172">[ subject ]</a>
              <a href="author.html#26172">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 25 Mar 2013, at 14:28, Li, Chenglin wrote:
&gt;<i> We use rabbitmq as message delivery channel to mobile client. And in our DEV environment, all works fine, but in our QA environment, we deploy LVS as load balance and cluster, and after server run for some time(about 2-3 hours), the server will throw below error log, can someone give us some ideas for this issue? Thanks in advance.
</I>&gt;<i>  
</I>
Looking at this - &quot;the server will throw below error log&quot; is incorrect. That error log comes from the client, not the server.

&gt;<i> com.rabbitmq.client.ShutdownSignalException: connection error; reason: java.net.SocketException: Connection reset
</I>
... and the cause is pretty clear. The connection has been closed. Could this be a network disruption perhaps? Does your load balancer by any chance have some threshold after which connections it deems to be 'idle' are bounced or something like that?

Cheers,
Tim

&gt;<i>          at com.rabbitmq.client.QueueingConsumer.handle(QueueingConsumer.java:198)
</I>&gt;<i>          at com.rabbitmq.client.QueueingConsumer.nextDelivery(QueueingConsumer.java:214)
</I>&gt;<i>          at com.gnet.ms.util.thread.task.impl.ActionExchangeTask.execute(ActionExchangeTask.java:65)
</I>&gt;<i>          at com.gnet.ms.util.thread.WorkThread.run(WorkThread.java:43)
</I>&gt;<i> Caused by: java.net.SocketException: Connection reset
</I>&gt;<i>          at java.net.SocketInputStream.read(SocketInputStream.java:185)
</I>&gt;<i>          at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
</I>&gt;<i>          at java.io.BufferedInputStream.read(BufferedInputStream.java:254)
</I>&gt;<i>          at java.io.DataInputStream.readUnsignedByte(DataInputStream.java:288)
</I>&gt;<i>          at com.rabbitmq.client.impl.Frame.readFrom(Frame.java:95)
</I>&gt;<i>          at com.rabbitmq.client.impl.SocketFrameHandler.readFrame(SocketFrameHandler.java:131)
</I>&gt;<i>          at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:501)
</I>&gt;<i> /*********************************************************************************/
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> Thanks,
</I>&gt;<i> Jack
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>

















































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026168.html">[rabbitmq-discuss] [SOS] About MQ server connection reset issues
</A></li>
	<LI>Next message: <A HREF="026187.html">[rabbitmq-discuss] &#31572;&#22797;:  [SOS] About MQ server connection reset issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26172">[ date ]</a>
              <a href="thread.html#26172">[ thread ]</a>
              <a href="subject.html#26172">[ subject ]</a>
              <a href="author.html#26172">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
