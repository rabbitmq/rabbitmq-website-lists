<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbit MQ: Improve queue flushing speed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20MQ%3A%20Improve%20queue%20flushing%20speed&In-Reply-To=%3C3497510F-22ED-4F9E-B22A-95CBA3C768DD%40teksol.info%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026245.html">
   <LINK REL="Next"  HREF="026251.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbit MQ: Improve queue flushing speed</H1>
    <B>Fran&#231;ois Beausoleil</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20MQ%3A%20Improve%20queue%20flushing%20speed&In-Reply-To=%3C3497510F-22ED-4F9E-B22A-95CBA3C768DD%40teksol.info%3E"
       TITLE="[rabbitmq-discuss] Rabbit MQ: Improve queue flushing speed">francois at teksol.info
       </A><BR>
    <I>Thu Mar 28 15:33:38 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026245.html">[rabbitmq-discuss] Rabbit MQ: Improve queue flushing speed
</A></li>
        <LI>Next message: <A HREF="026251.html">[rabbitmq-discuss] Rabbit MQ: Improve queue flushing speed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26247">[ date ]</a>
              <a href="thread.html#26247">[ thread ]</a>
              <a href="subject.html#26247">[ subject ]</a>
              <a href="author.html#26247">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Le 2013-03-28 &#224; 08:33, Priyank Patil a &#233;crit :

&gt;<i> I have a durable queue which holds persistent messages. The messages arrive into the queue at a rate of about 10 messages per second.
</I>&gt;<i> 
</I>&gt;<i> The client is unable to fetch those messages at that rate. As a result the queue on the server keeps growing.
</I>&gt;<i> 
</I>&gt;<i> Each message is less than 1 KB and I have a healthy 2 Mbps line between the server and my machine. Using a network monitoring utility, I found that it is hardly using any of that bandwidth.
</I>&gt;<i> 
</I>&gt;<i> The client is doing nothing with the messages as of now, just printing them to console so processing time on client is almost 0.
</I>&gt;<i> 
</I>&gt;<i> Some other details: I am using a java client. I have set the client to prefetch 10000 messages. (also tried with default values) The round trip time is about 290 - 350 ms. Messages are individually acknowledged.
</I>&gt;<i> 
</I>&gt;<i> The available resources are being underutilized and 10 messages per second is hardly any load in my opinion. How do I speed up things so that messages held up in queue are transferred faster to the client. Possibly using some sort of batching.
</I>&gt;<i> 
</I>I regularly process 2000 messages per second from durable queues with persistent messages, with a prefetch-count of 2000. My messages are 1500 to 2000 bytes each. The RabbitMQ server and the consumer are both in the same data center. My consumer is writing the messages to disk, in a flat-file.

There must be something in the Java code which causes the slowdown. Can you post your setup and processing loop?

Bye,
Fran&#231;ois

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130328/b8d62b5e/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130328/b8d62b5e/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4142 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130328/b8d62b5e/attachment.bin">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130328/b8d62b5e/attachment.bin</A>&gt;
</PRE>






















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026245.html">[rabbitmq-discuss] Rabbit MQ: Improve queue flushing speed
</A></li>
	<LI>Next message: <A HREF="026251.html">[rabbitmq-discuss] Rabbit MQ: Improve queue flushing speed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26247">[ date ]</a>
              <a href="thread.html#26247">[ thread ]</a>
              <a href="subject.html#26247">[ subject ]</a>
              <a href="author.html#26247">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
