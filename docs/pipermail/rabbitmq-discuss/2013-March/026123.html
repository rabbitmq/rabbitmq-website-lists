<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] lager vs sasl error log
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20lager%20vs%20sasl%20error%20log&In-Reply-To=%3C5FC52E55-236D-4DA0-91F4-EEC58DAB388D%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026116.html">
   <LINK REL="Next"  HREF="026152.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] lager vs sasl error log</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20lager%20vs%20sasl%20error%20log&In-Reply-To=%3C5FC52E55-236D-4DA0-91F4-EEC58DAB388D%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] lager vs sasl error log">watson.timothy at gmail.com
       </A><BR>
    <I>Fri Mar 22 07:55:57 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026116.html">[rabbitmq-discuss] lager vs sasl error log
</A></li>
        <LI>Next message: <A HREF="026152.html">[rabbitmq-discuss] lager vs sasl error log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26123">[ date ]</a>
              <a href="thread.html#26123">[ thread ]</a>
              <a href="subject.html#26123">[ subject ]</a>
              <a href="author.html#26123">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Gavin,

On 21 Mar 2013, at 21:02, &quot;Gavin M. Roy&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gmr at meetme.com</A>&gt; wrote:
&gt;<i> Fwiw in some advocacy discussions, the logging output was a reason some people have discounted or not moved forward with Rabbit.
</I>&gt;<i> From conversations I have had recently with people, logging and config file syntax are the bigger approachachability issues with Rabbit.
</I>&gt;<i> 
</I>
That's a pity - the logging is something we could change. The config file syntax, not so much. I suppose we could bootstrap the prelaunch phase to parse and XML file (or whatever) and spew out the native format...

&gt;<i> My goal is to be able to do log aggregation for our largish count of RabbitMQ nodes, which afaik is not possible with Rabbit out of the box. This makes it nearly impossible to stay on top of logs for anything but troubleshooting individual nodes when problems occur.
</I>
Yeah with the current implementation you'd need to install your own log handler to make that work. In terms of changing the output format though, allowe to play devil's advocate for a moment...

The info/progress/error reports have a lot of data in them, process stats, stack traces, etc. are you wanting to see all that plonked on one single long line? Because I can see how that'd make parsing/aggregating easier, but not reading them. Does the lager output fit exactly with what you want (I've not looks at it or a couple of years)?

&gt;<i> 
</I>&gt;<i> On Thursday, March 21, 2013, Ben Hood &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">0x6e6562 at gmail.com</A>&gt; wrote:
</I>&gt;<i> Hey Tim,
</I>&gt;<i> 
</I>&gt;<i> Thanks for the heads up.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> 
</I>&gt;<i> Ben
</I>&gt;<i> On Thursday, 21 March 2013 at 12:36, Tim Watson wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Hi Ben,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On 21 Mar 2013, at 12:13, Ben Hood wrote:
</I>&gt;&gt;&gt;<i> I think a good start would be to implement Gavin's suggestion about having a more UNIXy output, since you could do this without having to change the transport.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> That's an understand-able requirement, however...
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> If you are aggregating lots of Rabbit logs, this results in lots of double entries such as
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Mar 21 12:05:30 a logger: : =INFO REPORT==== 21-Mar-2013::12:05:29 ===
</I>&gt;&gt;&gt;<i> Mar 21 12:05:30 a logger: : started TCP Listener on [::]:5672
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Sure - that multi-line output is what Erlang's built in error_logger generates.
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> If I understand Gavin correctly, you could improve the SNR by putting this on one line.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> To do that, we'd have to change from the built-in error_logger to something else, such as lager. That idea's been up for discussion before and as I said, I'll raise it again.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Cheers,
</I>&gt;&gt;<i> Tim
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Cheers,
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Ben
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> On Thursday, 21 March 2013 at 12:03, Tim Watson wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Hi all,
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> We've discussed moving to a different (non-standard) logging provider before, and I'll raise the issue again. Afaik we've not run into the issues with error_logger very often (i.e., the reasons why lager was invented, viz massive memory consumption due to serialisation of large terms in logging output). The 'filtering possibilities' with lager don't necessarily require the parse_transforms to be used iirc - you can submit a logging request direct to lager and specify the log level at the call site. Again, I'll raise the discussion with the rest of the team and let's see what comes of that.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Cheers,
</I>&gt;&gt;&gt;&gt;<i> Tim
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> On 19 Mar 2013, at 08:48, Gotthard, Petr wrote:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> Correct me if I&#8217;m wrong, but I don&#8217;t think that moving to lager requires any changes inside rabbitmq. Since rabbitmq (as far as I know) uses standard Erlang&#8217;s logging and since standard logs are redirected to lager, all rabbitmq related logs are processed by lager. Wihout many filtering possibilities though.
</I>&gt;&gt;&gt;&gt;&gt;<i> Petr
</I>&gt;&gt;&gt;&gt;&gt;<i> From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Gavin M. Roy
</I>&gt;&gt;&gt;&gt;&gt;<i> Sent: 18. b&#345;ezna 2013 17:36
</I>&gt;&gt;&gt;&gt;&gt;<i> To: Discussions about RabbitMQ
</I>&gt;&gt;&gt;&gt;&gt;<i> Subject: [rabbitmq-discuss] lager vs sasl error log
</I>&gt;&gt;&gt;&gt;&gt;<i> Any plans to move rabbitmq.log to lager (and allow for lager-syslog) while keeping rabbit-sasl.log for crash dumps?
</I>&gt;&gt;&gt;&gt;&gt;<i> Would be nice to be able to get the plugable loggers and improvements to logging performance lager purports to provide, as well as a more modern, *NIXy logging output.
</I>&gt;&gt;&gt;&gt;&gt;<i> Cheers,
</I>&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> Gavin
</I>&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Gavin M. Roy
</I>&gt;<i> Chief Technology Officer
</I>&gt;<i> 
</I>&gt;<i> 100 Union Square Drive
</I>&gt;<i> New Hope, PA 18938
</I>&gt;<i> p. +1.215.862.1162 x263
</I>&gt;<i> f. +1.215.862.0465
</I>&gt;<i>       
</I>&gt;<i> 
</I>&gt;<i> The public market leader in social discovery. (NYSE MKT: MEET) 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130322/bf3364f0/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130322/bf3364f0/attachment.htm</A>&gt;
</PRE>


















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026116.html">[rabbitmq-discuss] lager vs sasl error log
</A></li>
	<LI>Next message: <A HREF="026152.html">[rabbitmq-discuss] lager vs sasl error log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26123">[ date ]</a>
              <a href="thread.html#26123">[ thread ]</a>
              <a href="subject.html#26123">[ subject ]</a>
              <a href="author.html#26123">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
