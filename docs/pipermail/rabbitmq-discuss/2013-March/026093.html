<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] MYSQL not getting disconnected Consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20MYSQL%20not%20getting%20disconnected%20Consumer&In-Reply-To=%3C1363808375050-25619.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026127.html">
   <LINK REL="Next"  HREF="026097.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] MYSQL not getting disconnected Consumer</H1>
    <B>reddylast</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20MYSQL%20not%20getting%20disconnected%20Consumer&In-Reply-To=%3C1363808375050-25619.post%40n5.nabble.com%3E"
       TITLE="[rabbitmq-discuss] MYSQL not getting disconnected Consumer">reddylast at gmail.com
       </A><BR>
    <I>Wed Mar 20 19:39:35 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026127.html">[rabbitmq-discuss] Connecting to RabbitMQ on Windows Server Using Wildcard Cert with .NET Client Using SSL
</A></li>
        <LI>Next message: <A HREF="026097.html">[rabbitmq-discuss] MYSQL not getting disconnected Consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26093">[ date ]</a>
              <a href="thread.html#26093">[ thread ]</a>
              <a href="subject.html#26093">[ subject ]</a>
              <a href="author.html#26093">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've recently started to work on RabbitMQ. I'm using rabbitmq to fulfill
cronjob like mechanism. I have a jobs table (in mysql) which have fields :
id, status, category, start_time and end_time. The producer script reads all
the records from jobs table which have status='queued' and then push them to
multiple rabbitmq queues (according to the category). Now at consumer site
my script read those jobs from the rabbitmq queues and do some processing
and updates status='in-progress' and start_time=CURRENT_TIME() in DB. Once
consumer script finish all processing the jobs table is updated with
status='completed' and end_time=CURRENT_TIME and also sends acknowledgment.

So far everything works fine, but, one thing I've noticed is that consumer
script never kills mysql threads/processes, even if I close mysql connection
after executing each query. In this way it generate &quot;too many connections&quot;
error.

In Idea ? where is the exact problem exits ?

Thanks
Reddy



--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/MYSQL-not-getting-disconnected-Consumer-tp25619.html">http://rabbitmq.1065348.n5.nabble.com/MYSQL-not-getting-disconnected-Consumer-tp25619.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
</PRE>



























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026127.html">[rabbitmq-discuss] Connecting to RabbitMQ on Windows Server Using Wildcard Cert with .NET Client Using SSL
</A></li>
	<LI>Next message: <A HREF="026097.html">[rabbitmq-discuss] MYSQL not getting disconnected Consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26093">[ date ]</a>
              <a href="thread.html#26093">[ thread ]</a>
              <a href="subject.html#26093">[ subject ]</a>
              <a href="author.html#26093">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
