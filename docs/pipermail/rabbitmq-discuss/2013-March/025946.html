<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Pika connection negotiation behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20connection%20negotiation%20behavior&In-Reply-To=%3CCAKwdTWePaMh5%3D%2ByWJn6MbdB4unGW%3DoRNizy1jbeYZb8avTBmaQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025940.html">
   <LINK REL="Next"  HREF="025951.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Pika connection negotiation behavior</H1>
    <B>Gavin M. Roy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20connection%20negotiation%20behavior&In-Reply-To=%3CCAKwdTWePaMh5%3D%2ByWJn6MbdB4unGW%3DoRNizy1jbeYZb8avTBmaQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Pika connection negotiation behavior">gmr at meetme.com
       </A><BR>
    <I>Fri Mar 15 22:18:27 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025940.html">[rabbitmq-discuss] Pika connection negotiation behavior
</A></li>
        <LI>Next message: <A HREF="025951.html">[rabbitmq-discuss] Pika connection negotiation behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25946">[ date ]</a>
              <a href="thread.html#25946">[ thread ]</a>
              <a href="subject.html#25946">[ subject ]</a>
              <a href="author.html#25946">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So for the point of clarity, this is the behavior of the Java, .net and
erlang client libraries -- is it the proper behavior? Should it be changed?

The documentation for RabbitMQ's server configuration does not specify that
this is (can be for some clients) the max value.

I'm inclined to change it in pika due to the non-documented and
non-specified behavior.

Gavin


On Fri, Mar 15, 2013 at 3:48 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> Well, the max(client, server) behaviour is also what our clients do so the
</I>&gt;<i> precedent is there. But ultimately the server will accept whatever the
</I>&gt;<i> client asks for.
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 15/03/13 06:03, Gavin M. Roy wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> In Pika, currently and pre-dating my involvement, when tuning the
</I>&gt;&gt;<i> connection, it uses the /*minimum*/ value above 0 that either the server
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> or client provides for the heartbeat interval:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://github.com/pika/pika/**blob/v0.5/pika/connection.py#**L359&lt;https://github.com/pika/pika/blob/v0.5/pika/connection.py#L359">https://github.com/pika/pika/**blob/v0.5/pika/connection.py#**L359&lt;https://github.com/pika/pika/blob/v0.5/pika/connection.py#L359</A>&gt;
</I>&gt;&gt;<i> <A HREF="https://github.com/pika/pika/**blob/v0.5/pika/connection.py#**L411&lt;https://github.com/pika/pika/blob/v0.5/pika/connection.py#L411">https://github.com/pika/pika/**blob/v0.5/pika/connection.py#**L411&lt;https://github.com/pika/pika/blob/v0.5/pika/connection.py#L411</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Since introducing a heartbeat interval sent by the server of 600, this
</I>&gt;&gt;<i> has set a */maximum/* heartbeat interval of 600 regardless of what the
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> client sets upon creation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In reading the 0.9.1 spec, I did not see anything dictating any behavior
</I>&gt;&gt;<i> of this sort for heartbeat interval negotiation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm inclined to allow the client to always overwrite the server, but
</I>&gt;&gt;<i> since this behavior both pre-dates my involvement and is clearly
</I>&gt;&gt;<i> intentional, I wanted to get some feedback before making the change.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I currently have an open ticket tied to this that I would like to
</I>&gt;&gt;<i> resolve before releasing 0.9.10: <A HREF="https://github.com/pika/pika/**">https://github.com/pika/pika/**</A>
</I>&gt;&gt;<i> issues/303 &lt;<A HREF="https://github.com/pika/pika/issues/303">https://github.com/pika/pika/issues/303</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So, any thoughts?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Gavin
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ______________________________**_________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.</A>**rabbitmq.com&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, VMware
</I>&gt;<i>
</I>


-- 

Gavin M. Roy
Chief Technology Officer

 &lt;<A HREF="http://www.meetme.com/">http://www.meetme.com/</A>&gt;
100 Union Square Drive
New Hope, PA 18938
p. +1.215.862.1162 x263
f. +1.215.862.0465

&lt;<A HREF="https://www.facebook.com/pages/MeetMe/21931227129">https://www.facebook.com/pages/MeetMe/21931227129</A>&gt;
&lt;<A HREF="https://twitter.com/meetme">https://twitter.com/meetme</A>&gt;
    &lt;<A HREF="http://www.youtube.com/user/MeetMeVideos">http://www.youtube.com/user/MeetMeVideos</A>&gt;

The public market leader in social discovery. (NYSE MKT: MEET)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130315/fd62ddad/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130315/fd62ddad/attachment.htm</A>&gt;
</PRE>






































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025940.html">[rabbitmq-discuss] Pika connection negotiation behavior
</A></li>
	<LI>Next message: <A HREF="025951.html">[rabbitmq-discuss] Pika connection negotiation behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25946">[ date ]</a>
              <a href="thread.html#25946">[ thread ]</a>
              <a href="subject.html#25946">[ subject ]</a>
              <a href="author.html#25946">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
