<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Memory usage and total allowed connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20usage%20and%20total%20allowed%20connections&In-Reply-To=%3C6E83C4C8-D98C-4F59-BE36-D0CAC66E6215%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025998.html">
   <LINK REL="Next"  HREF="026019.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Memory usage and total allowed connections</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20usage%20and%20total%20allowed%20connections&In-Reply-To=%3C6E83C4C8-D98C-4F59-BE36-D0CAC66E6215%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Memory usage and total allowed connections">tim at rabbitmq.com
       </A><BR>
    <I>Tue Mar 19 09:50:06 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025998.html">[rabbitmq-discuss] Memory usage and total allowed connections
</A></li>
        <LI>Next message: <A HREF="026019.html">[rabbitmq-discuss] Memory usage and total allowed connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26011">[ date ]</a>
              <a href="thread.html#26011">[ thread ]</a>
              <a href="subject.html#26011">[ subject ]</a>
              <a href="author.html#26011">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 18 Mar 2013, at 20:25, Prabodh Upreti wrote:
&gt;<i> I have a system with 8G RAM.  I have set the vm_memory_high_watermark to .1
</I>&gt;<i> hence around 800K mem to play with I believe.
</I>&gt;<i> 
</I>[snip]
&gt;<i> I am getting questioned how many concurrent connections can I support in
</I>&gt;<i> this environment.  I am going with the assumption that each connected user
</I>&gt;<i> is only going to create a single temporary queue. I believe the overhead for
</I>&gt;<i> a temporary queue is 4k.  There is very little events flowing through the
</I>&gt;<i> system.  What would be a reasonable number to say for total number of  users
</I>&gt;<i> that can be support in this environment?  I know there are various factors
</I>&gt;<i> and accurate answer is not possible.  
</I>&gt;<i> 
</I>
I think the best thing for you to do here is to use the MulticastMain class that ships with the java client to run some tests and investigate yourself, based on the kind of usage you're expecting to see in production. There are memory overheads for queues/exchanges/etc, and also for messages flowing through the system (though messages larger than 64bytes will be shared across all parts of the system due to Erlang's use of a shared heap for 'large' binaries), and even when messages hit the disk, there is some overhead for in-memory indexes etc. Also each TCP connection will cost something too, and the space usage will vary depending on how busy various Erlang processes are and whether or not they're able to go into hibernation and so on.

&gt;<i> Maybe 100 users?  I would appreciate your input. Thank you.
</I>
Personally I would expect a bit more than that if system isn't busy - you said &quot;There is very little events flowing through the system&quot; after all - but you should experiment and see. Matthias and/or Simon may have better (or more specific) figures to share based on their experience over the years, but in any case measuring system performance with realistic samples before going in to production is a *very good* habit for you to get into! :)

Cheers,
Tim  

</PRE>





























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025998.html">[rabbitmq-discuss] Memory usage and total allowed connections
</A></li>
	<LI>Next message: <A HREF="026019.html">[rabbitmq-discuss] Memory usage and total allowed connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26011">[ date ]</a>
              <a href="thread.html#26011">[ thread ]</a>
              <a href="subject.html#26011">[ subject ]</a>
              <a href="author.html#26011">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
