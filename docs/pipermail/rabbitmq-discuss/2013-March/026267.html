<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Unable to start direct connection using Erlang	client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unable%20to%20start%20direct%20connection%20using%20Erlang%0A%09client&In-Reply-To=%3Ca0b3f8d1-aa1e-4256-b95a-d79e2e55cbd4%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026281.html">
   <LINK REL="Next"  HREF="026264.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Unable to start direct connection using Erlang	client</H1>
    <B>Alexander Reshniuk</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unable%20to%20start%20direct%20connection%20using%20Erlang%0A%09client&In-Reply-To=%3Ca0b3f8d1-aa1e-4256-b95a-d79e2e55cbd4%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Unable to start direct connection using Erlang	client">alex.reshniuk at gmail.com
       </A><BR>
    <I>Fri Mar 29 21:07:50 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026281.html">[rabbitmq-discuss] Problem with multiple consumers on multiple	servers !
</A></li>
        <LI>Next message: <A HREF="026264.html">[rabbitmq-discuss] Exchnages and queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26267">[ date ]</a>
              <a href="thread.html#26267">[ thread ]</a>
              <a href="subject.html#26267">[ subject ]</a>
              <a href="author.html#26267">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I really need you help since
I spend few days trying to make direct connection to RabbitMQ using Erlang 
client (both located on same host):

{ok, Connection} =
&gt;<i>         amqp_connection:start(#amqp_params_direct{ node = 
</I>&gt;<i> &lt;&lt;&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">kiosk at localhost</A>&quot;&gt;&gt;}),
</I>

Same connection but  #amqp_params_network works without any problem.
I'm dumping cookie before this call (using get_cookie()) and it'ss same as 
/var/lib/rabbitmq/.erlang.cookie  and /root/.erlang.cookie

RabbitMQ version: 2.7.1
Erlang AMQP client lib version: 2.7.1
Erlang version:  R14B04

rabbitmq-server output:
---------
/usr/lib/rabbitmq/bin/rabbitmq-server
Activating RabbitMQ plugins ...
10 plugins activated:
* amqp_client-0.0.0
* mochiweb-1.3-rmq0.0.0-git
* rabbitmq_consistent_hash_exchange-0.0.0
* rabbitmq_federation-0.0.0
* rabbitmq_management-0.0.0
* rabbitmq_management_agent-0.0.0
* rabbitmq_management_visualiser-0.0.0
* rabbitmq_mochiweb-0.0.0
* rabbitmq_tracing-0.0.0
* webmachine-1.7.0-rmq0.0.0-hg

node with name &quot;kiosk&quot; already running on &quot;localhost&quot;
diagnostics:
- nodes and their ports on localhost: [{kiosk,44319},
                                       {rabbitmqprelaunch671,54355}]
- current node: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqprelaunch671 at localhost</A>
- current node home dir: /root
- current node cookie hash: UuV+hP3qioICevzwrp5uuw==

---------

Runtime error log:
-----------------------
=ERROR REPORT==== 29-Mar-2013::21:03:24 ===
** Generic server &lt;0.46.0&gt; terminating
** Last message in was connect
** When Server state == {state,amqp_direct_connection,
                            {state,undefined,undefined,undefined,undefined,
                                undefined,undefined,undefined},
                            &lt;0.45.0&gt;,undefined,
                            {amqp_params_direct,&lt;&lt;&quot;guest&quot;&gt;&gt;,&lt;&lt;&quot;/&quot;&gt;&gt;,
                                &lt;&lt;&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">kiosk at localhost</A>&quot;&gt;&gt;,none,[]},
                            undefined,undefined,
                            #Fun&lt;amqp_connection_sup.1.36702488&gt;,
                            #Fun&lt;amqp_connection_sup.2.54430129&gt;,false}
** Reason for termination ==
** {{function_clause,[{gen,call,
                           [{rex,&lt;&lt;&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">kiosk at localhost</A>&quot;&gt;&gt;},
                            '$gen_call',
                            {call,rabbit_direct,connect,
                                  [&lt;&lt;&quot;guest&quot;&gt;&gt;,&lt;&lt;&quot;/&quot;&gt;&gt;,
                                   rabbit_framing_amqp_0_9_1,&lt;0.46.0&gt;,
                                   [{pid,&lt;0.46.0&gt;},
                                    {protocol,{'Direct',{0,9,1}}},
                                    {address,unknown},
                                    {port,unknown},
                                    {name,&lt;&lt;&quot;&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">t1 at localhost.2.46.0</A>&gt;&quot;&gt;&gt;},
                                    {peer_address,unknown},
                                    {peer_port,unknown},
                                    {user,&lt;&lt;&quot;guest&quot;&gt;&gt;},
                                    {vhost,&lt;&lt;&quot;/&quot;&gt;&gt;},
                                    {client_properties,[]},
                                    {type,direct}]],
                                  &lt;0.42.0&gt;},
                            infinity]},
                      {gen_server,call,3},
                      {rpc,do_call,3},
                      {amqp_direct_connection,connect,4},
                      {amqp_gen_connection,handle_call,3},
                      {gen_server,handle_msg,5},
                      {proc_lib,init_p_do_apply,3}]},
    {gen_server,call,
                [{rex,&lt;&lt;&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">kiosk at localhost</A>&quot;&gt;&gt;},
                 {call,rabbit_direct,connect,
                       [&lt;&lt;&quot;guest&quot;&gt;&gt;,&lt;&lt;&quot;/&quot;&gt;&gt;,rabbit_framing_amqp_0_9_1,
                        &lt;0.46.0&gt;,
                        [{pid,&lt;0.46.0&gt;},
                         {protocol,{'Direct',{0,9,1}}},
                         {address,unknown},
                         {port,unknown},
                         {name,&lt;&lt;&quot;&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">t1 at localhost.2.46.0</A>&gt;&quot;&gt;&gt;},
                         {peer_address,unknown},
                         {peer_port,unknown},
                         {user,&lt;&lt;&quot;guest&quot;&gt;&gt;},
                         {vhost,&lt;&lt;&quot;/&quot;&gt;&gt;},
                         {client_properties,[]},
                         {type,direct}]],
                       &lt;0.42.0&gt;},
                 infinity]}}
escript: exception exit: {{{function_clause,
                      [{gen,call,
                           [{rex,&lt;&lt;&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">kiosk at localhost</A>&quot;&gt;&gt;},
                            '$gen_call',
                            {call,rabbit_direct,connect,
                                [&lt;&lt;&quot;guest&quot;&gt;&gt;,&lt;&lt;&quot;/&quot;&gt;&gt;,
                                 rabbit_framing_amqp_0_9_1,&lt;0.46.0&gt;,
                                 [{pid,&lt;0.46.0&gt;},
                                  {protocol,{'Direct',{0,9,1}}},
                                  {address,unknown},
                                  {port,unknown},
                                  {name,&lt;&lt;&quot;&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">t1 at localhost.2.46.0</A>&gt;&quot;&gt;&gt;},
                                  {peer_address,unknown},
                                  {peer_port,unknown},
                                  {user,&lt;&lt;&quot;guest&quot;&gt;&gt;},
                                  {vhost,&lt;&lt;&quot;/&quot;&gt;&gt;},
                                  {client_properties,[]},
                                  {type,direct}]],
                                &lt;0.42.0&gt;},
                            infinity]},
                       {gen_server,call,3},
                       {rpc,do_call,3},
                       {amqp_direct_connection,connect,4},
                       {amqp_gen_connection,handle_call,3},
                       {gen_server,handle_msg,5},
                       {proc_lib,init_p_do_apply,3}]},
                  {gen_server,call,
                      [{rex,&lt;&lt;&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">kiosk at localhost</A>&quot;&gt;&gt;},
                       {call,rabbit_direct,connect,
                           [&lt;&lt;&quot;guest&quot;&gt;&gt;,&lt;&lt;&quot;/&quot;&gt;&gt;,rabbit_framing_amqp_0_9_1,
                            &lt;0.46.0&gt;,
                            [{pid,&lt;0.46.0&gt;},
                             {protocol,{'Direct',{0,9,1}}},
                             {address,unknown},
                             {port,unknown},
                             {name,&lt;&lt;&quot;&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">t1 at localhost.2.46.0</A>&gt;&quot;&gt;&gt;},
                             {peer_address,unknown},
                             {peer_port,unknown},
                             {user,&lt;&lt;&quot;guest&quot;&gt;&gt;},
                             {vhost,&lt;&lt;&quot;/&quot;&gt;&gt;},
                             {client_properties,[]},
                             {type,direct}]],
                           &lt;0.42.0&gt;},
                       infinity]}},
                 {gen_server,call,[&lt;0.46.0&gt;,connect,infinity]}}
  in function  gen_server:call/3
  in call from erl_eval:do_apply/5
  in call from erl_eval:expr/5
  in call from escript:eval_exprs/5
  in call from erl_eval:local_func/5
  in call from escript:interpret/4
  in call from escript:start/1
  in call from init:start_it/1
-----------------------

Thank you in advance for any ideas,

Best,
Alexander Reshniuk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130329/4a51e2dd/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130329/4a51e2dd/attachment.htm</A>&gt;
</PRE>


















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026281.html">[rabbitmq-discuss] Problem with multiple consumers on multiple	servers !
</A></li>
	<LI>Next message: <A HREF="026264.html">[rabbitmq-discuss] Exchnages and queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26267">[ date ]</a>
              <a href="thread.html#26267">[ thread ]</a>
              <a href="subject.html#26267">[ subject ]</a>
              <a href="author.html#26267">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
