<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] AMQP authentication with RabbitMQ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20AMQP%20authentication%20with%20RabbitMQ&In-Reply-To=50c8ffe90907081245u7b398e58l8f18f29b5e123b87%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004052.html">
   <LINK REL="Next"  HREF="004185.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] AMQP authentication with RabbitMQ</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20AMQP%20authentication%20with%20RabbitMQ&In-Reply-To=50c8ffe90907081245u7b398e58l8f18f29b5e123b87%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] AMQP authentication with RabbitMQ">matthias at lshift.net
       </A><BR>
    <I>Mon Jul 20 20:20:12 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004052.html">[rabbitmq-discuss] AMQP authentication with RabbitMQ
</A></li>
        <LI>Next message: <A HREF="004185.html">[rabbitmq-discuss] AMQP authentication with RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4184">[ date ]</a>
              <a href="thread.html#4184">[ thread ]</a>
              <a href="subject.html#4184">[ subject ]</a>
              <a href="author.html#4184">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Darien, Eric, Lauren,

Darien Kindlund wrote:
&gt;<i> Okay, I think Laurens original issue was that she wanted RabbitMQ to
</I>&gt;<i> verify SSL connections -- not individual messages... with the idea of
</I>&gt;<i> different client certificates being allowed access to different
</I>&gt;<i> vhosts.
</I>&gt;<i> 
</I>&gt;<i> So, based on this, there's no need to have consumers verify
</I>&gt;<i> signed/encrypted messages ... since the logic of comparing credentials
</I>&gt;<i> per vhost is more suited on the RabbitMQ server than pushing that
</I>&gt;<i> verification to each consumer.  I agree that if you're looking for
</I>&gt;<i> end-to-end security, signing/encrypting/verifying messages certainly
</I>&gt;<i> prevents any consumers from handling untrusted data.  However, having
</I>&gt;<i> only this signing/encrypting/verifying capability at the end points
</I>&gt;<i> (producer/consumer) and doing nothing on RabbitMQ does not address the
</I>&gt;<i> issue of dealing with an _untrusted_ producer from shoving malformed
</I>&gt;<i> messages onto RabbitMQ -- although these messages would eventually be
</I>&gt;<i> discarded by the consumer, it could still end up being a
</I>&gt;<i> denial-of-service (DoS) condition.
</I>
We are in the final stages of qa'ing &quot;native&quot; SSL support for the 
RabbitMQ server, Java, .net and Erlang clients that addressed the above. 
A description of the new functionality is available at 
<A HREF="https://dev.rabbitmq.com/wiki/SslSupport,">https://dev.rabbitmq.com/wiki/SslSupport,</A> and you can find the code in 
the 'bug19356' branches of the respective hg repositories.

&gt;<i>  Specifically, the RabbitMQ server needs to verify the CLIENT's
</I>&gt;<i> certificate credentials (not any server certs) -- specifically (I'm
</I>&gt;<i> guessing) verifying the client's certificate is valid and that its
</I>&gt;<i> path is valid (which stunnel can already do for you, given a valid set
</I>&gt;<i> of CA certificates to use).  But also, look at the client
</I>&gt;<i> certificate's DN and depending on what the DN matches... allow or deny
</I>&gt;<i> access to the corresponding vhost channel.
</I>
The new code can verify the client certs. Access to particular vhosts, 
and specific resources can be controlled by the existing RabbitMQ 
permissions system based on the supplied user name.

Note that there is no association of subjectDNs and users, so in 
principle any user can use any trusted cert. That should be ok though as 
long as the username/password are treated as sensitive information in 
the same way as the private keys for the client certs.


Regards,

Matthias


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004052.html">[rabbitmq-discuss] AMQP authentication with RabbitMQ
</A></li>
	<LI>Next message: <A HREF="004185.html">[rabbitmq-discuss] AMQP authentication with RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4184">[ date ]</a>
              <a href="thread.html#4184">[ thread ]</a>
              <a href="subject.html#4184">[ subject ]</a>
              <a href="author.html#4184">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
