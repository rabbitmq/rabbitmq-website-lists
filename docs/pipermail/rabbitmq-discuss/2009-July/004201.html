<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Login woes with the Ruby amqp library
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Login%20woes%20with%20the%20Ruby%20amqp%20library&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004278.html">
   <LINK REL="Next"  HREF="004202.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Login woes with the Ruby amqp library</H1>
    <B>Mathias Meyer</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Login%20woes%20with%20the%20Ruby%20amqp%20library&In-Reply-To="
       TITLE="[rabbitmq-discuss] Login woes with the Ruby amqp library">meyer at paperplanes.de
       </A><BR>
    <I>Tue Jul 21 20:32:22 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004278.html">[rabbitmq-discuss] queue is locked exclusively
</A></li>
        <LI>Next message: <A HREF="004202.html">[rabbitmq-discuss] Login woes with the Ruby amqp library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4201">[ date ]</a>
              <a href="thread.html#4201">[ thread ]</a>
              <a href="subject.html#4201">[ subject ]</a>
              <a href="author.html#4201">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

I'm trying to hunt down a problem that I can reproduce with the Ruby
amqp library by Aman, and RabbitMQ 1.6. I'm not sure on which end of
both the actual problem is, maybe you have some ideas.

The problem is rather simple, I try to log in with invalid data.
RabbitMQ's way seems to be to log an error and shutdown the
connection. The library on the other hand doesn't seem to take that
too seriously, and tries reopening connections like crazy, immediately
after the previous connection has been closed. Obviously the log is
showing the right errors with access_refused as you'd expect, but I'm
not sure if that error actually reaches the client or is handled by it
in any way. Does the server return the error to the client at all?
That'd probably mean the problem is on the library's end. I tried the
whole thing with bunny, and it at least realizes there's no more data
coming from the server, but obviously it uses a more procedural
approach compared to the EventMachine-based amqp library.

Any pointers would be most welcome. The problem I end up with with
these endless reconnect is an Erlang VM that eats up CPU like crazy,
and that's not great.

Thanks!

Cheers, Mathias
-- 
<A HREF="http://paperplanes.de">http://paperplanes.de</A> | <A HREF="http://holgarific.net">http://holgarific.net</A>
<A HREF="http://twitter.com/roidrage">http://twitter.com/roidrage</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004278.html">[rabbitmq-discuss] queue is locked exclusively
</A></li>
	<LI>Next message: <A HREF="004202.html">[rabbitmq-discuss] Login woes with the Ruby amqp library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4201">[ date ]</a>
              <a href="thread.html#4201">[ thread ]</a>
              <a href="subject.html#4201">[ subject ]</a>
              <a href="author.html#4201">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
