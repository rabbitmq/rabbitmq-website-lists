<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Errors Restarting a Stopped Node in Cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Errors%20Restarting%20a%20Stopped%20Node%20in%20Cluster&In-Reply-To=4A709956.2040607%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004271.html">
   <LINK REL="Next"  HREF="004276.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Errors Restarting a Stopped Node in Cluster</H1>
    <B>Rich Kim</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Errors%20Restarting%20a%20Stopped%20Node%20in%20Cluster&In-Reply-To=4A709956.2040607%40lshift.net"
       TITLE="[rabbitmq-discuss] Errors Restarting a Stopped Node in Cluster">rich.kim at db.com
       </A><BR>
    <I>Wed Jul 29 20:18:55 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004271.html">[rabbitmq-discuss] Errors Restarting a Stopped Node in Cluster
</A></li>
        <LI>Next message: <A HREF="004276.html">[rabbitmq-discuss] Errors Restarting a Stopped Node in Cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4275">[ date ]</a>
              <a href="thread.html#4275">[ thread ]</a>
              <a href="subject.html#4275">[ subject ]</a>
              <a href="author.html#4275">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matthias,

I've have the cluster setup on auto-configuration, all 3 nodes were up &amp; 
running at the time I brought down the first node.

rabbitmqctl status
Status of node <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at nygstsappu1</A> ...
[{running_applications,[{rabbit,&quot;RabbitMQ&quot;,&quot;1.6.0&quot;},
                        {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.4.10&quot;},
                        {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.2&quot;},
                        {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.6&quot;},
                        {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.16.2&quot;},
                        {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.13.2&quot;}]},
 {nodes,[<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at nygstsappu1</A><A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at nygstsappu2</A><A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at nygstsappd1</A>]},
 
{running_nodes,[<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at nygstsappd1</A><A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at nygstsappu1</A><A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at nygstsappu2</A>]}]
...done.

rabbitmqctl stop_app
Stopping node <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at nygstsappu1</A> ...
Erlang has closed
...done.

rabbitmqctl stop
Stopping and halting node <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at nygstsappu1</A> ...

rabbitmq-server &amp;

RabbitMQ 1.6.0 (AMQP 8-0)
Copyright (C) 2007-2009 LShift Ltd., Cohesive Financial Technologies LLC., 
and Rabbit Technologies Ltd.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

node        : <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at nygstsappu1</A>
log         : 
/export/home/common/repository/rabbitmq/current/log/rabbit.log
sasl log    : 
/export/home/common/repository/rabbitmq/current/log/rabbit-sasl.log
database dir: 
/export/home/common/repository/rabbitmq/current/mnesia/rabbit

starting database             ...Erlang has closed
{&quot;init terminating in 
do_boot&quot;,{{nocatch,{error,{cannot_start_application,rabbit,{{timeout_waiting_for_tables,[rabbit_user,rabbit_user_permission,rabbit_vhost,rabbit_config,rabbit_durable_route,rabbit_durable_exchange,rabbit_durable_queue]},{rabbit,start,[normal,[]]}}}}},[{init,start_it,1},{init,start_em,1}]}}





________________________
Richard Kim
Deutsche Bank Americas
Global Banking, New York
<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rich.kim at db.com</A>
P: +1 212.250.4984



Matthias Radestock &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>&gt; 
07/29/2009 02:47 PM

To
Rich Kim/db/<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dbcom at DBAmericas</A>
cc
<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject
Re: [rabbitmq-discuss] Errors Restarting a Stopped Node in Cluster






Richard,

Rich Kim wrote:
&gt;<i> I have a cluster of 3 rabbitmq servers, when I attempt to restart one of 
</I>
&gt;<i> these nodes, I am unable to bring it back up.
</I>
Can you post a transcript of the commands for starting the nodes, 
setting up the cluster, stopping the node, and then restarting it?

Generally, restarting a single node should work w/o any problems, so I 
suspect there is some peculiarity about your cluster setup or the way 
you restart the nodes. The transcript should make it obvious if that is 
the case.

When shutting down and restarting *multiple* nodes, the order can be 
important, depending on how exactly the cluster was configured.


Regards,

Matthias.



---
This communication may contain confidential and/or privileged information.
If you are not the intended recipient (or have received this communication
in error) please notify the sender immediately and destroy this
communication. Any unauthorized copying, disclosure or distribution of the
material in this communication is strictly forbidden.

Deutsche Bank does not render legal or tax advice, and the information
contained in this communication should not be regarded as such.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090729/74b24fb6/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090729/74b24fb6/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004271.html">[rabbitmq-discuss] Errors Restarting a Stopped Node in Cluster
</A></li>
	<LI>Next message: <A HREF="004276.html">[rabbitmq-discuss] Errors Restarting a Stopped Node in Cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4275">[ date ]</a>
              <a href="thread.html#4275">[ thread ]</a>
              <a href="subject.html#4275">[ subject ]</a>
              <a href="author.html#4275">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
