<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Return message? [Was: Re: Sample code for	python?]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Return%20message%3F%20%5BWas%3A%20Re%3A%20Sample%20code%20for%0A%09python%3F%5D&In-Reply-To=539885.23651.qm%40web45608.mail.sp1.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004018.html">
   <LINK REL="Next"  HREF="004034.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Return message? [Was: Re: Sample code for	python?]</H1>
    <B>Valentino Volonghi</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Return%20message%3F%20%5BWas%3A%20Re%3A%20Sample%20code%20for%0A%09python%3F%5D&In-Reply-To=539885.23651.qm%40web45608.mail.sp1.yahoo.com"
       TITLE="[rabbitmq-discuss] Return message? [Was: Re: Sample code for	python?]">dialtone at gmail.com
       </A><BR>
    <I>Mon Jul  6 19:36:45 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004018.html">[rabbitmq-discuss] Return message? [Was: Re: Sample code for	python?]
</A></li>
        <LI>Next message: <A HREF="004034.html">[rabbitmq-discuss] Return message? [Was: Re: Sample code for python?]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4025">[ date ]</a>
              <a href="thread.html#4025">[ thread ]</a>
              <a href="subject.html#4025">[ subject ]</a>
              <a href="author.html#4025">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 6, 2009, at 8:54 AM, Allen Fowler wrote:

&gt;<i> I am not at all familiar with the twisted system, but does this mean  
</I>&gt;<i> that RabbitMQ/AMQP does not, on it's own, provide any method for a  
</I>&gt;<i> message sender to ascertain the success or failure of a task  
</I>&gt;<i> embodied by a message?
</I>
Twisted Matrix is just an event driven networking framework. You
don't really need to know it to use quebert unless you want to implement
extra functionality in it (but even in that case you need to know only a
small part of it).

&gt;<i> That is to say: The backed system (job receiver) has no way of  
</I>&gt;<i> signaling to the front-end (job-sender) any details about the job  
</I>&gt;<i> the front-end is waiting on?
</I>
&gt;<i> Is this true?
</I>

Why do you need asynchronous guaranteed delivery when you want to
receive a synchronous result?

If your plan is to simply execute a task and know the outcome then  
simply
run an HTTP request to the service that runs it and if it fails you  
know it.

If you are looking for asynchronous execution then, no matter what  
system
you use, you'll have to come up with an alternative way to send the  
result
to the caller (which could even be dead when the task finishes).

RabbitMQ provides you guaranteed delivery of a message by taking
responsibility when you send the payload through it. Then it's queued  
and
the way you handle it in the consumer gives your communication channel
a subset (full or partial) of the properties that rabbitmq guarantees.  
Keep in
mind though that if the task executor is not online when you request a  
task
your search for a synchronous result would essentially be hanging  
forever.

Using HTTP between the consumer and the execution channel you are
using HTTP properties to know when a task executes or not. If the  
request
returns a 200 OK then it was completed and the result might be in the  
returned
response or saved in another storage that something else might poll  
while
in the response there might be the unique key or URI to get to that  
payload.

I believe that IMHO you are mixing some unrelated problems, one is
asynchronous execution of tasks and the other is &quot;returning&quot; a result,  
to
do the second one you need to create your own system (carrot, which is
the base for celery, provides a built-in system where the result is  
stored
in a key-value store or again in rabbitmq where the original producer  
waits
for it, IMHO this is not how I would do it, the task should be  
autocontained
and should do everything in itself, the &quot;frontend&quot; (producer) should  
just
access data normally and look for the result where it would normally, if
you actually need a result then your infrastructure should give you a  
way
to use the systems both synchronously and asynchronously in the simplest
way possible, and an HTTP request without going through RabbitMQ is
the simplest way possible when you need a result).


--
Valentino Volonghi aka Dialtone
Now running MacOS X 10.5
Home Page: <A HREF="http://www.twisted.it">http://www.twisted.it</A>
<A HREF="http://www.adroll.com">http://www.adroll.com</A>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090706/8be78c85/attachment.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090706/8be78c85/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004018.html">[rabbitmq-discuss] Return message? [Was: Re: Sample code for	python?]
</A></li>
	<LI>Next message: <A HREF="004034.html">[rabbitmq-discuss] Return message? [Was: Re: Sample code for python?]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4025">[ date ]</a>
              <a href="thread.html#4025">[ thread ]</a>
              <a href="subject.html#4025">[ subject ]</a>
              <a href="author.html#4025">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
