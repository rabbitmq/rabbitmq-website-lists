<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ 1.6 persistence?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%201.6%20persistence%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004186.html">
   <LINK REL="Next"  HREF="004075.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ 1.6 persistence?</H1>
    <B>Chris Wiegand</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%201.6%20persistence%3F&In-Reply-To="
       TITLE="[rabbitmq-discuss] RabbitMQ 1.6 persistence?">cwiegand at mobileaccord.com
       </A><BR>
    <I>Tue Jul 14 23:59:51 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004186.html">[rabbitmq-discuss] Suggested small changes to	/etc/init.d/rabbitmq-server
</A></li>
        <LI>Next message: <A HREF="004075.html">[rabbitmq-discuss] RabbitMQ 1.6 persistence?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4074">[ date ]</a>
              <a href="thread.html#4074">[ thread ]</a>
              <a href="subject.html#4074">[ subject ]</a>
              <a href="author.html#4074">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We were trying out RabbitMQ (1.6, just downloaded it last week), and while it's throughput is great compared to ActiveMQ, I'm finding that if the erlang session dies (like say if I kill it, or try to pump in 1 million messages and it runs out of memory), and then I re-start the RabbitMQ server it takes a rather long time to load the persistence stuff, but then just clears out the queues, and the file (rabbit_persister.LOG) just gets truncated and the messages were not persisted.

Am I misunderstanding how RabbitMQ implements persistence? I expected that if the broker stops, and then gets relaunched that it would reload the last saved state for the queues, etc.., but that doesn't seem to be taking place. We're running it under Windows, under the most recent version of erlang (also just downloaded last week), in case that would affect anything. I'll try this under Linux and OpenSolaris here soon, in case that makes a difference.

I'm using the .Net bindings, and setting the BasicProperties' DeliveryMode to 2 for persistence, is there anything else I have to do to make a queue persist?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090714/8c84b37c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090714/8c84b37c/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004186.html">[rabbitmq-discuss] Suggested small changes to	/etc/init.d/rabbitmq-server
</A></li>
	<LI>Next message: <A HREF="004075.html">[rabbitmq-discuss] RabbitMQ 1.6 persistence?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4074">[ date ]</a>
              <a href="thread.html#4074">[ thread ]</a>
              <a href="subject.html#4074">[ subject ]</a>
              <a href="author.html#4074">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
