<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Diagnosing a problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Diagnosing%20a%20problem&In-Reply-To=7fd310d10907221305g3e6d5edag351877f56c74dd57%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004216.html">
   <LINK REL="Next"  HREF="004262.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Diagnosing a problem</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Diagnosing%20a%20problem&In-Reply-To=7fd310d10907221305g3e6d5edag351877f56c74dd57%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Diagnosing a problem">matthias at lshift.net
       </A><BR>
    <I>Wed Jul 29 02:18:56 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004216.html">[rabbitmq-discuss] Diagnosing a problem
</A></li>
        <LI>Next message: <A HREF="004262.html">[rabbitmq-discuss] Diagnosing a problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4257">[ date ]</a>
              <a href="thread.html#4257">[ thread ]</a>
              <a href="subject.html#4257">[ subject ]</a>
              <a href="author.html#4257">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Bryan,

Bryan Murphy wrote:
&gt;<i> This was in my rabbitmq startup error log: [...] starting persister
</I>&gt;<i> ...{&quot;init terminating in 
</I>&gt;<i> do_boot&quot;,{{nocatch,{error,{cannot_start_application,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{{badmatch,{error,{{function_clause,[{rabbit_persister,replay,[{corrupt_log_file,&quot;/var/lib/rabbitmq/mnesia/rabbit/rabbit_persister.LOG&quot;},rabbit_persister,error,{psnapshot,1,{dict,0,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},192,193}]},{rabbit_persister,internal_load_snapshot,2},{rabbit_persister,init,1},{gen_server,init_it,6},{proc_lib,init_p,5}]},{child,undefined,rabbit_persister,{rabbit_persister,start_link,[]},transient,100,worker,[rabbit_persister]}}}},[{rabbit,start_child,1},{rabbit,'-start/2-fun-4-',0},{rabbit,'-start/2-fun-0-',1},{lists,foreach,2},{rabbit,start,2},{application_master,start_it_old,4}]}}}}}}},[{init,start_it,1},{init,start_em,1}]}}
</I>
Interesting! A corrupted persister log file. I don't think we've seen 
that particular error before.

Do you still have that file? Also, is there a .previous file in the same 
dir? If so, replacing the corrupted file with the .previous file would 
probably allow you to recover the messages.

The replacing really should happen automatically. This has been 
discussed as a possible enhancement on the mailing list before, but the 
new persister is going to be ready soon, so we are not planning any 
enhancements to the old one.

Regards,

Matthias


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004216.html">[rabbitmq-discuss] Diagnosing a problem
</A></li>
	<LI>Next message: <A HREF="004262.html">[rabbitmq-discuss] Diagnosing a problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4257">[ date ]</a>
              <a href="thread.html#4257">[ thread ]</a>
              <a href="subject.html#4257">[ subject ]</a>
              <a href="author.html#4257">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
