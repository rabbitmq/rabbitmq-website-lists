<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Limit QueueingConsumer Memory Usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Limit%20QueueingConsumer%20Memory%20Usage&In-Reply-To=4A57A639.1050000%40worldlingo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004063.html">
   <LINK REL="Next"  HREF="004066.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Limit QueueingConsumer Memory Usage</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Limit%20QueueingConsumer%20Memory%20Usage&In-Reply-To=4A57A639.1050000%40worldlingo.com"
       TITLE="[rabbitmq-discuss] Limit QueueingConsumer Memory Usage">0x6e6562 at gmail.com
       </A><BR>
    <I>Sun Jul 12 22:14:52 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004063.html">[rabbitmq-discuss] Limit QueueingConsumer Memory Usage
</A></li>
        <LI>Next message: <A HREF="004066.html">[rabbitmq-discuss] Limit QueueingConsumer Memory Usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4067">[ date ]</a>
              <a href="thread.html#4067">[ thread ]</a>
              <a href="subject.html#4067">[ subject ]</a>
              <a href="author.html#4067">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Lars,

On Fri, Jul 10, 2009 at 9:36 PM, Lars George&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lars at worldlingo.com</A>&gt; wrote:
&gt;<i> Thanks for the answer. So this QoS is only in trunk of the Java client. I
</I>&gt;<i> will have to check this out.
</I>
The QoS command is part of all of the client libraries that the Rabbit
team maintain. I'm reasonably sure that other clients implement this
as well, since the client side is trivial - all of the complexity is
on the server side.

&gt;<i> Using the DefaultConsumer means extending it anyways, right? As by default
</I>&gt;<i> it does not do anything. Even setting QoS to 1 would mean you will have to
</I>&gt;<i> enforce ack'ing the message or else the async process will keep sending the
</I>&gt;<i> next one. So a simple single local Delivery bean instance could hold the
</I>&gt;<i> current message.
</I>&gt;<i>
</I>&gt;<i> Saves the queue part. But then you also have to lock on that instance for
</I>&gt;<i> the blocking behavior, which the QueueingConsumer has build in.
</I>&gt;<i>
</I>&gt;<i> Am I on the right track here?
</I>
IMHO the QueueingConsumer abstraction is double-edged sword. It is a
really great way to easily consume messages without having to
implement every protocol callback. However, without flow control, the
QueueingConsumer can absorb the pressure that you actually want to
push back onto the broker to stem the flow on messages. This aspect is
irrelevant if you do use flow control, but doing so kind of obviates
the need to have this blocking convenience.

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004063.html">[rabbitmq-discuss] Limit QueueingConsumer Memory Usage
</A></li>
	<LI>Next message: <A HREF="004066.html">[rabbitmq-discuss] Limit QueueingConsumer Memory Usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4067">[ date ]</a>
              <a href="thread.html#4067">[ thread ]</a>
              <a href="subject.html#4067">[ subject ]</a>
              <a href="author.html#4067">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
