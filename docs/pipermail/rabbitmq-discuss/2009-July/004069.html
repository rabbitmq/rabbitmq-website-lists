<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Suggested small changes to	/etc/init.d/rabbitmq-server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Suggested%20small%20changes%20to%0A%09/etc/init.d/rabbitmq-server&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004068.html">
   <LINK REL="Next"  HREF="004186.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Suggested small changes to	/etc/init.d/rabbitmq-server</H1>
    <B>Terry Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Suggested%20small%20changes%20to%0A%09/etc/init.d/rabbitmq-server&In-Reply-To="
       TITLE="[rabbitmq-discuss] Suggested small changes to	/etc/init.d/rabbitmq-server">terry at fluidinfo.com
       </A><BR>
    <I>Tue Jul 14 06:24:43 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004068.html">[rabbitmq-discuss] RabbitMQ Consumer Error
</A></li>
        <LI>Next message: <A HREF="004186.html">[rabbitmq-discuss] Suggested small changes to	/etc/init.d/rabbitmq-server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4069">[ date ]</a>
              <a href="thread.html#4069">[ thread ]</a>
              <a href="subject.html#4069">[ subject ]</a>
              <a href="author.html#4069">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It would be nice if /etc/init.d/rabbitmq-server allowed one to customize
where it writes the output that currently goes to /var/log/rabbitmq.

Attached is a trivial diff to allow the directory for those files to be set
in /etc/default/rabbitmq

There are a few other small things I'd do to that script too, were it mine.

Is there any decent reason why the scripts in /usr/sbin/rabbit-* refuse to
run rabbitmq unless you're root?  Seeing as a normal user can directly run
/usr/lib/rabbitmq/bin/rabbit-*, I don't really see the point of denying a
normal user in /usr/sbin/rabbit-*.  The /usr/sbin scripts could check to
see if you're root and use su rabbitmq if so, and just run as the user if
not. The worst that can happen is that rabbit fails to start, isn't it?

I ask all this because I'm upgrading some automated scripts to a modern
version of RabbitMQ after Esteve Fernandez noticed I was running 1.4. Last
time, I went behind the back of the normal rabbit startup scripts (using
rabbitmqctl_real) to get things done as a normal user. It would be nice to
just be able to run /etc/init.d/rabbit-server and not to have to hack it
again this time (and next time, if something like rabbitmqctl_real appears
or disappears behind the scenes). But the /var/log and the /usr/sbin root
check don't want to let me do that.

Thanks!

Terry

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: rabbit-diff
Url: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090714/dde5d80f/attachment.txt">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090714/dde5d80f/attachment.txt</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004068.html">[rabbitmq-discuss] RabbitMQ Consumer Error
</A></li>
	<LI>Next message: <A HREF="004186.html">[rabbitmq-discuss] Suggested small changes to	/etc/init.d/rabbitmq-server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4069">[ date ]</a>
              <a href="thread.html#4069">[ thread ]</a>
              <a href="subject.html#4069">[ subject ]</a>
              <a href="author.html#4069">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
