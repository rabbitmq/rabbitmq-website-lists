<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Unique Messages in Queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Unique%20Messages%20in%20Queue&In-Reply-To=4e1b00700907310839r69f389c9yaf8cecc951a52fa4%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004299.html">
   <LINK REL="Next"  HREF="004304.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Unique Messages in Queue</H1>
    <B>Darien Kindlund</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Unique%20Messages%20in%20Queue&In-Reply-To=4e1b00700907310839r69f389c9yaf8cecc951a52fa4%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Unique Messages in Queue">darien at kindlund.com
       </A><BR>
    <I>Fri Jul 31 16:56:54 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004299.html">[rabbitmq-discuss] Unique Messages in Queue
</A></li>
        <LI>Next message: <A HREF="004304.html">[rabbitmq-discuss] Unique Messages in Queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4301">[ date ]</a>
              <a href="thread.html#4301">[ thread ]</a>
              <a href="subject.html#4301">[ subject ]</a>
              <a href="author.html#4301">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Vidit,

To my knowledge, RabbitMQ doesn't provide this type of capability by
default.  However, you could easily write a &quot;pre-filter&quot; application,
which takes in duplicate messages from your source on one queue and
then outputs the non-duplicates out on another queue.  You don't need
a database or other expensive I/O to check for duplicates.

Presumably, you have a way of identifying unique messages; I'll assume
it's some sort of unique ID associated with the message...
You can have your &quot;pre-filter&quot; application use a bloom filter
(<A HREF="http://en.wikipedia.org/wiki/Bloom_filters">http://en.wikipedia.org/wiki/Bloom_filters</A>), which allocates constant
size memory and a configurable false-positive percentage.
The only major issue with this approach, is that bloom filters hold a
maximal amount of entries (user configurable), so you'll have to deal
with the corner case of how the application should behave when it has
seen the maximum number of unique messages -- either recreate a new
bloom filter (and discard your previous history) or chain multiple
bloom filters together (slowly increasing your CPU costs).  Again, the
maximal value can be set exceedingly large (e.g., 10 million), in
order to reduce the (probable) likelihood of dealing with this
situation.

-- Darien

On Fri, Jul 31, 2009 at 11:39 AM, Vidit Drolia&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">viditdrolia at gmail.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Is it possible to store unique messages in a queue? I have a message
</I>&gt;<i> source that may provide duplicate messages but I do not want the
</I>&gt;<i> message to be processed more than once. I am trying to avoid using a
</I>&gt;<i> database or any other form of persistence in the client using the
</I>&gt;<i> queues. Any help/advice will be very helpful.
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i> Regads,
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Vidit Drolia
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004299.html">[rabbitmq-discuss] Unique Messages in Queue
</A></li>
	<LI>Next message: <A HREF="004304.html">[rabbitmq-discuss] Unique Messages in Queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4301">[ date ]</a>
              <a href="thread.html#4301">[ thread ]</a>
              <a href="subject.html#4301">[ subject ]</a>
              <a href="author.html#4301">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
