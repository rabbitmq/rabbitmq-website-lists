<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] twiddling with rabbitmq-http2 on windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20twiddling%20with%20rabbitmq-http2%20on%20windows&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004055.html">
   <LINK REL="Next"  HREF="004060.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] twiddling with rabbitmq-http2 on windows</H1>
    <B>Juhani R&#228;nkimies</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20twiddling%20with%20rabbitmq-http2%20on%20windows&In-Reply-To="
       TITLE="[rabbitmq-discuss] twiddling with rabbitmq-http2 on windows">juhani at juranki.com
       </A><BR>
    <I>Wed Jul  8 17:31:00 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004055.html">[rabbitmq-discuss] Net::AMQP perl module work in progress
</A></li>
        <LI>Next message: <A HREF="004060.html">[rabbitmq-discuss] twiddling with rabbitmq-http2 on windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4043">[ date ]</a>
              <a href="thread.html#4043">[ thread ]</a>
              <a href="subject.html#4043">[ subject ]</a>
              <a href="author.html#4043">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

After some exploration I got rabbitmq-http2 to work on Windows XP.
This is roughly what I did (countless dead ends omitted):

1) compile rabbitmq-http2 and erlang-rfc4627 using make module
(attached EMakefile has also instructions for erlang-client, you
should delete or comment them)
2) create folder ...\rabbitmq-http2-default\server_root\logs
3) in ...\rabbitmq-http2-default\server_root\logs\ copy http.conf.in
to http.conf and replace @SERVER_ROOT@ with real path (forward
slashes)
4) create script that sets RABBITMQ_SERVER_START_ARGS and calls
rabbitmq-server.bat (the attached run.bat, check the paths)
5) run.bat

The examples work with recent versions of Chrome, Safari and Firefox.

But when I enable firebug, Firefox starts to behave strangely.

Sometimes messages are received only in combination with send.
Sometimes only sending works.
And then sending stops to work and errors are printed on page

JsonRPC error:
Service: &quot;/rpc/38E41B75EEED17CDDC28D8CAA0CC1EF8&quot;
Method: &quot;cast&quot;
Params: [&quot;basic.publish&quot;,[1,&quot;canvasPainter&quot;,&quot;&quot;,false,false],&quot;{\&quot;event\&quot;:\&quot;drawAction\&quot;,\&quot;args\&quot;:{\&quot;startPos\&quot;:{\&quot;x\&quot;:89,\&quot;y\&quot;:175},\&quot;curPos\&quot;:{\&quot;x\&quot;:92,\&quot;y\&quot;:241},\&quot;drawColor\&quot;:\&quot;rgb(0,0,0)\&quot;,\&quot;lineWidth\&quot;:10,\&quot;actionNumber\&quot;:2}}&quot;,[null,null,null,null,null,null,null,null,null,null,null,null,null,null]]
Response: {&quot;version&quot;:&quot;1.1&quot;,&quot;id&quot;:46,&quot;error&quot;:{&quot;name&quot;:&quot;JSONRPCError&quot;,&quot;code&quot;:404,&quot;message&quot;:&quot;Service
not found&quot;,&quot;error&quot;:&quot;38E41B75EEED17CDDC28D8CAA0CC1EF8&quot;}}

If I disable FB console and net tabs, and refresh, messages flow again.
And continue to do so even if console and net are enabled again.

There are no error messages on FB console.

br,
-juhani
-------------- next part --------------
set SRC=C:\src\rabbit
set SERVER_ROOT=c:/src/rabbit/rabbitmq-http2-default/server_root
set ERL_HOME=c:\Program Files\erl5.6.1
set RABBIT_SBIN=%ERL_HOME%\lib\rabbitmq_server-1.6.0\sbin

set JSON=%SRC%\erlang-rfc4627-default\ebin
set CLIENT=%SRC%\rabbitmq-erlang-client-default\ebin
set HTTP2=%SRC%\rabbitmq-http2-default\ebin

set PATHS=-pa %JSON% -pa %HTTP2% 
rem -pa %CLIENT% 

set RABBITMQ_SERVER_START_ARGS= %PATHS% ^
-rabbit rabbit_http_conf \&quot;&quot;%SERVER_ROOT%/conf/httpd.conf&quot;\&quot; ^
extra_startup_steps [{\&quot;HTTP-JSON-listeners\&quot;,rabbit_http,kickstart,[]}]

&quot;%RABBIT_SBIN%\rabbitmq-server.bat&quot;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: EMakefile
Type: application/octet-stream
Size: 556 bytes
Desc: not available
Url : <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090708/8203c331/attachment.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090708/8203c331/attachment.obj</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004055.html">[rabbitmq-discuss] Net::AMQP perl module work in progress
</A></li>
	<LI>Next message: <A HREF="004060.html">[rabbitmq-discuss] twiddling with rabbitmq-http2 on windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4043">[ date ]</a>
              <a href="thread.html#4043">[ thread ]</a>
              <a href="subject.html#4043">[ subject ]</a>
              <a href="author.html#4043">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
