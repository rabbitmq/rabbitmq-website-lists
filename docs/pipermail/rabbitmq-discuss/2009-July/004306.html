<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Unique Messages in Queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Unique%20Messages%20in%20Queue&In-Reply-To=4e1b00700907311024q78f976e1h9c37810864ce9384%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004305.html">
   <LINK REL="Next"  HREF="004307.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Unique Messages in Queue</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Unique%20Messages%20in%20Queue&In-Reply-To=4e1b00700907311024q78f976e1h9c37810864ce9384%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Unique Messages in Queue">matthias at lshift.net
       </A><BR>
    <I>Fri Jul 31 19:08:03 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004305.html">[rabbitmq-discuss] Unique Messages in Queue
</A></li>
        <LI>Next message: <A HREF="004307.html">[rabbitmq-discuss] Unique Messages in Queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4306">[ date ]</a>
              <a href="thread.html#4306">[ thread ]</a>
              <a href="subject.html#4306">[ subject ]</a>
              <a href="author.html#4306">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Vidit,

Vidit Drolia wrote:
&gt;<i> The primary problem is that since the action being triggered by the
</I>&gt;<i> message is an email, I can't revert the action. So I am trying to
</I>&gt;<i> ensure that the application sending emails gets a message only once.
</I>&gt;<i> Is there another approach I can take to this problem?
</I>
If you replace &quot;process(msg)&quot; in my last email with &quot;send_email(msg)&quot;, 
you will see that what you are asking for is impossible. The best one 
can do (in any system, involving rabbit or not) is to make it *very 
unlikely* that an email is sent more than once. As long as we can agree 
on that, let's proceed ...

If your main concern is removing the duplicates the senders can produce, 
then I suggest inserting a filtering proxy, i.e. a process that consumes 
messages from one queue, de-dups them and publishes the non-dups to 
another exchange.

This process does need to keep some state, so, as you say, if it crashes 
and the state is lost then you may get some dups. The process is very 
simple though, so the likelihood of it crashing should be low. Given 
that we have established that there can be no 100% no-dup guarantee, is 
it really worth worrying about that? If the answer is yes, then 
persisting that state, or replicating it between several redundant nodes 
are possible options.


Regards,

Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004305.html">[rabbitmq-discuss] Unique Messages in Queue
</A></li>
	<LI>Next message: <A HREF="004307.html">[rabbitmq-discuss] Unique Messages in Queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4306">[ date ]</a>
              <a href="thread.html#4306">[ thread ]</a>
              <a href="subject.html#4306">[ subject ]</a>
              <a href="author.html#4306">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
