<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Synchronous Client Example?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20Synchronous%20Client%20Example%3F&In-Reply-To=269388e30907190654u1b2d78ebi913dc3fc9ee59c54%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004165.html">
   <LINK REL="Next"  HREF="004168.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Synchronous Client Example?</H1>
    <B>Lynton Grice</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20Synchronous%20Client%20Example%3F&In-Reply-To=269388e30907190654u1b2d78ebi913dc3fc9ee59c54%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] RabbitMQ Synchronous Client Example?">lynton.grice at logosworld.com
       </A><BR>
    <I>Sun Jul 19 15:27:22 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004165.html">[rabbitmq-discuss] RabbitMQ Synchronous Client Example?
</A></li>
        <LI>Next message: <A HREF="004168.html">[rabbitmq-discuss] RabbitMQ Synchronous Client Example?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4167">[ date ]</a>
              <a href="thread.html#4167">[ thread ]</a>
              <a href="subject.html#4167">[ subject ]</a>
              <a href="author.html#4167">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Ben,

Yup, I ran that earlier and it worked fine....thanks....

Can you explain to me how it would work if I had a PYTHON consumer (or
other) that would take the message off the queue....process it and send it
back? What do I send it back to?  I assume it would all be on
&quot;correlationid&quot;.....

I can see the TEST code below:

rpc_test(Connection) -&gt;
    Q = uuid(),
    Fun = fun(X) -&gt; X + 1 end,
    RPCHandler = fun(X) -&gt; term_to_binary(Fun(binary_to_term(X))) end,
    Server = amqp_rpc_server:start(Connection, Q, RPCHandler),
    Client = amqp_rpc_client:start(Connection, Q),
    Input = 1,
    Reply = amqp_rpc_client:call(Client, term_to_binary(Input)),
    Expected = Fun(Input),
    DecodedReply = binary_to_term(Reply),
    ?assertMatch(Expected, DecodedReply),
    amqp_rpc_client:stop(Client),
    amqp_rpc_server:stop(Server),
    ok.

So as I mentioned above I want to send the message to a Python consumer, let
it process the message and send the response back....

Any ideas? Or a rough sketch on how that would work?

Thanks for the help, I really appreciate it ;-)

Lynton



 
-----Original Message-----
From: Ben Hood [mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">0x6e6562 at gmail.com</A>] 
Sent: 19 July 2009 03:54 PM
To: Lynton Grice
Cc: rabbitmq
Subject: Re: [rabbitmq-discuss] RabbitMQ Synchronous Client Example?

Lynton,

On Sun, Jul 19, 2009 at 8:59 AM, Lynton
Grice&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lynton.grice at logosworld.com</A>&gt; wrote:

&gt;<i> Ideally I would want an AMQP client in Erlang code for the RPC
</I>pattern....I
&gt;<i> will check it out, thanks for the help ;-)
</I>
Not really sure if I understand you correctly but there is an RPC over
AMQP pattern in the Erlang client.

Check out the test case for it to see it's usage (the test is called
rpc_test/1 in the test_util module).

HTH,

Ben



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004165.html">[rabbitmq-discuss] RabbitMQ Synchronous Client Example?
</A></li>
	<LI>Next message: <A HREF="004168.html">[rabbitmq-discuss] RabbitMQ Synchronous Client Example?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4167">[ date ]</a>
              <a href="thread.html#4167">[ thread ]</a>
              <a href="subject.html#4167">[ subject ]</a>
              <a href="author.html#4167">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
