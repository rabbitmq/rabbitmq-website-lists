<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Using Subscriptions in different ways (was Re: Multiple consumers)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Using%20Subscriptions%20in%20different%20ways%20%28was%0A%20Re%3A%20Multiple%20consumers%29&In-Reply-To=496c8fcc0907280511w2d4dfe0g53845a85a0972c06%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004248.html">
   <LINK REL="Next"  HREF="004250.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Using Subscriptions in different ways (was Re: Multiple consumers)</H1>
    <B>Tony Garnock-Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Using%20Subscriptions%20in%20different%20ways%20%28was%0A%20Re%3A%20Multiple%20consumers%29&In-Reply-To=496c8fcc0907280511w2d4dfe0g53845a85a0972c06%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Using Subscriptions in different ways (was Re: Multiple consumers)">tonyg at lshift.net
       </A><BR>
    <I>Tue Jul 28 13:46:52 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004248.html">[rabbitmq-discuss] Using Subscriptions in different ways (was	Re: Multiple consumers)
</A></li>
        <LI>Next message: <A HREF="004250.html">[rabbitmq-discuss] Using Subscriptions in different ways (was Re: Multiple consumers)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4249">[ date ]</a>
              <a href="thread.html#4249">[ thread ]</a>
              <a href="subject.html#4249">[ subject ]</a>
              <a href="author.html#4249">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Adriana,

Adriana Rodean wrote:
&gt;<i> I subscribed like this but now i get the published message only when
</I>&gt;<i> both subscribers are online.
</I>&gt;<i> If subscribers are offline when message is published neither of them
</I>&gt;<i> gets the message.
</I>&gt;<i> What can i change so the subscribers get the message even if they are
</I>&gt;<i> offline when message is published?
</I>
I see.

For this, you *will* need to use named queues -- you will still need one 
queue per subscriber, but instead of making them autodelete, you'll make 
them durable.

So you'll, for each subscriber,

  - decide on a queue name unique to the subscriber

  - ExchangeDeclare your exchange, as you did in your original code

  - QueueDeclare the subscriber's own queue:
        channel.QueueDeclare(queueName, true);
    The &quot;true&quot; parameter makes it durable (i.e. survives broker
    restarts)

  - QueueBind, as you did in your original code

  - create a Subscription on the subscriber's queue, as you did in
    your original code

Ultimately, then, the only change from your original code is that each 
subscriber should be talking to the server about their own individual 
queues.

Regards,
   Tony



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004248.html">[rabbitmq-discuss] Using Subscriptions in different ways (was	Re: Multiple consumers)
</A></li>
	<LI>Next message: <A HREF="004250.html">[rabbitmq-discuss] Using Subscriptions in different ways (was Re: Multiple consumers)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4249">[ date ]</a>
              <a href="thread.html#4249">[ thread ]</a>
              <a href="subject.html#4249">[ subject ]</a>
              <a href="author.html#4249">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
