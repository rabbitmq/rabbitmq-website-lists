<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] fanout exchange that does not keep messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20fanout%20exchange%20that%20does%20not%20keep%20messages&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004212.html">
   <LINK REL="Next"  HREF="004177.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] fanout exchange that does not keep messages</H1>
    <B>Brian Whitman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20fanout%20exchange%20that%20does%20not%20keep%20messages&In-Reply-To="
       TITLE="[rabbitmq-discuss] fanout exchange that does not keep messages">brian at echonest.com
       </A><BR>
    <I>Mon Jul 20 16:47:34 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004212.html">[rabbitmq-discuss] rabbitmq-http2 with jquery
</A></li>
        <LI>Next message: <A HREF="004177.html">[rabbitmq-discuss] fanout exchange that does not keep messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4175">[ date ]</a>
              <a href="thread.html#4175">[ thread ]</a>
              <a href="subject.html#4175">[ subject ]</a>
              <a href="author.html#4175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, I am trying to implement this (python code):
<A HREF="http://notes.variogr.am/post/143623387/broadcasting-your-logs-with-rabbitmq-and-python">http://notes.variogr.am/post/143623387/broadcasting-your-logs-with-rabbitmq-and-python</A>

Which is a simple fanout exchange that any # of listeners can bind to with a
random queue name. My goal is to have the messages sent to the exchange but
not stick around in any way. If there are no queues bound to the exchange,
the messages should disappear. If there are listeners, the messages should
get sent out but not stay in the broker.

This is not what I'm seeing: running the broker for a few minutes with a few
listeners registered I have:

~/rabbitmq-server/scripts# ./rabbitmqctl list_queues name mode messages
messages_ready messages_unacknowledged durable
Listing queues ...
logger_d179b888-753c-11de-b258-0023dfde57d8 mixed 46847 46847 0 false
logger_a0856c74-753f-11de-b4dd-0022413719b3 mixed 17946 17946 0 false
logger_6c317904-7530-11de-996e-0023dfde57d8 mixed 79776 79776 0 false
logger mixed 301503 301503 0 false

Note that logger is the producer's &quot;writer&quot; queue. The logger_UUID() ones
are the consumers/listeners.

I am concerned about this because over the weekend the broker crashed
(not sure why yet, but I assume it had something to do with probably
~50m messages sitting in the exchange.) How
can I have messages be completely transient?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090720/f17cccbc/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090720/f17cccbc/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004212.html">[rabbitmq-discuss] rabbitmq-http2 with jquery
</A></li>
	<LI>Next message: <A HREF="004177.html">[rabbitmq-discuss] fanout exchange that does not keep messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4175">[ date ]</a>
              <a href="thread.html#4175">[ thread ]</a>
              <a href="subject.html#4175">[ subject ]</a>
              <a href="author.html#4175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
