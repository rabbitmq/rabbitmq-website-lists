<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Problems with the Java client and clustering
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Problems%20with%20the%20Java%20client%20and%20clustering&In-Reply-To=5b2d38840907281915q52d84521r83bd0f8386c5a80d%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004260.html">
   <LINK REL="Next"  HREF="004263.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Problems with the Java client and clustering</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Problems%20with%20the%20Java%20client%20and%20clustering&In-Reply-To=5b2d38840907281915q52d84521r83bd0f8386c5a80d%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Problems with the Java client and clustering">matthias at lshift.net
       </A><BR>
    <I>Thu Jul 30 03:16:19 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004260.html">[rabbitmq-discuss] Problems with the Java client and clustering
</A></li>
        <LI>Next message: <A HREF="004263.html">[rabbitmq-discuss] Deploying rabbit in same node with other apps?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4279">[ date ]</a>
              <a href="thread.html#4279">[ thread ]</a>
              <a href="subject.html#4279">[ subject ]</a>
              <a href="author.html#4279">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ray,

Ray Krueger wrote:
&gt;<i> The first thing I'm trying to deal with is trying to handle failure
</I>&gt;<i> gracefully. Currently I'm testing a pubsub model with a publisher
</I>&gt;<i> publishing to a topic exchange, and one consumer binding a
</I>&gt;<i> client-named queue to the exchange. The problem I keep seeing is that
</I>&gt;<i> after I stop_app and start_app on the primary node in the cluster, the
</I>&gt;<i> Consumer refuses to reconnect...
</I>&gt;<i> 
</I>&gt;<i> The Consumer works great until I bounce the primary &quot;rabbit&quot; node.
</I>&gt;<i> When I try to connect the Consumer after that I get this error.
</I>&gt;<i> {#method&lt;channel.close&gt;(reply-code=404,reply-text=NOT_FOUND - no queue
</I>&gt;<i> 'q1' in vhost '/',class-id=60,method-id=20),null,&quot;&quot;}
</I>&gt;<i> 
</I>&gt;<i> What am I doing wrong?
</I>
Looks like the queue 'q1' is no longer there. I can think of several 
reasons for that, but the most likely are that either you didn't declare 
the queue as durable (and it resided on the node you bounced and hence 
got lots in the restart), or it was declared as exclusive (and resided 
on a different node but got deleted due to the consumer disconnecting).

&gt;<i> Sorry for two questions in one email here, but am I correct in
</I>&gt;<i> assuming that I should pass an array of addresses to the
</I>&gt;<i> ConnectionFactory when using a cluster?
</I>
Yes, assuming you want the client to try them in turn until it finds one 
that it can connect to.

Regards,

Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004260.html">[rabbitmq-discuss] Problems with the Java client and clustering
</A></li>
	<LI>Next message: <A HREF="004263.html">[rabbitmq-discuss] Deploying rabbit in same node with other apps?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4279">[ date ]</a>
              <a href="thread.html#4279">[ thread ]</a>
              <a href="subject.html#4279">[ subject ]</a>
              <a href="author.html#4279">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
