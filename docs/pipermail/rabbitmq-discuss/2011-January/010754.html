<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitq cluster startup errors with managment	plugin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitq%20cluster%20startup%20errors%20with%20managment%0A%09plugin&In-Reply-To=%3C7d21f52c-c536-4b4e-926e-f07ce7a8f22b%40r16g2000prh.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010746.html">
   <LINK REL="Next"  HREF="010759.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitq cluster startup errors with managment	plugin</H1>
    <B>alain</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitq%20cluster%20startup%20errors%20with%20managment%0A%09plugin&In-Reply-To=%3C7d21f52c-c536-4b4e-926e-f07ce7a8f22b%40r16g2000prh.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] rabbitq cluster startup errors with managment	plugin">alain.dazzi at gmail.com
       </A><BR>
    <I>Tue Jan 18 22:25:44 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010746.html">[rabbitmq-discuss] php talking to ruby
</A></li>
        <LI>Next message: <A HREF="010759.html">[rabbitmq-discuss] rabbitq cluster startup errors with managment plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10754">[ date ]</a>
              <a href="thread.html#10754">[ thread ]</a>
              <a href="subject.html#10754">[ subject ]</a>
              <a href="author.html#10754">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I installed rabbimq server 2.2.0 and installed the management
plugin ...
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at dell</A>:plugins # ls -1 *ez
amqp_client-2.2.0.ez
mochiweb-2.2.0.ez
rabbitmq-management-2.2.0.ez
rabbitmq-management-agent-2.2.0.ez
rabbitmq-mochiweb-2.2.0.ez
webmachine-2.2.0.ez

If I start a single node with /etc/init.d/rabbitmq-server start
everthing works fine, the server comes up, I can
produce consume/data and the http management page works great.

However if I create a local cluster, say 3 nodes on the same machine,
and start the cluster with
rabbimq-mutl start_all 3, the nodes fail to start. If I remove the
management plugin, the 3 node cluster works fine.

here is the log ...

<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at dell</A>:plugins # rabbitmq-multi start_all 3
Starting all nodes...
Starting node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at dell...</A>
Activating RabbitMQ plugins ...
*WARNING* Undefined function fdsrv:bind_socket/2
*WARNING* Undefined function fdsrv:start/0
*WARNING* Undefined function fdsrv:stop/0
*WARNING* Undefined function webmachine_resource:start_link/2
6 plugins activated:
* amqp_client-2.2.0
* mochiweb-1.3
* rabbit_management-2.2.0
* rabbit_management_agent-2.2.0
* rabbit_mochiweb-2.2.0
* webmachine-1.7.0


+---+   +---+
|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   +---+   +-------+
</I>|<i>                   |
</I>|<i> RabbitMQ  +---+   |
</I>|<i>           |   |   |
</I>|<i>   v2.2.0  +---+   |
</I>|<i>                   |
</I>+-------------------+
AMQP 0-9-1 / 0-9 / 0-8
Copyright (C) 2007-2010 LShift Ltd., Cohesive Financial Technologies
LLC., and Rabbit Technologies Ltd.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at dell</A>
app descriptor : /usr/lib/rabbitmq/lib/rabbitmq_server-2.2.0/sbin/../
ebin/rabbit.app
home dir       : /var/lib/rabbitmq
cookie hash    : 9zVr5H5XduihPv89Kzk9oA==
log            : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at dell.log</A>
sasl log       : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at dell-sasl.log</A>
database dir   : /var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at dell</A>
erlang version : 5.7.4

starting file handle cache
server                                     ...done
starting worker
pool                                                  ...done
starting
database                                                     ...done
starting codec correctness
check                                      ...done
-- external infrastructure ready
starting statistics event
manager                                     ...done
starting logging
server                                               ...done
starting exchange type
registry                                       ...done
starting exchange type
direct                                         ...done
starting exchange type
fanout                                         ...done
starting exchange type
headers                                        ...done
starting exchange type
topic                                          ...done
-- kernel ready
starting alarm
handler                                                ...done
starting node
monitor                                                 ...done
starting cluster
delegate                                             ...done
starting guid
generator                                               ...done
starting memory
monitor                                               ...done
-- core initialized
starting empty DB
check                                               ...done
starting exchange
recovery                                            ...done
starting management
agent                                             ...done
starting management statistics
database                               ...done
starting queue supervisor and queue
recovery                          ...done
-- message delivery logic ready
starting error log
relay                                              ...done
starting
networking                                                   ...done
-- network listeners available

broker running
** Found 0 name clashes in code paths
OK
Starting node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit_1 at dell...</A>
Activating RabbitMQ plugins ...
*WARNING* Undefined function fdsrv:bind_socket/2
*WARNING* Undefined function fdsrv:start/0
*WARNING* Undefined function fdsrv:stop/0
*WARNING* Undefined function webmachine_resource:start_link/2
6 plugins activated:
* amqp_client-2.2.0
* mochiweb-1.3
* rabbit_management-2.2.0
* rabbit_management_agent-2.2.0
* rabbit_mochiweb-2.2.0
* webmachine-1.7.0

{&quot;Kernel pid
terminated&quot;,application_controller,&quot;{application_start_failure,rabbit_mochiweb,
{shutdown,{rabbit_mochiweb_app,start,[normal,[]]}}}&quot;}
Error: {node_start_failed,normal}
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at dell</A>:plugins #
Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller)
({application_start_failure,rabbit_mochiweb,{shutdown,
{rabbit_mochiweb_app,start,[normal,[]]}}})

Help!
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010746.html">[rabbitmq-discuss] php talking to ruby
</A></li>
	<LI>Next message: <A HREF="010759.html">[rabbitmq-discuss] rabbitq cluster startup errors with managment plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10754">[ date ]</a>
              <a href="thread.html#10754">[ thread ]</a>
              <a href="subject.html#10754">[ subject ]</a>
              <a href="author.html#10754">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
