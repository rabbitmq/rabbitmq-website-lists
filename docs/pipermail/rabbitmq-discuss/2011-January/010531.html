<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] how to send a message including a array via	.net client?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20how%20to%20send%20a%20message%20including%20a%20array%20via%0A%09.net%20client%3F&In-Reply-To=%3Cf8dff6ee-3d86-40f1-8429-c2ad8b44bf43%40t35g2000yqj.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010546.html">
   <LINK REL="Next"  HREF="010532.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] how to send a message including a array via	.net client?</H1>
    <B>Chen Houwu</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20how%20to%20send%20a%20message%20including%20a%20array%20via%0A%09.net%20client%3F&In-Reply-To=%3Cf8dff6ee-3d86-40f1-8429-c2ad8b44bf43%40t35g2000yqj.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] how to send a message including a array via	.net client?">chenhouwu at gmail.com
       </A><BR>
    <I>Tue Jan  4 08:27:42 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010546.html">[rabbitmq-discuss] Web use scenarios
</A></li>
        <LI>Next message: <A HREF="010532.html">[rabbitmq-discuss] how to send a message including a array via .net client?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10531">[ date ]</a>
              <a href="thread.html#10531">[ thread ]</a>
              <a href="subject.html#10531">[ subject ]</a>
              <a href="author.html#10531">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Do you mean that .net client has no build-in support for simple data
structure?
But I have found it should support according to the AMQP 1.0
specification.
AMQP is a binary protocol, but json is text.
Though I can send binary content after encoding it to BASE64, it is
too inefficient.

It seams as if the python client support array and dictionary
object.....

On 2010&#24180;12&#26376;29&#26085;, &#19979;&#21320;6&#26102;47&#20998;, Marek Majkowski &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">maje... at gmail.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I think you should be using some standardized encoding,
</I>&gt;<i> like for example json.
</I>&gt;<i>
</I>&gt;<i> Take a look at this library:<A HREF="http://james.newtonking.com/pages/json-net.aspxhttp://stackoverflow.com/questions/571168/what-json-library-works-wel...">http://james.newtonking.com/pages/json-net.aspxhttp://stackoverflow.com/questions/571168/what-json-library-works-wel...</A>
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> &#160; Marek
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, Dec 27, 2010 at 11:22, Chen Houwu &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">chenho... at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &#160; I am a newbie to rabbitmq, I want to send a message object as
</I>&gt;<i> &gt; following via .net client:
</I>&gt;<i>
</I>&gt;<i> &gt; &#160; public class Message
</I>&gt;<i> &gt; &#160; &#160;{
</I>&gt;<i> &gt; &#160; &#160; &#160; &#160;public int ID { get; set; }
</I>&gt;<i> &gt; &#160; &#160; &#160; &#160;public string Name { get; set; }
</I>&gt;<i> &gt; &#160; &#160; &#160; &#160;public byte[] Binary { get; set; }
</I>&gt;<i> &gt; &#160; &#160; &#160; &#160;public string[] Infos{get;set;}
</I>&gt;<i> &gt; &#160; &#160; &#160; &#160;public Dictionary&lt;string,int&gt; CountMap { get; set; }
</I>&gt;<i> &gt; &#160; &#160;}
</I>&gt;<i>
</I>&gt;<i> &gt; Here is my code:
</I>&gt;<i> &gt; -------------------------------------------
</I>&gt;<i> &gt; var builder = new
</I>&gt;<i> &gt; RabbitMQ.Client.Content.StreamMessageBuilder(_channel);
</I>&gt;<i> &gt; builder.writeObject(msg.ID);
</I>&gt;<i> &gt; builder.writeObject(msg.Name);
</I>&gt;<i> &gt; /*----------How to deal with msg.Infos and CountMap here?------------/
</I>&gt;<i>
</I>&gt;<i> &gt; /*shoud it be written by myself such as: */
</I>&gt;<i> &gt; builder.writeObject(infos.count)
</I>&gt;<i> &gt; foreach(var info in infos)
</I>&gt;<i> &gt; {
</I>&gt;<i> &gt; &#160; builder.writerObject(info)
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt; /* or the suporting to array and dictionary already exists?*/
</I>&gt;<i>
</I>&gt;<i> &gt; /* I have found in&quot;src/client/impl/WireFormatting.cs&quot;&#65292; there are
</I>&gt;<i> &gt; methods like &quot;WriteArray&quot;, and &quot;WriteTable&quot;*/
</I>&gt;<i>
</I>&gt;<i> &gt; &#160;IBasicProperties props = _channel.CreateBasicProperties();
</I>&gt;<i> &gt; props.DeliveryMode = 2;
</I>&gt;<i> &gt; &#160;_channel.BasicPublish(_exchangeName, &quot;some key&quot;, props,
</I>&gt;<i> &gt; builder.GetContentBody());
</I>&gt;<i> &gt; -----------------
</I>&gt;<i>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.com</A>
</I>&gt;<i> &gt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010546.html">[rabbitmq-discuss] Web use scenarios
</A></li>
	<LI>Next message: <A HREF="010532.html">[rabbitmq-discuss] how to send a message including a array via .net client?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10531">[ date ]</a>
              <a href="thread.html#10531">[ thread ]</a>
              <a href="subject.html#10531">[ subject ]</a>
              <a href="author.html#10531">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
