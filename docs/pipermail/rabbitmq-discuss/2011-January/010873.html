<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Making sure a message gets to every consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Making%20sure%20a%20message%20gets%20to%20every%20consumer&In-Reply-To=%3C4D3E05F8.10509%40wetafx.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010872.html">
   <LINK REL="Next"  HREF="010874.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Making sure a message gets to every consumer</H1>
    <B>Sam Duncan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Making%20sure%20a%20message%20gets%20to%20every%20consumer&In-Reply-To=%3C4D3E05F8.10509%40wetafx.co.nz%3E"
       TITLE="[rabbitmq-discuss] Making sure a message gets to every consumer">sduncan at wetafx.co.nz
       </A><BR>
    <I>Mon Jan 24 23:06:32 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010872.html">[rabbitmq-discuss] Making sure a message gets to every consumer
</A></li>
        <LI>Next message: <A HREF="010874.html">[rabbitmq-discuss] Making sure a message gets to every consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10873">[ date ]</a>
              <a href="thread.html#10873">[ thread ]</a>
              <a href="subject.html#10873">[ subject ]</a>
              <a href="author.html#10873">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Does it need to be one queue? If you use a topic exchange and create a 
queue for each consumer, you get a copy of each message in each queue 
filtered by your queue bindings. You could even have a shared queue for 
each consumer type so the messages are not duplicated in context.

Sam


On 25/01/11 12:00, Dan Tenenbaum wrote:
&gt;<i> Hi,
</I>&gt;<i> Still trying to migrate my head over from JMS concepts to RabbitMQ.
</I>&gt;<i>
</I>&gt;<i> I have a situation that I want to be like this:
</I>&gt;<i>
</I>&gt;<i> App1 sends a message to anyone who is listening to a certain queue.
</I>&gt;<i> I want ALL consumers of that queue to get every message sent by App1, 
</I>&gt;<i> I don't want it dispatched in a round-robin fashion. At the same time, 
</I>&gt;<i> I don't think I want to use a fanout exchange because I don't want all 
</I>&gt;<i> consumers in the vhost to get the message, just the ones that are 
</I>&gt;<i> subscribed to by instances of:
</I>&gt;<i>
</I>&gt;<i> App2
</I>&gt;<i> There are several instances of App2.
</I>&gt;<i> When App2 gets a message, it does some work and sends progress 
</I>&gt;<i> messages back to App1. There is presently only one instance of App1 
</I>&gt;<i> but I might like to have other consumers in future for the messages 
</I>&gt;<i> that App1 receives.
</I>&gt;<i>
</I>&gt;<i> The problem:
</I>&gt;<i> I can't figure out the right combination of exchange types, queues, 
</I>&gt;<i> and routing keys to get this to work.
</I>&gt;<i>
</I>&gt;<i> It seems that if I use either 'direct' or 'topic' as my exchange type, 
</I>&gt;<i> the messages that app1 sends are dispatched in a round-robin fashion 
</I>&gt;<i> (that is, not all listeners get every message).
</I>&gt;<i>
</I>&gt;<i> If I set the exchange type to fanout, then app2 keeps sending the same 
</I>&gt;<i> message back to app1 over and over. It could be that I have created an 
</I>&gt;<i> infinite loop of messages back and forth.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Anyway....in JMS headspace I would simply have 2 topics, call them 
</I>&gt;<i> &quot;fromapp1&quot; and &quot;fromapp2&quot; and subscribe each app to the appropriate 
</I>&gt;<i> topic, and it would Just Work....maybe I was doing something wrong 
</I>&gt;<i> back then? Certainly I'm doing something wrong now.
</I>&gt;<i>
</I>&gt;<i> If someone can suggest the pattern I might want to use, that would be 
</I>&gt;<i> great.
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i> Dan
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>    
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110125/882a7b9c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110125/882a7b9c/attachment.htm</A>&gt;
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010872.html">[rabbitmq-discuss] Making sure a message gets to every consumer
</A></li>
	<LI>Next message: <A HREF="010874.html">[rabbitmq-discuss] Making sure a message gets to every consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10873">[ date ]</a>
              <a href="thread.html#10873">[ thread ]</a>
              <a href="subject.html#10873">[ subject ]</a>
              <a href="author.html#10873">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
