<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Low message publish throughput
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Low%20message%20publish%20throughput&In-Reply-To=%3C4D4018B6.7090403%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010906.html">
   <LINK REL="Next"  HREF="010896.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Low message publish throughput</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Low%20message%20publish%20throughput&In-Reply-To=%3C4D4018B6.7090403%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Low message publish throughput">emile at rabbitmq.com
       </A><BR>
    <I>Wed Jan 26 12:51:02 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010906.html">[rabbitmq-discuss] Low message publish throughput
</A></li>
        <LI>Next message: <A HREF="010896.html">[rabbitmq-discuss] Making sure a message gets to every consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10907">[ date ]</a>
              <a href="thread.html#10907">[ thread ]</a>
              <a href="subject.html#10907">[ subject ]</a>
              <a href="author.html#10907">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Cameron,

On 26/01/11 12:27, Cameron Harris wrote:

&gt;<i> I just commented out the line where it sets socket nodelay, and it
</I>&gt;<i> increased publish to about 9-10k messages per second on the Win7 system,
</I>&gt;<i> which is a nice improvement. Is there anywhere I can configure this with
</I>&gt;<i> the standard client library, rather than building my own with it hacked
</I>&gt;<i> out? The Java client had a way of overriding the socket factory function.
</I>
Not at present. We plan to improve the library so that setting socket 
options becomes easy, but until then you will need to modify the sources.

&gt;<i> I think the throughput is still being held back significantly by the
</I>&gt;<i> explicit flushing. It'd still be nice if we could not flush after every
</I>&gt;<i> publish or manually take control over when publish flushes occur while
</I>&gt;<i> still maintaining stability of the library/connection. Are there any
</I>&gt;<i> plans regarding the flushing behavior, or is Rabbit's primary focus
</I>&gt;<i> going to be strictly low latency over high throughput?
</I>
Your use-case will probably benefit if flushes only occurred for 
synchronous AMQP methods. The current behaviour was motivated more by 
reliability than latency. It should be possible to maintain that 
reliability by restricting flushing to synchronous methods though. I 
will file a bug for this.


Regards

Emile
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010906.html">[rabbitmq-discuss] Low message publish throughput
</A></li>
	<LI>Next message: <A HREF="010896.html">[rabbitmq-discuss] Making sure a message gets to every consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10907">[ date ]</a>
              <a href="thread.html#10907">[ thread ]</a>
              <a href="subject.html#10907">[ subject ]</a>
              <a href="author.html#10907">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
