<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Question on internal guid or hashing msg content
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Question%20on%20internal%20guid%20or%20hashing%20msg%0A%20content&In-Reply-To=%3C20110122225232.GA5962%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010844.html">
   <LINK REL="Next"  HREF="010849.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Question on internal guid or hashing msg content</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Question%20on%20internal%20guid%20or%20hashing%20msg%0A%20content&In-Reply-To=%3C20110122225232.GA5962%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] Question on internal guid or hashing msg content">matthew at rabbitmq.com
       </A><BR>
    <I>Sat Jan 22 22:52:33 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010844.html">[rabbitmq-discuss] Question on internal guid or hashing msg content
</A></li>
        <LI>Next message: <A HREF="010849.html">[rabbitmq-discuss] Question on internal guid or hashing msg	content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10845">[ date ]</a>
              <a href="thread.html#10845">[ thread ]</a>
              <a href="subject.html#10845">[ subject ]</a>
              <a href="author.html#10845">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jon,

On Sat, Jan 22, 2011 at 04:45:28PM -0600, Jon Brisbin wrote:
&gt;<i> Can I use the guid property of #basic_message{} for this
</I>
Yes, that's what we do. Check the type sigs of msg_store - the key there
is always the guid.

&gt;<i> or would I still get unnecessary duplication (I guess I'm wondering if the same message content can have different guids for sending to multiple queues)?
</I>
The guid is created and applied in the channel on basic.publish. Then it
is routed to various queues. Thus every queue receiving said msg sees it
in the same #basic_message record with the same guid.

&gt;<i> Or should I hash the message content and use that as the key?
</I>
Agh! don't do that - for one thing it'll be slow. But much worse than
that is that many many messages will have the same content but will not
be from the same basic.publish. So hashing them to the same thing is a
very bad idea.

Matthew
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010844.html">[rabbitmq-discuss] Question on internal guid or hashing msg content
</A></li>
	<LI>Next message: <A HREF="010849.html">[rabbitmq-discuss] Question on internal guid or hashing msg	content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10845">[ date ]</a>
              <a href="thread.html#10845">[ thread ]</a>
              <a href="subject.html#10845">[ subject ]</a>
              <a href="author.html#10845">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
