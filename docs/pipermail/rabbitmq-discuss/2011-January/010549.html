<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Security/resource limit questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Security/resource%20limit%20questions&In-Reply-To=%3C4D247CDE.4070902%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010537.html">
   <LINK REL="Next"  HREF="010551.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Security/resource limit questions</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Security/resource%20limit%20questions&In-Reply-To=%3C4D247CDE.4070902%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Security/resource limit questions">emile at rabbitmq.com
       </A><BR>
    <I>Wed Jan  5 14:14:54 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010537.html">[rabbitmq-discuss] Security/resource limit questions
</A></li>
        <LI>Next message: <A HREF="010551.html">[rabbitmq-discuss] Security/resource limit questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10549">[ date ]</a>
              <a href="thread.html#10549">[ thread ]</a>
              <a href="subject.html#10549">[ subject ]</a>
              <a href="author.html#10549">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Christian

On 04/01/11 21:21, Christian Legnitto wrote:

&gt;<i> * What characters are allowed / expected in the routing key, binding
</I>&gt;<i> topic, queue name, user name, and password? Is it just ASCII?
</I>
The AMQP 0.9.1 specification offers this:

&quot;&quot;&quot;
Short strings, used to hold short text properties. Short strings are 
limited to 255 octets and can be parsed with no risk of buffer overflows.

Short strings can carry up to 255 octets of UTF-8 data, but may not 
contain binary zero octets.

The routing key used for a topic exchange MUST consist of zero or more 
words delimited by dots. Each word may contain the letters A-Z and a-z 
and digits 0-9.

Standard message queues are prefixed by &quot;amq.&quot;
&quot;&quot;&quot;

The routing key and queue name are short strings. I don't see any 
limitations on usernames and passwords, but SASL will complain if they 
contain null bytes.

RabbitMQ represents short strings as Erlang binaries internally without 
enforcing the alphabet from the specification.

&gt;<i> * What is the maximum length of the routing key, binding topic, queue
</I>&gt;<i> name, user name, or password a client can specify?
</I>
Length of username and password appear unlimited. The rest are 255 bytes.

&gt;<i> * If a message is rejected due to hitting max length or an invalid
</I>&gt;<i> character, what happens? How are the limits enforced? Rejection?
</I>&gt;<i> Truncation? Conversion?
</I>
Clients should prevent this problem, e.g. 
com.rabbitmq.client.impl.ValueWriter in the Java client contains this:
&quot;Short string too long [...] max = 255.&quot;

If a long shortstr reaches the broker it will produce a 
&quot;method_field_shortstr_overflow&quot; exception in the framing layer.

&gt;<i> * How many bindings are supported per queue? Is it possible to starve
</I>&gt;<i> the broker of resources be specifying 100000s of bindings?
</I>
The number of bindings is limited by the amount of RAM you have. The 
broker has much more work to do in that case, so you can expect slower 
operation, depending on the exchange type.

&gt;<i> * Is it possible for malicious consumers to DOS the server by
</I>&gt;<i> specifying 100000s of queues with 100000s of bindings listening to
</I>&gt;<i> '#' on all exchanges?
</I>
Yes. Perhaps there should be some configurable limits...

&gt;<i> * Is it possible for a malicious producer to be able to affect the
</I>&gt;<i> AMQP message / behavior by including control characters / AMQP escape
</I>&gt;<i> sequences in the message payload?
</I>
No, as long as the framing is correct the broker does not care about the 
content.

&gt;<i> * Is it possible for malicious consumers to starve the broker of
</I>&gt;<i> connections during protocol negotiation or consuming? What are the
</I>&gt;<i> timeouts in place to prevent such an attack? Are they configurable?
</I>
The protocol negotiation phase has a 3 sec timeout to prevent that. The 
timeout is not configurable - you will need to modify the definitions in 
rabbit_reader.erl and recompile if you want a different value.



Regards

Emile
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010537.html">[rabbitmq-discuss] Security/resource limit questions
</A></li>
	<LI>Next message: <A HREF="010551.html">[rabbitmq-discuss] Security/resource limit questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10549">[ date ]</a>
              <a href="thread.html#10549">[ thread ]</a>
              <a href="subject.html#10549">[ subject ]</a>
              <a href="author.html#10549">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
