<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Persister logs never getting rolled/cleaned up?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Persister%20logs%20never%20getting%20rolled/cleaned%20up%3F&In-Reply-To=%3C5c18a357-5043-4506-9ae2-d14c67047abd%40y19g2000prb.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010554.html">
   <LINK REL="Next"  HREF="010573.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Persister logs never getting rolled/cleaned up?</H1>
    <B>Steve Garrity</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Persister%20logs%20never%20getting%20rolled/cleaned%20up%3F&In-Reply-To=%3C5c18a357-5043-4506-9ae2-d14c67047abd%40y19g2000prb.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Persister logs never getting rolled/cleaned up?">sgarrity at gmail.com
       </A><BR>
    <I>Thu Jan  6 03:43:48 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010554.html">[rabbitmq-discuss] |Spam| Memory usage about java client?
</A></li>
        <LI>Next message: <A HREF="010573.html">[rabbitmq-discuss] Persister logs never getting rolled/cleaned	up?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10555">[ date ]</a>
              <a href="thread.html#10555">[ thread ]</a>
              <a href="subject.html#10555">[ subject ]</a>
              <a href="author.html#10555">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Apologies if this is a n00b question, which I think it is, but we're
running a plain vanilla install of rabbitmq 2.1.1 on erlang r14B with
celeryd 2.1.4 and we're continually running into persister log issues
and Google has thus far not turned up results.

Every few weeks rabbit just stops accepting new connections...stopping
and starting rabbit takes on the order of 15 minutes and it just
continues to choke once it gets started again. Looking at /var/lib/
rabbitmq/mnesia/rabbit shows ~170MB of persister logs (this is running
on a 1GB RAM machine, so the vm memory alarm is set at ~400MB (which
we routinely bounce off of trying to reload these logs). By deleting
(or renaming) this directory, recreating users/vhosts, and restarting
rabbit, everything works great again (for a few weeks).

This led us to believe we were using celery incorrectly and
accidentally persisting results for all time, but we've tried with
ignore_result=True, delivery_mode=transient, durable=False, and
result_persistent=False and nothing seems to fix it.

These don't seem like logs that we should have to rotate
manually...can someone point us in the right direction?

Thanks! /s
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010554.html">[rabbitmq-discuss] |Spam| Memory usage about java client?
</A></li>
	<LI>Next message: <A HREF="010573.html">[rabbitmq-discuss] Persister logs never getting rolled/cleaned	up?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10555">[ date ]</a>
              <a href="thread.html#10555">[ thread ]</a>
              <a href="subject.html#10555">[ subject ]</a>
              <a href="author.html#10555">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
