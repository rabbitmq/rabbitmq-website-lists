<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] publish to empty exchange works, while publish to correct exchange doesn't
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20publish%20to%20empty%20exchange%20works%2C%0A%20while%20publish%20to%20correct%20exchange%20doesn%27t&In-Reply-To=%3C4D3F3639.1090301%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010905.html">
   <LINK REL="Next"  HREF="010913.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] publish to empty exchange works, while publish to correct exchange doesn't</H1>
    <B>Marcin Krol</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20publish%20to%20empty%20exchange%20works%2C%0A%20while%20publish%20to%20correct%20exchange%20doesn%27t&In-Reply-To=%3C4D3F3639.1090301%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] publish to empty exchange works, while publish to correct exchange doesn't">mrkafk at gmail.com
       </A><BR>
    <I>Tue Jan 25 20:44:41 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010905.html">[rabbitmq-discuss] (pika) slow asyncore loop?
</A></li>
        <LI>Next message: <A HREF="010913.html">[rabbitmq-discuss] publish to empty exchange works, while publish to correct exchange doesn't
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10902">[ date ]</a>
              <a href="thread.html#10902">[ thread ]</a>
              <a href="subject.html#10902">[ subject ]</a>
              <a href="author.html#10902">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello everyone,

Yes, it's RPC time again. ;-)

In client:

chan.exchange_declare(exchange = rpc_res_exch,type='direct')
chan.queue_declare(queue = myqueue)
chan.queue_bind(exchange = rpc_res_exch, queue = myqueue)


Now, when I do in server:

ch.basic_publish(
    exchange = '',
    properties = pika.BasicProperties(correlation_id =
props.correlation_id + '_' + mynode),
    routing_key = props.reply_to,
    body = str(response))

... messages get delivered to 'myqueue'.

But when I do:

ch.basic_publish(
    exchange = rpc_res_exch,
    properties = pika.BasicProperties(correlation_id =
props.correlation_id + '_' + mynode),
    routing_key = props.reply_to,
    body = str(response))

... messages do NOT get delivered to the queue.

I checked with rabbitmqctl list_queues (it should show number of
messages in queue next to queue name, right?)


Can anyone please explain this mystery to me?




Server code:

<A HREF="http://pastie.org/pastes/1497146/text">http://pastie.org/pastes/1497146/text</A>

Client code:

<A HREF="http://pastie.org/pastes/1497144/text">http://pastie.org/pastes/1497144/text</A>





- --

Regards,
mk

- --
Premature optimization is the root of all fun.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (MingW32)
Comment: Using GnuPG with Mozilla - <A HREF="http://enigmail.mozdev.org/">http://enigmail.mozdev.org/</A>

iQEcBAEBAgAGBQJNPzY5AAoJEFMgHzhQQ7hOPukH/1b/vgYnUh0raxBZI7iBSJVe
dJqGQIU2thBGKoklNVvVqGU8CBs706q3mgf53Fpxx8QMBUle9TyeJ3jdVuPKRnP7
Nvy+XL6Jqtg9FbWXThim/pgLcvBs1FgVxwlPs/kRnK6B/b0IyyUzrqDUoWBxzKBN
Epenj62QCyOPwOvGeCcAlbwba2O0ds7IuOinj7nFkbFu+PojP1DPvj5eQ4UUoI/h
GXqlbJbxi3+Rt3b4pR7hx/Jf3/Ya4TYIM4sxGikMpl6nNHV8y7cqQyikZ1iBoeJU
+0+BXFj/DEEcjnMTi8aty+/tY4xB7G/osYsBURfWprHg9OE8EoNYpor3/M7JdKU=
=y55B
-----END PGP SIGNATURE-----
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010905.html">[rabbitmq-discuss] (pika) slow asyncore loop?
</A></li>
	<LI>Next message: <A HREF="010913.html">[rabbitmq-discuss] publish to empty exchange works, while publish to correct exchange doesn't
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10902">[ date ]</a>
              <a href="thread.html#10902">[ thread ]</a>
              <a href="subject.html#10902">[ subject ]</a>
              <a href="author.html#10902">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
