<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Web use scenarios
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Web%20use%20scenarios&In-Reply-To=%3CAANLkTikNM49e6J90OZaidDPEFXN7g9t%3DOkNwunV8mczO%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010539.html">
   <LINK REL="Next"  HREF="010546.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Web use scenarios</H1>
    <B>Bill Moseley</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Web%20use%20scenarios&In-Reply-To=%3CAANLkTikNM49e6J90OZaidDPEFXN7g9t%3DOkNwunV8mczO%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Web use scenarios">moseley at hank.org
       </A><BR>
    <I>Wed Jan  5 07:15:34 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010539.html">[rabbitmq-discuss] Web use scenarios
</A></li>
        <LI>Next message: <A HREF="010546.html">[rabbitmq-discuss] Web use scenarios
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10540">[ date ]</a>
              <a href="thread.html#10540">[ thread ]</a>
              <a href="subject.html#10540">[ subject ]</a>
              <a href="author.html#10540">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Jan 4, 2011 at 2:12 PM, andrew chase &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">andrew at glyde.com</A>&gt; wrote:

&gt;<i> Most of your bullet points are outside the realm (IMO) of what a
</I>&gt;<i> message system should be concerned with. In particular, it looks like
</I>&gt;<i> most of the features you're after are more in line with what a
</I>&gt;<i> background job processing system would handle. Those types of systems
</I>&gt;<i> often use messaging under the covers but often also use some type of
</I>&gt;<i> persistent data store in addition (or instead of) a messaging system.
</I>&gt;<i> I'd suggest taking a look at a couple of these systems to see if they
</I>&gt;<i> may be more what you're after (I know a couple ruby-based ones of the
</I>&gt;<i> top of my head like Resque, DelayedJob, etc
</I>&gt;<i> <A HREF="https://github.com/defunkt/resque">https://github.com/defunkt/resque</A>).
</I>&gt;<i>
</I>
Thanks Andrew,

I spent some time looking at those tonight and came full circle.  Found a
post where Resque was used as a replacement for DJ and then in the post's
comments people suggesting RabbitMQ... ;)  I'll keep reading, though.  I
have plenty to learn.

I think our organization has been in the habit of building somewhat
monolithic code and are looking for a solution that does everything as we do
it now.  I'm concerned we will attempt to build our own if we can't find a
perfect fit, which I suspect is a much harder task to get right than we
think.  As for scheduling, we already have a database table with the
scheduled items, so maybe we only need a few producers that run from cron.


I had two slightly more RabbitMQ-specific questions that are hopefully more
straight forward to answer.

When a job is re-queued due to failure to ACK is there anything that
indicates to the next consumer that the message has already been delivered
to a failed consumer? I need a way to recognize that a message is causing
consumers to die and stop the job.

And is it a common pattern for consumers to use RabbitMQ to message back
that their work is done?  I was wondering if that's a good use for x-expires
and/or x-message-ttl.

Thanks again,


On Tue, Jan 4, 2011 at 1:39 PM, Bill Moseley &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">moseley at hank.org</A>&gt; wrote:
&gt;<i> &gt; Anyone have time to take a few of these on?
</I>&gt;<i> &gt; I know they are not specifically on-topic (and a bit open-ended) but we
</I>&gt;<i> are
</I>&gt;<i> &gt; evaluating messaging solutions (and even discussing writing our own) so
</I>&gt;<i> it
</I>&gt;<i> &gt; would be a huge help to get some feedback.  I'd be happy to provide more
</I>&gt;<i> &gt; specifics if needed.
</I>&gt;<i> &gt; Thanks,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Mon, Jan 3, 2011 at 3:13 PM, Bill Moseley &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">moseley at hank.org</A>&gt; wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Hi,
</I>&gt;<i> &gt;&gt; I'm just starting out with RabbitMQ and trying to wrap my head around a
</I>&gt;<i> &gt;&gt; few concepts.  I apologize if I ask something that should be obvious or
</I>&gt;<i> I
</I>&gt;<i> &gt;&gt; missed in the docs and faq.  I'm hoping someone can help with a few
</I>&gt;<i> &gt;&gt; scenarios, and please point me to further reading as needed.
</I>&gt;<i> &gt;&gt; I'm curious about use-cases that are not directly related to RabbitMQ,
</I>&gt;<i> but
</I>&gt;<i> &gt;&gt; how to best use RabbitMQ in an web application's architecture.  Thes are
</I>&gt;<i> &gt;&gt; probably very common situations.
</I>&gt;<i> &gt;&gt; 1) Notification of job status and completion:  If the web app produces a
</I>&gt;<i> &gt;&gt; request to generate an expensive PDF is there a common approach to
</I>&gt;<i> detecting
</I>&gt;<i> &gt;&gt; when the consumer is completed and the pdf is ready for downloading?
</I>&gt;<i>  Should
</I>&gt;<i> &gt;&gt; I create a single-use return queue with x-expires and/or x-message-ttl
</I>&gt;<i> on
</I>&gt;<i> &gt;&gt; the queue?   In a web app the web user may never come back to pick up
</I>&gt;<i> the
</I>&gt;<i> &gt;&gt; PDF.
</I>&gt;<i> &gt;&gt; 2) Job sequencing:  What's a common approach to multiple step processing
</I>&gt;<i> &gt;&gt; that must be done serially?  I.e. queue job &quot;A&quot; and when it's complete
</I>&gt;<i> queue
</I>&gt;<i> &gt;&gt; job &quot;B&quot;.  Doesn't really seem like consumer &quot;A&quot; should be responsible
</I>&gt;<i> for
</I>&gt;<i> &gt;&gt; submitting job &quot;B&quot;.  Is it better to create a consumer &quot;AB&quot; that submits
</I>&gt;<i> &quot;A&quot;
</I>&gt;<i> &gt;&gt; and waits for a message that &quot;A&quot; is complete and then submits job &quot;B&quot;?
</I>&gt;<i> &gt;&gt; 3) Scheduling: I assume there's no facility for scheduling jobs to be
</I>&gt;<i> &gt;&gt; delivered to consumers at some future time.  Is there a better approach
</I>&gt;<i> than
</I>&gt;<i> &gt;&gt; using cron to check the database for jobs that should be queued based on
</I>&gt;<i> &gt;&gt; time?
</I>&gt;<i> &gt;&gt; 4) Cancel a request:  We have some situations when a subsequent request
</I>&gt;<i> &gt;&gt; should cancel processing of an earlier request.  (Frankly, I think this
</I>&gt;<i> is a
</I>&gt;<i> &gt;&gt; design problem on our end.)
</I>&gt;<i> &gt;&gt; 5) Prevent duplicate job requests: In a web environment when things
</I>&gt;<i> break
</I>&gt;<i> &gt;&gt; problems often compound by users reloading requests that caused the
</I>&gt;<i> problem
</I>&gt;<i> &gt;&gt; in the first place.  I'm not sure RabbitMQ would be involved at all in
</I>&gt;<i> this
</I>&gt;<i> &gt;&gt; scenario, but I'm asking just in case. ;)
</I>&gt;<i> &gt;&gt; Finally, it's great that RabbitMQ will send a message again if is is not
</I>&gt;<i> &gt;&gt; ACK'd and a consumer closes its connection.  But, is there any kind of
</I>&gt;<i> max
</I>&gt;<i> &gt;&gt; retry count available?  That is, what's a good approach to prevent an
</I>&gt;<i> errant
</I>&gt;<i> &gt;&gt; job from killing all consumers one-by-one?
</I>&gt;<i> &gt;&gt; Thanks,
</I>&gt;<i> &gt;&gt; --
</I>&gt;<i> &gt;&gt; Bill Moseley
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">moseley at hank.org</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Bill Moseley
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">moseley at hank.org</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>


-- 
Bill Moseley
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">moseley at hank.org</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110104/10cc6a80/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110104/10cc6a80/attachment-0001.htm</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010539.html">[rabbitmq-discuss] Web use scenarios
</A></li>
	<LI>Next message: <A HREF="010546.html">[rabbitmq-discuss] Web use scenarios
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10540">[ date ]</a>
              <a href="thread.html#10540">[ thread ]</a>
              <a href="subject.html#10540">[ subject ]</a>
              <a href="author.html#10540">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
