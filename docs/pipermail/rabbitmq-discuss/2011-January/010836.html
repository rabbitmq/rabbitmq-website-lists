<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] failure on startup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20failure%20on%20startup&In-Reply-To=%3CAANLkTikhT3tztNzSNLd1ScE2dpZiPSj1g4TCdWzX9MCf%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010822.html">
   <LINK REL="Next"  HREF="010810.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] failure on startup</H1>
    <B>Jeff Hinrichs</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20failure%20on%20startup&In-Reply-To=%3CAANLkTikhT3tztNzSNLd1ScE2dpZiPSj1g4TCdWzX9MCf%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] failure on startup">jeffh at delasco.com
       </A><BR>
    <I>Fri Jan 21 22:59:28 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010822.html">[rabbitmq-discuss] failure on startup
</A></li>
        <LI>Next message: <A HREF="010810.html">[rabbitmq-discuss] Errors on latest mgmt plug-in
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10836">[ date ]</a>
              <a href="thread.html#10836">[ thread ]</a>
              <a href="subject.html#10836">[ subject ]</a>
              <a href="author.html#10836">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Problem resolution:

My ports were not current, I had erlang-lite-r14b01,1 installed  but after
updating my ports,  erlang-lite-r14b01_1,1 was current.
So the moral of the story for FreeBSD in a jail users, make sure you
have erlang-lite-r14b01_1,1
or greater installed.

So the problem is now solved and I am reporting success for rabbitmq-2.2.0
on a FreeBSD 8.x jail.

Thanks for the help.

Best,

-Jeff

p.s. this revision patches epmd, so that it recognizes a host whose IP
address is the same as the epmd's as a local client.

On Fri, Jan 21, 2011 at 8:01 AM, Jeff Hinrichs &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jeffh at delasco.com</A>&gt; wrote:

&gt;<i> On Thu, Jan 20, 2011 at 12:56 PM, Jerry Kuch &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jerryk at vmware.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> &gt; ps -ax reveals that epmd is in fact running.  I googled even harder
</I>&gt;&gt;<i> &gt; after mailing the list and have also seen that it appears to be
</I>&gt;&gt;<i> &gt; related to erlang (epmd specifically) for the exact problem you are
</I>&gt;&gt;<i> &gt; talking about.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I killed epmd and started it up in debugging mode
</I>&gt;&gt;<i> &gt; (epmd -d -d -d) and then issued the requested command line, erl
</I>&gt;&gt;<i> &gt; -name bogusnode
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; the command line reported the following:
</I>&gt;&gt;<i> &gt; [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jlh at hydra</A> ~]$ erl -name bogusnode
</I>&gt;&gt;<i> &gt; {error_logger,{{2011,1,19},{22,46,41}},&quot;Protocol: ~p: register
</I>&gt;&gt;<i> &gt; error:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> ~p~n&quot;,[&quot;inet_tcp&quot;,{{badmatch,{error,epmd_close}},[{inet_tcp_dist,listen,1},{net_kernel,start_protos,4},{net_kernel,start_protos,3},{net_kernel,init_node,2},{net_kernel,init,1},{gen_server,init_it,6},{proc_lib,init_p_do_apply,3}]}]}
</I>&gt;&gt;<i> &gt; Crash dump was written to: erl_crash.dump Kernel pid terminated
</I>&gt;&gt;<i> &gt; (application_controller)
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> ({application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}})
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Which is the same type of error, badmatch,{error,epmd_close} as when
</I>&gt;&gt;<i> &gt; I try to start RabbitMQ
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I'll start following up on the erlang
</I>&gt;&gt;<i> &gt; forums, I'd rather not start off using an old version of erlang.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Thank you so much for getting me pointed in the proper direction!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi, Jeff...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Glad it helped get you make some headway, and sorry you've had trouble.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> BTW, if you wouldn't mind copying this list with your results, whether
</I>&gt;&gt;<i> from applying the aforementioned patch to a built-from-source Erlang
</I>&gt;&gt;<i> of your own, or upgrading to a specific newer one that already
</I>&gt;&gt;<i> incorporates it (if such a thing currently exists---I'm not sure it
</I>&gt;&gt;<i> does yet), that would be great.  That way there's a Google-able record
</I>&gt;&gt;<i> of the problem and a solution for other folks who may encounter it to
</I>&gt;&gt;<i> come across...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Best regards,
</I>&gt;&gt;<i> Jerry
</I>&gt;&gt;<i>
</I>&gt;<i> I emailed the maintainer for the FreeBSD port but haven't heard back from
</I>&gt;<i> them as yet.  For now, I've implemented the work around @
</I>&gt;<i> <A HREF="http://erlang.2086793.n4.nabble.com/crash-dump-at-ejabberd-startup-td3044533.html">http://erlang.2086793.n4.nabble.com/crash-dump-at-ejabberd-startup-td3044533.html</A> ..
</I>&gt;<i>  However, I wouldn't call this a &quot;patch&quot; as the current FreeBSD port is
</I>&gt;<i> suppose to recognize a connection from an ip that matches the local ip, as
</I>&gt;<i> being a true &quot;Local&quot;.
</I>&gt;<i>
</I>&gt;<i> I'll follow up on this post when I hear back from the official port
</I>&gt;<i> maintainer.
</I>&gt;<i>
</I>&gt;<i> Best,
</I>&gt;<i>
</I>&gt;<i> Jeff
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110121/a9c72293/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110121/a9c72293/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010822.html">[rabbitmq-discuss] failure on startup
</A></li>
	<LI>Next message: <A HREF="010810.html">[rabbitmq-discuss] Errors on latest mgmt plug-in
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10836">[ date ]</a>
              <a href="thread.html#10836">[ thread ]</a>
              <a href="subject.html#10836">[ subject ]</a>
              <a href="author.html#10836">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
