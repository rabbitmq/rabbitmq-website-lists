<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Erlang crashes trying to allocate 583848200 bytes of memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Erlang%20crashes%20trying%20to%20allocate%20583848200%0A%20bytes%20of%20memory&In-Reply-To=%3CF78BCF638F95D74A99D036114107EDB5023948CC0C%40EXCH-MBX-3.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010730.html">
   <LINK REL="Next"  HREF="010854.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Erlang crashes trying to allocate 583848200 bytes of memory</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Erlang%20crashes%20trying%20to%20allocate%20583848200%0A%20bytes%20of%20memory&In-Reply-To=%3CF78BCF638F95D74A99D036114107EDB5023948CC0C%40EXCH-MBX-3.vmware.com%3E"
       TITLE="[rabbitmq-discuss] Erlang crashes trying to allocate 583848200 bytes of memory">jerryk at vmware.com
       </A><BR>
    <I>Tue Jan 18 21:23:44 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010730.html">[rabbitmq-discuss] Erlang crashes trying to allocate 583848200 bytes of memory
</A></li>
        <LI>Next message: <A HREF="010854.html">[rabbitmq-discuss] Erlang crashes trying to allocate 583848200	bytes of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10748">[ date ]</a>
              <a href="thread.html#10748">[ thread ]</a>
              <a href="subject.html#10748">[ subject ]</a>
              <a href="author.html#10748">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>A couple more small remarks on the somewhat less than optimal Windows
situation...

&gt;<i> Possible solutions:
</I>&gt;<i>  - upgrade to erlang &gt;= R13B3
</I>
Be warned that the results of doing so currently appear to be a bit on
the &quot;meh&quot; side.  In some cases we've seen the onset of the problem be
delayed a little bit, but happen anyway, even with version 14B01.

&gt;<i>  - Configure 'vm_memory_high_watermark' value (as Jerry suggested).
</I>&gt;<i>    The smaller the value, the sooner Rabbit will stop accepting
</I>&gt;<i>    new messages and growing memory.
</I>
This is probably the most applicable advice we have at this point. If
you do try it with a lower watermark value, say something like 0.2,
we're interested in hearing what results you experience as the
behavior Marek mentions kicks in, and whether they're sufficient to
keep the crashes at bay while not unacceptably compromising
throughput.

&gt;<i>  - Play with IMAGE_FILE_LARGE_ADDRESS_AWARE flag.
</I>
Also, be aware that just hacking this bit on the executable doesn't
necessarily mean that the code within the executable is going to do
the right thing, even if you're running a version of Windows that's
been booted with the appropriate settings to induce a 3GB/1GB
user/kernel split rather than the default 2GB/2GB.  Historically, some
32-bit applications under Windows have played funny games with pointer
arithmetic and made assumptions about pointer values that can result
in them misbehaving if user space doesn't end around the usual 2GB
boundary.  I have no idea if the Windows release of Erlang is one of
them.

Best regards,
Jerry
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010730.html">[rabbitmq-discuss] Erlang crashes trying to allocate 583848200 bytes of memory
</A></li>
	<LI>Next message: <A HREF="010854.html">[rabbitmq-discuss] Erlang crashes trying to allocate 583848200	bytes of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10748">[ date ]</a>
              <a href="thread.html#10748">[ thread ]</a>
              <a href="subject.html#10748">[ subject ]</a>
              <a href="author.html#10748">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
