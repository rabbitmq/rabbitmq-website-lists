<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Performance question - java
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Performance%20question%20-%20java&In-Reply-To=%3CB36C5355-7CE1-476E-B801-1E73FA88D435%40vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010622.html">
   <LINK REL="Next"  HREF="010624.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Performance question - java</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Performance%20question%20-%20java&In-Reply-To=%3CB36C5355-7CE1-476E-B801-1E73FA88D435%40vmware.com%3E"
       TITLE="[rabbitmq-discuss] Performance question - java">jerryk at vmware.com
       </A><BR>
    <I>Tue Jan 11 21:25:28 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010622.html">[rabbitmq-discuss] Performance question - java
</A></li>
        <LI>Next message: <A HREF="010624.html">[rabbitmq-discuss] How to use queues for RPC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10632">[ date ]</a>
              <a href="thread.html#10632">[ thread ]</a>
              <a href="subject.html#10632">[ subject ]</a>
              <a href="author.html#10632">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Brian...

&gt;<i> I'm evaluating AMQP for use with both Java and C++, and have a question related to the Java library - does it share/pool connections?
</I>
That depends what you mean.  The Connection class that is exposed to the Java client wraps a TCP connection and runs a Java thread to handle AMQP related activity on the behalf of your client code and the broker on the other side of the connection.

&gt;<i> I am working on a distributed system, and currently we create an HTTP connection, send a message to a server (host/port) and then tear down the connection - there is a slight overhead to this, but likely not affecting our overall throughput, but ideally, we would like to have the connection open for the send, to avoid the cost of constructing the connection for every message.
</I>&gt;<i> 
</I>&gt;<i> So, asking wrt Rabbit - if I send a bunch of messages, is there a connection creation cost for each one?
</I>
Nope.  You create a connection, and then from the connection you create one or more channels.  Channels in Rabbit and AMQP effectively let you multiplex the expensive TCP connection.  You can have one or more channels associated with a given connection, and they can publish, receive, ack, etc. independently of one another as long as some basic thread safety practices are observed.  You can keep a connection and its channels open in your client for long sessions if you like, potentially handling many messages over its lifetime.

There's a summary of the relationships of these entities, and some Java sample code here:

<A HREF="http://www.rabbitmq.com/api-guide.html#connecting">http://www.rabbitmq.com/api-guide.html#connecting</A>

The samples are usually straightforward to adapt to the client libraries for other languages.

&gt;<i> Any help here is appreciated - I'm spending some time looking at performance, as throughput for us is extremely important.
</I>
The documentation on the Rabbit website, and the new Rabbit tutorials...

<A HREF="http://www.rabbitmq.com/documentation.html">http://www.rabbitmq.com/documentation.html</A>

<A HREF="http://www.rabbitmq.com/getstarted.html">http://www.rabbitmq.com/getstarted.html</A>

might be of interest to you.  Also, if you're already looking at the Java client, it comes with many samples you can experiment with and use as inspiration.  Its unit tests can also be instructive to look at.

Best regards,
Jerry

</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010622.html">[rabbitmq-discuss] Performance question - java
</A></li>
	<LI>Next message: <A HREF="010624.html">[rabbitmq-discuss] How to use queues for RPC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10632">[ date ]</a>
              <a href="thread.html#10632">[ thread ]</a>
              <a href="subject.html#10632">[ subject ]</a>
              <a href="author.html#10632">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
