<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: Best Practice - Implementing a Consumer (subscriber)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Fwd%3A%20Best%20Practice%20-%20Implementing%20a%20Consumer%0A%20%28subscriber%29&In-Reply-To=%3CA6690520-5976-4081-8F34-1CE3327F6E61%40vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010678.html">
   <LINK REL="Next"  HREF="010687.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: Best Practice - Implementing a Consumer (subscriber)</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Fwd%3A%20Best%20Practice%20-%20Implementing%20a%20Consumer%0A%20%28subscriber%29&In-Reply-To=%3CA6690520-5976-4081-8F34-1CE3327F6E61%40vmware.com%3E"
       TITLE="[rabbitmq-discuss] Fwd: Best Practice - Implementing a Consumer (subscriber)">jerryk at vmware.com
       </A><BR>
    <I>Thu Jan 13 19:54:59 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010678.html">[rabbitmq-discuss] Execution hangs when redeclaring queue
</A></li>
        <LI>Next message: <A HREF="010687.html">[rabbitmq-discuss] Distributing clients across a cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10669">[ date ]</a>
              <a href="thread.html#10669">[ thread ]</a>
              <a href="subject.html#10669">[ subject ]</a>
              <a href="author.html#10669">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Jerry...

I apologize that you didn't get a response before today.  Many of us were a bit shut down over the winter holiday period.

&gt;<i> The notification broker is subscribed to a queue, reads messages off of the 
</I>&gt;<i> queue and does work to determine how the message content is formatted (based 
</I>&gt;<i> on message type), who the message should be routed to (a person) and by what 
</I>&gt;<i> means the message is routed (email, sms, tweet, etc).
</I>&gt;<i> 
</I>&gt;<i> Ideally, to provide some scalability, several instances of the broker would 
</I>&gt;<i> be running in parallel in some sort of load balanced manner, all reading off 
</I>&gt;<i> of the same queue.
</I>
This is a totally reasonable sounding scenario.  Marek Majkowski of the Rabbit team has written a nice tutorial that sketches how a core, Rabbity part of this system might be built:

<A HREF="http://www.rabbitmq.com/tutorial-two-python.html">http://www.rabbitmq.com/tutorial-two-python.html</A>

For the system you describe it seems that you'd want to run multiple instances of your broker/dispatcher entity all subscribed to the same Rabbit queue into which messages are being published.  If you follow the pattern described in the tutorial you'll get a round-robin distribution of work items across your own brokers.

That will give you the ability you desire to handle greater volume on your application's end, and will also let your application continue to get work done even if some instances of your dispatcher/broker app, or the hosts they're running on, go down.

Also, note in particular the discussion of &quot;message acknowledgment&quot; in the tutorial above.  Following those guidelines will protect you against losing work items if your application receives a work item out of a Rabbit queue and then meets some bad fate before finishing its task.  By using the ack mechanism as described, Rabbit will maintain responsibility for keeping your message until such time as you've certified that you've successfully done the work entailed by the message.

&gt;<i> The broker would be running on a pool of application servers or IIS servers. 
</I>&gt;<i> either or, but not both.
</I>&gt;<i> 
</I>&gt;<i> What is the recommend implementation of the broker? A window's service, an 
</I>&gt;<i> application running under IIS, some other WCF/WAS implementation?
</I>
On that issue, Rabbit is agnostic.  I'd suggest that you implement your application side creatures in whatever form you find easiest to start, maintain, debug and monitor the health of...  Windows services that run at system boot time might be entirely reasonable for your scenario.  To a large extent it probably depends on what your ops people and developers find most comfortable and cost effective in practice.

Best regards,
Jerry

</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010678.html">[rabbitmq-discuss] Execution hangs when redeclaring queue
</A></li>
	<LI>Next message: <A HREF="010687.html">[rabbitmq-discuss] Distributing clients across a cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10669">[ date ]</a>
              <a href="thread.html#10669">[ thread ]</a>
              <a href="subject.html#10669">[ subject ]</a>
              <a href="author.html#10669">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
