<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Erlang crashes trying to allocate 583848200 bytes of memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Erlang%20crashes%20trying%20to%20allocate%20583848200%0A%20bytes%20of%20memory&In-Reply-To=%3C4D3EA996.7090704%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010880.html">
   <LINK REL="Next"  HREF="010887.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Erlang crashes trying to allocate 583848200 bytes of memory</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Erlang%20crashes%20trying%20to%20allocate%20583848200%0A%20bytes%20of%20memory&In-Reply-To=%3C4D3EA996.7090704%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Erlang crashes trying to allocate 583848200 bytes of memory">matthias at rabbitmq.com
       </A><BR>
    <I>Tue Jan 25 10:44:38 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010880.html">[rabbitmq-discuss] Erlang crashes trying to allocate 583848200	bytes of memory
</A></li>
        <LI>Next message: <A HREF="010887.html">[rabbitmq-discuss] Erlang crashes trying to allocate 583848200	bytes of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10882">[ date ]</a>
              <a href="thread.html#10882">[ thread ]</a>
              <a href="subject.html#10882">[ subject ]</a>
              <a href="author.html#10882">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dom,

Dom54 wrote:
&gt;<i> To our understanding the RabbitMQ broker (and its supporting
</I>&gt;<i> Erlang environment) keeps to be delivered messages in memory; if the
</I>&gt;<i> consumer is not fast enough the Erlang memory footprint grows till the
</I>&gt;<i> broker crash.
</I>
The rabbit code does not hold on to messages in memory when it has 
delivered them to consumers and it is under memory pressure.

But we do rely on the underlying erlang network stack and O/S to tell us 
when it can't send messages to the consumers. Rather than, say, blindly 
buffering them. It's possible that therein lies the problem on Windows.

Btw, when you tweaked the vm_memory_high_watermark settings, did you 
check that they were actually taking effect? There is a message near the 
beginning of the rabbit log file indicating how much memory it is trying 
to limit itself to.

Regards,

Matthias.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010880.html">[rabbitmq-discuss] Erlang crashes trying to allocate 583848200	bytes of memory
</A></li>
	<LI>Next message: <A HREF="010887.html">[rabbitmq-discuss] Erlang crashes trying to allocate 583848200	bytes of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10882">[ date ]</a>
              <a href="thread.html#10882">[ thread ]</a>
              <a href="subject.html#10882">[ subject ]</a>
              <a href="author.html#10882">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
