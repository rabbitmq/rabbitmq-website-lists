<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] php talking to ruby
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20php%20talking%20to%20ruby&In-Reply-To=%3CAANLkTinoUqZMp8duojnDt7rWjnOci9dJdS6ON%3DriYV0o%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010761.html">
   <LINK REL="Next"  HREF="010769.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] php talking to ruby</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20php%20talking%20to%20ruby&In-Reply-To=%3CAANLkTinoUqZMp8duojnDt7rWjnOci9dJdS6ON%3DriYV0o%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] php talking to ruby">michael.s.klishin at gmail.com
       </A><BR>
    <I>Wed Jan 19 13:39:04 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010761.html">[rabbitmq-discuss] php talking to ruby
</A></li>
        <LI>Next message: <A HREF="010769.html">[rabbitmq-discuss] php talking to ruby
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10767">[ date ]</a>
              <a href="thread.html#10767">[ thread ]</a>
              <a href="subject.html#10767">[ subject ]</a>
              <a href="author.html#10767">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Robin,

What happens here two of your apps declare queue with different attributes
because default values for
parameters like durability seems to differ between that php library and what
amqp gem uses.

Since you only want to consume messages on the Ruby side and publish them on
the PHP side, you
have an option of only declaring one queue in your Ruby app and one exchange
in the PHP app. Then you
can use default exchange that routes messages to queues when routing key
matches queue name.

When queue is declared only in one place, differences in library defaults
won't get in the way. And, default exchange
was added to AMQP spec exactly for simple
cases like yours. This scenario is described at
<A HREF="http://www.rabbitmq.com/tutorial-one-python.html.">http://www.rabbitmq.com/tutorial-one-python.html.</A>

Hope this helps.

2011/1/19 Robin Wood &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">robin at digininja.org</A>&gt;

&gt;<i>
</I>&gt;<i> When I run the php I get:
</I>&gt;<i>
</I>&gt;<i> PHP Fatal error:  Uncaught exception 'AMQPQueueException' with message
</I>&gt;<i> 'Server channel error: 406, message: PRECONDITION_FAILED - parameters
</I>&gt;<i> for queue 'queue1' in vhost '/' not equivalent' in
</I>&gt;<i> /home/robin/sched/a.php:13
</I>&gt;<i> Stack trace:
</I>&gt;<i> #0 /home/robin/sched/a.php(13): AMQPQueue-&gt;declare('queue1')
</I>&gt;<i> #1 {main}
</I>&gt;<i>  thrown in /home/robin/sched/a.php on line 13
</I>&gt;<i>
</I>&gt;<i>
</I>-- 
MK
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110119/ba543734/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110119/ba543734/attachment.htm</A>&gt;
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010761.html">[rabbitmq-discuss] php talking to ruby
</A></li>
	<LI>Next message: <A HREF="010769.html">[rabbitmq-discuss] php talking to ruby
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10767">[ date ]</a>
              <a href="thread.html#10767">[ thread ]</a>
              <a href="subject.html#10767">[ subject ]</a>
              <a href="author.html#10767">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
