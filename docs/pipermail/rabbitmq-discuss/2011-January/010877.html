<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Exchange and queue naming conventions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Exchange%20and%20queue%20naming%20conventions&In-Reply-To=%3CAANLkTimBXprF%2BQ%3DVtAd%3DW%2B-V1LaYwW-gmW3S8htPk7j4%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010871.html">
   <LINK REL="Next"  HREF="010895.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Exchange and queue naming conventions</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Exchange%20and%20queue%20naming%20conventions&In-Reply-To=%3CAANLkTimBXprF%2BQ%3DVtAd%3DW%2B-V1LaYwW-gmW3S8htPk7j4%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Exchange and queue naming conventions">michael.s.klishin at gmail.com
       </A><BR>
    <I>Tue Jan 25 07:50:24 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010871.html">[rabbitmq-discuss] Exchange and queue naming conventions
</A></li>
        <LI>Next message: <A HREF="010895.html">[rabbitmq-discuss] Exchange and queue naming conventions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10877">[ date ]</a>
              <a href="thread.html#10877">[ thread ]</a>
              <a href="subject.html#10877">[ subject ]</a>
              <a href="author.html#10877">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2011/1/25 Bill Moseley &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">moseley at hank.org</A>&gt;

&gt;<i> I do think it makes sense to use the dotted notation, and then use topic
</I>&gt;<i> queues as that makes for very flexible routing options.  I was wondering if
</I>&gt;<i> anyone had worked out some &quot;best practices&quot; over time that would be useful
</I>&gt;<i> as we start to add more tasks.
</I>&gt;<i>
</I>
1+ year and several apps later I see the following pattern developing on my
team:

1. Exchanges are declared by producers.
2. Queues are declared and bound by consumers.
3. In vast majority of cases, consumers are &quot;smart&quot; and producers are very
dumb: they just put messages in well-known places. Consumers
    are &quot;smart&quot; in a sense that they almost always keep some persistent
state (in Redis, for example), while producers are just monitored in case
they crash.
4. Exchanges are named using the following pattern
$prefix.$applications_group.$app.$environment. For example,
megacorp.mail_delivery.shaper.qa or
megacorp.search.online_indexer.production. It works well with multiple
installations and if you want to route some data to your
customers/partners/archive.

Also, it becomes increasingly obvious that many exchanges and bindings would
be unnecessary if we begin to use default exchange more.



&gt;<i> BTW -- in that case can I configure binding for three queues:
</I>&gt;<i>  *.qa.rotate_image. *.production.rotate_image, and then a third for all
</I>&gt;<i> except &quot;qa&quot; a and &quot;production&quot;?
</I>&gt;<i>
</I>
&quot;Except&quot; case is not handled by AMQP very well (not in 0.9.1 I am most
familiar with, anyway). Maybe *.other.rotate_image would be good enough?


Finally, I'm still a bit confused when to create new exchanges (assuming all
&gt;<i> the same type).  Just trying to get some basic guidelines.  Is there any
</I>&gt;<i> overhead with using more exchanges vs. just more bindings on the same
</I>&gt;<i> exchange?  Is is common to use separate exchanges for grouping consumers
</I>&gt;<i> (i.e. an exchange for report queues and another exchange for image
</I>&gt;<i> manipulation queues)?
</I>&gt;<i>
</I>

Unless you have thousands of them on a small box, it probably does not make
much difference. For support cases, dealing with apps that use 150 exchanges
may be significantly more difficult than if they were using just 3, though.

Hope this helps.
-- 
MK
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110125/faee74e5/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110125/faee74e5/attachment-0001.htm</A>&gt;
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010871.html">[rabbitmq-discuss] Exchange and queue naming conventions
</A></li>
	<LI>Next message: <A HREF="010895.html">[rabbitmq-discuss] Exchange and queue naming conventions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10877">[ date ]</a>
              <a href="thread.html#10877">[ thread ]</a>
              <a href="subject.html#10877">[ subject ]</a>
              <a href="author.html#10877">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
