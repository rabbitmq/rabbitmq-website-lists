<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] queue_procs question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queue_procs%20question&In-Reply-To=%3CCABm-WmdV8DZsknnqpdJAt_9hTJXgwt98FP0DMXuVPk1%2B3z%2BdXQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035936.html">
   <LINK REL="Next"  HREF="035958.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] queue_procs question</H1>
    <B>Sean Allen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queue_procs%20question&In-Reply-To=%3CCABm-WmdV8DZsknnqpdJAt_9hTJXgwt98FP0DMXuVPk1%2B3z%2BdXQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] queue_procs question">sean at monkeysnatchbanana.com
       </A><BR>
    <I>Tue May 13 17:31:28 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="035936.html">[rabbitmq-discuss] gradual increase of File descriptors	reaching-1024 (max limit)
</A></li>
        <LI>Next message: <A HREF="035958.html">[rabbitmq-discuss] queue_procs question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35938">[ date ]</a>
              <a href="thread.html#35938">[ thread ]</a>
              <a href="subject.html#35938">[ subject ]</a>
              <a href="author.html#35938">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to understand what I'm seeing with memory usage in our cluster.

We have a mirrored queue that we sometimes have large amounts of publishes
come in during a relatively short period of time. (Say 2 million messages
during 5-10 minutes)

While we are publishing, memory usage on both the primary and mirrored
nodes rises greatly. Almost all the memory used is queue_procs and binary.
Once publishing ceases, the primary node returns to an amount of memory
usage in line with the message size (whereas during publishing its 5 times
or so what you would expect just based on message size).

The mirrored queue trails behind in terms of memory usage dropping but
eventually levels out to similar usage some time later (couple hours later).

If I turn off the consumer of the queue, the memory still stabilizes
eventually.

This has led us to believe that the queue_procs and binary memory usage is
related to publishing and to moving data to the mirror on the other node.
Is that a reasonable assumption?

-- 

Ce n'est pas une signature
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140513/33674fc2/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140513/33674fc2/attachment.html</A>&gt;
</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035936.html">[rabbitmq-discuss] gradual increase of File descriptors	reaching-1024 (max limit)
</A></li>
	<LI>Next message: <A HREF="035958.html">[rabbitmq-discuss] queue_procs question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35938">[ date ]</a>
              <a href="thread.html#35938">[ thread ]</a>
              <a href="subject.html#35938">[ subject ]</a>
              <a href="author.html#35938">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
