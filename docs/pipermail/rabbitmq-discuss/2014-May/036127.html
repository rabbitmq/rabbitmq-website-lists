<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ and batch processing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20batch%20processing&In-Reply-To=%3CCAKgmDnHxmxz2%2Bsy9FcCdNnYj%3DL-%2BCB8mXYhw40qq_X6jjh0zSA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036099.html">
   <LINK REL="Next"  HREF="036134.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ and batch processing</H1>
    <B>Laing, Michael</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20batch%20processing&In-Reply-To=%3CCAKgmDnHxmxz2%2Bsy9FcCdNnYj%3DL-%2BCB8mXYhw40qq_X6jjh0zSA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ and batch processing">michael.laing at nytimes.com
       </A><BR>
    <I>Tue May 20 13:09:05 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036099.html">[rabbitmq-discuss] RabbitMQ and batch processing
</A></li>
        <LI>Next message: <A HREF="036134.html">[rabbitmq-discuss] RabbitMQ and batch processing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36127">[ date ]</a>
              <a href="thread.html#36127">[ thread ]</a>
              <a href="subject.html#36127">[ subject ]</a>
              <a href="author.html#36127">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> I like the idea of being able to keep a large &quot;buffer&quot; so to speak of
</I>&gt;<i> recently sent messages available for analysis. So, a failed batch job could
</I>&gt;<i> very easily inspect the actual messages that were persisted/sent in an
</I>&gt;<i> effort to debug. That is pretty sweet. Cassandra is very nice for this as
</I>&gt;<i> well, since persistence to C* is can be delegated to a consumer in the
</I>&gt;<i> buffer layer or core. Do you simply shovel everything to a particular path
</I>&gt;<i> queue for something to persist to Cassandra? Or is that done inline
</I>&gt;<i> somewhere before publishing to RabbitMQ? I assume that that kind of thing
</I>&gt;<i> is done out-of-band of the client.
</I>&gt;<i>
</I>
'cache_push' and 'cache_pull' are currently done in the central (switching)
core in parallel with other operations. They will be run on our autoscaling
edge nodes also as soon as demand warrants. The clients never work directly
with the cache and, in fact, we have used DynamoDB, Riak, etc. in the past
as implementations. We are happiest w Cassandra because it is very fast,
free to use, easy to manage, and scales.


&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> We also 'journal' all messages with ttl of 30 days. It has worked well
</I>&gt;&gt;<i> for us and we can easily scale up and down. The fast generalized cache
</I>&gt;&gt;<i> makes it possible to support quite interesting apps.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hmm. I'm not sure I follow. What do you mean by journal?
</I>&gt;<i>
</I>
Each message is stored by timestamp like a log. It's slightly more
complicated than that in practice, to avoid hotspots, but the idea is to
have a complete sequential record of all activity for analysis and replay.


&gt;<i>
</I>&gt;<i> I am also curious about some of the things you do with Fabrik... For
</I>&gt;<i> example, is persistence handled by the client (indirectly via the Fabrik
</I>&gt;<i> library) or some other component service that listens to RabbitMQ?
</I>&gt;<i>
</I>
The fabrik handles persistence on behalf of the client. We have
parallelized event-driven python services that do this using the pika and
cassandra-driver modules. Examples and benchmarks, including a version of
our 'rabbit_helpers' framework, will be open-sourced for my Cassandra Day
presentation on 21 June in NYC at our office.

To be clear, each of our python services is quite small and focused: they
subscribe to one or a few queues and publish to an exchange or 2. So
'cache_pull' and 'cache_push', and our other services, are not libraries
others use, they are services that respond only via AMQP. Hence they are
'black boxes', with internals hidden, and are easy to test.


&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140520/e6fb9944/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140520/e6fb9944/attachment.html</A>&gt;
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036099.html">[rabbitmq-discuss] RabbitMQ and batch processing
</A></li>
	<LI>Next message: <A HREF="036134.html">[rabbitmq-discuss] RabbitMQ and batch processing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36127">[ date ]</a>
              <a href="thread.html#36127">[ thread ]</a>
              <a href="subject.html#36127">[ subject ]</a>
              <a href="author.html#36127">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
