<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Memory leak in STOMP connector or federation?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20leak%20in%20STOMP%20connector%20or%20federation%3F&In-Reply-To=%3CC57E44EC-429B-41C1-AE34-67F28EF399AF%40bobtfish.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036047.html">
   <LINK REL="Next"  HREF="036049.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Memory leak in STOMP connector or federation?</H1>
    <B>Tomas Doran</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20leak%20in%20STOMP%20connector%20or%20federation%3F&In-Reply-To=%3CC57E44EC-429B-41C1-AE34-67F28EF399AF%40bobtfish.net%3E"
       TITLE="[rabbitmq-discuss] Memory leak in STOMP connector or federation?">bobtfish at bobtfish.net
       </A><BR>
    <I>Fri May 16 16:24:50 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036047.html">[rabbitmq-discuss] Force Close all Connections from Management API
</A></li>
        <LI>Next message: <A HREF="036049.html">[rabbitmq-discuss] Memory leak in STOMP connector or federation?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36048">[ date ]</a>
              <a href="thread.html#36048">[ thread ]</a>
              <a href="subject.html#36048">[ subject ]</a>
              <a href="author.html#36048">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hiya

I&#8217;m seeing issues with what appears to be gradual memory leaking in RabbitMQ.

We&#8217;re currently running 3.2.1 in production, but I&#8217;ve also reproduced this issue with 3.3.1.

The memory is all in the &#8216;binary&#8217; section, which would imply it&#8217;s message bodies or similar content. gcore on the rabbitmq process, followed by strings and grep also implies it&#8217;s holding onto message bodies that it shouldn&#8217;t be.

From the admin console or rabbitmqctl report, I can&#8217;t see any cause of the message bodies being kept (i.e. there is no significant amount of queued messages).

I&#8217;ve attached the rabbitmqctl report in the hope that someone with more clues than me will be able to read the runes better and point out what may be wrong or give me any hints for how to further investigate. 

TIA
Tom


-------------- next part --------------
A non-text attachment was scrubbed...
Name: server_report.txt.gz
Type: application/x-gzip
Size: 307205 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140516/417a3502/attachment.bin">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140516/417a3502/attachment.bin</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036047.html">[rabbitmq-discuss] Force Close all Connections from Management API
</A></li>
	<LI>Next message: <A HREF="036049.html">[rabbitmq-discuss] Memory leak in STOMP connector or federation?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36048">[ date ]</a>
              <a href="thread.html#36048">[ thread ]</a>
              <a href="subject.html#36048">[ subject ]</a>
              <a href="author.html#36048">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
