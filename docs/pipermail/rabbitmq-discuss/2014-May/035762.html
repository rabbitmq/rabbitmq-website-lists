<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Reset Queues/Exchanges Only?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Reset%20Queues/Exchanges%20Only%3F&In-Reply-To=%3Cbaf4cfe0-cd9a-4c5e-90f5-45b79eda2545%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035769.html">
   <LINK REL="Next"  HREF="035776.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Reset Queues/Exchanges Only?</H1>
    <B>Robert Parker</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Reset%20Queues/Exchanges%20Only%3F&In-Reply-To=%3Cbaf4cfe0-cd9a-4c5e-90f5-45b79eda2545%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Reset Queues/Exchanges Only?">reparker23 at gmail.com
       </A><BR>
    <I>Fri May  2 15:15:37 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="035769.html">[rabbitmq-discuss] Frequent disconnection of rabbitmq
</A></li>
        <LI>Next message: <A HREF="035776.html">[rabbitmq-discuss] Reset Queues/Exchanges Only?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35762">[ date ]</a>
              <a href="thread.html#35762">[ thread ]</a>
              <a href="subject.html#35762">[ subject ]</a>
              <a href="author.html#35762">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We are running rabbitmq 3.1.5 under Erlang R16B02.  We're running with 
2-node clusters where both consumers and producers are .NET services using 
either Borrow or MassTransit wrappers.  These services do ALL of the 
queue/exchange definition/initialization.  Periodically, we will have a 
code change where we will abandon certain queues and we will need to clean 
out all available queues on a cluster and have these services 
 re-initialize them.  The way we have been doing it is to take one node of 
the cluster and run:

node1# rabbitmqctl stop_app
node1# rabbitmqctl reset

However, when we do this for the purpose of simply cleaning out the unused 
old queues and exchanges, it also destroys the clustering config, HA policy 
config, and any local users we might have defined.

Is there an easy way to force the destruction of all the queues and 
exchanges on a rabbitmq cluster, but leave all other configurations 
(clustering, federation, shovel, users, policies) alone?  All I want to do 
is nuke all queues/exchanges and have the client services re-initialize 
them.  Having to re-setup all the other configs after doing a &quot;rabbitmqctl 
reset&quot; or &quot;rabbitmqctl force_reset&quot; is becoming cumbersome and a source of 
mistakes.  We're not interested in using the API from the consumer or 
publisher end to delete named individual queues/exchanges, we need a 
generic process that can be initiated as an administrative task from the 
rabbitmq server itself.

Thanks in advance
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140502/fd020129/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140502/fd020129/attachment.html</A>&gt;
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035769.html">[rabbitmq-discuss] Frequent disconnection of rabbitmq
</A></li>
	<LI>Next message: <A HREF="035776.html">[rabbitmq-discuss] Reset Queues/Exchanges Only?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35762">[ date ]</a>
              <a href="thread.html#35762">[ thread ]</a>
              <a href="subject.html#35762">[ subject ]</a>
              <a href="author.html#35762">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
