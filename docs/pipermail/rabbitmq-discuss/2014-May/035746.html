<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Memory Usage in Management API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20Usage%20in%20Management%20API&In-Reply-To=%3C53635597.8000209%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035742.html">
   <LINK REL="Next"  HREF="035770.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Memory Usage in Management API</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20Usage%20in%20Management%20API&In-Reply-To=%3C53635597.8000209%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Memory Usage in Management API">simon at rabbitmq.com
       </A><BR>
    <I>Fri May  2 09:21:43 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="035742.html">[rabbitmq-discuss] Memory Usage in Management API
</A></li>
        <LI>Next message: <A HREF="035770.html">[rabbitmq-discuss] Memory Usage in Management API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35746">[ date ]</a>
              <a href="thread.html#35746">[ thread ]</a>
              <a href="subject.html#35746">[ subject ]</a>
              <a href="author.html#35746">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>These are rather general questions, so it would help a great deal if I 
knew what you were trying to do.

On 02/05/2014 08:54, Arun Rao wrote:
&gt;<i> Can someone please clarify the following:
</I>&gt;<i>
</I>&gt;<i> 1. Memory Usage (by node) shown in Management API: Sum of
</I>&gt;<i> total_heap_size of all registered processes (including
</I>&gt;<i> rabbit_mgmt_agent_sup, rabbit_mgmt_sup etc.,)?
</I>
The memory use per node is that reported by erlang:memory(total). This 
includes all processes, registered and unregistered as well as all 
binaries, atoms, ETS tables, code and so on. It's supposed to correspond 
to how much memory is used at the OS level. Sadly in practice it doesn't 
take account of memory fragmentation so it can differ, but it's the 
closest thing Erlang gives us.

&gt;<i> 2. Where does virtual hosts/exchanges/queues live? Everything related to
</I>&gt;<i> rabbitmq amqp server functionality is on &quot;rabbit&quot; erlang process?
</I>
No, not at all. That process is the top of the tree but there are many 
others. All the objects (i.e. vhosts, exchanges, queues and so on) exist 
as records in Mnesia / ETS tables, and queues also exist as processes.

&gt;<i> 3. Has anyone had success with erlang:trace? I am trying the following
</I>&gt;<i> but couldnt get this to work:
</I>&gt;<i>
</I>&gt;<i> rabbitmqctl eval
</I>&gt;<i> 'PID=erlang:whereis(rabbit),erlang:trace(PID,gc_start,info).'
</I>
Well, the second argument to trace/3 is a boolean, and the third is a 
list of flags, of which 'info' is not one. But trace/3 is very low 
level. You probably want to use the debugger instead?

Cheers, Simon
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035742.html">[rabbitmq-discuss] Memory Usage in Management API
</A></li>
	<LI>Next message: <A HREF="035770.html">[rabbitmq-discuss] Memory Usage in Management API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35746">[ date ]</a>
              <a href="thread.html#35746">[ thread ]</a>
              <a href="subject.html#35746">[ subject ]</a>
              <a href="author.html#35746">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
