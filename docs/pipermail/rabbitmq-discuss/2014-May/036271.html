<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] CRITICAL:pika.connection:Attempted to send frame when closed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20CRITICAL%3Apika.connection%3AAttempted%20to%20send%0A%20frame%20when%20closed&In-Reply-To=%3C538483F0.2070401%40finoux.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036270.html">
   <LINK REL="Next"  HREF="036272.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] CRITICAL:pika.connection:Attempted to send frame when closed</H1>
    <B>shilpa karkera</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20CRITICAL%3Apika.connection%3AAttempted%20to%20send%0A%20frame%20when%20closed&In-Reply-To=%3C538483F0.2070401%40finoux.com%3E"
       TITLE="[rabbitmq-discuss] CRITICAL:pika.connection:Attempted to send frame when closed">shilpa.karkera at finoux.com
       </A><BR>
    <I>Tue May 27 13:24:16 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036270.html">[rabbitmq-discuss] CRITICAL:pika.connection:Attempted to send frame when closed
</A></li>
        <LI>Next message: <A HREF="036272.html">[rabbitmq-discuss] CRITICAL:pika.connection:Attempted to send frame when closed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36271">[ date ]</a>
              <a href="thread.html#36271">[ thread ]</a>
              <a href="subject.html#36271">[ subject ]</a>
              <a href="author.html#36271">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The network is checked and is perfectly fine.
And the other queues also run well till some amount of time while the 
first queue gets this error and stops producing consuming. Consequently 
others follow to the same warning in some time.
This is the only thing that comes up when a queue has gone dead: No 
other stack trace:

When i use PIka version: 0.9.13 This is the error:

CRITICAL:pika.connection:Attempted to send frame when closed

When I tried with 0.9.14 (latest 1 from the git): This is the error:

Pika: Write buffer exceeded warning threshold at 555752 bytes and an 
estimated 6861 frames behind

That's why I believe its something to do with buffer/ memory. I've also 
tried increasing it. It just runs a bit longer and eventually gets this 
error.





On Tuesday 27 May 2014 05:41 PM, Michael Klishin wrote:
&gt;<i>   On 27 May 2014 at 15:37:01, shilpa karkera (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">shilpa.karkera at finoux.com</A>) wrote:
</I>&gt;&gt;&gt;<i> The RabbitMQ producer and consumer for a particular queue stops
</I>&gt;&gt;<i> producing and consuming completely when such a warning occurs.
</I>&gt;&gt;<i> It is understood that the message bytes running over the buffer
</I>&gt;&gt;<i> is overwhelmed, and thus it might cause this issue.
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i> However, the question is, Why doesn't the consumer release the
</I>&gt;&gt;<i> message in the buffer once it consumes this message initially,
</I>&gt;&gt;<i> instead it accumulates in the buffer. This is what I have researched
</I>&gt;&gt;<i> and understood regarding the above issue. Kindly help troubleshoot!
</I>&gt;<i> I'm pretty sure the issue has little to do with buffers. More likely you're trying to
</I>&gt;<i> use an AMQP 0-9-1 connection that's already closed, either because of a network problem or
</I>&gt;<i> something else.
</I>&gt;<i>
</I>&gt;<i> Please post RabbitMQ log and full stack trace from Pika.
</I>&gt;<i> --
</I>&gt;<i> MK
</I>&gt;<i>
</I>&gt;<i> Software Engineer, Pivotal/RabbitMQ
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036270.html">[rabbitmq-discuss] CRITICAL:pika.connection:Attempted to send frame when closed
</A></li>
	<LI>Next message: <A HREF="036272.html">[rabbitmq-discuss] CRITICAL:pika.connection:Attempted to send frame when closed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36271">[ date ]</a>
              <a href="thread.html#36271">[ thread ]</a>
              <a href="subject.html#36271">[ subject ]</a>
              <a href="author.html#36271">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
