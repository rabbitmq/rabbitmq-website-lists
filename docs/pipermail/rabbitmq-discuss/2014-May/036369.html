<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Why is it so difficult to setup clustering ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Why%20is%20it%20so%20difficult%20to%20setup%20clustering%20%3F&In-Reply-To=%3C1401466553.8270.YahooMailNeo%40web172802.mail.ir2.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036368.html">
   <LINK REL="Next"  HREF="036370.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Why is it so difficult to setup clustering ?</H1>
    <B>John Smith</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Why%20is%20it%20so%20difficult%20to%20setup%20clustering%20%3F&In-Reply-To=%3C1401466553.8270.YahooMailNeo%40web172802.mail.ir2.yahoo.com%3E"
       TITLE="[rabbitmq-discuss] Why is it so difficult to setup clustering ?">gb10hkzo-rabbitmq at yahoo.co.uk
       </A><BR>
    <I>Fri May 30 17:15:53 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036368.html">[rabbitmq-discuss] Why is it so difficult to setup clustering ?
</A></li>
        <LI>Next message: <A HREF="036370.html">[rabbitmq-discuss] Question about configs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36369">[ date ]</a>
              <a href="thread.html#36369">[ thread ]</a>
              <a href="subject.html#36369">[ subject ]</a>
              <a href="author.html#36369">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>When I've done things like this myself, I've usually forgotten to
</I>install the sources.list entry, or forgotten to run `apt-get update`;

Definitley not the case here (have checked my bash history, and have also just gone in and deleted the config file from sources.list.d/ ).




On Friday, 30 May 2014, 14:35, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:
 


On 30/05/2014 2:08PM, John Smith wrote:
&gt;<i> If I try clustering from U12 to U14, I get :
</I>&gt;<i>
</I>&gt;<i> Error: {'EXIT',
</I>&gt;<i>&#160; &#160; &#160; &#160; &#160; &#160;  {function_clause,
</I>&gt;<i>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;  [{rabbit_control,action,
</I>&gt;<i>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; [join_cluster,'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at U12</A>',
</I>&gt;<i>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;  [&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at U14</A>&quot;],
</I>&gt;<i>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;  [{&quot;-p&quot;,&quot;/&quot;},{&quot;-n&quot;,&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at U14</A>&quot;},{&quot;-q&quot;,false}],
</I>&gt;<i>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;  #Fun&lt;rabbit_control.1.115240681&gt;],
</I>&gt;<i>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; []},
</I>&gt;<i>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {rabbit_control,start,0,[]},
</I>&gt;<i>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {init,start_it,1,[]},
</I>&gt;<i>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {init,start_em,1,[]}]}}
</I>
That is a very odd looking error. The rabbit_control module was renamed 
to rabbit_control_main in 3.0.0, the same release in which cluster was 
changed to join_cluster.

So that looks like somehow you have a modern rabbitmqctl mixed in with 
an old (2.x) RabbitMQ server.


&gt;<i> If I try from U14 to U12, I get :
</I>&gt;<i>
</I>&gt;<i> Clustering node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at U14</A>' with '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at U12</A>' ...
</I>&gt;<i> Error: unable to connect to nodes ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at U12</A>]:
</I>&gt;<i> {'EXIT',{undef,[{rabbit_mnesia,cluster_status_from_mnesia,[],[]},{rpc,'-handle_call_call/6-fun-0-',5,[{file,[114,112,99,46,101,114,108]},{line,205}]}]}}
</I>
That's also consistent with U12 running an old rabbit.

So I don't know how your installation on U12 has progressed but it has 
definitely become mixed up somehow. That should be impossible if just 
using .debs, so have you installed via some other mechanism as well?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140530/423e37fc/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140530/423e37fc/attachment.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036368.html">[rabbitmq-discuss] Why is it so difficult to setup clustering ?
</A></li>
	<LI>Next message: <A HREF="036370.html">[rabbitmq-discuss] Question about configs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36369">[ date ]</a>
              <a href="thread.html#36369">[ thread ]</a>
              <a href="subject.html#36369">[ subject ]</a>
              <a href="author.html#36369">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
