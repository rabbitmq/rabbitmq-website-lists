<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Mirrored HA queues disappeared on one out of two nodes restarting
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Mirrored%20HA%20queues%20disappeared%20on%20one%20out%20of%0A%20two%20nodes%20restarting&In-Reply-To=%3C53621820.9060700%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035705.html">
   <LINK REL="Next"  HREF="035712.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Mirrored HA queues disappeared on one out of two nodes restarting</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Mirrored%20HA%20queues%20disappeared%20on%20one%20out%20of%0A%20two%20nodes%20restarting&In-Reply-To=%3C53621820.9060700%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Mirrored HA queues disappeared on one out of two nodes restarting">simon at rabbitmq.com
       </A><BR>
    <I>Thu May  1 10:47:12 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="035705.html">[rabbitmq-discuss] Redelivery of unacked messages.
</A></li>
        <LI>Next message: <A HREF="035712.html">[rabbitmq-discuss] Mirrored HA queues disappeared on one out of	two nodes restarting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35706">[ date ]</a>
              <a href="thread.html#35706">[ thread ]</a>
              <a href="subject.html#35706">[ subject ]</a>
              <a href="author.html#35706">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/04/14 16:34, Mark Steele wrote:
&gt;<i>      exception exit: {function_clause,
</I>&gt;<i>                          [{gb_trees,delete_1,[4227,nil]},
</I>&gt;<i>                           {gb_trees,delete,2},
</I>&gt;<i>                           {rabbit_variable_queue,remove_pending_ack,2},
</I>&gt;<i>                           {rabbit_variable_queue,'-ack/2-fun-0-',2},
</I>&gt;<i>                           {lists,foldl,3},
</I>&gt;<i>                           {rabbit_variable_queue,ack,2},
</I>&gt;<i>                           {rabbit_mirror_queue_slave,process_instruction,2},
</I>&gt;<i>                           {rabbit_mirror_queue_slave,handle_cast,2}]}
</I>
Hi. That's not a stack trace we've seen before - however it's quite 
plausible that one of bug 25615 or 25602 could cause this (fixed in 
3.1.4 and 3.2.0 respectively) as they could both lead to slave VQ state 
being corrupted in some cases.

Which version are you running?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035705.html">[rabbitmq-discuss] Redelivery of unacked messages.
</A></li>
	<LI>Next message: <A HREF="035712.html">[rabbitmq-discuss] Mirrored HA queues disappeared on one out of	two nodes restarting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35706">[ date ]</a>
              <a href="thread.html#35706">[ thread ]</a>
              <a href="subject.html#35706">[ subject ]</a>
              <a href="author.html#35706">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
