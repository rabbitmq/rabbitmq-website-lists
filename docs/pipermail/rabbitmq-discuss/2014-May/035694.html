<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Need clarification on RabbitMq Connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Need%20clarification%20on%20RabbitMq%20Connection&In-Reply-To=%3CCAD_i5MFVTj%3Dp9uckh0YxC69-8zi-RNqyfu%2BBdTcfi_%3Db%3DDL8xg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035745.html">
   <LINK REL="Next"  HREF="035926.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Need clarification on RabbitMq Connection</H1>
    <B>Loganathan Sellapa</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Need%20clarification%20on%20RabbitMq%20Connection&In-Reply-To=%3CCAD_i5MFVTj%3Dp9uckh0YxC69-8zi-RNqyfu%2BBdTcfi_%3Db%3DDL8xg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Need clarification on RabbitMq Connection">loganathan.ms at gmail.com
       </A><BR>
    <I>Thu May  1 07:21:19 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="035745.html">[rabbitmq-discuss] RabbitMQ 3.3.0 doesn't working with OpenLDAP	????
</A></li>
        <LI>Next message: <A HREF="035926.html">[rabbitmq-discuss] Need clarification on RabbitMq Connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35694">[ date ]</a>
              <a href="thread.html#35694">[ thread ]</a>
              <a href="subject.html#35694">[ subject ]</a>
              <a href="author.html#35694">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I have a requirement where I need to develop an ruby library which needs to
listen to RabbitMQ messages and forward the messages to some other
applications with some additional changes in message. This library needs to
* &#8203;&#8203; run always and should not close the connection at all*, hence it needs
to listen &amp; publish messages always, also this library is running to of ROR
application.

For this requirement I have build an rake task to start listening to
RabbitMQ, also I have placed the same code in initializers file in order to
start the library along with Apache server in production mode. In
production mode initializer file is starting my library to listen &amp; publish
the messages to RabbitMq.  I have noticed that connectiong to RabbitMq
behaves differently via rake task &amp; initilazer file, copied below the
rabbitmq log for your reference.


*RABBITMQ LOG WHILE RUNNING THE RUBY LIBRARY VIA RAKE TASK: (Connection
made one time only)*

=INFO REPORT==== 30-Apr-2014::20:43:24 ===
accepting AMQP connection &lt;0.7409.18&gt; (10.146.14.118:54932 -&gt;
10.112.187.58:5671)

*RABBITMQ LOG WHILE RUNNING THE RUBY LIBRARY VIA INITIALIZER
FILE:(Connection made multiple times)*

=INFO REPORT==== 30-Apr-2014::20:28:35 ===
accepting AMQP connection &lt;0.6325.18&gt; (10.146.14.118:54928 -&gt;
10.112.187.58:5671)

=INFO REPORT==== 30-Apr-2014::20:28:35 ===
accepting AMQP connection &lt;0.6329.18&gt; (10.146.14.118:54929 -&gt;
10.112.187.58:5671)


=WARNING REPORT==== 30-Apr-2014::20:28:37 ===
closing AMQP connection &lt;0.6325.18&gt; (10.146.14.118:54928 -&gt;
10.112.187.58:5671):
connection_closed_abruptly

=INFO REPORT==== 30-Apr-2014::20:28:37 ===
accepting AMQP connection &lt;0.6368.18&gt; (10.146.14.118:54930 -&gt;
10.112.187.58:5671)

=WARNING REPORT==== 30-Apr-2014::20:28:37 ===
closing AMQP connection &lt;0.6329.18&gt; (10.146.14.118:54929 -&gt;
10.112.187.58:5671):
connection_closed_abruptly

=INFO REPORT==== 30-Apr-2014::20:28:37 ===
accepting AMQP connection &lt;0.6373.18&gt; (10.146.14.118:54931 -&gt;
10.112.187.58:5671)


=ERROR REPORT==== 30-Apr-2014::20:28:42 ===
error on AMQP connection &lt;0.6368.18&gt;: {ssl_upgrade_error,timeout} (unknown
POSIX error)

=ERROR REPORT==== 30-Apr-2014::20:28:42 ===
error on AMQP connection &lt;0.6373.18&gt;: {ssl_upgrade_error,timeout} (unknown
POSIX error)


Can
&#8203;anybody
  let me know whether the issue with my code or with RabbitMq
configuration,  you can see my code
HERE&lt;<A HREF="https://gist.github.com/loganathan-s/22256c01127065c9d659">https://gist.github.com/loganathan-s/22256c01127065c9d659</A>&gt;.
While re
&#8203;-&#8203;
connecting on tcp connection loss AMQP gem passes guest as username &amp;
password even though I am connecting to RabbitMq via SSL certificates.

regards,
Loganathan
Mob: +91 7760780741 | +91 9944414388
Skype: loganathan.sellappa
ViewMe &lt;<A HREF="http://vizualize.me/loganathan">http://vizualize.me/loganathan</A>&gt;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140501/09bfbb13/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140501/09bfbb13/attachment.html</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035745.html">[rabbitmq-discuss] RabbitMQ 3.3.0 doesn't working with OpenLDAP	????
</A></li>
	<LI>Next message: <A HREF="035926.html">[rabbitmq-discuss] Need clarification on RabbitMq Connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35694">[ date ]</a>
              <a href="thread.html#35694">[ thread ]</a>
              <a href="subject.html#35694">[ subject ]</a>
              <a href="author.html#35694">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
