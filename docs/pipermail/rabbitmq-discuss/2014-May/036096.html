<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ and batch processing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20batch%20processing&In-Reply-To=%3CCAKgmDnHc49iiwP7EgNR9oizW6ULUXJDJnvYLq6qT%2BHHQ3D-93g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036095.html">
   <LINK REL="Next"  HREF="036099.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ and batch processing</H1>
    <B>Laing, Michael</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20batch%20processing&In-Reply-To=%3CCAKgmDnHc49iiwP7EgNR9oizW6ULUXJDJnvYLq6qT%2BHHQ3D-93g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ and batch processing">michael.laing at nytimes.com
       </A><BR>
    <I>Mon May 19 22:32:36 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036095.html">[rabbitmq-discuss] RabbitMQ and batch processing
</A></li>
        <LI>Next message: <A HREF="036099.html">[rabbitmq-discuss] RabbitMQ and batch processing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36096">[ date ]</a>
              <a href="thread.html#36096">[ thread ]</a>
              <a href="subject.html#36096">[ subject ]</a>
              <a href="author.html#36096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>snip:

&gt;<i>
</I>&gt;<i> So do you persist every messages sent via Fabrik? I think we could do this
</I>&gt;<i> for some things, but we would have to have TTLs for others. We could even
</I>&gt;<i> have our persistence store honor TTLs that are assigned during queue
</I>&gt;<i> creation, I think. I wonder if Cassandra has something built in that would
</I>&gt;<i> make this easy for us.
</I>&gt;<i>
</I>&gt;<i>
</I>Yes. We allow internal clients to assign a 'cache_ttl' for each message.
When we persist the message in Cassandra we set that ttl. By default the
cache_ttl is 3 days, max is 30 days.

The above applies to persistence by 'path' - each message may have multiple
paths - think of a path as a folder for the message that is formatted like
a routing key, e.g. 'feeds-item.breaking-news.1224'. Within each
path/folder messages are stored latest-first by a timeuuid (uuid version
1). Searches for the 'latest' n messages in a path subtree are very
efficient.

Cassandra takes care of deleting them for us and compacting storage - we
never delete manually. Similarly, S3 items are automatically deleted.

We also 'journal' all messages with ttl of 30 days. It has worked well for
us and we can easily scale up and down. The fast generalized cache makes it
possible to support quite interesting apps.

ml
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140519/cd5b432b/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140519/cd5b432b/attachment.html</A>&gt;
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036095.html">[rabbitmq-discuss] RabbitMQ and batch processing
</A></li>
	<LI>Next message: <A HREF="036099.html">[rabbitmq-discuss] RabbitMQ and batch processing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36096">[ date ]</a>
              <a href="thread.html#36096">[ thread ]</a>
              <a href="subject.html#36096">[ subject ]</a>
              <a href="author.html#36096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
