<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> No subject
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.40.1360281083.8494.rabbitmq-discuss%40lists.rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020773.html">
   <LINK REL="Next"  HREF="020915.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>No subject</H1>
    <B></B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.40.1360281083.8494.rabbitmq-discuss%40lists.rabbitmq.com%3E"
       TITLE="No subject">
       </A><BR>
    <I>Sun Jun 17 23:12:48 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020773.html">No subject
</A></li>
        <LI>Next message: <A HREF="020915.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25414">[ date ]</a>
              <a href="thread.html#25414">[ thread ]</a>
              <a href="subject.html#25414">[ subject ]</a>
              <a href="author.html#25414">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">pkonar at ajtrafp063</A> ~]$ sudo rabbitmqctl list_connections name last_blocked_=
age last_blocked_by
Listing connections ...
10.196.42.180:34573 -&gt; 10.196.42.21:5672        12764.704275    flow
10.196.42.182:35876 -&gt; 10.196.42.21:5672        73727.262603    flow
10.196.42.179:56602 -&gt; 10.196.42.21:5672        83020.003881    flow
10.196.42.179:49655 -&gt; 10.196.42.21:5672        119920.572294   flow
10.196.42.180:35946 -&gt; 10.196.42.21:5672        160358.249867   flow
10.196.42.128:34530 -&gt; 10.196.42.21:5672        160357.376454   flow
10.196.42.182:44301 -&gt; 10.196.42.21:5672        255349.084604   flow
10.196.42.180:42636 -&gt; 10.196.42.21:5672        540284.411689   flow
10.196.42.180:38344 -&gt; 10.196.42.21:5672        555761.164948   flow
10.196.42.180:48869 -&gt; 10.196.42.21:5672        150287.427366   flow
10.196.42.181:51739 -&gt; 10.196.42.21:5672        540038.207921   flow
10.196.42.179:39955 -&gt; 10.196.42.21:5672        611682.283323   flow
10.196.42.180:35222 -&gt; 10.196.42.21:5672        121361.161677   flow
10.196.42.128:42550 -&gt; 10.196.42.21:5672        331780.850814   flow
10.196.42.180:45118 -&gt; 10.196.42.21:5672        331362.025777   flow
10.196.42.180:36792 -&gt; 10.196.42.21:5672        523.051799      flow
10.196.42.128:43973 -&gt; 10.196.42.21:5672        2446.370875     flow
10.196.42.179:43427 -&gt; 10.196.42.21:5672        8325.616096     flow
10.196.42.181:58037 -&gt; 10.196.42.21:5672        611682.28557    flow
10.196.42.181:43893 -&gt; 10.196.42.21:5672        13782.062471    flow
10.196.42.128:53201 -&gt; 10.196.42.21:5672        73720.062485    flow
10.196.42.180:57993 -&gt; 10.196.42.21:5672        116501.788586   flow
10.196.42.128:44601 -&gt; 10.196.42.21:5672        540040.695204   flow
10.196.42.180:42954 -&gt; 10.196.42.21:5672        520607.529637   flow
10.196.42.181:60942 -&gt; 10.196.42.21:5672        53204.431633    flow
10.196.42.179:34215 -&gt; 10.196.42.21:5672        198698.676847   flow
10.196.42.181:57113 -&gt; 10.196.42.21:5672        166839.688509   flow
10.196.42.181:44924 -&gt; 10.196.42.21:5672        332197.736174   flow
10.196.42.182:47735 -&gt; 10.196.42.21:5672        331481.775742   flow
10.196.42.181:56010 -&gt; 10.196.42.21:5672        432584.747437   flow
10.196.42.182:33466 -&gt; 10.196.42.21:5672        542569.019894   flow
10.196.42.182:49489 -&gt; 10.196.42.21:5672        687578.188979   flow
10.196.42.119:46941 -&gt; 10.196.42.21:5672        infinity        none
10.196.42.181:38992 -&gt; 10.196.42.21:5672        640.664645      flow
10.196.42.179:33974 -&gt; 10.196.42.21:5672        59567.79698     flow
10.196.42.180:60479 -&gt; 10.196.42.21:5672        78340.603846    flow
10.196.42.128:35111 -&gt; 10.196.42.21:5672        110682.569761   flow
10.196.42.182:41183 -&gt; 10.196.42.21:5672        160358.310501   flow
10.196.42.180:40093 -&gt; 10.196.42.21:5672        325187.187323   flow
10.196.42.179:58959 -&gt; 10.196.42.21:5672        540040.67438    flow
10.196.42.120:47122 -&gt; 10.196.42.21:5672        infinity        none
147.243.130.13:1914 -&gt; 10.196.42.21:5672        infinity        none
10.196.42.182:43870 -&gt; 10.196.42.21:5672        58188.906352    flow
10.196.42.181:37810 -&gt; 10.196.42.21:5672        160480.054396   flow
10.196.42.180:55406 -&gt; 10.196.42.21:5672        226238.528246   flow
10.196.42.128:41568 -&gt; 10.196.42.21:5672        225819.996323   flow
10.196.42.182:51706 -&gt; 10.196.42.21:5672        312468.079197   flow
10.196.42.179:47768 -&gt; 10.196.42.21:5672        302800.886011   flow
10.196.42.179:49552 -&gt; 10.196.42.21:5672        643.137235      flow
10.196.42.180:42817 -&gt; 10.196.42.21:5672        8325.579698     flow
10.196.42.181:37849 -&gt; 10.196.42.21:5672        77747.314102    flow
10.196.42.182:37436 -&gt; 10.196.42.21:5672        121598.115854   flow
10.196.42.180:35069 -&gt; 10.196.42.21:5672        183168.9943     flow
10.196.42.181:53446 -&gt; 10.196.42.21:5672        562240.195569   flow
10.196.42.128:56605 -&gt; 10.196.42.21:5672        611682.11223    flow
10.196.42.128:51099 -&gt; 10.196.42.21:5672        12764.707946    flow
10.196.42.181:47439 -&gt; 10.196.42.21:5672        131324.898493   flow
10.196.42.179:35694 -&gt; 10.196.42.21:5672        161809.195666   flow
10.196.42.179:44941 -&gt; 10.196.42.21:5672        460182.206365   flow
10.196.42.128:48565 -&gt; 10.196.42.21:5672        584981.202854   flow
10.196.42.182:46997 -&gt; 10.196.42.21:5672        50802.723789    flow
10.196.42.179:44448 -&gt; 10.196.42.21:5672        153284.24729    flow
10.196.42.182:33571 -&gt; 10.196.42.21:5672        288758.842043   flow
10.196.42.180:49561 -&gt; 10.196.42.21:5672        278083.128494   flow
10.196.42.181:49078 -&gt; 10.196.42.21:5672        539444.3049     flow
10.196.42.179:41171 -&gt; 10.196.42.21:5672        524806.365632   flow
10.196.42.128:54030 -&gt; 10.196.42.21:5672        8325.071529     flow
10.228.140.152:51670 -&gt; 10.196.42.21:5672       infinity        none
10.196.42.179:41543 -&gt; 10.196.42.21:5672        12764.820015    flow
10.196.42.128:35961 -&gt; 10.196.42.21:5672        121008.937691   flow
10.196.42.180:54675 -&gt; 10.196.42.21:5672        611977.617202   flow
...done.
[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">pkonar at ajtrafp063</A> ~]$

Thanks
Peter Konar
________________________________________
From: Konar Peter (Nokia-LC/Chicago)
Sent: Thursday, February 07, 2013 5:00 PM
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject:  RabbitMQ blocking issue

We have an issue with our RabbitMQ clients not publishing to our RabbitMQ s=
erver. We see that the client hangs approx. every 2 hours and never recover=
s.

Versions:
Client: amqp-client-2.8.7.jar  , spring-amqp-1.1.1.RELEASE.jar
server: noarch/rabbitmq-server-2.8.7-1.noarch.rpm

On the client side we see that our application stops working. When we query=
 the port we see:
[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">pkonar at ajtrafp067</A> ~]$ netstat -an | grep 5672
tcp        0 194017 ::ffff:10.196.42.93:47657   ::ffff:10.196.42.43:5672   =
 FIN_WAIT1
tcp        0   2722 ::ffff:10.196.42.93:46361   ::ffff:10.196.42.43:5672   =
 ESTABLISHED

The FIN_WAIT1 is from the application restart and never recovers the port. =
Meaning never releases the port from FIN_WAIT1. After restarting the applic=
ation we see a new connection created the works, but we would prefer not re=
starting the app every 2 hours.

Server side
 [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">pkonar at ajtrafp017</A> ~]$ sudo rabbitmqctl list_connections name last_blocked=
_age last_blocked_by Listing connections ...
10.196.42.90:35923 -&gt; 10.196.42.43:5672 497412.591327   flow
10.196.42.93:46361 -&gt; 10.196.42.43:5672 912.850887      flow
10.196.42.92:45603 -&gt; 10.196.42.43:5672 912.554772      flow
10.196.42.94:46145 -&gt; 10.196.42.43:5672 319388.635685   flow
10.196.42.93:47657 -&gt; 10.196.42.43:5672 83830.533463    flow
10.196.42.94:44100 -&gt; 10.196.42.43:5672 10568.909981    flow
10.196.42.94:33175 -&gt; 10.196.42.43:5672 166511.852811   flow
10.196.42.91:56200 -&gt; 10.196.42.43:5672 912.849807      flow
10.196.42.90:40466 -&gt; 10.196.42.43:5672 126071.593769   flow
10.196.42.90:56644 -&gt; 10.196.42.43:5672 912.628977      flow
...done.


Looking for any help possible.

Thanks
Peter Konar

The information contained in this communication may be CONFIDENTIAL and is =
intended only for the use of the recipient(s) named above.  If you are not =
the intended recipient, you are hereby notified that any dissemination, dis=
tribution, or copying of this communication, or any of its contents, is str=
ictly prohibited.  If you have received this communication in error, please=
 notify the sender and delete/destroy the original message and any copy of =
it from your computer or paper files.
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020773.html">No subject
</A></li>
	<LI>Next message: <A HREF="020915.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25414">[ date ]</a>
              <a href="thread.html#25414">[ thread ]</a>
              <a href="subject.html#25414">[ subject ]</a>
              <a href="author.html#25414">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
