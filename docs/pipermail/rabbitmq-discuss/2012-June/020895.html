<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss]  Causes of server disconnects?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%20Causes%20of%20server%20disconnects%3F&In-Reply-To=%3CCABzX%2BqxCnppmi-se01orOMyJF_Dr-o9OnRaQm49jFa%2B5j4gGxA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020893.html">
   <LINK REL="Next"  HREF="020908.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss]  Causes of server disconnects?</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%20Causes%20of%20server%20disconnects%3F&In-Reply-To=%3CCABzX%2BqxCnppmi-se01orOMyJF_Dr-o9OnRaQm49jFa%2B5j4gGxA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss]  Causes of server disconnects?">majek04 at gmail.com
       </A><BR>
    <I>Fri Jun 29 00:49:39 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020893.html">[rabbitmq-discuss] STOMP plug-in, HA queues,	and consumer cancelations
</A></li>
        <LI>Next message: <A HREF="020908.html">[rabbitmq-discuss] RabbitMQ Subscriber Timeout When Waiting for	Delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20895">[ date ]</a>
              <a href="thread.html#20895">[ thread ]</a>
              <a href="subject.html#20895">[ subject ]</a>
              <a href="author.html#20895">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jun 28, 2012 at 12:20 PM, Darren &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">nospam5874 at yahoo.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> I am getting a rather strange issue where the server disconnects, but the
</I>&gt;<i> client still thinks it is connected?
</I>&gt;<i>
</I>&gt;<i> In the server log I get:
</I>&gt;<i> =WARNING REPORT==== 28-Jun-2012::03:00:02 ===
</I>&gt;<i> exception on TCP connection &lt;0.20778.1021&gt; from 10.10.1.225:58539
</I>&gt;<i> connection_closed_abruptly
</I>
Hi,

The server tells you: the connection was closed abruptly.

&gt;<i> While looking at TCP/IP view on the client shows that it still thinks the
</I>&gt;<i> connection is established?
</I>
The client closed the tcp/ip connection abruptly.

&gt;<i> Obviosuly when this happens, the client no longer receives messages from
</I>&gt;<i> rabbit.
</I>
Yes.

&gt;<i> I am wondering under what circumstances does the server determine that the
</I>&gt;<i> connection is closed? Presumably there was no FIN packet sent from the
</I>&gt;<i> client to the server?
</I>
Presumably. Use tcpdump or wireshark to figure out who was responsible
for sending the first FIN packet. I bet it was the client, who probably closed
the connection abruptly.

&gt;<i> Also, since the client did not detect that the session was closed, I am
</I>&gt;<i> wondering how to deal with the situation from the client?
</I>
The client should have detected that the connection was broken. If it didn't,
it looks like your peers can't agree wheter the connecition is open or closed.
Please do consider enabling heartbeats.

Marek
</PRE>
























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020893.html">[rabbitmq-discuss] STOMP plug-in, HA queues,	and consumer cancelations
</A></li>
	<LI>Next message: <A HREF="020908.html">[rabbitmq-discuss] RabbitMQ Subscriber Timeout When Waiting for	Delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20895">[ date ]</a>
              <a href="thread.html#20895">[ thread ]</a>
              <a href="subject.html#20895">[ subject ]</a>
              <a href="author.html#20895">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
