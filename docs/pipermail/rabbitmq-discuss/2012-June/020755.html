<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clustered startup with multiple queues and	multiple masters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustered%20startup%20with%20multiple%20queues%20and%0A%09multiple%20masters&In-Reply-To=%3C87mx3wr1q6.wl%25francesco%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020753.html">
   <LINK REL="Next"  HREF="020756.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clustered startup with multiple queues and	multiple masters</H1>
    <B>Francesco Mazzoli</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustered%20startup%20with%20multiple%20queues%20and%0A%09multiple%20masters&In-Reply-To=%3C87mx3wr1q6.wl%25francesco%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Clustered startup with multiple queues and	multiple masters">francesco at rabbitmq.com
       </A><BR>
    <I>Thu Jun 21 18:53:05 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020753.html">[rabbitmq-discuss] Clustered startup with multiple queues and multiple masters
</A></li>
        <LI>Next message: <A HREF="020756.html">[rabbitmq-discuss] Clustered startup with multiple queues and multiple masters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20755">[ date ]</a>
              <a href="thread.html#20755">[ thread ]</a>
              <a href="subject.html#20755">[ subject ]</a>
              <a href="author.html#20755">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matt,
At Thu, 21 Jun 2012 09:05:05 -0700,
Matt Pietrek wrote:
&gt;<i> Thanks Francesco.
</I>&gt;<i>
</I>&gt;<i> Your script looks reasonably close to what I'm doing, except for a
</I>&gt;<i> couple of key differences:
</I>&gt;<i>
</I>&gt;<i> All of your nodes are running on the same host. In my setup, each
</I>&gt;<i> node is in its own VM. I imagine this introduces additional
</I>&gt;<i> networking into the communication between nodes.
</I>
Yeah. I'm on my laptop these days, so if anything I'll a VM setup on
Monday.

&gt;<i> When you start Rabbit instances, you're doing it sequentially. In my
</I>&gt;<i> setup I start up in parallel on all three VMs via Capistrano. If you
</I>&gt;<i> can't go the multi-VM route, you may be able to somewhat simulate
</I>&gt;<i> this by starting the instances with an '&amp;' at the end.
</I>
Well, I'm forking them one after the other and then waiting for them
to actually start, so is not that sequential. I doubt that matters.

&gt;<i> I use &quot;killall -9 beam.smp&quot;, rather than just &quot;killall beam.smp&quot;
</I>
Right. This should not make much of a difference either. I tried with
-9 and things were OK.

As a curiosity, how are you waiting to be sure that the messages are
persisted? I am using publisher confirms, see
<A HREF="http://www.rabbitmq.com/extensions.html">http://www.rabbitmq.com/extensions.html</A> - that's why puka and not pika
- but you need to make sure of that, otherwise you can get message
loss or other strange behaviours.

If you are trying to simulate what happens when the system crashes
while sending messages, then it's different and of course you can't
rely on any of the messages in being there when you restart them - but
that does not justify the behaviour you're seeing anyway.

Francesco.
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020753.html">[rabbitmq-discuss] Clustered startup with multiple queues and multiple masters
</A></li>
	<LI>Next message: <A HREF="020756.html">[rabbitmq-discuss] Clustered startup with multiple queues and multiple masters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20755">[ date ]</a>
              <a href="thread.html#20755">[ thread ]</a>
              <a href="subject.html#20755">[ subject ]</a>
              <a href="author.html#20755">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
