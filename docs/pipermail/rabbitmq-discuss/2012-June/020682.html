<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Newbie Q: Bugs in 2.8.2-1?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Newbie%20Q%3A%20Bugs%20in%202.8.2-1%3F&In-Reply-To=%3C4FDF9A83.7080507%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020681.html">
   <LINK REL="Next"  HREF="020704.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Newbie Q: Bugs in 2.8.2-1?</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Newbie%20Q%3A%20Bugs%20in%202.8.2-1%3F&In-Reply-To=%3C4FDF9A83.7080507%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Newbie Q: Bugs in 2.8.2-1?">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Jun 18 22:15:47 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020681.html">[rabbitmq-discuss] Newbie Q: Bugs in 2.8.2-1?
</A></li>
        <LI>Next message: <A HREF="020704.html">[rabbitmq-discuss] Newbie Q: Bugs in 2.8.2-1?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20682">[ date ]</a>
              <a href="thread.html#20682">[ thread ]</a>
              <a href="subject.html#20682">[ subject ]</a>
              <a href="author.html#20682">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Philip,

On 18/06/12 21:52, Philip K. Warren wrote:
&gt;<i> We saw it on a pretty powerful system - 128 GiB of memory, but only
</I>&gt;<i> around 120 GiB of free disk space. Others have seen in on smaller
</I>&gt;<i> test VMs which have 8-16 GiB of memory but had a small disk.
</I>
Is the latter due to some default settings or do people intentionally 
configure the VMs that way?

&gt;<i> Is it possible to change the disk_free_limit to be based on the size
</I>&gt;<i> of the queued messages in RabbitMQ instead of the total amount of
</I>&gt;<i> memory on the system?
</I>
We have considered all kinds of alternatives, and are indeed still 
mulling over them given the problems people are having with the current 
arrangements.

We do need to leave quite some safety margin since we cannot monitor 
disk space continuously, only sample it, nor can we calculate precisely 
how much disk space we may need.

The worst case scenario we have been looking at is a vast volume of 
persistent messages suddenly getting dumped into rabbit. Memory-based 
flow control will kick in and stem the influx, but conceivably not until 
close to 100% of memory is taken up. This can all happen in a matter of 
seconds. And then rabbit has to write all these messages to disk; and 
it'd better have the space available to do so or things will go badly wrong.

Regards,

Matthias.
</PRE>






















































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020681.html">[rabbitmq-discuss] Newbie Q: Bugs in 2.8.2-1?
</A></li>
	<LI>Next message: <A HREF="020704.html">[rabbitmq-discuss] Newbie Q: Bugs in 2.8.2-1?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20682">[ date ]</a>
              <a href="thread.html#20682">[ thread ]</a>
              <a href="subject.html#20682">[ subject ]</a>
              <a href="author.html#20682">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
