<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Handling consumer cancellation notifications
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Handling%20consumer%20cancellation%20notifications&In-Reply-To=%3C1b8a85d7-7fad-4916-9ec3-aea3562058d4%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020844.html">
   <LINK REL="Next"  HREF="020836.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Handling consumer cancellation notifications</H1>
    <B>as4j1th</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Handling%20consumer%20cancellation%20notifications&In-Reply-To=%3C1b8a85d7-7fad-4916-9ec3-aea3562058d4%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Handling consumer cancellation notifications">as4j1th at gmail.com
       </A><BR>
    <I>Mon Jun 25 19:11:25 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020844.html">[rabbitmq-discuss] Remove All bindings for a queue - Or list bindings - .NET Client
</A></li>
        <LI>Next message: <A HREF="020836.html">[rabbitmq-discuss] Handling consumer cancellation notifications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20832">[ date ]</a>
              <a href="thread.html#20832">[ thread ]</a>
              <a href="subject.html#20832">[ subject ]</a>
              <a href="author.html#20832">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We have followed the instructions in <A HREF="http://www.rabbitmq.com/ha.html">http://www.rabbitmq.com/ha.html</A> to 
setup an active-active cluster with 3 nodes rabbit1, rabbit2 and rabbit3.
To create a mirrored queue, we are using x-ha-policy and to get consumer 
cancellation notifications we have put true for consumer_cancel_notify in 
clientProperties.
Now, we published messages to the queue with rabbit2 as master and had the 
consumer consume from  rabbit3. When rabbit2 is stopped, the consumer 
connected to rabbit3 is not getting a cancellation notification.

We are using rabbitmq 2.8.2-1 and our java consumer POC code is here - 
<A HREF="https://gist.github.com/2990146">https://gist.github.com/2990146</A>

Not sure what we are doing wrong. Any pointers would be highly appreciated. 

Has anyone attempted to handle cancel notifications with 
 <A HREF="https://github.com/videlalvaro/php-amqplib?">https://github.com/videlalvaro/php-amqplib?</A>


Thanks
as4j1th
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120625/c0daa57c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120625/c0daa57c/attachment.htm</A>&gt;
</PRE>


































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020844.html">[rabbitmq-discuss] Remove All bindings for a queue - Or list bindings - .NET Client
</A></li>
	<LI>Next message: <A HREF="020836.html">[rabbitmq-discuss] Handling consumer cancellation notifications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20832">[ date ]</a>
              <a href="thread.html#20832">[ thread ]</a>
              <a href="subject.html#20832">[ subject ]</a>
              <a href="author.html#20832">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
