<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Sequential processing for groups of messages with a multi-consumer setup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Sequential%20processing%20for%20groups%20of%20messages%0A%20with%20a%20multi-consumer%20setup&In-Reply-To=%3C7915fc7d-dd99-4f88-8dab-da46fd43eb16%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020835.html">
   <LINK REL="Next"  HREF="020869.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Sequential processing for groups of messages with a multi-consumer setup</H1>
    <B>Rader</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Sequential%20processing%20for%20groups%20of%20messages%0A%20with%20a%20multi-consumer%20setup&In-Reply-To=%3C7915fc7d-dd99-4f88-8dab-da46fd43eb16%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Sequential processing for groups of messages with a multi-consumer setup">rader.net at gmail.com
       </A><BR>
    <I>Wed Jun 27 10:49:22 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020835.html">[rabbitmq-discuss] Sequential processing for groups of messages with a multi-consumer setup
</A></li>
        <LI>Next message: <A HREF="020869.html">[rabbitmq-discuss] Sequential processing for groups of messages with a multi-consumer setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20856">[ date ]</a>
              <a href="thread.html#20856">[ thread ]</a>
              <a href="subject.html#20856">[ subject ]</a>
              <a href="author.html#20856">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Ed,

Here is what i am thinking: 

for option 1, have you tried the RPC style?  take a look at this  
<A HREF="http://www.rabbitmq.com/tutorials/tutorial-six-java.html">http://www.rabbitmq.com/tutorials/tutorial-six-java.html</A> 

for option 2, i think you may need a smart dispatcher between the queue and 
all those consumers. it will consume messages from the queue and then 
dispatch every single message by ticket number to different consumers. The 
dispatcher need to monitor the status of each consumer, like is it busy or 
which ticket is it processing?

On Tuesday, June 26, 2012 10:30:34 AM UTC+8, Ed Levin wrote:
&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I am considering RabbitMQ for a project with the following requirement and 
</I>&gt;<i> wanted to get some feedback since I am relatively new to message queuing:
</I>&gt;<i>
</I>&gt;<i> To start, I have a queue with a number of consumers assigned for 
</I>&gt;<i> concurrent processing. The messages published to a queue will represent 
</I>&gt;<i> tickets coming from a ticketing system and some may be associated with the 
</I>&gt;<i> same ticket (e.g. same ticket number on different messages in the queue). 
</I>&gt;<i> The problem is that I can only consume (work on) a single message belonging 
</I>&gt;<i> to a given ticket at a time to avoid external concurrency issues. In other 
</I>&gt;<i> words, if consumer A is working on a message representing ticket 1 and, at 
</I>&gt;<i> the same time, consumer B is available and is assigned the next message 
</I>&gt;<i> from the queue that also represents ticket 1, we have a problem.
</I>&gt;<i>
</I>&gt;<i> So far I am considering two possible options:
</I>&gt;<i>
</I>&gt;<i> 1. Dynamically create a temp queue per new unique ticket that arrives, and 
</I>&gt;<i> in effect sort messages into their own queues by ticket number. The problem 
</I>&gt;<i> with this (if even possible) is how to manage consumers for the temp 
</I>&gt;<i> queues. If I assign a single consumer to each queue, the system does not 
</I>&gt;<i> scale, if I assign a consumer to multiple queues I am back to the original 
</I>&gt;<i> problem.
</I>&gt;<i>
</I>&gt;<i> 2.Keep a single queue with multiple consumers assigned and implement a 
</I>&gt;<i> cache to track ticket numbers currently being processed. When a consumer 
</I>&gt;<i> receives a new message, it first checks the cache to see if a given ticket 
</I>&gt;<i> is already being processed. If so, re-queue the message, otherwise add to 
</I>&gt;<i> cache.
</I>&gt;<i>
</I>&gt;<i> I am leaning towards option 2 but appreciate any feedback and wisdom from 
</I>&gt;<i> the community (perhaps I am missing something obvious).
</I>&gt;<i>
</I>&gt;<i> Thank you,
</I>&gt;<i>
</I>&gt;<i> -Ed
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120627/39ce95e6/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120627/39ce95e6/attachment.htm</A>&gt;
</PRE>






















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020835.html">[rabbitmq-discuss] Sequential processing for groups of messages with a multi-consumer setup
</A></li>
	<LI>Next message: <A HREF="020869.html">[rabbitmq-discuss] Sequential processing for groups of messages with a multi-consumer setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20856">[ date ]</a>
              <a href="thread.html#20856">[ thread ]</a>
              <a href="subject.html#20856">[ subject ]</a>
              <a href="author.html#20856">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
