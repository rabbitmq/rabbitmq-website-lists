<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consumer&In-Reply-To=%3Cdf13db4b-576a-4248-9477-5c6495ecbe45%40ucimail1.uci.cu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020931.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Consumer</H1>
    <B>Yurisleidy Hern&#225;ndez Moya</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consumer&In-Reply-To=%3Cdf13db4b-576a-4248-9477-5c6495ecbe45%40ucimail1.uci.cu%3E"
       TITLE="[rabbitmq-discuss] Consumer">ymoya at uci.cu
       </A><BR>
    <I>Sat Jun 30 22:16:27 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020931.html">[rabbitmq-discuss] RabbitMQ Subscriber Timeout When Waiting for	Delivery
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20933">[ date ]</a>
              <a href="thread.html#20933">[ thread ]</a>
              <a href="subject.html#20933">[ subject ]</a>
              <a href="author.html#20933">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In the Producer I need to know if there are Consumers connected to the queue or not, to know if the messages could be processed in a medium or long term. 

I use the java client. To solve my problem I thought in: 

1- to use the method getConsumerCount of the queue. 

AMQP.Queue.DeclareOk my_queue = queueDeclare(&quot;name_queue&quot;, false, false, false, null); 
int cont = my_queue.getConsumerCount(); 

but, the consumer is disconnected of the queue when it is processing the message. For this reason, the Producer fails to recognize that there are Consumers for to work when really yes exist. 

2- Declaring a queue as passive in the Producer and autodelete in the Consumer. Thus, the queue only exists when the Consumer is connected and the queue is destroyed when the Consumer dies. 

In el Consumer: channel.queueDeclare(&quot;nam_queue&quot;, false, false, true, null); 

but the queue is also destroyed when the Consumer reads every message. 

Any idea for to know in the Producer if there are Consumers connected? 

Thanks in advance. 
Yuri. 


10mo. ANIVERSARIO DE LA CREACION DE LA UNIVERSIDAD DE LAS CIENCIAS INFORMATICAS...
CONECTADOS AL FUTURO, CONECTADOS A LA REVOLUCION

<A HREF="http://www.uci.cu">http://www.uci.cu</A>
<A HREF="http://www.facebook.com/universidad.uci">http://www.facebook.com/universidad.uci</A>
<A HREF="http://www.flickr.com/photos/universidad_uci">http://www.flickr.com/photos/universidad_uci</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120630/66df9f85/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120630/66df9f85/attachment.htm</A>&gt;
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020931.html">[rabbitmq-discuss] RabbitMQ Subscriber Timeout When Waiting for	Delivery
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20933">[ date ]</a>
              <a href="thread.html#20933">[ thread ]</a>
              <a href="subject.html#20933">[ subject ]</a>
              <a href="author.html#20933">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
