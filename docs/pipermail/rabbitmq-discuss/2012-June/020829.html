<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Sequential processing for groups of messages with a multi-consumer setup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Sequential%20processing%20for%20groups%20of%20messages%0A%20with%20a%20multi-consumer%20setup&In-Reply-To=%3C017ea8dc-764f-4bb7-abee-8a824d925d1a%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020836.html">
   <LINK REL="Next"  HREF="020835.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Sequential processing for groups of messages with a multi-consumer setup</H1>
    <B>Ed Levin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Sequential%20processing%20for%20groups%20of%20messages%0A%20with%20a%20multi-consumer%20setup&In-Reply-To=%3C017ea8dc-764f-4bb7-abee-8a824d925d1a%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Sequential processing for groups of messages with a multi-consumer setup">ed at cloudservicesdepot.com
       </A><BR>
    <I>Tue Jun 26 03:30:34 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020836.html">[rabbitmq-discuss] Handling consumer cancellation notifications
</A></li>
        <LI>Next message: <A HREF="020835.html">[rabbitmq-discuss] Sequential processing for groups of messages with a multi-consumer setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20829">[ date ]</a>
              <a href="thread.html#20829">[ thread ]</a>
              <a href="subject.html#20829">[ subject ]</a>
              <a href="author.html#20829">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am considering RabbitMQ for a project with the following requirement and 
wanted to get some feedback since I am relatively new to message queuing:

To start, I have a queue with a number of consumers assigned for concurrent 
processing. The messages published to a queue will represent tickets coming 
from a ticketing system and some may be associated with the same ticket 
(e.g. same ticket number on different messages in the queue). The problem 
is that I can only consume (work on) a single message belonging to a given 
ticket at a time to avoid external concurrency issues. In other words, if 
consumer A is working on a message representing ticket 1 and, at the same 
time, consumer B is available and is assigned the next message from the 
queue that also represents ticket 1, we have a problem.

So far I am considering two possible options:

1. Dynamically create a temp queue per new unique ticket that arrives, and 
in effect sort messages into their own queues by ticket number. The problem 
with this (if even possible) is how to manage consumers for the temp 
queues. If I assign a single consumer to each queue, the system does not 
scale, if I assign a consumer to multiple queues I am back to the original 
problem.

2.Keep a single queue with multiple consumers assigned and implement a 
cache to track ticket numbers currently being processed. When a consumer 
receives a new message, it first checks the cache to see if a given ticket 
is already being processed. If so, re-queue the message, otherwise add to 
cache.

I am leaning towards option 2 but appreciate any feedback and wisdom from 
the community (perhaps I am missing something obvious).

Thank you,

-Ed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120625/60d04659/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120625/60d04659/attachment.htm</A>&gt;
</PRE>






































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020836.html">[rabbitmq-discuss] Handling consumer cancellation notifications
</A></li>
	<LI>Next message: <A HREF="020835.html">[rabbitmq-discuss] Sequential processing for groups of messages with a multi-consumer setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20829">[ date ]</a>
              <a href="thread.html#20829">[ thread ]</a>
              <a href="subject.html#20829">[ subject ]</a>
              <a href="author.html#20829">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
