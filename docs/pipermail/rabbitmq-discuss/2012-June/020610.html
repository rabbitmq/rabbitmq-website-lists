<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Hostname issue. Possible to rename the database?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Hostname%20issue.%20Possible%20to%20rename%20the%20database%3F&In-Reply-To=%3C4FD93413.2060502%40numenet.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020614.html">
   <LINK REL="Next"  HREF="020613.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Hostname issue. Possible to rename the database?</H1>
    <B>Liam Kirsher</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Hostname%20issue.%20Possible%20to%20rename%20the%20database%3F&In-Reply-To=%3C4FD93413.2060502%40numenet.com%3E"
       TITLE="[rabbitmq-discuss] Hostname issue. Possible to rename the database?">liamk at numenet.com
       </A><BR>
    <I>Thu Jun 14 01:45:07 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020614.html">[rabbitmq-discuss] RabbitMQ log rotation problem with large log file
</A></li>
        <LI>Next message: <A HREF="020613.html">[rabbitmq-discuss] Hostname issue. Possible to rename the database?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20610">[ date ]</a>
              <a href="thread.html#20610">[ thread ]</a>
              <a href="subject.html#20610">[ subject ]</a>
              <a href="author.html#20610">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Unfortunately, I am just now seeing this --

&gt;<i>
</I>&gt;<i>       Issues with hostname
</I>&gt;<i>
</I>&gt;<i> RabbitMQ names the database directory using the current hostname of 
</I>&gt;<i> the system. If the hostname changes, a new empty database is created. 
</I>&gt;<i> To avoid data loss it's crucial to set up a fixed and resolvable 
</I>&gt;<i> hostname. For example:
</I>&gt;<i>
</I>&gt;<i> sudo -s # become root
</I>&gt;<i> echo &quot;rabbit&quot;&gt;  /etc/hostname
</I>&gt;<i> echo &quot;127.0.0.1 rabbit&quot;&gt;&gt;  /etc/hosts
</I>&gt;<i> hostname -F /etc/hostname
</I>&gt;<i> Whenever the hostname changes you should restart RabbitMQ:
</I>&gt;<i> $ /etc/init.d/rabbitmq-server restart
</I>
An EC2 server running RabbitMQ (2.2.0)  was rebooted and received a new 
hostname, and the new database is empty.

I have succeeded in getting access to the database by setting the 
RABBITMQ_NODENAME var to the old hostname.

Is there some way of renaming it though, so I can retain the old 
database and its configuration, while still implementing the hosts 
changes described above?
I tried renaming the directories, but that didn't work.

Or, perhaps, copy it to the new more persistent hostname?  I'd rather 
not have to go through the setup again.

Thanks in advance,
Liam

-- 
Liam Kirsher
PGP: <A HREF="http://liam.numenet.com/pgp/">http://liam.numenet.com/pgp/</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120613/6ed71df6/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120613/6ed71df6/attachment.htm</A>&gt;
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020614.html">[rabbitmq-discuss] RabbitMQ log rotation problem with large log file
</A></li>
	<LI>Next message: <A HREF="020613.html">[rabbitmq-discuss] Hostname issue. Possible to rename the database?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20610">[ date ]</a>
              <a href="thread.html#20610">[ thread ]</a>
              <a href="subject.html#20610">[ subject ]</a>
              <a href="author.html#20610">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
