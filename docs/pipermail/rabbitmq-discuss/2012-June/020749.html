<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clustered startup with multiple queues and	multiple masters
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustered%20startup%20with%20multiple%20queues%20and%0A%09multiple%20masters&In-Reply-To=%3C87pq8srdlr.wl%25francesco%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020715.html">
   <LINK REL="Next"  HREF="020750.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clustered startup with multiple queues and	multiple masters</H1>
    <B>Francesco Mazzoli</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustered%20startup%20with%20multiple%20queues%20and%0A%09multiple%20masters&In-Reply-To=%3C87pq8srdlr.wl%25francesco%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Clustered startup with multiple queues and	multiple masters">francesco at rabbitmq.com
       </A><BR>
    <I>Thu Jun 21 14:36:32 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020715.html">[rabbitmq-discuss] Clustered startup with multiple queues and multiple masters
</A></li>
        <LI>Next message: <A HREF="020750.html">[rabbitmq-discuss] Clustered startup with multiple queues and multiple masters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20749">[ date ]</a>
              <a href="thread.html#20749">[ thread ]</a>
              <a href="subject.html#20749">[ subject ]</a>
              <a href="author.html#20749">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matt,
At Tue, 19 Jun 2012 16:33:05 -0700,
Matt Pietrek wrote:
&gt;<i> Francesco,
</I>&gt;<i>
</I>&gt;<i> Thanks again for the valuable insight from your reply. I'm down to
</I>&gt;<i> one issue at this point.
</I>&gt;<i>
</I>&gt;<i> Given what you said earlier about it being OK to start the brokers
</I>&gt;<i> in any order, I wrote a simple &quot;catastrophic stress&quot; test. The good
</I>&gt;<i> news is that RabbitMQ does what's expected. The bad news: Only most
</I>&gt;<i> of the time, i.e. about 90%.
</I>
First of all, this is more of an erlang question than a RabbitMQ one -
not that this changes anything, but you could ask about it in
erlang-questions as well. RabbitMQ clusters are mnesia clusters, so
they offer the same guarantees.

I can't think of a motivation of why this would be happening, but I'm
no expert with mnesia. I've attached a script that reproduces your
test, can you verify that that's more or less what you're doing? I'm
using the puka python client to publish the messages. I've run it 50
times but I wasn't able to reproduce your problem.

In the case that my test is indeed accurate I think that the best
thing is to ask about someone with more mnesia knowledge - I have CCed
possible candidates :).

Francesco.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: mattpierek.tar.gz
Type: application/octet-stream
Size: 1125 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120621/f108f941/attachment.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120621/f108f941/attachment.obj</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020715.html">[rabbitmq-discuss] Clustered startup with multiple queues and multiple masters
</A></li>
	<LI>Next message: <A HREF="020750.html">[rabbitmq-discuss] Clustered startup with multiple queues and multiple masters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20749">[ date ]</a>
              <a href="thread.html#20749">[ thread ]</a>
              <a href="subject.html#20749">[ subject ]</a>
              <a href="author.html#20749">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
