<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Basic.Reject(requeue=true) is no longer working after updating to 2.8.2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Basic.Reject%28requeue%3Dtrue%29%20is%20no%20longer%20working%0A%20after%20updating%20to%202.8.2&In-Reply-To=%3Cbe863d24-11d1-45ec-a13d-5fdd1eedfeb5%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020740.html">
   <LINK REL="Next"  HREF="020722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Basic.Reject(requeue=true) is no longer working after updating to 2.8.2</H1>
    <B>Michael Benford</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Basic.Reject%28requeue%3Dtrue%29%20is%20no%20longer%20working%0A%20after%20updating%20to%202.8.2&In-Reply-To=%3Cbe863d24-11d1-45ec-a13d-5fdd1eedfeb5%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Basic.Reject(requeue=true) is no longer working after updating to 2.8.2">michael at michaelbenford.net
       </A><BR>
    <I>Tue Jun 19 22:15:40 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020740.html">[rabbitmq-discuss] RabbitMQ connections blocked and not receiving simple messages
</A></li>
        <LI>Next message: <A HREF="020722.html">[rabbitmq-discuss] Basic.Reject(requeue=true) is no longer working after updating to 2.8.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20714">[ date ]</a>
              <a href="thread.html#20714">[ thread ]</a>
              <a href="subject.html#20714">[ subject ]</a>
              <a href="author.html#20714">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.

I've upgraded my queue server to RabbitMQ 2.8.2, and 
Basic.Reject(requeue=true) is no longer working for me. When I reject a 
message using it, the message isn't being requeued (i.e, going to the back 
of the queue). In fact the message remains unacknowledged, and if I try to 
get the next message from the queue, I get the very same message I had just 
rejected, and my consumer won't process any new messages.

After doing some research, I've found this:

&quot;Message ordering guarantees

(...) Messages can be returned to the queue using AMQP methods that feature 
a requeue parameter (basic.recover, basic.reject and basic.nack), or due to 
a channel closing while holding unacknowledged messages. Any of these 
scenarios caused messages to be requeued at the back of the queue for 
RabbitMQ releases earlier than 2.7.0. From RabbitMQ release 2.7.0, messages 
are always held in the queue in publication order, even in the presence of 
requeueing or channel closure.&quot;

Given that, I can no longer rely on Basic.Reject() to send messages to the 
back of the queue? To do so, must I manually publish the message to the 
queue?

Thanks in advance.

Michael
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120619/625738c4/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120619/625738c4/attachment.htm</A>&gt;
</PRE>





































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020740.html">[rabbitmq-discuss] RabbitMQ connections blocked and not receiving simple messages
</A></li>
	<LI>Next message: <A HREF="020722.html">[rabbitmq-discuss] Basic.Reject(requeue=true) is no longer working after updating to 2.8.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20714">[ date ]</a>
              <a href="thread.html#20714">[ thread ]</a>
              <a href="subject.html#20714">[ subject ]</a>
              <a href="author.html#20714">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
