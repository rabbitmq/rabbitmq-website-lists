<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq fails on start
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20fails%20on%20start&In-Reply-To=%3C4E0B5A33.3080109%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013529.html">
   <LINK REL="Next"  HREF="013538.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq fails on start</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20fails%20on%20start&In-Reply-To=%3C4E0B5A33.3080109%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq fails on start">simon at rabbitmq.com
       </A><BR>
    <I>Wed Jun 29 18:00:35 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013529.html">[rabbitmq-discuss] rabbitmq fails on start
</A></li>
        <LI>Next message: <A HREF="013538.html">[rabbitmq-discuss] rabbitmq fails on start
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13536">[ date ]</a>
              <a href="thread.html#13536">[ thread ]</a>
              <a href="subject.html#13536">[ subject ]</a>
              <a href="author.html#13536">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 29/06/11 16:53, Jeff Hinrichs wrote:
&gt;<i> ...BOOT ERROR: FAILED
</I>&gt;<i> Reason: badarg
</I>&gt;<i> Stacktrace: [{inet6_tcp,listen,2},
</I>&gt;<i>               {rabbit_networking,ipv6_status,1},
</I>
So RabbitMQ is failing while trying to figure out the IPv6 status of 
your machine (basically, does it need to explicitly open an IPv4 socket 
as well as IPv6 or is IPv4 considered part of IPv6).

Assuming you're not using IPv6, the simplest way to get over this would 
be to disable it. A complete rabbitmq.config file that would do so looks 
like:

   [
     {rabbit, [{tcp_listeners, [{&quot;0.0.0.0&quot;, 5672}]}]}
   ].

You would also need to change ssl_listeners too if you're using SSL.

However, this really *should* work. Could your machine be in a weird 
state with respect to IPv6 (or have changed recently)? Have you 
configured anything about Erlang socket options? (e.g. 
inet_default_listen_options)?

What does:

erl -noinput  -eval 'io:format(&quot;~p~n&quot;, 
[inet:listen_options([{port,10000}, inet6, {ip, {0,0,0,0,0,0,0,0}}], 
inet6)]), halt().'

(all one line) say?


&gt;<i> versions...
</I>&gt;<i> rabbitmq-2.3.1_2
</I>&gt;<i> erlang-lite-r14b03,1
</I>&gt;<i> FreeBSD 8.1
</I>
I was initially rather suspicious of erlang-lite, but looking at the 
port file it seems to just exclude Java, X11 and ODBC, which should be fine.

Cheers, Simon
-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013529.html">[rabbitmq-discuss] rabbitmq fails on start
</A></li>
	<LI>Next message: <A HREF="013538.html">[rabbitmq-discuss] rabbitmq fails on start
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13536">[ date ]</a>
              <a href="thread.html#13536">[ thread ]</a>
              <a href="subject.html#13536">[ subject ]</a>
              <a href="author.html#13536">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
