<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Database Corruption Possibilities
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Database%20Corruption%20Possibilities&In-Reply-To=%3CE90DA8CBFB449146A7A73EFDF4CAD61306807F5875%40plex05.fastcrop.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013113.html">
   <LINK REL="Next"  HREF="013118.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Database Corruption Possibilities</H1>
    <B>Ozan Seymen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Database%20Corruption%20Possibilities&In-Reply-To=%3CE90DA8CBFB449146A7A73EFDF4CAD61306807F5875%40plex05.fastcrop.local%3E"
       TITLE="[rabbitmq-discuss] Database Corruption Possibilities">Ozan.Seymen at tdpg.com
       </A><BR>
    <I>Fri Jun  3 12:21:07 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013113.html">[rabbitmq-discuss] 2 services on one machine
</A></li>
        <LI>Next message: <A HREF="013118.html">[rabbitmq-discuss] Database Corruption Possibilities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13116">[ date ]</a>
              <a href="thread.html#13116">[ thread ]</a>
              <a href="subject.html#13116">[ subject ]</a>
              <a href="author.html#13116">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

Can someone please explain the scenarios where we might have Rabbit message storage (is it mnesia?) corrupted in a way that it is not recoverable?

In the solution I am working on, I simply cannot afford to lose any messages. In order to secure this, I will:


*         Rely on publisher confirms. This should ensure that broker will always confirm whether it assumed responsibility and persisted the message.

*         Implement durable queues/exchanges.

*         Ack enabled in consumers to prevent losing messages if consumer dies halfway. I will solve the ordering problem on the consumer side.

Even though all of these above prevent message loss in normal conditions, none of them covers the case where data gets corrupted in the broker. There is a window (albeit small) that things might go wrong: broker assumes responsibility (message is in the disk) and before message is sent to the consumer, broker experiences problems which corrupts the storage. If I can't bring the broker up with all data previously persisted, I've lost messages - producer forgot about the message as broker accepts responsibility and consumers have no idea about the message as it hasn't been delivered to it.

Am I a total paranoid that is beyond help? Even so, I would really appreciate any info you guys can share.

Cheers,
oseymen





________________________________
This e-mail and any attached files are intended for the named addressee only. It contains information which may be confidential and legally privileged and also protected by copyright. Unless you are the named addressee (or authorised to receive for the addressee) you may not copy or use it or disclose it to anyone else. If you received it in error please notify the sender immediately and then delete it from your system.

Please be advised that the views and opinions expressed in this e-mail may not reflect the views and opinions of The Digital Property Group Limited or any of its subsidiary companies.

We make every effort to keep our network free from viruses. However, you do need to check this e-mail and any attachments to it for viruses as we can take no responsibility for any computer virus which may be transferred by way of this e-mail. We reserve the right to monitor all e-mail communications.

The Digital Property Group Limited is a Daily Mail and General Trust plc company.
Registered Office: Northcliffe House, 2 Derry Street, London, W8 5TT.
Registered in England &amp; Wales No: 02290527 VAT no. 243571174

______________________________________________________________________
This email has been scanned by the MessageLabs Email Security System.
For more information please visit <A HREF="http://www.messagelabs.com/email">http://www.messagelabs.com/email</A> 
______________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110603/14a02c64/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110603/14a02c64/attachment.htm</A>&gt;
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013113.html">[rabbitmq-discuss] 2 services on one machine
</A></li>
	<LI>Next message: <A HREF="013118.html">[rabbitmq-discuss] Database Corruption Possibilities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13116">[ date ]</a>
              <a href="thread.html#13116">[ thread ]</a>
              <a href="subject.html#13116">[ subject ]</a>
              <a href="author.html#13116">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
