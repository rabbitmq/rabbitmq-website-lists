<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] accessing rabbitmq with json-rpc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20accessing%20rabbitmq%20with%20json-rpc&In-Reply-To=%3C20110618151104.4EA98E6721%40smtp.hushmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013347.html">
   <LINK REL="Next"  HREF="013348.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] accessing rabbitmq with json-rpc</H1>
    <B>hufflepuff at hush.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20accessing%20rabbitmq%20with%20json-rpc&In-Reply-To=%3C20110618151104.4EA98E6721%40smtp.hushmail.com%3E"
       TITLE="[rabbitmq-discuss] accessing rabbitmq with json-rpc">hufflepuff at hush.com
       </A><BR>
    <I>Sat Jun 18 16:11:04 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013347.html">[rabbitmq-discuss] RabbitMQ 2.5.0 cluster cannot start
</A></li>
        <LI>Next message: <A HREF="013348.html">[rabbitmq-discuss] accessing rabbitmq with json-rpc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13340">[ date ]</a>
              <a href="thread.html#13340">[ thread ]</a>
              <a href="subject.html#13340">[ subject ]</a>
              <a href="author.html#13340">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

I'm trying to access my rabbitmq server using the json-rpc plugin
on my local machine using a js client (specifically, jquery).

Specifically, if I followed the examples correctly, I'm trying to
POST my requests to <A HREF="http://localhost:55670/rpc/rabbitmq">http://localhost:55670/rpc/rabbitmq</A>

The problem I have is firefox blocking my request or rather turning
it into a preflight OPTIONS request, for which the corresponding
server should reply with some message allowing CORS (which rabbitmq
obviously doesn't do).

The examples in the plugin rabbitmq_jsonrpc_channel_examples don't
have this problem, since they sit on the same port, and are not
subject to CORS.

I got this problem only when I changed the contentType in my ajax
request to application/json. Apparently, this contentType requires
CORS, whereas the default application/x-www-form-urlencoded is
considered safe. Sending the data as application/x-www-form-
urlencoded doesn't get you any reply from rabbitmq.

I have no problem POSTing to rabbitmq with curl, so this is
obviously due to the limitation of the browser.

What am I doing wrong? Is it even possible to send a POST request
to rabbitmq without changing the example plugin and loading it
straight into rabbitmq? Otherwise (sorry if this sounds rude) what
is the point of json-rpc?

Maybe this is a really trivial question, but I've been looking for
an answer for the better part of the day.

Some references from what I've dug up:
<A HREF="https://groups.google.com/group/rabbitmq-">https://groups.google.com/group/rabbitmq-</A>
discuss/browse_thread/thread/5d3ad18f7c48b020?fwc=1

Thanks in advance
Jason
-----BEGIN PGP SIGNATURE-----
Charset: UTF8
Version: Hush 3.0
Note: This signature can be verified at <A HREF="https://www.hushtools.com/verify">https://www.hushtools.com/verify</A>

wsBcBAEBAgAGBQJN/MAIAAoJEL7Kanawu8RE5YoH/RkA1YbYeer2ozfwEzF28Eb+wh4F
MpeLBlUtF+C2PFR8xo4yrt28pmGSFpvCTjwG/h35HuO3AxifM8x8eJSlmtBaQ+ffwfRu
s2Qupje5RhhG6iOFF9Akr4ZnhTfpIwqfYSKdN9HNtF+vp4uG/VY+KUiic/f1MQnBICOn
rfA4E5v6yvadsHXJI3Q7NEQHgIYcF4R4mTfzgR5dqtg9OEMEZWSqqy3wgADjx6GtykWs
0+uHafWiJzpafJaTQtqP7SrBL0XHmTyutS+402GNKXwpG+JFX94DDawdsfuhIl+hS3pj
tM/uX595tA6BEF5pBkRUe9F0IdIYhOPdtnQ9er4jOxs=
=8wUa
-----END PGP SIGNATURE-----

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013347.html">[rabbitmq-discuss] RabbitMQ 2.5.0 cluster cannot start
</A></li>
	<LI>Next message: <A HREF="013348.html">[rabbitmq-discuss] accessing rabbitmq with json-rpc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13340">[ date ]</a>
              <a href="thread.html#13340">[ thread ]</a>
              <a href="subject.html#13340">[ subject ]</a>
              <a href="author.html#13340">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
