<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] publish/suscribe model with typed consumers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20publish/suscribe%20model%20with%20typed%20consumers&In-Reply-To=%3CBANLkTinp1OdHSZa4Mfjtx4%2BQ74iOPBA85g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013407.html">
   <LINK REL="Next"  HREF="013205.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] publish/suscribe model with typed consumers</H1>
    <B>David Young</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20publish/suscribe%20model%20with%20typed%20consumers&In-Reply-To=%3CBANLkTinp1OdHSZa4Mfjtx4%2BQ74iOPBA85g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] publish/suscribe model with typed consumers">d.young at cabinfeversoftware.com
       </A><BR>
    <I>Fri Jun 10 19:03:48 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013407.html">[rabbitmq-discuss] publish/suscribe model with typed consumers
</A></li>
        <LI>Next message: <A HREF="013205.html">[rabbitmq-discuss] message via stomp adapter crashes queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13212">[ date ]</a>
              <a href="thread.html#13212">[ thread ]</a>
              <a href="subject.html#13212">[ subject ]</a>
              <a href="author.html#13212">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>FWIW, my &quot;solution&quot; (pretty basic) to the same problem is to have one
exchange/queue combo per type of message (or job). IOW I use the same queue
for all subscribers to any exchange.

Each consumer (&quot;agent&quot; in me-speak) subscribes to the queues it knows how to
handle, assuming I want it to...I can set up workers anywhere, but some
tasks are best handled in certain places, due to network or hardware issues.

RabbitMQ (at least with v1.7.2...I dunno about others.) does a really neat
round-robin distribution of messages when multiple consumers subscribe to
the same queue. Workers &quot;ack&quot; each message only when they're finished doing
the work (yes, that can create network timeout issues), so there's
near-perfect load-balancing built in. Any time I need to pass more info than
I want to try to push through RabbitMQ, I store it in S3 and pass the
filename.

HTH, but actually I hope someone else has a better idea...

-David

On Fri, Jun 10, 2011 at 5:15 AM, PADIOU Pierre-Marie (MORPHO) &lt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">pierre-marie.padiou at morpho.com</A>&gt; wrote:

&gt;<i>  Hello,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I am currently struggling with the following use case:
</I>&gt;<i>
</I>&gt;<i> - I am using a publish/subscribe model
</I>&gt;<i>
</I>&gt;<i> - I&#8217;ve got many subscribers and I only want one of them to process a
</I>&gt;<i> publisher&#8217;s message
</I>&gt;<i>
</I>&gt;<i> - requests can be of many types (say A to Z), and each consumer knows how
</I>&gt;<i> to deal with only a subset of them
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> For example :
</I>&gt;<i>
</I>&gt;<i> - consumer 1 can process requests A to M
</I>&gt;<i>
</I>&gt;<i> - consumer 2 can process requests N to Z
</I>&gt;<i>
</I>&gt;<i> - consumer 3 can process requests F to Q
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> There is actually far more types than that (say a thousand). For now, the
</I>&gt;<i> only solution I see would be to create as many queues as requests types
</I>&gt;<i> (queueA, queueB, etc), and make consumer listen to the appropriate queues.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thing is:
</I>&gt;<i>
</I>&gt;<i> - this implies that consumers create as many threads as queues there are
</I>&gt;<i> listening from (more than a hundred in my case), which I would like to
</I>&gt;<i> avoid.
</I>&gt;<i>
</I>&gt;<i> - or I could make a single thread of a consumer randomly and sequentially
</I>&gt;<i> dequeue messages from all queues assigned to it?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Is there a better way to handle this?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks in advance
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Pierre-Marie
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> #
</I>&gt;<i> &quot; Ce courriel et les documents qui lui sont joints peuvent contenir des informations confidentielles ou ayant un caract&#232;re priv&#233;. S'ils ne vous sont pas destin&#233;s, nous vous signalons qu'il est strictement interdit de les divulguer, de les reproduire ou d'en utiliser de quelque mani&#232;re que ce soit le contenu. Si ce message vous a &#233;t&#233; transmis par erreur, merci d'en informer l'exp&#233;diteur et de supprimer imm&#233;diatement de votre syst&#232;me informatique ce courriel ainsi que tous les documents qui y sont attach&#233;s.&quot;
</I>&gt;<i> ******
</I>&gt;<i> &quot; This e-mail and any attached documents may contain confidential or proprietary information. If you are not the intended recipient, you are notified that any dissemination, copying of this e-mail and any attachments thereto or use of their contents by any means whatsoever is strictly prohibited. If you have received this e-mail in error, please advise the sender immediately and delete this e-mail and all attached documents from your computer system.&quot;
</I>&gt;<i> #
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110610/fbaeec65/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110610/fbaeec65/attachment.htm</A>&gt;
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013407.html">[rabbitmq-discuss] publish/suscribe model with typed consumers
</A></li>
	<LI>Next message: <A HREF="013205.html">[rabbitmq-discuss] message via stomp adapter crashes queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13212">[ date ]</a>
              <a href="thread.html#13212">[ thread ]</a>
              <a href="subject.html#13212">[ subject ]</a>
              <a href="author.html#13212">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
