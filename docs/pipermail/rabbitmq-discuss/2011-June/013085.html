<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to handle full exchange history delivery
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20handle%20full%20exchange%20history%20delivery&In-Reply-To=%3C88E590DC4586974D825FC82AE798294E5200B0B1%40GSVCLU03.ges.ferlan.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013084.html">
   <LINK REL="Next"  HREF="013087.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to handle full exchange history delivery</H1>
    <B>Busoli, Simone</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20handle%20full%20exchange%20history%20delivery&In-Reply-To=%3C88E590DC4586974D825FC82AE798294E5200B0B1%40GSVCLU03.ges.ferlan.it%3E"
       TITLE="[rabbitmq-discuss] How to handle full exchange history delivery">Simone.Busoli at ferrari.com
       </A><BR>
    <I>Wed Jun  1 14:43:58 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013084.html">[rabbitmq-discuss] How to handle full exchange history delivery
</A></li>
        <LI>Next message: <A HREF="013087.html">[rabbitmq-discuss] How to handle full exchange history delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13085">[ date ]</a>
              <a href="thread.html#13085">[ thread ]</a>
              <a href="subject.html#13085">[ subject ]</a>
              <a href="author.html#13085">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>That&#8217;s what I thought as well, although I&#8217;m thinking about a couple of issues about it:


&#183;         Lack of knowledge about Erlang, which is the language I&#8217;d have to use to build a custom exchange, I guess

&#183;         Amount of memory it would require to store the entire history in memory. It needn&#8217;t be in memory actually, but I&#8217;m not sure what would be the recommended way if the storage has to be carried out by exchange itself. Mnesia perhaps, would it make sense?
_______________________________________________________________
Simone Busoli
Direzione risorse umane e segreteria generale &#8211; Sistemi informativi gestione sportiva
Collaboratore
Ferrari S.p.A.     Via Ascari 55/57, 41053, Maranello (MO); Italy
T (+39) 0536-949.850
E <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simone.busoli at ferrari.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simone.busoli at ferrari.com</A>&gt;  www.ferrari.com&lt;<A HREF="http://www.ferrari.com/">http://www.ferrari.com/</A>&gt;

From: Jon Brisbin [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jon at jbrisbin.com</A>]
Sent: Wednesday, June 01, 2011 3:38 PM
To: Busoli, Simone
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] How to handle full exchange history delivery

I've been seriously considering adding this functionality to the Riak-backed custom exchange. It was something I thought I would add first time through but didn't.

You'd have to use a custom exchange. Not sure if that's an issue in your scenario or not.


Thanks!

Jon Brisbin
http//jbrisbin.com

________________________________
From: &quot;Simone Busoli&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Simone.Busoli at ferrari.com</A>&gt;
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Sent: Wednesday, June 1, 2011 5:52:24 AM
Subject: [rabbitmq-discuss] How to handle full exchange history delivery


Hi,

I am trying to achieve a scenario in which messages are published from some data source into a RabbitMQ exchange and clients should be able to receive the full history of messages flown through that exchange, regardless of the exact moment in time when they connect.

I&#8217;ve been thinking to solve it by setting up a proxy which subscribes to the exchange where messages are published using its own queue, keeps an internal storage of the messages and accepts requests from clients.
When a request from a client arrives it just replays the full message history to the client by publishing the messages to the client queue (supplied in the ReplyTo field), then binds the client queue to the messages exchange, so that the client from this moment onwards starts receiving the &#8220;live&#8221; messages, and is pretty much unaware of what&#8217;s happened; it simply just receives the whole history.

Now I am under the impression that there&#8217;s a fundamental flaw in this reasoning, since the proxy cannot know when the message history has completed and he can switch the client to the live stream, because while it is replaying historical messages to the client other live messages might be arriving on the proxy&#8217;s queue, thus getting into an endless loop.

I&#8217;m probably missing something obvious, any advice about how others would approach this scenario is appreciated.

Simone

_________________________________________________________________________________________________________________
Questo messaggio e da intendersi esclusivamente ad uso del destinatario e puo contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non e il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione e
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from
your system.
_________________________________________________________________________________________________________________

_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>


_________________________________________________________________________________________________________________
Questo messaggio &#232; da intendersi esclusivamente ad uso del destinatario e pu&#242; contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non &#232; il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione &#232; 
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from 
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the 
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly 
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from 
your system.
_________________________________________________________________________________________________________________

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110601/de75cd5a/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110601/de75cd5a/attachment-0001.htm</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013084.html">[rabbitmq-discuss] How to handle full exchange history delivery
</A></li>
	<LI>Next message: <A HREF="013087.html">[rabbitmq-discuss] How to handle full exchange history delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13085">[ date ]</a>
              <a href="thread.html#13085">[ thread ]</a>
              <a href="subject.html#13085">[ subject ]</a>
              <a href="author.html#13085">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
