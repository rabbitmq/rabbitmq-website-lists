<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Plugin filenames
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Plugin%20filenames&In-Reply-To=%3C20110629151905.GA5894%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013518.html">
   <LINK REL="Next"  HREF="013526.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Plugin filenames</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Plugin%20filenames&In-Reply-To=%3C20110629151905.GA5894%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Plugin filenames">matthew at rabbitmq.com
       </A><BR>
    <I>Wed Jun 29 16:19:06 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013518.html">[rabbitmq-discuss] Plugin filenames
</A></li>
        <LI>Next message: <A HREF="013526.html">[rabbitmq-discuss] FW: rabbit upgrade - liftweb amqp problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13535">[ date ]</a>
              <a href="thread.html#13535">[ thread ]</a>
              <a href="subject.html#13535">[ subject ]</a>
              <a href="author.html#13535">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Jun 29, 2011 at 10:28:35AM -0400, Greg Swallow wrote:
&gt;<i> The first plugin I try to install is mochiweb.  It fails because the
</I>&gt;<i> mochiweb plugin is named
</I>&gt;<i> mochiweb-1.3-rmq2.5.0-git9a53dbd.ez&lt;<A HREF="http://www.rabbitmq.com/releases/plugins/v2.5.0/mochiweb-1.3-rmq2.5.0-git9a53dbd.ez">http://www.rabbitmq.com/releases/plugins/v2.5.0/mochiweb-1.3-rmq2.5.0-git9a53dbd.ez</A>&gt;.
</I>&gt;<i> 
</I>&gt;<i> I can modify my cookbook to store plugins and their filenames as a
</I>&gt;<i> hash.  However, could you guys consider creating predictable plugin
</I>&gt;<i> filenames in the future?
</I>
Ahh, but they are entirely predictable.

Things like mochiweb present a problem because to give them just the
Rabbit version is misleading. Equally we can't just use the upstream
version because in some cases we patch some upstream code. So as a
result we do -$upstream_ver-rmq$rabbit_ver-$hg_or_git$short_hash where
the hash is grabbed from hg or git, as per:

ifdef UPSTREAM_GIT
	echo UPSTREAM_SHORT_HASH:=`git --git-dir=$(CLONE_DIR)/.git log -n 1 HEAD | grep commit | cut -b 8-14` &gt;$$@
endif
ifdef UPSTREAM_HG
	echo UPSTREAM_SHORT_HASH:=`hg id -R $(CLONE_DIR) -i | cut -c -7` &gt;$$@
endif

This allows us to make it clear which versions of upstream projects
we're shipping, which is important for many reasons, not least of which
is the ability to identify the status of bugs uncovered and so forth.

Really, I wonder whether you might be better off trying to semantically
understand <A HREF="http://www.rabbitmq.com/plugins.html">http://www.rabbitmq.com/plugins.html</A> such that by scraping
that, you can figure out what plugins are available, and what their
dependencies are. Utterly gross, I know, but I can't think of a better
solution atm.

Matthew
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013518.html">[rabbitmq-discuss] Plugin filenames
</A></li>
	<LI>Next message: <A HREF="013526.html">[rabbitmq-discuss] FW: rabbit upgrade - liftweb amqp problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13535">[ date ]</a>
              <a href="thread.html#13535">[ thread ]</a>
              <a href="subject.html#13535">[ subject ]</a>
              <a href="author.html#13535">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
