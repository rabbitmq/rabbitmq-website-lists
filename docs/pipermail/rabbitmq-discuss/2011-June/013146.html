<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Startup scripts on RedHat 5.6
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Startup%20scripts%20on%20RedHat%205.6&In-Reply-To=%3C88b6e104-cdcb-4fd0-bdeb-a1ee26e50d19%40dn9g2000vbb.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013186.html">
   <LINK REL="Next"  HREF="013148.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Startup scripts on RedHat 5.6</H1>
    <B>Dan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Startup%20scripts%20on%20RedHat%205.6&In-Reply-To=%3C88b6e104-cdcb-4fd0-bdeb-a1ee26e50d19%40dn9g2000vbb.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Startup scripts on RedHat 5.6">dan.j.richards at gmail.com
       </A><BR>
    <I>Mon Jun  6 17:03:30 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013186.html">[rabbitmq-discuss] rabbitmq-erlang-client git repo lagging behind hg?
</A></li>
        <LI>Next message: <A HREF="013148.html">[rabbitmq-discuss] Startup scripts on RedHat 5.6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13146">[ date ]</a>
              <a href="thread.html#13146">[ thread ]</a>
              <a href="subject.html#13146">[ subject ]</a>
              <a href="author.html#13146">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi
Could you clarify the best practice for starting and stopping RabbitMQ
when using the generic source, please?
(We're using the generic to get the latest versions of Erlang and
Rabbit.)

Interactively it's all fine whilst logged on as the rabbit user.  I
can start from the command line with:
  rabbitmq_server-2.4.1/sbin/rabbitmq-server -detached
and stop with:
  rabbitmqctl stop

But if I do this as root it causes problems with the permissions on
the cookie and lock files, and I'd like RabbitMQ to start
automatically on system reboot.

I therefore took the '/etc/init.d/rabbitmq-server' startup script
provided in the Fedora RPM package, modified the paths and used
'chkconfig' to make it auto start, but this also ran everything as
root, so I've modified it to import the '/etc/rc.d/init.d/functions'
and call 'rabbitmq_server-2.4.1/sbin/rabbitmq-server' using the
'daemon' function which can take a '--user' parameter.

So rabbitmq starts correctly at system boot and root can run 'service
rabbitmq-server start | status | stop'.
If I'm the rabbit user I can start it up using either 'sudo service
rabbitmq-server start' or 'rabbitmq_server-2.4.1/sbin/rabbitmq-server -
detached', query the status using 'rabbitmqctl status' and stop it
using 'rabbitmqctl stop'.
Everything seems good to me, but I'd just like to check I'm doing the
right thing given this is a production environment...?  I'm sure this
problem has been solved already, so have I missed a trick with the
default RPM startup script? e.g. does it use the SUID bit or something
similar to achieve this?

Cheers

Dan
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013186.html">[rabbitmq-discuss] rabbitmq-erlang-client git repo lagging behind hg?
</A></li>
	<LI>Next message: <A HREF="013148.html">[rabbitmq-discuss] Startup scripts on RedHat 5.6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13146">[ date ]</a>
              <a href="thread.html#13146">[ thread ]</a>
              <a href="subject.html#13146">[ subject ]</a>
              <a href="author.html#13146">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
