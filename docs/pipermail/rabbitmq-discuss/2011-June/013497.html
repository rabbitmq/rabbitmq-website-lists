<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How can I set socket timeouts in PHP using the	AMQP PHP extension?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20can%20I%20set%20socket%20timeouts%20in%20PHP%20using%20the%0A%09AMQP%20PHP%20extension%3F&In-Reply-To=%3CBANLkTinVJHCHHSP2a%3D%3DYxG%2BPaUpND0F4dQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013532.html">
   <LINK REL="Next"  HREF="013501.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How can I set socket timeouts in PHP using the	AMQP PHP extension?</H1>
    <B>Keith Krueger</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20can%20I%20set%20socket%20timeouts%20in%20PHP%20using%20the%0A%09AMQP%20PHP%20extension%3F&In-Reply-To=%3CBANLkTinVJHCHHSP2a%3D%3DYxG%2BPaUpND0F4dQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] How can I set socket timeouts in PHP using the	AMQP PHP extension?">keith at krue.gr
       </A><BR>
    <I>Tue Jun 28 23:44:47 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013532.html">[rabbitmq-discuss] RabbitMQ and groups of users
</A></li>
        <LI>Next message: <A HREF="013501.html">[rabbitmq-discuss] How can I set socket timeouts in PHP using the AMQP PHP extension?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13497">[ date ]</a>
              <a href="thread.html#13497">[ thread ]</a>
              <a href="subject.html#13497">[ subject ]</a>
              <a href="author.html#13497">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am using the PHP AMQP extension, as described here:

  <A HREF="http://php.net/manual/en/book.amqp.php">http://php.net/manual/en/book.amqp.php</A>

This PHP extension uses the rabbitmq-c library as its underlying
implementation.

I would like to set socket timeouts for connection establishment and for
each of my enqueues and dequeues. I want to do this in case our server
performance degrades, to allow the clients to fail quickly rather than hang.

Does anyone have experience doing this in a PHP environment?  I have tried
setting the PHP socket timeout as follows.

  ini_set('default_socket_timeout', 5);

This appears to have no impact on the PHP extension's timeout settings. I am
still able to enqueue a multi-megabyte MQ message to rabbitmq without losing
the socket connection. It takes about 75 seconds to enqueue this message,
but the socket is kept open the entire time.

Is there any support either in the PHP AMQP extension or in a different PHP
setting that I can use to reduce the timeouts for our interactions with
RabbitMQ?  I'd rather not live with a potential problem of hanging client
processes if I can avoid it.

Thanks,

-Keith
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110628/996b475d/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110628/996b475d/attachment.htm</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013532.html">[rabbitmq-discuss] RabbitMQ and groups of users
</A></li>
	<LI>Next message: <A HREF="013501.html">[rabbitmq-discuss] How can I set socket timeouts in PHP using the AMQP PHP extension?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13497">[ date ]</a>
              <a href="thread.html#13497">[ thread ]</a>
              <a href="subject.html#13497">[ subject ]</a>
              <a href="author.html#13497">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
