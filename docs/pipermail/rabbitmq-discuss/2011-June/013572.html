<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Feedback on STOMP changes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Feedback%20on%20STOMP%20changes&In-Reply-To=%3C5519FF1E-FA79-4A6D-8A0D-165C0F2E0B8A%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013439.html">
   <LINK REL="Next"  HREF="013427.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Feedback on STOMP changes</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Feedback%20on%20STOMP%20changes&In-Reply-To=%3C5519FF1E-FA79-4A6D-8A0D-165C0F2E0B8A%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Feedback on STOMP changes">steve at rabbitmq.com
       </A><BR>
    <I>Thu Jun 30 17:06:18 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013439.html">[rabbitmq-discuss] Feedback on STOMP changes
</A></li>
        <LI>Next message: <A HREF="013427.html">[rabbitmq-discuss] Cannot update public-umbrella
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13572">[ date ]</a>
              <a href="thread.html#13572">[ thread ]</a>
              <a href="subject.html#13572">[ subject ]</a>
              <a href="author.html#13572">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>May I point out to readers of this thread that the changes described by Rob's note apply only to queues.
The present case (where we create a queue on SEND) is where the destination is of the form /queue/*.

So the proposal will not affect topic pubSub applications, but only point-to-point queue SEND/SUBSCRIBEs.

It is pertinent that if a publisher sends to a topic for which there are no subscribers, then the message is discarded anyway; so the negative case here is only for SEND before SUBSCRIBE to a specific queue. If that queue was created (and not deleted) beforehand, then all would be well.

If we continue to create queues on SENDs to non-existent queue destinations, then we have the knotty problem of what properties those queues should have. Leaving this problem to the SUBSCRIBER seems to be natural and predictable as well as having the advantages outlined in Rob's note.

We anticipate a STOMP requirement to create a queue (which might be durable, shared, etc) explicitly, just in case some non-subscriber (e.g. a SENDer ?) needs to ensure it exists.  This would probably be a non-standard frame command added to our STOMP support, but it could be done, with our proposed changes, by SUBSCRIBE-ing with the appropriate properties, and then UNSUBSCRIBE-ing immediately afterwards.  If the queue was NOT auto-deleted then subsequent SENDs could operate successfully.

No-one seems to have  reacted to the throughput performance advantages of the proposal, which might be considerable.

Steve Powell  (a happy bunny)
----------some definitions from the SPD----------
Rigatoni n. A prime-ministerial grin.
Nigella n. The next bottle-size up from a Nebuchadnezzar.
Homily adv. Rather like a frenchman.

On 25 Jun 2011, at 11:43, Michael Justin wrote:

&gt;<i> Am 24.06.2011 15:33, Rob Harrop wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> We'll add support for durable, exclusive, auto-delete and everything
</I>&gt;&gt;<i> else as headers on the SUBSCRIBE frame.
</I>&gt;<i> 
</I>&gt;<i> The Stomp+JMS bindings page <A HREF="http://stomp.codehaus.org/Stomp+JMS">http://stomp.codehaus.org/Stomp+JMS</A> has a implementation recommendation for durable subscribers (more ore less implemented in this way in other brokers):
</I>&gt;<i> 
</I>&gt;<i> quote:
</I>&gt;<i> &quot;
</I>&gt;<i> If you wish to create a durable topic subscriber you will need to do the following
</I>&gt;<i> 
</I>&gt;<i> *    set the client-id header on the CONNECT to a globally unique String for the Stomp connection
</I>&gt;<i> *    set the durable-subscriber-name header on the SUBSCRIBE command.
</I>&gt;<i> 
</I>&gt;<i> The combination of the client-id and durable-subscriber-name uniquely identifies the durable topic subscription. i.e. after you restart your program and re-subscribe, the Broker will know which messages you need that were published while you were away&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> For compatibility of Stomp client implementations, RabbitMQ could implement it following this specification.
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Michael Justin
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110630/1ead428c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110630/1ead428c/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013439.html">[rabbitmq-discuss] Feedback on STOMP changes
</A></li>
	<LI>Next message: <A HREF="013427.html">[rabbitmq-discuss] Cannot update public-umbrella
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13572">[ date ]</a>
              <a href="thread.html#13572">[ thread ]</a>
              <a href="subject.html#13572">[ subject ]</a>
              <a href="author.html#13572">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
