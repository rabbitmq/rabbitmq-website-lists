<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Feedback on STOMP changes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Feedback%20on%20STOMP%20changes&In-Reply-To=%3CBANLkTint7bzKAk3Pid82BMez2%3DT7HfMj1w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013425.html">
   <LINK REL="Next"  HREF="013439.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Feedback on STOMP changes</H1>
    <B>Massimo Paladin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Feedback%20on%20STOMP%20changes&In-Reply-To=%3CBANLkTint7bzKAk3Pid82BMez2%3DT7HfMj1w%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Feedback on STOMP changes">Massimo.Paladin at cern.ch
       </A><BR>
    <I>Fri Jun 24 15:16:53 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013425.html">[rabbitmq-discuss] Feedback on STOMP changes
</A></li>
        <LI>Next message: <A HREF="013439.html">[rabbitmq-discuss] Feedback on STOMP changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13426">[ date ]</a>
              <a href="thread.html#13426">[ thread ]</a>
              <a href="subject.html#13426">[ subject ]</a>
              <a href="author.html#13426">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I was right looking at RabbitMQ and STOMP support.

I have some recommendations which could be useful.

I find that change 2 might be a problem in some of the cases.
Producers usually don't have a notion of creating the destination, they just
like to send a message.
Removing the possibility to create queues would mean to add the notion of
creating queues on producers.
If this notion wouldn't be added the messages sent before the subscription
of a consumers will be discarded.

I find which it would be nice to extend a little the flexibility of the
stomp support.
For instance, correct me if I am wrong please, I wasn't able to do the
following via pure stomp:
- create an exchange of type topic and name X
- create a queue of name Y (durable and not auto-delete)
- add binding between X and Y
This is translated in what in JMS is called durable subscriber,
it would be nice to be able to do something like this.

Stomp component increases interoperability with other messaging brokers,
it would be great to try to have similar behaviors for some of the basic
messaging blocks.
People might be interested in changing messaging broker if similar
functionality would be supported.

Change 1 adds flexibility, however I would keep auto creation in SEND
phase with a default set of parameters.
These default parameters could be the most obvious or the one which would
allow easy interoperability between different products.

Regards,
---
Massimo Paladin

email: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">massimo.paladin at gmail.com</A>
website: <A HREF="http://www.mpaladin.com">http://www.mpaladin.com</A>
flickr's page: <A HREF="http://flickr.com/photos/massimop">http://flickr.com/photos/massimop</A>


On Fri, Jun 24, 2011 at 3:33 PM, Rob Harrop &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rob at rabbitmq.com</A>&gt; wrote:

&gt;<i> All,
</I>&gt;<i>
</I>&gt;<i> We're thinking of making some changes to the STOMP adapter and would like
</I>&gt;<i> to get some feedback before we do.
</I>&gt;<i>
</I>&gt;<i> ----------
</I>&gt;<i> Motivation
</I>&gt;<i> ----------
</I>&gt;<i>
</I>&gt;<i> We're making these changes to support two main use cases:
</I>&gt;<i>
</I>&gt;<i> * SUBSCRIBE and SEND to queues created outside of STOMP with arbitrary
</I>&gt;<i> queue properties (durable, auto-delete, x-message-ttl etc.)
</I>&gt;<i>
</I>&gt;<i> * Allow STOMP clients to create queues with arbitrary queue properties
</I>&gt;<i>
</I>&gt;<i> ----------------
</I>&gt;<i> Proposed Changes
</I>&gt;<i> ----------------
</I>&gt;<i>
</I>&gt;<i> Currently, the STOMP adapter automatically creates the necessary queues
</I>&gt;<i> when issuing SEND and SUBSCRIBE frames. Queues are created with a hard-coded
</I>&gt;<i> set of properties that depends on the destination type.
</I>&gt;<i>
</I>&gt;<i> Change 1: Allow extra headers on SUBSCRIBE to control queue properties
</I>&gt;<i>
</I>&gt;<i> We'll add support for durable, exclusive, auto-delete and everything else
</I>&gt;<i> as headers on the SUBSCRIBE frame.
</I>&gt;<i>
</I>&gt;<i> Change 2: Stop creating queues on SEND
</I>&gt;<i>
</I>&gt;<i> Because queue.declare requires queue attributes to be semantically
</I>&gt;<i> equivalent, issuing a queue.declare on SEND means that each SEND frame would
</I>&gt;<i> also need to carry the queue attributes in the header
</I>&gt;<i>
</I>&gt;<i> ------------
</I>&gt;<i> Consequences
</I>&gt;<i> ------------
</I>&gt;<i>
</I>&gt;<i> + Support for all queue attributes
</I>&gt;<i> + Subscribe and send to existing queues
</I>&gt;<i> + Improved SEND performance (no need to ensure queues exist)
</I>&gt;<i> - Need to issue a SUBSCRIBE to ensure queues exist
</I>&gt;<i>
</I>&gt;<i> Please give any feedback you have.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Rob
</I>&gt;<i> ______________________________**_________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.</A>**rabbitmq.com&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>&gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110624/93d919f1/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110624/93d919f1/attachment-0001.htm</A>&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013425.html">[rabbitmq-discuss] Feedback on STOMP changes
</A></li>
	<LI>Next message: <A HREF="013439.html">[rabbitmq-discuss] Feedback on STOMP changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13426">[ date ]</a>
              <a href="thread.html#13426">[ thread ]</a>
              <a href="subject.html#13426">[ subject ]</a>
              <a href="author.html#13426">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
