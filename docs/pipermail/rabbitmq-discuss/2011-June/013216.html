<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] publish/suscribe model with typed consumers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20publish/suscribe%20model%20with%20typed%20consumers&In-Reply-To=%3CBANLkTik%2BAin0V%3DzK-DPmr8Bwxg9AAtXocg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013202.html">
   <LINK REL="Next"  HREF="013203.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] publish/suscribe model with typed consumers</H1>
    <B>David Young</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20publish/suscribe%20model%20with%20typed%20consumers&In-Reply-To=%3CBANLkTik%2BAin0V%3DzK-DPmr8Bwxg9AAtXocg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] publish/suscribe model with typed consumers">d.young at cabinfeversoftware.com
       </A><BR>
    <I>Fri Jun 10 19:14:50 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013202.html">[rabbitmq-discuss] publish/suscribe model with typed consumers
</A></li>
        <LI>Next message: <A HREF="013203.html">[rabbitmq-discuss] publish/suscribe model with typed consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13216">[ date ]</a>
              <a href="thread.html#13216">[ thread ]</a>
              <a href="subject.html#13216">[ subject ]</a>
              <a href="author.html#13216">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If I understand this correctly, either some messages might end up in more
than one queue if groups compete for the header types, or there would be no
way to divide consumers such that consumer A handles group 1 messages, B
handles group 2, but C handles some of group 1 and some of group 2.

'Course I don't always understand correctly  {8'&gt;

On Fri, Jun 10, 2011 at 5:53 AM, Chris Chew &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">chrisch at ecollege.com</A>&gt; wrote:

&gt;<i> &gt; From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] on behalf &gt; of PADIOU
</I>&gt;<i> Pierre-Marie (MORPHO) [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">pierre-marie.padiou at morpho.com</A>]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &lt;snip&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; There is actually far more types than that (say a thousand). For now, the
</I>&gt;<i> only solution I see would be to create as many queues as requests types
</I>&gt;<i> (queueA, queueB, etc), and make consumer listen to the appropriate queues.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thing is:
</I>&gt;<i> &gt; - this implies that consumers create as many threads as queues there are
</I>&gt;<i> listening from (more than a hundred in my case), which I would like to
</I>&gt;<i> avoid.
</I>&gt;<i> &gt; - or I could make a single thread of a consumer randomly and sequentially
</I>&gt;<i> dequeue messages from all queues assigned to it?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Is there a better way to handle this?
</I>&gt;<i>
</I>&gt;<i> Here's an alternative solution that might work for you:
</I>&gt;<i>
</I>&gt;<i> * Producers produce messages into a headers exchange, specifying the header
</I>&gt;<i> &quot;Type&quot; = &quot;A,B,C...Z&quot;
</I>&gt;<i> * Consumers are grouped into &quot;type groups&quot; (e.g. group 1: A-M, group 2:
</I>&gt;<i> N-Q, group 3: R-Z)
</I>&gt;<i> * The consumer idempotently declares a queue for its group and binds the
</I>&gt;<i> queue for each of the message types handled by the group
</I>&gt;<i>
</I>&gt;<i> ...which should offer these features:
</I>&gt;<i>
</I>&gt;<i> * Messages will be routed only to consumers that know how to handle that
</I>&gt;<i> message type
</I>&gt;<i> * Consumers only have to consume from one queue
</I>&gt;<i> * Consumers can be load-balanced by group without having to process
</I>&gt;<i> duplicates
</I>&gt;<i> * A message of a certain type could potentially be sent to multiple groups
</I>&gt;<i> if applicable
</I>&gt;<i>
</I>&gt;<i> Keep in mind that the Headers exchange is among the slowest options.  But,
</I>&gt;<i> realistically, this is rarely a problem since it is rather like comparing
</I>&gt;<i> Formula 1 cars.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>
</I>&gt;<i> Chris
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110610/b50529bd/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110610/b50529bd/attachment.htm</A>&gt;
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013202.html">[rabbitmq-discuss] publish/suscribe model with typed consumers
</A></li>
	<LI>Next message: <A HREF="013203.html">[rabbitmq-discuss] publish/suscribe model with typed consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13216">[ date ]</a>
              <a href="thread.html#13216">[ thread ]</a>
              <a href="subject.html#13216">[ subject ]</a>
              <a href="author.html#13216">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
