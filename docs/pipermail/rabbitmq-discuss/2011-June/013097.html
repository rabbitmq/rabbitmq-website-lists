<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Treating the Ack Message
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Treating%20the%20Ack%20Message&In-Reply-To=%3Cyrv4cwrh4joiq.fsf%40dwragg.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013099.html">
   <LINK REL="Next"  HREF="013101.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Treating the Ack Message</H1>
    <B>David Wragg</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Treating%20the%20Ack%20Message&In-Reply-To=%3Cyrv4cwrh4joiq.fsf%40dwragg.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] Treating the Ack Message">david at rabbitmq.com
       </A><BR>
    <I>Thu Jun  2 15:28:45 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013099.html">[rabbitmq-discuss] duplicate 'messages' queue attribute in HTTP API	JSON response?
</A></li>
        <LI>Next message: <A HREF="013101.html">[rabbitmq-discuss] RabbitMQ Pub Sub Meetup?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13097">[ date ]</a>
              <a href="thread.html#13097">[ thread ]</a>
              <a href="subject.html#13097">[ subject ]</a>
              <a href="author.html#13097">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&quot;Marcus Vinitius Baffa&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mbaffa at opus.com.br</A>&gt; writes:
&gt;<i> 1) If I understood well the consumer will send an explicit response to
</I>&gt;<i> the producer confirming the service messages was received. The producer
</I>&gt;<i> will wait for this messages and define a timeout to receive this kind of
</I>&gt;<i> customized acknowledge message;
</I>
Right.  In an RPC setting, clients can simply timeout if they don't get
a reply soon enough.

&gt;<i> 2) As these messages are RPC messages there is no point for the
</I>&gt;<i> consumer, after a crash, to process messages that possibly had timedout
</I>&gt;<i> so I could simply purge these messages, and additionally send to the
</I>&gt;<i> producer, for each message still in the queue and not processed, a
</I>&gt;<i> special notification message indicating the consumer had crashed. This
</I>&gt;<i> could make the producer, if it is still running, reset the process and
</I>&gt;<i> notify the user what happened;
</I>&gt;<i> 3) The producer will allways purge its output queue when it begins to
</I>&gt;<i> run;
</I>
The problem with purging the queue is the your consumer would not see
requests even if they were sent just before the purge.  So it's probably
better to use RabbitMQ's per-queue message TTL feature.  This allows you
to request that messages by expired from a queue after a certain time,
and you could configure this to match your timeout period.  See
&lt;<A HREF="http://www.rabbitmq.com/extensions.html#queue-ttl">http://www.rabbitmq.com/extensions.html#queue-ttl</A>&gt;.

-- 
David Wragg
Staff Engineer, RabbitMQ
VMware, Inc.
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013099.html">[rabbitmq-discuss] duplicate 'messages' queue attribute in HTTP API	JSON response?
</A></li>
	<LI>Next message: <A HREF="013101.html">[rabbitmq-discuss] RabbitMQ Pub Sub Meetup?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13097">[ date ]</a>
              <a href="thread.html#13097">[ thread ]</a>
              <a href="subject.html#13097">[ subject ]</a>
              <a href="author.html#13097">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
