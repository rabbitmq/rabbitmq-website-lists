<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Windows Service Crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Windows%20Service%20Crash&In-Reply-To=%3CFC3463BECF39B74996BF6ADDCB9BE7D707E1F9902B%40MX36A.corp.emc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016878.html">
   <LINK REL="Next"  HREF="016893.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Windows Service Crash</H1>
    <B>james.poole at rsa.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Windows%20Service%20Crash&In-Reply-To=%3CFC3463BECF39B74996BF6ADDCB9BE7D707E1F9902B%40MX36A.corp.emc.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Windows Service Crash">james.poole at rsa.com
       </A><BR>
    <I>Wed Dec 14 21:18:46 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016878.html">[rabbitmq-discuss] rabbitmq-c API improvements for multiple channels
</A></li>
        <LI>Next message: <A HREF="016893.html">[rabbitmq-discuss] RabbitMQ Windows Service Crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16879">[ date ]</a>
              <a href="thread.html#16879">[ thread ]</a>
              <a href="subject.html#16879">[ subject ]</a>
              <a href="author.html#16879">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I was wondering if someone could point me in the right direction for finding
the reason for a crash with the RabbitMQ Windows Service.  It seem that from
time to time, if the service is restarted, the service will crash and the
process will exit.  

 

I have tried to get the console output as well as the SASL.log (SSL is
enabled), but neither one is pointing me in a direction to troubleshoot.
Also, I have the crash dump, but I'm not sure the proper way to share it to
the mail list.

 

Thanks for any help.

 

-James

 

-------------------------------------------------------------------------

Console Debug Log:

 

 

** Found 0 name clashes in code paths 

 

+---+   +---+

|<i>   |   |   |
</I>
|<i>   |   |   |
</I>
|<i>   |   |   |
</I>
|<i>   +---+   +-------+
</I>
|<i>                   |
</I>
|<i> RabbitMQ  +---+   |
</I>
|<i>           |   |   |
</I>
|<i>   v2.7.0  +---+   |
</I>
|<i>                   |
</I>
+-------------------+

AMQP 0-9-1 / 0-9 / 0-8

Copyright (C) 2007-2011 VMware, Inc.

Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

 

node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at RABBITSERVER</A>

app descriptor : c:/Program Files/RabbitMQ
Server/rabbitmq_server-2.7.0/sbin/../ebin/rabbit.app

home dir       : C:\Windows

config file(s) :
c:/Users/Administrator/AppData/Roaming/RabbitMQ/rabbitmq.config

cookie hash    : WOWJiMjg9O5Hu5yte6LSJA==

log            :
C:/Users/Administrator/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at RABBITSERVER.log</A>

sasl log       :
C:/Users/Administrator/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at RABBITSERVER-sasl</A>
.log

database dir   :
c:/Users/Administrator/AppData/Roaming/RabbitMQ/db/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at RABBITSERVER-mnesi</A>
a

erlang version : 5.8.5

 

-- rabbit boot start

starting file handle cache server
...done

starting worker pool
...done

starting database
...done

starting codec correctness check
...done

-- external infrastructure ready

starting statistics event manager
...done

starting logging server
...done

starting plugin registry
...done

starting auth mechanism amqplain
...done

starting auth mechanism cr-demo
...done

starting auth mechanism plain
...done

starting exchange type direct
...done

starting exchange type fanout
...done

starting exchange type headers
...done

starting exchange type topic
...done

-- kernel ready

starting node monitor
...done

starting cluster delegate
...done

starting guid generator
...done

starting alarm handler
...done

starting memory monitor
...done

-- core initialized

starting empty DB check
...done

starting management agent
...done

starting exchange, queue and binding recovery
...done

starting mirror queue slave sup
...done

starting adding mirrors to queues
...done

-- message delivery logic ready

starting error log relay
...done

starting networking
...done

starting notify cluster nodes
...done

starting direct_client
...done

 

broker running

Eshell V5.8.5  (abort with ^G)

(<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at RABBITSERVER</A>)1&gt; in message_loop

win32sysinfo:Erlang has closed.{&quot;Kernel pid
terminated&quot;,application_controller,&quot;{application_terminated,rabbitmq_managem
ent,shutdown}&quot;}

 

Crash dump was written to:
C:/Users/Administrator/AppData/Roaming/RabbitMQ/erl_crash.dump

Kernel pid terminated (application_controller)
({application_terminated,rabbitmq_management,shutdown})

 

----------------------------------------------------------------------------
-----------------------------------

 

SASL log (not entire log. approx last 100 lines):

 

 

 

 

 

=CRASH REPORT==== 14-Dec-2011::13:16:32 ===

  crasher:

    initial call: rabbit_mgmt_db:init/1

    pid: &lt;0.441.0&gt;

    registered_name: []

    exception exit: {{case_clause,{none}},

                     [{rabbit_mgmt_format,'-amqp_table/1-lc$^0/1-0-',1},

                      {rabbit_mgmt_format,amqp_table,1},

                      {rabbit_mgmt_format,format_item,2},

                      {rabbit_mgmt_format,'-format/2-lc$^0/1-0-',2},

                      {rabbit_mgmt_format,'-format/2-lc$^0/1-0-',2},

                      {rabbit_mgmt_format,format,2},

                      {rabbit_mgmt_db,handle_created,4},

                      {rabbit_mgmt_db,handle_cast,2}]}

      in function  gen_server:terminate/6

    ancestors: [&lt;0.400.0&gt;,rabbit_mgmt_sup,&lt;0.257.0&gt;]

    messages: []

    links: [&lt;0.400.0&gt;]

    dictionary: []

    trap_exit: false

    status: running

    heap_size: 1597

    stack_size: 24

    reductions: 13506

  neighbours:

 

=SUPERVISOR REPORT==== 14-Dec-2011::13:16:32 ===

     Supervisor: {&lt;0.400.0&gt;,mirrored_supervisor}

     Context:    child_terminated

     Reason:     {{case_clause,{none}},

                  [{rabbit_mgmt_format,'-amqp_table/1-lc$^0/1-0-',1},

                   {rabbit_mgmt_format,amqp_table,1},

                   {rabbit_mgmt_format,format_item,2},

                   {rabbit_mgmt_format,'-format/2-lc$^0/1-0-',2},

                   {rabbit_mgmt_format,'-format/2-lc$^0/1-0-',2},

                   {rabbit_mgmt_format,format,2},

                   {rabbit_mgmt_db,handle_created,4},

                   {rabbit_mgmt_db,handle_cast,2}]}

     Offender:   [{pid,&lt;0.441.0&gt;},

                  {name,rabbit_mgmt_db},

                  {mfa,{rabbit_mgmt_db,start_link,[]}},

                  {restart_type,permanent},

                  {shutdown,4294967295},

                  {child_type,worker}]

 

 

=CRASH REPORT==== 14-Dec-2011::13:16:32 ===

  crasher:

    initial call: rabbit_mgmt_db:init/1

    pid: &lt;0.445.0&gt;

    registered_name: []

    exception exit: {{case_clause,{none}},

                     [{rabbit_mgmt_format,'-amqp_table/1-lc$^0/1-0-',1},

                      {rabbit_mgmt_format,amqp_table,1},

                      {rabbit_mgmt_format,format_item,2},

                      {rabbit_mgmt_format,'-format/2-lc$^0/1-0-',2},

                      {rabbit_mgmt_format,'-format/2-lc$^0/1-0-',2},

                      {rabbit_mgmt_format,format,2},

                      {rabbit_mgmt_db,handle_created,4},

                      {rabbit_mgmt_db,handle_cast,2}]}

      in function  gen_server:terminate/6

    ancestors: [&lt;0.400.0&gt;,rabbit_mgmt_sup,&lt;0.257.0&gt;]

   messages: []

    links: [&lt;0.400.0&gt;]

    dictionary: []

    trap_exit: false

    status: running

    heap_size: 1597

    stack_size: 24

    reductions: 13526

  neighbours:

 

=SUPERVISOR REPORT==== 14-Dec-2011::13:16:32 ===

     Supervisor: {&lt;0.400.0&gt;,mirrored_supervisor}

     Context:    child_terminated

     Reason:     {{case_clause,{none}},

                  [{rabbit_mgmt_format,'-amqp_table/1-lc$^0/1-0-',1},

                   {rabbit_mgmt_format,amqp_table,1},

                   {rabbit_mgmt_format,format_item,2},

                   {rabbit_mgmt_format,'-format/2-lc$^0/1-0-',2},

                   {rabbit_mgmt_format,'-format/2-lc$^0/1-0-',2},

                   {rabbit_mgmt_format,format,2},

                   {rabbit_mgmt_db,handle_created,4},

                   {rabbit_mgmt_db,handle_cast,2}]}

     Offender:   [{pid,&lt;0.445.0&gt;},

                  {name,rabbit_mgmt_db},

                  {mfa,{rabbit_mgmt_db,start_link,[]}},

                  {restart_type,permanent},

                  {shutdown,4294967295},

                  {child_type,worker}]

 

 

=SUPERVISOR REPORT==== 14-Dec-2011::13:16:32 ===

     Supervisor: {&lt;0.400.0&gt;,mirrored_supervisor}

     Context:    shutdown

     Reason:     reached_max_restart_intensity

     Offender:   [{pid,&lt;0.445.0&gt;},

                  {name,rabbit_mgmt_db},

                  {mfa,{rabbit_mgmt_db,start_link,[]}},

                  {restart_type,permanent},

                  {shutdown,4294967295},

                  {child_type,worker}]

 

 

=SUPERVISOR REPORT==== 14-Dec-2011::13:16:32 ===

     Supervisor: {local,rabbit_mgmt_sup}

     Context:    child_terminated

     Reason:     shutdown

     Offender:   [{pid,&lt;0.401.0&gt;},

                  {name,mirroring},

                  {mfa,

                      {mirrored_supervisor,start_internal,

                          [rabbit_mgmt_sup,

                           [{rabbit_mgmt_db,

                                {rabbit_mgmt_db,start_link,[]},

                                permanent,4294967295,worker,

                                [rabbit_mgmt_db]}]]}},

                  {restart_type,permanent},

                  {shutdown,4294967295},

                  {child_type,worker}]

 

 

=SUPERVISOR REPORT==== 14-Dec-2011::13:16:32 ===

     Supervisor: {local,rabbit_mgmt_sup}

     Context:    shutdown

     Reason:     reached_max_restart_intensity

     Offender:   [{pid,&lt;0.401.0&gt;},

                  {name,mirroring},

                  {mfa,

                      {mirrored_supervisor,start_internal,

                          [rabbit_mgmt_sup,

                           [{rabbit_mgmt_db,

                                {rabbit_mgmt_db,start_link,[]},

                                permanent,4294967295,worker,

                                [rabbit_mgmt_db]}]]}},

                  {restart_type,permanent},

                  {shutdown,4294967295},

                  {child_type,worker}]

 

 

=SUPERVISOR REPORT==== 14-Dec-2011::13:16:32 ===

     Supervisor: {&lt;0.233.0&gt;,rabbit_channel_sup_sup}

     Context:    shutdown_error

     Reason:     shutdown

     Offender:   [{pid,&lt;0.320.0&gt;},

                  {name,channel_sup},

                  {mfa,{rabbit_channel_sup,start_link,[]}},

                  {restart_type,temporary},

                  {shutdown,infinity},

                  {child_type,supervisor}]

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111214/1e8e4050/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111214/1e8e4050/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 7172 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111214/1e8e4050/attachment.bin">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111214/1e8e4050/attachment.bin</A>&gt;
</PRE>




































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016878.html">[rabbitmq-discuss] rabbitmq-c API improvements for multiple channels
</A></li>
	<LI>Next message: <A HREF="016893.html">[rabbitmq-discuss] RabbitMQ Windows Service Crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16879">[ date ]</a>
              <a href="thread.html#16879">[ thread ]</a>
              <a href="subject.html#16879">[ subject ]</a>
              <a href="author.html#16879">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
