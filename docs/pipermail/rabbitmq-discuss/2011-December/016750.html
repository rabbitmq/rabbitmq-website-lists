<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Socket leak in java client library
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Socket%20leak%20in%20java%20client%20library&In-Reply-To=%3C925DDDE9D69E7143B3252E2D4680A36704F739B1%4034093-C5-EVS1.exchange.rackspace.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016937.html">
   <LINK REL="Next"  HREF="016754.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Socket leak in java client library</H1>
    <B>Iain Hull</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Socket%20leak%20in%20java%20client%20library&In-Reply-To=%3C925DDDE9D69E7143B3252E2D4680A36704F739B1%4034093-C5-EVS1.exchange.rackspace.com%3E"
       TITLE="[rabbitmq-discuss] Socket leak in java client library">iain.hull at workday.com
       </A><BR>
    <I>Tue Dec  6 08:35:52 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016937.html">[rabbitmq-discuss] auto-delete exchange kills connections on	consumer close?
</A></li>
        <LI>Next message: <A HREF="016754.html">[rabbitmq-discuss] Interpreting &quot;Processing Error&quot; log message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16750">[ date ]</a>
              <a href="thread.html#16750">[ thread ]</a>
              <a href="subject.html#16750">[ subject ]</a>
              <a href="author.html#16750">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the update.  I will probably change my local patch to follow
yours.

Regards,
Iain.

-----Original Message-----
From: Steve Powell [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">steve at rabbitmq.com</A>] 
Sent: 30 November 2011 18:11
To: RabbitMQ List
Cc: Iain Hull
Subject: Re: [rabbitmq-discuss] Socket leak in java client library

Dear Iain,

Looking at the newConnection() code in detail, I have chosen not to do
connection cleanup in newConnection() (as in your patch) but in
AMQConnection.start() where (most of) it belongs.   In other words, when
AMQConnection.start() detects a problem, it cleans up any debris
(threads, heartbeat executors and/or sockets) it may have created during
socket setup and connection negotiations before throwing an exception.
This allows us to ignore errors (except for reporting) in the
newConnection loop without leaking resources.

If this passes QA it should appear in the next release, and be
documented in the JavaDoc. These fixes are presently under the bug24597
track.

Steve Powell  (a tired bunny)
----------some more definitions from the SPD----------
avoirdupois (phr.) 'Would you like peas with that?'
distribute (v.) To denigrate an award ceremony.
definite (phr.) 'It's hard of hearing, I think.'
modest (n.) The most mod.

On 28 Nov 2011, at 20:39, Iain Hull wrote:
&gt;<i>
</I><A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-November/01661">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-November/01661</A>
2.html

</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016937.html">[rabbitmq-discuss] auto-delete exchange kills connections on	consumer close?
</A></li>
	<LI>Next message: <A HREF="016754.html">[rabbitmq-discuss] Interpreting &quot;Processing Error&quot; log message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16750">[ date ]</a>
              <a href="thread.html#16750">[ thread ]</a>
              <a href="subject.html#16750">[ subject ]</a>
              <a href="author.html#16750">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
