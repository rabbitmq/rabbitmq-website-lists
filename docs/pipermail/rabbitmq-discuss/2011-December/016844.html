<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] A different Processing error in logs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20A%20different%20Processing%20error%20in%20logs&In-Reply-To=%3C61410ACA-C434-4F2C-8951-948097B868E2%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016789.html">
   <LINK REL="Next"  HREF="016783.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] A different Processing error in logs</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20A%20different%20Processing%20error%20in%20logs&In-Reply-To=%3C61410ACA-C434-4F2C-8951-948097B868E2%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] A different Processing error in logs">steve at rabbitmq.com
       </A><BR>
    <I>Tue Dec 13 11:57:09 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016789.html">[rabbitmq-discuss] A different Processing error in logs
</A></li>
        <LI>Next message: <A HREF="016783.html">[rabbitmq-discuss] Java client test suite fails on master
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16844">[ date ]</a>
              <a href="thread.html#16844">[ thread ]</a>
              <a href="subject.html#16844">[ subject ]</a>
              <a href="author.html#16844">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Toby,
Sorry for the delay in responding.

After some head-scratching (and references to the STOMP spec) Matthias helped
me to see the obvious:

UNSUBSCRIBE causes us to 'forget' the subscription, so an ACK for any messages
after then will fail. But MESSAGE frames can arrive after an UNSUBSCRIBE, so we
need to remember the information associated with a subscription beyond the
UNSUBSCRIBE.

This is clearly a bug in our STOMP adapter -- thank you for pointing this out.
We are surprised it didn't arise before.  I have raised a bug (24623) to track
this.

It also raises some issues for the re-use of subscription ids. The reason is
that UNSUBSCRIBE/SUBSCRIBE can be followed by a MESSAGE frame arriving, which
has no way of identifying the subscription it is for anymore. I'm intending to
prohibit the re-use of subscription ids on the same session.

The fix will probably not make the next release, which is imminent.

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
avoirdupois (phr.) 'Would you like peas with that?'
distribute (v.) To denigrate an award ceremony.
definite (phr.) 'It's hard of hearing, I think.'
modest (n.) The most mod.

On 8 Dec 2011, at 01:09, Toby Corkindale wrote:
&gt;<i> I've created a stand-alone script that demonstrates the issue occurring;
</I>&gt;<i> it's in Perl, I hope that's OK?
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016789.html">[rabbitmq-discuss] A different Processing error in logs
</A></li>
	<LI>Next message: <A HREF="016783.html">[rabbitmq-discuss] Java client test suite fails on master
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16844">[ date ]</a>
              <a href="thread.html#16844">[ thread ]</a>
              <a href="subject.html#16844">[ subject ]</a>
              <a href="author.html#16844">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
