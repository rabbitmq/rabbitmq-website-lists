<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Message timeouts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20timeouts&In-Reply-To=%3C20398578.95.1323605677788.JavaMail.geo-discussion-forums%40yqfm20%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016742.html">
   <LINK REL="Next"  HREF="016699.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Message timeouts</H1>
    <B>Alex Gr&#246;nholm</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20timeouts&In-Reply-To=%3C20398578.95.1323605677788.JavaMail.geo-discussion-forums%40yqfm20%3E"
       TITLE="[rabbitmq-discuss] Message timeouts">alex.gronholm at nextday.fi
       </A><BR>
    <I>Sun Dec 11 12:14:37 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016742.html">[rabbitmq-discuss] Message timeouts
</A></li>
        <LI>Next message: <A HREF="016699.html">[rabbitmq-discuss] Message timeouts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16825">[ date ]</a>
              <a href="thread.html#16825">[ thread ]</a>
              <a href="subject.html#16825">[ subject ]</a>
              <a href="author.html#16825">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry for taking this long to respond. I've been otherwise engaged and 
forgot about this conversation.
Thank you for your replies.

If you don't want the server queue requests to be 'lost' then don't allow 
&gt;<i> the
</I>&gt;<i> queues to expire!
</I>&gt;<i>
</I>&gt;<i> On the other hand your clients apparently wait forever.  Is there a reason 
</I>&gt;<i> I
</I>&gt;<i> don't understand why the server queues expire but the clients don't have a
</I>&gt;<i> timeout for the responses?
</I>&gt;<i>
</I>If the upgrade of the server software fails and the developers do nothing, 
the queue expires eventually so that stale requests are dropped and the 
clients will start getting proper error messages informing them of this 
condition.
This is not the ideal solution of course (per-message TTL and return 
notification would be).

You want requests to either be processed or (reliably) not processed.  You
&gt;<i> never want the clients to be in any doubt about whether the request was
</I>&gt;<i> processed or not.  So you wait forever in the client.  However, requests 
</I>&gt;<i> that
</I>&gt;<i> get discarded never return so the client doesn't know.  So you want expiry 
</I>&gt;<i> to
</I>&gt;<i> trigger replies to the clients.  (Per-queue message TTLs also don't 
</I>&gt;<i> return.)
</I>

 Sounds about right.

Let's see -- how would we do this without a dead-letter mechanism?  Well, 
&gt;<i> apart
</I>&gt;<i> from making the server transactional, it might be useful to have an 
</I>&gt;<i> 'offline'
</I>&gt;<i> server that can take over any server's queue when it fails and either deal 
</I>&gt;<i> with
</I>&gt;<i> the requests [by issuing an 'offline' response?] or arrange for the server 
</I>&gt;<i> to
</I>&gt;<i> be restarted (and/or upgraded).
</I>&gt;<i>
</I>
This seems fairly complicated. I'll have to look into transactions to see 
if they will help in my case.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111211/b385ade6/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111211/b385ade6/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016742.html">[rabbitmq-discuss] Message timeouts
</A></li>
	<LI>Next message: <A HREF="016699.html">[rabbitmq-discuss] Message timeouts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16825">[ date ]</a>
              <a href="thread.html#16825">[ thread ]</a>
              <a href="subject.html#16825">[ subject ]</a>
              <a href="author.html#16825">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
