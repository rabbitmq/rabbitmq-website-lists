<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Question Regarding RabbitMQ Administration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Question%20Regarding%20RabbitMQ%20Administration&In-Reply-To=%3C4ED914CC.7010606%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016689.html">
   <LINK REL="Next"  HREF="016691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Question Regarding RabbitMQ Administration</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Question%20Regarding%20RabbitMQ%20Administration&In-Reply-To=%3C4ED914CC.7010606%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Question Regarding RabbitMQ Administration">simon at rabbitmq.com
       </A><BR>
    <I>Fri Dec  2 18:11:24 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016689.html">[rabbitmq-discuss] Question Regarding RabbitMQ Administration
</A></li>
        <LI>Next message: <A HREF="016691.html">[rabbitmq-discuss] Rabbit RPC Application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16709">[ date ]</a>
              <a href="thread.html#16709">[ thread ]</a>
              <a href="subject.html#16709">[ subject ]</a>
              <a href="author.html#16709">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/12/11 15:13, misiti3780 wrote:
&gt;<i> I am running RabbitMQ for doing a lot of asynchronous processing via
</I>&gt;<i> Django-Celery in a web app.
</I>&gt;<i> I have a couple questions regarding how to monitor this process:
</I>&gt;<i>
</I>&gt;<i> The problem I am seeing is for some reason, my queues are getting
</I>&gt;<i> overloaded and then when I try
</I>&gt;<i> to purge the queues using rabbitmqadmin, it says it cannot connect. I
</I>&gt;<i> am trying to track down the problem
</I>&gt;<i> and it looks like there must be an upper bound to the number of
</I>&gt;<i> messages a broker can handle but I guess
</I>&gt;<i> what I am looking for is
</I>&gt;<i>
</I>&gt;<i> why would rabbitmqadmin return a &quot;cannot connect error&quot;
</I>
I assume that you are only getting this error when trying to *purge* the 
queue (not list queues or similar).

rabbitmqadmin talks to the management plugin, which in turn gets 
information about the state of rabbit from mnesia and statistics events 
which are emitted by queues, connections and channels. So to list queues 
it does *not* need to contact each queue to query it for stats.

However, to purge a queue it does need to contact that queue. If the 
queue is busy it might have a large mailbox in front of it, in which 
case the request to purge might take a while to get to the front. 
However, I would hope mgmt would not time out. Can you show me the error 
message you're seeing?

&gt;<i> what is the best way to monitor rabbitmq? rabbitmqctl + rabbitmqadmin
</I>&gt;<i> or something else
</I>&gt;<i> like munin.
</I>
I would say use something that talks to the management plugin - such as 
rabbitmqadmin. Some of the community-developed scripts do this too. If 
you are worried about queues being overloaded, don't use rabbitmqctl as 
it *does* need to contact every queue for list_queues.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016689.html">[rabbitmq-discuss] Question Regarding RabbitMQ Administration
</A></li>
	<LI>Next message: <A HREF="016691.html">[rabbitmq-discuss] Rabbit RPC Application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16709">[ date ]</a>
              <a href="thread.html#16709">[ thread ]</a>
              <a href="subject.html#16709">[ subject ]</a>
              <a href="author.html#16709">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
