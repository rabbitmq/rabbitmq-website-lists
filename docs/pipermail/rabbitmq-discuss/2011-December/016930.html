<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Running RabbitMQ as a different user
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Running%20RabbitMQ%20as%20a%20different%20user&In-Reply-To=%3CCAHZAEpcuLbJ8fmo-8inz6Yd6ZEj5GkOwoiTONXjhr5-%2BWiawyQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016928.html">
   <LINK REL="Next"  HREF="016932.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Running RabbitMQ as a different user</H1>
    <B>Jason J. W. Williams</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Running%20RabbitMQ%20as%20a%20different%20user&In-Reply-To=%3CCAHZAEpcuLbJ8fmo-8inz6Yd6ZEj5GkOwoiTONXjhr5-%2BWiawyQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Running RabbitMQ as a different user">jasonjwwilliams at gmail.com
       </A><BR>
    <I>Mon Dec 19 22:31:34 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016928.html">[rabbitmq-discuss] Running RabbitMQ as a different user
</A></li>
        <LI>Next message: <A HREF="016932.html">[rabbitmq-discuss] Running RabbitMQ as a different user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16930">[ date ]</a>
              <a href="thread.html#16930">[ thread ]</a>
              <a href="subject.html#16930">[ subject ]</a>
              <a href="author.html#16930">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matt,

This should do it on Ubuntu:

sudo -H -u &lt;user&gt; /opt/rabbitmq-server/sbin/rabbitmq-server

The Erlang process needs to find the Erlang cookie and will check the
home directory of the executing user. You can also specify the
explicit location of the Erlang cookie in the RabbitMQ arguments, but
we find using the HOME environment simpler.

-J

On Mon, Dec 19, 2011 at 2:58 PM, Matt Pietrek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at skytap.com</A>&gt; wrote:
&gt;<i> We have a production environment where all of our services run in a special,
</I>&gt;<i> non-root account an an Ubuntu 10.04 environment.&#160;I'm experimenting with how
</I>&gt;<i> to make RabbitMQ 2.7 run in this special account, rather than as the
</I>&gt;<i> &quot;rabbitmq&quot; user, and not having much luck.
</I>&gt;<i>
</I>&gt;<i> Extensive searching of the mailing list makes me think I'm close, but I
</I>&gt;<i> suspect I'm missing something fundamental.
</I>&gt;<i>
</I>&gt;<i> I believe part of the answer involves explicitly setting the &quot;-cookie&quot;
</I>&gt;<i> option in RABBITMQ_SERVER_START_ARGS and RABBITMQ_CTL_ERL_ARGS environment
</I>&gt;<i> variables.
</I>&gt;<i> I also suspect that the answer also involves running the &quot;low level&quot; scripts
</I>&gt;<i> in /usr/lib/rabbitmq/bin/, rather than the scripts in /usr/sbin/.
</I>&gt;<i> Further, I suspect that some directories may need to have their ownership
</I>&gt;<i> and/or attributes changed to something other than &quot;rabbitmq&quot;.
</I>&gt;<i>
</I>&gt;<i> So what I'm looking for is a list of what exactly I need to do, both at
</I>&gt;<i> launch time, as well as possibly at install time.
</I>&gt;<i>
</I>&gt;<i> FWIW, we need to launch rabbitmq-server ourselves, rather than having it
</I>&gt;<i> auto start on boot. I know how to accomplish this, but it might be useful
</I>&gt;<i> context when deciding how to approach the above.
</I>&gt;<i>
</I>&gt;<i> Thanks much,
</I>&gt;<i>
</I>&gt;<i> Matt
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I></PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016928.html">[rabbitmq-discuss] Running RabbitMQ as a different user
</A></li>
	<LI>Next message: <A HREF="016932.html">[rabbitmq-discuss] Running RabbitMQ as a different user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16930">[ date ]</a>
              <a href="thread.html#16930">[ thread ]</a>
              <a href="subject.html#16930">[ subject ]</a>
              <a href="author.html#16930">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
