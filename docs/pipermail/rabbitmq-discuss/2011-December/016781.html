<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cleaning up temp-queues in long-running	processes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cleaning%20up%20temp-queues%20in%20long-running%0A%09processes&In-Reply-To=%3C8C211326-1C28-4F11-993F-CE3336E6D06F%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016772.html">
   <LINK REL="Next"  HREF="016788.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cleaning up temp-queues in long-running	processes</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cleaning%20up%20temp-queues%20in%20long-running%0A%09processes&In-Reply-To=%3C8C211326-1C28-4F11-993F-CE3336E6D06F%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Cleaning up temp-queues in long-running	processes">steve at rabbitmq.com
       </A><BR>
    <I>Wed Dec  7 15:07:53 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016772.html">[rabbitmq-discuss] Cleaning up temp-queues in long-running processes
</A></li>
        <LI>Next message: <A HREF="016788.html">[rabbitmq-discuss] Cleaning up temp-queues in long-running	processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16781">[ date ]</a>
              <a href="thread.html#16781">[ thread ]</a>
              <a href="subject.html#16781">[ subject ]</a>
              <a href="author.html#16781">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Toby,
I guess this a STOMP question again. Please correct me if I'm wrong.

I assume you are using /temp-queue/&lt;name&gt; destinations on the reply-to header
on a SEND frame.

You are correct in that a temporary reply-to queue is created 'auto-delete'
with an automatic (hidden) subscription; so the queue will be retained until
the end of the session:  there is no way to remove that subscription (but
see below).

However, the bug that you cannot re-use the reply-to queue is now fixed and
will be in the upcoming release.

We also have a bug 'on the books' that will expose the 'id' of the
hidden subscription, in case the user wishes to UNSUBSCRIBE from it.  I'm
not certain when this will be fixed, however.  Since its main use would be
to work-around the other problem it is not guaranteed to be in the next release.

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
avoirdupois (phr.) 'Would you like peas with that?'
distribute (v.) To denigrate an award ceremony.
definite (phr.) 'It's hard of hearing, I think.'
modest (n.) The most mod.

On 7 Dec 2011, at 00:10, Toby Corkindale wrote:

&gt;<i> If I use the /temp-queue/ methods to create temporary queues, I see that
</I>&gt;<i> they remain in existence until the process disconnects from the RMQ broker.
</I>&gt;<i> 
</I>&gt;<i> If you're using these for RPC on a long-running process, you soon have
</I>&gt;<i> huge numbers of queues on the broker.
</I>&gt;<i> 
</I>&gt;<i> Is there a way to remove them once you're done?
</I>&gt;<i> 
</I>&gt;<i> I tried UNSUBSCRIBE on them, but that didn't seem to work. (I don't have
</I>&gt;<i> a subscription id)
</I>&gt;<i> 
</I>&gt;<i> The problem is compounded by the bug with re-using the temp-queues. Because
</I>&gt;<i> you need to use a unique name each time, every RPC call has to create a new
</I>&gt;<i> temp queue, rather than being able to reuse the same call for at least the
</I>&gt;<i> same methods.
</I></PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016772.html">[rabbitmq-discuss] Cleaning up temp-queues in long-running processes
</A></li>
	<LI>Next message: <A HREF="016788.html">[rabbitmq-discuss] Cleaning up temp-queues in long-running	processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16781">[ date ]</a>
              <a href="thread.html#16781">[ thread ]</a>
              <a href="subject.html#16781">[ subject ]</a>
              <a href="author.html#16781">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
