<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Need help to interpret performance results
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Need%20help%20to%20interpret%20performance%20results&In-Reply-To=%3C4EDE3700.2050501%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016759.html">
   <LINK REL="Next"  HREF="016775.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Need help to interpret performance results</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Need%20help%20to%20interpret%20performance%20results&In-Reply-To=%3C4EDE3700.2050501%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Need help to interpret performance results">simon at rabbitmq.com
       </A><BR>
    <I>Tue Dec  6 15:38:40 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016759.html">[rabbitmq-discuss]  Need help to interpret performance results
</A></li>
        <LI>Next message: <A HREF="016775.html">[rabbitmq-discuss] Need help to interpret performance results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16760">[ date ]</a>
              <a href="thread.html#16760">[ thread ]</a>
              <a href="subject.html#16760">[ subject ]</a>
              <a href="author.html#16760">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Tang.

On 06/12/11 15:22, tang qingxiong wrote:
&gt;<i> Some background. My project is trying to implement rabbitMQ as a
</I>&gt;<i> communications protocol as a direct replacement for OpenAMQ as it is
</I>&gt;<i> outdated. We are running C++ on windows server 2003 and used the C
</I>&gt;<i> client library to implement our solution.
</I>&gt;<i>
</I>&gt;<i> We setup 4 clustered brokers for clients to connect to. We have 20
</I>&gt;<i> clients each publishing data using direct mode to the same exchange with
</I>&gt;<i> all the queues listening to the same key.
</I>&gt;<i>
</I>&gt;<i> The idea of the setup is that if 1 client sends out data each of the
</I>&gt;<i> other 19 will receive the data.
</I>&gt;<i>
</I>&gt;<i> We ran our application and noticed that the queues actually pile up.
</I>&gt;<i> I have taken screenshoots of the management console.
</I>
You *must* enable rabbitmq_management_agent on every node in the cluster 
to be able to trust the figures you see in management - at the moment 
you're only seeing partial message rates; they are not guaranteed to add 
up *at all*.

&gt;<i> <A HREF="http://imageshack.us/f/213/overviewrabbitmq.jpg/">http://imageshack.us/f/213/overviewrabbitmq.jpg/</A>
</I>&gt;<i>
</I>&gt;<i> This shows that the ready queue which is increasing overtime and also
</I>&gt;<i> publish and deliver.
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://img690.imageshack.us/img690/903/queuesrabbitmq.jpg">http://img690.imageshack.us/img690/903/queuesrabbitmq.jpg</A>
</I>&gt;<i>
</I>&gt;<i> This image shows the incoming rate of each client is 12/s and deliver is
</I>&gt;<i> 30/s.
</I>
It's probably not.

&gt;<i> I am wondering if anyone here knows the reason on the pileup as the
</I>&gt;<i> incoming rate is less than the deliver rate.
</I>
Even when you get rabbitmq_management_agent installed, there can still 
be small pileups when mgmt shows incoming and deliver being the same, 
since the rates are averages and are not sampled at the exact same 
instant as queue lengths anyway.

But small pileups are not a problem - it is a message *queue* after all :-)

&gt;<i> (Assuming the incoming rate
</I>&gt;<i> is the rate of receiving and deliver rate is the rate of sending.).
</I>
Incoming = rate at which messages enter the queue. Deliver = rate at 
which they are consumed.

&gt;<i> Also is there anyway to further optimize the rate of speeding and
</I>&gt;<i> receiving either programmatically or configuration. Our send and receive
</I>&gt;<i> code is very similar to the example provided by the Client here
</I>
Well 30 msg/s should be nothing. You shouldn't need to optimise anything 
much.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016759.html">[rabbitmq-discuss]  Need help to interpret performance results
</A></li>
	<LI>Next message: <A HREF="016775.html">[rabbitmq-discuss] Need help to interpret performance results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16760">[ date ]</a>
              <a href="thread.html#16760">[ thread ]</a>
              <a href="subject.html#16760">[ subject ]</a>
              <a href="author.html#16760">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
