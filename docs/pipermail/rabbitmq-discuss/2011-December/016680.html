<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 2 WCF services on the same queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%202%20WCF%20services%20on%20the%20same%20queue&In-Reply-To=%3C4ED76161.1030205%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016676.html">
   <LINK REL="Next"  HREF="016684.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 2 WCF services on the same queue</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%202%20WCF%20services%20on%20the%20same%20queue&In-Reply-To=%3C4ED76161.1030205%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] 2 WCF services on the same queue">emile at rabbitmq.com
       </A><BR>
    <I>Thu Dec  1 11:13:37 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016676.html">[rabbitmq-discuss] 2 WCF services on the same queue
</A></li>
        <LI>Next message: <A HREF="016684.html">[rabbitmq-discuss] 2 WCF services on the same queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16680">[ date ]</a>
              <a href="thread.html#16680">[ thread ]</a>
              <a href="subject.html#16680">[ subject ]</a>
              <a href="author.html#16680">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/12/11 06:09, Shaun Ziyan Xu wrote:
&gt;<i> I would like to scaling out my application service and decided to use a
</I>&gt;<i> distributed queue to receive the client request, and multiple services
</I>&gt;<i> listening on the same queue. I think this is very common pooling-based
</I>&gt;<i> pattern.
</I>&gt;<i> I'm trying to use RebbitMQ with WCF binding, and when I use one client
</I>&gt;<i> and one service to works well. But when I created 2 services I found
</I>&gt;<i> when the client invoked, it gave me an exception said the
</I>&gt;<i> CommunicationObject State was Fault.
</I>

Unfortunately each Service creates a new AMQP binding and a new queue
for requests. Therefore each Service will receive all requests, leading
to the errors you see.

If you want to use WCF then you could create separate endpoints for each
worker and to round-robin at the request stage.

If you do not need to use WCF then use the RabbitMQ .net client directly
and follow the Work Queues and RPC tutorials:
<A HREF="http://www.rabbitmq.com/getstarted.html">http://www.rabbitmq.com/getstarted.html</A>

You will find C# implementations here:
<A HREF="https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/dotnet">https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/dotnet</A>


Regards

Emile

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016676.html">[rabbitmq-discuss] 2 WCF services on the same queue
</A></li>
	<LI>Next message: <A HREF="016684.html">[rabbitmq-discuss] 2 WCF services on the same queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16680">[ date ]</a>
              <a href="thread.html#16680">[ thread ]</a>
              <a href="subject.html#16680">[ subject ]</a>
              <a href="author.html#16680">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
