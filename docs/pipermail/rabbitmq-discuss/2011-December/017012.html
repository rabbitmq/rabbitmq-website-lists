<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Memory Management Concerns / Questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20Management%20Concerns%20/%20Questions&In-Reply-To=%3C3c16f984-d1cb-47ae-849f-e92d81c349e2%40y7g2000vbe.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017011.html">
   <LINK REL="Next"  HREF="017015.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Memory Management Concerns / Questions</H1>
    <B>AndyB</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20Management%20Concerns%20/%20Questions&In-Reply-To=%3C3c16f984-d1cb-47ae-849f-e92d81c349e2%40y7g2000vbe.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Memory Management Concerns / Questions">andy.berryman at channeladvisor.com
       </A><BR>
    <I>Thu Dec 22 19:53:59 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="017011.html">[rabbitmq-discuss] Memory Management Concerns / Questions
</A></li>
        <LI>Next message: <A HREF="017015.html">[rabbitmq-discuss] Memory Management Concerns / Questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17012">[ date ]</a>
              <a href="thread.html#17012">[ thread ]</a>
              <a href="subject.html#17012">[ subject ]</a>
              <a href="author.html#17012">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In my test case, I have intentionally coded the consumer to never
catch up.  During the process, I saw the publishers get blocked after
the alert, messages were streamed to disk enough to get below the
watermark, and the publishers were unblocked.  Of course they hit the
watermark soon after and the same process happened again.  I'd say
this happened maybe 4 or 5 times and then they just remained in a
blocked state.  I let the test continue running for almost 10 minutes
and they never became unblocked and the watermark alert never seemed
to clear on the server.  So I guess that means that it stopped
streaming the messages to disk or something?  Either way, I'm going to
have to come up with a way to implement something in my code to try to
avoid tying up a thread for an unknown amount of time.  Any ideas?  Is
there a way to subscribe to the watermark event or something?

Andy

On Dec 22, 2:48&#160;pm, Matthias Radestock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matth... at rabbitmq.com</A>&gt; wrote:
&gt;<i> On 22/12/11 19:35, AndyB wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; But this gets me to my next concern ... The throttling of the
</I>&gt;<i> &gt; publishers appears to be a blocking operation from within the
</I>&gt;<i> &gt; &quot;BasicPublish&quot; method and as best I can tell, I'm not seeing any
</I>&gt;<i> &gt; sort of timeout. &#160;This indefinite blocking would be pretty bad if it
</I>&gt;<i> &gt; were to occur in my production environment.
</I>&gt;<i>
</I>&gt;<i> It's not going to block indefinitely, since the paging to disk, or the
</I>&gt;<i> consumption of messages, will free up space, at which point the
</I>&gt;<i> producers are unblocked.
</I>&gt;<i>
</I>&gt;<i> Just think of this situation as being the same as a slow network /
</I>&gt;<i> server; it's indistinguishable from that.
</I>&gt;<i>
</I>&gt;<i> &gt; Is there a way that I can specify some sort of timeout for the
</I>&gt;<i> &gt; blocking operation?
</I>&gt;<i>
</I>&gt;<i> No.
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017011.html">[rabbitmq-discuss] Memory Management Concerns / Questions
</A></li>
	<LI>Next message: <A HREF="017015.html">[rabbitmq-discuss] Memory Management Concerns / Questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17012">[ date ]</a>
              <a href="thread.html#17012">[ thread ]</a>
              <a href="subject.html#17012">[ subject ]</a>
              <a href="author.html#17012">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
