<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Can't get rabbitMQ to restart after switching	machines -- some kind of DB error...?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%27t%20get%20rabbitMQ%20to%20restart%20after%20switching%0A%09machines%20--%20some%20kind%20of%20DB%20error...%3F&In-Reply-To=%3Cloom.20111206T160933-241%40post.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016776.html">
   <LINK REL="Next"  HREF="016768.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Can't get rabbitMQ to restart after switching	machines -- some kind of DB error...?</H1>
    <B>Abe</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%27t%20get%20rabbitMQ%20to%20restart%20after%20switching%0A%09machines%20--%20some%20kind%20of%20DB%20error...%3F&In-Reply-To=%3Cloom.20111206T160933-241%40post.gmane.org%3E"
       TITLE="[rabbitmq-discuss] Can't get rabbitMQ to restart after switching	machines -- some kind of DB error...?">agong at umich.edu
       </A><BR>
    <I>Tue Dec  6 15:34:32 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016776.html">[rabbitmq-discuss] Need help to interpret performance results
</A></li>
        <LI>Next message: <A HREF="016768.html">[rabbitmq-discuss] Can't get rabbitMQ to restart after switching machines -- some kind of DB error...?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16761">[ date ]</a>
              <a href="thread.html#16761">[ thread ]</a>
              <a href="subject.html#16761">[ subject ]</a>
              <a href="author.html#16761">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm running a django/celery app on EC2, with rabbitmq as the broker. The machine
I was using failed, so I fired up another instance. But since switching to the
new machine, I haven't been able to get rabbitmq-server to start up.

Here's the output:


$ sudo rabbitmq-server start
[Rabbit logo and info...]

AMQP 8-0
Copyright (C) 2007-2010 LShift Ltd., Cohesive Financial Technologies LLC., and
Rabbit Technologies Ltd.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

node          : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-212-66-181</A>
app descriptor:
  /usr/lib/rabbitmq/lib/rabbitmq_server-1.7.2/sbin/../ebin/rabbit.app
home dir      : /var/lib/rabbitmq
cookie hash   : 5+uQ077En5bpvle3HJCQMg==
log           : /var/log/rabbitmq/rabbit.log
sasl log      : /var/log/rabbitmq/rabbit-sasl.log
database dir  : /var/lib/rabbitmq/mnesia/rabbit

starting internal event notification system                           ...done
starting logging server                                               ...done
starting database                                                     ...Erlang
has closed
{&quot;init terminating in do_boot&quot;, {{nocatch, {error,{cannot_start_application,
rabbit, {bad_return, {{rabbit,start,[normal,[]]},{'EXIT',
{{case_clause,{error,{timeout_waiting_for_tables, [rabbit_user,
rabbit_user_permission, rabbit_vhost, rabbit_config, rabbit_listener,
rabbit_durable_route, rabbit_route, rabbit_reverse_route,
rabbit_durable_exchange, rabbit_exchange, rabbit_durable_queue,
rabbit_queue]}}}, [{rabbit,'-run_boot_step/1-lc$^1/1-1-',1},
{rabbit,run_boot_step,1}, {rabbit,'-start/2-lc$^0/1-0-',1}, {rabbit,start,2},
{application_master, start_it_old,4}]}}}}}}}, [{init,start_it,1},
{init,start_em,1}]}}

Crash dump was written to: erl_crash.dump
init terminating in do_boot ()





There's also an erlang daemon process running in the background.  I'm not sure
if this is important or not.

$ ps aux | grep rabbit
rabbitmq   714  0.0  0.0   1980   412 ?        S    Dec04   0:01
/usr/lib/erlang/erts-5.7.4/bin/epmd -daemon

Any ideas on how to further diagnose/solve this problem?


Thanks in advance!
- Abe


PS: I posted this question to serverfault before realizing that this might be a
better place to ask it:<A HREF="http://serverfault.com/questions/337982/">http://serverfault.com/questions/337982/</A>


</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016776.html">[rabbitmq-discuss] Need help to interpret performance results
</A></li>
	<LI>Next message: <A HREF="016768.html">[rabbitmq-discuss] Can't get rabbitMQ to restart after switching machines -- some kind of DB error...?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16761">[ date ]</a>
              <a href="thread.html#16761">[ thread ]</a>
              <a href="subject.html#16761">[ subject ]</a>
              <a href="author.html#16761">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
