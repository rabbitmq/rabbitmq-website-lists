<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] A different Processing error in logs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20A%20different%20Processing%20error%20in%20logs&In-Reply-To=%3C4EDEC216.6000408%40strategicdata.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016773.html">
   <LINK REL="Next"  HREF="016780.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] A different Processing error in logs</H1>
    <B>Toby Corkindale</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20A%20different%20Processing%20error%20in%20logs&In-Reply-To=%3C4EDEC216.6000408%40strategicdata.com.au%3E"
       TITLE="[rabbitmq-discuss] A different Processing error in logs">toby.corkindale at strategicdata.com.au
       </A><BR>
    <I>Wed Dec  7 01:32:06 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016773.html">[rabbitmq-discuss] A different Processing error in logs
</A></li>
        <LI>Next message: <A HREF="016780.html">[rabbitmq-discuss] A different Processing error in logs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16774">[ date ]</a>
              <a href="thread.html#16774">[ thread ]</a>
              <a href="subject.html#16774">[ subject ]</a>
              <a href="author.html#16774">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/12/11 11:55, Toby Corkindale wrote:
&gt;<i> Sorry about posting more of these; as I've said before, these errors are
</I>&gt;<i> quite opaque to me, and I wish I could interpret them unaided.
</I>&gt;<i> How do other developers here deal with them? (Or am I just unlucky in
</I>&gt;<i> seeming to hit them often)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This message occurs during message *reception* this time, and only seems
</I>&gt;<i> to occur when there are several pending messages.
</I>&gt;<i> It's worth noting that the messages arrive after I've recently
</I>&gt;<i> unsubscribed from a queue - but that was not the queue mentioned in the
</I>&gt;<i> error message.
</I>
This feels like a RabbitMQ or STOMP bug to me, but here's some more info 
on what causes it to occur so you can decide.

1) Create two queues, with ack=client, subscribe to both, using STOMP.
2) Dump a bunch of messages into first queue.
3) Upon receiving one message, unsubscribe from the first queue only, 
and then ack the message.
4) Note that you still get delivered some more messages from that first 
queue.
5) Attempt to send a client ACK back for one of these messages, which 
seems to work fine.
6) Now attempt to send another message through on the second 
(still-subscribed) queue -- rabbitmq generates the Processing Error.


In my case, I can avoid the error occurring by not sending a client ACK 
back for messages received on a queue which I am no longer subscribed to.

-Toby


&gt;<i> =ERROR REPORT==== 7-Dec-2011::00:51:03 ===
</I>&gt;<i> STOMP error frame sent:
</I>&gt;<i> Message: &quot;Processing error&quot;
</I>&gt;<i> Detail: &quot;Processing error\n&quot;
</I>&gt;<i> Server private detail: {badarg,
</I>&gt;<i> [{dict,fetch,
</I>&gt;<i> [&lt;&lt;&quot;T_commander&quot;&gt;&gt;,
</I>&gt;<i> {dict,1,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i> [[&lt;&lt;&quot;T_primary-queue&quot;&gt;&gt;|
</I>&gt;<i> {subscription,
</I>&gt;<i> &quot;/topic/websurvey.commander.18680&quot;,
</I>&gt;<i>
</I>&gt;<i> &lt;0.28312.182&gt;,true,&quot;id='primary-queue'&quot;}]],
</I>&gt;<i> [],[],[],[],[]}}}]},
</I>&gt;<i> {rabbit_stomp_processor,ack_action,4},
</I>&gt;<i> {rabbit_stomp_processor,process_request,3},
</I>&gt;<i> {gen_server2,handle_msg,2},
</I>&gt;<i> {proc_lib,init_p_do_apply,3}]}
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>

-- 
.signature
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016773.html">[rabbitmq-discuss] A different Processing error in logs
</A></li>
	<LI>Next message: <A HREF="016780.html">[rabbitmq-discuss] A different Processing error in logs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16774">[ date ]</a>
              <a href="thread.html#16774">[ thread ]</a>
              <a href="subject.html#16774">[ subject ]</a>
              <a href="author.html#16774">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
