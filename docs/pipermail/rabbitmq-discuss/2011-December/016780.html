<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] A different Processing error in logs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20A%20different%20Processing%20error%20in%20logs&In-Reply-To=%3C19B8A7C8-B171-4EE4-95CF-E2599F25CAB5%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016774.html">
   <LINK REL="Next"  HREF="016789.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] A different Processing error in logs</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20A%20different%20Processing%20error%20in%20logs&In-Reply-To=%3C19B8A7C8-B171-4EE4-95CF-E2599F25CAB5%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] A different Processing error in logs">steve at rabbitmq.com
       </A><BR>
    <I>Wed Dec  7 12:27:28 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016774.html">[rabbitmq-discuss] A different Processing error in logs
</A></li>
        <LI>Next message: <A HREF="016789.html">[rabbitmq-discuss] A different Processing error in logs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16780">[ date ]</a>
              <a href="thread.html#16780">[ thread ]</a>
              <a href="subject.html#16780">[ subject ]</a>
              <a href="author.html#16780">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Toby,

Thank you for that description. I will attempt to reproduce this locally.  At
first glance it appears that the reception of messages after UNSUBSCRIBE is
counter-intuitive, and the interference with the second queue sounds suspicious.

Could we see some of your code, please, or could you break this down into a
series of STOMP frames, so we can see what the parameters are?  A trace of the
STOMP frames would be best of all.

Some questions:

Are the subscriber and sender the same process?
Can you say exactly what type of queue you create/subscribe to?
In 2) is it necessary to SEND more than 2 messages?
In 3) how do you manage the connection when you stop reading it to unsubscribe?
Do you need to unsubscribe before ack to get the problem in 6?
In 6) is the SEND from the same process again?

If possible, a failing code sample would be helpful.

One of the trials I would perform is to try sending on queue 2 after every
interaction with queue 1.  Of course, that may make it necessary to field
messages from the second subscription at the same time.

I'll keep you informed about my progress.

Steve Powell  (a working bunny)
----------some more definitions from the SPD----------
avoirdupois (phr.) 'Would you like peas with that?'
distribute (v.) To denigrate an award ceremony.
definite (phr.) 'It's hard of hearing, I think.'
modest (n.) The most mod.

On 7 Dec 2011, at 01:32, Toby Corkindale wrote:
&gt;<i> This feels like a RabbitMQ or STOMP bug to me, but here's some more info on
</I>&gt;<i> what causes it to occur so you can decide.
</I>&gt;<i> 
</I>&gt;<i> 1) Create two queues, with ack=client, subscribe to both, using STOMP.
</I>&gt;<i> 2) Dump a bunch of messages into first queue.
</I>&gt;<i> 3) Upon receiving one message, unsubscribe from the first queue only, and
</I>&gt;<i>    then ack the message.
</I>&gt;<i> 4) Note that you still get delivered some more messages from that first
</I>&gt;<i>    queue.
</I>&gt;<i> 5) Attempt to send a client ACK back for one of these messages, which seems
</I>&gt;<i>    to work fine.
</I>&gt;<i> 6) Now attempt to send another message through on the second
</I>&gt;<i>    (still-subscribed) queue -- rabbitmq generates the Processing Error.
</I>&gt;<i> 
</I></PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016774.html">[rabbitmq-discuss] A different Processing error in logs
</A></li>
	<LI>Next message: <A HREF="016789.html">[rabbitmq-discuss] A different Processing error in logs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16780">[ date ]</a>
              <a href="thread.html#16780">[ thread ]</a>
              <a href="subject.html#16780">[ subject ]</a>
              <a href="author.html#16780">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
