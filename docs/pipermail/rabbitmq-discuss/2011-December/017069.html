<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ hangs, does not accept connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20hangs%2C%20does%20not%20accept%20connections&In-Reply-To=%3CCANTUpDBbvHcQx%2BpANZLTxYiH010UmXZJDUweW9XwOLLwRT8gMw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017067.html">
   <LINK REL="Next"  HREF="017070.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ hangs, does not accept connections</H1>
    <B>Dmitri Minaev</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20hangs%2C%20does%20not%20accept%20connections&In-Reply-To=%3CCANTUpDBbvHcQx%2BpANZLTxYiH010UmXZJDUweW9XwOLLwRT8gMw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ hangs, does not accept connections">minaev at gmail.com
       </A><BR>
    <I>Fri Dec 30 15:34:38 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="017067.html">[rabbitmq-discuss] RabbitMQ hangs, does not accept connections
</A></li>
        <LI>Next message: <A HREF="017070.html">[rabbitmq-discuss] RabbitMQ hangs, does not accept connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17069">[ date ]</a>
              <a href="thread.html#17069">[ thread ]</a>
              <a href="subject.html#17069">[ subject ]</a>
              <a href="author.html#17069">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you very much. I will install it today or tomorrow, but our
system was switched over to another installation. Besides, I do not
expect intensive load till after 10 January, the end of Russian New
Year vacations.

But I am still curious about the fact that until about two months ago
our experience with RabbitMQ was very good. We had version 2.1 or 2.2
then and it worked fine. The problems started when I moved Rabbit to
another server and upgraded it. Either the bug was introduced between
versions 2.2 and 2.6.1, or it is related to some changes in the server
environment. Is it possible to find out whether versions 2.1-2.2 were
also influenced by the problem?


On 30 December 2011 18:02, Matthias Radestock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt; wrote:
&gt;<i> Dmitri,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 30/12/11 12:11, Matthias Radestock wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> When the tcp stack notifies the acceptor of an error
</I>&gt;&gt;<i> other than 'closed', the acceptor carries on but does not invoke
</I>&gt;&gt;<i> prim_inet:async_accept/2 to be notified of the next connection attempt.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I will file a bug for this. Should be easy to fix, though we cannot be
</I>&gt;&gt;<i> certain that this is definitely the problem.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Here's a proposed fix:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://hg.rabbitmq.com/rabbitmq-server/rev/ca0392ca0fc1">http://hg.rabbitmq.com/rabbitmq-server/rev/ca0392ca0fc1</A>
</I>&gt;<i>
</I>&gt;<i> I am attaching a tcp_acceptor.beam with that fix, compiled for R15, that you
</I>&gt;<i> can drop in place of the existing file. I'd be interested a) if that solves
</I>&gt;<i> the problem for you, and b) what error gets logged - watch out for s.t. like
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 30-Dec-2011::13:45:01 ===
</I>&gt;<i> failed to accept TCP connection on [::]:5672: some_error
</I>&gt;<i>
</I>&gt;<i> in the logs.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>


-- 
With best regards,
Dmitri Minaev
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017067.html">[rabbitmq-discuss] RabbitMQ hangs, does not accept connections
</A></li>
	<LI>Next message: <A HREF="017070.html">[rabbitmq-discuss] RabbitMQ hangs, does not accept connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17069">[ date ]</a>
              <a href="thread.html#17069">[ thread ]</a>
              <a href="subject.html#17069">[ subject ]</a>
              <a href="author.html#17069">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
