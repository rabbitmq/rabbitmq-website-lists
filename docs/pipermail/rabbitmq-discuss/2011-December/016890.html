<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Reliable &quot;publishing&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Reliable%20%22publishing%22&In-Reply-To=%3CCAOn7oW8FiHVjM%2Bnrcc%3DSvcF5k0cErXX9t36jdOkFPDnjxpZk9Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016889.html">
   <LINK REL="Next"  HREF="016902.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Reliable &quot;publishing&quot;</H1>
    <B>Simone Busoli</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Reliable%20%22publishing%22&In-Reply-To=%3CCAOn7oW8FiHVjM%2Bnrcc%3DSvcF5k0cErXX9t36jdOkFPDnjxpZk9Q%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Reliable &quot;publishing&quot;">simone.busoli at gmail.com
       </A><BR>
    <I>Thu Dec 15 00:15:32 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016889.html">[rabbitmq-discuss] RabbitMq and POE::Component::Client::AMQP - Re-delivery to same client?
</A></li>
        <LI>Next message: <A HREF="016902.html">[rabbitmq-discuss] Reliable &quot;publishing&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16890">[ date ]</a>
              <a href="thread.html#16890">[ thread ]</a>
              <a href="subject.html#16890">[ subject ]</a>
              <a href="author.html#16890">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, I'm trying to achieve some degree of reliability in publishing of
messages in order to guarantee that a message published by some peer gets
to the broker. I am using two strategies here:

   - wrap access to the channel for publishing so that publishes done by
   the application are first enqueued in a in-memory queue and then published
   to the broker only when it is known to be reachable. I am using the .NET
   client ConnectionShutdown events to figure out whether the broker is
   reachable, and rescheduling connection in case of failure. I have one
   thread emptying the in-memory queue which runs when the connection is
   established and pauses when it is not available
   - use publisher confirms and keeping track of the messages published but
   not acked or nacked by the broker

A couple of questions:

   - Is this a sensible approach? I have looked into how Shovel and
   (briefly) Federation handle publisher confirms when enabled but I didn't
   spot anything being done with unconfirmed messages except for removing them
   as soon as an ack from the broker arrives
   - What should I be doing with unconfirmed messages which have remained
   unconfirmed for some time? The broker is supposed to guarantee that either
   an ack or nack is sent, but what if the peer for any reason doesn't receive
   them for one or more messages? The unconfirmed deliveries will stay in the
   local collection/set/[wherever it makes sense to keep them in memory] and
   you would have to handle them first or then

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111215/9d6022b2/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111215/9d6022b2/attachment.htm</A>&gt;
</PRE>






































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016889.html">[rabbitmq-discuss] RabbitMq and POE::Component::Client::AMQP - Re-delivery to same client?
</A></li>
	<LI>Next message: <A HREF="016902.html">[rabbitmq-discuss] Reliable &quot;publishing&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16890">[ date ]</a>
              <a href="thread.html#16890">[ thread ]</a>
              <a href="subject.html#16890">[ subject ]</a>
              <a href="author.html#16890">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
