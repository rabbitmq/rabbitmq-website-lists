<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Network failures recovery with RabbitMQ	Javaclient
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Network%20failures%20recovery%20with%20RabbitMQ%0A%09Javaclient&In-Reply-To=%3C88E590DC4586974D825FC82AE798294E520A47EB%40GSVCLU04.ges.ferlan.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016813.html">
   <LINK REL="Next"  HREF="016819.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Network failures recovery with RabbitMQ	Javaclient</H1>
    <B>Busoli, Simone</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Network%20failures%20recovery%20with%20RabbitMQ%0A%09Javaclient&In-Reply-To=%3C88E590DC4586974D825FC82AE798294E520A47EB%40GSVCLU04.ges.ferlan.it%3E"
       TITLE="[rabbitmq-discuss] Network failures recovery with RabbitMQ	Javaclient">Simone.Busoli at ferrari.com
       </A><BR>
    <I>Fri Dec  9 15:41:41 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016813.html">[rabbitmq-discuss] Network failures recovery with RabbitMQ	Javaclient
</A></li>
        <LI>Next message: <A HREF="016819.html">[rabbitmq-discuss] Network failures recovery with RabbitMQ	Javaclient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16815">[ date ]</a>
              <a href="thread.html#16815">[ thread ]</a>
              <a href="subject.html#16815">[ subject ]</a>
              <a href="author.html#16815">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>inline

&gt;<i> Simone,
</I>&gt;<i> 
</I>&gt;<i> Thank you, this is exactly what I have in mind for publishers. For consumers
</I>&gt;<i> there is a bunch of questions that need to be answered:
</I>&gt;<i> 
</I>&gt;<i> 1. Should recovering apps redeclare AMQP entities they use or use passive
</I>&gt;<i> declares?
</I>
Currently I do, yes, although it somewhat defeats the purpose of durable entities which would fit well here. Currently I'm recreating everything from scratch when the connection goes down, and handle recovery of previous data that consumers may need at the application level. I'm however planning to start considering to use durable entities.

&gt;<i> 2. If I have 3 threads each with its own consumer (on separate channels, of
</I>&gt;<i> course), how do I go about reopening their channels after AMQP connection
</I>&gt;<i> is back up?
</I>
I'm dealing with this by having a single channel with one consumer which consumes from all the queues the application needs to read data from. What kind of limitation do you see in keeping it single threaded?

&gt;<i> 3. How do I detect that reconnection has succeeded?
</I>
In the .NET client when you Open the connection and no exception is thrown I think you can safely assume that the connection has been established.

&gt;<i> 
</I>&gt;<i> So if I understand it correctly, your approach is to have one thread that
</I>&gt;<i> consumes all messages and then dispatches them to different parts of the
</I>&gt;<i> application, is my understanding correct?
</I>
Yes, correct. This entails that your application has to cope with messages being consumed by threads that the application does not know directly (as they belong to the messaging library), but I found it to be easier to do that than to consume from rabbit queues from multiple threads with multiple channels. Oh, I didn't specify it explicitly but I also use one single channel for publishing and one single channel for consuming.

&gt;<i> 
</I>&gt;<i> MK
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://github.com/michaelklishin">http://github.com/michaelklishin</A>
</I>&gt;<i> <A HREF="http://twitter.com/michaelklishin">http://twitter.com/michaelklishin</A>
</I>

_________________________________________________________________________________________________________________
Questo messaggio e da intendersi esclusivamente ad uso del destinatario e puo contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non e il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione e 
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from 
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the 
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly 
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from 
your system.
_________________________________________________________________________________________________________________


</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016813.html">[rabbitmq-discuss] Network failures recovery with RabbitMQ	Javaclient
</A></li>
	<LI>Next message: <A HREF="016819.html">[rabbitmq-discuss] Network failures recovery with RabbitMQ	Javaclient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16815">[ date ]</a>
              <a href="thread.html#16815">[ thread ]</a>
              <a href="subject.html#16815">[ subject ]</a>
              <a href="author.html#16815">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
