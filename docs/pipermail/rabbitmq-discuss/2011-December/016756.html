<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] auto-delete exchange kills connections on	consumer close?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20auto-delete%20exchange%20kills%20connections%20on%0A%09consumer%20close%3F&In-Reply-To=%3C23512495.56.1323151241691.JavaMail.geo-discussion-forums%40prnx7%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016793.html">
   <LINK REL="Next"  HREF="016779.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] auto-delete exchange kills connections on	consumer close?</H1>
    <B>Keith Irwin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20auto-delete%20exchange%20kills%20connections%20on%0A%09consumer%20close%3F&In-Reply-To=%3C23512495.56.1323151241691.JavaMail.geo-discussion-forums%40prnx7%3E"
       TITLE="[rabbitmq-discuss] auto-delete exchange kills connections on	consumer close?">keith at zentrope.com
       </A><BR>
    <I>Tue Dec  6 06:00:41 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016793.html">[rabbitmq-discuss] Using RabbitMQ for desktop-style messaging	in a web app
</A></li>
        <LI>Next message: <A HREF="016779.html">[rabbitmq-discuss] auto-delete exchange kills connections on consumer close?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16756">[ date ]</a>
              <a href="thread.html#16756">[ thread ]</a>
              <a href="subject.html#16756">[ subject ]</a>
              <a href="author.html#16756">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Folks--

I'm using RabbitMQ (2.7.0 all around + java with Clojure) to send small 
little status messages around here and there. It works great for that. 
Because I don't care if these messages get dropped if, say, RabbitMQ goes 
down, or if some client messes up here or there, I want to keep everything 
temporary. When all the clients are stopped, I'm thinking, RabbitMQ should 
be back to its default state.

So, when I use exchangeDeclare, I set auto-delete for the exchange to true. 
Here are my expectations:

 - When there are no more clients consuming or publishing to that 
particular exchange, it'll disappear.

What ACTUALLY happens is that when the first user of that exchange is 
closed (by calling close on a channel), the exchange is deleted, and all 
other users of that exchange get disconnected.

Is this a bug?

Should you always set autoDelete to false if there is ever going to be more 
than one client using an exchange? And isn't there always going to be 
another client using that exchange given there's no point in using an MQ 
system otherwise?

Please, set me straight! ;)

Keith

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111205/57a57701/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111205/57a57701/attachment.htm</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016793.html">[rabbitmq-discuss] Using RabbitMQ for desktop-style messaging	in a web app
</A></li>
	<LI>Next message: <A HREF="016779.html">[rabbitmq-discuss] auto-delete exchange kills connections on consumer close?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16756">[ date ]</a>
              <a href="thread.html#16756">[ thread ]</a>
              <a href="subject.html#16756">[ subject ]</a>
              <a href="author.html#16756">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
