<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Initial cluster set-up questoin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Initial%20cluster%20set-up%20questoin&In-Reply-To=%3C4EE86297.6090908%40tele2.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016859.html">
   <LINK REL="Next"  HREF="016853.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Initial cluster set-up questoin</H1>
    <B>Simon Loewenthal/NL/Tele2</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Initial%20cluster%20set-up%20questoin&In-Reply-To=%3C4EE86297.6090908%40tele2.com%3E"
       TITLE="[rabbitmq-discuss] Initial cluster set-up questoin">simon.loewenthal at tele2.com
       </A><BR>
    <I>Wed Dec 14 08:47:19 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016859.html">[rabbitmq-discuss] small bug deleting a user from the management interface
</A></li>
        <LI>Next message: <A HREF="016853.html">[rabbitmq-discuss] Initial cluster set-up questoin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16852">[ date ]</a>
              <a href="thread.html#16852">[ thread ]</a>
              <a href="subject.html#16852">[ subject ]</a>
              <a href="author.html#16852">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>	

Hi,

	I have installed Rabbit &amp; Erlang and followed these instruction
<A HREF="http://www.rabbitmq.com/clustering.html">http://www.rabbitmq.com/clustering.html</A> to set-up a two node cluster.
Both nodes are be started, but when node 2 attempts to join node 1 it
fails.

There are no firewalls between each other. Both are on the same vlan and
a /22 subnet.

O/S: RHEL 6.2  Fully patched from RHN.

Node 1:

# rabbitmq-server --detached
Activating RabbitMQ plugins ...
6 plugins activated:
* amqp_client-2.7.0
* mochiweb-1.3-rmq2.7.0-git
* rabbitmq_management-2.7.0
* rabbitmq_management_agent-2.7.0
* rabbitmq_mochiweb-2.7.0
* webmachine-1.7.0-rmq2.7.0-hg

** Found 0 name clashes in code paths

+---+   +---+
|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   +---+   +-------+
</I>|<i>                   |
</I>|<i> RabbitMQ  +---+   |
</I>|<i>           |   |   |
</I>|<i>   v2.7.0  +---+   |
</I>|<i>                   |
</I>+-------------------+
AMQP 0-9-1 / 0-9 / 0-8
Copyright (C) 2007-2011 VMware, Inc.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app007</A>
app descriptor :
/usr/lib/rabbitmq/lib/rabbitmq_server-2.7.0/sbin/../ebin/rabbit.app
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : Fm+somLGFoQYy1H+2FUteQ==
log            : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app007.log</A>
sasl log       : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app007-sasl.log</A>
database dir   : /var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app007</A>
erlang version : 5.8.5

-- rabbit boot start
starting file handle cache server
...done
starting worker pool
...done
starting database
...done
starting codec correctness check
...done
-- external infrastructure ready
starting statistics event manager
...done
starting logging server
...done
starting plugin registry
...done
starting auth mechanism amqplain
...done
starting auth mechanism cr-demo
...done
starting auth mechanism plain
...done
starting exchange type direct
...done
starting exchange type fanout
...done
starting exchange type headers
...done
starting exchange type topic
...done
-- kernel ready
starting node monitor
...done
starting cluster delegate
...done
starting guid generator
...done
starting alarm handler
...done
starting memory monitor
...done
-- core initialized
starting empty DB check
...done
starting management agent
...done
starting exchange, queue and binding recovery
...done
starting mirror queue slave sup
...done
starting adding mirrors to queues
...done
-- message delivery logic ready
starting error log relay
...done
starting networking
...done
starting notify cluster nodes
...done
starting direct_client
...done

broker running



# rabbitmqctl cluster_status
Cluster status of node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app007</A>' ...
[{nodes,[{disc,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app007</A>']}]},{running_nodes,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app007</A>']}]
...done.


Node 2:
# rabbitmq-server --detached
Activating RabbitMQ plugins ...
6 plugins activated:
* amqp_client-2.7.0
* mochiweb-1.3-rmq2.7.0-git
* rabbitmq_management-2.7.0
* rabbitmq_management_agent-2.7.0
* rabbitmq_mochiweb-2.7.0
* webmachine-1.7.0-rmq2.7.0-hg

** Found 0 name clashes in code paths
[SNIP]
node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app008</A>
app descriptor :
/usr/lib/rabbitmq/lib/rabbitmq_server-2.7.0/sbin/../ebin/rabbit.app
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : VOYILJRa2vmMlRly95DYQw==
log            : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app008.log</A>
sasl log       : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app008-sasl.log</A>
database dir   : /var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app008</A>
erlang version : 5.8.5
[SNIP]
broker running
Erlang has closed

# rabbitmqctl stop_app
Stopping node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app008</A>' ...
...done.
[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at iuu-app008</A> ~]# rabbitmqctl reset
Resetting node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app008</A>' ...
...done.

# rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app007</A>
Clustering node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app008</A>' with ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app007</A>'] ...
Error:
{no_running_cluster_nodes,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app007</A>'],['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at iuu-app007</A>']}

I have tried the command above with the FQDN and had the same error
returned.


Any ideas where I could look?

Simon.

-- 
Simon Loewenthal/Tele2
GSM: +31 6 2000 5427

******** IMPORTANT NOTICE ********
This e-mail (including any attachments) may contain information
that is confidential or otherwise protected from disclosure and
it is intended only for the addressees. If you are not the intended
recipient, please kindly refrain from copying or distribution.
Other use of information contained in this e-mail (and its attachments)
is frowned upon. If you have received this e-mail in error, kindly
notify us immediately by telephone or e-mail and, if possible, kindly
delete the message (including any attachments) from your system. Of
course, this is not legal advice, nor is it a contract. If it were a
contract, it would have an exchange of value and affirmative agreement
by both parties. If it were legal advice, it should be written by a
lawyer and would have a bill attached.

It ought to be obvious my views in this Email might not represent my
employer's views, &amp; vice-verse. Please note that e-mail messages may
contain computer viruses or other defects. I presume that you understand
the concept of a computer virus, and took reasonable precautions.
</PRE>





































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016859.html">[rabbitmq-discuss] small bug deleting a user from the management interface
</A></li>
	<LI>Next message: <A HREF="016853.html">[rabbitmq-discuss] Initial cluster set-up questoin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16852">[ date ]</a>
              <a href="thread.html#16852">[ thread ]</a>
              <a href="subject.html#16852">[ subject ]</a>
              <a href="author.html#16852">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
