<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 404, &quot;NOT_FOUND - no queue 'foo' in vhost '/'&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20404%2C%20%22NOT_FOUND%20-%20no%20queue%20%27foo%27%20in%20vhost%20%27/%27%22&In-Reply-To=%3CCB163872.2448B%25mpietrek%40skytap.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017079.html">
   <LINK REL="Next"  HREF="016952.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 404, &quot;NOT_FOUND - no queue 'foo' in vhost '/'&quot;</H1>
    <B>Matt Pietrek</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20404%2C%20%22NOT_FOUND%20-%20no%20queue%20%27foo%27%20in%20vhost%20%27/%27%22&In-Reply-To=%3CCB163872.2448B%25mpietrek%40skytap.com%3E"
       TITLE="[rabbitmq-discuss] 404, &quot;NOT_FOUND - no queue 'foo' in vhost '/'&quot;">mpietrek at skytap.com
       </A><BR>
    <I>Tue Dec 20 21:04:50 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="017079.html">[rabbitmq-discuss] Memory leak when using shovels?
</A></li>
        <LI>Next message: <A HREF="016952.html">[rabbitmq-discuss] 404,	&quot;NOT_FOUND - no queue 'foo' in vhost '/'&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16948">[ date ]</a>
              <a href="thread.html#16948">[ thread ]</a>
              <a href="subject.html#16948">[ subject ]</a>
              <a href="author.html#16948">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm encountering a strange situation that I don't think has been covered by
other threads.

I'm running RabbitMQ 2.7.0 on Ubuntu 10.04 LTS with the stock PIKA 0.9.5
client, and taking advantage of mirrored queues.

My scenario:
* I have two apps that ping-pong messages to each other using two queues (a
pseudo-RPC type of thing.)
* The apps talk to RabbitMQ via a keepalived monitored Virtual IP.
* Before starting the apps, I predeclare both queues.
* In the RabbitMQ management Web UI, I see both nodes and the Queues tab
shows both queues as &quot;HA D&quot;, so I believe they're mirrored.
* Start up the two ping-ponging apps, let run for few seconds. Note messages
flowing back and forth.
* Stop the primary node (rabbitmqctl stop)
* Keepalived fails over the Virtual IP
* After a few seconds I see one of the apps resume processing messages as
expected.
* Shortly thereafter the other app gets an exception from
channel.basic_get(), which is the 404 &quot;no queue found&quot; exception.
* I don't believe it's a connection error, as during my queue reads, my
logic catches AMQPConnectionErrors exceptions and retries after a short
wait.
I've looked at my code carefully, and there's no calls to queue_declare
other than the original creation (item 3, above.)

Any thoughts on what could be wrong?

Thanks much,

Matt



-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111220/a94587f5/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111220/a94587f5/attachment.htm</A>&gt;
</PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017079.html">[rabbitmq-discuss] Memory leak when using shovels?
</A></li>
	<LI>Next message: <A HREF="016952.html">[rabbitmq-discuss] 404,	&quot;NOT_FOUND - no queue 'foo' in vhost '/'&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16948">[ date ]</a>
              <a href="thread.html#16948">[ thread ]</a>
              <a href="subject.html#16948">[ subject ]</a>
              <a href="author.html#16948">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
