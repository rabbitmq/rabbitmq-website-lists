<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] active/active message persistence problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20active/active%20message%20persistence%20problem&In-Reply-To=%3C20111122113442.GD32040%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016442.html">
   <LINK REL="Next"  HREF="016453.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] active/active message persistence problem</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20active/active%20message%20persistence%20problem&In-Reply-To=%3C20111122113442.GD32040%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] active/active message persistence problem">matthew at rabbitmq.com
       </A><BR>
    <I>Tue Nov 22 11:34:43 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016442.html">[rabbitmq-discuss] active/active message persistence problem
</A></li>
        <LI>Next message: <A HREF="016453.html">[rabbitmq-discuss] How rabbitMq Works betwwen two application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16455">[ date ]</a>
              <a href="thread.html#16455">[ thread ]</a>
              <a href="subject.html#16455">[ subject ]</a>
              <a href="author.html#16455">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Nov 22, 2011 at 12:54:57AM -0600, Cameron Davison wrote:
&gt;<i> You can run &quot;rabbitmqctl list_queues name slave_pids
</I>&gt;<i> synchronised_slave_pids&quot; to see if the cluster is synchronized or not
</I>&gt;<i> but I can tell you right now that they will not be. In step 3 when you
</I>&gt;<i> start vm1 back up and it is the slave. It is telling you that there
</I>&gt;<i> are 10 messages in the vm2 queue. When you talk to a broker in a
</I>&gt;<i> cluster it will talk to the master queue. VM1 will not be synchronized
</I>&gt;<i> until all 10 messages are read out of the vm2 queue, because rabbitmq
</I>&gt;<i> mirrored clusters do not read old messages that are already in the
</I>&gt;<i> master queue. The slave reads the tail of the new message being sent
</I>&gt;<i> to the master and expects that once it has been long enough then it
</I>&gt;<i> will catch up to the same state as the master.
</I>
Indeed, this is precisely correct. There is currently no eager
synchronisation of the queue from the master to any slaves. There is
only passive synchronisation which is achieved by draining the queue of
the unsynchronised queue head.

&gt;<i> <A HREF="http://www.rabbitmq.com/ha.html">http://www.rabbitmq.com/ha.html</A> &quot;Unsynchronised Slaves&quot; I think does a
</I>&gt;<i> good job of explaining it.
</I>
I'm glad someone's read it! ;)

Matthew
</PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016442.html">[rabbitmq-discuss] active/active message persistence problem
</A></li>
	<LI>Next message: <A HREF="016453.html">[rabbitmq-discuss] How rabbitMq Works betwwen two application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16455">[ date ]</a>
              <a href="thread.html#16455">[ thread ]</a>
              <a href="subject.html#16455">[ subject ]</a>
              <a href="author.html#16455">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
