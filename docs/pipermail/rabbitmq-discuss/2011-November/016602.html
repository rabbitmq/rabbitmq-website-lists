<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Restore parts of rabbitmq mnesia database after	crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Restore%20parts%20of%20rabbitmq%20mnesia%20database%20after%0A%09crash&In-Reply-To=%3Cbc48cc57-17b0-47a9-b6f1-03278cb6599b%40s7g2000yqa.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016631.html">
   <LINK REL="Next"  HREF="016597.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Restore parts of rabbitmq mnesia database after	crash</H1>
    <B>Christopher Grebs</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Restore%20parts%20of%20rabbitmq%20mnesia%20database%20after%0A%09crash&In-Reply-To=%3Cbc48cc57-17b0-47a9-b6f1-03278cb6599b%40s7g2000yqa.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Restore parts of rabbitmq mnesia database after	crash">cgrebs at googlemail.com
       </A><BR>
    <I>Mon Nov 28 17:34:47 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016631.html">[rabbitmq-discuss] Null messages in RabbitMq 2.6.1. Can't	recover
</A></li>
        <LI>Next message: <A HREF="016597.html">[rabbitmq-discuss] Restore parts of rabbitmq mnesia database after	crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16602">[ date ]</a>
              <a href="thread.html#16602">[ thread ]</a>
              <a href="subject.html#16602">[ subject ]</a>
              <a href="author.html#16602">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey there everyone,

we had a problem with our rabbitmq server that crashed and did not
start properly but aborted with this message:

Mnesia(<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mq01</A>): ** ERROR ** (core dumped to file: &quot;/var/lib/
rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">MnesiaCore.rabbit at mq01_1322_497494_760300</A>&quot;)
 ** FATAL ** Failed to merge schema: Bad cookie in table definition
rabbit_queue: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mq01</A> = {cstruct,rabbit_queue,set,
[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mq02</A><A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at mq01</A>],[],[],0,read_write,[],[],false,amqqueue,
[name,durable,auto_delete,exclusive_owner,arguments,pid],[],[],
{{1298,52135,154226}<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at mq02</A>},{{5,0},{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mq02</A>,
{1312,883667,389675}}}}, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mq02</A> = {cstruct,rabbit_queue,set,
[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mq02</A>],[],[],0,read_write,[],[],false,amqqueue,
[name,durable,auto_delete,exclusive_owner,arguments,pid],[],[],
{{1318,853352,227541}<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at mq02</A>},{{2,0},[]}}


Indeed the message is kinda not the problem because we were working
with some partly-configured rabbitmq-cluster that was on the one hand
active and on the other hand not active so maybe this was expected.
Once I backed up the old mnesia database and created a new one
everything started to work properly.

But in fact it may happened that there was some required data in the
mnesia database and so the question is if there is any way to get out
messages/userdata/configuration of the &quot;old&quot; mnesia database?

Thanks!

Best,
Christopher.
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016631.html">[rabbitmq-discuss] Null messages in RabbitMq 2.6.1. Can't	recover
</A></li>
	<LI>Next message: <A HREF="016597.html">[rabbitmq-discuss] Restore parts of rabbitmq mnesia database after	crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16602">[ date ]</a>
              <a href="thread.html#16602">[ thread ]</a>
              <a href="subject.html#16602">[ subject ]</a>
              <a href="author.html#16602">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
