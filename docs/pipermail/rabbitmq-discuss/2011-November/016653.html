<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Message TTL working fine in 2.6.1,	broken in 2.7.0?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20TTL%20working%20fine%20in%202.6.1%2C%0A%09broken%20in%202.7.0%3F&In-Reply-To=%3CCACETAqiGo9hSGYxEr-zbL-aZ3Zm0eUJ5bkh-7Qm3A3gHfYD9sg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016649.html">
   <LINK REL="Next"  HREF="016654.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Message TTL working fine in 2.6.1,	broken in 2.7.0?</H1>
    <B>Andrew Maizels</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20TTL%20working%20fine%20in%202.6.1%2C%0A%09broken%20in%202.7.0%3F&In-Reply-To=%3CCACETAqiGo9hSGYxEr-zbL-aZ3Zm0eUJ5bkh-7Qm3A3gHfYD9sg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Message TTL working fine in 2.6.1,	broken in 2.7.0?">andrew.maizels at gmail.com
       </A><BR>
    <I>Wed Nov 30 03:46:08 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016649.html">[rabbitmq-discuss] Publish on a queue, Wait for Reply on another, add time out for the monitor (Select Connection)
</A></li>
        <LI>Next message: <A HREF="016654.html">[rabbitmq-discuss] Message TTL working fine in 2.6.1, broken in 2.7.0?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16653">[ date ]</a>
              <a href="thread.html#16653">[ thread ]</a>
              <a href="subject.html#16653">[ subject ]</a>
              <a href="author.html#16653">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.

We push about 1TB of data through RabbitMQ per day, and we use TTL-limited
queues extensively to prevent slow/dead consumers from taking out the
server.  While we had some hiccups with 2.5, this has been completely
reliable since we upgraded to 2.6.

2.7, on the other hand, seems to ignore TTL limits.  We had a slow consumer
leave about 1.8 million 40KB messages on the queue, which filled up the
available disk and brought RabbitMQ down.

We've reverted to 2.6.1 for now, and everything is working again.

Has anyone else experienced this?  Is there anything we need to configure
in 2.7 to make TTL work as expected, or is this a bug?

The queues are durable and bound to a single exchange; no special
parameters apart from the TTL, which is typically 600000 milliseconds.

Thanks,

Andrew Maizels
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111130/cba7057e/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111130/cba7057e/attachment.htm</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016649.html">[rabbitmq-discuss] Publish on a queue, Wait for Reply on another, add time out for the monitor (Select Connection)
</A></li>
	<LI>Next message: <A HREF="016654.html">[rabbitmq-discuss] Message TTL working fine in 2.6.1, broken in 2.7.0?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16653">[ date ]</a>
              <a href="thread.html#16653">[ thread ]</a>
              <a href="subject.html#16653">[ subject ]</a>
              <a href="author.html#16653">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
