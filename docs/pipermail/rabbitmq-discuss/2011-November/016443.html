<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ 2.7.0 is released
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%202.7.0%20is%20released&In-Reply-To=%3CCAF109FC.2DE4E%25stefan.kaes%40xing.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016385.html">
   <LINK REL="Next"  HREF="016452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ 2.7.0 is released</H1>
    <B>Stefan Kaes</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%202.7.0%20is%20released&In-Reply-To=%3CCAF109FC.2DE4E%25stefan.kaes%40xing.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ 2.7.0 is released">Stefan.Kaes at xing.com
       </A><BR>
    <I>Tue Nov 22 07:12:44 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016385.html">[rabbitmq-discuss] RabbitMQ 2.7.0 is released
</A></li>
        <LI>Next message: <A HREF="016452.html">[rabbitmq-discuss] RabbitMQ 2.7.0 is released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16443">[ date ]</a>
              <a href="thread.html#16443">[ thread ]</a>
              <a href="subject.html#16443">[ subject ]</a>
              <a href="author.html#16443">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I wasn't my intent to trigger a bug report, only to understand what the
intended behavior is.

As far as I understand it so far, the new behavior is designed to keep as
much ordering in the queue as possible, whereas the old behavior was to
simply move the rejected message to the end of the queue.

For us, this change is rather unfortunate.

The most common scenario for rejects in our messaging layer is that we want
to process it at some later time, because some external service needed to
process the queue is currently unavailable, or we know some other consumer
is already processing a copy of a redundantly queued message.

See <A HREF="http://xing.github.com/beetle/">http://xing.github.com/beetle/</A>

With the new behavior, a consumer will immediately see the rejected message
again, even though there might be hundreds of messages in the queue which
could be processed right away.

I think the new behavior is also very surprising given the name of the
parameter to reject is &quot;requeue&quot;.

Could you please explain what motivated the change?

Frankly, we'd prefer to get the old behavior back.

-- stefan


Am 19.11.11 23:27 schrieb &quot;Matthias Radestock&quot; unter
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;:

&gt;<i> Stefan,
</I>&gt;<i> 
</I>&gt;<i> On 19/11/11 05:52, Stefan Kaes wrote:
</I>&gt;&gt;<i> it appears that the FAQ page describing the new reject semantics has
</I>&gt;&gt;<i> disappeared.
</I>&gt;<i> 
</I>&gt;<i> Indeed it has.
</I>&gt;<i> 
</I>&gt;&gt;<i> Here's my current understanding:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Let's say we have a message queue containing messages&lt;m2, m1&gt;, where m1
</I>&gt;&gt;<i> will be delivered next.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Let's further assume we have a prefetch count of 1 on our single consumer,
</I>&gt;&gt;<i> which is subscribed to the queue.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Then, if the consumer rejects the message, it will be resend to the consumer
</I>&gt;&gt;<i> before m2 is sent, right?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> In other words: from a consumer perspective, &quot;reject(requeue=true)&quot; behaves
</I>&gt;&gt;<i> exactly like &quot;recover&quot; in the scenario above.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Correct?
</I>&gt;<i> 
</I>&gt;<i> The second message the consumer receives could be either m1 or m2.
</I>&gt;<i> Arguably that is surprising behaviour so I will raise a bug to look into
</I>&gt;<i> this.
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> 
</I>&gt;<i> Matthias.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
Dr. Stefan Kaes
Principal System Architect
 
XING AG
Gaensemarkt 43, 20354 Hamburg, Germany
Tel. +49 40 419131-801, Fax +49 40 419131-11
 
Commercial Reg. (Registergericht): Amtsgericht Hamburg, HRB 98807
Exec. Board (Vorstand): Dr. Stefan Gro&#223;-Selbeck (Vorsitzender), Ingo Chu,
Dr. Helmut Becker, Jens Pape;
Chairman of the Supervisory Board (Aufsichtsratsvorsitzender): Dr. Neil
Sunderland
 
Please join my network on XING: <A HREF="http://www.xing.com/go/invite/Stefan.Kaes">http://www.xing.com/go/invite/Stefan.Kaes</A>

This email may contain confidential and/or privileged information. If you
are not the intended recipient (or have received this email in error) please
notify the sender immediately and destroy this email. Any unauthorized
copying, disclosure or distribution of the material in this email is
strictly forbidden and may be unlawful.

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016385.html">[rabbitmq-discuss] RabbitMQ 2.7.0 is released
</A></li>
	<LI>Next message: <A HREF="016452.html">[rabbitmq-discuss] RabbitMQ 2.7.0 is released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16443">[ date ]</a>
              <a href="thread.html#16443">[ thread ]</a>
              <a href="subject.html#16443">[ subject ]</a>
              <a href="author.html#16443">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
