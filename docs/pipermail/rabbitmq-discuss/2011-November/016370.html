<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%20With%20Celery%20Problem%2C%20Error%20541&In-Reply-To=%3CD7646C55-B2DA-46D2-B0FD-7B2180E425A8%40celeryproject.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016374.html">
   <LINK REL="Next"  HREF="016372.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541</H1>
    <B>Ask Solem</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%20With%20Celery%20Problem%2C%20Error%20541&In-Reply-To=%3CD7646C55-B2DA-46D2-B0FD-7B2180E425A8%40celeryproject.org%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541">ask at celeryproject.org
       </A><BR>
    <I>Fri Nov 18 18:26:43 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016374.html">[rabbitmq-discuss] Invalid JSON returned by RabbitMQ Management	HTTP API
</A></li>
        <LI>Next message: <A HREF="016372.html">[rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16370">[ date ]</a>
              <a href="thread.html#16370">[ thread ]</a>
              <a href="subject.html#16370">[ subject ]</a>
              <a href="author.html#16370">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Maybe you should try enabling the pool.  Either way it should retry publishing the result, so maybe this is yet another corner case in amqplib.  It would be great if you could try to create a small test case that is able to reproduce the issue.

-- 
Ask Solem

On Nov 18, 2011, at 1:15 PM, Mike Grouchy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mgrouchy at gmail.com</A>&gt; wrote:

&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 2011-11-18, at 8:09 AM, Ask Solem &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ask at rabbitmq.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On 18 Nov 2011, at 01:27, Mike Grouchy wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Hi There,
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I'm having this issue where I have a script that runs on a cronjob
</I>&gt;&gt;&gt;<i> that runs a rather large amount of tasks against celery(around 60K or
</I>&gt;&gt;&gt;<i> so tasks). It seems like after I get through a large portion of the
</I>&gt;&gt;&gt;<i> tasks I start getting error 541's returned from the celery workers
</I>&gt;&gt;&gt;<i> which seems to be bubbling up from rabbitmq.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Here is the relevant portion of the log <A HREF="https://gist.github.com/c92d42929e514cbb69fa">https://gist.github.com/c92d42929e514cbb69fa</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> The weird thing is I am not seeing any error in the rabbitmq logs, but
</I>&gt;&gt;&gt;<i> as far as I know the error is coming from rabbitmq.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Can anyone point me in the direction on what I can do to prevent this
</I>&gt;&gt;&gt;<i> from continuing to happen?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Seems to me like you have lost the connection to RabbitMQ while trying
</I>&gt;&gt;<i> to publish task results.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Are you using BROKER_POOL_LIMIT?
</I>&gt;<i> 
</I>&gt;<i> No. Currently just the defaults.
</I>
</PRE>







































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016374.html">[rabbitmq-discuss] Invalid JSON returned by RabbitMQ Management	HTTP API
</A></li>
	<LI>Next message: <A HREF="016372.html">[rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16370">[ date ]</a>
              <a href="thread.html#16370">[ thread ]</a>
              <a href="subject.html#16370">[ subject ]</a>
              <a href="author.html#16370">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
