<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Failing on restart and recovering queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Failing%20on%20restart%20and%20recovering%20queues&In-Reply-To=%3C4ED404EF.2090802%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016613.html">
   <LINK REL="Next"  HREF="016614.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Failing on restart and recovering queues</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Failing%20on%20restart%20and%20recovering%20queues&In-Reply-To=%3C4ED404EF.2090802%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Failing on restart and recovering queues">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Nov 28 22:02:23 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016613.html">[rabbitmq-discuss] Failing on restart and recovering queues
</A></li>
        <LI>Next message: <A HREF="016614.html">[rabbitmq-discuss] Best Practices: Exposing messages as &quot;Envelope&quot;	(PHP PECL extension)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16615">[ date ]</a>
              <a href="thread.html#16615">[ thread ]</a>
              <a href="subject.html#16615">[ subject ]</a>
              <a href="author.html#16615">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 28/11/11 21:13, Pierre Payet wrote:
&gt;<i> It's not the disk space but I'm not sure of how to answer this question.
</I>&gt;<i> Looking at the <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq at curtiz.log.1</A>, the last event reported is a tcp
</I>&gt;<i> connection attempt but no trace of the fulfilling of it.
</I>&gt;<i> Looking at rabbitmq-sasl.log.1 I just have this message :
</I>&gt;<i> =SUPERVISOR REPORT==== 23-Nov-2011::17:36:29 ===
</I>&gt;<i>       Supervisor: {&lt;0.1220.149&gt;,
</I>&gt;<i>                                             rabbit_channel_sup_sup}
</I>&gt;<i>       Context:    shutdown_error
</I>&gt;<i>       Reason:     shutdown
</I>&gt;<i>       Offender:   [{pid,&lt;0.1222.149&gt;},
</I>&gt;<i>                    {name,channel_sup},
</I>&gt;<i>                    {mfa,{rabbit_channel_sup,start_link,[]}},
</I>&gt;<i>                    {restart_type,temporary},
</I>&gt;<i>                    {shutdown,infinity},
</I>&gt;<i>                    {child_type,supervisor}]
</I>
Are you sure that is the last event logged by the crashed rabbit? In 
recent rabbit releases we no longer move log contents to the .1 file on 
startup. Instead we simply append to the existing file. So perhaps there 
are errors in the <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at curtiz-sasl.log</A> relating to the crash? Also, 
did you get an erl_crash.dump?

&gt;<i> I have remarked that i have a lot's of connection running at the same
</I>&gt;<i> time. Could it be a too high amount of connection to the server that
</I>&gt;<i> crashed it ?
</I>
The server guards against that; it should refuse connection attempts 
when file descriptors get tight.

Regards,

Matthias.
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016613.html">[rabbitmq-discuss] Failing on restart and recovering queues
</A></li>
	<LI>Next message: <A HREF="016614.html">[rabbitmq-discuss] Best Practices: Exposing messages as &quot;Envelope&quot;	(PHP PECL extension)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16615">[ date ]</a>
              <a href="thread.html#16615">[ thread ]</a>
              <a href="subject.html#16615">[ subject ]</a>
              <a href="author.html#16615">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
