<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Restore parts of rabbitmq mnesia database after	crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Restore%20parts%20of%20rabbitmq%20mnesia%20database%0A%20after%09crash&In-Reply-To=%3C4ED3CF83.1000808%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016597.html">
   <LINK REL="Next"  HREF="016600.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Restore parts of rabbitmq mnesia database after	crash</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Restore%20parts%20of%20rabbitmq%20mnesia%20database%0A%20after%09crash&In-Reply-To=%3C4ED3CF83.1000808%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Restore parts of rabbitmq mnesia database after	crash">simon at rabbitmq.com
       </A><BR>
    <I>Mon Nov 28 18:14:27 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016597.html">[rabbitmq-discuss] Restore parts of rabbitmq mnesia database after	crash
</A></li>
        <LI>Next message: <A HREF="016600.html">[rabbitmq-discuss] Restore parts of rabbitmq mnesia database after	crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16599">[ date ]</a>
              <a href="thread.html#16599">[ thread ]</a>
              <a href="subject.html#16599">[ subject ]</a>
              <a href="author.html#16599">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hmm. That error message should meant that you tried to get two separate 
clusters to merge (i.e. without resetting), or that Mnesia schemas got 
out of sync for some other reason (not obvious how).

Either way, you should have been left with at least one node that 
*would* start successfully - so if you needed the data from Mnesia, 
you'd have to start with that one...

Cheers, Simon

On 28/11/11 17:43, Christopher Grebs wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hey there everyone,
</I>&gt;<i>
</I>&gt;<i> we had a problem with our rabbitmq server that crashed and did not
</I>&gt;<i> start properly but aborted with this message:
</I>&gt;<i>
</I>&gt;<i> Mnesia(<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mq01</A>): ** ERROR ** (core dumped to file: &quot;/var/lib/
</I>&gt;<i> rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">MnesiaCore.rabbit at mq01_1322_497494_760300</A>&quot;)
</I>&gt;<i> ** FATAL ** Failed to merge schema: Bad cookie in table definition
</I>&gt;<i> rabbit_queue: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mq01</A> = {cstruct,rabbit_queue,set,
</I>&gt;<i> [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mq02</A><A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at mq01</A>],[],[],0,read_write,[],[],false,amqqueue,
</I>&gt;<i> [name,durable,auto_delete,exclusive_owner,arguments,pid],[],[],
</I>&gt;<i> {{1298,52135,154226}<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at mq02</A>},{{5,0},{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mq02</A>,
</I>&gt;<i> {1312,883667,389675}}}}, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mq02</A> = {cstruct,rabbit_queue,set,
</I>&gt;<i> [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mq02</A>],[],[],0,read_write,[],[],false,amqqueue,
</I>&gt;<i> [name,durable,auto_delete,exclusive_owner,arguments,pid],[],[],
</I>&gt;<i> {{1318,853352,227541}<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at mq02</A>},{{2,0},[]}}
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Indeed the message is kinda not the problem because we were working
</I>&gt;<i> with some partly-configured rabbitmq-cluster that was on the one hand
</I>&gt;<i> active and on the other hand not active so maybe this was expected.
</I>&gt;<i> Once I backed up the old mnesia database and created a new one
</I>&gt;<i> everything started to work properly.
</I>&gt;<i>
</I>&gt;<i> But in fact it may happened that there was some required data in the
</I>&gt;<i> mnesia database and so the question is if there is any way to get out
</I>&gt;<i> messages/userdata/configuration of the &quot;old&quot; mnesia database?
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i> Best,
</I>&gt;<i> Christopher.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016597.html">[rabbitmq-discuss] Restore parts of rabbitmq mnesia database after	crash
</A></li>
	<LI>Next message: <A HREF="016600.html">[rabbitmq-discuss] Restore parts of rabbitmq mnesia database after	crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16599">[ date ]</a>
              <a href="thread.html#16599">[ thread ]</a>
              <a href="subject.html#16599">[ subject ]</a>
              <a href="author.html#16599">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
