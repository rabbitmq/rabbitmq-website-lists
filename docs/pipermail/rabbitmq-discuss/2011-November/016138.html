<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Breaking%20API%20changes%20in%20JAva%20API%202.7.0&In-Reply-To=%3CCAAcXTOaxGzSS%3DJbjG3LQ0nEvFPozvKg505z0QY1wFsqQzinwpA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016133.html">
   <LINK REL="Next"  HREF="016153.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Breaking API changes in JAva API 2.7.0</H1>
    <B>Irmo Manie</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Breaking%20API%20changes%20in%20JAva%20API%202.7.0&In-Reply-To=%3CCAAcXTOaxGzSS%3DJbjG3LQ0nEvFPozvKg505z0QY1wFsqQzinwpA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Breaking API changes in JAva API 2.7.0">irmo.manie at gmail.com
       </A><BR>
    <I>Thu Nov 10 18:59:19 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016133.html">[rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
</A></li>
        <LI>Next message: <A HREF="016153.html">[rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16138">[ date ]</a>
              <a href="thread.html#16138">[ thread ]</a>
              <a href="subject.html#16138">[ subject ]</a>
              <a href="author.html#16138">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Steve,

&gt;<i> Well; this is something we decided wasn't needed. The Java API was
</I>&gt;<i> simplified (to make the classes' interfaces less cluttered).
</I>&gt;<i>
</I>&gt;<i> This particular method is entirely equivalent to a loop in the
</I>&gt;<i> connecting client program, and the array of addresses is not used
</I>&gt;<i> except in that one place. &#160;We didn't think it was particularly useful,
</I>&gt;<i> and it would mean two extra public factory methods. &#160;We intend to
</I>&gt;<i> remove uses of the array entirely (even from the private method).
</I>
It was useful since you only need one ConnectionFactory and one call
to connect to a cluster.
Now I would have to change the internals (host/port) for every try to
a node in a cluster (nasty imo, who likes these mutable objects anyway
;-) ), or I would need a ConnectionFactory per connection I can make
but that seems a bit overkill too, since all of them would start
Executors etc.

So I'd say I actually really liked the fact that I could create a
single 'immutable' ConnectionFactory for my cluster and then just
leave it and (re)use it.

&gt;<i> Thanks for spotting it; we are striving for simplicity.
</I>&gt;<i>
</I>&gt;<i> Clearly, as the interface changed you might need to make some small
</I>&gt;<i> modifications; for which we apologise; but we hope this isn't a serious one.
</I>&gt;<i> Was it really a breaking change for you?
</I>
It was breaking in the sense that the new client jar was not a direct
drop-in replacement for the previous one.
I would usually expect either an update where some api would get a
@deprecated annotation and would be removed in a next version, or that
there at least would be a notice of any breaking api changes in the
release notes (no matter how small the change is).
Especially if you maintain an api library it's really important to
keep the api as stable as possible and otherwise be super clear in
documentation about the changes and examples on how to migrate and
have deprecated backwards compatible phases. Otherwise a new update of
the library should (certainly since you have nice binary compatibility
in java) always be a drop in replacement so user can benefit from
improved implementation without any hassle.

&gt;<i> Yes, I see that -- this was zeal again. &#160;We see no real harm in exposing the
</I>&gt;<i> STATIC FINAL constants, though, so that will be done in future.
</I>&gt;<i> It might save some duplication in the client code.
</I>&gt;<i> Again, you can code them explicitly, if you need them, which has the
</I>&gt;<i> distinct advantage of you being able to dictate what defaults *you* want.
</I>
It's a minor thing and yes I can also just define my own constants,
but with client/server apps its so nice if you get the defaults from
the server's client api, i.e for in integration unit test.

&gt;<i> Sorry you couldn't continue with 2.7.0; please let us know if there are
</I>&gt;<i> insurmountable problems. &#160;I hope I haven't missed anything obvious.
</I>
Other then the api changes I usually have no problems with any updates
and they work flawlessly. :-)

- Irmo
</PRE>













































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016133.html">[rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
</A></li>
	<LI>Next message: <A HREF="016153.html">[rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16138">[ date ]</a>
              <a href="thread.html#16138">[ thread ]</a>
              <a href="subject.html#16138">[ subject ]</a>
              <a href="author.html#16138">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
