<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Architecture question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Architecture%20question&In-Reply-To=%3C28243733.885.1320526802712.JavaMail.geo-discussion-forums%40yqiu15%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016000.html">
   <LINK REL="Next"  HREF="016004.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Architecture question</H1>
    <B>Jelle Smet</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Architecture%20question&In-Reply-To=%3C28243733.885.1320526802712.JavaMail.geo-discussion-forums%40yqiu15%3E"
       TITLE="[rabbitmq-discuss] Architecture question">smetj.net at gmail.com
       </A><BR>
    <I>Sat Nov  5 21:00:02 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016000.html">[rabbitmq-discuss] Json rabbitmq
</A></li>
        <LI>Next message: <A HREF="016004.html">[rabbitmq-discuss] Architecture question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15999">[ date ]</a>
              <a href="thread.html#15999">[ thread ]</a>
              <a href="subject.html#15999">[ subject ]</a>
              <a href="author.html#15999">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm looking for advice on the best approach to cover this scenario:

I have many clients spread over multiple (trusted) data centers.  Data 
centers are linked to each other by WAN speed connections.
Each client should have its own queue.
I have 1 producer which should be able to submit messages which arrive to 
whatever queue, wherever.
Ideally the producer just has to submit a message to an exchange with the 
routing key matching the queue and done.

The problem is that:

   - I can't let all clients connect over wan to a centralized broker since 
   it would strain the wan links too much.
   - I can't cluster the brokers over wan as this is not advised to do. 

I could:

   - make my producer aware to submit messages to the correct broker by 
   keeping a map of which host is connected to which broker, but I would 
   really like to avoid that.
   - create on the broker on which the producer connects for each remote 
   location a queue which shovels (shovel plugins) the message to each remote 
   broker. When the queue doesn't exist on the local broker or remote broker, 
    the message is not routed.  For the location the queue exists it arrives. 
    This however feels a bit of a &quot;hacky&quot; solution, if I have 10 sites, I send 
   9 useless message, ...
   

Any advice would be appreciated.

Thanks,

Jelle

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111105/a7e6a102/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111105/a7e6a102/attachment.htm</A>&gt;
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016000.html">[rabbitmq-discuss] Json rabbitmq
</A></li>
	<LI>Next message: <A HREF="016004.html">[rabbitmq-discuss] Architecture question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15999">[ date ]</a>
              <a href="thread.html#15999">[ thread ]</a>
              <a href="subject.html#15999">[ subject ]</a>
              <a href="author.html#15999">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
