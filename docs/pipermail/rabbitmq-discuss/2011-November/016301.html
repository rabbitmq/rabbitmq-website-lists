<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Consumer connection closes abruptly after	one message
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consumer%20connection%20closes%20abruptly%20after%0A%09one%20message&In-Reply-To=%3C746596F0-DEDE-4507-B2B9-ED54F0BD7F7C%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016295.html">
   <LINK REL="Next"  HREF="016303.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Consumer connection closes abruptly after	one message</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consumer%20connection%20closes%20abruptly%20after%0A%09one%20message&In-Reply-To=%3C746596F0-DEDE-4507-B2B9-ED54F0BD7F7C%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] Consumer connection closes abruptly after	one message">michael.s.klishin at gmail.com
       </A><BR>
    <I>Wed Nov 16 18:18:43 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016295.html">[rabbitmq-discuss] Consumer connection closes abruptly after	one message
</A></li>
        <LI>Next message: <A HREF="016303.html">[rabbitmq-discuss] Consumer connection closes abruptly after	one message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16301">[ date ]</a>
              <a href="thread.html#16301">[ thread ]</a>
              <a href="subject.html#16301">[ subject ]</a>
              <a href="author.html#16301">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Le 16/nov/2011 &#224; 21:11, p2w a &#233;crit :

&gt;<i> This makes me pretty sure this is
</I>&gt;<i> an issue with Thin/EM blocking AMQP at thread level. I can replicate
</I>&gt;<i> this consistently.
</I>
With Thin you do not typically start EventMachine in a separate thread. This is the case with Unicorn and Passenger but almost never with Thin.

This can be an EventMachine issue. We depend on EventMachine for TCP connection failure notifications. Maybe try EventMachine 1.0 pre-releases? amqp gem will work with that and we run CI against that version against 7 Rubies or so.

MK

<A HREF="http://github.com/michaelklishin">http://github.com/michaelklishin</A>
<A HREF="http://twitter.com/michaelklishin">http://twitter.com/michaelklishin</A>

</PRE>





































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016295.html">[rabbitmq-discuss] Consumer connection closes abruptly after	one message
</A></li>
	<LI>Next message: <A HREF="016303.html">[rabbitmq-discuss] Consumer connection closes abruptly after	one message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16301">[ date ]</a>
              <a href="thread.html#16301">[ thread ]</a>
              <a href="subject.html#16301">[ subject ]</a>
              <a href="author.html#16301">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
