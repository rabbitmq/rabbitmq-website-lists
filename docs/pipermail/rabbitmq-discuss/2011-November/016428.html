<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cluster Memory Usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20Memory%20Usage&In-Reply-To=%3C4ECAB6F6.9090502%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016396.html">
   <LINK REL="Next"  HREF="016429.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cluster Memory Usage</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20Memory%20Usage&In-Reply-To=%3C4ECAB6F6.9090502%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Cluster Memory Usage">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Nov 21 20:39:18 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016396.html">[rabbitmq-discuss] Cluster Memory Usage
</A></li>
        <LI>Next message: <A HREF="016429.html">[rabbitmq-discuss] Cluster Memory Usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16428">[ date ]</a>
              <a href="thread.html#16428">[ thread ]</a>
              <a href="subject.html#16428">[ subject ]</a>
              <a href="author.html#16428">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Cameron,

On 20/11/11 16:49, Matthias Radestock wrote:
&gt;<i> Once connected, evaluate
</I>&gt;<i>
</I>&gt;<i> io:format(&quot;~p&quot;, [lists:reverse(lists:sort([{process_info(Pid, memory),
</I>&gt;<i> Pid, process_info(Pid)} || Pid &lt;- processes()]))]).
</I>&gt;<i>
</I>&gt;<i> Post the result and the output of 'rabbitmqctl status' at the time.
</I>
[output received off-list - thanks]

The memory is taken up by the mirror queue slave Erlang process.

How many messages were in the queue at the time?

Also, what memory limit does rabbit report in its log?

Are both nodes configured as disk nodes?

You mentioned that acks are batched; what is the batch size?

You mentioned that publishers use 'confirms'. Do they wait for 
confirmation after every message, after some batch of messages, or do 
they let confirms stream in completely independently?

I have so far failed to reproduce your observations locally. Is there 
any chance you could give us access to the slave machine?


Regards,

Matthias.
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016396.html">[rabbitmq-discuss] Cluster Memory Usage
</A></li>
	<LI>Next message: <A HREF="016429.html">[rabbitmq-discuss] Cluster Memory Usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16428">[ date ]</a>
              <a href="thread.html#16428">[ thread ]</a>
              <a href="subject.html#16428">[ subject ]</a>
              <a href="author.html#16428">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
