<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Server connections not closing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Server%20connections%20not%20closing&In-Reply-To=%3C4EBBA756.8050701%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016106.html">
   <LINK REL="Next"  HREF="016195.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Server connections not closing</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Server%20connections%20not%20closing&In-Reply-To=%3C4EBBA756.8050701%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Server connections not closing">emile at rabbitmq.com
       </A><BR>
    <I>Thu Nov 10 10:28:38 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016106.html">[rabbitmq-discuss] Server connections not closing
</A></li>
        <LI>Next message: <A HREF="016195.html">[rabbitmq-discuss] Server connections not closing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16120">[ date ]</a>
              <a href="thread.html#16120">[ thread ]</a>
              <a href="subject.html#16120">[ subject ]</a>
              <a href="author.html#16120">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Robert,

On 10/11/11 04:31, Robert Gilland wrote:
&gt;&gt;<i> Is there any device on the network that intermediates between the broker
</I>&gt;&gt;<i> and client, and potentially keeping the server connections open?
</I>&gt;<i> 
</I>&gt;<i> Yes There are 4 hops on the traceroute between the client and server
</I>&gt;<i> machine. according to our network guy. So it is failing on the WAN.
</I>&gt;<i> 
</I>&gt;&gt;<i> Do you
</I>&gt;&gt;<i> get the same issue if the broker and client run on the same server
</I>&gt;&gt;<i> (using localhost)?
</I>&gt;<i> 
</I>&gt;<i> On local LAN between my machine and the server machine. all
</I>&gt;<i> connections are being closed successfully.
</I>
If the problem can only be reproduced over the WAN then I strongly
suspect the problem is with the WAN. Unless there is any AMQP-specific
configuration you should be able to reproduce the problem with other
protocols.

&gt;<i> There must be some process not happening to close a connection at the
</I>&gt;<i> RabbitMQ server machine.
</I>&gt;<i> Something must be failing to get across the network. so the system is
</I>&gt;<i> failing to close it's connections.
</I>
The RabbitMQ server uses sockets in the same way as any application.
(Nagle is turned off by default). The connection teardown is done by the
TCP stack as implemented in your OS. If there is something that you
believe RabbitMQ should be doing differently then let us know.


-Emile

</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016106.html">[rabbitmq-discuss] Server connections not closing
</A></li>
	<LI>Next message: <A HREF="016195.html">[rabbitmq-discuss] Server connections not closing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16120">[ date ]</a>
              <a href="thread.html#16120">[ thread ]</a>
              <a href="subject.html#16120">[ subject ]</a>
              <a href="author.html#16120">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
