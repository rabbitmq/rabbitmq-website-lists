<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Shovel Connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Shovel%20Connections&In-Reply-To=%3C16591088.1761.1321277359415.JavaMail.geo-discussion-forums%40yqcm23%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016016.html">
   <LINK REL="Next"  HREF="015959.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Shovel Connections</H1>
    <B>Jelle Smet</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Shovel%20Connections&In-Reply-To=%3C16591088.1761.1321277359415.JavaMail.geo-discussion-forums%40yqcm23%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Shovel Connections">smetj.net at gmail.com
       </A><BR>
    <I>Mon Nov 14 13:29:19 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016016.html">[rabbitmq-discuss] RabbitMQ Shovel Connections
</A></li>
        <LI>Next message: <A HREF="015959.html">[rabbitmq-discuss] RabbitMQ not starting anymore after removing federation configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16209">[ date ]</a>
              <a href="thread.html#16209">[ thread ]</a>
              <a href="subject.html#16209">[ subject ]</a>
              <a href="author.html#16209">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Alex,

Thank you for the detailed feedback.
Meanwhile I have found and fixed some issues on the software making use of 
RabbitMQ.
I made a tool which has a work pool of multiple processes running 
(Python/multiprocessing/Pika).
Under certain circumstances a worker crashes while the connection to the 
broker stays alive, which left the message in a permanent unacknowledged 
state as long the work pool manager stayed alive.
This has been fixed.  I'm afraid this situation has clouded my judgement on 
finding the reason for this behavior.

Here are the relevant portions of version info.  (All brokers run the same 
version)

... snip ...
{erlando,&quot;Syntax extensions for Erlang&quot;,&quot;2.6.1&quot;},
      {rabbitmq_federation,&quot;RabbitMQ Federation&quot;,&quot;2.6.1&quot;},
      {rabbitmq_shovel,&quot;Data Shovel for RabbitMQ&quot;,&quot;2.6.1&quot;},
      {rabbitmq_shovel_management,&quot;Shovel Status&quot;,&quot;2.6.1&quot;},
      {rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;2.6.1&quot;},
      {webmachine,&quot;webmachine&quot;,&quot;1.7.0-rmq2.6.1-hg0c4b60a&quot;},
      {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;2.6.1&quot;},
      {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;2.6.1&quot;},
      {rabbit,&quot;RabbitMQ&quot;,&quot;2.6.1&quot;},
      {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.6&quot;},
      {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.9.4&quot;},
      {rabbitmq_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;2.6.1&quot;},
      {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;1.3-rmq2.6.1-git9a53dbd&quot;},
      {inets,&quot;INETS  CXC 138 49&quot;,&quot;5.6&quot;},
      {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.4.19&quot;},
      {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.17.4&quot;},
      {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.14.4&quot;}]},
... snip ...

I will upgrade my environment to the latest stable version 2.7.0 as this is 
the latest stable release.

since a broker restart
&gt;<i>     will mark the unacknowledged messages as ready again, and deliver
</I>&gt;<i>     them to a consumer.
</I>

In my case I was unable to restart the broker, ... it just 
hung indefinitely forcing me to kill the RabbitMQ process.

What I will do is the following:

   - Upgrade all participating RabbitMQ servers to the latest stable 
   version (2.7.0)
   - Try to reproduce the problem.
      - If the problem occurs I provide you detailed and complete 
      information broker configuration (I rather do this offline then)
      - If the problem can't be reproduced, I'll provide feedback on that 
      to this post.
   
Thanks again Alex for the time taken to read through an analyse the 
provided information, much appreciated.


Cheers,

Jelle




-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/842513db/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/842513db/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016016.html">[rabbitmq-discuss] RabbitMQ Shovel Connections
</A></li>
	<LI>Next message: <A HREF="015959.html">[rabbitmq-discuss] RabbitMQ not starting anymore after removing federation configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16209">[ date ]</a>
              <a href="thread.html#16209">[ thread ]</a>
              <a href="subject.html#16209">[ subject ]</a>
              <a href="author.html#16209">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
