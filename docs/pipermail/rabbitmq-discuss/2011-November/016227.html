<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] know when a consumer disconnect from a node
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20know%20when%20a%20consumer%20disconnect%20from%20a%20node&In-Reply-To=%3C4EC1650E.2000209%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016226.html">
   <LINK REL="Next"  HREF="016232.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] know when a consumer disconnect from a node</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20know%20when%20a%20consumer%20disconnect%20from%20a%20node&In-Reply-To=%3C4EC1650E.2000209%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] know when a consumer disconnect from a node">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Nov 14 18:59:26 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016226.html">[rabbitmq-discuss] know when a consumer disconnect from a node
</A></li>
        <LI>Next message: <A HREF="016232.html">[rabbitmq-discuss] know when a consumer disconnect from a node
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16227">[ date ]</a>
              <a href="thread.html#16227">[ thread ]</a>
              <a href="subject.html#16227">[ subject ]</a>
              <a href="author.html#16227">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Kilian,

On 14/11/11 18:39, Kilian C. wrote:
&gt;<i> is it possible to know when a client is disconnected from a rabbitmq node?
</I>&gt;<i>
</I>&gt;<i> This is my env:
</I>&gt;<i>
</I>&gt;<i> 1 rabbitmq node.
</I>&gt;<i> 3 client (publishers/subscribers) severs
</I>&gt;<i>
</I>&gt;<i> when a server crashes/shutdown/disconnects from the rabbitmq server,
</I>&gt;<i> other client server needs to be notified about that.
</I>&gt;<i>
</I>&gt;<i> Is there a way to route/publish a simple (dis)connection message to a
</I>&gt;<i> certain queue/exchange?
</I>
There is nothing built-in, but you could implement a custom exchange 
type for this.

The basic idea is that a client, after connecting, creates an exclusive 
queue and binds it to an exchange of the custom exchange type. Due to 
the exclusivity, the queue and hence the binding will get removed when 
the connection is closed. The exchange sees both the bind and unbind 
events and can publish notification messages when it gets them.

See <A HREF="https://github.com/tonyg/presence-exchange">https://github.com/tonyg/presence-exchange</A> for an exchange type that 
does s.t. like that. Warning: this may need some tweaking to get to work 
with recent versions of RabbitMQ.


Regards,

Matthias.
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016226.html">[rabbitmq-discuss] know when a consumer disconnect from a node
</A></li>
	<LI>Next message: <A HREF="016232.html">[rabbitmq-discuss] know when a consumer disconnect from a node
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16227">[ date ]</a>
              <a href="thread.html#16227">[ thread ]</a>
              <a href="subject.html#16227">[ subject ]</a>
              <a href="author.html#16227">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
