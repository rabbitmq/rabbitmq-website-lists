<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue and filtering questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20and%20filtering%20questions&In-Reply-To=%3Ce4545c84-64c2-4d91-b036-6da40a147f64%40q39g2000prg.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016322.html">
   <LINK REL="Next"  HREF="016318.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue and filtering questions</H1>
    <B>Andrew Esler</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20and%20filtering%20questions&In-Reply-To=%3Ce4545c84-64c2-4d91-b036-6da40a147f64%40q39g2000prg.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Queue and filtering questions">aj.esler at gmail.com
       </A><BR>
    <I>Thu Nov 17 10:27:50 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016322.html">[rabbitmq-discuss] Queue and filtering questions
</A></li>
        <LI>Next message: <A HREF="016318.html">[rabbitmq-discuss] Disagreeing with the broker over argument type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16325">[ date ]</a>
              <a href="thread.html#16325">[ thread ]</a>
              <a href="subject.html#16325">[ subject ]</a>
              <a href="author.html#16325">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias,

Ideally, I dont want my clients to know about each other.

&quot; So there must be some mechanism in place that detects worker
failure. Could that not trigger an event that is broadcast to all the
consumers of the output queue, so that they can subsequently filter
out
the results of the failed worker?&quot;

This is pretty much what I am planning to do now. Each client
subscribe to a queue, and when a worker fails (expected to be very
infrequently), then an update is broadcast to all clients saying
ignore any messages with id of XXXXXX.
The only problem I can see with this method is that we cant know when
its safe to delete the notices saying 'ignore anything with id of
XXXXX' as we cant search the messages in the system to say that there
are no more messages with id XXXXX. However, this is unlikely to be a
major problem in practice.

As for the added complexity, I was only going to do it server side if
it was possible to do simply. As such, its not a problem.

Thanks for such a simple and easy to use yet powerful messaging
system.

Andrew

On Nov 17, 9:39&#160;pm, Matthias Radestock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matth... at rabbitmq.com</A>&gt; wrote:
&gt;<i> Andrew,
</I>&gt;<i>
</I>&gt;<i> On 17/11/11 02:49, Andrew Esler wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; The reason I want to do filtering server side is then I have easy
</I>&gt;<i> &gt; access to the info I need for filtering. If filtering is done client
</I>&gt;<i> &gt; side, then all clients have to know about each other and tasks they
</I>&gt;<i> &gt; are working on in order to be able to find the information they need
</I>&gt;<i> &gt; to make filtering decisions.
</I>&gt;<i>
</I>&gt;<i> It is not obvious from your earlier problem statement why there would be
</I>&gt;<i> a need for clients to know about each other.
</I>&gt;<i>
</I>&gt;<i> You said &quot;I would like to be able to filter messages from the output
</I>&gt;<i> queue that were sent before the worker failed so they are not delivered
</I>&gt;<i> twice.&quot;. So there must be some mechanism in place that detects worker
</I>&gt;<i> failure. Could that not trigger an event that is broadcast to all the
</I>&gt;<i> consumers of the output queue, so that they can subsequently filter out
</I>&gt;<i> the results of the failed worker?
</I>&gt;<i>
</I>&gt;<i> I wonder though whether this complexity is really necessary. The failure
</I>&gt;<i> detection can never prevent duplicates completely - after all, some of
</I>&gt;<i> the results of the dying worker may already have been processed. So
</I>&gt;<i> given that the system needs to cope with that anyway, is really worth
</I>&gt;<i> putting a secondary mechanism in place? That would only make sense if
</I>&gt;<i> the worker failure frequency is high and the cost of ordinary duplicate
</I>&gt;<i> handling is high.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>





































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016322.html">[rabbitmq-discuss] Queue and filtering questions
</A></li>
	<LI>Next message: <A HREF="016318.html">[rabbitmq-discuss] Disagreeing with the broker over argument type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16325">[ date ]</a>
              <a href="thread.html#16325">[ thread ]</a>
              <a href="subject.html#16325">[ subject ]</a>
              <a href="author.html#16325">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
