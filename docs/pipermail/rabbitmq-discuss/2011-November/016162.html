<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Newbie Questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Newbie%20Questions&In-Reply-To=%3C4EBD1D48.4060301%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016141.html">
   <LINK REL="Next"  HREF="016156.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Newbie Questions</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Newbie%20Questions&In-Reply-To=%3C4EBD1D48.4060301%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Newbie Questions">simon at rabbitmq.com
       </A><BR>
    <I>Fri Nov 11 13:04:08 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016141.html">[rabbitmq-discuss] Newbie Questions
</A></li>
        <LI>Next message: <A HREF="016156.html">[rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16162">[ date ]</a>
              <a href="thread.html#16162">[ thread ]</a>
              <a href="subject.html#16162">[ subject ]</a>
              <a href="author.html#16162">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/11/11 22:58, Matthew Evans wrote:
&gt;<i> 1) Can the Erlang application(s) reside on the same VM as RabbitMQ? Is
</I>&gt;<i> this recommended? In this case the Erlang app will have a NIF, and could
</I>&gt;<i> be quite busy. How would you go about deploying this, can you just
</I>&gt;<i> create an Erlang ez file and have RabbitMQ load it?
</I>
Yes, a RabbitMQ plugin is just an OTP application packaged as a .ez file.

So you can load your apps into the same VM as RabbitMQ. Obviously you 
have to trust them not to crash the VM.

One thing you should maybe be aware of is that when using the direct 
client there's no equivalent to the TCP backpressure we exert on network 
clients when the server starts to run out of memory.

&gt;<i> 2) What is a typical configuration: Many exchanges, few queues? Or few
</I>&gt;<i> exchanges with many queues? What are the rules of thumb in deciding how
</I>&gt;<i> the exchange/queue layout is modeled?
</I>
The usual rule of thumb is whatever makes sense for your app.

In general the cost of an exchange tends to be *usually* not worth 
bothering with. Queues are slightly more expensive (although it's still 
sane to have tens of thousands of them or even more in some circumstances).

Each queue is a single process, so if you have too few queues you might 
not get all the parallelism you might want.

&gt;<i> 3) What are the performance hits in using external exchanges?
</I>
If you mean the external-exchange plugin, fairly huge. Every routing 
decision gets converted into a couple of messages getting sent over the 
network. And it's a single process per node too.

But if you mean writing your own exchange type plugin in Erlang, 
basically free except you might not be as efficient as we are :-) - the 
built-in exchange types are essentially &quot;internal&quot; plugins.

&gt;<i> 4) Can a queue be on a different node than an exchange?
</I>
Exchanges only exist in Mnesia, and are therefore always on every node 
at once.

&gt;<i> 5) This may sound like a really simple question, but I'm struggling with
</I>&gt;<i> the idea of a broker. Is a broker a combination of exchange + queues, or
</I>&gt;<i> is it a set of exchanges on the same Erlang VM?
</I>
A broker is just another word for &quot;RabbitMQ server&quot;.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016141.html">[rabbitmq-discuss] Newbie Questions
</A></li>
	<LI>Next message: <A HREF="016156.html">[rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16162">[ date ]</a>
              <a href="thread.html#16162">[ thread ]</a>
              <a href="subject.html#16162">[ subject ]</a>
              <a href="author.html#16162">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
