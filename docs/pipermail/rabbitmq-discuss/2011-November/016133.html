<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Breaking%20API%20changes%20in%20JAva%20API%202.7.0&In-Reply-To=%3CD1E9035C-9DB8-479D-8A5B-166411D19C24%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016127.html">
   <LINK REL="Next"  HREF="016138.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Breaking API changes in JAva API 2.7.0</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Breaking%20API%20changes%20in%20JAva%20API%202.7.0&In-Reply-To=%3CD1E9035C-9DB8-479D-8A5B-166411D19C24%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Breaking API changes in JAva API 2.7.0">steve at rabbitmq.com
       </A><BR>
    <I>Thu Nov 10 17:17:45 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="016127.html">[rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
</A></li>
        <LI>Next message: <A HREF="016138.html">[rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16133">[ date ]</a>
              <a href="thread.html#16133">[ thread ]</a>
              <a href="subject.html#16133">[ subject ]</a>
              <a href="author.html#16133">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Irmo,

On 10 Nov 2011, at 15:16, Irmo Manie wrote:
&gt;<i> Hi guys,
</I>&gt;<i> 
</I>&gt;<i> I was eager to update to the 2.7.0 java client, but when I dropped the
</I>&gt;<i> new jar in I ran into some braking changes (again I must really say
</I>&gt;<i> here).
</I>Nice to see you are eager, and sorry to hear that our changes
broke you. 

&gt;<i> I see that i.e. the connection factory now takes an optional executor
</I>&gt;<i> service as parameter for the channel threads (which is very nice
</I>&gt;<i> actually!).
</I>(thanks...)
&gt;<i> With that change, the method for creating a new connection taking an
</I>&gt;<i> array of addresses is now gone and moved into a private method
</I>&gt;<i> together with he executor service parameter:
</I>&gt;<i> 
</I>&gt;<i> private Connection newConnection(ExecutorService executor, Address[] addrs)
</I>&gt;<i> 
</I>&gt;<i> This must be a mistake....
</I>Well; this is something we decided wasn't needed. The Java API was
simplified (to make the classes' interfaces less cluttered).

This particular method is entirely equivalent to a loop in the
connecting client program, and the array of addresses is not used
except in that one place.  We didn't think it was particularly useful,
and it would mean two extra public factory methods.  We intend to
remove uses of the array entirely (even from the private method).

Thanks for spotting it; we are striving for simplicity.

Clearly, as the interface changed you might need to make some small
modifications; for which we apologise; but we hope this isn't a serious one. 
Was it really a breaking change for you?

&gt;<i> Also: why are the connection factory defaults private all of a sudden?
</I>&gt;<i> They are useful if you build an api around the java client and it
</I>&gt;<i> doesn't harm to keep this kind of static info into the public right?
</I>Yes, I see that -- this was zeal again.  We see no real harm in exposing the
STATIC FINAL constants, though, so that will be done in future.
It might save some duplication in the client code.
Again, you can code them explicitly, if you need them, which has the
distinct advantage of you being able to dictate what defaults *you* want.

&gt;<i> These are the things I ran into and switched back again to 2.6.1,
</I>&gt;<i> because I 'need' the connection to multiple addresses to connect to a
</I>&gt;<i> cluster.
</I>
Sorry you couldn't continue with 2.7.0; please let us know if there are
insurmountable problems.  I hope I haven't missed anything obvious.

&gt;<i> - Irmo
</I>
Steve Powell  (a kitten)
----------some more definitions from the SPD----------
Avoirdupois phr. 'Would you like peas with that?'
Abbey adj. Quite like an Abbe.
Definite phr. 'It's hard of hearing, I think.'
Modest n. The most mod.

</PRE>













































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016127.html">[rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
</A></li>
	<LI>Next message: <A HREF="016138.html">[rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16133">[ date ]</a>
              <a href="thread.html#16133">[ thread ]</a>
              <a href="subject.html#16133">[ subject ]</a>
              <a href="author.html#16133">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
