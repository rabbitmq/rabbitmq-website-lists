<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] getting started, broker runs;	can't get status
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20getting%20started%2C%20broker%20runs%3B%0A%09can%27t%20get%20status&In-Reply-To=4984BE9D.6080909%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002808.html">
   <LINK REL="Next"  HREF="002811.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] getting started, broker runs;	can't get status</H1>
    <B>Dmitriy Samovskiy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20getting%20started%2C%20broker%20runs%3B%0A%09can%27t%20get%20status&In-Reply-To=4984BE9D.6080909%40lshift.net"
       TITLE="[rabbitmq-discuss] getting started, broker runs;	can't get status">dmitriy.samovskiy at cohesiveft.com
       </A><BR>
    <I>Sat Jan 31 21:38:36 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002808.html">[rabbitmq-discuss] getting started, broker runs;	can't get status
</A></li>
        <LI>Next message: <A HREF="002811.html">[rabbitmq-discuss] getting started, broker runs;	can't get status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2810">[ date ]</a>
              <a href="thread.html#2810">[ thread ]</a>
              <a href="subject.html#2810">[ subject ]</a>
              <a href="author.html#2810">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Matthias Radestock wrote:
&gt;<i> Dmitriy,
</I>&gt;<i> 
</I>&gt;<i> Dmitriy Samovskiy wrote:
</I>&gt;&gt;<i> Like Matthias said above, it's got to be something that prevents epmd 
</I>&gt;&gt;<i> communications with nodes.
</I>&gt;<i> 
</I>&gt;<i> Right, but curiously it doesn't prevent epmd communication completely, 
</I>&gt;<i> i.e. the node registration traffic goes through but the query traffic 
</I>&gt;<i> doesn't.
</I>Yep, the way I am reading this, ALIVE_REQ is alone on its connection, other commands use 
their own connections. So looks like the second connection always fails (and I assume 
ALIVE_REQ will always be the first one)?

<A HREF="http://github.com/mfoemmel/erlang-otp/blob/c6341282a575b4cdaa64c6f7013f9eab05fe0cf4/erts/epmd/src/epmd_srv.c">http://github.com/mfoemmel/erlang-otp/blob/c6341282a575b4cdaa64c6f7013f9eab05fe0cf4/erts/epmd/src/epmd_srv.c</A>


* In all but one case there is only one request for each connection made
* to this server so we can safely close the socket after sending the
* reply. The exception is ALIVE_REQ where we keep the connection
* open without sending any data. When we receive a &quot;close&quot; this is
* an indication that the Erlang node was terminated. The termination
* may have been &quot;normal&quot; or caused by a crash. The operating system
* ensure that the connection is closed either way.

* Incomplete packets are thrown away after a timout. The Erlang node
* doing the request is responsible for completing in it in a reasonable time.
*
* Note that if the server gets busy it may not have time to
* process all requests for connection. The &quot;accept()&quot; function
* will on most operating systems silently refuse to accept more
* than 5 outstanding requests. It is the client's responsibility
* to retry the request a number of times with random time interval.
* The &quot;-debug&quot; flag will insert a delay so you can test this
* behaviour.
*
* FIXME: In this code we assume that the packets we send on each
* socket is so small that a &quot;write()&quot; never block
*
* FIXME: We never restarts a read or write that was terminated
* by an interrupt. Do we need to?


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002808.html">[rabbitmq-discuss] getting started, broker runs;	can't get status
</A></li>
	<LI>Next message: <A HREF="002811.html">[rabbitmq-discuss] getting started, broker runs;	can't get status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2810">[ date ]</a>
              <a href="thread.html#2810">[ thread ]</a>
              <a href="subject.html#2810">[ subject ]</a>
              <a href="author.html#2810">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
