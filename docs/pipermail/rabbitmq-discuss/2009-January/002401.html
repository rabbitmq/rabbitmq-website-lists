<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: question on the faq
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=49628B85.8030706%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002399.html">
   <LINK REL="Next"  HREF="002404.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: question on the faq</H1>
    <B>Gordon Sim</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=49628B85.8030706%40lshift.net"
       TITLE="[rabbitmq-discuss] Fwd: question on the faq">gsim at redhat.com
       </A><BR>
    <I>Tue Jan  6 10:39:00 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002399.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
        <LI>Next message: <A HREF="002404.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2401">[ date ]</a>
              <a href="thread.html#2401">[ thread ]</a>
              <a href="subject.html#2401">[ subject ]</a>
              <a href="author.html#2401">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias Radestock wrote:
&gt;<i> Gordon,
</I>&gt;<i> 
</I>&gt;<i> Gordon Sim wrote:
</I>&gt;&gt;<i> I don't believe it is valid for a queue to disappear due to some 
</I>&gt;&gt;<i> internal fault. That to me is a bug and outside the scope of the 
</I>&gt;&gt;<i> specification.
</I>&gt;<i> 
</I>&gt;<i> It's certainly a bug. The question is how to deal with it. I would 
</I>&gt;<i> expect to see some errors recorded in the logs (which RabbitMQ does), 
</I>&gt;<i> some admin to be informed, etc, etc, which indeed are all things outside 
</I>&gt;<i> the protocol spec. When it comes to raising protocol errors though, if 
</I>&gt;<i> the spec doesn't specify the precise conditions under which such errors 
</I>&gt;<i> are signalled then it's up to implementation choice.
</I>
I think internal-error is a good choice for notifying a client of an 
error caused by a bug.

&gt;&gt;&gt;<i> there is also a case for saying that queues are of no concern to 
</I>&gt;&gt;&gt;<i> publishers, only consumers, since publishers never address them 
</I>&gt;&gt;&gt;<i> directly. 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> True, but a system as a whole needs to be able to rely on the 
</I>&gt;&gt;<i> semantics of an exchange and the lifecycle of the queue. I think what 
</I>&gt;&gt;<i> confuses me is the notion of a queue vanishing due to some unspecified 
</I>&gt;&gt;<i> error, and I would feel very uncomfortable having the broker simply 
</I>&gt;&gt;<i> continue without signaling that potentially catastrophic violation of 
</I>&gt;&gt;<i> the specified semantics of a broker.
</I>&gt;<i> 
</I>&gt;<i> Perhaps, but who should this condition be signalled to? I'd argue the 
</I>&gt;<i> *consumers* should be told about it. After all, the queue may vanish 
</I>&gt;<i> long after anyone has published a message to it. Conversely, if nobody 
</I>&gt;<i> ever tries to consume messages from the queue then the fact that it once 
</I>&gt;<i> existed and then vanished is of little interest to anybody.
</I>
Notifying consumers is all well and good. However there may not be any 
consumers at the point the message is published. An important role of 
the queue is to accept responsibility for the message from the 
publishing client until that can be transfered onto the receiving client.

The whole concept of the queue vanishing is a bit alien to me and seems 
to make reasoning about reliability more difficult. However, I've 
strayed from my original motivation from joining the thread which was 
simply curiousity about the atomicity guarantees in RabbitMQ. Thanks for 
all the clarifications and insights!



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002399.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
	<LI>Next message: <A HREF="002404.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2401">[ date ]</a>
              <a href="thread.html#2401">[ thread ]</a>
              <a href="subject.html#2401">[ subject ]</a>
              <a href="author.html#2401">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
