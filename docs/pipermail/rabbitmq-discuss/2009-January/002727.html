<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Channel Cost
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Channel%20Cost&In-Reply-To=497F5F71.2010607%40barryp.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002725.html">
   <LINK REL="Next"  HREF="002729.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Channel Cost</H1>
    <B>Jason J. W. Williams</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Channel%20Cost&In-Reply-To=497F5F71.2010607%40barryp.org"
       TITLE="[rabbitmq-discuss] Channel Cost">jasonjwwilliams at gmail.com
       </A><BR>
    <I>Tue Jan 27 19:34:31 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002725.html">[rabbitmq-discuss] Channel Cost
</A></li>
        <LI>Next message: <A HREF="002729.html">[rabbitmq-discuss] Channel Cost
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2727">[ date ]</a>
              <a href="thread.html#2727">[ thread ]</a>
              <a href="subject.html#2727">[ subject ]</a>
              <a href="author.html#2727">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Barry,

chan_send.basic_publish(msg,exchange=args.exchange,routing_key=args.routing_key)
to an exchange that doesn't exist. I was just wrapping that in a
try/except, assuming it would raise AMQPChannelError if there was an
issue. Unfortunately, it doesn't look like basic_publish has any logic
for checking for an error.

At this point I'm looking at wrapping .wait() in a decorator that
registers an alarm signal and forces an exception if the alarm timer
is too long. Either that or I'll have to move to txAMQP to defer the
error check.

-J

On Tue, Jan 27, 2009 at 12:24 PM, Barry Pederson &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">bp at barryp.org</A>&gt; wrote:
&gt;<i> Jason J. W. Williams wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It looks like I can trigger the error by calling a channel.wait() to
</I>&gt;&gt;<i> pick up any errors that were triggered by the send. Problem is .wait()
</I>&gt;&gt;<i> is a blocking call and if everything went all right it just hangs up
</I>&gt;&gt;<i> the program. I'll take this over to the py-amqplib folks.
</I>&gt;<i>
</I>&gt;<i> How are you triggering errors with the send?  Is it with immediate or
</I>&gt;<i> mandatory flags?  It'd be good to have an example that could be the basis
</I>&gt;<i> for a unittest.
</I>&gt;<i>
</I>&gt;<i>        Barry
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002725.html">[rabbitmq-discuss] Channel Cost
</A></li>
	<LI>Next message: <A HREF="002729.html">[rabbitmq-discuss] Channel Cost
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2727">[ date ]</a>
              <a href="thread.html#2727">[ thread ]</a>
              <a href="subject.html#2727">[ subject ]</a>
              <a href="author.html#2727">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
