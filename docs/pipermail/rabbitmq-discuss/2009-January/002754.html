<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] A new exchange type
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20A%20new%20exchange%20type&In-Reply-To=4980426E.5020803%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002753.html">
   <LINK REL="Next"  HREF="002755.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] A new exchange type</H1>
    <B>Dmitriy Samovskiy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20A%20new%20exchange%20type&In-Reply-To=4980426E.5020803%40lshift.net"
       TITLE="[rabbitmq-discuss] A new exchange type">dmitriy.samovskiy at cohesiveft.com
       </A><BR>
    <I>Wed Jan 28 15:21:30 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002753.html">[rabbitmq-discuss] A new exchange type
</A></li>
        <LI>Next message: <A HREF="002755.html">[rabbitmq-discuss] A new exchange type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2754">[ date ]</a>
              <a href="thread.html#2754">[ thread ]</a>
              <a href="subject.html#2754">[ subject ]</a>
              <a href="author.html#2754">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi all,

Tony Garnock-Jones wrote:
&gt;<i> That's a great insight. We've been puzzling over &quot;last-value caching&quot;
</I>&gt;<i> for a while now, and not made any great progress, largely I think
</I>&gt;<i> because we'd concentrated on putting it in to the *queues* rather than
</I>&gt;<i> the exchanges. Your observation that it's best placed in the *exchange*
</I>&gt;<i> is, I think, critical. Great stuff!
</I>&gt;<i> 
</I>&gt;<i> Alister Morton wrote:
</I>&gt;&gt;<i> We have a use pattern in mind that I think would require development
</I>&gt;<i> of a new exchange type, and a couple of conversations with Alexis would
</I>&gt;<i> seem to reinforce this view that, currently, the functionality we have
</I>&gt;<i> in mind doesn't exist in rabbitmq.
</I>
Alternatively (and please note that this is purely a theoretical speculation on my part),
is the broker itself the best place to run this extended functionality? Wouldn't it be
beneficial to have core broker implement only absolutely necessary fundamental concepts
and push the rest of functionality out to user-space? (compare with kernel-space vs
user-space in OSes).

For example, if core broker could expose AMQP events via AMQP (i.e., broker itself will be
sending messages to a certain protected exchange every time a queue is created, or
consumer connects, or consumer disconnects, etc) plus have its runtime state obtainable
via AMQP (again - send a request message to a certain exchange, get response), then I
could hopefully implement last-value-cache scenario totally in user-space. (This could
also help with monitoring, btw).

Benefits could be:
* smaller core broker (which means faster, more secure, more reliable, fewer moving parts,
more stable, rev'ed less frequently)
* flexibility

When I say flexibility, I mean, for example, when I am running a broker in the cloud,
local disk (the only medium to which core broker can persist; forget about mnesia for now
due to partitioned network) might not be the most reliable persistence medium and I might
choose to persist to something else. Can't expect core broker to integrate with AWS
SimpleDB, right?

Furthermore, flexibility can come handy for those who are like me and have not yet
advanced beyond chapter 5 of Joe Armstrong's book :), and for organizations that do not
(yet!) have Erlang expertise in house. With user-space approach, any language can be used
to write new routing logic and extend core rabbit, and it can better integrate with one's
infra.

Possible disadvantages:
* suboptimal algorithms (can be improved with community peer review)
* higher latency for certain things outside of core broker (not a big deal for me - but I
am not running a trading shop, YMMV)

In other words, please consider rabbitmq core broker as a *platform* on top of which new
functionality can be written and shared, *in* *addition* to being an *end* *product*.

- Dmitriy



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002753.html">[rabbitmq-discuss] A new exchange type
</A></li>
	<LI>Next message: <A HREF="002755.html">[rabbitmq-discuss] A new exchange type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2754">[ date ]</a>
              <a href="thread.html#2754">[ thread ]</a>
              <a href="subject.html#2754">[ subject ]</a>
              <a href="author.html#2754">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
