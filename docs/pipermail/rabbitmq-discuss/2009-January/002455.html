<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ timing out under small load
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20timing%20out%20under%20small%20load&In-Reply-To=21340316.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002454.html">
   <LINK REL="Next"  HREF="002456.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ timing out under small load</H1>
    <B>Dmitriy Samovskiy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20timing%20out%20under%20small%20load&In-Reply-To=21340316.post%40talk.nabble.com"
       TITLE="[rabbitmq-discuss] RabbitMQ timing out under small load">dmitriy.samovskiy at cohesiveft.com
       </A><BR>
    <I>Wed Jan  7 22:26:57 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002454.html">[rabbitmq-discuss] RabbitMQ timing out under small load
</A></li>
        <LI>Next message: <A HREF="002456.html">[rabbitmq-discuss] RabbitMQ timing out under small load
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2455">[ date ]</a>
              <a href="thread.html#2455">[ thread ]</a>
              <a href="subject.html#2455">[ subject ]</a>
              <a href="author.html#2455">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;&gt;<i> Are you sure there is nothing of interest in rabbit logs, apart from
</I>&gt;&gt;<i> timeouts, on both 
</I>&gt;&gt;<i> instances? Maybe something in system logs?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Any info in client logs maybe that could explain why all of them connected
</I>&gt;&gt;<i> to a single 
</I>&gt;&gt;<i> broker (I assume normally you spread connections somewhat equally between
</I>&gt;&gt;<i> the 2 brokers)?
</I>&gt;<i> 
</I>&gt;<i> I took another look at the logs and really there is nothing interesting
</I>&gt;<i> other than a series of timeout errors as pasted in my original post. Any
</I>&gt;<i> other ideas? 
</I>Do you see timeouts in rabbit.log on the instance which had many connections during the 
incident, on the instance which had almost no connections during the incident, or on both?

How many connections does each broker have right now?

Essentially, I think we can get some useful insight into the problem if we understand why 
one node during the incident had no connections and another had all of them (provided this 
is not how you guys usually run it).

Also, to confirm info from your original report: you saw the problem was resolved when you 
attached a consumer to 2 non-important queues and drained them by consuming all messages 
from them. Did you do it on the node with connections or node without connections, and on 
which nodes did those queues live?

I know I keep asking basically same things over and over again, just shooting in the dark 
here :)




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002454.html">[rabbitmq-discuss] RabbitMQ timing out under small load
</A></li>
	<LI>Next message: <A HREF="002456.html">[rabbitmq-discuss] RabbitMQ timing out under small load
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2455">[ date ]</a>
              <a href="thread.html#2455">[ thread ]</a>
              <a href="subject.html#2455">[ subject ]</a>
              <a href="author.html#2455">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
