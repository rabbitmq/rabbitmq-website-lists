<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Load balancing/ack interaction.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Load%20balancing/ack%20interaction.&In-Reply-To=3b949f090901151433r154d490cu8cc74afe3a679972%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002623.html">
   <LINK REL="Next"  HREF="002625.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Load balancing/ack interaction.</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Load%20balancing/ack%20interaction.&In-Reply-To=3b949f090901151433r154d490cu8cc74afe3a679972%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Load balancing/ack interaction.">0x6e6562 at gmail.com
       </A><BR>
    <I>Thu Jan 15 22:41:10 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002623.html">[rabbitmq-discuss] Load balancing/ack interaction.
</A></li>
        <LI>Next message: <A HREF="002625.html">[rabbitmq-discuss] Load balancing/ack interaction.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2624">[ date ]</a>
              <a href="thread.html#2624">[ thread ]</a>
              <a href="subject.html#2624">[ subject ]</a>
              <a href="author.html#2624">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jason,

On Thu, Jan 15, 2009 at 10:33 PM, Jason J. W. Williams
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jasonjwwilliams at gmail.com</A>&gt; wrote:
&gt;<i> I noticed that consumer apps who had not yet ack'd the message they
</I>&gt;<i> had received would receive new messages. I had assumed they wouldn't
</I>&gt;<i> be assigned a new message from the queue until they had ack'd what
</I>&gt;<i> they had already received.
</I>
I see you're talking about egress flow control.

ATM the only way for the consumer to stop the flow of messages is to
exert TCP back pressure on the server. If there is no back pressure,
the server will continue to deliver messages regardless of whether
prior messages have been ack'd or not.

Having said that, I am halfway through QA'ing a patch to implement the
basic.qos command, which will allow you to specify a prefetch window.

So the consumer specifies the window size and the server will halt the
flow of messages until enough acks have come back to push the window
forwards.

This patch should land quite soon.

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002623.html">[rabbitmq-discuss] Load balancing/ack interaction.
</A></li>
	<LI>Next message: <A HREF="002625.html">[rabbitmq-discuss] Load balancing/ack interaction.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2624">[ date ]</a>
              <a href="thread.html#2624">[ thread ]</a>
              <a href="subject.html#2624">[ subject ]</a>
              <a href="author.html#2624">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
