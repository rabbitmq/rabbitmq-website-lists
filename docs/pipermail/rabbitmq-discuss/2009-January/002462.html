<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: question on the faq
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=269388e30901071418g1f4ac480nb81face0f50b6339%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002453.html">
   <LINK REL="Next"  HREF="002465.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: question on the faq</H1>
    <B>Tim Coote</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=269388e30901071418g1f4ac480nb81face0f50b6339%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Fwd: question on the faq">tim+rabbitmq.com at coote.org
       </A><BR>
    <I>Thu Jan  8 12:08:31 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002453.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
        <LI>Next message: <A HREF="002465.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2462">[ date ]</a>
              <a href="thread.html#2462">[ thread ]</a>
              <a href="subject.html#2462">[ subject ]</a>
              <a href="author.html#2462">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Ben
On 7 Jan 2009, at 22:18, Ben Hood wrote:

&gt;<i>
</I>&gt;<i> Tim,
</I>&gt;<i>
</I>&gt;<i> On Wed, Jan 7, 2009 at 12:31 PM, Tim Coote &lt;tim 
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">+rabbitmq.com at coote.org</A>&gt; wrote:
</I>&gt;&gt;<i> Not sure what you mean here? why do I need any exclusive lock?
</I>&gt;<i>
</I>&gt;<i> Because of the implication of this statement from you:
</I>&gt;<i>
</I>&gt;<i> &quot;eg, in the real world, I can make a provisional booking, which times
</I>&gt;<i> out if I don't commit to a firm booking within a known (possibly
</I>&gt;<i> variable) timeline.&quot;
</I>&gt;<i>
</I>&gt;<i> Unless I see this incorrectly, a provisional booking implies
</I>&gt;<i> temporally exclusive access to the resource that you have requested.
</I>&gt;<i> Were this not the case, a provisional booking would be of questionable
</I>&gt;<i> value, because it would only reflect resource availability at the
</I>&gt;<i> point in time that the request was processed. Beyond that, this
</I>&gt;<i> *booking* would be meaningless.
</I>&gt;<i>
</I>As far as my apps concerned it has exclusive access to some resource  
while it's in the transaction. However, the tx can fail for any number  
of reasons before it commits.  What that means in the real world may  
vary.
&gt;&gt;<i>
</I>&gt;&gt;<i> If the resource that my app's looking to 'get a lock on' gets  
</I>&gt;&gt;<i> consumed, the
</I>&gt;&gt;<i> transaction aborts. What's the problem?
</I>&gt;<i>
</I>&gt;<i> As indicated above, what would be the value of this lock if doesn't
</I>&gt;<i> actually lock anything?
</I>I don't think it's a lock. My app just sees the world in a consistent  
state. If I use Oracle, it doesn't lock data that's read, it just  
notes what's been looked at and keeps a copy if the data changes. if  
the app then tries to commit a tx based on that data, it will fail.   
You could implement a lock here if you want, but the type would depend  
on how much contention you're expecting.
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If it's not really a lock, then what implication does this have for
</I>&gt;<i> the I in ACID?
</I>None. The I in ACID is about interleaved updates or read  
inconsistencies. It's valid for a tx to abort if the world changes.   
don't need an exclusive lock to achieve that.
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What I fail to see here is where the logical unit of work is here if
</I>&gt;<i> an external process can affect the outcome of your transaction - e.g.
</I>&gt;<i> somebody else actually booking and paying for the plane seats you were
</I>&gt;<i> eyeballing whilst your code was waiting for each TX-participant to
</I>&gt;<i> reach a consensus.
</I>So, how would you approach this?  Change the high level service so  
that it cannot guarantee atomic holiday bookings and leave the process  
of sorting out the mess as an exercise for the user?  Or build code in  
the holiday booking app that tries to second guess what the individual  
booking failures mean, which typically leads to a bigger mess,  
especially as the failure types change over time. In the meantime,  
there's no sensible legal framework for the holiday booking app to  
work in, so you don't know who owns any costs of component booking  
failures.
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> BTW - did Carl ever post you his answer to your problem?
</I>No.
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ben
</I>&gt;<i>
</I>
Tim Coote
<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at coote.org</A>
vincit veritas





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002453.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
	<LI>Next message: <A HREF="002465.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2462">[ date ]</a>
              <a href="thread.html#2462">[ thread ]</a>
              <a href="subject.html#2462">[ subject ]</a>
              <a href="author.html#2462">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
