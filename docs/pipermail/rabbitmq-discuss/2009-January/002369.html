<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: question on the faq
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=167204d20901050455g6a8415c8t6a69f1b3ba8107e0%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002368.html">
   <LINK REL="Next"  HREF="002370.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: question on the faq</H1>
    <B>Gordon Sim</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=167204d20901050455g6a8415c8t6a69f1b3ba8107e0%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Fwd: question on the faq">gsim at redhat.com
       </A><BR>
    <I>Mon Jan  5 13:57:29 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002368.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
        <LI>Next message: <A HREF="002370.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2369">[ date ]</a>
              <a href="thread.html#2369">[ thread ]</a>
              <a href="subject.html#2369">[ subject ]</a>
              <a href="author.html#2369">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alexis Richardson wrote:
&gt;<i> RabbitMQ provides a correct implementation of the TX class which
</I>&gt;<i> enables work to be grouped.  It is the TX class to which Gordon refers
</I>&gt;<i> in his email below.  The problem is that the definition of TX is open
</I>&gt;<i> to *some* interpretation in edge cases, and is implemented slightly
</I>&gt;<i> differently by the various brokers.  When we discussed the differences
</I>&gt;<i> in the working group we agreed that it would be more useful to clarify
</I>&gt;<i> how each 'correct' interpretation actually works for pre 1.0 specs,
</I>&gt;<i> pending AMQP 1.0.
</I>
I referred to comments made about the atomicity guarantee in the 
RabbitMQ during discussions on clarifying the text of the TX class.

My view has always been that the TX class implied atomicity (and the 
original author confirmed that was his intention), but the text of the 
0-9 (and earlier) spec(s) did not make that explicit.

Members of the RabbitMQ team were not keen on making it explicit when 
the 0-9-1 corrections were published. As I understood their comments, 
this was because RabbitMQ had not assumed 'all or nothing' semantics. 
(And I accept that given the original wording, that is a perfectly valid 
interpretation of the text).

&gt;<i> The complexity of TX arises due to the fact that messaging is about
</I>&gt;<i> routing and delivery as much as it is about enforcing various forms of
</I>&gt;<i> seriality in the presence of change.  For example consider the case
</I>&gt;<i> where N messages are sent in a TX transaction, over multiple queues,
</I>&gt;<i> and during this operation one queue disappears (eg due to failure).  A
</I>&gt;<i> proper treatment of this requires a proper treatment of multiple
</I>&gt;<i> failure cases, and a clear definition of ordering.
</I>
I agree that the behaviour of transactional operations (and indeed 
several non-transactional use cases) when queues are concurrently 
deleted or bindings are concurrently changed is important to define.

A general atomicity guarantee is more basic than that though and would 
in my view be valuable even if it only applied where queues involved in 
that transaction were not deleted during the life of the transaction.

(Note the only way a queue should disappear due to failure is if the 
broker restarts and the queue was not durable, in which case any open 
transactions would be aborted).




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002368.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
	<LI>Next message: <A HREF="002370.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2369">[ date ]</a>
              <a href="thread.html#2369">[ thread ]</a>
              <a href="subject.html#2369">[ subject ]</a>
              <a href="author.html#2369">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
