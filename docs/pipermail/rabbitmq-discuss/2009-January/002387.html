<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: question on the faq
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=167204d20901050735r29c9a9ebie5f3f0527601b942%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002392.html">
   <LINK REL="Next"  HREF="002371.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: question on the faq</H1>
    <B>Gordon Sim</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=167204d20901050735r29c9a9ebie5f3f0527601b942%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Fwd: question on the faq">gsim at redhat.com
       </A><BR>
    <I>Mon Jan  5 17:20:49 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002392.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
        <LI>Next message: <A HREF="002371.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2387">[ date ]</a>
              <a href="thread.html#2387">[ thread ]</a>
              <a href="subject.html#2387">[ subject ]</a>
              <a href="author.html#2387">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alexis Richardson wrote:
&gt;<i> During the 0-9-1 discussions the group came to the realisation that
</I>&gt;<i> either (a) TX qua 0-8/9 was more naturally seen as a generalised
</I>&gt;<i> acknowledgeable group of work, 
</I>
I very much disagree that the 'group' came to any such realisation.

&gt;<i> or (b) that the semantics of TX needed
</I>&gt;<i> to be amended.  Such semantic amendments were of course out of scope
</I>&gt;<i> for 0-9-1, *and* with 1.0 'in view' for 2009, *and* absent a full
</I>&gt;<i> account of failure in 0-8/9, the former view (a) prevailed.  So 0-9-1
</I>&gt;<i> has its own view of what a TX transaction is.
</I>
Again, my view is somewhat different. I think the text describing the tx 
semantics in 0-9 was generally viewed as inadequate (and in my 
particular view also confusing).

Addressing all corner cases (e.g. interactions with immediate and 
mandatory flags) was felt to be out of the scope of the 0-9-1 corrections.

A clarification to the text was proposed that happened to make the 
atomicity guarantee explicit. This wasn't meant to be a change, merely a 
clarification.  However, since the RabbitMQ teams interpretation of the 
specification (and again I'll be clear that it was a legitimate 
intepretation given only the text in the spec) would have been 
invalidated by such a change, it was again felt to be out of scope.

There was never any agreement that a tx transaction was *not* atomic, 
only a failure to agree that it was which resulted in the text being 
left unchanged in that regard.

&gt;<i> More generally, it is dangerous to assume that a messaging system not
</I>&gt;<i> subject to full XA type constraints is like a database in every way.
</I>&gt;<i> In 0-8/9 AMQP, TX can only guarantee atomicity in the presence of
</I>&gt;<i> failures if every broker operation is a transaction in the same sense
</I>&gt;<i> as in a database.  So for example in 0-8/9, individual message
</I>&gt;<i> delivery is *transactional* and *atomic*, but queue failure is not
</I>&gt;<i> guaranteed to be so because the queue lifecycle is simply *undefined*
</I>&gt;<i> in 0-8/9.
</I>
I don't agree the queue lifecycle is undefined in 0-9 (though perhaps I 
misunderstand what you mean there): it starts with the first 
queue-declare and ends with a queue-delete. Auto-deleted queues 
certainly complicate that slightly, but not so far as to make the 
lifecycle undefined.

While I agree that clarifying the expected behaviour when a queue 
involved in a transaction is deleted before the transaction commits 
would be valuable (i.e. are the relevant ops simply ignored, or does the 
deleted queue force the transaction to be aborted), I don't agree that 
the tx class could not quite simply include a statement on the atomicity 
without that however.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002392.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
	<LI>Next message: <A HREF="002371.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2387">[ date ]</a>
              <a href="thread.html#2387">[ thread ]</a>
              <a href="subject.html#2387">[ subject ]</a>
              <a href="author.html#2387">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
