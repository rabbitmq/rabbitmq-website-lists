<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ timing out under small load
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20timing%20out%20under%20small%20load&In-Reply-To=269388e30901071654rfeed3e2xd4f029c04d95e685%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002460.html">
   <LINK REL="Next"  HREF="002464.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ timing out under small load</H1>
    <B>gfodor</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20timing%20out%20under%20small%20load&In-Reply-To=269388e30901071654rfeed3e2xd4f029c04d95e685%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] RabbitMQ timing out under small load">gfodor at gmail.com
       </A><BR>
    <I>Thu Jan  8 01:57:45 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002460.html">[rabbitmq-discuss] RabbitMQ timing out under small load
</A></li>
        <LI>Next message: <A HREF="002464.html">[rabbitmq-discuss] RabbitMQ timing out under small load
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2461">[ date ]</a>
              <a href="thread.html#2461">[ thread ]</a>
              <a href="subject.html#2461">[ subject ]</a>
              <a href="author.html#2461">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Well, when I say connectivity problems I mean the following things:

1) On either of the nodes, running the command rabbitmqctl list_queues as
root would time out about 80% of the time. It seemed that there would be
brief periods where the command would work, and then that would be
subsequently followed by another longer period where it no longer was
responding.
2) Running a local script to perform gets from the queue would frequently
exception out with a timeout error, and retry 30 seconds later, and
continually time out. Beyond that, if I remember correctly, running a script
like this to drain the queue seemed to work better on one node than the
other (namely, it didn't time out the connection) but even though it was
making progress, it was only able to pull one item from the queue every 2-3
seconds.

For our application we opted to not use subscriptions for the consumers,
they pretty much just sit in a loop and call get, sleeping when there is no
work to be done.

Overall I'm pretty skeptical that this was a network related issue, simply
because as soon as the two large queues were deleted and re-created
everything instantly started working again. But then again I'm no erlang
expert :)

Thanks again for the help!


-- 
View this message in context: <A HREF="http://www.nabble.com/RabbitMQ-timing-out-under-small-load-tp21315520p21344452.html">http://www.nabble.com/RabbitMQ-timing-out-under-small-load-tp21315520p21344452.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002460.html">[rabbitmq-discuss] RabbitMQ timing out under small load
</A></li>
	<LI>Next message: <A HREF="002464.html">[rabbitmq-discuss] RabbitMQ timing out under small load
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2461">[ date ]</a>
              <a href="thread.html#2461">[ thread ]</a>
              <a href="subject.html#2461">[ subject ]</a>
              <a href="author.html#2461">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
