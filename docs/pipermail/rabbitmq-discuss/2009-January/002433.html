<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: question on the faq
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=26FC724D-7FC1-485B-9E7E-BA64661E78D3%40coote.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002428.html">
   <LINK REL="Next"  HREF="002434.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: question on the faq</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=26FC724D-7FC1-485B-9E7E-BA64661E78D3%40coote.org"
       TITLE="[rabbitmq-discuss] Fwd: question on the faq">0x6e6562 at gmail.com
       </A><BR>
    <I>Wed Jan  7 11:34:31 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002428.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
        <LI>Next message: <A HREF="002434.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2433">[ date ]</a>
              <a href="thread.html#2433">[ thread ]</a>
              <a href="subject.html#2433">[ subject ]</a>
              <a href="author.html#2433">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tim,

On Tue, Jan 6, 2009 at 7:32 PM, Tim Coote &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim+rabbitmq.com at coote.org</A>&gt; wrote:
&gt;<i> b) is the correct answer. That's what a transaction means - you cannot dip
</I>&gt;<i> in and out of the transaction.
</I>&gt;<i>
</I>&gt;<i> However, it is possible to have a compensating transaction, as part of the
</I>&gt;<i> rollback - eg the downstream systems may not support enough state
</I>&gt;<i> transitions, so a booking would imply a contract, which would have a cost to
</I>&gt;<i> get out of.  This is the common approach for any systems that drive the
</I>&gt;<i> physical world (eg producing printed material or driving a robot.)  Even in
</I>&gt;<i> this type of scenario, the transactional model makes it easier to get the
</I>&gt;<i> analysis complete and correct, although it's better to get the downstream
</I>&gt;<i> systems to support suitable states.  eg, in the real world, I can make a
</I>&gt;<i> provisional booking, which times out if I don't commit to a firm booking
</I>&gt;<i> within a known (possibly variable) timeline.
</I>
So you intend to keep an exclusive lock on the entities that you
requesting from the downstream system for the duration of the unit of
work?

&gt;<i> I find that without this approach, the overall requirements/analysis and
</I>&gt;<i> design is frequently incomplete, revealing inconsistencies between the
</I>&gt;<i> assumptions of the upstream and downstream systems and costly remediation.
</I>
If those are you requirements then my initial feeling is that a
messaging system like Rabbit would be a poor fit for your use case.

This is because to make the requests visible to the downstream system
before the transaction commits, all of those systems would have to
participate in the same transaction. To do this, you would have to
extend the transactional context to each participant, which is not
possible (in Rabbit) without any application level code to propagate
the distributed consensus.

Hence my recommendation is to either take the example that Carl wrote
yesterday or use middleware that is less asynchronous.

BTW Carl - would it be possible to have a look at the code that you
wrote for Tim? It may clarify my lack of understanding.

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002428.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
	<LI>Next message: <A HREF="002434.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2433">[ date ]</a>
              <a href="thread.html#2433">[ thread ]</a>
              <a href="subject.html#2433">[ subject ]</a>
              <a href="author.html#2433">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
