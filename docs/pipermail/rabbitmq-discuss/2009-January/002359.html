<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd:  question on the faq
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20%20question%20on%20the%20faq&In-Reply-To=167204d20901021330k58638ff2sd15fd7da3812da1%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002362.html">
   <LINK REL="Next"  HREF="002366.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd:  question on the faq</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20%20question%20on%20the%20faq&In-Reply-To=167204d20901021330k58638ff2sd15fd7da3812da1%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Fwd:  question on the faq">alexis.richardson at cohesiveft.com
       </A><BR>
    <I>Fri Jan  2 21:33:54 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002362.html">[rabbitmq-discuss] Download location for non-beta client library
</A></li>
        <LI>Next message: <A HREF="002366.html">[rabbitmq-discuss] Fwd:  question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2359">[ date ]</a>
              <a href="thread.html#2359">[ thread ]</a>
              <a href="subject.html#2359">[ subject ]</a>
              <a href="author.html#2359">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tim,

On Wed, Dec 31, 2008 at 12:17 PM, Tim Coote &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim+rabbitmq.com at coote.org</A>&gt; wrote:
&gt;<i> Hullo
</I>
Hi, and thanks for joining the list.


&gt;<i> A neophyte's question:
</I>&gt;<i>
</I>&gt;<i> The  faq includes 'is rabbitmq transactional?'
</I>&gt;<i>
</I>&gt;<i> The answer is 'yes' and then says that it has atomicity and durability
</I>&gt;<i> guarantees. What about Isolation and consistency?
</I>
There are senses in which AMQP, and RabbitMQ, behaviour can be
described as ACID, following the wikipedia definition:
<A HREF="http://en.wikipedia.org/wiki/ACID">http://en.wikipedia.org/wiki/ACID</A>

In AMQP 0-8, 0-9 and 0-9-1, we can talk about individual messages and
commands, and the TX class which groups them.  In AMQP 0-10 we can
talk about conversational ACIDity which allows us to define DTX (XA)
and the famed 'idempotent delivery' aka 'once and only once', because,
in effect, sequence numbers are first class.

Certainly, individual message delivery in RabbitMQ is ACID in that:

* What the FAQ says is good
* Trivially, individual operations are isolated
* RabbitMQ does not map a consistent state to an observable inconsistent state

I think the last point is key to answering your question :-)

Of course this says nothing about the TX class which groups operations
atomically, and respects durability in the intuitively correct way.
In this case isolation and consistency are significantly more
burdensome to guarantee.  As far as I am aware, but one of the
engineering team may wish to correct this:

* RabbitMQ guarantees weakly consistent states, i.e. once TX commits,
the state is consistent.
* For individual messages whose delivery is observable, it is not
possible to observe an inconsistent state after delivery
* Provided that the mandatory and immediate flags are not used,
isolation is guaranteed

This means that:

* for AMQP, if you use TX and avoid mandatory and immediate, you are 'good'
* also, for RabbitMQ, intermingling TX with mandatory and immediate
will lead to sensible behaviour, but I would prefer it if the
engineering team described what that means in practice.

A full treatment of consistency should be in AMQP 1.0.

The engineering team may wish to comment on the above - please take
with a dash of salt...



&gt;<i> (although the latter
</I>&gt;<i> may be partly embedded in the apps that use rabbitmq,
</I>
Yes, as with DBMS, it may be cheaper to manage this at the app layer
in some cases.


&gt;<i> I think that
</I>&gt;<i> consistency implies guarantees about serialisation/deserialisation).
</I>
Really?


&gt;<i> Is the answer buried in the semantics of a TX AMQP message type?
</I>
Yes - see above :-)


&gt;<i> I'd expect good engineering practice like ACID transactions and
</I>&gt;<i> failfast guidelines in Erlang/OTP programming as I think that these
</I>&gt;<i> are pretty much essential for any large scale system that's intended
</I>&gt;<i> to be robust.  (Unlike many commercial programs ;-)
</I>
Yes, I think we follow good practice.  But do please note that
Erlang/OTP and AMQP are different beasts, and RabbitMQ tries to make
good use of the engineering in the former, to deliver minimally
confusing behaviour implementing the latter ;-)

Let us all know if this helps, and please ask more questions.

alexis




&gt;<i> Tim
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002362.html">[rabbitmq-discuss] Download location for non-beta client library
</A></li>
	<LI>Next message: <A HREF="002366.html">[rabbitmq-discuss] Fwd:  question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2359">[ date ]</a>
              <a href="thread.html#2359">[ thread ]</a>
              <a href="subject.html#2359">[ subject ]</a>
              <a href="author.html#2359">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
