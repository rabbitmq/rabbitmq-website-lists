<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Is there a use case for a queue with	auto_delete=True and durable=True?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Is%20there%20a%20use%20case%20for%20a%20queue%20with%0A%09auto_delete%3DTrue%20and%20durable%3DTrue%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002676.html">
   <LINK REL="Next"  HREF="002680.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Is there a use case for a queue with	auto_delete=True and durable=True?</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Is%20there%20a%20use%20case%20for%20a%20queue%20with%0A%09auto_delete%3DTrue%20and%20durable%3DTrue%3F&In-Reply-To="
       TITLE="[rabbitmq-discuss] Is there a use case for a queue with	auto_delete=True and durable=True?">0x6e6562 at gmail.com
       </A><BR>
    <I>Fri Jan 23 11:02:29 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002676.html">[rabbitmq-discuss] ACLs
</A></li>
        <LI>Next message: <A HREF="002680.html">[rabbitmq-discuss] Is there a use case for a queue with	auto_delete=True and durable=True?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2678">[ date ]</a>
              <a href="thread.html#2678">[ thread ]</a>
              <a href="subject.html#2678">[ subject ]</a>
              <a href="author.html#2678">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Brian,

Just posting this back via the mailing list because you did not choose
LShift's $10000 per question option ;-)

On Fri, Jan 23, 2009 at 9:05 AM, Ben Hood &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben at lshift.net</A>&gt; wrote:
&gt;<i> ----- Forwarded message from Brian Sullivan &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">bsullivan at lindenlab.com</A>&gt; -----
</I>&gt;<i> I was just explaining scenarios for the various persistence settings, and
</I>&gt;<i> couldn't come up with a use case for creating an auto-delete queue (which
</I>&gt;<i> is the default), but setting durable = true.
</I>
Have you read what the 0.8/0.9.1 spec says on what effect each flag
has for the queue.declare command?

Though the spec does not specify default values, our internally
generated commands use a JSON version of the actual specification that
has been augmented with Rabbit considers to be *sensible* default
values.

In the file amqp-0.8.json the auto_delete flag on queue.declare is off.

The relevance of this is marginal because it is up to what the client
library actually puts on the wire.

&gt;<i> Upon restart after a server
</I>&gt;<i> crash, I'd assume that the client would take a little bit of time to
</I>&gt;<i> reconnect, in which case the queue would be deleted, even if it was
</I>&gt;<i> durable, correct?
</I>
The events that trigger a consideration of the auto_delete flag in
Rabbit are subscription cancellations and the channel going down.

&gt;<i> Is there a use case for this combination of settings?  I have seen some
</I>&gt;<i> posts that have been confused by not having queues remain when
</I>&gt;<i> durable=true if people forget to set auto-delete=false, so it seems odd to
</I>&gt;<i> have the defaults set the way they are (at least as they appear to be in
</I>&gt;<i> the python lib)
</I>
I would consider it to be odd, but I'm not a lawyer.

Though the exact behavior of this scenario is IMHO not clearly defined
in the spec, I think that most implementations would take a common
sense approach.

&gt;<i>From the perspective of py-amqplib, I would say that it's over to
</I>Barry to make a call on this.

BTW, feel free to question any spec related aspect of AMQP, we'll do
our best to try an explain why it is like it is, although we didn't
write it.

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002676.html">[rabbitmq-discuss] ACLs
</A></li>
	<LI>Next message: <A HREF="002680.html">[rabbitmq-discuss] Is there a use case for a queue with	auto_delete=True and durable=True?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2678">[ date ]</a>
              <a href="thread.html#2678">[ thread ]</a>
              <a href="subject.html#2678">[ subject ]</a>
              <a href="author.html#2678">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
