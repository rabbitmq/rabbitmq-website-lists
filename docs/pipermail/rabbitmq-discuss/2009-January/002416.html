<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: question on the faq
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=F2592FEF-F14D-49B6-B5ED-C2F748E4BC0C%40coote.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002415.html">
   <LINK REL="Next"  HREF="002418.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: question on the faq</H1>
    <B>Carl Trieloff</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=F2592FEF-F14D-49B6-B5ED-C2F748E4BC0C%40coote.org"
       TITLE="[rabbitmq-discuss] Fwd: question on the faq">cctrieloff at redhat.com
       </A><BR>
    <I>Tue Jan  6 13:36:53 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002415.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
        <LI>Next message: <A HREF="002418.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2416">[ date ]</a>
              <a href="thread.html#2416">[ thread ]</a>
              <a href="subject.html#2416">[ subject ]</a>
              <a href="author.html#2416">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Tim,

few comments in-line.

Tim Coote wrote:
&gt;<i> I'm getting the sense that as far as AMQP is concerned, the word 
</I>&gt;<i> Transaction is not helpful as it sort of implies similar semantics to 
</I>&gt;<i> the work on ACID semantics for programming models (TP monitors, DBMS, 
</I>&gt;<i> SQL, X/Open's XA, etc), which are concerned with the properties of the 
</I>&gt;<i> control of the operation (which seems to be what AMQP is mostly 
</I>&gt;<i> concerned about) AND the guarantees on the contents of the operation, 
</I>&gt;<i> which seems to me to be considered out of scope for AMQP - that's why 
</I>&gt;<i> XA talks about Resource Managers: it's concerned about the integrity 
</I>&gt;<i> and correct state transitions of resources that are managed.  I can 
</I>&gt;<i> see a strong revenue stream in explaining to clients that their 
</I>&gt;<i> proposed application architecture is broken because they've assumed 
</I>&gt;<i> that Transaction in AMQP is comparable to their understanding from 
</I>&gt;<i> using TP monitors, or even just API guarantees.
</I>
Just a note, we at the Qpid project interpret txn's to be atomic and 
support full XA and TM integration. So it works like any other messaging 
software that supports txn's

&gt;<i>
</I>&gt;<i> I can see value in what I think AMQP is trying to achieve (based on a 
</I>&gt;<i> cursory skimming of the 10 spec and this discussion), but it needs to 
</I>&gt;<i> be clear to the app architects that they will need to layer on top of 
</I>&gt;<i> the protocol a whole extra chunk of app to do the reconciliation of 
</I>&gt;<i> state between the systems, which can largely be avoided with 
</I>&gt;<i> (traditional) transactional systems.
</I>&gt;<i>
</I>

TX and DTX ARE to cover the 'normal semantics of a transaction'  The DTX 
work in AMQP was done by the guys that worked on Arjuna, Bluestone, 
Encina and a few other TMs. TX in 0-10 and 1.0 is just the 1PC case 
where you want transactional semantics with a single resource the 
broker, as where DTX is needed when you want more than one transactional 
resource. In AMQP 1.0 you will see that en-listing of txn has been moved 
to the session, and the coordinator part of DTX has been named such so 
avoid the TX/DTX confusion.

&gt;<i> Using what I'd call the normal semantics of a transaction, I'd define 
</I>&gt;<i> a unit of work that booked all of my components of my holiday in one 
</I>&gt;<i> block and I'd know whether everything were ok or not.
</I>
Ack, this is what TX and DTX are for

&gt;<i> It also makes it very obvious that I need to think about the legal 
</I>&gt;<i> contracts that I'm 'committing' to so that I can form suitable 
</I>&gt;<i> compensating transactions. 
</I>
correct

&gt;<i> Using the AQMP definition, all I know is that the booking requests 
</I>&gt;<i> were delivered, and possibly not even that they'd all been delivered.
</I>
AMQP transaction means that all the messages in the txn where correctly 
enqueded/dequeded on the broker or aborted atomically. i.e all my 
messages in the txn where consumed are put back in an abort atomically 
and all my published messaged are enqueued. Also that no published 
messages are made available to the consumer until the txn has been 
committed.

&gt;<i>
</I>&gt;<i> tx and dtx classes have value (I still need to get to the bottom of what).
</I>
This is my key point -- if you chose to decide that the AMQP transaction 
is not atomic, I have no clue what it is used for and I no way in a 
transaction in my mind.

&gt;<i> However, their naming - especially if dtx is defined in terms of XA 
</I>&gt;<i> spec, but doesn't cover the content of messages, is going to create an 
</I>&gt;<i> adoption barrier to the technology.  Have a scan of XA and DTP and see 
</I>&gt;<i> if you agree.  (Section 2.2 et seq - I won't reproduce it here: it's 
</I>&gt;<i> short, but doesn't format well when I drop it into an email).
</I>
The content of the message is transactional as it is contained in the 
message.

Carl.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002415.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
	<LI>Next message: <A HREF="002418.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2416">[ date ]</a>
              <a href="thread.html#2416">[ thread ]</a>
              <a href="subject.html#2416">[ subject ]</a>
              <a href="author.html#2416">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
