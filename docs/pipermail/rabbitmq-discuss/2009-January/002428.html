<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: question on the faq
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=269388e30901061033l7fb428b2y51cb5dd499b1a2cc%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002427.html">
   <LINK REL="Next"  HREF="002433.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: question on the faq</H1>
    <B>Tim Coote</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20question%20on%20the%20faq&In-Reply-To=269388e30901061033l7fb428b2y51cb5dd499b1a2cc%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Fwd: question on the faq">tim+rabbitmq.com at coote.org
       </A><BR>
    <I>Tue Jan  6 19:32:08 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002427.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
        <LI>Next message: <A HREF="002433.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2428">[ date ]</a>
              <a href="thread.html#2428">[ thread ]</a>
              <a href="subject.html#2428">[ subject ]</a>
              <a href="author.html#2428">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>b) is the correct answer. That's what a transaction means - you cannot  
dip in and out of the transaction.

However, it is possible to have a compensating transaction, as part of  
the rollback - eg the downstream systems may not support enough state  
transitions, so a booking would imply a contract, which would have a  
cost to get out of.  This is the common approach for any systems that  
drive the physical world (eg producing printed material or driving a  
robot.)  Even in this type of scenario, the transactional model makes  
it easier to get the analysis complete and correct, although it's  
better to get the downstream systems to support suitable states.  eg,  
in the real world, I can make a provisional booking, which times out  
if I don't commit to a firm booking within a known (possibly variable)  
timeline.

I find that without this approach, the overall requirements/analysis  
and design is frequently incomplete, revealing inconsistencies between  
the assumptions of the upstream and downstream systems and costly  
remediation.

Tim


On 6 Jan 2009, at 18:33, Ben Hood wrote:

&gt;<i>
</I>&gt;<i> Tim,
</I>&gt;<i>
</I>&gt;<i> On Tue, Jan 6, 2009 at 5:22 PM, Tim Coote &lt;tim 
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">+rabbitmq.com at coote.org</A>&gt; wrote:
</I>&gt;&gt;<i> These steps are all from the pov of my application.  I'm assuming  
</I>&gt;&gt;<i> that there
</I>&gt;&gt;<i> must be messages in both directions. If this were paper based, step  
</I>&gt;&gt;<i> 4 would
</I>&gt;&gt;<i> include opening the mail and reconciling booking confirmations  
</I>&gt;&gt;<i> against
</I>&gt;&gt;<i> booking orders sent out in step 2, + separate steps to handle  
</I>&gt;&gt;<i> timeouts, etc,
</I>&gt;&gt;<i> which I'd expect to be in the context of the 'transaction'.  I  
</I>&gt;&gt;<i> could write
</I>&gt;&gt;<i> this as a series of async processes, but my experience of that type  
</I>&gt;&gt;<i> of
</I>&gt;&gt;<i> design when given to programmers is that I get much more complexity  
</I>&gt;&gt;<i> than I
</I>&gt;&gt;<i> need.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Does that make sense?
</I>&gt;<i>
</I>&gt;<i> The bit that is confusing me is the intention of the transaction
</I>&gt;<i> (which I guess is the crux of this whole thread :-)
</I>&gt;<i>
</I>&gt;<i> So going back to you paper based analogy, what is the logical unit  
</I>&gt;<i> of work?
</I>&gt;<i>
</I>&gt;<i> Is it
</I>&gt;<i>
</I>&gt;<i> a) send out n requests and if any error occurs, 0 requests get sent
</I>&gt;<i> because they are grouped in a transaction;
</I>&gt;<i> b) send out n requests and wait for every result to come back and then
</I>&gt;<i> if there is an error with any response, roll the whole thing back
</I>&gt;<i>
</I>&gt;<i> ?
</I>&gt;<i>
</I>&gt;<i> The reason why I ask is because I can't see how (b) can work unless
</I>&gt;<i> you propagate the transactional context to all of the consumers of the
</I>&gt;<i> requests. But as I said before, I'm probably missing the point.
</I>&gt;<i>
</I>&gt;<i> Ben
</I>&gt;<i>
</I>
Tim Coote
<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at coote.org</A>
vincit veritas





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002427.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
	<LI>Next message: <A HREF="002433.html">[rabbitmq-discuss] Fwd: question on the faq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2428">[ date ]</a>
              <a href="thread.html#2428">[ thread ]</a>
              <a href="subject.html#2428">[ subject ]</a>
              <a href="author.html#2428">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
