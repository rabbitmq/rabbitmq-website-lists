<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Net::AMQP Perl Client - Status?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Net%3A%3AAMQP%20Perl%20Client%20-%20Status%3F&In-Reply-To=496A74EF.6080805%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002476.html">
   <LINK REL="Next"  HREF="002563.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Net::AMQP Perl Client - Status?</H1>
    <B>Darien Kindlund</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Net%3A%3AAMQP%20Perl%20Client%20-%20Status%3F&In-Reply-To=496A74EF.6080805%40lshift.net"
       TITLE="[rabbitmq-discuss] Net::AMQP Perl Client - Status?">darien at kindlund.com
       </A><BR>
    <I>Wed Jan 14 19:15:42 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002476.html">[rabbitmq-discuss] Net::AMQP Perl Client - Status?
</A></li>
        <LI>Next message: <A HREF="002563.html">[rabbitmq-discuss] Net::AMQP Perl Client - Status?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2561">[ date ]</a>
              <a href="thread.html#2561">[ thread ]</a>
              <a href="subject.html#2561">[ subject ]</a>
              <a href="author.html#2561">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Tony,

Thanks again for your help; I think I understand more of the nuances
between STOMP-RabbitMQ now.  As a sanity check, could you confirm the
following findings:

1) Since RabbitMQ implements only v0.8 (0-8) of the AMQP spec, it does
not support the 'headers' exchange type (as defined in 0-10 spec).
Correct?
If this is correct, can anyone indicate when the 'headers' exchange
type will be (expected to be) introduced into a version of RabbitMQ?
(v1.6?)

2) Both (0-8) and (0-10) AMQP specifications talk about &quot;message
priority&quot; (i.e., message.delivery-priority).  Can you give me an
example of how you construct different priority messages via
Net::STOMP?  Do you just specify the &quot;priority&quot; header with an integer
value of 0,1,2,3,4,5,6,7,8, or 9?  Or, are message priorities not even
implemented in RabbitMQ v1.5?

Thanks again,
-- Darien

On Sun, Jan 11, 2009 at 5:38 PM, Tony Garnock-Jones &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonyg at lshift.net</A>&gt; wrote:
&gt;<i> Hi Darien,
</I>&gt;<i>
</I>&gt;<i> Exchanges have to be declared out-of-band ahead of time (though a clean
</I>&gt;<i> approach to doing the declarations via STOMP would be a great contribution),
</I>&gt;<i> but Queues are declared at the point of subscription.
</I>&gt;<i>
</I>&gt;<i>  1. A queue.declare is done as part of SUBSCRIBE. The boolean STOMP
</I>&gt;<i>    headers &quot;passive&quot;, &quot;durable&quot;, &quot;exclusive&quot; and &quot;auto-delete&quot; are used
</I>&gt;<i>    as part of the declaration. (They all default &quot;false&quot; except
</I>&gt;<i>    &quot;auto-delete&quot;, which defaults &quot;true&quot;.)
</I>&gt;<i>
</I>&gt;<i>  2. If the &quot;exchange&quot; STOMP header is present, a queue.bind is done
</I>&gt;<i>    (using also STOMP header &quot;routing_key&quot;).
</I>&gt;<i>
</I>&gt;<i>  3. Finally, a basic.consume is done.
</I>&gt;<i>
</I>&gt;<i> So, to address your second question: it has actually declared and started
</I>&gt;<i> consuming from the queue! So the waiting is expected behaviour.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>  Tony
</I>&gt;<i>
</I>&gt;<i> Darien Kindlund wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi Tony,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Great!  That answers most of my questions.... Lastly, I assume you
</I>&gt;&gt;<i> still have to pre-declare all your exchanges and queues *outside* of
</I>&gt;&gt;<i> Net::Stomp (through some other AMQP interface) -- correct?  I got the
</I>&gt;&gt;<i> impression that if any of the exchanges or queues were torn down
</I>&gt;&gt;<i> between successive executions of a Net::Stomp client, that any
</I>&gt;&gt;<i> messages sent would be silently dropped.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That leads me to another question -- apparently, when subscribing to a
</I>&gt;&gt;<i> non-existent queue, the Net::Stomp client does not kick back any type
</I>&gt;&gt;<i> of exception.  Instead, it appears to blindly sit and wait forever,
</I>&gt;&gt;<i> with no notification that the bind was unsuccessful.  I assume this is
</I>&gt;&gt;<i> a known limitation, right?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i> -- Darien
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Sun, Jan 11, 2009 at 1:41 PM, Tony Garnock-Jones &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonyg at lshift.net</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi Darien,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> (CCs trimmed)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Darien Kindlund wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Additionally, I was curious if the STOMP adapter provides a way for a
</I>&gt;&gt;&gt;&gt;<i> Net::Stomp perl client to connect to a different vhost (other than
</I>&gt;&gt;&gt;&gt;<i> '/').
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Yes: supply a custom header, &quot;virtual-host&quot;, to the CONNECT command. I'm
</I>&gt;&gt;&gt;<i> not
</I>&gt;&gt;&gt;<i> 100% certain, but I suspect you can do this by
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  $stomp-&gt;connect({login=&gt;'guest', passcode=&gt;'guest',
</I>&gt;&gt;&gt;<i>                  &quot;virtual-host&quot;=&gt;'/my-virtual-host'})
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> There are a couple of other extension headers available; I'm afraid I
</I>&gt;&gt;&gt;<i> haven't gotten around to the dreaded documentation yet, so reading
</I>&gt;&gt;&gt;<i> rabbit_stomp.erl is the only way to discover them. A quick grep provides:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  CONNECT virtual-host
</I>&gt;&gt;&gt;<i>  CONNECT realm
</I>&gt;&gt;&gt;<i>  SEND exchange
</I>&gt;&gt;&gt;<i>  SUBSCRIBE exchange
</I>&gt;&gt;&gt;<i>  SUBSCRIBE routing_key
</I>&gt;&gt;&gt;<i>  various message properties in SEND
</I>&gt;&gt;&gt;<i>  queue and binding attributes in various methods
</I>&gt;&gt;&gt;<i>   (X-, X-Q-, X-B- prefixes)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Regards,
</I>&gt;&gt;&gt;<i>  Tony
</I>&gt;&gt;&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002476.html">[rabbitmq-discuss] Net::AMQP Perl Client - Status?
</A></li>
	<LI>Next message: <A HREF="002563.html">[rabbitmq-discuss] Net::AMQP Perl Client - Status?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2561">[ date ]</a>
              <a href="thread.html#2561">[ thread ]</a>
              <a href="subject.html#2561">[ subject ]</a>
              <a href="author.html#2561">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
