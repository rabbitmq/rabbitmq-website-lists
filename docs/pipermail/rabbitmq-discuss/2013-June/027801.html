<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Node.js &amp; RabbitMQ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Node.js%20%26%20RabbitMQ&In-Reply-To=%3C51B5F7F1.7060906%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027772.html">
   <LINK REL="Next"  HREF="027774.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Node.js &amp; RabbitMQ</H1>
    <B>Michael Bridgen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Node.js%20%26%20RabbitMQ&In-Reply-To=%3C51B5F7F1.7060906%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Node.js &amp; RabbitMQ">mikeb at rabbitmq.com
       </A><BR>
    <I>Mon Jun 10 16:59:45 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027772.html">[rabbitmq-discuss] Node.js &amp; RabbitMQ
</A></li>
        <LI>Next message: <A HREF="027774.html">[rabbitmq-discuss] RabbitMQ for log data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27801">[ date ]</a>
              <a href="thread.html#27801">[ thread ]</a>
              <a href="subject.html#27801">[ subject ]</a>
              <a href="author.html#27801">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> How do you correctly close a connection?
</I>
The official way, `connection.end`, closes the underlying socket. This 
means no more bytes hither or thither, so you'll want to make sure 
everything you wanted done has been done first; this is the main purpose 
of the amqp_hacks.safeCloseConnection from the tutorials.

&gt;<i> Why is my exchange not being created?
</I>
What exactly is the problem you're seeing? If I take the code below, 
stick it in a file, and run it, it runs to completion and logs all the 
given output; further, I can see the exchange in the management web UI, 
which also registers the message going through as a blip in the message 
rate.

```
var amqp = require('amqp');
var RABBITMQ_URL = '<A HREF="amqp://localhost';">amqp://localhost';</A>

var connection = amqp.createConnection({url: RABBITMQ_URL});

connection.on('ready', function(){
   console.log(&quot;Connection established&quot;);
   connection.exchange('cloudrouter', {&quot;type&quot;: &quot;direct&quot;}, 
function(exchange){
     console.log(&quot;Exchange created&quot;);
     exchange.publish('',&quot;Hello World&quot;);
     console.log(&quot; [x] Sent Hello World&quot;);
     connection.end();
   });
});
```

If you run the code in a REPL line-by-line, by the way, it will likely 
*not* execute the ready event handler (so nothing will happen). By the 
time the prompt returns for the next line, all the I/O is done and that 
one-off event has fired.

-Michael

&gt;<i> var connection = amqp.createConnection({url: RABBITMQ_URL});
</I>&gt;<i>
</I>&gt;<i> connection.on('ready', function(){
</I>&gt;<i> //console.log(&quot;Connection established&quot;);
</I>&gt;<i> connection.exchange('cloudrouter', {&quot;type&quot;: &quot;direct&quot;}, function(exchange){
</I>&gt;<i> console.log(&quot;Exchange created&quot;);
</I>&gt;<i> console.log(&quot;Another Message&quot;);
</I>&gt;<i> //exchange.publish('',&quot;Hellow World&quot;);
</I>&gt;<i> //console.log(&quot; [x] Sent Hello World&quot;);
</I>&gt;<i> //amqp_hacks.safeEndConnection(connection);
</I>&gt;<i> });
</I>&gt;<i> });
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Warmest Regards,
</I>&gt;<i>
</I>&gt;<i> *Josh Birdwell*
</I>&gt;<i> STEM Advocate
</I>&gt;<i> Oklahoma City, Oklahoma
</I>&gt;<i> Mobile: (405) 388-0176
</I>&gt;<i> &lt;<A HREF="http://www.twitter.com/jbirdwell34">http://www.twitter.com/jbirdwell34</A>&gt;
</I>&gt;<i> &lt;<A HREF="http://www.facebook.com/rfidedgellc">http://www.facebook.com/rfidedgellc</A>&gt;
</I>&gt;<i> &lt;<A HREF="http://www.linkedin.com/in/joshbirdwell">http://www.linkedin.com/in/joshbirdwell</A>&gt; &lt;<A HREF="http://www.rfidedge.org">http://www.rfidedge.org</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027772.html">[rabbitmq-discuss] Node.js &amp; RabbitMQ
</A></li>
	<LI>Next message: <A HREF="027774.html">[rabbitmq-discuss] RabbitMQ for log data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27801">[ date ]</a>
              <a href="thread.html#27801">[ thread ]</a>
              <a href="subject.html#27801">[ subject ]</a>
              <a href="author.html#27801">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
