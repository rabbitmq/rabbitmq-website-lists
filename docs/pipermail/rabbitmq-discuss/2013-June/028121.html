<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queries on processes connected to RabbitMQ	node
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queries%20on%20processes%20connected%20to%20RabbitMQ%0A%09node&In-Reply-To=%3CCAE3HoVTT%3D70tE%3DmGLj_MHn0LPX4dywfHrBakYn3Q5advLzduXg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028117.html">
   <LINK REL="Next"  HREF="028130.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queries on processes connected to RabbitMQ	node</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queries%20on%20processes%20connected%20to%20RabbitMQ%0A%09node&In-Reply-To=%3CCAE3HoVTT%3D70tE%3DmGLj_MHn0LPX4dywfHrBakYn3Q5advLzduXg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Queries on processes connected to RabbitMQ	node">michael.s.klishin at gmail.com
       </A><BR>
    <I>Wed Jun 26 19:30:10 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028117.html">[rabbitmq-discuss] Queries on processes connected to RabbitMQ node
</A></li>
        <LI>Next message: <A HREF="028130.html">[rabbitmq-discuss] Queries on processes connected to RabbitMQ node
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28121">[ date ]</a>
              <a href="thread.html#28121">[ thread ]</a>
              <a href="subject.html#28121">[ subject ]</a>
              <a href="author.html#28121">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2013/6/26 Priyanki Vashi &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">vashi.priyanki at gmail.com</A>&gt;

Some of what ps presents as probably kernel threads but you should not
worry about it.

1) First thing, I wanted to tie every single node of my cluster to the
&gt;<i> specific CPU using linux 'taskset -c cpu -p pid' command. I have total of
</I>&gt;<i> 20 cpus so this how I want to control resources to understand how it scales
</I>&gt;<i> with respect to CPU and what load every CPU would be under when I do stress
</I>&gt;<i> testing with multiple producer and consumer.
</I>&gt;<i>
</I>&gt;<i>
</I>I doubt manual CPU pinning will yield better results than just relying on
the Erlang runtime scheduler to do its job.
It's probably the most advanced component of the runtime.

It is a very good idea to run Erlang R16B if you have 20 CPUs.


&gt;<i> 2) Secondly I am also interested to measure the load on each CPU as a part
</I>&gt;<i> of stress testings. So what is the suitable method to measure CPU load. I
</I>&gt;<i> googled on this on internet and found either by using script or manually
</I>&gt;<i> reading %cpu for every processes and addind them together to get total
</I>&gt;<i> utilization of CPU. Is this correct way one can understand CPU utilization
</I>&gt;<i> or ?
</I>&gt;<i>
</I>&gt;<i>
</I>Monitor CPU load periodically over the course of your entire test (ideally,
tens of minutes or hours).


&gt;<i> 3) Third thing was, Is the epmd -daemon is the First parent process, which
</I>&gt;<i> is in the end of the list and probably started when I started my very first
</I>&gt;<i> node. Though I am not sure since I did not track processes after every node
</I>&gt;<i> starting. It's not very clear to me what is the importance of this process
</I>&gt;<i> ?
</I>&gt;<i>
</I>&gt;<i>
</I>epmd is Erlang Port Mapper Daemon. It's a process Erlang nodes use to
communicate with each other. In simpler
terms, distributed Erlang features (which RabbitMQ uses) cannot operate if
epmd is not running.

You can read more about it in the docs:
<A HREF="http://www.erlang.org/doc/man/epmd.html">http://www.erlang.org/doc/man/epmd.html</A>


&gt;<i> 4) Also, in rabbitmq management plugin there is a field called 'Erlang
</I>&gt;<i> Processes', which shows numbers in the range of 120-130 for every node of
</I>&gt;<i> my cluster. Is this really the number of Erlang process started by every
</I>&gt;<i> node ?
</I>&gt;<i>     Even if there is no messages sent and received, this is the number.
</I>&gt;<i> Will it increase with increase on load while running multiple producer and
</I>&gt;<i> consumer ?
</I>&gt;<i>     how does it map to the processes listed below for every node. What
</I>&gt;<i> happens in theory if I kill this manually. (Since I don't want to disturb
</I>&gt;<i> current setup so not trying and asking in the forum)
</I>&gt;<i>
</I>&gt;<i>
</I>Quite possible. Erlang processes are extremely lightweight, you can spawn a
million of them, deliver a message
to each and tear them down in less than a second on reasonably modern
hardware. So Erlang services often
have hundreds or thousands of processes, or even more. It varies depending
on the number of concurrent
connections/clients, consumers, channels, queues and so on, in other words,
your workload.

They have nothing to do with [fairly expensive in terms of resources] OS
thread or OS processes.


&gt;<i> 5) Lastly, is the below list covers all the processes, when rabbitmq node
</I>&gt;<i> is started or I should grep on something else as well ?
</I>&gt;<i>
</I>
epmd and beam (which is the name of the modern Erlang VM) are two key OS
processes that use kernel
threads for various purposes.

I'd suggest making sure those two function without issues, trying to kill
&quot;inessential&quot; OS processes or threads
will likely compromise RabbitMQ integrity.
-- 
MK

<A HREF="http://github.com/michaelklishin">http://github.com/michaelklishin</A>
<A HREF="http://twitter.com/michaelklishin">http://twitter.com/michaelklishin</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130626/6fbdacb9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130626/6fbdacb9/attachment.htm</A>&gt;
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028117.html">[rabbitmq-discuss] Queries on processes connected to RabbitMQ node
</A></li>
	<LI>Next message: <A HREF="028130.html">[rabbitmq-discuss] Queries on processes connected to RabbitMQ node
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28121">[ date ]</a>
              <a href="thread.html#28121">[ thread ]</a>
              <a href="subject.html#28121">[ subject ]</a>
              <a href="author.html#28121">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
