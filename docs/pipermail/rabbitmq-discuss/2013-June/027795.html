<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Restart Cluster after crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Restart%20Cluster%20after%20crash&In-Reply-To=%3C51B5DF89.2000106%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027786.html">
   <LINK REL="Next"  HREF="027787.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Restart Cluster after crash</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Restart%20Cluster%20after%20crash&In-Reply-To=%3C51B5DF89.2000106%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Restart Cluster after crash">simon at rabbitmq.com
       </A><BR>
    <I>Mon Jun 10 15:15:37 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027786.html">[rabbitmq-discuss] Restart Cluster after crash
</A></li>
        <LI>Next message: <A HREF="027787.html">[rabbitmq-discuss] RabbitMQ sharding supprot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27795">[ date ]</a>
              <a href="thread.html#27795">[ thread ]</a>
              <a href="subject.html#27795">[ subject ]</a>
              <a href="author.html#27795">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/06/13 06:32, Brendan Fry wrote:
&gt;<i> During earlier testing we were able to take down any and all of the
</I>&gt;<i> nodes with a Windows restart and the cluster would recover. Though,
</I>&gt;<i> after the unexpected crash that brought down the entire cluster the
</I>&gt;<i> rabbit services will no longer start.
</I>&gt;<i>
</I>&gt;<i> We receive the following error:
</I>&gt;<i>
</I>&gt;<i>     /C:\Program Files (x86)\RabbitMQ
</I>&gt;<i>     Server\rabbitmq_server-3.1.0\sbin&gt;rabbitmq-server.bat/
</I>&gt;<i>     /
</I>&gt;<i>     /
</I>&gt;<i>     /              RabbitMQ 3.1.0. Copyright (C) 2007-2013 VMware, Inc./
</I>&gt;<i>     /  ##  ##      Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com//">http://www.rabbitmq.com//</A>
</I>&gt;<i>     /  ##  ##/
</I>&gt;<i>     /  ##########  Logs: C:/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at OTLABWEB02.log</A>/
</I>&gt;<i>     /  ######  ##        C:/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at OTLABWEB02-sasl.log</A>/
</I>&gt;<i>     /  ##########/
</I>&gt;<i>     /              Starting broker.../
</I>&gt;<i>     /
</I>&gt;<i>     /
</I>&gt;<i>     /BOOT FAILED/
</I>&gt;<i>     /===========/
</I>&gt;<i>     /Timeout contacting cluster nodes:
</I>&gt;<i>     [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at OTLABWEB05</A><A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at OTLABWEB04</A>,/
</I>&gt;<i>     /
</I>&gt;<i>       <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at OTLABWEB03</A><A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at OTLABWEB01</A>,/
</I>&gt;<i>     /
</I>&gt;<i>       <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at OTLABAPP06</A><A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at OTLABAPP05</A>]./
</I>
Hi. When starting a cluster from scratch, RabbitMQ will want the last 
node stopped to be the first node started (since the last node stopped 
may have seen changes that no other node saw).

So if your nodes were shut down correctly then you would just need to 
make sure you start the last node first (after that you can start them 
in any order). Starting any other node first will lead to an error 
message similar to the one you posted.

However, if all nodes were shut down abruptly and simultaneously then 
they can all decide that they were not the last one to shut down and 
display this error. In that case, make sure you start all the nodes 
simultaneously (well, within the 30 second timeout anyway).

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027786.html">[rabbitmq-discuss] Restart Cluster after crash
</A></li>
	<LI>Next message: <A HREF="027787.html">[rabbitmq-discuss] RabbitMQ sharding supprot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27795">[ date ]</a>
              <a href="thread.html#27795">[ thread ]</a>
              <a href="subject.html#27795">[ subject ]</a>
              <a href="author.html#27795">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
