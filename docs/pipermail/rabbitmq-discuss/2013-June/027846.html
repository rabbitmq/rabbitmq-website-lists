<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 3.1.1 High watermark permanent blocking
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%203.1.1%20High%20watermark%20permanent%20blocking&In-Reply-To=%3C1371054310711-27358.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027847.html">
   <LINK REL="Next"  HREF="027848.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 3.1.1 High watermark permanent blocking</H1>
    <B>Mark Ward</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%203.1.1%20High%20watermark%20permanent%20blocking&In-Reply-To=%3C1371054310711-27358.post%40n5.nabble.com%3E"
       TITLE="[rabbitmq-discuss] 3.1.1 High watermark permanent blocking">ward.mark at gmail.com
       </A><BR>
    <I>Wed Jun 12 17:25:10 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027847.html">[rabbitmq-discuss] Unable to connect from public IP address
</A></li>
        <LI>Next message: <A HREF="027848.html">[rabbitmq-discuss] 3.1.1 High watermark permanent blocking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27846">[ date ]</a>
              <a href="thread.html#27846">[ thread ]</a>
              <a href="subject.html#27846">[ subject ]</a>
              <a href="author.html#27846">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I think I have found a problem with RabbitMQ 3.1.1 where during long periods
of entering and exiting high watermark memory flow control the server will
stop sending and receiving messages on all existing connections and new
connections.  Even when the queues have no messages in them the server is
stuck in a high watermark flow control state.  The memory high watermark is
still exceeded.  I have left the server and clients up for over 24 hours and
the state does not change.

The issue is repeatable. 

The same test works against RabbitMQ 2.8.7.  The RabbitMQ 2.8.7 will for
long periods enter and exit flow control but never enters a permanent state
like RabbitMQ 3.1.1.

I have tested RabbitMQ 3.1.1 on 
-Ubuntu Server 12.04 with all updates applied.  The Ubuntu server is setup
to pull in apt-get RabbitMQ from &#8220;<A HREF="http://www.rabbitmq.com/debian/">http://www.rabbitmq.com/debian/</A> testing
main&#8221; and erlang from &#8220;<A HREF="http://binaries.erlang-solutions.com/debian">http://binaries.erlang-solutions.com/debian</A> precise
contrib&#8221;
-Windows 2012 Standard

Both the Ubuntu and Windows install of RabbitMQ 3.1.1 ran into the same
issue.  Both are repeatable.

The RabbitMQ 2.8.7 was performed on the same Windows 2012 server.  All
previous installations of RabbitMQ were removed and the /Roaming/RabbitMQ
directory was cleared out before the installation.

The RabbitMQ log files on the Ubuntu and Windows 2012 for the RabbitMQ 3.1.1
didn&#8217;t contain any error messages.  The only message was the memory alarm
log entries.  The -sasl.log didn&#8217;t contain any log messages.

My client is .NET using the 3.1.1 library pulled from nuget.  I ran into the
same problem using the .NET 3.0.4 library.

I am pretty confident that my client is not publishing on the subscribing
connection. 

I would like to help track down what might be going on with RabbitMQ 3.1.1. 
But I must request that describing how my client is working be taken offline
in a private conversation.

-Mark




--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/3-1-1-High-watermark-permanent-blocking-tp27358.html">http://rabbitmq.1065348.n5.nabble.com/3-1-1-High-watermark-permanent-blocking-tp27358.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027847.html">[rabbitmq-discuss] Unable to connect from public IP address
</A></li>
	<LI>Next message: <A HREF="027848.html">[rabbitmq-discuss] 3.1.1 High watermark permanent blocking
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27846">[ date ]</a>
              <a href="thread.html#27846">[ thread ]</a>
              <a href="subject.html#27846">[ subject ]</a>
              <a href="author.html#27846">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
