<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq vs. Activemq
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%20vs.%20Activemq&In-Reply-To=%3C51C02C20.2010804%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027929.html">
   <LINK REL="Next"  HREF="027943.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq vs. Activemq</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%20vs.%20Activemq&In-Reply-To=%3C51C02C20.2010804%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq vs. Activemq">simon at rabbitmq.com
       </A><BR>
    <I>Tue Jun 18 10:45:04 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027929.html">[rabbitmq-discuss] Rejecting Connection
</A></li>
        <LI>Next message: <A HREF="027943.html">[rabbitmq-discuss] Rabbitmq vs. Activemq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27932">[ date ]</a>
              <a href="thread.html#27932">[ thread ]</a>
              <a href="subject.html#27932">[ subject ]</a>
              <a href="author.html#27932">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If your primary concern is latency, testing with a maxed-out message 
rate (which it seems is what you are doing) will give very dubious 
results. Maxing out the message rate means that all internal buffers are 
full, and thus messages take a while to get through the broker.

The same is presumably true for ActiveMQ, but presumably it has smaller 
buffers.

This is even more true if your tests are able to publish messages faster 
than they consume (which I guess is what's happening in your last row) - 
if your test ends up enqueueing messages and then taking a while to 
dequeue them then I am not surprised you see high latency.

Dropping your message rate to even 90% of the maximum will give huge 
latency gains - see the final chart here:

<A HREF="http://www.rabbitmq.com/blog/2012/04/17/rabbitmq-performance-measurements-part-1/">http://www.rabbitmq.com/blog/2012/04/17/rabbitmq-performance-measurements-part-1/</A>

Finally, I would be wary of constructing a synthetic benchmark and then 
using it to pick which product you go with, unless you determine that 
one product has acceptable performance and others do not. Factors such 
as reliability, ease of use, feature set and so on tend to be more 
important than a 10% difference in performance.

Hopefully I would still be saying that even if RabbitMQ were &quot;winning&quot; 
your tests :-)

Cheers, Simon

On 18/06/13 04:00, JC wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> We are in the process of evaluating middleware and choosing which
</I>&gt;<i> middleware we pick for a potentially large scale distributed
</I>&gt;<i> application.    We did an evaluation between activemq and rabbitmq with
</I>&gt;<i> different test cases. So far activemq has outperformed rabbitmq using
</I>&gt;<i> the default out-of-box configuration especially on the latency side.
</I>&gt;<i> We use activemq openWire protocol vs. rabbit AMQP,  Here is one example
</I>&gt;<i> result of the test we did on 1 publisher/1 consumer and we measure the
</I>&gt;<i> latency from send to receive time.    Similar results we get from
</I>&gt;<i> multiple consumers as well.  Any one has done the similar benchmark?
</I>&gt;<i> Could you please share your experience?  And if anyone knows the tips to
</I>&gt;<i> boost rabbitmq performance, please let us know.   The rabbit test client
</I>&gt;<i> is using fanout exchange and MINIMAL_BASIC to publish messages.
</I>&gt;<i>
</I>&gt;<i> BrokerType 	Publishers 	Consumers 	SlowConsumers 	TgtMsgRate(mps)
</I>&gt;<i> TgtMsgLimit 	AvgMsgSentRate(mps) 	AvgSentTime(ns) 	AvgMsgRcvRate(mps)
</I>&gt;<i> MinLat(ns) 	MaxLat(ns) 	AvgLat(ns) 	MedLat(ns) 	90%Lat(ns)
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Activemq at middlewarebench</A> 	1 	1 	0 	25000 	1000000 	20776 	5644 	20776
</I>&gt;<i> 99484 	7959080 	259337 	255760 	316848
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Rabbit at middlewarebench</A> 	1 	1 	0 	25000 	1000000 	20749 	5440 	20749
</I>&gt;<i> 171994 	46140955 	870211 	913283 	988979
</I>&gt;<i>
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Activemq at middlewarebench</A> 	1 	1 	0 	100000 	1000000 	62695 	5347 	62695
</I>&gt;<i> 100634 	19872040 	491588 	359763 	510862
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Rabbit at middlewarebench</A> 	1 	1 	0 	100000 	1000000 	56850 	6790 	54512
</I>&gt;<i> 315808 	822398215 	487403726 	487170082 	696265654
</I>&gt;<i>
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i>
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i>
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i>
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i>
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i>
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i>
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i>
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i>
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i> 	
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027929.html">[rabbitmq-discuss] Rejecting Connection
</A></li>
	<LI>Next message: <A HREF="027943.html">[rabbitmq-discuss] Rabbitmq vs. Activemq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27932">[ date ]</a>
              <a href="thread.html#27932">[ thread ]</a>
              <a href="subject.html#27932">[ subject ]</a>
              <a href="author.html#27932">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
