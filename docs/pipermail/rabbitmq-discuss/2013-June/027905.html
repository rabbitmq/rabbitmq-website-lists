<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Is there a way to receive multiple message using a single synchronous call ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Is%20there%20a%20way%20to%20receive%20multiple%20message%0A%20using%20a%20single%20synchronous%20call%20%3F&In-Reply-To=%3C51BE2D4E.7010405%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027802.html">
   <LINK REL="Next"  HREF="027784.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Is there a way to receive multiple message using a single synchronous call ?</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Is%20there%20a%20way%20to%20receive%20multiple%20message%0A%20using%20a%20single%20synchronous%20call%20%3F&In-Reply-To=%3C51BE2D4E.7010405%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Is there a way to receive multiple message using a single synchronous call ?">matthias at rabbitmq.com
       </A><BR>
    <I>Sun Jun 16 22:25:34 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027802.html">[rabbitmq-discuss] Is there a way to receive multiple message using a single synchronous call ?
</A></li>
        <LI>Next message: <A HREF="027784.html">[rabbitmq-discuss] rabbitmq-c   connection block
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27905">[ date ]</a>
              <a href="thread.html#27905">[ thread ]</a>
              <a href="subject.html#27905">[ subject ]</a>
              <a href="author.html#27905">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Vikram,

On 10/06/13 17:06, Vikram Viswanathan wrote:
&gt;<i> I have another question. If I use basic.consume, register a callback,
</I>&gt;<i> then is there a way where I can can cancel the consumer after N message
</I>&gt;<i> is received ?
</I>
1) Set the basic.qos prefetch to N.
2) Create the consumer with basic.consume.
3) As you receive the messages, do not acknowledge them one by one. 
Instead wait for them all to arrive.
4) Cancel the consumer with basic.cancel.
5) Send a single ack with the 'multiple' flag set.

&gt;<i> I tried calling Channel.basicCancel(consumerTag) in the callback, but
</I>&gt;<i> this cancels the consumer only after all messages in the queue is
</I>&gt;<i> received.
</I>
That would be because you didn't set the basic.qos prefetch first.

&gt;<i> I do not want to make basic.get() with a timeout because this
</I>&gt;<i> will cause my thread to block for the duration
</I>
That wouldn't work anyway since basic.get will not wait for messages to 
arrive in the queue; it returns basic.get-empty instead when the queue 
is empty.


Regards,

Matthias.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027802.html">[rabbitmq-discuss] Is there a way to receive multiple message using a single synchronous call ?
</A></li>
	<LI>Next message: <A HREF="027784.html">[rabbitmq-discuss] rabbitmq-c   connection block
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27905">[ date ]</a>
              <a href="thread.html#27905">[ thread ]</a>
              <a href="subject.html#27905">[ subject ]</a>
              <a href="author.html#27905">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
