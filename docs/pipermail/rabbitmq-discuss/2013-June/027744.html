<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Is it possible to retrieve the number of	unacked messages on a queue?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Is%20it%20possible%20to%20retrieve%20the%20number%20of%0A%09unacked%20messages%20on%20a%20queue%3F&In-Reply-To=%3Cc8eb1c183a30137137c1b9d0b06c78f1%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027741.html">
   <LINK REL="Next"  HREF="027742.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Is it possible to retrieve the number of	unacked messages on a queue?</H1>
    <B>Peter Soukalopoulos</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Is%20it%20possible%20to%20retrieve%20the%20number%20of%0A%09unacked%20messages%20on%20a%20queue%3F&In-Reply-To=%3Cc8eb1c183a30137137c1b9d0b06c78f1%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Is it possible to retrieve the number of	unacked messages on a queue?">peter at greenbutton.com
       </A><BR>
    <I>Fri Jun  7 03:28:10 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027741.html">[rabbitmq-discuss] Is it possible to retrieve the number of unacked	messages on a queue?
</A></li>
        <LI>Next message: <A HREF="027742.html">[rabbitmq-discuss] Connection.createChannel() hangs using	amqp-client 3.1.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27744">[ date ]</a>
              <a href="thread.html#27744">[ thread ]</a>
              <a href="subject.html#27744">[ subject ]</a>
              <a href="author.html#27744">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Found the solution using the RabbitMQ Management HTTP API
/api/queues/%F/queue which returns a JSON response including values for
messages_ready, messages_unacknowledged and messages.



{

    &quot;memory&quot;: 18104,

   &quot;idle_since&quot;: &quot;2013-06-05 21:42:17&quot;,

    &quot;exclusive_consumer_tag&quot;: &quot;&quot;,

    &quot;messages_ready&quot;: 2,

    &quot;messages_unacknowledged&quot;: 0,

    &quot;messages&quot;: 2,

    &quot;consumers&quot;: 0,

    &quot;slave_nodes&quot;: [],

    &quot;backing_queue_status&quot;: {

        &quot;q1&quot;: 0,

        &quot;q2&quot;: 0,

        &quot;delta&quot;: [

            &quot;delta&quot;,

            &quot;undefined&quot;,

            0,

            &quot;undefined&quot;

        ],

*..stuff deleted*

}



See
<A HREF="http://hg.rabbitmq.com/rabbitmq-management/raw-file/3646dee55e02/priv/www-api/help.html">http://hg.rabbitmq.com/rabbitmq-management/raw-file/3646dee55e02/priv/www-api/help.html</A>



*Regards,*

*Peter*



*Peter** **Soukalopoulos*
*Development Team Leader | **GreenButton Limited *| www.greenbutton.com
Level 2, James Smith Building, 55 Cuba Street, Wellington, New Zealand
Mobile: +64 22 632 5023| DDI: +644 974 6602 |
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">peter.soukalopoulos at greenbutton.com</A> | Skype: psoukal | HQ: +644 499 0424

[image: Description: GreenButton_words_small]               [image:
cid:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">image003.jpg at 01CC4E01.BA075BC0</A>]

For best support, please respond to <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">help at greenbutton.com</A> and retain the
ticket number in the subject line.



This message contains confidential information, intended only for
the person(s) named above, which may also be privileged. Any use,
distribution, copying or disclosure by any other person is strictly
prohibited. In such case, you should delete this message and kindly notify
the sender via reply e-mail. Please advise immediately if you or your
employer does not consent to Internet e-mail for messages of this kind.



*From:* Peter Soukalopoulos [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">peter at greenbutton.com</A>]
*Sent:* Friday, 7 June 2013 10:16 a.m.
*To:* '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>'
*Subject:* Is it possible to retrieve the number of unacked messages on a
queue?



I&#8217;ve done a little searching via Google to retrieve the number of Unacked
messages via the RabbitMQ client API. Most threads say it&#8217;s not possible.



Does anyone have an explanation or, even better, a solution?



FYI I&#8217;m using C# .Net &#8211; this code returns the number of Ready messages.



        public int GetApproximateCount(string queueName)

        {

            using (var connection = CreateConnection())

            using (var model = connection.CreateModel())

            {

                try

                {

                    var result = model.QueueDeclarePassive(queueName);

                    return (int)result.MessageCount;

                }

                catch (OperationInterruptedException)

                {

                    return 0;

                }

            }

        }



*Regards,*

*Peter*



*Peter** **Soukalopoulos*
*Development Team Leader | **GreenButton Limited *| www.greenbutton.com
Level 2, James Smith Building, 55 Cuba Street, Wellington, New Zealand
Mobile: +64 22 632 5023| DDI: +644 974 6602 |
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">peter.soukalopoulos at greenbutton.com</A> | Skype: psoukal | HQ: +644 499 0424

[image: Description: GreenButton_words_small]               [image:
cid:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">image003.jpg at 01CC4E01.BA075BC0</A>]

For best support, please respond to <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">help at greenbutton.com</A> and retain the
ticket number in the subject line.



This message contains confidential information, intended only for
the person(s) named above, which may also be privileged. Any use,
distribution, copying or disclosure by any other person is strictly
prohibited. In such case, you should delete this message and kindly notify
the sender via reply e-mail. Please advise immediately if you or your
employer does not consent to Internet e-mail for messages of this kind.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130607/e0549b31/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130607/e0549b31/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 7433 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130607/e0549b31/attachment.png">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130607/e0549b31/attachment.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 3761 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130607/e0549b31/attachment.jpeg">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130607/e0549b31/attachment.jpeg</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027741.html">[rabbitmq-discuss] Is it possible to retrieve the number of unacked	messages on a queue?
</A></li>
	<LI>Next message: <A HREF="027742.html">[rabbitmq-discuss] Connection.createChannel() hangs using	amqp-client 3.1.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27744">[ date ]</a>
              <a href="thread.html#27744">[ thread ]</a>
              <a href="subject.html#27744">[ subject ]</a>
              <a href="author.html#27744">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
