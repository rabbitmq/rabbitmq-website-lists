<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Pre-create queues and exchanges
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pre-create%20queues%20and%20exchanges&In-Reply-To=%3CCAD6m6fEHX%2BjVK_OpNc0YkhtHmQf5X4wiXNmGPsJByEr37k%2BYJQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027884.html">
   <LINK REL="Next"  HREF="027900.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Pre-create queues and exchanges</H1>
    <B>Jason McIntosh</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pre-create%20queues%20and%20exchanges&In-Reply-To=%3CCAD6m6fEHX%2BjVK_OpNc0YkhtHmQf5X4wiXNmGPsJByEr37k%2BYJQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Pre-create queues and exchanges">mcintoshj at gmail.com
       </A><BR>
    <I>Mon Jun 17 16:37:10 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027884.html">[rabbitmq-discuss] Pre-create queues and exchanges
</A></li>
        <LI>Next message: <A HREF="027900.html">[rabbitmq-discuss] RabbitMQ service is not starting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27920">[ date ]</a>
              <a href="thread.html#27920">[ thread ]</a>
              <a href="subject.html#27920">[ subject ]</a>
              <a href="author.html#27920">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We are doing ours statically through server automation scripts.  The
reasoning being we wanted more control over this, since we have remote
systems to shovel to a central location.  Due to the shoveling config (from
what I'm seeing there's no way to auto-shovel ALL queues, each has to be
defined), we limited the ability to create queues/exchanges/policies.  That
also puts more &quot;conversation&quot; and automation in the systems group on how
messaging gets routed, handled, failover, etc.  The option of using
federated instead of shovels might work though I've not investigated how
you could programatically create federated exchanges, know how to connect
to remote systems with out more information than most applications have.

If all of your publishers/consumers were hitting the same set of rabbit
nodes, I'd imagine it'd be a different situation than ours and having your
application create the exchanges, queues and binding to them would be more
workable.

Jason


On Fri, Jun 14, 2013 at 12:02 PM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;wrote:

&gt;<i> On 14/06/13 14:48, Dmitry Andrianov wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi guys.
</I>&gt;&gt;<i> What is the best practices on who should create all the queues and
</I>&gt;&gt;<i> exchanges?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Whichever works best for you :)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  I see the three options:
</I>&gt;&gt;<i> 1. consumer-app creates everything and it MUST be started before the
</I>&gt;&gt;<i> producer-app
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> That's probably not ideal.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  2. both consumer-app and producer-app create these objects on startup so
</I>&gt;&gt;<i> it does not matter which one starts first.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This is probably closest to &quot;the spirit&quot; of AMQP. I think the expectation
</I>&gt;<i> is that producers and consumers should declare the things that they
</I>&gt;<i> directly interact with. So for example for pub-sub a producer would only
</I>&gt;<i> declare the exchange it would publish to, and then consumers declare
</I>&gt;<i> exchange, queue and binding.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  3. queues and exchanges are put into the broker configuration so they
</I>&gt;&gt;<i> are created automatically when broker starts.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This keeps your apps free of the need to declare things - but it's only
</I>&gt;<i> going to work if your configuration is quite static.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  It looks to me that #3 would be the best way. The apps do not need to
</I>&gt;&gt;<i> have any code which initialises stuff, user accounts
</I>&gt;&gt;<i> applications use can be restricted etc.
</I>&gt;&gt;<i> But I cannot find the &quot;official&quot; way of doing it.
</I>&gt;&gt;<i> We tried using shovel plugin because it allows you to declare all these
</I>&gt;&gt;<i> queues and exchanges to be created.
</I>&gt;&gt;<i> It kind of works but it feels a bit dodgy.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> You can do that - or use <A HREF="http://www.rabbitmq.com/**management.html#load-**">http://www.rabbitmq.com/**management.html#load-**</A>
</I>&gt;<i> definitions &lt;<A HREF="http://www.rabbitmq.com/management.html#load-definitions">http://www.rabbitmq.com/management.html#load-definitions</A>&gt;
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, Pivotal
</I>&gt;<i>
</I>&gt;<i> ______________________________**_________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.</A>**rabbitmq.com&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>&gt;
</I>&gt;<i>
</I>


-- 
Jason McIntosh
<A HREF="http://mcintosh.poetshome.com/blog/">http://mcintosh.poetshome.com/blog/</A>
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130617/2a7f4191/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130617/2a7f4191/attachment.htm</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027884.html">[rabbitmq-discuss] Pre-create queues and exchanges
</A></li>
	<LI>Next message: <A HREF="027900.html">[rabbitmq-discuss] RabbitMQ service is not starting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27920">[ date ]</a>
              <a href="thread.html#27920">[ thread ]</a>
              <a href="subject.html#27920">[ subject ]</a>
              <a href="author.html#27920">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
