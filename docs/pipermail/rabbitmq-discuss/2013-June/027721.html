<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq memory usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20memory%20usage&In-Reply-To=%3C51B09EEF.8010201%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027719.html">
   <LINK REL="Next"  HREF="027725.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq memory usage</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20memory%20usage&In-Reply-To=%3C51B09EEF.8010201%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq memory usage">simon at rabbitmq.com
       </A><BR>
    <I>Thu Jun  6 15:38:39 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027719.html">[rabbitmq-discuss] rabbitmq memory usage
</A></li>
        <LI>Next message: <A HREF="027725.html">[rabbitmq-discuss] rabbitmq memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27721">[ date ]</a>
              <a href="thread.html#27721">[ thread ]</a>
              <a href="subject.html#27721">[ subject ]</a>
              <a href="author.html#27721">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06/06/13 15:03, Ceri Storey wrote:
&gt;<i> I'm sure that one of the Rabbit team themselves can shed a bit more
</I>&gt;<i> light on this, but AIUI RabbitMQ uses ETS in-memory tables to index the
</I>&gt;<i> queues,
</I>
Minor correction / clarification: the in-memory cost is per-message in 
the message store, not queues per se. So a message which ends up in lots 
of queues incurs the cost once.

&gt;<i> so with some back of the envelope arithmetic your rabbit is
</I>&gt;<i> using approximately 175bytes per message. So on the face of it, that
</I>&gt;<i> might look a bit odd, but doesn't seem unreasonable.
</I>
That cost is about right.

Also, note that the OP did not specify the version of RabbitMQ used, but 
it looks like 2.x. 3.x will helpfully separate out the memory used by 
the message store index. See <A HREF="http://www.rabbitmq.com/memory-use.html">http://www.rabbitmq.com/memory-use.html</A>

The rabbitmq-toke plugin offers an alternative message store index which 
does not have a per-message cost. Setting it up is a bit fiddly though, 
and it's less well tested.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027719.html">[rabbitmq-discuss] rabbitmq memory usage
</A></li>
	<LI>Next message: <A HREF="027725.html">[rabbitmq-discuss] rabbitmq memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27721">[ date ]</a>
              <a href="thread.html#27721">[ thread ]</a>
              <a href="subject.html#27721">[ subject ]</a>
              <a href="author.html#27721">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
