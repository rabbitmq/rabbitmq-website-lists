<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] REST, RabbitMQ, and Scalability
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20REST%2C%20RabbitMQ%2C%20and%20Scalability&In-Reply-To=%3CCAD6m6fGE31V%3DyrQcPv4v9HQ%3DnoiWFNkXZgs2DHEVsf_DsA3KQA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027830.html">
   <LINK REL="Next"  HREF="027834.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] REST, RabbitMQ, and Scalability</H1>
    <B>Jason McIntosh</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20REST%2C%20RabbitMQ%2C%20and%20Scalability&In-Reply-To=%3CCAD6m6fGE31V%3DyrQcPv4v9HQ%3DnoiWFNkXZgs2DHEVsf_DsA3KQA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] REST, RabbitMQ, and Scalability">mcintoshj at gmail.com
       </A><BR>
    <I>Thu Jun 13 04:15:47 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027830.html">[rabbitmq-discuss] REST, RabbitMQ, and Scalability
</A></li>
        <LI>Next message: <A HREF="027834.html">[rabbitmq-discuss] configure maxlength feature in 3.1.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27850">[ date ]</a>
              <a href="thread.html#27850">[ thread ]</a>
              <a href="subject.html#27850">[ subject ]</a>
              <a href="author.html#27850">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You can use RabbitMQ to do this - there's nothing that says you can't.
 Whether it's the right solution depends on the complexity of the overall
architecture, goals in that architecture, etc.  My initial thought was
&quot;memcached&quot; that both process and rest server publish and read from.  In
our case due to our requirements, we use a shoveled set of rabbit queues to
transmit data changes to an &quot;enterprise system&quot; in a different geographical
location the the source rabbit servers.  This enterprise system is where
the &quot;source of truth&quot; data is stored as well as for tracking information
and other data.  The AMQP consumers after updating the central database,
publishes changes back out to the various locations for high performance
read only use.  If we hadn't had the need to do distributed data publishes
from multiple locations, required support for networking
failures/interrupts, wanted high performance and minimal impact to send
such messages, we'd have just had local processes talking to local
replicated/clustered databases instead.  Our current architecture gives us
a distributed HA asynchronous processing system.  There are always, always
questions though - how durable is the job ids?  If a publishing fails and
your app fails, do you just rerun, etc. etc. etc.

Jason


On Tue, Jun 11, 2013 at 2:06 PM, Robert DiFalco &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">robert.difalco at gmail.com</A>&gt;wrote:

&gt;<i> I am writing a REST server in Java and am trying to come up with the best
</I>&gt;<i> approach for scalability. The server is deployed on Heroku. I am new to
</I>&gt;<i> RabbitMQ/AMQ so I need some advice.
</I>&gt;<i>
</I>&gt;<i> From an architectural point of view I want to have one or more REST dynos
</I>&gt;<i> running that delegate all of their work to one or more worker dynos. The
</I>&gt;<i> REST server dynos must be stateless.
</I>&gt;<i>
</I>&gt;<i> I have two basic patterns to support.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>    1. REST RPC. Basically, the client makes a call like GET /user/{id}. I
</I>&gt;<i>    delegate this call to a worker dyno that does a database lookup in the USER
</I>&gt;<i>    table for the specified ID and returns it. The REST interface then returns
</I>&gt;<i>    this. This to me seems like basic RPC.
</I>&gt;<i>    2. REST ASYNC. In this model the client may call my REST server with a
</I>&gt;<i>    POST or a GET. Let's use the classic case of a long running task to format
</I>&gt;<i>    a graphic. I will create a JOB ID, return it to the client in an URI. The
</I>&gt;<i>    client calls the URI to poll the job until it is done and then eventually
</I>&gt;<i>    gets redirected to a URI that has the result. In this case, when I get the
</I>&gt;<i>    initial REST call I will generate a UID for it, submit it to the worker.
</I>&gt;<i>    There are several ways I can do the polling and returning of the result. A
</I>&gt;<i>    lot of that depends on how I decide to interact with the worker.  Is it
</I>&gt;<i>    RPC? AKKA? AMQP?  Because there may be more than one REST service dyno, the
</I>&gt;<i>    request to post the job may happen on one REST server and the polling
</I>&gt;<i>    request may be routed to another. So it must be stateless.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> So here's my question. First, should I be using RabbitMQ for this or is
</I>&gt;<i> there a better solution? If I am using RabbitMQ must I implement the RPC
</I>&gt;<i> and ASYNC patterns myself directly on top of RabbitMQ or are there
</I>&gt;<i> libraries out there that create a layer of abstraction on top of RabbitMQ
</I>&gt;<i> so I can do both of these simply? If I'm going to use RabbitMQ I'm hoping
</I>&gt;<i> to use CloudAMQP on Heroku.
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i> Robert
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Jason McIntosh
<A HREF="http://mcintosh.poetshome.com/blog/">http://mcintosh.poetshome.com/blog/</A>
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130612/d06805bb/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130612/d06805bb/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027830.html">[rabbitmq-discuss] REST, RabbitMQ, and Scalability
</A></li>
	<LI>Next message: <A HREF="027834.html">[rabbitmq-discuss] configure maxlength feature in 3.1.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27850">[ date ]</a>
              <a href="thread.html#27850">[ thread ]</a>
              <a href="subject.html#27850">[ subject ]</a>
              <a href="author.html#27850">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
