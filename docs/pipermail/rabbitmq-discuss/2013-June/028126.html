<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] cluster memory alarm blocks producer too long
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20cluster%20memory%20alarm%20blocks%20producer%20too%20long&In-Reply-To=%3C51CBE111.5060905%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027996.html">
   <LINK REL="Next"  HREF="027963.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] cluster memory alarm blocks producer too long</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20cluster%20memory%20alarm%20blocks%20producer%20too%20long&In-Reply-To=%3C51CBE111.5060905%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] cluster memory alarm blocks producer too long">matthias at rabbitmq.com
       </A><BR>
    <I>Thu Jun 27 07:52:01 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027996.html">[rabbitmq-discuss] cluster memory alarm blocks producer too long
</A></li>
        <LI>Next message: <A HREF="027963.html">[rabbitmq-discuss] set/getTimeout in RabbitMQ for PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28126">[ date ]</a>
              <a href="thread.html#28126">[ thread ]</a>
              <a href="subject.html#28126">[ subject ]</a>
              <a href="author.html#28126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20/06/13 04:52, richmonkey wrote:
&gt;<i> slave&#65306;
</I>&gt;<i>   {memory,
</I>&gt;<i>       [{total,3345436680},
</I>&gt;<i>        {queue_procs,2660479408},
</I>&gt;<i>  {vm_memory_limit,3301285888},
</I>&gt;<i> master:
</I>&gt;<i>   {memory,
</I>&gt;<i>       [{total,1523362624},
</I>&gt;<i>        {queue_procs,1318303888},
</I>&gt;<i>   {vm_memory_limit,3301285888},
</I>
So the memory is being used by the queues, which is to be expected. It 
is also not surprising to, generally, see higher memory consumption at 
the slave, due to the way mirrored queues are implemented. However, just 
like the master, the slave should be paging messages to disk to free up 
memory. The slave may have to page a bit more than the master, but not 
to the degree that would cause the massive difference in memory alarm 
behaviour.

Please post

1) the output of 'rabbitmqctl report' when the slave has been in the 
memory alarm state for a while

2) code that may allow us to reproduce the problem


Regards,

Matthias.
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027996.html">[rabbitmq-discuss] cluster memory alarm blocks producer too long
</A></li>
	<LI>Next message: <A HREF="027963.html">[rabbitmq-discuss] set/getTimeout in RabbitMQ for PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28126">[ date ]</a>
              <a href="thread.html#28126">[ thread ]</a>
              <a href="subject.html#28126">[ subject ]</a>
              <a href="author.html#28126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
