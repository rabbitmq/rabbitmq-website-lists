<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Mirrored Queues Disappearing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Mirrored%20Queues%20Disappearing&In-Reply-To=%3C1137E219-F035-4359-8502-9C197B7160DD%40ge.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027811.html">
   <LINK REL="Next"  HREF="027817.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Mirrored Queues Disappearing</H1>
    <B>Plock, Justin (GE Corporate)</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Mirrored%20Queues%20Disappearing&In-Reply-To=%3C1137E219-F035-4359-8502-9C197B7160DD%40ge.com%3E"
       TITLE="[rabbitmq-discuss] Mirrored Queues Disappearing">Justin.Plock at ge.com
       </A><BR>
    <I>Tue Jun 11 13:15:55 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027811.html">[rabbitmq-discuss] Mirrored Queues Disappearing
</A></li>
        <LI>Next message: <A HREF="027817.html">[rabbitmq-discuss] Mirrored Queues Disappearing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27816">[ date ]</a>
              <a href="thread.html#27816">[ thread ]</a>
              <a href="subject.html#27816">[ subject ]</a>
              <a href="author.html#27816">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Simon,
  Here are logs from two of the machines around that time.  We're having authentication issues around the 3rd machine so I can't get the logs at this time.

<A HREF="https://gist.github.com/jplock/e373c6008a4ac415baef">https://gist.github.com/jplock/e373c6008a4ac415baef</A>

Thanks.

-Justin


On Jun 11, 2013, at 5:54 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> Can you post some logs from around the time the queues disappear?
</I>&gt;<i> 
</I>&gt;<i> Cheers, Simon
</I>&gt;<i> 
</I>&gt;<i> On 11/06/13 03:30, Plock, Justin (GE Corporate) wrote:
</I>&gt;&gt;<i> Here's our scenario:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> We run a 3 node RabbitMQ cluster (version 3.1.1) on 3 separate virtual machines.  All of our queues/exchanges are set to durable.  We have a policy called &quot;HA&quot; set up with the pattern of &quot;^(?!amq\.).*&quot; that as ha-mode: all and ha-sync-mode: automatic.  We have &quot;cluster_partition_handling&quot; set to &quot;pause_minority&quot;.  Every time we experience a network partition, which seems to more often than it should, after forcefully killing RabbitMQ and restarting it, we also have to rebuild our missing queues and exchange bindings.  The virtual hosts, users and exchanges seems to be preserved, but we often lose a lot of our queues.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Is there anything we can do to prevent this?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Thanks.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> -Justin
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, Pivotal
</I>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3377 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130611/680f4daa/attachment.bin">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130611/680f4daa/attachment.bin</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027811.html">[rabbitmq-discuss] Mirrored Queues Disappearing
</A></li>
	<LI>Next message: <A HREF="027817.html">[rabbitmq-discuss] Mirrored Queues Disappearing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27816">[ date ]</a>
              <a href="thread.html#27816">[ thread ]</a>
              <a href="subject.html#27816">[ subject ]</a>
              <a href="author.html#27816">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
