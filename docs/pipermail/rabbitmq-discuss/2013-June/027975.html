<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] |Spam| Re: Possible memory leak in the management plugin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%7CSpam%7C%20Re%3A%20Possible%20memory%20leak%20in%20the%0A%20management%20plugin&In-Reply-To=%3CCACCscvzm%2Bp%3DvR0%3Dd3_yFzmbidb%2BSGnEws9zW5q1cmHGVZXe%2Beg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027970.html">
   <LINK REL="Next"  HREF="027977.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] |Spam| Re: Possible memory leak in the management plugin</H1>
    <B>Travis Mehlinger</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%7CSpam%7C%20Re%3A%20Possible%20memory%20leak%20in%20the%0A%20management%20plugin&In-Reply-To=%3CCACCscvzm%2Bp%3DvR0%3Dd3_yFzmbidb%2BSGnEws9zW5q1cmHGVZXe%2Beg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] |Spam| Re: Possible memory leak in the management plugin">tmehlinger at gmail.com
       </A><BR>
    <I>Wed Jun 19 15:30:49 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027970.html">[rabbitmq-discuss] |Spam| Re: Possible memory leak in the management plugin
</A></li>
        <LI>Next message: <A HREF="027977.html">[rabbitmq-discuss] |Spam| Re: Possible memory leak in the management plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27975">[ date ]</a>
              <a href="thread.html#27975">[ thread ]</a>
              <a href="subject.html#27975">[ subject ]</a>
              <a href="author.html#27975">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Simon,

We aren't doing anything like that. Whenever one of our services starts
(which are based on Kombu, if that helps), it plucks a connection from its
internal pool, creates a channel on that connection, then binds on its
request queue, which hangs around until the service stops. The only thing
that deviates from this pattern is our monitor, which connects and
disconnects fairly rapidly, and uses exclusive queues.

That said, it's entirely possible that we have something floating around
that I don't know about that fits the behavior you described. I'll keep
digging and see what I can turn up. In the meantime, let me know if there's
any more information I can collect from Rabbit.

Thanks, Travis


On Wed, Jun 19, 2013 at 6:13 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> On 18/06/13 16:11, Travis Mehlinger wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> We declare those queues as exclusive so they're getting cleaned up
</I>&gt;&gt;<i> automatically.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I have found a plausible candidate for the leak. But it's dependent on
</I>&gt;<i> having a long lived channel which declares and deletes lots of short-lived
</I>&gt;<i> queues. We keep some information on the deleted queues until the channel is
</I>&gt;<i> closed. Could your monitoring tool be doing that? Obviously it would have
</I>&gt;<i> to be deleting queues explicitly, not relying on them being exclusive.
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, Pivotal
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130619/7df496db/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130619/7df496db/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027970.html">[rabbitmq-discuss] |Spam| Re: Possible memory leak in the management plugin
</A></li>
	<LI>Next message: <A HREF="027977.html">[rabbitmq-discuss] |Spam| Re: Possible memory leak in the management plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27975">[ date ]</a>
              <a href="thread.html#27975">[ thread ]</a>
              <a href="subject.html#27975">[ subject ]</a>
              <a href="author.html#27975">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
