<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Causing publisher confirmations nacks for	testing?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Causing%20publisher%20confirmations%20nacks%20for%0A%09testing%3F&In-Reply-To=%3CB982D8E3-96D6-4564-87EF-0FE50E6426C8%40sarna.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028006.html">
   <LINK REL="Next"  HREF="027990.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Causing publisher confirmations nacks for	testing?</H1>
    <B>Ty Sarna</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Causing%20publisher%20confirmations%20nacks%20for%0A%09testing%3F&In-Reply-To=%3CB982D8E3-96D6-4564-87EF-0FE50E6426C8%40sarna.org%3E"
       TITLE="[rabbitmq-discuss] Causing publisher confirmations nacks for	testing?">ty at sarna.org
       </A><BR>
    <I>Thu Jun 20 15:44:53 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028006.html">[rabbitmq-discuss] Causing publisher confirmations nacks for	testing?
</A></li>
        <LI>Next message: <A HREF="027990.html">[rabbitmq-discuss] Error deleting vhost
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28012">[ date ]</a>
              <a href="thread.html#28012">[ thread ]</a>
              <a href="subject.html#28012">[ subject ]</a>
              <a href="author.html#28012">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jun 20, 2013, at 5:14 AM, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt; wrote:
&gt;<i> On 19/06/13 19:30, Ty Sarna wrote:
</I>&gt;&gt;<i> I'm working with publisher confirmations, and I'd like to verify that my
</I>&gt;&gt;<i> nack-handling logic is correct. Is there some way I can make RabbitMQ
</I>&gt;&gt;<i> nack on demand, for testing purposes?
</I>&gt;<i> 
</I>&gt;<i> No, I don't think there is a simple way of prompting the broker to send
</I>&gt;<i> a basic.nack. But there is very little value in handling basic.nack
</I>&gt;<i> specially because the integrity of a broker that ever did send a
</I>&gt;<i> basic.nack would probably be compromised.
</I>
As I understand it, in the publisher confirmations case the broker nacks with basic.return+basic.ack rather than basic.nack. And, I do need *some* special handling for that case, otherwise there's no point in using confirmations at all.

If the broker only fails to ack in cases where it's completely hosed the handling can be as simple as considering the connection dead, disconnecting, and retrying this and all subsequent messages when/if we reconnect. Even so, it would be nice to test that logic.

-Ty
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028006.html">[rabbitmq-discuss] Causing publisher confirmations nacks for	testing?
</A></li>
	<LI>Next message: <A HREF="027990.html">[rabbitmq-discuss] Error deleting vhost
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28012">[ date ]</a>
              <a href="thread.html#28012">[ thread ]</a>
              <a href="subject.html#28012">[ subject ]</a>
              <a href="author.html#28012">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
