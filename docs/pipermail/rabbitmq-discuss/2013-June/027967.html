<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Work Queues design
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Work%20Queues%20design&In-Reply-To=%3C034B5828-127A-4E77-B4EB-24546AE5B146%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027965.html">
   <LINK REL="Next"  HREF="027978.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Work Queues design</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Work%20Queues%20design&In-Reply-To=%3C034B5828-127A-4E77-B4EB-24546AE5B146%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Work Queues design">tim at rabbitmq.com
       </A><BR>
    <I>Wed Jun 19 10:58:58 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027965.html">[rabbitmq-discuss] Work Queues design
</A></li>
        <LI>Next message: <A HREF="027978.html">[rabbitmq-discuss] Clustering on different interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27967">[ date ]</a>
              <a href="thread.html#27967">[ thread ]</a>
              <a href="subject.html#27967">[ subject ]</a>
              <a href="author.html#27967">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19 Jun 2013, at 10:41, Flavio Pompermaier wrote:

&gt;<i> Hi to everybody,
</I>&gt;<i> I'm new to RabbitMQ but from what I see it could be the solution for a buffer implementation in one of my project.
</I>&gt;<i> In my scenario there will be a big queue of tasks (i.e. document indexing) that should be served as fast as possible,
</I>&gt;<i> 
</I>&gt;<i> Looking at the tutorial I think that what I need is somehow similar to the Work queues (<A HREF="http://www.rabbitmq.com/tutorials/tutorial-two-python.html">http://www.rabbitmq.com/tutorials/tutorial-two-python.html</A>) plus fair dispatching.
</I>&gt;<i> However, the aforementioned constraint &quot;served as fast as possible&quot; is not clear how to design a correct size of workers, in a scalable way..
</I>&gt;<i> In every example, a worker is a standalone java process, whereas I would like to manage workers more like a pool and take the first available one..
</I>&gt;<i> 
</I>
You can open multiple channels on a single connection (i.e., an application running in the JVM can open many connections and many channels per connection - each channel usually being assigned to a thread). As for &quot;take the first available one&quot;, that's exactly what the &quot;fair dispatch&quot; section in the tutorial describes.

&gt;<i> 2) If my poolable solution is correct, how can I set up a pool? How do I decide the best size of the pool?
</I>
That's totally application specific, depending on how many messages you're expecting to process and so on. You can `re-size' the pool any time you like by adding more consumers - the prefetch-count will ensure that rabbit doesn't send any one consumer more than the specified number of un-acked messages. 

&gt;<i> 3) What if I discover that my server is overloaded and I want to distribute the load?
</I>
Add more consumers, as I said above. 

&gt;<i> How can I avoid to store all the queues message in just one server (if I want persistable queues)?
</I>
You can set up a cluster and use HA to mirror (i.e., replicate) the queue contents across multiple nodes. See www.rabbitmq.com/ha.html for details. Of course, with HA you'll store all the queue's messages on all of the (mirrored) nodes. If you were thinking of 'sharding' the data across multiple nodes, then we don't offer a solution for that out of the box, though you could probably cook one up yourself using federation (see www.rabbitmq.com/federation.html).

Cheers,
Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130619/506424f8/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130619/506424f8/attachment.htm</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027965.html">[rabbitmq-discuss] Work Queues design
</A></li>
	<LI>Next message: <A HREF="027978.html">[rabbitmq-discuss] Clustering on different interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27967">[ date ]</a>
              <a href="thread.html#27967">[ thread ]</a>
              <a href="subject.html#27967">[ subject ]</a>
              <a href="author.html#27967">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
