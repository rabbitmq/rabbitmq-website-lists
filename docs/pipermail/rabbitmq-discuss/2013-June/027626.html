<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ monitoring app shows load balancer	IP instead of client IP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20monitoring%20app%20shows%20load%20balancer%0A%09IP%20instead%20of%20client%20IP&In-Reply-To=%3C92D99638-2A25-4DD3-9E50-81126DB28EB1%40alertme.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027631.html">
   <LINK REL="Next"  HREF="027627.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ monitoring app shows load balancer	IP instead of client IP</H1>
    <B>Dmitry Andrianov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20monitoring%20app%20shows%20load%20balancer%0A%09IP%20instead%20of%20client%20IP&In-Reply-To=%3C92D99638-2A25-4DD3-9E50-81126DB28EB1%40alertme.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ monitoring app shows load balancer	IP instead of client IP">dmitry.andrianov at alertme.com
       </A><BR>
    <I>Sat Jun  1 10:49:44 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027631.html">[rabbitmq-discuss] Shovel authentication question (possible bug)
</A></li>
        <LI>Next message: <A HREF="027627.html">[rabbitmq-discuss] New lua-resty-rabbitmq library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27626">[ date ]</a>
              <a href="thread.html#27626">[ thread ]</a>
              <a href="subject.html#27626">[ subject ]</a>
              <a href="author.html#27626">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The x-forwarded-for is a application level thing and it only applies to HTTP.. In the case if AMQP, I doubt Amazon's LB operates at application level and understands the protocol. Instead, the LB operates at TCP/IP level establishing new TCP connection to Rabbit from its own IP and forwarding data between incoming connection and that Rabbit connection without any understanding what that data is.
Which means it cannot add any information what wasn't there already. 

Regards

On 31 May 2013, at 20:30, Joe Vandermark &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">joe.vandermark at gmail.com</A>&gt; wrote:

&gt;<i> I have a similar issue/requirement. Checking in to see if Mike figured this out or if anyone else has a similar need and solution.
</I>&gt;<i> 
</I>&gt;<i> On Monday, January 7, 2013 11:40:39 AM UTC-6, Mike wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I have a rabbitMQ cluster running on EC2 behind an AWS load-balancer. In the rabbitMQ monitoring app, it shows the IP address of each machine that's currently connected to rabbitMQ. Since the clients are hitting rabbitMQ through the LB, it's showing the LBs IP address, instead of the client.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Is there a way to get the rabbitMQ monitoring plugin to show the x-forwarded-for request header, which contains the actual client IP address?
</I>&gt;&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>

This email is for the use of the intended recipient(s) only.
If you have received this email in error, please notify the sender immediately and then delete it.
If you are not the intended recipient, you must not use, disclose or distribute this email without the
author's prior permission. AlertMe.com Ltd. is not responsible for any personal views expressed
in this message or any attachments that are those of the individual sender.

AlertMe.com Ltd, 30 Station Road, Cambridge, CB1 2RE, UK.
Registered in England, Company number 578 2908, VAT registration number GB 895 9914 42.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130601/2c4c34cd/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130601/2c4c34cd/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027631.html">[rabbitmq-discuss] Shovel authentication question (possible bug)
</A></li>
	<LI>Next message: <A HREF="027627.html">[rabbitmq-discuss] New lua-resty-rabbitmq library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27626">[ date ]</a>
              <a href="thread.html#27626">[ thread ]</a>
              <a href="subject.html#27626">[ subject ]</a>
              <a href="author.html#27626">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
