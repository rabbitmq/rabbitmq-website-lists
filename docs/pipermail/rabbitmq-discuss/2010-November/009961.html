<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Can Java API JsonRpcClient know server not exist?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%20Java%20API%20JsonRpcClient%20know%20server%20not%0A%20exist%3F&In-Reply-To=%3C73004BFA-1A71-44D8-A718-D04CBE8136ED%40vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009944.html">
   <LINK REL="Next"  HREF="009963.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Can Java API JsonRpcClient know server not exist?</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%20Java%20API%20JsonRpcClient%20know%20server%20not%0A%20exist%3F&In-Reply-To=%3C73004BFA-1A71-44D8-A718-D04CBE8136ED%40vmware.com%3E"
       TITLE="[rabbitmq-discuss] Can Java API JsonRpcClient know server not exist?">jerryk at vmware.com
       </A><BR>
    <I>Tue Nov 16 15:59:00 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009944.html">[rabbitmq-discuss] Persistent messages ?
</A></li>
        <LI>Next message: <A HREF="009963.html">[rabbitmq-discuss] JMS client impl (javax.jms)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9961">[ date ]</a>
              <a href="thread.html#9961">[ thread ]</a>
              <a href="subject.html#9961">[ subject ]</a>
              <a href="author.html#9961">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Cui...

I'm run RabbitMQ Java client 2.1.1 examples HelloJsonServer and HelloJsonClient. The RabbitMQ Server's version is 2.1.1.
My question is if HelloJsonServer program not running, I start up HelloJsonClient first, the process will be blocked.
Is there a way to set a timeout or exception, when HelloJsonClient send the request and HelloJsonServer not exist the function will throw an exception tell me JsonRpcClient waiting response time out or the request server not exist?

At present neither JsonRpcClient, nor RpcClient which it extends, supports a timeout to stop the constructor from blocking in the way you want.  This would be a nice thing to have, so we'll put it in as a bug/feature request for a future release.

If you want a short term remedy, you could try creating a subclass of JsonRpcClient, in which you have a new constructor that takes your timeout and stores it in a field, and then overriding primitiveCall (which is inherited from RpcClient.java) with a method that calls the version of uninterruptibleGet that takes an integer timeout as its argument rather than the nullary one that's currently called.  Although perhaps not the prettiest thing to have to do in end user code, it will at least get you out of your current situation.

Jerry


</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009944.html">[rabbitmq-discuss] Persistent messages ?
</A></li>
	<LI>Next message: <A HREF="009963.html">[rabbitmq-discuss] JMS client impl (javax.jms)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9961">[ date ]</a>
              <a href="thread.html#9961">[ thread ]</a>
              <a href="subject.html#9961">[ subject ]</a>
              <a href="author.html#9961">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
