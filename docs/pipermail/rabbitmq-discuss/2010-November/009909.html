<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] about RabbitMQ + HTTP Server configuration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20about%20RabbitMQ%20%2B%20HTTP%20Server%20configuration&In-Reply-To=%3CAANLkTin8q_D9mGL76gVaTf2oS0g%2BxP3YcRHwJNFphqPO%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009893.html">
   <LINK REL="Next"  HREF="009897.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] about RabbitMQ + HTTP Server configuration</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20about%20RabbitMQ%20%2B%20HTTP%20Server%20configuration&In-Reply-To=%3CAANLkTin8q_D9mGL76gVaTf2oS0g%2BxP3YcRHwJNFphqPO%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] about RabbitMQ + HTTP Server configuration">majek04 at gmail.com
       </A><BR>
    <I>Thu Nov 11 14:19:44 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009893.html">[rabbitmq-discuss] about RabbitMQ + HTTP Server configuration
</A></li>
        <LI>Next message: <A HREF="009897.html">[rabbitmq-discuss] subscriptions after .NET upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9909">[ date ]</a>
              <a href="thread.html#9909">[ thread ]</a>
              <a href="subject.html#9909">[ subject ]</a>
              <a href="author.html#9909">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Nov 11, 2010 at 08:16, Madalin Popa &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">madalin at sellerengine.com</A>&gt; wrote:
&gt;<i> I have a RabbitMQ server with 2 channels (tx, rx), consuming requests
</I>&gt;<i> (rx channel) from a HTTP server and passing them to a pool of
</I>&gt;<i> slaves...The slaves, when they finish their work, pass the result back
</I>&gt;<i> on RabbitMQ tx channel, from where the response needs to be mapped back
</I>&gt;<i> to initial HTTP request. Are there any natural/out of the box solutions
</I>&gt;<i> for this final part of mapping the response received from tx queue back
</I>&gt;<i> to HTTP requester?
</I>
What we usually do to achieve rpc:
 1. On every Requester we create an anonymous queue.
     Let's say that this queue is randomly named 'req-1'
 2. Requester publishes a message to the queue shared by the workers.
    This message contains usual stuff, like the description of the
    work to do. But except from that, it should have two headers
    set: 'reply_to' -&gt; set to 'req-1' and 'correlation_id' -&gt; set to a
random value.
3 . The worker picks up the task, does what it should do,
    and after it's done, it's ready to respond.
    The response should go to the queue named by 'reply_to' header
    in the request. Don't forget also to copy over the 'correlation_id' header.
4. Requester looks at his queue, sees a reply.
    Based on 'correlation_id' it's able to match it to the request.
5. Tadam. Job done.

Using this schema you:
 - need one queue per requester
 - don't have to create a single queue per every request
 - you're free to trash responses that come with invalid 'correlation_id' tag.

Cheers,
  Marek
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009893.html">[rabbitmq-discuss] about RabbitMQ + HTTP Server configuration
</A></li>
	<LI>Next message: <A HREF="009897.html">[rabbitmq-discuss] subscriptions after .NET upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9909">[ date ]</a>
              <a href="thread.html#9909">[ thread ]</a>
              <a href="subject.html#9909">[ subject ]</a>
              <a href="author.html#9909">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
