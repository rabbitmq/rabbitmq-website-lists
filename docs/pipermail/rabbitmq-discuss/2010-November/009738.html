<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Seeking 'right way' to do IPC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Seeking%20%27right%20way%27%20to%20do%20IPC&In-Reply-To=%3C220C6709-C115-475E-945C-E4C89B0BFDFA%40npcinternational.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009732.html">
   <LINK REL="Next"  HREF="009750.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Seeking 'right way' to do IPC</H1>
    <B>Jon Brisbin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Seeking%20%27right%20way%27%20to%20do%20IPC&In-Reply-To=%3C220C6709-C115-475E-945C-E4C89B0BFDFA%40npcinternational.com%3E"
       TITLE="[rabbitmq-discuss] Seeking 'right way' to do IPC">jon.brisbin at npcinternational.com
       </A><BR>
    <I>Mon Nov  1 21:30:13 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009732.html">[rabbitmq-discuss] Seeking 'right way' to do IPC
</A></li>
        <LI>Next message: <A HREF="009750.html">[rabbitmq-discuss] Seeking 'right way' to do IPC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9738">[ date ]</a>
              <a href="thread.html#9738">[ thread ]</a>
              <a href="subject.html#9738">[ subject ]</a>
              <a href="author.html#9738">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Nov 1, 2010, at 3:17 PM, Brian Jones wrote:

&gt;<i> 1.  NodeA, NodeB, and NodeC connect. All of them will be both publishers and consumers
</I>&gt;<i> 2. Any node publishes a message
</I>&gt;<i> 3. The other two nodes *each* receive the message
</I>&gt;<i> 4. The publishing node *does not* receive the message. 
</I>
IMHO it's easier to decide whether a message is your own message or not (by setting your own name in a header) in the consumer and toss it if it is. I've done this before and it's easier than creating complicated routing rules to prevent the producer from receiving its own message, given the simplicity of fanout exchanges. It's simple and it works (my favorite! :). 

Basic.Reject might also be something to look at here: 

<A HREF="http://www.rabbitmq.com/blog/2010/08/03/well-ill-let-you-go-basicreject-in-rabbitmq/">http://www.rabbitmq.com/blog/2010/08/03/well-ill-let-you-go-basicreject-in-rabbitmq/</A>

&gt;<i> 1. NodeA, NodeB, and NodeC connect. All of them will be both publishers and consumers
</I>&gt;<i> 2. Any of the nodes publishes a message
</I>&gt;<i> 3. Exactly one of the other nodes receives the message -- first one wins. 
</I>&gt;<i> 4. The publishing node *does not* receive the message. 
</I>
You'll need consumers to bind on the same queue name to get the round-robin stuff. You'll also likely want to incorporate some variation of the &quot;throw away my own messages&quot; or Basic.Reject scheme mentioned above.

FWIW- I've found it's almost always easier to deal with messages by deciding what to do with them after you've consumed them rather than by trying to prevent them from ever going to your consumers in the first place. I can also shove more messages down the pipe because it doesn't have to try and figure out whether or not to deliver a message.

Jon Brisbin
Portal Webmaster
NPC International, Inc.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101101/5427ef5f/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101101/5427ef5f/attachment.htm</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009732.html">[rabbitmq-discuss] Seeking 'right way' to do IPC
</A></li>
	<LI>Next message: <A HREF="009750.html">[rabbitmq-discuss] Seeking 'right way' to do IPC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9738">[ date ]</a>
              <a href="thread.html#9738">[ thread ]</a>
              <a href="subject.html#9738">[ subject ]</a>
              <a href="author.html#9738">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
