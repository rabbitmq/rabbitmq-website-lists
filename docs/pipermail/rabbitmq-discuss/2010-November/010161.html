<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ clustering
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20clustering&In-Reply-To=%3CAANLkTi%3DfGmo734s0Ct4zNO55wWCbuxYS-q_TEamyLu8K%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010156.html">
   <LINK REL="Next"  HREF="010162.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ clustering</H1>
    <B>Kshitiz Garg</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20clustering&In-Reply-To=%3CAANLkTi%3DfGmo734s0Ct4zNO55wWCbuxYS-q_TEamyLu8K%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ clustering">stephanion2002 at gmail.com
       </A><BR>
    <I>Mon Nov 29 07:18:55 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010156.html">[rabbitmq-discuss] RabbitMQ clustering
</A></li>
        <LI>Next message: <A HREF="010162.html">[rabbitmq-discuss] RabbitMQ clustering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10161">[ date ]</a>
              <a href="thread.html#10161">[ thread ]</a>
              <a href="subject.html#10161">[ subject ]</a>
              <a href="author.html#10161">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Gustavo,

Sorry for replying late,

We don't have any figure yet, but on our pub-sub system, millions of of
publishers will be publishing messages.

Our system is as follows:

1. A publisher publishes message on our rest APIs.
2. From there, we first store those messages in DB.
3. After storing, we publish the message on RabbitMQ setup using a load
balancer.
4. Behind the load balancer, we have a cluster of 4 rabbitMQ nodes.
5. At the consuming end,  we have perl and java consumers fetching messages.
7. These internal consumers send messages to the subscribers as per the
subscription protocol.

Now, if we add 4 RabbitMQ nodes in a cluster, all the credentials, exchanges
and bindings get copied to each mnesia db. However, since the queues are
specific to nodes, the message directed to a particular queue will be lost
(if the node on which that queue was created is down). This seems to be a
weak link for a scalable and High availability solution we need. Will the
message be persisted somewhere and delivered to that queue after that
particular node comes up?

If the message is gonna lost, can we have a workaround that we create copies
of the queues explicitly on each node. Now since they are copies, the
exchange will send the message to all the nodes and even if a node is down,
message will be delivered to all the copies of that queue.

We know that Clustering!=HA, but we do need Clustering with HA. Here since
even after clustering of 4 rabbitMQ nodes, the active-passive setup for each
of these 4 nodes becomes the bottleneck because of the complexity of the
non-replication of &quot;queues&quot;. Is there any workaround or any other setup u
can suggest ?

Regards,
Kshitiz Garg

On Sun, Nov 28, 2010 at 10:01 PM, Gustavo Aquino
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aquino.gustavo at gmail.com</A>&gt;wrote:

&gt;<i> Hi Garg,
</I>&gt;<i>
</I>&gt;<i> Could you give to us more details about what you need? eg.  it's messages
</I>&gt;<i> throughput is per second? and etc.
</I>&gt;<i>
</I>&gt;<i> Regards.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Wed, Nov 24, 2010 at 10:35 AM, Kshitiz Garg &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">stephanion2002 at gmail.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can someone present a pictorial representation of 4-5 Rabbit MQ nodes with
</I>&gt;&gt;<i> Clustering and HA (it can also go on the RabbitMQ site). I wanted to know
</I>&gt;&gt;<i> about a RabbitMQ setup which is able to handle millions of messages.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I hope there would be many more users with such a requirement.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks
</I>&gt;&gt;<i> Kshitiz Garg
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101129/e27bdf0e/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101129/e27bdf0e/attachment.htm</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010156.html">[rabbitmq-discuss] RabbitMQ clustering
</A></li>
	<LI>Next message: <A HREF="010162.html">[rabbitmq-discuss] RabbitMQ clustering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10161">[ date ]</a>
              <a href="thread.html#10161">[ thread ]</a>
              <a href="subject.html#10161">[ subject ]</a>
              <a href="author.html#10161">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
