<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] queue limits
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queue%20limits&In-Reply-To=%3C20101121233309.GB15734%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010016.html">
   <LINK REL="Next"  HREF="010022.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] queue limits</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queue%20limits&In-Reply-To=%3C20101121233309.GB15734%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] queue limits">matthew at rabbitmq.com
       </A><BR>
    <I>Sun Nov 21 23:33:12 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010016.html">[rabbitmq-discuss] queue limits
</A></li>
        <LI>Next message: <A HREF="010022.html">[rabbitmq-discuss] queue limits
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10017">[ date ]</a>
              <a href="thread.html#10017">[ thread ]</a>
              <a href="subject.html#10017">[ subject ]</a>
              <a href="author.html#10017">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Nov 22, 2010 at 10:11:11AM +1100, Steven Taylor wrote:
&gt;<i> Are there any limits to how long or large a queue can get apart from disk
</I>&gt;<i> space?
</I>
Yes. Unless you're using the rabbitmq-toke plugin, there is still a
(very small) per message RAM cost in the form of an index from message
guid to file+offset+size. Ultimately, you can end up with all your RAM
in this index, and thus even though all messages are on disk, you won't
be able to add more messages to a queue.

&gt;<i> Is there a limit to the message size?
</I>
Nope, but it must be able to fit in RAM, and it's probably risky to
attempt any message greater than one quarter of the amount of RAM
installed owing to copying of the message etc which is likely to occur.

&gt;<i> Is there a limit to the number of queue?
</I>
Yes. Each queue in Rabbit is an Erlang process. By default, we start up
the Erlang VM configured for a million processes, so you should be able
to get close to that, especially off a single connection and channel. If
you need to get to these sorts of numbers then you may well need to
raise the Erlang VM process limit further. This will cost more RAM, but
will allow you to create more AMQP resources.

&gt;<i> Rather than one bus/queue with
</I>&gt;<i> many message types, I'm creating a few queue for each simple units of work +
</I>&gt;<i> having only a few message types per queue.  Does anyone see a problem with
</I>&gt;<i> this approach when using RabbitMQ?
</I>
No, but if you need high performance and scalability, you may run into
issues. You may want to look at the queue expiry stuff as well and
obviously judicious use of exclusive and auto-delete flags is warranted.

&gt;<i> I'm at that nervous stage of it looks good, but I'm not quite sure yet.  I
</I>&gt;<i> guess I'm asking for experiences without having fully tested.  I'm hoping to
</I>&gt;<i> avoid potential pitfalls and save some time.
</I>
If in doubt, test ;) It _will_ fail at some point - and you need to
discover where that point is and how close it is to your requirements.

Matthew
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010016.html">[rabbitmq-discuss] queue limits
</A></li>
	<LI>Next message: <A HREF="010022.html">[rabbitmq-discuss] queue limits
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10017">[ date ]</a>
              <a href="thread.html#10017">[ thread ]</a>
              <a href="subject.html#10017">[ subject ]</a>
              <a href="author.html#10017">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
