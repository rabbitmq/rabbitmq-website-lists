<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] queue limits
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queue%20limits&In-Reply-To=%3CAANLkTing4urJpboo9aS5ipv9MH34hLBg%3D4v8HrdHSSbj%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010017.html">
   <LINK REL="Next"  HREF="010018.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] queue limits</H1>
    <B>Steven Taylor</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queue%20limits&In-Reply-To=%3CAANLkTing4urJpboo9aS5ipv9MH34hLBg%3D4v8HrdHSSbj%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] queue limits">taylste at gmail.com
       </A><BR>
    <I>Mon Nov 22 07:38:53 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010017.html">[rabbitmq-discuss] queue limits
</A></li>
        <LI>Next message: <A HREF="010018.html">[rabbitmq-discuss] RabbitMQ in Action is in early access!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10022">[ date ]</a>
              <a href="thread.html#10022">[ thread ]</a>
              <a href="subject.html#10022">[ subject ]</a>
              <a href="author.html#10022">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 22 November 2010 10:33, Matthew Sackman &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at rabbitmq.com</A>&gt; wrote:

&gt;<i> On Mon, Nov 22, 2010 at 10:11:11AM +1100, Steven Taylor wrote:
</I>&gt;<i> &gt; Are there any limits to how long or large a queue can get apart from disk
</I>&gt;<i> &gt; space?
</I>&gt;<i>
</I>&gt;<i> Yes. Unless you're using the rabbitmq-toke plugin, there is still a
</I>&gt;<i> (very small) per message RAM cost in the form of an index from message
</I>&gt;<i> guid to file+offset+size. Ultimately, you can end up with all your RAM
</I>&gt;<i> in this index, and thus even though all messages are on disk, you won't
</I>&gt;<i> be able to add more messages to a queue.
</I>&gt;<i>
</I>
Fine

&gt;<i> Is there a limit to the message size?
</I>
Nope, but it must be able to fit in RAM, and it's probably risky to
&gt;<i> attempt any message greater than one quarter of the amount of RAM
</I>&gt;<i> installed owing to copying of the message etc which is likely to occur.
</I>&gt;<i>
</I>
Sounds sensible.


&gt;<i>
</I>&gt;<i> &gt; Is there a limit to the number of queue?
</I>&gt;<i>
</I>&gt;<i> Yes. Each queue in Rabbit is an Erlang process. By default, we start up
</I>&gt;<i> the Erlang VM configured for a million processes, so you should be able
</I>&gt;<i> to get close to that, especially off a single connection and channel. If
</I>&gt;<i> you need to get to these sorts of numbers then you may well need to
</I>&gt;<i> raise the Erlang VM process limit further. This will cost more RAM, but
</I>&gt;<i> will allow you to create more AMQP resources.
</I>&gt;<i>
</I>
So far we're talking 15 queus. I think we're okay. ;)


&gt;<i>
</I>&gt;<i> &gt; Rather than one bus/queue with
</I>&gt;<i> &gt; many message types, I'm creating a few queue for each simple units of
</I>&gt;<i> work +
</I>&gt;<i> &gt; having only a few message types per queue.  Does anyone see a problem
</I>&gt;<i> with
</I>&gt;<i> &gt; this approach when using RabbitMQ?
</I>&gt;<i>
</I>&gt;<i> No, but if you need high performance and scalability, you may run into
</I>&gt;<i> issues. You may want to look at the queue expiry stuff as well and
</I>&gt;<i> obviously judicious use of exclusive and auto-delete flags is warranted.
</I>&gt;<i>
</I>&gt;<i>
</I>we're not talking super high performance (yet). I'll need to watch this and
get a feel for it.



&gt;<i> &gt; I'm at that nervous stage of it looks good, but I'm not quite sure yet.
</I>&gt;<i>  I
</I>&gt;<i> &gt; guess I'm asking for experiences without having fully tested.  I'm hoping
</I>&gt;<i> to
</I>&gt;<i> &gt; avoid potential pitfalls and save some time.
</I>&gt;<i>
</I>&gt;<i> If in doubt, test ;) It _will_ fail at some point - and you need to
</I>&gt;<i> discover where that point is and how close it is to your requirements.
</I>&gt;<i>
</I>
I have been testing, but sometimes I will need you guys to help me know
what's going on underneath.


thanks,
-Steven
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101122/460e3081/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101122/460e3081/attachment.htm</A>&gt;
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010017.html">[rabbitmq-discuss] queue limits
</A></li>
	<LI>Next message: <A HREF="010018.html">[rabbitmq-discuss] RabbitMQ in Action is in early access!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10022">[ date ]</a>
              <a href="thread.html#10022">[ thread ]</a>
              <a href="subject.html#10022">[ subject ]</a>
              <a href="author.html#10022">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
