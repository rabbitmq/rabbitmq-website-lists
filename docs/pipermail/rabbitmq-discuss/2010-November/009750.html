<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Seeking 'right way' to do IPC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Seeking%20%27right%20way%27%20to%20do%20IPC&In-Reply-To=%3CAANLkTinfkW6sFHDY0-ipP972ypHbzT9_qWW5hzLOQ2C6%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009738.html">
   <LINK REL="Next"  HREF="009752.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Seeking 'right way' to do IPC</H1>
    <B>Brian Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Seeking%20%27right%20way%27%20to%20do%20IPC&In-Reply-To=%3CAANLkTinfkW6sFHDY0-ipP972ypHbzT9_qWW5hzLOQ2C6%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Seeking 'right way' to do IPC">bkjones at gmail.com
       </A><BR>
    <I>Wed Nov  3 01:48:00 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009738.html">[rabbitmq-discuss] Seeking 'right way' to do IPC
</A></li>
        <LI>Next message: <A HREF="009752.html">[rabbitmq-discuss] Subscription queue and exchange by event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9750">[ date ]</a>
              <a href="thread.html#9750">[ thread ]</a>
              <a href="subject.html#9750">[ subject ]</a>
              <a href="author.html#9750">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Nov 1, 2010 at 5:30 PM, Jon Brisbin &lt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jon.brisbin at npcinternational.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> IMHO it's easier to decide whether a message is your own message or not (by
</I>&gt;<i> setting your own name in a header) in the consumer and toss it if it is.
</I>&gt;<i> I've done this before and it's easier than creating complicated routing
</I>&gt;<i> rules to prevent the producer from receiving its own message, given the
</I>&gt;<i> simplicity of fanout exchanges. It's simple and it works (my favorite! :).
</I>&gt;<i>
</I>
With all due respect, I'm not after easier from a dev perspective, I'm after
more efficient from an overall workflow and performance perspective.

I'm currently doing as you suggest, and I've done it on other projects as
well, and it works, but I wouldn't call it &quot;right&quot;. Consider that in a
scenario where hundreds or thousands of messages per second are being
processed, every single consumer has to *consume* every single message
whether they sent it or not. This is inelegant, in addition to being
inefficient.

Also, what in the world could be easier than simply not getting the messages
you published? ;-)


&gt;<i> Basic.Reject might also be something to look at here:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/blog/2010/08/03/well-ill-let-you-go-basicreject-in-rabbitmq/">http://www.rabbitmq.com/blog/2010/08/03/well-ill-let-you-go-basicreject-in-rabbitmq/</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>From the spec:
</I>
 The client MUST NOT use this method as a means of selecting messages to
&gt;<i> process.
</I>

There's also nothing in there saying that the message is not actually
delivered. It's not a 'standing' rejection of items matching some routing
key, it appears to be meant for clients who, for whatever reason, are unable
to process the message &quot;at this time&quot;.


&gt;<i> FWIW- I've found it's almost always easier to deal with messages by
</I>&gt;<i> deciding what to do with them after you've consumed them rather than by
</I>&gt;<i> trying to prevent them from ever going to your consumers in the first place.
</I>&gt;<i> I can also shove more messages down the pipe because it doesn't have to try
</I>&gt;<i> and figure out whether or not to deliver a message.
</I>&gt;<i>
</I>
I should think it *has* to be more costly in the scope of the wider
application environment to deliver a message and make the decision on the
client end than to have RabbitMQ do the check before delivering. That said,
I also agree that, given Rabbit's inability to do this at the moment, doing
it on the client *is* easier.

Thanks for the insights. At least I know I'm not the only one doing things
this way.

brian



&gt;<i>
</I>&gt;<i> Jon Brisbin
</I>&gt;<i> Portal Webmaster
</I>&gt;<i> NPC International, Inc.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Brian K. Jones
My Blog          <A HREF="http://www.protocolostomy.com">http://www.protocolostomy.com</A>
Follow me      <A HREF="http://twitter.com/bkjones">http://twitter.com/bkjones</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101102/20ce8936/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101102/20ce8936/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009738.html">[rabbitmq-discuss] Seeking 'right way' to do IPC
</A></li>
	<LI>Next message: <A HREF="009752.html">[rabbitmq-discuss] Subscription queue and exchange by event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9750">[ date ]</a>
              <a href="thread.html#9750">[ thread ]</a>
              <a href="subject.html#9750">[ subject ]</a>
              <a href="author.html#9750">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
