<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Passing null for 'arguments' to queueBind()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Passing%20null%20for%20%27arguments%27%20to%20queueBind%28%29&In-Reply-To=%3C4CDA4E66.1000508%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009851.html">
   <LINK REL="Next"  HREF="009877.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Passing null for 'arguments' to queueBind()</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Passing%20null%20for%20%27arguments%27%20to%20queueBind%28%29&In-Reply-To=%3C4CDA4E66.1000508%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Passing null for 'arguments' to queueBind()">matthias at rabbitmq.com
       </A><BR>
    <I>Wed Nov 10 07:48:54 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009851.html">[rabbitmq-discuss]  Passing null for 'arguments' to queueBind()
</A></li>
        <LI>Next message: <A HREF="009877.html">[rabbitmq-discuss] Passing null for 'arguments' to queueBind()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9876">[ date ]</a>
              <a href="thread.html#9876">[ thread ]</a>
              <a href="subject.html#9876">[ subject ]</a>
              <a href="author.html#9876">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michi,

michi.oshima wrote:
&gt;<i> I'm currently exploring 'headers' exchange type.  I'd publish a message with
</I>&gt;<i> argument table set to 'A' for example, with the intent that consumer with
</I>&gt;<i> the matching argument 'A' would receive the message.  And those consumers
</I>&gt;<i> who do not specify 'A' would not get the message.
</I>&gt;<i> 
</I>&gt;<i> I'm finding that a consumer ends up receiving all messages if I pass null as
</I>&gt;<i> the value for the 'arguments' parameter. 
</I>&gt;<i> 
</I>&gt;<i> 1. Is this intended?  That is, I merely have to specify null for 'arguments'
</I>&gt;<i> to receive all messages.
</I>
Yes, that is the specified behaviour.

&gt;<i> 2. Is there any way to prevent a client from subscribing to all messages?
</I>
Not directly, but see below.

&gt;<i> What I'm trying to achieve is some degree of message privacy.  Consumer A
</I>&gt;<i> would put the key 'A' to argument to receive all messages meant for A, and
</I>&gt;<i> Consumer B would put the key 'B' to argument to receive all messages meant
</I>&gt;<i> for B.  Consumer A is prevented from receiving messages meant for Consumer
</I>&gt;<i> B, simply because he is ignorant of the key 'B'.  
</I>
So essentially the producer is selecting who is allowed to receive a 
message by listing a set of tokens / shared secrets. Right?

I can think of three ways of doing that with RabbitMQ...

1) The publisher sends the message N times to a direct exchange, each 
time with an individual security token as the routing key. Consumers 
bind to that direct exchange with their token. (You could also just use 
the default exchange, if the consumer's queues are named with their 
token). The downside of this approach is the cost of having to send 
(and for the server to process) the same message multiple times.

2) Write a custom exchange type plug-in. This could work exactly like a 
headers exchange but not permit empty bindings. Or it could work more 
like a direct exchange, with the producer perhaps listing the tokens in 
the message's routing key, comma-separated.

3) Write a proxy that prevents empty bindings.


Regards,

Matthias.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009851.html">[rabbitmq-discuss]  Passing null for 'arguments' to queueBind()
</A></li>
	<LI>Next message: <A HREF="009877.html">[rabbitmq-discuss] Passing null for 'arguments' to queueBind()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9876">[ date ]</a>
              <a href="thread.html#9876">[ thread ]</a>
              <a href="subject.html#9876">[ subject ]</a>
              <a href="author.html#9876">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
