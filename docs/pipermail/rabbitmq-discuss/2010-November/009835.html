<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] |Spam|  |Spam| broker going down,	how to troubleshoot?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%7CSpam%7C%20%20%7CSpam%7C%20broker%20going%20down%2C%0A%09how%20to%20troubleshoot%3F&In-Reply-To=%3CAANLkTi%3D%3DTkghG_xsVhVFk2k3yH-M7JWxZdV%2BLMJN6gdm%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009834.html">
   <LINK REL="Next"  HREF="009836.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] |Spam|  |Spam| broker going down,	how to troubleshoot?</H1>
    <B>Shane Witbeck</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%7CSpam%7C%20%20%7CSpam%7C%20broker%20going%20down%2C%0A%09how%20to%20troubleshoot%3F&In-Reply-To=%3CAANLkTi%3D%3DTkghG_xsVhVFk2k3yH-M7JWxZdV%2BLMJN6gdm%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] |Spam|  |Spam| broker going down,	how to troubleshoot?">shane at digitalsanctum.com
       </A><BR>
    <I>Fri Nov  5 20:10:19 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009834.html">[rabbitmq-discuss] |Spam|  |Spam| broker going down,	how to troubleshoot?
</A></li>
        <LI>Next message: <A HREF="009836.html">[rabbitmq-discuss] Mgmt Plugin (2.1.1) feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9835">[ date ]</a>
              <a href="thread.html#9835">[ thread ]</a>
              <a href="subject.html#9835">[ subject ]</a>
              <a href="author.html#9835">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here's the env vars we set prior to starting the broker:

ERLANG_VERSION=R14A
RABBIT_VERSION=2.1.1
RABBIT_HOME=/data/spg/prod/3rd/rabbitmq/rabbitmq_server-${RABBIT_VERSION}
export ERLANG_HOME=/data/spg/prod/3rd/erlang/${ERLANG_VERSION}
export RABBITMQ_LOG_BASE=/var/tmp/spg/rabbitmq
export
RABBITMQ_MNESIA_BASE=/data/spg/prodrw/rabbitmq/rel/incr/${SPG_FARM_ENV}/data/mnesia
export
RABBITMQ_CONFIG_FILE=/data/spg/prodrw/rabbitmq/rel/incr/${SPG_FARM_ENV}/conf/rabbitmq
export PATH=$PATH:$ERLANG_HOME/bin:${RABBIT_HOME}/sbin

Not running as root but using a shared login (I know it's bad but out of my
control).

The only thing I've noticed about the mgmt plugin is that it has a nasty
memory leak in the IE browser (if left open over night, it accumulates over
1GB of memory). This probably has nothing to do with the broker going down
but thought I'd mention it since you asked :)

Since it's happened twice now in as many days I will be keeping a closer eye
on it and report back with whatever I find.

Thanks


On Fri, Nov 5, 2010 at 3:51 PM, Matthias Radestock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;wrote:

&gt;<i> Shane,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Shane Witbeck wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I installed rabbit via the generic unix tar because we don't have access
</I>&gt;&gt;<i> to the normal OS package manager (one of the joys of being in a strict
</I>&gt;&gt;<i> corporate env).
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ok. Did you have to set any env vars / modify the startup scripts in any
</I>&gt;<i> way? And are you running rabbit as root, a dedicated 'rabbitmq' user, or
</I>&gt;<i> yourself?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  I got &quot;rabbitmq-server start -detached&quot; from the documentation (
</I>&gt;&gt;<i> <A HREF="http://www.rabbitmq.com/install.html#running-generic-unix">http://www.rabbitmq.com/install.html#running-generic-unix</A>)
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> There is no &quot;start&quot; in there. Shouldn't cause any harm though.
</I>&gt;<i>
</I>&gt;<i> Is there an erl_crash.dump in the directory from which you started rabbit?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  I haven't found anything noteworthy in the system logs yet.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I see your rabbit is running the management plugin. Have you been keeping
</I>&gt;<i> an eye on it through that? And did anything odd crop up - high memory or fd
</I>&gt;<i> use, for example - just before the death?
</I>&gt;<i>
</I>&gt;<i> It is quite rare for rabbit to die, and very unusual indeed for it to do so
</I>&gt;<i> without a trace. For that to happen the most likely cause of death is that
</I>&gt;<i> something/body is killing it.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I>


-- 
-Shane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101105/7ab87807/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101105/7ab87807/attachment.htm</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009834.html">[rabbitmq-discuss] |Spam|  |Spam| broker going down,	how to troubleshoot?
</A></li>
	<LI>Next message: <A HREF="009836.html">[rabbitmq-discuss] Mgmt Plugin (2.1.1) feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9835">[ date ]</a>
              <a href="thread.html#9835">[ thread ]</a>
              <a href="subject.html#9835">[ subject ]</a>
              <a href="author.html#9835">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
