<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ message receiving slower than publishing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20message%20receiving%20slower%20than%0A%20publishing&In-Reply-To=%3C20101103175917.GD22102%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009775.html">
   <LINK REL="Next"  HREF="009780.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ message receiving slower than publishing</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20message%20receiving%20slower%20than%0A%20publishing&In-Reply-To=%3C20101103175917.GD22102%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ message receiving slower than publishing">matthew at rabbitmq.com
       </A><BR>
    <I>Wed Nov  3 17:59:18 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009775.html">[rabbitmq-discuss] RabbitMQ message receiving slower than	publishing
</A></li>
        <LI>Next message: <A HREF="009780.html">[rabbitmq-discuss] Remote configuration of users and permissions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9776">[ date ]</a>
              <a href="thread.html#9776">[ thread ]</a>
              <a href="subject.html#9776">[ subject ]</a>
              <a href="author.html#9776">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Nov 03, 2010 at 05:43:42PM +0000, T-zex wrote:
&gt;<i> Yes, we are using IModel.BasicConsume, noAck = false.
</I>&gt;<i> We use DefaultBasicConsumer and HandleBasicDeliver override is just
</I>&gt;<i> incrementing the counter in this test, so no latency here.
</I>&gt;<i> What do you mean by &quot;broker has sent all messages to the receiver&quot;? We
</I>&gt;<i> are not using QueueingBasicConsumer.
</I>
Sure, but there are many buffers in between. If your messages are small
and the buffers large, all messages may be buffered in transit.

During this period, can you check what the output of is:
rabbitmqctl list_queues names messages_ready messages_unacknowledged

I would expect the messages_ready column to be 0, but the
messages_unacknowledged column to not be.

&gt;<i> The documentation says &quot;RabbitMQ operates at sub-millisecond latency
</I>&gt;<i> in transient mode under a load of 10k messages per second.&quot;
</I>&gt;<i> Is this sending and receiving or is it just sending? We can achieve
</I>&gt;<i> 10k sending but receiving is 7k.
</I>
Yup, a lot of this depends on network settings and the performance of
individual clients, message sizes, etc etc.

Matthew
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009775.html">[rabbitmq-discuss] RabbitMQ message receiving slower than	publishing
</A></li>
	<LI>Next message: <A HREF="009780.html">[rabbitmq-discuss] Remote configuration of users and permissions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9776">[ date ]</a>
              <a href="thread.html#9776">[ thread ]</a>
              <a href="subject.html#9776">[ subject ]</a>
              <a href="author.html#9776">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
