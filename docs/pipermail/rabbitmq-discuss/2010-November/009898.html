<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] subscriptions after .NET upgrade
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20subscriptions%20after%20.NET%20upgrade&In-Reply-To=%3C4CDBB7C4.8000003%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009897.html">
   <LINK REL="Next"  HREF="009919.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] subscriptions after .NET upgrade</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20subscriptions%20after%20.NET%20upgrade&In-Reply-To=%3C4CDBB7C4.8000003%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] subscriptions after .NET upgrade">emile at rabbitmq.com
       </A><BR>
    <I>Thu Nov 11 09:30:44 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009897.html">[rabbitmq-discuss] subscriptions after .NET upgrade
</A></li>
        <LI>Next message: <A HREF="009919.html">[rabbitmq-discuss] subscriptions after .NET upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9898">[ date ]</a>
              <a href="thread.html#9898">[ thread ]</a>
              <a href="subject.html#9898">[ subject ]</a>
              <a href="author.html#9898">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Isaac,

On 11/11/10 09:04, Isaac Cambron wrote:
&gt;<i> I have an older application that I'm trying to get onto the latest and
</I>&gt;<i> greatest version of Rabbit and the .NET client. I'm having a bit of a
</I>&gt;<i> problem getting it to work the same way across the API changes.
</I>&gt;<i> 
</I>&gt;<i> In my old app, I had a simple piece that broadcast to all of my
</I>&gt;<i> consumers who happen to be listening. Let's say they print the message's
</I>&gt;<i> content to the console when they get it. It was pretty simple. Each
</I>&gt;<i> consumer just creates a subscription:
</I>&gt;<i> 
</I>&gt;<i> Subscription sub = new Subscription(ch, someExchange,
</I>&gt;<i> ExchangeType.Topic, someTopic);
</I>&gt;<i> 
</I>&gt;<i> and listened to it. The broadcaster just did this:
</I>&gt;<i> 
</I>&gt;<i> ch.BasicPublish(someExchange, someTopic, null, someBytes);
</I>&gt;<i> 
</I>&gt;<i> Now, that signature for Subscription no longer exists. I've tried stuff
</I>&gt;<i> like this (which matches the old implementation from Subscription.cs):
</I>&gt;<i> 
</I>&gt;<i> ch.ExchangeDeclare(EXCHANGE, ExchangeType.Topic);
</I>&gt;<i> ch.QueueDeclare(STATUS_QUEUE);
</I>&gt;<i> ch.QueueBind(STATUS_QUEUE, EXCHANGE, TOPIC, false, null);
</I>&gt;<i> Subscription sub = new Subscription(ch, STATUS_QUEUE, true);
</I>&gt;<i> 
</I>&gt;<i> But the behavior I'm seeing is totally different:
</I>&gt;<i> 
</I>&gt;<i> 1. Only one of the consumers gets the message and prints something. It's
</I>&gt;<i> round-robin instead of broadcast.
</I>&gt;<i> 2. When a new consumer is created and subscribes, it gets all of the
</I>&gt;<i> messages I've ever put in the queue and prints them to the console.
</I>&gt;<i> 
</I>&gt;<i> I'm able to fix #2 by changing noAck to true, but not #1, and I suspect
</I>&gt;<i> I have something very wrong. Any ideas?
</I>
Subscriptions have indeed been simplified for release version 2.0.0.
Preceding the use of Subscription with declarations and the binding, as
you have done, is correct.

If only one consumer gets messages then try setting the channel prefetch
to a small number (e.g. 1) by calling ch.BasicQos() before creating the
subscription.

Regards


Emile
</PRE>

































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009897.html">[rabbitmq-discuss] subscriptions after .NET upgrade
</A></li>
	<LI>Next message: <A HREF="009919.html">[rabbitmq-discuss] subscriptions after .NET upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9898">[ date ]</a>
              <a href="thread.html#9898">[ thread ]</a>
              <a href="subject.html#9898">[ subject ]</a>
              <a href="author.html#9898">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
