<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not	working?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20.Net%20Cilent/1.8.0%3A%20IModel.QueueDelete%20not%0A%09working%3F&In-Reply-To=%3CAANLkTik%3DfssJZjei4Tx8GNS2TkX6GMmx5JWD9pYEU76%2B%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010003.html">
   <LINK REL="Next"  HREF="010085.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not	working?</H1>
    <B>Ovidiu Deac</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20.Net%20Cilent/1.8.0%3A%20IModel.QueueDelete%20not%0A%09working%3F&In-Reply-To=%3CAANLkTik%3DfssJZjei4Tx8GNS2TkX6GMmx5JWD9pYEU76%2B%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not	working?">ovidiudeac at gmail.com
       </A><BR>
    <I>Thu Nov 25 00:16:48 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010003.html">[rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not working?
</A></li>
        <LI>Next message: <A HREF="010085.html">[rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not working?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10083">[ date ]</a>
              <a href="thread.html#10083">[ thread ]</a>
              <a href="subject.html#10083">[ subject ]</a>
              <a href="author.html#10083">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi again,

I'm back with more info. Yes, the queue is still there.

I've got the chance to do some cleanup of the code  and some debugging
and it seems that I get an exception when I try delete an exchange
that doesn't exist and then all the following operations throw the
same exception, even if they try to delete queues that does exist.

The following code reproduces the problem:

IModel _channel;
//....set up _channel

            System.Console.WriteLine(&quot;deleting the exchange...&quot;);
            try
            {
                _channel.ExchangeDelete(&quot;x&quot;,false, false);
            } catch(Exception ex)
            {
                System.Console.WriteLine(ex.Message);
            }

            System.Console.WriteLine(&quot;deleting the queue...&quot;);

            try
            {
                _channel.QueueDelete(&quot;q&quot;, false, false, false);
            } catch(Exception ex)
            {
                        System.Console.WriteLine(ex.Message);
            }

Running this code when the exchange x DOESN'T exist and the queue q
DOES exist gives me the following output:

deleting the exchange...
The AMQP operation was interrupted: AMQP close-reason, initiated by
Peer, code=404, text=&quot;NOT_FOUND - no exchange 'x' in vhost '/'&quot;,
classId=40, methodId=20, cause=
deleting the queue...
The AMQP operation was interrupted: AMQP close-reason, initiated by
Peer, code=404, text=&quot;NOT_FOUND - no exchange 'x' in vhost '/'&quot;,
classId=40, methodId=20, cause=


So it seems that one error on the channel doesn't allow me to do any
other operations using that channel. Is there any possibility to reuse
the channel?

Thanks,
Ovidiu

On Fri, Nov 19, 2010 at 2:39 PM, Matthias Radestock
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt; wrote:
&gt;<i> Ovidiu,
</I>&gt;<i>
</I>&gt;<i> On 19/11/10 10:52, Ovidiu Deac wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for the answer. I don't get any errors. At least I don't see any.
</I>&gt;<i>
</I>&gt;<i> So what *are* you seeing? Does the QueueDelete call succeed but the queue is
</I>&gt;<i> still there? That can only happen if the queue gets redeclared by something
</I>&gt;<i> else.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010003.html">[rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not working?
</A></li>
	<LI>Next message: <A HREF="010085.html">[rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not working?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10083">[ date ]</a>
              <a href="thread.html#10083">[ thread ]</a>
              <a href="subject.html#10083">[ subject ]</a>
              <a href="author.html#10083">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
