<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbit servers block in cluster environment
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbit%20servers%20block%20in%20cluster%20environment&In-Reply-To=%3CAANLkTi%3DSup5qHcGStxBNCOJgxL%2BMcOZJO%2BXCJxzrpu4a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009983.html">
   <LINK REL="Next"  HREF="009994.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbit servers block in cluster environment</H1>
    <B>Liwen Fan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbit%20servers%20block%20in%20cluster%20environment&In-Reply-To=%3CAANLkTi%3DSup5qHcGStxBNCOJgxL%2BMcOZJO%2BXCJxzrpu4a%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] rabbit servers block in cluster environment">f at scalethink.com
       </A><BR>
    <I>Fri Nov 19 05:34:55 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009983.html">[rabbitmq-discuss] rabbitmqctl script complaints
</A></li>
        <LI>Next message: <A HREF="009994.html">[rabbitmq-discuss] rabbit servers block in cluster environment
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9992">[ date ]</a>
              <a href="thread.html#9992">[ thread ]</a>
              <a href="subject.html#9992">[ subject ]</a>
              <a href="author.html#9992">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi
  we face some blocking problems in rabbitmq cluster environment.
  we have some java test clients and 2 rabbit servers clustered, one ram and
the other disk, all of them are 2.1.1.
  the client creates two connections when it is initialized, and holds these
two connections. For each action as basicGet/basicPublish, it randomly
chooses one connection.
  the queues and exchanges are created on one server (random choose) when
the client starts up.
  then the client creates many threads. Each thread randomly chooses one
connection and randomly chooses several exchanges to publish and several
queues to get.

  but after several message published/got, both servers face blocking
problems. The test client blocks and the server command like &quot;rabbitmqctl
list_queues&quot; and &quot;rabbitmqctl stop&quot; blocks too.
  but &quot;rabbitmqctl status&quot; does not block and returns ok.

  when we move to 1 single server(disk), everything turns fine. Rabbit
server behaves quite well as a single node.

  by the way, we are running on erlang R14B. Both queues and messages are
persistent and durable.
  Any suggestions?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101119/afbe0a12/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101119/afbe0a12/attachment.htm</A>&gt;
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009983.html">[rabbitmq-discuss] rabbitmqctl script complaints
</A></li>
	<LI>Next message: <A HREF="009994.html">[rabbitmq-discuss] rabbit servers block in cluster environment
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9992">[ date ]</a>
              <a href="thread.html#9992">[ thread ]</a>
              <a href="subject.html#9992">[ subject ]</a>
              <a href="author.html#9992">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
