<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] does rabbit eat memory?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20does%20rabbit%20eat%20memory%3F&In-Reply-To=%3C20101126163309.GG1917%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010120.html">
   <LINK REL="Next"  HREF="010127.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] does rabbit eat memory?</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20does%20rabbit%20eat%20memory%3F&In-Reply-To=%3C20101126163309.GG1917%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] does rabbit eat memory?">matthew at rabbitmq.com
       </A><BR>
    <I>Fri Nov 26 16:33:10 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010120.html">[rabbitmq-discuss] does rabbit eat memory?
</A></li>
        <LI>Next message: <A HREF="010127.html">[rabbitmq-discuss] does rabbit eat memory?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10123">[ date ]</a>
              <a href="thread.html#10123">[ thread ]</a>
              <a href="subject.html#10123">[ subject ]</a>
              <a href="author.html#10123">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Nov 26, 2010 at 04:28:14PM +0000, Robert Fuller wrote:
&gt;<i> On 26 November 2010 16:19, Matthew Sackman &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at rabbitmq.com</A>&gt; wrote:
</I>&gt;<i> &gt; On Fri, Nov 26, 2010 at 04:15:53PM +0000, Robert Fuller wrote:
</I>&gt;<i> &gt;&gt; Having noticed memory consumption on our server I ran a test of using
</I>&gt;<i> &gt;&gt; a clean install, and adding 3600 messages to the queue, then consuming
</I>&gt;<i> &gt;&gt; these messages and checking for memory usage using top command. I
</I>&gt;<i> &gt;&gt; notice that the memory used by rabbitmq slowly creeps upwards.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Are you acknowledging messages or consuming with noAck/autoAck = true ?
</I>&gt;<i> 
</I>&gt;<i> The consumer is acknowledging each message.
</I>
Ok, in which case there's nothing more you can do. Erlang is a GC'd
language and so when it obtains memory on demand, it may choose not to
promptly return that memory to the OS. It might take a while for some
large contiguous block of free memory to occur before Erlang free's the
memory.

Thus whilst the memory use of Rabbit may initially rise, provided you
keep draining the queues such that they don't grow endlessly, you should
find the memory use levels out after a while.

Matthew
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010120.html">[rabbitmq-discuss] does rabbit eat memory?
</A></li>
	<LI>Next message: <A HREF="010127.html">[rabbitmq-discuss] does rabbit eat memory?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10123">[ date ]</a>
              <a href="thread.html#10123">[ thread ]</a>
              <a href="subject.html#10123">[ subject ]</a>
              <a href="author.html#10123">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
