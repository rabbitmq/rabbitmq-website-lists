<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not working?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20.Net%20Cilent/1.8.0%3A%20IModel.QueueDelete%20not%0A%20working%3F&In-Reply-To=%3C4CEF72FB.6010605%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010108.html">
   <LINK REL="Next"  HREF="010110.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not working?</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20.Net%20Cilent/1.8.0%3A%20IModel.QueueDelete%20not%0A%20working%3F&In-Reply-To=%3C4CEF72FB.6010605%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not working?">simon at rabbitmq.com
       </A><BR>
    <I>Fri Nov 26 08:42:35 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010108.html">[rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not	working?
</A></li>
        <LI>Next message: <A HREF="010110.html">[rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not working?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10109">[ date ]</a>
              <a href="thread.html#10109">[ thread ]</a>
              <a href="subject.html#10109">[ subject ]</a>
              <a href="author.html#10109">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/11/2010 8:19AM, Ovidiu Deac wrote:
&gt;<i> On Thu, Nov 25, 2010 at 1:11 PM, David Wragg&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">david at rabbitmq.com</A>&gt;  wrote:
</I>&gt;&gt;<i> In AMQP, the broker signals channel-level errors as part of closing the
</I>&gt;&gt;<i> channel.  So there is no way to reuse a channel after an error.  You
</I>&gt;&gt;<i> will need to open a new channel for further operations.
</I>&gt;<i>
</I>&gt;<i> I see. Is this a bug or a feature?
</I>
That's an interesting question. Certainly it annoys a whole bunch of 
people. But there are reasons.

The spec states that it's done this way to &quot;avoid ambiguous states after 
errors&quot;, and there's some truth to this, although with some effort I'm 
sure an unambiguous set of post-error states could be defined.

The more real concern for me is one of reliability. If you're aiming to 
write a reliable messaging system, you'll have to plan for connections 
(and hence channels) going away unexpectedly anyway - with the best will 
in the world machines crash and people trip over network cables. And if 
you're doing that anyway then treating programming / configuration 
errors in a similar way makes at least some degree of sense.

To come back to your use case - if you're writing automated tests and 
need to clean up when you're finished, try declaring your exchanges 
autodelete. They will then go when the last queue unbinds from them. And 
then either declare queues autodelete - they'll go when the last 
consumer disconnects, or exclusive - they'll go when the creating 
connection goes. You shouldn't have to explicitly delete stuff at all.

Cheers, Simon
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010108.html">[rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not	working?
</A></li>
	<LI>Next message: <A HREF="010110.html">[rabbitmq-discuss] .Net Cilent/1.8.0: IModel.QueueDelete not working?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10109">[ date ]</a>
              <a href="thread.html#10109">[ thread ]</a>
              <a href="subject.html#10109">[ subject ]</a>
              <a href="author.html#10109">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
