<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] subscriptions after .NET upgrade
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20subscriptions%20after%20.NET%20upgrade&In-Reply-To=%3CAANLkTi%3DB9LH0s%3DdfMDG3TCVB64bniG37mL7xDXrMZy8T%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009909.html">
   <LINK REL="Next"  HREF="009898.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] subscriptions after .NET upgrade</H1>
    <B>Isaac Cambron</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20subscriptions%20after%20.NET%20upgrade&In-Reply-To=%3CAANLkTi%3DB9LH0s%3DdfMDG3TCVB64bniG37mL7xDXrMZy8T%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] subscriptions after .NET upgrade">icambron at gmail.com
       </A><BR>
    <I>Thu Nov 11 09:04:59 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009909.html">[rabbitmq-discuss] about RabbitMQ + HTTP Server configuration
</A></li>
        <LI>Next message: <A HREF="009898.html">[rabbitmq-discuss] subscriptions after .NET upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9897">[ date ]</a>
              <a href="thread.html#9897">[ thread ]</a>
              <a href="subject.html#9897">[ subject ]</a>
              <a href="author.html#9897">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have an older application that I'm trying to get onto the latest and
greatest version of Rabbit and the .NET client. I'm having a bit of a
problem getting it to work the same way across the API changes.

In my old app, I had a simple piece that broadcast to all of my consumers
who happen to be listening. Let's say they print the message's content to
the console when they get it. It was pretty simple. Each consumer just
creates a subscription:

Subscription sub = new Subscription(ch, someExchange, ExchangeType.Topic,
someTopic);

and listened to it. The broadcaster just did this:

ch.BasicPublish(someExchange, someTopic, null, someBytes);

Now, that signature for Subscription no longer exists. I've tried stuff like
this (which matches the old implementation from Subscription.cs):

ch.ExchangeDeclare(EXCHANGE, ExchangeType.Topic);
ch.QueueDeclare(STATUS_QUEUE);
ch.QueueBind(STATUS_QUEUE, EXCHANGE, TOPIC, false, null);
Subscription sub = new Subscription(ch, STATUS_QUEUE, true);

But the behavior I'm seeing is totally different:

1. Only one of the consumers gets the message and prints something. It's
round-robin instead of broadcast.
2. When a new consumer is created and subscribes, it gets all of the
messages I've ever put in the queue and prints them to the console.

I'm able to fix #2 by changing noAck to true, but not #1, and I suspect I
have something very wrong. Any ideas?

Thanks,
Isaac
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101111/63845768/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101111/63845768/attachment.htm</A>&gt;
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009909.html">[rabbitmq-discuss] about RabbitMQ + HTTP Server configuration
</A></li>
	<LI>Next message: <A HREF="009898.html">[rabbitmq-discuss] subscriptions after .NET upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9897">[ date ]</a>
              <a href="thread.html#9897">[ thread ]</a>
              <a href="subject.html#9897">[ subject ]</a>
              <a href="author.html#9897">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
