<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ and Websockets
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20Websockets&In-Reply-To=%3C488E039D-CDAE-4E23-9F3C-2904FAAB398B%40cantemo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009802.html">
   <LINK REL="Next"  HREF="009801.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ and Websockets</H1>
    <B>Tim Child</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20Websockets&In-Reply-To=%3C488E039D-CDAE-4E23-9F3C-2904FAAB398B%40cantemo.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ and Websockets">tim at cantemo.com
       </A><BR>
    <I>Fri Nov  5 08:49:19 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009802.html">[rabbitmq-discuss] RabbitMQ and Websockets
</A></li>
        <LI>Next message: <A HREF="009801.html">[rabbitmq-discuss] RabbitMQ and Websockets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9800">[ date ]</a>
              <a href="thread.html#9800">[ thread ]</a>
              <a href="subject.html#9800">[ subject ]</a>
              <a href="author.html#9800">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>And authentication?

Seems to me that you should consider some form of authentication against the service, whether it is some sort of REST callback to another service or some other mechanism.

Tim.


On 5 Nov 2010, at 09:00, Michael Bridgen wrote:

&gt;&gt;<i> var message = new Object(); message.command = &quot;publish&quot;;
</I>&gt;&gt;<i> message.queue = &quot;myqueue&quot;; message.exchange = &quot;myexchange&quot;;
</I>&gt;&gt;<i> message.key = &quot;mybindkey&quot;; message.body = &quot;hello world&quot;;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> var message_json = JSON.stringify(message);
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> var ws = new WebSocket(&quot;<A HREF="ws://4.2.2.2:123&quot;">ws://4.2.2.2:123&quot;</A>); ws.send(message_json);
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Consuming:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> var subscribe = new Object(); subscribe.command = &quot;consume&quot;;
</I>&gt;&gt;<i> subscribe.queue = ...
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> ws.send(subscribe_json);
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> //wait for reply from server... ws.onopen = function(event) {
</I>&gt;&gt;<i> //handle message or error here.. }
</I>&gt;<i> 
</I>&gt;<i> How about something /really/ simple:
</I>&gt;<i> 
</I>&gt;<i> var sock = new RabbitSocket(&quot;subscribe&quot;, &quot;myexchange&quot;);
</I>&gt;<i> sock.onMessage(function(msg) {
</I>&gt;<i>  ...
</I>&gt;<i> });
</I>&gt;<i> 
</I>&gt;<i> and perhaps more provocatively,
</I>&gt;<i> 
</I>&gt;<i> var sock = new RabbitSocket(&quot;request&quot;, &quot;myqueue&quot;);
</I>&gt;<i> sock.send(&quot;question&quot;);
</I>&gt;<i> sock.onMessage(function(answer) {
</I>&gt;<i>  ...
</I>&gt;<i> });
</I>&gt;<i> 
</I>&gt;<i> or even
</I>&gt;<i> 
</I>&gt;<i> sock.request(&quot;question&quot;, function(answer) {
</I>&gt;<i>  ...
</I>&gt;<i> });
</I>&gt;<i> 
</I>&gt;<i> This is a bit more like how our STOMP adapter works (now, on
</I>&gt;<i> default branch[1]), and more like the much admired ZeroMQ.  I've been
</I>&gt;<i> messing around with this kind of model at
</I>&gt;<i> <A HREF="https://github.com/squaremo/rabbit.js#readme.">https://github.com/squaremo/rabbit.js#readme.</A>
</I>&gt;<i> 
</I>&gt;<i> [1] <A HREF="http://hg.rabbitmq.com/rabbitmq-stomp/file/0aff7391968a/DESIGN.md">http://hg.rabbitmq.com/rabbitmq-stomp/file/0aff7391968a/DESIGN.md</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Michael.
</I>&gt;<i> 
</I>&gt;&gt;<i> I don't need STOMP support, the websocket plugin should just require
</I>&gt;&gt;<i> a port for communication and delegate the commands to rabbitmq.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On Thu, Nov 4, 2010 at 10:47 AM, Christian Legnitto
</I>&gt;&gt;<i> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">clegnitto at mozilla.com</A>&gt;  wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> On Nov 4, 2010, at 10:26 AM, Marek Majkowski wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> On Fri, Oct 29, 2010 at 19:55, Christian
</I>&gt;&gt;&gt;&gt;<i> Legnitto&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">clegnitto at mozilla.com</A>&gt;  wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i> [...] Support for WebSockets
</I>&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> * It'd be nice for there a plugin to support websockets * More
</I>&gt;&gt;&gt;&gt;&gt;<i> important for Mozilla as most tools are web-based * I have set
</I>&gt;&gt;&gt;&gt;&gt;<i> it up with orbitd, but it's a pain / another moving piece /
</I>&gt;&gt;&gt;&gt;&gt;<i> easier to uncomment a line like
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://activemq.apache.org/websockets.html">http://activemq.apache.org/websockets.html</A>
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Christian,
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> I'm interested in creating a websockets plugin for Rabbit.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> But I'm not really sure how you'd like to use it.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> As a thing exposed to the wild internet? Or just as another
</I>&gt;&gt;&gt;&gt;<i> framing for AMQP? Or as a wire protocol for STOMP? (like this
</I>&gt;&gt;&gt;&gt;<i> thing <A HREF="http://jmesnil.net/stomp-websocket/doc/">http://jmesnil.net/stomp-websocket/doc/</A>)
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Or maybe you have yet another use case?
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Cheers, Marek
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I was thinking more like <A HREF="http://jmesnil.net/stomp-websocket/doc/,">http://jmesnil.net/stomp-websocket/doc/,</A>
</I>&gt;&gt;&gt;<i> as that's what I have been using. Of course, the more options the
</I>&gt;&gt;&gt;<i> merrier :-) I can't really provide erlang help, but I'm sure I can
</I>&gt;&gt;&gt;<i> poke the WebSocket guys here at Moz to provide any assistance
</I>&gt;&gt;&gt;<i> required on that front.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Thanks, Christian _______________________________________________
</I>&gt;&gt;&gt;<i> rabbitmq-discuss mailing list <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
Tim Child
+46 (0) 7602 17785
Skype: timchild
<A HREF="http://www.cantemo.com">http://www.cantemo.com</A>
CANTEMO

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101105/6859e2c8/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101105/6859e2c8/attachment-0001.htm</A>&gt;
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009802.html">[rabbitmq-discuss] RabbitMQ and Websockets
</A></li>
	<LI>Next message: <A HREF="009801.html">[rabbitmq-discuss] RabbitMQ and Websockets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9800">[ date ]</a>
              <a href="thread.html#9800">[ thread ]</a>
              <a href="subject.html#9800">[ subject ]</a>
              <a href="author.html#9800">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
