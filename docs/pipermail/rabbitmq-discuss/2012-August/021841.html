<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] The RabbitMQ uses very much memory in the cluster pattern
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20The%20RabbitMQ%20uses%20very%20much%20memory%20in%20the%0A%20cluster%20pattern&In-Reply-To=%3C5029D048.5010704%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021871.html">
   <LINK REL="Next"  HREF="021845.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] The RabbitMQ uses very much memory in the cluster pattern</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20The%20RabbitMQ%20uses%20very%20much%20memory%20in%20the%0A%20cluster%20pattern&In-Reply-To=%3C5029D048.5010704%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] The RabbitMQ uses very much memory in the cluster pattern">matthias at rabbitmq.com
       </A><BR>
    <I>Tue Aug 14 05:12:56 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021871.html">[rabbitmq-discuss] Queue disappears during high volume	federation
</A></li>
        <LI>Next message: <A HREF="021845.html">[rabbitmq-discuss] The RabbitMQ uses very much memory in the cluster pattern
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21841">[ date ]</a>
              <a href="thread.html#21841">[ thread ]</a>
              <a href="subject.html#21841">[ subject ]</a>
              <a href="author.html#21841">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/08/12 03:40, Liu Hao wrote:
&gt;<i>       The destination queue's name is &quot;mqclient_test_queue_1&quot; and it is 
</I>&gt;<i> on the cnbj-cuc-tst01-crl0015 node.
</I>&gt;<i> 
</I>&gt;<i>       The rabbitmqctl report output of cnbj-cuc-tst01-crl0015 node is 
</I>&gt;<i> &quot;cnbj-cuc-tst01-crl0015&quot; attachment, the other two are similar.
</I>
Ah, I completely forgot that 'report' reports on all nodes. Sorry.

There are about 1100 connections and 8400 channels. Are those the
numbers you expect to see?

How big are the messages?

Please run the following on crl0015 when it is using lots of memory:

rabbitmqctl eval 'begin {L, Pid} =
lists:last(lists:sort([{length(element(2, process_info(P, binary))), P}
||<i> P &lt;- processes()])), {L, Pid, process_info(Pid)} end.'
</I>
(all on one line) and post the output.


Regards,

Matthias.

</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021871.html">[rabbitmq-discuss] Queue disappears during high volume	federation
</A></li>
	<LI>Next message: <A HREF="021845.html">[rabbitmq-discuss] The RabbitMQ uses very much memory in the cluster pattern
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21841">[ date ]</a>
              <a href="thread.html#21841">[ thread ]</a>
              <a href="subject.html#21841">[ subject ]</a>
              <a href="author.html#21841">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
