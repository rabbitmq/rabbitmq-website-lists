<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Using Pika's add_on_return_callback with a BlockingConnection?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20Pika%27s%20add_on_return_callback%20with%20a%0A%20BlockingConnection%3F&In-Reply-To=%3C2D6F0B9CE2EA48838789984421284A08%40meetme.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022077.html">
   <LINK REL="Next"  HREF="021971.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Using Pika's add_on_return_callback with a BlockingConnection?</H1>
    <B>Gavin M. Roy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20Pika%27s%20add_on_return_callback%20with%20a%0A%20BlockingConnection%3F&In-Reply-To=%3C2D6F0B9CE2EA48838789984421284A08%40meetme.com%3E"
       TITLE="[rabbitmq-discuss] Using Pika's add_on_return_callback with a BlockingConnection?">gmr at meetme.com
       </A><BR>
    <I>Thu Aug 23 17:07:53 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022077.html">[rabbitmq-discuss] Using Pika's add_on_return_callback with a	BlockingConnection?
</A></li>
        <LI>Next message: <A HREF="021971.html">[rabbitmq-discuss] Unexpected Incoming message timeouts when using Haigha/GeventTransport inside uwsgi server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22079">[ date ]</a>
              <a href="thread.html#22079">[ thread ]</a>
              <a href="subject.html#22079">[ subject ]</a>
              <a href="author.html#22079">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It should be fine to invoke this directly. If it were meant to be private it'd be prefixed with an underscore. I'll note that it needs to be added to the docs.

Gavin


On Thursday, August 23, 2012 at 12:04 PM, Matt Pietrek wrote: 
&gt;<i> Pinging again on this thread. Gavin?
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> Matt
</I>&gt;<i> 
</I>&gt;<i> On Fri, Aug 17, 2012 at 4:11 PM, Matt Pietrek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at skytap.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at skytap.com</A>)&gt; wrote:
</I>&gt;<i> &gt; Update on this: I came across the BlockingConnection.process_data_events() method, which seems to do the trick if I insert it into my loop.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; However, it doesn't look like an &quot;official&quot; API, in that I don't see it described anywhere, and the only search results I get for it are its inclusions in various callstacks.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Gavin (or whomever else wants to comment): What are your thoughts on this?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Thanks,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Matt
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; On Fri, Aug 17, 2012 at 3:52 PM, Matt Pietrek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at skytap.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at skytap.com</A>)&gt; wrote:
</I>&gt;<i> &gt; &gt; I'm got a scenario where I use a dedicated thread to write a series of messages in a loop. This thread uses BlockingConnection, calls add_on_return_callback for its channel, and when publishing, uses the mandatory=True flag.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I want to know when a message is being returned. However, I can't figure out what to call within my loop to give Pika the opportunity to see the Basic.Return message and invoke the callback.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I've verified via WireShark that the Basic.Returns are coming back from the broker. However, I can't figure out what the moral equivalent of calling ioloop.start() is, so as to give Pika the an opportunity to process the basic.return messages, but without blocking indefinitely. Just for kicks I tried calling Channel.basic_get() within the loop, and (as expected), I didn't get the returned message callbacks.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Thanks,
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Matt
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>)
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120823/800e02f0/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120823/800e02f0/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022077.html">[rabbitmq-discuss] Using Pika's add_on_return_callback with a	BlockingConnection?
</A></li>
	<LI>Next message: <A HREF="021971.html">[rabbitmq-discuss] Unexpected Incoming message timeouts when using Haigha/GeventTransport inside uwsgi server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22079">[ date ]</a>
              <a href="thread.html#22079">[ thread ]</a>
              <a href="subject.html#22079">[ subject ]</a>
              <a href="author.html#22079">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
