<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20TCP%20Backpressure%20/%20Flow%20Control%20in%20C%23%0A%20producer&In-Reply-To=%3CF216F12DEE15B7429FB03C58643375521C4C39EB%40AMXPRD0410MB377.eurprd04.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021766.html">
   <LINK REL="Next"  HREF="021768.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer</H1>
    <B>Ulli Berthold - Exactag GmbH</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20TCP%20Backpressure%20/%20Flow%20Control%20in%20C%23%0A%20producer&In-Reply-To=%3CF216F12DEE15B7429FB03C58643375521C4C39EB%40AMXPRD0410MB377.eurprd04.prod.outlook.com%3E"
       TITLE="[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer">berthold at exactag.com
       </A><BR>
    <I>Wed Aug  8 10:29:59 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021766.html">[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
</A></li>
        <LI>Next message: <A HREF="021768.html">[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21767">[ date ]</a>
              <a href="thread.html#21767">[ thread ]</a>
              <a href="subject.html#21767">[ subject ]</a>
              <a href="author.html#21767">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias,

we're running rabbit 2.8.4 / 2.8.5 on 64bit linux servers with 64bit erlang and plenty of memory, and there was no &quot;high watermark&quot; warning in the logs either.
Just to make sure i'm not erring to much - if the rabbit web ui shows a connection as &quot;flow&quot; instead of &quot;running&quot; or &quot;blocked&quot; that does mean it is in flow control (backpressure), correct?

Regards

Ulli

-----Urspr&#252;ngliche Nachricht-----
Von: Matthias Radestock [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>] 
Gesendet: Mittwoch, 8. August 2012 10:52
An: Ulli Berthold - Exactag GmbH
Cc: Discussions about RabbitMQ
Betreff: Re: AW: AW: AW: [rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer

Ulli,

On 08/08/12 09:35, Ulli Berthold - Exactag GmbH wrote:
&gt;<i> Rabbit does handle it, yes, but it slows down the inbound messages at 
</I>&gt;<i> some point (like several million messages in queue, with lots of disk 
</I>&gt;<i> space still available).
</I>
With several million messages in the queue you may be hitting the memory limit - the rabbit logs should tell you. Messages have some in-memory footprint *even when paged to disk*.

&gt;<i> We would love a way to disable (or better, suppress) the whole 
</I>&gt;<i> backpressure system until the server is really at its memory and disk 
</I>&gt;<i> limit.
</I>
Significant durations of backpressure should only occur when the broker is getting close to the configured limits. You may want to adjust the limits though, as per the docs.

Btw, you are running rabbit 2.8.x, right? Flow control in that is much improved over earlier version.

Also, if you are on Windows, make sure you run the 64-bit version of Erlang R15B01, otherwise memory will be capped at 2GB.

&gt;<i> an alternative to just know when backpressure is applied would help us 
</I>&gt;<i> too because we could temporarily send the next messages through an 
</I>&gt;<i> alternate route.
</I>
What I proposed is precisely that - a way to detect backpressure.

&gt;<i> An in-program queue would definitely increase complexity almost beyond 
</I>&gt;<i> the point of usefulness of the queueing system - why use an existing 
</I>&gt;<i> one if I got to build one anyways?
</I>
We are talking fifty lines of code here, most of which are boilerplate.

Matthias.


</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021766.html">[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
</A></li>
	<LI>Next message: <A HREF="021768.html">[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21767">[ date ]</a>
              <a href="thread.html#21767">[ thread ]</a>
              <a href="subject.html#21767">[ subject ]</a>
              <a href="author.html#21767">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
