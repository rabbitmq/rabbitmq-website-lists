<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Shovel terminated status
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20terminated%20status&In-Reply-To=%3CE94F626F5C43D14F8B8479C5EBD790388A7DC549%40vmexchange02.seegrid.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022024.html">
   <LINK REL="Next"  HREF="022026.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Shovel terminated status</H1>
    <B>Elizabeth Liao</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20terminated%20status&In-Reply-To=%3CE94F626F5C43D14F8B8479C5EBD790388A7DC549%40vmexchange02.seegrid.local%3E"
       TITLE="[rabbitmq-discuss] Shovel terminated status">eliao at seegrid.com
       </A><BR>
    <I>Tue Aug 21 16:45:57 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022024.html">[rabbitmq-discuss] How many queues can one broker support
</A></li>
        <LI>Next message: <A HREF="022026.html">[rabbitmq-discuss] Shovel terminated status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22020">[ date ]</a>
              <a href="thread.html#22020">[ thread ]</a>
              <a href="subject.html#22020">[ subject ]</a>
              <a href="author.html#22020">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've been doing some tests with shovel to understand it better and I have a couple questions about the termination state. 

My setup:
I'm using RabbitMQ 2.8.2 with the configuration file at <A HREF="https://gist.github.com/3360344#.">https://gist.github.com/3360344#.</A>  Additionally, I'm forcing shovel into the terminated state by declaring BroadcastExchange as a fanout exchange instead of a topic exchange.  The terminated shovel status (from the last shovel) is as follows:
{shovel3,
     {terminated,
         {{shutdown,
              {server_initiated_close,406,
                  &lt;&lt;&quot;PRECONDITION_FAILED - cannot redeclare exchange 'BroadcastExchange' in vhost '/' with different type, durable, internal or autodelete value&quot;&gt;&gt;}},
          {gen_server,call,
              [&lt;4888.2466.1&gt;,
               {call,
                   {'exchange.declare',0,&lt;&lt;&quot;BroadcastExchange&quot;&gt;&gt;,
                       &lt;&lt;&quot;topic&quot;&gt;&gt;,false,true,false,false,false,[]},
                   none,&lt;4888.2457.1&gt;},
               infinity]}}},
     {{2012,8,21},{11,11,32}}}]


Questions:
In the documentation, it states that the timestamp from  $ rabbitmqctl eval 'rabbit_shovel_status:status().' is the time when shovel entered the state.  I've observed this for the running and starting state but not for the terminated state.  The timestamp for the terminated state appears to be the current time.  Does this have to do with the specific way I'm setting up the termination condition?  Additionally, it seems when a shovel is in the terminated state and periodically trying to reconnect, there are many connections left open with no active channels.  Is this from the shovel connection attempts?  How can I avoid this?

Thanks!

Liz
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022024.html">[rabbitmq-discuss] How many queues can one broker support
</A></li>
	<LI>Next message: <A HREF="022026.html">[rabbitmq-discuss] Shovel terminated status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22020">[ date ]</a>
              <a href="thread.html#22020">[ thread ]</a>
              <a href="subject.html#22020">[ subject ]</a>
              <a href="author.html#22020">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
