<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] simple federation question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20simple%20federation%20question&In-Reply-To=%3Ccaf04340-116e-4703-8626-3ac34ae24476%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021977.html">
   <LINK REL="Next"  HREF="021917.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] simple federation question</H1>
    <B>Bobby Castleberry</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20simple%20federation%20question&In-Reply-To=%3Ccaf04340-116e-4703-8626-3ac34ae24476%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] simple federation question">bobtkat at gmail.com
       </A><BR>
    <I>Wed Aug 15 16:02:12 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021977.html">[rabbitmq-discuss] JSON-RPC: RPC endpoint responds with &quot;not	found&quot;
</A></li>
        <LI>Next message: <A HREF="021917.html">[rabbitmq-discuss] simple federation question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21916">[ date ]</a>
              <a href="thread.html#21916">[ thread ]</a>
              <a href="subject.html#21916">[ subject ]</a>
              <a href="author.html#21916">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So I'm attempting a simple federation setup.  I have one server 
distributing an exchange to two end point servers.  Well it seems like it 
should be a simple set up but I must be missing something obvious.  When I 
check the federation status I just see []...done.  I've confirmed that I 
can connect to both of the end points from the distribution server just 
fine on 5672.  There are no errors in the main or startup logs.  If anyone 
can point me in a direction for something to check or a mistake in the 
config I would be greatly appreciative.  

---- start of rabbitmq.config
[{rabbit,
    [{rabbitmq_federation,
        [ { exchanges, [
          { exchange, &quot;graphite&quot; }, 
          { type, &quot;topic&quot; }, 
          { upstream_set, &quot;gdisplay&quot; }, 
          { durable, &quot;true&quot; } 
         ]},
         { upstream_sets, [ 
         {&quot;gdisplay&quot;,
           [
           [{ connection, &quot;sansketch8display1&quot; },
             { exchange, &quot;graphite&quot; }] , 
           [{ connection, &quot;sansketch8display2&quot; },
             { exchange, &quot;graphite&quot; }] ] 
         } ]}, 
         { connections, [ 
         {&quot;sansketch8display1&quot;,
          [
          { prefetch_count, 1000 }, 
          { ha_policy, &quot;all&quot; }, 
          { expires, 3000 }, 
          { port, 5672 }, 
          { protocol, &quot;amqp&quot; }, 
          { virtual_host, &quot;/&quot; }, 
          { mechanism, default }, 
          { host, &quot;sansketch8display1&quot; }, 
          { reconnect_delay, 5 }, 
          { message_ttl, 10000 }, 
          { heartbeat, 1 }] 
         }, 
         {&quot;sansketch8display2&quot;,
          [
          { prefetch_count, 1000 }, 
          { ha_policy, &quot;all&quot; }, 
          { expires, 3000 }, 
          { port, 5672 }, 
          { protocol, &quot;amqp&quot; }, 
          { virtual_host, &quot;/&quot; }, 
          { mechanism, default }, 
          { host, &quot;sansketch8display2&quot; }, 
          { reconnect_delay, 5 }, 
          { message_ttl, 10000 }, 
          { heartbeat, 1 }] 
         }
         ]}
]}]
}
].
-------- End of config


----  Main log output:
=INFO REPORT==== 15-Aug-2012::10:42:10 ===
Limiting to approx 924 file handles (829 sockets)

=INFO REPORT==== 15-Aug-2012::10:42:10 ===
Memory limit set to 803MB of 2009MB total.

=INFO REPORT==== 15-Aug-2012::10:42:10 ===
Disk free limit set to 2009MB

=INFO REPORT==== 15-Aug-2012::10:42:10 ===
Management plugin upgraded statistics to fine.

=INFO REPORT==== 15-Aug-2012::10:42:10 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 15-Aug-2012::10:42:10 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 15-Aug-2012::10:42:10 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 15-Aug-2012::10:42:10 ===
Management agent started.

=INFO REPORT==== 15-Aug-2012::10:42:10 ===
Management plugin started. Port: 55672, path: /

=INFO REPORT==== 15-Aug-2012::10:42:10 ===
Statistics database started.

------ End main log

------ Start up log:
Activating RabbitMQ plugins ...
8 plugins activated:
* amqp_client-2.8.2
* mochiweb-1.3-rmq2.8.2-git
* rabbitmq_federation-2.8.2
* rabbitmq_federation_management-2.8.2
* rabbitmq_management-2.8.2
* rabbitmq_management_agent-2.8.2
* rabbitmq_mochiweb-2.8.2
* webmachine-1.7.0-rmq2.8.2-hg

** Found 0 name clashes in code paths 

+---+   +---+
|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   +---+   +-------+
</I>|<i>                   |
</I>|<i> RabbitMQ  +---+   |
</I>|<i>           |   |   |
</I>|<i>   v2.8.2  +---+   |
</I>|<i>                   |
</I>+-------------------+
AMQP 0-9-1 / 0-9 / 0-8
Copyright (C) 2007-2012 VMware, Inc.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at sansketch8polling1</A>
app descriptor : 
/usr/lib/rabbitmq/lib/rabbitmq_server-2.8.2/sbin/../ebin/rabbit.app
home dir       : /home/rabbitmq
config file(s) : /etc/rabbitmq/rabbitmq.config
database dir   : /var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at sansketch8polling1</A>
erlang version : 5.7.4

-- rabbit boot start
starting file handle cache server                                     
...done
starting worker pool                                                  
...done
starting database                                                     
...done
starting database sync                                                
...done
starting codec correctness check                                      
...done
-- external infrastructure ready
starting statistics event manager                                     
...done
starting logging server                                               
...done
starting plugin registry                                              
...done
starting auth mechanism amqplain                                      
...done
starting auth mechanism cr-demo                                       
...done
starting auth mechanism plain                                         
...done
starting exchange type direct                                         
...done
starting exchange type fanout                                         
...done
starting exchange type headers                                        
...done
starting exchange type topic                                          
...done
-- kernel ready
starting node monitor                                                 
...done
starting cluster delegate                                             
...done
starting guid generator                                               
...done
starting alarm handler                                                
...done
starting memory monitor                                               
...done
-- core initialized
starting federation                                                   
...done
starting federation exchange type                                     
...done
starting federation upstream exchange type                            
...done
starting management agent                                             
...done
starting exchange, queue and binding recovery                         
...done
starting configured definitions                                       
...done
starting empty DB check                                               
...done
starting mirror queue slave sup                                       
...done
starting adding mirrors to queues                                     
...done
-- message delivery logic ready
starting error log relay                                              
...done
starting networking                                                   
...done
starting notify cluster nodes                                         
...done
starting direct client                                                
...done

broker running
--- End main log

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120815/697a5e84/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120815/697a5e84/attachment.htm</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021977.html">[rabbitmq-discuss] JSON-RPC: RPC endpoint responds with &quot;not	found&quot;
</A></li>
	<LI>Next message: <A HREF="021917.html">[rabbitmq-discuss] simple federation question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21916">[ date ]</a>
              <a href="thread.html#21916">[ thread ]</a>
              <a href="subject.html#21916">[ subject ]</a>
              <a href="author.html#21916">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
