<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] channel 1 badfun
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20channel%201%20badfun&In-Reply-To=%3CE78BB53C-99EE-478E-B369-1C830E147B3A%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022180.html">
   <LINK REL="Next"  HREF="022121.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] channel 1 badfun</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20channel%201%20badfun&In-Reply-To=%3CE78BB53C-99EE-478E-B369-1C830E147B3A%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] channel 1 badfun">tim at rabbitmq.com
       </A><BR>
    <I>Thu Aug 30 23:17:04 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022180.html">[rabbitmq-discuss] channel 1 badfun
</A></li>
        <LI>Next message: <A HREF="022121.html">[rabbitmq-discuss] Non-blocking Consumers approach
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22194">[ date ]</a>
              <a href="thread.html#22194">[ thread ]</a>
              <a href="subject.html#22194">[ subject ]</a>
              <a href="author.html#22194">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi John

On 25 Aug 2012, at 00:39, John Merrells wrote:

&gt;<i> 
</I>&gt;<i> We have a two node cluster of RabbitMQ 2.8.6 on Erlang 5.8.5.
</I>&gt;<i> 
</I>&gt;<i> Sometimes one of the servers will peg the cpu and messages will
</I>&gt;<i> stop passing through the system. We don't have a reliable way of
</I>&gt;<i> reproducing this...
</I>&gt;<i> 
</I>
There are a few conditions that can cause this to happen. What other symptoms happen when this occurs? Does memory usage go up as well? Does the CPU usage come down eventually, or get stuck?

&gt;<i> But, we do have some curious error reports in the logs. I've read
</I>&gt;<i> through rabbit_amqqueue.erl and delegate.erl and I think that
</I>&gt;<i> one server is telling the other to execute some function in 
</I>&gt;<i> rabbit_amqqueue... but I don't see why that function would be 
</I>&gt;<i> 'bad'.
</I>&gt;<i> 
</I>&gt;<i> Anyone any thoughts on the cpu issue, or this error report?
</I>&gt;<i> 
</I>
Well we'd certainly like to get to the bottom of it asap. Can you please tell us a bit more about your setup please:

   a. cluster setup (i.e., disk vs ram nodes)
   b. how many queues, are there any HA queues?
   c. how you're interacting with the broker/cluster (publishers, consumers, exchanges and bindings and so on)

Also if there's any more of the logs (and sasl logs) for both nodes you're able to share, that would also help. If this occurs again and you're able to run `rabbitmqctl report` on the affected node, that would be great.

Cheers,
Tim
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022180.html">[rabbitmq-discuss] channel 1 badfun
</A></li>
	<LI>Next message: <A HREF="022121.html">[rabbitmq-discuss] Non-blocking Consumers approach
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22194">[ date ]</a>
              <a href="thread.html#22194">[ thread ]</a>
              <a href="subject.html#22194">[ subject ]</a>
              <a href="author.html#22194">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
