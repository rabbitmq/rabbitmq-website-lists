<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] highly available shovel in a cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20highly%20available%20shovel%20in%20a%20cluster&In-Reply-To=%3CCAC3L7FehHJ7Y3S4MzKZayv-TJTzsRaQLigBGM0GzKNgx_nrw_w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021834.html">
   <LINK REL="Next"  HREF="021837.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] highly available shovel in a cluster</H1>
    <B>&#381;ilvinas &#352;altys</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20highly%20available%20shovel%20in%20a%20cluster&In-Reply-To=%3CCAC3L7FehHJ7Y3S4MzKZayv-TJTzsRaQLigBGM0GzKNgx_nrw_w%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] highly available shovel in a cluster">zilvinas.saltys at gmail.com
       </A><BR>
    <I>Mon Aug 13 17:23:50 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021834.html">[rabbitmq-discuss] Weird unicode error popping up in pika 0.9.6
</A></li>
        <LI>Next message: <A HREF="021837.html">[rabbitmq-discuss] highly available shovel in a cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21836">[ date ]</a>
              <a href="thread.html#21836">[ thread ]</a>
              <a href="subject.html#21836">[ subject ]</a>
              <a href="author.html#21836">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We have a cluster made of two nodes with 1 HA queue that has a shovel
on the master node that shovels messages to itself from another
RabbitMQ broker over WAN. The problem is if the master node goes down
the shovel plugin needs to become active on the slave and to keep
shoveling. How to solve this problem?

One way I see is to have the shovel active on both nodes. But due to
how rabbitmq cluster works the shovel on the slave node would just
forward everything to the master node which would replicate back to
the slave. This seems inefficient because of unnecessary connections
made by the slave when only the master node needs to be doing the
shoveling.

Another way is to monitor both slave/master nodes externally if one
goes down then switch the config with the right shovel config and
restart the broker service.

Has anyone dealt with this before or knows of an easy way to solve it?
Thanks
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021834.html">[rabbitmq-discuss] Weird unicode error popping up in pika 0.9.6
</A></li>
	<LI>Next message: <A HREF="021837.html">[rabbitmq-discuss] highly available shovel in a cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21836">[ date ]</a>
              <a href="thread.html#21836">[ thread ]</a>
              <a href="subject.html#21836">[ subject ]</a>
              <a href="author.html#21836">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
