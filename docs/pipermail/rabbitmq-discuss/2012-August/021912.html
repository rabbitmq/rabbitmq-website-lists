<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Shovel stuck?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20stuck%3F&In-Reply-To=%3C20120815175747.GE14902%40bloaty%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021911.html">
   <LINK REL="Next"  HREF="021913.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Shovel stuck?</H1>
    <B>Alex Zepeda</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20stuck%3F&In-Reply-To=%3C20120815175747.GE14902%40bloaty%3E"
       TITLE="[rabbitmq-discuss] Shovel stuck?">alex at inferiorhumanorgans.com
       </A><BR>
    <I>Wed Aug 15 18:57:47 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021911.html">[rabbitmq-discuss] Shovel stuck?
</A></li>
        <LI>Next message: <A HREF="021913.html">[rabbitmq-discuss] Shovel stuck?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21912">[ date ]</a>
              <a href="thread.html#21912">[ thread ]</a>
              <a href="subject.html#21912">[ subject ]</a>
              <a href="author.html#21912">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Aug 15, 2012 at 06:44:04PM +0100, Matthias Radestock wrote:

&gt;<i> The last entry's timestamp coincides with that in the shovel status. Is 
</I>&gt;<i> there anything in the latter log *after* that point?
</I>
Here's the next few minutes of the log files:

&lt;<A HREF="https://gist.github.com/3361930">https://gist.github.com/3361930</A>&gt;
&lt;<A HREF="https://gist.github.com/3361963">https://gist.github.com/3361963</A>&gt;

It looks like I restarted rabbit around 7:13.  At that point it appeared as
if the shovel had been wedged for about 16 minutes (IIRC there were eight
messages in the 'heartbeat' queue, one is generated roughly every two minutes).

&gt;<i> What version of rabbitmq are you running?
</I>
2.8.5 from the debian packages on rabbitmq.com

Erlang should be whatever the latest Ubuntu 11.04 package is.

&gt;<i> Also, please post the output of
</I>&gt;<i> 
</I>&gt;<i> rabbitmqctl eval 'supervisor2:which_children(rabbit_shovel_sup).'
</I>&gt;<i> 
</I>&gt;<i> and
</I>&gt;<i> 
</I>&gt;<i> rabbitmqctl eval '[io:format(&quot;~p:~n~s~n&quot;, [Pid, element(2, 
</I>&gt;<i> erlang:process_info(Pid, backtrace))]) || {_, Pid, _, _} &lt;- 
</I>&gt;<i> supervisor2:which_children(rabbit_shovel_sup), Pid =/= undefined].'
</I>&gt;<i> 
</I>&gt;<i> (all one line)
</I>
When I regain access to the sensor I will try this.  Right now I'm
just going through the log files I copied over the last time I was
able to log in (early yesterday).

- alex
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021911.html">[rabbitmq-discuss] Shovel stuck?
</A></li>
	<LI>Next message: <A HREF="021913.html">[rabbitmq-discuss] Shovel stuck?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21912">[ date ]</a>
              <a href="thread.html#21912">[ thread ]</a>
              <a href="subject.html#21912">[ subject ]</a>
              <a href="author.html#21912">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
