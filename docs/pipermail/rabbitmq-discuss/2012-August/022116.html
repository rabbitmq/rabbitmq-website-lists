<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Intermittent%20Problem%20-%202.8.5%20java%20client%0A%09hangs%20on%20declare%20exchange&In-Reply-To=%3C1345841381.315321185%40apps.rackspace.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022115.html">
   <LINK REL="Next"  HREF="022117.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange</H1>
    <B>m.luchak at smartasking.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Intermittent%20Problem%20-%202.8.5%20java%20client%0A%09hangs%20on%20declare%20exchange&In-Reply-To=%3C1345841381.315321185%40apps.rackspace.com%3E"
       TITLE="[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange">m.luchak at smartasking.com
       </A><BR>
    <I>Fri Aug 24 21:49:41 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022115.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs on declare exchange
</A></li>
        <LI>Next message: <A HREF="022117.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs on declare exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22116">[ date ]</a>
              <a href="thread.html#22116">[ thread ]</a>
              <a href="subject.html#22116">[ subject ]</a>
              <a href="author.html#22116">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I couldn't agree more ;)  this is very odd and extremelly annoying ;)
 
While the client wait() is well, waiting, the device receives incoming messages - so there is a connection and the heartbeat is running normally and happily.
 
As this only happens on a slow connection (3G) and intermittently I am working on the assumption that the reply has been sent but has been dropped somewhere... really stretching it there, but I can't seem to find any other explanaition as exchangeDeclare creates new exchanges 100% of the time but only  returns a OK &quot;some of the time&quot;.... sigh...
 
BTW, In the Javadocs there is an Exchange.Declare with a nowait boolean :
AMQImpl.Exchange.Declare(int ticket, java.lang.String exchange, java.lang.String  type, boolean passive, boolean durable, boolean autoDelete, boolean internal,  boolean nowait, java.util.Map&lt;java.lang.String,java.lang.Object&gt;  arguments)
 
However, this option is not available in the 2.8.1 or 2.8.6 .jar files or source files... can anyone tell me if this overide is in a  nightly build and/or if it's irrelevant to the task at hand?
 
thanks all,
 
Matthew
 
-----Original Message-----
From: &quot;Matthias Radestock&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;
Sent: Friday, August 24, 2012 4:26pm
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">m.luchak at smartasking.com</A>
Cc: &quot;Discussions about RabbitMQ&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs on declare exchange



On 24/08/12 21:11, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">m.luchak at smartasking.com</A> wrote:
&gt;<i> heartbeats are enabled...
</I>
That's very odd then. If the exchange.declare-ok doesn't make it back to 
the client then neither should heartbeats. Missed heartbeats ought to 
result in the client library tearing down everything associated with the 
connection and release any threads waiting for replies.

Matthias.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120824/bf95810f/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120824/bf95810f/attachment.htm</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022115.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs on declare exchange
</A></li>
	<LI>Next message: <A HREF="022117.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs on declare exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22116">[ date ]</a>
              <a href="thread.html#22116">[ thread ]</a>
              <a href="subject.html#22116">[ subject ]</a>
              <a href="author.html#22116">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
