<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq - simple message sending error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20-%20simple%20message%20sending%20error&In-Reply-To=%3CCAJ1JW0eAKUeq5NnfSMLchip-4%3DMm6wETgKdMUybPt%3DgRR82hjw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022217.html">
   <LINK REL="Next"  HREF="022219.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq - simple message sending error</H1>
    <B>Matthias Reik</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20-%20simple%20message%20sending%20error&In-Reply-To=%3CCAJ1JW0eAKUeq5NnfSMLchip-4%3DMm6wETgKdMUybPt%3DgRR82hjw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq - simple message sending error">matthias.reik at gmail.com
       </A><BR>
    <I>Fri Aug 31 20:03:08 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022217.html">[rabbitmq-discuss] rabbitmq - simple message sending error
</A></li>
        <LI>Next message: <A HREF="022219.html">[rabbitmq-discuss] rabbitmq - simple message sending error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22218">[ date ]</a>
              <a href="thread.html#22218">[ thread ]</a>
              <a href="subject.html#22218">[ subject ]</a>
              <a href="author.html#22218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Or to put it more simple:
If you already have a queue, and you try to declare it again (which is ok),
you will have to make sure that you declare it with the same parameters. As
your stack trace shows, and as Mark mentions, in your case the
x-message-ttl is the parameter that differs.

I want to take to use the occasion to ask a question in this context:
For most of the parameters this is a good approach, but for some parameters
this can be a bit annoying, especially for the HA feature, where you
specify over which servers a queue is distributed. For the TTL it's a bit
similar
At least I feel sometimes that it would be good if the queue parameters
could be adjusted at runtime, that the mirroring could be changed at
runtime, without clients requiring an update.
The current approach we have taken is that clients don't define the queues
anymore, but they are managed externally. Which is not ideal either :-( If
anyone has a good recommendation, ideas, ... I would be interested to hear
them

Cheers
Maze


On Fri, Aug 31, 2012 at 7:15 PM, Mark Fisher &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">markfisher at vmware.com</A>&gt; wrote:

&gt;<i> The error message is showing that you are trying to declare a Queue where
</I>&gt;<i> the value for 'x-message-ttl' does not match that of an existing Queue with
</I>&gt;<i> the same name ('ml2gos_events').
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> *From: *&quot;Nadeem M Nayeck&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">nadeem.m.nayeck at gmail.com</A>&gt;
</I>&gt;<i> *To: *&quot;Discussions about RabbitMQ&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i> *Sent: *Friday, August 31, 2012 12:57:51 PM
</I>&gt;<i> *Subject: *[rabbitmq-discuss]  rabbitmq - simple message sending error
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> hi guys
</I>&gt;<i> I wrote a simple java client  sending a message to a queue on Rabbit
</I>&gt;<i> I get this:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> org.springframework.amqp.rabbit.connection.CachingConnectionFactory$CachedChannelInvocationHandler.invoke(CachingConnectionFactory.java:331)
</I>&gt;<i>     at $Proxy9.queueDeclare(Unknown Source)
</I>&gt;<i>     at
</I>&gt;<i> org.springframework.amqp.rabbit.core.RabbitAdmin.declareQueues(RabbitAdmin.java:342)
</I>&gt;<i>     at
</I>&gt;<i> org.springframework.amqp.rabbit.core.RabbitAdmin.access$200(RabbitAdmin.java:46)
</I>&gt;<i>     at
</I>&gt;<i> org.springframework.amqp.rabbit.core.RabbitAdmin$11.doInRabbit(RabbitAdmin.java:312)
</I>&gt;<i>     at
</I>&gt;<i> org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:600)
</I>&gt;<i>     ... 41 more
</I>&gt;<i> Caused by: com.rabbitmq.client.ShutdownSignalException: channel error;
</I>&gt;<i> reason: {#method&lt;channel.close&gt;(reply-code=406,
</I>&gt;<i> reply-text=PRECONDITION_FAILED - inequivalent arg 'x-message-ttl'for queue
</I>&gt;<i> 'ml2gos_events' in vhost 'OPLCPMED00': received none but current is the
</I>&gt;<i> value '86400000' of type 'long', class-id=50, method-id=10), null, &quot;&quot;}
</I>&gt;<i>     at
</I>&gt;<i> com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)
</I>&gt;<i>     at
</I>&gt;<i> com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)
</I>&gt;<i>     at
</I>&gt;<i> com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)
</I>&gt;<i>     at com.rabbitmq.client.impl.AMQChannel.privateRpc(AMQChannel.java:216)
</I>&gt;<i>     at
</I>&gt;<i> com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:118)
</I>&gt;<i>     ... 53 more
</I>&gt;<i> Caused by: com.rabbitmq.client.ShutdownSignalException: channel error;
</I>&gt;<i> reason: {#method&lt;channel.close&gt;(reply-code=406,
</I>&gt;<i> reply-text=PRECONDITION_FAILED - inequivalent arg 'x-message-ttl'for queue
</I>&gt;<i> 'ml2gos_events' in vhost 'OPLCPMED00': received none but current is the
</I>&gt;<i> value '86400000' of type 'long', class-id=50, method-id=10), null, &quot;&quot;}
</I>&gt;<i>     at com.rabbitmq.client.impl.ChannelN.asyncShutdown(ChannelN.java:454)
</I>&gt;<i>     at com.rabbitmq.client.impl.ChannelN.processAsync(ChannelN.java:294)
</I>&gt;<i>     at
</I>&gt;<i> com.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:144)
</I>&gt;<i>     at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:91)
</I>&gt;<i>     at
</I>&gt;<i> com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:519)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Any pointers?
</I>&gt;<i>
</I>&gt;<i> regards,
</I>&gt;<i> Nadeem
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120831/61303db3/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120831/61303db3/attachment.htm</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022217.html">[rabbitmq-discuss] rabbitmq - simple message sending error
</A></li>
	<LI>Next message: <A HREF="022219.html">[rabbitmq-discuss] rabbitmq - simple message sending error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22218">[ date ]</a>
              <a href="thread.html#22218">[ thread ]</a>
              <a href="subject.html#22218">[ subject ]</a>
              <a href="author.html#22218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
