<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] HA queue disappears when a node rejoins the	cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20HA%20queue%20disappears%20when%20a%20node%20rejoins%20the%0A%09cluster&In-Reply-To=%3CCAJ1JW0ffv3GOWZKi90usSHQx%2BjWW%2B8MgEq9t9RsmPPaxJmH5gw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022162.html">
   <LINK REL="Next"  HREF="022169.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] HA queue disappears when a node rejoins the	cluster</H1>
    <B>Matthias Reik</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20HA%20queue%20disappears%20when%20a%20node%20rejoins%20the%0A%09cluster&In-Reply-To=%3CCAJ1JW0ffv3GOWZKi90usSHQx%2BjWW%2B8MgEq9t9RsmPPaxJmH5gw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] HA queue disappears when a node rejoins the	cluster">matthias.reik at gmail.com
       </A><BR>
    <I>Wed Aug 29 13:29:31 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022162.html">[rabbitmq-discuss] HA queue disappears when a node rejoins	the	cluster
</A></li>
        <LI>Next message: <A HREF="022169.html">[rabbitmq-discuss] HA queue disappears when a node rejoins the	cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22164">[ date ]</a>
              <a href="thread.html#22164">[ thread ]</a>
              <a href="subject.html#22164">[ subject ]</a>
              <a href="author.html#22164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I had a potentially related case (sorry didn't read the full thread), so
might be of interest:

I upgraded to a new servers version, and forgot to copy the settings (from
etc/rabbitmq) to
the new version. The result was that even the rabbitmq-env.config was not
found (where we
define a non-standard location for mnesia) and the default location was
selected.

Of course the default location didn't have what we expected to find.
Downgrading solved
that problem (obviously). Therefore we now make sure to copy all files from
rabbitmq_server_abc/etc/rabbitmq to rabbitmq_server_xyz/etc/rabbitmq

Cheers
Matthias


On Wed, Aug 29, 2012 at 12:56 PM, Francesco Mazzoli
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">francesco at rabbitmq.com</A>&gt;wrote:

&gt;<i> Hi Matt,
</I>&gt;<i>
</I>&gt;<i> At Wed, 22 Aug 2012 15:06:42 -0700,
</I>&gt;<i> Matt Pietrek wrote:
</I>&gt;<i> &gt; I then take down the play node and start it back up. Afterwards, I force
</I>&gt;<i> &gt; everything to be synchronized by doing a management API 'get messages&quot;
</I>&gt;<i> with
</I>&gt;<i> &gt; requeue=True. When this completes, everything shows up synched as
</I>&gt;<i> expected.
</I>&gt;<i>
</I>&gt;<i> This should not happen.  Messages are requeued at the original position in
</I>&gt;<i> the
</I>&gt;<i> queue, see &lt;<A HREF="http://www.rabbitmq.com/semantics.html">http://www.rabbitmq.com/semantics.html</A>&gt;, and thus that has no
</I>&gt;<i> effect
</I>&gt;<i> to the syncing of slaves.  Republishing would.
</I>&gt;<i>
</I>&gt;<i> I tried to reproduce the problem following exactly what you did, with no
</I>&gt;<i> success.  Can you describe, in detail, your setup and the steps you're
</I>&gt;<i> taking to
</I>&gt;<i> reproduce that?  The most convenient thing would be to automate the
</I>&gt;<i> procedure in
</I>&gt;<i> a script.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Francesco * Often in error, never in doubt
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120829/ed553e5c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120829/ed553e5c/attachment.htm</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022162.html">[rabbitmq-discuss] HA queue disappears when a node rejoins	the	cluster
</A></li>
	<LI>Next message: <A HREF="022169.html">[rabbitmq-discuss] HA queue disappears when a node rejoins the	cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22164">[ date ]</a>
              <a href="thread.html#22164">[ thread ]</a>
              <a href="subject.html#22164">[ subject ]</a>
              <a href="author.html#22164">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
