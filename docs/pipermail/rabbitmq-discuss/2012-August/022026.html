<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Shovel terminated status
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20terminated%20status&In-Reply-To=%3C50341AD0.9050103%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022020.html">
   <LINK REL="Next"  HREF="022068.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Shovel terminated status</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20terminated%20status&In-Reply-To=%3C50341AD0.9050103%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Shovel terminated status">matthias at rabbitmq.com
       </A><BR>
    <I>Wed Aug 22 00:33:36 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022020.html">[rabbitmq-discuss] Shovel terminated status
</A></li>
        <LI>Next message: <A HREF="022068.html">[rabbitmq-discuss] Shovel terminated status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22026">[ date ]</a>
              <a href="thread.html#22026">[ thread ]</a>
              <a href="subject.html#22026">[ subject ]</a>
              <a href="author.html#22026">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Liz,

On 21/08/12 16:45, Elizabeth Liao wrote:
&gt;<i> Questions: In the documentation, it states that the timestamp from  $
</I>&gt;<i> rabbitmqctl eval 'rabbit_shovel_status:status().' is the time when
</I>&gt;<i> shovel entered the state.  I've observed this for the running and
</I>&gt;<i> starting state but not for the terminated state.  The timestamp for
</I>&gt;<i> the terminated state appears to be the current time.
</I>
Your config has a reconnect_delay of 1 (second), so when the shovel 
initialisation fails it will attempt to reconnect after one second, 
which puts the shovel in the 'starting' state, fail and go straight back 
to the 'terminated' state. Then one second later the same happens. And 
so on. Hence the moving timestamp.

&gt;<i> Additionally, it seems when a shovel is in the terminated state and
</I>&gt;<i> periodically trying to reconnect, there are many connections left
</I>&gt;<i> open with no active channels.
</I>
What exactly are you observing here? The number of connections returned 
by 'rabbitmqctl list_connections' at the broker the shovel is connecting to?

Btw, it would be good if you conducted your testing with the latest 
RabbitMQ version. Makes it easier for us to investigate any problems.


Regards,

Matthias.
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022020.html">[rabbitmq-discuss] Shovel terminated status
</A></li>
	<LI>Next message: <A HREF="022068.html">[rabbitmq-discuss] Shovel terminated status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22026">[ date ]</a>
              <a href="thread.html#22026">[ thread ]</a>
              <a href="subject.html#22026">[ subject ]</a>
              <a href="author.html#22026">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
