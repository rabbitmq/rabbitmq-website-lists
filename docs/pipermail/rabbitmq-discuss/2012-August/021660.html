<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Decoding header fields
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Decoding%20header%20fields&In-Reply-To=%3C02b601cd70b2%243e83d850%24bb8b88f0%24%40saseco.dk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021659.html">
   <LINK REL="Next"  HREF="021661.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Decoding header fields</H1>
    <B>Bernhard Mogens Ege</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Decoding%20header%20fields&In-Reply-To=%3C02b601cd70b2%243e83d850%24bb8b88f0%24%40saseco.dk%3E"
       TITLE="[rabbitmq-discuss] Decoding header fields">bme at saseco.dk
       </A><BR>
    <I>Thu Aug  2 14:25:06 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021659.html">[rabbitmq-discuss] Decoding header fields
</A></li>
        <LI>Next message: <A HREF="021661.html">[rabbitmq-discuss] Decoding header fields
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21660">[ date ]</a>
              <a href="thread.html#21660">[ thread ]</a>
              <a href="subject.html#21660">[ subject ]</a>
              <a href="author.html#21660">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I already said I was looking to send other types but started with a string.
That is contains a number is of no importance here.
But I did not expect that the string object would be received as a byte[]
object. But if that is how RabbitMQ is designed, so be it. 
It just doesn't make sense to me.

I'll try sending other types to see if they arrive as intended (int as int,
double as double, etc.).

[testing time passes]

It does appear that at least the type double does get passed through
unharmed. Only strings are passed as byte[]. 

Is  this be because RabbitMQ doesn't know the encoding to use when receiving
a string? If so, that would make sense. 
Hmm looking at WireFormatting.cs, UTF8 is already assumed when converting a
string to byte[]. Why not assume UTF8 
when receiving the byte[] and return a string instead of a byte[] (offending
method: ReadLongstr)?
-- 
Bernhard

-----Original Message-----
From: Emile Joubert [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>] 
Sent: 2. august 2012 15:06
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">bme at saseco.dk</A>; Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Decoding header fields

Hi,

On 01/08/12 12:07, Bernhard Mogens Ege wrote:
&gt;<i> sendMessage(&quot;myroutingkey&quot;, new Dictionary&lt;string, string&gt; { { 
</I>&gt;<i> &quot;languageid&quot;, &quot;1&quot; } }, null);
</I>
If you only ever send strings values then you will only ever receive byte
array values (via the intermediate 'S'-prefixed table value). See
Wireformatting.WriteFieldValue() and ReadFieldValue(). The string &quot;1&quot; is
still a string and won't automatically be recognised as a number.

If the producer sends other types of values then the consumer will receive
other types of values.

-Emile

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021659.html">[rabbitmq-discuss] Decoding header fields
</A></li>
	<LI>Next message: <A HREF="021661.html">[rabbitmq-discuss] Decoding header fields
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21660">[ date ]</a>
              <a href="thread.html#21660">[ thread ]</a>
              <a href="subject.html#21660">[ subject ]</a>
              <a href="author.html#21660">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
