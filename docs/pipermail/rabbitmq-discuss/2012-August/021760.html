<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20TCP%20Backpressure%20/%20Flow%20Control%20in%20C%23%0A%20producer&In-Reply-To=%3CF216F12DEE15B7429FB03C58643375521C4C3815%40AMXPRD0410MB377.eurprd04.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021758.html">
   <LINK REL="Next"  HREF="021761.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer</H1>
    <B>Ulli Berthold - Exactag GmbH</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20TCP%20Backpressure%20/%20Flow%20Control%20in%20C%23%0A%20producer&In-Reply-To=%3CF216F12DEE15B7429FB03C58643375521C4C3815%40AMXPRD0410MB377.eurprd04.prod.outlook.com%3E"
       TITLE="[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer">berthold at exactag.com
       </A><BR>
    <I>Wed Aug  8 09:03:45 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021758.html">[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
</A></li>
        <LI>Next message: <A HREF="021761.html">[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21760">[ date ]</a>
              <a href="thread.html#21760">[ thread ]</a>
              <a href="subject.html#21760">[ subject ]</a>
              <a href="author.html#21760">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matthias (german name?)

My problem is that we are talking web tracking here, so it's at least 500 events per second, originating from 4 different web servers running 8 threads each on average. Data stream will increase to over 3.000/s as soon as we can handle that load. The basic understanding so far was that rabbit would cache the message queue on disk when there is too much incoming data, so we could use the quieter night times to handle the data that didn't make it in time.

I didn't see an easy way to check the queue length, except maybe for rest requests?

With kind regards

Ulli

-----Urspr&#252;ngliche Nachricht-----
Von: Matthias Radestock [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>] 
Gesendet: Mittwoch, 8. August 2012 09:58
An: Ulli Berthold - Exactag GmbH
Cc: Discussions about RabbitMQ
Betreff: Re: AW: [rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer

Ulli,

On 08/08/12 08:51, Ulli Berthold - Exactag GmbH wrote:
&gt;<i> Well, because i got a producer that frequently puts more data into the 
</I>&gt;<i> queue than is processed at that time (will processed be at later, 
</I>&gt;<i> quieter, intervals though). Frequently that puts the producer into 
</I>&gt;<i> flow mode, slowing it down, which is not an option in our case. The 
</I>&gt;<i> producer has to be freed again within milliseconds to accept the next 
</I>&gt;<i> event. If the queue doesn't accept data as fast as I produce it I need 
</I>&gt;<i> to see that and switch over to an alternative (local file-based
</I>&gt;<i> cache) which again will be processed later.
</I>
I suggest you introduce a second thread and connect that to the producer thread via a one-place buffer or a queue data structure. The second thread pulls items off that queue and publishes them to RabbitMQ. The publisher thread can look at the queue's length before deciding whether to place another item in it or write to disk.

Matthias.


</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021758.html">[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
</A></li>
	<LI>Next message: <A HREF="021761.html">[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21760">[ date ]</a>
              <a href="thread.html#21760">[ thread ]</a>
              <a href="subject.html#21760">[ subject ]</a>
              <a href="author.html#21760">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
