<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Intermittent%20Problem%20-%202.8.5%20java%20client%0A%09hangs%20on%20declare%20exchange&In-Reply-To=%3C26603DCF-23C8-4883-A093-10D6D7CA14EC%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022088.html">
   <LINK REL="Next"  HREF="022092.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Intermittent%20Problem%20-%202.8.5%20java%20client%0A%09hangs%20on%20declare%20exchange&In-Reply-To=%3C26603DCF-23C8-4883-A093-10D6D7CA14EC%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange">steve at rabbitmq.com
       </A><BR>
    <I>Fri Aug 24 15:10:48 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022088.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs	on declare exchange
</A></li>
        <LI>Next message: <A HREF="022092.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22089">[ date ]</a>
              <a href="thread.html#22089">[ thread ]</a>
              <a href="subject.html#22089">[ subject ]</a>
              <a href="author.html#22089">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matthew,

It is hard to debug this without some Java information. Can you take a
jstack dump of the JVM BEFORE you kill it and AFTER it hangs? This will
give us some idea of what threads are waiting for what.

It is hard to see how this could happen if the connection has been
closed by the server, though it is not clear if the ERROR REPORT you
give is dated/timed after the Java Client has hung for a bit, or happens
before and CAUSES the hang. Can you determine which from the time of the
log entry?

We will endeavour to help.
All (aka Steve Powell---a happy bunny)
----------yet more definitions from the SPD----------
corrugate (n.) T.V. soap scandal.
olympic (n.) A camp road-digger.
jamboree (n.) A conserve made from French cheese.

On 24 Aug 2012, at 14:20, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">m.luchak at smartasking.com</A> wrote:

&gt;<i> Hi All,
</I>&gt;<i>  
</I>&gt;<i> We have a very annoying intermittent bug where our java client hangs when declaring an exchange.  We couldn't find a timeout or wait in the channel class... Is there a way to set/get a session timeout?
</I>&gt;<i>  
</I>&gt;<i> - No firewalls or load balancers
</I>&gt;<i> - Very low CPU and memory usage
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> =ERROR REPORT==== 24-Aug-2012::12:40:17 ===
</I>&gt;<i> closing AMQP connection &lt;0.22988.7&gt; (XXXXXXXX:28335 -&gt; XXXXXX:5672):
</I>&gt;<i> {inet_error,etimedout}
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> RabbitMQ Status:
</I>&gt;<i>  
</I>&gt;<i> [{pid,9764},
</I>&gt;<i> {running_applications,
</I>&gt;<i> [{rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;2.8.5&quot;},
</I>&gt;<i> {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;2.8.5&quot;},
</I>&gt;<i> {rabbitmq_stomp,&quot;Embedded Rabbit Stomp Adapter&quot;,&quot;2.8.5&quot;},
</I>&gt;<i> {rabbit,&quot;RabbitMQ&quot;,&quot;2.8.5&quot;},
</I>&gt;<i> {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.4.17&quot;},
</I>&gt;<i> {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.5&quot;},
</I>&gt;<i> {rabbitmq_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;2.8.5&quot;},
</I>&gt;<i> {webmachine,&quot;webmachine&quot;,&quot;1.9.1-rmq2.8.5-git52e62bc&quot;},
</I>&gt;<i> {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;2.3.1-rmq2.8.5-gitd541e9a&quot;},
</I>&gt;<i> {inets,&quot;INETS  CXC 138 49&quot;,&quot;5.5.2&quot;},
</I>&gt;<i> {xmerl,&quot;XML parser&quot;,&quot;1.2.8&quot;},
</I>&gt;<i> {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.9.3&quot;},
</I>&gt;<i> {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;2.8.5&quot;},
</I>&gt;<i> {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.17.3&quot;},
</I>&gt;<i> {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.14.3&quot;}]},
</I>&gt;<i> {os,{unix,linux}},
</I>&gt;<i> {erlang_version,
</I>&gt;<i> &quot;Erlang R14B02 (erts-5.8.3) [source] [64-bit] [rq:1] [async-threads:30] [kernel-poll:true]\n&quot;},
</I>&gt;<i> {memory,
</I>&gt;<i> [{total,41330968},
</I>&gt;<i> {processes,17077520},
</I>&gt;<i> {processes_used,16335960},
</I>&gt;<i> {system,24253448},
</I>&gt;<i> {atom,1537521},
</I>&gt;<i> {atom_used,1523741},
</I>&gt;<i> {binary,120088},
</I>&gt;<i> {code,17080343},
</I>&gt;<i> {ets,4172512}]},
</I>&gt;<i> {vm_memory_high_watermark,0.39999999935564245},
</I>&gt;<i> {vm_memory_limit,248309350},
</I>&gt;<i> {disk_free_limit,1000000000},
</I>&gt;<i> {disk_free,5325369344},
</I>&gt;<i> {file_descriptors,
</I>&gt;<i> [{total_limit,924},
</I>&gt;<i> {total_used,35},
</I>&gt;<i> {sockets_limit,829},
</I>&gt;<i> {sockets_used,15}]},
</I>&gt;<i> {processes,[{limit,1048576},{used,335}]},
</I>&gt;<i> {run_queue,0},
</I>&gt;<i> {uptime,1815593}]
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> thanks,
</I>&gt;<i>  
</I>&gt;<i> Matthew
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120824/1b9c1dc9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120824/1b9c1dc9/attachment.htm</A>&gt;
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022088.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs	on declare exchange
</A></li>
	<LI>Next message: <A HREF="022092.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22089">[ date ]</a>
              <a href="thread.html#22089">[ thread ]</a>
              <a href="subject.html#22089">[ subject ]</a>
              <a href="author.html#22089">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
