<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Dead Letter Routing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Dead%20Letter%20Routing&In-Reply-To=%3C50335BF9.5080208%40comarch.pl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021947.html">
   <LINK REL="Next"  HREF="021935.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Dead Letter Routing</H1>
    <B>Ernest Staszuk</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Dead%20Letter%20Routing&In-Reply-To=%3C50335BF9.5080208%40comarch.pl%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Dead Letter Routing">ernest.staszuk at comarch.pl
       </A><BR>
    <I>Tue Aug 21 10:59:21 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021947.html">[rabbitmq-discuss] RabbitMQ Dead Letter Routing
</A></li>
        <LI>Next message: <A HREF="021935.html">[rabbitmq-discuss] RabbitMQ as a service on Windows - setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22010">[ date ]</a>
              <a href="thread.html#22010">[ thread ]</a>
              <a href="subject.html#22010">[ subject ]</a>
              <a href="author.html#22010">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You could bind your reply queue to the dead-letter exchange and you should
receive it back. Unfortunately, this approach does not distinguish 
producers
and as consequence of this sends also messages that did not refer only to
particular senders. You could get around this by using parts of routing 
keys
dependent on who sent the message in the first place.

Regards,
Ernest Staszuk

W dniu 2012-08-16 11:17, Paul pisze:
&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I am hoping someone can help me out on this issue.
</I>&gt;<i>
</I>&gt;<i> I have got a typical setup of a async consumer, consuming from a 
</I>&gt;<i> Queue, and a async producer (with a reply_to queue set) producing to 
</I>&gt;<i> an exchange.
</I>&gt;<i>
</I>&gt;<i> I am facing the challenge of working with Dead Letter Queues and TTL.
</I>&gt;<i>
</I>&gt;<i> In a nutshell the producer needs a ways to determine if his/her 
</I>&gt;<i> message ended up dead (in the event the consumer is too slow or not 
</I>&gt;<i> &quot;alive&quot;). So this is what I have come up with but am struggling to 
</I>&gt;<i> implement it (it might be impossible).
</I>&gt;<i>
</I>&gt;<i> Producer produces the message (with a reply_to property) -&gt; Rabbit 
</I>&gt;<i> Expires the message based on the TTL -&gt; sends the message to a dead 
</I>&gt;<i> letter exchange -&gt; the exchange routes the message to the reply_to 
</I>&gt;<i> queue property on that message -&gt; the producer now consumers from that 
</I>&gt;<i> queue (the reply_to queue).
</I>&gt;<i>
</I>&gt;<i> Question... &quot;the exchange routes the message to the reply_to queue 
</I>&gt;<i> property on that message&quot;... is this possible and how?
</I>&gt;<i>
</I>&gt;<i> Any other suggestions on implementation or design which would meet my 
</I>&gt;<i> criteria would be greatly appreciated.
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120821/f5bace5c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120821/f5bace5c/attachment.htm</A>&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021947.html">[rabbitmq-discuss] RabbitMQ Dead Letter Routing
</A></li>
	<LI>Next message: <A HREF="021935.html">[rabbitmq-discuss] RabbitMQ as a service on Windows - setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22010">[ date ]</a>
              <a href="thread.html#22010">[ thread ]</a>
              <a href="subject.html#22010">[ subject ]</a>
              <a href="author.html#22010">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
