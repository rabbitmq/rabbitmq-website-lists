<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] C client questions . . .
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20C%20client%20questions%20.%20.%20.&In-Reply-To=%3CCALPqkiqNaQE38V3cBPnYrK%3D%3DHdArh2%2B1RVciaGk%3DFnRQ3QBikA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021978.html">
   <LINK REL="Next"  HREF="021965.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] C client questions . . .</H1>
    <B>Brett Cameron</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20C%20client%20questions%20.%20.%20.&In-Reply-To=%3CCALPqkiqNaQE38V3cBPnYrK%3D%3DHdArh2%2B1RVciaGk%3DFnRQ3QBikA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] C client questions . . .">brett.r.cameron at gmail.com
       </A><BR>
    <I>Fri Aug 17 21:01:00 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021978.html">[rabbitmq-discuss] C client questions . . .
</A></li>
        <LI>Next message: <A HREF="021965.html">[rabbitmq-discuss] C client questions . . .
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21962">[ date ]</a>
              <a href="thread.html#21962">[ thread ]</a>
              <a href="subject.html#21962">[ subject ]</a>
              <a href="author.html#21962">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jeff,

I'm sure Simon or Emile will correct me if I'm wrong, but I seem to recall
that the handshake timeout is currently hardwired in the broker to 10s. I
think there's also a SSL timeout of 5s. I've managed to hit one or both of
these limits when using a slow(ish) connection with SSL over the internet,
but have never hit it on the LAN, even with the broker managing many
thousands of simultaneous connections (all created literally one after the
other with no delay). Do you have any more details on your configuration?

Regards,
Brett

On Sat, Aug 18, 2012 at 2:40 AM, Alan Antonuk &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alan.antonuk at gmail.com</A>&gt;wrote:

&gt;<i> Jeff;
</I>&gt;<i>
</I>&gt;<i> Handshake timeout? I think that's what happens when the client opens a
</I>&gt;<i> socket (using amqp_open_socket) to the broker and doesn't complete the
</I>&gt;<i> handshake process (calling amqp_login) in a certain amount of time.  The
</I>&gt;<i> timeout is something set on the broker.
</I>&gt;<i>
</I>&gt;<i> I could imagine this sort of thing happening if for whatever reason the
</I>&gt;<i> handshake was delayed, or you open a bunch of sockets to the broker without
</I>&gt;<i> doing the handshake (calling amqp_login).  Other reasons why this could be
</I>&gt;<i> happening:
</I>&gt;<i> - The broker is too busy (I/O or CPU) to complete the handshake in enough
</I>&gt;<i> time (maybe you have a bunch of clients trying to connect at the same time?)
</I>&gt;<i> - There is a serious amount of network traffic preventing your clients
</I>&gt;<i> from getting to the broker.
</I>&gt;<i> - Something on the client side is really slowing down the handshake process
</I>&gt;<i>
</I>&gt;<i> Going to CC the rabbitmq-discuss list see if they have any ideas.
</I>&gt;<i>
</I>&gt;<i> -Alan
</I>&gt;<i>
</I>&gt;<i> On Fri, Aug 17, 2012 at 12:13 AM, Jeff Markham &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jmarkham at vmware.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Alan,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Was wondering if you might know of any circumstance that might cause the
</I>&gt;&gt;<i> the client to peg the broker.  At ~130 client connections, we see
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> =ERROR REPORT==== 14-Aug-2012::16:04:33 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.8196.3&gt; (1.1.1.1:63114 -&gt; 2.2.2.2:5671):
</I>&gt;&gt;<i> {handshake_timeout,handshake}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> in the logs and over and over until it consumes the entire memory of the
</I>&gt;&gt;<i> box.  Doesn't happen always but enough that we can't figure out what might
</I>&gt;&gt;<i> be causing this.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for everything.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://github.com/rabbitmq/rabbitmq-c">https://github.com/rabbitmq/rabbitmq-c</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jeff Markham
</I>&gt;&gt;<i> Senior Systems Engineer
</I>&gt;&gt;<i> vFabric Cloud Application Platform
</I>&gt;&gt;<i> VMware
</I>&gt;&gt;<i> (949) 385-3806
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120818/0b16b054/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120818/0b16b054/attachment.htm</A>&gt;
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021978.html">[rabbitmq-discuss] C client questions . . .
</A></li>
	<LI>Next message: <A HREF="021965.html">[rabbitmq-discuss] C client questions . . .
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21962">[ date ]</a>
              <a href="thread.html#21962">[ thread ]</a>
              <a href="subject.html#21962">[ subject ]</a>
              <a href="author.html#21962">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
