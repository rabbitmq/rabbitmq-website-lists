<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20TCP%20Backpressure%20/%20Flow%20Control%20in%20C%23%0A%20producer&In-Reply-To=%3C502228AE.3030608%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021763.html">
   <LINK REL="Next"  HREF="021767.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20TCP%20Backpressure%20/%20Flow%20Control%20in%20C%23%0A%20producer&In-Reply-To=%3C502228AE.3030608%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer">matthias at rabbitmq.com
       </A><BR>
    <I>Wed Aug  8 09:51:58 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021763.html">[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
</A></li>
        <LI>Next message: <A HREF="021767.html">[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21766">[ date ]</a>
              <a href="thread.html#21766">[ thread ]</a>
              <a href="subject.html#21766">[ subject ]</a>
              <a href="author.html#21766">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ulli,

On 08/08/12 09:35, Ulli Berthold - Exactag GmbH wrote:
&gt;<i> Rabbit does handle it, yes, but it slows down the inbound messages at
</I>&gt;<i> some point (like several million messages in queue, with lots of disk
</I>&gt;<i> space still available).
</I>
With several million messages in the queue you may be hitting the memory 
limit - the rabbit logs should tell you. Messages have some in-memory 
footprint *even when paged to disk*.

&gt;<i> We would love a way to disable (or better, suppress) the whole
</I>&gt;<i> backpressure system until the server is really at its memory and disk
</I>&gt;<i> limit.
</I>
Significant durations of backpressure should only occur when the broker 
is getting close to the configured limits. You may want to adjust the 
limits though, as per the docs.

Btw, you are running rabbit 2.8.x, right? Flow control in that is much 
improved over earlier version.

Also, if you are on Windows, make sure you run the 64-bit version of 
Erlang R15B01, otherwise memory will be capped at 2GB.

&gt;<i> an alternative to just know when backpressure is applied would help
</I>&gt;<i> us too because we could temporarily send the next messages through an
</I>&gt;<i> alternate route.
</I>
What I proposed is precisely that - a way to detect backpressure.

&gt;<i> An in-program queue would definitely increase complexity almost
</I>&gt;<i> beyond the point of usefulness of the queueing system - why use an
</I>&gt;<i> existing one if I got to build one anyways?
</I>
We are talking fifty lines of code here, most of which are boilerplate.

Matthias.
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021763.html">[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
</A></li>
	<LI>Next message: <A HREF="021767.html">[rabbitmq-discuss] TCP Backpressure / Flow Control in C# producer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21766">[ date ]</a>
              <a href="thread.html#21766">[ thread ]</a>
              <a href="subject.html#21766">[ subject ]</a>
              <a href="author.html#21766">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
