<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ application failover/recovery in HA	cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20application%20failover/recovery%20in%20HA%0A%09cluster&In-Reply-To=%3C1C9888BB42C16344B1C280C07DC8D78D03FA64EF%40INWPIEXC01.SATS.CORP%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021892.html">
   <LINK REL="Next"  HREF="021925.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ application failover/recovery in HA	cluster</H1>
    <B>Wax, Edward</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20application%20failover/recovery%20in%20HA%0A%09cluster&In-Reply-To=%3C1C9888BB42C16344B1C280C07DC8D78D03FA64EF%40INWPIEXC01.SATS.CORP%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ application failover/recovery in HA	cluster">edward.wax at troppussoftware.com
       </A><BR>
    <I>Wed Aug 15 14:44:52 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021892.html">[rabbitmq-discuss] RabbitMQ cluster on a single machine, OSX Lion, Homebrew
</A></li>
        <LI>Next message: <A HREF="021925.html">[rabbitmq-discuss] RabbitMQ application failover/recovery in HA cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21888">[ date ]</a>
              <a href="thread.html#21888">[ thread ]</a>
              <a href="subject.html#21888">[ subject ]</a>
              <a href="author.html#21888">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am implementing a .NET WCF ActiveDuplex service with RabbitMQ under the covers for messaging purposes.   I am using the asynchronous message pattern of publish/subscribe within the ActiveDuplex service, which includes callbacks to the originating client.



There are 2 parts to the equation:  (a) our implementation of the WCF ActiveDuplex interface and (b) the RabbitMQ failover/recovery strategy.  I was hoping you could help with the RabbitMQ part of the equation.



Our previous implementation of RabbitMQ consisted of a Pacemaker active/passive HA cluster with two nodes, and a SAN disk for shared storage. We would connect to the cluster virtual IP for all RabbitMQ transactions, and the HA features of Pacemaker would manage resource failures automatically with the net effect that consumers could complete a RabbitMQ session without interruption.



We recently moved to a RabbitMQ Cluster as recommended in the Clustering Guide at <A HREF="http://www.rabbitmq.com/clustering.html">http://www.rabbitmq.com/clustering.html</A> , where multiple RabbitMQ servers are arranged in an Active/Active fashion.  In doing so we gain the benefits of a true HA environment but we have lost the ability to seamlessly recover from RabbitMQ failures, previously provided by the Pacemaker infrastructure (the single virtual IP).   I've reviewed your .NET documentation and see there are references to the various shutdown protocols.  Do you have more specific documentation that would elaborate on these and provide examples on how we can manage our client connections in this HA environment (e.g. if I receive a ModelShutdown event, what steps do I need to go through in order to &quot;transfer&quot; a RabbitMQ session to a new connection).  Or are there other &quot;management&quot; APIs that should be used instead?



I've also been looking the book, RabbitMQ In Action, and a section on application failure and recovery (6.2) sounds almost as simple as wrapping the consumer/producer code in a try/catch block.



Any thoughts would be appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120815/a7c51e04/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120815/a7c51e04/attachment.htm</A>&gt;
</PRE>












































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021892.html">[rabbitmq-discuss] RabbitMQ cluster on a single machine, OSX Lion, Homebrew
</A></li>
	<LI>Next message: <A HREF="021925.html">[rabbitmq-discuss] RabbitMQ application failover/recovery in HA cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21888">[ date ]</a>
              <a href="thread.html#21888">[ thread ]</a>
              <a href="subject.html#21888">[ subject ]</a>
              <a href="author.html#21888">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
