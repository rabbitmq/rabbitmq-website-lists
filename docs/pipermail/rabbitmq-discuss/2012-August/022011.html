<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Per-Connection Flow Control -- The Verdict
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Per-Connection%20Flow%20Control%20--%20The%20Verdict&In-Reply-To=%3C50336626.9040808%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022008.html">
   <LINK REL="Next"  HREF="022017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Per-Connection Flow Control -- The Verdict</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Per-Connection%20Flow%20Control%20--%20The%20Verdict&In-Reply-To=%3C50336626.9040808%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Per-Connection Flow Control -- The Verdict">simon at rabbitmq.com
       </A><BR>
    <I>Tue Aug 21 11:42:46 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022008.html">[rabbitmq-discuss] Per-Connection Flow Control -- The Verdict
</A></li>
        <LI>Next message: <A HREF="022017.html">[rabbitmq-discuss] How many queues can one broker support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22011">[ date ]</a>
              <a href="thread.html#22011">[ thread ]</a>
              <a href="subject.html#22011">[ subject ]</a>
              <a href="author.html#22011">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/08/12 07:12, Chip Salzenberg wrote:
&gt;<i> In a very large prod environment, we have downgraded to 2.7.1 to
</I>&gt;<i> escape the flow control misfeature.  It's just not sane.
</I>&gt;<i>
</I>&gt;<i> We are considering more drastic options going forward.
</I>&gt;<i>
</I>&gt;<i> Please give us a flow control switch to turn off.  We just don't want it.
</I>
Hi Chip. Please don't think us unresponsive to your concerns, but:

When we last spoke about this, there was some unfortunate prioritisation 
going on in the queue process which led to queues staying empty when 
there were large numbers of consumers combined with a low prefetch 
count. This was fixed in 2.8.3. So for your situation:

2.7.1     -&gt; messages queue up in the channel process in the server
2.8.{012} -&gt; producers frequently block
2.8.3+    -&gt; messages queue up in the queue, where they belong

Did you end up trying 2.8.3 or later? If you had problems with flow 
control on 2.8.3 or later then I am very interested in hearing about 
them - flow control should only come on when you are publishing faster 
than RabbitMQ can really accept messages; to turn it off would lead to 
memory use rapidly reaching for the sky in these scenarios.

So I'm reluctant to provide a switch to turn it off since I'm not 
convinced there are situations where this would be useful. I could be 
convinced, of course, but I haven't yet seen a good reason.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>

































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022008.html">[rabbitmq-discuss] Per-Connection Flow Control -- The Verdict
</A></li>
	<LI>Next message: <A HREF="022017.html">[rabbitmq-discuss] How many queues can one broker support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22011">[ date ]</a>
              <a href="thread.html#22011">[ thread ]</a>
              <a href="subject.html#22011">[ subject ]</a>
              <a href="author.html#22011">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
