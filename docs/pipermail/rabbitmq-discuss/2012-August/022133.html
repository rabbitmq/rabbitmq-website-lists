<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: Excessive memory consumption of one server in cluster setup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Fwd%3A%20Excessive%20memory%20consumption%20of%20one%0A%20server%20in%20cluster%20setup&In-Reply-To=%3C503B9E85.3090003%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022132.html">
   <LINK REL="Next"  HREF="022137.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: Excessive memory consumption of one server in cluster setup</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Fwd%3A%20Excessive%20memory%20consumption%20of%20one%0A%20server%20in%20cluster%20setup&In-Reply-To=%3C503B9E85.3090003%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Fwd: Excessive memory consumption of one server in cluster setup">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Aug 27 17:21:25 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022132.html">[rabbitmq-discuss] Fwd: Excessive memory consumption of one server in cluster setup
</A></li>
        <LI>Next message: <A HREF="022137.html">[rabbitmq-discuss] Fwd: Excessive memory consumption of one server in cluster setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22133">[ date ]</a>
              <a href="thread.html#22133">[ thread ]</a>
              <a href="subject.html#22133">[ subject ]</a>
              <a href="author.html#22133">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michael,

On 27/08/12 16:53, Laing, Michael P. wrote:
&gt;<i> I have not yet run into this issue but I have a question:
</I>&gt;<i>
</I>&gt;<i> Would it be appropriate to use 'rabbitmqctl set_vm_memory_high_watermark'
</I>&gt;<i> to a low value to temporarily pause publishers, then restart the cluster
</I>&gt;<i> nodes, and then reset to the normal value?
</I>
Yes, that should work, i.e. you could lower the threshold on all nodes, 
wait for a bit to let the broker work through any backlog, then bounce 
individual nodes.

Note that restarting a node will reset the threshold, but since network 
listeners only get enabled after queue slave initialisation has 
completed that should be fine.

The only time that doesn't work is when you bring down an entire cluster 
and then start it back up. There you'd have to lower the threshold on 
the first node that comes up before starting any subsequent nodes.

Regards,

Matthias.
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022132.html">[rabbitmq-discuss] Fwd: Excessive memory consumption of one server in cluster setup
</A></li>
	<LI>Next message: <A HREF="022137.html">[rabbitmq-discuss] Fwd: Excessive memory consumption of one server in cluster setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22133">[ date ]</a>
              <a href="thread.html#22133">[ thread ]</a>
              <a href="subject.html#22133">[ subject ]</a>
              <a href="author.html#22133">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
