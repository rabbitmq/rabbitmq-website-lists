<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Timeout for hung connection on rabbitmq	server?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Timeout%20for%20hung%20connection%20on%20rabbitmq%0A%09server%3F&In-Reply-To=%3C87fw7qpz8q.wl%25francesco%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021827.html">
   <LINK REL="Next"  HREF="021829.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Timeout for hung connection on rabbitmq	server?</H1>
    <B>Francesco Mazzoli</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Timeout%20for%20hung%20connection%20on%20rabbitmq%0A%09server%3F&In-Reply-To=%3C87fw7qpz8q.wl%25francesco%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Timeout for hung connection on rabbitmq	server?">francesco at rabbitmq.com
       </A><BR>
    <I>Mon Aug 13 16:50:45 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021827.html">[rabbitmq-discuss] Timeout for hung connection on rabbitmq server?
</A></li>
        <LI>Next message: <A HREF="021829.html">[rabbitmq-discuss] Queue Message Count in C#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21835">[ date ]</a>
              <a href="thread.html#21835">[ thread ]</a>
              <a href="subject.html#21835">[ subject ]</a>
              <a href="author.html#21835">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Andrew,

At Mon, 13 Aug 2012 14:08:09 +0200,
Andrew McGill wrote:
&gt;<i>  * Is there a way to set the timeout value for a failed keepalive (assuming
</I>&gt;<i>    keepalive packets are in fact being sent... I see the default tcp timeout
</I>&gt;<i>    for Linux is two hours + 11 minutes, which is not quite what I need.)
</I>
Rabbit does not do anything to enable/disable TCP keepalives or change the
default values (also because per-socket tuning is not simple in everything but
Linux).  You can enable them via `tcp_listen_options', as you're correctly
doing.  To tune the keepalive parameters you must change them system-wide (see
<A HREF="http://www.tldp.org/HOWTO/html_single/TCP-Keepalive-HOWTO/">http://www.tldp.org/HOWTO/html_single/TCP-Keepalive-HOWTO/</A> for some guidance).

However, AMQP itself provides a simpler solution to your problem: heartbeats -
see the `tune-ok' frame
&lt;<A HREF="http://www.rabbitmq.com/amqp-0-9-1-reference.html#connection.tune-ok">http://www.rabbitmq.com/amqp-0-9-1-reference.html#connection.tune-ok</A>&gt;.  On most
clients the heartbeats will be configurable when opening an AMQP connection.

&gt;<i>  * Alternatively, is there something in this configuration which will stop
</I>&gt;<i>    keepalive from noticing that a connection has died?  (e.g. something to do
</I>&gt;<i>    with the SSL connection parameters?)
</I>
Not that I can see.

&gt;<i>  * Even more alternatively, is there some way that the newest client
</I>&gt;<i>    connection can identify itself as the best and most suitable instance of
</I>&gt;<i>    itself when it makes the new connection?
</I>
It's not entirely clear to me what you mean here, but I'm reading it as
permitting connection to identify themselves as current incarnations of
previous, dead connections.  In that case, the answer is no.

--
Francesco * Often in error, never in doubt
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021827.html">[rabbitmq-discuss] Timeout for hung connection on rabbitmq server?
</A></li>
	<LI>Next message: <A HREF="021829.html">[rabbitmq-discuss] Queue Message Count in C#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21835">[ date ]</a>
              <a href="thread.html#21835">[ thread ]</a>
              <a href="subject.html#21835">[ subject ]</a>
              <a href="author.html#21835">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
