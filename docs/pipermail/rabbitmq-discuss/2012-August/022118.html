<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Intermittent%20Problem%20-%202.8.5%20java%20client%0A%09hangs%20on%20declare%20exchange&In-Reply-To=%3C1345843700.011921319%40apps.rackspace.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022117.html">
   <LINK REL="Next"  HREF="022090.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange</H1>
    <B>m.luchak at smartasking.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Intermittent%20Problem%20-%202.8.5%20java%20client%0A%09hangs%20on%20declare%20exchange&In-Reply-To=%3C1345843700.011921319%40apps.rackspace.com%3E"
       TITLE="[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange">m.luchak at smartasking.com
       </A><BR>
    <I>Fri Aug 24 22:28:20 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022117.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs on declare exchange
</A></li>
        <LI>Next message: <A HREF="022090.html">[rabbitmq-discuss] Possible disconnected queue?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22118">[ date ]</a>
              <a href="thread.html#22118">[ thread ]</a>
              <a href="subject.html#22118">[ subject ]</a>
              <a href="author.html#22118">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Matthias,
 
I didn't believe it at first either ;) Our java lead got a little pissed as I kept demanding proof that it was the same connection hehe... there are seperate channels on one connection...
 
brilliant - async it is for now... I really need to remove this showstopper and come back to the cause later - crashes aren't good, but, having someone's phone just hang there is a killer!!  As the exchanges are getting created 100% of the time I can live without a reply..
 
thanks for all your help,
Matthew
 
-----Original Message-----
From: &quot;Matthias Radestock&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;
Sent: Friday, August 24, 2012 5:08pm
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">m.luchak at smartasking.com</A>
Cc: &quot;Discussions about RabbitMQ&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs on declare exchange



Matthew,

On 24/08/12 21:49, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">m.luchak at smartasking.com</A> wrote:
&gt;<i> While the client wait() is well, waiting, the device receives incoming
</I>&gt;<i> messages - so there is a connection and the heartbeat is running
</I>&gt;<i> normally and happily.
</I>
The latter is on a different connection though, right? i.e. you are not 
receiving messages on the same connection that has a stuck 
exchange.declare, are you? That would be odder still.

&gt;<i> BTW, In the Javadocs there is an Exchange.Declare with a nowait boolean :
</I>&gt;<i>
</I>&gt;<i> AMQImpl.Exchange.Declare(int ticket, java.lang.String exchange,
</I>&gt;<i> java.lang.String type, boolean passive, boolean durable, boolean
</I>&gt;<i> autoDelete, boolean internal, boolean nowait,
</I>&gt;<i> java.util.Map&lt;java.lang.String,java.lang.Object&gt; arguments)
</I>&gt;<i>
</I>&gt;<i> However, this option is not available in the 2.8.1 or 2.8.6 .jar files
</I>&gt;<i> or source files... can anyone tell me if this overide is in a  nightly
</I>&gt;<i> build and/or if it's irrelevant to the task at hand?
</I>
Most synchronous AMQP commands have an async variant, triggered by 
setting the nowait flag. We don't expose convenience methods for that in 
the API but you can use Channel.asyncRpc(Method method) to send commands 
like that, e.g.

import com.rabbitmq.client.impl.AMQImpl.Exchange;

 channel.asyncRpc(new Exchange.Declare.Builder()
 .exchange(&quot;myexchange&quot;)
 .type(&quot;direct&quot;)
 .nowait(true)
 .build());

Matthias.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120824/76d44ad7/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120824/76d44ad7/attachment.htm</A>&gt;
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022117.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs on declare exchange
</A></li>
	<LI>Next message: <A HREF="022090.html">[rabbitmq-discuss] Possible disconnected queue?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22118">[ date ]</a>
              <a href="thread.html#22118">[ thread ]</a>
              <a href="subject.html#22118">[ subject ]</a>
              <a href="author.html#22118">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
