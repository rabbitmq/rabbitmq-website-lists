<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ crash due to out of memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20crash%20due%20to%20out%20of%20memory&In-Reply-To=%3CBCC407A444557E41B0D8B0260D68499205566792%40CA1EXCLV07.adcorp.kla-tencor.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022196.html">
   <LINK REL="Next"  HREF="022158.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ crash due to out of memory</H1>
    <B>Chen, Bin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20crash%20due%20to%20out%20of%20memory&In-Reply-To=%3CBCC407A444557E41B0D8B0260D68499205566792%40CA1EXCLV07.adcorp.kla-tencor.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ crash due to out of memory">Bin.Chen at kla-tencor.com
       </A><BR>
    <I>Tue Aug 28 21:40:49 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022196.html">[rabbitmq-discuss] RabbitMQ collectd monitoring plugin
</A></li>
        <LI>Next message: <A HREF="022158.html">[rabbitmq-discuss] RabbitMQ crash due to out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22157">[ date ]</a>
              <a href="thread.html#22157">[ thread ]</a>
              <a href="subject.html#22157">[ subject ]</a>
              <a href="author.html#22157">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

 

We recently experienced crashes on 3 RabbitMQ servers.  The  first part
of one dump file is attached.

The Application Error event in Windows event log is also attached.

 

We are using 3 RabbitMQ servers to serve around 240 nodes. Each node has
12 services (clients).

On average, each server serves about 960 clients.

 

The version is RabbitMQ 2.8.4 on Erlang R15B01.

 

We have increased the limit of file descriptors, socket descriptors to
the maximum values.

The high memory watermark was set to 1.6 GB. See the attached picture.

Usually the memory used is just a few hundred MB, saying &lt; 800 MB. We've
never seen it more than 1 GB.

 

Do you have any idea why out of memory happened? Is there any suggestion
to prevent this from happening again.

 

 

We were using version 2.7.1 on Erlang R14B02 before, and we had never
encountered out of memory crash issue.

 

 

Best regards,

--Bin Chen

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120828/9945b059/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120828/9945b059/attachment.htm</A>&gt;
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: crash_dump.txt
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120828/9945b059/attachment.txt">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120828/9945b059/attachment.txt</A>&gt;
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: App-error.txt
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120828/9945b059/attachment-0001.txt">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120828/9945b059/attachment-0001.txt</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rmq-status.JPG
Type: image/jpeg
Size: 20500 bytes
Desc: rmq-status.JPG
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120828/9945b059/attachment.jpeg">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120828/9945b059/attachment.jpeg</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022196.html">[rabbitmq-discuss] RabbitMQ collectd monitoring plugin
</A></li>
	<LI>Next message: <A HREF="022158.html">[rabbitmq-discuss] RabbitMQ crash due to out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22157">[ date ]</a>
              <a href="thread.html#22157">[ thread ]</a>
              <a href="subject.html#22157">[ subject ]</a>
              <a href="author.html#22157">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
