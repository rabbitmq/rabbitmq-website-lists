<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Non-blocking Consumers approach
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Non-blocking%20Consumers%20approach&In-Reply-To=%3C503B74F7.6040700%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022125.html">
   <LINK REL="Next"  HREF="022134.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Non-blocking Consumers approach</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Non-blocking%20Consumers%20approach&In-Reply-To=%3C503B74F7.6040700%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Non-blocking Consumers approach">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Aug 27 14:24:07 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022125.html">[rabbitmq-discuss] Non-blocking Consumers approach
</A></li>
        <LI>Next message: <A HREF="022134.html">[rabbitmq-discuss] Non-blocking Consumers approach
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22126">[ date ]</a>
              <a href="thread.html#22126">[ thread ]</a>
              <a href="subject.html#22126">[ subject ]</a>
              <a href="author.html#22126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mahesh,

On 27/08/12 13:37, Mahesh Viraktamath wrote:
&gt;<i> I read the API guide and still stuck to the QueuingConsumer, for each
</I>&gt;<i> incoming message I create a new service thread (with common channel,
</I>&gt;<i> without that the service won't know which message to acknowledge). But
</I>&gt;<i> in the guide, it is mentioned that the channel should be created for
</I>&gt;<i> each thread. Now, my question is does this guide assumes that we run
</I>&gt;<i> different consumer threads? *I can't understand the concept of different
</I>&gt;<i> consumer threads*. I run a single consumer and use basicConsume() to
</I>&gt;<i> listen to the messages and each message (nextDelivery()) will give rise
</I>&gt;<i> to a new service thread. Again, each message creating a thread is scary !
</I>&gt;<i>
</I>&gt;<i> If it helps, I am running the consumer as a java application and use
</I>&gt;<i> basicConsume() and nextDelivery() in a while loop to process the
</I>&gt;<i> messages. Our application sends messages to these non-stop. So, I am
</I>&gt;<i> looking for a consumer which will not block the incoming messages when
</I>&gt;<i> it is processing a large message.
</I>
I suggest you create N channels and for each channel:
- set the basic.qos prefetch to 1 or some other low-ish value (for fair 
dispatch)
- create a consumer as shown in 
<A HREF="http://www.rabbitmq.com/api-guide.html#consuming">http://www.rabbitmq.com/api-guide.html#consuming</A>

You write above that you only have one channel because &quot;without that the 
service won't know which message to acknowledge&quot;, but the channel is 
accessible via the context (as shown in the example), so there is no 
ambiguity.

Obviously message ordering goes out of the window, but that's the case 
for any scheme where messages are handled by multiple threads.

Regards,

Matthias.
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022125.html">[rabbitmq-discuss] Non-blocking Consumers approach
</A></li>
	<LI>Next message: <A HREF="022134.html">[rabbitmq-discuss] Non-blocking Consumers approach
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22126">[ date ]</a>
              <a href="thread.html#22126">[ thread ]</a>
              <a href="subject.html#22126">[ subject ]</a>
              <a href="author.html#22126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
