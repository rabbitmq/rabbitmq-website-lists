<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Non-blocking Consumers approach
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Non-blocking%20Consumers%20approach&In-Reply-To=%3CCAPrynAXK5svpkPO5%3D0qYub6gifzfqFpSPTPkYMdDJT6bZ5rUpQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022122.html">
   <LINK REL="Next"  HREF="022126.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Non-blocking Consumers approach</H1>
    <B>Mahesh Viraktamath</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Non-blocking%20Consumers%20approach&In-Reply-To=%3CCAPrynAXK5svpkPO5%3D0qYub6gifzfqFpSPTPkYMdDJT6bZ5rUpQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Non-blocking Consumers approach">yuva670 at gmail.com
       </A><BR>
    <I>Mon Aug 27 13:37:19 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022122.html">[rabbitmq-discuss] Non-blocking Consumers approach
</A></li>
        <LI>Next message: <A HREF="022126.html">[rabbitmq-discuss] Non-blocking Consumers approach
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22125">[ date ]</a>
              <a href="thread.html#22125">[ thread ]</a>
              <a href="subject.html#22125">[ subject ]</a>
              <a href="author.html#22125">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Tim,

I read the API guide and still stuck to the QueuingConsumer, for each
incoming message I create a new service thread (with common channel,
without that the service won't know which message to acknowledge). But in
the guide, it is mentioned that the channel should be created for each
thread. Now, my question is does this guide assumes that we run different
consumer threads? *I can't understand the concept of different consumer
threads*. I run a single consumer and use basicConsume() to listen to the
messages and each message (nextDelivery()) will give rise to a new service
thread. Again, each message creating a thread is scary !

If it helps, I am running the consumer as a java application and use
basicConsume() and nextDelivery() in a while loop to process the messages.
Our application sends messages to these non-stop. So, I am looking for a
consumer which will not block the incoming messages when it is processing a
large message.



-Mahesh

On Mon, Aug 27, 2012 at 2:47 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt; wrote:
&gt;<i> Hi Mahesh,
</I>&gt;<i>
</I>&gt;<i> On 27 Aug 2012, at 08:58, Mahesh Viraktamath wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We used RabbitMQ to implement a simple producer-consumer architecture.
</I>&gt;&gt;<i> It was fine until very recently, when we encountered the blocking
</I>&gt;&gt;<i> calls. I ran two nodes in a cluster; in cases where the consumer took
</I>&gt;&gt;<i> more than the usual time and all subsequent messages kept on waiting.
</I>&gt;&gt;<i> Then, I came to know that I used QueuingConsumer which is a blocking
</I>&gt;&gt;<i> architecture, now I know I have to use my own implementation of the
</I>&gt;&gt;<i> DefaultConsumer. But, I am clueless as to whether I should manage the
</I>&gt;&gt;<i> threading model or the RabbitMQ itself has any provision on that.
</I>&gt;&gt;<i> Another thing that is confusing is, whether we run different type of
</I>&gt;&gt;<i> consumers (with different duties) separately or we maintain a single
</I>&gt;&gt;<i> main class which will start consumers as the messages come in.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Have you read the API guide (<A HREF="http://www.rabbitmq.com/api-guide.html">http://www.rabbitmq.com/api-guide.html</A>) for
</I>details about threading and using your own executor service? That's
probably a good place to start. The latter question (about choosing how to
structure your code) is really something you'll have to decide yourself,
based on the responsibilities of each class and whether or not and to what
extent separation makes sense in the design.
&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Tim
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120827/74953d1a/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120827/74953d1a/attachment.htm</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022122.html">[rabbitmq-discuss] Non-blocking Consumers approach
</A></li>
	<LI>Next message: <A HREF="022126.html">[rabbitmq-discuss] Non-blocking Consumers approach
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22125">[ date ]</a>
              <a href="thread.html#22125">[ thread ]</a>
              <a href="subject.html#22125">[ subject ]</a>
              <a href="author.html#22125">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
