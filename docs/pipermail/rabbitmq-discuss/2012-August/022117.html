<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs on declare exchange
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Intermittent%20Problem%20-%202.8.5%20java%20client%0A%20hangs%20on%20declare%20exchange&In-Reply-To=%3C5037ED5C.1020104%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022116.html">
   <LINK REL="Next"  HREF="022118.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs on declare exchange</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Intermittent%20Problem%20-%202.8.5%20java%20client%0A%20hangs%20on%20declare%20exchange&In-Reply-To=%3C5037ED5C.1020104%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client hangs on declare exchange">matthias at rabbitmq.com
       </A><BR>
    <I>Fri Aug 24 22:08:44 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022116.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange
</A></li>
        <LI>Next message: <A HREF="022118.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22117">[ date ]</a>
              <a href="thread.html#22117">[ thread ]</a>
              <a href="subject.html#22117">[ subject ]</a>
              <a href="author.html#22117">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthew,

On 24/08/12 21:49, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">m.luchak at smartasking.com</A> wrote:
&gt;<i> While the client wait() is well, waiting, the device receives incoming
</I>&gt;<i> messages - so there is a connection and the heartbeat is running
</I>&gt;<i> normally and happily.
</I>
The latter is on a different connection though, right? i.e. you are not 
receiving messages on the same connection that has a stuck 
exchange.declare, are you? That would be odder still.

&gt;<i> BTW, In the Javadocs there is an Exchange.Declare with a nowait boolean :
</I>&gt;<i>
</I>&gt;<i> AMQImpl.Exchange.Declare(int ticket, java.lang.String exchange,
</I>&gt;<i> java.lang.String type, boolean passive, boolean durable, boolean
</I>&gt;<i> autoDelete, boolean internal, boolean nowait,
</I>&gt;<i> java.util.Map&lt;java.lang.String,java.lang.Object&gt; arguments)
</I>&gt;<i>
</I>&gt;<i> However, this option is not available in the 2.8.1 or 2.8.6 .jar files
</I>&gt;<i> or source files... can anyone tell me if this overide is in a  nightly
</I>&gt;<i> build and/or if it's irrelevant to the task at hand?
</I>
Most synchronous AMQP commands have an async variant, triggered by 
setting the nowait flag. We don't expose convenience methods for that in 
the API but you can use Channel.asyncRpc(Method method) to send commands 
like that, e.g.

import com.rabbitmq.client.impl.AMQImpl.Exchange;

         channel.asyncRpc(new Exchange.Declare.Builder()
                          .exchange(&quot;myexchange&quot;)
                          .type(&quot;direct&quot;)
                          .nowait(true)
                          .build());

Matthias.
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022116.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange
</A></li>
	<LI>Next message: <A HREF="022118.html">[rabbitmq-discuss] Intermittent Problem - 2.8.5 java client	hangs on declare exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22117">[ date ]</a>
              <a href="thread.html#22117">[ thread ]</a>
              <a href="subject.html#22117">[ subject ]</a>
              <a href="author.html#22117">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
