<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Using Pika's add_on_return_callback with a	BlockingConnection?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20Pika%27s%20add_on_return_callback%20with%20a%0A%09BlockingConnection%3F&In-Reply-To=%3CCACLE7iwSc-NCgfL_kG5H60VAny2yQ9Yu7r0dBNf%3DDR1RbSxWrg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021967.html">
   <LINK REL="Next"  HREF="021970.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Using Pika's add_on_return_callback with a	BlockingConnection?</H1>
    <B>Matt Pietrek</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20Pika%27s%20add_on_return_callback%20with%20a%0A%09BlockingConnection%3F&In-Reply-To=%3CCACLE7iwSc-NCgfL_kG5H60VAny2yQ9Yu7r0dBNf%3DDR1RbSxWrg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Using Pika's add_on_return_callback with a	BlockingConnection?">mpietrek at skytap.com
       </A><BR>
    <I>Fri Aug 17 23:52:49 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021967.html">[rabbitmq-discuss] Is Pika's add_on_return_callback supposed to be single use?
</A></li>
        <LI>Next message: <A HREF="021970.html">[rabbitmq-discuss] Using Pika's add_on_return_callback with a	BlockingConnection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21969">[ date ]</a>
              <a href="thread.html#21969">[ thread ]</a>
              <a href="subject.html#21969">[ subject ]</a>
              <a href="author.html#21969">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm got a scenario where I use a dedicated thread to write a series of
messages in a loop. This thread uses BlockingConnection, calls
add_on_return_callback for its channel, and when publishing, uses the
mandatory=True flag.

I want to know when a message is being returned. However, I can't figure
out what to call within my loop to give Pika the opportunity to see the
Basic.Return message and invoke the callback.

I've verified via WireShark that the Basic.Returns are coming back from the
broker. However, I can't figure out what the moral equivalent of calling
ioloop.start() is, so as to give Pika the an opportunity to process the
basic.return messages, but without blocking indefinitely. Just for kicks I
tried calling Channel.basic_get() within the loop, and (as expected), I
didn't get the returned message callbacks.

Thanks,

Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120817/14fe799f/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120817/14fe799f/attachment.htm</A>&gt;
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021967.html">[rabbitmq-discuss] Is Pika's add_on_return_callback supposed to be single use?
</A></li>
	<LI>Next message: <A HREF="021970.html">[rabbitmq-discuss] Using Pika's add_on_return_callback with a	BlockingConnection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21969">[ date ]</a>
              <a href="thread.html#21969">[ thread ]</a>
              <a href="subject.html#21969">[ subject ]</a>
              <a href="author.html#21969">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
