<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Disaster Recovery
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Disaster%20Recovery&In-Reply-To=%3CCAE0Sz%3DxC%3Da-oekV-xLy7QfFxWyTt0gNKd%3DvsRGYKf7OuNq1w3A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021720.html">
   <LINK REL="Next"  HREF="021721.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Disaster Recovery</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Disaster%20Recovery&In-Reply-To=%3CCAE0Sz%3DxC%3Da-oekV-xLy7QfFxWyTt0gNKd%3DvsRGYKf7OuNq1w3A%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Disaster Recovery">jerryk at rbcon.com
       </A><BR>
    <I>Tue Aug 14 17:02:53 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="021720.html">[rabbitmq-discuss] Disaster Recovery
</A></li>
        <LI>Next message: <A HREF="021721.html">[rabbitmq-discuss] Shovel Plugin: How to create an auto-delete	queue on source broker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21867">[ date ]</a>
              <a href="thread.html#21867">[ thread ]</a>
              <a href="subject.html#21867">[ subject ]</a>
              <a href="author.html#21867">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Ruben...

In terms of acceptable data loss, for our db&#8217;s we accept 15 minutes worth
&gt;<i> of data loss, the same level of tolerance would be acceptable for rabbitmq.
</I>&gt;<i>
</I>
Can you say more about the structure, both in physical terms and in
application terms, of your scenario?

First, I'm assuming you have RabbitMQ brokers or clusters thereof in two or
more geographically separated environments, along with whatever application
infrastructure is using them (e.g. databases) replicated, in whole or in
part, possibly modulo contents, at both sites?

What sort of work are your consumers doing in response to the messages they
consume?  Does it involve committing things to databases, causing side
effect-ish things to happen in the real world, etc.?

With some of those parameters specified a bit more tightly we can likely
provide guidance.  We've worked with Rabbit users in the past who use
shovel or federation between geographically separated sites to transmit
digests or summaries of started operations or finalized state in one site
to the other site.  Reviewing the properties of shovel and federation and
figuring out what sort of information your case would need to send to the
backup site as part of general operations is a good starting point.

For example, you might consider having the primary send copies of, or new
messages derived from, work requests at the primary site to the secondary
site, where they'll be logged somehow, likely preferably outside of Rabbit,
and left dormant, to be retired when a corresponding &quot;completed&quot; message is
generated at the primary.  Your 15 minute requirement would help you bound
just how much of this you'd need to store, and give you a basis for picking
at the secondary site after suspected or confirmed failure of the
primary...  You'd obviously want to favor a design with idempotency of the
messages so that things received twice don't have additional or different
effects from the thing received once, but this is a good idea even *within*
the sites on either end of your WAN connected systems...

Tell us more and let's digest your use case further... :-)

Best regards,
Jerry


 The assumption is that the failover will not be automatic but that it will
&gt;<i> have to be manually flipped to the DR site and that back ground processes
</I>&gt;<i> would have to be started up manually.
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Thanks,****
</I>&gt;<i>
</I>&gt;<i> Ruben.****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> *From:* <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] *On Behalf Of *Jerry Kuch
</I>&gt;<i> *Sent:* Friday, August 03, 2012 1:54 PM
</I>&gt;<i> *To:* Discussions about RabbitMQ
</I>&gt;<i> *Subject:* Re: [rabbitmq-discuss] Disaster Recovery****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Hi, Ruben:
</I>&gt;<i>
</I>&gt;<i> We have users that make use of Rabbit/AMQP messaging as part of cross-site
</I>&gt;<i> DR scenarios, but one has to be thoughtful about what one is trying to do.
</I>&gt;<i>
</I>&gt;<i> *What* is it that you want replicated between sites for DR?  Presumably
</I>&gt;<i> more than just broker and cluster configs and their metadata since that's
</I>&gt;<i> relatively straightforward...  Usually the question is what data, effects
</I>&gt;<i> and business processes do you want to be able to fail over to a
</I>&gt;<i> geographically separated site, and what sorts of guarantees do you want for
</I>&gt;<i> the failover.  This naturally affects the design of your application and
</I>&gt;<i> its deployment fairly intimately.
</I>&gt;<i>
</I>&gt;<i> If you feel comfortable talking more about what you want from your
</I>&gt;<i> scenario we can probably make some suggestions based on things we've seen
</I>&gt;<i> done...
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i> Jerry
</I>&gt;<i>
</I>&gt;<i> ****
</I>&gt;<i>
</I>&gt;<i> On Fri, Aug 3, 2012 at 11:29 AM, Ruben Rotteveel &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ruben at fiadmin.com</A>&gt;
</I>&gt;<i> wrote:****
</I>&gt;<i>
</I>&gt;<i> Hi All,****
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> What is your recommendation for how to  mirror a rabbitmq installation in
</I>&gt;<i> a DR site?****
</I>&gt;<i>
</I>&gt;<i>  ****
</I>&gt;<i>
</I>&gt;<i> Thanks,****
</I>&gt;<i>
</I>&gt;<i> Ruben Rotteveel****
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss****">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss****</A>
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120814/0682a9b6/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120814/0682a9b6/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021720.html">[rabbitmq-discuss] Disaster Recovery
</A></li>
	<LI>Next message: <A HREF="021721.html">[rabbitmq-discuss] Shovel Plugin: How to create an auto-delete	queue on source broker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21867">[ date ]</a>
              <a href="thread.html#21867">[ thread ]</a>
              <a href="subject.html#21867">[ subject ]</a>
              <a href="author.html#21867">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
