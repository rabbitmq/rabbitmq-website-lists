<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ memory management
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20memory%20management&In-Reply-To=269388e30809110414g5551be49of57af97fa4e36861%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001442.html">
   <LINK REL="Next"  HREF="001438.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ memory management</H1>
    <B>Eran Sandler</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20memory%20management&In-Reply-To=269388e30809110414g5551be49of57af97fa4e36861%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] RabbitMQ memory management">eran.sandler at gmail.com
       </A><BR>
    <I>Thu Sep 11 13:46:21 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001442.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
        <LI>Next message: <A HREF="001438.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1435">[ date ]</a>
              <a href="thread.html#1435">[ thread ]</a>
              <a href="subject.html#1435">[ subject ]</a>
              <a href="author.html#1435">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think. Thanks for the lengthy reply :-)


Since its open source I might be able to invest some time for things 
that will be relevant for us and I would probably benefit from learning 
Erlang more intimately as well as from your experience :-)


Regarding clustering, I have a question about that.

Configuring the clustering on the rabbitmq side is easy, but how it all 
translates on the client side?


Does the .NET client (or any other client for that matter) supports 
flipping between nodes on a cluster automagically or is it something 
that I need define by myself and tell it to connect to a different node 
in a cluster?


Eran


Ben Hood wrote:

&gt;<i> Eran,
</I>&gt;<i>
</I>&gt;<i> On Thu, Sep 11, 2008 at 7:23 AM, Eran Sandler &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">eran.sandler at gmail.com</A>&gt; wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> At some point the process that was suppose to read from it wasn't restarted
</I>&gt;&gt;<i> and the queue eventually kept on growing.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Yes, that's the point of a message queuing system :-)
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> When it reached a certain amount of memory it died because it couldn't
</I>&gt;&gt;<i> allocate more memory.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My question is, if no one reads from a persistent queue will rabbitmq simply
</I>&gt;&gt;<i> die?
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Yes, if the Rabbit eats too many carrots, it will die.
</I>&gt;<i>
</I>&gt;<i> Currently we have not implemented an administrative limit of queue
</I>&gt;<i> depths, so basically a queue will grow until the Erlang process cannot
</I>&gt;<i> allocate any more heap (if the queue is never drained), but this is
</I>&gt;<i> something that we are thinking about. This falls under the category of
</I>&gt;<i> broker management, for which there have been a few threads already.
</I>&gt;<i> This is on our radar, but due to limited resources, we cannot say when
</I>&gt;<i> we will get around to doing this.
</I>&gt;<i>
</I>&gt;<i> This also ties into message expiry, which would be a solution to this
</I>&gt;<i> problem, but alas, we haven't implemented the TTL property yet (due to
</I>&gt;<i> lack of resource and an ambiguous spec). Message expiry has been
</I>&gt;<i> discussed in other threads as well.
</I>&gt;<i>
</I>&gt;<i> This is also an item on our todo list, but we will need to be
</I>&gt;<i> convinced to prioritize this.
</I>&gt;<i>
</I>&gt;<i> So where does that leave you now?
</I>&gt;<i>
</I>&gt;<i> You've got 2 options:
</I>&gt;<i>
</I>&gt;<i> 1. Set the immediate flag when publishing a message. If this flag is
</I>&gt;<i> set, the message will not be queued, if it cannot be delivered to a
</I>&gt;<i> consumer, it will be discarded.
</I>&gt;<i>
</I>&gt;<i> 2. Cluster Rabbit, so that if an instance dies, you don't loose
</I>&gt;<i> complete availability.
</I>&gt;<i>
</I>&gt;<i> HTH,
</I>&gt;<i>
</I>&gt;<i> Ben
</I>&gt;<i>   
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080911/8bcd66a3/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080911/8bcd66a3/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001442.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
	<LI>Next message: <A HREF="001438.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1435">[ date ]</a>
              <a href="thread.html#1435">[ thread ]</a>
              <a href="subject.html#1435">[ subject ]</a>
              <a href="author.html#1435">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
