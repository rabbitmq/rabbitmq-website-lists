<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] fsync on OSX
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20fsync%20on%20OSX&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001355.html">
   <LINK REL="Next"  HREF="001358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] fsync on OSX</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20fsync%20on%20OSX&In-Reply-To="
       TITLE="[rabbitmq-discuss] fsync on OSX">0x6e6562 at gmail.com
       </A><BR>
    <I>Sat Sep  6 18:17:56 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001355.html">[rabbitmq-discuss] jon conway on web video and messaging
</A></li>
        <LI>Next message: <A HREF="001358.html">[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires installed	server code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1356">[ date ]</a>
              <a href="thread.html#1356">[ thread ]</a>
              <a href="subject.html#1356">[ subject ]</a>
              <a href="author.html#1356">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

Recently there was a discussion on #rabbitmq about OTP's usage of the
fsync syscall on OSX.

This was identified as an issue in the context of persistent queues,
because the sync call in OTP did not have the guarantee of full
synchronous persistence.

Now, thanks to Jan, this has been patched and has found its way into R12B-4:

OTP-7471  On Mac OS X, file:sync/1 now guarantees that all filesystem
	      buffers are written to the disk by using the fcntl() with
	      F_FULLFSYNC option. Previously, file:sync/1 called fsync(),
	      which only guaranteed that the data had been transferred to
	      the disk drive. (Thanks to Jan Lehnardt.)

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001355.html">[rabbitmq-discuss] jon conway on web video and messaging
</A></li>
	<LI>Next message: <A HREF="001358.html">[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires installed	server code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1356">[ date ]</a>
              <a href="thread.html#1356">[ thread ]</a>
              <a href="subject.html#1356">[ subject ]</a>
              <a href="author.html#1356">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
