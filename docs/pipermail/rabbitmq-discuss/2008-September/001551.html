<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] The relationship of Channels to Consumers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20The%20relationship%20of%20Channels%20to%20Consumers&In-Reply-To=8ca3fbe80809191134y4290d47ej1da8d96293e843e0%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001545.html">
   <LINK REL="Next"  HREF="001553.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] The relationship of Channels to Consumers</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20The%20relationship%20of%20Channels%20to%20Consumers&In-Reply-To=8ca3fbe80809191134y4290d47ej1da8d96293e843e0%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] The relationship of Channels to Consumers">0x6e6562 at gmail.com
       </A><BR>
    <I>Sat Sep 20 00:40:06 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001545.html">[rabbitmq-discuss] The relationship of Channels to Consumers
</A></li>
        <LI>Next message: <A HREF="001553.html">[rabbitmq-discuss] [Minimum Air Induction] Introducing Shovel:	An AMQP Relay
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1551">[ date ]</a>
              <a href="thread.html#1551">[ thread ]</a>
              <a href="subject.html#1551">[ subject ]</a>
              <a href="author.html#1551">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Anders,

On Fri, Sep 19, 2008 at 7:34 PM, anders conbere &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aconbere at gmail.com</A>&gt; wrote:
&gt;<i> When building consumers dynamically it's possible to either create a
</I>&gt;<i> new channel for them or to reuse an old one, or to use a pool of them.
</I>&gt;<i> I'm wondering if anyone knows any good practices for dealing with that
</I>&gt;<i> relationship. Is the building channel call expensive?
</I>
Not particularly, should scale quite well. Obviously there is a finite
cost, but this is a constant factor is probably negligible.

&gt;<i> Are channels
</I>&gt;<i> capable of handling multiple streams and thus a good fit for use
</I>&gt;<i> across many consumers.
</I>
If your consumers are read-only (see comments below), this will work.

You might want to consider the application semantics of connecting
multiple consumers to a single channel. By sharing a channel, you
automatically introduce an implicit binding between each consumer,
because any of them cause the channel to close (either by closing the
channel explicitly or in the case of an invalid command, the broker
may forcefully close the entire channel). You may want these
semantics, or you may not, it depends on your application.

I wouldn't bring it down to a decision based on cost though - as
indicated before, this is most probably going to be an insignificant
consideration.

&gt;<i>
</I>&gt;<i> As I understand it channels are processes on the server side that
</I>&gt;<i> store the state of the connection and help in some way with
</I>&gt;<i> communicating requests and responses. But beyond that I'm just not
</I>&gt;<i> clear about what to do with them.
</I>
The wisdom I'm trying to impart on what a channel is and how to use it
from a client perspective follows the logic that I'm describing in the
draft of an upcoming article (available soon, when I get my act
together):

[...]
Although this is not stated explicitly in the protocol, a channel is
the smallest unit of parallelism in AMQP. You should bind an AMQP
channel to a client thread, so a channel is managed as a thread-local
object.

In the AMQP protocol, channels were designed for multiplexing the
sending of multiple unrelated messages from within a single physical
transport, for example from within a single TCP connection. This
mechanism forms the basis of parallel execution of operations that use
a single AMQP client instance.
[...]

However, you are asking about read-only access, so thread safety from
a channel perspective should not be an issue.

Moreover, you are using Erlang, where thread safety is by and large an
non-issue anyway.

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001545.html">[rabbitmq-discuss] The relationship of Channels to Consumers
</A></li>
	<LI>Next message: <A HREF="001553.html">[rabbitmq-discuss] [Minimum Air Induction] Introducing Shovel:	An AMQP Relay
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1551">[ date ]</a>
              <a href="thread.html#1551">[ thread ]</a>
              <a href="subject.html#1551">[ subject ]</a>
              <a href="author.html#1551">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
