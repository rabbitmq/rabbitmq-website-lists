<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ memory management
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20memory%20management&In-Reply-To=269388e30809121130m4fb7f3d8la5314b0b8aa9846a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001470.html">
   <LINK REL="Next"  HREF="001472.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ memory management</H1>
    <B>Edwin Fine</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20memory%20management&In-Reply-To=269388e30809121130m4fb7f3d8la5314b0b8aa9846a%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] RabbitMQ memory management">rabbitmq-discuss_efine at usa.net
       </A><BR>
    <I>Fri Sep 12 21:02:27 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001470.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
        <LI>Next message: <A HREF="001472.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1471">[ date ]</a>
              <a href="thread.html#1471">[ thread ]</a>
              <a href="subject.html#1471">[ subject ]</a>
              <a href="author.html#1471">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ben,

Exact volumetrics are difficult to obtain. Averages don't mean much,
unfortunately, because when you look at the mean you also have to look at
the standard deviation, and the standard deviation in this case is I believe
- high. This is because the SMS vary widely in number and size, depending on
the content (&quot;Hello&quot; vs &quot;War and Peace &quot;;), the sending client and the type
of SMS (WAP push, plain text, proprietary attachments, etc). My
understanding is that the binary component of this (i.e. the sum total of
all messages if the exacty data as received over TCP/IP to a binary file)
would come to about 1 GB per day.

The million messages per day is in a way from day 1, since there is an
existing system handling this volume and the Erlang system I am writing is
replacing parts of it. However, only a fraction of that volume will come on
stream immediately; there will be a gradual cut-over once we are satisfied
with the functionality and performance, and we will monitor things to make
sure the system is coping before cutting over mroe clients.

At this stage of Real Life In Software Development (tm), I don't know
exactly how long the cutover will take or when it will start. In
business-driven things, I have learned to expect anything at any time and
not expect anything ever, if you get my drift. So it could happen in two
weeks or in 6 months. Sorry I can't be more precise, but with the &quot;luxury&quot;
of an existing system keeping the store going, the pressure to cut over is
driven by a number of factors over which I have no control and into which I
have little visibility. For example, if the company gets a large, rich, new
client tomorrow that MUST have the new functionality provided by the Erlang
system and wants to come on board starting yesterday (the usual scenario),
you can bet the cutover will be pretty soon ;-)

So it's a bit of a time bomb, but will not be the show-stopper I imagined,
because if the VM does crash for any reason, I will make sure it gets
restarted by a watchdog, so service won't be interrupted for long and nobody
besides myself and my client will know any better or even care. I'll also
have to make sure that my code notices that Rabbit died and reconnect when
it comes back up (which the code should be doing anyway). The worst that
will happen is that some in-flight messages that didn't make it to disk may
need to be re-sent.

I am not panicking, stuff happens, so I will wait until the desired
functionality is added and hope that YOU guys soon get a rich, impatient
client that wants this and can afford to pay for it right now. In the
meantime, I will probably just add some sort of disk spillover mechanism and
tell my client to get lots more memory for the production servers :) .

Bottom line: no serious worries. Let's work together on this as and when it
becomes a priority for you guys. I understand what it means to have limited
resources, and I really like your product and the way you support it, so
please don't stop and don't sweat it.

Regards,
Edwin

On Fri, Sep 12, 2008 at 2:30 PM, Ben Hood &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">0x6e6562 at gmail.com</A>&gt; wrote:

&gt;<i> Edwin,
</I>&gt;<i>
</I>&gt;<i> On Fri, Sep 12, 2008 at 6:36 PM, Edwin Fine
</I>&gt;<i> &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss_efine at usa.net</A>&gt; wrote:
</I>&gt;<i> &gt; So... in the absence of the &quot;feature&quot; discussed above, do you have any
</I>&gt;<i> &gt; suggestions as to how I can dig myself out of this hole (without using a
</I>&gt;<i> &gt; different m&amp;q system) ? :)
</I>&gt;<i>
</I>&gt;<i> Quick question: what are your exact volumetrics?
</I>&gt;<i>
</I>&gt;<i> You mentioned 1M SMS/day. Is this from day 1 or does this allow for
</I>&gt;<i> growth? And how big is the average SMS inclusive of all of the
</I>&gt;<i> application layer stuff you want to attach to each one?
</I>&gt;<i>
</I>&gt;<i> Ben
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080912/9bd28649/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080912/9bd28649/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001470.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
	<LI>Next message: <A HREF="001472.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1471">[ date ]</a>
              <a href="thread.html#1471">[ thread ]</a>
              <a href="subject.html#1471">[ subject ]</a>
              <a href="author.html#1471">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
