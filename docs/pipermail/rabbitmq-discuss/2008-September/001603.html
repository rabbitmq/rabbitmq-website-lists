<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Publish won't work without transaction?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Publish%20won%27t%20work%20without%20transaction%3F&In-Reply-To=84fb38e30809232003s7df1107doc3bd6f6377f40e53%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001601.html">
   <LINK REL="Next"  HREF="001611.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Publish won't work without transaction?</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Publish%20won%27t%20work%20without%20transaction%3F&In-Reply-To=84fb38e30809232003s7df1107doc3bd6f6377f40e53%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Publish won't work without transaction?">0x6e6562 at gmail.com
       </A><BR>
    <I>Wed Sep 24 08:06:19 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001601.html">[rabbitmq-discuss] Publish won't work without transaction?
</A></li>
        <LI>Next message: <A HREF="001611.html">[rabbitmq-discuss] Publish won't work without transaction?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1603">[ date ]</a>
              <a href="thread.html#1603">[ thread ]</a>
              <a href="subject.html#1603">[ subject ]</a>
              <a href="author.html#1603">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tsuraan,

On Wed, Sep 24, 2008 at 4:03 AM, tsuraan &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tsuraan at gmail.com</A>&gt; wrote:
&gt;<i> Where are
</I>&gt;<i> things like the no_ack option on py-amqplib's basic_consume
</I>&gt;<i> documented?
</I>
I think Barry could answer this one. In the meantime, just try to add
the no_ack flag as an argument to the consume function.


&gt;<i> Yup, those are the options :-)  Is there a plan for pluggable queues,
</I>&gt;<i> or is it just a dive in and write it sort of thing?  It looks like all
</I>&gt;<i> the behaviour of a queue is in rabbit_amqqueue_process right now, and
</I>&gt;<i> the persistence of queues is in rabbit_persister.  Would just
</I>&gt;<i> replacing the queue (message_buffer) in rabbit_amqqueue_process with a
</I>&gt;<i> file-backed object work for what I'm doing?  Persistence is still
</I>&gt;<i> handled by rabbit_persister for when things die, but a file-backed
</I>&gt;<i> queue wouldn't have to use so much system memory.  Is there a problem
</I>&gt;<i> with doing it that way?
</I>
Not especially. You could just patch rabbit_amqqueue_process without
bothering about pluggability. The latter is just about having more
flexibility and better factoring.

One crude way to do this is to set a hard limit on queue depth and
then after that just overflow to disk rather than putting new messages
into the memory queue. Keep the persister the same, because it logs to
disk anyway. Sounds simple, but it may get a bit fiddly when you try
to things properly. Which is why we're not just jumping in and hacking
the functionality to diffuse this whole discussion - it takes effort
to get things write and think of all of the knock-on effects of what
you are doing.

Having said this, pluggable queues are no silver bullet either - you
still need to implement them somehow :-)

There were some other options discussed on this previous thread:
<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2008-September/001849.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2008-September/001849.html</A>

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001601.html">[rabbitmq-discuss] Publish won't work without transaction?
</A></li>
	<LI>Next message: <A HREF="001611.html">[rabbitmq-discuss] Publish won't work without transaction?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1603">[ date ]</a>
              <a href="thread.html#1603">[ thread ]</a>
              <a href="subject.html#1603">[ subject ]</a>
              <a href="author.html#1603">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
