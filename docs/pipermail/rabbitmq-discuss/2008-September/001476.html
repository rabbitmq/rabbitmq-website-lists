<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ memory management
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20memory%20management&In-Reply-To=84fb38e30809121316q3381654y705041be440c9e8c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001473.html">
   <LINK REL="Next"  HREF="001477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ memory management</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20memory%20management&In-Reply-To=84fb38e30809121316q3381654y705041be440c9e8c%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] RabbitMQ memory management">matthias at lshift.net
       </A><BR>
    <I>Sat Sep 13 05:00:45 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001473.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
        <LI>Next message: <A HREF="001477.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1476">[ date ]</a>
              <a href="thread.html#1476">[ thread ]</a>
              <a href="subject.html#1476">[ subject ]</a>
              <a href="author.html#1476">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

tsuraan wrote:
&gt;<i> If RabbitMQ crashes because it's out of memory, I understand that it
</I>&gt;<i> should be able to start again without losing any data
</I>
Only *durable* queues and exchanges, and *persistent* messages are 
recoverable, as per the spec.

&gt;<i> Will the next message sent to it (before any messages are dequeued)
</I>&gt;<i> cause the queue to crash again? I assume that must be the case, since
</I>&gt;<i> nothing was lost when the program crashed.
</I>
Messages aren't the only entities consuming memory. I would hope that 
RabbitMQ is able to recover the state (as defined above) after an OoM 
error, and take in a few more messages, but it's not something we have 
tested. It's possible that the startup sequence uses just that little 
bit more memory which would push the system over the edge.

Generally, if there are worries about RabbitMQ running out of memory one 
should try catching that case well before it happens. It's not really 
advisable to run a system so close to the limits.


Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001473.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
	<LI>Next message: <A HREF="001477.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1476">[ date ]</a>
              <a href="thread.html#1476">[ thread ]</a>
              <a href="subject.html#1476">[ subject ]</a>
              <a href="author.html#1476">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
