<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%5BBUG%5D%20Erlang%20RabbitMQ%20client%20requires%0A%09installed%20server%20code&In-Reply-To=6c2563b20809071749u2ed3c633lc1488dafedaf8a6f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001382.html">
   <LINK REL="Next"  HREF="001385.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code</H1>
    <B>Edwin Fine</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%5BBUG%5D%20Erlang%20RabbitMQ%20client%20requires%0A%09installed%20server%20code&In-Reply-To=6c2563b20809071749u2ed3c633lc1488dafedaf8a6f%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code">rabbitmq-discuss_efine at usa.net
       </A><BR>
    <I>Mon Sep  8 03:28:32 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001382.html">[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code
</A></li>
        <LI>Next message: <A HREF="001385.html">[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1383">[ date ]</a>
              <a href="thread.html#1383">[ thread ]</a>
              <a href="subject.html#1383">[ subject ]</a>
              <a href="author.html#1383">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So here's my first change (attached file ampq_connection.erl).

I've modified amqp_connection to be completely dynamic and not depend at all
at compile time on any network driver module. Now some people may shudder at
building a module name from strings, but it's not uncommon outside Erlang
and it certainly does give flexibility.

I have successfully run the network_client_test, but could not run the
direct test. Is this possibly because the Rabbit 1.4.0 I have installed is
not in sync with the API expected by the direct driver?

As an added bonus, I was able to prevent code from running that was marked
with

%% TODO This differentiation is only necessary for the direct channel,

because the server state now &quot;knows&quot; what kind of connection it is.

I'd be very interested to hear your thoughts on this approach, and whether
or not you can get the direct driver test to work.

Regards,
Edwin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080907/f762bc43/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080907/f762bc43/attachment.htm</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: amqp_connection.erl
Type: text/x-erlang
Size: 11217 bytes
Desc: not available
Url : <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080907/f762bc43/attachment.bin">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080907/f762bc43/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001382.html">[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code
</A></li>
	<LI>Next message: <A HREF="001385.html">[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1383">[ date ]</a>
              <a href="thread.html#1383">[ thread ]</a>
              <a href="subject.html#1383">[ subject ]</a>
              <a href="author.html#1383">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
