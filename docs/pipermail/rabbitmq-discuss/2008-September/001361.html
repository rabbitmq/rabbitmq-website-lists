<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%5BBUG%5D%20Erlang%20RabbitMQ%20client%20requires%0A%09installed%20server%20code&In-Reply-To=6c2563b20809070048s1bd7935ew8a5818b054195e5d%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001359.html">
   <LINK REL="Next"  HREF="001371.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%5BBUG%5D%20Erlang%20RabbitMQ%20client%20requires%0A%09installed%20server%20code&In-Reply-To=6c2563b20809070048s1bd7935ew8a5818b054195e5d%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code">0x6e6562 at gmail.com
       </A><BR>
    <I>Sun Sep  7 09:49:13 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001359.html">[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code
</A></li>
        <LI>Next message: <A HREF="001371.html">[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1361">[ date ]</a>
              <a href="thread.html#1361">[ thread ]</a>
              <a href="subject.html#1361">[ subject ]</a>
              <a href="author.html#1361">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Edwin,

On Sun, Sep 7, 2008 at 8:48 AM, Edwin Fine
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss_efine at usa.net</A>&gt; wrote:
&gt;<i> Further to my previous email, a minimal list of required modules for the
</I>&gt;<i> proposed &quot;rabbit_common&quot; application are listed below (these are the ones I
</I>&gt;<i> needed to get things up and running). I am going to make my own
</I>&gt;<i> rabbit_common OTP application, and change the Erlang client to depend on it
</I>&gt;<i> rather than the server. I will also see what it takes to change the rabbit
</I>&gt;<i> 1.4.0 server itself to factor out the common code and to use this
</I>&gt;<i> rabbit_common application. Perhaps I can use Dialyzer to ensure that I get
</I>&gt;<i> all dependencies. If this would be of interest I would be glad to share it.
</I>
This would of great value. As indicated in my previous mail, we should
promote the client, so this refactoring work should go into the core
build and release process. Because of the centrality of this work, we
may need to consider effects that it would have on the core process.
The various parts of Rabbit have already been broken out into separate
hg repos, which for practical purposes, need to be checked to sibling
directories in order for the build to work (e.g. rabbitmq-server
expects rabbitmq-codegen to be checked out into the same parent
directory). This approach could be taken for a common Erlang module.

The other consideration that you might make is how this patch gets
played back to the Rabbit dev team. You could generate a simple patch
or you could use hg as a DVCS. One consideration with the latter is
that we use named branches for each new feature or bug. If you were
just to clone and implement this in the default branch of your repo,
we may need to think about how to handle the history (because hg
doesn't rewrite it in the same way that git does).

But having said that I don't want to let any formalities get in the
way of you contributing to Rabbit, so at the end of the day, I would
do what is most convenient for you.


&gt;<i> src/rabbit_binary_generator.erl
</I>&gt;<i> src/rabbit_misc.erl
</I>&gt;<i> src/rabbit_heartbeat.erl
</I>&gt;<i> src/rabbit_reader.erl
</I>&gt;<i> src/rabbit_framing_channel.erl
</I>&gt;<i> src/rabbit_writer.erl
</I>&gt;<i> src/rabbit_amqqueue.erl
</I>&gt;<i> src/rabbit_framing.erl
</I>&gt;<i> src/rabbit_binary_parser.erl
</I>&gt;<i> src/rabbit_channel.erl
</I>&gt;<i> include/rabbit_framing.hrl
</I>&gt;<i> include/rabbit_framing_spec.hrl
</I>&gt;<i> include/rabbit.hrl
</I>
Apart from rabbit_amqqueue and rabbitmq_misc, all of those modules
were designed to be eventually sharable, so that is fine.

My gut feeling is that rabbit_amqqueue and rabbitmq_misc are purely
server side concerns and if there is a dependency there, we should
look at it and potentially factor it out.

Cheers,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001359.html">[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code
</A></li>
	<LI>Next message: <A HREF="001371.html">[rabbitmq-discuss] [BUG] Erlang RabbitMQ client requires	installed server code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1361">[ date ]</a>
              <a href="thread.html#1361">[ thread ]</a>
              <a href="subject.html#1361">[ subject ]</a>
              <a href="author.html#1361">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
