<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Problems Closing Channels
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Problems%20Closing%20Channels&In-Reply-To=0D4CABC7-DDA5-4F45-A10D-9FF023516C35%40threerings.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001505.html">
   <LINK REL="Next"  HREF="001506.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Problems Closing Channels</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Problems%20Closing%20Channels&In-Reply-To=0D4CABC7-DDA5-4F45-A10D-9FF023516C35%40threerings.net"
       TITLE="[rabbitmq-discuss] Problems Closing Channels">matthias at lshift.net
       </A><BR>
    <I>Tue Sep 16 08:44:48 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001505.html">[rabbitmq-discuss] Problems Closing Channels
</A></li>
        <LI>Next message: <A HREF="001506.html">[rabbitmq-discuss] Access control documentation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1507">[ date ]</a>
              <a href="thread.html#1507">[ thread ]</a>
              <a href="subject.html#1507">[ subject ]</a>
              <a href="author.html#1507">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Kyle,

Kyle Sampson wrote:
&gt;<i> Hello, I'm using the Java RabbitMQ client 1.4.0.  I've noticed that  
</I>&gt;<i> there are occasions where calling Channel.close() causes the thread  
</I>&gt;<i> the block indefinitely.  Most often this occurs when it's trying to  
</I>&gt;<i> close a channel that has already been closed.
</I>
Channel.close() is waiting for the server to respond with AMQP's 
channel.close-ok reply, and by default it will wait indefinitely for 
that reply to arrive. It certainly shouldn't wait when the channel has 
been closed already though...

&gt;<i> However, recently I've run into a situation where calling this method
</I>&gt;<i> will halt the thread even after a call to Channel.isOpen() returns
</I>&gt;<i> true; no other threads are closing the channel or the connection.
</I>
Could it be that the server is closing the channel or connection? Even 
so, Channel.close() should return at that point.

We have recently fixed a few bugs in this area of the client code, and 
also extended the API to allow you to specify timeouts when closing a 
channel or connection, and to optionally ignore the case when the 
connection or channel are closed already.

So, if you can, please give the latest version of the Java client from 
our mercurial repository a try:
   hg clone <A HREF="http://hg.rabbitmq.com/rabbitmq-java-client/">http://hg.rabbitmq.com/rabbitmq-java-client/</A>
or download a zip/tar.gz/bz2 from
 
<A HREF="http://hg.rabbitmq.com/rabbitmq-erlang-client/archive/tip.{zip,tar.gz,bz2}">http://hg.rabbitmq.com/rabbitmq-erlang-client/archive/tip.{zip,tar.gz,bz2}</A>


Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001505.html">[rabbitmq-discuss] Problems Closing Channels
</A></li>
	<LI>Next message: <A HREF="001506.html">[rabbitmq-discuss] Access control documentation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1507">[ date ]</a>
              <a href="thread.html#1507">[ thread ]</a>
              <a href="subject.html#1507">[ subject ]</a>
              <a href="author.html#1507">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
