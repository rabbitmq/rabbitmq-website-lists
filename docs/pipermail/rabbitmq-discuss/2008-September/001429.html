<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ memory management
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20memory%20management&In-Reply-To=48C8B97D.5020004%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001423.html">
   <LINK REL="Next"  HREF="001433.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ memory management</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20memory%20management&In-Reply-To=48C8B97D.5020004%40gmail.com"
       TITLE="[rabbitmq-discuss] RabbitMQ memory management">0x6e6562 at gmail.com
       </A><BR>
    <I>Thu Sep 11 12:14:50 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001423.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
        <LI>Next message: <A HREF="001433.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1429">[ date ]</a>
              <a href="thread.html#1429">[ thread ]</a>
              <a href="subject.html#1429">[ subject ]</a>
              <a href="author.html#1429">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Eran,

On Thu, Sep 11, 2008 at 7:23 AM, Eran Sandler &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">eran.sandler at gmail.com</A>&gt; wrote:
&gt;<i> At some point the process that was suppose to read from it wasn't restarted
</I>&gt;<i> and the queue eventually kept on growing.
</I>
Yes, that's the point of a message queuing system :-)

&gt;<i> When it reached a certain amount of memory it died because it couldn't
</I>&gt;<i> allocate more memory.
</I>&gt;<i>
</I>&gt;<i> My question is, if no one reads from a persistent queue will rabbitmq simply
</I>&gt;<i> die?
</I>
Yes, if the Rabbit eats too many carrots, it will die.

Currently we have not implemented an administrative limit of queue
depths, so basically a queue will grow until the Erlang process cannot
allocate any more heap (if the queue is never drained), but this is
something that we are thinking about. This falls under the category of
broker management, for which there have been a few threads already.
This is on our radar, but due to limited resources, we cannot say when
we will get around to doing this.

This also ties into message expiry, which would be a solution to this
problem, but alas, we haven't implemented the TTL property yet (due to
lack of resource and an ambiguous spec). Message expiry has been
discussed in other threads as well.

This is also an item on our todo list, but we will need to be
convinced to prioritize this.

So where does that leave you now?

You've got 2 options:

1. Set the immediate flag when publishing a message. If this flag is
set, the message will not be queued, if it cannot be delivered to a
consumer, it will be discarded.

2. Cluster Rabbit, so that if an instance dies, you don't loose
complete availability.

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001423.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
	<LI>Next message: <A HREF="001433.html">[rabbitmq-discuss] RabbitMQ memory management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1429">[ date ]</a>
              <a href="thread.html#1429">[ thread ]</a>
              <a href="subject.html#1429">[ subject ]</a>
              <a href="author.html#1429">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
