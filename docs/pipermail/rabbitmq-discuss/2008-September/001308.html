<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Debugging of Connection.class
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Debugging%20of%20Connection.class&In-Reply-To=269388e30809010825t304dfd77lac25f8ec34c9b86c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001295.html">
   <LINK REL="Next"  HREF="001296.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Debugging of Connection.class</H1>
    <B>Pete Kay</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Debugging%20of%20Connection.class&In-Reply-To=269388e30809010825t304dfd77lac25f8ec34c9b86c%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Debugging of Connection.class">petedao at gmail.com
       </A><BR>
    <I>Tue Sep  2 01:31:16 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001295.html">[rabbitmq-discuss] Debugging of Connection.class
</A></li>
        <LI>Next message: <A HREF="001296.html">[rabbitmq-discuss] Gracefully shutting down rabbitmq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1308">[ date ]</a>
              <a href="thread.html#1308">[ thread ]</a>
              <a href="subject.html#1308">[ subject ]</a>
              <a href="author.html#1308">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Ben,

The correct bytes were written to the delegate.writeByptes().

Using ngrep, I see that the Flex client sends much less data to the server
than the Java Client:


===========================Flex Client ===============================

debian:/home/anne# ngrep  port 5672
interface: eth0 (192.168.1.0/255.255.255.0)
filter: (ip or ip6) and ( port 5672 )
########
T 192.168.1.100:58513 -&gt; 192.168.1.104:5672 [AP]
  AMQP....
##
T 192.168.1.104:5672 -&gt; 192.168.1.100:58513 [AP]
  ......
...........productS....RabbitMQ.versionS....1.4.0.platformS....Erlan
  g/OTP.copyrightS...gCopyright (C) 2007-2008 LShift Ltd., Cohesive
Financial
   Technologies LLC., and Rabbit Technologies Ltd..informationS...5Licensed
u
  nder the MPL.  See <A HREF="http://www.rabbitmq.com/....PLAIN">http://www.rabbitmq.com/....PLAIN</A> AMQPLAIN....en_US.
#####


====================Java Client =============================


####
T 192.168.1.100:58520 -&gt; 192.168.1.104:5672 [AP]
  AMQP....
##
T 192.168.1.104:5672 -&gt; 192.168.1.100:58520 [AP]
  ......
...........productS....RabbitMQ.versionS....1.4.0.platformS....Erlan
  g/OTP.copyrightS...gCopyright (C) 2007-2008 LShift Ltd., Cohesive
Financial
   Technologies LLC., and Rabbit Technologies Ltd..informationS...5Licensed
u
  nder the MPL.  See <A HREF="http://www.rabbitmq.com/....PLAIN">http://www.rabbitmq.com/....PLAIN</A> AMQPLAIN....en_US.
#
T 192.168.1.100:58520 -&gt; 192.168.1.104:5672 [AP]
  ................productS....RabbitMQ.informationS...5Licensed under the
MPL
  .  See <A HREF="http://www.rabbitmq.com/.platformS....Java.copyrightS...gCopyright(">http://www.rabbitmq.com/.platformS....Java.copyrightS...gCopyright(</A>
  C) 2007-2008 LShift Ltd., Cohesive Financial Technologies LLC., and Rabbit
  Technologies Ltd..versionS....1.4.0.PLAIN.....guest.guest.en_US.
#
T 192.168.1.104:5672 -&gt; 192.168.1.100:58520 [AP]
  ....................
#
T 192.168.1.100:58520 -&gt; 192.168.1.104:5672 [AP]
  ....................
##
T 192.168.1.100:58520 -&gt; 192.168.1.104:5672 [AP]
  ..........(./...
##
T 192.168.1.104:5672 -&gt; 192.168.1.100:58520 [AP]
  ..........).debian.sz.cn:5672.
#
T 192.168.1.100:58520 -&gt; 192.168.1.104:5672 [AP]
  .............
#
T 192.168.1.104:5672 -&gt; 192.168.1.100:58520 [AP]
  ............
#
T 192.168.1.100:58520 -&gt; 192.168.1.104:5672 [AP]
  ............/data..
#
T 192.168.1.104:5672 -&gt; 192.168.1.100:58520 [AP]
  ............e.
#
T 192.168.1.100:58520 -&gt; 192.168.1.104:5672 [AP]
  ........2...e.SimpleQueue......
#
T 192.168.1.104:5672 -&gt; 192.168.1.100:58520 [AP]
  ........2...SimpleQueue.........
#
T 192.168.1.100:58520 -&gt; 192.168.1.104:5672 [AP]
  ........&lt;...e.SimpleQueue...
#
T 192.168.1.104:5672 -&gt; 192.168.1.100:58520 [AP]
  ......&amp;.&lt;..!amq.ctag-9jB3KisBEZQSrUunOq7L4w==.
##
T 192.168.1.104:5672 -&gt; 192.168.1.100:58520 [AP]
  ........
##
T 192.168.1.100:58520 -&gt; 192.168.1.104:5672 [AP]
  ........

It looks like when using the Java client, some data is missing or is not
being sent.  When I traced the Connection.class, I am pretty sure the
onSocketConnect() is called and the bytes are written to delegate.

Do you have any idea why this may be happening?

Thanks alot for all your help.

Best Regards,
Anne
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080902/4de105fe/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080902/4de105fe/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001295.html">[rabbitmq-discuss] Debugging of Connection.class
</A></li>
	<LI>Next message: <A HREF="001296.html">[rabbitmq-discuss] Gracefully shutting down rabbitmq
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1308">[ date ]</a>
              <a href="thread.html#1308">[ thread ]</a>
              <a href="subject.html#1308">[ subject ]</a>
              <a href="author.html#1308">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
