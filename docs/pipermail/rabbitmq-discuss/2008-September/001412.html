<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Durable queue disappears
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Durable%20queue%20disappears&In-Reply-To=48C82B7B.4080809%40cohesiveft.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001411.html">
   <LINK REL="Next"  HREF="001420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Durable queue disappears</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Durable%20queue%20disappears&In-Reply-To=48C82B7B.4080809%40cohesiveft.com"
       TITLE="[rabbitmq-discuss] Durable queue disappears">0x6e6562 at gmail.com
       </A><BR>
    <I>Wed Sep 10 23:03:29 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001411.html">[rabbitmq-discuss] Durable queue disappears
</A></li>
        <LI>Next message: <A HREF="001420.html">[rabbitmq-discuss] Durable queue disappears
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1412">[ date ]</a>
              <a href="thread.html#1412">[ thread ]</a>
              <a href="subject.html#1412">[ subject ]</a>
              <a href="author.html#1412">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dmitriy,

On Wed, Sep 10, 2008 at 9:18 PM, Dmitriy Samovskiy
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dmitriy.samovskiy at cohesiveft.com</A>&gt; wrote:
&gt;<i> Hi all,
</I>&gt;<i>
</I>&gt;<i> I came across a strange situation, and can't see what I am doing wrong.
</I>&gt;<i>
</I>
It seems that the auto_delete flag overrides the durable flag, which I
guess is a permissible interpretation of the spec :-(

If you change your code when you declare the queue to the following:

ch.queue_declare(queue=q, auto_delete=False, durable=True)

it will behave as you expect.

Now why is that so?

I can't give you a definitive answer off the cuff, but my initial
thought is the way the spec has been construed at this point.

Refer to the definition of auto-delete:

&quot;If set, the queue is deleted when all consumers have finished using
it. Last consumer can be cancelled
either explicitly or because its channel is closed. If there was no
consumer ever on the queue, it won't be deleted.&quot;

So if you give auto-delete precedence over durable, this would explain
this behaviour.

Stay tuned for a more authoritative answer.

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001411.html">[rabbitmq-discuss] Durable queue disappears
</A></li>
	<LI>Next message: <A HREF="001420.html">[rabbitmq-discuss] Durable queue disappears
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1412">[ date ]</a>
              <a href="thread.html#1412">[ thread ]</a>
              <a href="subject.html#1412">[ subject ]</a>
              <a href="author.html#1412">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
