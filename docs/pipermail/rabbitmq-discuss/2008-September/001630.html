<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Huge latency in Linux, compared with Leopard
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Huge%20latency%20in%20Linux%2C%20compared%20with%20Leopard&In-Reply-To=19699943.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001628.html">
   <LINK REL="Next"  HREF="001634.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Huge latency in Linux, compared with Leopard</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Huge%20latency%20in%20Linux%2C%20compared%20with%20Leopard&In-Reply-To=19699943.post%40talk.nabble.com"
       TITLE="[rabbitmq-discuss] Huge latency in Linux, compared with Leopard">matthias at lshift.net
       </A><BR>
    <I>Sat Sep 27 10:22:27 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001628.html">[rabbitmq-discuss] Huge latency in Linux, compared with Leopard
</A></li>
        <LI>Next message: <A HREF="001634.html">[rabbitmq-discuss] Huge latency in Linux, compared with Leopard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1630">[ date ]</a>
              <a href="thread.html#1630">[ thread ]</a>
              <a href="subject.html#1630">[ subject ]</a>
              <a href="author.html#1630">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Bogon Choi wrote:
&gt;<i> I am using RabbitMQ Java library to talk with RabbitMQ Server.
</I>
I have just run a test on a one of our Debian Linux machines here - 
kernel 2.6.24-1-686, &quot;Intel(R) Xeon(TM) CPU 2.80GHz stepping 09&quot;. The 
test uses the MulticastMain example that ships with the Java client to 
send a 1k message every second and measure the latency:

sh runjava.sh com.rabbitmq.examples.MulticastMain -a -r 1 -s 1024 -i 5

Once the system has settled down I get minimum latencies of around 900 
microseconds, and average latencies of about 1050 microseconds.


Do you see the same results on your system when running the same test?


There is the occasional blip that produces max latencies of around 40ms. 
I always thought that was most likely due to the fact that the system is 
doing other things - it's my desktop machine - but given that the figure 
is the same that you are reporting perhaps that is not the case.

Tracking down the cause is very time-consuming though - it could be 
anything - our test code, the JVM, Java's network stack, the kernel, 
Erlang's network stack, the Erlang VM, the RabbitMQ server code ...

If anybody has some spare time at their hands and fancies a go a 
figuring out why we see these strange results, please post your findings 
here - we'd very much appreciate some help in this.


Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001628.html">[rabbitmq-discuss] Huge latency in Linux, compared with Leopard
</A></li>
	<LI>Next message: <A HREF="001634.html">[rabbitmq-discuss] Huge latency in Linux, compared with Leopard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1630">[ date ]</a>
              <a href="thread.html#1630">[ thread ]</a>
              <a href="subject.html#1630">[ subject ]</a>
              <a href="author.html#1630">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
