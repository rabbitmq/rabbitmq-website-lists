<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Error code 541
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Error%20code%20541&In-Reply-To=269388e30809110547j70ef638aic43afaec0c52f1b%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001436.html">
   <LINK REL="Next"  HREF="001443.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Error code 541</H1>
    <B>Eran Sandler</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Error%20code%20541&In-Reply-To=269388e30809110547j70ef638aic43afaec0c52f1b%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Error code 541">eran.sandler at gmail.com
       </A><BR>
    <I>Thu Sep 11 13:57:36 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001436.html">[rabbitmq-discuss] Error code 541
</A></li>
        <LI>Next message: <A HREF="001443.html">[rabbitmq-discuss] Error code 541
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1440">[ date ]</a>
              <a href="thread.html#1440">[ thread ]</a>
              <a href="subject.html#1440">[ subject ]</a>
              <a href="author.html#1440">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I don't use an exchange. I saw that its possible to use this without an 
exchange (but perhaps I'm screwing myself with regards to clustering, I 
haven't taken a closer look as to how to work well with clustering).


I think BasicConsume should work just fine. I saw that it can handle the 
Ack automatically. The reason I thought using BasicGet was to keep my 
options open as to refuse a message for a point in time where my 
consuming code will run on a couple of machines that might get upgraded 
sequentially. This might lead to scenario in which I have added a new 
message type I want to handle and I don't have the new code on all 
consumers.


Regarding the sample, I will write something quick based on my original 
code and send it so it will make your life (and mine) a lot nicer (and 
quicker) :-)


Eran


Ben Hood wrote:

&gt;<i> Eran,
</I>&gt;<i>
</I>&gt;<i> On Thu, Sep 11, 2008 at 1:28 PM, Eran Sandler &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">eran.sandler at gmail.com</A>&gt; wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> The publish code keeps on working correctly while the BasicGet code, on the
</I>&gt;&gt;<i> BasicGet call gets the 541 error.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Thanks for publishing the code, and no offense intended, but the easy
</I>&gt;<i> you make it for us to reproduce your problem, the more likely it that
</I>&gt;<i> you will get a response. So could you attach a complete working class
</I>&gt;<i> that we can just run. Otherwise we need to piece your code snippets
</I>&gt;<i> together ourselves, which costs us time.
</I>&gt;<i>
</I>&gt;<i> For example, it is difficult to tell what queues you have bound to
</I>&gt;<i> what exchanges.
</I>&gt;<i>
</I>&gt;<i> Also, when you are publishing a message you seem to passing in an
</I>&gt;<i> empty string for the exhange name and the routing key - this seems a
</I>&gt;<i> little strange.
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> When all of this started to happen I delete the content of the DB folder,
</I>&gt;&gt;<i> recreated everything (including redefining the user, vhost and durable
</I>&gt;&gt;<i> queue) and restarted the app again.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It worked for a while but kept on happening again. I have a snapshot of all
</I>&gt;&gt;<i> the files but the persister is about 180MB (which seems to be its average
</I>&gt;&gt;<i> size).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Now it runs for about 12 hours through the command line (not erlsrv) and so
</I>&gt;&gt;<i> far it seems ok.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The memory jumps up and down reaching ~500-600mb and sometimes dropping back
</I>&gt;&gt;<i> to 100mb and going straight up to 500-600mb. Currently its ~300Mb.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> As indicated before, depending on what you are doing, this may create
</I>&gt;<i> more or less load of the routing infrastructure in Rabbit.
</I>&gt;<i>
</I>&gt;<i> BTW, do you need to use Basic.Get?
</I>&gt;<i>
</I>&gt;<i> Would Basic.Consume be an option?
</I>&gt;<i>
</I>&gt;<i> Ben
</I>&gt;<i>   
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080911/84ccdd0a/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080911/84ccdd0a/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001436.html">[rabbitmq-discuss] Error code 541
</A></li>
	<LI>Next message: <A HREF="001443.html">[rabbitmq-discuss] Error code 541
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1440">[ date ]</a>
              <a href="thread.html#1440">[ thread ]</a>
              <a href="subject.html#1440">[ subject ]</a>
              <a href="author.html#1440">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
