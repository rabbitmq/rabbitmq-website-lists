<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue info
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Queue%20info&In-Reply-To=47C65F88.8020700%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000525.html">
   <LINK REL="Next"  HREF="000534.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue info</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Queue%20info&In-Reply-To=47C65F88.8020700%40lshift.net"
       TITLE="[rabbitmq-discuss] Queue info">alexis.richardson at cohesiveft.com
       </A><BR>
    <I>Thu Feb 28 08:25:43 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000525.html">[rabbitmq-discuss] Queue info
</A></li>
        <LI>Next message: <A HREF="000534.html">[rabbitmq-discuss] Queue info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#532">[ date ]</a>
              <a href="thread.html#532">[ thread ]</a>
              <a href="subject.html#532">[ subject ]</a>
              <a href="author.html#532">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Tony.

One other thing that we have been talking about and would love to
share with others is this: how best to expose these erlang 'management
functions', such as they are, to users of other languages?

What would people most like to see?  One idea would be to expose
functions remotely over queues (as reified RPC messages) and then use
the AMQP, STOMP or HTTP interfaces externally.  Another approach would
be to use one of the GUI tools, one of the prototype flex clients.

Any thoughts?

alexis


On Thu, Feb 28, 2008 at 7:15 AM, Tony Garnock-Jones &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonyg at lshift.net</A>&gt; wrote:
&gt;<i> Hi Ying,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  Ying He wrote:
</I>&gt;<i>  &gt; Is there any way in RabbitMQ server for the admin to check for example:
</I>&gt;<i>  &gt; How many queues are currently in the system?
</I>&gt;<i>  &gt; How many messages that each one has processed and each one still holds
</I>&gt;<i>  &gt; waiting for the consumer to process?
</I>&gt;<i>
</I>&gt;<i>  There is an undocumented way of doing this. If you start the broker by
</I>&gt;<i>  running rabbitmq-server, then you end up at an erlang shell (if you
</I>&gt;<i>  don't see the prompt, tap enter to make it reprint it). If you have the
</I>&gt;<i>  broker running in the background, you need to attach an erlang shell to
</I>&gt;<i>  it, with a command along the lines of &quot;erl -sname temp -remsh
</I>&gt;<i>  <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at yourmachine</A>&quot;, running as the same user as the rabbit server.
</I>&gt;<i>
</I>&gt;<i>  At the erlang prompt, type &quot;rabbit_amqqueue:stat_all().&quot;, which will
</I>&gt;<i>  produce a brief report on the status of the queues in the system. This
</I>&gt;<i>  tells you how many there are, how many consumers are listening on each,
</I>&gt;<i>  and how many messages are backlogged on each. There is no indication of
</I>&gt;<i>  how many messages have been through the queues yet. For example:
</I>&gt;<i>
</I>&gt;<i>  (<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at walk</A>)1&gt; rabbit_amqqueue:stat_all().
</I>&gt;<i>  [{ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;bar&quot;&gt;&gt;},0,1},
</I>&gt;<i>   {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;foo&quot;&gt;&gt;},0,1}]
</I>&gt;<i>
</I>&gt;<i>  The example shows two queues, &quot;foo&quot; and &quot;bar&quot;, each with a single
</I>&gt;<i>  consumer attached (in fact a LogTail.exe instance from our .NET client),
</I>&gt;<i>  and neither with any messages waiting to be consumed. The result of the
</I>&gt;<i>  stat_all() call is a list of {status, fully-qualified-queue-name,
</I>&gt;<i>  message-queue-length, consumer-count} tuples.
</I>&gt;<i>
</I>&gt;<i>  Regards,
</I>&gt;<i>    Tony
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  _______________________________________________
</I>&gt;<i>  rabbitmq-discuss mailing list
</I>&gt;<i>  <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i>  <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>


-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000525.html">[rabbitmq-discuss] Queue info
</A></li>
	<LI>Next message: <A HREF="000534.html">[rabbitmq-discuss] Queue info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#532">[ date ]</a>
              <a href="thread.html#532">[ thread ]</a>
              <a href="subject.html#532">[ subject ]</a>
              <a href="author.html#532">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
