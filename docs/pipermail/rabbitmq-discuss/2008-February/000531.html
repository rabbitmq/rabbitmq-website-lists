<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] State and idempotency (was Re: Replicated message queue? DRDB+Hearbeat?)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20State%20and%20idempotency%20%28was%20Re%3A%20Replicated%0A%20message%20queue%3F%20DRDB%2BHearbeat%3F%29&In-Reply-To=28154399.6051203650772262.JavaMail.root%40ly.sdf.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000511.html">
   <LINK REL="Next"  HREF="000530.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] State and idempotency (was Re: Replicated message queue? DRDB+Hearbeat?)</H1>
    <B>Tony Garnock-Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20State%20and%20idempotency%20%28was%20Re%3A%20Replicated%0A%20message%20queue%3F%20DRDB%2BHearbeat%3F%29&In-Reply-To=28154399.6051203650772262.JavaMail.root%40ly.sdf.com"
       TITLE="[rabbitmq-discuss] State and idempotency (was Re: Replicated message queue? DRDB+Hearbeat?)">tonyg at lshift.net
       </A><BR>
    <I>Thu Feb 28 08:25:31 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000511.html">[rabbitmq-discuss] Replicated message queue?  DRDB+Hearbeat?
</A></li>
        <LI>Next message: <A HREF="000530.html">[rabbitmq-discuss] Replicated message queue?  DRDB+Hearbeat?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#531">[ date ]</a>
              <a href="thread.html#531">[ thread ]</a>
              <a href="subject.html#531">[ subject ]</a>
              <a href="author.html#531">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tom Samplonius wrote:
&gt;&gt;<i> application logic to identify duplicate messages (just in case).
</I>&gt;<i> 
</I>&gt;<i> I've never come across a good way of doing this.  I can attach a
</I>&gt;<i> unique id to each message, but then the clients have to keep state on
</I>&gt;<i> which ids they've processed.  And if you multiple clients, they need
</I>&gt;<i> to talk to each other too.  I don't want consumers to have to keep
</I>&gt;<i> state.
</I>
Indeed. Ultimately, to support exactly-once delivery, the clients do 
have to have some kind of state. It can be reduced to a minimum, though 
- perhaps as far as two facts: the client's name, and a single integer 
representing its &quot;high tide mark&quot; in the incoming message stream.

The way we're looking to address this is to introduce the notion of a 
session. Sessions provide a notion of scope for stateful things like 
exactly-once delivery, with minimal client-side state.

By using the client-to-server notion of sessions, each client just needs 
to remember where it was up to in its conversation with the server, 
rather than anything about the wider conversations with other clients 
that are layered on top of the AMQP network, reducing the O(n^2) problem 
to O(n).

Regards,
   Tony


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000511.html">[rabbitmq-discuss] Replicated message queue?  DRDB+Hearbeat?
</A></li>
	<LI>Next message: <A HREF="000530.html">[rabbitmq-discuss] Replicated message queue?  DRDB+Hearbeat?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#531">[ date ]</a>
              <a href="thread.html#531">[ thread ]</a>
              <a href="subject.html#531">[ subject ]</a>
              <a href="author.html#531">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
