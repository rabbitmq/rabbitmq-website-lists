<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue info
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Queue%20info&In-Reply-To=167204d20802280025i56ea3f83u55b5b19219a2b1b%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000534.html">
   <LINK REL="Next"  HREF="000539.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue info</H1>
    <B>Ross Mason</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Queue%20info&In-Reply-To=167204d20802280025i56ea3f83u55b5b19219a2b1b%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Queue info">themuleman at gmail.com
       </A><BR>
    <I>Thu Feb 28 09:01:17 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000534.html">[rabbitmq-discuss] Queue info
</A></li>
        <LI>Next message: <A HREF="000539.html">[rabbitmq-discuss] Queue info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#536">[ date ]</a>
              <a href="thread.html#536">[ thread ]</a>
              <a href="subject.html#536">[ subject ]</a>
              <a href="author.html#536">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think you'd be better of starting off with SNMP. I think Tony said  
that Erlang already has a library for this and both .Net and java have  
some support for SNMP.  It would be a good feature to be able to plug  
in to existing management frameworks such as HP OpenView, Hyperic,  
Hawk, Hermes (they all start with an H, weird).

Cheers,

Ross Mason
CTO, Co-Founder
MuleSource Inc.

<A HREF="http://mulesource.com">http://mulesource.com</A> | <A HREF="http://blog.rossmason.com">http://blog.rossmason.com</A>





On 28 Feb 2008, at 09:25, Alexis Richardson wrote:

&gt;<i> Thanks Tony.
</I>&gt;<i>
</I>&gt;<i> One other thing that we have been talking about and would love to
</I>&gt;<i> share with others is this: how best to expose these erlang 'management
</I>&gt;<i> functions', such as they are, to users of other languages?
</I>&gt;<i>
</I>&gt;<i> What would people most like to see?  One idea would be to expose
</I>&gt;<i> functions remotely over queues (as reified RPC messages) and then use
</I>&gt;<i> the AMQP, STOMP or HTTP interfaces externally.  Another approach would
</I>&gt;<i> be to use one of the GUI tools, one of the prototype flex clients.
</I>&gt;<i>
</I>&gt;<i> Any thoughts?
</I>&gt;<i>
</I>&gt;<i> alexis
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Thu, Feb 28, 2008 at 7:15 AM, Tony Garnock-Jones  
</I>&gt;<i> &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonyg at lshift.net</A>&gt; wrote:
</I>&gt;&gt;<i> Hi Ying,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ying He wrote:
</I>&gt;&gt;&gt;<i> Is there any way in RabbitMQ server for the admin to check for  
</I>&gt;&gt;&gt;<i> example:
</I>&gt;&gt;&gt;<i> How many queues are currently in the system?
</I>&gt;&gt;&gt;<i> How many messages that each one has processed and each one still  
</I>&gt;&gt;&gt;<i> holds
</I>&gt;&gt;&gt;<i> waiting for the consumer to process?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There is an undocumented way of doing this. If you start the broker  
</I>&gt;&gt;<i> by
</I>&gt;&gt;<i> running rabbitmq-server, then you end up at an erlang shell (if you
</I>&gt;&gt;<i> don't see the prompt, tap enter to make it reprint it). If you have  
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> broker running in the background, you need to attach an erlang  
</I>&gt;&gt;<i> shell to
</I>&gt;&gt;<i> it, with a command along the lines of &quot;erl -sname temp -remsh
</I>&gt;&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at yourmachine</A>&quot;, running as the same user as the rabbit server.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> At the erlang prompt, type &quot;rabbit_amqqueue:stat_all().&quot;, which will
</I>&gt;&gt;<i> produce a brief report on the status of the queues in the system.  
</I>&gt;&gt;<i> This
</I>&gt;&gt;<i> tells you how many there are, how many consumers are listening on  
</I>&gt;&gt;<i> each,
</I>&gt;&gt;<i> and how many messages are backlogged on each. There is no  
</I>&gt;&gt;<i> indication of
</I>&gt;&gt;<i> how many messages have been through the queues yet. For example:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at walk</A>)1&gt; rabbit_amqqueue:stat_all().
</I>&gt;&gt;<i> [{ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;bar&quot;&gt;&gt;},0,1},
</I>&gt;&gt;<i>  {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;foo&quot;&gt;&gt;},0,1}]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The example shows two queues, &quot;foo&quot; and &quot;bar&quot;, each with a single
</I>&gt;&gt;<i> consumer attached (in fact a LogTail.exe instance from our .NET  
</I>&gt;&gt;<i> client),
</I>&gt;&gt;<i> and neither with any messages waiting to be consumed. The result of  
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> stat_all() call is a list of {status, fully-qualified-queue-name,
</I>&gt;&gt;<i> message-queue-length, consumer-count} tuples.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i>   Tony
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Alexis Richardson
</I>&gt;<i> +44 20 7617 7339 (UK)
</I>&gt;<i> +44 77 9865 2911 (cell)
</I>&gt;<i> +1 650 206 2517 (US)
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000534.html">[rabbitmq-discuss] Queue info
</A></li>
	<LI>Next message: <A HREF="000539.html">[rabbitmq-discuss] Queue info
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#536">[ date ]</a>
              <a href="thread.html#536">[ thread ]</a>
              <a href="subject.html#536">[ subject ]</a>
              <a href="author.html#536">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
