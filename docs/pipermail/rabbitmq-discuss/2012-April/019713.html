<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cleaning up after a rabbitmq-server install
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cleaning%20up%20after%20a%20rabbitmq-server%20install&In-Reply-To=%3CCACLE7iwyTwnVUbzB%3D87mmEFSw4DoupsA4nAcXSWqzr5ZwQ_oeg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019422.html">
   <LINK REL="Next"  HREF="019419.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cleaning up after a rabbitmq-server install</H1>
    <B>Matt Pietrek</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cleaning%20up%20after%20a%20rabbitmq-server%20install&In-Reply-To=%3CCACLE7iwyTwnVUbzB%3D87mmEFSw4DoupsA4nAcXSWqzr5ZwQ_oeg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Cleaning up after a rabbitmq-server install">mpietrek at skytap.com
       </A><BR>
    <I>Mon Apr 23 21:41:42 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019422.html">[rabbitmq-discuss] Cleaning up after a rabbitmq-server install
</A></li>
        <LI>Next message: <A HREF="019419.html">[rabbitmq-discuss] Datas from PHP to Java
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19713">[ date ]</a>
              <a href="thread.html#19713">[ thread ]</a>
              <a href="subject.html#19713">[ subject ]</a>
              <a href="author.html#19713">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Matthew,

Sorry for the delayed response - Was out of town for two weeks and
just got backed.

I understand rabbit's default choice to leave the service running
after installing - It makes the &quot;new user&quot; scenario much less error
prone. However, in production environments where state is very
explicitly controlled, it's considered bad form (at least around here)
to combine &quot;installed&quot; and &quot;running&quot; into a single state. We have very
explicit states, e.g.

- Install/configure services for execution - After this completes,
nothing should &quot;just happen&quot; to be running
- Launch services


Regarding your last point, making the user configurable via debconf,
that sounds like exactly like what we need. Please add it to whatever
request list you have!

Thanks,

Matt


On Mon, Apr 9, 2012 at 6:02 AM, Matthew Sackman &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at rabbitmq.com</A>&gt; wrote:
&gt;<i> Hi Matt,
</I>&gt;<i>
</I>&gt;<i> On Fri, Apr 06, 2012 at 09:51:04AM -0700, Matt Pietrek wrote:
</I>&gt;&gt;<i> Now, for a run-of-the-mill installation of some service (&quot;apt-get
</I>&gt;&gt;<i> install &lt;program-name&gt;&quot; ), I wouldn't expect anything to be left
</I>&gt;&gt;<i> running after the install completes. That is, installing a program
</I>&gt;&gt;<i> shouldn't just automatically leave the program running after
</I>&gt;&gt;<i> installing it, as well as other running bits and pieces.
</I>&gt;<i>
</I>&gt;<i> Hmm. My recollection is that installing things like apache, nginx,
</I>&gt;<i> postgresql etc etc (i.e. system daemons) does exactly that and leaves
</I>&gt;<i> them running. Please correct me if I'm wrong there, but I don't think we
</I>&gt;<i> do anything abnormal.
</I>&gt;<i>
</I>&gt;&gt;<i> However, I don't see a way to tell the rabbitmq-server install to just
</I>&gt;&gt;<i> drop the bits, and not leave anything running.
</I>&gt;<i>
</I>&gt;<i> Oh, there's probably some bizarre dpkg incantation that can do that -
</I>&gt;<i> probably just &quot;don't run the postinstall&quot; or something, but that might
</I>&gt;<i> leave the package in a badly configured state. Again, do other system
</I>&gt;<i> daemons provide this sort of option? If so, how? We'll be more than
</I>&gt;<i> happy to cope whatever is the standard way of achieving this for Debian.
</I>&gt;<i>
</I>&gt;&gt;<i> The issue is: We don't want these leftover processes running as the
</I>&gt;&gt;<i> rabbitmq user hanging around after puppet completes. I've experimented
</I>&gt;&gt;<i> with adding &quot;epmd -kill&quot; to the Puppet scripts, and it successfully
</I>&gt;&gt;<i> kills epmd on about 30% of the nodes, but it fails (exit code != 0) on
</I>&gt;&gt;<i> the other 70%.
</I>&gt;<i>
</I>&gt;<i> Hmm, that suggests that we should probably have the user configurable
</I>&gt;<i> via debconf, and then you can probably pre-seed the answers there. What
</I>&gt;<i> do you reckon?
</I>&gt;<i>
</I>&gt;<i> Matthew
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019422.html">[rabbitmq-discuss] Cleaning up after a rabbitmq-server install
</A></li>
	<LI>Next message: <A HREF="019419.html">[rabbitmq-discuss] Datas from PHP to Java
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19713">[ date ]</a>
              <a href="thread.html#19713">[ thread ]</a>
              <a href="subject.html#19713">[ subject ]</a>
              <a href="author.html#19713">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
