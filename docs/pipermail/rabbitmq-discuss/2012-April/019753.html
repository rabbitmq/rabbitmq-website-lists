<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Per-Connection Flow Control - RMQ 2.8.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Per-Connection%20Flow%20Control%20-%20RMQ%202.8.1&In-Reply-To=%3C4F98280D.4040703%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019751.html">
   <LINK REL="Next"  HREF="019788.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Per-Connection Flow Control - RMQ 2.8.1</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Per-Connection%20Flow%20Control%20-%20RMQ%202.8.1&In-Reply-To=%3C4F98280D.4040703%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Per-Connection Flow Control - RMQ 2.8.1">matthias at rabbitmq.com
       </A><BR>
    <I>Wed Apr 25 17:36:29 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019751.html">[rabbitmq-discuss] Per-Connection Flow Control - RMQ 2.8.1
</A></li>
        <LI>Next message: <A HREF="019788.html">[rabbitmq-discuss] Per-Connection Flow Control - RMQ 2.8.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19753">[ date ]</a>
              <a href="thread.html#19753">[ thread ]</a>
              <a href="subject.html#19753">[ subject ]</a>
              <a href="author.html#19753">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25/04/12 17:14, DawgTool wrote:
&gt;<i> Comparing 2.7.1 to 2.8.1 has become less a priority as getting 2.8.1 to
</I>&gt;<i> behave the same as our current 2.7.1 system.
</I>&gt;<i> (and I say behave meaning throughput count more then anything else)
</I>
*Sustained* throughput on 2.8.1 should not be significantly lower than 
2.7.1. Do you have evidence to the contrary? That is certainly something 
we'd want to investigate.

2.7.1 can absorb longer spikes than 2.8.1; you can compensate for that 
somewhat by increasing the tcp buffer sizes.

&gt;<i> the reason I was raising the credits was to give my publishers
</I>&gt;<i> more time to publish before they got locked out. At the default level
</I>&gt;<i> {200,50}, my publishing minimum rate of 4k/sec (normal rate is 90k/s)
</I>&gt;<i> blocked almost instantly.
</I>
What's the average message size? And how many queues does a single 
message get routed to on average?

90k/s is unlikely to be a sustainable rate even with tiny messages. 
4k/sec really shouldn't be a problem, unless the messages are huge.

&gt;<i> The flat queue concerns me more then the queue vs total, I expected that
</I>&gt;<i> there would be records piled up in the broker/exchange.
</I>
One of the objectives of the credit based flow control is to prevent 
messages from piling up anywhere other than the queue or tcp buffers.

&gt;<i> You can easily get this to behave poorly by pushing volume (3-4k/s) to a
</I>&gt;<i> topic exchange with a short TTL on the queues (90000ms)
</I>
Ah. TTLs. Handling those can be quite costly in some circumstances, and 
indeed block the queue for a while. This shouldn't have changed between 
2.7.1 and 2.8.1 though.


Regards,

Matthias.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019751.html">[rabbitmq-discuss] Per-Connection Flow Control - RMQ 2.8.1
</A></li>
	<LI>Next message: <A HREF="019788.html">[rabbitmq-discuss] Per-Connection Flow Control - RMQ 2.8.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19753">[ date ]</a>
              <a href="thread.html#19753">[ thread ]</a>
              <a href="subject.html#19753">[ subject ]</a>
              <a href="author.html#19753">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
