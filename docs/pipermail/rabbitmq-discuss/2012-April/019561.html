<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbit Management API Overhead/Impact
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20Management%20API%20Overhead/Impact&In-Reply-To=%3C4F8C1446.6070707%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019559.html">
   <LINK REL="Next"  HREF="019562.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbit Management API Overhead/Impact</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20Management%20API%20Overhead/Impact&In-Reply-To=%3C4F8C1446.6070707%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Rabbit Management API Overhead/Impact">simon at rabbitmq.com
       </A><BR>
    <I>Mon Apr 16 13:44:54 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019559.html">[rabbitmq-discuss] Rabbit Management API Overhead/Impact
</A></li>
        <LI>Next message: <A HREF="019562.html">[rabbitmq-discuss] Rabbit Management API Overhead/Impact
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19561">[ date ]</a>
              <a href="thread.html#19561">[ thread ]</a>
              <a href="subject.html#19561">[ subject ]</a>
              <a href="author.html#19561">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 16/04/12 13:30, Brendan Hay wrote:
&gt;<i> Hi,
</I>
Hi!

&gt;<i> While using the HTTP/JSON API of the management plugin for
</I>&gt;<i> monitoring/statistics, I was wondering what kind of performance
</I>&gt;<i> implication hitting  an endpoint (ie. /channels which could return
</I>&gt;<i> thousands of json entries) every 5 seconds would be?
</I>&gt;<i>
</I>&gt;<i> Looking through the management agent code it doesn't seem to do any sort
</I>&gt;<i> of sampling/caching. Thoughts/considerations?
</I>
Yes it does, although not in the agent. The management plugin maintains 
a database of statistics for connections, channels etc (see 
rabbit_mgmt_db), so hitting such an API endpoint does not go and hit 
tons of other processes and should not be very expensive.

Ironically the most expensive thing in a management API call that 
returns lots of stuff is usually the JSON serialisation! mochijson2 is 
just not that fast. So to cut down on the work done by the management 
API itself it's well worth restricting the info items you ask for.

Which I now see is undocumented. Damn. Use something like

<A HREF="http://server:55672/api/channels?columns=name,message_stats.publish">http://server:55672/api/channels?columns=name,message_stats.publish</A>

i.e. comma-separated, dot to drill down.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019559.html">[rabbitmq-discuss] Rabbit Management API Overhead/Impact
</A></li>
	<LI>Next message: <A HREF="019562.html">[rabbitmq-discuss] Rabbit Management API Overhead/Impact
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19561">[ date ]</a>
              <a href="thread.html#19561">[ thread ]</a>
              <a href="subject.html#19561">[ subject ]</a>
              <a href="author.html#19561">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
