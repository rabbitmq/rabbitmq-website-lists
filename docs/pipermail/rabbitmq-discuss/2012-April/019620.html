<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] limits.conf not working...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20limits.conf%20not%20working...&In-Reply-To=%3CCAA3P-6QZPzTOndCyXiWP%3DNWa3tRArJuiNRRqvkc_OS79mAsMjQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019616.html">
   <LINK REL="Next"  HREF="019626.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] limits.conf not working...</H1>
    <B>Gonzalo Fernandez</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20limits.conf%20not%20working...&In-Reply-To=%3CCAA3P-6QZPzTOndCyXiWP%3DNWa3tRArJuiNRRqvkc_OS79mAsMjQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] limits.conf not working...">gonzalo.fernandez at stoneworksolutions.net
       </A><BR>
    <I>Wed Apr 18 10:56:36 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019616.html">[rabbitmq-discuss] limits.conf not working...
</A></li>
        <LI>Next message: <A HREF="019626.html">[rabbitmq-discuss] limits.conf not working...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19620">[ date ]</a>
              <a href="thread.html#19620">[ thread ]</a>
              <a href="subject.html#19620">[ subject ]</a>
              <a href="author.html#19620">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello again,

I have been trying to figure out why the File Descriptor Limit is different
on the management plugin site than the ulimit -n output for the rabbitmq
user, which is the same as the value of the limits.conf file I've edited.


In another machine, same system different rabbit version (2.7.1 insteasd of
2.8.1) it worked perfectly.
Simon said that the version could not be the problem.

&quot;No. RabbitMQ only ever *reports* on the FD limits it is seeing, it doesn't
impose any more. And this code has not changed from 2.7.1 to 2.8.1&quot;
*
*
I can't scratch my head any longer...

Has anyone had this problem before? Any thoughts?

Thanks!


2012/4/17 Gonzalo Fernandez &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gonzalo.fernandez at stoneworksolutions.net</A>&gt;

&gt;<i>
</I>&gt;<i> Things to check:
</I>&gt;<i>
</I>&gt;<i> * Have you genuinely raised the limit for the rabbitmq user? (sounds like
</I>&gt;<i> you have)
</I>&gt;<i> Yes, both with the ulimit command and on the limits.conf file
</I>&gt;<i>
</I>&gt;<i> * Is RabbitMQ actually running as the rabbitmq user?
</I>&gt;<i> Yes, here:
</I>&gt;<i>
</I>&gt;<i> *<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">patilla at test</A>:~$ ps aux | grep rabbitmq-server*
</I>&gt;<i> patilla  22942  0.0  0.0   7640   948 pts/0    S+   17:19   0:00 grep
</I>&gt;<i> --color=auto rabbitmq-server
</I>&gt;<i> *rabbitmq *29109  0.0  0.0   4096   624 pts/0    S    15:56   0:00 */bin/sh
</I>&gt;<i> /usr/sbin/rabbitmq-server*
</I>&gt;<i>
</I>&gt;<i> * Have you restarted the server? (since ulimit is only checked on &quot;login&quot;.
</I>&gt;<i>
</I>&gt;<i> I tried restarting rabbit server and rebooting the machine.
</I>&gt;<i> I get the value in limits.conf when I run ulimit -n but not on the
</I>&gt;<i> managemnet plugin site...
</I>&gt;<i>
</I>&gt;<i> Any thoughts?
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i> patilla.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2012/4/17 Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;
</I>&gt;<i>
</I>&gt;&gt;<i> On 17/04/12 16:05, Gonzalo Fernandez wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I can't find the error..... Could it be the version?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> No. RabbitMQ only ever *reports* on the FD limits it is seeing, it
</I>&gt;&gt;<i> doesn't impose any more. And this code has not changed from 2.7.1 to 2.8.1.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Things to check:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Have you genuinely raised the limit for the rabbitmq user? (sounds like
</I>&gt;&gt;<i> you have)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Is RabbitMQ actually running as the rabbitmq user?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Have you restarted the server? (since ulimit is only checked on &quot;login&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers, Simon
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Simon MacMullen
</I>&gt;&gt;<i> RabbitMQ, VMware
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120418/3f15d6a7/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120418/3f15d6a7/attachment.htm</A>&gt;
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019616.html">[rabbitmq-discuss] limits.conf not working...
</A></li>
	<LI>Next message: <A HREF="019626.html">[rabbitmq-discuss] limits.conf not working...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19620">[ date ]</a>
              <a href="thread.html#19620">[ thread ]</a>
              <a href="subject.html#19620">[ subject ]</a>
              <a href="author.html#19620">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
