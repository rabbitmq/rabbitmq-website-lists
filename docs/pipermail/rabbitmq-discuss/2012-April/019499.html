<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] What is the currently fastest way to stream messages?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20What%20is%20the%20currently%20fastest%20way%20to%20stream%0A%20messages%3F&In-Reply-To=%3C4F86B7ED.6060008%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019495.html">
   <LINK REL="Next"  HREF="019500.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] What is the currently fastest way to stream messages?</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20What%20is%20the%20currently%20fastest%20way%20to%20stream%0A%20messages%3F&In-Reply-To=%3C4F86B7ED.6060008%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] What is the currently fastest way to stream messages?">emile at rabbitmq.com
       </A><BR>
    <I>Thu Apr 12 12:09:33 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019495.html">[rabbitmq-discuss] What is the currently fastest way to stream	messages?
</A></li>
        <LI>Next message: <A HREF="019500.html">[rabbitmq-discuss] What is the currently fastest way to stream messages?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19499">[ date ]</a>
              <a href="thread.html#19499">[ thread ]</a>
              <a href="subject.html#19499">[ subject ]</a>
              <a href="author.html#19499">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matt,

On 12/04/12 07:30, Matt wrote:
&gt;<i> message patterns that I use and where throughputs are not critical. But
</I>&gt;<i> this byte array stream is throughput critical and I would appreciate any
</I>&gt;<i> comments how to tune this. 
</I>
Batching the payloads into larger chunks will offer better throughput.
For payloads of only 16 bytes the rest of the message represents a
relatively large overhead.

You might even want to raise the maximum frame size if the chunks exceed
128kb. (See frame_max in <A HREF="http://www.rabbitmq.com/configure.html">http://www.rabbitmq.com/configure.html</A>)
Raising the loopback MTU may also help throughput.

You should use auto-acks instead of relying on consumers to ack messages.
Don't use persistence, transactions or publisher confirms.
Don't use immediate of mandatory publish options.
Use a direct exchange.

If you have a very small number of queues then select a server with
fewer fast CPUs rather than many slow CPUs. Tuning the number of Erlang
schedulers (+S commandline option to erl.exe) may also help.
Make sure you have plenty of RAM to prevent paging messages to disk.

It is not possible to avoid serialisation, unless you make use of the
direct Erlang client. If you must use C# then this is not an option.

-Emile


</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019495.html">[rabbitmq-discuss] What is the currently fastest way to stream	messages?
</A></li>
	<LI>Next message: <A HREF="019500.html">[rabbitmq-discuss] What is the currently fastest way to stream messages?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19499">[ date ]</a>
              <a href="thread.html#19499">[ thread ]</a>
              <a href="subject.html#19499">[ subject ]</a>
              <a href="author.html#19499">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
