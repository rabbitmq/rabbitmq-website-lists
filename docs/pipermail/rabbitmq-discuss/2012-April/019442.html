<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to plan for RAM?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20plan%20for%20RAM%3F&In-Reply-To=%3C4F840C4E.5010204%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019437.html">
   <LINK REL="Next"  HREF="019451.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to plan for RAM?</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20plan%20for%20RAM%3F&In-Reply-To=%3C4F840C4E.5010204%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] How to plan for RAM?">simon at rabbitmq.com
       </A><BR>
    <I>Tue Apr 10 11:32:46 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019437.html">[rabbitmq-discuss] How to plan for RAM?
</A></li>
        <LI>Next message: <A HREF="019451.html">[rabbitmq-discuss] How to plan for RAM?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19442">[ date ]</a>
              <a href="thread.html#19442">[ thread ]</a>
              <a href="subject.html#19442">[ subject ]</a>
              <a href="author.html#19442">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/04/2012 2:17PM, Fran&#231;ois Beausoleil wrote:
&gt;<i> I'm trying to determine how much RAM I need for my 2 node cluster. I
</I>&gt;<i> use VMs at Rackspace.
</I>&gt;<i>
</I>&gt;<i> I currently have 2x 4 GiB RAM nodes, but I consistently hit my VM high
</I>&gt;<i> memory watermark.
</I>
Is this with 2.8.x or earlier? Versions before 2.8.0 can use large 
amounts of memory when messages are published faster than they can be 
routed. That doesn't sound like your situation, but it would be good to 
eliminate it.

&gt;<i> I have one topic exchange, with about 8 queues. The
</I>&gt;<i> routing keys are all left-anchored: my queues all use routing keys of
</I>&gt;<i> the form &quot;a.#&quot; or even &quot;#&quot;. During normal operation, I generate
</I>&gt;<i> between 5 and 20 messages per second, and at peak, more than 2000. I
</I>&gt;<i> have 2 queues which use a routing key of the form &quot;#&quot;, and I spread
</I>&gt;<i> the load so I have one queue on each node. The other queues have much
</I>&gt;<i> more restrictive routing keys, but I tried to spread the load as well.
</I>&gt;<i> The messages are compressed XML representations of Java and Scala
</I>&gt;<i> objects. Most messages are under 2 KiB, with some reaching as high as
</I>&gt;<i> 2 MiB. Consumers can keep up with producers, and the queues are empty
</I>&gt;<i> 90%+ of the time.
</I>&gt;<i>
</I>&gt;<i> Any tips on how I can plan for my RAM?
</I>
It doesn't sound like you should be using too much RAM in this scenario.

If you are using 2.8.x and seeing a large amount of RAM used, posting 
the results of &quot;rabbitmqctl report&quot; would help us figure out where it is 
going.

Cheers, Simon
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019437.html">[rabbitmq-discuss] How to plan for RAM?
</A></li>
	<LI>Next message: <A HREF="019451.html">[rabbitmq-discuss] How to plan for RAM?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19442">[ date ]</a>
              <a href="thread.html#19442">[ thread ]</a>
              <a href="subject.html#19442">[ subject ]</a>
              <a href="author.html#19442">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
