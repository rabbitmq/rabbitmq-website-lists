<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Pre-defining queue for federated exchanges?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pre-defining%20queue%20for%20federated%20exchanges%3F&In-Reply-To=%3CCAJreXKDYD1AOVaLoxXcUwPt1CwwHHn8t0QyL5b%3DmzxiGD56vug%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019614.html">
   <LINK REL="Next"  HREF="019612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Pre-defining queue for federated exchanges?</H1>
    <B>James Carr</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pre-defining%20queue%20for%20federated%20exchanges%3F&In-Reply-To=%3CCAJreXKDYD1AOVaLoxXcUwPt1CwwHHn8t0QyL5b%3DmzxiGD56vug%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Pre-defining queue for federated exchanges?">james.r.carr at gmail.com
       </A><BR>
    <I>Thu Apr 19 06:24:53 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019614.html">[rabbitmq-discuss] Pre-defining queue for federated exchanges?
</A></li>
        <LI>Next message: <A HREF="019612.html">[rabbitmq-discuss] Durable queues not surviving broker restart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19638">[ date ]</a>
              <a href="thread.html#19638">[ thread ]</a>
              <a href="subject.html#19638">[ subject ]</a>
              <a href="author.html#19638">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matthias,

Actually, the problem I'm trying to guard against isn't rabbitMQ's fault
but rather external mishaps.

Basically, a misconfigured puppet setup wiped out and re-installed rabbitMQ
on one of our upstream brokers. With the username the downsteam used to
connect gone as well as all the exchanges and queues, the publisher
connected and started publishing to an exchange that simply dropped the
messages since there were no bindings.

After thinking it over though, I've been thinking that the solution to this
situation is simply to have puppet create required users as part of the
RabbitMQ setup so the downstream can always be guaranteed to connect.

That and don't allow misconfigured puppet setups to randomly run like that.
:<i>)
</I>
Thanks,
James


On Wed, Apr 18, 2012 at 3:14 AM, Matthias Radestock
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;wrote:

&gt;<i> James,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 17/04/12 22:32, James Carr wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> One of the things keeping me up at night lately is a worry that our
</I>&gt;&gt;<i> federation links will break, the broker will lose its queues someway and
</I>&gt;&gt;<i> we'll wind up with messages being published that just get dropped.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Just to be clear, you are worried that the queues created by federation at
</I>&gt;<i> the upstream will somehow disappear?
</I>&gt;<i>
</I>&gt;<i> That would be a bug and as such is just as likely to happen as any other
</I>&gt;<i> fault.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  Is there a way we could define some kind of queue that is setup by
</I>&gt;&gt;<i> default? The only other thing I could think is to just define
</I>&gt;&gt;<i> alternate-exchanges for every exchange, slap a queue on it and set a
</I>&gt;&gt;<i> consumer on it that simply republishes when federated links are
</I>&gt;&gt;<i> established.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Looks like you are re-inventing what the federation logic already
</I>&gt;<i> provides, i.e. a means to buffer messages while the link is down.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120419/4ab34cee/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120419/4ab34cee/attachment.htm</A>&gt;
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019614.html">[rabbitmq-discuss] Pre-defining queue for federated exchanges?
</A></li>
	<LI>Next message: <A HREF="019612.html">[rabbitmq-discuss] Durable queues not surviving broker restart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19638">[ date ]</a>
              <a href="thread.html#19638">[ thread ]</a>
              <a href="subject.html#19638">[ subject ]</a>
              <a href="author.html#19638">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
