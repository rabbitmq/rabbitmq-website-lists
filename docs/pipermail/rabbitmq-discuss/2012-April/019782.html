<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cannot send message with STOMP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cannot%20send%20message%20with%20STOMP&In-Reply-To=%3C20378.30936.738699.589873%40mail.cern.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019777.html">
   <LINK REL="Next"  HREF="019785.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cannot send message with STOMP</H1>
    <B>Lionel Cons</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cannot%20send%20message%20with%20STOMP&In-Reply-To=%3C20378.30936.738699.589873%40mail.cern.ch%3E"
       TITLE="[rabbitmq-discuss] Cannot send message with STOMP">lionel.cons at cern.ch
       </A><BR>
    <I>Fri Apr 27 11:45:44 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019777.html">[rabbitmq-discuss] Cannot send message with STOMP
</A></li>
        <LI>Next message: <A HREF="019785.html">[rabbitmq-discuss] Cannot send message with STOMP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19782">[ date ]</a>
              <a href="thread.html#19782">[ thread ]</a>
              <a href="subject.html#19782">[ subject ]</a>
              <a href="author.html#19782">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Steve Powell writes:
 &gt; Here is the problem: you are forcing us to escape colons. Why?

Without colon escaping, the header line &quot;a:b:c&quot; is ambiguous and can be
parsed either as (name &quot;a&quot; &amp; value &quot;b:c&quot;) or (name &quot;a:b&quot; &amp; value &quot;c&quot;).

In STOMP 1.1, the line above is invalid and, depending on the exact header,
it should appear as &quot;a:b\cc&quot; or &quot;a\cb:c&quot;.

 &gt; I really don't understand this. 1.1 limits headers to UTF-8 sequences.
 &gt; There is no conceivable benefit in doing this -- all binary sequences
 &gt; could have been used (with escapes for a few) but you chose to restrict
 &gt; it.

This came under the assumption that headers usually are a table of text
strings (as opposed to binary strings). With Unicode, most text strings of
most languages can be expressed. With UTF-8, a standard encoding is defined
and it is backward compatible with US-ASCII, that many people use.

The reason behind this being in the spec is that the broker may need to
understand (= decode) what is in the header, for instance for envelope based
routing (e.g. a topic exchange or JMS-style message selectors). If the
encoding is not defined, how do I know how to encode/decode the lowercase e
with acute accent? Should it be 0xE9 (ISO-8859-1) or 0xC3A9 (UTF-8) or
0x00E9 (UTF-16)?

UTF-8 was not the only solution but it was felt standard, widely available,
compact and, last not least, backward compatible with US-ASCII. Another
option would have been MIME-style encoding such as &quot;=?ISO-8859-1?Q?a?=&quot;
which is more flexible (allows per header entry encoding) but quite noisy
and probably far less easy to implement than UTF-8. Maybe this will be
reconsidered in a later spec.

 &gt; Well, my point is we had (almost) enough already and 1.1 gave us less.
 &gt; How is any binary OCTET sequence worse than any UTF-8 text string?

Because it lacks information on how to decode/interpret it.

Cheers,

Lionel
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019777.html">[rabbitmq-discuss] Cannot send message with STOMP
</A></li>
	<LI>Next message: <A HREF="019785.html">[rabbitmq-discuss] Cannot send message with STOMP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19782">[ date ]</a>
              <a href="thread.html#19782">[ thread ]</a>
              <a href="subject.html#19782">[ subject ]</a>
              <a href="author.html#19782">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
