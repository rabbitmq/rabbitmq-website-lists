<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] replication related questions in cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20replication%20related%20questions%20in%20cluster&In-Reply-To=%3C4F840E35.70201%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019438.html">
   <LINK REL="Next"  HREF="019429.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] replication related questions in cluster</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20replication%20related%20questions%20in%20cluster&In-Reply-To=%3C4F840E35.70201%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] replication related questions in cluster">simon at rabbitmq.com
       </A><BR>
    <I>Tue Apr 10 11:40:53 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019438.html">[rabbitmq-discuss] replication related questions in cluster
</A></li>
        <LI>Next message: <A HREF="019429.html">[rabbitmq-discuss] pub/sub and disconnections handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19444">[ date ]</a>
              <a href="thread.html#19444">[ thread ]</a>
              <a href="subject.html#19444">[ subject ]</a>
              <a href="author.html#19444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/04/2012 7:24PM, Nithya Vijayakumar wrote:
&gt;<i> 1. When we do a publish to a rabbitmq node, when does the publish
</I>&gt;<i> method return? Soon after that node got the data? or after replication
</I>&gt;<i> happened? Is it possible to do synchronous publish with replication?
</I>&gt;<i> We are trying to see if we can avoid the scenario that a node might go
</I>&gt;<i> down soon after publish and before the data got replicated.
</I>&gt;<i> Transactions seem costly and the async behavior of publisher confirms
</I>&gt;<i> is not suiting us well.
</I>
Publish will return as soon as the message has gone out on the wire from 
the client's perspective. There's no guarantee the server has even seen 
it. This is to keep it asynchronous.

If you want a synchronous publish, wrap it in a transaction, or use the 
waitForConfirms methods in our clients. In recent RabbitMQ versions 
transactions are implemented in terms of confirms, so they are only more 
costly than confirms in that they force synchrony over the network.

&gt;<i> 2. When a node restarts, it cleans up the queues and joins the
</I>&gt;<i> previously running node (logical master) and starts listening from
</I>&gt;<i> then on. Even if the second node has the exact same copy of the data
</I>&gt;<i> that was persisted as the current master, it still gets deleted.
</I>&gt;<i> Wondering if there is an option to preserve current data in mnesia
</I>&gt;<i> during restarts
</I>
The trouble is that it's hard for the restarted slave to know what's 
happened while it was down.

&gt;<i> or possibly synchronize the current set of data from
</I>&gt;<i> the logical master.
</I>
Not at the moment. We hope to introduce this in a future version.

Cheers, Simon
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019438.html">[rabbitmq-discuss] replication related questions in cluster
</A></li>
	<LI>Next message: <A HREF="019429.html">[rabbitmq-discuss] pub/sub and disconnections handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19444">[ date ]</a>
              <a href="thread.html#19444">[ thread ]</a>
              <a href="subject.html#19444">[ subject ]</a>
              <a href="author.html#19444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
