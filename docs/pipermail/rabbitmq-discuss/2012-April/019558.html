<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Routing on multiple criteria but hitting	only one consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Routing%20on%20multiple%20criteria%20but%20hitting%0A%09only%20one%20consumer&In-Reply-To=%3CD2068BEA-40E2-4A67-AD27-A2A53265F466%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019549.html">
   <LINK REL="Next"  HREF="019560.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Routing on multiple criteria but hitting	only one consumer</H1>
    <B>Graham Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Routing%20on%20multiple%20criteria%20but%20hitting%0A%09only%20one%20consumer&In-Reply-To=%3CD2068BEA-40E2-4A67-AD27-A2A53265F466%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] Routing on multiple criteria but hitting	only one consumer">netsinque at gmail.com
       </A><BR>
    <I>Mon Apr 16 12:51:27 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019549.html">[rabbitmq-discuss] Routing on multiple criteria but hitting only one consumer
</A></li>
        <LI>Next message: <A HREF="019560.html">[rabbitmq-discuss] Routing on multiple criteria but hitting only one consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19558">[ date ]</a>
              <a href="thread.html#19558">[ thread ]</a>
              <a href="subject.html#19558">[ subject ]</a>
              <a href="author.html#19558">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 16/04/2012, at 7:58 PM, Emile Joubert wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> On 15/04/12 10:04, AgileZebra wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> * We have host1 and host2.
</I>&gt;&gt;<i> * Host1 handles jobs of classA and classB; host2 handles jobs of
</I>&gt;&gt;<i> classB and classC.
</I>&gt;&gt;<i> * If we route a job of classA, only host1 will pick it up; if we route
</I>&gt;&gt;<i> a job of classB, either host1 or host2 will pick it up (based on their
</I>&gt;&gt;<i> current load / first available) but never both.
</I>&gt;<i> 
</I>&gt;<i> Can you constrain the routing so that messages are only routed to one
</I>&gt;<i> queue, and you have one queue per class? Then host1 can subscribe to the
</I>&gt;<i> queues for classA and classB, and host2 can subscribe to the queues for
</I>&gt;<i> classB and classC.
</I>
Unfortunately not - there are tens of thousands of 'classes' and only tens of worker hosts. 
I tried to make the example fairly simple and generic but I guess I should have given you more real details. The classes are actually databases. There are databases for every hour of every day of every year, each with gigs and gigs of data, The databases are replicated in a semi-stripped, semi-random fashion to multiple nodes. They move around regularly depending on which data is hot and which is not, and in and out of SSD filesystems, or growing or shrinking their number of clones as required. We have a database that maps each task in a job to a list of locations where the database live and we want to allow the workers to take jobs as their workload dictates and naturally balance. We're already achieving this with our own broker but were really hoping to bypass it.  
</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019549.html">[rabbitmq-discuss] Routing on multiple criteria but hitting only one consumer
</A></li>
	<LI>Next message: <A HREF="019560.html">[rabbitmq-discuss] Routing on multiple criteria but hitting only one consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19558">[ date ]</a>
              <a href="thread.html#19558">[ thread ]</a>
              <a href="subject.html#19558">[ subject ]</a>
              <a href="author.html#19558">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
