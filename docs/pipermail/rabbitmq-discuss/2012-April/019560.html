<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Routing on multiple criteria but hitting only one consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Routing%20on%20multiple%20criteria%20but%20hitting%0A%20only%20one%20consumer&In-Reply-To=%3C4F8C131A.9000307%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019558.html">
   <LINK REL="Next"  HREF="019544.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Routing on multiple criteria but hitting only one consumer</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Routing%20on%20multiple%20criteria%20but%20hitting%0A%20only%20one%20consumer&In-Reply-To=%3C4F8C131A.9000307%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Routing on multiple criteria but hitting only one consumer">emile at rabbitmq.com
       </A><BR>
    <I>Mon Apr 16 13:39:54 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019558.html">[rabbitmq-discuss] Routing on multiple criteria but hitting	only one consumer
</A></li>
        <LI>Next message: <A HREF="019544.html">[rabbitmq-discuss] Problems with umbrella make files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19560">[ date ]</a>
              <a href="thread.html#19560">[ thread ]</a>
              <a href="subject.html#19560">[ subject ]</a>
              <a href="author.html#19560">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Graham,

On 16/04/12 12:51, Graham Jones wrote:
&gt;<i> On 16/04/2012, at 7:58 PM, Emile Joubert wrote:
</I>&gt;&gt;<i> On 15/04/12 10:04, AgileZebra wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> * We have host1 and host2. * Host1 handles jobs of classA and
</I>&gt;&gt;&gt;<i> classB; host2 handles jobs of classB and classC. * If we route a
</I>&gt;&gt;&gt;<i> job of classA, only host1 will pick it up; if we route a job of
</I>&gt;&gt;&gt;<i> classB, either host1 or host2 will pick it up (based on their 
</I>&gt;&gt;&gt;<i> current load / first available) but never both.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Can you constrain the routing so that messages are only routed to
</I>&gt;&gt;<i> one queue, and you have one queue per class? Then host1 can
</I>&gt;&gt;<i> subscribe to the queues for classA and classB, and host2 can
</I>&gt;&gt;<i> subscribe to the queues for classB and classC.
</I>&gt;<i> 
</I>&gt;<i> Unfortunately not - there are tens of thousands of 'classes' and only
</I>&gt;<i> tens of worker hosts.
</I>
Bear in mind that consumers are permitted to subscribe to multiple queues.

There is no way of restricting the delivery of multiple copies of a
message so that only a single consumer receives a single copy of the
message. If a message is routed to multiple queues then the broker will
attempt to deliver all copies independently.

You should reconsider the meaning of messages, which may be too heavily
overloaded.  Possibly introduce a message type that means &quot;piece of work
to be performed once on a single host&quot;, and constrain the routing of
such messages appropriately.


-Emile





</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019558.html">[rabbitmq-discuss] Routing on multiple criteria but hitting	only one consumer
</A></li>
	<LI>Next message: <A HREF="019544.html">[rabbitmq-discuss] Problems with umbrella make files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19560">[ date ]</a>
              <a href="thread.html#19560">[ thread ]</a>
              <a href="subject.html#19560">[ subject ]</a>
              <a href="author.html#19560">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
