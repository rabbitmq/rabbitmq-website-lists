<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] One message instance in couple of queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20One%20message%20instance%20in%20couple%20of%20queues&In-Reply-To=%3CCAFqMQdV2EJSbA6FJNc%2B11tFUtiL3cuQine%3DXgQkb7o99%3Dur%2B6A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019683.html">
   <LINK REL="Next"  HREF="019778.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] One message instance in couple of queues</H1>
    <B>Alexey Ostin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20One%20message%20instance%20in%20couple%20of%20queues&In-Reply-To=%3CCAFqMQdV2EJSbA6FJNc%2B11tFUtiL3cuQine%3DXgQkb7o99%3Dur%2B6A%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] One message instance in couple of queues">ooostin at gmail.com
       </A><BR>
    <I>Sat Apr 21 00:46:22 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019683.html">[rabbitmq-discuss] One message instance in couple of queues
</A></li>
        <LI>Next message: <A HREF="019778.html">[rabbitmq-discuss] One message instance in couple of queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19705">[ date ]</a>
              <a href="thread.html#19705">[ thread ]</a>
              <a href="subject.html#19705">[ subject ]</a>
              <a href="author.html#19705">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Let me show one more example.

I've got some moderation queue. Whenever a moderator locks message (or
several messages) for moderation, it moves from main queue to personal
moderator's queue. Just to perform some long time lock (It can be minute or
hour, thus I can't use ack/nack to hold message in main queue). The goal is
to monitor all moderators queues as well as main one. The problem is that I
do not know all moderator's queues and I can't just monitor some fixed list
because it regenerates dynamically.

I've just thought about using separate exchange for moderator's queues. It
can help with monitoring, I'd watch over whole exchange.
But it is still interesting whether I can publish message to several queues
and consume it from them all at once. Sounds like gibberish.

To be honest I've got one more problem to solve - it is to automatically
release these locks (put a message from moderator's queue back to main) by
timeout, but it should be other conversation I think :)

Best regards, Ostin.

20 &#1072;&#1087;&#1088;&#1077;&#1083;&#1103; 2012 &#1075;. 21:00 &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1100; Simon MacMullen
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;&#1085;&#1072;&#1087;&#1080;&#1089;&#1072;&#1083;:

&gt;<i> On 20/04/12 17:27, ostin wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Example application with topic exchange:
</I>&gt;&gt;<i> I push a message to server1.app1 queue and an other one to
</I>&gt;&gt;<i> server1.app2 queue. I monitor server1 queue to determine count of
</I>&gt;&gt;<i> processing messages on server 1. After app1 ends processing message it
</I>&gt;&gt;<i> shold be deleted from both queues: from app1 to prevent duplicate
</I>&gt;&gt;<i> processing, from server1 to have valid stats for monitoring. I assume
</I>&gt;&gt;<i> that there can be many applications with random names, so I cant
</I>&gt;&gt;<i> monitor just count of messages in app* queues.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If you want to make sure that a given message is only ever consumed from
</I>&gt;<i> server1.app1 OR server1.app2, why not have only a single queue and have
</I>&gt;<i> both applications consume from it?
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, VMware
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120421/44d4a36f/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120421/44d4a36f/attachment.htm</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019683.html">[rabbitmq-discuss] One message instance in couple of queues
</A></li>
	<LI>Next message: <A HREF="019778.html">[rabbitmq-discuss] One message instance in couple of queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19705">[ date ]</a>
              <a href="thread.html#19705">[ thread ]</a>
              <a href="subject.html#19705">[ subject ]</a>
              <a href="author.html#19705">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
