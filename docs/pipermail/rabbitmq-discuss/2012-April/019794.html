<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Can't get cluster to work on 2 Windows Machines
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%27t%20get%20cluster%20to%20work%20on%202%20Windows%20Machines&In-Reply-To=%3Cb736e7af-0ddb-4ff6-b4a1-fc0521214f28%40f27g2000yqc.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019800.html">
   <LINK REL="Next"  HREF="019813.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Can't get cluster to work on 2 Windows Machines</H1>
    <B>caloggins</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%27t%20get%20cluster%20to%20work%20on%202%20Windows%20Machines&In-Reply-To=%3Cb736e7af-0ddb-4ff6-b4a1-fc0521214f28%40f27g2000yqc.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Can't get cluster to work on 2 Windows Machines">christopher.loggins at gmail.com
       </A><BR>
    <I>Fri Apr 27 17:44:48 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019800.html">[rabbitmq-discuss] amqp_client upgrade bug
</A></li>
        <LI>Next message: <A HREF="019813.html">[rabbitmq-discuss] Can't get cluster to work on 2 Windows	Machines
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19794">[ date ]</a>
              <a href="thread.html#19794">[ thread ]</a>
              <a href="subject.html#19794">[ subject ]</a>
              <a href="author.html#19794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm attempting to get a cluster working between a 2008 R2 (rabbit1)
and Windows 7 (rabbit2). I've copied the .erlang.cookie files to all
the directories, opened ports on the firewalls, etc. I can do a status
locally, but not remotely. As illustrated below, rabbitmqctl status
shows the two nodes are not talking. What can/should I next check?

rabbit1 status:
--------------------
c:\Program Files (x86)\RabbitMQ Server
\rabbitmq_server-2.8.1\sbin&gt;rabbitmqctl status
Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A> ...
[{pid,6700},
 {running_applications,
     [{rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;2.8.1&quot;},
      {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;2.8.1&quot;},
      {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;2.8.1&quot;},
      {rabbit,&quot;RabbitMQ&quot;,&quot;2.8.1&quot;},
      {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.9&quot;},
      {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.2.1&quot;},
      {rabbitmq_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;2.8.1&quot;},
      {webmachine,&quot;webmachine&quot;,&quot;1.7.0-rmq2.8.1-hg&quot;},
      {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;1.3-rmq2.8.1-git&quot;},
      {inets,&quot;INETS  CXC 138 49&quot;,&quot;5.9&quot;},
      {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.7&quot;},
      {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.18.1&quot;},
      {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.15.1&quot;}]},
 {os,{win32,nt}},
 {erlang_version,
     &quot;Erlang R15B01 (erts-5.9.1) [64-bit] [smp:2:2] [async-threads:
30]\n&quot;},
 {memory,
     [{total,33205360},
      {processes,12402021},
      {processes_used,12401872},
      {system,20803339},
      {atom,561761},
      {atom_used,544299},
      {binary,88496},
      {code,15357746},
      {ets,1272920}]},
 {vm_memory_high_watermark,0.39999999981371526},
 {vm_memory_limit,1717800140},
 {file_descriptors,
     [{total_limit,924},{total_used,4},{sockets_limit,829},
{sockets_used,2}]},
 {processes,[{limit,1048576},{used,176}]},
 {run_queue,0},
 {uptime,1368}]
...done.

c:\Program Files (x86)\RabbitMQ Server
\rabbitmq_server-2.8.1\sbin&gt;rabbitmqctl -n <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A> status
Status of node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A>' ...
Error: unable to connect to node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A>': nodedown

DIAGNOSTICS
===========

nodes in question: ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A>']

hosts, their running nodes and ports:
- rabbit2: [{rabbit,45001}]

current node details:
- node name: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl6126 at rabbit1</A>
- home dir: W:\
- cookie hash: 6jCR7HdybYQeos3l+beiNQ==

rabbit2 status:
--------------------
c:\Program Files (x86)\RabbitMQ Server
\rabbitmq_server-2.8.1\sbin&gt;rabbitmqctl status
Status of node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A>' ...
[{pid,10024},
 {running_applications,
     [{rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;2.8.1&quot;},
      {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;2.8.1&quot;},
      {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;2.8.1&quot;},
      {rabbit,&quot;RabbitMQ&quot;,&quot;2.8.1&quot;},
      {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.9&quot;},
      {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.2.1&quot;},
      {rabbitmq_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;2.8.1&quot;},
      {webmachine,&quot;webmachine&quot;,&quot;1.7.0-rmq2.8.1-hg&quot;},
      {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;1.3-rmq2.8.1-git&quot;},
      {inets,&quot;INETS  CXC 138 49&quot;,&quot;5.9&quot;},
      {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.7&quot;},
      {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.18.1&quot;},
      {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.15.1&quot;}]},
 {os,{win32,nt}},
 {erlang_version,
     &quot;Erlang R15B01 (erts-5.9.1) [64-bit] [smp:8:8] [async-threads:
30]\n&quot;},
 {memory,
     [{total,34142224},
      {processes,12659829},
      {processes_used,12650632},
      {system,21482395},
      {atom,561761},
      {atom_used,544353},
      {binary,118144},
      {code,15357746},
      {ets,1280456}]},
 {vm_memory_high_watermark,0.4},
 {vm_memory_limit,3416358912},
 {file_descriptors,
     [{total_limit,924},{total_used,4},{sockets_limit,829},
{sockets_used,2}]},
 {processes,[{limit,1048576},{used,182}]},
 {run_queue,0},
 {uptime,1657}]
...done.


c:\Program Files (x86)\RabbitMQ Server
\rabbitmq_server-2.8.1\sbin&gt;rabbitmqctl -n <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A> status
Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A> ...
Error: unable to connect to node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A>: nodedown

DIAGNOSTICS
===========

nodes in question: [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A>]

hosts, their running nodes and ports:
- rabbit1: [{rabbit,45001}]

current node details:
- node name: '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl17565 at rabbit2</A>'
- home dir: W:\
- cookie hash: 6jCR7HdybYQeos3l+beiNQ==

rabbit1 debug:
---------------------
** Found 0 name clashes in code paths

+---+   +---+
|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   +---+   +-------+
</I>|<i>                   |
</I>|<i> RabbitMQ  +---+   |
</I>|<i>           |   |   |
</I>|<i>   v2.8.1  +---+   |
</I>|<i>                   |
</I>+-------------------+
AMQP 0-9-1 / 0-9 / 0-8
Copyright (C) 2007-2012 VMware, Inc.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A>
app descriptor : c:/Program Files (x86)/RabbitMQ Server/
rabbitmq_server-2.8.1/sbin/../ebin/rabbit.app
home dir       : C:\Windows
config file(s) : c:/Users/christopher.loggins/AppData/Roaming/RabbitMQ/
rabbitmq.config
cookie hash    : 6jCR7HdybYQeos3l+beiNQ==
log            : C:/Users/christopher.loggins/AppData/Roaming/RabbitMQ/
log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1.log</A>
sasl log       : C:/Users/christopher.loggins/AppData/Roaming/RabbitMQ/
log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1-sasl.log</A>
database dir   : c:/Users/christopher.loggins/AppData/Roaming/RabbitMQ/
db/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1-mnesia</A>
erlang version : 5.9.1

-- rabbit boot start
starting file handle cache
server                                     ...done
starting worker
pool                                                  ...done
starting
database                                                     ...done
starting database
sync                                                ...done
starting codec correctness
check                                      ...done
-- external infrastructure ready
starting plugin
registry                                              ...done
starting auth mechanism cr-
demo                                       ...done
starting auth mechanism
amqplain                                      ...done
starting auth mechanism
plain                                         ...done
starting statistics event
manager                                     ...done
starting logging
server                                               ...done
starting exchange type
direct                                         ...done
starting exchange type
fanout                                         ...done
starting exchange type
headers                                        ...done
starting exchange type
topic                                          ...done
-- kernel ready
starting alarm
handler                                                ...done
starting node
monitor                                                 ...done
starting cluster
delegate                                             ...done
starting guid
generator                                               ...done
starting memory
monitor                                               ...done
-- core initialized
starting management
agent                                             ...done
starting exchange, queue and binding
recovery                         ...done
starting configured
definitions                                       ...done
starting empty DB
check                                               ...done
starting mirror queue slave
sup                                       ...done
starting adding mirrors to
queues                                     ...done
-- message delivery logic ready
starting error log
relay                                              ...done
starting
networking                                                   ...done
starting direct
client                                                ...done
starting notify cluster
nodes                                         ...done

broker running
Eshell V5.9.1  (abort with ^G)
(<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A>)1&gt;

rabbit2 debug:
--------------------
** Found 0 name clashes in code paths

+---+   +---+
|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   +---+   +-------+
</I>|<i>                   |
</I>|<i> RabbitMQ  +---+   |
</I>|<i>           |   |   |
</I>|<i>   v2.8.1  +---+   |
</I>|<i>                   |
</I>+-------------------+
AMQP 0-9-1 / 0-9 / 0-8
Copyright (C) 2007-2012 VMware, Inc.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A>
app descriptor : c:/Program Files (x86)/RabbitMQ Server/
rabbitmq_server-2.8.1/sbin/../ebin/rabbit.app
home dir       : C:\Windows
config file(s) : c:/Users/christopher.loggins/AppData/Roaming/RabbitMQ/
rabbitmq.config
cookie hash    : 6jCR7HdybYQeos3l+beiNQ==
log            : C:/Users/christopher.loggins/AppData/Roaming/RabbitMQ/
log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2.log</A>
sasl log       : C:/Users/christopher.loggins/AppData/Roaming/RabbitMQ/
log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2-sasl.log</A>
database dir   : c:/Users/christopher.loggins/AppData/Roaming/RabbitMQ/
db/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2-mnesia</A>
erlang version : 5.9.1

-- rabbit boot start
starting file handle cache
server                                     ...done
starting worker
pool                                                  ...done
starting
database                                                     ...done
starting database
sync                                                ...done
starting codec correctness
check                                      ...done
-- external infrastructure ready
starting plugin
registry                                              ...done
starting auth mechanism cr-
demo                                       ...done
starting auth mechanism
amqplain                                      ...done
starting auth mechanism
plain                                         ...done
starting statistics event
manager                                     ...done
starting logging
server                                               ...done
starting exchange type
direct                                         ...done
starting exchange type
fanout                                         ...done
starting exchange type
headers                                        ...done
starting exchange type
topic                                          ...done
-- kernel ready
starting alarm
handler                                                ...done
starting node
monitor                                                 ...done
starting cluster
delegate                                             ...done
starting guid
generator                                               ...done
starting memory
monitor                                               ...done
-- core initialized
starting management
agent                                             ...done
starting exchange, queue and binding
recovery                         ...done
starting configured
definitions                                       ...done
starting empty DB
check                                               ...done
starting mirror queue slave
sup                                       ...done
starting adding mirrors to
queues                                     ...done
-- message delivery logic ready
starting error log
relay                                              ...done
starting
networking                                                   ...done
starting direct
client                                                ...done
starting notify cluster
nodes                                         ...done

broker running
Eshell V5.9.1  (abort with ^G)
(<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A>)1&gt;
win32sysinfo:Erlang has closed.ok
(<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A>)2&gt;

config on both nodes:
------------------------------
[
	{kernel,[{inet_dist_listen_min,45001},{inet_dist_listen_max,45001}]}
].
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019800.html">[rabbitmq-discuss] amqp_client upgrade bug
</A></li>
	<LI>Next message: <A HREF="019813.html">[rabbitmq-discuss] Can't get cluster to work on 2 Windows	Machines
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19794">[ date ]</a>
              <a href="thread.html#19794">[ thread ]</a>
              <a href="subject.html#19794">[ subject ]</a>
              <a href="author.html#19794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
