<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Active-active crash report
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Active-active%20crash%20report&In-Reply-To=%3CCAFWGgNH5c9eJfVa3w9Sks%2BwtF5VoBVPWGgxA54ECcZ0y3KCn-w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019773.html">
   <LINK REL="Next"  HREF="019776.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Active-active crash report</H1>
    <B>Vadim Chekan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Active-active%20crash%20report&In-Reply-To=%3CCAFWGgNH5c9eJfVa3w9Sks%2BwtF5VoBVPWGgxA54ECcZ0y3KCn-w%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Active-active crash report">kot.begemot at gmail.com
       </A><BR>
    <I>Fri Apr 27 01:31:05 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019773.html">[rabbitmq-discuss] Active-active crash report
</A></li>
        <LI>Next message: <A HREF="019776.html">[rabbitmq-discuss] Active-active crash report
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19775">[ date ]</a>
              <a href="thread.html#19775">[ thread ]</a>
              <a href="subject.html#19775">[ subject ]</a>
              <a href="author.html#19775">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok, I got it again.
3 nodes. Stop slave, restart app(client), bring slave back online, stop
master, restart app, bring master back online, BOOM!
So here are logs from both nodes, the one which I shutdown (dev-2) and the
one which failed unexpectedly (dev-3)

dev-2 was the master node and when I stopped it, it brought dev-3 node down
with it.
Did everything started because of this?
&gt;<i> Reason:     reached_max_restart_intensity
</I>
Vadim

dev-3 log :
===============================================
=INFO REPORT==== 26-Apr-2012::16:50:38 ===
Management agent started.

=INFO REPORT==== 26-Apr-2012::16:50:38 ===
Management plugin started. Port: 55672, path: /

=INFO REPORT==== 26-Apr-2012::16:51:07 ===
    application: rabbitmq_management
    exited: shutdown
    type: permanent

=INFO REPORT==== 26-Apr-2012::16:51:08 ===
stopped TCP Listener on 0.0.0.0:5672
===============================================

dev-3-sasl.log
===============================================
=SUPERVISOR REPORT==== 26-Apr-2012::16:51:07 ===
     Supervisor: {local,rabbit_mgmt_sup}
     Context:    child_terminated
     Reason:     shutdown
     Offender:   [{pid,&lt;0.396.0&gt;},
                  {name,mirroring},
                  {mfa,
                      {mirrored_supervisor,start_internal,
                          [rabbit_mgmt_sup,
                           [{rabbit_mgmt_db,
                                {rabbit_mgmt_db,start_link,[]},
                                permanent,4294967295,worker,
                                [rabbit_mgmt_db]}]]}},
                  {restart_type,permanent},
                  {shutdown,4294967295},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 26-Apr-2012::16:51:07 ===
     Supervisor: {local,rabbit_mgmt_sup}
     Context:    shutdown
     Reason:     reached_max_restart_intensity
     Offender:   [{pid,&lt;0.396.0&gt;},
                  {name,mirroring},
                  {mfa,
                      {mirrored_supervisor,start_internal,
                          [rabbit_mgmt_sup,
                           [{rabbit_mgmt_db,
                                {rabbit_mgmt_db,start_link,[]},
                                permanent,4294967295,worker,
                                [rabbit_mgmt_db]}]]}},
                  {restart_type,permanent},
                  {shutdown,4294967295},
                  {child_type,worker}]

===============================================

dev-2 log
===============================================
=INFO REPORT==== 26-Apr-2012::16:51:07 ===
Stopping Rabbit

=INFO REPORT==== 26-Apr-2012::16:51:07 ===
    application: rabbitmq_management_visualiser
    exited: stopped
    type: permanent

=INFO REPORT==== 26-Apr-2012::16:51:07 ===
    application: rabbitmq_management
    exited: stopped
    type: permanent

=INFO REPORT==== 26-Apr-2012::16:51:07 ===
    application: rabbitmq_management_agent
    exited: stopped
    type: permanent

=INFO REPORT==== 26-Apr-2012::16:51:07 ===
stopped TCP Listener on 0.0.0.0:5672

=INFO REPORT==== 26-Apr-2012::16:51:08 ===
rabbit on node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-3</A>' down

=INFO REPORT==== 26-Apr-2012::16:51:08 ===
Mirrored-queue (queue 'Advertiser-ONYX' in vhost '/'): Slave
&lt;'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>'.1.265.0&gt; saw deaths of mirrors
&lt;'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-3</A>'.2.290.0&gt;

=INFO REPORT==== 26-Apr-2012::16:51:08 ===
Mirrored-queue (queue 'Search-JROSE6420' in vhost '/'): Slave
&lt;'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>'.1.276.0&gt; saw deaths of mirrors
&lt;'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-3</A>'.2.328.0&gt;

=INFO REPORT==== 26-Apr-2012::16:51:08 ===
Mirrored-queue (queue 'Advertiser-DHOHMEYERGX280' in vhost '/'): Slave
&lt;'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>'.1.268.0&gt; saw deaths of mirrors
&lt;'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-3</A>'.2.288.0&gt;

=INFO REPORT==== 26-Apr-2012::16:51:08 ===
Mirrored-queue (queue 'CustomerAdmin-DHOHMEYERGX280' in vhost '/'): Slave
&lt;'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>'.1.270.0&gt; saw deaths of mirrors
&lt;'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-3</A>'.2.294.0&gt;

=INFO REPORT==== 26-Apr-2012::16:51:08 ===
Mirrored-queue (queue 'Tracking-JROSE6420' in vhost '/'): Slave
&lt;'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>'.1.250.0&gt; saw deaths of mirrors
&lt;'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-3</A>'.2.247.0&gt;

=ERROR REPORT==== 26-Apr-2012::16:51:08 ===
** Generic server rabbit_mirror_queue_slave_sup terminating
** Last message in was {'EXIT',&lt;0.127.0&gt;,shutdown}
** When Server state == {state,
                         {local,rabbit_mirror_queue_slave_sup},
                         simple_one_for_one_terminate,
                         [{child,undefined,rabbit_mirror_queue_slave,
                           {rabbit_mirror_queue_slave,start_link,[]},
                           temporary,4294967295,worker,
                           [rabbit_mirror_queue_slave]}],
                         {dict,11,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],
                            [[&lt;0.265.0&gt;,
                              {amqqueue,

{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;Advertiser-ONYX&quot;&gt;&gt;},
                               false,false,none,
                               [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;},
                                {&lt;&lt;&quot;x-message-ttl&quot;&gt;&gt;,signedint,1200000}],
                               &lt;3067.289.0&gt;,
                               [&lt;3065.334.0&gt;],
                               all}]],
                            [],
                            [[undefined,
                              {amqqueue,
                               {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
                                &lt;&lt;&quot;Advertiser-heartbeat-DHOHMEYERGX280&quot;&gt;&gt;},
                               false,true,&lt;3065.24765.0&gt;,
                               [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;}],
                               &lt;3065.24784.0&gt;,
                               [&lt;3067.12370.2&gt;],
                               all}],
                             [&lt;0.6730.0&gt;,
                              {amqqueue,
                               {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
                                &lt;&lt;&quot;Advertiser-heartbeat-DHOHMEYERGX280&quot;&gt;&gt;},
                               false,true,&lt;3065.14349.1&gt;,
                               [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;}],
                               &lt;3065.14370.1&gt;,[],all}]],
                            [[&lt;0.268.0&gt;,
                              {amqqueue,
                               {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
                                &lt;&lt;&quot;Advertiser-DHOHMEYERGX280&quot;&gt;&gt;},
                               false,false,none,
                               [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;},
                                {&lt;&lt;&quot;x-message-ttl&quot;&gt;&gt;,signedint,1200000}],
                               &lt;3067.287.0&gt;,
                               [&lt;3065.332.0&gt;],
                               all}]],
                            [],
                            [[&lt;0.270.0&gt;,
                              {amqqueue,
                               {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
                                &lt;&lt;&quot;CustomerAdmin-DHOHMEYERGX280&quot;&gt;&gt;},
                               false,false,none,
                               [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;},
                                {&lt;&lt;&quot;x-message-ttl&quot;&gt;&gt;,signedint,1200000}],
                               &lt;3067.295.0&gt;,
                               [&lt;3065.338.0&gt;],
                               all}]],
                            [],
                            [[&lt;0.272.0&gt;,
                              {amqqueue,
                               {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
                                &lt;&lt;&quot;Sales-DHOHMEYERGX280&quot;&gt;&gt;},
                               false,false,none,
                               [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;},
                                {&lt;&lt;&quot;x-message-ttl&quot;&gt;&gt;,signedint,1200000}],
                               &lt;3067.317.0&gt;,
                               [&lt;3065.356.0&gt;],
                               all}]],
                            [[&lt;0.250.0&gt;,
                              {amqqueue,
                               {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
                                &lt;&lt;&quot;Tracking-JROSE6420&quot;&gt;&gt;},
                               false,false,none,
                               [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;},
                                {&lt;&lt;&quot;x-message-ttl&quot;&gt;&gt;,signedint,1200000}],
                               &lt;3067.247.0&gt;,
                               [&lt;3065.249.0&gt;],
                               all}]],
                            [[&lt;0.274.0&gt;,
                              {amqqueue,
                               {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
                                &lt;&lt;&quot;RelatedLinks-ROGERMOORE&quot;&gt;&gt;},
                               false,false,none,
                               [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;},
                                {&lt;&lt;&quot;x-message-ttl&quot;&gt;&gt;,signedint,1200000}],
                               &lt;3067.331.0&gt;,
                               [&lt;3065.370.0&gt;],
                               all}]],
                            [[&lt;0.252.0&gt;,
                              {amqqueue,
                               {resource,&lt;&lt;&quot;ActivityLogging&quot;&gt;&gt;,queue,

&lt;&lt;&quot;vsw.activitylogging.conversion.pendingconversion&quot;&gt;&gt;},
                               true,false,none,
                               [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;}],
                               &lt;3067.253.0&gt;,
                               [&lt;3065.257.0&gt;],
                               all}]],
                            [[&lt;0.276.0&gt;,
                              {amqqueue,

{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;Search-JROSE6420&quot;&gt;&gt;},
                               false,false,none,
                               [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;},
                                {&lt;&lt;&quot;x-message-ttl&quot;&gt;&gt;,signedint,1200000}],
                               &lt;3067.26259.1&gt;,
                               [&lt;3065.4161.0&gt;],
                               all}]],
                            [[&lt;0.261.0&gt;,
                              {amqqueue,
                               {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
                                &lt;&lt;&quot;RelatedLinks-ONYX&quot;&gt;&gt;},
                               false,false,none,
                               [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;},
                                {&lt;&lt;&quot;x-message-ttl&quot;&gt;&gt;,signedint,1200000}],
                               &lt;3067.277.0&gt;,
                               [&lt;3065.322.0&gt;],
                               all}]],
                            []}}},
                         10,10,[],rabbit_mirror_queue_slave_sup,[]}
** Reason for termination ==
** {badarg,[{erlang,unlink,[undefined]},
            {supervisor2,'-terminate_simple_children/3-fun-0-',4},
            {dict,fold_bucket,3},
            {dict,fold_seg,4},
            {dict,fold_segs,4},
            {supervisor2,terminate_simple_children,3},
            {supervisor2,terminate,2},
            {gen_server,terminate,6}]}

=INFO REPORT==== 26-Apr-2012::16:51:08 ===
Mirrored-queue (queue 'vsw.activitylogging.conversion.pendingconversion' in
vhost 'ActivityLogging'): Slave &lt;'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>'.1.252.0&gt; saw
deaths of mirrors &lt;'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-3</A>'.2.253.0&gt;

=ERROR REPORT==== 26-Apr-2012::16:51:08 ===
** Generic server &lt;0.265.0&gt; terminating
** Last message in was {'EXIT',&lt;0.249.0&gt;,
                           {badarg,
                               [{erlang,unlink,[undefined]},
                                {supervisor2,

'-terminate_simple_children/3-fun-0-',4},
                                {dict,fold_bucket,3},
                                {dict,fold_seg,4},
                                {dict,fold_segs,4},
                                {supervisor2,terminate_simple_children,3},
                                {supervisor2,terminate,2},
                                {gen_server,terminate,6}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;Advertiser-ONYX&quot;&gt;&gt;},
                          false,false,none,
                          [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;},
                           {&lt;&lt;&quot;x-message-ttl&quot;&gt;&gt;,signedint,1200000}],
                          &lt;3067.289.0&gt;,
                          [&lt;3065.334.0&gt;],
                          all},
                         &lt;0.267.0&gt;,&lt;3065.334.0&gt;,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>
/queues/1ON03RTBZAE64B67H41L4ICDE&quot;,
                           {{dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun&lt;rabbit_variable_queue.2.91259159&gt;,
                           {0,nil}},
                          {undefined,
                           {client_msstate,msg_store_transient,

&lt;&lt;228,99,153,84,177,114,138,215,76,30,0,48,128,77,
                              68,245&gt;&gt;,
                            {dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,368709,
                             &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>
/msg_store_transient&quot;},
                            rabbit_msg_store_ets_index,
                            &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>
/msg_store_transient&quot;,
                            &lt;0.239.0&gt;,372806,364585,376903,381000}},

false,0,#Fun&lt;rabbit_mirror_queue_slave.3.29941254&gt;,
                          0,0,infinity,0,0,0,0,0,
                          {rates,
                           {{1335,483942,985021},0},
                           {{1335,483942,985021},0},
                           0.0,0.0,
                           {1335,484240,226498}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1335,483942,985021},0},
                           {{1335,483942,985021},0},
                           0.0,0.0,
                           {1335,484240,226498}}},
                         undefined,#Ref&lt;0.0.9.158766&gt;,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         true}
** Reason for termination ==
** {badarg,[{erlang,unlink,[undefined]},
            {supervisor2,'-terminate_simple_children/3-fun-0-',4},
            {dict,fold_bucket,3},
            {dict,fold_seg,4},
            {dict,fold_segs,4},
            {supervisor2,terminate_simple_children,3},
            {supervisor2,terminate,2},
            {gen_server,terminate,6}]}

=ERROR REPORT==== 26-Apr-2012::16:51:08 ===
** Generic server &lt;0.6730.0&gt; terminating
** Last message in was {'EXIT',&lt;0.249.0&gt;,
                           {badarg,
                               [{erlang,unlink,[undefined]},
                                {supervisor2,

'-terminate_simple_children/3-fun-0-',4},
                                {dict,fold_bucket,3},
                                {dict,fold_seg,4},
                                {dict,fold_segs,4},
                                {supervisor2,terminate_simple_children,3},
                                {supervisor2,terminate,2},
                                {gen_server,terminate,6}]}}
** When Server state == {state,
                         {amqqueue,
                          {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
                           &lt;&lt;&quot;Advertiser-heartbeat-DHOHMEYERGX280&quot;&gt;&gt;},
                          false,true,&lt;3065.14349.1&gt;,
                          [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;}],
                          &lt;3065.14370.1&gt;,[],all},
                         &lt;0.6731.0&gt;,&lt;3065.14370.1&gt;,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>
/queues/5R0GE9UEB8S0EMSJORBUKHBTE&quot;,
                           {{dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun&lt;rabbit_variable_queue.2.91259159&gt;,
                           {0,nil}},
                          {undefined,
                           {client_msstate,msg_store_transient,

&lt;&lt;182,86,2,135,69,87,14,108,163,188,15,159,127,119,
                              55,241&gt;&gt;,
                            {dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,368709,
                             &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>
/msg_store_transient&quot;},
                            rabbit_msg_store_ets_index,
                            &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>
/msg_store_transient&quot;,
                            &lt;0.239.0&gt;,372806,364585,376903,381000}},

false,0,#Fun&lt;rabbit_mirror_queue_slave.3.29941254&gt;,
                          0,0,infinity,0,0,0,0,0,
                          {rates,
                           {{1335,484239,805553},0},
                           {{1335,484239,805553},0},
                           0.0,0.0,
                           {1335,484255,991021}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1335,484239,805553},0},
                           {{1335,484239,805553},0},
                           0.0,0.0,
                           {1335,484255,991021}}},
                         undefined,#Ref&lt;0.0.9.158602&gt;,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         true}
** Reason for termination ==
** {badarg,[{erlang,unlink,[undefined]},
            {supervisor2,'-terminate_simple_children/3-fun-0-',4},
            {dict,fold_bucket,3},
            {dict,fold_seg,4},
            {dict,fold_segs,4},
            {supervisor2,terminate_simple_children,3},
            {supervisor2,terminate,2},
            {gen_server,terminate,6}]}

=ERROR REPORT==== 26-Apr-2012::16:51:08 ===
** Generic server &lt;0.252.0&gt; terminating
** Last message in was {'EXIT',&lt;0.249.0&gt;,shutdown}
** When Server state == {state,
                         {amqqueue,
                          {resource,&lt;&lt;&quot;ActivityLogging&quot;&gt;&gt;,queue,

&lt;&lt;&quot;vsw.activitylogging.conversion.pendingconversion&quot;&gt;&gt;},
                          true,false,none,
                          [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;}],
                          &lt;3067.253.0&gt;,
                          [&lt;3065.257.0&gt;],
                          all},
                         &lt;0.253.0&gt;,&lt;3065.257.0&gt;,rabbit_variable_queue,
                         {vqstate,
                          {0,{[],[]}},
                          {0,{[],[]}},
                          {delta,undefined,0,undefined},
                          {0,{[],[]}},
                          {0,{[],[]}},
                          0,
                          {0,nil},
                          undefined,
                          {0,nil},
                          {qistate,
                           &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>
/queues/9KDJJKR11HTT40SVOPWG0AWDM&quot;,
                           {{dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            []},
                           undefined,0,262144,
                           #Fun&lt;rabbit_variable_queue.2.91259159&gt;,
                           {0,nil}},
                          {{client_msstate,msg_store_persistent,

&lt;&lt;58,135,182,192,228,241,29,217,255,38,4,53,94,213,
                              95,102&gt;&gt;,
                            {dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,389194,
                             &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>
/msg_store_persistent&quot;},
                            rabbit_msg_store_ets_index,
                            &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>
/msg_store_persistent&quot;,
                            &lt;0.244.0&gt;,393291,385097,397388,401485},
                           {client_msstate,msg_store_transient,

&lt;&lt;63,170,201,248,36,125,208,20,133,142,139,71,219,
                              91,212,33&gt;&gt;,
                            {dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []}}},
                            {state,368709,
                             &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>
/msg_store_transient&quot;},
                            rabbit_msg_store_ets_index,
                            &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>
/msg_store_transient&quot;,
                            &lt;0.239.0&gt;,372806,364585,376903,381000}},

true,0,#Fun&lt;rabbit_mirror_queue_slave.3.29941254&gt;,0,
                          0,infinity,0,0,0,0,0,
                          {rates,
                           {{1335,483943,551021},0},
                           {{1335,483943,551021},0},
                           0.0,0.0,
                           {1335,484240,51118}},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          {0,nil},
                          0,0,
                          {rates,
                           {{1335,483943,551021},0},
                           {{1335,483943,551021},0},
                           0.0,0.0,
                           {1335,484240,51118}}},
                         undefined,#Ref&lt;0.0.9.158618&gt;,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         0,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         true}
** Reason for termination ==
** {shutdown,
       {gen_server2,call,
           [msg_store_persistent,
            {client_terminate,

&lt;&lt;58,135,182,192,228,241,29,217,255,38,4,53,94,213,95,102&gt;&gt;},
            infinity]}}
** In 'terminate' callback with reason ==
** shutdown

=INFO REPORT==== 26-Apr-2012::16:51:08 ===
    application: rabbit
    exited: stopped
    type: permanent

=INFO REPORT==== 26-Apr-2012::16:51:08 ===
    application: os_mon
    exited: stopped
    type: permanent

=INFO REPORT==== 26-Apr-2012::16:51:08 ===
    application: mnesia
    exited: stopped
    type: permanent

=INFO REPORT==== 26-Apr-2012::16:51:08 ===
Halting Erlang VM

===============================================

dev-2-sasl.log
===============================================
=CRASH REPORT==== 26-Apr-2012::16:51:08 ===
  crasher:
    initial call: supervisor2:init/1
    pid: &lt;0.249.0&gt;
    registered_name: rabbit_mirror_queue_slave_sup
    exception exit: {badarg,
                        [{erlang,unlink,[undefined]},

{supervisor2,'-terminate_simple_children/3-fun-0-',4},
                         {dict,fold_bucket,3},
                         {dict,fold_seg,4},
                         {dict,fold_segs,4},
                         {supervisor2,terminate_simple_children,3},
                         {supervisor2,terminate,2},
                         {gen_server,terminate,6}]}
      in function  gen_server:terminate/6
    ancestors: [rabbit_sup,&lt;0.126.0&gt;]
    messages: [{'DOWN',#Ref&lt;0.0.9.159703&gt;,process,
                          {undefined,'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-dev-2</A>'},
                          noproc}]
    links: [&lt;0.265.0&gt;,&lt;0.6730.0&gt;]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 987
    stack_size: 24
    reductions: 5064
  neighbours:

=SUPERVISOR REPORT==== 26-Apr-2012::16:51:08 ===
     Supervisor: {local,rabbit_sup}
     Context:    shutdown_error
     Reason:     {badarg,
                     [{erlang,unlink,[undefined]},
                      {supervisor2,'-terminate_simple_children/3-fun-0-',4},
                      {dict,fold_bucket,3},
                      {dict,fold_seg,4},
                      {dict,fold_segs,4},
                      {supervisor2,terminate_simple_children,3},
                      {supervisor2,terminate,2},
                      {gen_server,terminate,6}]}
     Offender:   [{pid,&lt;0.249.0&gt;},
                  {name,rabbit_mirror_queue_slave_sup},
                  {mfargs,{rabbit_mirror_queue_slave_sup,start_link,[]}},
                  {restart_type,transient},
                  {shutdown,infinity},
                  {child_type,supervisor}]


=CRASH REPORT==== 26-Apr-2012::16:51:08 ===
  crasher:
    initial call: gen:init_it/6
    pid: &lt;0.265.0&gt;
    registered_name: []
    exception exit: {badarg,
                        [{erlang,unlink,[undefined]},

{supervisor2,'-terminate_simple_children/3-fun-0-',4},
                         {dict,fold_bucket,3},
                         {dict,fold_seg,4},
                         {dict,fold_segs,4},
                         {supervisor2,terminate_simple_children,3},
                         {supervisor2,terminate,2},
                         {gen_server,terminate,6}]}
      in function  gen_server2:terminate/3
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,&lt;0.126.0&gt;]
    messages: [{'EXIT',&lt;0.267.0&gt;,normal},
                  {'DOWN',#Ref&lt;0.0.3.44831&gt;,process,&lt;3065.334.0&gt;,normal}]
    links: []
    dictionary: [{{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {{xtype_to_module,topic},rabbit_exchange_type_topic},
                  {guid,{{3831732564,2977073879,1277034544,2152547573},0}}]
    trap_exit: true
    status: running
    heap_size: 2584
    stack_size: 24
    reductions: 4916
  neighbours:

=CRASH REPORT==== 26-Apr-2012::16:51:08 ===
  crasher:
    initial call: gen:init_it/6
    pid: &lt;0.6730.0&gt;
    registered_name: []
    exception exit: {badarg,
                        [{erlang,unlink,[undefined]},

{supervisor2,'-terminate_simple_children/3-fun-0-',4},
                         {dict,fold_bucket,3},
                         {dict,fold_seg,4},
                         {dict,fold_segs,4},
                         {supervisor2,terminate_simple_children,3},
                         {supervisor2,terminate,2},
                         {gen_server,terminate,6}]}
      in function  gen_server2:terminate/3
    ancestors: [rabbit_mirror_queue_slave_sup,rabbit_sup,&lt;0.126.0&gt;]
    messages: [{'EXIT',&lt;0.6731.0&gt;,normal},
                  {'DOWN',#Ref&lt;0.0.4.191216&gt;,process,&lt;3065.14370.1&gt;,normal}]
    links: []
    dictionary: [{credit_blocked,[]},
                  {{xtype_to_module,direct},rabbit_exchange_type_direct},
                  {{xtype_to_module,fanout},rabbit_exchange_type_fanout},
                  {guid,{{3059090055,1163333228,2747010975,2138519537},0}}]
    trap_exit: true
    status: running
    heap_size: 1597
    stack_size: 24
    reductions: 8290
  neighbours:
===============================================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120426/0e88bf17/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120426/0e88bf17/attachment.htm</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019773.html">[rabbitmq-discuss] Active-active crash report
</A></li>
	<LI>Next message: <A HREF="019776.html">[rabbitmq-discuss] Active-active crash report
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19775">[ date ]</a>
              <a href="thread.html#19775">[ thread ]</a>
              <a href="subject.html#19775">[ subject ]</a>
              <a href="author.html#19775">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
