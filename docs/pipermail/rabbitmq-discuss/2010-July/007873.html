<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] ssl certificate to client lookup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20ssl%20certificate%20to%20client%20lookup&In-Reply-To=%3C19506.54824.366624.7520%40mercury.cern.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007872.html">
   <LINK REL="Next"  HREF="007874.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] ssl certificate to client lookup</H1>
    <B>Lionel Cons</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20ssl%20certificate%20to%20client%20lookup&In-Reply-To=%3C19506.54824.366624.7520%40mercury.cern.ch%3E"
       TITLE="[rabbitmq-discuss] ssl certificate to client lookup">lionel.cons at cern.ch
       </A><BR>
    <I>Tue Jul  6 08:07:20 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007872.html">[rabbitmq-discuss] ssl certificate to client lookup
</A></li>
        <LI>Next message: <A HREF="007874.html">[rabbitmq-discuss] ssl certificate to client lookup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7873">[ date ]</a>
              <a href="thread.html#7873">[ thread ]</a>
              <a href="subject.html#7873">[ subject ]</a>
              <a href="author.html#7873">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias Radestock writes:
 &gt; Nathaniel Haggard wrote:
 &gt; &gt; On Mon, Jun 28, 2010 at 11:46 PM, Lionel Cons &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lionel.cons at cern.ch</A>&gt; wrote:
 &gt; &gt;&gt; In case something bad happens (invalid message, too many messages...),
 &gt; &gt;&gt; we want to know who sent the offending messages.
 &gt; 
 &gt; That doesn't seem to have anything to do with SSL, intrinsically, i.e. 
 &gt; one can imagine wanting to know the same even when the clients connect 
 &gt; w/o ssl.

Correct.

The idea is the following: a broker is a black box that can optionally
use authentication. What is needed is a way to attach to a message
authentication information, when available. This could be a user name
(with password authentication) or a DN (with certificate authentication)
or something else with other authentication mechanisms.

ActiveMQ has it: <A HREF="http://activemq.apache.org/jmsxuserid.html.">http://activemq.apache.org/jmsxuserid.html.</A>

 &gt; That raises the question of how exactly to identify the sender of a 
 &gt; message to a) consumers, and b) administrators. That is a very large can 
 &gt; of worms, raising issues of trust such as

IMHO, it is indeed a can of worms, but a small one ;-)

 &gt; - How do consumers establish sufficient trust into the server (to supply 
 &gt; the correct information)?

They have no choice: a broker is by definition a trusted entity. For
instance, consumers expect brokers to deliver message bodies unaltered.

 &gt; - How do producers establish sufficient trust into the server (to not 
 &gt; pass on information about their identity when they do not intent to, to 
 &gt; not fake such information, etc)?

Idem. Producers already trust the brokers, for instance to deliver the
messages to the right consumers. For the &quot;information about their
identity&quot;, if this may be a concern, it would be easy to have a broker
flag specifying whether authentication information is passed or not.

 &gt; - How does one deal with proxies/shovels, i.e. entities that relay 
 &gt; information? Do messages passing through them have their original sender 
 &gt; info replaced? Or does the proxy/shovel identity get appended somehow?

This is a very good question.

I've worked on a very simple model with boolean trust. Either the
sender of the message (this could be a shovel) is trusted or it is
not. So:
 - if it is trusted, the broker accepts authentication information as
   provided by the sender and simply appends what it knows, i.e. the
   identity of the sender
 - if it is not trusted, the broker discards all previous
   authentication information and puts instead what it knows

 &gt; None of these issues are particular to AMQP, [...]

Correct. So, IMHO, the solution(s) should be independent from AMQP.

It seems that all we need is a set of headers with well defined
semantic attached.

 &gt; There is also an issue w.r.t. message fidelity. Currently RabbitMQ 
 &gt; guarantees that the entire message payload, including headers, is 
 &gt; transmitted to consumers unaltered. To some users that is a highly 
 &gt; desirable property of a messaging system.

AFAIK, AMQP 1.0 has two different things (I hope the terminology is right):
 - the bare message, with properties
 - the annotated, with extra header and footer

For me, authentication information should be in the header, leaving
intact the body and the properties.

Cheers,

Lionel
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007872.html">[rabbitmq-discuss] ssl certificate to client lookup
</A></li>
	<LI>Next message: <A HREF="007874.html">[rabbitmq-discuss] ssl certificate to client lookup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7873">[ date ]</a>
              <a href="thread.html#7873">[ thread ]</a>
              <a href="subject.html#7873">[ subject ]</a>
              <a href="author.html#7873">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
