<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] fastest way to process messages?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20fastest%20way%20to%20process%20messages%3F&In-Reply-To=%3CDA2FD69D-B01A-4920-8E89-E473A633217C%40jbrisbin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007928.html">
   <LINK REL="Next"  HREF="007929.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] fastest way to process messages?</H1>
    <B>Jon Brisbin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20fastest%20way%20to%20process%20messages%3F&In-Reply-To=%3CDA2FD69D-B01A-4920-8E89-E473A633217C%40jbrisbin.com%3E"
       TITLE="[rabbitmq-discuss] fastest way to process messages?">jon at jbrisbin.com
       </A><BR>
    <I>Fri Jul  9 21:43:20 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007928.html">[rabbitmq-discuss] Stomp over Websockets
</A></li>
        <LI>Next message: <A HREF="007929.html">[rabbitmq-discuss] fastest way to process messages?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7924">[ date ]</a>
              <a href="thread.html#7924">[ thread ]</a>
              <a href="subject.html#7924">[ subject ]</a>
              <a href="author.html#7924">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I pushed a rough draft/alpha version of the asynchronous distributed cache I blogged about last week to GitHub. It works pretty well for a rough draft. I am noticing some pretty large variances in my metrics from one run to another, though. I'm throwing 25 messages at a time at an object with 25 workers waiting for those objects (so there's no waiting for objects to be processed). I'm seeing run times as fast as 10ms and as slow as 150-200ms. It really varies from one run to the next.

I'm sure there are bottlenecks in my code. I'm starting to investigate that right now. But I was wondering if there was some consensus on maximizing throughput (using the Java client). Since this is a cache, I'm wanting to keep load times to an absolute minimum (duh). In several runs, I've gotten down to 10-15 ms but I can't get it to do that consistently.

Will I be able to process more messages if each of my workers has its own queue, but binds to the exchange using a common key--or should I do what I'm currently doing, which is to use the QueueingConsumer and simply use multiple workers to pull messages off the single BlockingQueue? Which has the potential for higher throughput while not increasing the likelihood I'll end up with duplicate messages?

Is there a better way to process messages if performance is the primary consideration than using the QueueingConsumer? I've haven't looked at the code to see what it's doing, but I would think fewer method calls between delivery of the message and calling the callback provided by the application code would give me greater throughput and shorter run times.

I should probably also investigate alternative languages. I started this as a Java object cache, so naturally I used Java. But I'm wondering if I could get better performance by skipping the serialize/deserialize step in the cache provider (I'm storing actual objects in memory rather than the byte array, which I considered doing at first).

Have a good weekend!

Thanks!

J. Brisbin
<A HREF="http://jbrisbin.com/">http://jbrisbin.com/</A>






-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100709/138d385b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100709/138d385b/attachment.htm</A>&gt;
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007928.html">[rabbitmq-discuss] Stomp over Websockets
</A></li>
	<LI>Next message: <A HREF="007929.html">[rabbitmq-discuss] fastest way to process messages?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7924">[ date ]</a>
              <a href="thread.html#7924">[ thread ]</a>
              <a href="subject.html#7924">[ subject ]</a>
              <a href="author.html#7924">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
