<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq with one producer no consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20with%20one%20producer%20no%20consumer&In-Reply-To=%3CAANLkTin47vug7o1uWS0V2fsiSVbBNy_UpK0kt3oxO0aA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007991.html">
   <LINK REL="Next"  HREF="007995.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq with one producer no consumer</H1>
    <B>Robert Raschke</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20with%20one%20producer%20no%20consumer&In-Reply-To=%3CAANLkTin47vug7o1uWS0V2fsiSVbBNy_UpK0kt3oxO0aA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq with one producer no consumer">rtrlists at googlemail.com
       </A><BR>
    <I>Thu Jul 15 17:55:15 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007991.html">[rabbitmq-discuss] rabbitmq with one producer no consumer
</A></li>
        <LI>Next message: <A HREF="007995.html">[rabbitmq-discuss] rabbitmq with one producer no consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7993">[ date ]</a>
              <a href="thread.html#7993">[ thread ]</a>
              <a href="subject.html#7993">[ subject ]</a>
              <a href="author.html#7993">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jul 15, 2010 at 4:24 PM, Andreas Jung &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lists at zopyx.com</A>&gt; wrote:

&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i>
</I>&gt;<i> Darius Damalakas wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     &gt; I think you should use some flow control. If your Rabbit has the
</I>&gt;<i> &gt;     memory
</I>&gt;<i> &gt;     &gt; alerts turned on, then your producer can pick up the
</I>&gt;<i> &gt;     &gt; channel.flow/active=false and stop sending until you get the
</I>&gt;<i> &gt;     active=true.
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt; Otherwise your sending of persistent message will eventually make
</I>&gt;<i> &gt;     Rabbit run
</I>&gt;<i> &gt;     &gt; out of resources.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; IMHO, If it is not possible to store big amounts of messages, that will
</I>&gt;<i> &gt; require storing them somewhere else. Which basically means implementing
</I>&gt;<i> &gt; messaging logic twice.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Is there a possibility to use a different database back-end for
</I>&gt;<i> &gt; persisting messages?
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Shall we learn from this thread that RabbitMQ can not deal 200k message
</I>&gt;<i> with a size of 300 bytes in a reasonable way? That's not much data.
</I>&gt;<i>
</I>&gt;<i> - -aj
</I>&gt;<i>
</I>&gt;<i>
</I>Sorry I can't be of more help with regards the actual resource usage pattern
that is seen here (I'm still on 1.6). Maybe someone from the team will jump
in at some point.

My hunch would be that the underlying DB is flushing the logs and that is
eating up your CPU. If that was then killed mid flush, the next start up
will start repairing your DB, also eating up your CPU. The logfile will
probably contain something that will help diagnose this further.

@Ovidiu:
BUT, are you really sure you want what you are asking for? If I understand
you correctly you want to allow outside producers (not under your control)
to send persistant messages directly into your RabbitMQ and not have those
producers back off?

Personally, I think that is not achievable. At some point your server is
going to reject messages, and your producers must be able to deal with that,
if, as you say, no messages are allowed to be lost.

Robby
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100715/34117e9b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100715/34117e9b/attachment.htm</A>&gt;
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007991.html">[rabbitmq-discuss] rabbitmq with one producer no consumer
</A></li>
	<LI>Next message: <A HREF="007995.html">[rabbitmq-discuss] rabbitmq with one producer no consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7993">[ date ]</a>
              <a href="thread.html#7993">[ thread ]</a>
              <a href="subject.html#7993">[ subject ]</a>
              <a href="author.html#7993">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
