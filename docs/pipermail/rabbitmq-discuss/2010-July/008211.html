<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] versioned routing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20versioned%20routing&In-Reply-To=%3CAANLkTimMB1cz9vaOy06x-Y-73S%2B1YLLZh_Dwe21eYQ3o%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008206.html">
   <LINK REL="Next"  HREF="008212.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] versioned routing</H1>
    <B>Santi Manninen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20versioned%20routing&In-Reply-To=%3CAANLkTimMB1cz9vaOy06x-Y-73S%2B1YLLZh_Dwe21eYQ3o%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] versioned routing">santikschzt at gmail.com
       </A><BR>
    <I>Thu Jul 29 18:38:33 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008206.html">[rabbitmq-discuss] Query - Batch Consume
</A></li>
        <LI>Next message: <A HREF="008212.html">[rabbitmq-discuss] versioned routing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8211">[ date ]</a>
              <a href="thread.html#8211">[ thread ]</a>
              <a href="subject.html#8211">[ subject ]</a>
              <a href="author.html#8211">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've been trying to figure out a way to single out service versions
for front end users.
Here is the current, simplified scenario:

- Web users with sessions issue requests to a front end server, which
just routes their messages
- Messages are routed to queues called 'LoginService' and 'PingService'

I have a number of LoginService and PingService instances, each bound
to the same queue, so messages are distributed with round-robin and I
can add/remove them based on demand. Wonderful.

PingService currently runs 1.0. Now, I'd like to add a completely new
version of PingService, 1.0.1, with spiffy new features, and have
'selected users' (through Sessions given from LoginService) use the
new version and try it out, so I can monitor and test that the new
version of PingService works correctly before moving more, or all
users into the new version, and deploying 1.0.1 onto more servers.

We talked about doing this with |Blaze|| on the IRC channel (thanks!)
but we didn't really come up with an elegant solution yet.

- Bind the PingService queues with the version name in the queue name,
and have the front end route messages to PingService, based on the
version defined in the Session. Many problems with this. Old users
with active sessions bound to the previous version (which was just
built 15 minutes ago, perhaps!) will lose service once the new version
is completely rolled out, and a failover from basicReturn in the
client would have to be implemented.
- Use topic exchanges for each version, eg. 1.0.1.topic, and a
catch-all with *.topic. I think round-robin is lost here?

That's the gist of it. Your help is appreciated. Thanks!

Santi
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008206.html">[rabbitmq-discuss] Query - Batch Consume
</A></li>
	<LI>Next message: <A HREF="008212.html">[rabbitmq-discuss] versioned routing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8211">[ date ]</a>
              <a href="thread.html#8211">[ thread ]</a>
              <a href="subject.html#8211">[ subject ]</a>
              <a href="author.html#8211">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
