<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] ssl certificate to client lookup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20ssl%20certificate%20to%20client%20lookup&In-Reply-To=%3C19507.316.202319.131989%40mercury.cern.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007874.html">
   <LINK REL="Next"  HREF="007877.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] ssl certificate to client lookup</H1>
    <B>Lionel Cons</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20ssl%20certificate%20to%20client%20lookup&In-Reply-To=%3C19507.316.202319.131989%40mercury.cern.ch%3E"
       TITLE="[rabbitmq-discuss] ssl certificate to client lookup">lionel.cons at cern.ch
       </A><BR>
    <I>Tue Jul  6 11:11:08 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007874.html">[rabbitmq-discuss] ssl certificate to client lookup
</A></li>
        <LI>Next message: <A HREF="007877.html">[rabbitmq-discuss] ssl certificate to client lookup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7876">[ date ]</a>
              <a href="thread.html#7876">[ thread ]</a>
              <a href="subject.html#7876">[ subject ]</a>
              <a href="author.html#7876">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias Radestock writes:
 &gt; I don't think a broker flag is enough here. Step outside the enterprise 
 &gt; world and consider a public AMQP messaging service. I can envisage cases 
 &gt; where the sender will want to control whether its identity is revealed 
 &gt; to consumers. Much like it tells the broker whether the message should 
 &gt; be persisted.

The &quot;public messaging service&quot; is exactly the model we try to work
towards. In such a model, the service provider needs to protect its
resources. Unauthenticated clients may get directed to a sacrificial
broker so that abuses do not harm authenticated clients. Similarly,
authenticated clients that do not want to expose their &quot;identity&quot; may
get a different level of service. Clients who play by the rules
(i.e. authentication plus traceability) may get better service.

I don't believe you can build a decent public messaging service
without a minimum security.

 &gt; What distinguishes a trusted sender from an untrusted sender?

The server must know who is allowed to use its services or not, so it
must have a kind of user list. I could imagine something like a
per-user flag telling whether this user is trusted or not. When using
a shovel, if the connecting user is trusted, the shovel will be
somehow trusted.

 &gt; So in a hypothetical scenario where
 &gt; 1) sender authenticates with broker X as user A and sends message
 &gt; 2) proxy authenticates with broker X as user B and consumes message
 &gt; 3) proxy authenticates with broker Y as user C and sends the consumed 
 &gt; message
 &gt; 4) consumer authenticates with broker Y as user D and consumes message
 &gt; 
 &gt; what sender identity information ends up in the message sent to the 
 &gt; final consumer? It seems to me that if the consumer is interested in the 
 &gt; identity of the original sender it needs to trust broker Y - let's take 
 &gt; that as a given - as well as the proxy and broker X. How can it 
 &gt; establish that trust, since it's not directly interacting with either of 
 &gt; them? Furthermore, the identity with which user A authenticates to 
 &gt; broker X may be completely meaningless to the one the consumer.

There are two ways to achieve message authentication: outside or
inside of messaging.

Outside, the producer signs the message body and the consumer checks
the signature. There are no requirements on the brokers but only the
consumer knows who the sender is. This is good for the clients, not
for the messaging service.

Inside, all intermediaries (broker, proxy, shovel...) must be trusted.
Otherwise, a rogue intermediary could do evil things with the message.
This is good for the messaging service as it can control who does
what, not for the clients, unless they trust the messaging service.

So to answer your question, if the consumer trusts X and Y then it can
know the sender identity via &quot;inside&quot; authentication. If it does not
trust the service, it has to use &quot;outside&quot; authentication.

Cheers,

Lionel
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007874.html">[rabbitmq-discuss] ssl certificate to client lookup
</A></li>
	<LI>Next message: <A HREF="007877.html">[rabbitmq-discuss] ssl certificate to client lookup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7876">[ date ]</a>
              <a href="thread.html#7876">[ thread ]</a>
              <a href="subject.html#7876">[ subject ]</a>
              <a href="author.html#7876">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
