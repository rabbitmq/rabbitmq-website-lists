<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ persistence and multi producers- multi consumers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20persistence%20and%20multi%20producers-%0A%20multi%20consumers&In-Reply-To=%3C29151695.post%40talk.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007916.html">
   <LINK REL="Next"  HREF="007919.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ persistence and multi producers- multi consumers</H1>
    <B>alcalino</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20persistence%20and%20multi%20producers-%0A%20multi%20consumers&In-Reply-To=%3C29151695.post%40talk.nabble.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ persistence and multi producers- multi consumers">fblanch at gmail.com
       </A><BR>
    <I>Tue Jul 13 16:12:22 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007916.html">[rabbitmq-discuss] RabbitMQ persistence and multi producers- multi consumers
</A></li>
        <LI>Next message: <A HREF="007919.html">[rabbitmq-discuss] RabbitMQ persistence and multi producers-	multi consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7943">[ date ]</a>
              <a href="thread.html#7943">[ thread ]</a>
              <a href="subject.html#7943">[ subject ]</a>
              <a href="author.html#7943">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Thanks Simon,

It is exactly what i was looking for.  Now i understand that i misunderstood
client with consumer. 

Of course the exchange/queue/binding it is necessary to be created  before
the messages to be sent. But it don't need to be created by the clients :).

As soon as i get it to work correctly i will publish the code as example.

Cheers,



Simon MacMullen-2 wrote:
&gt;<i> 
</I>&gt;<i> On 09/07/10 12:49, Francisco Gonzalez-Blanch wrote:
</I>&gt;&gt;<i> Thanks for the answers!  But If the producer is launched first and then
</I>&gt;&gt;<i> the consumer, i'm losing all the initial messages until the consumer is
</I>&gt;&gt;<i> created. I attach you the code snippets with the test.
</I>&gt;<i> 
</I>&gt;<i> I think contrary to what Andreas said, in your case you should have the 
</I>&gt;<i> producer create a queue with a well known name when it starts up, which 
</I>&gt;<i> the consumer can connect to. ATM with your code no queue exists until a 
</I>&gt;<i> consumer creates it, so all messages before that point are dropped.
</I>&gt;<i> 
</I>&gt;<i> &lt;code snipped&gt;
</I>&gt;<i> 
</I>&gt;&gt;<i> In addition i have another question , is it possible to make that not
</I>&gt;&gt;<i> all the consumers get all the messages  with a fanout exchange, i mean
</I>&gt;&gt;<i> is it possible to balance the messages in between the consumers. Thanks
</I>&gt;&gt;<i> a lot. regards!
</I>&gt;<i> 
</I>&gt;<i> If each consumer creates its own queue, each consumer will get all the 
</I>&gt;<i> messages.
</I>&gt;<i> 
</I>&gt;<i> If each consumer connects to the same queue, the messages will be 
</I>&gt;<i> balanced among the consumers.
</I>&gt;<i> 
</I>&gt;<i> NB this balancing will not be very fair if the consumers connect to a 
</I>&gt;<i> preexisting queue with a bunch of messages, unless you set the prefetch 
</I>&gt;<i> count using basic.qos. Once the existing messages are drained and the 
</I>&gt;<i> queue is empty it will round-robin subsequent messages.
</I>&gt;<i> 
</I>&gt;<i> Cheers, Simon
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Francisco Gonz&#225;lez-Blanch Rodr&#237;guez
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Fri, Jul 9, 2010 at 1:39 PM, Ovidiu Deac &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ovidiudeac at gmail.com</A>
</I>&gt;&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ovidiudeac at gmail.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     If nobody extracts the message from the queue the message won't be
</I>&gt;&gt;<i> lost.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     On Fri, Jul 9, 2010 at 1:09 PM, Francisco Gonzalez-Blanch
</I>&gt;&gt;<i>     &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">fblanch at gmail.com</A> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">fblanch at gmail.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i>      &gt; Hi all,
</I>&gt;&gt;<i>      &gt; I'm a newbie in rabbitmq and i'm working on a distributed data
</I>&gt;&gt;<i>     processing
</I>&gt;&gt;<i>      &gt; application using rabbitmq as distributed task queue. I want to
</I>&gt;&gt;<i>     ask you
</I>&gt;&gt;<i>      &gt; about where can i find information about how to make persistent
</I>&gt;&gt;<i>     queues, and
</I>&gt;&gt;<i>      &gt; how to make that, if a producer sends messages to queue and no
</I>&gt;&gt;<i>     one is listen
</I>&gt;&gt;<i>      &gt; to it and then a consumer is attached , the consumer gets all the
</I>&gt;&gt;<i>     messages,
</I>&gt;&gt;<i>      &gt; even the ones that were produced before the consumer was
</I>&gt;&gt;<i>     attached. Thank you
</I>&gt;&gt;<i>      &gt; very much.
</I>&gt;&gt;<i>      &gt;
</I>&gt;&gt;<i>      &gt;
</I>&gt;&gt;<i>      &gt;
</I>&gt;&gt;<i>      &gt; _______________________________________________
</I>&gt;&gt;<i>      &gt; rabbitmq-discuss mailing list
</I>&gt;&gt;<i>      &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i>     &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;&gt;<i>      &gt;
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>      &gt;
</I>&gt;&gt;<i>      &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> Staff Engineer, RabbitMQ
</I>&gt;<i> SpringSource, a division of VMware
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-- 
View this message in context: <A HREF="http://old.nabble.com/RabbitMQ-persistence-and-multi-producers--multi-consumers-tp29116161p29151695.html">http://old.nabble.com/RabbitMQ-persistence-and-multi-producers--multi-consumers-tp29116161p29151695.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007916.html">[rabbitmq-discuss] RabbitMQ persistence and multi producers- multi consumers
</A></li>
	<LI>Next message: <A HREF="007919.html">[rabbitmq-discuss] RabbitMQ persistence and multi producers-	multi consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7943">[ date ]</a>
              <a href="thread.html#7943">[ thread ]</a>
              <a href="subject.html#7943">[ subject ]</a>
              <a href="author.html#7943">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
