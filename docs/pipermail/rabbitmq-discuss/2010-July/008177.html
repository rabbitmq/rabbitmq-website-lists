<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] connection closed abruptly errors on logs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20connection%20closed%20abruptly%20errors%20on%20logs&In-Reply-To=%3Cyrv4cr5iqlczo.fsf%40dwragg.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008150.html">
   <LINK REL="Next"  HREF="008178.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] connection closed abruptly errors on logs</H1>
    <B>David Wragg</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20connection%20closed%20abruptly%20errors%20on%20logs&In-Reply-To=%3Cyrv4cr5iqlczo.fsf%40dwragg.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] connection closed abruptly errors on logs">david at rabbitmq.com
       </A><BR>
    <I>Mon Jul 26 12:05:31 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008150.html">[rabbitmq-discuss] connection closed abruptly errors on logs
</A></li>
        <LI>Next message: <A HREF="008178.html">[rabbitmq-discuss] connection closed abruptly errors on logs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8177">[ date ]</a>
              <a href="thread.html#8177">[ thread ]</a>
              <a href="subject.html#8177">[ subject ]</a>
              <a href="author.html#8177">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Dave,

Dave Greggory &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">davegreggory at yahoo.com</A>&gt; writes:
&gt;<i> I configured my 2 node cluster to behind a load balancer that round robins to 
</I>&gt;<i> the two nodes. Once I did that, I started noticing these errors in RabbitMQ 
</I>&gt;<i> logs.
</I>&gt;<i>
</I>&gt;<i> [...]
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 23-Jul-2010::10:27:14 ===
</I>&gt;<i> accepted TCP connection on 0.0.0.0:5672 from &lt;loadbalancer_ip&gt;:1706
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 23-Jul-2010::10:27:14 ===
</I>&gt;<i> starting TCP connection &lt;0.3879.4&gt; from &lt;loadbalancer_ip&gt;:1706
</I>&gt;<i>
</I>&gt;<i> =WARNING REPORT==== 23-Jul-2010::10:27:14 ===
</I>&gt;<i> exception on TCP connection &lt;0.3879.4&gt; from &lt;loadbalancer_ip&gt;:1706
</I>&gt;<i> connection_closed_abruptly
</I>&gt;<i>
</I>&gt;<i> [...]
</I>&gt;<i>
</I>&gt;<i> Messages sent to RabbitMQ are being handled properly and consumers seem to be 
</I>&gt;<i> receiving them just fine. What do these errors mean?
</I>
That is caused by clients disconnecting without following the proper
AMQP shutdown protocol, e.g. they simply close the socket instead of
sending a &quot;connection.close&quot; command and waiting for
&quot;connection.close_ok&quot;.

Given the timestamps in the logs above, it looks like the load balancer
is connecting, and then promptly closing the connection.  This is
probably the load balancer probing to check that the nodes are available
from connections.  If so, they are nothing to worry about.

David

-- 
David Wragg
Staff Engineer, RabbitMQ
SpringSource, a division of VMware
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008150.html">[rabbitmq-discuss] connection closed abruptly errors on logs
</A></li>
	<LI>Next message: <A HREF="008178.html">[rabbitmq-discuss] connection closed abruptly errors on logs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8177">[ date ]</a>
              <a href="thread.html#8177">[ thread ]</a>
              <a href="subject.html#8177">[ subject ]</a>
              <a href="author.html#8177">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
