<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq with one producer no consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20with%20one%20producer%20no%20consumer&In-Reply-To=%3CAANLkTilv1hRudJeHM4xQ-WPfLnxk5OP_exvWE_G_zWq9%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007987.html">
   <LINK REL="Next"  HREF="007988.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq with one producer no consumer</H1>
    <B>Ovidiu Deac</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20with%20one%20producer%20no%20consumer&In-Reply-To=%3CAANLkTilv1hRudJeHM4xQ-WPfLnxk5OP_exvWE_G_zWq9%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq with one producer no consumer">ovidiudeac at gmail.com
       </A><BR>
    <I>Thu Jul 15 15:18:00 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007987.html">[rabbitmq-discuss] rabbitmq with one producer no consumer
</A></li>
        <LI>Next message: <A HREF="007988.html">[rabbitmq-discuss] rabbitmq with one producer no consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7986">[ date ]</a>
              <a href="thread.html#7986">[ thread ]</a>
              <a href="subject.html#7986">[ subject ]</a>
              <a href="author.html#7986">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>stopping the producer is not an option because the messages come from
the outside and we don't want to lose any of them. In that case the
producer should store them locally somehow and then we get back to
storing the messages in the db.

I'm thinking that there has to be some ways to increase the number of
messages that we are able to store in the queues if the consumers die
(a worst case scenario).

On Thu, Jul 15, 2010 at 4:19 PM, Robert Raschke &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rtrlists at googlemail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> On Thu, Jul 15, 2010 at 12:58 PM, Ovidiu Deac &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ovidiudeac at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ...and the erlang version is &quot;R13B01&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Thu, Jul 15, 2010 at 2:53 PM, Ovidiu Deac &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ovidiudeac at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; I forgot to say that we are using rabbitmq 1.8.0 on linux.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; On Thu, Jul 15, 2010 at 2:40 PM, Ovidiu Deac &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ovidiudeac at gmail.com</A>&gt;
</I>&gt;&gt;<i> &gt; wrote:
</I>&gt;&gt;<i> &gt;&gt; We are testing a rabbitmq intalation to see how it behaves if there is
</I>&gt;&gt;<i> &gt;&gt; no consumer while the producer publishes messages. The point of the
</I>&gt;&gt;<i> &gt;&gt; test is to see what we can rely on if somehow our consumer processes
</I>&gt;&gt;<i> &gt;&gt; die.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; In order to do this we send persistent messages with a 300bytes
</I>&gt;&gt;<i> &gt;&gt; content in a loop and after 200k messages rabbitmq uses 100% processor
</I>&gt;&gt;<i> &gt;&gt; and is unreachable. The memory usage on the machine is only 27%. Even
</I>&gt;&gt;<i> &gt;&gt; when restarting the broker it won't start anymore.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Any ideas how I can tune rabbitmq to deal with this situation?
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Thanks,
</I>&gt;&gt;<i> &gt;&gt; Ovidiu
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I think you should use some flow control. If your Rabbit has the memory
</I>&gt;<i> alerts turned on, then your producer can pick up the
</I>&gt;<i> channel.flow/active=false and stop sending until you get the active=true.
</I>&gt;<i>
</I>&gt;<i> Otherwise your sending of persistent message will eventually make Rabbit run
</I>&gt;<i> out of resources.
</I>&gt;<i>
</I>&gt;<i> Robby
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007987.html">[rabbitmq-discuss] rabbitmq with one producer no consumer
</A></li>
	<LI>Next message: <A HREF="007988.html">[rabbitmq-discuss] rabbitmq with one producer no consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7986">[ date ]</a>
              <a href="thread.html#7986">[ thread ]</a>
              <a href="subject.html#7986">[ subject ]</a>
              <a href="author.html#7986">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
