<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] What is a good tradeoff for number of	connections and channels/connection for a client ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20What%20is%20a%20good%20tradeoff%20for%20number%20of%0A%09connections%20and%20channels/connection%20for%20a%20client%20%3F&In-Reply-To=%3CAANLkTilGwqufCKjkk-i-IpFRZW7DNWOweh0iMS1oNbvh%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008200.html">
   <LINK REL="Next"  HREF="008131.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] What is a good tradeoff for number of	connections and channels/connection for a client ?</H1>
    <B>Arun Suresh</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20What%20is%20a%20good%20tradeoff%20for%20number%20of%0A%09connections%20and%20channels/connection%20for%20a%20client%20%3F&In-Reply-To=%3CAANLkTilGwqufCKjkk-i-IpFRZW7DNWOweh0iMS1oNbvh%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] What is a good tradeoff for number of	connections and channels/connection for a client ?">arun.suresh at gmail.com
       </A><BR>
    <I>Thu Jul 22 06:51:21 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008200.html">[rabbitmq-discuss] Announcing: rabbitmq-proxyauth: A RabbitMQ Proxy Authentication patch/Plugin
</A></li>
        <LI>Next message: <A HREF="008131.html">[rabbitmq-discuss] What is a good tradeoff for number of connections and channels/connection for a client ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8116">[ date ]</a>
              <a href="thread.html#8116">[ thread ]</a>
              <a href="subject.html#8116">[ subject ]</a>
              <a href="author.html#8116">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello

We are currently using rabbitmq 1.7.2 with the erlang client.
We have some code that sits on top of the erlang client library that
abstract away the need for the client to actually know anything about the
rabbitmq connections or channels. Basically, we create a pool of
connections, and try to multiplex multiple channels across these pooled
connections.

We've noticed lately that, we've been seeing a lot of timeouts which is
manifested in the crash reports as follows:

=CRASH REPORT==== 21-Jul-2010::20:14:31 ===
  crasher:
    initial call: amqp_channel:init/1
    pid: &lt;0.26346.57&gt;
    registered_name: []
    exception exit: {timeout,
                        {gen_server,call,
                            [&lt;0.8759.144&gt;,{call,{'channel.open',&lt;&lt;&gt;&gt;}}]}}
      in function  gen_server:terminate/6
    ancestors: [&lt;0.686.0&gt;,'q_conn_harley02.ypost.re1.yahoo.com_8',
                  'q_sup_harley02.ypost.re1.yahoo.com
',harvester_sup,&lt;0.95.0&gt;]
    messages: [{'EXIT',&lt;0.26348.57&gt;,connection_socket_closed_unexpectedly}]
    links: [&lt;0.26347.57&gt;]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1597
    stack_size: 24
    reductions: 1256

Earlier, prior to us using our abstraction layer, we used have a fixed 10
Channels per connections, and new connections were created every once in a
while..

So I was wondering if you guys have any recommendations wrt to number of
connections and channels/connection to be maintained.
We use rabbitmq as a sort of a router.. around 50000 messages are pushed
into the queue per hour. Message size wont exceed a couple of Kb.

regards
-Arun
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100722/93472e66/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100722/93472e66/attachment-0001.htm</A>&gt;
</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008200.html">[rabbitmq-discuss] Announcing: rabbitmq-proxyauth: A RabbitMQ Proxy Authentication patch/Plugin
</A></li>
	<LI>Next message: <A HREF="008131.html">[rabbitmq-discuss] What is a good tradeoff for number of connections and channels/connection for a client ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8116">[ date ]</a>
              <a href="thread.html#8116">[ thread ]</a>
              <a href="subject.html#8116">[ subject ]</a>
              <a href="author.html#8116">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
