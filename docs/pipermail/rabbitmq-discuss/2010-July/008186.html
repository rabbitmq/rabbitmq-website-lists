<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] General questions about HA,	Stability/Reliability and Broker Administration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20General%20questions%20about%20HA%2C%0A%09Stability/Reliability%20and%20Broker%20Administration&In-Reply-To=%3CAANLkTikYYKHBNm6iMd8G_ywJE9pUySm4o1Avv_GAShYM%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008196.html">
   <LINK REL="Next"  HREF="008161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] General questions about HA,	Stability/Reliability and Broker Administration</H1>
    <B>Joe Healy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20General%20questions%20about%20HA%2C%0A%09Stability/Reliability%20and%20Broker%20Administration&In-Reply-To=%3CAANLkTikYYKHBNm6iMd8G_ywJE9pUySm4o1Avv_GAShYM%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] General questions about HA,	Stability/Reliability and Broker Administration">joehealy at gmail.com
       </A><BR>
    <I>Tue Jul 27 15:33:42 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008196.html">[rabbitmq-discuss] General questions about HA, Stability/Reliability and Broker Administration
</A></li>
        <LI>Next message: <A HREF="008161.html">[rabbitmq-discuss] messages delivery question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8186">[ date ]</a>
              <a href="thread.html#8186">[ thread ]</a>
              <a href="subject.html#8186">[ subject ]</a>
              <a href="author.html#8186">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Jul 25, 2010 at 1:33 AM, Dave Greggory &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">davegreggory at yahoo.com</A>&gt;wrote:

&gt;<i> 2. HA/Failover: I've seen the Pacemaker guide but I'm a little hesitant to
</I>&gt;<i> set
</I>&gt;<i> that up as we have little experience in house with Pacemaker/Corosync/DRBD.
</I>&gt;<i> How
</I>&gt;<i> many people use it for HA/Failover in production systems and how happy are
</I>&gt;<i> you
</I>&gt;<i> with it? Does it support failing over if the hard drive on one of the nodes
</I>&gt;<i> die
</I>&gt;<i> instead something a little more simple like a node running out of memory or
</I>&gt;<i> hanging?
</I>&gt;<i>
</I>
We are contemplating this and have done some trialling/testing. For us the
question is between providing HA at the xenserver level or at the host/app
level using pacemaker etc.

It took a little bit of fiddling to get it running with pacemaker (this was
before the HA document was available), but once we had the system working,
it worked/works well. Our solution used/uses shared ISCSI storage rather
than DRDB and so relies on the reliability of the SAN. If a drive on one of
the hosts fails (such as the root/other partition) and this causes
difficulties for the status check script, it will failover to the other
node. We assume that the drives containing the rabbitmq storage are &quot;safe&quot;
through redundancy (RAID1, redundant storage controllers etc)

At this stage we are leaning towards the xenserver level due to lower
complexity and still satisfying our requirements. We've also had some
hardware changes (production system will now be on a FC SAN rather than
ISCSI) and have not done the work testing on the new configuration yet.

In terms of monitoring, we generally run rabbitmq_ctl list_queues as part of
a munin plugin. We plan to hook it up to nagios, but havent done so yet.

Hope this is useful information.

Joe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100728/ea223da0/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100728/ea223da0/attachment.htm</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008196.html">[rabbitmq-discuss] General questions about HA, Stability/Reliability and Broker Administration
</A></li>
	<LI>Next message: <A HREF="008161.html">[rabbitmq-discuss] messages delivery question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8186">[ date ]</a>
              <a href="thread.html#8186">[ thread ]</a>
              <a href="subject.html#8186">[ subject ]</a>
              <a href="author.html#8186">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
