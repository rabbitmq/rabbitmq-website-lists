<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Using init.d vs upstart script on EC2 image
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20init.d%20vs%20upstart%20script%20on%20EC2%20image&In-Reply-To=%3CAANLkTimWDKgM45_03tJd10UhrjNLTPzR2U8JAVfa1gDt%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008017.html">
   <LINK REL="Next"  HREF="008019.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Using init.d vs upstart script on EC2 image</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20init.d%20vs%20upstart%20script%20on%20EC2%20image&In-Reply-To=%3CAANLkTimWDKgM45_03tJd10UhrjNLTPzR2U8JAVfa1gDt%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Using init.d vs upstart script on EC2 image">majek04 at gmail.com
       </A><BR>
    <I>Fri Jul 16 16:55:49 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008017.html">[rabbitmq-discuss] Using init.d vs upstart script on EC2 image
</A></li>
        <LI>Next message: <A HREF="008019.html">[rabbitmq-discuss] Using init.d vs upstart script on EC2 image
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8018">[ date ]</a>
              <a href="thread.html#8018">[ thread ]</a>
              <a href="subject.html#8018">[ subject ]</a>
              <a href="author.html#8018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for suggestion.

Do you think our main ubuntu package should also use upstart,
or is it only relevant for EC2?

Is it compatible with debian?

Cheers,
  Marek

On Fri, Jul 16, 2010 at 15:40, Reza Lotun &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rlotun at gmail.com</A>&gt; wrote:
&gt;<i> Hi All,
</I>&gt;<i>
</I>&gt;<i> I currently have a RabbitMQ node deployed on EC2. I used your 64-bit
</I>&gt;<i> image from here:
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/ec2.html">http://www.rabbitmq.com/ec2.html</A>
</I>&gt;<i>
</I>&gt;<i> The default setup for this image works. However, I noticed that the
</I>&gt;<i> config scripts use a standard /etc/init.d init script. Since you're on
</I>&gt;<i> ubuntu, I'd suggest using an upstart (<A HREF="http://upstart.ubuntu.com">http://upstart.ubuntu.com</A>)
</I>&gt;<i> config - mainly because it allows respawning processes. So, if the
</I>&gt;<i> queue broker dies for whatever reason, upstart can be configured to
</I>&gt;<i> automatically restart it.
</I>&gt;<i>
</I>&gt;<i> A simple example config:
</I>&gt;<i>
</I>&gt;<i> ---
</I>&gt;<i> description &quot;RabbitMQ Server&quot;
</I>&gt;<i> author &#160;&quot;RabbitMQ&quot;
</I>&gt;<i>
</I>&gt;<i> start on runlevel 2
</I>&gt;<i> start on runlevel 3
</I>&gt;<i>
</I>&gt;<i> stop on runlevel 0
</I>&gt;<i> stop on runlevel 1
</I>&gt;<i> stop on runlevel 4
</I>&gt;<i> stop on runlevel 5
</I>&gt;<i> stop on runlevel 6
</I>&gt;<i>
</I>&gt;<i> exec /usr/sbin/rabbitmq-multi start_all 1 &gt;
</I>&gt;<i> /var/log/rabbitmq/startup_log 2&gt; /var/log/rabbitmq/startup_err
</I>&gt;<i> respawn
</I>&gt;<i> ----
</I>&gt;<i>
</I>&gt;<i> And then to use it:
</I>&gt;<i>
</I>&gt;<i> cp rabbitmq-server.conf /etc/init
</I>&gt;<i> sudo initctl reload-configuration
</I>&gt;<i> sudo start rabbitmq-server
</I>&gt;<i>
</I>&gt;<i> Has anyone else done something similar?
</I></PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008017.html">[rabbitmq-discuss] Using init.d vs upstart script on EC2 image
</A></li>
	<LI>Next message: <A HREF="008019.html">[rabbitmq-discuss] Using init.d vs upstart script on EC2 image
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8018">[ date ]</a>
              <a href="thread.html#8018">[ thread ]</a>
              <a href="subject.html#8018">[ subject ]</a>
              <a href="author.html#8018">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
