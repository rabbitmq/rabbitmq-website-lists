<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] New patches for rabbitmq-java client OSGi	compatibility
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20New%20patches%20for%20rabbitmq-java%20client%20OSGi%0A%09compatibility&In-Reply-To=%3Cpan.2010.07.06.14.44.26.329875%40googlemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007891.html">
   <LINK REL="Next"  HREF="007880.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] New patches for rabbitmq-java client OSGi	compatibility</H1>
    <B>Holger Hoffstaette</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20New%20patches%20for%20rabbitmq-java%20client%20OSGi%0A%09compatibility&In-Reply-To=%3Cpan.2010.07.06.14.44.26.329875%40googlemail.com%3E"
       TITLE="[rabbitmq-discuss] New patches for rabbitmq-java client OSGi	compatibility">holger.hoffstaette at googlemail.com
       </A><BR>
    <I>Tue Jul  6 15:44:26 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007891.html">[rabbitmq-discuss] rabbit is out of service in disk mode.
</A></li>
        <LI>Next message: <A HREF="007880.html">[rabbitmq-discuss] New patches for rabbitmq-java client OSGi	compatibility
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7879">[ date ]</a>
              <a href="thread.html#7879">[ thread ]</a>
              <a href="subject.html#7879">[ subject ]</a>
              <a href="author.html#7879">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hey!

I've respun my last year's OSGi integration to the latest 1.8 client
library, this time with the changes in a proper hg branch instead of
trampling all over default.. :)

Find it here in the &quot;osgi&quot; branch:
<A HREF="http://hoho.dyndns.org/hg/rabbitmq-java-client/">http://hoho.dyndns.org/hg/rabbitmq-java-client/</A>

Things to know:

- it adds a processing step to the jar file generation using the &quot;bnd&quot;
utility [1] to add OSGi metadata to the generated library manifest. The
tool jar and metadata processing instructions are in the new &quot;osgi&quot;
subdirectory. There is no runtime code dependency; all this does is add a
bunch of headers to the jar's manifest.

- I updated the commons-io dependency to 1.4. This should not be a problem
to any clients as 1.4 is binary-compatible to the old one; however 1.4
(itself already over two years old) is the first one with valid OSGi
metadata itself. The client library itself is not affected by this. This
step is not strictly necessary as the OSGi runtime will properly resolve &amp;
wire the needed dependency, but on the other hand pulling in ancient
dependencies is not that great either (e.g. when using maven).

- While I was there I also updated the retrotranslator &amp; backport lib. I'm
not sure if the 1.4 backwards compatibility is something you want to
continue but it doesn't hurt either.

The bnd invocation is wired into the &quot;jar&quot; task. This OSGi-fication is
currently only done for the regular JDK5 jar, so the invocation of the
&quot;bndwrap&quot; task will also be have to be performed on the retrotranslated
jar, using 1.4-compatible bnd instructions (to pull in the
backport-concurrency lib). Let me know if this is of interest.

Also there seems to be an unneeded dependency on commons-cli in the maven
pom. commons-cli is only needed for the tests &amp; tools.

All changesets are nicely grouped together, so you can cherry-pick what you
want.

cheers
Holger


</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007891.html">[rabbitmq-discuss] rabbit is out of service in disk mode.
</A></li>
	<LI>Next message: <A HREF="007880.html">[rabbitmq-discuss] New patches for rabbitmq-java client OSGi	compatibility
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7879">[ date ]</a>
              <a href="thread.html#7879">[ thread ]</a>
              <a href="subject.html#7879">[ subject ]</a>
              <a href="author.html#7879">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
