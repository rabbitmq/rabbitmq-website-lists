<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] py-amqplib and rabbit default
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20py-amqplib%20and%20rabbit%20default&In-Reply-To=%3C20100731102828.GA20755%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008229.html">
   <LINK REL="Next"  HREF="008231.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] py-amqplib and rabbit default</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20py-amqplib%20and%20rabbit%20default&In-Reply-To=%3C20100731102828.GA20755%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] py-amqplib and rabbit default">matthew at rabbitmq.com
       </A><BR>
    <I>Sat Jul 31 11:28:29 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008229.html">[rabbitmq-discuss] py-amqplib and rabbit default
</A></li>
        <LI>Next message: <A HREF="008231.html">[rabbitmq-discuss] py-amqplib and rabbit default
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8230">[ date ]</a>
              <a href="thread.html#8230">[ thread ]</a>
              <a href="subject.html#8230">[ subject ]</a>
              <a href="author.html#8230">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Jul 30, 2010 at 08:01:31PM -0500, tsuraan wrote:
&gt;<i> I just updated to default (wanting to try out the disk persister that
</I>&gt;<i> just merged in), and it doesn't look like py-amqplib can handshake
</I>&gt;<i> with it anymore.  It's protocol header is AMQP\x01\x01\x09\x01 (which
</I>&gt;<i> seems like a strange header for the 0.8 client, but anyhow...).  In
</I>&gt;<i> the bug21673 branch, the handshake pattern was
</I>&gt;<i> AMQP\x01\x01\x&lt;Major&gt;\x&lt;Minor&gt;, but in default, it's now divided into
</I>&gt;<i> AMQP0091, AMQP1109, and AMQP1180.  Why was this done?  Changing the
</I>&gt;<i> header string in py-amqplib is easy enough, but it seems weird that a
</I>&gt;<i> client cannot be compatible with the old rabbit and the new one.
</I>
Ahh well the multi-protocol broker stuff landed yesterday so the broker
can now speak AMQP 0-8 and 0-9-1. I wonder whether we've managed to get
protocol negotiation wrong. I'm afraid I've not worked on that area of
the codebase and don't really understand the bizarre complexities of
protocol negotiation in AMQP at all so this might have to wait until
Monday... What may be more likely is that the py-amqplib always sent a
0-9-1 protocol header which we accepted and told it we were only going
to speak 0-8 to it. But it may be the 0-9-1 header it was sending was
actually wrong as far as the 0-9-1 spec says. Certainly I'm aware we've
found other AMQP brokers that get the protocol header wrong too...

Matthew
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008229.html">[rabbitmq-discuss] py-amqplib and rabbit default
</A></li>
	<LI>Next message: <A HREF="008231.html">[rabbitmq-discuss] py-amqplib and rabbit default
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8230">[ date ]</a>
              <a href="thread.html#8230">[ thread ]</a>
              <a href="subject.html#8230">[ subject ]</a>
              <a href="author.html#8230">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
