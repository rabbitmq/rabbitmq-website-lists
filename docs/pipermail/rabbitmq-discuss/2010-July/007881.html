<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] ssl certificate to client lookup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20ssl%20certificate%20to%20client%20lookup&In-Reply-To=%3CAANLkTimpr8HTUokKYApWNgxkReMPWZ5A1MvP6ETvy6Ng%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007877.html">
   <LINK REL="Next"  HREF="007893.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] ssl certificate to client lookup</H1>
    <B>Nathaniel Haggard</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20ssl%20certificate%20to%20client%20lookup&In-Reply-To=%3CAANLkTimpr8HTUokKYApWNgxkReMPWZ5A1MvP6ETvy6Ng%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] ssl certificate to client lookup">natester at gmail.com
       </A><BR>
    <I>Tue Jul  6 18:09:26 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007877.html">[rabbitmq-discuss] ssl certificate to client lookup
</A></li>
        <LI>Next message: <A HREF="007893.html">[rabbitmq-discuss] ssl certificate to client lookup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7881">[ date ]</a>
              <a href="thread.html#7881">[ thread ]</a>
              <a href="subject.html#7881">[ subject ]</a>
              <a href="author.html#7881">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Jul 6, 2010 at 4:40 AM, Matthias Radestock
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt; wrote:
&gt;<i> Lionel,
</I>&gt;<i>
</I>&gt;<i> On 06/07/10 11:11, Lionel Cons wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The &quot;public messaging service&quot; is exactly the model we try to work
</I>&gt;&gt;<i> towards. In such a model, the service provider needs to protect its
</I>&gt;&gt;<i> resources. Unauthenticated clients may get directed to a sacrificial
</I>&gt;&gt;<i> broker so that abuses do not harm authenticated clients. Similarly,
</I>&gt;&gt;<i> authenticated clients that do not want to expose their &quot;identity&quot; may
</I>&gt;&gt;<i> get a different level of service. Clients who play by the rules
</I>&gt;&gt;<i> (i.e. authentication plus traceability) may get better service.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't believe you can build a decent public messaging service
</I>&gt;&gt;<i> without a minimum security.
</I>&gt;<i>
</I>&gt;<i> I wasn't suggesting that clients should be able to work unauthenticated, but
</I>&gt;<i> that they may not want their identity passed to consumers. So the question
</I>&gt;<i> is, if the authentication is only of interest to the broker, why does it get
</I>&gt;<i> passed to the *consumer*? Would it instead be sufficient to retain the
</I>&gt;<i> credentials internally in the broker and present them in various admin
</I>&gt;<i> tools, but not pass them to the consumers? That way we would also preserve
</I>&gt;<i> message fidelity.
</I>&gt;<i>
</I>&gt;&gt;<i> There are two ways to achieve message authentication: outside or
</I>&gt;&gt;<i> inside of messaging.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Outside, the producer signs the message body and the consumer checks
</I>&gt;&gt;<i> the signature. There are no requirements on the brokers but only the
</I>&gt;&gt;<i> consumer knows who the sender is. This is good for the clients, not
</I>&gt;&gt;<i> for the messaging service.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Inside, all intermediaries (broker, proxy, shovel...) must be trusted.
</I>&gt;&gt;<i> Otherwise, a rogue intermediary could do evil things with the message.
</I>&gt;&gt;<i> This is good for the messaging service as it can control who does
</I>&gt;&gt;<i> what, not for the clients, unless they trust the messaging service.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So to answer your question, if the consumer trusts X and Y then it can
</I>&gt;&gt;<i> know the sender identity via &quot;inside&quot; authentication. If it does not
</I>&gt;&gt;<i> trust the service, it has to use &quot;outside&quot; authentication.
</I>&gt;<i>
</I>&gt;<i> Right, except the consumer doesn't even know the message came via broker X.
</I>&gt;<i> And, furthermore, the identity presented to broker X may be meaningless in
</I>&gt;<i> the context of broker Y and the consumer.
</I>&gt;<i>
</I>&gt;<i> So it seems to me that if you want *consumers* to know about sender
</I>&gt;<i> identities then that should be handled at the app level, outside the
</I>&gt;<i> messaging layer.
</I>
I would agree if RabbitMQ did not support SSL, but since it does it
why not take advantage of the features of SSL?  I'm speaking of the
scenario where producers and consumers trust the broker but not each
other.

People who try to take care of security at the app level could easily
make mistakes that the RabbitMQ SSL implementation avoids.

&gt;<i>
</I>&gt;<i> OTOH, servers, and those administering them, should be able to find out
</I>&gt;<i> which AMQP users are responsible for certain actions (such as the creation
</I>&gt;<i> of an exchange or queue, the sending or retrieval of a message) and their
</I>&gt;<i> resulting artifacts (such as a created queue or exchange, or a stored
</I>&gt;<i> message).
</I>&gt;<i>
</I>
I'm noticing a layering issue; am I the only one?

I opted for managing many certificates instead of managing many users
on the AMQP server.  In this system a certificate represents a user.
This solution for authentication works well over many systems that
support SSL.

Certainly clients could implement their own authentication mechanism,
their own transport security, and more; however, rabbit supports SSL--
why does rabbit support SSL?  ZeroMQ doesn't and now I understand
better why they do not.  Is SSL support in rabbit designed to follow
the role of SSL for HTTPS that is primarily to establish broker/server
authenticity?


&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I>
-Nate
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007877.html">[rabbitmq-discuss] ssl certificate to client lookup
</A></li>
	<LI>Next message: <A HREF="007893.html">[rabbitmq-discuss] ssl certificate to client lookup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7881">[ date ]</a>
              <a href="thread.html#7881">[ thread ]</a>
              <a href="subject.html#7881">[ subject ]</a>
              <a href="author.html#7881">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
