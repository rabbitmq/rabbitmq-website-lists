<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Load balancing with multiple consumers on a single queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Load%20balancing%20with%20multiple%20consumers%20on%20a%0A%20single%20queue&In-Reply-To=OFE71C5453.F22D1392-ON80257496.0052ABBD-80257496.005540E4%40Edftrading.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001103.html">
   <LINK REL="Next"  HREF="001107.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Load balancing with multiple consumers on a single queue</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Load%20balancing%20with%20multiple%20consumers%20on%20a%0A%20single%20queue&In-Reply-To=OFE71C5453.F22D1392-ON80257496.0052ABBD-80257496.005540E4%40Edftrading.com"
       TITLE="[rabbitmq-discuss] Load balancing with multiple consumers on a single queue">matthias at lshift.net
       </A><BR>
    <I>Wed Jul 30 18:26:42 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001103.html">[rabbitmq-discuss] Load balancing with multiple consumers on a	single queue
</A></li>
        <LI>Next message: <A HREF="001107.html">[rabbitmq-discuss] Load balancing with multiple consumers on a	single queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1105">[ date ]</a>
              <a href="thread.html#1105">[ thread ]</a>
              <a href="subject.html#1105">[ subject ]</a>
              <a href="author.html#1105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">David.Corcoran at edftrading.com</A> wrote:
&gt;<i> I'm not sure how message delivery credits work but having read through a
</I>&gt;<i> little it looks like it might be size oriented.
</I>
basic.qos can do count based windows too. So with a window size of one 
you can guarantee that at most one message is &quot;in flight&quot; or being 
processed by the consumer.

This has come up before, and basic.qos is on our todo list. As with 
basic.reject, and perhaps more so, there are quite a few challenges in 
implementing it, which is why it hasn't been done yet. One difficulty is 
that basic.qos operates on an entire channel (or, optionally, even an 
entire connection). Since a single channel can consume messages from 
multiple queues, and these queues can have consumers on other channels 
(with consumption possibly limited by basic.qos) we basically have a 
nice little optimisation &amp; consensus problem at our hands: figuring out 
which queues should send which messages to which channels such that the 
maximum number of messages gets delivered while staying inside the 
configured qos limits. And all that in a distributed setting. And the 
limits change all the time outside the brokers control - clients ack 
messages whenever they please, the topology may change, etc, etc. Great 
fun :)


Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001103.html">[rabbitmq-discuss] Load balancing with multiple consumers on a	single queue
</A></li>
	<LI>Next message: <A HREF="001107.html">[rabbitmq-discuss] Load balancing with multiple consumers on a	single queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1105">[ date ]</a>
              <a href="thread.html#1105">[ thread ]</a>
              <a href="subject.html#1105">[ subject ]</a>
              <a href="author.html#1105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
