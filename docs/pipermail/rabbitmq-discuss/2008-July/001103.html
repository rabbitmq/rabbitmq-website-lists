<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Load balancing with multiple consumers on a	single queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Load%20balancing%20with%20multiple%20consumers%20on%0A%20a%09single%20queue&In-Reply-To=269388e30807300731x4a04d27peb3fb2a9751c3b65%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001102.html">
   <LINK REL="Next"  HREF="001105.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Load balancing with multiple consumers on a	single queue</H1>
    <B>David.Corcoran at edftrading.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Load%20balancing%20with%20multiple%20consumers%20on%0A%20a%09single%20queue&In-Reply-To=269388e30807300731x4a04d27peb3fb2a9751c3b65%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Load balancing with multiple consumers on a	single queue">David.Corcoran at edftrading.com
       </A><BR>
    <I>Wed Jul 30 16:31:11 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001102.html">[rabbitmq-discuss] Load balancing with multiple consumers on a	single queue
</A></li>
        <LI>Next message: <A HREF="001105.html">[rabbitmq-discuss] Load balancing with multiple consumers on a single queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1103">[ date ]</a>
              <a href="thread.html#1103">[ thread ]</a>
              <a href="subject.html#1103">[ subject ]</a>
              <a href="author.html#1103">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> wrote on 30/07/2008 15:31:45:

&gt;<i> ... so far we have not had anybody complaining
</I>&gt;<i> about the absence of basic.reject.
</I>&gt;<i>
</I>&gt;<i> IIRC you are the first :-(
</I>
I'm just difficult ;)

&gt;<i>
</I>&gt;<i> There are a couple of options that we have:
</I>&gt;<i>
</I>&gt;<i> 1. Obviously implement this feature;
</I>&gt;<i> 2. Implement message delivery credit window management, which would be
</I>&gt;<i> to solution to the root cause
</I>
I'm not sure how message delivery credits work but having read through a
little it looks like it might be size oriented. So producer and consumer
have a credit of bytes and when either hits zero they wait. Unfortunately
our long running jobs are no larger than our short running ones. So our
credit window would have be based on job running length which we don't know
in advance.

What we're really looking for is a nice pattern called &quot;work stealing&quot;.
There are lots of papers out there on it but basically it just means taking
jobs from the end of other peoples' queues when you've nothing more in your
own queue. I'm not sure of the best way to do this in the rabbitmq world.

&gt;<i>
</I>&gt;<i> What the timelines are for either of case I cannot say at the moment,
</I>&gt;<i> we will need to consider other plans and what is coming up in 0-9 SP1.
</I>
That's ok. In the very short term I think we have a way around it.
Basically receiving jobs, acking and then resending them back to the same
queue. It's not pretty but it should do the trick.

Thanks for the help,

Dave



*********************************************************************
This communication contains confidential information, some or all of which may be privileged. It is for the intended recipient only and others must not disclose, distribute, copy, print or rely on this communication. If an addressing or transmission error has misdirected this communication, please notify the sender by replying to this e-mail and then delete the e-mail. E-mail sent to EDF Trading may be monitored by the company. Thank you. 
EDF Trading Limited
80 Victoria Street, 3rd Floor, Cardinal Place, London, SW1E 5JL
A Company registered in England No. 4255974. 
Switchboard: 020 7061 4000
EDF Trading Markets Limited is a member of the EDF Trading Limited Group and is authorised and regulated by the Financial Services Authority.
VAT number: GB 735 5479 07
*********************************************************************


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001102.html">[rabbitmq-discuss] Load balancing with multiple consumers on a	single queue
</A></li>
	<LI>Next message: <A HREF="001105.html">[rabbitmq-discuss] Load balancing with multiple consumers on a single queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1103">[ date ]</a>
              <a href="thread.html#1103">[ thread ]</a>
              <a href="subject.html#1103">[ subject ]</a>
              <a href="author.html#1103">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
