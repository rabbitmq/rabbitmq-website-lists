<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Load balancing with multiple consumers on a single queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Load%20balancing%20with%20multiple%20consumers%20on%20a%0A%20single%20queue&In-Reply-To=48909EA6.1080903%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001104.html">
   <LINK REL="Next"  HREF="001112.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Load balancing with multiple consumers on a single queue</H1>
    <B>David.Corcoran at edftrading.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Load%20balancing%20with%20multiple%20consumers%20on%20a%0A%20single%20queue&In-Reply-To=48909EA6.1080903%40lshift.net"
       TITLE="[rabbitmq-discuss] Load balancing with multiple consumers on a single queue">David.Corcoran at edftrading.com
       </A><BR>
    <I>Wed Jul 30 18:39:04 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001104.html">[rabbitmq-discuss] Load balancing with multiple consumers on a single queue
</A></li>
        <LI>Next message: <A HREF="001112.html">[rabbitmq-discuss] Load balancing with multiple consumers on a single queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1106">[ date ]</a>
              <a href="thread.html#1106">[ thread ]</a>
              <a href="subject.html#1106">[ subject ]</a>
              <a href="author.html#1106">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> wrote on 30/07/2008 18:02:30:

Hey Matthias,
&gt;<i>
</I>&gt;<i> Wouldn't a simple solution be to have all consumers consuming off a
</I>&gt;<i> single queue using basic.get? I.e. consumer gets job with basic.get,
</I>&gt;<i> does work, sends ack, gets next job with basic.get, etc.
</I>
Not really because a lot of our jobs are only a few ms so the rtt would
play too much part if we did it this way. The idea of having a local queue
full of messages works great for us, as long as there's a way to reject
messages if someone else's queue is empty.

&gt;<i>
</I>&gt;<i> This does involve polling if the job queue is empty (basic.get doesn't
</I>&gt;<i> block; it returns a get-empty response), but you could probably work out
</I>&gt;<i> some reasonably straightforward heuristics to stop that from getting out
</I>&gt;<i> of hand.
</I>&gt;<i>
</I>
I tried the polling way before and it kills RabbitMQ for us. We can have
over 500 consumers all polling and with a small wait time between polls
this causes RabbitMQ to grind to a halt. A longer wait time between polls
means we aren't efficient when there are short jobs to be run.

Dave


*********************************************************************
This communication contains confidential information, some or all of which may be privileged. It is for the intended recipient only and others must not disclose, distribute, copy, print or rely on this communication. If an addressing or transmission error has misdirected this communication, please notify the sender by replying to this e-mail and then delete the e-mail. E-mail sent to EDF Trading may be monitored by the company. Thank you. 
EDF Trading Limited
80 Victoria Street, 3rd Floor, Cardinal Place, London, SW1E 5JL
A Company registered in England No. 4255974. 
Switchboard: 020 7061 4000
EDF Trading Markets Limited is a member of the EDF Trading Limited Group and is authorised and regulated by the Financial Services Authority.
VAT number: GB 735 5479 07
*********************************************************************


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001104.html">[rabbitmq-discuss] Load balancing with multiple consumers on a single queue
</A></li>
	<LI>Next message: <A HREF="001112.html">[rabbitmq-discuss] Load balancing with multiple consumers on a single queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1106">[ date ]</a>
              <a href="thread.html#1106">[ thread ]</a>
              <a href="subject.html#1106">[ subject ]</a>
              <a href="author.html#1106">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
