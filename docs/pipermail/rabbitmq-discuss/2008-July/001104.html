<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Load balancing with multiple consumers on a single queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Load%20balancing%20with%20multiple%20consumers%20on%20a%0A%20single%20queue&In-Reply-To=OF4E4A6846.DD3CACCB-ON80257496.003DC984-80257496.00401115%40Edftrading.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001111.html">
   <LINK REL="Next"  HREF="001106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Load balancing with multiple consumers on a single queue</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Load%20balancing%20with%20multiple%20consumers%20on%20a%0A%20single%20queue&In-Reply-To=OF4E4A6846.DD3CACCB-ON80257496.003DC984-80257496.00401115%40Edftrading.com"
       TITLE="[rabbitmq-discuss] Load balancing with multiple consumers on a single queue">matthias at lshift.net
       </A><BR>
    <I>Wed Jul 30 18:02:30 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001111.html">[rabbitmq-discuss] Load balancing with multiple consumers on a	single queue
</A></li>
        <LI>Next message: <A HREF="001106.html">[rabbitmq-discuss] Load balancing with multiple consumers on a single queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1104">[ date ]</a>
              <a href="thread.html#1104">[ thread ]</a>
              <a href="subject.html#1104">[ subject ]</a>
              <a href="author.html#1104">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">David.Corcoran at edftrading.com</A> wrote:
&gt;<i> 
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> wrote on 30/07/2008 09:33:19:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> The round-robin nature of message deliveries is great for load
</I>&gt;&gt;<i> balancing if all our jobs require equal processing time but this is
</I>&gt;&gt;<i> not the case.. jobs can range anywhere from a few seconds to a
</I>&gt;&gt;<i> minute worth of processing.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hey Nathan,
</I>&gt;<i> 
</I>&gt;<i> We're having the exact same problem. We have jobs of varying lengths and we
</I>&gt;<i> don't know how long each will take before we send it off. Some jobs can
</I>&gt;<i> take a few ms and others 5 minutes. So we can't do different queues for
</I>&gt;<i> different length jobs.
</I>
Wouldn't a simple solution be to have all consumers consuming off a 
single queue using basic.get? I.e. consumer gets job with basic.get, 
does work, sends ack, gets next job with basic.get, etc.

This does involve polling if the job queue is empty (basic.get doesn't 
block; it returns a get-empty response), but you could probably work out 
some reasonably straightforward heuristics to stop that from getting out 
of hand.


Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001111.html">[rabbitmq-discuss] Load balancing with multiple consumers on a	single queue
</A></li>
	<LI>Next message: <A HREF="001106.html">[rabbitmq-discuss] Load balancing with multiple consumers on a single queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1104">[ date ]</a>
              <a href="thread.html#1104">[ thread ]</a>
              <a href="subject.html#1104">[ subject ]</a>
              <a href="author.html#1104">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
