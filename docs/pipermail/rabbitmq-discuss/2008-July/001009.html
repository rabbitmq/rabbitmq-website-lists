<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq out of memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq%20out%20of%20memory&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001008.html">
   <LINK REL="Next"  HREF="001010.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq out of memory</H1>
    <B>David.Corcoran at edftrading.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq%20out%20of%20memory&In-Reply-To="
       TITLE="[rabbitmq-discuss] rabbitmq out of memory">David.Corcoran at edftrading.com
       </A><BR>
    <I>Thu Jul 10 17:24:23 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001008.html">[rabbitmq-discuss]  Process N messages / VM concurrently
</A></li>
        <LI>Next message: <A HREF="001010.html">[rabbitmq-discuss] rabbitmq out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1009">[ date ]</a>
              <a href="thread.html#1009">[ thread ]</a>
              <a href="subject.html#1009">[ subject ]</a>
              <a href="author.html#1009">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hey,

We're having some memory problems with RabbitMQ and I'm trying to track
down their cause. What's happening is that RabbitMQ quite quickly starts to
eat up memory and around the 2GB mark dies (it's a 32bit machine). The logs
look fine and the startup.err just has a memory allocation error.

I've attached the output of stat_all() to see if that might help. It
doesn't look very informative. Is there another command I should be
running?

(specs)
redhat el5 32bit
erlang 12b3
rabbitmq 1.3.0

(stat_all)

(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">test at vsdlbblue01</A>)4&gt; rpc:call('<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at vsdlbblue01</A>', rabbit_amqqueue,
stat_all, []).
[{ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen2458_rabbit at vsdlbblue01_20080710111628_</A>&quot;&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen2127_rabbit at vsdlbblue01_20080710111628_</A>&quot;&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen904_rabbit at vsdlbblue01_20080710111628_</A>&quot;&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen972_rabbit at vsdlbblue01_20080710111628_</A>&quot;&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen486_rabbit at vsdlbblue01_20080710111628_</A>&quot;&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen3773_rabbit at vsdlbblue01_20080710111628_</A>&quot;&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen1827_rabbit at vsdlbblue01_20080710111628_</A>&quot;&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen1839_rabbit at vsdlbblue01_20080710111628_</A>&quot;&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen1277_rabbit at vsdlbblue01_20080710111628_</A>&quot;&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen507_rabbit at vsdlbblue01_20080710111628_</A>&quot;&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen221_rabbit at vsdlbblue01_20080710111628_</A>&quot;&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen2904_rabbit at vsdlbblue01_20080710111</A>&quot;...&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen873_rabbit at vsdlbblue01_20080710</A>&quot;...&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen312_rabbit at vsdlbblue01_2008</A>&quot;...&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen2149_rabbit at vsdlbblue01</A>&quot;...&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
               &lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen570_rabbit at vsdlbblu</A>&quot;...&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.q.gen4091_rabbit at vsd</A>&quot;...&gt;&gt;},
     0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;amq.q.gen4019_rabbit&quot;...&gt;&gt;},0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;amq.q.gen3219_ra&quot;...&gt;&gt;},0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;amq.q.gen308&quot;...&gt;&gt;},0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;amq.q.ge&quot;...&gt;&gt;},0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;amq.&quot;...&gt;&gt;},0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;...&gt;&gt;},0,1},
 {ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,...},0,1},
 {ok,{resource,&lt;&lt;...&gt;&gt;,...},0,1},
 {ok,{resource,...},0,...},
 {ok,{...},...},
 {ok,...},
 {...}|...]
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">test at vsdlbblue01</A>)5&gt;

RabbitMQ was using 1.7GB of RAM when I ran stat_all

Thanks,

Dave



*********************************************************************
This communication contains confidential information, some or all of which may be privileged. It is for the intended recipient only and others must not disclose, distribute, copy, print or rely on this communication. If an addressing or transmission error has misdirected this communication, please notify the sender by replying to this e-mail and then delete the e-mail. E-mail sent to EDF Trading may be monitored by the company. Thank you. 
EDF Trading Limited
80 Victoria Street, 3rd Floor, Cardinal Place, London, SW1E 5JL
A Company registered in England No. 4255974. 
Switchboard: 020 7061 4000
EDF Trading Markets Limited is a member of the EDF Trading Limited Group and is authorised and regulated by the Financial Services Authority.
VAT number: GB 735 5479 07
*********************************************************************


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001008.html">[rabbitmq-discuss]  Process N messages / VM concurrently
</A></li>
	<LI>Next message: <A HREF="001010.html">[rabbitmq-discuss] rabbitmq out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1009">[ date ]</a>
              <a href="thread.html#1009">[ thread ]</a>
              <a href="subject.html#1009">[ subject ]</a>
              <a href="author.html#1009">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
