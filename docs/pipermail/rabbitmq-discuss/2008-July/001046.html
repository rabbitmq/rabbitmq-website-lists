<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] encoding content body frames
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20encoding%20content%20body%20frames&In-Reply-To=e1c05edd0807141632p5e216380n18430819a5f5e19a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001049.html">
   <LINK REL="Next"  HREF="001038.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] encoding content body frames</H1>
    <B>Tony Garnock-Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20encoding%20content%20body%20frames&In-Reply-To=e1c05edd0807141632p5e216380n18430819a5f5e19a%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] encoding content body frames">tonyg at lshift.net
       </A><BR>
    <I>Wed Jul 16 11:27:37 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001049.html">[rabbitmq-discuss] encoding content body frames
</A></li>
        <LI>Next message: <A HREF="001038.html">[rabbitmq-discuss] runjava.sh
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1046">[ date ]</a>
              <a href="thread.html#1046">[ thread ]</a>
              <a href="subject.html#1046">[ subject ]</a>
              <a href="author.html#1046">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Aman,

Aman Gupta wrote:
&gt;<i> The content body payload is an opaque binary block followed by a frame end octet:
</I>
That's right - the language in the spec isn't quite precise enough to 
pin down the expected behaviour here. The way it is intended to be, and 
the way the current implementations work, is as follows.

Each frame (no matter its type) is built from
   - 7 bytes of header
   - N bytes of body
   - 1 byte of frame end marker

So for method, content header, and content body frames (and also the 
others mentioned in the spec), the same generic pattern is used.

In more detail, a full frame looks like

  - 1 byte of type (method, content header, content body etc)
  - 2 bytes of channel number
  - 4 bytes of payload size (= N)
  - N bytes of payload
  - 1 byte of frame end marker (0xCE)

Note that the payload size word counts neither the 7 bytes of header nor 
the 1 bytes of frame end marker.

Once a complete frame is read, its type is examined, and the payload can 
be further decoded if the frame is a method or content header frame.

Regards,
   Tony



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001049.html">[rabbitmq-discuss] encoding content body frames
</A></li>
	<LI>Next message: <A HREF="001038.html">[rabbitmq-discuss] runjava.sh
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1046">[ date ]</a>
              <a href="thread.html#1046">[ thread ]</a>
              <a href="subject.html#1046">[ subject ]</a>
              <a href="author.html#1046">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
