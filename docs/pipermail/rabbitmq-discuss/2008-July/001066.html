<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] AMQP ruby client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20AMQP%20ruby%20client&In-Reply-To=e1c05edd0807120245i1993333bs25d834d45aa5d52e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001028.html">
   <LINK REL="Next"  HREF="001067.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] AMQP ruby client</H1>
    <B>Aman Gupta</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20AMQP%20ruby%20client&In-Reply-To=e1c05edd0807120245i1993333bs25d834d45aa5d52e%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] AMQP ruby client">rabbitmq at tmm1.net
       </A><BR>
    <I>Fri Jul 18 02:57:43 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001028.html">[rabbitmq-discuss] AMQP ruby client
</A></li>
        <LI>Next message: <A HREF="001067.html">[rabbitmq-discuss] AMQP ruby client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1066">[ date ]</a>
              <a href="thread.html#1066">[ thread ]</a>
              <a href="subject.html#1066">[ subject ]</a>
              <a href="author.html#1066">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've just finished a simple high level api, and committed several examples
showing off direct, topic, fanout and rpc style messaging over rabbitmq:
  <A HREF="http://github.com/tmm1/amqp/tree/master/examples/pingpong.rb">http://github.com/tmm1/amqp/tree/master/examples/pingpong.rb</A>
  <A HREF="http://github.com/tmm1/amqp/tree/master/examples/clock.rb">http://github.com/tmm1/amqp/tree/master/examples/clock.rb</A>
  <A HREF="http://github.com/tmm1/amqp/tree/master/examples/stocks.rb">http://github.com/tmm1/amqp/tree/master/examples/stocks.rb</A>
  <A HREF="http://github.com/tmm1/amqp/tree/master/examples/hashtable.rb">http://github.com/tmm1/amqp/tree/master/examples/hashtable.rb</A>

The API revolves around an MQ object, which corresponds 1:1 with an AMQP
channel. An AMQP connection is created automatically by the MQ class (on
demand), so you don't have to worry about connection, channel or sessions.
In the simplest case, MQ objects allow publishing to exchanges and reading
from queues:

  amq = MQ.new

  amq.queue('queue_name').subscribe{ |msg|
    puts &quot;i got a message: #{msg}&quot;   # msg == &quot;hello world&quot;
  end

  amq.direct.publish('hello world', :key =&gt; 'queue_name')

  Aman Gupta

On Sat, Jul 12, 2008 at 2:45 AM, Aman Gupta &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq at tmm1.net</A>&gt; wrote:

&gt;<i> I've been working on a Ruby/EventMachine AMQP client over the past few days
</I>&gt;<i> and I have a simple client up and running:
</I>&gt;<i>
</I>&gt;<i>     def receive_data data
</I>&gt;<i>       Frame.extract(data).each do |frame|
</I>&gt;<i>         # log 'got a frame', frame
</I>&gt;<i>
</I>&gt;<i>         case method = frame.payload
</I>&gt;<i>         when Protocol::Connection::Start
</I>&gt;<i>           send Protocol::Connection::StartOk.new({:platform =&gt;
</I>&gt;<i> 'Ruby/EventMachine',
</I>&gt;<i>                                                   :product =&gt; 'AMQP',
</I>&gt;<i>                                                   :information =&gt; '
</I>&gt;<i> <A HREF="http://github.com/tmm1/amqp',">http://github.com/tmm1/amqp',</A>
</I>&gt;<i>                                                   :version =&gt; '0.0.1'},
</I>&gt;<i>                                                  'AMQPLAIN',
</I>&gt;<i>                                                  {:LOGIN =&gt; 'guest',
</I>&gt;<i>                                                   :PASSWORD =&gt; 'guest'},
</I>&gt;<i>                                                  'en_US')
</I>&gt;<i>
</I>&gt;<i>         when Protocol::Connection::Tune
</I>&gt;<i>           send Protocol::Connection::TuneOk.new :channel_max =&gt; 0,
</I>&gt;<i>                                                 :frame_max =&gt; 131072,
</I>&gt;<i>                                                 :heartbeat =&gt; 0
</I>&gt;<i>
</I>&gt;<i>           send Protocol::Connection::Open.new :virtual_host =&gt; '/',
</I>&gt;<i>                                               :capabilities =&gt; '',
</I>&gt;<i>                                               :insist =&gt; false
</I>&gt;<i>
</I>&gt;<i>         when Protocol::Connection::OpenOk
</I>&gt;<i>           send Protocol::Channel::Open.new, :channel =&gt; 1
</I>&gt;<i>         end
</I>&gt;<i>       end
</I>&gt;<i>     end
</I>&gt;<i>
</I>&gt;<i> Feedback and ideas for a higher-level queue/exchange/binding API are
</I>&gt;<i> welcome.
</I>&gt;<i>
</I>&gt;<i>   Aman Gupta
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080717/39e40a5f/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080717/39e40a5f/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001028.html">[rabbitmq-discuss] AMQP ruby client
</A></li>
	<LI>Next message: <A HREF="001067.html">[rabbitmq-discuss] AMQP ruby client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1066">[ date ]</a>
              <a href="thread.html#1066">[ thread ]</a>
              <a href="subject.html#1066">[ subject ]</a>
              <a href="author.html#1066">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
