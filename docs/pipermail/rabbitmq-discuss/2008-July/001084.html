<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq out of memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq%20out%20of%20memory&In-Reply-To=OF44AE14E8.51B09019-ON8025748D.0034ECC1-8025748D.00362868%40Edftrading.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001077.html">
   <LINK REL="Next"  HREF="001092.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq out of memory</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq%20out%20of%20memory&In-Reply-To=OF44AE14E8.51B09019-ON8025748D.0034ECC1-8025748D.00362868%40Edftrading.com"
       TITLE="[rabbitmq-discuss] rabbitmq out of memory">matthias at lshift.net
       </A><BR>
    <I>Wed Jul 23 19:39:04 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001077.html">[rabbitmq-discuss] rabbitmq out of memory
</A></li>
        <LI>Next message: <A HREF="001092.html">[rabbitmq-discuss] rabbitmq out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1084">[ date ]</a>
              <a href="thread.html#1084">[ thread ]</a>
              <a href="subject.html#1084">[ subject ]</a>
              <a href="author.html#1084">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David,

<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">David.Corcoran at edftrading.com</A> wrote:
&gt;<i> Tony Garnock-Jones &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonyg at lshift.net</A>&gt; wrote on 18/07/2008 10:40:35:
</I>&gt;&gt;<i> For instance, you could type
</I>&gt;&gt;<i> &quot;i().&quot; into the shell:
</I>
&gt;<i> The output is huge so I'm not sure how helpful it will be to you apart from
</I>&gt;<i> to say it probably shouldn't be 13,000 lines ;)
</I>
There is some useful info in there. For example, you have over 600 
connections. Nothing wrong with that in principle, but is it expected?

Unfortunately the information sheds no light on where the memory has 
gone. A more detailed report might provide some clues. Please run

file:write_file(&quot;/tmp/processes.erl&quot;, io_lib:format(&quot;~p&quot;, 
[[process_info(P) || P &lt;- processes()]])).

and mail us the output file. The file may be quite big, so it's probably 
best to just send it to Tony or me rather than the list. Also, you may 
want to scan it for any sensitive information first.

&gt;<i> one thing I forgot to mention is that it's constantly using about 10%
</I>&gt;<i> CPU.
</I>
And that happens when there are no messages going through the system?

Part of the time will be spent sending and receiving heartbeat frames on 
your 600+ connections. That should take much less than 10% of the CPU 
though. Still, you may want to increase the heartbeat interval to see 
whether that makes a difference. There are config params/methods in the 
client API for that.


Regards,

Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001077.html">[rabbitmq-discuss] rabbitmq out of memory
</A></li>
	<LI>Next message: <A HREF="001092.html">[rabbitmq-discuss] rabbitmq out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1084">[ date ]</a>
              <a href="thread.html#1084">[ thread ]</a>
              <a href="subject.html#1084">[ subject ]</a>
              <a href="author.html#1084">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
