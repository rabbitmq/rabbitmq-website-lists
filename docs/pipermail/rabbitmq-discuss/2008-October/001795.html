<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Exchanges, Routing, and AMQP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Exchanges%2C%20Routing%2C%20and%20AMQP&In-Reply-To=4901C714.7080103%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001791.html">
   <LINK REL="Next"  HREF="001793.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Exchanges, Routing, and AMQP</H1>
    <B>Kirk Wylie</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Exchanges%2C%20Routing%2C%20and%20AMQP&In-Reply-To=4901C714.7080103%40lshift.net"
       TITLE="[rabbitmq-discuss] Exchanges, Routing, and AMQP">kirk at kirkwylie.com
       </A><BR>
    <I>Sat Oct 25 13:11:37 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001791.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
        <LI>Next message: <A HREF="001793.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1795">[ date ]</a>
              <a href="thread.html#1795">[ thread ]</a>
              <a href="subject.html#1795">[ subject ]</a>
              <a href="author.html#1795">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias (and BTW, I think I messed up your name on a blog post; for
that I apologize).

On Fri, Oct 24, 2008 at 2:01 PM, Matthias Radestock &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>&gt; wrote:
&gt;&gt;&gt;<i> I think it may not necessary be a good idea to de-characterize an
</I>&gt;&gt;&gt;<i> exchange to the extent that it merely represents a logical address. If
</I>&gt;&gt;&gt;<i> you were to do so, you would be automatically precluding semantics
</I>&gt;&gt;&gt;<i> that you could efficiency build into a custom exchange (e.g. an
</I>&gt;&gt;&gt;<i> exchange that delivers to a subset of the matching binding - for
</I>&gt;&gt;&gt;<i> example the shortest queue).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Well, you're talking about a custom routing rule, and conflating that
</I>&gt;&gt;<i> with an exchange. Custom routing rules are great, and orthogonal to
</I>&gt;&gt;<i> Exchanges if you decouple exchanges from routing, which is what I'd
</I>&gt;&gt;<i> really prefer.
</I>&gt;<i>
</I>&gt;<i> Would your proposed model allow for routing decisions that are based on the
</I>&gt;<i> set of all bindings (or some subset thereof), rather than each individual
</I>&gt;<i> binding? Ben's example - an exchange that routes to the shorted queue -
</I>&gt;<i> requires the former.
</I>
It would depend on the server-side implementation as to whether that
was possible, since custom routing rules are outside the scope of the
protocol itself.

My suspicion is that any reasonable implementation allowing for
optimized performance would require the same hooks necessary to
implement shortest-queue-routing. This is because you'd have to have a
compilation step once the binding is declared before you could use it
(so that you're not just reparsing text all the time if nothing else).
In the context state where you're storing the pre-compiled binding
rule, you could be able to store data necessary for the shortest-queue
routing rule.

But it's really an implementation detail to be honest. I could easily
see an implementation which forces routing rules into such a localized
decision that you couldn't do that type of global routing logic, and
in a lot of cases that would in fact be easier to keep highly
performant.

Kirk


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001791.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
	<LI>Next message: <A HREF="001793.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1795">[ date ]</a>
              <a href="thread.html#1795">[ thread ]</a>
              <a href="subject.html#1795">[ subject ]</a>
              <a href="author.html#1795">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
