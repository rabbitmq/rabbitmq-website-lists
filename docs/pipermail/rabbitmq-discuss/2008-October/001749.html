<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Exchanges, Routing, and AMQP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Exchanges%2C%20Routing%2C%20and%20AMQP&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001748.html">
   <LINK REL="Next"  HREF="001751.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Exchanges, Routing, and AMQP</H1>
    <B>Kirk Wylie</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Exchanges%2C%20Routing%2C%20and%20AMQP&In-Reply-To="
       TITLE="[rabbitmq-discuss] Exchanges, Routing, and AMQP">kirk at kirkwylie.com
       </A><BR>
    <I>Mon Oct 20 16:01:55 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001748.html">[rabbitmq-discuss] Topic routing
</A></li>
        <LI>Next message: <A HREF="001751.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1749">[ date ]</a>
              <a href="thread.html#1749">[ thread ]</a>
              <a href="subject.html#1749">[ subject ]</a>
              <a href="author.html#1749">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ben asked me to open this up to a list-wide audience, and figured this
would be better than lots of ping-pong back-and-forth on blogs, so I'm
kicking off the topic.

Some background:
<A HREF="http://hopper.squarespace.com/blog/2008/10/7/consumer-driven-messaging.html">http://hopper.squarespace.com/blog/2008/10/7/consumer-driven-messaging.html</A>
<A HREF="http://kirkwylie.blogspot.com/2008/07/amqps-semantic-model-and-mismatching.html">http://kirkwylie.blogspot.com/2008/07/amqps-semantic-model-and-mismatching.html</A>

Summary:
I don't believe that the current Exchange system in AMQP (and thus in
RabbitMQ) really accurately represents consumer-driven messaging, in
that the producer of a message has an implicit option to determine the
manner in which messages are routed to consumers by declaring the
exchange and thus its type.

Personally, I believe that the spec should be changed so that
exchanges are nothing other than producer-provided namespaces/groups
of related messages, and consumers should bind to exchanges based on
the semantics that they want.

Example:
Producer is aggregating tick data from a variety of sources. It
publishes to three exchanges, that it declares:
- ControlMsg (for all control messages that don't contain ticks)
- OPRA (for the OPRA feed)
- NYSE (for the NYSE feed)
- TSE (for the Tokyo stock exchange feed)

Subscribers bind their queue to the exchanges that they're interested
in, and when they declare the binding, they ALSO declare the routing
rules that they want, out of a set of routing rules available to them.

Backwards Compatibility?
Yes, you can still achieve backwards compatibility here, particularly
with the &quot;implicit&quot; exchanges, by allowing exchanges to have &quot;default&quot;
routing rules which are specified by the producer's exchange assertion
(or the default assertion). This means that existing applications will
continue to work, and you can develop new applications with consumer
driven bindings that all work.

Ben, care to take it up from here?

Kirk Wylie


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001748.html">[rabbitmq-discuss] Topic routing
</A></li>
	<LI>Next message: <A HREF="001751.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1749">[ date ]</a>
              <a href="thread.html#1749">[ thread ]</a>
              <a href="subject.html#1749">[ subject ]</a>
              <a href="author.html#1749">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
