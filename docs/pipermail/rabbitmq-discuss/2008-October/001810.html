<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Erlang client: function_clause error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Erlang%20client%3A%20function_clause%20error&In-Reply-To=179A4906-2D71-494E-B593-ACCB102C29E4%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001809.html">
   <LINK REL="Next"  HREF="001817.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Erlang client: function_clause error</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Erlang%20client%3A%20function_clause%20error&In-Reply-To=179A4906-2D71-494E-B593-ACCB102C29E4%40gmail.com"
       TITLE="[rabbitmq-discuss] Erlang client: function_clause error">0x6e6562 at gmail.com
       </A><BR>
    <I>Tue Oct 28 11:31:08 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001809.html">[rabbitmq-discuss] Erlang client: function_clause error
</A></li>
        <LI>Next message: <A HREF="001817.html">[rabbitmq-discuss] Erlang client: function_clause error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1810">[ date ]</a>
              <a href="thread.html#1810">[ thread ]</a>
              <a href="subject.html#1810">[ subject ]</a>
              <a href="author.html#1810">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Valentino,

On Mon, Oct 27, 2008 at 11:01 PM, Valentino Volonghi &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dialtone at gmail.com</A>&gt; wrote:
&gt;<i> Speaking of which... Is there any way (donations, manual labor, slavery or
</I>&gt;<i> such) that
</I>&gt;<i> I can be of help to change the queue state to a new object that knows how to
</I>&gt;<i> persist
</I>&gt;<i> without using all the memory up?
</I>
In general, you can help by either contributing code yourself or by
financing the reprioritization of the roadmap.

Disk overflow or queue paging is on the mid term roadmap as something
we are going to do, but we still need to gather requirements.

Here are a few examples:

- When do you decide to page things to disk?
- Is it done on memory consumption or queue depth?
- Is this configurable per queue or across the broker?
- What are sensible defaults so that people who haven't even though
  about paging don't get affected by overly-agressive defaults?
- When and how do you swap back in - is this automatic or manual?
- How do you decide when the low water mark has been reached after
  having commenced the page-in? Do you resume flow control at this point?
- If you do page, are you interested in last image caching?
- Do you want to apply application level heuristics to selectively purge
  overflowed queues?
- What role do TTLs play in this scenario?
- Furthermore, we do already have a fast message persister - it's just
  that it's geared to write as quickly as possible, not read.
- Ask yourself, if we implement paging, is are we potentially reinventing
  a wheel that the OS has already invented?
- And as always, what do you do when your SAN fills up?

One suggestion to kick things off is to begin a more structured
analysis of the whole problem on the wiki and start a dedicated
discussion thread around this. For example, one could start a document
highlighting the motivation and requirements and let interested
parties comment on this.

&gt;<i> From what I see by reading the code I think that the change would be
</I>&gt;<i> isolated inside
</I>&gt;<i> rabbit_amqqueue_process.erl and the exact variable is message_buffer. An
</I>&gt;<i> object
</I>&gt;<i> with a similar API but a different storage strategy could maybe be swapped
</I>&gt;<i> in instead
</I>&gt;<i> of the current queue.
</I>
True - the intention is to have a code base that is as short as
possible so that it can be easily understood and adapted.

Having said that, whilst it may be straight forward to do a hello
world overflow, the devil is in the detail of all of the moving parts
and different scenarios that you have to account for whilst maintaing
the clarity of the code base. And testing it of course.

HTH,

Ben

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001809.html">[rabbitmq-discuss] Erlang client: function_clause error
</A></li>
	<LI>Next message: <A HREF="001817.html">[rabbitmq-discuss] Erlang client: function_clause error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1810">[ date ]</a>
              <a href="thread.html#1810">[ thread ]</a>
              <a href="subject.html#1810">[ subject ]</a>
              <a href="author.html#1810">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
