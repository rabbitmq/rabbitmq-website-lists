<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] txAMQP and multiple queues per channel
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20txAMQP%20and%20multiple%20queues%20per%20channel&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001754.html">
   <LINK REL="Next"  HREF="001761.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] txAMQP and multiple queues per channel</H1>
    <B>David Sackett</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20txAMQP%20and%20multiple%20queues%20per%20channel&In-Reply-To="
       TITLE="[rabbitmq-discuss] txAMQP and multiple queues per channel">rabbitmq-discuss at davidsackett.com
       </A><BR>
    <I>Tue Oct 21 02:15:26 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001754.html">[rabbitmq-discuss] Topic routing
</A></li>
        <LI>Next message: <A HREF="001761.html">[rabbitmq-discuss] txAMQP and multiple queues per channel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1758">[ date ]</a>
              <a href="thread.html#1758">[ thread ]</a>
              <a href="subject.html#1758">[ subject ]</a>
              <a href="author.html#1758">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have been testing out txAMQP with RabbitMQ and managed to get
txamqp_example.py&lt;<A HREF="http://www.nabble.com/attachment/19436045/0/txamqp_example.py">http://www.nabble.com/attachment/19436045/0/txamqp_example.py</A>&gt;working
(after reading posts on this list). I have also tested out amqplib
but see Twisted as a better option for my application.

I'm having difficulty understanding how the channel callbacks should be used
in regard to consuming from queues. amqplib allows callbacks to be attached
to individual queues but it appears that txAMQP only allows callbacks to be
attached to a channel:

amqplib:
channel.basic_consume(queue=queue_name, callback=callback)

txAMQP:
channel.basic_consume(queue=queue_name)
channel.deferred.addCallback(gotMessage)

Also, if I try to attach multiple callbacks or connect a channel to multiple
queues (using basic_consume) strange things happen. Sometimes the callback
is never called and other times channel.queue_declare() returns an object
with a &quot;fields&quot; attribute set to an empty tuple rather than a triplet
containing the queue name. I can't help but feel my problems stem from
incorrectly using the library and not allowing for the asynchronous nature
of Twisted (I am fairly new to Twisted).

What is the correct way to consume from multiple queues with txAMPQ? Should
each channel only consume from one queue? How can I safely initialise all my
channels and queues and latter consume from other queues once in operation?

I haven't included my code because it is convoluted and messy but if needed
I can cut it down and provide it.

Thanks in advance,

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081021/96f8a829/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081021/96f8a829/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001754.html">[rabbitmq-discuss] Topic routing
</A></li>
	<LI>Next message: <A HREF="001761.html">[rabbitmq-discuss] txAMQP and multiple queues per channel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1758">[ date ]</a>
              <a href="thread.html#1758">[ thread ]</a>
              <a href="subject.html#1758">[ subject ]</a>
              <a href="author.html#1758">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
