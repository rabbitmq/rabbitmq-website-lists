<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Redelivery of unacknowledged messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Redelivery%20of%20unacknowledged%20messages&In-Reply-To=48E1CED0.8020607%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001700.html">
   <LINK REL="Next"  HREF="001672.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Redelivery of unacknowledged messages</H1>
    <B>Jonatan Kallus</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Redelivery%20of%20unacknowledged%20messages&In-Reply-To=48E1CED0.8020607%40lshift.net"
       TITLE="[rabbitmq-discuss] Redelivery of unacknowledged messages">jonatan at heysan.com
       </A><BR>
    <I>Thu Oct  2 01:48:40 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001700.html">[rabbitmq-discuss] Rabbitmqctl issues
</A></li>
        <LI>Next message: <A HREF="001672.html">[rabbitmq-discuss] Redelivery of unacknowledged messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1669">[ date ]</a>
              <a href="thread.html#1669">[ thread ]</a>
              <a href="subject.html#1669">[ subject ]</a>
              <a href="author.html#1669">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Is it meant to work like this or is it a matter of a feature not being
implemented yet?

In my current implementation I am closing the channel occasionally, for no
particular reason, but to get the redeliveries. This causes the processing
to temporarily stop or slow down since I have to wait for all tasks to be
done and acked before I can close the channel. (Since messages need to be
acked on the same channel they were received on, as far as I know.)

It would probably be possible to have two parallel channels open, one active
(receiving new tasks) and one waiting for its tasks to be done and acked,
then closing the inactive one, making the previously active one passive and
opening a new active channel. This would add the complexity of keeping track
of what message that should be acked on what channel.

Are there any good patterns to handle this?

On Tue, Sep 30, 2008 at 12:01 AM, Matthias Radestock &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>&gt;
wrote:
&gt;<i> Ben Hood wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> When are unacknowledged messages redelivered?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> After the channel in which the initial receive has been closed and a
</I>&gt;&gt;<i> new channel has been setup.
</I>&gt;<i>
</I>&gt;<i> To be precise, unacknowledged messages become eligible for redelivery when
</I>&gt;<i> the channel (or connection) on which they have been delivered is closed.
</I>&gt;<i>
</I>&gt;<i> If a queue has more than one consumer, the message will be delivered to
</I>one
&gt;<i> of the remaining consumers. Otherwise it will be enqueued and can thus be
</I>&gt;<i> consumed by a consumer which comes along later.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081001/8e6b7eea/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081001/8e6b7eea/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001700.html">[rabbitmq-discuss] Rabbitmqctl issues
</A></li>
	<LI>Next message: <A HREF="001672.html">[rabbitmq-discuss] Redelivery of unacknowledged messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1669">[ date ]</a>
              <a href="thread.html#1669">[ thread ]</a>
              <a href="subject.html#1669">[ subject ]</a>
              <a href="author.html#1669">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
