<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Erlang client: function_clause error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Erlang%20client%3A%20function_clause%20error&In-Reply-To=6c2563b20810270808r7fbb5409vc1229370a890229c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001805.html">
   <LINK REL="Next"  HREF="001810.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Erlang client: function_clause error</H1>
    <B>Valentino Volonghi</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Erlang%20client%3A%20function_clause%20error&In-Reply-To=6c2563b20810270808r7fbb5409vc1229370a890229c%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Erlang client: function_clause error">dialtone at gmail.com
       </A><BR>
    <I>Mon Oct 27 23:01:31 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001805.html">[rabbitmq-discuss] Erlang client: function_clause error
</A></li>
        <LI>Next message: <A HREF="001810.html">[rabbitmq-discuss] Erlang client: function_clause error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1809">[ date ]</a>
              <a href="thread.html#1809">[ thread ]</a>
              <a href="subject.html#1809">[ subject ]</a>
              <a href="author.html#1809">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Oct 27, 2008, at 8:08 AM, Edwin Fine wrote:

&gt;<i> Valentino started a thread on a related topic so he may be able to
</I>&gt;<i> chime in here: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2008-October/002105.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2008-October/002105.html</A>
</I>&gt;<i>
</I>&gt;<i> I'll take a look.
</I>
The way I solved this is simply to let the client crash and restart  
from the supervisor. Then
it starts a loop until it connects successfully to the other broker.  
This makes the code
really simple and very robust.

The only 'problem' is that in this way I'm basically trusting the  
problem (connection error)
to be solved before RabbitMQ goes out of memory.

Speaking of which... Is there any way (donations, manual labor,  
slavery or such) that
I can be of help to change the queue state to a new object that knows  
how to persist
without using all the memory up?

 From what I see by reading the code I think that the change would be  
isolated inside
rabbit_amqqueue_process.erl and the exact variable is message_buffer.  
An object
with a similar API but a different storage strategy could maybe be  
swapped in instead
of the current queue.

-- 
Valentino Volonghi aka Dialtone
Now running MacOS X 10.5
Home Page: <A HREF="http://www.twisted.it">http://www.twisted.it</A>
<A HREF="http://www.adroll.com">http://www.adroll.com</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081027/028b1483/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081027/028b1483/attachment.htm</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 194 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081027/028b1483/attachment.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081027/028b1483/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001805.html">[rabbitmq-discuss] Erlang client: function_clause error
</A></li>
	<LI>Next message: <A HREF="001810.html">[rabbitmq-discuss] Erlang client: function_clause error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1809">[ date ]</a>
              <a href="thread.html#1809">[ thread ]</a>
              <a href="subject.html#1809">[ subject ]</a>
              <a href="author.html#1809">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
