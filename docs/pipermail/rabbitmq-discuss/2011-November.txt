From dagda1 at scotalt.net  Tue Nov  1 04:12:08 2011
From: dagda1 at scotalt.net (Paul Cowan)
Date: Tue, 1 Nov 2011 04:12:08 +0000
Subject: [rabbitmq-discuss] PossibleAuthenticationFailureError
In-Reply-To: <CAE3HoVRF5+Ptg=e-sambUHvKuEqPwmxeda3ntZ-L4WiQrTgPOQ@mail.gmail.com>
References: <CAEBV8YTbLShTU2wxjmuWBD4aRGY0fU1Q5CEyeGndnL=dACziqw@mail.gmail.com>
	<CAE3HoVRF5+Ptg=e-sambUHvKuEqPwmxeda3ntZ-L4WiQrTgPOQ@mail.gmail.com>
Message-ID: <CAEBV8YTQo8Ht=3raP4NyFi=F4hjqgBGgX670vFpLYK7C4Odx0w@mail.gmail.com>

Hi,

>> Possibly for whatever reason your RabbitMQ installation does not have
guest user, you can check it or add it using rabbitmqctl.

When I run rabbitmqctl list_users it shows the guest user appears.

Is there anything else it could be?

Cheers

Paul Cowan

Cutting-Edge Solutions (Scotland)

http://thesoftwaresimpleton.com/



On 31 October 2011 23:35, Michael Klishin <michael.s.klishin at gmail.com>wrote:

>
>
> 2011/11/1 Paul Cowan <dagda1 at scotalt.net>
>
>> Do I need to add this guest account to the local rabbitmq-server?
>
>
> RabbitMQ should have guest:guest user after installation. That exception
> is raised when broker closes TCP connection before AMQP connection is
> negotiated and open.
> Per AMQP 0.9.1 spec, if authentication fails broker should close
> connection immediately and not send any more data. This is why the
> "Possible" part.
>
> Possibly for whatever reason your RabbitMQ installation does not have
> guest user, you can check it or add it using rabbitmqctl.
>
> The exception for unsuccessful TCP connection is different so it must be
> the missing user.
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111101/5da5b22e/attachment.htm>

From dagda1 at scotalt.net  Tue Nov  1 06:01:12 2011
From: dagda1 at scotalt.net (Paul Cowan)
Date: Tue, 1 Nov 2011 06:01:12 +0000
Subject: [rabbitmq-discuss] PossibleAuthenticationFailureError
In-Reply-To: <CAEBV8YTQo8Ht=3raP4NyFi=F4hjqgBGgX670vFpLYK7C4Odx0w@mail.gmail.com>
References: <CAEBV8YTbLShTU2wxjmuWBD4aRGY0fU1Q5CEyeGndnL=dACziqw@mail.gmail.com>
	<CAE3HoVRF5+Ptg=e-sambUHvKuEqPwmxeda3ntZ-L4WiQrTgPOQ@mail.gmail.com>
	<CAEBV8YTQo8Ht=3raP4NyFi=F4hjqgBGgX670vFpLYK7C4Odx0w@mail.gmail.com>
Message-ID: <CAEBV8YROwQX4cqqt3LRjEFiXmBgCVCwf+Nh0jq8_iMHP3CNHqQ@mail.gmail.com>

Hi,

I have also created a new user and given them full access with

rabbitmqctl add_user lead l3ads
rabbitmqctl set_permissions -p / lead ".\*" ".\*" ".\*"

and then tried

AMQP.start(:host => "localhost", :user => "lead", :password => "Passw0rd",
:vhost => "/", :logging => true) do |connection|

But I still get the PossibleAuthenticationError.

I don't know what else I can try.

Cheers

Paul Cowan

Cutting-Edge Solutions (Scotland)

http://thesoftwaresimpleton.com/



On 1 November 2011 04:12, Paul Cowan <dagda1 at scotalt.net> wrote:

> Hi,
>
> >> Possibly for whatever reason your RabbitMQ installation does not have
> guest user, you can check it or add it using rabbitmqctl.
>
> When I run rabbitmqctl list_users it shows the guest user appears.
>
> Is there anything else it could be?
>
> Cheers
>
> Paul Cowan
>
> Cutting-Edge Solutions (Scotland)
>
> http://thesoftwaresimpleton.com/
>
>
>
> On 31 October 2011 23:35, Michael Klishin <michael.s.klishin at gmail.com>wrote:
>
>>
>>
>> 2011/11/1 Paul Cowan <dagda1 at scotalt.net>
>>
>>> Do I need to add this guest account to the local rabbitmq-server?
>>
>>
>> RabbitMQ should have guest:guest user after installation. That exception
>> is raised when broker closes TCP connection before AMQP connection is
>> negotiated and open.
>> Per AMQP 0.9.1 spec, if authentication fails broker should close
>> connection immediately and not send any more data. This is why the
>> "Possible" part.
>>
>> Possibly for whatever reason your RabbitMQ installation does not have
>> guest user, you can check it or add it using rabbitmqctl.
>>
>> The exception for unsuccessful TCP connection is different so it must be
>> the missing user.
>> --
>> MK
>>
>> http://github.com/michaelklishin
>> http://twitter.com/michaelklishin
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111101/13d7c380/attachment.htm>

From michael.s.klishin at gmail.com  Tue Nov  1 06:18:12 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 1 Nov 2011 09:18:12 +0300
Subject: [rabbitmq-discuss] PossibleAuthenticationFailureError
In-Reply-To: <CAEBV8YROwQX4cqqt3LRjEFiXmBgCVCwf+Nh0jq8_iMHP3CNHqQ@mail.gmail.com>
References: <CAEBV8YTbLShTU2wxjmuWBD4aRGY0fU1Q5CEyeGndnL=dACziqw@mail.gmail.com>
	<CAE3HoVRF5+Ptg=e-sambUHvKuEqPwmxeda3ntZ-L4WiQrTgPOQ@mail.gmail.com>
	<CAEBV8YTQo8Ht=3raP4NyFi=F4hjqgBGgX670vFpLYK7C4Odx0w@mail.gmail.com>
	<CAEBV8YROwQX4cqqt3LRjEFiXmBgCVCwf+Nh0jq8_iMHP3CNHqQ@mail.gmail.com>
Message-ID: <CAE3HoVQPcw8xZWyhhKUbGKteyLMEozeSmKZnUHBdCj6rbOjjqQ@mail.gmail.com>

2011/11/1 Paul Cowan <dagda1 at scotalt.net>

> rabbitmqctl add_user lead l3ads
> rabbitmqctl set_permissions -p / lead ".\*" ".\*" ".\*"
>
> and then tried
>
> AMQP.start(:host => "localhost", :user => "lead", :password => "Passw0rd",
> :vhost => "/", :logging => true) do |connection|
>

You are adding a user with the password "l3ads" but connecting using
"Passw0rd". Try running code examples first.

-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111101/c7125410/attachment.htm>

From matthew at rabbitmq.com  Tue Nov  1 06:31:39 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Tue, 1 Nov 2011 06:31:39 +0000
Subject: [rabbitmq-discuss] Publisher Confirms stop occurring when
 Consumer is present and queue is large
In-Reply-To: <CAGWz9vUwmOdg9TibndZ+UE4Vz1Btyz95CmTf1Xu=m0H4ONe6qw@mail.gmail.com>
References: <CAGWz9vUwmOdg9TibndZ+UE4Vz1Btyz95CmTf1Xu=m0H4ONe6qw@mail.gmail.com>
Message-ID: <20111101063139.GA3240@rabbitmq.com>

Hi Cameron,

Thanks for the detailed report.

Your report has prompted us to think carefully about your test, and we
can see how the broker can end up behave this way. This is not desired
behaviour of the broker and thus does constitute a bug. There is no
work-around.

What is happening is that your publisher is waiting for the broker to
send the confirms back to it. For this to happen, internally, the queues
have to send some messages to themselves. These messages are being
starved out because Rabbit prioritises getting rid of messages. Thus the
queue's desire to drive the consumer prevents the queue from processing
internal messages that would lead the queue to issue the confirms back
up, via the channel and out to the client.

At a minimum, we need to adjust some message priorities internally. But
the actual fix may turn out to be bigger than that. Given current
timings, I wouldn't expect a fix for this to be in the next release, but
in the one after that.

Best wishes,

Matthew

From dagda1 at scotalt.net  Tue Nov  1 07:39:29 2011
From: dagda1 at scotalt.net (Paul Cowan)
Date: Tue, 1 Nov 2011 07:39:29 +0000
Subject: [rabbitmq-discuss] PossibleAuthenticationFailureError
In-Reply-To: <CAE3HoVQPcw8xZWyhhKUbGKteyLMEozeSmKZnUHBdCj6rbOjjqQ@mail.gmail.com>
References: <CAEBV8YTbLShTU2wxjmuWBD4aRGY0fU1Q5CEyeGndnL=dACziqw@mail.gmail.com>
	<CAE3HoVRF5+Ptg=e-sambUHvKuEqPwmxeda3ntZ-L4WiQrTgPOQ@mail.gmail.com>
	<CAEBV8YTQo8Ht=3raP4NyFi=F4hjqgBGgX670vFpLYK7C4Odx0w@mail.gmail.com>
	<CAEBV8YROwQX4cqqt3LRjEFiXmBgCVCwf+Nh0jq8_iMHP3CNHqQ@mail.gmail.com>
	<CAE3HoVQPcw8xZWyhhKUbGKteyLMEozeSmKZnUHBdCj6rbOjjqQ@mail.gmail.com>
Message-ID: <CAEBV8YROBPRiUjjaV9CWNnS5kzYWDB0HYS0m0WYOPnb6Nj1hPQ@mail.gmail.com>

Sorry for the mistake, that was a bad cut and paste.

I am using the correct user name and password and still get the error.

Are there any other permissions like permissions permissions to the
database or the file system that might cause this error or is this error
specifically for authentication?

Cheers

Paul Cowan

Cutting-Edge Solutions (Scotland)

http://thesoftwaresimpleton.com/



On 1 November 2011 06:18, Michael Klishin <michael.s.klishin at gmail.com>wrote:

>
>
> 2011/11/1 Paul Cowan <dagda1 at scotalt.net>
>
>> rabbitmqctl add_user lead l3ads
>> rabbitmqctl set_permissions -p / lead ".\*" ".\*" ".\*"
>>
>> and then tried
>>
>> AMQP.start(:host => "localhost", :user => "lead", :password =>
>> "Passw0rd", :vhost => "/", :logging => true) do |connection|
>>
>
> You are adding a user with the password "l3ads" but connecting using
> "Passw0rd". Try running code examples first.
>
>
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111101/f2cd2c75/attachment.htm>

From meem.ok at gmail.com  Tue Nov  1 07:43:05 2011
From: meem.ok at gmail.com (michael neidhardt)
Date: Tue, 1 Nov 2011 00:43:05 -0700 (PDT)
Subject: [rabbitmq-discuss] Queue depth and no. of consumers.
In-Reply-To: <4EAECC82.4060004@rabbitmq.com>
References: <10f27f82-2e92-4758-bf60-f4755bc9e817@1g2000vbx.googlegroups.com>
	<4EAAC1E3.1010204@rabbitmq.com>
	<4f057906-233b-4748-8a1d-610b1a2fb932@g21g2000yqc.googlegroups.com>
	<4EAECC82.4060004@rabbitmq.com>
Message-ID: <0adcc1bc-9de5-4752-b325-b0071180efcf@n18g2000vbv.googlegroups.com>

OK - will upgrade and see if that removes the RAM problem.

Thanks for your help,
Michael.

On 31 Okt., 17:27, Simon MacMullen <si... at rabbitmq.com> wrote:
> On 31/10/11 14:31, michaelneidhardtwrote:
>
> > With no QoS set, I assume each consumer fetches as many messages as
> > possible (whatever that means),
> > and 'queues' them itself.
>
> Yes, although the "queueing" doesn't mean there's an explicit queue in
> the client. But messages can back up in networking buffers etc.
>
> > I will try to set QoS/prefetch_count to 1,
> > though I seem to remember
> > having read that this can cause trouble. I would assume that it would
> > be no problem, have you got any thoughts on whether it's a good idea?
>
> I don't see why it should cause trouble. Setting prefetch to 1 does mean
> that throughput will drop since the broker cannot deliver another
> message until the previous one has been acknowledged, so if throughput
> is a concern then you might set the prefetch to some larger number for
> less fairness but more performance.
>
> In general setting the prefetch count is a good idea if you're concerned
> with fair distribution of messages.
>
> > As I wrote earlier, we have a number (several thousand) of files to
> > process, each of which may contain up to several hundred thousand
> > records (around 2KB each).
>
> > In an earlier test, I let the processes handling files push the ID of
> > each record to a queue.
> > (Simply add a publish to the above code after the ack). The consumer
> > for this queue (which uses autoack)
>
> (Of course, setting prefetch doesn't do anything in noack mode since the
> server has no way to know how many messages have made it all the way to
> the client.)
>
> > would do a lookup in a Postgresql
> > DB, and nothing else.
> > After about 50 million records, the vm_memory_high_watermark would be
> > set, and shortly after
> > that, I got<"timeout waiting for channel.flow_ok{active=false}",none}
> >> . Eventually the whole system froze.
> > I guess this timeout is caused by my client not reacting to the flow
> > control from the RabbitMQ server. Is that correct? Unfortunately, the
> > client I use does not have methods for that. Should I expect to handle
> > this in normal operation, or could it be handled by a client for me?
>
> I think you said you were using 1.8.1. Much has changed since then:
>
> * We no longer use channel.flow to throttle producers since as you're
> seeing many clients did not implement it correctly / at all. We now use
> TCP backpressure instead.
>
> * Prior to 2.0 all messages in all queues had to fit in memory. Messages
> are now paged to disk when memory is low.
>
> So I would strongly advise you to upgrade to 2.6.1. It's available in
> our apt repository:
>
> http://www.rabbitmq.com/debian.html
>
> > Oh, and the big question: Is it out of the question to handle approx.
> > 300 mill. messages (where payload is essentially a bigint) over a few
> > days?
>
> That should be no big deal. My workstation can churn through that in a
> few hours.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From matti.linnanvuori at portalify.com  Tue Nov  1 07:59:39 2011
From: matti.linnanvuori at portalify.com (Matti Linnanvuori)
Date: Tue, 1 Nov 2011 09:59:39 +0200
Subject: [rabbitmq-discuss] Error: unable to connect to node
	rabbit@localhost: nodedown
Message-ID: <7006D3B6-A37D-43C3-8BFA-C0E923695FD0@portalify.com>

When I ran OCF resource agents that tried to contact RabbitMQ server at address rabbit at localhost, they failed. When I try e.g. the following, I get an error:

rabbitmqctl -n rabbit at localhost status
Status of node rabbit at localhost ...
Error: unable to connect to node rabbit at localhost: nodedown
diagnostics:
- nodes and their ports on localhost: [{rabbit,57478},
                                       {rabbitmqctl15057,44146}]
- current node: 'rabbitmqctl15057 at iac-pgis'
- current node home dir: /var/lib/rabbitmq
- current node cookie hash: Q6gFuwANTK79hr/vMOmpWg==

When I run rabbitmqctl with rabbitmqctl -n rabbit at iac-pgis status, where iac-pgis is the hostname, I get the connection.
Should the resource agents contact RabbitMQ server with `hostname -s`?

Matti Linnanvuori


From emile at rabbitmq.com  Tue Nov  1 10:06:17 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 01 Nov 2011 10:06:17 +0000
Subject: [rabbitmq-discuss] Disconnect
In-Reply-To: <CAD482E0.4E806%dgress@vmware.com>
References: <CAD482E0.4E806%dgress@vmware.com>
Message-ID: <4EAFC499.6090205@rabbitmq.com>

Hi Dave,

On 31/10/11 20:53, Dave Gress wrote:
> No firewall exists

It is possible that the problem is caused by some other network issue.

From simon at rabbitmq.com  Tue Nov  1 10:54:53 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 01 Nov 2011 10:54:53 +0000
Subject: [rabbitmq-discuss] PossibleAuthenticationFailureError
In-Reply-To: <CAEBV8YROBPRiUjjaV9CWNnS5kzYWDB0HYS0m0WYOPnb6Nj1hPQ@mail.gmail.com>
References: <CAEBV8YTbLShTU2wxjmuWBD4aRGY0fU1Q5CEyeGndnL=dACziqw@mail.gmail.com>	<CAE3HoVRF5+Ptg=e-sambUHvKuEqPwmxeda3ntZ-L4WiQrTgPOQ@mail.gmail.com>	<CAEBV8YTQo8Ht=3raP4NyFi=F4hjqgBGgX670vFpLYK7C4Odx0w@mail.gmail.com>	<CAEBV8YROwQX4cqqt3LRjEFiXmBgCVCwf+Nh0jq8_iMHP3CNHqQ@mail.gmail.com>	<CAE3HoVQPcw8xZWyhhKUbGKteyLMEozeSmKZnUHBdCj6rbOjjqQ@mail.gmail.com>
	<CAEBV8YROBPRiUjjaV9CWNnS5kzYWDB0HYS0m0WYOPnb6Nj1hPQ@mail.gmail.com>
Message-ID: <4EAFCFFD.10200@rabbitmq.com>

On 01/11/11 07:39, Paul Cowan wrote:
> Are there any other permissions like permissions permissions to the
> database or the file system that might cause this error or is this error
> specifically for authentication?

In theory a variety of things could be going wrong, since AMQP 0-9-1 
mandates that authentication failure should lead to dropping the 
connection. But 99% of the time this comes down to bad username / password.

The RabbitMQ logs should give you a bit more of a clue what's going on.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Tue Nov  1 10:56:42 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 01 Nov 2011 10:56:42 +0000
Subject: [rabbitmq-discuss] Error: unable to connect to
 node	rabbit@localhost: nodedown
In-Reply-To: <7006D3B6-A37D-43C3-8BFA-C0E923695FD0@portalify.com>
References: <7006D3B6-A37D-43C3-8BFA-C0E923695FD0@portalify.com>
Message-ID: <4EAFD06A.8080905@rabbitmq.com>

On 01/11/11 07:59, Matti Linnanvuori wrote:
> Should the resource agents contact RabbitMQ server with `hostname -s`?

Yes, unless you set RABBITMQ_NODENAME. That should be the default though.

Cheers, Simon
-- 
Simon MacMullen
RabbitMQ, VMware

From acheremukhin.digitalguard at gmail.com  Tue Nov  1 12:28:37 2011
From: acheremukhin.digitalguard at gmail.com (Cheremukhin Andrey)
Date: Tue, 1 Nov 2011 05:28:37 -0700 (PDT)
Subject: [rabbitmq-discuss] Problem with RAM
In-Reply-To: <4EAE82B4.9010202@rabbitmq.com>
References: <32287654.406.1320037421256.JavaMail.geo-discussion-forums@yqbl36>
	<4EAE82B4.9010202@rabbitmq.com>
Message-ID: <5875361.77.1320150517952.JavaMail.geo-discussion-forums@yqpp12>

Could you see my report? I cannot understand the problem.
Why do rabbitmq use huge amount of RAM if queues don't have messages.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111101/70d17dee/attachment.htm>
-------------- next part --------------
Reporting server status on {{2011,11,1},{12,22,6}}

Status of node 'rabbit at ksn-backend3_jail1' ...
[{pid,16960},
 {running_applications,
     [{rabbitmq_management,"RabbitMQ Management Console","2.6.0"},
      {webmachine,"webmachine","1.7.0-rmq2.6.0-hg0c4b60a"},
      {rabbitmq_management_agent,"RabbitMQ Management Agent","2.6.0"},
      {amqp_client,"RabbitMQ AMQP Client","2.6.0"},
      {rabbit,"RabbitMQ","2.6.0"},
      {os_mon,"CPO  CXC 138 46","2.2.6"},
      {sasl,"SASL  CXC 138 11","2.1.9.4"},
      {rabbitmq_mochiweb,"RabbitMQ Mochiweb Embedding","2.6.0"},
      {mochiweb,"MochiMedia Web Server","1.3-rmq2.6.0-git9a53dbd"},
      {inets,"INETS  CXC 138 49","5.6"},
      {mnesia,"MNESIA  CXC 138 12","4.4.19"},
      {stdlib,"ERTS  CXC 138 10","1.17.4"},
      {kernel,"ERTS  CXC 138 10","2.14.4"}]},
 {os,{unix,freebsd}},
 {erlang_version,
     "Erlang R14B03 (erts-5.8.4) [source] [64-bit] [smp:16:16] [rq:16] [async-threads:30] [hipe] [kernel-poll:true]\n"},
 {memory,
     [{total,9483429768},
      {processes,4152488520},
      {processes_used,4152459312},
      {system,5330941248},
      {atom,1334153},
      {atom_used,1309689},
      {binary,3035232696},
      {code,14380224},
      {ets,2207207328}]}]

Cluster status of node 'rabbit at ksn-backend3_jail1' ...
[{nodes,[{disc,['rabbit at ksn-backend3_jail1']}]},
 {running_nodes,['rabbit at ksn-backend3_jail1']}]

Application environment of node 'rabbit at ksn-backend3_jail1' ...
[{auth_backends,[rabbit_auth_backend_internal]},
 {auth_mechanisms,['PLAIN','AMQPLAIN']},
 {backing_queue_module,rabbit_variable_queue},
 {cluster_nodes,[]},
 {collect_statistics,fine},
 {collect_statistics_interval,5000},
 {default_permissions,[<<".*">>,<<".*">>,<<".*">>]},
 {default_user,<<"guest">>},
 {default_user_tags,[administrator]},
 {default_vhost,<<"/">>},
 {delegate_count,16},
 {frame_max,0},
 {included_applications,[]},
 {msg_store_file_size_limit,16777216},
 {msg_store_index_module,rabbit_msg_store_ets_index},
 {queue_index_max_journal_entries,262144},
 {server_properties,[]},
 {ssl_listeners,[]},
 {ssl_options,[]},
 {tcp_listen_options,[binary,
                      {packet,raw},
                      {reuseaddr,true},
                      {backlog,128},
                      {nodelay,true},
                      {exit_on_close,false}]},
 {tcp_listeners,[{"0.0.0.0",2009}]},
 {trace_vhosts,[]},
 {vm_memory_high_watermark,0.3}]

Connections:
pid	address	port	peer_address	peer_port	ssl	peer_cert_subject	peer_cert_issuer	peer_cert_validity	auth_mechanism	ssl_protocol	ssl_key_exchange	ssl_cipher	ssl_hash	protocol	user	vhost	timeout	frame_max	client_properties	recv_oct	recv_cnt	send_oct	send_cnt	send_pend	state	channels
<'rabbit at ksn-backend3_jail1'.3.16914.3>	10.65.62.17	2009	10.65.62.17	55618	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47140029	64556	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13885.3>	10.65.62.17	2009	10.65.62.17	54168	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	162463862	159955	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24660.3>	10.65.62.17	2009	10.65.62.17	58739	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49378458	71789	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15578.3>	10.65.62.17	2009	10.65.62.17	54909	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46813025	68142	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14989.3>	10.65.62.17	2009	10.65.62.17	54352	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	72396689	94186	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14101.3>	10.65.62.17	2009	10.65.62.17	54222	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	407423	738	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.23028.3>	10.65.62.17	2009	10.65.62.17	57523	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	173480796	168432	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21848.3>	10.65.62.17	2009	10.65.62.17	57308	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70842339	93675	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16382.3>	10.65.62.17	2009	10.65.62.17	55346	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	68890769	90228	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15202.3>	10.65.62.17	2009	10.65.62.17	54425	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44794506	68107	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25978.3>	10.65.62.17	2009	10.65.62.17	59042	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62992492	84149	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25092.3>	10.65.62.17	2009	10.65.62.17	58847	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	210521	517	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23244.3>	10.65.62.17	2009	10.65.62.17	57662	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49950288	67176	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20216.3>	10.65.62.17	2009	10.65.62.17	56999	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42217935	64833	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19331.3>	10.65.62.17	2009	10.65.62.17	56780	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44441001	63942	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15418.3>	10.65.62.17	2009	10.65.62.17	54712	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	172205772	170148	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13570.3>	10.65.62.17	2009	10.65.62.17	54099	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	845	12	21333454	32673	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.23460.3>	10.65.62.17	2009	10.65.62.17	57844	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	158832329	170781	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20433.3>	10.65.62.17	2009	10.65.62.17	57049	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64383738	92850	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19547.3>	10.65.62.17	2009	10.65.62.17	56830	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	139220674	144275	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17109.3>	10.65.62.17	2009	10.65.62.17	55706	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48921225	69670	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16226.3>	10.65.62.17	2009	10.65.62.17	55278	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	184950428	176419	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14081.3>	10.65.62.17	2009	10.65.62.17	54217	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	99682716	117849	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25072.3>	10.65.62.17	2009	10.65.62.17	58842	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	57436371	81459	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20864.3>	10.65.62.17	2009	10.65.62.17	57129	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44440857	66257	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14218.3>	10.65.62.17	2009	10.65.62.17	54250	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	144049043	148075	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25288.3>	10.65.62.17	2009	10.65.62.17	58895	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	154639018	153353	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22260.3>	10.65.62.17	2009	10.65.62.17	57373	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	120354982	132880	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21080.3>	10.65.62.17	2009	10.65.62.17	57168	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	197019669	186139	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15614.3>	10.65.62.17	2009	10.65.62.17	54932	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	279882	627	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14434.3>	10.65.62.17	2009	10.65.62.17	54288	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47613080	62556	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25504.3>	10.65.62.17	2009	10.65.62.17	58950	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	140381387	143378	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22476.3>	10.65.62.17	2009	10.65.62.17	57408	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	52474734	77690	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21296.3>	10.65.62.17	2009	10.65.62.17	57205	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	316920	602	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.18858.3>	10.65.62.17	2009	10.65.62.17	56667	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	277798	612	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19664.3>	10.65.62.17	2009	10.65.62.17	56862	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	37773091	56279	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14867.3>	10.65.62.17	2009	10.65.62.17	54338	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45807809	69066	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25641.3>	10.65.62.17	2009	10.65.62.17	58979	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44276173	66257	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22908.3>	10.65.62.17	2009	10.65.62.17	57484	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63414385	81544	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16559.3>	10.65.62.17	2009	10.65.62.17	55448	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153917880	167860	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16263.3>	10.65.62.17	2009	10.65.62.17	55289	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40962983	60931	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23127.3>	10.65.62.17	2009	10.65.62.17	57578	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64232287	89558	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20096.3>	10.65.62.17	2009	10.65.62.17	56968	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	109653595	125779	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19211.3>	10.65.62.17	2009	10.65.62.17	56750	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48371090	67101	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16773.3>	10.65.62.17	2009	10.65.62.17	55585	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	103000552	121505	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16183.3>	10.65.62.17	2009	10.65.62.17	55266	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64216095	91890	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16989.3>	10.65.62.17	2009	10.65.62.17	55656	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	287879	619	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13961.3>	10.65.62.17	2009	10.65.62.17	54187	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62320944	90243	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21708.3>	10.65.62.17	2009	10.65.62.17	57284	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	369396	725	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15062.3>	10.65.62.17	2009	10.65.62.17	54363	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	298937	605	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25837.3>	10.65.62.17	2009	10.65.62.17	59012	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149647023	150671	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20752.3>	10.65.62.17	2009	10.65.62.17	57107	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44765674	67250	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15871.3>	10.65.62.17	2009	10.65.62.17	55122	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	56428392	70156	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15278.3>	10.65.62.17	2009	10.65.62.17	54546	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	78521735	100721	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22140.3>	10.65.62.17	2009	10.65.62.17	57353	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	73771475	98110	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26269.3>	10.65.62.17	2009	10.65.62.17	59113	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	375081	734	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25386.3>	10.65.62.17	2009	10.65.62.17	58918	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48303774	70975	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22064.3>	10.65.62.17	2009	10.65.62.17	57340	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66564255	92859	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22573.3>	10.65.62.17	2009	10.65.62.17	57424	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	210533	518	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22280.3>	10.65.62.17	2009	10.65.62.17	57375	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	352455	648	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19760.3>	10.65.62.17	2009	10.65.62.17	56885	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	55132491	76102	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14294.3>	10.65.62.17	2009	10.65.62.17	54269	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	73289140	95396	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21156.3>	10.65.62.17	2009	10.65.62.17	57183	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43735833	63873	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19976.3>	10.65.62.17	2009	10.65.62.17	56941	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	156411538	155397	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17538.3>	10.65.62.17	2009	10.65.62.17	55839	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	52339228	72269	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14510.3>	10.65.62.17	2009	10.65.62.17	54297	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	83539140	102600	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18934.3>	10.65.62.17	2009	10.65.62.17	56686	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	99009262	116814	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14726.3>	10.65.62.17	2009	10.65.62.17	54320	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	92593002	113057	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13841.3>	10.65.62.17	2009	10.65.62.17	54157	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	34002729	54271	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26091.3>	10.65.62.17	2009	10.65.62.17	59069	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	350833	684	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25723.3>	10.65.62.17	2009	10.65.62.17	58993	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110789385	124098	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21804.3>	10.65.62.17	2009	10.65.62.17	57301	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	278861	571	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19956.3>	10.65.62.17	2009	10.65.62.17	56934	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	325554	601	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19071.3>	10.65.62.17	2009	10.65.62.17	56715	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	158230903	157372	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16637.3>	10.65.62.17	2009	10.65.62.17	55521	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	95708962	116825	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16338.3>	10.65.62.17	2009	10.65.62.17	55321	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	191335092	182759	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16043.3>	10.65.62.17	2009	10.65.62.17	55190	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149660165	150175	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20172.3>	10.65.62.17	2009	10.65.62.17	56989	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	102311617	120472	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19287.3>	10.65.62.17	2009	10.65.62.17	56767	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46633848	68998	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15374.3>	10.65.62.17	2009	10.65.62.17	54650	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63488949	88254	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13821.3>	10.65.62.17	2009	10.65.62.17	54152	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	100913520	119370	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13526.3>	10.65.62.17	2009	10.65.62.17	54076	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	354	8	649454568	20097051	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.23423.3>	10.65.62.17	2009	10.65.62.17	57794	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60589259	86418	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20388.3>	10.65.62.17	2009	10.65.62.17	57038	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49581982	72343	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19503.3>	10.65.62.17	2009	10.65.62.17	56823	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	98323965	117893	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14037.3>	10.65.62.17	2009	10.65.62.17	54206	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	337103	708	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24812.3>	10.65.62.17	2009	10.65.62.17	58777	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	370058	682	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25028.3>	10.65.62.17	2009	10.65.62.17	58830	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	334138	692	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14174.3>	10.65.62.17	2009	10.65.62.17	54239	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66422987	84032	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25539.3>	10.65.62.17	2009	10.65.62.17	58955	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51481730	71783	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22216.3>	10.65.62.17	2009	10.65.62.17	57365	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47699145	70631	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21038.3>	10.65.62.17	2009	10.65.62.17	57160	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	69759759	95013	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17418.3>	10.65.62.17	2009	10.65.62.17	55809	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50503045	70394	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26050.3>	10.65.62.17	2009	10.65.62.17	59061	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	81861358	103292	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22433.3>	10.65.62.17	2009	10.65.62.17	57403	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	259801	568	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14606.3>	10.65.62.17	2009	10.65.62.17	54309	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	270269	643	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16298.3>	10.65.62.17	2009	10.65.62.17	55303	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	109778874	124236	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26190.3>	10.65.62.17	2009	10.65.62.17	59093	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50122291	70821	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25892.3>	10.65.62.17	2009	10.65.62.17	59019	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43467736	62363	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22865.3>	10.65.62.17	2009	10.65.62.17	57476	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	214554284	196008	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19836.3>	10.65.62.17	2009	10.65.62.17	56904	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	69123052	95527	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17399.3>	10.65.62.17	2009	10.65.62.17	55798	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48239197	69870	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16218.3>	10.65.62.17	2009	10.65.62.17	55277	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	328218	698	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20055.3>	10.65.62.17	2009	10.65.62.17	56960	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	116961150	131096	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17614.3>	10.65.62.17	2009	10.65.62.17	55855	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	233055600	218012	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21448.3>	10.65.62.17	2009	10.65.62.17	57231	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	103522981	119819	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20268.3>	10.65.62.17	2009	10.65.62.17	57011	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	356953	675	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13917.3>	10.65.62.17	2009	10.65.62.17	54176	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	283822	651	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24692.3>	10.65.62.17	2009	10.65.62.17	58747	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	85266421	103997	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20484.3>	10.65.62.17	2009	10.65.62.17	57058	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50926093	69045	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17164.3>	10.65.62.17	2009	10.65.62.17	55725	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	59136534	82152	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14133.3>	10.65.62.17	2009	10.65.62.17	54230	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38228391	59290	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25793.3>	10.65.62.17	2009	10.65.62.17	59004	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	74704548	96714	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21883.3>	10.65.62.17	2009	10.65.62.17	57312	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	157147480	158111	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19147.3>	10.65.62.17	2009	10.65.62.17	56734	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46753333	65501	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15234.3>	10.65.62.17	2009	10.65.62.17	54479	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43473822	66859	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25124.3>	10.65.62.17	2009	10.65.62.17	58855	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	34703628	53380	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19363.3>	10.65.62.17	2009	10.65.62.17	56788	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50832011	66362	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26225.3>	10.65.62.17	2009	10.65.62.17	59102	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	295178	648	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19579.3>	10.65.62.17	2009	10.65.62.17	56840	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40842538	61879	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15666.3>	10.65.62.17	2009	10.65.62.17	54966	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110847949	126520	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15883.3>	10.65.62.17	2009	10.65.62.17	55126	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44227713	65381	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14250.3>	10.65.62.17	2009	10.65.62.17	54258	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	156518336	154780	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25324.3>	10.65.62.17	2009	10.65.62.17	58902	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	142654464	148370	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17494.3>	10.65.62.17	2009	10.65.62.17	55827	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	310368	662	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22511.3>	10.65.62.17	2009	10.65.62.17	57415	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50127920	67783	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14682.3>	10.65.62.17	2009	10.65.62.17	54315	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	34861765	52738	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14394.3>	10.65.62.17	2009	10.65.62.17	54284	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44398984	62492	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19696.3>	10.65.62.17	2009	10.65.62.17	56870	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70593760	93978	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25673.3>	10.65.62.17	2009	10.65.62.17	58986	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	174500402	168005	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22648.3>	10.65.62.17	2009	10.65.62.17	57438	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62581644	88376	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19912.3>	10.65.62.17	2009	10.65.62.17	56924	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65935397	91825	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19027.3>	10.65.62.17	2009	10.65.62.17	56704	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	100079764	117419	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16593.3>	10.65.62.17	2009	10.65.62.17	55472	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	111950017	126495	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15999.3>	10.65.62.17	2009	10.65.62.17	55175	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	68898114	93534	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23156.3>	10.65.62.17	2009	10.65.62.17	57601	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	74130968	97008	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20128.3>	10.65.62.17	2009	10.65.62.17	56979	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40261461	58283	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19243.3>	10.65.62.17	2009	10.65.62.17	56758	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46750345	69457	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13777.3>	10.65.62.17	2009	10.65.62.17	54141	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	282600	528	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.23372.3>	10.65.62.17	2009	10.65.62.17	57743	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51488879	72956	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20348.3>	10.65.62.17	2009	10.65.62.17	57030	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	73733038	96806	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17318.3>	10.65.62.17	2009	10.65.62.17	55766	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	165729250	163363	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17021.3>	10.65.62.17	2009	10.65.62.17	55672	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	90753425	110632	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14586.3>	10.65.62.17	2009	10.65.62.17	54307	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	179549439	173962	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13993.3>	10.65.62.17	2009	10.65.62.17	54195	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	150535721	151966	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24768.3>	10.65.62.17	2009	10.65.62.17	58766	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	111774491	124447	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21744.3>	10.65.62.17	2009	10.65.62.17	57290	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51711062	68346	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20560.3>	10.65.62.17	2009	10.65.62.17	57074	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	102070363	118607	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16945.3>	10.65.62.17	2009	10.65.62.17	55638	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	52899360	78406	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15095.3>	10.65.62.17	2009	10.65.62.17	54367	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	35738760	54037	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24984.3>	10.65.62.17	2009	10.65.62.17	58820	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	71880730	94429	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17458.3>	10.65.62.17	2009	10.65.62.17	55820	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	188607217	180407	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15310.3>	10.65.62.17	2009	10.65.62.17	54595	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64435783	91350	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22173.3>	10.65.62.17	2009	10.65.62.17	57358	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	106797644	124701	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19439.3>	10.65.62.17	2009	10.65.62.17	56806	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51576122	73556	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15526.3>	10.65.62.17	2009	10.65.62.17	54844	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	398671	732	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.26307.3>	10.65.62.17	2009	10.65.62.17	59120	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45615832	65384	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26006.3>	10.65.62.17	2009	10.65.62.17	59049	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67867465	92138	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25416.3>	10.65.62.17	2009	10.65.62.17	58923	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50950121	73538	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21760.3>	10.65.62.17	2009	10.65.62.17	57292	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	355995	650	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21464.3>	10.65.62.17	2009	10.65.62.17	57233	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	102473016	120325	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20288.3>	10.65.62.17	2009	10.65.62.17	57016	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	118740892	132218	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16964.3>	10.65.62.17	2009	10.65.62.17	55644	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	130528618	138982	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14818.3>	10.65.62.17	2009	10.65.62.17	54332	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	130446134	137734	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13933.3>	10.65.62.17	2009	10.65.62.17	54180	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	95263559	116305	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25593.3>	10.65.62.17	2009	10.65.62.17	58968	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	84691070	105623	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24708.3>	10.65.62.17	2009	10.65.62.17	58751	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66821481	93671	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20796.3>	10.65.62.17	2009	10.65.62.17	57118	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	55288388	69079	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20500.3>	10.65.62.17	2009	10.65.62.17	57060	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41301746	61216	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19283.3>	10.65.62.17	2009	10.65.62.17	56766	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47175573	68812	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18986.3>	10.65.62.17	2009	10.65.62.17	56699	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	104732199	122487	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15034.3>	10.65.62.17	2009	10.65.62.17	54358	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	132450876	140711	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14149.3>	10.65.62.17	2009	10.65.62.17	54234	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48766566	69147	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26143.3>	10.65.62.17	2009	10.65.62.17	59081	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48960669	66886	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25809.3>	10.65.62.17	2009	10.65.62.17	59008	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39347392	56800	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24924.3>	10.65.62.17	2009	10.65.62.17	58804	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	136115835	141589	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16765.3>	10.65.62.17	2009	10.65.62.17	55583	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48974610	70650	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14330.3>	10.65.62.17	2009	10.65.62.17	54277	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	144318161	147308	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25140.3>	10.65.62.17	2009	10.65.62.17	58858	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61919111	85549	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23295.3>	10.65.62.17	2009	10.65.62.17	57696	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42354137	62761	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22113.3>	10.65.62.17	2009	10.65.62.17	57349	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	55382501	68950	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21188.3>	10.65.62.17	2009	10.65.62.17	57187	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	172628777	169813	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19379.3>	10.65.62.17	2009	10.65.62.17	56791	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	105931028	124355	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26241.3>	10.65.62.17	2009	10.65.62.17	59105	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	124870403	133905	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22331.3>	10.65.62.17	2009	10.65.62.17	57386	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	240057	566	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21405.3>	10.65.62.17	2009	10.65.62.17	57224	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41453924	61756	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20480.3>	10.65.62.17	2009	10.65.62.17	57056	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65653702	90834	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15682.3>	10.65.62.17	2009	10.65.62.17	54986	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41546050	61555	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14761.3>	10.65.62.17	2009	10.65.62.17	54326	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62645146	85888	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13873.3>	10.65.62.17	2009	10.65.62.17	54165	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64274102	91180	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13578.3>	10.65.62.17	2009	10.65.62.17	54105	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	831	12	21333452	32673	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24648.3>	10.65.62.17	2009	10.65.62.17	58736	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	71281451	95432	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22545.3>	10.65.62.17	2009	10.65.62.17	57420	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	129953497	137491	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21624.3>	10.65.62.17	2009	10.65.62.17	57266	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	53506860	68106	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16785.3>	10.65.62.17	2009	10.65.62.17	55587	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	155681532	169233	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14975.3>	10.65.62.17	2009	10.65.62.17	54351	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	86378323	100968	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14089.3>	10.65.62.17	2009	10.65.62.17	54219	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65339531	90949	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24866.3>	10.65.62.17	2009	10.65.62.17	58789	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	148010397	148726	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22726.3>	10.65.62.17	2009	10.65.62.17	57453	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	91423580	113330	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21836.3>	10.65.62.17	2009	10.65.62.17	57306	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	90625772	110261	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20912.3>	10.65.62.17	2009	10.65.62.17	57136	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	104549065	120124	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16075.3>	10.65.62.17	2009	10.65.62.17	55201	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	99103686	116662	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14266.3>	10.65.62.17	2009	10.65.62.17	54262	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	68947732	86294	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25965.3>	10.65.62.17	2009	10.65.62.17	59038	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58354965	81500	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25336.3>	10.65.62.17	2009	10.65.62.17	58908	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	131624777	137591	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22056.3>	10.65.62.17	2009	10.65.62.17	57339	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67001588	91157	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20204.3>	10.65.62.17	2009	10.65.62.17	56997	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149791809	154170	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19319.3>	10.65.62.17	2009	10.65.62.17	56777	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	72579350	95264	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17510.3>	10.65.62.17	2009	10.65.62.17	55831	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62730063	75275	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15407.3>	10.65.62.17	2009	10.65.62.17	54694	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49626561	71660	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13558.3>	10.65.62.17	2009	10.65.62.17	54086	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	896	12	1680629950	4650336	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25552.3>	10.65.62.17	2009	10.65.62.17	58958	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	57627566	85457	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24964.3>	10.65.62.17	2009	10.65.62.17	58813	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	189165195	178573	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23448.3>	10.65.62.17	2009	10.65.62.17	57834	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48778087	66297	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20420.3>	10.65.62.17	2009	10.65.62.17	57044	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39731312	56724	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18906.3>	10.65.62.17	2009	10.65.62.17	56679	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45715405	63448	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14069.3>	10.65.62.17	2009	10.65.62.17	54214	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	107055427	121548	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22740.3>	10.65.62.17	2009	10.65.62.17	57455	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54528422	68966	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21561.3>	10.65.62.17	2009	10.65.62.17	57256	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43285897	62088	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19712.3>	10.65.62.17	2009	10.65.62.17	56875	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	136886336	142705	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25060.3>	10.65.62.17	2009	10.65.62.17	58839	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51760206	71102	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22664.3>	10.65.62.17	2009	10.65.62.17	57441	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	101310153	118457	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20853.3>	10.65.62.17	2009	10.65.62.17	57128	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	263026	583	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19928.3>	10.65.62.17	2009	10.65.62.17	56929	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	151470117	166676	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19043.3>	10.65.62.17	2009	10.65.62.17	56707	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	426285	796	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16313.3>	10.65.62.17	2009	10.65.62.17	55314	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	159756397	158342	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16017.3>	10.65.62.17	2009	10.65.62.17	55179	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	55978301	80571	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14206.3>	10.65.62.17	2009	10.65.62.17	54247	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	72700648	96196	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25276.3>	10.65.62.17	2009	10.65.62.17	58893	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63903417	88993	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22248.3>	10.65.62.17	2009	10.65.62.17	57371	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	90632940	111944	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21068.3>	10.65.62.17	2009	10.65.62.17	57167	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	271164	564	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15602.3>	10.65.62.17	2009	10.65.62.17	54925	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	133442568	140642	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13793.3>	10.65.62.17	2009	10.65.62.17	54145	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	263524	547	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13498.3>	10.65.62.17	2009	10.65.62.17	54065	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	369	8	1691233690	12435005	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.26082.3>	10.65.62.17	2009	10.65.62.17	59067	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47556624	70785	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25492.3>	10.65.62.17	2009	10.65.62.17	58944	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54449504	80100	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22464.3>	10.65.62.17	2009	10.65.62.17	57407	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	117298709	130139	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19475.3>	10.65.62.17	2009	10.65.62.17	56816	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49103058	67351	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14009.3>	10.65.62.17	2009	10.65.62.17	54199	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	308793	615	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24788.3>	10.65.62.17	2009	10.65.62.17	58770	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51659737	73421	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19652.3>	10.65.62.17	2009	10.65.62.17	56860	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	97743021	114981	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15743.3>	10.65.62.17	2009	10.65.62.17	55043	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	33428480	51972	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25629.3>	10.65.62.17	2009	10.65.62.17	58976	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	166188669	161723	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25296.3>	10.65.62.17	2009	10.65.62.17	58896	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42786307	63560	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22900.3>	10.65.62.17	2009	10.65.62.17	57483	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153124294	167351	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21972.3>	10.65.62.17	2009	10.65.62.17	57328	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	135865989	141275	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16545.3>	10.65.62.17	2009	10.65.62.17	55437	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45309611	66997	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15963.3>	10.65.62.17	2009	10.65.62.17	55165	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	107988908	123685	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15369.3>	10.65.62.17	2009	10.65.62.17	54641	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	119659136	133156	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22780.3>	10.65.62.17	2009	10.65.62.17	57463	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	275654	640	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22192.3>	10.65.62.17	2009	10.65.62.17	57360	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38646493	58220	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19455.3>	10.65.62.17	2009	10.65.62.17	56811	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149276220	165377	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16171.3>	10.65.62.17	2009	10.65.62.17	55238	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	98416256	115708	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14662.3>	10.65.62.17	2009	10.65.62.17	54313	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50802360	72492	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26022.3>	10.65.62.17	2009	10.65.62.17	59052	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	71348099	94650	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21480.3>	10.65.62.17	2009	10.65.62.17	57240	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149548855	151066	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16977.3>	10.65.62.17	2009	10.65.62.17	55649	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47845942	64852	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16395.3>	10.65.62.17	2009	10.65.62.17	55353	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	143382837	147661	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13949.3>	10.65.62.17	2009	10.65.62.17	54184	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	145411191	162448	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24724.3>	10.65.62.17	2009	10.65.62.17	58755	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	71519339	95403	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16865.3>	10.65.62.17	2009	10.65.62.17	55611	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	119353765	130472	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15050.3>	10.65.62.17	2009	10.65.62.17	54361	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	167067519	165961	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26162.3>	10.65.62.17	2009	10.65.62.17	59083	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	145647989	162890	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25829.3>	10.65.62.17	2009	10.65.62.17	59010	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149019195	152106	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24940.3>	10.65.62.17	2009	10.65.62.17	58809	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43308204	66282	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19808.3>	10.65.62.17	2009	10.65.62.17	56898	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	104917187	120328	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17370.3>	10.65.62.17	2009	10.65.62.17	55779	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45729987	64104	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23348.3>	10.65.62.17	2009	10.65.62.17	57723	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	421192	790	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21206.3>	10.65.62.17	2009	10.65.62.17	57191	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	86091848	107152	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20024.3>	10.65.62.17	2009	10.65.62.17	56952	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	281408	594	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19395.3>	10.65.62.17	2009	10.65.62.17	56794	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54411808	75688	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16701.3>	10.65.62.17	2009	10.65.62.17	55547	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	93880299	115452	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14558.3>	10.65.62.17	2009	10.65.62.17	54304	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	68542294	93266	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26257.3>	10.65.62.17	2009	10.65.62.17	59110	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	133711459	142185	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25372.3>	10.65.62.17	2009	10.65.62.17	58914	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46716907	62845	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20240.3>	10.65.62.17	2009	10.65.62.17	57002	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42391951	61769	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13889.3>	10.65.62.17	2009	10.65.62.17	54169	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	135580586	140217	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24664.3>	10.65.62.17	2009	10.65.62.17	58740	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	92157308	107743	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22560.3>	10.65.62.17	2009	10.65.62.17	57422	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153893853	167978	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16505.3>	10.65.62.17	2009	10.65.62.17	55414	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	104200265	120293	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14105.3>	10.65.62.17	2009	10.65.62.17	54223	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110933712	124906	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25765.3>	10.65.62.17	2009	10.65.62.17	59000	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	57704373	72029	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24880.3>	10.65.62.17	2009	10.65.62.17	58792	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60072680	85937	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15206.3>	10.65.62.17	2009	10.65.62.17	54433	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	55131580	82937	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14282.3>	10.65.62.17	2009	10.65.62.17	54266	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	106079468	122444	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25096.3>	10.65.62.17	2009	10.65.62.17	58848	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	53191892	70063	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22956.3>	10.65.62.17	2009	10.65.62.17	57493	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	147778100	148794	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22068.3>	10.65.62.17	2009	10.65.62.17	57341	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	85183149	103016	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21144.3>	10.65.62.17	2009	10.65.62.17	57180	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	102255669	119220	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17526.3>	10.65.62.17	2009	10.65.62.17	55838	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	52857129	73860	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16897.3>	10.65.62.17	2009	10.65.62.17	55615	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	162465945	158596	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15422.3>	10.65.62.17	2009	10.65.62.17	54723	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50873916	71335	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23464.3>	10.65.62.17	2009	10.65.62.17	57856	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	57470088	71294	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22284.3>	10.65.62.17	2009	10.65.62.17	57378	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	35284623	55411	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18922.3>	10.65.62.17	2009	10.65.62.17	56683	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	943	12	21327603	32661	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.17113.3>	10.65.62.17	2009	10.65.62.17	55710	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	111351171	126814	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15641.3>	10.65.62.17	2009	10.65.62.17	54947	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	79990757	102115	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13829.3>	10.65.62.17	2009	10.65.62.17	54154	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	35886668	54324	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20652.3>	10.65.62.17	2009	10.65.62.17	57092	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45493676	61259	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16444.3>	10.65.62.17	2009	10.65.62.17	55378	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	79902816	102942	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14930.3>	10.65.62.17	2009	10.65.62.17	54346	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	112444277	128302	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25705.3>	10.65.62.17	2009	10.65.62.17	58991	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38787946	59267	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21792.3>	10.65.62.17	2009	10.65.62.17	57299	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70710763	96055	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19944.3>	10.65.62.17	2009	10.65.62.17	56931	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153932967	167916	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16621.3>	10.65.62.17	2009	10.65.62.17	55496	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	284021	582	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14222.3>	10.65.62.17	2009	10.65.62.17	54251	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	342930	674	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.26217.3>	10.65.62.17	2009	10.65.62.17	59099	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	125045336	136045	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21091.3>	10.65.62.17	2009	10.65.62.17	57169	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	411606	737	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20160.3>	10.65.62.17	2009	10.65.62.17	56985	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47906889	66293	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19571.3>	10.65.62.17	2009	10.65.62.17	56838	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	107356505	123753	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17467.3>	10.65.62.17	2009	10.65.62.17	55821	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149560728	150657	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16837.3>	10.65.62.17	2009	10.65.62.17	55609	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	156322435	156492	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15624.3>	10.65.62.17	2009	10.65.62.17	54935	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	37115600	54997	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14438.3>	10.65.62.17	2009	10.65.62.17	54289	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49106982	71439	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13809.3>	10.65.62.17	2009	10.65.62.17	54149	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	441671	809	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13514.3>	10.65.62.17	2009	10.65.62.17	54069	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	369	8	1887936309	12844957	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.23404.3>	10.65.62.17	2009	10.65.62.17	57772	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	69937724	92971	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23112.3>	10.65.62.17	2009	10.65.62.17	57565	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	280028	554	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20376.3>	10.65.62.17	2009	10.65.62.17	57033	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	154152891	154805	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19491.3>	10.65.62.17	2009	10.65.62.17	56820	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49445495	72291	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18862.3>	10.65.62.17	2009	10.65.62.17	56668	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51825383	73614	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17053.3>	10.65.62.17	2009	10.65.62.17	55683	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65566699	90414	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15837.3>	10.65.62.17	2009	10.65.62.17	55105	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42522753	64131	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14362.3>	10.65.62.17	2009	10.65.62.17	54280	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	196931817	182278	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14025.3>	10.65.62.17	2009	10.65.62.17	54203	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	253531	575	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24804.3>	10.65.62.17	2009	10.65.62.17	58773	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41118527	61988	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22696.3>	10.65.62.17	2009	10.65.62.17	57447	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	137601927	142655	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21520.3>	10.65.62.17	2009	10.65.62.17	57246	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39026094	59839	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20596.3>	10.65.62.17	2009	10.65.62.17	57083	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67564380	88786	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19668.3>	10.65.62.17	2009	10.65.62.17	56863	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65714312	93072	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25940.3>	10.65.62.17	2009	10.65.62.17	59031	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	117713351	129990	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25645.3>	10.65.62.17	2009	10.65.62.17	58980	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54079644	71120	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19884.3>	10.65.62.17	2009	10.65.62.17	56914	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	166316503	161128	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15979.3>	10.65.62.17	2009	10.65.62.17	55168	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	100352716	117271	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15349.3>	10.65.62.17	2009	10.65.62.17	54630	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	144891335	147703	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14162.3>	10.65.62.17	2009	10.65.62.17	54236	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	118241382	131856	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25530.3>	10.65.62.17	2009	10.65.62.17	58953	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	271451	549	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25236.3>	10.65.62.17	2009	10.65.62.17	58882	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	119558577	132707	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22836.3>	10.65.62.17	2009	10.65.62.17	57472	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38768174	59726	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22204.3>	10.65.62.17	2009	10.65.62.17	57364	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	148349308	164528	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19215.3>	10.65.62.17	2009	10.65.62.17	56751	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	159576206	171712	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16777.3>	10.65.62.17	2009	10.65.62.17	55586	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	92556478	112433	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14675.3>	10.65.62.17	2009	10.65.62.17	54314	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51411314	73248	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26038.3>	10.65.62.17	2009	10.65.62.17	59056	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42842713	63352	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25448.3>	10.65.62.17	2009	10.65.62.17	58935	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	56477585	77139	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22420.3>	10.65.62.17	2009	10.65.62.17	57400	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	336027	677	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21496.3>	10.65.62.17	2009	10.65.62.17	57242	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45629825	67086	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20316.3>	10.65.62.17	2009	10.65.62.17	57020	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61290645	84448	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16993.3>	10.65.62.17	2009	10.65.62.17	55658	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	359143	674	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13965.3>	10.65.62.17	2009	10.65.62.17	54188	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	100824107	118312	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24740.3>	10.65.62.17	2009	10.65.62.17	58758	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	263379	570	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21420.3>	10.65.62.17	2009	10.65.62.17	57226	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	134896406	141021	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20532.3>	10.65.62.17	2009	10.65.62.17	57067	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50192832	72267	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26175.3>	10.65.62.17	2009	10.65.62.17	59088	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44167231	61456	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25842.3>	10.65.62.17	2009	10.65.62.17	59013	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	239576	550	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19195.3>	10.65.62.17	2009	10.65.62.17	56746	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39570075	60797	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17386.3>	10.65.62.17	2009	10.65.62.17	55783	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50759776	71112	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15915.3>	10.65.62.17	2009	10.65.62.17	55147	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40742573	59374	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15285.3>	10.65.62.17	2009	10.65.62.17	54561	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110307291	125987	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25172.3>	10.65.62.17	2009	10.65.62.17	58866	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	122396306	134317	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23072.3>	10.65.62.17	2009	10.65.62.17	57551	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41372262	62710	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20040.3>	10.65.62.17	2009	10.65.62.17	56955	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	324417	663	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19414.3>	10.65.62.17	2009	10.65.62.17	56799	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	53275468	77817	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17602.3>	10.65.62.17	2009	10.65.62.17	55853	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	106607544	122252	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15498.3>	10.65.62.17	2009	10.65.62.17	54818	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	182032229	175964	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20256.3>	10.65.62.17	2009	10.65.62.17	57007	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	342558	672	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16933.3>	10.65.62.17	2009	10.65.62.17	55630	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	95261678	114225	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14790.3>	10.65.62.17	2009	10.65.62.17	54329	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62437496	89547	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13905.3>	10.65.62.17	2009	10.65.62.17	54173	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	191192497	181887	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25903.3>	10.65.62.17	2009	10.65.62.17	59020	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67461306	91081	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24680.3>	10.65.62.17	2009	10.65.62.17	58744	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	252702	509	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21948.3>	10.65.62.17	2009	10.65.62.17	57323	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62002609	76071	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20728.3>	10.65.62.17	2009	10.65.62.17	57104	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	116172492	129145	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18958.3>	10.65.62.17	2009	10.65.62.17	56692	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	103820357	120647	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14121.3>	10.65.62.17	2009	10.65.62.17	54227	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	35129296	54599	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26115.3>	10.65.62.17	2009	10.65.62.17	59074	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	36097970	55948	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24896.3>	10.65.62.17	2009	10.65.62.17	58798	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	278753	612	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19764.3>	10.65.62.17	2009	10.65.62.17	56887	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	161133400	157940	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15222.3>	10.65.62.17	2009	10.65.62.17	54460	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	81226501	103550	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14298.3>	10.65.62.17	2009	10.65.62.17	54270	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70304218	95037	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26000.3>	10.65.62.17	2009	10.65.62.17	59046	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42384338	64880	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25112.3>	10.65.62.17	2009	10.65.62.17	58852	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	164009118	159790	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22380.3>	10.65.62.17	2009	10.65.62.17	57393	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	131044168	140154	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21168.3>	10.65.62.17	2009	10.65.62.17	57184	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58650240	82425	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19980.3>	10.65.62.17	2009	10.65.62.17	56942	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40115207	57055	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19351.3>	10.65.62.17	2009	10.65.62.17	56784	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42766862	64949	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16664.3>	10.65.62.17	2009	10.65.62.17	55534	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	125966686	135326	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15438.3>	10.65.62.17	2009	10.65.62.17	54744	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58858762	71745	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14514.3>	10.65.62.17	2009	10.65.62.17	54298	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61324793	83327	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25585.3>	10.65.62.17	2009	10.65.62.17	58964	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110666592	126261	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23480.3>	10.65.62.17	2009	10.65.62.17	57877	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65602614	90980	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14730.3>	10.65.62.17	2009	10.65.62.17	54321	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	104529545	120166	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13845.3>	10.65.62.17	2009	10.65.62.17	54158	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	100746566	120702	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22772.3>	10.65.62.17	2009	10.65.62.17	57460	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	59176010	71827	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21592.3>	10.65.62.17	2009	10.65.62.17	57259	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	128176547	136243	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20671.3>	10.65.62.17	2009	10.65.62.17	57094	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	114103601	128065	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14946.3>	10.65.62.17	2009	10.65.62.17	54348	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	94617278	113602	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22991.3>	10.65.62.17	2009	10.65.62.17	57498	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	87138252	104947	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20884.3>	10.65.62.17	2009	10.65.62.17	57133	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48263602	63049	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19960.3>	10.65.62.17	2009	10.65.62.17	56935	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38724527	56974	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19075.3>	10.65.62.17	2009	10.65.62.17	56716	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46863271	72857	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16342.3>	10.65.62.17	2009	10.65.62.17	55327	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	279712	608	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16051.3>	10.65.62.17	2009	10.65.62.17	55191	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	157011802	158959	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14238.3>	10.65.62.17	2009	10.65.62.17	54255	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46924619	65729	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25308.3>	10.65.62.17	2009	10.65.62.17	58900	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	398243	750	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.23204.3>	10.65.62.17	2009	10.65.62.17	57633	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48306728	64653	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22024.3>	10.65.62.17	2009	10.65.62.17	57335	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50869884	68506	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21399.3>	10.65.62.17	2009	10.65.62.17	57222	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	83087438	102072	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21100.3>	10.65.62.17	2009	10.65.62.17	57173	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60072144	89509	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20176.3>	10.65.62.17	2009	10.65.62.17	56990	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	131499487	138632	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19291.3>	10.65.62.17	2009	10.65.62.17	56770	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	125224077	136039	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17482.3>	10.65.62.17	2009	10.65.62.17	55823	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153878869	167996	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17153.3>	10.65.62.17	2009	10.65.62.17	55723	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	135931280	141552	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13825.3>	10.65.62.17	2009	10.65.62.17	54153	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43301256	65450	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13530.3>	10.65.62.17	2009	10.65.62.17	54077	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	354	8	634024447	20068638	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22496.3>	10.65.62.17	2009	10.65.62.17	57413	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	162953925	161531	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20392.3>	10.65.62.17	2009	10.65.62.17	57039	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42807430	60490	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18878.3>	10.65.62.17	2009	10.65.62.17	56672	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	52929746	81340	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14041.3>	10.65.62.17	2009	10.65.62.17	54207	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44195534	66184	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24816.3>	10.65.62.17	2009	10.65.62.17	58778	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	81134224	104871	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21532.3>	10.65.62.17	2009	10.65.62.17	57251	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	31193962	50203	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19724.3>	10.65.62.17	2009	10.65.62.17	56876	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	191383	466	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19684.3>	10.65.62.17	2009	10.65.62.17	56867	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	55420418	76827	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17288.3>	10.65.62.17	2009	10.65.62.17	55760	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	77615463	99063	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14886.3>	10.65.62.17	2009	10.65.62.17	54340	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47489325	62894	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14850.3>	10.65.62.17	2009	10.65.62.17	54336	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	158079557	160086	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25957.3>	10.65.62.17	2009	10.65.62.17	59037	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	53962984	69275	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25661.3>	10.65.62.17	2009	10.65.62.17	58984	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54317413	76087	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25035.3>	10.65.62.17	2009	10.65.62.17	58832	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	121062814	133418	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22004.3>	10.65.62.17	2009	10.65.62.17	57332	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43426982	60626	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20824.3>	10.65.62.17	2009	10.65.62.17	57122	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43489343	66640	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19900.3>	10.65.62.17	2009	10.65.62.17	56921	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65577004	90444	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16577.3>	10.65.62.17	2009	10.65.62.17	55460	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	348323	706	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16282.3>	10.65.62.17	2009	10.65.62.17	55294	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47464519	70075	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14178.3>	10.65.62.17	2009	10.65.62.17	54240	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	92430289	111802	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25248.3>	10.65.62.17	2009	10.65.62.17	58884	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	133392277	140701	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22224.3>	10.65.62.17	2009	10.65.62.17	57366	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	164387312	162165	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21928.3>	10.65.62.17	2009	10.65.62.17	57321	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	142352834	146817	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20116.3>	10.65.62.17	2009	10.65.62.17	56976	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	157737828	158195	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19231.3>	10.65.62.17	2009	10.65.62.17	56755	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46728078	70052	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17422.3>	10.65.62.17	2009	10.65.62.17	55810	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	111018661	124528	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16793.3>	10.65.62.17	2009	10.65.62.17	55588	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	137317066	144342	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13765.3>	10.65.62.17	2009	10.65.62.17	54138	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	142691117	146674	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26054.3>	10.65.62.17	2009	10.65.62.17	59063	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	349437	662	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25467.3>	10.65.62.17	2009	10.65.62.17	58938	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	143414333	147477	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23360.3>	10.65.62.17	2009	10.65.62.17	57732	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	326053	662	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20332.3>	10.65.62.17	2009	10.65.62.17	57025	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	145026228	148140	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17009.3>	10.65.62.17	2009	10.65.62.17	55665	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	56436479	76521	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13981.3>	10.65.62.17	2009	10.65.62.17	54192	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	90700380	111279	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24756.3>	10.65.62.17	2009	10.65.62.17	58763	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	183030107	172469	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22653.3>	10.65.62.17	2009	10.65.62.17	57439	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	35662877	53392	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21728.3>	10.65.62.17	2009	10.65.62.17	57288	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40264370	61192	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20548.3>	10.65.62.17	2009	10.65.62.17	57072	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63472270	88562	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16007.3>	10.65.62.17	2009	10.65.62.17	55177	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	57234720	84308	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19840.3>	10.65.62.17	2009	10.65.62.17	56905	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	117424661	129611	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16517.3>	10.65.62.17	2009	10.65.62.17	55417	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110896683	125300	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22160.3>	10.65.62.17	2009	10.65.62.17	57355	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	124799768	134611	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19427.3>	10.65.62.17	2009	10.65.62.17	56803	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	59271542	74888	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17618.3>	10.65.62.17	2009	10.65.62.17	55856	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	113125952	126422	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16733.3>	10.65.62.17	2009	10.65.62.17	55564	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	374759	709	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.23300.3>	10.65.62.17	2009	10.65.62.17	57697	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	250896	614	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21454.3>	10.65.62.17	2009	10.65.62.17	57232	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50647522	65793	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20272.3>	10.65.62.17	2009	10.65.62.17	57012	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51461142	66067	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13921.3>	10.65.62.17	2009	10.65.62.17	54177	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60841310	80318	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24696.3>	10.65.62.17	2009	10.65.62.17	58748	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	143310109	146956	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22592.3>	10.65.62.17	2009	10.65.62.17	57428	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	267998	616	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22304.3>	10.65.62.17	2009	10.65.62.17	57382	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39391967	60623	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20488.3>	10.65.62.17	2009	10.65.62.17	57059	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	109812393	124264	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18977.3>	10.65.62.17	2009	10.65.62.17	56696	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	71918606	97538	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15025.3>	10.65.62.17	2009	10.65.62.17	54356	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	190955939	180047	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14137.3>	10.65.62.17	2009	10.65.62.17	54231	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	336800	687	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26131.3>	10.65.62.17	2009	10.65.62.17	59077	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	122741394	132653	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25800.3>	10.65.62.17	2009	10.65.62.17	59005	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45382642	68469	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24912.3>	10.65.62.17	2009	10.65.62.17	58801	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66496643	93127	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22808.3>	10.65.62.17	2009	10.65.62.17	57467	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50731710	65841	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20960.3>	10.65.62.17	2009	10.65.62.17	57145	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	255174	537	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19780.3>	10.65.62.17	2009	10.65.62.17	56892	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	55376464	83393	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19151.3>	10.65.62.17	2009	10.65.62.17	56735	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63559514	88505	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16123.3>	10.65.62.17	2009	10.65.62.17	55221	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149340934	150142	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14314.3>	10.65.62.17	2009	10.65.62.17	54274	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	161753813	159586	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25128.3>	10.65.62.17	2009	10.65.62.17	58856	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47413513	63725	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23280.3>	10.65.62.17	2009	10.65.62.17	57681	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38529686	56000	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22100.3>	10.65.62.17	2009	10.65.62.17	57347	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	172638601	169656	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21512.3>	10.65.62.17	2009	10.65.62.17	57245	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44702532	67109	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21176.3>	10.65.62.17	2009	10.65.62.17	57185	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	148633916	149599	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19996.3>	10.65.62.17	2009	10.65.62.17	56946	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	88139609	106506	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15454.3>	10.65.62.17	2009	10.65.62.17	54774	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48340221	68939	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26237.3>	10.65.62.17	2009	10.65.62.17	59103	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	94251172	115500	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23496.3>	10.65.62.17	2009	10.65.62.17	57885	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	299457	620	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22316.3>	10.65.62.17	2009	10.65.62.17	57384	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	276445	618	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20468.3>	10.65.62.17	2009	10.65.62.17	57055	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	75046242	97315	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19585.3>	10.65.62.17	2009	10.65.62.17	56842	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49539070	71488	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15670.3>	10.65.62.17	2009	10.65.62.17	54976	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153837184	154695	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14746.3>	10.65.62.17	2009	10.65.62.17	54324	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	109898322	125986	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13861.3>	10.65.62.17	2009	10.65.62.17	54162	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	73181535	95174	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22828.3>	10.65.62.17	2009	10.65.62.17	57471	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	125913343	135759	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22536.3>	10.65.62.17	2009	10.65.62.17	57419	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60393911	83750	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15847.3>	10.65.62.17	2009	10.65.62.17	55111	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	69112942	89377	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24852.3>	10.65.62.17	2009	10.65.62.17	58786	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	75786836	97209	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23004.3>	10.65.62.17	2009	10.65.62.17	57503	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	99509971	117749	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20900.3>	10.65.62.17	2009	10.65.62.17	57135	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	365303	716	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20608.3>	10.65.62.17	2009	10.65.62.17	57084	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	192447665	182964	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19091.3>	10.65.62.17	2009	10.65.62.17	56720	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51073922	72338	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15474.3>	10.65.62.17	2009	10.65.62.17	54791	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	127076894	136778	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14254.3>	10.65.62.17	2009	10.65.62.17	54259	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	35801555	53268	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20192.3>	10.65.62.17	2009	10.65.62.17	56995	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	85570033	104166	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17498.3>	10.65.62.17	2009	10.65.62.17	55828	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153107729	154158	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15394.3>	10.65.62.17	2009	10.65.62.17	54662	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45457526	67096	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14470.3>	10.65.62.17	2009	10.65.62.17	54293	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67567153	85816	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13546.3>	10.65.62.17	2009	10.65.62.17	54083	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	360	8	718962157	20255086	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21332.3>	10.65.62.17	2009	10.65.62.17	57211	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	137337173	142812	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14057.3>	10.65.62.17	2009	10.65.62.17	54211	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48382432	71527	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24832.3>	10.65.62.17	2009	10.65.62.17	58782	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	37330915	54747	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21548.3>	10.65.62.17	2009	10.65.62.17	57253	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	337548	665	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21260.3>	10.65.62.17	2009	10.65.62.17	57198	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	244304	501	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20920.3>	10.65.62.17	2009	10.65.62.17	57138	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	73566014	98430	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20624.3>	10.65.62.17	2009	10.65.62.17	57087	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	160877793	161636	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19700.3>	10.65.62.17	2009	10.65.62.17	56871	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	201546203	189210	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14902.3>	10.65.62.17	2009	10.65.62.17	54342	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38231538	57950	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25344.3>	10.65.62.17	2009	10.65.62.17	58909	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40985246	59899	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25048.3>	10.65.62.17	2009	10.65.62.17	58836	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	130567965	138501	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22944.3>	10.65.62.17	2009	10.65.62.17	57490	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70257275	90843	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21768.3>	10.65.62.17	2009	10.65.62.17	57294	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	53163680	81876	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19916.3>	10.65.62.17	2009	10.65.62.17	56925	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	203198	490	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14194.3>	10.65.62.17	2009	10.65.62.17	54244	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	92418398	108865	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25267.3>	10.65.62.17	2009	10.65.62.17	58889	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	152642738	152274	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22236.3>	10.65.62.17	2009	10.65.62.17	57369	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40234662	58129	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21352.3>	10.65.62.17	2009	10.65.62.17	57213	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42627115	62919	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20428.3>	10.65.62.17	2009	10.65.62.17	57046	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	36708606	56240	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20132.3>	10.65.62.17	2009	10.65.62.17	56980	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	68765912	92112	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19247.3>	10.65.62.17	2009	10.65.62.17	56759	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47711457	68778	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17438.3>	10.65.62.17	2009	10.65.62.17	55817	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66778744	92805	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14411.3>	10.65.62.17	2009	10.65.62.17	54286	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	296608	681	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13781.3>	10.65.62.17	2009	10.65.62.17	54142	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	173375956	169657	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26074.3>	10.65.62.17	2009	10.65.62.17	59065	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42179687	61920	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25480.3>	10.65.62.17	2009	10.65.62.17	58941	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38105652	58493	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25188.3>	10.65.62.17	2009	10.65.62.17	58870	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48048914	70963	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21272.3>	10.65.62.17	2009	10.65.62.17	57202	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51791636	72415	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20940.3>	10.65.62.17	2009	10.65.62.17	57140	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62231788	89846	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16143.3>	10.65.62.17	2009	10.65.62.17	55227	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42932346	59540	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13997.3>	10.65.62.17	2009	10.65.62.17	54196	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	179655658	175015	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19640.3>	10.65.62.17	2009	10.65.62.17	56856	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	315371	656	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15727.3>	10.65.62.17	2009	10.65.62.17	55020	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47352494	68680	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25914.3>	10.65.62.17	2009	10.65.62.17	59023	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	156090260	169332	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25617.3>	10.65.62.17	2009	10.65.62.17	58972	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44708564	66546	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24988.3>	10.65.62.17	2009	10.65.62.17	58821	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46521126	64833	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21672.3>	10.65.62.17	2009	10.65.62.17	57274	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	145390649	148185	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20780.3>	10.65.62.17	2009	10.65.62.17	57115	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39919096	57982	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16533.3>	10.65.62.17	2009	10.65.62.17	55428	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	338117	646	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16238.3>	10.65.62.17	2009	10.65.62.17	55281	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	305777	641	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15943.3>	10.65.62.17	2009	10.65.62.17	55158	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	102122380	121294	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25204.3>	10.65.62.17	2009	10.65.62.17	58874	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	259677	621	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.23100.3>	10.65.62.17	2009	10.65.62.17	57564	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70202408	92695	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20999.3>	10.65.62.17	2009	10.65.62.17	57151	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149429640	152532	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19446.3>	10.65.62.17	2009	10.65.62.17	56808	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	71361947	93697	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16159.3>	10.65.62.17	2009	10.65.62.17	55232	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43000137	64953	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25420.3>	10.65.62.17	2009	10.65.62.17	58926	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58082577	85853	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23320.3>	10.65.62.17	2009	10.65.62.17	57707	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	340657	705	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14826.3>	10.65.62.17	2009	10.65.62.17	54333	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149077601	149957	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13937.3>	10.65.62.17	2009	10.65.62.17	54181	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	56953178	76727	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24712.3>	10.65.62.17	2009	10.65.62.17	58752	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58843446	79117	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22608.3>	10.65.62.17	2009	10.65.62.17	57430	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110078187	124738	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21684.3>	10.65.62.17	2009	10.65.62.17	57278	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	114594710	129872	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20508.3>	10.65.62.17	2009	10.65.62.17	57061	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60999236	87825	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17184.3>	10.65.62.17	2009	10.65.62.17	55726	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	128430343	136803	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16849.3>	10.65.62.17	2009	10.65.62.17	55610	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	162581953	160039	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15038.3>	10.65.62.17	2009	10.65.62.17	54359	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	318795	632	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21900.3>	10.65.62.17	2009	10.65.62.17	57316	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43364334	63030	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20980.3>	10.65.62.17	2009	10.65.62.17	57147	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	137336526	143329	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19171.3>	10.65.62.17	2009	10.65.62.17	56739	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	277198	579	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15254.3>	10.65.62.17	2009	10.65.62.17	54507	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43302136	66423	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14964.3>	10.65.62.17	2009	10.65.62.17	54350	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60224118	88738	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25144.3>	10.65.62.17	2009	10.65.62.17	58859	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	123143475	135287	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21198.3>	10.65.62.17	2009	10.65.62.17	57188	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65138044	88128	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20016.3>	10.65.62.17	2009	10.65.62.17	56949	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61212466	87139	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14842.3>	10.65.62.17	2009	10.65.62.17	54335	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	126676989	136417	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26245.3>	10.65.62.17	2009	10.65.62.17	59107	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	77043434	95818	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23220.3>	10.65.62.17	2009	10.65.62.17	57646	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	163308237	162899	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20232.3>	10.65.62.17	2009	10.65.62.17	57001	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61426717	83984	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15686.3>	10.65.62.17	2009	10.65.62.17	54994	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	105444570	121267	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13877.3>	10.65.62.17	2009	10.65.62.17	54166	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	75369414	93890	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13582.3>	10.65.62.17	2009	10.65.62.17	54108	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	859	12	21333456	32673	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24652.3>	10.65.62.17	2009	10.65.62.17	58737	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	37045441	55335	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20700.3>	10.65.62.17	2009	10.65.62.17	57100	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	141758779	145293	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16492.3>	10.65.62.17	2009	10.65.62.17	55406	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	114039868	129472	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15863.3>	10.65.62.17	2009	10.65.62.17	55119	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	358059	658	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15274.3>	10.65.62.17	2009	10.65.62.17	54539	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	156421032	169065	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14093.3>	10.65.62.17	2009	10.65.62.17	54220	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	130123891	140431	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25759.3>	10.65.62.17	2009	10.65.62.17	58999	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	103601970	120327	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23020.3>	10.65.62.17	2009	10.65.62.17	57517	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58148064	77883	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19743.3>	10.65.62.17	2009	10.65.62.17	56880	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	123524771	133590	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15490.3>	10.65.62.17	2009	10.65.62.17	54810	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	162807274	173926	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14270.3>	10.65.62.17	2009	10.65.62.17	54263	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43430749	63468	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26265.3>	10.65.62.17	2009	10.65.62.17	59112	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	106892592	121788	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25973.3>	10.65.62.17	2009	10.65.62.17	59041	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45558998	61545	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23239.3>	10.65.62.17	2009	10.65.62.17	57654	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	71211727	95987	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20211.3>	10.65.62.17	2009	10.65.62.17	56998	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	165968364	163351	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19323.3>	10.65.62.17	2009	10.65.62.17	56778	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	286823	628	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.17514.3>	10.65.62.17	2009	10.65.62.17	55834	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44234144	63123	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16885.3>	10.65.62.17	2009	10.65.62.17	55613	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	182258	442	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13562.3>	10.65.62.17	2009	10.65.62.17	54093	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	817	12	21333450	32673	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25556.3>	10.65.62.17	2009	10.65.62.17	58959	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	309197	652	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22528.3>	10.65.62.17	2009	10.65.62.17	57417	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48590886	64527	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18910.3>	10.65.62.17	2009	10.65.62.17	56680	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	964	12	492	11	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.17105.3>	10.65.62.17	2009	10.65.62.17	55698	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46404405	61828	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14702.3>	10.65.62.17	2009	10.65.62.17	54317	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48989722	69309	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14073.3>	10.65.62.17	2009	10.65.62.17	54215	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58575984	81975	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20640.3>	10.65.62.17	2009	10.65.62.17	57091	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	279481	573	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16432.3>	10.65.62.17	2009	10.65.62.17	55369	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44032524	66193	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15803.3>	10.65.62.17	2009	10.65.62.17	55085	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	171640515	166679	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14922.3>	10.65.62.17	2009	10.65.62.17	54344	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43450841	65191	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26289.3>	10.65.62.17	2009	10.65.62.17	59118	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70571730	96165	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25064.3>	10.65.62.17	2009	10.65.62.17	58840	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	467525	792	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22960.3>	10.65.62.17	2009	10.65.62.17	57494	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	163203157	160968	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19937.3>	10.65.62.17	2009	10.65.62.17	56930	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	164227328	162271	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19047.3>	10.65.62.17	2009	10.65.62.17	56709	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	282462	620	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16610.3>	10.65.62.17	2009	10.65.62.17	55479	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	98490891	117921	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14210.3>	10.65.62.17	2009	10.65.62.17	54248	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	139892613	144852	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13623.3>	10.65.62.17	2009	10.65.62.17	54123	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	854	12	2609892162	5778191	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25281.3>	10.65.62.17	2009	10.65.62.17	58894	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49416445	70288	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20148.3>	10.65.62.17	2009	10.65.62.17	56982	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61324166	83936	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19263.3>	10.65.62.17	2009	10.65.62.17	56762	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	435741	773	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13797.3>	10.65.62.17	2009	10.65.62.17	54146	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46017909	65143	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13502.3>	10.65.62.17	2009	10.65.62.17	54066	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	369	8	2056983100	13202944	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25496.3>	10.65.62.17	2009	10.65.62.17	58945	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	116722198	132037	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23392.3>	10.65.62.17	2009	10.65.62.17	57760	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	117915128	129653	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21584.3>	10.65.62.17	2009	10.65.62.17	57258	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	302997	580	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21291.3>	10.65.62.17	2009	10.65.62.17	57204	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	154840182	155756	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20365.3>	10.65.62.17	2009	10.65.62.17	57032	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	100912941	117863	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19479.3>	10.65.62.17	2009	10.65.62.17	56817	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50674547	71008	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17041.3>	10.65.62.17	2009	10.65.62.17	55680	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	77549752	100427	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16452.3>	10.65.62.17	2009	10.65.62.17	55379	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	101116015	118837	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14013.3>	10.65.62.17	2009	10.65.62.17	54200	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	155165222	153283	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20580.3>	10.65.62.17	2009	10.65.62.17	57079	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	121009298	132266	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25928.3>	10.65.62.17	2009	10.65.62.17	59027	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	72852603	95769	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25633.3>	10.65.62.17	2009	10.65.62.17	58977	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	326045	674	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25004.3>	10.65.62.17	2009	10.65.62.17	58824	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48508474	70478	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20168.3>	10.65.62.17	2009	10.65.62.17	56987	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46662161	68715	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16549.3>	10.65.62.17	2009	10.65.62.17	55444	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67329962	94534	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16254.3>	10.65.62.17	2009	10.65.62.17	55287	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	419570	673	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15330.3>	10.65.62.17	2009	10.65.62.17	54615	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45002488	66674	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25220.3>	10.65.62.17	2009	10.65.62.17	58879	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42240737	63819	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21012.3>	10.65.62.17	2009	10.65.62.17	57155	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39508157	57638	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20092.3>	10.65.62.17	2009	10.65.62.17	56966	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	93787441	112596	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19796.3>	10.65.62.17	2009	10.65.62.17	56894	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	122265327	132760	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19203.3>	10.65.62.17	2009	10.65.62.17	56748	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	108926753	125388	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16175.3>	10.65.62.17	2009	10.65.62.17	55261	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	158202339	170739	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15546.3>	10.65.62.17	2009	10.65.62.17	54882	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45284438	67938	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14366.3>	10.65.62.17	2009	10.65.62.17	54281	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	189174907	180690	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25436.3>	10.65.62.17	2009	10.65.62.17	58932	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	122496872	131263	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22408.3>	10.65.62.17	2009	10.65.62.17	57399	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	111292748	126274	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21486.3>	10.65.62.17	2009	10.65.62.17	57241	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40890921	61902	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20304.3>	10.65.62.17	2009	10.65.62.17	57018	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	332468	665	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16982.3>	10.65.62.17	2009	10.65.62.17	55651	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153495904	156250	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16689.3>	10.65.62.17	2009	10.65.62.17	55542	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	232205	540	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15767.3>	10.65.62.17	2009	10.65.62.17	55060	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	134016909	140807	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13953.3>	10.65.62.17	2009	10.65.62.17	54185	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	36951061	54663	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24728.3>	10.65.62.17	2009	10.65.62.17	58756	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42794837	60378	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22624.3>	10.65.62.17	2009	10.65.62.17	57433	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61840649	87638	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21704.3>	10.65.62.17	2009	10.65.62.17	57283	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	172941142	168310	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21112.3>	10.65.62.17	2009	10.65.62.17	57174	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	261272	607	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20520.3>	10.65.62.17	2009	10.65.62.17	57064	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	151123400	152581	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19596.3>	10.65.62.17	2009	10.65.62.17	56846	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	168084335	164474	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15054.3>	10.65.62.17	2009	10.65.62.17	54362	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	218946	546	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25868.3>	10.65.62.17	2009	10.65.62.17	59016	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	161230886	157986	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24944.3>	10.65.62.17	2009	10.65.62.17	58810	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	314326	694	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22840.3>	10.65.62.17	2009	10.65.62.17	57473	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63133378	90837	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21032.3>	10.65.62.17	2009	10.65.62.17	57159	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	188133	526	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19812.3>	10.65.62.17	2009	10.65.62.17	56899	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	204097	532	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19183.3>	10.65.62.17	2009	10.65.62.17	56742	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	113738247	127332	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17374.3>	10.65.62.17	2009	10.65.62.17	55780	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63625664	77829	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15902.3>	10.65.62.17	2009	10.65.62.17	55138	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70372485	93952	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23056.3>	10.65.62.17	2009	10.65.62.17	57539	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	100340472	116642	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22428.3>	10.65.62.17	2009	10.65.62.17	57401	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	272904	562	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20034.3>	10.65.62.17	2009	10.65.62.17	56954	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	159852074	171738	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19399.3>	10.65.62.17	2009	10.65.62.17	56797	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	161207039	159064	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17590.3>	10.65.62.17	2009	10.65.62.17	55852	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	124959459	136122	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16705.3>	10.65.62.17	2009	10.65.62.17	55555	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60424914	87037	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16411.3>	10.65.62.17	2009	10.65.62.17	55357	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	163205296	162941	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14565.3>	10.65.62.17	2009	10.65.62.17	54305	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	377287	660	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23528.3>	10.65.62.17	2009	10.65.62.17	57917	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	53553427	75458	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22348.3>	10.65.62.17	2009	10.65.62.17	57388	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	167623114	164356	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20244.3>	10.65.62.17	2009	10.65.62.17	57003	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	119060949	131496	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16921.3>	10.65.62.17	2009	10.65.62.17	55623	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39634114	56904	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13893.3>	10.65.62.17	2009	10.65.62.17	54170	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	115266511	127187	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24668.3>	10.65.62.17	2009	10.65.62.17	58741	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	81513198	102460	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22860.3>	10.65.62.17	2009	10.65.62.17	57475	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	248773	564	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22567.3>	10.65.62.17	2009	10.65.62.17	57423	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	141250046	144409	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21640.3>	10.65.62.17	2009	10.65.62.17	57270	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62494895	88629	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14994.3>	10.65.62.17	2009	10.65.62.17	54353	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	108342457	122701	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14109.3>	10.65.62.17	2009	10.65.62.17	54224	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	156333333	157192	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24887.3>	10.65.62.17	2009	10.65.62.17	58795	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	343504	649	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21856.3>	10.65.62.17	2009	10.65.62.17	57309	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	152726423	154479	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19123.3>	10.65.62.17	2009	10.65.62.17	56728	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	115657107	127652	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16095.3>	10.65.62.17	2009	10.65.62.17	55212	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62098895	87671	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15210.3>	10.65.62.17	2009	10.65.62.17	54441	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	283835	602	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14286.3>	10.65.62.17	2009	10.65.62.17	54267	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153274408	167931	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25985.3>	10.65.62.17	2009	10.65.62.17	59043	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38530425	55093	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25100.3>	10.65.62.17	2009	10.65.62.17	58849	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39993684	59192	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21150.3>	10.65.62.17	2009	10.65.62.17	57182	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	129424617	136432	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20224.3>	10.65.62.17	2009	10.65.62.17	57000	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	94936665	113576	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20440.3>	10.65.62.17	2009	10.65.62.17	57052	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48808208	67848	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18926.3>	10.65.62.17	2009	10.65.62.17	56684	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	929	12	21327601	32661	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.17117.3>	10.65.62.17	2009	10.65.62.17	55711	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	104336046	120980	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16825.3>	10.65.62.17	2009	10.65.62.17	55599	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	77268516	94669	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13833.3>	10.65.62.17	2009	10.65.62.17	54155	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45878620	69154	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25080.3>	10.65.62.17	2009	10.65.62.17	58843	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44697176	63800	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22976.3>	10.65.62.17	2009	10.65.62.17	57496	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70250875	94232	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21796.3>	10.65.62.17	2009	10.65.62.17	57300	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	119508204	130225	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19948.3>	10.65.62.17	2009	10.65.62.17	56932	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	150360812	152851	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19063.3>	10.65.62.17	2009	10.65.62.17	56712	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	427141	760	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16625.3>	10.65.62.17	2009	10.65.62.17	55499	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	156651565	156758	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16332.3>	10.65.62.17	2009	10.65.62.17	55319	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	294836	566	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16035.3>	10.65.62.17	2009	10.65.62.17	55182	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	129958397	138077	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14859.3>	10.65.62.17	2009	10.65.62.17	54337	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45207185	62508	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14226.3>	10.65.62.17	2009	10.65.62.17	54252	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	195050413	185216	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23198.3>	10.65.62.17	2009	10.65.62.17	57625	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	194362256	184994	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14446.3>	10.65.62.17	2009	10.65.62.17	54290	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	105982644	123275	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13813.3>	10.65.62.17	2009	10.65.62.17	54150	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153894376	152976	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13518.3>	10.65.62.17	2009	10.65.62.17	54074	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	354	8	718962155	20255086	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22484.3>	10.65.62.17	2009	10.65.62.17	57409	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	76662823	96130	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19495.3>	10.65.62.17	2009	10.65.62.17	56821	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45187018	68034	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18866.3>	10.65.62.17	2009	10.65.62.17	56669	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	74198170	98030	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17057.3>	10.65.62.17	2009	10.65.62.17	55684	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	190065	458	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14029.3>	10.65.62.17	2009	10.65.62.17	54204	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39905534	59756	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19672.3>	10.65.62.17	2009	10.65.62.17	56865	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	105263610	120447	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14875.3>	10.65.62.17	2009	10.65.62.17	54339	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43897866	63369	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25944.3>	10.65.62.17	2009	10.65.62.17	59032	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	286296	622	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25649.3>	10.65.62.17	2009	10.65.62.17	58981	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	56737035	76829	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22916.3>	10.65.62.17	2009	10.65.62.17	57485	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41811380	61253	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21993.3>	10.65.62.17	2009	10.65.62.17	57331	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51637901	73128	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20812.3>	10.65.62.17	2009	10.65.62.17	57121	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	133654007	143869	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19888.3>	10.65.62.17	2009	10.65.62.17	56916	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63123269	88269	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16565.3>	10.65.62.17	2009	10.65.62.17	55452	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64492575	90155	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15387.3>	10.65.62.17	2009	10.65.62.17	54657	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	324086	611	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14166.3>	10.65.62.17	2009	10.65.62.17	54237	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	111817724	127864	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20104.3>	10.65.62.17	2009	10.65.62.17	56969	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	177673151	173510	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19219.3>	10.65.62.17	2009	10.65.62.17	56752	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	157455491	159634	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16191.3>	10.65.62.17	2009	10.65.62.17	55268	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62519020	87682	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14382.3>	10.65.62.17	2009	10.65.62.17	54283	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43315921	60571	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13753.3>	10.65.62.17	2009	10.65.62.17	54135	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	160228930	159166	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26042.3>	10.65.62.17	2009	10.65.62.17	59058	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	108949599	126529	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20320.3>	10.65.62.17	2009	10.65.62.17	57022	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58899022	78287	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16374.3>	10.65.62.17	2009	10.65.62.17	55344	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70713792	93807	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15787.3>	10.65.62.17	2009	10.65.62.17	55067	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	328479	676	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14600.3>	10.65.62.17	2009	10.65.62.17	54308	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	343893	709	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13969.3>	10.65.62.17	2009	10.65.62.17	54189	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67109836	91688	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24744.3>	10.65.62.17	2009	10.65.62.17	58760	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	132532441	139848	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22640.3>	10.65.62.17	2009	10.65.62.17	57437	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	200583	491	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20832.3>	10.65.62.17	2009	10.65.62.17	57123	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	118943636	131918	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20543.3>	10.65.62.17	2009	10.65.62.17	57069	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	31904437	50213	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15070.3>	10.65.62.17	2009	10.65.62.17	54364	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	147382600	148689	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25888.3>	10.65.62.17	2009	10.65.62.17	59018	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	344056	693	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19199.3>	10.65.62.17	2009	10.65.62.17	56747	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	324800	688	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17390.3>	10.65.62.17	2009	10.65.62.17	55788	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54633804	76106	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23036.3>	10.65.62.17	2009	10.65.62.17	57524	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	114351846	128239	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22149.3>	10.65.62.17	2009	10.65.62.17	57354	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	116263400	130832	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21224.3>	10.65.62.17	2009	10.65.62.17	57194	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46301527	66558	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20044.3>	10.65.62.17	2009	10.65.62.17	56956	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	176041948	167508	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16131.3>	10.65.62.17	2009	10.65.62.17	55226	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46829158	65321	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14578.3>	10.65.62.17	2009	10.65.62.17	54306	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	133425019	139435	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26277.3>	10.65.62.17	2009	10.65.62.17	59115	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	128298472	136113	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25392.3>	10.65.62.17	2009	10.65.62.17	58919	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	53950176	70625	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22364.3>	10.65.62.17	2009	10.65.62.17	57391	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	113424178	129142	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21440.3>	10.65.62.17	2009	10.65.62.17	57230	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60567980	87292	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20260.3>	10.65.62.17	2009	10.65.62.17	57009	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	57353477	85166	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16937.3>	10.65.62.17	2009	10.65.62.17	55634	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	155318793	168733	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14506.3>	10.65.62.17	2009	10.65.62.17	54296	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67123819	93247	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13909.3>	10.65.62.17	2009	10.65.62.17	54174	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40281836	59485	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24684.3>	10.65.62.17	2009	10.65.62.17	58745	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	139344585	143097	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20732.3>	10.65.62.17	2009	10.65.62.17	57105	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	57761206	86477	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15013.3>	10.65.62.17	2009	10.65.62.17	54355	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64226353	90034	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14125.3>	10.65.62.17	2009	10.65.62.17	54228	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39788278	58697	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25785.3>	10.65.62.17	2009	10.65.62.17	59003	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41607291	62615	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24900.3>	10.65.62.17	2009	10.65.62.17	58799	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46224052	62369	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22796.3>	10.65.62.17	2009	10.65.62.17	57465	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	176652343	171455	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21876.3>	10.65.62.17	2009	10.65.62.17	57311	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	90017038	109885	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20952.3>	10.65.62.17	2009	10.65.62.17	57141	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60685425	76934	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19768.3>	10.65.62.17	2009	10.65.62.17	56888	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60616640	86980	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19139.3>	10.65.62.17	2009	10.65.62.17	56731	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47199393	67857	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16114.3>	10.65.62.17	2009	10.65.62.17	55218	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110627233	124190	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15226.3>	10.65.62.17	2009	10.65.62.17	54470	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	197629747	183105	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14302.3>	10.65.62.17	2009	10.65.62.17	54271	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	129474667	137620	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25116.3>	10.65.62.17	2009	10.65.62.17	58853	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	98390090	116869	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23268.3>	10.65.62.17	2009	10.65.62.17	57676	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48851948	69736	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19984.3>	10.65.62.17	2009	10.65.62.17	56943	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46841147	69306	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19355.3>	10.65.62.17	2009	10.65.62.17	56785	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62732080	84883	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21380.3>	10.65.62.17	2009	10.65.62.17	57220	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41379534	61762	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20461.3>	10.65.62.17	2009	10.65.62.17	57054	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	71380201	94433	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18942.3>	10.65.62.17	2009	10.65.62.17	56688	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	106060713	122410	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15661.3>	10.65.62.17	2009	10.65.62.17	54960	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	37312824	55702	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14738.3>	10.65.62.17	2009	10.65.62.17	54322	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	162365839	173539	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13849.3>	10.65.62.17	2009	10.65.62.17	54159	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	72207682	95930	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26099.3>	10.65.62.17	2009	10.65.62.17	59070	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44595168	64746	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21599.3>	10.65.62.17	2009	10.65.62.17	57263	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49076560	66545	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14953.3>	10.65.62.17	2009	10.65.62.17	54349	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	168727433	176575	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22108.3>	10.65.62.17	2009	10.65.62.17	57348	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	130635676	140598	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20894.3>	10.65.62.17	2009	10.65.62.17	57134	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110849230	126963	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19964.3>	10.65.62.17	2009	10.65.62.17	56938	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47283300	66550	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19079.3>	10.65.62.17	2009	10.65.62.17	56717	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	151778283	166897	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16645.3>	10.65.62.17	2009	10.65.62.17	55524	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	147475975	164211	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16346.3>	10.65.62.17	2009	10.65.62.17	55336	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	106084118	124315	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14242.3>	10.65.62.17	2009	10.65.62.17	54256	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	204955	509	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20180.3>	10.65.62.17	2009	10.65.62.17	56991	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	118655307	130250	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19295.3>	10.65.62.17	2009	10.65.62.17	56771	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	116697456	128262	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17486.3>	10.65.62.17	2009	10.65.62.17	55825	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	165204126	160540	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14458.3>	10.65.62.17	2009	10.65.62.17	54292	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	104709759	120433	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13534.3>	10.65.62.17	2009	10.65.62.17	54078	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	354	8	654954528	20110666	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21323.3>	10.65.62.17	2009	10.65.62.17	57209	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	56102394	72587	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20396.3>	10.65.62.17	2009	10.65.62.17	57040	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46709767	68814	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19511.3>	10.65.62.17	2009	10.65.62.17	56824	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	96344240	114985	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18882.3>	10.65.62.17	2009	10.65.62.17	56673	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	144472120	162092	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17073.3>	10.65.62.17	2009	10.65.62.17	55690	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	254213	526	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14045.3>	10.65.62.17	2009	10.65.62.17	54208	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110309714	126163	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24824.3>	10.65.62.17	2009	10.65.62.17	58779	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54972501	71512	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22716.3>	10.65.62.17	2009	10.65.62.17	57452	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40926886	58611	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21543.3>	10.65.62.17	2009	10.65.62.17	57252	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	260263	535	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20612.3>	10.65.62.17	2009	10.65.62.17	57085	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49342126	71067	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19688.3>	10.65.62.17	2009	10.65.62.17	56868	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	165331975	164780	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19904.3>	10.65.62.17	2009	10.65.62.17	56922	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63715369	90372	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19019.3>	10.65.62.17	2009	10.65.62.17	56701	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	75986322	97147	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16581.3>	10.65.62.17	2009	10.65.62.17	55464	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	159245258	160937	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16286.3>	10.65.62.17	2009	10.65.62.17	55299	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	113118968	126231	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15995.3>	10.65.62.17	2009	10.65.62.17	55171	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	68999750	95272	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14182.3>	10.65.62.17	2009	10.65.62.17	54241	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	81272953	104791	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25252.3>	10.65.62.17	2009	10.65.62.17	58886	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49465747	64736	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23151.3>	10.65.62.17	2009	10.65.62.17	57595	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44554946	67654	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21044.3>	10.65.62.17	2009	10.65.62.17	57161	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	118583054	132495	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20120.3>	10.65.62.17	2009	10.65.62.17	56977	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46176641	69190	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19235.3>	10.65.62.17	2009	10.65.62.17	56756	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	158646233	156544	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17426.3>	10.65.62.17	2009	10.65.62.17	55814	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	79309345	100978	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16797.3>	10.65.62.17	2009	10.65.62.17	55590	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	68059593	94260	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13769.3>	10.65.62.17	2009	10.65.62.17	54139	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61803134	86525	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22440.3>	10.65.62.17	2009	10.65.62.17	57404	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41505437	59846	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20336.3>	10.65.62.17	2009	10.65.62.17	57026	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	262507	515	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.17013.3>	10.65.62.17	2009	10.65.62.17	55668	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61299144	80170	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14614.3>	10.65.62.17	2009	10.65.62.17	54310	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43134433	60798	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13985.3>	10.65.62.17	2009	10.65.62.17	54193	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65148643	90211	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24760.3>	10.65.62.17	2009	10.65.62.17	58764	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43744611	63310	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21735.3>	10.65.62.17	2009	10.65.62.17	57289	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	100630960	118898	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19631.3>	10.65.62.17	2009	10.65.62.17	56851	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	116215089	131060	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17229.3>	10.65.62.17	2009	10.65.62.17	55742	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54055399	74196	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15089.3>	10.65.62.17	2009	10.65.62.17	54366	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	34537747	54114	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26196.3>	10.65.62.17	2009	10.65.62.17	59094	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	130780064	140035	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25605.3>	10.65.62.17	2009	10.65.62.17	58970	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47223123	67605	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22872.3>	10.65.62.17	2009	10.65.62.17	57477	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	115728040	130290	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17406.3>	10.65.62.17	2009	10.65.62.17	55803	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	116931963	130994	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16817.3>	10.65.62.17	2009	10.65.62.17	55595	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	74985962	97179	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16528.3>	10.65.62.17	2009	10.65.62.17	55422	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	408338	710	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25192.3>	10.65.62.17	2009	10.65.62.17	58871	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47933480	69690	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23088.3>	10.65.62.17	2009	10.65.62.17	57555	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	116975020	130418	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22460.3>	10.65.62.17	2009	10.65.62.17	57406	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58512180	78997	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22168.3>	10.65.62.17	2009	10.65.62.17	57357	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49679535	72222	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21243.3>	10.65.62.17	2009	10.65.62.17	57196	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39138682	56595	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17340.3>	10.65.62.17	2009	10.65.62.17	55771	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	125709908	134221	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16737.3>	10.65.62.17	2009	10.65.62.17	55566	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	295199	642	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.26296.3>	10.65.62.17	2009	10.65.62.17	59119	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	381640	720	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22088.3>	10.65.62.17	2009	10.65.62.17	57345	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	329369	653	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13925.3>	10.65.62.17	2009	10.65.62.17	54178	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46486207	63344	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24700.3>	10.65.62.17	2009	10.65.62.17	58749	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49624722	70473	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22600.3>	10.65.62.17	2009	10.65.62.17	57429	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58812618	83547	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16246.3>	10.65.62.17	2009	10.65.62.17	55284	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	175956831	171944	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14141.3>	10.65.62.17	2009	10.65.62.17	54232	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	36015322	53937	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26135.3>	10.65.62.17	2009	10.65.62.17	59078	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	55771751	71121	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24919.3>	10.65.62.17	2009	10.65.62.17	58803	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	132682866	140361	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21888.3>	10.65.62.17	2009	10.65.62.17	57315	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44617665	61822	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15242.3>	10.65.62.17	2009	10.65.62.17	54486	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	73284985	96371	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14318.3>	10.65.62.17	2009	10.65.62.17	54275	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51454199	77134	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25132.3>	10.65.62.17	2009	10.65.62.17	58857	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50651288	68658	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24840.3>	10.65.62.17	2009	10.65.62.17	58783	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	263451	562	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21180.3>	10.65.62.17	2009	10.65.62.17	57186	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	148324393	149030	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20000.3>	10.65.62.17	2009	10.65.62.17	56947	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	114029473	128931	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19375.3>	10.65.62.17	2009	10.65.62.17	56790	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	206894	492	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14534.3>	10.65.62.17	2009	10.65.62.17	54300	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46720967	68022	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25348.3>	10.65.62.17	2009	10.65.62.17	58910	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	52007409	72147	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23500.3>	10.65.62.17	2009	10.65.62.17	57886	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	510099	818	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15674.3>	10.65.62.17	2009	10.65.62.17	54982	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	423388	798	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14750.3>	10.65.62.17	2009	10.65.62.17	54325	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62088312	88293	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13865.3>	10.65.62.17	2009	10.65.62.17	54163	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	133503179	141756	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20688.3>	10.65.62.17	2009	10.65.62.17	57097	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39543189	56113	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15892.3>	10.65.62.17	2009	10.65.62.17	55132	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	150832051	166434	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25741.3>	10.65.62.17	2009	10.65.62.17	58995	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	52494606	67835	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24856.3>	10.65.62.17	2009	10.65.62.17	58788	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61478536	84570	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19095.3>	10.65.62.17	2009	10.65.62.17	56721	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46274593	67503	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16067.3>	10.65.62.17	2009	10.65.62.17	55198	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43034760	65146	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15182.3>	10.65.62.17	2009	10.65.62.17	54402	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	127600140	138090	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14258.3>	10.65.62.17	2009	10.65.62.17	54260	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47324075	69065	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25328.3>	10.65.62.17	2009	10.65.62.17	58906	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	98328472	116386	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23226.3>	10.65.62.17	2009	10.65.62.17	57653	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	117979200	130652	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22044.3>	10.65.62.17	2009	10.65.62.17	57338	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40215300	57028	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20196.3>	10.65.62.17	2009	10.65.62.17	56996	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	142582894	143100	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19311.3>	10.65.62.17	2009	10.65.62.17	56774	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62671739	87807	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17502.3>	10.65.62.17	2009	10.65.62.17	55829	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	163860	484	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15398.3>	10.65.62.17	2009	10.65.62.17	54674	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66439673	93390	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14774.3>	10.65.62.17	2009	10.65.62.17	54327	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	392832	726	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13550.3>	10.65.62.17	2009	10.65.62.17	54084	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	360	8	649454570	20097051	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25544.3>	10.65.62.17	2009	10.65.62.17	58956	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	87766146	109212	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23440.3>	10.65.62.17	2009	10.65.62.17	57805	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	106178756	122004	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20412.3>	10.65.62.17	2009	10.65.62.17	57042	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	135121019	141139	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14691.3>	10.65.62.17	2009	10.65.62.17	54316	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	155376080	154198	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14061.3>	10.65.62.17	2009	10.65.62.17	54212	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	75692404	97341	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22732.3>	10.65.62.17	2009	10.65.62.17	57454	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65717914	90790	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20631.3>	10.65.62.17	2009	10.65.62.17	57088	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39653454	57702	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19704.3>	10.65.62.17	2009	10.65.62.17	56873	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	191494363	180875	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17305.3>	10.65.62.17	2009	10.65.62.17	55763	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54980709	83220	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16420.3>	10.65.62.17	2009	10.65.62.17	55364	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	244382	582	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25052.3>	10.65.62.17	2009	10.65.62.17	58837	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45986170	61451	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19920.3>	10.65.62.17	2009	10.65.62.17	56926	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43774636	63727	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15129.3>	10.65.62.17	2009	10.65.62.17	54378	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	122601011	134339	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14494.3>	10.65.62.17	2009	10.65.62.17	54295	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	93078913	113069	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14198.3>	10.65.62.17	2009	10.65.62.17	54245	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64245965	89465	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23164.3>	10.65.62.17	2009	10.65.62.17	57602	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	77585825	101759	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22240.3>	10.65.62.17	2009	10.65.62.17	57370	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40703353	63313	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21064.3>	10.65.62.17	2009	10.65.62.17	57166	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	37180491	55000	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19251.3>	10.65.62.17	2009	10.65.62.17	56760	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44502494	67229	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17442.3>	10.65.62.17	2009	10.65.62.17	55818	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	171763703	167040	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15594.3>	10.65.62.17	2009	10.65.62.17	54915	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44423639	67066	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15303.3>	10.65.62.17	2009	10.65.62.17	54586	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	52978795	74884	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13785.3>	10.65.62.17	2009	10.65.62.17	54143	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	122655108	133020	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25484.3>	10.65.62.17	2009	10.65.62.17	58942	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	298217	586	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21868.3>	10.65.62.17	2009	10.65.62.17	57310	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42013939	63012	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20354.3>	10.65.62.17	2009	10.65.62.17	57031	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50513893	72481	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19468.3>	10.65.62.17	2009	10.65.62.17	56814	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	71655814	94464	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14001.3>	10.65.62.17	2009	10.65.62.17	54197	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	119928197	130650	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23264.3>	10.65.62.17	2009	10.65.62.17	57675	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	294237	634	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22672.3>	10.65.62.17	2009	10.65.62.17	57442	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	84681351	106591	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21748.3>	10.65.62.17	2009	10.65.62.17	57291	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	123615164	135557	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20568.3>	10.65.62.17	2009	10.65.62.17	57075	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64423790	90660	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19644.3>	10.65.62.17	2009	10.65.62.17	56857	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67203912	93599	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17245.3>	10.65.62.17	2009	10.65.62.17	55756	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	116330362	130479	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15731.3>	10.65.62.17	2009	10.65.62.17	55027	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66781350	90263	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15142.3>	10.65.62.17	2009	10.65.62.17	54384	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	124705396	134867	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15102.3>	10.65.62.17	2009	10.65.62.17	54368	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45489357	64654	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25621.3>	10.65.62.17	2009	10.65.62.17	58974	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149726149	165632	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24996.3>	10.65.62.17	2009	10.65.62.17	58822	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	268402	514	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22892.3>	10.65.62.17	2009	10.65.62.17	57482	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	57766805	77136	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21966.3>	10.65.62.17	2009	10.65.62.17	57327	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	346585	711	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20452.3>	10.65.62.17	2009	10.65.62.17	57053	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149760173	149644	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19860.3>	10.65.62.17	2009	10.65.62.17	56908	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	151368543	153571	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15947.3>	10.65.62.17	2009	10.65.62.17	55162	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	107341860	123787	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15325.3>	10.65.62.17	2009	10.65.62.17	54607	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54273915	69683	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25208.3>	10.65.62.17	2009	10.65.62.17	58876	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39447958	59838	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22180.3>	10.65.62.17	2009	10.65.62.17	57359	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	53322970	70387	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16753.3>	10.65.62.17	2009	10.65.62.17	55580	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49636246	72693	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16163.3>	10.65.62.17	2009	10.65.62.17	55233	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44645018	67446	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15534.3>	10.65.62.17	2009	10.65.62.17	54856	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45859851	67741	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26014.3>	10.65.62.17	2009	10.65.62.17	59050	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	93944969	112803	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25424.3>	10.65.62.17	2009	10.65.62.17	58928	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	77169961	99607	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22396.3>	10.65.62.17	2009	10.65.62.17	57397	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149711420	165640	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21472.3>	10.65.62.17	2009	10.65.62.17	57236	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49154647	72128	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20292.3>	10.65.62.17	2009	10.65.62.17	57017	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	157925701	157637	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17274.3>	10.65.62.17	2009	10.65.62.17	55758	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	162471593	173904	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16969.3>	10.65.62.17	2009	10.65.62.17	55646	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	172251600	167400	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13941.3>	10.65.62.17	2009	10.65.62.17	54182	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39624780	59629	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25601.3>	10.65.62.17	2009	10.65.62.17	58969	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	59689828	82439	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24716.3>	10.65.62.17	2009	10.65.62.17	58753	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	114923814	128509	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14157.3>	10.65.62.17	2009	10.65.62.17	54235	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46060564	68990	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19800.3>	10.65.62.17	2009	10.65.62.17	56895	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	150510204	165977	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17362.3>	10.65.62.17	2009	10.65.62.17	55777	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	341644	653	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.17069.3>	10.65.62.17	2009	10.65.62.17	55687	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	183421913	176940	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15258.3>	10.65.62.17	2009	10.65.62.17	54520	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	570263	912	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14374.3>	10.65.62.17	2009	10.65.62.17	54282	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	234229	554	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14337.3>	10.65.62.17	2009	10.65.62.17	54278	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	311092	605	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25148.3>	10.65.62.17	2009	10.65.62.17	58861	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	152501053	153059	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14550.3>	10.65.62.17	2009	10.65.62.17	54302	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	77203222	97708	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26249.3>	10.65.62.17	2009	10.65.62.17	59108	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40140212	60924	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25364.3>	10.65.62.17	2009	10.65.62.17	58913	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	178604850	170497	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21412.3>	10.65.62.17	2009	10.65.62.17	57225	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	118178341	130443	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21120.3>	10.65.62.17	2009	10.65.62.17	57175	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	34208380	53251	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13881.3>	10.65.62.17	2009	10.65.62.17	54167	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	80562317	100886	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13586.3>	10.65.62.17	2009	10.65.62.17	54111	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	840	12	2609892160	5778191	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24656.3>	10.65.62.17	2009	10.65.62.17	58738	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	78426407	96533	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23144.3>	10.65.62.17	2009	10.65.62.17	57587	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	124234955	133939	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22848.3>	10.65.62.17	2009	10.65.62.17	57474	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58528175	84625	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22552.3>	10.65.62.17	2009	10.65.62.17	57421	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	154378945	153207	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21628.3>	10.65.62.17	2009	10.65.62.17	57269	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	168844208	177753	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16497.3>	10.65.62.17	2009	10.65.62.17	55410	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	56165058	75888	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14097.3>	10.65.62.17	2009	10.65.62.17	54221	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	260812	535	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24875.3>	10.65.62.17	2009	10.65.62.17	58791	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	171335983	165969	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16713.3>	10.65.62.17	2009	10.65.62.17	55560	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	125523196	135533	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16083.3>	10.65.62.17	2009	10.65.62.17	55206	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	313711	663	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15198.3>	10.65.62.17	2009	10.65.62.17	54416	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	323535	676	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14274.3>	10.65.62.17	2009	10.65.62.17	54264	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	112951991	128985	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21136.3>	10.65.62.17	2009	10.65.62.17	57179	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	251249	552	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19327.3>	10.65.62.17	2009	10.65.62.17	56779	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	82909264	103718	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19034.3>	10.65.62.17	2009	10.65.62.17	56705	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	141462963	146734	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16889.3>	10.65.62.17	2009	10.65.62.17	55614	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	182358944	176342	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15414.3>	10.65.62.17	2009	10.65.62.17	54703	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	88062519	105398	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13566.3>	10.65.62.17	2009	10.65.62.17	54096	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	838	12	3129	16	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25560.3>	10.65.62.17	2009	10.65.62.17	58960	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	198698	485	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19543.3>	10.65.62.17	2009	10.65.62.17	56829	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64267299	90283	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18914.3>	10.65.62.17	2009	10.65.62.17	56681	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	966	12	493	11	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15630.3>	10.65.62.17	2009	10.65.62.17	54939	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	108133145	125000	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14709.3>	10.65.62.17	2009	10.65.62.17	54318	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	117404555	132115	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14077.3>	10.65.62.17	2009	10.65.62.17	54216	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62745076	88240	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22748.3>	10.65.62.17	2009	10.65.62.17	57457	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47056432	67092	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17029.3>	10.65.62.17	2009	10.65.62.17	55673	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	109436632	126194	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16436.3>	10.65.62.17	2009	10.65.62.17	55371	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	100260700	117297	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25698.3>	10.65.62.17	2009	10.65.62.17	58990	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60037912	86949	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25068.3>	10.65.62.17	2009	10.65.62.17	58841	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42380319	63240	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22080.3>	10.65.62.17	2009	10.65.62.17	57344	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45375289	63938	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21784.3>	10.65.62.17	2009	10.65.62.17	57298	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	96550919	116260	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16023.3>	10.65.62.17	2009	10.65.62.17	55180	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	249388	541	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14214.3>	10.65.62.17	2009	10.65.62.17	54249	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	170102702	165476	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26208.3>	10.65.62.17	2009	10.65.62.17	59097	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	434304	777	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.23180.3>	10.65.62.17	2009	10.65.62.17	57614	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45168998	64216	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20152.3>	10.65.62.17	2009	10.65.62.17	56983	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	68848111	92845	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16829.3>	10.65.62.17	2009	10.65.62.17	55600	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	34789773	52619	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15610.3>	10.65.62.17	2009	10.65.62.17	54928	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	160548658	156475	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13801.3>	10.65.62.17	2009	10.65.62.17	54147	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43088479	65223	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13506.3>	10.65.62.17	2009	10.65.62.17	54067	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	369	8	1806835327	12654885	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25500.3>	10.65.62.17	2009	10.65.62.17	58949	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	193421149	180475	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20664.3>	10.65.62.17	2009	10.65.62.17	57093	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	101274195	118309	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17045.3>	10.65.62.17	2009	10.65.62.17	55681	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	196911779	184207	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14017.3>	10.65.62.17	2009	10.65.62.17	54201	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39725932	57888	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24796.3>	10.65.62.17	2009	10.65.62.17	58772	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	166116989	161043	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22688.3>	10.65.62.17	2009	10.65.62.17	57446	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45719423	67974	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20584.3>	10.65.62.17	2009	10.65.62.17	57080	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	75655146	97706	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15747.3>	10.65.62.17	2009	10.65.62.17	55052	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62837715	90131	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25933.3>	10.65.62.17	2009	10.65.62.17	59028	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	159858554	158341	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25637.3>	10.65.62.17	2009	10.65.62.17	58978	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	94019351	113891	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21980.3>	10.65.62.17	2009	10.65.62.17	57329	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42941372	59471	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20802.3>	10.65.62.17	2009	10.65.62.17	57120	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	158663865	160170	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19877.3>	10.65.62.17	2009	10.65.62.17	56912	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41180246	61968	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15334.3>	10.65.62.17	2009	10.65.62.17	54622	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	75095131	94002	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25224.3>	10.65.62.17	2009	10.65.62.17	58880	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	187228210	176240	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23120.3>	10.65.62.17	2009	10.65.62.17	57570	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66711590	91642	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22200.3>	10.65.62.17	2009	10.65.62.17	57361	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39690107	57684	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21016.3>	10.65.62.17	2009	10.65.62.17	57156	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60655493	83780	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19207.3>	10.65.62.17	2009	10.65.62.17	56749	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	115200529	128093	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16769.3>	10.65.62.17	2009	10.65.62.17	55584	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	108023706	123739	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16179.3>	10.65.62.17	2009	10.65.62.17	55265	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	113162823	127052	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26030.3>	10.65.62.17	2009	10.65.62.17	59054	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	123680859	133437	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25440.3>	10.65.62.17	2009	10.65.62.17	58933	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48562448	70096	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23336.3>	10.65.62.17	2009	10.65.62.17	57718	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70010502	94931	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20311.3>	10.65.62.17	2009	10.65.62.17	57019	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	348215	744	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13957.3>	10.65.62.17	2009	10.65.62.17	54186	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	105507939	122509	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24732.3>	10.65.62.17	2009	10.65.62.17	58757	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63162645	88894	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22628.3>	10.65.62.17	2009	10.65.62.17	57434	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	104899934	122623	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20524.3>	10.65.62.17	2009	10.65.62.17	57066	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	360174	702	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19600.3>	10.65.62.17	2009	10.65.62.17	56847	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42677558	62175	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16909.3>	10.65.62.17	2009	10.65.62.17	55616	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	303306	678	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.26167.3>	10.65.62.17	2009	10.65.62.17	59085	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	55879186	69012	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25880.3>	10.65.62.17	2009	10.65.62.17	59017	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	163745340	160761	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25833.3>	10.65.62.17	2009	10.65.62.17	59011	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	128940259	137368	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24948.3>	10.65.62.17	2009	10.65.62.17	58811	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	147103482	163614	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20740.3>	10.65.62.17	2009	10.65.62.17	57106	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40139338	61004	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19816.3>	10.65.62.17	2009	10.65.62.17	56901	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40396499	61055	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19527.3>	10.65.62.17	2009	10.65.62.17	56827	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67079583	87709	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19187.3>	10.65.62.17	2009	10.65.62.17	56744	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42894464	62377	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25460.3>	10.65.62.17	2009	10.65.62.17	58937	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	286934	629	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25164.3>	10.65.62.17	2009	10.65.62.17	58865	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	141325961	146514	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22136.3>	10.65.62.17	2009	10.65.62.17	57351	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	239400	557	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19407.3>	10.65.62.17	2009	10.65.62.17	56798	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51912456	68620	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22355.3>	10.65.62.17	2009	10.65.62.17	57390	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	144891569	150017	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21428.3>	10.65.62.17	2009	10.65.62.17	57227	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	270339	559	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20248.3>	10.65.62.17	2009	10.65.62.17	57005	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	133334897	140287	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16929.3>	10.65.62.17	2009	10.65.62.17	55627	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	105417497	124053	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15714.3>	10.65.62.17	2009	10.65.62.17	55010	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	145376419	146570	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13897.3>	10.65.62.17	2009	10.65.62.17	54171	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	364551	651	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24672.3>	10.65.62.17	2009	10.65.62.17	58742	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	166498388	162662	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21056.3>	10.65.62.17	2009	10.65.62.17	57165	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66757694	90742	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20724.3>	10.65.62.17	2009	10.65.62.17	57102	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	140592230	144754	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18953.3>	10.65.62.17	2009	10.65.62.17	56689	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	316048	638	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16512.3>	10.65.62.17	2009	10.65.62.17	55416	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	78101751	100977	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14113.3>	10.65.62.17	2009	10.65.62.17	54225	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	158127850	157194	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25773.3>	10.65.62.17	2009	10.65.62.17	59001	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	37744403	57481	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23040.3>	10.65.62.17	2009	10.65.62.17	57530	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	164962601	164795	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19127.3>	10.65.62.17	2009	10.65.62.17	56729	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	36129668	53805	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16099.3>	10.65.62.17	2009	10.65.62.17	55214	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	72171793	95254	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15214.3>	10.65.62.17	2009	10.65.62.17	54444	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42652295	60205	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14290.3>	10.65.62.17	2009	10.65.62.17	54268	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	113316753	127892	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25104.3>	10.65.62.17	2009	10.65.62.17	58850	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61288822	87966	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19972.3>	10.65.62.17	2009	10.65.62.17	56940	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70001418	92832	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16652.3>	10.65.62.17	2009	10.65.62.17	55533	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	148866972	151095	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14802.3>	10.65.62.17	2009	10.65.62.17	54330	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	165903863	163168	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25576.3>	10.65.62.17	2009	10.65.62.17	58963	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60381427	80867	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23472.3>	10.65.62.17	2009	10.65.62.17	57864	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	56502960	77150	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22292.3>	10.65.62.17	2009	10.65.62.17	57379	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110282798	124390	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21368.3>	10.65.62.17	2009	10.65.62.17	57219	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	112522694	126186	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19562.3>	10.65.62.17	2009	10.65.62.17	56837	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	381383	766	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18930.3>	10.65.62.17	2009	10.65.62.17	56685	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	299258	644	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17121.3>	10.65.62.17	2009	10.65.62.17	55713	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	69575549	94681	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14722.3>	10.65.62.17	2009	10.65.62.17	54319	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49869512	71709	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13837.3>	10.65.62.17	2009	10.65.62.17	54156	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	35647422	53936	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26087.3>	10.65.62.17	2009	10.65.62.17	59068	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	69095179	92531	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22766.3>	10.65.62.17	2009	10.65.62.17	57459	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	78770616	100195	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20072.3>	10.65.62.17	2009	10.65.62.17	56962	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64604789	90281	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15823.3>	10.65.62.17	2009	10.65.62.17	55101	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	106764363	124344	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14941.3>	10.65.62.17	2009	10.65.62.17	54347	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46273210	67593	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25713.3>	10.65.62.17	2009	10.65.62.17	58992	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61426777	80333	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22984.3>	10.65.62.17	2009	10.65.62.17	57497	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	96160127	114791	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20876.3>	10.65.62.17	2009	10.65.62.17	57132	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47010429	68115	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19952.3>	10.65.62.17	2009	10.65.62.17	56933	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63297377	89198	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19660.3>	10.65.62.17	2009	10.65.62.17	56861	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	118940573	129914	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19067.3>	10.65.62.17	2009	10.65.62.17	56714	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	33995254	52624	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16629.3>	10.65.62.17	2009	10.65.62.17	55514	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48480150	71101	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16039.3>	10.65.62.17	2009	10.65.62.17	55189	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	427628	769	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15154.3>	10.65.62.17	2009	10.65.62.17	54390	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	113754394	126861	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14230.3>	10.65.62.17	2009	10.65.62.17	54253	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	405964	752	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25304.3>	10.65.62.17	2009	10.65.62.17	58899	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41603501	59277	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13817.3>	10.65.62.17	2009	10.65.62.17	54151	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44962721	67706	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13522.3>	10.65.62.17	2009	10.65.62.17	54075	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	354	8	642415265	20086167	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25519.3>	10.65.62.17	2009	10.65.62.17	58951	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	88298747	110027	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23412.3>	10.65.62.17	2009	10.65.62.17	57785	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	99771809	118582	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22492.3>	10.65.62.17	2009	10.65.62.17	57412	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	160062371	172313	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21308.3>	10.65.62.17	2009	10.65.62.17	57206	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	93811533	113680	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20384.3>	10.65.62.17	2009	10.65.62.17	57037	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	113027642	125854	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19499.3>	10.65.62.17	2009	10.65.62.17	56822	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	126716302	135219	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18870.3>	10.65.62.17	2009	10.65.62.17	56670	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48268820	70453	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14033.3>	10.65.62.17	2009	10.65.62.17	54205	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	37869297	55606	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24808.3>	10.65.62.17	2009	10.65.62.17	58776	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	170043033	164925	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22704.3>	10.65.62.17	2009	10.65.62.17	57448	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54724986	69440	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19676.3>	10.65.62.17	2009	10.65.62.17	56866	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58250390	74128	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14546.3>	10.65.62.17	2009	10.65.62.17	54301	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	129498925	138176	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25950.3>	10.65.62.17	2009	10.65.62.17	59036	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	81622894	100999	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25653.3>	10.65.62.17	2009	10.65.62.17	58982	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	144588259	162330	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22920.3>	10.65.62.17	2009	10.65.62.17	57487	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	378176	637	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19892.3>	10.65.62.17	2009	10.65.62.17	56919	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	59094649	82780	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16570.3>	10.65.62.17	2009	10.65.62.17	55457	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	420527	735	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14170.3>	10.65.62.17	2009	10.65.62.17	54238	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49378108	69645	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25535.3>	10.65.62.17	2009	10.65.62.17	58954	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46544956	67273	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25243.3>	10.65.62.17	2009	10.65.62.17	58883	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	121575827	132708	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21920.3>	10.65.62.17	2009	10.65.62.17	57320	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	127217433	136504	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20108.3>	10.65.62.17	2009	10.65.62.17	56970	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64637320	91549	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19227.3>	10.65.62.17	2009	10.65.62.17	56753	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	107823411	122186	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17414.3>	10.65.62.17	2009	10.65.62.17	55808	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61952077	87808	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16202.3>	10.65.62.17	2009	10.65.62.17	55269	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	52856595	78348	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15567.3>	10.65.62.17	2009	10.65.62.17	54906	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45272335	64346	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13757.3>	10.65.62.17	2009	10.65.62.17	54136	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	59338405	86581	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26046.3>	10.65.62.17	2009	10.65.62.17	59059	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	36241808	55259	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21504.3>	10.65.62.17	2009	10.65.62.17	57244	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	75385715	93431	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20324.3>	10.65.62.17	2009	10.65.62.17	57023	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	116169563	128744	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17001.3>	10.65.62.17	2009	10.65.62.17	55661	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46450921	61588	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13973.3>	10.65.62.17	2009	10.65.62.17	54190	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60560397	86622	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13678.3>	10.65.62.17	2009	10.65.62.17	54126	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	875	12	480	11	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25380.3>	10.65.62.17	2009	10.65.62.17	58915	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	134216662	143188	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24748.3>	10.65.62.17	2009	10.65.62.17	58761	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	158061836	155522	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21720.3>	10.65.62.17	2009	10.65.62.17	57286	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46554269	69402	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19624.3>	10.65.62.17	2009	10.65.62.17	56850	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	309573	590	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15075.3>	10.65.62.17	2009	10.65.62.17	54365	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38823758	58651	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14785.3>	10.65.62.17	2009	10.65.62.17	54328	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	72427720	94762	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26183.3>	10.65.62.17	2009	10.65.62.17	59091	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	59186772	85321	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25852.3>	10.65.62.17	2009	10.65.62.17	59014	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	170532438	166793	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21940.3>	10.65.62.17	2009	10.65.62.17	57322	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	96908269	115516	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20756.3>	10.65.62.17	2009	10.65.62.17	57110	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	207545	574	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.17394.3>	10.65.62.17	2009	10.65.62.17	55797	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	106516505	122637	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16214.3>	10.65.62.17	2009	10.65.62.17	55272	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62743547	88438	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15923.3>	10.65.62.17	2009	10.65.62.17	55149	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48281654	66908	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15586.3>	10.65.62.17	2009	10.65.62.17	54911	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	117482694	131394	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15290.3>	10.65.62.17	2009	10.65.62.17	54570	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	59256091	82474	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26066.3>	10.65.62.17	2009	10.65.62.17	59064	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46811348	69892	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25180.3>	10.65.62.17	2009	10.65.62.17	58867	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	184244136	174842	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23077.3>	10.65.62.17	2009	10.65.62.17	57554	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	160469042	157090	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21235.3>	10.65.62.17	2009	10.65.62.17	57195	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	132394863	139881	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20048.3>	10.65.62.17	2009	10.65.62.17	56957	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	358455	665	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19756.3>	10.65.62.17	2009	10.65.62.17	56884	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39005750	56620	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16729.3>	10.65.62.17	2009	10.65.62.17	55561	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	154385133	154962	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25396.3>	10.65.62.17	2009	10.65.62.17	58920	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45059057	66939	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20264.3>	10.65.62.17	2009	10.65.62.17	57010	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	107274889	123183	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19343.3>	10.65.62.17	2009	10.65.62.17	56782	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	37659152	56145	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13913.3>	10.65.62.17	2009	10.65.62.17	54175	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	225766	518	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24688.3>	10.65.62.17	2009	10.65.62.17	58746	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51484610	71915	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22584.3>	10.65.62.17	2009	10.65.62.17	57425	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	55682912	83728	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21660.3>	10.65.62.17	2009	10.65.62.17	57273	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51019969	72576	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18966.3>	10.65.62.17	2009	10.65.62.17	56693	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	162879200	159040	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14129.3>	10.65.62.17	2009	10.65.62.17	54229	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	281491	639	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19772.3>	10.65.62.17	2009	10.65.62.17	56890	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	113075968	128092	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19143.3>	10.65.62.17	2009	10.65.62.17	56733	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	328905	644	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14306.3>	10.65.62.17	2009	10.65.62.17	54272	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	81062359	101417	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25120.3>	10.65.62.17	2009	10.65.62.17	58854	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	181457719	172513	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23312.3>	10.65.62.17	2009	10.65.62.17	57703	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	102518636	119599	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22095.3>	10.65.62.17	2009	10.65.62.17	57346	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43505418	65834	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19988.3>	10.65.62.17	2009	10.65.62.17	56944	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	255883	551	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19359.3>	10.65.62.17	2009	10.65.62.17	56787	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66960156	87458	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17550.3>	10.65.62.17	2009	10.65.62.17	55843	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44980492	66308	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15446.3>	10.65.62.17	2009	10.65.62.17	54752	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	137450119	143888	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22309.3>	10.65.62.17	2009	10.65.62.17	57383	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	496663	749	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19575.3>	10.65.62.17	2009	10.65.62.17	56839	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	53986510	73668	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13853.3>	10.65.62.17	2009	10.65.62.17	54160	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153099770	167802	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20676.3>	10.65.62.17	2009	10.65.62.17	57096	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	160723055	157512	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13735.3>	10.65.62.17	2009	10.65.62.17	54134	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	805	12	1680629937	4650336	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25729.3>	10.65.62.17	2009	10.65.62.17	58994	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	145646390	147786	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24844.3>	10.65.62.17	2009	10.65.62.17	58785	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	115622151	128428	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19968.3>	10.65.62.17	2009	10.65.62.17	56939	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	105040945	122410	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19083.3>	10.65.62.17	2009	10.65.62.17	56718	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	156759597	159218	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16350.3>	10.65.62.17	2009	10.65.62.17	55341	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	131149196	138593	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14246.3>	10.65.62.17	2009	10.65.62.17	54257	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44569562	61787	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25316.3>	10.65.62.17	2009	10.65.62.17	58901	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44758903	63125	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25024.3>	10.65.62.17	2009	10.65.62.17	58828	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65071654	89507	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23508.3>	10.65.62.17	2009	10.65.62.17	57895	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	88673290	109992	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23212.3>	10.65.62.17	2009	10.65.62.17	57640	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50015060	72196	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20184.3>	10.65.62.17	2009	10.65.62.17	56992	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	98477099	117472	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19299.3>	10.65.62.17	2009	10.65.62.17	56772	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153232851	153784	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17490.3>	10.65.62.17	2009	10.65.62.17	55826	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	120112822	132869	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13538.3>	10.65.62.17	2009	10.65.62.17	54081	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	360	8	642415267	20086167	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20696.3>	10.65.62.17	2009	10.65.62.17	57098	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	174497589	168913	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19515.3>	10.65.62.17	2009	10.65.62.17	56826	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43874786	66427	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17077.3>	10.65.62.17	2009	10.65.62.17	55696	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47994967	65090	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14049.3>	10.65.62.17	2009	10.65.62.17	54209	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49532485	70487	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25749.3>	10.65.62.17	2009	10.65.62.17	58997	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	139328188	146340	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25160.3>	10.65.62.17	2009	10.65.62.17	58863	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63374765	88618	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19692.3>	10.65.62.17	2009	10.65.62.17	56869	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	109052629	124236	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14898.3>	10.65.62.17	2009	10.65.62.17	54341	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	350986	728	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25669.3>	10.65.62.17	2009	10.65.62.17	58985	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64723015	90924	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25040.3>	10.65.62.17	2009	10.65.62.17	58833	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	152973151	167547	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22936.3>	10.65.62.17	2009	10.65.62.17	57489	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48095054	70426	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19908.3>	10.65.62.17	2009	10.65.62.17	56923	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	406332	762	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19023.3>	10.65.62.17	2009	10.65.62.17	56702	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	61216305	80619	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14482.3>	10.65.62.17	2009	10.65.62.17	54294	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	171431087	179894	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14186.3>	10.65.62.17	2009	10.65.62.17	54242	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	73623942	98113	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25256.3>	10.65.62.17	2009	10.65.62.17	58888	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48407946	70993	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22228.3>	10.65.62.17	2009	10.65.62.17	57367	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	114784430	127918	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21344.3>	10.65.62.17	2009	10.65.62.17	57212	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	175508	467	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20124.3>	10.65.62.17	2009	10.65.62.17	56978	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	157590005	157173	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19832.3>	10.65.62.17	2009	10.65.62.17	56903	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62894168	88068	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19239.3>	10.65.62.17	2009	10.65.62.17	56757	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48769028	68099	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17430.3>	10.65.62.17	2009	10.65.62.17	55815	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	343383	648	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16804.3>	10.65.62.17	2009	10.65.62.17	55592	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	72784198	94498	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13773.3>	10.65.62.17	2009	10.65.62.17	54140	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65336211	91877	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25472.3>	10.65.62.17	2009	10.65.62.17	58939	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	91838769	112236	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23368.3>	10.65.62.17	2009	10.65.62.17	57742	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	193179248	183280	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21267.3>	10.65.62.17	2009	10.65.62.17	57201	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	178000542	171147	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20340.3>	10.65.62.17	2009	10.65.62.17	57028	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40329742	59458	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17017.3>	10.65.62.17	2009	10.65.62.17	55670	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48424147	68776	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13989.3>	10.65.62.17	2009	10.65.62.17	54194	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	148687642	152057	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24764.3>	10.65.62.17	2009	10.65.62.17	58765	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	80213615	99692	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17233.3>	10.65.62.17	2009	10.65.62.17	55754	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63154649	88197	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25612.3>	10.65.62.17	2009	10.65.62.17	58971	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	144024786	161634	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25572.3>	10.65.62.17	2009	10.65.62.17	58962	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	251750	585	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24980.3>	10.65.62.17	2009	10.65.62.17	58818	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	35192335	54157	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21956.3>	10.65.62.17	2009	10.65.62.17	57324	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	140558247	159617	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20776.3>	10.65.62.17	2009	10.65.62.17	57112	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64817218	86438	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17410.3>	10.65.62.17	2009	10.65.62.17	55807	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	71804824	91115	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16230.3>	10.65.62.17	2009	10.65.62.17	55279	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	153113910	154271	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15938.3>	10.65.62.17	2009	10.65.62.17	55156	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45077383	66097	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14430.3>	10.65.62.17	2009	10.65.62.17	54287	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43468469	62665	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25199.3>	10.65.62.17	2009	10.65.62.17	58873	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	150487790	165883	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21284.3>	10.65.62.17	2009	10.65.62.17	57203	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48506140	64067	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20064.3>	10.65.62.17	2009	10.65.62.17	56961	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	310116	612	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19435.3>	10.65.62.17	2009	10.65.62.17	56804	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41857319	59433	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16741.3>	10.65.62.17	2009	10.65.62.17	55568	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43246575	62344	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16151.3>	10.65.62.17	2009	10.65.62.17	55229	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	303301	656	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14342.3>	10.65.62.17	2009	10.65.62.17	54279	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	336339	614	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25412.3>	10.65.62.17	2009	10.65.62.17	58922	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	137167847	142153	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22384.3>	10.65.62.17	2009	10.65.62.17	57394	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	146642553	149765	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20280.3>	10.65.62.17	2009	10.65.62.17	57015	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	123762114	134277	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16957.3>	10.65.62.17	2009	10.65.62.17	55639	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62118003	88315	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14814.3>	10.65.62.17	2009	10.65.62.17	54331	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	293868	647	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13929.3>	10.65.62.17	2009	10.65.62.17	54179	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70899749	88020	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25589.3>	10.65.62.17	2009	10.65.62.17	58965	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	113196317	126906	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24704.3>	10.65.62.17	2009	10.65.62.17	58750	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	172715367	165924	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22272.3>	10.65.62.17	2009	10.65.62.17	57374	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	310907	650	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21676.3>	10.65.62.17	2009	10.65.62.17	57275	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	69625615	96545	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18982.3>	10.65.62.17	2009	10.65.62.17	56697	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	161447886	160067	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15030.3>	10.65.62.17	2009	10.65.62.17	54357	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	128808425	138338	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14145.3>	10.65.62.17	2009	10.65.62.17	54233	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	164392721	164434	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26139.3>	10.65.62.17	2009	10.65.62.17	59079	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39399210	60331	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25805.3>	10.65.62.17	2009	10.65.62.17	59006	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	227344	520	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22816.3>	10.65.62.17	2009	10.65.62.17	57468	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62066586	80793	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20968.3>	10.65.62.17	2009	10.65.62.17	57146	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	158294513	158060	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19788.3>	10.65.62.17	2009	10.65.62.17	56893	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45482461	65134	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19162.3>	10.65.62.17	2009	10.65.62.17	56736	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	151008173	166541	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17356.3>	10.65.62.17	2009	10.65.62.17	55773	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	168399001	167018	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15246.3>	10.65.62.17	2009	10.65.62.17	54498	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42977342	60976	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14322.3>	10.65.62.17	2009	10.65.62.17	54276	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64678538	89129	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23288.3>	10.65.62.17	2009	10.65.62.17	57688	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44100709	63201	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20007.3>	10.65.62.17	2009	10.65.62.17	56948	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	124704055	136324	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17566.3>	10.65.62.17	2009	10.65.62.17	55851	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	119753390	133226	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16681.3>	10.65.62.17	2009	10.65.62.17	55540	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	271836	618	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15462.3>	10.65.62.17	2009	10.65.62.17	54780	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	102911000	119951	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25352.3>	10.65.62.17	2009	10.65.62.17	58911	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38712027	59086	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22324.3>	10.65.62.17	2009	10.65.62.17	57385	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149085287	165083	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22032.3>	10.65.62.17	2009	10.65.62.17	57336	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	308608	583	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21696.3>	10.65.62.17	2009	10.65.62.17	57281	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41497922	62769	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19591.3>	10.65.62.17	2009	10.65.62.17	56843	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	310967	665	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13869.3>	10.65.62.17	2009	10.65.62.17	54164	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110476927	123807	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13574.3>	10.65.62.17	2009	10.65.62.17	54102	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	971	12	21333472	32673	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24644.3>	10.65.62.17	2009	10.65.62.17	58735	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43539341	66074	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22504.3>	10.65.62.17	2009	10.65.62.17	57414	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	179353475	174068	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21616.3>	10.65.62.17	2009	10.65.62.17	57265	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	131241695	138982	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16484.3>	10.65.62.17	2009	10.65.62.17	55395	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54621624	70609	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15857.3>	10.65.62.17	2009	10.65.62.17	55114	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65617512	90492	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15562.3>	10.65.62.17	2009	10.65.62.17	54895	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	73418224	96127	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15266.3>	10.65.62.17	2009	10.65.62.17	54529	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42968111	62406	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14085.3>	10.65.62.17	2009	10.65.62.17	54218	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70825647	96955	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23012.3>	10.65.62.17	2009	10.65.62.17	57511	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	69803047	93030	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21832.3>	10.65.62.17	2009	10.65.62.17	57304	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	99422586	118695	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19731.3>	10.65.62.17	2009	10.65.62.17	56877	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	99180379	116415	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16071.3>	10.65.62.17	2009	10.65.62.17	55199	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	272878	649	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15189.3>	10.65.62.17	2009	10.65.62.17	54410	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	111621891	126001	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14262.3>	10.65.62.17	2009	10.65.62.17	54261	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49930007	72750	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25332.3>	10.65.62.17	2009	10.65.62.17	58907	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	104971730	122190	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21127.3>	10.65.62.17	2009	10.65.62.17	57178	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46707016	68905	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19612.3>	10.65.62.17	2009	10.65.62.17	56848	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	160682374	159745	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17506.3>	10.65.62.17	2009	10.65.62.17	55830	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	37743480	57395	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15402.3>	10.65.62.17	2009	10.65.62.17	54684	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	310151	595	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13554.3>	10.65.62.17	2009	10.65.62.17	54085	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	360	8	654954530	20110666	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25548.3>	10.65.62.17	2009	10.65.62.17	58957	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43349276	65700	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23444.3>	10.65.62.17	2009	10.65.62.17	57817	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	275784	637	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22520.3>	10.65.62.17	2009	10.65.62.17	57416	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	189767111	177790	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20712.3>	10.65.62.17	2009	10.65.62.17	57101	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	37168238	55699	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20416.3>	10.65.62.17	2009	10.65.62.17	57043	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43526917	65433	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19537.3>	10.65.62.17	2009	10.65.62.17	56828	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58020221	85410	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18902.3>	10.65.62.17	2009	10.65.62.17	56678	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38252983	56012	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17096.3>	10.65.62.17	2009	10.65.62.17	55697	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	350157	748	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14065.3>	10.65.62.17	2009	10.65.62.17	54213	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67664416	85871	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21556.3>	10.65.62.17	2009	10.65.62.17	57255	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	155751596	169349	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19708.3>	10.65.62.17	2009	10.65.62.17	56874	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	126288006	135958	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16427.3>	10.65.62.17	2009	10.65.62.17	55368	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49056325	71402	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16091.3>	10.65.62.17	2009	10.65.62.17	55210	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	87379165	102427	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15795.3>	10.65.62.17	2009	10.65.62.17	55076	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	101674115	120373	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14914.3>	10.65.62.17	2009	10.65.62.17	54343	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50420839	71702	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13691.3>	10.65.62.17	2009	10.65.62.17	54133	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	391	10	352	9	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25685.3>	10.65.62.17	2009	10.65.62.17	58987	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	68429951	94143	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25056.3>	10.65.62.17	2009	10.65.62.17	58838	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	106567800	122883	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21777.3>	10.65.62.17	2009	10.65.62.17	57295	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	52737763	68077	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20848.3>	10.65.62.17	2009	10.65.62.17	57127	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60208453	86663	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19924.3>	10.65.62.17	2009	10.65.62.17	56928	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	177474775	169952	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16602.3>	10.65.62.17	2009	10.65.62.17	55476	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63904464	91707	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16306.3>	10.65.62.17	2009	10.65.62.17	55304	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	69729797	95247	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14202.3>	10.65.62.17	2009	10.65.62.17	54246	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58711876	82033	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25272.3>	10.65.62.17	2009	10.65.62.17	58891	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	279280	634	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.23168.3>	10.65.62.17	2009	10.65.62.17	57606	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	96217038	116322	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20143.3>	10.65.62.17	2009	10.65.62.17	56981	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	135049934	140038	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19848.3>	10.65.62.17	2009	10.65.62.17	56906	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	71329387	95127	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19255.3>	10.65.62.17	2009	10.65.62.17	56761	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	233696	522	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.17446.3>	10.65.62.17	2009	10.65.62.17	55819	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	319364	560	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15598.3>	10.65.62.17	2009	10.65.62.17	54920	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64387605	89755	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13789.3>	10.65.62.17	2009	10.65.62.17	54144	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	300573	613	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.26078.3>	10.65.62.17	2009	10.65.62.17	59066	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43891228	62554	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25488.3>	10.65.62.17	2009	10.65.62.17	58943	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47668708	64610	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17033.3>	10.65.62.17	2009	10.65.62.17	55677	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	60297150	86391	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14638.3>	10.65.62.17	2009	10.65.62.17	54312	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44078470	63393	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14005.3>	10.65.62.17	2009	10.65.62.17	54198	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	356724	657	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24780.3>	10.65.62.17	2009	10.65.62.17	58769	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	106081634	123712	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22680.3>	10.65.62.17	2009	10.65.62.17	57443	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	179109452	172018	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20572.3>	10.65.62.17	2009	10.65.62.17	57076	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	155202992	157805	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19648.3>	10.65.62.17	2009	10.65.62.17	56858	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	83848874	99147	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17250.3>	10.65.62.17	2009	10.65.62.17	55757	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	100139549	118328	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15735.3>	10.65.62.17	2009	10.65.62.17	55038	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	253164	585	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15109.3>	10.65.62.17	2009	10.65.62.17	54372	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110856403	126766	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25920.3>	10.65.62.17	2009	10.65.62.17	59026	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	273108	588	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25625.3>	10.65.62.17	2009	10.65.62.17	58975	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	79383473	101906	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23188.3>	10.65.62.17	2009	10.65.62.17	57619	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44866724	66924	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20788.3>	10.65.62.17	2009	10.65.62.17	57116	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	100151165	118909	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19864.3>	10.65.62.17	2009	10.65.62.17	56910	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	381961	694	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16541.3>	10.65.62.17	2009	10.65.62.17	55434	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51786861	69065	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21004.3>	10.65.62.17	2009	10.65.62.17	57152	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	123251238	134687	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19451.3>	10.65.62.17	2009	10.65.62.17	56809	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	148381162	150647	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16757.3>	10.65.62.17	2009	10.65.62.17	55581	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49637692	69382	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16167.3>	10.65.62.17	2009	10.65.62.17	55235	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	103061988	121346	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15538.3>	10.65.62.17	2009	10.65.62.17	54867	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	68722740	88938	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26313.3>	10.65.62.17	2009	10.65.62.17	59121	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45310885	67140	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26018.3>	10.65.62.17	2009	10.65.62.17	59051	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	140088675	143771	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25429.3>	10.65.62.17	2009	10.65.62.17	58929	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	111337162	124457	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22404.3>	10.65.62.17	2009	10.65.62.17	57398	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	110105165	125042	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21815.3>	10.65.62.17	2009	10.65.62.17	57302	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	302062	639	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16973.3>	10.65.62.17	2009	10.65.62.17	55647	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	282655	560	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14830.3>	10.65.62.17	2009	10.65.62.17	54334	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	216192	466	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13945.3>	10.65.62.17	2009	10.65.62.17	54183	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64177715	81944	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24720.3>	10.65.62.17	2009	10.65.62.17	58754	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39810981	57551	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22616.3>	10.65.62.17	2009	10.65.62.17	57432	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	86490649	104407	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21988.3>	10.65.62.17	2009	10.65.62.17	57330	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62061151	83816	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20512.3>	10.65.62.17	2009	10.65.62.17	57062	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	206739040	192089	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18999.3>	10.65.62.17	2009	10.65.62.17	56700	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47306861	70218	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17189.3>	10.65.62.17	2009	10.65.62.17	55727	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	57122195	84720	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15046.3>	10.65.62.17	2009	10.65.62.17	54360	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	220962	536	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26155.3>	10.65.62.17	2009	10.65.62.17	59082	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66361179	90524	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25860.3>	10.65.62.17	2009	10.65.62.17	59015	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	368067	683	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24936.3>	10.65.62.17	2009	10.65.62.17	58807	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	125091715	136916	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21908.3>	10.65.62.17	2009	10.65.62.17	57317	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	83113415	104792	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21024.3>	10.65.62.17	2009	10.65.62.17	57158	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	54115449	71273	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20991.3>	10.65.62.17	2009	10.65.62.17	57148	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	117231325	132463	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19804.3>	10.65.62.17	2009	10.65.62.17	56896	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47075295	69419	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19175.3>	10.65.62.17	2009	10.65.62.17	56741	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	51983018	73261	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25152.3>	10.65.62.17	2009	10.65.62.17	58862	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	115507754	129986	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23049.3>	10.65.62.17	2009	10.65.62.17	57538	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45626059	67852	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22124.3>	10.65.62.17	2009	10.65.62.17	57350	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	141667017	144626	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20020.3>	10.65.62.17	2009	10.65.62.17	56951	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	155718548	155885	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15478.3>	10.65.62.17	2009	10.65.62.17	54798	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47296681	65631	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14554.3>	10.65.62.17	2009	10.65.62.17	54303	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	334802	657	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.23520.3>	10.65.62.17	2009	10.65.62.17	57906	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58129023	86952	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22340.3>	10.65.62.17	2009	10.65.62.17	57387	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	148087336	164234	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16880.3>	10.65.62.17	2009	10.65.62.17	55612	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	337669	638	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20924.3>	10.65.62.17	2009	10.65.62.17	57139	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	65132326	89886	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14278.3>	10.65.62.17	2009	10.65.62.17	54265	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46793450	67441	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17522.3>	10.65.62.17	2009	10.65.62.17	55837	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38895713	55726	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13613.3>	10.65.62.17	2009	10.65.62.17	54120	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	861	12	478	11	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25564.3>	10.65.62.17	2009	10.65.62.17	58961	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	155417043	168984	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21652.3>	10.65.62.17	2009	10.65.62.17	57272	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	160770885	158523	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21357.3>	10.65.62.17	2009	10.65.62.17	57216	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46548773	69509	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18918.3>	10.65.62.17	2009	10.65.62.17	56682	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	917	12	2609658294	5777674	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22752.3>	10.65.62.17	2009	10.65.62.17	57458	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50070150	71842	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21572.3>	10.65.62.17	2009	10.65.62.17	57257	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	72154958	91691	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15811.3>	10.65.62.17	2009	10.65.62.17	55097	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38126252	59063	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14926.3>	10.65.62.17	2009	10.65.62.17	54345	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	119102885	131642	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22968.3>	10.65.62.17	2009	10.65.62.17	57495	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	270253	599	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19055.3>	10.65.62.17	2009	10.65.62.17	56711	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	242247	566	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16617.3>	10.65.62.17	2009	10.65.62.17	55492	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	295425	650	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16326.3>	10.65.62.17	2009	10.65.62.17	55318	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	194675679	181819	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16027.3>	10.65.62.17	2009	10.65.62.17	55181	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	156113120	157226	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20156.3>	10.65.62.17	2009	10.65.62.17	56984	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	272912	541	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.19271.3>	10.65.62.17	2009	10.65.62.17	56765	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	297679	628	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16833.3>	10.65.62.17	2009	10.65.62.17	55602	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67043973	92122	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13805.3>	10.65.62.17	2009	10.65.62.17	54148	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64096325	89074	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13510.3>	10.65.62.17	2009	10.65.62.17	54068	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	369	8	1373815177	11768348	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20084.3>	10.65.62.17	2009	10.65.62.17	56965	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48833218	68599	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19487.3>	10.65.62.17	2009	10.65.62.17	56819	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64505007	89681	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17049.3>	10.65.62.17	2009	10.65.62.17	55682	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	58995345	82452	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16464.3>	10.65.62.17	2009	10.65.62.17	55385	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	184568236	175337	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14021.3>	10.65.62.17	2009	10.65.62.17	54202	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	44192502	62691	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25016.3>	10.65.62.17	2009	10.65.62.17	58827	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47945666	70409	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25523.3>	10.65.62.17	2009	10.65.62.17	58952	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	398362	664	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25228.3>	10.65.62.17	2009	10.65.62.17	58881	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46914199	68358	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21316.3>	10.65.62.17	2009	10.65.62.17	57208	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	261383	534	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.26034.3>	10.65.62.17	2009	10.65.62.17	59055	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	170773797	166002	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25444.3>	10.65.62.17	2009	10.65.62.17	58934	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66880359	90713	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15699.3>	10.65.62.17	2009	10.65.62.17	55006	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	315833	585	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.26171.3>	10.65.62.17	2009	10.65.62.17	59086	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62349200	87117	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19820.3>	10.65.62.17	2009	10.65.62.17	56902	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	149060939	165185	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17382.3>	10.65.62.17	2009	10.65.62.17	55782	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49376612	64028	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15907.3>	10.65.62.17	2009	10.65.62.17	55141	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	280724	611	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23064.3>	10.65.62.17	2009	10.65.62.17	57547	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	201306	472	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.21216.3>	10.65.62.17	2009	10.65.62.17	57193	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50931775	67446	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13901.3>	10.65.62.17	2009	10.65.62.17	54172	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	282502	567	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24676.3>	10.65.62.17	2009	10.65.62.17	58743	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	139121385	146144	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20764.3>	10.65.62.17	2009	10.65.62.17	57111	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42023586	60693	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14117.3>	10.65.62.17	2009	10.65.62.17	54226	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	155363979	154518	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25780.3>	10.65.62.17	2009	10.65.62.17	59002	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	85659130	105949	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24892.3>	10.65.62.17	2009	10.65.62.17	58797	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	150673832	165823	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19131.3>	10.65.62.17	2009	10.65.62.17	56730	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	317418	672	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.15218.3>	10.65.62.17	2009	10.65.62.17	54455	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	117046454	131177	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25993.3>	10.65.62.17	2009	10.65.62.17	59045	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	322628	663	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.25108.3>	10.65.62.17	2009	10.65.62.17	58851	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63788383	88433	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19347.3>	10.65.62.17	2009	10.65.62.17	56783	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	68008126	88471	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15434.3>	10.65.62.17	2009	10.65.62.17	54734	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	181066115	173615	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17125.3>	10.65.62.17	2009	10.65.62.17	55716	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	85448950	103734	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15650.3>	10.65.62.17	2009	10.65.62.17	54950	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	138540165	144671	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23400.3>	10.65.62.17	2009	10.65.62.17	57762	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49871263	71757	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25088.3>	10.65.62.17	2009	10.65.62.17	58844	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63339326	91266	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14234.3>	10.65.62.17	2009	10.65.62.17	54254	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	307238	632	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21096.3>	10.65.62.17	2009	10.65.62.17	57170	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	390927	755	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.17478.3>	10.65.62.17	2009	10.65.62.17	55822	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64799643	89449	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14453.3>	10.65.62.17	2009	10.65.62.17	54291	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45156150	66472	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25821.3>	10.65.62.17	2009	10.65.62.17	59009	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42616310	58484	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18874.3>	10.65.62.17	2009	10.65.62.17	56671	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	152420567	154151	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22708.3>	10.65.62.17	2009	10.65.62.17	57451	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47484693	69770	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21528.3>	10.65.62.17	2009	10.65.62.17	57250	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	161710594	173270	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16063.3>	10.65.62.17	2009	10.65.62.17	55196	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	76644401	92470	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25657.3>	10.65.62.17	2009	10.65.62.17	58983	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	41257221	58289	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22925.3>	10.65.62.17	2009	10.65.62.17	57488	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64504458	87867	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16278.3>	10.65.62.17	2009	10.65.62.17	55291	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	121942176	134466	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15986.3>	10.65.62.17	2009	10.65.62.17	55169	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	167672017	177347	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20112.3>	10.65.62.17	2009	10.65.62.17	56973	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	287535	647	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.13761.3>	10.65.62.17	2009	10.65.62.17	54137	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66246453	87022	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20328.3>	10.65.62.17	2009	10.65.62.17	57024	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	93186194	109677	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17005.3>	10.65.62.17	2009	10.65.62.17	55663	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	47653260	68860	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13977.3>	10.65.62.17	2009	10.65.62.17	54191	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	55785145	79607	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13682.3>	10.65.62.17	2009	10.65.62.17	54129	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	873	12	479	11	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.24752.3>	10.65.62.17	2009	10.65.62.17	58762	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	92521314	112681	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17221.3>	10.65.62.17	2009	10.65.62.17	55738	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43000473	59282	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24971.3>	10.65.62.17	2009	10.65.62.17	58815	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	124157889	134589	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15294.3>	10.65.62.17	2009	10.65.62.17	54579	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49281670	66534	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15002.3>	10.65.62.17	2009	10.65.62.17	54354	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	64794436	89125	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22452.3>	10.65.62.17	2009	10.65.62.17	57405	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	142965491	161228	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15510.3>	10.65.62.17	2009	10.65.62.17	54826	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46350426	65207	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25402.3>	10.65.62.17	2009	10.65.62.17	58921	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	45379579	62243	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22372.3>	10.65.62.17	2009	10.65.62.17	57392	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	194287799	184207	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.18970.3>	10.65.62.17	2009	10.65.62.17	56695	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	56356338	72117	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26127.3>	10.65.62.17	2009	10.65.62.17	59076	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	163559651	160100	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20956.3>	10.65.62.17	2009	10.65.62.17	57142	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	332703	655	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19776.3>	10.65.62.17	2009	10.65.62.17	56891	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	63519658	91066	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14310.3>	10.65.62.17	2009	10.65.62.17	54273	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	182255333	174265	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19992.3>	10.65.62.17	2009	10.65.62.17	56945	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	37518243	54833	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17561.3>	10.65.62.17	2009	10.65.62.17	55847	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	50578157	72009	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16670.3>	10.65.62.17	2009	10.65.62.17	55535	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	264928	549	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14530.3>	10.65.62.17	2009	10.65.62.17	54299	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	172497582	168115	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21388.3>	10.65.62.17	2009	10.65.62.17	57221	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	186918	452	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.14742.3>	10.65.62.17	2009	10.65.62.17	54323	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	67482857	94219	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13857.3>	10.65.62.17	2009	10.65.62.17	54161	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	91994784	112533	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26111.3>	10.65.62.17	2009	10.65.62.17	59073	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	229275	593	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22784.3>	10.65.62.17	2009	10.65.62.17	57464	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	111635276	126773	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21604.3>	10.65.62.17	2009	10.65.62.17	57264	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	71636465	94576	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.15843.3>	10.65.62.17	2009	10.65.62.17	55109	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	68265203	92069	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23000.3>	10.65.62.17	2009	10.65.62.17	57499	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	90003010	110006	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21824.3>	10.65.62.17	2009	10.65.62.17	57303	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	42357933	64538	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19087.3>	10.65.62.17	2009	10.65.62.17	56719	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	125316414	134763	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16357.3>	10.65.62.17	2009	10.65.62.17	55342	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	145578113	163013	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25360.3>	10.65.62.17	2009	10.65.62.17	58912	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	38208011	56846	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22036.3>	10.65.62.17	2009	10.65.62.17	57337	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	171157064	164401	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20188.3>	10.65.62.17	2009	10.65.62.17	56994	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	70049576	80843	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19303.3>	10.65.62.17	2009	10.65.62.17	56773	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	163329548	163067	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.13542.3>	10.65.62.17	2009	10.65.62.17	54082	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	360	8	634024449	20068638	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20404.3>	10.65.62.17	2009	10.65.62.17	57041	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	46549332	64524	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14053.3>	10.65.62.17	2009	10.65.62.17	54210	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	142299969	160764	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.24828.3>	10.65.62.17	2009	10.65.62.17	58781	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	292636	611	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.20620.3>	10.65.62.17	2009	10.65.62.17	57086	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	164736713	162390	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.17298.3>	10.65.62.17	2009	10.65.62.17	55761	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	123239229	133672	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25044.3>	10.65.62.17	2009	10.65.62.17	58834	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	347394	648	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22016.3>	10.65.62.17	2009	10.65.62.17	57333	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39211889	56532	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.20836.3>	10.65.62.17	2009	10.65.62.17	57124	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	103105686	119336	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14190.3>	10.65.62.17	2009	10.65.62.17	54243	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	159177736	171646	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14406.3>	10.65.62.17	2009	10.65.62.17	54285	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	100373021	119678	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25476.3>	10.65.62.17	2009	10.65.62.17	58940	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	62794265	87910	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19423.3>	10.65.62.17	2009	10.65.62.17	56802	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	129788530	136474	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.14623.3>	10.65.62.17	2009	10.65.62.17	54311	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	39487197	58486	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25693.3>	10.65.62.17	2009	10.65.62.17	58989	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	40940284	61284	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.23256.3>	10.65.62.17	2009	10.65.62.17	57670	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	43334223	59113	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19636.3>	10.65.62.17	2009	10.65.62.17	56853	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	146275453	163175	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.26204.3>	10.65.62.17	2009	10.65.62.17	59095	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	158049356	156975	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.25908.3>	10.65.62.17	2009	10.65.62.17	59022	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	200755401	184715	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.22880.3>	10.65.62.17	2009	10.65.62.17	57479	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	49584547	67444	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.19852.3>	10.65.62.17	2009	10.65.62.17	56907	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	66147741	79020	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.16234.3>	10.65.62.17	2009	10.65.62.17	55280	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	274674	583	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.23096.3>	10.65.62.17	2009	10.65.62.17	57558	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	375517	724	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.22804.3>	10.65.62.17	2009	10.65.62.17	57466	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	417814	779	292	4	0	blocked	1
<'rabbit at ksn-backend3_jail1'.3.21248.3>	10.65.62.17	2009	10.65.62.17	57197	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	270582	586	292	4	0	blocking	1
<'rabbit at ksn-backend3_jail1'.3.16748.3>	10.65.62.17	2009	10.65.62.17	55579	false				PLAIN					{0,8,0}	guest	/	0	131072	[]	48663090	69919	292	4	0	blocked	1

Channels:
pid	connection	number	user	vhost	transactional	confirm	consumer_count	messages_unacknowledged	messages_unconfirmed	messages_uncommitted	acks_uncommitted	prefetch_count	client_flow_blocked
<'rabbit at ksn-backend3_jail1'.3.13590.3>	<'rabbit at ksn-backend3_jail1'.3.13498.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13596.3>	<'rabbit at ksn-backend3_jail1'.3.13502.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13599.3>	<'rabbit at ksn-backend3_jail1'.3.13506.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13605.3>	<'rabbit at ksn-backend3_jail1'.3.13514.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13614.3>	<'rabbit at ksn-backend3_jail1'.3.13510.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13622.3>	<'rabbit at ksn-backend3_jail1'.3.13518.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13629.3>	<'rabbit at ksn-backend3_jail1'.3.13522.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13632.3>	<'rabbit at ksn-backend3_jail1'.3.13526.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13641.3>	<'rabbit at ksn-backend3_jail1'.3.13530.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13642.3>	<'rabbit at ksn-backend3_jail1'.3.13534.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13651.3>	<'rabbit at ksn-backend3_jail1'.3.13542.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13652.3>	<'rabbit at ksn-backend3_jail1'.3.13538.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13661.3>	<'rabbit at ksn-backend3_jail1'.3.13546.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13662.3>	<'rabbit at ksn-backend3_jail1'.3.13550.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13668.3>	<'rabbit at ksn-backend3_jail1'.3.13554.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13672.3>	<'rabbit at ksn-backend3_jail1'.3.13558.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13686.3>	<'rabbit at ksn-backend3_jail1'.3.13562.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13695.3>	<'rabbit at ksn-backend3_jail1'.3.13566.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13700.3>	<'rabbit at ksn-backend3_jail1'.3.13570.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13705.3>	<'rabbit at ksn-backend3_jail1'.3.13574.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13710.3>	<'rabbit at ksn-backend3_jail1'.3.13578.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13715.3>	<'rabbit at ksn-backend3_jail1'.3.13582.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13720.3>	<'rabbit at ksn-backend3_jail1'.3.13586.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13725.3>	<'rabbit at ksn-backend3_jail1'.3.13613.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13730.3>	<'rabbit at ksn-backend3_jail1'.3.13623.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13739.3>	<'rabbit at ksn-backend3_jail1'.3.13678.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13744.3>	<'rabbit at ksn-backend3_jail1'.3.13682.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.13749.3>	<'rabbit at ksn-backend3_jail1'.3.13691.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14153.3>	<'rabbit at ksn-backend3_jail1'.3.13735.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14329.3>	<'rabbit at ksn-backend3_jail1'.3.13757.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14338.3>	<'rabbit at ksn-backend3_jail1'.3.13761.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14353.3>	<'rabbit at ksn-backend3_jail1'.3.13769.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14357.3>	<'rabbit at ksn-backend3_jail1'.3.13765.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14358.3>	<'rabbit at ksn-backend3_jail1'.3.13773.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14359.3>	<'rabbit at ksn-backend3_jail1'.3.13753.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14372.3>	<'rabbit at ksn-backend3_jail1'.3.13781.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14378.3>	<'rabbit at ksn-backend3_jail1'.3.13785.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14388.3>	<'rabbit at ksn-backend3_jail1'.3.13793.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14393.3>	<'rabbit at ksn-backend3_jail1'.3.13777.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14398.3>	<'rabbit at ksn-backend3_jail1'.3.13789.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14402.3>	<'rabbit at ksn-backend3_jail1'.3.13801.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14414.3>	<'rabbit at ksn-backend3_jail1'.3.13809.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14420.3>	<'rabbit at ksn-backend3_jail1'.3.13805.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14428.3>	<'rabbit at ksn-backend3_jail1'.3.13821.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14429.3>	<'rabbit at ksn-backend3_jail1'.3.13817.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14444.3>	<'rabbit at ksn-backend3_jail1'.3.13825.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14454.3>	<'rabbit at ksn-backend3_jail1'.3.13797.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14464.3>	<'rabbit at ksn-backend3_jail1'.3.13845.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14466.3>	<'rabbit at ksn-backend3_jail1'.3.13849.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14475.3>	<'rabbit at ksn-backend3_jail1'.3.13813.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14479.3>	<'rabbit at ksn-backend3_jail1'.3.13853.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14487.3>	<'rabbit at ksn-backend3_jail1'.3.13837.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14491.3>	<'rabbit at ksn-backend3_jail1'.3.13861.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14504.3>	<'rabbit at ksn-backend3_jail1'.3.13869.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14505.3>	<'rabbit at ksn-backend3_jail1'.3.13865.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14521.3>	<'rabbit at ksn-backend3_jail1'.3.13881.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14522.3>	<'rabbit at ksn-backend3_jail1'.3.13877.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14529.3>	<'rabbit at ksn-backend3_jail1'.3.13829.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14538.3>	<'rabbit at ksn-backend3_jail1'.3.13857.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14544.3>	<'rabbit at ksn-backend3_jail1'.3.13873.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14566.3>	<'rabbit at ksn-backend3_jail1'.3.13905.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14573.3>	<'rabbit at ksn-backend3_jail1'.3.13885.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14574.3>	<'rabbit at ksn-backend3_jail1'.3.13909.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14585.3>	<'rabbit at ksn-backend3_jail1'.3.13925.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14590.3>	<'rabbit at ksn-backend3_jail1'.3.13917.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14594.3>	<'rabbit at ksn-backend3_jail1'.3.13921.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14602.3>	<'rabbit at ksn-backend3_jail1'.3.13897.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14610.3>	<'rabbit at ksn-backend3_jail1'.3.13901.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14618.3>	<'rabbit at ksn-backend3_jail1'.3.13913.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14626.3>	<'rabbit at ksn-backend3_jail1'.3.13941.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14630.3>	<'rabbit at ksn-backend3_jail1'.3.13929.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14637.3>	<'rabbit at ksn-backend3_jail1'.3.13841.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14648.3>	<'rabbit at ksn-backend3_jail1'.3.13893.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14650.3>	<'rabbit at ksn-backend3_jail1'.3.13833.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14651.3>	<'rabbit at ksn-backend3_jail1'.3.13889.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14656.3>	<'rabbit at ksn-backend3_jail1'.3.13945.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14660.3>	<'rabbit at ksn-backend3_jail1'.3.13933.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14666.3>	<'rabbit at ksn-backend3_jail1'.3.13953.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14671.3>	<'rabbit at ksn-backend3_jail1'.3.13949.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14678.3>	<'rabbit at ksn-backend3_jail1'.3.13957.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14686.3>	<'rabbit at ksn-backend3_jail1'.3.13965.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14694.3>	<'rabbit at ksn-backend3_jail1'.3.13961.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14698.3>	<'rabbit at ksn-backend3_jail1'.3.13969.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14711.3>	<'rabbit at ksn-backend3_jail1'.3.13973.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14717.3>	<'rabbit at ksn-backend3_jail1'.3.13977.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14718.3>	<'rabbit at ksn-backend3_jail1'.3.13937.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14737.3>	<'rabbit at ksn-backend3_jail1'.3.13989.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14754.3>	<'rabbit at ksn-backend3_jail1'.3.14001.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14763.3>	<'rabbit at ksn-backend3_jail1'.3.13985.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14768.3>	<'rabbit at ksn-backend3_jail1'.3.14005.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14773.3>	<'rabbit at ksn-backend3_jail1'.3.14009.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14781.3>	<'rabbit at ksn-backend3_jail1'.3.13981.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14786.3>	<'rabbit at ksn-backend3_jail1'.3.14013.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14795.3>	<'rabbit at ksn-backend3_jail1'.3.14017.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14799.3>	<'rabbit at ksn-backend3_jail1'.3.14021.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14809.3>	<'rabbit at ksn-backend3_jail1'.3.13993.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14810.3>	<'rabbit at ksn-backend3_jail1'.3.13997.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14825.3>	<'rabbit at ksn-backend3_jail1'.3.14033.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14834.3>	<'rabbit at ksn-backend3_jail1'.3.14029.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14840.3>	<'rabbit at ksn-backend3_jail1'.3.14037.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14849.3>	<'rabbit at ksn-backend3_jail1'.3.14041.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14857.3>	<'rabbit at ksn-backend3_jail1'.3.14045.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14862.3>	<'rabbit at ksn-backend3_jail1'.3.14049.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14870.3>	<'rabbit at ksn-backend3_jail1'.3.14053.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14879.3>	<'rabbit at ksn-backend3_jail1'.3.14057.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14882.3>	<'rabbit at ksn-backend3_jail1'.3.14025.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14892.3>	<'rabbit at ksn-backend3_jail1'.3.14065.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14897.3>	<'rabbit at ksn-backend3_jail1'.3.14061.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14906.3>	<'rabbit at ksn-backend3_jail1'.3.14073.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14913.3>	<'rabbit at ksn-backend3_jail1'.3.14077.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14921.3>	<'rabbit at ksn-backend3_jail1'.3.14081.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14934.3>	<'rabbit at ksn-backend3_jail1'.3.14089.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14942.3>	<'rabbit at ksn-backend3_jail1'.3.14069.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14954.3>	<'rabbit at ksn-backend3_jail1'.3.14085.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14965.3>	<'rabbit at ksn-backend3_jail1'.3.14097.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14966.3>	<'rabbit at ksn-backend3_jail1'.3.14105.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14970.3>	<'rabbit at ksn-backend3_jail1'.3.14093.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14978.3>	<'rabbit at ksn-backend3_jail1'.3.14109.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14982.3>	<'rabbit at ksn-backend3_jail1'.3.14101.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.14990.3>	<'rabbit at ksn-backend3_jail1'.3.14117.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15001.3>	<'rabbit at ksn-backend3_jail1'.3.14121.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15006.3>	<'rabbit at ksn-backend3_jail1'.3.14129.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15014.3>	<'rabbit at ksn-backend3_jail1'.3.14113.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15018.3>	<'rabbit at ksn-backend3_jail1'.3.14133.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15026.3>	<'rabbit at ksn-backend3_jail1'.3.14125.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15042.3>	<'rabbit at ksn-backend3_jail1'.3.14145.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15058.3>	<'rabbit at ksn-backend3_jail1'.3.14137.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15066.3>	<'rabbit at ksn-backend3_jail1'.3.14141.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15078.3>	<'rabbit at ksn-backend3_jail1'.3.14166.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15082.3>	<'rabbit at ksn-backend3_jail1'.3.14149.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15090.3>	<'rabbit at ksn-backend3_jail1'.3.14170.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15098.3>	<'rabbit at ksn-backend3_jail1'.3.14174.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15110.3>	<'rabbit at ksn-backend3_jail1'.3.14157.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15117.3>	<'rabbit at ksn-backend3_jail1'.3.14162.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15118.3>	<'rabbit at ksn-backend3_jail1'.3.14182.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15128.3>	<'rabbit at ksn-backend3_jail1'.3.14194.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15131.3>	<'rabbit at ksn-backend3_jail1'.3.14190.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15134.3>	<'rabbit at ksn-backend3_jail1'.3.14178.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15139.3>	<'rabbit at ksn-backend3_jail1'.3.14198.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15149.3>	<'rabbit at ksn-backend3_jail1'.3.14206.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15150.3>	<'rabbit at ksn-backend3_jail1'.3.14186.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15159.3>	<'rabbit at ksn-backend3_jail1'.3.14202.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15162.3>	<'rabbit at ksn-backend3_jail1'.3.14210.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15171.3>	<'rabbit at ksn-backend3_jail1'.3.14214.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15174.3>	<'rabbit at ksn-backend3_jail1'.3.14218.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15178.3>	<'rabbit at ksn-backend3_jail1'.3.14222.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15190.3>	<'rabbit at ksn-backend3_jail1'.3.14226.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15194.3>	<'rabbit at ksn-backend3_jail1'.3.14230.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15230.3>	<'rabbit at ksn-backend3_jail1'.3.14234.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15238.3>	<'rabbit at ksn-backend3_jail1'.3.14242.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15250.3>	<'rabbit at ksn-backend3_jail1'.3.14250.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15263.3>	<'rabbit at ksn-backend3_jail1'.3.14238.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15271.3>	<'rabbit at ksn-backend3_jail1'.3.14246.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15286.3>	<'rabbit at ksn-backend3_jail1'.3.14266.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15301.3>	<'rabbit at ksn-backend3_jail1'.3.14262.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15306.3>	<'rabbit at ksn-backend3_jail1'.3.14258.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15320.3>	<'rabbit at ksn-backend3_jail1'.3.14282.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15322.3>	<'rabbit at ksn-backend3_jail1'.3.14298.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15326.3>	<'rabbit at ksn-backend3_jail1'.3.14290.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15338.3>	<'rabbit at ksn-backend3_jail1'.3.14310.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15346.3>	<'rabbit at ksn-backend3_jail1'.3.14318.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15350.3>	<'rabbit at ksn-backend3_jail1'.3.14314.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15357.3>	<'rabbit at ksn-backend3_jail1'.3.14286.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15359.3>	<'rabbit at ksn-backend3_jail1'.3.14294.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15364.3>	<'rabbit at ksn-backend3_jail1'.3.14302.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15370.3>	<'rabbit at ksn-backend3_jail1'.3.14254.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15381.3>	<'rabbit at ksn-backend3_jail1'.3.14306.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15383.3>	<'rabbit at ksn-backend3_jail1'.3.14274.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15390.3>	<'rabbit at ksn-backend3_jail1'.3.14278.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15410.3>	<'rabbit at ksn-backend3_jail1'.3.14270.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15429.3>	<'rabbit at ksn-backend3_jail1'.3.14330.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15430.3>	<'rabbit at ksn-backend3_jail1'.3.14337.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15442.3>	<'rabbit at ksn-backend3_jail1'.3.14394.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15458.3>	<'rabbit at ksn-backend3_jail1'.3.14382.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15467.3>	<'rabbit at ksn-backend3_jail1'.3.14322.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15472.3>	<'rabbit at ksn-backend3_jail1'.3.14366.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15484.3>	<'rabbit at ksn-backend3_jail1'.3.14362.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15487.3>	<'rabbit at ksn-backend3_jail1'.3.14374.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15494.3>	<'rabbit at ksn-backend3_jail1'.3.14406.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15503.3>	<'rabbit at ksn-backend3_jail1'.3.14411.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15506.3>	<'rabbit at ksn-backend3_jail1'.3.14438.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15514.3>	<'rabbit at ksn-backend3_jail1'.3.14434.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15521.3>	<'rabbit at ksn-backend3_jail1'.3.14342.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15530.3>	<'rabbit at ksn-backend3_jail1'.3.14446.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15542.3>	<'rabbit at ksn-backend3_jail1'.3.14430.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15550.3>	<'rabbit at ksn-backend3_jail1'.3.14458.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15560.3>	<'rabbit at ksn-backend3_jail1'.3.14470.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15570.3>	<'rabbit at ksn-backend3_jail1'.3.14506.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15577.3>	<'rabbit at ksn-backend3_jail1'.3.14482.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15584.3>	<'rabbit at ksn-backend3_jail1'.3.14494.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15590.3>	<'rabbit at ksn-backend3_jail1'.3.14530.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15606.3>	<'rabbit at ksn-backend3_jail1'.3.14510.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15622.3>	<'rabbit at ksn-backend3_jail1'.3.14453.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15626.3>	<'rabbit at ksn-backend3_jail1'.3.14534.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15634.3>	<'rabbit at ksn-backend3_jail1'.3.14550.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15642.3>	<'rabbit at ksn-backend3_jail1'.3.14546.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15646.3>	<'rabbit at ksn-backend3_jail1'.3.14554.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15654.3>	<'rabbit at ksn-backend3_jail1'.3.14578.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15662.3>	<'rabbit at ksn-backend3_jail1'.3.14514.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15678.3>	<'rabbit at ksn-backend3_jail1'.3.14558.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15696.3>	<'rabbit at ksn-backend3_jail1'.3.14600.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15698.3>	<'rabbit at ksn-backend3_jail1'.3.14606.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15705.3>	<'rabbit at ksn-backend3_jail1'.3.14614.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15717.3>	<'rabbit at ksn-backend3_jail1'.3.14565.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15718.3>	<'rabbit at ksn-backend3_jail1'.3.14638.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15719.3>	<'rabbit at ksn-backend3_jail1'.3.14662.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15723.3>	<'rabbit at ksn-backend3_jail1'.3.14623.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15742.3>	<'rabbit at ksn-backend3_jail1'.3.14738.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15758.3>	<'rabbit at ksn-backend3_jail1'.3.14675.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15761.3>	<'rabbit at ksn-backend3_jail1'.3.14702.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15765.3>	<'rabbit at ksn-backend3_jail1'.3.14709.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15771.3>	<'rabbit at ksn-backend3_jail1'.3.14586.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15784.3>	<'rabbit at ksn-backend3_jail1'.3.14726.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15785.3>	<'rabbit at ksn-backend3_jail1'.3.14691.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15786.3>	<'rabbit at ksn-backend3_jail1'.3.14742.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15791.3>	<'rabbit at ksn-backend3_jail1'.3.14730.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15799.3>	<'rabbit at ksn-backend3_jail1'.3.14750.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15817.3>	<'rabbit at ksn-backend3_jail1'.3.14790.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15819.3>	<'rabbit at ksn-backend3_jail1'.3.14746.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15827.3>	<'rabbit at ksn-backend3_jail1'.3.14722.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15832.3>	<'rabbit at ksn-backend3_jail1'.3.14802.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15839.3>	<'rabbit at ksn-backend3_jail1'.3.14761.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15851.3>	<'rabbit at ksn-backend3_jail1'.3.14814.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15859.3>	<'rabbit at ksn-backend3_jail1'.3.14682.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15869.3>	<'rabbit at ksn-backend3_jail1'.3.14785.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15878.3>	<'rabbit at ksn-backend3_jail1'.3.14859.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15880.3>	<'rabbit at ksn-backend3_jail1'.3.14830.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15889.3>	<'rabbit at ksn-backend3_jail1'.3.14842.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15895.3>	<'rabbit at ksn-backend3_jail1'.3.14826.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15903.3>	<'rabbit at ksn-backend3_jail1'.3.14875.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15914.3>	<'rabbit at ksn-backend3_jail1'.3.14886.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15924.3>	<'rabbit at ksn-backend3_jail1'.3.14902.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15927.3>	<'rabbit at ksn-backend3_jail1'.3.14898.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15931.3>	<'rabbit at ksn-backend3_jail1'.3.14867.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15939.3>	<'rabbit at ksn-backend3_jail1'.3.14774.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15956.3>	<'rabbit at ksn-backend3_jail1'.3.14922.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15960.3>	<'rabbit at ksn-backend3_jail1'.3.14926.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15962.3>	<'rabbit at ksn-backend3_jail1'.3.14914.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15970.3>	<'rabbit at ksn-backend3_jail1'.3.14818.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15976.3>	<'rabbit at ksn-backend3_jail1'.3.14941.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15977.3>	<'rabbit at ksn-backend3_jail1'.3.14930.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15987.3>	<'rabbit at ksn-backend3_jail1'.3.14850.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.15994.3>	<'rabbit at ksn-backend3_jail1'.3.14946.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16004.3>	<'rabbit at ksn-backend3_jail1'.3.14964.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16011.3>	<'rabbit at ksn-backend3_jail1'.3.14975.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16019.3>	<'rabbit at ksn-backend3_jail1'.3.14953.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16031.3>	<'rabbit at ksn-backend3_jail1'.3.15002.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16054.3>	<'rabbit at ksn-backend3_jail1'.3.15030.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16055.3>	<'rabbit at ksn-backend3_jail1'.3.15025.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16060.3>	<'rabbit at ksn-backend3_jail1'.3.14994.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16079.3>	<'rabbit at ksn-backend3_jail1'.3.15046.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16088.3>	<'rabbit at ksn-backend3_jail1'.3.15050.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16104.3>	<'rabbit at ksn-backend3_jail1'.3.15054.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16107.3>	<'rabbit at ksn-backend3_jail1'.3.15070.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16115.3>	<'rabbit at ksn-backend3_jail1'.3.15034.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16119.3>	<'rabbit at ksn-backend3_jail1'.3.15038.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16127.3>	<'rabbit at ksn-backend3_jail1'.3.15062.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16139.3>	<'rabbit at ksn-backend3_jail1'.3.15075.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16141.3>	<'rabbit at ksn-backend3_jail1'.3.15013.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16147.3>	<'rabbit at ksn-backend3_jail1'.3.15095.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16155.3>	<'rabbit at ksn-backend3_jail1'.3.15154.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16187.3>	<'rabbit at ksn-backend3_jail1'.3.15189.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16201.3>	<'rabbit at ksn-backend3_jail1'.3.15109.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16209.3>	<'rabbit at ksn-backend3_jail1'.3.15102.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16210.3>	<'rabbit at ksn-backend3_jail1'.3.15129.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16224.3>	<'rabbit at ksn-backend3_jail1'.3.14989.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16243.3>	<'rabbit at ksn-backend3_jail1'.3.15089.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16250.3>	<'rabbit at ksn-backend3_jail1'.3.15182.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16258.3>	<'rabbit at ksn-backend3_jail1'.3.15214.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16267.3>	<'rabbit at ksn-backend3_jail1'.3.15254.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16273.3>	<'rabbit at ksn-backend3_jail1'.3.15210.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16274.3>	<'rabbit at ksn-backend3_jail1'.3.15206.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16293.3>	<'rabbit at ksn-backend3_jail1'.3.15222.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16295.3>	<'rabbit at ksn-backend3_jail1'.3.15234.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16302.3>	<'rabbit at ksn-backend3_jail1'.3.15226.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16314.3>	<'rabbit at ksn-backend3_jail1'.3.15242.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16318.3>	<'rabbit at ksn-backend3_jail1'.3.15285.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16325.3>	<'rabbit at ksn-backend3_jail1'.3.15258.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16334.3>	<'rabbit at ksn-backend3_jail1'.3.15266.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16358.3>	<'rabbit at ksn-backend3_jail1'.3.15218.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16362.3>	<'rabbit at ksn-backend3_jail1'.3.15202.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16371.3>	<'rabbit at ksn-backend3_jail1'.3.15349.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16372.3>	<'rabbit at ksn-backend3_jail1'.3.15198.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16378.3>	<'rabbit at ksn-backend3_jail1'.3.15394.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16393.3>	<'rabbit at ksn-backend3_jail1'.3.15246.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16398.3>	<'rabbit at ksn-backend3_jail1'.3.15142.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16399.3>	<'rabbit at ksn-backend3_jail1'.3.15294.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16404.3>	<'rabbit at ksn-backend3_jail1'.3.15334.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16408.3>	<'rabbit at ksn-backend3_jail1'.3.15374.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16416.3>	<'rabbit at ksn-backend3_jail1'.3.15330.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16428.3>	<'rabbit at ksn-backend3_jail1'.3.15303.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16440.3>	<'rabbit at ksn-backend3_jail1'.3.15387.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16449.3>	<'rabbit at ksn-backend3_jail1'.3.15274.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16458.3>	<'rabbit at ksn-backend3_jail1'.3.15278.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16462.3>	<'rabbit at ksn-backend3_jail1'.3.15398.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16471.3>	<'rabbit at ksn-backend3_jail1'.3.15369.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16479.3>	<'rabbit at ksn-backend3_jail1'.3.15414.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16480.3>	<'rabbit at ksn-backend3_jail1'.3.15325.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16488.3>	<'rabbit at ksn-backend3_jail1'.3.15290.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16500.3>	<'rabbit at ksn-backend3_jail1'.3.15402.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16508.3>	<'rabbit at ksn-backend3_jail1'.3.15434.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16525.3>	<'rabbit at ksn-backend3_jail1'.3.15310.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16529.3>	<'rabbit at ksn-backend3_jail1'.3.15454.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16537.3>	<'rabbit at ksn-backend3_jail1'.3.15407.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16553.3>	<'rabbit at ksn-backend3_jail1'.3.15462.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16561.3>	<'rabbit at ksn-backend3_jail1'.3.15438.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16573.3>	<'rabbit at ksn-backend3_jail1'.3.15594.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16590.3>	<'rabbit at ksn-backend3_jail1'.3.15446.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16592.3>	<'rabbit at ksn-backend3_jail1'.3.15478.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16597.3>	<'rabbit at ksn-backend3_jail1'.3.15422.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16605.3>	<'rabbit at ksn-backend3_jail1'.3.15526.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16613.3>	<'rabbit at ksn-backend3_jail1'.3.15538.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16636.3>	<'rabbit at ksn-backend3_jail1'.3.15602.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16644.3>	<'rabbit at ksn-backend3_jail1'.3.15510.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16653.3>	<'rabbit at ksn-backend3_jail1'.3.15474.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16663.3>	<'rabbit at ksn-backend3_jail1'.3.15418.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16665.3>	<'rabbit at ksn-backend3_jail1'.3.15562.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16675.3>	<'rabbit at ksn-backend3_jail1'.3.15586.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16677.3>	<'rabbit at ksn-backend3_jail1'.3.15534.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16687.3>	<'rabbit at ksn-backend3_jail1'.3.15498.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16694.3>	<'rabbit at ksn-backend3_jail1'.3.15641.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16697.3>	<'rabbit at ksn-backend3_jail1'.3.15567.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16711.3>	<'rabbit at ksn-backend3_jail1'.3.15630.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16720.3>	<'rabbit at ksn-backend3_jail1'.3.15598.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16721.3>	<'rabbit at ksn-backend3_jail1'.3.15650.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16728.3>	<'rabbit at ksn-backend3_jail1'.3.15614.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16749.3>	<'rabbit at ksn-backend3_jail1'.3.15546.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16762.3>	<'rabbit at ksn-backend3_jail1'.3.15686.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16783.3>	<'rabbit at ksn-backend3_jail1'.3.15490.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16789.3>	<'rabbit at ksn-backend3_jail1'.3.15578.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16805.3>	<'rabbit at ksn-backend3_jail1'.3.15624.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16812.3>	<'rabbit at ksn-backend3_jail1'.3.15670.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16814.3>	<'rabbit at ksn-backend3_jail1'.3.15747.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16823.3>	<'rabbit at ksn-backend3_jail1'.3.15666.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16845.3>	<'rabbit at ksn-backend3_jail1'.3.15847.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16846.3>	<'rabbit at ksn-backend3_jail1'.3.15699.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16858.3>	<'rabbit at ksn-backend3_jail1'.3.15767.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16862.3>	<'rabbit at ksn-backend3_jail1'.3.15714.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16864.3>	<'rabbit at ksn-backend3_jail1'.3.15610.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16869.3>	<'rabbit at ksn-backend3_jail1'.3.15727.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16876.3>	<'rabbit at ksn-backend3_jail1'.3.15674.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16881.3>	<'rabbit at ksn-backend3_jail1'.3.15843.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16893.3>	<'rabbit at ksn-backend3_jail1'.3.15857.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16901.3>	<'rabbit at ksn-backend3_jail1'.3.15743.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16908.3>	<'rabbit at ksn-backend3_jail1'.3.15863.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16917.3>	<'rabbit at ksn-backend3_jail1'.3.15871.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16928.3>	<'rabbit at ksn-backend3_jail1'.3.15682.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16946.3>	<'rabbit at ksn-backend3_jail1'.3.15907.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16949.3>	<'rabbit at ksn-backend3_jail1'.3.15735.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16953.3>	<'rabbit at ksn-backend3_jail1'.3.15823.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16965.3>	<'rabbit at ksn-backend3_jail1'.3.15731.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16985.3>	<'rabbit at ksn-backend3_jail1'.3.15795.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.16997.3>	<'rabbit at ksn-backend3_jail1'.3.15661.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17027.3>	<'rabbit at ksn-backend3_jail1'.3.15837.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17037.3>	<'rabbit at ksn-backend3_jail1'.3.15787.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17066.3>	<'rabbit at ksn-backend3_jail1'.3.16051.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17067.3>	<'rabbit at ksn-backend3_jail1'.3.16035.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17081.3>	<'rabbit at ksn-backend3_jail1'.3.16043.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17086.3>	<'rabbit at ksn-backend3_jail1'.3.15938.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17089.3>	<'rabbit at ksn-backend3_jail1'.3.15883.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17097.3>	<'rabbit at ksn-backend3_jail1'.3.15915.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17104.3>	<'rabbit at ksn-backend3_jail1'.3.15902.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17137.3>	<'rabbit at ksn-backend3_jail1'.3.16123.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17139.3>	<'rabbit at ksn-backend3_jail1'.3.16067.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17140.3>	<'rabbit at ksn-backend3_jail1'.3.16131.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17141.3>	<'rabbit at ksn-backend3_jail1'.3.16099.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17149.3>	<'rabbit at ksn-backend3_jail1'.3.16071.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17152.3>	<'rabbit at ksn-backend3_jail1'.3.16063.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17157.3>	<'rabbit at ksn-backend3_jail1'.3.16075.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17174.3>	<'rabbit at ksn-backend3_jail1'.3.15811.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17175.3>	<'rabbit at ksn-backend3_jail1'.3.15803.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17176.3>	<'rabbit at ksn-backend3_jail1'.3.16114.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17177.3>	<'rabbit at ksn-backend3_jail1'.3.15963.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17185.3>	<'rabbit at ksn-backend3_jail1'.3.16039.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17207.3>	<'rabbit at ksn-backend3_jail1'.3.15923.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17209.3>	<'rabbit at ksn-backend3_jail1'.3.15892.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17210.3>	<'rabbit at ksn-backend3_jail1'.3.15947.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17211.3>	<'rabbit at ksn-backend3_jail1'.3.15986.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17212.3>	<'rabbit at ksn-backend3_jail1'.3.15979.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17217.3>	<'rabbit at ksn-backend3_jail1'.3.16163.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17225.3>	<'rabbit at ksn-backend3_jail1'.3.16226.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17238.3>	<'rabbit at ksn-backend3_jail1'.3.15995.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17241.3>	<'rabbit at ksn-backend3_jail1'.3.16007.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17253.3>	<'rabbit at ksn-backend3_jail1'.3.16151.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17259.3>	<'rabbit at ksn-backend3_jail1'.3.15999.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17265.3>	<'rabbit at ksn-backend3_jail1'.3.16167.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17275.3>	<'rabbit at ksn-backend3_jail1'.3.16091.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17276.3>	<'rabbit at ksn-backend3_jail1'.3.16175.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17277.3>	<'rabbit at ksn-backend3_jail1'.3.16171.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17281.3>	<'rabbit at ksn-backend3_jail1'.3.16095.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17290.3>	<'rabbit at ksn-backend3_jail1'.3.16214.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17293.3>	<'rabbit at ksn-backend3_jail1'.3.16238.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17301.3>	<'rabbit at ksn-backend3_jail1'.3.16159.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17314.3>	<'rabbit at ksn-backend3_jail1'.3.16191.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17316.3>	<'rabbit at ksn-backend3_jail1'.3.16083.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17326.3>	<'rabbit at ksn-backend3_jail1'.3.16218.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17330.3>	<'rabbit at ksn-backend3_jail1'.3.15943.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17339.3>	<'rabbit at ksn-backend3_jail1'.3.16017.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17341.3>	<'rabbit at ksn-backend3_jail1'.3.16027.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17345.3>	<'rabbit at ksn-backend3_jail1'.3.16183.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17346.3>	<'rabbit at ksn-backend3_jail1'.3.16023.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17357.3>	<'rabbit at ksn-backend3_jail1'.3.16278.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17358.3>	<'rabbit at ksn-backend3_jail1'.3.16230.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17366.3>	<'rabbit at ksn-backend3_jail1'.3.16254.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17378.3>	<'rabbit at ksn-backend3_jail1'.3.16179.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17402.3>	<'rabbit at ksn-backend3_jail1'.3.16202.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17434.3>	<'rabbit at ksn-backend3_jail1'.3.16234.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17451.3>	<'rabbit at ksn-backend3_jail1'.3.16374.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17457.3>	<'rabbit at ksn-backend3_jail1'.3.16246.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17462.3>	<'rabbit at ksn-backend3_jail1'.3.16143.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17470.3>	<'rabbit at ksn-backend3_jail1'.3.16436.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17474.3>	<'rabbit at ksn-backend3_jail1'.3.16432.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17518.3>	<'rabbit at ksn-backend3_jail1'.3.16444.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17533.3>	<'rabbit at ksn-backend3_jail1'.3.16286.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17534.3>	<'rabbit at ksn-backend3_jail1'.3.16338.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17545.3>	<'rabbit at ksn-backend3_jail1'.3.16263.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17546.3>	<'rabbit at ksn-backend3_jail1'.3.16452.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17560.3>	<'rabbit at ksn-backend3_jail1'.3.16464.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17562.3>	<'rabbit at ksn-backend3_jail1'.3.16282.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17578.3>	<'rabbit at ksn-backend3_jail1'.3.16497.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17579.3>	<'rabbit at ksn-backend3_jail1'.3.16346.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17584.3>	<'rabbit at ksn-backend3_jail1'.3.16411.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17585.3>	<'rabbit at ksn-backend3_jail1'.3.16427.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17586.3>	<'rabbit at ksn-backend3_jail1'.3.16484.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17597.3>	<'rabbit at ksn-backend3_jail1'.3.16326.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17598.3>	<'rabbit at ksn-backend3_jail1'.3.16382.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17608.3>	<'rabbit at ksn-backend3_jail1'.3.16357.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17610.3>	<'rabbit at ksn-backend3_jail1'.3.16332.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17622.3>	<'rabbit at ksn-backend3_jail1'.3.16313.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17626.3>	<'rabbit at ksn-backend3_jail1'.3.16298.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17633.3>	<'rabbit at ksn-backend3_jail1'.3.16570.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17634.3>	<'rabbit at ksn-backend3_jail1'.3.16395.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17639.3>	<'rabbit at ksn-backend3_jail1'.3.16306.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17642.3>	<'rabbit at ksn-backend3_jail1'.3.16512.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17646.3>	<'rabbit at ksn-backend3_jail1'.3.16505.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17650.3>	<'rabbit at ksn-backend3_jail1'.3.16610.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17654.3>	<'rabbit at ksn-backend3_jail1'.3.16533.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17658.3>	<'rabbit at ksn-backend3_jail1'.3.16420.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17663.3>	<'rabbit at ksn-backend3_jail1'.3.16545.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17666.3>	<'rabbit at ksn-backend3_jail1'.3.16342.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17670.3>	<'rabbit at ksn-backend3_jail1'.3.16528.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17674.3>	<'rabbit at ksn-backend3_jail1'.3.16492.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17678.3>	<'rabbit at ksn-backend3_jail1'.3.16350.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17682.3>	<'rabbit at ksn-backend3_jail1'.3.16565.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17689.3>	<'rabbit at ksn-backend3_jail1'.3.16541.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17693.3>	<'rabbit at ksn-backend3_jail1'.3.16705.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17697.3>	<'rabbit at ksn-backend3_jail1'.3.16517.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17698.3>	<'rabbit at ksn-backend3_jail1'.3.16577.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17705.3>	<'rabbit at ksn-backend3_jail1'.3.16713.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17706.3>	<'rabbit at ksn-backend3_jail1'.3.16737.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17715.3>	<'rabbit at ksn-backend3_jail1'.3.16741.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17717.3>	<'rabbit at ksn-backend3_jail1'.3.16581.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17718.3>	<'rabbit at ksn-backend3_jail1'.3.16733.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17724.3>	<'rabbit at ksn-backend3_jail1'.3.16593.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17729.3>	<'rabbit at ksn-backend3_jail1'.3.16602.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17730.3>	<'rabbit at ksn-backend3_jail1'.3.16549.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17734.3>	<'rabbit at ksn-backend3_jail1'.3.16617.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17741.3>	<'rabbit at ksn-backend3_jail1'.3.16559.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17742.3>	<'rabbit at ksn-backend3_jail1'.3.16729.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17746.3>	<'rabbit at ksn-backend3_jail1'.3.16748.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17750.3>	<'rabbit at ksn-backend3_jail1'.3.16765.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17755.3>	<'rabbit at ksn-backend3_jail1'.3.16793.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17758.3>	<'rabbit at ksn-backend3_jail1'.3.16753.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17765.3>	<'rabbit at ksn-backend3_jail1'.3.16701.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17766.3>	<'rabbit at ksn-backend3_jail1'.3.16645.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17770.3>	<'rabbit at ksn-backend3_jail1'.3.16837.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17777.3>	<'rabbit at ksn-backend3_jail1'.3.16880.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17778.3>	<'rabbit at ksn-backend3_jail1'.3.16833.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17782.3>	<'rabbit at ksn-backend3_jail1'.3.16849.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17792.3>	<'rabbit at ksn-backend3_jail1'.3.16889.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17793.3>	<'rabbit at ksn-backend3_jail1'.3.16865.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17794.3>	<'rabbit at ksn-backend3_jail1'.3.16885.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17808.3>	<'rabbit at ksn-backend3_jail1'.3.16621.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17809.3>	<'rabbit at ksn-backend3_jail1'.3.16909.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17810.3>	<'rabbit at ksn-backend3_jail1'.3.16670.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17812.3>	<'rabbit at ksn-backend3_jail1'.3.16664.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17814.3>	<'rabbit at ksn-backend3_jail1'.3.16629.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17818.3>	<'rabbit at ksn-backend3_jail1'.3.16773.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17822.3>	<'rabbit at ksn-backend3_jail1'.3.16652.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17826.3>	<'rabbit at ksn-backend3_jail1'.3.16689.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17840.3>	<'rabbit at ksn-backend3_jail1'.3.16914.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17841.3>	<'rabbit at ksn-backend3_jail1'.3.16785.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17844.3>	<'rabbit at ksn-backend3_jail1'.3.16637.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17845.3>	<'rabbit at ksn-backend3_jail1'.3.16817.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17846.3>	<'rabbit at ksn-backend3_jail1'.3.16829.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17851.3>	<'rabbit at ksn-backend3_jail1'.3.16797.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17855.3>	<'rabbit at ksn-backend3_jail1'.3.16625.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17858.3>	<'rabbit at ksn-backend3_jail1'.3.16757.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17865.3>	<'rabbit at ksn-backend3_jail1'.3.16964.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17866.3>	<'rabbit at ksn-backend3_jail1'.3.16804.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17870.3>	<'rabbit at ksn-backend3_jail1'.3.16897.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17874.3>	<'rabbit at ksn-backend3_jail1'.3.16769.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17878.3>	<'rabbit at ksn-backend3_jail1'.3.16681.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17883.3>	<'rabbit at ksn-backend3_jail1'.3.16777.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17886.3>	<'rabbit at ksn-backend3_jail1'.3.16937.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17890.3>	<'rabbit at ksn-backend3_jail1'.3.16825.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17907.3>	<'rabbit at ksn-backend3_jail1'.3.17021.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17908.3>	<'rabbit at ksn-backend3_jail1'.3.16969.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17914.3>	<'rabbit at ksn-backend3_jail1'.3.16982.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17915.3>	<'rabbit at ksn-backend3_jail1'.3.16977.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17916.3>	<'rabbit at ksn-backend3_jail1'.3.16993.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17917.3>	<'rabbit at ksn-backend3_jail1'.3.16933.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17918.3>	<'rabbit at ksn-backend3_jail1'.3.16973.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17925.3>	<'rabbit at ksn-backend3_jail1'.3.16921.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17926.3>	<'rabbit at ksn-backend3_jail1'.3.16929.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17930.3>	<'rabbit at ksn-backend3_jail1'.3.16957.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17934.3>	<'rabbit at ksn-backend3_jail1'.3.17005.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17940.3>	<'rabbit at ksn-backend3_jail1'.3.17013.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17948.3>	<'rabbit at ksn-backend3_jail1'.3.17001.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17953.3>	<'rabbit at ksn-backend3_jail1'.3.17045.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17960.3>	<'rabbit at ksn-backend3_jail1'.3.17033.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17962.3>	<'rabbit at ksn-backend3_jail1'.3.16945.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17965.3>	<'rabbit at ksn-backend3_jail1'.3.17009.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17966.3>	<'rabbit at ksn-backend3_jail1'.3.17041.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17967.3>	<'rabbit at ksn-backend3_jail1'.3.17017.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17970.3>	<'rabbit at ksn-backend3_jail1'.3.16989.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17974.3>	<'rabbit at ksn-backend3_jail1'.3.17053.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17978.3>	<'rabbit at ksn-backend3_jail1'.3.17073.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17983.3>	<'rabbit at ksn-backend3_jail1'.3.17057.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17987.3>	<'rabbit at ksn-backend3_jail1'.3.17069.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17993.3>	<'rabbit at ksn-backend3_jail1'.3.17049.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17995.3>	<'rabbit at ksn-backend3_jail1'.3.17096.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.17998.3>	<'rabbit at ksn-backend3_jail1'.3.17029.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18002.3>	<'rabbit at ksn-backend3_jail1'.3.17077.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18013.3>	<'rabbit at ksn-backend3_jail1'.3.17113.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18014.3>	<'rabbit at ksn-backend3_jail1'.3.17153.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18015.3>	<'rabbit at ksn-backend3_jail1'.3.17117.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18019.3>	<'rabbit at ksn-backend3_jail1'.3.17164.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18029.3>	<'rabbit at ksn-backend3_jail1'.3.17184.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18036.3>	<'rabbit at ksn-backend3_jail1'.3.17189.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18037.3>	<'rabbit at ksn-backend3_jail1'.3.17105.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18038.3>	<'rabbit at ksn-backend3_jail1'.3.17125.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18039.3>	<'rabbit at ksn-backend3_jail1'.3.17121.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18043.3>	<'rabbit at ksn-backend3_jail1'.3.17221.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18047.3>	<'rabbit at ksn-backend3_jail1'.3.17109.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18051.3>	<'rabbit at ksn-backend3_jail1'.3.17233.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18056.3>	<'rabbit at ksn-backend3_jail1'.3.17229.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18059.3>	<'rabbit at ksn-backend3_jail1'.3.17250.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18063.3>	<'rabbit at ksn-backend3_jail1'.3.17245.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18068.3>	<'rabbit at ksn-backend3_jail1'.3.17274.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18074.3>	<'rabbit at ksn-backend3_jail1'.3.17288.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18075.3>	<'rabbit at ksn-backend3_jail1'.3.17298.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18079.3>	<'rabbit at ksn-backend3_jail1'.3.17305.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18083.3>	<'rabbit at ksn-backend3_jail1'.3.17318.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18087.3>	<'rabbit at ksn-backend3_jail1'.3.17356.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18094.3>	<'rabbit at ksn-backend3_jail1'.3.17362.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18095.3>	<'rabbit at ksn-backend3_jail1'.3.17340.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18099.3>	<'rabbit at ksn-backend3_jail1'.3.17374.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18103.3>	<'rabbit at ksn-backend3_jail1'.3.17370.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18113.3>	<'rabbit at ksn-backend3_jail1'.3.17386.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18114.3>	<'rabbit at ksn-backend3_jail1'.3.17382.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18115.3>	<'rabbit at ksn-backend3_jail1'.3.17390.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18122.3>	<'rabbit at ksn-backend3_jail1'.3.17399.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18124.3>	<'rabbit at ksn-backend3_jail1'.3.17406.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18127.3>	<'rabbit at ksn-backend3_jail1'.3.17394.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18139.3>	<'rabbit at ksn-backend3_jail1'.3.17414.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18141.3>	<'rabbit at ksn-backend3_jail1'.3.17418.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18142.3>	<'rabbit at ksn-backend3_jail1'.3.17410.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18143.3>	<'rabbit at ksn-backend3_jail1'.3.17422.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18150.3>	<'rabbit at ksn-backend3_jail1'.3.17430.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18151.3>	<'rabbit at ksn-backend3_jail1'.3.17426.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18158.3>	<'rabbit at ksn-backend3_jail1'.3.17442.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18159.3>	<'rabbit at ksn-backend3_jail1'.3.17438.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18166.3>	<'rabbit at ksn-backend3_jail1'.3.17458.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18167.3>	<'rabbit at ksn-backend3_jail1'.3.17446.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18174.3>	<'rabbit at ksn-backend3_jail1'.3.17478.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18175.3>	<'rabbit at ksn-backend3_jail1'.3.17467.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18179.3>	<'rabbit at ksn-backend3_jail1'.3.17482.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18183.3>	<'rabbit at ksn-backend3_jail1'.3.17486.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18190.3>	<'rabbit at ksn-backend3_jail1'.3.17494.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18191.3>	<'rabbit at ksn-backend3_jail1'.3.17490.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18198.3>	<'rabbit at ksn-backend3_jail1'.3.17498.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18199.3>	<'rabbit at ksn-backend3_jail1'.3.17502.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18203.3>	<'rabbit at ksn-backend3_jail1'.3.17506.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18210.3>	<'rabbit at ksn-backend3_jail1'.3.17514.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18211.3>	<'rabbit at ksn-backend3_jail1'.3.17510.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18215.3>	<'rabbit at ksn-backend3_jail1'.3.17522.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18219.3>	<'rabbit at ksn-backend3_jail1'.3.17526.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18226.3>	<'rabbit at ksn-backend3_jail1'.3.17550.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18227.3>	<'rabbit at ksn-backend3_jail1'.3.17538.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18232.3>	<'rabbit at ksn-backend3_jail1'.3.17561.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18237.3>	<'rabbit at ksn-backend3_jail1'.3.17566.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18240.3>	<'rabbit at ksn-backend3_jail1'.3.17590.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18244.3>	<'rabbit at ksn-backend3_jail1'.3.17602.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18248.3>	<'rabbit at ksn-backend3_jail1'.3.17614.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18252.3>	<'rabbit at ksn-backend3_jail1'.3.17618.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18886.3>	<'rabbit at ksn-backend3_jail1'.3.18858.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18890.3>	<'rabbit at ksn-backend3_jail1'.3.18862.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18894.3>	<'rabbit at ksn-backend3_jail1'.3.18866.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18898.3>	<'rabbit at ksn-backend3_jail1'.3.18870.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18938.3>	<'rabbit at ksn-backend3_jail1'.3.18874.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18946.3>	<'rabbit at ksn-backend3_jail1'.3.18878.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18954.3>	<'rabbit at ksn-backend3_jail1'.3.18882.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18962.3>	<'rabbit at ksn-backend3_jail1'.3.18902.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18978.3>	<'rabbit at ksn-backend3_jail1'.3.18906.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18990.3>	<'rabbit at ksn-backend3_jail1'.3.18910.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.18996.3>	<'rabbit at ksn-backend3_jail1'.3.18914.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19005.3>	<'rabbit at ksn-backend3_jail1'.3.18918.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19008.3>	<'rabbit at ksn-backend3_jail1'.3.18922.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19014.3>	<'rabbit at ksn-backend3_jail1'.3.18926.3>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19035.3>	<'rabbit at ksn-backend3_jail1'.3.18930.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19039.3>	<'rabbit at ksn-backend3_jail1'.3.18934.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19051.3>	<'rabbit at ksn-backend3_jail1'.3.18942.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19059.3>	<'rabbit at ksn-backend3_jail1'.3.18953.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19099.3>	<'rabbit at ksn-backend3_jail1'.3.18958.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19103.3>	<'rabbit at ksn-backend3_jail1'.3.18966.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19107.3>	<'rabbit at ksn-backend3_jail1'.3.18970.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19114.3>	<'rabbit at ksn-backend3_jail1'.3.18977.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19115.3>	<'rabbit at ksn-backend3_jail1'.3.18982.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19119.3>	<'rabbit at ksn-backend3_jail1'.3.18986.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19135.3>	<'rabbit at ksn-backend3_jail1'.3.18999.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19155.3>	<'rabbit at ksn-backend3_jail1'.3.19019.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19163.3>	<'rabbit at ksn-backend3_jail1'.3.19023.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19169.3>	<'rabbit at ksn-backend3_jail1'.3.19027.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19179.3>	<'rabbit at ksn-backend3_jail1'.3.19034.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19191.3>	<'rabbit at ksn-backend3_jail1'.3.19043.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19226.3>	<'rabbit at ksn-backend3_jail1'.3.19047.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19259.3>	<'rabbit at ksn-backend3_jail1'.3.19055.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19267.3>	<'rabbit at ksn-backend3_jail1'.3.19063.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19275.3>	<'rabbit at ksn-backend3_jail1'.3.19067.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19281.3>	<'rabbit at ksn-backend3_jail1'.3.19071.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19307.3>	<'rabbit at ksn-backend3_jail1'.3.19075.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19315.3>	<'rabbit at ksn-backend3_jail1'.3.19079.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19335.3>	<'rabbit at ksn-backend3_jail1'.3.19083.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19341.3>	<'rabbit at ksn-backend3_jail1'.3.19087.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19367.3>	<'rabbit at ksn-backend3_jail1'.3.19091.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19374.3>	<'rabbit at ksn-backend3_jail1'.3.19095.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19383.3>	<'rabbit at ksn-backend3_jail1'.3.19123.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19388.3>	<'rabbit at ksn-backend3_jail1'.3.19127.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19391.3>	<'rabbit at ksn-backend3_jail1'.3.19131.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19405.3>	<'rabbit at ksn-backend3_jail1'.3.19139.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19415.3>	<'rabbit at ksn-backend3_jail1'.3.19143.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19421.3>	<'rabbit at ksn-backend3_jail1'.3.19147.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19431.3>	<'rabbit at ksn-backend3_jail1'.3.19151.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19447.3>	<'rabbit at ksn-backend3_jail1'.3.19162.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19459.3>	<'rabbit at ksn-backend3_jail1'.3.19171.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19463.3>	<'rabbit at ksn-backend3_jail1'.3.19175.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19471.3>	<'rabbit at ksn-backend3_jail1'.3.19183.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19483.3>	<'rabbit at ksn-backend3_jail1'.3.19187.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19507.3>	<'rabbit at ksn-backend3_jail1'.3.19195.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19524.3>	<'rabbit at ksn-backend3_jail1'.3.19203.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19526.3>	<'rabbit at ksn-backend3_jail1'.3.19199.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19538.3>	<'rabbit at ksn-backend3_jail1'.3.19211.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19539.3>	<'rabbit at ksn-backend3_jail1'.3.19207.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19551.3>	<'rabbit at ksn-backend3_jail1'.3.19215.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19555.3>	<'rabbit at ksn-backend3_jail1'.3.19219.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19563.3>	<'rabbit at ksn-backend3_jail1'.3.19227.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19569.3>	<'rabbit at ksn-backend3_jail1'.3.19231.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19587.3>	<'rabbit at ksn-backend3_jail1'.3.19235.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19604.3>	<'rabbit at ksn-backend3_jail1'.3.19239.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19610.3>	<'rabbit at ksn-backend3_jail1'.3.19243.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19622.3>	<'rabbit at ksn-backend3_jail1'.3.19247.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19623.3>	<'rabbit at ksn-backend3_jail1'.3.19251.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19632.3>	<'rabbit at ksn-backend3_jail1'.3.19255.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19658.3>	<'rabbit at ksn-backend3_jail1'.3.19263.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19680.3>	<'rabbit at ksn-backend3_jail1'.3.19271.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19719.3>	<'rabbit at ksn-backend3_jail1'.3.19283.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19721.3>	<'rabbit at ksn-backend3_jail1'.3.19287.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19732.3>	<'rabbit at ksn-backend3_jail1'.3.19291.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19741.3>	<'rabbit at ksn-backend3_jail1'.3.19295.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19744.3>	<'rabbit at ksn-backend3_jail1'.3.19299.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19748.3>	<'rabbit at ksn-backend3_jail1'.3.19303.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19754.3>	<'rabbit at ksn-backend3_jail1'.3.19311.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19784.3>	<'rabbit at ksn-backend3_jail1'.3.19319.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19795.3>	<'rabbit at ksn-backend3_jail1'.3.19323.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19824.3>	<'rabbit at ksn-backend3_jail1'.3.19327.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19831.3>	<'rabbit at ksn-backend3_jail1'.3.19331.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19847.3>	<'rabbit at ksn-backend3_jail1'.3.19343.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19856.3>	<'rabbit at ksn-backend3_jail1'.3.19347.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19869.3>	<'rabbit at ksn-backend3_jail1'.3.19351.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19872.3>	<'rabbit at ksn-backend3_jail1'.3.19355.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19880.3>	<'rabbit at ksn-backend3_jail1'.3.19359.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19896.3>	<'rabbit at ksn-backend3_jail1'.3.19363.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19939.3>	<'rabbit at ksn-backend3_jail1'.3.19375.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.19940.3>	<'rabbit at ksn-backend3_jail1'.3.19379.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20008.3>	<'rabbit at ksn-backend3_jail1'.3.19395.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20015.3>	<'rabbit at ksn-backend3_jail1'.3.19399.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20035.3>	<'rabbit at ksn-backend3_jail1'.3.19414.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20036.3>	<'rabbit at ksn-backend3_jail1'.3.19407.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20057.3>	<'rabbit at ksn-backend3_jail1'.3.19423.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20060.3>	<'rabbit at ksn-backend3_jail1'.3.19427.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20071.3>	<'rabbit at ksn-backend3_jail1'.3.19435.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20082.3>	<'rabbit at ksn-backend3_jail1'.3.19439.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20083.3>	<'rabbit at ksn-backend3_jail1'.3.19446.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20091.3>	<'rabbit at ksn-backend3_jail1'.3.19451.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20100.3>	<'rabbit at ksn-backend3_jail1'.3.19455.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20136.3>	<'rabbit at ksn-backend3_jail1'.3.19468.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20144.3>	<'rabbit at ksn-backend3_jail1'.3.19475.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20166.3>	<'rabbit at ksn-backend3_jail1'.3.19479.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20200.3>	<'rabbit at ksn-backend3_jail1'.3.19487.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20212.3>	<'rabbit at ksn-backend3_jail1'.3.19491.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20220.3>	<'rabbit at ksn-backend3_jail1'.3.19495.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20235.3>	<'rabbit at ksn-backend3_jail1'.3.19499.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20236.3>	<'rabbit at ksn-backend3_jail1'.3.19503.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20252.3>	<'rabbit at ksn-backend3_jail1'.3.19511.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20276.3>	<'rabbit at ksn-backend3_jail1'.3.19515.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20287.3>	<'rabbit at ksn-backend3_jail1'.3.19527.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20299.3>	<'rabbit at ksn-backend3_jail1'.3.19537.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20300.3>	<'rabbit at ksn-backend3_jail1'.3.19543.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20312.3>	<'rabbit at ksn-backend3_jail1'.3.19547.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20347.3>	<'rabbit at ksn-backend3_jail1'.3.19562.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20359.3>	<'rabbit at ksn-backend3_jail1'.3.19571.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20360.3>	<'rabbit at ksn-backend3_jail1'.3.19575.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20368.3>	<'rabbit at ksn-backend3_jail1'.3.19585.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20372.3>	<'rabbit at ksn-backend3_jail1'.3.19579.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20380.3>	<'rabbit at ksn-backend3_jail1'.3.19591.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20400.3>	<'rabbit at ksn-backend3_jail1'.3.19596.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20408.3>	<'rabbit at ksn-backend3_jail1'.3.19600.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20425.3>	<'rabbit at ksn-backend3_jail1'.3.19612.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20436.3>	<'rabbit at ksn-backend3_jail1'.3.19624.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20444.3>	<'rabbit at ksn-backend3_jail1'.3.19631.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20450.3>	<'rabbit at ksn-backend3_jail1'.3.19636.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20463.3>	<'rabbit at ksn-backend3_jail1'.3.19640.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20464.3>	<'rabbit at ksn-backend3_jail1'.3.19644.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20475.3>	<'rabbit at ksn-backend3_jail1'.3.19648.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20476.3>	<'rabbit at ksn-backend3_jail1'.3.19652.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20495.3>	<'rabbit at ksn-backend3_jail1'.3.19664.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20496.3>	<'rabbit at ksn-backend3_jail1'.3.19660.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20507.3>	<'rabbit at ksn-backend3_jail1'.3.19668.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20516.3>	<'rabbit at ksn-backend3_jail1'.3.19672.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20528.3>	<'rabbit at ksn-backend3_jail1'.3.19676.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20542.3>	<'rabbit at ksn-backend3_jail1'.3.19688.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20544.3>	<'rabbit at ksn-backend3_jail1'.3.19684.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20552.3>	<'rabbit at ksn-backend3_jail1'.3.19692.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20556.3>	<'rabbit at ksn-backend3_jail1'.3.19696.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20564.3>	<'rabbit at ksn-backend3_jail1'.3.19700.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20576.3>	<'rabbit at ksn-backend3_jail1'.3.19704.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20593.3>	<'rabbit at ksn-backend3_jail1'.3.19708.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20594.3>	<'rabbit at ksn-backend3_jail1'.3.19712.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20600.3>	<'rabbit at ksn-backend3_jail1'.3.19724.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20606.3>	<'rabbit at ksn-backend3_jail1'.3.19731.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20616.3>	<'rabbit at ksn-backend3_jail1'.3.19743.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20635.3>	<'rabbit at ksn-backend3_jail1'.3.19756.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20636.3>	<'rabbit at ksn-backend3_jail1'.3.19760.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20647.3>	<'rabbit at ksn-backend3_jail1'.3.19768.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20648.3>	<'rabbit at ksn-backend3_jail1'.3.19764.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20659.3>	<'rabbit at ksn-backend3_jail1'.3.19772.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20662.3>	<'rabbit at ksn-backend3_jail1'.3.19776.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20672.3>	<'rabbit at ksn-backend3_jail1'.3.19780.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20681.3>	<'rabbit at ksn-backend3_jail1'.3.19788.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20684.3>	<'rabbit at ksn-backend3_jail1'.3.19796.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20694.3>	<'rabbit at ksn-backend3_jail1'.3.19800.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20704.3>	<'rabbit at ksn-backend3_jail1'.3.19804.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20709.3>	<'rabbit at ksn-backend3_jail1'.3.19808.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20718.3>	<'rabbit at ksn-backend3_jail1'.3.19816.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20722.3>	<'rabbit at ksn-backend3_jail1'.3.19812.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20736.3>	<'rabbit at ksn-backend3_jail1'.3.19820.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20750.3>	<'rabbit at ksn-backend3_jail1'.3.19836.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20751.3>	<'rabbit at ksn-backend3_jail1'.3.19832.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20761.3>	<'rabbit at ksn-backend3_jail1'.3.19840.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20773.3>	<'rabbit at ksn-backend3_jail1'.3.19852.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20774.3>	<'rabbit at ksn-backend3_jail1'.3.19848.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20784.3>	<'rabbit at ksn-backend3_jail1'.3.19860.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20793.3>	<'rabbit at ksn-backend3_jail1'.3.19864.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20804.3>	<'rabbit at ksn-backend3_jail1'.3.19877.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20808.3>	<'rabbit at ksn-backend3_jail1'.3.19884.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20819.3>	<'rabbit at ksn-backend3_jail1'.3.19888.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20820.3>	<'rabbit at ksn-backend3_jail1'.3.19892.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20830.3>	<'rabbit at ksn-backend3_jail1'.3.19900.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20843.3>	<'rabbit at ksn-backend3_jail1'.3.19908.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20844.3>	<'rabbit at ksn-backend3_jail1'.3.19904.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20856.3>	<'rabbit at ksn-backend3_jail1'.3.19912.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20860.3>	<'rabbit at ksn-backend3_jail1'.3.19916.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20868.3>	<'rabbit at ksn-backend3_jail1'.3.19920.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20872.3>	<'rabbit at ksn-backend3_jail1'.3.19924.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20880.3>	<'rabbit at ksn-backend3_jail1'.3.19928.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20895.3>	<'rabbit at ksn-backend3_jail1'.3.19937.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20896.3>	<'rabbit at ksn-backend3_jail1'.3.19944.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20907.3>	<'rabbit at ksn-backend3_jail1'.3.19952.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20908.3>	<'rabbit at ksn-backend3_jail1'.3.19948.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20918.3>	<'rabbit at ksn-backend3_jail1'.3.19956.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20931.3>	<'rabbit at ksn-backend3_jail1'.3.19960.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20936.3>	<'rabbit at ksn-backend3_jail1'.3.19968.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20939.3>	<'rabbit at ksn-backend3_jail1'.3.19964.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20948.3>	<'rabbit at ksn-backend3_jail1'.3.19972.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20951.3>	<'rabbit at ksn-backend3_jail1'.3.19976.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20964.3>	<'rabbit at ksn-backend3_jail1'.3.19980.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20977.3>	<'rabbit at ksn-backend3_jail1'.3.19988.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20979.3>	<'rabbit at ksn-backend3_jail1'.3.19984.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20990.3>	<'rabbit at ksn-backend3_jail1'.3.19992.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.20992.3>	<'rabbit at ksn-backend3_jail1'.3.19996.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21000.3>	<'rabbit at ksn-backend3_jail1'.3.20000.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21008.3>	<'rabbit at ksn-backend3_jail1'.3.20007.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21021.3>	<'rabbit at ksn-backend3_jail1'.3.20016.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21029.3>	<'rabbit at ksn-backend3_jail1'.3.20020.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21040.3>	<'rabbit at ksn-backend3_jail1'.3.20024.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21052.3>	<'rabbit at ksn-backend3_jail1'.3.20040.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21053.3>	<'rabbit at ksn-backend3_jail1'.3.20034.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21063.3>	<'rabbit at ksn-backend3_jail1'.3.20044.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21075.3>	<'rabbit at ksn-backend3_jail1'.3.20048.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21076.3>	<'rabbit at ksn-backend3_jail1'.3.20055.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21090.3>	<'rabbit at ksn-backend3_jail1'.3.20064.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21092.3>	<'rabbit at ksn-backend3_jail1'.3.20072.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21108.3>	<'rabbit at ksn-backend3_jail1'.3.20084.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21109.3>	<'rabbit at ksn-backend3_jail1'.3.20092.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21118.3>	<'rabbit at ksn-backend3_jail1'.3.20096.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21129.3>	<'rabbit at ksn-backend3_jail1'.3.20104.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21132.3>	<'rabbit at ksn-backend3_jail1'.3.20108.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21140.3>	<'rabbit at ksn-backend3_jail1'.3.20112.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21152.3>	<'rabbit at ksn-backend3_jail1'.3.20116.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21166.3>	<'rabbit at ksn-backend3_jail1'.3.20120.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21167.3>	<'rabbit at ksn-backend3_jail1'.3.20124.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21172.3>	<'rabbit at ksn-backend3_jail1'.3.20128.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21184.3>	<'rabbit at ksn-backend3_jail1'.3.20132.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21199.3>	<'rabbit at ksn-backend3_jail1'.3.20143.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21200.3>	<'rabbit at ksn-backend3_jail1'.3.20148.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21211.3>	<'rabbit at ksn-backend3_jail1'.3.20152.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21212.3>	<'rabbit at ksn-backend3_jail1'.3.20156.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21220.3>	<'rabbit at ksn-backend3_jail1'.3.20160.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21234.3>	<'rabbit at ksn-backend3_jail1'.3.20168.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21236.3>	<'rabbit at ksn-backend3_jail1'.3.20172.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21244.3>	<'rabbit at ksn-backend3_jail1'.3.20176.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21258.3>	<'rabbit at ksn-backend3_jail1'.3.20180.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21259.3>	<'rabbit at ksn-backend3_jail1'.3.20184.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21268.3>	<'rabbit at ksn-backend3_jail1'.3.20188.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21279.3>	<'rabbit at ksn-backend3_jail1'.3.20196.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21281.3>	<'rabbit at ksn-backend3_jail1'.3.20192.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21292.3>	<'rabbit at ksn-backend3_jail1'.3.20204.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21301.3>	<'rabbit at ksn-backend3_jail1'.3.20211.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21304.3>	<'rabbit at ksn-backend3_jail1'.3.20216.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21313.3>	<'rabbit at ksn-backend3_jail1'.3.20224.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21325.3>	<'rabbit at ksn-backend3_jail1'.3.20232.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21328.3>	<'rabbit at ksn-backend3_jail1'.3.20240.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21339.3>	<'rabbit at ksn-backend3_jail1'.3.20248.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21341.3>	<'rabbit at ksn-backend3_jail1'.3.20244.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21349.3>	<'rabbit at ksn-backend3_jail1'.3.20256.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21363.3>	<'rabbit at ksn-backend3_jail1'.3.20264.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21364.3>	<'rabbit at ksn-backend3_jail1'.3.20260.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21375.3>	<'rabbit at ksn-backend3_jail1'.3.20268.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21376.3>	<'rabbit at ksn-backend3_jail1'.3.20272.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21384.3>	<'rabbit at ksn-backend3_jail1'.3.20280.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21395.3>	<'rabbit at ksn-backend3_jail1'.3.20288.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21400.3>	<'rabbit at ksn-backend3_jail1'.3.20292.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21408.3>	<'rabbit at ksn-backend3_jail1'.3.20304.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21418.3>	<'rabbit at ksn-backend3_jail1'.3.20311.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21424.3>	<'rabbit at ksn-backend3_jail1'.3.20316.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21435.3>	<'rabbit at ksn-backend3_jail1'.3.20324.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21436.3>	<'rabbit at ksn-backend3_jail1'.3.20320.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21444.3>	<'rabbit at ksn-backend3_jail1'.3.20328.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21459.3>	<'rabbit at ksn-backend3_jail1'.3.20336.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21460.3>	<'rabbit at ksn-backend3_jail1'.3.20332.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21468.3>	<'rabbit at ksn-backend3_jail1'.3.20340.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21476.3>	<'rabbit at ksn-backend3_jail1'.3.20348.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21491.3>	<'rabbit at ksn-backend3_jail1'.3.20365.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21492.3>	<'rabbit at ksn-backend3_jail1'.3.20354.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21500.3>	<'rabbit at ksn-backend3_jail1'.3.20376.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21510.3>	<'rabbit at ksn-backend3_jail1'.3.20384.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21521.3>	<'rabbit at ksn-backend3_jail1'.3.20392.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21524.3>	<'rabbit at ksn-backend3_jail1'.3.20388.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21540.3>	<'rabbit at ksn-backend3_jail1'.3.20396.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21544.3>	<'rabbit at ksn-backend3_jail1'.3.20404.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21552.3>	<'rabbit at ksn-backend3_jail1'.3.20412.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21564.3>	<'rabbit at ksn-backend3_jail1'.3.20420.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21568.3>	<'rabbit at ksn-backend3_jail1'.3.20416.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21579.3>	<'rabbit at ksn-backend3_jail1'.3.20428.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21581.3>	<'rabbit at ksn-backend3_jail1'.3.20433.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21588.3>	<'rabbit at ksn-backend3_jail1'.3.20440.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21600.3>	<'rabbit at ksn-backend3_jail1'.3.20452.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21609.3>	<'rabbit at ksn-backend3_jail1'.3.20468.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21612.3>	<'rabbit at ksn-backend3_jail1'.3.20461.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21623.3>	<'rabbit at ksn-backend3_jail1'.3.20480.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21633.3>	<'rabbit at ksn-backend3_jail1'.3.20484.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21636.3>	<'rabbit at ksn-backend3_jail1'.3.20488.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21647.3>	<'rabbit at ksn-backend3_jail1'.3.20508.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21649.3>	<'rabbit at ksn-backend3_jail1'.3.20500.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21656.3>	<'rabbit at ksn-backend3_jail1'.3.20512.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21669.3>	<'rabbit at ksn-backend3_jail1'.3.20524.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21671.3>	<'rabbit at ksn-backend3_jail1'.3.20520.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21680.3>	<'rabbit at ksn-backend3_jail1'.3.20532.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21688.3>	<'rabbit at ksn-backend3_jail1'.3.20543.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21694.3>	<'rabbit at ksn-backend3_jail1'.3.20548.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21702.3>	<'rabbit at ksn-backend3_jail1'.3.20560.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21715.3>	<'rabbit at ksn-backend3_jail1'.3.20572.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21716.3>	<'rabbit at ksn-backend3_jail1'.3.20568.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21724.3>	<'rabbit at ksn-backend3_jail1'.3.20580.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21736.3>	<'rabbit at ksn-backend3_jail1'.3.20584.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21743.3>	<'rabbit at ksn-backend3_jail1'.3.20596.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21753.3>	<'rabbit at ksn-backend3_jail1'.3.20608.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21758.3>	<'rabbit at ksn-backend3_jail1'.3.20612.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21767.3>	<'rabbit at ksn-backend3_jail1'.3.20620.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21779.3>	<'rabbit at ksn-backend3_jail1'.3.20624.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21780.3>	<'rabbit at ksn-backend3_jail1'.3.20631.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21788.3>	<'rabbit at ksn-backend3_jail1'.3.20640.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21800.3>	<'rabbit at ksn-backend3_jail1'.3.20652.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21811.3>	<'rabbit at ksn-backend3_jail1'.3.20664.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21816.3>	<'rabbit at ksn-backend3_jail1'.3.20671.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21823.3>	<'rabbit at ksn-backend3_jail1'.3.20676.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21828.3>	<'rabbit at ksn-backend3_jail1'.3.20688.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21841.3>	<'rabbit at ksn-backend3_jail1'.3.20696.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21844.3>	<'rabbit at ksn-backend3_jail1'.3.20700.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21852.3>	<'rabbit at ksn-backend3_jail1'.3.20712.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21864.3>	<'rabbit at ksn-backend3_jail1'.3.20728.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21865.3>	<'rabbit at ksn-backend3_jail1'.3.20724.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21875.3>	<'rabbit at ksn-backend3_jail1'.3.20732.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21884.3>	<'rabbit at ksn-backend3_jail1'.3.20740.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21894.3>	<'rabbit at ksn-backend3_jail1'.3.20756.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21896.3>	<'rabbit at ksn-backend3_jail1'.3.20752.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21904.3>	<'rabbit at ksn-backend3_jail1'.3.20764.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21913.3>	<'rabbit at ksn-backend3_jail1'.3.20780.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21919.3>	<'rabbit at ksn-backend3_jail1'.3.20776.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21926.3>	<'rabbit at ksn-backend3_jail1'.3.20788.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21932.3>	<'rabbit at ksn-backend3_jail1'.3.20796.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21939.3>	<'rabbit at ksn-backend3_jail1'.3.20802.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21946.3>	<'rabbit at ksn-backend3_jail1'.3.20812.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21959.3>	<'rabbit at ksn-backend3_jail1'.3.20824.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21960.3>	<'rabbit at ksn-backend3_jail1'.3.20832.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21968.3>	<'rabbit at ksn-backend3_jail1'.3.20836.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21976.3>	<'rabbit at ksn-backend3_jail1'.3.20848.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21986.3>	<'rabbit at ksn-backend3_jail1'.3.20853.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.21997.3>	<'rabbit at ksn-backend3_jail1'.3.20876.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22000.3>	<'rabbit at ksn-backend3_jail1'.3.20864.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22009.3>	<'rabbit at ksn-backend3_jail1'.3.20884.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22012.3>	<'rabbit at ksn-backend3_jail1'.3.20894.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22020.3>	<'rabbit at ksn-backend3_jail1'.3.20900.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22031.3>	<'rabbit at ksn-backend3_jail1'.3.20912.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22040.3>	<'rabbit at ksn-backend3_jail1'.3.20920.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22053.3>	<'rabbit at ksn-backend3_jail1'.3.20924.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22054.3>	<'rabbit at ksn-backend3_jail1'.3.20940.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22062.3>	<'rabbit at ksn-backend3_jail1'.3.20952.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22072.3>	<'rabbit at ksn-backend3_jail1'.3.20956.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22077.3>	<'rabbit at ksn-backend3_jail1'.3.20960.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22086.3>	<'rabbit at ksn-backend3_jail1'.3.20968.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22096.3>	<'rabbit at ksn-backend3_jail1'.3.20980.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22105.3>	<'rabbit at ksn-backend3_jail1'.3.20991.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22119.3>	<'rabbit at ksn-backend3_jail1'.3.21004.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22120.3>	<'rabbit at ksn-backend3_jail1'.3.20999.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22129.3>	<'rabbit at ksn-backend3_jail1'.3.21012.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22132.3>	<'rabbit at ksn-backend3_jail1'.3.21016.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22144.3>	<'rabbit at ksn-backend3_jail1'.3.21024.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22155.3>	<'rabbit at ksn-backend3_jail1'.3.21032.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22156.3>	<'rabbit at ksn-backend3_jail1'.3.21038.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22167.3>	<'rabbit at ksn-backend3_jail1'.3.21044.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22176.3>	<'rabbit at ksn-backend3_jail1'.3.21056.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22189.3>	<'rabbit at ksn-backend3_jail1'.3.21064.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22191.3>	<'rabbit at ksn-backend3_jail1'.3.21068.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22199.3>	<'rabbit at ksn-backend3_jail1'.3.21080.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22211.3>	<'rabbit at ksn-backend3_jail1'.3.21091.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22212.3>	<'rabbit at ksn-backend3_jail1'.3.21096.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22223.3>	<'rabbit at ksn-backend3_jail1'.3.21100.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22232.3>	<'rabbit at ksn-backend3_jail1'.3.21112.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22244.3>	<'rabbit at ksn-backend3_jail1'.3.21120.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22255.3>	<'rabbit at ksn-backend3_jail1'.3.21127.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22256.3>	<'rabbit at ksn-backend3_jail1'.3.21136.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22269.3>	<'rabbit at ksn-backend3_jail1'.3.21144.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22271.3>	<'rabbit at ksn-backend3_jail1'.3.21150.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22279.3>	<'rabbit at ksn-backend3_jail1'.3.21156.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22288.3>	<'rabbit at ksn-backend3_jail1'.3.21168.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22301.3>	<'rabbit at ksn-backend3_jail1'.3.21176.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22303.3>	<'rabbit at ksn-backend3_jail1'.3.21180.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22312.3>	<'rabbit at ksn-backend3_jail1'.3.21188.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22320.3>	<'rabbit at ksn-backend3_jail1'.3.21198.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22332.3>	<'rabbit at ksn-backend3_jail1'.3.21216.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22336.3>	<'rabbit at ksn-backend3_jail1'.3.21206.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22344.3>	<'rabbit at ksn-backend3_jail1'.3.21224.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22357.3>	<'rabbit at ksn-backend3_jail1'.3.21235.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22360.3>	<'rabbit at ksn-backend3_jail1'.3.21243.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22368.3>	<'rabbit at ksn-backend3_jail1'.3.21248.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22377.3>	<'rabbit at ksn-backend3_jail1'.3.21260.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22391.3>	<'rabbit at ksn-backend3_jail1'.3.21267.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22392.3>	<'rabbit at ksn-backend3_jail1'.3.21272.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22403.3>	<'rabbit at ksn-backend3_jail1'.3.21284.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22413.3>	<'rabbit at ksn-backend3_jail1'.3.21291.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22416.3>	<'rabbit at ksn-backend3_jail1'.3.21296.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22426.3>	<'rabbit at ksn-backend3_jail1'.3.21308.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22436.3>	<'rabbit at ksn-backend3_jail1'.3.21316.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22444.3>	<'rabbit at ksn-backend3_jail1'.3.21323.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22449.3>	<'rabbit at ksn-backend3_jail1'.3.21332.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22457.3>	<'rabbit at ksn-backend3_jail1'.3.21344.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22468.3>	<'rabbit at ksn-backend3_jail1'.3.21357.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22472.3>	<'rabbit at ksn-backend3_jail1'.3.21352.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22480.3>	<'rabbit at ksn-backend3_jail1'.3.21368.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22491.3>	<'rabbit at ksn-backend3_jail1'.3.21380.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22503.3>	<'rabbit at ksn-backend3_jail1'.3.21388.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22513.3>	<'rabbit at ksn-backend3_jail1'.3.21399.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22516.3>	<'rabbit at ksn-backend3_jail1'.3.21405.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22524.3>	<'rabbit at ksn-backend3_jail1'.3.21412.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22539.3>	<'rabbit at ksn-backend3_jail1'.3.21420.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22540.3>	<'rabbit at ksn-backend3_jail1'.3.21428.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22548.3>	<'rabbit at ksn-backend3_jail1'.3.21440.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22556.3>	<'rabbit at ksn-backend3_jail1'.3.21448.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22568.3>	<'rabbit at ksn-backend3_jail1'.3.21454.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22577.3>	<'rabbit at ksn-backend3_jail1'.3.21464.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22580.3>	<'rabbit at ksn-backend3_jail1'.3.21472.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22588.3>	<'rabbit at ksn-backend3_jail1'.3.21480.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22603.3>	<'rabbit at ksn-backend3_jail1'.3.21486.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22604.3>	<'rabbit at ksn-backend3_jail1'.3.21496.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22612.3>	<'rabbit at ksn-backend3_jail1'.3.21504.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22620.3>	<'rabbit at ksn-backend3_jail1'.3.21512.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22635.3>	<'rabbit at ksn-backend3_jail1'.3.21520.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22636.3>	<'rabbit at ksn-backend3_jail1'.3.21528.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22647.3>	<'rabbit at ksn-backend3_jail1'.3.21532.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22656.3>	<'rabbit at ksn-backend3_jail1'.3.21543.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22663.3>	<'rabbit at ksn-backend3_jail1'.3.21548.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22668.3>	<'rabbit at ksn-backend3_jail1'.3.21556.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22683.3>	<'rabbit at ksn-backend3_jail1'.3.21561.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22684.3>	<'rabbit at ksn-backend3_jail1'.3.21572.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22692.3>	<'rabbit at ksn-backend3_jail1'.3.21584.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22700.3>	<'rabbit at ksn-backend3_jail1'.3.21592.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22712.3>	<'rabbit at ksn-backend3_jail1'.3.21599.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22727.3>	<'rabbit at ksn-backend3_jail1'.3.21616.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22728.3>	<'rabbit at ksn-backend3_jail1'.3.21604.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22736.3>	<'rabbit at ksn-backend3_jail1'.3.21624.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22744.3>	<'rabbit at ksn-backend3_jail1'.3.21628.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22759.3>	<'rabbit at ksn-backend3_jail1'.3.21652.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22760.3>	<'rabbit at ksn-backend3_jail1'.3.21640.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22768.3>	<'rabbit at ksn-backend3_jail1'.3.21660.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22778.3>	<'rabbit at ksn-backend3_jail1'.3.21672.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22791.3>	<'rabbit at ksn-backend3_jail1'.3.21676.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22792.3>	<'rabbit at ksn-backend3_jail1'.3.21684.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22802.3>	<'rabbit at ksn-backend3_jail1'.3.21696.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22812.3>	<'rabbit at ksn-backend3_jail1'.3.21704.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22822.3>	<'rabbit at ksn-backend3_jail1'.3.21708.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22826.3>	<'rabbit at ksn-backend3_jail1'.3.21720.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22835.3>	<'rabbit at ksn-backend3_jail1'.3.21728.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22846.3>	<'rabbit at ksn-backend3_jail1'.3.21735.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22855.3>	<'rabbit at ksn-backend3_jail1'.3.21748.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22858.3>	<'rabbit at ksn-backend3_jail1'.3.21744.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22868.3>	<'rabbit at ksn-backend3_jail1'.3.21760.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22876.3>	<'rabbit at ksn-backend3_jail1'.3.21768.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22886.3>	<'rabbit at ksn-backend3_jail1'.3.21784.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22891.3>	<'rabbit at ksn-backend3_jail1'.3.21777.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22901.3>	<'rabbit at ksn-backend3_jail1'.3.21792.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22904.3>	<'rabbit at ksn-backend3_jail1'.3.21796.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22912.3>	<'rabbit at ksn-backend3_jail1'.3.21804.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22931.3>	<'rabbit at ksn-backend3_jail1'.3.21824.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22932.3>	<'rabbit at ksn-backend3_jail1'.3.21815.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22940.3>	<'rabbit at ksn-backend3_jail1'.3.21832.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22948.3>	<'rabbit at ksn-backend3_jail1'.3.21836.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22955.3>	<'rabbit at ksn-backend3_jail1'.3.21848.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22964.3>	<'rabbit at ksn-backend3_jail1'.3.21856.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22972.3>	<'rabbit at ksn-backend3_jail1'.3.21868.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22982.3>	<'rabbit at ksn-backend3_jail1'.3.21876.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22993.3>	<'rabbit at ksn-backend3_jail1'.3.21888.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.22996.3>	<'rabbit at ksn-backend3_jail1'.3.21883.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23008.3>	<'rabbit at ksn-backend3_jail1'.3.21900.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23016.3>	<'rabbit at ksn-backend3_jail1'.3.21908.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23024.3>	<'rabbit at ksn-backend3_jail1'.3.21920.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23034.3>	<'rabbit at ksn-backend3_jail1'.3.21928.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23044.3>	<'rabbit at ksn-backend3_jail1'.3.21940.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23052.3>	<'rabbit at ksn-backend3_jail1'.3.21948.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23060.3>	<'rabbit at ksn-backend3_jail1'.3.21956.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23071.3>	<'rabbit at ksn-backend3_jail1'.3.21966.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23081.3>	<'rabbit at ksn-backend3_jail1'.3.21972.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23084.3>	<'rabbit at ksn-backend3_jail1'.3.21980.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23092.3>	<'rabbit at ksn-backend3_jail1'.3.21988.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23108.3>	<'rabbit at ksn-backend3_jail1'.3.22004.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23110.3>	<'rabbit at ksn-backend3_jail1'.3.21993.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23116.3>	<'rabbit at ksn-backend3_jail1'.3.22016.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23128.3>	<'rabbit at ksn-backend3_jail1'.3.22024.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23140.3>	<'rabbit at ksn-backend3_jail1'.3.22036.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23142.3>	<'rabbit at ksn-backend3_jail1'.3.22032.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23152.3>	<'rabbit at ksn-backend3_jail1'.3.22044.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23160.3>	<'rabbit at ksn-backend3_jail1'.3.22056.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23175.3>	<'rabbit at ksn-backend3_jail1'.3.22064.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23176.3>	<'rabbit at ksn-backend3_jail1'.3.22068.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23186.3>	<'rabbit at ksn-backend3_jail1'.3.22080.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23199.3>	<'rabbit at ksn-backend3_jail1'.3.22088.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23200.3>	<'rabbit at ksn-backend3_jail1'.3.22095.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23208.3>	<'rabbit at ksn-backend3_jail1'.3.22100.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23218.3>	<'rabbit at ksn-backend3_jail1'.3.22108.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23231.3>	<'rabbit at ksn-backend3_jail1'.3.22113.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23232.3>	<'rabbit at ksn-backend3_jail1'.3.22124.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23240.3>	<'rabbit at ksn-backend3_jail1'.3.22136.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23252.3>	<'rabbit at ksn-backend3_jail1'.3.22140.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23254.3>	<'rabbit at ksn-backend3_jail1'.3.22149.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23262.3>	<'rabbit at ksn-backend3_jail1'.3.22160.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23272.3>	<'rabbit at ksn-backend3_jail1'.3.22173.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23276.3>	<'rabbit at ksn-backend3_jail1'.3.22168.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23284.3>	<'rabbit at ksn-backend3_jail1'.3.22180.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23296.3>	<'rabbit at ksn-backend3_jail1'.3.22192.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23307.3>	<'rabbit at ksn-backend3_jail1'.3.22200.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23309.3>	<'rabbit at ksn-backend3_jail1'.3.22204.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23319.3>	<'rabbit at ksn-backend3_jail1'.3.22216.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23331.3>	<'rabbit at ksn-backend3_jail1'.3.22224.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23332.3>	<'rabbit at ksn-backend3_jail1'.3.22228.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23343.3>	<'rabbit at ksn-backend3_jail1'.3.22240.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23345.3>	<'rabbit at ksn-backend3_jail1'.3.22236.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23356.3>	<'rabbit at ksn-backend3_jail1'.3.22248.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23364.3>	<'rabbit at ksn-backend3_jail1'.3.22260.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23376.3>	<'rabbit at ksn-backend3_jail1'.3.22272.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23387.3>	<'rabbit at ksn-backend3_jail1'.3.22280.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23388.3>	<'rabbit at ksn-backend3_jail1'.3.22284.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23398.3>	<'rabbit at ksn-backend3_jail1'.3.22292.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23408.3>	<'rabbit at ksn-backend3_jail1'.3.22304.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23421.3>	<'rabbit at ksn-backend3_jail1'.3.22309.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23424.3>	<'rabbit at ksn-backend3_jail1'.3.22316.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23434.3>	<'rabbit at ksn-backend3_jail1'.3.22324.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23436.3>	<'rabbit at ksn-backend3_jail1'.3.22331.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23453.3>	<'rabbit at ksn-backend3_jail1'.3.22348.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23456.3>	<'rabbit at ksn-backend3_jail1'.3.22340.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23468.3>	<'rabbit at ksn-backend3_jail1'.3.22355.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23476.3>	<'rabbit at ksn-backend3_jail1'.3.22372.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23484.3>	<'rabbit at ksn-backend3_jail1'.3.22364.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23491.3>	<'rabbit at ksn-backend3_jail1'.3.22384.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23492.3>	<'rabbit at ksn-backend3_jail1'.3.22380.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23505.3>	<'rabbit at ksn-backend3_jail1'.3.22396.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23515.3>	<'rabbit at ksn-backend3_jail1'.3.22408.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23516.3>	<'rabbit at ksn-backend3_jail1'.3.22404.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23524.3>	<'rabbit at ksn-backend3_jail1'.3.22420.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23535.3>	<'rabbit at ksn-backend3_jail1'.3.22428.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23536.3>	<'rabbit at ksn-backend3_jail1'.3.22433.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23540.3>	<'rabbit at ksn-backend3_jail1'.3.22440.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23544.3>	<'rabbit at ksn-backend3_jail1'.3.22452.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23548.3>	<'rabbit at ksn-backend3_jail1'.3.22460.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23554.3>	<'rabbit at ksn-backend3_jail1'.3.22476.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23556.3>	<'rabbit at ksn-backend3_jail1'.3.22464.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23560.3>	<'rabbit at ksn-backend3_jail1'.3.22484.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23565.3>	<'rabbit at ksn-backend3_jail1'.3.22492.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23568.3>	<'rabbit at ksn-backend3_jail1'.3.22496.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23575.3>	<'rabbit at ksn-backend3_jail1'.3.22511.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23576.3>	<'rabbit at ksn-backend3_jail1'.3.22504.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23580.3>	<'rabbit at ksn-backend3_jail1'.3.22520.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23584.3>	<'rabbit at ksn-backend3_jail1'.3.22528.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23588.3>	<'rabbit at ksn-backend3_jail1'.3.22536.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23595.3>	<'rabbit at ksn-backend3_jail1'.3.22545.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23596.3>	<'rabbit at ksn-backend3_jail1'.3.22552.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23600.3>	<'rabbit at ksn-backend3_jail1'.3.22560.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23605.3>	<'rabbit at ksn-backend3_jail1'.3.22573.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23608.3>	<'rabbit at ksn-backend3_jail1'.3.22567.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23612.3>	<'rabbit at ksn-backend3_jail1'.3.22584.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23616.3>	<'rabbit at ksn-backend3_jail1'.3.22592.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23620.3>	<'rabbit at ksn-backend3_jail1'.3.22608.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23624.3>	<'rabbit at ksn-backend3_jail1'.3.22600.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23628.3>	<'rabbit at ksn-backend3_jail1'.3.22616.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23635.3>	<'rabbit at ksn-backend3_jail1'.3.22624.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23636.3>	<'rabbit at ksn-backend3_jail1'.3.22628.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23640.3>	<'rabbit at ksn-backend3_jail1'.3.22640.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23644.3>	<'rabbit at ksn-backend3_jail1'.3.22648.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23651.3>	<'rabbit at ksn-backend3_jail1'.3.22653.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23652.3>	<'rabbit at ksn-backend3_jail1'.3.22664.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23656.3>	<'rabbit at ksn-backend3_jail1'.3.22672.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23660.3>	<'rabbit at ksn-backend3_jail1'.3.22680.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23665.3>	<'rabbit at ksn-backend3_jail1'.3.22696.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23668.3>	<'rabbit at ksn-backend3_jail1'.3.22688.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23675.3>	<'rabbit at ksn-backend3_jail1'.3.22704.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23676.3>	<'rabbit at ksn-backend3_jail1'.3.22708.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23680.3>	<'rabbit at ksn-backend3_jail1'.3.22716.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23684.3>	<'rabbit at ksn-backend3_jail1'.3.22726.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23689.3>	<'rabbit at ksn-backend3_jail1'.3.22740.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23692.3>	<'rabbit at ksn-backend3_jail1'.3.22732.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23696.3>	<'rabbit at ksn-backend3_jail1'.3.22748.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23703.3>	<'rabbit at ksn-backend3_jail1'.3.22766.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23704.3>	<'rabbit at ksn-backend3_jail1'.3.22752.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23708.3>	<'rabbit at ksn-backend3_jail1'.3.22772.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23712.3>	<'rabbit at ksn-backend3_jail1'.3.22780.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23716.3>	<'rabbit at ksn-backend3_jail1'.3.22784.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23726.3>	<'rabbit at ksn-backend3_jail1'.3.22808.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23727.3>	<'rabbit at ksn-backend3_jail1'.3.22796.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23728.3>	<'rabbit at ksn-backend3_jail1'.3.22804.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23732.3>	<'rabbit at ksn-backend3_jail1'.3.22816.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23736.3>	<'rabbit at ksn-backend3_jail1'.3.22828.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23743.3>	<'rabbit at ksn-backend3_jail1'.3.22836.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23744.3>	<'rabbit at ksn-backend3_jail1'.3.22840.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23748.3>	<'rabbit at ksn-backend3_jail1'.3.22848.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23752.3>	<'rabbit at ksn-backend3_jail1'.3.22860.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23757.3>	<'rabbit at ksn-backend3_jail1'.3.22872.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23760.3>	<'rabbit at ksn-backend3_jail1'.3.22865.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23764.3>	<'rabbit at ksn-backend3_jail1'.3.22880.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23768.3>	<'rabbit at ksn-backend3_jail1'.3.22892.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23772.3>	<'rabbit at ksn-backend3_jail1'.3.22900.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23776.3>	<'rabbit at ksn-backend3_jail1'.3.22908.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23780.3>	<'rabbit at ksn-backend3_jail1'.3.22916.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23787.3>	<'rabbit at ksn-backend3_jail1'.3.22920.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23788.3>	<'rabbit at ksn-backend3_jail1'.3.22925.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23793.3>	<'rabbit at ksn-backend3_jail1'.3.22936.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23796.3>	<'rabbit at ksn-backend3_jail1'.3.22944.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23803.3>	<'rabbit at ksn-backend3_jail1'.3.22956.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23804.3>	<'rabbit at ksn-backend3_jail1'.3.22960.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23811.3>	<'rabbit at ksn-backend3_jail1'.3.22968.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23812.3>	<'rabbit at ksn-backend3_jail1'.3.22976.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23816.3>	<'rabbit at ksn-backend3_jail1'.3.22984.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23820.3>	<'rabbit at ksn-backend3_jail1'.3.22991.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23827.3>	<'rabbit at ksn-backend3_jail1'.3.23000.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23828.3>	<'rabbit at ksn-backend3_jail1'.3.23004.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23835.3>	<'rabbit at ksn-backend3_jail1'.3.23012.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23836.3>	<'rabbit at ksn-backend3_jail1'.3.23020.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23843.3>	<'rabbit at ksn-backend3_jail1'.3.23028.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23844.3>	<'rabbit at ksn-backend3_jail1'.3.23036.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23848.3>	<'rabbit at ksn-backend3_jail1'.3.23040.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23855.3>	<'rabbit at ksn-backend3_jail1'.3.23056.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23856.3>	<'rabbit at ksn-backend3_jail1'.3.23049.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23860.3>	<'rabbit at ksn-backend3_jail1'.3.23064.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23864.3>	<'rabbit at ksn-backend3_jail1'.3.23072.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23869.3>	<'rabbit at ksn-backend3_jail1'.3.23077.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23872.3>	<'rabbit at ksn-backend3_jail1'.3.23088.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23879.3>	<'rabbit at ksn-backend3_jail1'.3.23096.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23880.3>	<'rabbit at ksn-backend3_jail1'.3.23100.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23884.3>	<'rabbit at ksn-backend3_jail1'.3.23112.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23888.3>	<'rabbit at ksn-backend3_jail1'.3.23120.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23892.3>	<'rabbit at ksn-backend3_jail1'.3.23127.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23896.3>	<'rabbit at ksn-backend3_jail1'.3.23144.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23903.3>	<'rabbit at ksn-backend3_jail1'.3.23156.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23904.3>	<'rabbit at ksn-backend3_jail1'.3.23151.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23908.3>	<'rabbit at ksn-backend3_jail1'.3.23164.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23914.3>	<'rabbit at ksn-backend3_jail1'.3.23180.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23916.3>	<'rabbit at ksn-backend3_jail1'.3.23168.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23920.3>	<'rabbit at ksn-backend3_jail1'.3.23188.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23927.3>	<'rabbit at ksn-backend3_jail1'.3.23204.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23928.3>	<'rabbit at ksn-backend3_jail1'.3.23198.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23932.3>	<'rabbit at ksn-backend3_jail1'.3.23212.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23936.3>	<'rabbit at ksn-backend3_jail1'.3.23220.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23940.3>	<'rabbit at ksn-backend3_jail1'.3.23226.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23949.3>	<'rabbit at ksn-backend3_jail1'.3.23239.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23950.3>	<'rabbit at ksn-backend3_jail1'.3.23244.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23954.3>	<'rabbit at ksn-backend3_jail1'.3.23256.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23961.3>	<'rabbit at ksn-backend3_jail1'.3.23264.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23962.3>	<'rabbit at ksn-backend3_jail1'.3.23268.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23966.3>	<'rabbit at ksn-backend3_jail1'.3.23280.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23970.3>	<'rabbit at ksn-backend3_jail1'.3.23288.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23978.3>	<'rabbit at ksn-backend3_jail1'.3.23295.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23979.3>	<'rabbit at ksn-backend3_jail1'.3.23300.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23983.3>	<'rabbit at ksn-backend3_jail1'.3.23312.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23987.3>	<'rabbit at ksn-backend3_jail1'.3.23320.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23992.3>	<'rabbit at ksn-backend3_jail1'.3.23336.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.23996.3>	<'rabbit at ksn-backend3_jail1'.3.23348.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24000.3>	<'rabbit at ksn-backend3_jail1'.3.23360.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24004.3>	<'rabbit at ksn-backend3_jail1'.3.23368.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24008.3>	<'rabbit at ksn-backend3_jail1'.3.23372.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24012.3>	<'rabbit at ksn-backend3_jail1'.3.23392.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24019.3>	<'rabbit at ksn-backend3_jail1'.3.23400.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24020.3>	<'rabbit at ksn-backend3_jail1'.3.23404.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24024.3>	<'rabbit at ksn-backend3_jail1'.3.23412.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24028.3>	<'rabbit at ksn-backend3_jail1'.3.23423.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24032.3>	<'rabbit at ksn-backend3_jail1'.3.23440.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24037.3>	<'rabbit at ksn-backend3_jail1'.3.23444.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24040.3>	<'rabbit at ksn-backend3_jail1'.3.23448.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24044.3>	<'rabbit at ksn-backend3_jail1'.3.23460.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24048.3>	<'rabbit at ksn-backend3_jail1'.3.23464.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24055.3>	<'rabbit at ksn-backend3_jail1'.3.23480.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24056.3>	<'rabbit at ksn-backend3_jail1'.3.23472.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24063.3>	<'rabbit at ksn-backend3_jail1'.3.23496.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24064.3>	<'rabbit at ksn-backend3_jail1'.3.23500.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24068.3>	<'rabbit at ksn-backend3_jail1'.3.23508.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24075.3>	<'rabbit at ksn-backend3_jail1'.3.23528.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24076.3>	<'rabbit at ksn-backend3_jail1'.3.23520.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24736.3>	<'rabbit at ksn-backend3_jail1'.3.24644.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24772.3>	<'rabbit at ksn-backend3_jail1'.3.24648.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24776.3>	<'rabbit at ksn-backend3_jail1'.3.24652.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24787.3>	<'rabbit at ksn-backend3_jail1'.3.24656.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24795.3>	<'rabbit at ksn-backend3_jail1'.3.24660.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24803.3>	<'rabbit at ksn-backend3_jail1'.3.24664.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24823.3>	<'rabbit at ksn-backend3_jail1'.3.24668.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24839.3>	<'rabbit at ksn-backend3_jail1'.3.24672.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24848.3>	<'rabbit at ksn-backend3_jail1'.3.24676.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24860.3>	<'rabbit at ksn-backend3_jail1'.3.24680.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24868.3>	<'rabbit at ksn-backend3_jail1'.3.24684.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24876.3>	<'rabbit at ksn-backend3_jail1'.3.24688.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24888.3>	<'rabbit at ksn-backend3_jail1'.3.24692.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24904.3>	<'rabbit at ksn-backend3_jail1'.3.24696.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24908.3>	<'rabbit at ksn-backend3_jail1'.3.24700.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24920.3>	<'rabbit at ksn-backend3_jail1'.3.24704.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24928.3>	<'rabbit at ksn-backend3_jail1'.3.24708.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24932.3>	<'rabbit at ksn-backend3_jail1'.3.24712.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24952.3>	<'rabbit at ksn-backend3_jail1'.3.24716.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24956.3>	<'rabbit at ksn-backend3_jail1'.3.24720.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24962.3>	<'rabbit at ksn-backend3_jail1'.3.24724.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24972.3>	<'rabbit at ksn-backend3_jail1'.3.24728.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24976.3>	<'rabbit at ksn-backend3_jail1'.3.24732.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.24995.3>	<'rabbit at ksn-backend3_jail1'.3.24740.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25000.3>	<'rabbit at ksn-backend3_jail1'.3.24744.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25008.3>	<'rabbit at ksn-backend3_jail1'.3.24748.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25015.3>	<'rabbit at ksn-backend3_jail1'.3.24752.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25022.3>	<'rabbit at ksn-backend3_jail1'.3.24756.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25036.3>	<'rabbit at ksn-backend3_jail1'.3.24760.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25076.3>	<'rabbit at ksn-backend3_jail1'.3.24764.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25084.3>	<'rabbit at ksn-backend3_jail1'.3.24768.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25136.3>	<'rabbit at ksn-backend3_jail1'.3.24780.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25158.3>	<'rabbit at ksn-backend3_jail1'.3.24788.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25168.3>	<'rabbit at ksn-backend3_jail1'.3.24796.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25176.3>	<'rabbit at ksn-backend3_jail1'.3.24804.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25187.3>	<'rabbit at ksn-backend3_jail1'.3.24808.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25200.3>	<'rabbit at ksn-backend3_jail1'.3.24812.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25212.3>	<'rabbit at ksn-backend3_jail1'.3.24816.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25216.3>	<'rabbit at ksn-backend3_jail1'.3.24824.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25234.3>	<'rabbit at ksn-backend3_jail1'.3.24828.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25244.3>	<'rabbit at ksn-backend3_jail1'.3.24832.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25260.3>	<'rabbit at ksn-backend3_jail1'.3.24840.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25268.3>	<'rabbit at ksn-backend3_jail1'.3.24844.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25284.3>	<'rabbit at ksn-backend3_jail1'.3.24852.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25294.3>	<'rabbit at ksn-backend3_jail1'.3.24856.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25303.3>	<'rabbit at ksn-backend3_jail1'.3.24866.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25312.3>	<'rabbit at ksn-backend3_jail1'.3.24875.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25323.3>	<'rabbit at ksn-backend3_jail1'.3.24880.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25341.3>	<'rabbit at ksn-backend3_jail1'.3.24887.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25357.3>	<'rabbit at ksn-backend3_jail1'.3.24892.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25368.3>	<'rabbit at ksn-backend3_jail1'.3.24896.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25379.3>	<'rabbit at ksn-backend3_jail1'.3.24900.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25388.3>	<'rabbit at ksn-backend3_jail1'.3.24912.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25407.3>	<'rabbit at ksn-backend3_jail1'.3.24924.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25408.3>	<'rabbit at ksn-backend3_jail1'.3.24919.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25432.3>	<'rabbit at ksn-backend3_jail1'.3.24936.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25453.3>	<'rabbit at ksn-backend3_jail1'.3.24944.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25458.3>	<'rabbit at ksn-backend3_jail1'.3.24940.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25468.3>	<'rabbit at ksn-backend3_jail1'.3.24948.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25511.3>	<'rabbit at ksn-backend3_jail1'.3.24971.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25512.3>	<'rabbit at ksn-backend3_jail1'.3.24964.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25531.3>	<'rabbit at ksn-backend3_jail1'.3.24980.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25570.3>	<'rabbit at ksn-backend3_jail1'.3.24984.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25580.3>	<'rabbit at ksn-backend3_jail1'.3.24988.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25597.3>	<'rabbit at ksn-backend3_jail1'.3.24996.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25613.3>	<'rabbit at ksn-backend3_jail1'.3.25004.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25665.3>	<'rabbit at ksn-backend3_jail1'.3.25016.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25680.3>	<'rabbit at ksn-backend3_jail1'.3.25024.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25681.3>	<'rabbit at ksn-backend3_jail1'.3.25028.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25690.3>	<'rabbit at ksn-backend3_jail1'.3.25035.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25701.3>	<'rabbit at ksn-backend3_jail1'.3.25040.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25709.3>	<'rabbit at ksn-backend3_jail1'.3.25044.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25724.3>	<'rabbit at ksn-backend3_jail1'.3.25048.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25725.3>	<'rabbit at ksn-backend3_jail1'.3.25052.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25736.3>	<'rabbit at ksn-backend3_jail1'.3.25056.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25737.3>	<'rabbit at ksn-backend3_jail1'.3.25060.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25746.3>	<'rabbit at ksn-backend3_jail1'.3.25064.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25760.3>	<'rabbit at ksn-backend3_jail1'.3.25072.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25761.3>	<'rabbit at ksn-backend3_jail1'.3.25068.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25769.3>	<'rabbit at ksn-backend3_jail1'.3.25080.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25781.3>	<'rabbit at ksn-backend3_jail1'.3.25088.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25789.3>	<'rabbit at ksn-backend3_jail1'.3.25092.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25801.3>	<'rabbit at ksn-backend3_jail1'.3.25096.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25818.3>	<'rabbit at ksn-backend3_jail1'.3.25100.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25819.3>	<'rabbit at ksn-backend3_jail1'.3.25104.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25827.3>	<'rabbit at ksn-backend3_jail1'.3.25108.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25845.3>	<'rabbit at ksn-backend3_jail1'.3.25112.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25853.3>	<'rabbit at ksn-backend3_jail1'.3.25116.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25864.3>	<'rabbit at ksn-backend3_jail1'.3.25120.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25878.3>	<'rabbit at ksn-backend3_jail1'.3.25128.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25879.3>	<'rabbit at ksn-backend3_jail1'.3.25124.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25887.3>	<'rabbit at ksn-backend3_jail1'.3.25132.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25901.3>	<'rabbit at ksn-backend3_jail1'.3.25140.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25904.3>	<'rabbit at ksn-backend3_jail1'.3.25144.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25916.3>	<'rabbit at ksn-backend3_jail1'.3.25148.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25924.3>	<'rabbit at ksn-backend3_jail1'.3.25152.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25936.3>	<'rabbit at ksn-backend3_jail1'.3.25160.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25952.3>	<'rabbit at ksn-backend3_jail1'.3.25164.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25961.3>	<'rabbit at ksn-backend3_jail1'.3.25172.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25972.3>	<'rabbit at ksn-backend3_jail1'.3.25180.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25981.3>	<'rabbit at ksn-backend3_jail1'.3.25188.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.25989.3>	<'rabbit at ksn-backend3_jail1'.3.25192.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26001.3>	<'rabbit at ksn-backend3_jail1'.3.25199.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26010.3>	<'rabbit at ksn-backend3_jail1'.3.25204.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26026.3>	<'rabbit at ksn-backend3_jail1'.3.25208.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26058.3>	<'rabbit at ksn-backend3_jail1'.3.25220.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26063.3>	<'rabbit at ksn-backend3_jail1'.3.25224.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26073.3>	<'rabbit at ksn-backend3_jail1'.3.25228.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26095.3>	<'rabbit at ksn-backend3_jail1'.3.25236.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26108.3>	<'rabbit at ksn-backend3_jail1'.3.25248.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26110.3>	<'rabbit at ksn-backend3_jail1'.3.25243.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26122.3>	<'rabbit at ksn-backend3_jail1'.3.25256.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26123.3>	<'rabbit at ksn-backend3_jail1'.3.25252.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26150.3>	<'rabbit at ksn-backend3_jail1'.3.25272.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26151.3>	<'rabbit at ksn-backend3_jail1'.3.25267.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26163.3>	<'rabbit at ksn-backend3_jail1'.3.25276.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26179.3>	<'rabbit at ksn-backend3_jail1'.3.25281.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26191.3>	<'rabbit at ksn-backend3_jail1'.3.25288.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26201.3>	<'rabbit at ksn-backend3_jail1'.3.25296.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26212.3>	<'rabbit at ksn-backend3_jail1'.3.25304.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26221.3>	<'rabbit at ksn-backend3_jail1'.3.25308.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26235.3>	<'rabbit at ksn-backend3_jail1'.3.25316.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26236.3>	<'rabbit at ksn-backend3_jail1'.3.25324.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26253.3>	<'rabbit at ksn-backend3_jail1'.3.25328.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26262.3>	<'rabbit at ksn-backend3_jail1'.3.25332.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26273.3>	<'rabbit at ksn-backend3_jail1'.3.25336.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26286.3>	<'rabbit at ksn-backend3_jail1'.3.25344.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26288.3>	<'rabbit at ksn-backend3_jail1'.3.25348.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26297.3>	<'rabbit at ksn-backend3_jail1'.3.25352.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26308.3>	<'rabbit at ksn-backend3_jail1'.3.25360.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26309.3>	<'rabbit at ksn-backend3_jail1'.3.25364.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26317.3>	<'rabbit at ksn-backend3_jail1'.3.25372.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26321.3>	<'rabbit at ksn-backend3_jail1'.3.25380.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26326.3>	<'rabbit at ksn-backend3_jail1'.3.25386.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26329.3>	<'rabbit at ksn-backend3_jail1'.3.25392.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26334.3>	<'rabbit at ksn-backend3_jail1'.3.25396.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26337.3>	<'rabbit at ksn-backend3_jail1'.3.25402.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26342.3>	<'rabbit at ksn-backend3_jail1'.3.25412.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26347.3>	<'rabbit at ksn-backend3_jail1'.3.25420.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26350.3>	<'rabbit at ksn-backend3_jail1'.3.25416.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26354.3>	<'rabbit at ksn-backend3_jail1'.3.25424.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26361.3>	<'rabbit at ksn-backend3_jail1'.3.25436.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26362.3>	<'rabbit at ksn-backend3_jail1'.3.25429.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26369.3>	<'rabbit at ksn-backend3_jail1'.3.25444.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26370.3>	<'rabbit at ksn-backend3_jail1'.3.25440.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26374.3>	<'rabbit at ksn-backend3_jail1'.3.25448.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26378.3>	<'rabbit at ksn-backend3_jail1'.3.25460.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26385.3>	<'rabbit at ksn-backend3_jail1'.3.25467.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26386.3>	<'rabbit at ksn-backend3_jail1'.3.25472.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26391.3>	<'rabbit at ksn-backend3_jail1'.3.25476.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26394.3>	<'rabbit at ksn-backend3_jail1'.3.25480.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26401.3>	<'rabbit at ksn-backend3_jail1'.3.25484.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26402.3>	<'rabbit at ksn-backend3_jail1'.3.25488.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26406.3>	<'rabbit at ksn-backend3_jail1'.3.25492.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26410.3>	<'rabbit at ksn-backend3_jail1'.3.25496.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26417.3>	<'rabbit at ksn-backend3_jail1'.3.25500.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26418.3>	<'rabbit at ksn-backend3_jail1'.3.25504.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26422.3>	<'rabbit at ksn-backend3_jail1'.3.25519.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26429.3>	<'rabbit at ksn-backend3_jail1'.3.25523.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26430.3>	<'rabbit at ksn-backend3_jail1'.3.25530.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26434.3>	<'rabbit at ksn-backend3_jail1'.3.25535.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26441.3>	<'rabbit at ksn-backend3_jail1'.3.25539.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26442.3>	<'rabbit at ksn-backend3_jail1'.3.25544.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26449.3>	<'rabbit at ksn-backend3_jail1'.3.25552.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26450.3>	<'rabbit at ksn-backend3_jail1'.3.25548.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26457.3>	<'rabbit at ksn-backend3_jail1'.3.25560.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26458.3>	<'rabbit at ksn-backend3_jail1'.3.25556.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26462.3>	<'rabbit at ksn-backend3_jail1'.3.25564.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26467.3>	<'rabbit at ksn-backend3_jail1'.3.25576.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26470.3>	<'rabbit at ksn-backend3_jail1'.3.25572.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26474.3>	<'rabbit at ksn-backend3_jail1'.3.25585.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26479.3>	<'rabbit at ksn-backend3_jail1'.3.25589.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26482.3>	<'rabbit at ksn-backend3_jail1'.3.25593.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26486.3>	<'rabbit at ksn-backend3_jail1'.3.25601.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26492.3>	<'rabbit at ksn-backend3_jail1'.3.25605.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26495.3>	<'rabbit at ksn-backend3_jail1'.3.25612.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26502.3>	<'rabbit at ksn-backend3_jail1'.3.25621.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26503.3>	<'rabbit at ksn-backend3_jail1'.3.25617.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26507.3>	<'rabbit at ksn-backend3_jail1'.3.25625.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26514.3>	<'rabbit at ksn-backend3_jail1'.3.25633.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26515.3>	<'rabbit at ksn-backend3_jail1'.3.25629.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26522.3>	<'rabbit at ksn-backend3_jail1'.3.25637.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26523.3>	<'rabbit at ksn-backend3_jail1'.3.25641.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26527.3>	<'rabbit at ksn-backend3_jail1'.3.25645.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26534.3>	<'rabbit at ksn-backend3_jail1'.3.25649.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26535.3>	<'rabbit at ksn-backend3_jail1'.3.25653.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26542.3>	<'rabbit at ksn-backend3_jail1'.3.25661.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26543.3>	<'rabbit at ksn-backend3_jail1'.3.25657.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26550.3>	<'rabbit at ksn-backend3_jail1'.3.25669.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26551.3>	<'rabbit at ksn-backend3_jail1'.3.25673.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26555.3>	<'rabbit at ksn-backend3_jail1'.3.25685.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26562.3>	<'rabbit at ksn-backend3_jail1'.3.25698.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26563.3>	<'rabbit at ksn-backend3_jail1'.3.25693.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26567.3>	<'rabbit at ksn-backend3_jail1'.3.25705.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26571.3>	<'rabbit at ksn-backend3_jail1'.3.25713.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26578.3>	<'rabbit at ksn-backend3_jail1'.3.25729.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26579.3>	<'rabbit at ksn-backend3_jail1'.3.25723.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26583.3>	<'rabbit at ksn-backend3_jail1'.3.25741.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26587.3>	<'rabbit at ksn-backend3_jail1'.3.25749.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26592.3>	<'rabbit at ksn-backend3_jail1'.3.25759.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26595.3>	<'rabbit at ksn-backend3_jail1'.3.25765.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26600.3>	<'rabbit at ksn-backend3_jail1'.3.25773.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26607.3>	<'rabbit at ksn-backend3_jail1'.3.25780.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26608.3>	<'rabbit at ksn-backend3_jail1'.3.25785.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26612.3>	<'rabbit at ksn-backend3_jail1'.3.25793.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26619.3>	<'rabbit at ksn-backend3_jail1'.3.25800.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26620.3>	<'rabbit at ksn-backend3_jail1'.3.25805.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26624.3>	<'rabbit at ksn-backend3_jail1'.3.25809.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26628.3>	<'rabbit at ksn-backend3_jail1'.3.25821.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26632.3>	<'rabbit at ksn-backend3_jail1'.3.25829.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26636.3>	<'rabbit at ksn-backend3_jail1'.3.25833.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26641.3>	<'rabbit at ksn-backend3_jail1'.3.25837.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26645.3>	<'rabbit at ksn-backend3_jail1'.3.25842.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26650.3>	<'rabbit at ksn-backend3_jail1'.3.25852.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26653.3>	<'rabbit at ksn-backend3_jail1'.3.25860.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26657.3>	<'rabbit at ksn-backend3_jail1'.3.25868.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26661.3>	<'rabbit at ksn-backend3_jail1'.3.25880.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26668.3>	<'rabbit at ksn-backend3_jail1'.3.25888.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26669.3>	<'rabbit at ksn-backend3_jail1'.3.25892.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26673.3>	<'rabbit at ksn-backend3_jail1'.3.25903.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26680.3>	<'rabbit at ksn-backend3_jail1'.3.25908.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26681.3>	<'rabbit at ksn-backend3_jail1'.3.25914.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26685.3>	<'rabbit at ksn-backend3_jail1'.3.25920.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26692.3>	<'rabbit at ksn-backend3_jail1'.3.25928.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26693.3>	<'rabbit at ksn-backend3_jail1'.3.25933.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26697.3>	<'rabbit at ksn-backend3_jail1'.3.25940.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26701.3>	<'rabbit at ksn-backend3_jail1'.3.25944.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26705.3>	<'rabbit at ksn-backend3_jail1'.3.25950.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26709.3>	<'rabbit at ksn-backend3_jail1'.3.25957.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26713.3>	<'rabbit at ksn-backend3_jail1'.3.25965.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26718.3>	<'rabbit at ksn-backend3_jail1'.3.25973.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26721.3>	<'rabbit at ksn-backend3_jail1'.3.25978.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26725.3>	<'rabbit at ksn-backend3_jail1'.3.25985.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26732.3>	<'rabbit at ksn-backend3_jail1'.3.25993.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26733.3>	<'rabbit at ksn-backend3_jail1'.3.26000.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26737.3>	<'rabbit at ksn-backend3_jail1'.3.26006.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26741.3>	<'rabbit at ksn-backend3_jail1'.3.26014.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26745.3>	<'rabbit at ksn-backend3_jail1'.3.26018.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26749.3>	<'rabbit at ksn-backend3_jail1'.3.26022.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26756.3>	<'rabbit at ksn-backend3_jail1'.3.26030.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26757.3>	<'rabbit at ksn-backend3_jail1'.3.26034.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26764.3>	<'rabbit at ksn-backend3_jail1'.3.26042.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26765.3>	<'rabbit at ksn-backend3_jail1'.3.26038.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26770.3>	<'rabbit at ksn-backend3_jail1'.3.26050.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26773.3>	<'rabbit at ksn-backend3_jail1'.3.26046.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26777.3>	<'rabbit at ksn-backend3_jail1'.3.26054.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26781.3>	<'rabbit at ksn-backend3_jail1'.3.26066.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26788.3>	<'rabbit at ksn-backend3_jail1'.3.26074.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26789.3>	<'rabbit at ksn-backend3_jail1'.3.26078.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26793.3>	<'rabbit at ksn-backend3_jail1'.3.26082.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26797.3>	<'rabbit at ksn-backend3_jail1'.3.26087.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26801.3>	<'rabbit at ksn-backend3_jail1'.3.26091.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26805.3>	<'rabbit at ksn-backend3_jail1'.3.26099.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26810.3>	<'rabbit at ksn-backend3_jail1'.3.26111.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26813.3>	<'rabbit at ksn-backend3_jail1'.3.26115.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26817.3>	<'rabbit at ksn-backend3_jail1'.3.26127.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26824.3>	<'rabbit at ksn-backend3_jail1'.3.26131.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26825.3>	<'rabbit at ksn-backend3_jail1'.3.26135.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26832.3>	<'rabbit at ksn-backend3_jail1'.3.26139.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26833.3>	<'rabbit at ksn-backend3_jail1'.3.26143.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26837.3>	<'rabbit at ksn-backend3_jail1'.3.26155.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26844.3>	<'rabbit at ksn-backend3_jail1'.3.26162.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26845.3>	<'rabbit at ksn-backend3_jail1'.3.26167.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26852.3>	<'rabbit at ksn-backend3_jail1'.3.26175.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26853.3>	<'rabbit at ksn-backend3_jail1'.3.26171.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26857.3>	<'rabbit at ksn-backend3_jail1'.3.26183.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26864.3>	<'rabbit at ksn-backend3_jail1'.3.26190.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26865.3>	<'rabbit at ksn-backend3_jail1'.3.26196.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26872.3>	<'rabbit at ksn-backend3_jail1'.3.26208.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26873.3>	<'rabbit at ksn-backend3_jail1'.3.26204.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26877.3>	<'rabbit at ksn-backend3_jail1'.3.26217.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26881.3>	<'rabbit at ksn-backend3_jail1'.3.26225.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26888.3>	<'rabbit at ksn-backend3_jail1'.3.26241.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26889.3>	<'rabbit at ksn-backend3_jail1'.3.26237.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26896.3>	<'rabbit at ksn-backend3_jail1'.3.26249.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26897.3>	<'rabbit at ksn-backend3_jail1'.3.26245.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26901.3>	<'rabbit at ksn-backend3_jail1'.3.26257.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26906.3>	<'rabbit at ksn-backend3_jail1'.3.26265.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26909.3>	<'rabbit at ksn-backend3_jail1'.3.26269.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26913.3>	<'rabbit at ksn-backend3_jail1'.3.26277.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26917.3>	<'rabbit at ksn-backend3_jail1'.3.26289.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26921.3>	<'rabbit at ksn-backend3_jail1'.3.26296.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26928.3>	<'rabbit at ksn-backend3_jail1'.3.26307.3>	1	guest	/	false	false	0	0	0	0	0	0	false
<'rabbit at ksn-backend3_jail1'.3.26929.3>	<'rabbit at ksn-backend3_jail1'.3.26313.3>	1	guest	/	false	false	0	0	0	0	0	0	false

Queues on /:
pid	name	durable	auto_delete	arguments	owner_pid	slave_pids	synchronised_slave_pids	exclusive_consumer_pid	exclusive_consumer_tag	messages_ready	messages_unacknowledged	messages	consumers	memory	backing_queue_status
<'rabbit at ksn-backend3_jail1'.3.13615.3>	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13510.3>					0	0	0	1	7649536	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,611689}, {persistent_count,0}, {avg_ingress_rate,167.65935204486155}, {avg_egress_rate,167.65935204486155}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13653.3>	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.2	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13542.3>					0	0	0	1	55520	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,1401373}, {persistent_count,0}, {avg_ingress_rate,45.97585692813062}, {avg_egress_rate,45.97585692813062}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13654.3>	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.1	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13538.3>					0	0	0	1	12363568	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,1457208}, {persistent_count,0}, {avg_ingress_rate,187.19148468968703}, {avg_egress_rate,187.19148468968703}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13643.3>	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.2	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13530.3>					0	0	0	1	55760	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,2165669}, {persistent_count,0}, {avg_ingress_rate,175.18561847541542}, {avg_egress_rate,175.18561847541542}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13711.3>	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.BSS2.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13578.3>					0	0	0	1	113480	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13633.3>	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.1	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13522.3>					0	0	0	1	12363808	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,2193469}, {persistent_count,0}, {avg_ingress_rate,187.31167585725095}, {avg_egress_rate,187.31167585725095}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.19015.3>	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferBss2Receive.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.18926.3>					0	0	0	1	113480	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13687.3>	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.BSS2.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13562.3>					0	0	0	1	113480	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13731.3>	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_stat.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13623.3>					0	0	0	1	137888	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,73877}, {persistent_count,0}, {avg_ingress_rate,18.21125142711713}, {avg_egress_rate,18.21125142711713}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13591.3>	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.1	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13498.3>					0	0	0	1	55448	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,559032}, {persistent_count,0}, {avg_ingress_rate,36.613062156651466}, {avg_egress_rate,36.613062156651466}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13740.3>	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_pattern.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13678.3>					0	0	0	1	22040	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13696.3>	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.FA_BSS2.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13566.3>					0	0	0	1	22184	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13726.3>	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Pattern.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13613.3>					0	0	0	1	22040	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13644.3>	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.3	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13534.3>					0	0	0	1	55760	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,2211811}, {persistent_count,0}, {avg_ingress_rate,94.63724426238826}, {avg_egress_rate,94.63724426238826}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13663.3>	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13546.3>					0	0	0	1	55520	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,1438235}, {persistent_count,0}, {avg_ingress_rate,160.83553483646423}, {avg_egress_rate,160.83553483646423}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13701.3>	rabbitmq.queue.statistics.KSN-AMR.ksn_receive.BSS2_UDP.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13570.3>					0	0	0	1	113480	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13664.3>	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.4	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13550.3>					0	0	0	1	12363568	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,1410451}, {persistent_count,0}, {avg_ingress_rate,229.26193103221925}, {avg_egress_rate,229.26193103221925}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13706.3>	rabbitmq.queue.statistics.STS-KSNSTATS.MalwareStats.BufferBSS2UDPReceive.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13574.3>					0	0	0	1	113480	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13600.3>	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.4	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13502.3>					0	0	0	1	55520	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,666762}, {persistent_count,0}, {avg_ingress_rate,132.1389924251533}, {avg_egress_rate,132.1389924251533}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.18991.3>	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsDetectReceive.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.18910.3>					0	0	0	1	22040	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.14158.3>	rabbitmq.queue.statistics.BELKIN-W2K8.KIS2012.Lin.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13735.3>					0	0	0	1	141848	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,36186}, {persistent_count,0}, {avg_ingress_rate,0.32973513168236274}, {avg_egress_rate,0.32973513168236274}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.19009.3>	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPBSReceive.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.18918.3>					0	0	0	1	137888	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,59696}, {persistent_count,0}, {avg_ingress_rate,39.82263216007256}, {avg_egress_rate,39.82263216007256}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13721.3>	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Stat.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13586.3>					0	0	0	1	137888	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,70474}, {persistent_count,0}, {avg_ingress_rate,1.317683708229396}, {avg_egress_rate,1.317683708229396}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13608.3>	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.3	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13514.3>					0	0	0	1	55520	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,659135}, {persistent_count,0}, {avg_ingress_rate,56.73758701673335}, {avg_egress_rate,56.73758701673335}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13674.3>	rabbitmq.queue.statistics.sts-ksnstats.LicenseStat.LicenseStat.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13558.3>					0	0	0	1	141848	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,43026}, {persistent_count,0}, {avg_ingress_rate,3.9821987848246665}, {avg_egress_rate,3.9821987848246665}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13745.3>	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.PBS_DETECT.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13682.3>					0	0	0	1	22040	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13634.3>	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.4	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13526.3>					0	0	0	1	19393120	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,2150100}, {persistent_count,0}, {avg_ingress_rate,84.30938933482267}, {avg_egress_rate,84.30938933482267}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.19010.3>	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferFaBss2Receive.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.18922.3>					0	0	0	1	110464	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13601.3>	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.2	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13506.3>					0	0	0	1	55520	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,593790}, {persistent_count,0}, {avg_ingress_rate,41.27579985941052}, {avg_egress_rate,41.27579985941052}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13716.3>	rabbitmq.queue.statistics.KSN-AMR05.ksn_receive.BSS2_UDP.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13582.3>					0	0	0	1	113480	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13624.3>	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13518.3>					0	0	0	1	16027480	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,2196422}, {persistent_count,0}, {avg_ingress_rate,189.33446180714645}, {avg_egress_rate,189.33446180714645}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.13673.3>	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.3	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.13554.3>					0	0	0	1	12363568	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,1352637}, {persistent_count,0}, {avg_ingress_rate,256.4203185584516}, {avg_egress_rate,256.4203185584516}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at ksn-backend3_jail1'.3.19000.3>	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsPatternReceive.0	false	false	[]	<'rabbit at ksn-backend3_jail1'.3.18914.3>					0	0	0	1	22040	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,0}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]

Exchanges on /:
name	type	durable	auto_delete	internal	arguments
amq.direct	direct	true	false	false	[]
rabbitmq.exchanger.statistics.5	direct	true	false	false	[]
amq.topic	topic	true	false	false	[]
amq.rabbitmq.trace	topic	true	false	false	[]
rabbitmq.exchanger.statistics.3	direct	true	false	false	[]
amq.rabbitmq.log	topic	true	false	false	[]
amq.fanout	fanout	true	false	false	[]
amq.headers	headers	true	false	false	[]
rabbitmq.exchanger.statistics.4	direct	true	false	false	[]
rabbitmq.exchanger.statistics.1	direct	true	false	false	[]
	direct	true	false	false	[]
amq.match	headers	true	false	false	[]
rabbitmq.exchanger.statistics.2	direct	true	false	false	[]

Bindings on /:
source_name	source_kind	destination_name	destination_kind	routing_key	arguments
	exchange	rabbitmq.queue.statistics.BELKIN-W2K8.KIS2012.Lin.0	queue	rabbitmq.queue.statistics.BELKIN-W2K8.KIS2012.Lin.0	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Pattern.0	queue	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Pattern.0	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Stat.0	queue	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Stat.0	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.BSS2.0	queue	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.BSS2.0	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.0	queue	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.0	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.1	queue	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.1	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.2	queue	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.2	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.3	queue	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.3	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.4	queue	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.4	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.0	queue	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.0	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.1	queue	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.1	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.2	queue	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.2	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.3	queue	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.3	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.4	queue	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.4	[]
	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.FA_BSS2.0	queue	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.FA_BSS2.0	[]
	exchange	rabbitmq.queue.statistics.KSN-AMR.ksn_receive.BSS2_UDP.0	queue	rabbitmq.queue.statistics.KSN-AMR.ksn_receive.BSS2_UDP.0	[]
	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.BSS2.0	queue	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.BSS2.0	[]
	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.0	queue	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.0	[]
	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.1	queue	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.1	[]
	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.2	queue	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.2	[]
	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.3	queue	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.3	[]
	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.4	queue	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.4	[]
	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.PBS_DETECT.0	queue	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.PBS_DETECT.0	[]
	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_pattern.0	queue	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_pattern.0	[]
	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_stat.0	queue	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_stat.0	[]
	exchange	rabbitmq.queue.statistics.KSN-AMR05.ksn_receive.BSS2_UDP.0	queue	rabbitmq.queue.statistics.KSN-AMR05.ksn_receive.BSS2_UDP.0	[]
	exchange	rabbitmq.queue.statistics.STS-KSNSTATS.MalwareStats.BufferBSS2UDPReceive.0	queue	rabbitmq.queue.statistics.STS-KSNSTATS.MalwareStats.BufferBSS2UDPReceive.0	[]
	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferBss2Receive.0	queue	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferBss2Receive.0	[]
	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferFaBss2Receive.0	queue	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferFaBss2Receive.0	[]
	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPBSReceive.0	queue	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPBSReceive.0	[]
	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsDetectReceive.0	queue	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsDetectReceive.0	[]
	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsPatternReceive.0	queue	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsPatternReceive.0	[]
	exchange	rabbitmq.queue.statistics.sts-ksnstats.LicenseStat.LicenseStat.0	queue	rabbitmq.queue.statistics.sts-ksnstats.LicenseStat.LicenseStat.0	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.0	queue	1061929248	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.PBS_DETECT.0	queue	1697088637	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsDetectReceive.0	queue	1697088637	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Stat.0	queue	192237930	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_stat.0	queue	192237930	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPBSReceive.0	queue	192237930	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.FA_BSS2.0	queue	2239037760	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.BSS2.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.KSN-AMR.ksn_receive.BSS2_UDP.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.BSS2.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.KSN-AMR05.ksn_receive.BSS2_UDP.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.STS-KSNSTATS.MalwareStats.BufferBSS2UDPReceive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferBss2Receive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferFaBss2Receive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.0	queue	3004811437	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.0	queue	3004811437	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.BELKIN-W2K8.KIS2012.Lin.0	queue	329176159	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.sts-ksnstats.LicenseStat.LicenseStat.0	queue	329176159	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Pattern.0	queue	576429162	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_pattern.0	queue	576429162	[]
rabbitmq.exchanger.statistics.1	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsPatternReceive.0	queue	576429162	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.1	queue	1061929248	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.PBS_DETECT.0	queue	1697088637	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsDetectReceive.0	queue	1697088637	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Stat.0	queue	192237930	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_stat.0	queue	192237930	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPBSReceive.0	queue	192237930	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.FA_BSS2.0	queue	2239037760	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.BSS2.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.KSN-AMR.ksn_receive.BSS2_UDP.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.BSS2.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.KSN-AMR05.ksn_receive.BSS2_UDP.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.STS-KSNSTATS.MalwareStats.BufferBSS2UDPReceive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferBss2Receive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferFaBss2Receive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.1	queue	3004811437	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.1	queue	3004811437	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.BELKIN-W2K8.KIS2012.Lin.0	queue	329176159	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.sts-ksnstats.LicenseStat.LicenseStat.0	queue	329176159	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Pattern.0	queue	576429162	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_pattern.0	queue	576429162	[]
rabbitmq.exchanger.statistics.2	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsPatternReceive.0	queue	576429162	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.2	queue	1061929248	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.PBS_DETECT.0	queue	1697088637	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsDetectReceive.0	queue	1697088637	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Stat.0	queue	192237930	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_stat.0	queue	192237930	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPBSReceive.0	queue	192237930	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.FA_BSS2.0	queue	2239037760	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.BSS2.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.KSN-AMR.ksn_receive.BSS2_UDP.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.BSS2.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.KSN-AMR05.ksn_receive.BSS2_UDP.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.STS-KSNSTATS.MalwareStats.BufferBSS2UDPReceive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferBss2Receive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferFaBss2Receive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.2	queue	3004811437	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.2	queue	3004811437	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.BELKIN-W2K8.KIS2012.Lin.0	queue	329176159	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.sts-ksnstats.LicenseStat.LicenseStat.0	queue	329176159	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Pattern.0	queue	576429162	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_pattern.0	queue	576429162	[]
rabbitmq.exchanger.statistics.3	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsPatternReceive.0	queue	576429162	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.3	queue	1061929248	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.PBS_DETECT.0	queue	1697088637	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsDetectReceive.0	queue	1697088637	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Stat.0	queue	192237930	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_stat.0	queue	192237930	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPBSReceive.0	queue	192237930	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.FA_BSS2.0	queue	2239037760	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.BSS2.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.KSN-AMR.ksn_receive.BSS2_UDP.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.BSS2.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.KSN-AMR05.ksn_receive.BSS2_UDP.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.STS-KSNSTATS.MalwareStats.BufferBSS2UDPReceive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferBss2Receive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferFaBss2Receive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.3	queue	3004811437	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.3	queue	3004811437	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.BELKIN-W2K8.KIS2012.Lin.0	queue	329176159	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.sts-ksnstats.LicenseStat.LicenseStat.0	queue	329176159	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Pattern.0	queue	576429162	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_pattern.0	queue	576429162	[]
rabbitmq.exchanger.statistics.4	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsPatternReceive.0	queue	576429162	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.4	queue	1061929248	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.PBS_DETECT.0	queue	1697088637	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsDetectReceive.0	queue	1697088637	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Stat.0	queue	192237930	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_stat.0	queue	192237930	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPBSReceive.0	queue	192237930	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.FA_BSS2.0	queue	2239037760	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.BSS2.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.KSN-AMR.ksn_receive.BSS2_UDP.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.BSS2.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.KSN-AMR05.ksn_receive.BSS2_UDP.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.STS-KSNSTATS.MalwareStats.BufferBSS2UDPReceive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferBss2Receive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferFaBss2Receive.0	queue	2382441395	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.4	queue	3004811437	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.4	queue	3004811437	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.BELKIN-W2K8.KIS2012.Lin.0	queue	329176159	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.sts-ksnstats.LicenseStat.LicenseStat.0	queue	329176159	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Pattern.0	queue	576429162	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_pattern.0	queue	576429162	[]
rabbitmq.exchanger.statistics.5	exchange	rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsPatternReceive.0	queue	576429162	[]

Consumers on /:
queue_name	channel_pid	consumer_tag	ack_required
rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.0	<'rabbit at ksn-backend3_jail1'.3.13614.3>	amq.ctag-ypsoH0fg3eX8Nl6SSS5I6A==	false
rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.2	<'rabbit at ksn-backend3_jail1'.3.13651.3>	amq.ctag-H+Kg8GMzVsWpR6bd3dgDrA==	false
rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.1	<'rabbit at ksn-backend3_jail1'.3.13652.3>	amq.ctag-vRU4+RGlqi8dTUJ4kex7/A==	false
rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.2	<'rabbit at ksn-backend3_jail1'.3.13641.3>	amq.ctag-G5p92ouySWk6S/R52e7VGg==	false
rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.BSS2.0	<'rabbit at ksn-backend3_jail1'.3.13710.3>	amq.ctag-kSQz2UJ2enlokxJDGvgmKw==	false
rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.1	<'rabbit at ksn-backend3_jail1'.3.13629.3>	amq.ctag-NW6o5PyYFFChVRqF4vNZUQ==	false
rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferBss2Receive.0	<'rabbit at ksn-backend3_jail1'.3.19014.3>	amq.ctag-0bvoFtX4SKSNIrdhOj9IJw==	false
rabbitmq.queue.statistics.DIT-BDB.ksn_receive.BSS2.0	<'rabbit at ksn-backend3_jail1'.3.13686.3>	amq.ctag-id87GEAyguQiKY8+uR4ZyA==	false
rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_stat.0	<'rabbit at ksn-backend3_jail1'.3.13730.3>	amq.ctag-Hhj8ik+DgMpvvj3M1pepxA==	false
rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.1	<'rabbit at ksn-backend3_jail1'.3.13590.3>	amq.ctag-MGTyAdv6WnzgAPTMtYZv7A==	false
rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.pbs_pattern.0	<'rabbit at ksn-backend3_jail1'.3.13739.3>	amq.ctag-d9o/p+2/epNFn+ZJ8Mpocg==	false
rabbitmq.queue.statistics.DIT-BDB.ksn_receive.FA_BSS2.0	<'rabbit at ksn-backend3_jail1'.3.13695.3>	amq.ctag-J7aubliJC93xOTipr7K0oQ==	false
rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Pattern.0	<'rabbit at ksn-backend3_jail1'.3.13725.3>	amq.ctag-babzC0n7wOcrMmDgk19WuQ==	false
rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.3	<'rabbit at ksn-backend3_jail1'.3.13642.3>	amq.ctag-cZAlkJ//N4DdwUS84xn/7w==	false
rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.0	<'rabbit at ksn-backend3_jail1'.3.13661.3>	amq.ctag-3L20OozgLXCBg4SV46ALzw==	false
rabbitmq.queue.statistics.KSN-AMR.ksn_receive.BSS2_UDP.0	<'rabbit at ksn-backend3_jail1'.3.13700.3>	amq.ctag-Psh78Mo5+Dhp5u6exansAw==	false
rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.4	<'rabbit at ksn-backend3_jail1'.3.13662.3>	amq.ctag-vExN+YvQP9EIbmQi9xgtDA==	false
rabbitmq.queue.statistics.STS-KSNSTATS.MalwareStats.BufferBSS2UDPReceive.0	<'rabbit at ksn-backend3_jail1'.3.13705.3>	amq.ctag-WWvW1EJ08hXnHKziTz/8Lg==	false
rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.4	<'rabbit at ksn-backend3_jail1'.3.13596.3>	amq.ctag-KrXXxXFC/CrhYOPP7CksnQ==	false
rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsDetectReceive.0	<'rabbit at ksn-backend3_jail1'.3.18990.3>	amq.ctag-2kftIYYwZnz5bofQCLDECw==	false
rabbitmq.queue.statistics.BELKIN-W2K8.KIS2012.Lin.0	<'rabbit at ksn-backend3_jail1'.3.14153.3>	amq.ctag-+E7gjDGbgP/aa7b8YUoAxA==	false
rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPBSReceive.0	<'rabbit at ksn-backend3_jail1'.3.19005.3>	amq.ctag-uU6ttdjrzUStEdKX5Yf4PQ==	false
rabbitmq.queue.statistics.DIT-BDB.KSN_Receive.PBS_Stat.0	<'rabbit at ksn-backend3_jail1'.3.13720.3>	amq.ctag-C5bXf0t1qn+2O8kuqcoStw==	false
rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.3	<'rabbit at ksn-backend3_jail1'.3.13605.3>	amq.ctag-Osd9JL+JVqJvXN5lqDzriA==	false
rabbitmq.queue.statistics.sts-ksnstats.LicenseStat.LicenseStat.0	<'rabbit at ksn-backend3_jail1'.3.13672.3>	amq.ctag-MCmXY0moYuJQaHncbXKWJA==	false
rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.PBS_DETECT.0	<'rabbit at ksn-backend3_jail1'.3.13744.3>	amq.ctag-t3VpOK/pmFsKlvBFYWGnLw==	false
rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.4	<'rabbit at ksn-backend3_jail1'.3.13632.3>	amq.ctag-usxrnLiQi4vg4g8B4xM/8w==	false
rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferFaBss2Receive.0	<'rabbit at ksn-backend3_jail1'.3.19008.3>	amq.ctag-5kR/KlwjEHuXUW5FQPX6ZA==	false
rabbitmq.queue.statistics.DIT-BDB.ksn_receive.ErrWatch.2	<'rabbit at ksn-backend3_jail1'.3.13599.3>	amq.ctag-WcC98gkEfSm6fbpJ0eijZw==	false
rabbitmq.queue.statistics.KSN-AMR05.ksn_receive.BSS2_UDP.0	<'rabbit at ksn-backend3_jail1'.3.13715.3>	amq.ctag-I+ahSYE2cmbONsttVOVIDw==	false
rabbitmq.queue.statistics.DIT-BDB.ksn_receive.DML.0	<'rabbit at ksn-backend3_jail1'.3.13622.3>	amq.ctag-nfe5vwQPkfrzGM9sBpGjcQ==	false
rabbitmq.queue.statistics.KSN-AMR04.ksn_receive.DML.3	<'rabbit at ksn-backend3_jail1'.3.13668.3>	amq.ctag-afrCJb83prl4G5/EFb/W3w==	false
rabbitmq.queue.statistics.astraea-bkp-1.FlatDb12.BufferPbsPatternReceive.0	<'rabbit at ksn-backend3_jail1'.3.18996.3>	amq.ctag-WMJ9EVsHn28TWMgGztxblg==	false

Permissions on /:
user	configure	write	read
guest	.*	.*	.*

End of server status report
...done.

From majek04 at gmail.com  Tue Nov  1 12:40:54 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Tue, 1 Nov 2011 12:40:54 +0000
Subject: [rabbitmq-discuss] High I/O On RHEL?
In-Reply-To: <CAJreXKDMsxr9xKijqY8o3jpGeKdfLFHhFu33PG217HcND7nMiA@mail.gmail.com>
References: <CAJreXKDMsxr9xKijqY8o3jpGeKdfLFHhFu33PG217HcND7nMiA@mail.gmail.com>
Message-ID: <CABzX+qzq883At0jfCdqwfEH_U8ctvAsqpWU7jr3GiH-Hf0JHUw@mail.gmail.com>

On Thu, Oct 27, 2011 at 12:25, James Carr <james.r.carr at gmail.com> wrote:
> One of my clients has been having a recurring problem of the
> filesystems on their brokers randomly becoming readonly. Their admin
> investigated the errors and determined it was related to this issue
> (http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=51306)
> with their running Oracle Enterprise Linux on top of VMWare.
>
> I'm a little confounded and how there could even be too high I/O
> interaction for the filesystem to keep up. At most, the brokers only
> see 400 messages per second and usually average around 180 messages
> per second. This is way below the rates I see on a cluster I run on
> Rackspace for another client and I've never seen this happen before.
>
> It's pretty annoying because the filesystem goes readonly randomly in
> middle of the night and causes rabbitMQ to shutdown (since having /var
> read only screws a lot of things up) and whoever is on call gets paged
> (usually at 2am). I've suggested moving the brokers to physical boxes
> or using Ubuntu instead of Oracle Enterprise Linux, but I feel like
> I'm just making the later suggestion out of spite (I don't like Oracle
> Enterprise Linux). :)
>
> Any ideas?

I have no clue how to solve the problem. But I have some
ideas about possible workarounds:
 a) maybe use ext2? (basically - a fs without journaling)
 b) take a look at `errors=continue` option in `man mount`

Cheers,
  Marek

From michael.s.klishin at gmail.com  Tue Nov  1 13:05:45 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 1 Nov 2011 16:05:45 +0300
Subject: [rabbitmq-discuss] Problem with RAM
In-Reply-To: <5875361.77.1320150517952.JavaMail.geo-discussion-forums@yqpp12>
References: <32287654.406.1320037421256.JavaMail.geo-discussion-forums@yqbl36>
	<4EAE82B4.9010202@rabbitmq.com>
	<5875361.77.1320150517952.JavaMail.geo-discussion-forums@yqpp12>
Message-ID: <CAE3HoVTuXTgMyKouV-vspqCLxsrBv_gAXoxbsu207b47Kb942Q@mail.gmail.com>

2011/11/1 Cheremukhin Andrey <acheremukhin.digitalguard at gmail.com>

> Why do rabbitmq use huge amount of RAM if queues don't have messages.


Make sure your applications either acknowledge messages or use automatic
acknowledgement mode. Otherwise RabbitMQ will keep around messages waiting
for
acknowledgements. This is just one hypothesis, of course.

-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111101/7f5c5427/attachment.htm>

From acheremukhin.digitalguard at gmail.com  Tue Nov  1 13:17:28 2011
From: acheremukhin.digitalguard at gmail.com (Cheremukhin Andrey)
Date: Tue, 1 Nov 2011 06:17:28 -0700 (PDT)
Subject: [rabbitmq-discuss] Problem with RAM
In-Reply-To: <CAE3HoVTuXTgMyKouV-vspqCLxsrBv_gAXoxbsu207b47Kb942Q@mail.gmail.com>
References: <32287654.406.1320037421256.JavaMail.geo-discussion-forums@yqbl36>
	<4EAE82B4.9010202@rabbitmq.com>
	<5875361.77.1320150517952.JavaMail.geo-discussion-forums@yqpp12>
	<CAE3HoVTuXTgMyKouV-vspqCLxsrBv_gAXoxbsu207b47Kb942Q@mail.gmail.com>
Message-ID: <29861056.186.1320153448493.JavaMail.geo-discussion-forums@yqpp12>

I am seeing in report ' {pending_acks,0}'. It is meen than acknowledge mode 
off.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111101/97b81128/attachment.htm>

From kamauallan at gmail.com  Tue Nov  1 14:28:38 2011
From: kamauallan at gmail.com (Allan Kamau)
Date: Tue, 1 Nov 2011 17:28:38 +0300
Subject: [rabbitmq-discuss] Scientific journal publications on RabbitMQ
Message-ID: <CAF3N6oRw5YX7SP0KQNPao9yGyDOPWwT-NKFYg=9FpOFk7OUViw@mail.gmail.com>

Hi,
I am using RabbitMQ for a small academic research project I wanted to
know if there are any publications out there on RabbitMQ that I would
read through and reference?

Allan.

From acheremukhin.digitalguard at gmail.com  Tue Nov  1 14:44:00 2011
From: acheremukhin.digitalguard at gmail.com (Cheremukhin Andrey)
Date: Tue, 1 Nov 2011 07:44:00 -0700 (PDT)
Subject: [rabbitmq-discuss] Problem with RAM
In-Reply-To: <29861056.186.1320153448493.JavaMail.geo-discussion-forums@yqpp12>
References: <32287654.406.1320037421256.JavaMail.geo-discussion-forums@yqbl36>
	<4EAE82B4.9010202@rabbitmq.com>
	<5875361.77.1320150517952.JavaMail.geo-discussion-forums@yqpp12>
	<CAE3HoVTuXTgMyKouV-vspqCLxsrBv_gAXoxbsu207b47Kb942Q@mail.gmail.com>
	<29861056.186.1320153448493.JavaMail.geo-discussion-forums@yqpp12>
Message-ID: <30946013.98.1320158640702.JavaMail.geo-discussion-forums@vbvq4>

My Rabbitmq instance sometimes start to allocate memory very rapidly, every 
3-4-5 hours (may be Erlang's GC?).
Count of messages in queues are not  increased. But memory only is groqing 
constantly.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111101/40fe746b/attachment.htm>

From simon at rabbitmq.com  Tue Nov  1 18:35:32 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 01 Nov 2011 18:35:32 +0000
Subject: [rabbitmq-discuss] Problem with RAM
In-Reply-To: <5875361.77.1320150517952.JavaMail.geo-discussion-forums@yqpp12>
References: <32287654.406.1320037421256.JavaMail.geo-discussion-forums@yqbl36>	<4EAE82B4.9010202@rabbitmq.com>
	<5875361.77.1320150517952.JavaMail.geo-discussion-forums@yqpp12>
Message-ID: <4EB03BF4.2050302@rabbitmq.com>

On 01/11/11 12:28, Cheremukhin Andrey wrote:
> Could you see my report? I cannot understand the problem.
> Why do rabbitmq use huge amount of RAM if queues don't have messages.

Hmm. One thing that's suspicious is the amount of ETS storage in use. 
Can you run:

erl -remsh rabbit@`hostname -s` -sname foo -eval '[io:format("~p~n", 
[ets:info(T)]) || T <- ets:all()], halt().'

(all one line)

from the command line and send me the result? You'll need to run it when 
logged in as the same user as the broker is running as.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From jerryk at vmware.com  Tue Nov  1 18:40:35 2011
From: jerryk at vmware.com (Jerry Kuch)
Date: Tue, 1 Nov 2011 11:40:35 -0700 (PDT)
Subject: [rabbitmq-discuss] Scientific journal publications on RabbitMQ
In-Reply-To: <CAF3N6oRw5YX7SP0KQNPao9yGyDOPWwT-NKFYg=9FpOFk7OUViw@mail.gmail.com>
Message-ID: <2a919aaa-48bc-46ae-ac95-fc31ab17fbf5@CoachZ.local>

There was an ACM queue article on the AMQP protocol, which Rabbit implements the protocol.
It's archived here:

http://www.rabbitmq.com/resources/Queuevol5no4_May2007.pdf

The Ocean Observatories Initiative makes use of RabbitMQ in their research.  You can find
more information here:

http://ci.oceanobservatories.org

although I don't know about specific references to it in their publications so you'll
have to dig a bit.

Best regards,
Jerry


----- Original Message -----
From: "Allan Kamau" <kamauallan at gmail.com>
To: rabbitmq-discuss at lists.rabbitmq.com
Sent: Tuesday, November 1, 2011 7:28:38 AM
Subject: [rabbitmq-discuss] Scientific journal publications on RabbitMQ

Hi,
I am using RabbitMQ for a small academic research project I wanted to
know if there are any publications out there on RabbitMQ that I would
read through and reference?

Allan.
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From svet_my at yahoo.com  Tue Nov  1 21:59:57 2011
From: svet_my at yahoo.com (Slava Miropolsky)
Date: Tue, 1 Nov 2011 14:59:57 -0700 (PDT)
Subject: [rabbitmq-discuss] windows AppFabric,
	Workflow service and RabbitMQ
In-Reply-To: <4E96E174.3000106@rabbitmq.com>
References: <1318154177.51076.YahooMailClassic@web112605.mail.gq1.yahoo.com>
	<4E96E174.3000106@rabbitmq.com>
Message-ID: <1320184797.34439.YahooMailNeo@web112601.mail.gq1.yahoo.com>

Thanks Emile,

This configuration worked for me by adding RabbitMQ service endpoint in custom ServiceHostFactory and configuring web app to Auto-Start.


I'm trying to make RabbitMQ WCF binding to distribute requests in round-robin among multiple instances of a WCF service. I'm using WCF configDemo example but it fails with EndpointNotFoundException when more than 1 instance of the server (consumer) is running. Could you pl lmk what should I change to make WCF round-robin scenario work?


________________________________
From: Emile Joubert <emile at rabbitmq.com>
To: Slava Miropolsky <svet_my at yahoo.com>
Cc: rabbitmq-discuss at lists.rabbitmq.com
Sent: Thursday, October 13, 2011 6:02 AM
Subject: Re: [rabbitmq-discuss] windows AppFabric, Workflow service and RabbitMQ

Hi Slava,

On 09/10/11 10:56, Slava Miropolsky wrote:
> Hi,
> 
> I'm trying to configure WCF rabbitMQBinding for AppFabric (IIS) hosted
> Workflow WCF service, configured to Auto-Start.
> 
> does anyone have positive experience configuring rabbitmq in his hosted
> wcf service?

I don't know of anybody using the rabbitmq WCF binding in this specific
context. Have you run into any specific problems that we can help with?
Feel free to report back any insights or issues that arise.


-Emile
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111101/0a210453/attachment.htm>

From svet_my at yahoo.com  Tue Nov  1 22:10:04 2011
From: svet_my at yahoo.com (Slava Miropolsky)
Date: Tue, 1 Nov 2011 15:10:04 -0700 (PDT)
Subject: [rabbitmq-discuss] WCF example fails with EndpointNotFoundException
	when more than 1 server instance is running
Message-ID: <1320185404.14946.YahooMailNeo@web112614.mail.gq1.yahoo.com>

I'm trying to distribute requests in round-robin among multiple instances of a WCF service using?RabbitMQ WCF binding. I'm using WCF configDemo example but it fails with EndpointNotFoundException when more than 1 instance of the server (consumer) is running. Could you pl lmk what should I change to make WCF round-robin scenario work?

It seems WCF binding works in?RPC fashion,?uses amq.direct exchange, so round-robin scenario should work?

Thanks in advance!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111101/0a408a24/attachment.htm>

From svet_my at yahoo.com  Tue Nov  1 22:32:59 2011
From: svet_my at yahoo.com (Slava Miropolsky)
Date: Tue, 1 Nov 2011 15:32:59 -0700 (PDT)
Subject: [rabbitmq-discuss] WCF example fails with
	EndpointNotFoundException when more than 1 server instance is
	running
In-Reply-To: <1320185404.14946.YahooMailNeo@web112614.mail.gq1.yahoo.com>
References: <1320185404.14946.YahooMailNeo@web112614.mail.gq1.yahoo.com>
Message-ID: <1320186779.64145.YahooMailNeo@web112605.mail.gq1.yahoo.com>

The exception on the server is CommunicationException:?For sending a message on server side composite duplex channels, the message must have either the 'Via' property or the 'To' header set.
ProtocolException:?A violation of acknowledgement protocol has been detected. An InvalidAcknowledgement fault was sent to the remote endpoint and the reliable session was faulted.

The exceptions on the client are ProtocolException:?The remote endpoint sent inconsistent responses to the same create sequence request. The sequence identifiers are not identical.
EndpointNotFoundException:?There was no channel that could accept the message with action 'http://www.w3.org/2005/08/addressing/soap/fault'.

________________________________
From: Slava Miropolsky <svet_my at yahoo.com>
To: "rabbitmq-discuss at lists.rabbitmq.com" <rabbitmq-discuss at lists.rabbitmq.com>
Sent: Tuesday, November 1, 2011 3:10 PM
Subject: [rabbitmq-discuss] WCF example fails with EndpointNotFoundException when more than 1 server instance is running


I'm trying to distribute requests in round-robin among multiple instances of a WCF service using?RabbitMQ WCF binding. I'm using WCF configDemo example but it fails with EndpointNotFoundException when more than 1 instance of the server (consumer) is running. Could you pl lmk what should I change to make WCF round-robin scenario work?

It seems WCF binding works in?RPC fashion,?uses amq.direct exchange, so round-robin scenario should work?

Thanks in advance!



_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111101/dbe85a1a/attachment.htm>

From mrraymondbarlow at gmail.com  Tue Nov  1 23:27:51 2011
From: mrraymondbarlow at gmail.com (Raymond Barlow)
Date: Tue, 1 Nov 2011 16:27:51 -0700 (PDT)
Subject: [rabbitmq-discuss] object not found in RabbitMQ admin panel
Message-ID: <15862270.2641.1320190071390.JavaMail.geo-discussion-forums@yqnv12>

Hi guys,

I've installed the RabbitMQ admin panel on our servers, and it doesn't seem 
to work as expected.

If I go to the list of exchange, or queues, or anything, and click on one 
of the objects there, I get this message for them all:

Not found

The object you clicked on was not found; it may have been deleted on the 
server.

They definitely exist, as I can use the command line tool to view them and 
get the required info on them. The 2 servers this is failing on are ubuntu. 
If I run it locally on my OSX Lion box, all is good.

One problem may be that it is running behind nginx, and I've had to do some 
url rewrite to get it to work. I'm not really an ngix guru, and this is 
probably not the place to ask about this, but here is the location that 
I've cobbled together to get it (mostly) working:

location /rabbitadmin {
        proxy_pass              http://127.0.0.1:55672;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        Host $http_host;
        rewrite ^/rabbitadmin/(.*)$ /$1 break;
      }

Help appreciated!

Regards,
Raymond Barlow



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111101/e6d2321a/attachment.htm>

From hanxu400 at gmail.com  Wed Nov  2 01:35:50 2011
From: hanxu400 at gmail.com (Rino Han)
Date: Tue, 1 Nov 2011 18:35:50 -0700 (PDT)
Subject: [rabbitmq-discuss] Error: unable to connect to node
	rabbit@localhost: nodedown
In-Reply-To: <7006D3B6-A37D-43C3-8BFA-C0E923695FD0@portalify.com>
References: <7006D3B6-A37D-43C3-8BFA-C0E923695FD0@portalify.com>
Message-ID: <a0639951-b164-4934-9a46-011f01226dbe@e5g2000prf.googlegroups.com>

you can try the following command:

rabbitmqctl -n rabbit status

On Nov 1, 3:59?pm, Matti Linnanvuori <matti.linnanvu... at portalify.com>
wrote:
> When I ran OCF resource agents that tried to contact RabbitMQ server at address rabbit at localhost, they failed. When I try e.g. the following, I get an error:
>
> rabbitmqctl -n rabbit at localhost status
> Status of node rabbit at localhost ...
> Error: unable to connect to node rabbit at localhost: nodedown
> diagnostics:
> - nodes and their ports on localhost: [{rabbit,57478},
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?{rabbitmqctl15057,44146}]
> - current node: 'rabbitmqctl15057 at iac-pgis'
> - current node home dir: /var/lib/rabbitmq
> - current node cookie hash: Q6gFuwANTK79hr/vMOmpWg==
>
> When I run rabbitmqctl with rabbitmqctl -n rabbit at iac-pgis status, where iac-pgis is the hostname, I get the connection.
> Should the resource agents contact RabbitMQ server with `hostname -s`?
>
> Matti Linnanvuori
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From cameron.davison at gmail.com  Wed Nov  2 05:10:21 2011
From: cameron.davison at gmail.com (Cameron Davison)
Date: Wed, 2 Nov 2011 00:10:21 -0500
Subject: [rabbitmq-discuss] Publisher Confirms stop occurring when
 Consumer is present and queue is large
In-Reply-To: <20111101063139.GA3240@rabbitmq.com>
References: <CAGWz9vUwmOdg9TibndZ+UE4Vz1Btyz95CmTf1Xu=m0H4ONe6qw@mail.gmail.com>
	<20111101063139.GA3240@rabbitmq.com>
Message-ID: <CAGWz9vXsOczQ2QJAu0oYxyYb-4KByYDLFxynsi7Tg4x1xkrYyA@mail.gmail.com>

Matthew,

Thank you for the reply. Do y'all have a bug tracker that I would be
able to watch so that I can know when y'all address this issue? Do you
know if this same thing would be even worse for a mirrored queue
rabbit mq cluster? I am seeing a lot of degradation in write
throughput while reading when doing mirrored queue cluster. All I
really want is high availability such that if one server crashed the
slave in the cluster will become the master and allow for continued
throughput. Is this the correct way to that?

Cameron

On Tue, Nov 1, 2011 at 1:31 AM, Matthew Sackman <matthew at rabbitmq.com> wrote:
> Hi Cameron,
>
> Thanks for the detailed report.
>
> Your report has prompted us to think carefully about your test, and we
> can see how the broker can end up behave this way. This is not desired
> behaviour of the broker and thus does constitute a bug. There is no
> work-around.
>
> What is happening is that your publisher is waiting for the broker to
> send the confirms back to it. For this to happen, internally, the queues
> have to send some messages to themselves. These messages are being
> starved out because Rabbit prioritises getting rid of messages. Thus the
> queue's desire to drive the consumer prevents the queue from processing
> internal messages that would lead the queue to issue the confirms back
> up, via the channel and out to the client.
>
> At a minimum, we need to adjust some message priorities internally. But
> the actual fix may turn out to be bigger than that. Given current
> timings, I wouldn't expect a fix for this to be in the next release, but
> in the one after that.
>
> Best wishes,
>
> Matthew
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From ozawa.tsuyoshi at gmail.com  Wed Nov  2 06:34:48 2011
From: ozawa.tsuyoshi at gmail.com (OZAWA Tsuyoshi)
Date: Wed, 02 Nov 2011 15:34:48 +0900
Subject: [rabbitmq-discuss] Asynchronous publish with Pika
Message-ID: <4EB0E488.1010507@gmail.com>

Hi,

I'm trying to write a RabbitMQ client with Pika.
My question is : How can I issue basic_publish() asynchronously with Pika?
The document says that connect(), channel(), basic_consume(), or some
functions can be issued asynchronously, but it is undocumented to
basic_publish() asynchronously.

# I know that puka can do that very easily, however, it seems to be
still experimental.

Best Regards,
OZAWA Tsuyoshi

From neeta.soni at tcs.com  Wed Nov  2 07:42:09 2011
From: neeta.soni at tcs.com (Neeta Soni)
Date: Wed, 2 Nov 2011 13:12:09 +0530
Subject: [rabbitmq-discuss] rabbitMQ query
Message-ID: <OFE14BD2C8.150B876F-ON6525793C.002A4FCB-6525793C.002A4FCE@tcs.com>

An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111102/c5ac23f1/attachment.htm>

From emile at rabbitmq.com  Wed Nov  2 09:43:21 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 02 Nov 2011 09:43:21 +0000
Subject: [rabbitmq-discuss] rabbitMQ query
In-Reply-To: <OFE14BD2C8.150B876F-ON6525793C.002A4FCB-6525793C.002A4FCE@tcs.com>
References: <OFE14BD2C8.150B876F-ON6525793C.002A4FCB-6525793C.002A4FCE@tcs.com>
Message-ID: <4EB110B9.3070906@rabbitmq.com>

Hi Neeta,

On 02/11/11 07:42, Neeta Soni wrote:
> 
> Hi,
> I have installed RabbitMQ on linux machine.The application is running
> sucessfully with tomacat but not from Jboss.
> Error msg when i try to deploy:
[...]
> at java.lang.Thread.run(Thread.java:662)
> i am not able to understand this.

I notice that the Java client library does not appear in the stacktrace.
Are you sure this is a RabbitMQ problem?

> My second doubt is, at the link http://172.17.93.162:55672/#/[RabbitMQ],
> my Queued message and message rate shown zero.

It is normal for the rates to be zero during periods of no activity. You
should see non-zero values for message rates when the broker is active.
The queue length should be near the value reported by "rabbitmqctl
list_queues".


-Emile

From emile at rabbitmq.com  Wed Nov  2 09:52:52 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 02 Nov 2011 09:52:52 +0000
Subject: [rabbitmq-discuss] object not found in RabbitMQ admin panel
In-Reply-To: <15862270.2641.1320190071390.JavaMail.geo-discussion-forums@yqnv12>
References: <15862270.2641.1320190071390.JavaMail.geo-discussion-forums@yqnv12>
Message-ID: <4EB112F4.7080403@rabbitmq.com>

Hi Raymond.

On 01/11/11 23:27, Raymond Barlow wrote:
> One problem may be that it is running behind nginx, and I've had to do
> some url rewrite to get it to work.

There is a proxy configuration for Apache here:
http://www.rabbitmq.com/management.html#proxy

We don't have an equivalent nginx config, so it would be very useful if
you could confirm how to do that. Proxies must not canonicalise or
modify URLs.


-Emile

From simon at rabbitmq.com  Wed Nov  2 11:13:53 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 02 Nov 2011 11:13:53 +0000
Subject: [rabbitmq-discuss] object not found in RabbitMQ admin panel
In-Reply-To: <4EB112F4.7080403@rabbitmq.com>
References: <15862270.2641.1320190071390.JavaMail.geo-discussion-forums@yqnv12>
	<4EB112F4.7080403@rabbitmq.com>
Message-ID: <4EB125F1.8070401@rabbitmq.com>

On 02/11/11 09:52, Emile Joubert wrote:
> We don't have an equivalent nginx config, so it would be very useful if
> you could confirm how to do that. Proxies must not canonicalise or
> modify URLs.

To be more specific, it's very common in the mgmt plugin to have URL 
paths that look like

/api/queues/%2f/myqueue

We've seen Apache rewrite this as:

/api/queues///myqueue

which then doesn't work. To the best of my reading ability this violates 
RFC 3986. Apache needs to be told "nocanon" in order not to do that - 
nginx may also be similarly confused.

If you turn on HTTP request logging (see 
http://www.rabbitmq.com/management.html) you can see if nginx is doing 
such rewriting.

If you do get a working nginx config, please let us know and I'll add it 
to the website.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From gmr at myyearbook.com  Wed Nov  2 13:15:55 2011
From: gmr at myyearbook.com (Gavin M. Roy)
Date: Wed, 2 Nov 2011 09:15:55 -0400
Subject: [rabbitmq-discuss] Asynchronous publish with Pika
In-Reply-To: <4EB0E488.1010507@gmail.com>
References: <4EB0E488.1010507@gmail.com>
Message-ID: <70B7FD4C9BFF4E5B8E38977B4341FF59@myyearbook.com>

basic_publish is completely asynchronous. There is no return frame unless you turn publisher confirms on (which is only available in pika in the github master branch which identifies itself as 0.9.6p0). 


On Wednesday, November 2, 2011 at 2:34 AM, OZAWA Tsuyoshi wrote:

> Hi,
> 
> I'm trying to write a RabbitMQ client with Pika.
> My question is : How can I issue basic_publish() asynchronously with Pika?
> The document says that connect(), channel(), basic_consume(), or some
> functions can be issued asynchronously, but it is undocumented to
> basic_publish() asynchronously.
> 
> # I know that puka can do that very easily, however, it seems to be
> still experimental.
> 
> Best Regards,
> OZAWA Tsuyoshi
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com (mailto:rabbitmq-discuss at lists.rabbitmq.com)
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 
> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111102/f7446d89/attachment.htm>

From smetj.net at gmail.com  Wed Nov  2 13:31:34 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Wed, 2 Nov 2011 06:31:34 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ Shovel Connections
In-Reply-To: <20111025151433.GG3231@southbank>
References: <4E7929EC.1070906@omc-international.com.au>
	<4E7A7266.5050800@omc-international.com.au>
	<20110926115420.GC31944@rabbitmq.com>
	<13456440.173.1319125870200.JavaMail.geo-discussion-forums@yqja14>
	<20111025151433.GG3231@southbank>
Message-ID: <21315328.129.1320240694623.JavaMail.geo-discussion-forums@yqoo7>

Hi Alex,

The requested output is in attachment.  I have string replaced server and 
queue names with fictional names.

I could find following non INFO report in the rabbit at server02.log file:

... snip ...
=WARNING REPORT==== 2-Nov-2011::13:56:10 ===
exception on TCP connection <0.24639.172> from 10.96.72.91:58172
connection_closed_abruptly
... snip ...

Issuing "rabbitmqctl stop" gave following output and kept hanging endless:
Stopping and halting node 'rabbit at server02' ...

When doing a strace -p on the open running rabbitmq process I get following 
output for each one of them:
#strace -p 26367
Process 26367 attached - interrupt to quit
select(0, NULL, NULL, NULL, NULL

The only thing left at this stage is kill all processes and restart server02





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111102/95749ae7/attachment.htm>
-------------- next part --------------
Reporting server status on {{2011,11,2},{13,1,11}}

Status of node 'rabbit at server02' ...
[{pid,26367},
 {running_applications,
     [{erlando,"Syntax extensions for Erlang","2.6.1"},
      {rabbitmq_federation,"RabbitMQ Federation","2.6.1"},
      {rabbitmq_shovel,"Data Shovel for RabbitMQ","2.6.1"},
      {rabbitmq_shovel_management,"Shovel Status","2.6.1"},
      {rabbitmq_management,"RabbitMQ Management Console","2.6.1"},
      {webmachine,"webmachine","1.7.0-rmq2.6.1-hg0c4b60a"},
      {rabbitmq_management_agent,"RabbitMQ Management Agent","2.6.1"},
      {amqp_client,"RabbitMQ AMQP Client","2.6.1"},
      {rabbit,"RabbitMQ","2.6.1"},
      {os_mon,"CPO  CXC 138 46","2.2.6"},
      {sasl,"SASL  CXC 138 11","2.1.9.4"},
      {rabbitmq_mochiweb,"RabbitMQ Mochiweb Embedding","2.6.1"},
      {mochiweb,"MochiMedia Web Server","1.3-rmq2.6.1-git9a53dbd"},
      {inets,"INETS  CXC 138 49","5.6"},
      {mnesia,"MNESIA  CXC 138 12","4.4.19"},
      {stdlib,"ERTS  CXC 138 10","1.17.4"},
      {kernel,"ERTS  CXC 138 10","2.14.4"}]},
 {os,{unix,linux}},
 {erlang_version,
     "Erlang R14B03 (erts-5.8.4) [source] [64-bit] [smp:24:24] [rq:24] [async-threads:30] [kernel-poll:true]\n"},
 {memory,
     [{total,74033496},
      {processes,18155168},
      {processes_used,18137536},
      {system,55878328},
      {atom,1353657},
      {atom_used,1334038},
      {binary,505496},
      {code,14695192},
      {ets,1496992}]}]

Cluster status of node 'rabbit at server02' ...
[{nodes,[{disc,['rabbit at server02']}]},
 {running_nodes,['rabbit at server02']}]

Application environment of node 'rabbit at server02' ...
[{auth_backends,[rabbit_auth_backend_internal]},
 {auth_mechanisms,['PLAIN','AMQPLAIN']},
 {backing_queue_module,rabbit_variable_queue},
 {cluster_nodes,[]},
 {collect_statistics,fine},
 {collect_statistics_interval,5000},
 {default_permissions,[<<".*">>,<<".*">>,<<".*">>]},
 {default_user,<<"guest">>},
 {default_user_tags,[administrator]},
 {default_vhost,<<"/">>},
 {delegate_count,16},
 {frame_max,131072},
 {included_applications,[]},
 {msg_store_file_size_limit,16777216},
 {msg_store_index_module,rabbit_msg_store_ets_index},
 {queue_index_max_journal_entries,262144},
 {server_properties,[]},
 {ssl_listeners,[]},
 {ssl_options,[]},
 {tcp_listen_options,[binary,
                      {packet,raw},
                      {reuseaddr,true},
                      {backlog,128},
                      {nodelay,true},
                      {exit_on_close,false}]},
 {tcp_listeners,[5672]},
 {trace_vhosts,[]},
 {vm_memory_high_watermark,0.4}]

Connections:
pid	address	port	peer_address	peer_port	ssl	peer_cert_subject	peer_cert_issuer	peer_cert_validity	auth_mechanism	ssl_protocol	ssl_key_exchange	ssl_cipher	ssl_hash	protocol	user	vhost	timeout	frame_max	client_properties	recv_oct	recv_cnt	send_oct	send_cnt	send_pend	state	channels
<'rabbit at server02'.3.490.0>	10.96.72.91	5672	10.198.63.18	46451	false				PLAIN					{0,9,1}	guest	/	0	131072	[{"product","RabbitMQ"},{"version","2.6.1"},{"platform","Erlang"},{"copyright","Copyright (c) 2007-2011 VMware, Inc."},{"information","Licensed under the MPL.  See http://www.rabbitmq.com/"},{"capabilities",[{"publisher_confirms",true},{"exchange_exchange_bindings",true},{"basic.nack",true},{"consumer_cancel_notify",true}]}]	400	5	396	5	0	running	1
<'rabbit at server02'.3.15082.165>	10.96.72.91	5672	10.198.63.18	37673	false				PLAIN					{0,9,1}	guest	/	0	131072	[{"product","RabbitMQ"},{"version","2.6.1"},{"platform","Erlang"},{"copyright","Copyright (c) 2007-2011 VMware, Inc."},{"information","Licensed under the MPL.  See http://www.rabbitmq.com/"},{"capabilities",[{"publisher_confirms",true},{"exchange_exchange_bindings",true},{"basic.nack",true},{"consumer_cancel_notify",true}]}]	400	5	396	5	0	running	1
<'rabbit at server02'.3.382.0>	127.0.0.1	5672	127.0.0.1	56211	false				PLAIN					{0,9,1}	guest	/	0	131072	[{"product","RabbitMQ"},{"version","2.6.1"},{"platform","Erlang"},{"copyright","Copyright (c) 2007-2011 VMware, Inc."},{"information","Licensed under the MPL.  See http://www.rabbitmq.com/"},{"capabilities",[{"publisher_confirms",true},{"exchange_exchange_bindings",true},{"basic.nack",true},{"consumer_cancel_notify",true}]}]	448	7	442	6	0	running	1
<'rabbit at server02'.3.366.49>	127.0.0.1	5672	127.0.0.1	44209	false				PLAIN					{0,9,1}	guest	/	0	131072	[{"product","RabbitMQ"},{"version","2.6.1"},{"platform","Erlang"},{"copyright","Copyright (c) 2007-2011 VMware, Inc."},{"information","Licensed under the MPL.  See http://www.rabbitmq.com/"},{"capabilities",[{"publisher_confirms",true},{"exchange_exchange_bindings",true},{"basic.nack",true},{"consumer_cancel_notify",true}]}]	443	6	195628	1530	0	running	1
<'rabbit at server02'.3.29398.125>	127.0.0.1	5672	127.0.0.1	55818	false				PLAIN					{0,9,1}	guest	/	0	131072	[{"product","RabbitMQ"},{"version","2.6.1"},{"platform","Erlang"},{"copyright","Copyright (c) 2007-2011 VMware, Inc."},{"information","Licensed under the MPL.  See http://www.rabbitmq.com/"},{"capabilities",[{"publisher_confirms",true},{"exchange_exchange_bindings",true},{"basic.nack",true},{"consumer_cancel_notify",true}]}]	443	6	442	6	0	running	1
<'rabbit at server02'.3.465.0>	10.96.72.91	5672	10.96.72.90	42891	false				PLAIN					{0,9,1}	guest	/	0	131072	[{"product","RabbitMQ"},{"version","2.6.1"},{"platform","Erlang"},{"copyright","Copyright (c) 2007-2011 VMware, Inc."},{"information","Licensed under the MPL.  See http://www.rabbitmq.com/"},{"capabilities",[{"publisher_confirms",true},{"exchange_exchange_bindings",true},{"basic.nack",true},{"consumer_cancel_notify",true}]}]	400	5	396	5	0	running	1
<'rabbit at server02'.3.371.0>	127.0.0.1	5672	127.0.0.1	59980	false				PLAIN					{0,9,1}	guest	/	0	131072	[{"product","RabbitMQ"},{"version","2.6.1"},{"platform","Erlang"},{"copyright","Copyright (c) 2007-2011 VMware, Inc."},{"information","Licensed under the MPL.  See http://www.rabbitmq.com/"},{"capabilities",[{"publisher_confirms",true},{"exchange_exchange_bindings",true},{"basic.nack",true},{"consumer_cancel_notify",true}]}]	443	6	442	6	0	running	1
<'rabbit at server02'.3.15074.165>	10.96.72.91	5672	10.132.252.45	35099	false				PLAIN					{0,9,1}	guest	/	0	131072	[{"product","RabbitMQ"},{"version","2.6.1"},{"platform","Erlang"},{"copyright","Copyright (c) 2007-2011 VMware, Inc."},{"information","Licensed under the MPL.  See http://www.rabbitmq.com/"},{"capabilities",[{"publisher_confirms",true},{"exchange_exchange_bindings",true},{"basic.nack",true},{"consumer_cancel_notify",true}]}]	400	5	396	5	0	running	1
<'rabbit at server02'.3.29213.125>	10.96.72.91	5672	10.18.63.56	57306	false				PLAIN					{0,9,1}	guest	/	0	131072	[{"product","RabbitMQ"},{"version","2.6.1"},{"platform","Erlang"},{"copyright","Copyright (c) 2007-2011 VMware, Inc."},{"information","Licensed under the MPL.  See http://www.rabbitmq.com/"},{"capabilities",[{"publisher_confirms",true},{"exchange_exchange_bindings",true},{"basic.nack",true},{"consumer_cancel_notify",true}]}]	400	5	396	5	0	running	1
<'rabbit at server02'.3.486.0>	10.96.72.91	5672	10.132.252.45	42614	false				PLAIN					{0,9,1}	guest	/	0	131072	[{"product","RabbitMQ"},{"version","2.6.1"},{"platform","Erlang"},{"copyright","Copyright (c) 2007-2011 VMware, Inc."},{"information","Licensed under the MPL.  See http://www.rabbitmq.com/"},{"capabilities",[{"publisher_confirms",true},{"exchange_exchange_bindings",true},{"basic.nack",true},{"consumer_cancel_notify",true}]}]	400	5	396	5	0	running	1
<'rabbit at server02'.3.400.0>	127.0.0.1	5672	127.0.0.1	34162	false				PLAIN					{0,9,1}	guest	/	0	131072	[{"product","RabbitMQ"},{"version","2.6.1"},{"platform","Erlang"},{"copyright","Copyright (c) 2007-2011 VMware, Inc."},{"information","Licensed under the MPL.  See http://www.rabbitmq.com/"},{"capabilities",[{"publisher_confirms",true},{"exchange_exchange_bindings",true},{"basic.nack",true},{"consumer_cancel_notify",true}]}]	446	6	442	6	0	running	1

Channels:
pid	connection	number	user	vhost	transactional	confirm	consumer_count	messages_unacknowledged	messages_unconfirmed	messages_uncommitted	acks_uncommitted	prefetch_count	client_flow_blocked
<'rabbit at server02'.3.408.0>	<'rabbit at server02'.3.371.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at server02'.3.415.0>	<'rabbit at server02'.3.382.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at server02'.3.431.0>	<'rabbit at server02'.3.400.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at server02'.3.469.0>	<'rabbit at server02'.3.465.0>	1	guest	/	false	true	0	0	0	0	0	0	false
<'rabbit at server02'.3.494.0>	<'rabbit at server02'.3.486.0>	1	guest	/	false	true	0	0	0	0	0	0	false
<'rabbit at server02'.3.515.0>	<'rabbit at server02'.3.490.0>	1	guest	/	false	true	0	0	0	0	0	0	false
<'rabbit at server02'.3.374.49>	<'rabbit at server02'.3.366.49>	1	guest	/	false	false	1	1524	0	0	0	0	false
<'rabbit at server02'.3.29217.125>	<'rabbit at server02'.3.29213.125>	1	guest	/	false	true	0	0	0	0	0	0	false
<'rabbit at server02'.3.29406.125>	<'rabbit at server02'.3.29398.125>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at server02'.3.15078.165>	<'rabbit at server02'.3.15074.165>	1	guest	/	false	true	0	0	0	0	0	0	false
<'rabbit at server02'.3.15094.165>	<'rabbit at server02'.3.15082.165>	1	guest	/	false	true	0	0	0	0	0	0	false

Queues on /:
pid	name	durable	auto_delete	arguments	owner_pid	slave_pids	synchronised_slave_pids	exclusive_consumer_pid	exclusive_consumer_tag	messages_ready	messages_unacknowledged	messages	consumers	memory	backing_queue_status
<'rabbit at server02'.3.239.0>	number_1	true	false	[]						0	0	0	1	34688	[{q1,0}, {q2,0}, {delta,{delta,0,0,0}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at server02'.3.240.0>	number_2	true	false	[]						0	0	0	1	34688	[{q1,0}, {q2,0}, {delta,{delta,0,0,0}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at server02'.3.241.0>	number_3	true	false	[]						0	1524	1524	1	2914744	[{q1,0}, {q2,0}, {delta,{delta,0,0,0}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,1524}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,1524}, {ram_index_count,0}, {next_seq_id,1524}, {persistent_count,0}, {avg_ingress_rate,0.0035335369276705917}, {avg_egress_rate,0.0035335369276705917}, {avg_ack_ingress_rate,0.0035335369276705917}, {avg_ack_egress_rate,0.0}]
<'rabbit at server02'.3.242.0>	number_4	true	false	[]						0	0	0	1	34688	[{q1,0}, {q2,0}, {delta,{delta,0,0,0}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at server02'.3.243.0>	number_5	true	false	[]						0	0	0	1	34688	[{q1,0}, {q2,0}, {delta,{delta,0,0,0}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]
<'rabbit at server02'.3.244.0>	number_6	true	false	[]						1524	0	1524	0	688864	[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,1524}, {q4,0}, {len,1524}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {ram_index_count,0}, {next_seq_id,16384}, {persistent_count,1524}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]

Exchanges on /:
name	type	durable	auto_delete	internal	arguments
amq.direct	direct	true	false	false	[]
amq.topic	topic	true	false	false	[]
amq.rabbitmq.trace	topic	true	false	false	[]
amq.rabbitmq.log	topic	true	false	false	[]
amq.fanout	fanout	true	false	false	[]
amq.headers	headers	true	false	false	[]
	direct	true	false	false	[]
amq.match	headers	true	false	false	[]

Bindings on /:
source_name	source_kind	destination_name	destination_kind	routing_key	arguments
	exchange	number_1	queue	number_1	[]
	exchange	number_3	queue	number_3	[]
	exchange	number_5	queue	number_5	[]
	exchange	number_2	queue	number_2	[]
	exchange	number_4	queue	number_4	[]
	exchange	number_6	queue	number_6	[]

Consumers on /:
queue_name	channel_pid	consumer_tag	ack_required
number_1	<'rabbit at server02'.3.415.0>	amq.ctag-soiTKYMhfHCUF3xfqO1PdA==	true
number_2	<'rabbit at server02'.3.29406.125>	amq.ctag-hToUPq+2xL3EAwYT61ZOHw==	true
number_3	<'rabbit at server02'.3.374.49>	amq.ctag-g/u9XEFPJY0+hi7nzvS/CA==	true
number_4	<'rabbit at server02'.3.408.0>	amq.ctag-QbnKN8YG2Fro12eDPIj+Lg==	true
number_5	<'rabbit at server02'.3.431.0>	amq.ctag-JUT4QxqK4x22HMZ9qDH5hw==	true

Permissions on /:
user	configure	write	read
guest	.*	.*	.*

End of server status report
...done.
-------------- next part --------------
Status of node 'rabbit at server02' ...
[{pid,26367},
 {running_applications,
     [{erlando,"Syntax extensions for Erlang","2.6.1"},
      {rabbitmq_federation,"RabbitMQ Federation","2.6.1"},
      {rabbitmq_shovel,"Data Shovel for RabbitMQ","2.6.1"},
      {rabbitmq_shovel_management,"Shovel Status","2.6.1"},
      {rabbitmq_management,"RabbitMQ Management Console","2.6.1"},
      {webmachine,"webmachine","1.7.0-rmq2.6.1-hg0c4b60a"},
      {rabbitmq_management_agent,"RabbitMQ Management Agent","2.6.1"},
      {amqp_client,"RabbitMQ AMQP Client","2.6.1"},
      {rabbit,"RabbitMQ","2.6.1"},
      {os_mon,"CPO  CXC 138 46","2.2.6"},
      {sasl,"SASL  CXC 138 11","2.1.9.4"},
      {rabbitmq_mochiweb,"RabbitMQ Mochiweb Embedding","2.6.1"},
      {mochiweb,"MochiMedia Web Server","1.3-rmq2.6.1-git9a53dbd"},
      {inets,"INETS  CXC 138 49","5.6"},
      {mnesia,"MNESIA  CXC 138 12","4.4.19"},
      {stdlib,"ERTS  CXC 138 10","1.17.4"},
      {kernel,"ERTS  CXC 138 10","2.14.4"}]},
 {os,{unix,linux}},
 {erlang_version,
     "Erlang R14B03 (erts-5.8.4) [source] [64-bit] [smp:24:24] [rq:24] [async-threads:30] [kernel-poll:true]\n"},
 {memory,
     [{total,73310432},
      {processes,17471616},
      {processes_used,17450560},
      {system,55838816},
      {atom,1353657},
      {atom_used,1334178},
      {binary,467472},
      {code,14695192},
      {ets,1497024}]}]
...done.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rabbit at server02-sasl.log
Type: application/octet-stream
Size: 4783 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111102/95749ae7/attachment.obj>

From smetj.net at gmail.com  Wed Nov  2 14:02:34 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Wed, 2 Nov 2011 07:02:34 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ not starting anymore after removing
 federation configuration
In-Reply-To: <4EA82AC1.3050401@rabbitmq.com>
References: <2648974.199.1319628277692.JavaMail.geo-discussion-forums@yqja14>
	<4EA82AC1.3050401@rabbitmq.com>
Message-ID: <26661537.1195.1320242554578.JavaMail.geo-discussion-forums@yqgn17>

Hi Simon,

Makes sense, but a more graceful handling could be handy, ...

Thanks,

Jelle

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111102/fcbdae97/attachment.htm>

From james.r.carr at gmail.com  Wed Nov  2 14:54:19 2011
From: james.r.carr at gmail.com (James Carr)
Date: Wed, 2 Nov 2011 09:54:19 -0500
Subject: [rabbitmq-discuss] Just performed an upgrade,
	rabbitmq not seeing plugins
Message-ID: <CAJreXKDduhQUntVRDmZ07WjnhQxvP_m_hJPZM+AkcofnMccu5A@mail.gmail.com>

Hi All,

I just performed an upgrade to 2.6.1 for rabbitmq and dumped the
plugins into /usr/lib/rabbitmq/lib/rabbitmq_server-2.6.1/plugins (the
previous plugins were in
/usr/lib/rabbitmq/lib/rabbitmq_server-2.5.0/plugins) but no matter how
many times I restart it doesn't load them. Is there an easy way to
debug this? The logs show nothing out of the ordinary.


Thanks,
James

From simon at rabbitmq.com  Wed Nov  2 14:57:45 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 02 Nov 2011 14:57:45 +0000
Subject: [rabbitmq-discuss] Just performed an upgrade,
 rabbitmq not seeing plugins
In-Reply-To: <CAJreXKDduhQUntVRDmZ07WjnhQxvP_m_hJPZM+AkcofnMccu5A@mail.gmail.com>
References: <CAJreXKDduhQUntVRDmZ07WjnhQxvP_m_hJPZM+AkcofnMccu5A@mail.gmail.com>
Message-ID: <4EB15A69.5020704@rabbitmq.com>

On 02/11/11 14:54, James Carr wrote:
> I just performed an upgrade to 2.6.1 for rabbitmq and dumped the
> plugins into /usr/lib/rabbitmq/lib/rabbitmq_server-2.6.1/plugins

Just to be clear, you downloaded the 2.6.1 plugins, right?

> (the
> previous plugins were in
> /usr/lib/rabbitmq/lib/rabbitmq_server-2.5.0/plugins) but no matter how
> many times I restart it doesn't load them. Is there an easy way to
> debug this? The logs show nothing out of the ordinary.

Do you mean that the startup_log shows "0 plugins activated", or 
something else?

If so, are the plugins readable by the rabbitmq user?

Cheers, Simon

PS: 2.7.0 will eliminate this faff. This makes me happy.

-- 
Simon MacMullen
RabbitMQ, VMware

From videlalvaro at gmail.com  Wed Nov  2 14:58:07 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Wed, 2 Nov 2011 15:58:07 +0100
Subject: [rabbitmq-discuss] Just performed an upgrade,
	rabbitmq not seeing plugins
In-Reply-To: <CAJreXKDduhQUntVRDmZ07WjnhQxvP_m_hJPZM+AkcofnMccu5A@mail.gmail.com>
References: <CAJreXKDduhQUntVRDmZ07WjnhQxvP_m_hJPZM+AkcofnMccu5A@mail.gmail.com>
Message-ID: <CAMcAHLV4pXKi5am8qVMKi9V-8Ue83haGt_PD1KdYZyPKjwC_4Q@mail.gmail.com>

RabbitMQ plugins are specific to a broker version. i.e. You can't use old
plugins on new broker versions.

See http://www.rabbitmq.com/plugins.html

Basically you can download the latest versions of your plugins from that
page.

Cheers,

-Alvaro

On Wed, Nov 2, 2011 at 3:54 PM, James Carr <james.r.carr at gmail.com> wrote:

> Hi All,
>
> I just performed an upgrade to 2.6.1 for rabbitmq and dumped the
> plugins into /usr/lib/rabbitmq/lib/rabbitmq_server-2.6.1/plugins (the
> previous plugins were in
> /usr/lib/rabbitmq/lib/rabbitmq_server-2.5.0/plugins) but no matter how
> many times I restart it doesn't load them. Is there an easy way to
> debug this? The logs show nothing out of the ordinary.
>
>
> Thanks,
> James
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111102/d6dcbc7d/attachment.htm>

From Simone.Busoli at ferrari.com  Wed Nov  2 14:58:24 2011
From: Simone.Busoli at ferrari.com (Busoli, Simone)
Date: Wed, 2 Nov 2011 14:58:24 +0000
Subject: [rabbitmq-discuss] Just performed an upgrade,
	rabbitmq not seeing plugins
In-Reply-To: <CAJreXKDduhQUntVRDmZ07WjnhQxvP_m_hJPZM+AkcofnMccu5A@mail.gmail.com>
References: <CAJreXKDduhQUntVRDmZ07WjnhQxvP_m_hJPZM+AkcofnMccu5A@mail.gmail.com>
Message-ID: <88E590DC4586974D825FC82AE798294E5206C9C8@GSVCLU03.ges.ferlan.it>

Have you made sure the plugins are those for the 2.6.1 release? I've made the same mistake some time ago.

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of James Carr
Sent: mercoled? 2 novembre 2011 15:54
To: rabbitmq-discuss at lists.rabbitmq.com
Subject: [rabbitmq-discuss] Just performed an upgrade, rabbitmq not seeing plugins

Hi All,

I just performed an upgrade to 2.6.1 for rabbitmq and dumped the plugins into /usr/lib/rabbitmq/lib/rabbitmq_server-2.6.1/plugins (the previous plugins were in
/usr/lib/rabbitmq/lib/rabbitmq_server-2.5.0/plugins) but no matter how many times I restart it doesn't load them. Is there an easy way to debug this? The logs show nothing out of the ordinary.


Thanks,
James
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

_________________________________________________________________________________________________________________
Questo messaggio ? da intendersi esclusivamente ad uso del destinatario e pu? contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non ? il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione ? 
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from 
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the 
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly 
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from 
your system.
_________________________________________________________________________________________________________________



From james.r.carr at gmail.com  Wed Nov  2 15:02:06 2011
From: james.r.carr at gmail.com (James Carr)
Date: Wed, 2 Nov 2011 10:02:06 -0500
Subject: [rabbitmq-discuss] Just performed an upgrade,
	rabbitmq not seeing plugins
In-Reply-To: <4EB15A69.5020704@rabbitmq.com>
References: <CAJreXKDduhQUntVRDmZ07WjnhQxvP_m_hJPZM+AkcofnMccu5A@mail.gmail.com>
	<4EB15A69.5020704@rabbitmq.com>
Message-ID: <CAJreXKAEL1d0nHqT----pcpy6p0uOAaieh7a2Ei_g5eW-iGQYg@mail.gmail.com>

Yes they are 2.6.1. However, they are owned by root. let me fix that...


On Wed, Nov 2, 2011 at 9:57 AM, Simon MacMullen <simon at rabbitmq.com> wrote:
> On 02/11/11 14:54, James Carr wrote:
>>
>> I just performed an upgrade to 2.6.1 for rabbitmq and dumped the
>> plugins into /usr/lib/rabbitmq/lib/rabbitmq_server-2.6.1/plugins
>
> Just to be clear, you downloaded the 2.6.1 plugins, right?
>
>> (the
>> previous plugins were in
>> /usr/lib/rabbitmq/lib/rabbitmq_server-2.5.0/plugins) but no matter how
>> many times I restart it doesn't load them. Is there an easy way to
>> debug this? The logs show nothing out of the ordinary.
>
> Do you mean that the startup_log shows "0 plugins activated", or something
> else?
>
> If so, are the plugins readable by the rabbitmq user?
>
> Cheers, Simon
>
> PS: 2.7.0 will eliminate this faff. This makes me happy.
>yes they are
> --
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From james.r.carr at gmail.com  Wed Nov  2 15:16:03 2011
From: james.r.carr at gmail.com (James Carr)
Date: Wed, 2 Nov 2011 10:16:03 -0500
Subject: [rabbitmq-discuss] Just performed an upgrade,
	rabbitmq not seeing plugins
In-Reply-To: <CAJreXKAEL1d0nHqT----pcpy6p0uOAaieh7a2Ei_g5eW-iGQYg@mail.gmail.com>
References: <CAJreXKDduhQUntVRDmZ07WjnhQxvP_m_hJPZM+AkcofnMccu5A@mail.gmail.com>
	<4EB15A69.5020704@rabbitmq.com>
	<CAJreXKAEL1d0nHqT----pcpy6p0uOAaieh7a2Ei_g5eW-iGQYg@mail.gmail.com>
Message-ID: <CAJreXKCVPZHGG-BG+xdAtxSOrrq06Tr5zr-wcqE9NoU9X2Lg=Q@mail.gmail.com>

That was it... chown'd and chrgrp'd to rabbitmq and it picks up the
plugins fine.


On Wed, Nov 2, 2011 at 10:02 AM, James Carr <james.r.carr at gmail.com> wrote:
> Yes they are 2.6.1. However, they are owned by root. let me fix that...
>
>
> On Wed, Nov 2, 2011 at 9:57 AM, Simon MacMullen <simon at rabbitmq.com> wrote:
>> On 02/11/11 14:54, James Carr wrote:
>>>
>>> I just performed an upgrade to 2.6.1 for rabbitmq and dumped the
>>> plugins into /usr/lib/rabbitmq/lib/rabbitmq_server-2.6.1/plugins
>>
>> Just to be clear, you downloaded the 2.6.1 plugins, right?
>>
>>> (the
>>> previous plugins were in
>>> /usr/lib/rabbitmq/lib/rabbitmq_server-2.5.0/plugins) but no matter how
>>> many times I restart it doesn't load them. Is there an easy way to
>>> debug this? The logs show nothing out of the ordinary.
>>
>> Do you mean that the startup_log shows "0 plugins activated", or something
>> else?
>>
>> If so, are the plugins readable by the rabbitmq user?
>>
>> Cheers, Simon
>>
>> PS: 2.7.0 will eliminate this faff. This makes me happy.
>>yes they are
>> --
>> Simon MacMullen
>> RabbitMQ, VMware
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>

From simon at rabbitmq.com  Wed Nov  2 15:55:46 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 02 Nov 2011 15:55:46 +0000
Subject: [rabbitmq-discuss] Just performed an upgrade,
 rabbitmq not seeing plugins
In-Reply-To: <CAJreXKCVPZHGG-BG+xdAtxSOrrq06Tr5zr-wcqE9NoU9X2Lg=Q@mail.gmail.com>
References: <CAJreXKDduhQUntVRDmZ07WjnhQxvP_m_hJPZM+AkcofnMccu5A@mail.gmail.com>	<4EB15A69.5020704@rabbitmq.com>	<CAJreXKAEL1d0nHqT----pcpy6p0uOAaieh7a2Ei_g5eW-iGQYg@mail.gmail.com>
	<CAJreXKCVPZHGG-BG+xdAtxSOrrq06Tr5zr-wcqE9NoU9X2Lg=Q@mail.gmail.com>
Message-ID: <4EB16802.8090202@rabbitmq.com>

On 02/11/11 15:16, James Carr wrote:
> That was it... chown'd and chrgrp'd to rabbitmq and it picks up the
> plugins fine.

Ah cool. FTR they don't have to be owned by rabbitmq, just readable.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From emile at rabbitmq.com  Wed Nov  2 16:02:22 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 02 Nov 2011 16:02:22 +0000
Subject: [rabbitmq-discuss] WCF example fails
 with	EndpointNotFoundException when more than 1 server instance is	running
In-Reply-To: <1320186779.64145.YahooMailNeo@web112605.mail.gq1.yahoo.com>
References: <1320185404.14946.YahooMailNeo@web112614.mail.gq1.yahoo.com>
	<1320186779.64145.YahooMailNeo@web112605.mail.gq1.yahoo.com>
Message-ID: <4EB1698E.1090304@rabbitmq.com>

Hi Slava,

On 01/11/11 22:32, Slava Miropolsky wrote:
> I'm trying to distribute requests in round-robin among multiple
> instances of a WCF service using RabbitMQ WCF binding. I'm using WCF
> configDemo example but it fails with EndpointNotFoundException when more
> than 1 instance of the server (consumer) is running. Could you pl lmk
> what should I change to make WCF round-robin scenario work?

Unfortunately the WCF binding does not allow this. The reason is that
each Service creates a new AMQP binding and a new queue for requests.
Therefore each Service will receive all requests, leading to the errors
you see.

An alternative is to create separate endpoints for each worker and to
round-robin at the request stage.


-Emile

From benbennett at gmail.com  Wed Nov  2 16:07:30 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Wed, 2 Nov 2011 11:07:30 -0500
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
	connection
Message-ID: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>

I have am trying to figure out what is going on and I have tried many
different combinations.
The stack trace is the same as mentioned in this discussion
http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-August/014790.html
 .
I am running unit level test cases for the project I am working on and
the test cases just hang unless I kill the build.
For the   windows 7 32 bit fdcc 3.1 (US Gov standard load) load
running in vsphere 4.1.X , it hangs 90% of the time .
For my Ubuntu 64-bit 11.04 box.(on bare metal no vmware)   it rarely
hangs but I just kicked of the build and it hung all night and I had
to kill it.
I have tried switching the jre(1.6.u26 , 1.6u29) , rabbitmq java
client (2.3.1,2.5.0,2.6.1), rabbitmq(2.5.0,2.5.1,2.6.0,2.6.1), erlang
R14B03 , R14B04.

I mixed and matched all the versions pretty much and the same thing
happens almost every single time on the windows 7 32 box

I used the Tracer tool and the tests cases don't hang but the
following exception is sometimes thrown.

1320191848535: <Tracer-3> ch#2 <- {#method<channel.close-ok>(),null,""}
1320191848535: <Tracer-3> ch#0 ->
{#method<connection.close>(reply-code=200, reply-text=OK, class-id=0,
method-id=0),null,""}
1320191848535: <Tracer-3> ch#0 <- {#method<connection.close-ok>(),null,""}
1320191848535: <Tracer-3> uncaught java.io.EOFException
        at java.io.DataInputStream.readUnsignedByte(Unknown Source)
        at com.rabbitmq.client.impl.Frame.readFrom(Frame.java:99)
        at com.rabbitmq.tools.Tracer$DirectionHandler.readFrame(Tracer.java:271)
        at com.rabbitmq.tools.Tracer$DirectionHandler.doFrame(Tracer.java:305)
        at com.rabbitmq.tools.Tracer$DirectionHandler.run(Tracer.java:345)
        at java.lang.Thread.run(Unknown Source)

The entire tracer log is here http://pastebin.com/ecp9ymsH  .

I am pretty sure this is causing the hang but how can catch this
exception on the connection close method and not deadlock.


Thanks,
Benjamin Bennett

From simone.busoli at gmail.com  Wed Nov  2 19:58:47 2011
From: simone.busoli at gmail.com (Simone Busoli)
Date: Wed, 2 Nov 2011 20:58:47 +0100
Subject: [rabbitmq-discuss] Presentation material
Message-ID: <CAOn7oW9V7C4r-yvNpgbL+MODXHoyaTouYNWhKAw_WfJzWoemew@mail.gmail.com>

Hi, I'm probably going to give a couple of presentations about RabbitMQ at
local events and would like to know if there's any material around that I
could show during the presentations.
The aim is not to avoid doing any preparation :), rather to have some nice
slides/charts/graphs ready to be shown.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111102/22367523/attachment.htm>

From videlalvaro at gmail.com  Wed Nov  2 20:02:49 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Wed, 2 Nov 2011 21:02:49 +0100
Subject: [rabbitmq-discuss] Presentation material
In-Reply-To: <CAOn7oW9V7C4r-yvNpgbL+MODXHoyaTouYNWhKAw_WfJzWoemew@mail.gmail.com>
References: <CAOn7oW9V7C4r-yvNpgbL+MODXHoyaTouYNWhKAw_WfJzWoemew@mail.gmail.com>
Message-ID: <E5158FE8-80DC-4833-BB83-F1AFD1E4DB9D@gmail.com>

Hi Simone,

I think there's plenty of material here: http://www.rabbitmq.com/how.html#quickstart

Cheers,

Alvaro

On Nov 2, 2011, at 8:58 PM, Simone Busoli wrote:

> Hi, I'm probably going to give a couple of presentations about RabbitMQ at local events and would like to know if there's any material around that I could show during the presentations.
> The aim is not to avoid doing any preparation :), rather to have some nice slides/charts/graphs ready to be shown.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

Sent form my Nokia 1100



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111102/9dafeb43/attachment.htm>

From simone.busoli at gmail.com  Wed Nov  2 20:09:03 2011
From: simone.busoli at gmail.com (Simone Busoli)
Date: Wed, 2 Nov 2011 21:09:03 +0100
Subject: [rabbitmq-discuss] Presentation material
In-Reply-To: <E5158FE8-80DC-4833-BB83-F1AFD1E4DB9D@gmail.com>
References: <CAOn7oW9V7C4r-yvNpgbL+MODXHoyaTouYNWhKAw_WfJzWoemew@mail.gmail.com>
	<E5158FE8-80DC-4833-BB83-F1AFD1E4DB9D@gmail.com>
Message-ID: <CAOn7oW8XwfGrD8j5R78c-x14=ZKkw6Ze+MQ8SHERKSPpUaz-9w@mail.gmail.com>

Thanks Alvaro, I completely ignored that page, which I probably read
summarily ten times at least!

On Wed, Nov 2, 2011 at 21:02, Alvaro Videla <videlalvaro at gmail.com> wrote:

> Hi Simone,
>
> I think there's plenty of material here:
> http://www.rabbitmq.com/how.html#quickstart
>
> Cheers,
>
> Alvaro
>
> On Nov 2, 2011, at 8:58 PM, Simone Busoli wrote:
>
> Hi, I'm probably going to give a couple of presentations about RabbitMQ at
> local events and would like to know if there's any material around that I
> could show during the presentations.
> The aim is not to avoid doing any preparation :), rather to have some nice
> slides/charts/graphs ready to be shown.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
>  Sent form my Nokia 1100
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111102/0d399b3f/attachment.htm>

From dhawangayash at gmail.com  Thu Nov  3 01:10:43 2011
From: dhawangayash at gmail.com (theone_d1)
Date: Wed, 2 Nov 2011 18:10:43 -0700 (PDT)
Subject: [rabbitmq-discuss] Setup tutorial for RabbitMQ helloworld
Message-ID: <a8e1a71f-cc28-4457-a616-5f6fff9d523d@13g2000prp.googlegroups.com>

http://www.rabbitmq.com/tutorials/tutorial-one-python.html


In this page for ubuntu a step is missing. It's a two step process:


1.) sudo apt-get install python-pip git-core
2.) pip install pika


Thanks,
Dhawan

From ozawa.tsuyoshi at gmail.com  Thu Nov  3 08:26:36 2011
From: ozawa.tsuyoshi at gmail.com (OZAWA Tsuyoshi)
Date: Thu, 03 Nov 2011 17:26:36 +0900
Subject: [rabbitmq-discuss] Asynchronous publish with Pika
In-Reply-To: <70B7FD4C9BFF4E5B8E38977B4341FF59@myyearbook.com>
References: <4EB0E488.1010507@gmail.com>
	<70B7FD4C9BFF4E5B8E38977B4341FF59@myyearbook.com>
Message-ID: <4EB2503C.2060601@gmail.com>

OK, I'll check pika 0.9.6p0.
Thank you for your advice.

(11/11/02 22:15), Gavin M. Roy wrote:
> basic_publish is completely asynchronous. There is no return frame
> unless you turn publisher confirms on (which is only available in pika
> in the github master branch which identifies itself as 0.9.6p0).
>
> On Wednesday, November 2, 2011 at 2:34 AM, OZAWA Tsuyoshi wrote:
>
>> Hi,
>>
>> I'm trying to write a RabbitMQ client with Pika.
>> My question is : How can I issue basic_publish() asynchronously with Pika?
>> The document says that connect(), channel(), basic_consume(), or some
>> functions can be issued asynchronously, but it is undocumented to
>> basic_publish() asynchronously.
>>
>> # I know that puka can do that very easily, however, it seems to be
>> still experimental.
>>
>> Best Regards,
>> OZAWA Tsuyoshi
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


From steve at rabbitmq.com  Thu Nov  3 15:47:34 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Thu, 3 Nov 2011 15:47:34 +0000
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
	connection
In-Reply-To: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>
Message-ID: <D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>

Benjamin,
Thanks for your detailed trace log.  It does look as though we are
getting EOF from the socket input stream and not handling it well.

Of course, Tracer may be just not coping with it, but it is
interesting that the mainline (doFrame()) code is the one that
fails internally.  Certainly, an EOFException ought to be caught
there and treated as though there is nothing to see yet.

Your log will help in trying to reproduce this in our testing,
I'm going to raise a bug for this problem, and get back to you
when we find the solution.

Steve Powell  (a happy bunny)
----------some definitions from the SPD----------
Rigatoni n. A prime-ministerial grin.
Nigella n. The next bottle-size up from a Nebuchadnezzar.
Homily adv. Rather like a frenchman.

On 2 Nov 2011, at 16:07, Benjamin Bennett wrote:
> http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-November/015968.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111103/f53abd7c/attachment.htm>

From nmqhoan at gmail.com  Thu Nov  3 17:49:41 2011
From: nmqhoan at gmail.com (Nguyen Mau Quoc Hoan)
Date: Thu, 3 Nov 2011 17:49:41 +0000
Subject: [rabbitmq-discuss] Rabbitmq message?
Message-ID: <CAAmbASyKE6GpKYLw64WfWwfxpt2gfgK4o8Ma=Vjp1GwE4HLTfw@mail.gmail.com>

How many type of rabbitmq message?I tried to send and receive an Java class
object as a Rabbitmq message but I failed? I read the rabbitmq example and
I realized that all the messages has String type.
Could any one help me?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111103/95b9da21/attachment.htm>

From jerryk at vmware.com  Thu Nov  3 19:55:53 2011
From: jerryk at vmware.com (Jerry Kuch)
Date: Thu, 3 Nov 2011 12:55:53 -0700 (PDT)
Subject: [rabbitmq-discuss] Rabbitmq message?
In-Reply-To: <CAAmbASyKE6GpKYLw64WfWwfxpt2gfgK4o8Ma=Vjp1GwE4HLTfw@mail.gmail.com>
Message-ID: <ecd492fc-b9d1-4458-8ee2-d46e705b6d65@CoachZ.local>

Hi:

Can you say a bit more about what precisely you were doing?

Also, have you consulted the tutorial series available here?

http://www.rabbitmq.com/tutorials/tutorial-one-java.html

There you'll see an AMQP basic.publish of a message.  The basicPublish(...)
method on the Java client's Channel class is javadoc'ed here:

http://www.rabbitmq.com/releases/rabbitmq-java-client/v2.6.1/rabbitmq-java-client-javadoc-2.6.1/com/rabbitmq/client/Channel.html#basicPublish(java.lang.String, java.lang.String, com.rabbitmq.client.AMQP.BasicProperties, byte[])

AMQP message bodies are binary data.  What you choose to use for this data 
is up to you.  When you say you tried to send a Java "class object" as a 
"RabbitMQ message," what did you actually do?  If you're planning to 
serialize raw Java POJOs for sending you'll have to marshal them into 
some format that the other end can deal with.  In many ways, this isn't
a terribly good idea, and will limit the generality of your design perhaps
unnecessarily (for example, what if a consumer isn't written in Java?  Or
doesn't have the right versions of whatever you were serializing on its 
classpath?  And that's even before you get into the security, safety and
correctness issues that come along with extralinguistic object creation 
schemes).  

It might be worth thinking a bit further about the meaning and intent of 
what you're wanting to communicate between your producers and consumers 
and choosing some format that both can deal with.  Then we can help you 
get down to brass tacks and the nitty gritty of actually transmitting it?

Best regards,
Jerry

----- Original Message -----
From: "Nguyen Mau Quoc Hoan" <nmqhoan at gmail.com>
To: rabbitmq-discuss at lists.rabbitmq.com
Sent: Thursday, November 3, 2011 10:49:41 AM
Subject: [rabbitmq-discuss] Rabbitmq message?


How many type of rabbitmq message?I tried to send and receive an Java class object as a Rabbitmq message but I failed? I read the rabbitmq example and I realized that all the messages has String type. 
Could any one help me? 

_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From jerryk at vmware.com  Thu Nov  3 20:13:54 2011
From: jerryk at vmware.com (Jerry Kuch)
Date: Thu, 3 Nov 2011 13:13:54 -0700 (PDT)
Subject: [rabbitmq-discuss] JSonRPC Encoding
In-Reply-To: <CAJ2-Vr=bc1FS=c_7WEnwxsbEi1yv5PZawqOpbT99iQf0GYp+ZQ@mail.gmail.com>
Message-ID: <7720cbe0-a2da-4daf-a70d-6fde6652491e@CoachZ.local>

Hi, 

You say that server side "the string is with squares."  What do you
mean?  You mean the hollow squares that often appear when characters
that aren't printable in a particular encoding are printed?  You 
may want to look at the character sets/encodings being assumed on 
either side of your round trip...

Or perhaps I misunderstand you totally?

Best regards,
Jerry

----- Original Message -----
From: "Mysurf Mail" <stammailbox at gmail.com>
To: "Emile Joubert" <emile at rabbitmq.com>
Cc: rabbitmq-discuss at lists.rabbitmq.com
Sent: Monday, October 31, 2011 6:46:38 AM
Subject: Re: [rabbitmq-discuss] JSonRPC Encoding



Hi, 
Thanks. 
I am using Gson (google). 


When I Gson in the client side - it passes to a correct json string . 
then I send it through the interface of jsomRpc Client server and in the server side the string is with squares. 


gsoning alone works fine in the client side. 
Again, 
thank you for your time. 


On Mon, Oct 31, 2011 at 1:32 PM, Emile Joubert < emile at rabbitmq.com > wrote: 


Hi, 


On 31/10/11 13:19, Mysurf Mail wrote: 
> Thanks for the answer. 
> Any suggestions how should I do some further investigations? 
> Thank you 

I seem to recall that you were using a different JSON library than the 
one provided in the com.rabbitmq.tools.json namespace. If that is the 
case then you should check the documentation of your library. RFC4627 
supports any Unicode encoding, defaulting to UTF-8. 

If you are using the default JSON code in com.rabbitmq.tools.json 
namespace then you only have the option of using UTF-8. JsonRpcServer is 
based on StringRpcServer which only supports UTF-8. 


-Emile 



_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From jerryk at vmware.com  Thu Nov  3 20:23:28 2011
From: jerryk at vmware.com (Jerry Kuch)
Date: Thu, 3 Nov 2011 13:23:28 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ and AMQP questions
In-Reply-To: <f19493fc-9ab0-4cf2-9326-2bb3a380ef07@j15g2000prn.googlegroups.com>
Message-ID: <51589565-4405-4656-a881-83beb8ed177f@CoachZ.local>

Hi, Mark:

Regarding 1:  In the presence of failures, defining once only semantics
isn't really possible and in some sense also isn't desirable (more on this
below).

Regarding 2:  We could think of RabbitMQ deliveries as being FIFO in the 
absence of certain types of failures.  Consider how AMQP ACKs are used to 
implement a "transfer of responsibility" for messages.  If a message is 
delivered to a consumer that contains within it directions for some job 
for the consumer to perform, the proper behavior is for the consumer to 
ACK the message once he has completed the job.  At that point, the Rabbit
broker knows it no longer needs to care about the message and can be relieved
of its obligation to remember the message.  If the consumer had crashed 
after delivery, but before ACK-ing, its channel to the broker would close 
and the broker would re-queue the message for redelivery as without the client's
ACK, the broker never relinquished responsibility for maintaining the message's
existence.  Thus we have "FIFO in the regular case, but with re-queueing that 
potentially weakens that, with a net result that you actually want, when 
something goes wrong."

Make sense?

Best regards,
Jerry

----- Original Message -----
From: "ae6rt" <mspetrovic at gmail.com>
To: rabbitmq-discuss at lists.rabbitmq.com
Sent: Tuesday, October 25, 2011 1:09:39 PM
Subject: [rabbitmq-discuss] RabbitMQ and AMQP questions

Good day.  I have read the RabbitMQ docs and the EAP RabbitMQ in
Action book.  And I'm in the process of evaluating AMQP and Rabbit
specifically for use in a major project.

I generally like what I see in Rabbit, but in the course of my
research, I have run across some statements about it that I would like
to understand better.  For example, this blog post

http://bhavin.directi.com/rabbitmq-vs-apache-activemq-vs-apache-qpid/

makes the following assertions about Rabbit:

1) No ONCE-ONLY semantics. Messages may be sent twice by RabbitMQ to
the consumer(s)

2) Unordered; not FIFO delivery

I'm actually not certain (1) is a criticism of AMQP or Rabbit.  On its
face, it seems morally neutral, yet at the same time it appears to
make an important point.  Some interpretation from people in the know
here would still be helpful and much appreciated.

As for (2), I recognize it as an oversimplication, after reading this
thread in this group:

http://groups.google.com/group/rabbitmq-discuss/browse_thread/thread/19066ba6f2944df8/f9d7d4bea18f2b5a?lnk=gst&q=fifo#

The explanation by Matthias Radestock is helpful, but even after
reading his citation of the AMQP spec with respect to channels and
"single paths", I am still left with the sense that somehow AMQP
recognizes and codes to a world that is not quite so simple as "is- or
isNot-FIFO".  But I cannot put my finger on why, or what exactly is
being said.

Would someone here be kind enough to talk about why section 4.7 of the
0.9.1 spec reads ever so slightly tortured?

And a short discussion of (1) would be very helpful, too.

Thank you very kindly.

Mark P.



_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From konstantin.kalin at gmail.com  Thu Nov  3 21:19:51 2011
From: konstantin.kalin at gmail.com (Konstantin Kalin)
Date: Thu, 3 Nov 2011 14:19:51 -0700 (PDT)
Subject: [rabbitmq-discuss] Active/Active failover and lost messages
Message-ID: <1d68ca63-5939-4447-bcbb-5761f6d5f627@x8g2000yql.googlegroups.com>

Hello,

I'm playing with RabbitMQ in Active/Active mode (Mirrored queues). I
think it's very good product. Currently I have an issue and I could
not find a reason for that. I would like to understand if I use
RabbitMQ not correctly.
My setup is:
 a) 3 cluster nodes (2 disc, 1 ram)
 b) 50 publishers/consumers. All publishers and consumers are
distributed between nodes.
 c) Message publishing rate is about 15 messages per second per
publisher.
 d) Publishers work with "Publisher confirms" mode
 e) Consumers work "autoack=false"
 f) A publisher or client knows about all nodes in the cluster and
does failover to another node if there is an issue with current
connection.

If I stop a node some consumers don't get all messages (even a
consumer is connected with another node). About 2-3 messages are
lost.
I did several tests and found a correlation. Only consumers getting
"ConsumerCancelledException" lose the messages. Other consumers don't
lose any messages even if they are connected with the node I stop.
Could you please advise what I need to check to find a reason of the
issue?

Thank you,
Konstantin.

From benbennett at gmail.com  Thu Nov  3 21:40:46 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Thu, 3 Nov 2011 16:40:46 -0500
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
	connection
In-Reply-To: <D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>
	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>
Message-ID: <CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>

Thanks for the help. My gut reaction there is some sort of latency issue.
I could only reproduced the problem 1/30 times on my linux box , and
on my windows 7  64-bit it happened maybe 1/20 times.
When I run it on our vm build farm the test cases hang 9/10 times.
The hang is always happening when trying to close a channel.
The tracer log was produced when logging into the vm and running the
build manually.

Do you think a good work around would be to put a connection timeout?
I was thinking about putting it in but I didn't exactly what that did,
don't want to risk breaking other code.

Thanks,
Benjamin Bennett

On Thu, Nov 3, 2011 at 10:47 AM, Steve Powell <steve at rabbitmq.com> wrote:
> Benjamin,
> Thanks for your detailed trace log. ?It does look as though we are
> getting EOF from the socket input stream and not handling it well.
> Of course, Tracer may be just not coping with it, but it is
> interesting that the mainline (doFrame()) code is the one that
> fails internally. ?Certainly, an EOFException ought to be caught
> there and treated as though there is nothing to see yet.
> Your log will help in trying to reproduce this in our testing,
> I'm going to raise a bug for this problem, and get back to you
> when we find the solution.
> Steve Powell ?(a happy bunny)
> ----------some definitions from the SPD----------
> Rigatoni?n.?A prime-ministerial grin.
> Nigella?n.?The next bottle-size up from a?Nebuchadnezzar.
> Homily?adv.?Rather like a frenchman.
> On 2 Nov 2011, at 16:07, Benjamin Bennett wrote:
>
> http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-November/015968.html

From smetj.net at gmail.com  Fri Nov  4 09:35:33 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Fri, 4 Nov 2011 02:35:33 -0700 (PDT)
Subject: [rabbitmq-discuss] Replacing Shovel with Federation,
	some configuration help required.
Message-ID: <12413974.1814.1320399333425.JavaMail.geo-discussion-forums@yqce21>

Hi all,

I have been experimenting with Shovel to transport messages between brokers 
over WAN links.
I would like to give the "federation" plugin a shot.

I was wondering where do I have to install and configure the federation 
plugin?  Does the federation exchange "pull" as a matter of speaking 
messages from a remote queue and publishes these into its own "federation 
exchange" in order to route them to the right queue(s)?

If I have a Shovel config like this, ... how would that translate in a 
"federation config" ?

[{rabbitmq_shovel,
  [{shovels,
    [{scan_results_city1,
      [{sources,      [{broker,"amqp://localhost"}]},
       {destinations, [{broker, "amqp://server02"}]},
       {queue, <<"scan_results">>},
       {ack_mode, on_confirm},
       {publish_properties, [{delivery_mode, 2}]},
       {publish_fields, [{exchange, <<"">>},
                         {routing_key, <<"scan_results">>}]},
       {reconnect_delay, 5}
      ]}
     ]
   }]
}].

Thanks for the help,

J


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111104/3d76a746/attachment.htm>

From simon at rabbitmq.com  Fri Nov  4 11:03:53 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 04 Nov 2011 11:03:53 +0000
Subject: [rabbitmq-discuss] Setup tutorial for RabbitMQ helloworld
In-Reply-To: <a8e1a71f-cc28-4457-a616-5f6fff9d523d@13g2000prp.googlegroups.com>
References: <a8e1a71f-cc28-4457-a616-5f6fff9d523d@13g2000prp.googlegroups.com>
Message-ID: <4EB3C699.80207@rabbitmq.com>

On 03/11/11 01:10, theone_d1 wrote:
> http://www.rabbitmq.com/tutorials/tutorial-one-python.html
>
>
> In this page for ubuntu a step is missing. It's a two step process:
>
>
> 1.) sudo apt-get install python-pip git-core
> 2.) pip install pika

Um, the page already explains this, doesn't it? It tells you how to 
install pika, then that you may need to install pip first, then how to 
install pip.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Fri Nov  4 11:29:53 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 04 Nov 2011 11:29:53 +0000
Subject: [rabbitmq-discuss] Replacing Shovel with Federation,
 some configuration help required.
In-Reply-To: <12413974.1814.1320399333425.JavaMail.geo-discussion-forums@yqce21>
References: <12413974.1814.1320399333425.JavaMail.geo-discussion-forums@yqce21>
Message-ID: <4EB3CCB1.1080404@rabbitmq.com>

On 04/11/11 09:35, Jelle Smet wrote:
> I have been experimenting with Shovel to transport messages between
> brokers over WAN links.
> I would like to give the "federation" plugin a shot.
>
> I was wondering where do I have to install and configure the federation
> plugin? Does the federation exchange "pull" as a matter of speaking
> messages from a remote queue and publishes these into its own
> "federation exchange" in order to route them to the right queue(s)?

Federation pulls messages that are published to remote *exchanges*, with 
a certain degree of smarts about making sure that messages don't get 
forwarded from one broker to another only to be dropped, and with a bit 
of control about how much messages get forwarded.

Shovel pulls or pushes messages from queues to exchanges. That's all.

So they have different purposes. I see the shovel as being a low-level 
tool: move messages from here to here. What you do with that is up to you.

Federation is a more opinionated tool: it's specifically for the case 
when you want an exchange that acts as though it's in a bunch of 
different brokers simultaneously.

If the shovel is working for you, you don't need to move away from it; 
it's not going anywhere.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From Simone.Busoli at ferrari.com  Fri Nov  4 12:10:53 2011
From: Simone.Busoli at ferrari.com (Busoli, Simone)
Date: Fri, 4 Nov 2011 12:10:53 +0000
Subject: [rabbitmq-discuss] Replacing Shovel with Federation,
	some configuration help required.
In-Reply-To: <4EB3CCB1.1080404@rabbitmq.com>
References: <12413974.1814.1320399333425.JavaMail.geo-discussion-forums@yqce21>
	<4EB3CCB1.1080404@rabbitmq.com>
Message-ID: <88E590DC4586974D825FC82AE798294E5206D36F@GSVCLU03.ges.ferlan.it>

Nonetheless I think that the ability to avoid forwarding messages which have been "shoveled" already is something which would come really handy in the Shovel as well, to avoid infinite loops with symmetric shovels in use cases where the federation does not fit.

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Simon MacMullen
Sent: venerd? 4 novembre 2011 12:30
To: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Replacing Shovel with Federation, some configuration help required.

On 04/11/11 09:35, Jelle Smet wrote:
> I have been experimenting with Shovel to transport messages between 
> brokers over WAN links.
> I would like to give the "federation" plugin a shot.
>
> I was wondering where do I have to install and configure the 
> federation plugin? Does the federation exchange "pull" as a matter of 
> speaking messages from a remote queue and publishes these into its own 
> "federation exchange" in order to route them to the right queue(s)?

Federation pulls messages that are published to remote *exchanges*, with a certain degree of smarts about making sure that messages don't get forwarded from one broker to another only to be dropped, and with a bit of control about how much messages get forwarded.

Shovel pulls or pushes messages from queues to exchanges. That's all.

So they have different purposes. I see the shovel as being a low-level
tool: move messages from here to here. What you do with that is up to you.

Federation is a more opinionated tool: it's specifically for the case when you want an exchange that acts as though it's in a bunch of different brokers simultaneously.

If the shovel is working for you, you don't need to move away from it; it's not going anywhere.

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

_________________________________________________________________________________________________________________
Questo messaggio ? da intendersi esclusivamente ad uso del destinatario e pu? contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non ? il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione ? 
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from 
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the 
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly 
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from 
your system.
_________________________________________________________________________________________________________________



From simon at rabbitmq.com  Fri Nov  4 12:12:07 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 04 Nov 2011 12:12:07 +0000
Subject: [rabbitmq-discuss] Replacing Shovel with Federation,
 some configuration help required.
In-Reply-To: <88E590DC4586974D825FC82AE798294E5206D36F@GSVCLU03.ges.ferlan.it>
References: <12413974.1814.1320399333425.JavaMail.geo-discussion-forums@yqce21>
	<4EB3CCB1.1080404@rabbitmq.com>
	<88E590DC4586974D825FC82AE798294E5206D36F@GSVCLU03.ges.ferlan.it>
Message-ID: <4EB3D697.1090308@rabbitmq.com>

On 04/11/11 12:10, Busoli, Simone wrote:
> Nonetheless I think that the ability to avoid forwarding messages
> which have been "shoveled" already is something which would come
> really handy in the Shovel as well, to avoid infinite loops with
> symmetric shovels in use cases where the federation does not fit.

Hmm, good point.

Cheers, Simon
-- 
Simon MacMullen
RabbitMQ, VMware

From matthew at rabbitmq.com  Fri Nov  4 15:38:22 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Fri, 4 Nov 2011 15:38:22 +0000
Subject: [rabbitmq-discuss] Publisher Confirms stop occurring when
 Consumer is present and queue is large
In-Reply-To: <CAGWz9vXsOczQ2QJAu0oYxyYb-4KByYDLFxynsi7Tg4x1xkrYyA@mail.gmail.com>
References: <CAGWz9vUwmOdg9TibndZ+UE4Vz1Btyz95CmTf1Xu=m0H4ONe6qw@mail.gmail.com>
	<20111101063139.GA3240@rabbitmq.com>
	<CAGWz9vXsOczQ2QJAu0oYxyYb-4KByYDLFxynsi7Tg4x1xkrYyA@mail.gmail.com>
Message-ID: <20111104153821.GA31860@wellquite.org>

Hi Cameron,

On Wed, Nov 02, 2011 at 12:10:21AM -0500, Cameron Davison wrote:
> Thank you for the reply. Do y'all have a bug tracker that I would be
> able to watch so that I can know when y'all address this issue?

We do have a bug tracker but alas it's not public because we all like to
curse and scream at each other and generally feel that making it public
would preclude us from doing that, which would be bad for morale.

> Do you
> know if this same thing would be even worse for a mirrored queue
> rabbit mq cluster?

I don't think this bug will affect mirrored queues in a worse way than
non-mirrored queues...

> I am seeing a lot of degradation in write
> throughput while reading when doing mirrored queue cluster. All I
> really want is high availability such that if one server crashed the
> slave in the cluster will become the master and allow for continued
> throughput. Is this the correct way to that?

Yes - you are doing things the right way. Mirrored queues are much
slower than non-mirrored queues due to the additional work that has to
be done. You should probably expect to see about a ten-fold decrease in
performance.

http://old.nabble.com/Mirror-queues-and-poor-write-performance-td32727693.html
reports that I can get a little over 2kHz on a single mirrored queue
with one consumer keeping the queue empty.

But the bug that you've identified will certainly affect mirrored queues
as well as non-mirrored queues.

One thing you could try is on the consumer:
1. Try a fairly healthy qos prefetch size N (eg N=100)
2. Only ack every N/2 (eg 50) msgs but turn on the "multiple" flag in
the ack.

The effect of these changes will be to reduce the consumer-related
messages that the queue has to deal with, and so will hopefully allow
the queue to process the publishes faster (and issue the confirms).

If you're able to try these changes, I'd be interested in what
improvements (if any) they achieve for you.

Best wishes,

Matthew

From matthew at rabbitmq.com  Fri Nov  4 16:10:23 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Fri, 4 Nov 2011 16:10:23 +0000
Subject: [rabbitmq-discuss] Active/Active failover and lost messages
In-Reply-To: <1d68ca63-5939-4447-bcbb-5761f6d5f627@x8g2000yql.googlegroups.com>
References: <1d68ca63-5939-4447-bcbb-5761f6d5f627@x8g2000yql.googlegroups.com>
Message-ID: <20111104161022.GB31860@wellquite.org>

Hi Konstantin,

On Thu, Nov 03, 2011 at 02:19:51PM -0700, Konstantin Kalin wrote:
> I'm playing with RabbitMQ in Active/Active mode (Mirrored queues). I
> think it's very good product. Currently I have an issue and I could
> not find a reason for that. I would like to understand if I use
> RabbitMQ not correctly.
> My setup is:
>  a) 3 cluster nodes (2 disc, 1 ram)
>  b) 50 publishers/consumers. All publishers and consumers are
> distributed between nodes.
>  c) Message publishing rate is about 15 messages per second per
> publisher.
>  d) Publishers work with "Publisher confirms" mode
>  e) Consumers work "autoack=false"
>  f) A publisher or client knows about all nodes in the cluster and
> does failover to another node if there is an issue with current
> connection.

That all sounds fine, but you don't mention whether all 50 publishers
publish to the same queue and you have 50 consumers consuming from that
queue, or whether each pair of publisher+consumer have an individual
queue between them.

> If I stop a node some consumers don't get all messages (even a
> consumer is connected with another node). About 2-3 messages are
> lost.

Without understanding your topology better, I'm not quite sure how to
interpret that.

> I did several tests and found a correlation. Only consumers getting
> "ConsumerCancelledException" lose the messages. Other consumers don't
> lose any messages even if they are connected with the node I stop.
> Could you please advise what I need to check to find a reason of the
> issue?

Ok, so that looks like you're using the Java client? Are you also using
the QueueingConsumer? It's possible that if not, you've been sent some
messages but they've being overtaken by the exception in some way. If
you use the QueueingConsumer, that shouldn't happen. However, that said,
for other reasons, if this was occurring, I'd expect you to be resent
such messages when you reconsumed from the queue.

I've recently improved our MulticastMain java example so that it copes
transparently with the ConsumerCancelledException (though I've actually
not used it to verify the absence of message loss).

http://hg.rabbitmq.com/rabbitmq-java-client/file/15f36113ffd3/test/src/com/rabbitmq/examples/MulticastMain.java
from line 442 onwards may be of use. Oh yes, I discovered when doing
that QueueingConsumers are not reusable - you really do have to create a
new one whenever you resubscribe. That bit me for a while...


Best wishes,

Matthew

From ilya at segment.io  Fri Nov  4 15:52:42 2011
From: ilya at segment.io (Ilya Volodarsky)
Date: Fri, 4 Nov 2011 08:52:42 -0700 (PDT)
Subject: [rabbitmq-discuss] Single vs. Multiple Queue Topology Performance
Message-ID: <fff8e7f7-5006-468d-957e-635809ff9654@hv4g2000vbb.googlegroups.com>

Hi,

We have an high rate API that has three possible tasks. Web servers
will receive the client's tasks, validate the input, and queue them in
Rabbit. Then, a service will later dequeue these tasks and process
them. I was wondering if putting all these messages into one queue has
any performance or durability repercussions. An alternative is to
separate the tasks into multiple queues based on the client API key,
or on the API verb. Is there any preferred method, or does it not
matter?
Thanks,

Ilya

From jerryk at vmware.com  Fri Nov  4 16:52:11 2011
From: jerryk at vmware.com (Jerry Kuch)
Date: Fri, 4 Nov 2011 09:52:11 -0700 (PDT)
Subject: [rabbitmq-discuss] Single vs. Multiple Queue Topology
	Performance
In-Reply-To: <fff8e7f7-5006-468d-957e-635809ff9654@hv4g2000vbb.googlegroups.com>
Message-ID: <1f97b647-2bd9-4c87-b00c-404eedc67e7c@StrongMad.local>

Hi, Ilya...

It really depends on what you see as the likely "steady state" Rabbit will 
exist in, given your workload.  A good rule of thumb is that "a happy Rabbit
is an empty Rabbit," i.e. the broker is happiest when consumers are pulling 
messages out of it at a rate reasonably well matched to the rate at which 
producers are pumping things into it (although of course the broker has 
mechanisms for coping with imbalances).

With respect to using one big queue for all of your work items vs separating
things into multiple queues, there are maybe a couple of things to think 
about:

First, you can add multiple consumers to a single queue.  Should you find
that your customers are producing jobs at the front end of your web site
at a higher than anticipated rate, you can always add more back end workers
to consume those jobs from the queue and parallelize their processing (assuming
of course the back end tasks are parallelizable).  If you somehow reach the 
maximum throughput that a single queue can provide, then you could consider 
adding additional queues and spraying your tasks across them.

The second issue to consider is that of availability.  Unless you're using the
new active/active HA system that debuted in Rabbit 2.6.x, each queue's contents
exist only on a single Rabbit node.  Thus, if that node becomes unavailable that
queue's messages are unavailable until it comes back up.  In this case though, 
the solution is probably not to come up with a complex multi-queue solution in
your application but instead to use Rabbit's HA features, either the old style
active/passive HA (where shared storage stands behind each active/passive pair)
or the new active/active HA (where you can specify that a queue be replicated
on multiple nodes in a cluster, as well as how many replicas you want).

So bottom line:  because you can put many consumers on a single queue, it
shouldn't be a bottleneck unless your production rate really overwhelms
what a single queue process can handle.  If you're worried about availability,
using a built-in Rabbit HA feature is probably the way to go and will save you
having to re-implement that in your application.  Finally, if you are going to 
use multiple queues and aren't in the situation of being forced to do so 
by straight-line throughput limitations, introduce new queues based on the logical
structure of your app and its semantics for handling tasks, rather than as
a possibly premature performance optimization.

Does that make sense?  Please feel free to continue the discussion if there
are still things you're wondering about...

Best regards,
Jerry 



----- Original Message -----
From: "Ilya Volodarsky" <ilya at segment.io>
To: rabbitmq-discuss at lists.rabbitmq.com
Sent: Friday, November 4, 2011 8:52:42 AM
Subject: [rabbitmq-discuss] Single vs. Multiple Queue Topology Performance

Hi,

We have an high rate API that has three possible tasks. Web servers
will receive the client's tasks, validate the input, and queue them in
Rabbit. Then, a service will later dequeue these tasks and process
them. I was wondering if putting all these messages into one queue has
any performance or durability repercussions. An alternative is to
separate the tasks into multiple queues based on the client API key,
or on the API verb. Is there any preferred method, or does it not
matter?
Thanks,

Ilya
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From jerryk at vmware.com  Fri Nov  4 17:32:11 2011
From: jerryk at vmware.com (Jerry Kuch)
Date: Fri, 4 Nov 2011 10:32:11 -0700 (PDT)
Subject: [rabbitmq-discuss] Publisher Confirms stop occurring when
	Consumer is present and queue is large
In-Reply-To: <20111104153821.GA31860@wellquite.org>
Message-ID: <6a0411f9-e56f-450a-a9e8-3f35a86f7839@StrongMad.local>

Do watch for our upcoming "Cursing and Screaming as a Service" (CaSaaS)
offering! :-)

Jerry

----- Original Message -----
From: "Matthew Sackman" <matthew at rabbitmq.com>
To: rabbitmq-discuss at lists.rabbitmq.com
Sent: Friday, November 4, 2011 8:38:22 AM
Subject: Re: [rabbitmq-discuss] Publisher Confirms stop occurring when Consumer is present and queue is large

Hi Cameron,

On Wed, Nov 02, 2011 at 12:10:21AM -0500, Cameron Davison wrote:
> Thank you for the reply. Do y'all have a bug tracker that I would be
> able to watch so that I can know when y'all address this issue?

We do have a bug tracker but alas it's not public because we all like to
curse and scream at each other and generally feel that making it public
would preclude us from doing that, which would be bad for morale.

> Do you
> know if this same thing would be even worse for a mirrored queue
> rabbit mq cluster?

I don't think this bug will affect mirrored queues in a worse way than
non-mirrored queues...

> I am seeing a lot of degradation in write
> throughput while reading when doing mirrored queue cluster. All I
> really want is high availability such that if one server crashed the
> slave in the cluster will become the master and allow for continued
> throughput. Is this the correct way to that?

Yes - you are doing things the right way. Mirrored queues are much
slower than non-mirrored queues due to the additional work that has to
be done. You should probably expect to see about a ten-fold decrease in
performance.

http://old.nabble.com/Mirror-queues-and-poor-write-performance-td32727693.html
reports that I can get a little over 2kHz on a single mirrored queue
with one consumer keeping the queue empty.

But the bug that you've identified will certainly affect mirrored queues
as well as non-mirrored queues.

One thing you could try is on the consumer:
1. Try a fairly healthy qos prefetch size N (eg N=100)
2. Only ack every N/2 (eg 50) msgs but turn on the "multiple" flag in
the ack.

The effect of these changes will be to reduce the consumer-related
messages that the queue has to deal with, and so will hopefully allow
the queue to process the publishes faster (and issue the confirms).

If you're able to try these changes, I'd be interested in what
improvements (if any) they achieve for you.

Best wishes,

Matthew
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From ilya at segment.io  Fri Nov  4 19:05:24 2011
From: ilya at segment.io (Ilya Volodarsky)
Date: Fri, 4 Nov 2011 12:05:24 -0700 (PDT)
Subject: [rabbitmq-discuss] Single vs. Multiple Queue Topology
	Performance
In-Reply-To: <1f97b647-2bd9-4c87-b00c-404eedc67e7c@StrongMad.local>
References: <1f97b647-2bd9-4c87-b00c-404eedc67e7c@StrongMad.local>
Message-ID: <66de83ab-5a3f-4c10-b79a-752749a8870a@r7g2000vbg.googlegroups.com>

Hey Jerry,

Thanks for your very detailed answer. Regarding availability and
durability, I definitely plan to use the active/active mirror queue
approach on the queue. We hope to have the broker be in a "good"
steady state, in that we'll have enough consumers to empty the queue
at hopefully the same rate as they come in. The queue is mostly there
so that we can upgrade the consumers without losing any of the tasks,
and in case there is a strong spike in traffic, Rabbit can buffer the
messages for a few seconds.

I have a follow up question if you don't mind:

You said "it shouldn't be a bottleneck unless your production rate
really overwhelms what a single queue process can handle". If there a
process per queue, aren't we losing the advantages of multiple cores
helping in the dequeuing to consumers? Wouldn't that be the advantage
of having multiple queues?

The point about premature optimization is well taken, I think it would
be ideal to have a single queue. Just trying to figure out if that
puts us at a massive disadvantage since this queue could potentially
get big at times. Thanks very much!

Ilya

On Nov 4, 12:52?pm, Jerry Kuch <jer... at vmware.com> wrote:
> Hi, Ilya...
>
> It really depends on what you see as the likely "steady state" Rabbit will
> exist in, given your workload. ?A good rule of thumb is that "a happy Rabbit
> is an empty Rabbit," i.e. the broker is happiest when consumers are pulling
> messages out of it at a rate reasonably well matched to the rate at which
> producers are pumping things into it (although of course the broker has
> mechanisms for coping with imbalances).
>
> With respect to using one big queue for all of your work items vs separating
> things into multiple queues, there are maybe a couple of things to think
> about:
>
> First, you can add multiple consumers to a single queue. ?Should you find
> that your customers are producing jobs at the front end of your web site
> at a higher than anticipated rate, you can always add more back end workers
> to consume those jobs from the queue and parallelize their processing (assuming
> of course the back end tasks are parallelizable). ?If you somehow reach the
> maximum throughput that a single queue can provide, then you could consider
> adding additional queues and spraying your tasks across them.
>
> The second issue to consider is that of availability. ?Unless you're using the
> new active/active HA system that debuted in Rabbit 2.6.x, each queue's contents
> exist only on a single Rabbit node. ?Thus, if that node becomes unavailable that
> queue's messages are unavailable until it comes back up. ?In this case though,
> the solution is probably not to come up with a complex multi-queue solution in
> your application but instead to use Rabbit's HA features, either the old style
> active/passive HA (where shared storage stands behind each active/passive pair)
> or the new active/active HA (where you can specify that a queue be replicated
> on multiple nodes in a cluster, as well as how many replicas you want).
>
> So bottom line: ?because you can put many consumers on a single queue, it
> shouldn't be a bottleneck unless your production rate really overwhelms
> what a single queue process can handle. ?If you're worried about availability,
> using a built-in Rabbit HA feature is probably the way to go and will save you
> having to re-implement that in your application. ?Finally, if you are going to
> use multiple queues and aren't in the situation of being forced to do so
> by straight-line throughput limitations, introduce new queues based on the logical
> structure of your app and its semantics for handling tasks, rather than as
> a possibly premature performance optimization.
>
> Does that make sense? ?Please feel free to continue the discussion if there
> are still things you're wondering about...
>
> Best regards,
> Jerry
>
>
>
>
>
>
>
> ----- Original Message -----
> From: "Ilya Volodarsky" <i... at segment.io>
> To: rabbitmq-disc... at lists.rabbitmq.com
> Sent: Friday, November 4, 2011 8:52:42 AM
> Subject: [rabbitmq-discuss] Single vs. Multiple Queue Topology Performance
>
> Hi,
>
> We have an high rate API that has three possible tasks. Web servers
> will receive the client's tasks, validate the input, and queue them in
> Rabbit. Then, a service will later dequeue these tasks and process
> them. I was wondering if putting all these messages into one queue has
> any performance or durability repercussions. An alternative is to
> separate the tasks into multiple queues based on the client API key,
> or on the API verb. Is there any preferred method, or does it not
> matter?
> Thanks,
>
> Ilya
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From jerryk at vmware.com  Fri Nov  4 19:22:54 2011
From: jerryk at vmware.com (Jerry Kuch)
Date: Fri, 4 Nov 2011 12:22:54 -0700 (PDT)
Subject: [rabbitmq-discuss] Single vs. Multiple Queue
	Topology	Performance
In-Reply-To: <66de83ab-5a3f-4c10-b79a-752749a8870a@r7g2000vbg.googlegroups.com>
Message-ID: <c7479ed3-2ee7-47cd-9fe2-11a594ff4f12@CoachZ.local>

Hi, Ilya...

> Thanks for your very detailed answer. Regarding availability and
> durability, I definitely plan to use the active/active mirror queue
> approach on the queue. We hope to have the broker be in a "good"
> steady state, in that we'll have enough consumers to empty the queue
> at hopefully the same rate as they come in. The queue is mostly there
> so that we can upgrade the consumers without losing any of the tasks,
> and in case there is a strong spike in traffic, Rabbit can buffer the
> messages for a few seconds.

Rabbit will likely be happier sweating under a burden from consumers
that have failed or become overwhelmed themselves for much longer than
a seconds, subject to available memory, then disk space, then CPU
cycles on the broker system, so your design as proposed should be in
good shape in this respect.

> I have a follow up question if you don't mind:

Absolutely! :-)

> You said "it shouldn't be a bottleneck unless your production rate
> really overwhelms what a single queue process can handle". If there a
> process per queue, aren't we losing the advantages of multiple cores
> helping in the dequeuing to consumers? Wouldn't that be the advantage
> of having multiple queues?

Apologies... my language was imprecise... By "single 'process' per
queue" I meant "single *Erlang process*," not "single full-on, heavy-weight
OS process."

Each queue in Rabbit is implemented as its own Erlang process.  An
Erlang process is really much more like a very lightweight, "green
thread," than it is the OS process that I probably sounded like I was
referring to.

Indeed an "Erlang process" is much lighter weight than an OS thread
or JVM thread (which is backed by an OS thread on all the widely
used JVM implementations today anyway).  Ericsson's choice of the word
'process' in this context is probably unfortunate.  My apologies if I
raised alarm bells by using the word without carefully drawing the
distinction.

To give you an idea of how much more lightweight an Erlang process is
than an OS or Java thread, Erlang applications that have hundreds of
thousands or more "Erlang processes" running within them are not at
all outlandish or exotic in their scale today.  A contemporary JVM
running with half a million java.lang.Thread's alive in it is another
story (memory requirements alone, counting the managed and native stacks,
may have sent you packing as you allocated them in the first place, on
all but the most monstrously powerful hardware).

> The point about premature optimization is well taken, I think it would
> be ideal to have a single queue. Just trying to figure out if that
> puts us at a massive disadvantage since this queue could potentially
> get big at times. Thanks very much!

The size of the queue in terms of the number of messages waiting on it
will ultimately be determined by how much disk space there is to back
the queue if Rabbit comes under memory pressure due to un-ACK-ed
messages and has to start using its internal paging mechanism to move
them to disk and free up working memory (see our documentation on
"memory-based flow control" for details if you're curious).

If you run into scaling limits with a single queue they're likely to
arise from there only being so many cycles/sec available on the
core(s) the queue process is scheduled on before anything else.  If
you really did have straight line throughput hammering a single queue
that so overwhelmed the lifting capacity of a single core, then you'd
want to consider throwing more queues at the process and spreading
load across them since then you could rely on Erlang's scheduler to
spread your work across more physical cores.  Building out your
application starting with a simple queueing topology, and then load
testing to see if you hit that scenario, will tell you when or whether
you need to get more exotic in your design.

Best regards,
Jerry


From paul.fowler at gmail.com  Fri Nov  4 19:06:09 2011
From: paul.fowler at gmail.com (architect)
Date: Fri, 4 Nov 2011 12:06:09 -0700 (PDT)
Subject: [rabbitmq-discuss] Complaint on lack of easy stand-alone GUI tool
	to examine RabbitMQ queues/topics
Message-ID: <c5adb465-dd05-4259-a300-ddade80ba32a@r2g2000vbj.googlegroups.com>

I see this complaint mentioned by other people, but I see no
resolution.

RabbitMQ community does not have a quick GUI client that can be
installed to inspect queues, etc...  There needs to be a simple .net
program or java program to examine RabbitMQ.  No, the plugin isn't
simple enough as shown below.

My experience today:
1) Try to install RabbitMQ for use by VMware Cloud Director on the
RHEL 5.x server.
2) RabbitMQ install doesn't work since the erlang packages are not
available at Redhat repository, and our proxy prevents getting them
directly from erlang repository.  Eventually, we find an ftp site with
erlang-R12B-3.3.el5.kb.x86_64.rpm.
3) Erlang requires some gtkwx_core libraries which take 2 hours to
locate on the internet, because they are really called wxGTK.
Eventually the wxGTK-2.8.12-1.el5.rf.x86_64.rpm is found and
downloaded and installed.  Literally 4 hours are spent just getting
RabbitMQ installed on RHEL 5.7 64bit.
5) Now RabbitMQ is running and we configure VMware Cloud Director to
connect and it does, but where does it put the messages???  We don't
know where due to poor vmware documentation.  However, we need to
somehow get VMware Orchestrator to receive the messages.  What we need
is some nice graphical client to inspect the queues so we can
configure Orchestrator with the correct Queue names or Topic names...
It would also help to see the contents of the messages.
6) We can't use the plug-in for RabbitMQ, because erlang needs to be
R13 or higher.  There are no instructions for downloading R13 for RHEL
5.7, let alone any instructions for how we would upgrade the product
and not break anything.
7) All the other GUI tools require app servers, java servers, and
dozens upon dozens of downloads and installs in order to function.
Most "tools" are really api and code samples that do us no good unless
we want to spend a day or two programming and learning APIs that we
will never use again.
8) All we want to do is easily examine the queues and topics (without
spending forever reading command line documentation) so that we can
see what is happening and try to match up vCloud Director and
Orchestrator configuration.

Can somebody just create a quick graphical client for RabbitMQ that
doesn't require a lead programmer to install and configure?  We don't
want to create and code our own clients...

Enough ranting.  Seriously, somebody please be a hero.  Assume the
user is a complete AMQP novice with no time on their hands to study
usage of the tools.  We would love the tool to be packaged as an .msi
that installs right onto Windows XP or Windows 7.

Then we can get vCloud director to post a message, we can look at the
various queues or topics to find out where the message went and then
we can configure vCloud orchestrator to read the message and take
actions...

This lack of a basic tooling for RabbitMQ is very frustrating.

From jasonjwwilliams at gmail.com  Fri Nov  4 20:04:49 2011
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Fri, 4 Nov 2011 14:04:49 -0600
Subject: [rabbitmq-discuss] Complaint on lack of easy stand-alone GUI
 tool to examine RabbitMQ queues/topics
In-Reply-To: <c5adb465-dd05-4259-a300-ddade80ba32a@r2g2000vbj.googlegroups.com>
References: <c5adb465-dd05-4259-a300-ddade80ba32a@r2g2000vbj.googlegroups.com>
Message-ID: <CAHZAEpekLmngTv7YqmUMm9ic02tpt=BDCDEL5OaSDGAFo7sCHw@mail.gmail.com>

> Enough ranting. ?Seriously, somebody please be a hero. ?Assume the
> user is a complete AMQP novice with no time on their hands to study
> usage of the tools. ?We would love the tool to be packaged as an .msi
> that installs right onto Windows XP or Windows 7.
>
> Then we can get vCloud director to post a message, we can look at the
> various queues or topics to find out where the message went and then
> we can configure vCloud orchestrator to read the message and take
> actions...
>
> This lack of a basic tooling for RabbitMQ is very frustrating.

The web UI plugin works decently these tasks. It sounds like the issue
really is that vCloud Director does not provide the necessary
observability (GUI) to wire Rabbit (which it's depending on) up with
other VMware solutions. I'm not a Redhat guy, but on Ubuntu there is a
package called erlang-nox (no X dependencies) that is targeted for
server installs where you're not going to be using Erlang's GUI
libraries. I would hope that Redhat has a similar Erlang package.

Here's a screencast of using the web UI to inspect a message from a
queue (and requeue it so that someone else picks it up):

http://screencast.com/t/cOKO6BJ9l

It would be nice to see the web UI extended to turn on observability
of messages flowing through without consuming them (a la Matthew's
visualization plugin).

-J

From jerryk at vmware.com  Fri Nov  4 20:22:34 2011
From: jerryk at vmware.com (Jerry Kuch)
Date: Fri, 4 Nov 2011 13:22:34 -0700 (PDT)
Subject: [rabbitmq-discuss] Complaint on lack of easy stand-alone GUI
	tool	to examine RabbitMQ queues/topics
In-Reply-To: <c5adb465-dd05-4259-a300-ddade80ba32a@r2g2000vbj.googlegroups.com>
Message-ID: <be2d8e3e-67bd-4113-be4b-d67b76780d59@CoachZ.local>

Hi, Paul...

Sorry to hear you've been having frustrations!

> RabbitMQ community does not have a quick GUI client that can be
> installed to inspect queues, etc...  There needs to be a simple .net
> program or java program to examine RabbitMQ.  No, the plugin isn't
> simple enough as shown below.

By a "quick GUI client" what are you after?  I'm assuming the
web-based management plugin isn't meeting your needs?  Can you
describe further how it's letting you down?

If ease of install of the plugin is the concern, the Rabbit team is
currently working on a way to ship the common plugins that are
internally developed by the team, with the broker, with an easy on/off
toggling mechanism.  That at least saves one having to download and
install the pieces.  I can't make promises about its availability or
timeline at the moment though.

> My experience today:
> 1) Try to install RabbitMQ for use by VMware Cloud Director on the
> RHEL 5.x server.
> 2) RabbitMQ install doesn't work since the erlang packages are not
> available at Redhat repository, and our proxy prevents getting them
> directly from erlang repository.  Eventually, we find an ftp site with
> erlang-R12B-3.3.el5.kb.x86_64.rpm.
> 3) Erlang requires some gtkwx_core libraries which take 2 hours to
> locate on the internet, because they are really called wxGTK.
> Eventually the wxGTK-2.8.12-1.el5.rf.x86_64.rpm is found and
> downloaded and installed.  Literally 4 hours are spent just getting
> RabbitMQ installed on RHEL 5.7 64bit.

Apologies: this is an incredibly common travail for folks getting
started with Rabbit on RHEL.  Long term it would be nice to get the
modern Erlang into the default RHEL RPM repositories.  Shorter term,
one has to deal with the EPEL installation and the setup of Peter
Lemenkov's fedorapeople repository.  We do document this, but the
current form of that is clearly less than entirely adequate as people
shipwreck on it pretty routinely.  Below I document what should be a
robotically reproducible set of steps to get you squared away on this
front.

If one's ducks are fully in a row the (admittedly horrid) four hours
you refer to collapses to just a few minutes, modulo however long it
takes to pull the needed RPMs down over your internet connection.

So: Yes, the current state of things you docuemnt in (1) through (3)
sort of sucks.  With better and more find-able documentation it's
reducible to a modest annoyance rather than a bewildering ordeal.

Below follows the ritual for getting an Erlang modern enough to make
you happy going on your RHEL system:

#############################################################################

# First, make sure your RHEL is setup for updates with rhn_register...
rhn_register

# There are repository rpm packages for RHEL4 , RHEL5 and RHEL6. The
# repository package installs the repo details on your local system
# for yum or up2date to use. Then you can install packages with your
# usual method, and the EPEL repository is included.

su -c 'rpm -Uvh http://download.fedora.redhat.com/pub/epel/5/i386/epel-release-5-4.noarch.rpm'

# Note to users of RHEL 5 and derived distributions (e.g. CentOS 5): Due
# to the EPEL package update policy, EPEL 5 contains Erlang version
# R12B-5, which is relatively old. rabbitmq-server supports R12B-5, but
# performance may be lower than for more recent Erlang versions, and
# certain non-core features are not supported (SSL support, HTTP-based
# plugins). Therefore, we recommend that you install the most recent
# stable version of Erlang. The easiest way to do this is to use a
# package repository provided for this purpose by the owner of the EPEL
# Erlang package. Enable it by invoking (as root):

sudo wget -O /etc/yum.repos.d/epel-erlang.repo http://repos.fedorapeople.org/repos/peter/erlang/epel-erlang.repo

# and then install or update erlang with...
sudo yum install erlang

# Now get RabbitMQ (2.6.1 is the current OSS release)
wget http://www.rabbitmq.com/releases/rabbitmq-server/v2.6.1/rabbitmq-server-2.6.1-1.noarch.rpm

# and install it...
sudo rpm -i rabbitmq-server-2.6.1-1.noarch.rpm

# start the rabbitmq service
sudo /sbin/service rabbitmq-server start

# check on the rabbitmq service's status
sudo /sbin/service rabbitmq-server status

#############################################################################

This gets you a fully up to date Rabbit, into which you can drop the
management plugin using the instructions at:

http://www.rabbitmq.com/management.html#installation

With that done, the plugin is ready to do your bidding and give you
almost everything I think you're asking for in this post.

> 5) Now RabbitMQ is running and we configure VMware Cloud Director to
> connect and it does, but where does it put the messages???  We don't
> know where due to poor vmware documentation.  However, we need to
> somehow get VMware Orchestrator to receive the messages.  What we need
> is some nice graphical client to inspect the queues so we can
> configure Orchestrator with the correct Queue names or Topic names...
> It would also help to see the contents of the messages.

The management client will allow you to inspect queues, exchanges,
bindings and their properties.  Message contents I don't believe it
gives you, but since AMQP message payloads are opaque binary blobs
about which the protocol is entirely agnostic, this won't always give
you something very friendly.

> 6) We can't use the plug-in for RabbitMQ, because erlang needs to be
> R13 or higher.  There are no instructions for downloading R13 for RHEL
> 5.7, let alone any instructions for how we would upgrade the product
> and not break anything.

Ah, so you must be running the ancient Erlang that's part of the RHEL
repositories by default!  That's fixable using the EPEL-fedorapeople
workaround I mention above.  Once we get you straightened out on that
you should be in good shape on the management plugin.

> 8) All we want to do is easily examine the queues and topics (without
> spending forever reading command line documentation) so that we can
> see what is happening and try to match up vCloud Director and
> Orchestrator configuration.

When one doesn't have the management plugin, the rabbitmqctl tool is a
good text-based way to see what queues/exchanges/bindings exist in
your universe, how many messages are lurking in queues, what their
status is, etc.

See:

  http://www.rabbitmq.com/man/rabbitmqctl.1.man.html

for details.  The nice thing about rabbitmqctl is that it's always there...

> Can somebody just create a quick graphical client for RabbitMQ that
> doesn't require a lead programmer to install and configure?  We don't
> want to create and code our own clients...

The management plugin's really pretty straightforward and well liked
once you're past the road blocks you've hit.  Give the above
incantations a try to get the proper Erlang in place and you should be
doing better.

Also, the commercially supported version of Rabbit, sold by VMware as
part of the vFabric suite, also contains an RPM with both the
management and stomp plugins packaged in it, that's easy to install
(again, provided you've got a new Erlang installed, which entail the
EPEL/fedorapeople/etc. rigmarole above).

Best regards,
Jerry

From ilya at segment.io  Sat Nov  5 02:25:17 2011
From: ilya at segment.io (Ilya Volodarsky)
Date: Fri, 4 Nov 2011 19:25:17 -0700 (PDT)
Subject: [rabbitmq-discuss] Single vs. Multiple Queue Topology
	Performance
In-Reply-To: <c7479ed3-2ee7-47cd-9fe2-11a594ff4f12@CoachZ.local>
References: <c7479ed3-2ee7-47cd-9fe2-11a594ff4f12@CoachZ.local>
Message-ID: <ad5e0299-1a5f-4973-b626-2b139e5fdb19@u12g2000vbx.googlegroups.com>

Thanks Jerry! Your answers were very thorough and helpful. I'll build
it with one queue, and compare it to the other alternative if the load
testing shows its necessary. Thanks again!

On Nov 4, 3:22?pm, Jerry Kuch <jer... at vmware.com> wrote:
> Hi, Ilya...
>
> > Thanks for your very detailed answer. Regarding availability and
> > durability, I definitely plan to use the active/active mirror queue
> > approach on the queue. We hope to have the broker be in a "good"
> > steady state, in that we'll have enough consumers to empty the queue
> > at hopefully the same rate as they come in. The queue is mostly there
> > so that we can upgrade the consumers without losing any of the tasks,
> > and in case there is a strong spike in traffic, Rabbit can buffer the
> > messages for a few seconds.
>
> Rabbit will likely be happier sweating under a burden from consumers
> that have failed or become overwhelmed themselves for much longer than
> a seconds, subject to available memory, then disk space, then CPU
> cycles on the broker system, so your design as proposed should be in
> good shape in this respect.
>
> > I have a follow up question if you don't mind:
>
> Absolutely! :-)
>
> > You said "it shouldn't be a bottleneck unless your production rate
> > really overwhelms what a single queue process can handle". If there a
> > process per queue, aren't we losing the advantages of multiple cores
> > helping in the dequeuing to consumers? Wouldn't that be the advantage
> > of having multiple queues?
>
> Apologies... my language was imprecise... By "single 'process' per
> queue" I meant "single *Erlang process*," not "single full-on, heavy-weight
> OS process."
>
> Each queue in Rabbit is implemented as its own Erlang process. ?An
> Erlang process is really much more like a very lightweight, "green
> thread," than it is the OS process that I probably sounded like I was
> referring to.
>
> Indeed an "Erlang process" is much lighter weight than an OS thread
> or JVM thread (which is backed by an OS thread on all the widely
> used JVM implementations today anyway). ?Ericsson's choice of the word
> 'process' in this context is probably unfortunate. ?My apologies if I
> raised alarm bells by using the word without carefully drawing the
> distinction.
>
> To give you an idea of how much more lightweight an Erlang process is
> than an OS or Java thread, Erlang applications that have hundreds of
> thousands or more "Erlang processes" running within them are not at
> all outlandish or exotic in their scale today. ?A contemporary JVM
> running with half a million java.lang.Thread's alive in it is another
> story (memory requirements alone, counting the managed and native stacks,
> may have sent you packing as you allocated them in the first place, on
> all but the most monstrously powerful hardware).
>
> > The point about premature optimization is well taken, I think it would
> > be ideal to have a single queue. Just trying to figure out if that
> > puts us at a massive disadvantage since this queue could potentially
> > get big at times. Thanks very much!
>
> The size of the queue in terms of the number of messages waiting on it
> will ultimately be determined by how much disk space there is to back
> the queue if Rabbit comes under memory pressure due to un-ACK-ed
> messages and has to start using its internal paging mechanism to move
> them to disk and free up working memory (see our documentation on
> "memory-based flow control" for details if you're curious).
>
> If you run into scaling limits with a single queue they're likely to
> arise from there only being so many cycles/sec available on the
> core(s) the queue process is scheduled on before anything else. ?If
> you really did have straight line throughput hammering a single queue
> that so overwhelmed the lifting capacity of a single core, then you'd
> want to consider throwing more queues at the process and spreading
> load across them since then you could rely on Erlang's scheduler to
> spread your work across more physical cores. ?Building out your
> application starting with a simple queueing topology, and then load
> testing to see if you hit that scenario, will tell you when or whether
> you need to get more exotic in your design.
>
> Best regards,
> Jerry
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From smetj.net at gmail.com  Sat Nov  5 11:55:01 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Sat, 5 Nov 2011 04:55:01 -0700 (PDT)
Subject: [rabbitmq-discuss] Replacing Shovel with Federation,
 some configuration help required.
In-Reply-To: <4EB3CCB1.1080404@rabbitmq.com>
References: <12413974.1814.1320399333425.JavaMail.geo-discussion-forums@yqce21>
	<4EB3CCB1.1080404@rabbitmq.com>
Message-ID: <2235872.112.1320494101271.JavaMail.geo-discussion-forums@yqie15>

Hi Simon,
 

> If the shovel is working for you, you don't need to move away from it; 
> it's not going anywhere.


I was kind of basing myself upon what I read in 
http://www.rabbitmq.com/blog/2011/06/22/federation-plugin-preview-release/
There's stated: "The high level goal of federation is to scale out publish 
/ subscribe messaging across WANs and administrative domains."  Exactly 
what my requirement is.

Anyhow,

Thanks for the information.

Jelle




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111105/a3c7d8eb/attachment.htm>

From lianlupeng at gmail.com  Sat Nov  5 13:56:15 2011
From: lianlupeng at gmail.com (=?GB2312?B?xKe45w==?=)
Date: Sat, 5 Nov 2011 21:56:15 +0800
Subject: [rabbitmq-discuss] Json rabbitmq
Message-ID: <CAAmu3Q9_VUMPcjkpaJTEm-noUTF5viirQe2eaxQmYC_pHrw+MQ@mail.gmail.com>

Hi all


i am now using RabbitMQ in my project ,and then i need to send Json data
from a server to a client  how can i use JSONReader and JSONWriter to do
job?

thanks!

-- 
by lianlupeng.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111105/748f1fa2/attachment.htm>

From smetj.net at gmail.com  Sat Nov  5 21:00:02 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Sat, 5 Nov 2011 14:00:02 -0700 (PDT)
Subject: [rabbitmq-discuss] Architecture question
Message-ID: <28243733.885.1320526802712.JavaMail.geo-discussion-forums@yqiu15>

Hi all,

I'm looking for advice on the best approach to cover this scenario:

I have many clients spread over multiple (trusted) data centers.  Data 
centers are linked to each other by WAN speed connections.
Each client should have its own queue.
I have 1 producer which should be able to submit messages which arrive to 
whatever queue, wherever.
Ideally the producer just has to submit a message to an exchange with the 
routing key matching the queue and done.

The problem is that:

   - I can't let all clients connect over wan to a centralized broker since 
   it would strain the wan links too much.
   - I can't cluster the brokers over wan as this is not advised to do. 

I could:

   - make my producer aware to submit messages to the correct broker by 
   keeping a map of which host is connected to which broker, but I would 
   really like to avoid that.
   - create on the broker on which the producer connects for each remote 
   location a queue which shovels (shovel plugins) the message to each remote 
   broker. When the queue doesn't exist on the local broker or remote broker, 
    the message is not routed.  For the location the queue exists it arrives. 
    This however feels a bit of a "hacky" solution, if I have 10 sites, I send 
   9 useless message, ...
   

Any advice would be appreciated.

Thanks,

Jelle

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111105/a7e6a102/attachment.htm>

From jerryk at vmware.com  Sat Nov  5 23:35:08 2011
From: jerryk at vmware.com (Jerry Kuch)
Date: Sat, 5 Nov 2011 16:35:08 -0700 (PDT)
Subject: [rabbitmq-discuss] Json rabbitmq
In-Reply-To: <CAAmu3Q9_VUMPcjkpaJTEm-noUTF5viirQe2eaxQmYC_pHrw+MQ@mail.gmail.com>
Message-ID: <bcde8ff6-bbac-47f6-8e9d-9d3484dda071@StrongMad.local>

Hi, Lianlupeng...

Can you say a little more about what precisely you want to do?  By the form
of your question I assume you're working with the Java client, or perhaps
the .NET one?

If you want to do an RPC-like communication using JSON as the marshaling format
you can use the JsonRpcClient and JsonRpc Server classes outright, and they will
hide many lower level details for you.

If you just want to serialize data for publication, or de-serialize it after
consuming it, JSONReader and JSONWriter are fairly straightforward to use and
the source code for JsonRpcClient and JsonRpcServer will provide good examples
of how JSONWriter and JSONReader are used.  In particular looking at the source
for the 'call(String, Object[]) --> Object' method on JsonRpcClient should be
instructive as it illustrates building up a hash map from Strings to Objects
that will represent your JSON payload, and making a JSON String out of it using
the writer, which you can then publish.  The 'doCall(String) --> String method'
in JsonRpcServer shows you the complementary code on the other side, where a
String containing JSON is cracked apart into a map from Strings to Objects that
you can deal with as you like.

Best regards,
Jerry

----- Original Message -----
From: "??" <lianlupeng at gmail.com>
To: rabbitmq-discuss at lists.rabbitmq.com
Sent: Saturday, November 5, 2011 6:56:15 AM
Subject: [rabbitmq-discuss] Json rabbitmq


Hi all




i am now using RabbitMQ in my project ,and then i need to send Json data from a server to a client how can i use JSONReader and JSONWriter to do job? 


thanks!


--
by lianlupeng.

_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From jerryk at vmware.com  Sun Nov  6 00:02:24 2011
From: jerryk at vmware.com (Jerry Kuch)
Date: Sat, 5 Nov 2011 17:02:24 -0700 (PDT)
Subject: [rabbitmq-discuss] Rabbitmq message?
In-Reply-To: <CAAmbASy13whmDc-ZQGv0K10WDvne2OB07iWW1cgwWPWahAqafw@mail.gmail.com>
Message-ID: <aaac094b-4178-429e-8f22-baccfc2adc0c@StrongMad.local>

Hi, Nguyen...

> Hi Jerry, thanks millions for you reply.I will give you more details
> so may be you can help me to solve my problem. What I actually do that
> I want to send a java object to the queue. Two channels will be
> registered and the java object will be delivered to them. In this
> case,the message type is not a array of bytes.Take a look at my
> example code, may be you will be more clear:

The AMQP protocol, and thus the RabbitMQ Java client, view the message
payload as a structure-less blob of bytes.  You can see this in the
Javadoc for the basicPublish's method signature:

void basicPublish(java.lang.String exchange,
                  java.lang.String routingKey,
                  AMQP.BasicProperties props,
                  byte[] body)   <-- UNSTRUCTURED BLOB OF BYTES!
                  throws java.io.IOException

If we return to your pseudocode example...

> For the sender:
>
> Book message = new Book("A","Hoan");
> channel.basicPublish("", QUEUE_NAME, null,message);

We see that the parameter in which you want to pass your Book object
is declared to be of type byte[].  Thus, what you write will never
compile.  You'd have to choose some way to convert your Book object into
an array of bytes and, correspondingly, to convert the transmitted array of
bytes at the receiving end back into a Book Java object.

Out of curiosity, have you worked with Java Serialization before?
Java Serialization may help you with this, but be warned:  although it
is very powerful, it has many subtleties and will impose some serious
inflexibilities on the system you're building.  Both sides of the
conversation are going to need to need suitably versioned, compatible
definitions of the Book class on their CLASSPATHs.  Also, things can
get complex when the object you're serializing isn't simple, since you
need to send over the entire object graph implied by what the sender
has.  If you look at chapter 11 of Josh Bloch's "Effective Java,"
second edition, you will get a sense for just how hairy Serialization,
which starts off seeming simple, can get in practice.

Another problem you'll have is that if the other side of your
communications channel isn't a Java program (or as above just isn't a
Java program which a perfectly suitable version of your Book class)
you won't be able to communicate at all, and you'll discover this with
ugly exceptions being thrown on the receiving end.  There are also
potential security pitfalls to be wary of.  This is counter to the
spirit of AMQP, which aims to provide easy interoperability between
programs potentially written in different languages, running on
different operating systems, etc.

If you're only concerned about some set of basic, structured data that
describes a book (e.g. each book has a title, author, and publication
date, or something like that), rather than the full semantics of a
Java object with all of its *callable methods* and *code*, as well as
the raw data it's carrying, you might consider serializing into XML,
or JSON, or the like, or using one of the other less exotic then Java
Serialization frameworks that have come into being, like Google's
ProtocolBuffers, or Facebook's Thrift.

Does that make sense?

Best regards,
Jerry

From matthias at rabbitmq.com  Sun Nov  6 20:33:22 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 06 Nov 2011 20:33:22 +0000
Subject: [rabbitmq-discuss] HA Client for RabbitMQ?
In-Reply-To: <CAJreXKDB=Qgb_dB9Qjt0JV=CtNd0ZB0b0QN9ehJDByyKJ5kZUg@mail.gmail.com>
References: <19691872.1093.1317485897379.JavaMail.geo-discussion-forums@yqmw31>	<20111002171219.GG27797@wellquite.org>
	<CAJreXKDB=Qgb_dB9Qjt0JV=CtNd0ZB0b0QN9ehJDByyKJ5kZUg@mail.gmail.com>
Message-ID: <4EB6EF12.8060409@rabbitmq.com>

James,

James Carr wrote:
> I haven't had luck with load balancers on consumers. Publishers work
> fine when load balanced while consumers, for reasons that elude me,
> seem to run slower when behind a load balancer.

Consumers benefit from connecting to the nodes on which the queues 
reside from which they are consuming. That is true of producers too, but 
to a lesser degree.

Matthias.

From matthias at rabbitmq.com  Sun Nov  6 20:41:37 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 06 Nov 2011 20:41:37 +0000
Subject: [rabbitmq-discuss] RabbitMQ Shovel Connections
In-Reply-To: <005401cc9755$8bc06d40$a34147c0$@omc-international.com.au>
References: <4E7929EC.1070906@omc-international.com.au>	<4E7A7266.5050800@omc-international.com.au>	<20110926115420.GC31944@rabbitmq.com>	<13456440.173.1319125870200.JavaMail.geo-discussion-forums@yqja14>	<20111025151433.GG3231@southbank>
	<005401cc9755$8bc06d40$a34147c0$@omc-international.com.au>
Message-ID: <4EB6F101.2030804@rabbitmq.com>

Mihir,

Mihir Mone wrote:
> I have just updated rabbit from 2.4.1 to 2.6.1 and this issue seems to have
> been addressed. It looks like now the shovel plugin only establishes
> connections if there are any messages on the queue to be shovelled. This is
> exactly what I was looking for.

The shovel establishes connections eagerly, regardless of whether there 
are messages to be shovel. And if any errors are encountered, it 
automatically reconnects after the configured reconnect_delay (default: 
5s). None of that has changed in recent versions.

Matthias.

From matthias at rabbitmq.com  Sun Nov  6 20:53:04 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 06 Nov 2011 20:53:04 +0000
Subject: [rabbitmq-discuss] Architecture question
In-Reply-To: <28243733.885.1320526802712.JavaMail.geo-discussion-forums@yqiu15>
References: <28243733.885.1320526802712.JavaMail.geo-discussion-forums@yqiu15>
Message-ID: <4EB6F3B0.80903@rabbitmq.com>

Jelle,

Jelle Smet wrote:
> I have many clients spread over multiple (trusted) data centers.
> Data centers are linked to each other by WAN speed connections. Each
> client should have its own queue. I have 1 producer which should be
> able to submit messages which arrive to whatever queue, wherever. 
> Ideally the producer just has to submit a message to an exchange with
>  the routing key matching the queue and done.

Check out the federation plugin - 
http://www.rabbitmq.com/plugins.html#rabbitmq_federation - which is 
designed to handle exactly this type of scenario.

Regards,

Matthias.

From konstantin.kalin at gmail.com  Sun Nov  6 22:25:59 2011
From: konstantin.kalin at gmail.com (Konstantin Kalin)
Date: Sun, 6 Nov 2011 14:25:59 -0800 (PST)
Subject: [rabbitmq-discuss] Active/Active failover and lost messages
In-Reply-To: <20111104161022.GB31860@wellquite.org>
References: <1d68ca63-5939-4447-bcbb-5761f6d5f627@x8g2000yql.googlegroups.com>
	<20111104161022.GB31860@wellquite.org>
Message-ID: <93d0e99e-a60b-488e-b9fc-cb77a62719ad@z15g2000prn.googlegroups.com>

Hello, Matthew.

Thank you for the response and questions. See my comments in line.

Thank you,
Konstantin.

On Nov 4, 8:10?am, Matthew Sackman <matt... at rabbitmq.com> wrote:
> Hi Konstantin,

> On Thu, Nov 03, 2011 at 02:19:51PM -0700, Konstantin Kalin wrote:
> That all sounds fine, but you don't mention whether all 50 publishers
> publish to the same queue and you have 50 consumers consuming from that
> queue, or whether each pair of publisher+consumer have an individual
> queue between them.

Each pair (publisher and consumer) works with a dedicated queue. So I
have 50 queues.

>
> Without understanding your topology better, I'm not quite sure how to
> interpret that.

Topology is simple: publishers and consumers are distributed randomly
between RabbitMQ nodes. And they (publisher and consumers) can
reconnect to another node if there is an exception happens during
publishing/consuming with current connection.

> Ok, so that looks like you're using the Java client? Are you also using
> the QueueingConsumer? It's possible that if not, you've been sent some
> messages but they've being overtaken by the exception in some way. If
> you use the QueueingConsumer, that shouldn't happen. However, that said,
> for other reasons, if this was occurring, I'd expect you to be resent
> such messages when you reconsumed from the queue.
>
> I've recently improved our MulticastMain java example so that it copes
> transparently with the ConsumerCancelledException (though I've actually
> not used it to verify the absence of message loss).
>
> http://hg.rabbitmq.com/rabbitmq-java-client/file/15f36113ffd3/test/sr...
> from line 442 onwards may be of use. Oh yes, I discovered when doing
> that QueueingConsumers are not reusable - you really do have to create a
> new one whenever you resubscribe. That bit me for a while...
>

Yes. You are right. I use Java client and QueueingConsumer.
Also I found a root-cause for my issue. Due to misprint in client
code, the queues were created without "x-ha-policy". It's stupid but
it happened :) So my previous result was gained with non-mirrored
queues. I was really impressed when I found this. The cluster lost not
many messages in such condition.

Once I corrected the mistake the cluster works fine. Consumers don't
lose messages if a cluster node fails (stopped manually, Linux
rebooted and so on). Everything is delivered except one case.
If a node fails under heavy load on the cluster (CPU load is above
90-95% on cluster nodes) a few messages were lost anyway.  A publisher
submitted a message properly but a consumer never received it. I
repeated the test several times and it's reproducible. And now I'm
pretty confident that messages are lost in RabbitMQ (not in my
code :) )
I can spend my time on troubleshooting and better understanding of
what's happening. But I need some guidelines how I can approach with
it.

> Best wishes,
>
> Matthew
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From konstantin.kalin at gmail.com  Sun Nov  6 22:36:53 2011
From: konstantin.kalin at gmail.com (Konstantin Kalin)
Date: Sun, 6 Nov 2011 14:36:53 -0800 (PST)
Subject: [rabbitmq-discuss] HA Client for RabbitMQ?
In-Reply-To: <20111002171219.GG27797@wellquite.org>
References: <19691872.1093.1317485897379.JavaMail.geo-discussion-forums@yqmw31>
	<20111002171219.GG27797@wellquite.org>
Message-ID: <b1b4298f-e993-4e1b-99b8-91feca2042c1@c16g2000pre.googlegroups.com>



On Oct 2, 9:12?am, Matthew Sackman <matt... at rabbitmq.com> wrote:
> On Sat, Oct 01, 2011 at 09:18:17AM -0700, Alex Gr?nholm wrote:
> > I noticed that the hot new feature in RabbitMQ 2.6 is Active/Active HA on
> > the server side. How can I take advantage of this on the client side? AFAIK
> > the client only knows how to connect to a single server -- you can't give it
> > a list of servers for failover purposes.
>
> Correct. The Active/Active HA work does not address the issue of client
> connectivity. There are a number of solutions that you could use:
>
> o) Change the DNS on failure
> o) a plain TCP load balancer like haproxy or a router-based one
> o) mobile IP addresses as can be done with something like pacemaker

I think there is one more valuable option. If a client knows cluster's
nodes (IP addresses) the client can reconnect to another node. I
implemented this in ~150 lines in Java code when I decided to test
RabbitMQ Active/Active. And it works fine in my opinion

Thank you,
Konstantin.

From sameek at arosys.com  Mon Nov  7 05:50:33 2011
From: sameek at arosys.com (sameekmishra)
Date: Sun, 6 Nov 2011 21:50:33 -0800 (PST)
Subject: [rabbitmq-discuss]  Unable to consume message from queue?
Message-ID: <32788702.post@talk.nabble.com>


Hi

I am using rabbitmq server 2.1.0 using java client API i have published 
messages into queue,but i'm not able to consume those publish message from
queue. i have checked details of following points using rabbitmqctl command:

1. list_queue

->  define queue is available in list.

2. message_unacknowledge 

-> count 2 because i have publish two messages in queue those are
unacknowledge.

3. message 

-> count 2 is correct

4. message 

-> it's give me count 0  this is unexpected result because two messages are
there in the queue which is ready to derived to client.

uesed code snipped  https://gist.github.com/1344262
https://gist.github.com/1344262 
please help me where is the problem in consumer to ready those messages.

Thanks
-- 
View this message in context: http://old.nabble.com/Unable-to-consume-message-from-queue--tp32788702p32788702.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From vbernard42 at gmail.com  Mon Nov  7 08:50:12 2011
From: vbernard42 at gmail.com (Valentin BERNARD)
Date: Mon, 7 Nov 2011 00:50:12 -0800 (PST)
Subject: [rabbitmq-discuss] Unable to consume message from queue?
In-Reply-To: <32788702.post@talk.nabble.com>
References: <32788702.post@talk.nabble.com>
Message-ID: <e48262ec-0c8d-4e9b-bf29-c2ba4f8c99e9@ek5g2000vbb.googlegroups.com>

Hi,

Just to be sure that everything is clear, the
'messages_unacknowledged' field displays the number of messages that
*have been delivered* to the consumer, but have not been acknowledged
yet.

> 4. message
>
> -> it's give me count 0  this is unexpected result because two messages are
>  there in the queue which is ready to derived to client.

I guess you meant 'messages_ready' here? That's consistent if you sent
two messages that have been delivered to a consumer and are waiting to
be acknowledged. They're not 'ready' anymore, so you see them in the
'messages_unacknowledged' and 'messages' (total) field, but not in
'messages_ready'.

Concerning your code snippet, the definition of
rabbitmqUtil.getMessageFromQueue may help tracking the problem.

Regards,

Valentin.

On 7 nov, 06:50, sameekmishra <sam... at arosys.com> wrote:
> Hi
>
> I am using rabbitmq server 2.1.0 using java client API i have published
> messages into queue,but i'm not able to consume those publish message from
> queue. i have checked details of following points using rabbitmqctl command:
>
> 1. list_queue
>
> -> ?define queue is available in list.
>
> 2. message_unacknowledge
>
> -> count 2 because i have publish two messages in queue those are
> unacknowledge.
>
> 3. message
>
> -> count 2 is correct
>
> 4. message
>
> -> it's give me count 0 ?this is unexpected result because two messages are
> there in the queue which is ready to derived to client.
>
> uesed code snipped ?https://gist.github.com/1344262https://gist.github.com/1344262
> please help me where is the problem in consumer to ready those messages.
>
> Thanks
> --
> View this message in context:http://old.nabble.com/Unable-to-consume-message-from-queue--tp3278870...
> Sent from the RabbitMQ mailing list archive at Nabble.com.
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From Simone.Busoli at ferrari.com  Mon Nov  7 09:02:01 2011
From: Simone.Busoli at ferrari.com (Busoli, Simone)
Date: Mon, 7 Nov 2011 09:02:01 +0000
Subject: [rabbitmq-discuss] Using 2.6 .NET API with 2.5 server
Message-ID: <88E590DC4586974D825FC82AE798294E520786A5@GSVCLU03.ges.ferlan.it>

Hi, is it possible to use the .NET API for version 2.6 with the 2.5 server or there are any known breaking changes?

Simone


_________________________________________________________________________________________________________________
Questo messaggio e da intendersi esclusivamente ad uso del destinatario e puo contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non e il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione e 
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from 
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the 
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly 
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from 
your system.
_________________________________________________________________________________________________________________

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/06afd551/attachment.htm>

From Marek.Cermak at Honeywell.com  Mon Nov  7 09:12:17 2011
From: Marek.Cermak at Honeywell.com (Cermak, Marek)
Date: Mon, 7 Nov 2011 10:12:17 +0100
Subject: [rabbitmq-discuss] connecting to Rabbit's node
Message-ID: <C19F278955DE32459441209A75FC1B2ACBBFD1@FR44EV808.global.ds.honeywell.com>

Hello,
I want to connect to Rabbit's Erlang node to make analysis (appmon and
so). I have debian squeeze in vbox, rabbit 2.6.1, same cookie file as in
~rabbitmq/ and as a root I try to run

$ erl -sname rabbit -remsh rabbit at debian


the output is
-----
{error_logger,{{2011,11,7},{10,5,40}},"Protocol: ~p: register error:
~p~n",["inet_tcp",{{badmatch,{error,duplicate_name}},[{inet_tcp_dist,lis
ten,1},{net_kernel,start_protos,4},{net_kernel,start_protos,3},{net_kern
el,init_node,2},{net_kernel,init,1},{gen_server,init_it,6},{proc_lib,ini
t_p_do_apply,3}]}]}
{error_logger,{{2011,11,7},{10,5,40}},crash_report,[[{initial_call,{net_
kernel,init,['Argument__1']}},{pid,<0.20.0>},{registered_name,[]},{error
_info,{exit,{error,badarg},[{gen_server,init_it,6},{proc_lib,init_p_do_a
pply,3}]}},{ancestors,[net_sup,kernel_sup,<0.9.0>]},{messages,[]},{links
,[#Port<0.57>,<0.17.0>]},{dictionary,[{longnames,false}]},{trap_exit,tru
e},{status,running},{heap_size,377},{stack_size,24},{reductions,448}],[]
]}
{error_logger,{{2011,11,7},{10,5,40}},supervisor_report,[{supervisor,{lo
cal,net_sup}},{errorContext,start_error},{reason,{'EXIT',nodistribution}
},{offender,[{pid,undefined},{name,net_kernel},{mfargs,{net_kernel,start
_link,[[rabbit,shortnames]]}},{restart_type,permanent},{shutdown,2000},{
child_type,worker}]}]}
{error_logger,{{2011,11,7},{10,5,40}},supervisor_report,[{supervisor,{lo
cal,kernel_sup}},{errorContext,start_error},{reason,shutdown},{offender,
[{pid,undefined},{name,net_sup},{mfargs,{erl_distribution,start_link,[]}
},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]}
]}
{error_logger,{{2011,11,7},{10,5,40}},std_info,[{application,kernel},{ex
ited,{shutdown,{kernel,start,[normal,[]]}}},{type,permanent}]}
{"Kernel pid
terminated",application_controller,"{application_start_failure,kernel,{s
hutdown,{kernel,start,[normal,[]]}}}"}

Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller)
({application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}
})
-----

head of erl_crash.dump (is it enough?) would be:

$ head erl_crash.dump
=erl_crash_dump:0.1
Mon Nov  7 10:05:41 2011
Slogan: Kernel pid terminated (application_controller)
({application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}
})
System version: Erlang R14A (erts-5.8) [source] [rq:1] [async-threads:0]
[kernel-poll:false]
Compiled: Sun Dec  5 19:07:34 2010
Taints:
Atoms: 3985
=memory
total: 2207920
processes: 223900


What am I doing wrong? 

Thanks for help
Marek



From matthew at rabbitmq.com  Mon Nov  7 09:52:14 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Mon, 7 Nov 2011 09:52:14 +0000
Subject: [rabbitmq-discuss] Active/Active failover and lost messages
In-Reply-To: <93d0e99e-a60b-488e-b9fc-cb77a62719ad@z15g2000prn.googlegroups.com>
References: <1d68ca63-5939-4447-bcbb-5761f6d5f627@x8g2000yql.googlegroups.com>
	<20111104161022.GB31860@wellquite.org>
	<93d0e99e-a60b-488e-b9fc-cb77a62719ad@z15g2000prn.googlegroups.com>
Message-ID: <20111107095214.GA21387@wellquite.org>

Hi Konstantin,

On Sun, Nov 06, 2011 at 02:25:59PM -0800, Konstantin Kalin wrote:
> Also I found a root-cause for my issue. Due to misprint in client
> code, the queues were created without "x-ha-policy". It's stupid but
> it happened :) So my previous result was gained with non-mirrored
> queues. I was really impressed when I found this. The cluster lost not
> many messages in such condition.

Ah ha! Glad you found it.

> Once I corrected the mistake the cluster works fine. Consumers don't
> lose messages if a cluster node fails (stopped manually, Linux
> rebooted and so on). Everything is delivered except one case.
> If a node fails under heavy load on the cluster (CPU load is above
> 90-95% on cluster nodes) a few messages were lost anyway.  A publisher
> submitted a message properly but a consumer never received it. I
> repeated the test several times and it's reproducible. And now I'm
> pretty confident that messages are lost in RabbitMQ (not in my
> code :) )

Interesting. I would guess that that's the case when the publisher is
connected to a highly loaded node, and the publisher's node is taken
down. Could you check if that's the case?

Are you using publisher confirms? If so, it really shouldn't be the case
that the confirm is received by the client and the message being publish
is lost. That should never happen. If you're not using publisher
confirms then yes, it is possible that the publisher thinks it's sent a
message but due to failures, that message never manages to make it
through to any of the members of the mirrored queue. Publisher confirms
are only issued back to the client when the message has made it to all
the queues it's been routed to, so you really shouldn't get confirms for
messages that get lost in this way.

If a message has not been confirmed back to the publisher, and the
publisher gets disconnected due to node failure, the publisher *must*
republish any messages it has not received confirms for. Yes, this does
introduce more possibility of duplicates at the consumers, but you have
to do dedupification anyway for other reasons.

Best wishes,

Matthew

From matthew at rabbitmq.com  Mon Nov  7 09:54:34 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Mon, 7 Nov 2011 09:54:34 +0000
Subject: [rabbitmq-discuss] connecting to Rabbit's node
In-Reply-To: <C19F278955DE32459441209A75FC1B2ACBBFD1@FR44EV808.global.ds.honeywell.com>
References: <C19F278955DE32459441209A75FC1B2ACBBFD1@FR44EV808.global.ds.honeywell.com>
Message-ID: <20111107095433.GB21387@wellquite.org>

On Mon, Nov 07, 2011 at 10:12:17AM +0100, Cermak, Marek wrote:
> I want to connect to Rabbit's Erlang node to make analysis (appmon and
> so). I have debian squeeze in vbox, rabbit 2.6.1, same cookie file as in
> ~rabbitmq/ and as a root I try to run
> 
> $ erl -sname rabbit -remsh rabbit at debian

I suspect your hostname is debian. Thus -sname rabbit is the same as
-sname rabbit at debian, and thus you get a node name clash.

You want something like

erl -sname foo -remsh rabbit at debian

Matthew

From alexandru at rabbitmq.com  Mon Nov  7 10:02:40 2011
From: alexandru at rabbitmq.com (Alexandru =?utf-8?B?U2N2b3LFo292?=)
Date: Mon, 7 Nov 2011 10:02:40 +0000
Subject: [rabbitmq-discuss] Using 2.6 .NET API with 2.5 server
In-Reply-To: <88E590DC4586974D825FC82AE798294E520786A5@GSVCLU03.ges.ferlan.it>
References: <88E590DC4586974D825FC82AE798294E520786A5@GSVCLU03.ges.ferlan.it>
Message-ID: <20111107100240.GA4248@southbank.eng.vmware.com>

> Hi, is it possible to use the .NET API for version 2.6 with the 2.5 server or there are any known breaking changes?

It should be fine (I don't see any new broker features added in 2.6
that required client-side changes).

This is generally true, btw. As long as you don't want the latest
extensions, you can mix and match client and server versions (after
2.0).

Cheers,
Alex

On Mon, Nov 07, 2011 at 09:02:01AM +0000, Busoli, Simone wrote:
> Hi, is it possible to use the .NET API for version 2.6 with the 2.5 server or there are any known breaking changes?
> 
> Simone
> 
> 
> _________________________________________________________________________________________________________________
> Questo messaggio e da intendersi esclusivamente ad uso del destinatario e puo contenere informazioni che sono di natura privilegiata, confidenziale
> o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non e il destinatario designato, o il dipendente/agente responsabile
> per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione e 
> strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
> immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
> _________________________________________________________________________________________________________________
> This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from 
> disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the 
> message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly 
> prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from 
> your system.
> _________________________________________________________________________________________________________________
> 

> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


From emile at rabbitmq.com  Mon Nov  7 10:07:42 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 07 Nov 2011 10:07:42 +0000
Subject: [rabbitmq-discuss] Using 2.6 .NET API with 2.5 server
In-Reply-To: <88E590DC4586974D825FC82AE798294E520786A5@GSVCLU03.ges.ferlan.it>
References: <88E590DC4586974D825FC82AE798294E520786A5@GSVCLU03.ges.ferlan.it>
Message-ID: <4EB7ADEE.6070205@rabbitmq.com>

Hi Simone,

On 07/11/11 09:02, Busoli, Simone wrote:
> Hi, is it possible to use the .NET API for version 2.6 with the 2.5
> server or there are any known breaking changes?

Yes, you can use those versions together. The specification matrix here
has more information:

http://www.rabbitmq.com/specification.html#release-version-mapping

You should be able to use a broker as old as v2.0.0 (with the .net
client protocol version set to AMQP_0_9_1), but we strongly recommend
using a more recent version.




-Emile

From Simone.Busoli at ferrari.com  Mon Nov  7 10:18:00 2011
From: Simone.Busoli at ferrari.com (Busoli, Simone)
Date: Mon, 7 Nov 2011 10:18:00 +0000
Subject: [rabbitmq-discuss] Using 2.6 .NET API with 2.5 server
In-Reply-To: <4EB7ADEE.6070205@rabbitmq.com>
References: <88E590DC4586974D825FC82AE798294E520786A5@GSVCLU03.ges.ferlan.it>
	<4EB7ADEE.6070205@rabbitmq.com>
Message-ID: <88E590DC4586974D825FC82AE798294E52079742@GSVCLU03.ges.ferlan.it>

Thanks to both for your answers. The reason to switch the client to a newer version is to upgrade the server later, so yes, we'll probably be upgrading to 2.6 on the server side too.

Simone

-----Original Message-----
From: Emile Joubert [mailto:emile at rabbitmq.com] 
Sent: luned? 7 novembre 2011 11:08
To: Busoli, Simone
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Using 2.6 .NET API with 2.5 server

Hi Simone,

On 07/11/11 09:02, Busoli, Simone wrote:
> Hi, is it possible to use the .NET API for version 2.6 with the 2.5 
> server or there are any known breaking changes?

Yes, you can use those versions together. The specification matrix here has more information:

http://www.rabbitmq.com/specification.html#release-version-mapping

You should be able to use a broker as old as v2.0.0 (with the .net client protocol version set to AMQP_0_9_1), but we strongly recommend using a more recent version.




-Emile

_________________________________________________________________________________________________________________
Questo messaggio ? da intendersi esclusivamente ad uso del destinatario e pu? contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non ? il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione ? 
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from 
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the 
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly 
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from 
your system.
_________________________________________________________________________________________________________________



From alexandru at rabbitmq.com  Mon Nov  7 10:50:54 2011
From: alexandru at rabbitmq.com (Alexandru =?utf-8?B?U2N2b3LFo292?=)
Date: Mon, 7 Nov 2011 10:50:54 +0000
Subject: [rabbitmq-discuss] RabbitMQ Shovel Connections
In-Reply-To: <21315328.129.1320240694623.JavaMail.geo-discussion-forums@yqoo7>
References: <4E7929EC.1070906@omc-international.com.au>
	<4E7A7266.5050800@omc-international.com.au>
	<20110926115420.GC31944@rabbitmq.com>
	<13456440.173.1319125870200.JavaMail.geo-discussion-forums@yqja14>
	<20111025151433.GG3231@southbank>
	<21315328.129.1320240694623.JavaMail.geo-discussion-forums@yqoo7>
Message-ID: <20111107105054.GB4248@southbank.eng.vmware.com>

Hi,

Looking at report, I see the following:
  * there's one channel with 1524 unconfirmed messages:
    <'rabbit at server02'.3.374.49>    <'rabbit at server02'.3.366.49>    1   guest   /   false   false   1   1524    0   0   0   0   false

    These are messages that were sent to a consumer but not ack'd (so
    they can't be delivered to other consumers);

  * the broker currently has 1524 messages sitting on two queues:
    <'rabbit at server02'.3.241.0>   number_3    true    false   []  0 1524    1524    1   ...
    <'rabbit at server02'.3.244.0> number_6    true    false   []  1524    0   1524    0
  
    Both queues have 1524 messages sitting on them, but the kinds of
    messages are different.  The messages on number_6 are all ready,
    which means that once a consumer connects to the queue, they will
    all be delivered (but no consumer was connected to the queues).  The
    messages on number_3, on the other hand, are unacknowledged; so,
    they were delivered to the sole consumer, but it didn't acknowledge
    them.

    This is consistent with what you describe, since a broker restart
    will mark the unacknowledged messages as ready again, and deliver
    them to a consumer.

This means that the consumer for number_3 has received messages, but
hasn't acknowledged them.  This can only happen if you set ack_mode in
the shovel configuration:
  * if ack_mode is on_publish, the shovel is having trouble forwarding
    consumed messages to their destination;
  * if ack_mode is on_confirm, the destination is not confirming the
    messages the shovel sent it.

The former could be caused by a network issue (the logs list a
connection failing with a timeout), while the latter
shouldn't be possible (the RabbitMQ broker guarantees it will eventually
confirm all received messages).

So, to fix this, you could try:
  * playing around with the ack_mode setting;
  * upgrading (the other poster mentioned this fixed his problem).

What versions of RabbitMQ are you running (both on the source and
destination brokers)?  Is there any chance you could send us your shovel
config? (or at least describe what it does)

Cheers,
Alex


On Wed, Nov 02, 2011 at 06:31:34AM -0700, Jelle Smet wrote:
> Hi Alex,
> 
> The requested output is in attachment.  I have string replaced server and 
> queue names with fictional names.
> 
> I could find following non INFO report in the rabbit at server02.log file:
> 
> ... snip ...
> =WARNING REPORT==== 2-Nov-2011::13:56:10 ===
> exception on TCP connection <0.24639.172> from 10.96.72.91:58172
> connection_closed_abruptly
> ... snip ...
> 
> Issuing "rabbitmqctl stop" gave following output and kept hanging endless:
> Stopping and halting node 'rabbit at server02' ...
> 
> When doing a strace -p on the open running rabbitmq process I get following 
> output for each one of them:
> #strace -p 26367
> Process 26367 attached - interrupt to quit
> select(0, NULL, NULL, NULL, NULL
> 
> The only thing left at this stage is kill all processes and restart server02


From ashley at spider.io  Mon Nov  7 13:27:11 2011
From: ashley at spider.io (Ashley Brown)
Date: Mon, 7 Nov 2011 13:27:11 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated queues
Message-ID: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>

Hi all,

We were hoping to go into production next week with Rabbit's HA queues,
however testing by randomly killing processes has shown some odd behaviour.
I'm not sure whether it's something odd with our setup, or a set of
interacting bugs.

When started, we create three queues:

   - storm-classifications
   - storm-meta
   - storm-tracking

There are 3 nodes in the cluster, with queues replicated to all nodes. In
testing, I've been issuing kill commands to take out beam, rabbit and
erlang processes, which close the channels and make clients reconnect to a
different nodes. I allow the downed node to recover and come back up before
killing another one (also allowing queues to synchronize).

After doing this a couple of times, we see the following:

http://www.evernote.com/shard/s53/sh/448a967e-b995-4f54-986d-50194955550f/416d4e71af91f6e2f6d5311f7ea9fb44

The classifications queue is gone (taking any messages with it), the meta
queue is only replicated to one other node. The tracking queue is OK, but
only because it disappeared and was recreated empty.

The meta queue - despite not having any messages flowing through it in the
test system - sometimes shows that one of the nodes is not synchronised for
minutes after rejoining.

I've also found that sometimes queues stop delivering messages when certain
nodes go down (even after being left for minutes), despite being in HA mode
(haven't been able to dig into this more yet). Sometimes connections to
nodes which have gone down are still shown and get stuck. Using netstat
reveals that those connections do not exist at TCP level, and using the Web
UI to 'Force Close' them generates an error (red box saying unable to
connect to server - however the rest of the UI works fine).

 This seems like rather odd behaviour, and means we can't put it into
production. I'm having trouble replicating it, all I know is that after
cycling nodes a few times it stops working as we'd expect.

Today, while bringing up the cluster from scratch (shutdown all instances,
wipe mnesia, restart) I've got 3 nodes running, but an HA queue with 1
master, 2 synced slaves and 1 unsynced slave. Other queues are showing 1
master and 2 synced slaves as expected. (see
http://www.evernote.com/shard/s53/sh/b6345885-88d1-4d21-9614-24abda75a1cb/c2a0dd265b39d21f3e8c336c67ced979
)

Currently on 2.6.0, Ubuntu 11.04 on EC2.

Quite infuriating, and no idea how to fix it.

A

-- 
Dr Ashley Brown
Chief Architect

e: ashley at spider.io
a: spider.io, 353 The Strand, WC2R 0HS
w: http://spider.io/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/e14fd1de/attachment.htm>

From matthew at rabbitmq.com  Mon Nov  7 13:50:14 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Mon, 7 Nov 2011 13:50:14 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated
	queues
In-Reply-To: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>
Message-ID: <20111107135014.GD6082@rabbitmq.com>

Hi Ash,

On Mon, Nov 07, 2011 at 01:27:11PM +0000, Ashley Brown wrote:
> There are 3 nodes in the cluster, with queues replicated to all nodes. In
> testing, I've been issuing kill commands to take out beam, rabbit and
> erlang processes, which close the channels and make clients reconnect to a
> different nodes. I allow the downed node to recover and come back up before
> killing another one (also allowing queues to synchronize).

You're aware that there is no eager synchronisation of HA queues, yes?
So it's only by the unsynchronised head of each queue being consumed
that synchronisation occurs.

> After doing this a couple of times, we see the following:
> 
> http://www.evernote.com/shard/s53/sh/448a967e-b995-4f54-986d-50194955550f/416d4e71af91f6e2f6d5311f7ea9fb44
> 
> The classifications queue is gone (taking any messages with it), the meta
> queue is only replicated to one other node. The tracking queue is OK, but
> only because it disappeared and was recreated empty.

Did the previously downed node really come back up and join the cluster
correctly? Does the output of rabbitmqctl cluster_status on each of the
3 nodes report all 3 nodes are running?

> I've also found that sometimes queues stop delivering messages when certain
> nodes go down (even after being left for minutes), despite being in HA mode
> (haven't been able to dig into this more yet).

When this happens, could you check the logs please on all nodes for any
entries regarding the queues. If a node with a queue master goes down
then there should be entries about some slave on another node being
promoted, but even if it's just a slave that dies, there should be
entries in the logs that show others have noticed that.

> Sometimes connections to nodes which have gone down are still shown
> and get stuck. Using netstat > reveals that those connections do not
> exist at TCP level, and using the Web UI to 'Force Close' them
> generates an error (red box saying unable to connect to server -
> however the rest of the UI works fine).

Interesting. That might be a bug in the mgmt plugin. Does rabbitmqctl
list_connections also show such phantom connections?

> This seems like rather odd behaviour, and means we can't put it into
> production. I'm having trouble replicating it, all I know is that after
> cycling nodes a few times it stops working as we'd expect.

My first guess is that the node hasn't actually rejoined properly, and
may require a manual removal of the rabbitmq database directory before
starting the node and explicitly reclustering it. Please note Rabbit
never has claimed to cope with netsplits or partitions and loss of nodes
falls under this category. Thus just restarting the failed Rabbit may
very well not rejoin the cluster and require manual intervention.
Apologies if I'm telling you things you already know, I just want to be
clear.

However, if ctl cluster_status shows that it has, then that may well
indicate some other bug. Log entries, the output of cluster_status, and
the output of rabbitmqctl report will be useful (if large, please feel
free to send off-list to info@).

> Today, while bringing up the cluster from scratch (shutdown all instances,
> wipe mnesia, restart) I've got 3 nodes running, but an HA queue with 1
> master, 2 synced slaves and 1 unsynced slave. Other queues are showing 1
> master and 2 synced slaves as expected. (see
> http://www.evernote.com/shard/s53/sh/b6345885-88d1-4d21-9614-24abda75a1cb/c2a0dd265b39d21f3e8c336c67ced979
> )

Well, drain the "unsynced" queue and it'll become synced. Yes, this is
very much an undesired limitation, and in some cases it might be
problematic enough to make Rabbit's HA as it stands not-fit-for-purpose.
It should be fixed in the future, but it seemed the wrong decision to
delay active-active HA for many further months to ensure it launched
with eager resync.

Best wishes,

Matthew

From matthew at rabbitmq.com  Mon Nov  7 13:53:08 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Mon, 7 Nov 2011 13:53:08 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated
	queues
In-Reply-To: <20111107135014.GD6082@rabbitmq.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>
	<20111107135014.GD6082@rabbitmq.com>
Message-ID: <20111107135307.GE6082@rabbitmq.com>

On Mon, Nov 07, 2011 at 01:50:14PM +0000, Matthew Sackman wrote:
> > http://www.evernote.com/shard/s53/sh/448a967e-b995-4f54-986d-50194955550f/416d4e71af91f6e2f6d5311f7ea9fb44
> > 
> > The classifications queue is gone (taking any messages with it), the meta
> > queue is only replicated to one other node. The tracking queue is OK, but
> > only because it disappeared and was recreated empty.
> 
> Did the previously downed node really come back up and join the cluster
> correctly? Does the output of rabbitmqctl cluster_status on each of the
> 3 nodes report all 3 nodes are running?

Derp. Obviously, given there is one queue that is correctly mirrored to
all 3 nodes, all 3 nodes did come up fine. Unless mgmt is somehow
incorrectly reporting that.

Log entries from all the nodes when you restart the failed node would be
very useful.

Matthew

From ashley at spider.io  Mon Nov  7 14:15:23 2011
From: ashley at spider.io (Ashley Brown)
Date: Mon, 7 Nov 2011 14:15:23 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated
	queues
In-Reply-To: <20111107135014.GD6082@rabbitmq.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>
	<20111107135014.GD6082@rabbitmq.com>
Message-ID: <CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>

>
> You're aware that there is no eager synchronisation of HA queues, yes?
> So it's only by the unsynchronised head of each queue being consumed
> that synchronisation occurs.


Yes, I allow this to happen.


> Did the previously downed node really come back up and join the cluster
> correctly? Does the output of rabbitmqctl cluster_status on each of the
> 3 nodes report all 3 nodes are running?


I couldn't tell you that without starting the tests again, but the
management plugin reports they are all up, and producers + consumers
reconnect to the downed node once it has come back up without problems.


> > I've also found that sometimes queues stop delivering messages when
> certain
> > nodes go down (even after being left for minutes), despite being in HA
> mode
> > (haven't been able to dig into this more yet).
>
> When this happens, could you check the logs please on all nodes for any
> entries regarding the queues. If a node with a queue master goes down
> then there should be entries about some slave on another node being
> promoted, but even if it's just a slave that dies, there should be
> entries in the logs that show others have noticed that.


Yes, will look for that.


> > Sometimes connections to nodes which have gone down are still shown
> > and get stuck.
>
> Interesting. That might be a bug in the mgmt plugin. Does rabbitmqctl
> list_connections also show such phantom connections?


Will check next time I see it - running some more tests this PM.


> > Today, while bringing up the cluster from scratch (shutdown all
> instances,
> > wipe mnesia, restart) I've got 3 nodes running, but an HA queue with 1
> > master, 2 synced slaves and 1 unsynced slave. Other queues are showing 1
> > master and 2 synced slaves as expected. (see
> >
> http://www.evernote.com/shard/s53/sh/b6345885-88d1-4d21-9614-24abda75a1cb/c2a0dd265b39d21f3e8c336c67ced979
> > )
>
> Well, drain the "unsynced" queue and it'll become synced.


My issue here is that for this one queue, it claims to have more copies of
the queue than nodes in the cluster. Trying to check if this is a plugin
bug with list_queues (list_queues name slave_pids synchronised_slave_pids),
I can't get the cluster to list them at all, it just sits there (for the
last 15 minutes).

A
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/372d65c8/attachment.htm>

From matthew at rabbitmq.com  Mon Nov  7 14:22:40 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Mon, 7 Nov 2011 14:22:40 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated
	queues
In-Reply-To: <CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>
	<20111107135014.GD6082@rabbitmq.com>
	<CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>
Message-ID: <20111107142240.GF6082@rabbitmq.com>

On Mon, Nov 07, 2011 at 02:15:23PM +0000, Ashley Brown wrote:
> My issue here is that for this one queue, it claims to have more copies of
> the queue than nodes in the cluster.

Ahh. That's impressive. That's definitely a bug in the mgmt plugin - the
HA code itself ensures that you can't have two members of the mirrored
queue on the same node.

> Trying to check if this is a plugin
> bug with list_queues (list_queues name slave_pids synchronised_slave_pids),
> I can't get the cluster to list them at all, it just sits there (for the
> last 15 minutes).

Curious. Are any of the nodes hammering CPU or disk? Were any of the
queues particularly long before shutdown?

Matthew

From pm470470 at gmail.com  Mon Nov  7 16:01:27 2011
From: pm470470 at gmail.com (pm47 pm47)
Date: Mon, 7 Nov 2011 17:01:27 +0100
Subject: [rabbitmq-discuss] crash with version 2.4.1
Message-ID: <CAO+KBQfEUtgfJp_2NXBp-zBt8c10+4t2-K5R77ob0nJR=QRx6A@mail.gmail.com>

Hello,

Could anyone look at the attached log files? My broker keeps crashing after
a few hours, I can't find out why.

There are appromixately 100 servers connected to it.

Thanks in advance,

pm47
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/5c339286/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: crash_rabbit.7z
Type: application/octet-stream
Size: 426586 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/5c339286/attachment.obj>

From rev.chip at gmail.com  Mon Nov  7 17:11:47 2011
From: rev.chip at gmail.com (Chip Salzenberg)
Date: Mon, 7 Nov 2011 09:11:47 -0800
Subject: [rabbitmq-discuss] HA queue seems never to get fully created
In-Reply-To: <4E89A6E2.3030605@rabbitmq.com>
References: <1bd216ff-02b7-47ed-bbdd-1b157941382e@i9g2000yqe.googlegroups.com>
	<4E89A6E2.3030605@rabbitmq.com>
Message-ID: <CANSL5VEDGL1brRgaDh5eZc0K7LCsxV5RH6yr-isP3Zi6xRoJKQ@mail.gmail.com>

On Mon, Oct 3, 2011 at 5:13 AM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 23/09/11 23:55, Chip Salzenberg wrote:
>
>> 2. I used the Perl API to create an HA queue.  This reported success
>> via the AMQP, and the management plugin sees the queue and its
>> parameters correctly.  When I hover over HA I see "x-ha-policy:
>> nodes", and when I hover over Args I see "x-ha-policy-params:
>> [rabbit at ps7,rabbit at ps8]".
>>
>
> Well, this is awkward.
>
> Upon a bit of investigation it would seem that "x-ha-policy: nodes"
> basically does not work. The queue is crashing on startup, which is why
> you're seeing ? ? ? in mgmt, and why consumers are getting NOT_FOUND.
>

That explains much.  Thanks for the repro & info.


> I would suggest that you use "x-ha-policy: all" instead for the time being.
>

I've chosen a different workaround; meanwhile, might you give me some idea
when 2.6.2 can be expected?  I might not use mirroring in the end, but it
would be nice to know when I'll have the option.


> (who is now cursing surprisingly loudly...)
>
>
BTDT  :-)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/951ccda9/attachment.htm>

From simon at rabbitmq.com  Mon Nov  7 17:13:03 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 07 Nov 2011 17:13:03 +0000
Subject: [rabbitmq-discuss] HA queue seems never to get fully created
In-Reply-To: <CANSL5VEDGL1brRgaDh5eZc0K7LCsxV5RH6yr-isP3Zi6xRoJKQ@mail.gmail.com>
References: <1bd216ff-02b7-47ed-bbdd-1b157941382e@i9g2000yqe.googlegroups.com>
	<4E89A6E2.3030605@rabbitmq.com>
	<CANSL5VEDGL1brRgaDh5eZc0K7LCsxV5RH6yr-isP3Zi6xRoJKQ@mail.gmail.com>
Message-ID: <4EB8119F.4030107@rabbitmq.com>

On 07/11/11 17:11, Chip Salzenberg wrote:
> I've chosen a different workaround; meanwhile, might you give me some
> idea when 2.6.2 can be expected?  I might not use mirroring in the end,
> but it would be nice to know when I'll have the option.

It'll be 2.7.0, and it'll be fairly soon.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From cpthk at hotmail.com  Mon Nov  7 19:16:25 2011
From: cpthk at hotmail.com (Jeffrey Chen)
Date: Mon, 7 Nov 2011 11:16:25 -0800
Subject: [rabbitmq-discuss] read messages in the queue
Message-ID: <BLU149-W137B155257B20B35DD0A07ABD90@phx.gbl>


Hi RabbitMQ community:

I am playing with rabbitMQ management plugins. We are using rabbitMQ for production product, and we are trying to see all OR first the messages in the queue for debugging purposes. Is there a way to do that? I do see there is a feature "Get Message" under the "Queues" tab, but this feature will consume the messages or destruct the order. Is there a a feature or even a command line tool that's able to see the messages without consume/destruct the queue? Something like a "peek" feature for the queue?

Thanks,
Jeffrey.
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/fa1724a3/attachment.htm>

From konstantin.kalin at gmail.com  Mon Nov  7 19:22:57 2011
From: konstantin.kalin at gmail.com (Konstantin Kalin)
Date: Mon, 7 Nov 2011 11:22:57 -0800 (PST)
Subject: [rabbitmq-discuss] Active/Active failover and lost messages
In-Reply-To: <20111107095214.GA21387@wellquite.org>
References: <1d68ca63-5939-4447-bcbb-5761f6d5f627@x8g2000yql.googlegroups.com>
	<20111104161022.GB31860@wellquite.org>
	<93d0e99e-a60b-488e-b9fc-cb77a62719ad@z15g2000prn.googlegroups.com>
	<20111107095214.GA21387@wellquite.org>
Message-ID: <c33b65da-fa30-4821-96aa-e1356ebf198c@x36g2000prb.googlegroups.com>

Hi, Matthew.

On Nov 7, 1:52?am, Matthew Sackman <matt... at rabbitmq.com> wrote:
> Hi Konstantin,
>
>
> Interesting. I would guess that that's the case when the publisher is
> connected to a highly loaded node, and the publisher's node is taken
> down. Could you check if that's the case?

You are right. That's the case. Once I returned back "Publisher
confirms" no more messages are lost in this situation as well. ( I
commented code when I was playing with different options and forgot to
return back). Now RabbitMQ just works :)
I also noticed that "Publisher confirms" increases CPU load on the
cluster but I think this is expected costs.

Thank you for your help and great product,
Konstantin.

From ashley at spider.io  Mon Nov  7 22:29:36 2011
From: ashley at spider.io (Ashley Brown)
Date: Mon, 7 Nov 2011 22:29:36 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated
	queues
In-Reply-To: <20111107142240.GF6082@rabbitmq.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>
	<20111107135014.GD6082@rabbitmq.com>
	<CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>
	<20111107142240.GF6082@rabbitmq.com>
Message-ID: <CAGn3ETE=bp9+pjM=qEEA=5EKRWun_rY7LUA5tZjb8f9E3Ad7Pw@mail.gmail.com>

>
>
>
> > Trying to check if this is a plugin
> > bug with list_queues (list_queues name slave_pids
> synchronised_slave_pids),
> > I can't get the cluster to list them at all, it just sits there (for the
> > last 15 minutes).
>
> Curious. Are any of the nodes hammering CPU or disk? Were any of the
> queues particularly long before shutdown?


Have got a similar problem running tests this evening, although this time
*without* any shutdowns (3 nodes all running fine since full restart). I've
had some queues get fairly long (1/2 million messages or so, 3 of them),
due to broken consumers. The management interface stopped updating message
counts as CPU use hit the roof. I was testing so decided to delete the
queues and start again. I stopped the producers and consumers running, so
the queues were in a steady state and CPU came down. Deleting most queues
worked fine, apart from the last one. The management interface just hangs
(Chrome offers to kill the page), whether I try to delete or purge the
queue. As can be seen below, beam processes are hogging two of the cores on
the 'master' for this queue:

http://www.evernote.com/shard/s53/sh/1ba2b59b-913f-4a00-bf3a-03067c0a1f29/faa3fc9c1b250b10b5d8491c367aa991

Beam processes are also hogging one core on the slave nodes.

The logs show all three nodes are switching between being clear of the
watermark and over it, every few minutes.

Watermark is 5.9GB, management interface shows the slaves < 2GB, the master
on 4.4GB. (Log snippet at the end of the email).


=INFO REPORT==== 7-Nov-2011::22:20:01 ===
vm_memory_high_watermark set. Memory used:6970525768 allowed:6296176230

=INFO REPORT==== 7-Nov-2011::22:20:01 ===
    alarm_handler: {set,{{vm_memory_high_watermark,clusterrabbit at hermes02},
                         []}}

=INFO REPORT==== 7-Nov-2011::22:20:03 ===
vm_memory_high_watermark clear. Memory used:5018976928 allowed:6296176230

=INFO REPORT==== 7-Nov-2011::22:20:03 ===
    alarm_handler: {clear,{vm_memory_high_watermark,clusterrabbit at hermes02}}

=INFO REPORT==== 7-Nov-2011::22:22:00 ===
vm_memory_high_watermark set. Memory used:6583230408 allowed:6296176230

=INFO REPORT==== 7-Nov-2011::22:22:00 ===
    alarm_handler: {set,{{vm_memory_high_watermark,clusterrabbit at hermes02},
                         []}}

=INFO REPORT==== 7-Nov-2011::22:22:02 ===
vm_memory_high_watermark clear. Memory used:5025939688 allowed:6296176230

=INFO REPORT==== 7-Nov-2011::22:22:02 ===
    alarm_handler: {clear,{vm_memory_high_watermark,clusterrabbit at hermes02}}

=INFO REPORT==== 7-Nov-2011::22:24:50 ===
vm_memory_high_watermark set. Memory used:6587145104 allowed:6296176230

=INFO REPORT==== 7-Nov-2011::22:24:50 ===
    alarm_handler: {set,{{vm_memory_high_watermark,clusterrabbit at hermes02},
                         []}}

=INFO REPORT==== 7-Nov-2011::22:24:51 ===
vm_memory_high_watermark clear. Memory used:5029821304 allowed:6296176230

=INFO REPORT==== 7-Nov-2011::22:24:51 ===
    alarm_handler: {clear,{vm_memory_high_watermark,clusterrabbit at hermes02}}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/aa7896ef/attachment.htm>

From matthew at rabbitmq.com  Mon Nov  7 23:12:43 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Mon, 7 Nov 2011 23:12:43 +0000
Subject: [rabbitmq-discuss] Active/Active failover and lost messages
In-Reply-To: <c33b65da-fa30-4821-96aa-e1356ebf198c@x36g2000prb.googlegroups.com>
References: <1d68ca63-5939-4447-bcbb-5761f6d5f627@x8g2000yql.googlegroups.com>
	<20111104161022.GB31860@wellquite.org>
	<93d0e99e-a60b-488e-b9fc-cb77a62719ad@z15g2000prn.googlegroups.com>
	<20111107095214.GA21387@wellquite.org>
	<c33b65da-fa30-4821-96aa-e1356ebf198c@x36g2000prb.googlegroups.com>
Message-ID: <20111107231242.GA7418@wellquite.org>

Hi Konstantin,

On Mon, Nov 07, 2011 at 11:22:57AM -0800, Konstantin Kalin wrote:
> You are right. That's the case. Once I returned back "Publisher
> confirms" no more messages are lost in this situation as well. ( I
> commented code when I was playing with different options and forgot to
> return back). Now RabbitMQ just works :)

That's good to hear. And slightly rare to hear around here ;)

> I also noticed that "Publisher confirms" increases CPU load on the
> cluster but I think this is expected costs.

Yes, it is expected. There is rather a lot more work going on per
message.

Matthew

From matthew at rabbitmq.com  Mon Nov  7 23:19:40 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Mon, 7 Nov 2011 23:19:40 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated
	queues
In-Reply-To: <CAGn3ETE=bp9+pjM=qEEA=5EKRWun_rY7LUA5tZjb8f9E3Ad7Pw@mail.gmail.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>
	<20111107135014.GD6082@rabbitmq.com>
	<CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>
	<20111107142240.GF6082@rabbitmq.com>
	<CAGn3ETE=bp9+pjM=qEEA=5EKRWun_rY7LUA5tZjb8f9E3Ad7Pw@mail.gmail.com>
Message-ID: <20111107231939.GB7418@wellquite.org>

On Mon, Nov 07, 2011 at 10:29:36PM +0000, Ashley Brown wrote:
> Have got a similar problem running tests this evening, although this time
> *without* any shutdowns (3 nodes all running fine since full restart). I've
> had some queues get fairly long (1/2 million messages or so, 3 of them),
> due to broken consumers. The management interface stopped updating message
> counts as CPU use hit the roof. I was testing so decided to delete the
> queues and start again. I stopped the producers and consumers running, so
> the queues were in a steady state and CPU came down. Deleting most queues
> worked fine, apart from the last one. The management interface just hangs
> (Chrome offers to kill the page), whether I try to delete or purge the
> queue. As can be seen below, beam processes are hogging two of the cores on
> the 'master' for this queue:
> 
> http://www.evernote.com/shard/s53/sh/1ba2b59b-913f-4a00-bf3a-03067c0a1f29/faa3fc9c1b250b10b5d8491c367aa991
> 
> Beam processes are also hogging one core on the slave nodes.
> 
> The logs show all three nodes are switching between being clear of the
> watermark and over it, every few minutes.
> 
> Watermark is 5.9GB, management interface shows the slaves < 2GB, the master
> on 4.4GB. (Log snippet at the end of the email).

Hmm. There's nothing wrong with the entries in the logs. I'm not sure
whether it's just "doing what it's meant to be doing" or whether there's
a bug - sure, the hogging of CPU is undesireable, but I don't know
whether the cause of that is a bug or whether it's just some unoptimal
algorithm.

Could you describe accurately what your tests are so that we can try and
reproduce?

Matthew

From ashley at spider.io  Mon Nov  7 23:46:26 2011
From: ashley at spider.io (Ashley Brown)
Date: Mon, 7 Nov 2011 23:46:26 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated
	queues
In-Reply-To: <20111107231939.GB7418@wellquite.org>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>
	<20111107135014.GD6082@rabbitmq.com>
	<CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>
	<20111107142240.GF6082@rabbitmq.com>
	<CAGn3ETE=bp9+pjM=qEEA=5EKRWun_rY7LUA5tZjb8f9E3Ad7Pw@mail.gmail.com>
	<20111107231939.GB7418@wellquite.org>
Message-ID: <CAGn3ETFXWmD6ZaGMKUBV5ZNjnaceOLEBqNb78-S62ZOrpU9Yug@mail.gmail.com>

>
>
> Could you describe accurately what your tests are so that we can try and
> reproduce?
>
>
I'm afraid the tests are of the system overall, and I haven't been able to
produce a minimal test case so far. This evening's test involved dropping
backed up messages into the queues quickly, while draining them slowly.
Effectively:

5 HA queues, replicated to all nodes. 3 nodes in the cluster, 15GB
machines, high water mark at 5.9GB.

Start producers and consumers, consumers running slowly, allowing queues to
build to 500k.

Stop producers and consumers, delete queues. Deletions take a long time.
Although I've also seen this with no-HA queues - it can take tens of
minutes to delete a queue with 250k+ messages in.

Previously we've had queues in a steady state, with approximately 25,000
unacked messages (they take several minutes to process, aren't acked until
complete). Then kill some nodes off, forcing the messages to be requeued
and replayed on the slaves. It all gets out of sync after that.

I might be able to give you a better test case once we've pushed our non-HA
release out and I have a bit more time.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/66fdcfcd/attachment.htm>

From al at ooyala.com  Tue Nov  8 00:18:19 2011
From: al at ooyala.com (Al Tobey)
Date: Mon, 7 Nov 2011 16:18:19 -0800
Subject: [rabbitmq-discuss] STOMP performance problems at > 1200 messages/s
Message-ID: <CA+w7haVt65BPyikvnHp8CrNhawwjjOz9CrwOiF2ZK_GAPpxkYA@mail.gmail.com>

I mentioned some performance issues I experienced over the weekend with
STOMP on Twitter and @monadic asked me to send an email, so here it is.

For a recent internal hackathon project, I hooked some of our logs to
RabbitMQ so a team of engineers could process events in real time. Having
done this in the past, I wrote a simple perl program to tail the logfile in
question and put each message on the queue (e.g. /queue/logs).  The
messages are about 1100 bytes on average, including the usual apache style
log stuff and a serialized object, mime-encoded.  I was capturing logs from
8 machines that are load balanced, so the rate of messages was pretty even.

Everything seemed to be working fine when I set it up. Messages were going
in and coming out just fine at 5000-6000 messages/s (both sides stomp).

Once the engineer I was helping started running his stuff against RMQ, we
started to notice that there was anywhere from 30-600 seconds of lag
between the logs and his client (a dead-simple Ruby app using net-stomp).
To make things extra fun, our traffic rose and the message rate rose with
up to ~14km/s.  We instrumented my tailing code and his ruby code and
couldn't find any issue with either. I started watching the RabbitMQ
instance, which is running in EC2 on a m2.xlarge (in retrospect, not the
best instance choice). I could see both vcpus were pretty busy hovering at
6-10% idle with 12-20% system. I pulled up top with thread view enabled and
could see two threads were pegging the CPU.  I assumed, but did not verify,
that these were running the STOMP code. At the same time all of this was
happening, we were watching message rates in the admin webui. When I
compared numbers in the UI to what my producers were sending, there was a
large mismatch that correlated with the delay we were seeing at the
consumers.  The memory usage of erlang on the RMQ host was growing well
past the 40% mark, so we bumped that to 75%, which simply allowed more time
before it blew up.

My suspicion is that the STOMP plugin is getting backed up, based on these
observations:
  * memory usage regularly maxed out under load (4,000-14,000
messages/second)
  * the AMQP queue stats did not match what the producers sent
  * the amount of memory consumed was way out of order from what the AMQP
queue depths were (usually close to 0!)
  * we were definitely consuming fast enough with 3-8 consumer processes on
dedicated machines (4x m2.xlarge)
     * these machines/processes were showing no stress
  * after shutting down producers, it appeared as if they were producing
for up to 10 minutes after shutdown

While under the gun, we tried a few quick & dirty hacks:

  * dropped every other log line in the producer to cut msg/s in half
    * slowed performance decay but did not fix anything
  * restarted the producer regularly to cycle connections
    * made things worse - we could observe many draining producer channels
in the admin UI that hung around for more than 10 minutes
       * after a while we bounced rabbitmq so we could move on
    * thrashing seemed to make the existing producer channels drain even
slower
  * start more consumers - no change
  * shut down producers
    * only when I took it down to 1 producer did memory usage stop
climbing, so ~1200 messages/s is the observed limit

Things I'd try if this project was still running, but have not:

  * upgrade to Erlang R14
  * switch to AMQP producers
  * more/faster CPU instances

In any case, the experiment driving all of this is concluded for now. I can
still fire up the producers and dummy consumers for quick tests but don't
have a lot of time to dedicate to debugging this.  For what it's worth, the
hackathon project was super cool and successful; I just had to babysit the
queue and fire up producers just before the demo started so delay would be
acceptable ;)

-Al
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/5ac3a90f/attachment.htm>

From matthew at rabbitmq.com  Tue Nov  8 00:24:54 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Tue, 8 Nov 2011 00:24:54 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated
	queues
In-Reply-To: <CAGn3ETFXWmD6ZaGMKUBV5ZNjnaceOLEBqNb78-S62ZOrpU9Yug@mail.gmail.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>
	<20111107135014.GD6082@rabbitmq.com>
	<CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>
	<20111107142240.GF6082@rabbitmq.com>
	<CAGn3ETE=bp9+pjM=qEEA=5EKRWun_rY7LUA5tZjb8f9E3Ad7Pw@mail.gmail.com>
	<20111107231939.GB7418@wellquite.org>
	<CAGn3ETFXWmD6ZaGMKUBV5ZNjnaceOLEBqNb78-S62ZOrpU9Yug@mail.gmail.com>
Message-ID: <20111108002453.GC20041@wellquite.org>

Hi Ashley,

On Mon, Nov 07, 2011 at 11:46:26PM +0000, Ashley Brown wrote:
> Effectively:
> 
> 5 HA queues, replicated to all nodes. 3 nodes in the cluster, 15GB
> machines, high water mark at 5.9GB.
> 
> Start producers and consumers, consumers running slowly, allowing queues to
> build to 500k.
> 
> Stop producers and consumers, delete queues. Deletions take a long time.
> Although I've also seen this with no-HA queues - it can take tens of
> minutes to delete a queue with 250k+ messages in.

Ok, if it's that simple to trigger then it shouldn't take too long for
me to reproduce it. I've certainly seen the slaves take some time to
catch up - the master->slave communication is done asynchronously
deliberately to stop the slowest-slave dictating the pace, and it can
create such backlogs, but we've introduced shortcuts for queue deletion
elsewhere, and I'd imagine we could do the same in a few places in the
HA queues stuff.

> Previously we've had queues in a steady state, with approximately 25,000
> unacked messages (they take several minutes to process, aren't acked until
> complete). Then kill some nodes off, forcing the messages to be requeued
> and replayed on the slaves.

Argh. That number of unacked messages might be a problem. I'm not sure
at this stage, but it's possible there are some places where we're just
using the wrong datastructures to deal with that sort of scenario. I'll
take a look after a snooze.

> It all gets out of sync after that.

Well, it shouldn't. I still suspect it might eventually recover, but it
might take the heat-death of the universe before it gets there.

> I might be able to give you a better test case once we've pushed our non-HA
> release out and I have a bit more time.

That'd be very kind, but I'll prod it myself in the meantime.

Thanks,

Matthew

From pdezwart at rubiconproject.com  Tue Nov  8 02:35:50 2011
From: pdezwart at rubiconproject.com (Pieter de Zwart)
Date: Mon, 7 Nov 2011 20:35:50 -0600
Subject: [rabbitmq-discuss] Stuck waiting for frame during amqp_basic_qos?
Message-ID: <CADDD582.284C5%pdezwart@rubiconproject.com>

Hey everyone,

I am doing something wrong, and I could use some help.  I maintain/develop the PHP extension that interfaces with RabbitMQ via the rabbitmq-c library. We have implemented all of the low level calls, but have also added some helpful wrappers to let poor PHP users not have to deal with all the complexity of the protocol. One of these wrapper methods is AMQPQueue::getMessages(). Unfortunately, I have built a bug I don?t know how to squash.
During the second call to the AMQPQueue::getMessages() function within a loop (reusing connection and channel), the process get stuck in busy wait. In the attached file on line 37, we call amqp_basic_qos() to prevent any prefetching by the server. That call goes through the following stack in rabbitmq-c:

librabbitmq/amqp_framing.c:1999: amqp_basic_qos
librabbitmq/amqp_socket.c:356: amqp_simple_rpc_decoded
librabbitmq/amqp_socket.c:264: amqp_simple_rpc
librabbitmq/amqp_socket.c:157: wait_frame_inner

And then it gets stuck in that while(1) loop. This is where I am a n00b. I was wondering if someone would be so kind as to review the attached code to see if there is anything obviously stupid I am doing before I go into writing an example in C to highlight my stupidity.

Any help would be much appreciated.

Thanks,
Pieter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/d61b24cb/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: amqp_getmessages.c
Type: application/octet-stream
Size: 8021 bytes
Desc: amqp_getmessages.c
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/d61b24cb/attachment.obj>

From matthias at rabbitmq.com  Tue Nov  8 07:41:42 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 08 Nov 2011 07:41:42 +0000
Subject: [rabbitmq-discuss] STOMP performance problems at > 1200
	messages/s
In-Reply-To: <CA+w7haVt65BPyikvnHp8CrNhawwjjOz9CrwOiF2ZK_GAPpxkYA@mail.gmail.com>
References: <CA+w7haVt65BPyikvnHp8CrNhawwjjOz9CrwOiF2ZK_GAPpxkYA@mail.gmail.com>
Message-ID: <4EB8DD36.6060104@rabbitmq.com>

Al,

On 08/11/11 00:18, Al Tobey wrote:
> I mentioned some performance issues I experienced over the weekend with
> STOMP on Twitter and @monadic asked me to send an email, so here it is.
> [...]

What changed between...

> Everything seemed to be working fine when I set it up. Messages were
> going in and coming out just fine at 5000-6000 messages/s (both sides
> stomp).

...and...

> we started to notice that there was anywhere from 30-600 seconds of lag
> between the logs and his client (a dead-simple Ruby app using
> net-stomp).  [...] ~1200 messages/s is the observed limit

?

Matthias.

From matthias at rabbitmq.com  Tue Nov  8 08:00:35 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 08 Nov 2011 08:00:35 +0000
Subject: [rabbitmq-discuss] crash with version 2.4.1
In-Reply-To: <CAO+KBQfEUtgfJp_2NXBp-zBt8c10+4t2-K5R77ob0nJR=QRx6A@mail.gmail.com>
References: <CAO+KBQfEUtgfJp_2NXBp-zBt8c10+4t2-K5R77ob0nJR=QRx6A@mail.gmail.com>
Message-ID: <4EB8E1A3.3080008@rabbitmq.com>

On 07/11/11 16:01, pm47 pm47 wrote:
> Could anyone look at the attached log files? My broker keeps crashing
> after a few hours, I can't find out why.
> There are appromixately 100 servers connected to it.

Something did definitely go wrong but unfortunately the logs do not 
pinpoint the source. Could you upgrade to 2.6.1 to see whether that 
resolves the problem? Even if it doesn't, that would allow us to get 
better diagnostics.

Regards,

Matthias.

From crimson.corelio at gmail.com  Mon Nov  7 22:05:14 2011
From: crimson.corelio at gmail.com (Jesse C)
Date: Mon, 7 Nov 2011 14:05:14 -0800
Subject: [rabbitmq-discuss] Channel error handling
Message-ID: <CAObKvBdrU_zH0v4zg60hxay+3xO7hhqbmrM1WifbKA4YPc8A4w@mail.gmail.com>

Hey,

So I'm working on writing a program using the Java client and I'm not sure
the best way to handle channel errors.  I find that when I do a
basicPublish and something goes wrong with communicating the message to
RabbitMQ, I do not get told anything (in this case I was setting a UserID
that did not match the logged-in id).  The next time I attempt to access
the channel, I get an error that relates to what went wrong.  However that
error will often be in a completely different part of the code, so the
stack trace is basically useless.  Is there something I should call after I
do a publish to verify that the message went through correctly?

thanks,

jesse c
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111107/2e484cd4/attachment.htm>

From Marek.Cermak at Honeywell.com  Tue Nov  8 10:22:36 2011
From: Marek.Cermak at Honeywell.com (Cermak, Marek)
Date: Tue, 8 Nov 2011 11:22:36 +0100
Subject: [rabbitmq-discuss] connecting to Rabbit's node
In-Reply-To: <20111107095433.GB21387@wellquite.org>
References: <C19F278955DE32459441209A75FC1B2ACBBFD1@FR44EV808.global.ds.honeywell.com>
	<20111107095433.GB21387@wellquite.org>
Message-ID: <C19F278955DE32459441209A75FC1B2AD07899@FR44EV808.global.ds.honeywell.com>

Hello,
this helped. Thanks.

looking on the structure of running processes, there is quite a lot of
delegate supervisors in hibernate state and same for
rabbit_tcp_client_sup. Why is that?

thank you
marek

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com
[mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of
Matthew Sackman
Sent: Monday, November 07, 2011 10:55
To: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] connecting to Rabbit's node

On Mon, Nov 07, 2011 at 10:12:17AM +0100, Cermak, Marek wrote:
> I want to connect to Rabbit's Erlang node to make analysis (appmon and
> so). I have debian squeeze in vbox, rabbit 2.6.1, same cookie file as
in
> ~rabbitmq/ and as a root I try to run
> 
> $ erl -sname rabbit -remsh rabbit at debian

I suspect your hostname is debian. Thus -sname rabbit is the same as
-sname rabbit at debian, and thus you get a node name clash.

You want something like

erl -sname foo -remsh rabbit at debian

Matthew
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From matthias at rabbitmq.com  Tue Nov  8 10:26:14 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 08 Nov 2011 10:26:14 +0000
Subject: [rabbitmq-discuss] connecting to Rabbit's node
In-Reply-To: <C19F278955DE32459441209A75FC1B2AD07899@FR44EV808.global.ds.honeywell.com>
References: <C19F278955DE32459441209A75FC1B2ACBBFD1@FR44EV808.global.ds.honeywell.com>	<20111107095433.GB21387@wellquite.org>
	<C19F278955DE32459441209A75FC1B2AD07899@FR44EV808.global.ds.honeywell.com>
Message-ID: <4EB903C6.20300@rabbitmq.com>

Marek,

On 08/11/11 10:22, Cermak, Marek wrote:
> looking on the structure of running processes, there is quite a lot of
> delegate supervisors in hibernate state and same for
> rabbit_tcp_client_sup. Why is that?

Most rabbit erlang processes will hibernate when they have been idle for 
a while, in order to conserve memory.

Matthias.

From Marek.Cermak at Honeywell.com  Tue Nov  8 11:13:52 2011
From: Marek.Cermak at Honeywell.com (Cermak, Marek)
Date: Tue, 8 Nov 2011 12:13:52 +0100
Subject: [rabbitmq-discuss] connecting to Rabbit's node
In-Reply-To: <4EB903C6.20300@rabbitmq.com>
References: <C19F278955DE32459441209A75FC1B2ACBBFD1@FR44EV808.global.ds.honeywell.com>	<20111107095433.GB21387@wellquite.org>
	<C19F278955DE32459441209A75FC1B2AD07899@FR44EV808.global.ds.honeywell.com>
	<4EB903C6.20300@rabbitmq.com>
Message-ID: <C19F278955DE32459441209A75FC1B2AD07918@FR44EV808.global.ds.honeywell.com>

I understand that, but isn't it against the erlang's philosophy of
creating lightweight processes on demand and let them die after they are
finished?

I am not an erlang coder at all, I just try to get into RabbitMQ
structure to get knowledge about it. However there's no 'RabbitMQ
Internals' documented so I have to study *.erl files :)

thank you

marek

-----Original Message-----
From: Matthias Radestock [mailto:matthias at rabbitmq.com] 
Sent: Tuesday, November 08, 2011 11:26
To: Cermak, Marek
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] connecting to Rabbit's node

Marek,

On 08/11/11 10:22, Cermak, Marek wrote:
> looking on the structure of running processes, there is quite a lot of
> delegate supervisors in hibernate state and same for
> rabbit_tcp_client_sup. Why is that?

Most rabbit erlang processes will hibernate when they have been idle for

a while, in order to conserve memory.

Matthias.

From matthias at rabbitmq.com  Tue Nov  8 11:17:44 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 08 Nov 2011 11:17:44 +0000
Subject: [rabbitmq-discuss] connecting to Rabbit's node
In-Reply-To: <C19F278955DE32459441209A75FC1B2AD07918@FR44EV808.global.ds.honeywell.com>
References: <C19F278955DE32459441209A75FC1B2ACBBFD1@FR44EV808.global.ds.honeywell.com>	<20111107095433.GB21387@wellquite.org>	<C19F278955DE32459441209A75FC1B2AD07899@FR44EV808.global.ds.honeywell.com>	<4EB903C6.20300@rabbitmq.com>
	<C19F278955DE32459441209A75FC1B2AD07918@FR44EV808.global.ds.honeywell.com>
Message-ID: <4EB90FD8.20309@rabbitmq.com>

On 08/11/11 11:13, Cermak, Marek wrote:
> I understand that, but isn't it against the erlang's philosophy of
> creating lightweight processes on demand and let them die after they are
> finished?

The processes in question are long lived.

Matthias.

From david at rabbitmq.com  Tue Nov  8 12:45:28 2011
From: david at rabbitmq.com (David Wragg)
Date: Tue, 08 Nov 2011 12:45:28 +0000
Subject: [rabbitmq-discuss] Stuck waiting for frame during
	amqp_basic_qos?
In-Reply-To: <CADDD582.284C5%pdezwart@rubiconproject.com> (Pieter de Zwart's
	message of "Mon, 7 Nov 2011 20:35:50 -0600")
References: <CADDD582.284C5%pdezwart@rubiconproject.com>
Message-ID: <yrv4c7h3ahjfb.fsf@dwragg.eng.vmware.com>

Hi Pieter,

Pieter de Zwart <pdezwart at rubiconproject.com> writes:
> I am doing something wrong, and I could use some help.  I
> maintain/develop the PHP extension that interfaces with RabbitMQ via
> the rabbitmq-c library. We have implemented all of the low level
> calls, but have also added some helpful wrappers to let poor PHP users
> not have to deal with all the complexity of the protocol. One of these
> wrapper methods is AMQPQueue::getMessages(). Unfortunately, I have
> built a bug I don?t know how to squash.
>
> During the second call to the AMQPQueue::getMessages() function within
> a loop (reusing connection and channel), the process get stuck in busy
> wait. In the attached file on line 37, we call amqp_basic_qos() to
> prevent any prefetching by the server. That call goes through the
> following stack in rabbitmq-c:
>
> librabbitmq/amqp_framing.c:1999: amqp_basic_qos
> librabbitmq/amqp_socket.c:356: amqp_simple_rpc_decoded
> librabbitmq/amqp_socket.c:264: amqp_simple_rpc
> librabbitmq/amqp_socket.c:157: wait_frame_inner
>
> And then it gets stuck in that while(1) loop.

Nothing stands out as being obviously wrong in your code (I do notice
one issue, but it is not responsible for the problem you describe).

If you think you can guide a PHP newbie through how to trigger the
problem within PHP, I'd be happy to try.

Here is the issue I mentioned:

> 	/* Set the QOS for this channel to match the max_messages */
> 	amqp_basic_qos(
> 		connection->connection_resource->connection_state,
> 		channel->channel_id,
> 		0,						/* prefetch window size */
> 		0,						/* prefetch message count */
> 		0						/* global flag */
> 	);

The AMQP terminology here is a bit confusing.  Setting the prefetch
count to 0 does not mean "no prefetch".  The prefetch count represents a
limit on the number of unacked messages for the channel/connection.
Actually setting it to zero wouldn't make sense, as the server would not
be able to deliver any messages to the client.  So a prefetch count of
zero is specified to mean "no limit".

Instead, you should set the prefetch count to one, meaning "allow me to
have one unacked message, but no more".  In other words, no messages are
prefetched.

The prefetch size should be left as zero, because you don't want to
limit that.

David

-- 
David Wragg
Staff Engineer, RabbitMQ
VMware, Inc.

From emile at rabbitmq.com  Tue Nov  8 13:06:32 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 08 Nov 2011 13:06:32 +0000
Subject: [rabbitmq-discuss] read messages in the queue
In-Reply-To: <BLU149-W137B155257B20B35DD0A07ABD90@phx.gbl>
References: <BLU149-W137B155257B20B35DD0A07ABD90@phx.gbl>
Message-ID: <4EB92958.1060500@rabbitmq.com>

Hi Jeffrey,

On 07/11/11 19:16, Jeffrey Chen wrote:
> Hi RabbitMQ community:
>
> I am playing with rabbitMQ management plugins. We are using rabbitMQ for
> production product, and we are trying to see all OR first the messages
> in the queue for debugging purposes. Is there a way to do that? I do see
> there is a feature "Get Message" under the "Queues" tab, but this
> feature will consume the messages or destruct the order. Is there a a

In the next version of rabbit (after v2.6.1) the order will not be 
destroyed when requeueing messages. Messages will be requeued to the 
front of the queue, meaning that you can "peek" at the head of the 
queue. You can make use of the management interface or use an AMQP 
client to do this.



-Emile


From simon at rabbitmq.com  Tue Nov  8 13:08:28 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 08 Nov 2011 13:08:28 +0000
Subject: [rabbitmq-discuss] read messages in the queue
In-Reply-To: <4EB92958.1060500@rabbitmq.com>
References: <BLU149-W137B155257B20B35DD0A07ABD90@phx.gbl>
	<4EB92958.1060500@rabbitmq.com>
Message-ID: <4EB929CC.1040306@rabbitmq.com>

On 08/11/11 13:06, Emile Joubert wrote:
>
> In the next version of rabbit (after v2.6.1) the order will not be
> destroyed when requeueing messages. Messages will be requeued to the
> front of the queue, meaning that you can "peek" at the head of the
> queue. You can make use of the management interface or use an AMQP
> client to do this.

But note that you'll still cause the "redelivered" flag to be set. 
There's currently no way to passively inspect the contents of a queue 
(and probably won't be for some time if ever).

Cheers, Simon
-- 
Simon MacMullen
RabbitMQ, VMware

From cameron.davison at gmail.com  Tue Nov  8 13:58:19 2011
From: cameron.davison at gmail.com (Cameron Davison)
Date: Tue, 8 Nov 2011 07:58:19 -0600
Subject: [rabbitmq-discuss] read messages in the queue
In-Reply-To: <4EB929CC.1040306@rabbitmq.com>
References: <BLU149-W137B155257B20B35DD0A07ABD90@phx.gbl>
	<4EB92958.1060500@rabbitmq.com> <4EB929CC.1040306@rabbitmq.com>
Message-ID: <CAGWz9vWWF0dqxhNUWwiobDE_WApOuMnrks31jMeJXU5vhf824w@mail.gmail.com>

Jeffrey,

You mention that this is for debugging purposes. Maybe you would
benefit from turning on the firehose
http://www.rabbitmq.com/firehose.html during your debugging session.
This could give you a lot more insight into what is going into the
queue before you have to read it back out. I know that is not the same
as being able to read out of the queue, but still could help debug any
problems.

Cameron

On Tue, Nov 8, 2011 at 7:08 AM, Simon MacMullen <simon at rabbitmq.com> wrote:
> On 08/11/11 13:06, Emile Joubert wrote:
>>
>> In the next version of rabbit (after v2.6.1) the order will not be
>> destroyed when requeueing messages. Messages will be requeued to the
>> front of the queue, meaning that you can "peek" at the head of the
>> queue. You can make use of the management interface or use an AMQP
>> client to do this.
>
> But note that you'll still cause the "redelivered" flag to be set. There's
> currently no way to passively inspect the contents of a queue (and probably
> won't be for some time if ever).
>
> Cheers, Simon
> --
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From tarjei.romtveit at integrasco.no  Tue Nov  8 14:11:32 2011
From: tarjei.romtveit at integrasco.no (Tarjei Romtveit)
Date: Tue, 8 Nov 2011 15:11:32 +0100
Subject: [rabbitmq-discuss] Performance issue over time in a consumer using
	basic qos (mirrored queues)
Message-ID: <CALrPf14YXFg3PmvQ8-c2vgsxkxLiLXR4syCJtRhDXEh3njCwTQ@mail.gmail.com>

After reading some posts on the list it seems like many problems with
performance is nothing new. We are currently reorganizing a cluster
consisting of a myriad of jetty instances to a rabbitmq and a message
driven system. The current component we are moving is shortly a staging
system for a relative slow consumer process..

 Our use-case:.

1. We have currently a small stream of relatively large messages, that
varies in size. (1600 bytes -> 5000 bytes )
2. The incoming rate varies form 0 -> 58 per/s in our current test queues.
3. We have currently two brokers in a cluster
4. The queues are set up in mirrored (We can not lose any messages),
durable and non-exclusive.
5. We use Publisher Confirms/Consumer Cancellation in the client
implementations in Java
6. We use prefetch-count as a basic QOS parameter. We have  tested with: 1,
10 , 15, 25
7. We ack per (deliveryTag % prefetch-count == 0)  to minimize acking.
8. The client can nack a message but it is seldom happening (every 1
million message maybe)

Problem:
Over time we see a larger performance decrease in consuming the messages
from the broker. The consumer is deadly fast in the start. 1-2 ms per
message. Then the retrieval gradually decreases to 25-26 ms per message.
The velocity of the speed decrease is varying by the prefetch size. When
increasing the prefetch count to the time before it reaches 25ms is
exponentially increasing. Up to 12 hours. If we re-initiate the connection
it seem to recover and everything seem OK.

Versions:

Java client: 2.5.1
Broker: 2.5.1 (ubuntu build)

Regards


-- 
Tarjei Romtveit
Data Management Director
Integrasco A/S
Mobile: +47 990 20 074
Address: Hasseldalen 3, N-4878 Grimstad, Norway
www.integrasco.com // twitter.com/integrasco // facebook.com/integrasco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111108/1d5655be/attachment.htm>

From matthew at rabbitmq.com  Tue Nov  8 15:06:15 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Tue, 8 Nov 2011 15:06:15 +0000
Subject: [rabbitmq-discuss] RabbitMQ network issue (IP change) on cluster
In-Reply-To: <CABWH_X6Sk5+zBfTfR+XLtq-_g3B73izzun8s8LBN9uX77rqO-Q@mail.gmail.com>
References: <CABWH_X6DNiw=zXQw4NvLHdr1-qu6jnuLssQ6jSWvpa97BMFVwg@mail.gmail.com>
	<20111030072933.GA7731@rabbitmq.com>
	<CABWH_X6Sk5+zBfTfR+XLtq-_g3B73izzun8s8LBN9uX77rqO-Q@mail.gmail.com>
Message-ID: <20111108150614.GB17350@rabbitmq.com>

Hi,

On Mon, Oct 31, 2011 at 08:34:04PM +0800, Yu-Teh Shen wrote:
> I got the following log after I restart three machines in cluster.
> 
> =ERROR REPORT==== 31-Oct-2011::20:26:36 ===
> Mnesia(rabbit at lab002): ** ERROR ** mnesia_event got {inconsistent_database,
> starting_partitioned_network, rabbit at lab001}
> 
> =ERROR REPORT==== 31-Oct-2011::20:26:36 ===
> Mnesia(rabbit at lab002): ** ERROR ** mnesia_event got {inconsistent_database,
> starting_partitioned_network, rabbit at lab003}
> 
> And this make each node in the cluster can only see itself.

Ok, so the one that you're trying to add back in will need fully
resetting. This will likely require manually removing the database
directory it's using so to allow the rabbit to startup, and then the
usual stop_app, reset, cluster, start_app cycle.

Matthew

From jonathan.s.oliver42 at gmail.com  Tue Nov  8 16:26:45 2011
From: jonathan.s.oliver42 at gmail.com (Jonathan Oliver)
Date: Tue, 8 Nov 2011 08:26:45 -0800 (PST)
Subject: [rabbitmq-discuss] Message durability and partition tolerence
Message-ID: <2159662.547.1320769605606.JavaMail.geo-discussion-forums@prog16>

Since the introduction of better clustering support and message queue 
failover in v2.6, my company is starting to consider moving to RabbitMQ. 
 But we had a few questions about the roadmap.

We are looking to ensure that a message is only considered received by an 
exchange from a producing app when at least two physical instances of 
Rabbit acknowledge the receipt of the message--similar to Riak's method. 
 Furthermore, we are looking to ensure that a message is considered 
consumed (ack'd) when when at least one physical instance receives the ack, 
which may result in a message being delivered more than once.  Essentially, 
we'd like to propose a configuration where Rabbit can fall on the AP side 
of CAP instead of the CA side.

I should mention that we're fully aware that the above scenario may cause a 
message to be pushed to consumers more than once and how messages may get 
out of order.  In general, however, these concepts are very much a part of 
message queuing system guarantees--that of *at-least-once* delivery where 
order is not strictly guaranteed.  If we needed *at-most-once* delivery and 
strict ordering, we'd use RPC.  In many regards, this is similar to the 
Amazon SQS architecture with a few key differences--one of the most 
important being stateful connections and "push" capabilities between the 
server and connected consumers which is where Amazon's SQS offering falls 
apart--that and message size restrictions.

I can see that many systems really want to ensure at-most-once delivery (or 
close to it) and how the requirement to re-order messages makes things 
difficult, but by relaxing the constraints (at least in some 
configurations), it enables so much more.  For example, if an instance of 
Rabbit goes offline under the current HA configuration, when it rejoins the 
cluster the queues are wiped clean.  Yuck.  So much for guaranteed 
delivery.  While under some kind of partition-tolerant configuration, the 
queues wouldn't need to be cleaned.  Instead, the consuming application 
would be responsible for message idempotency.

At the same time, I realize that you guys might be bumping against 
restrictions in the AMQP standard, for example multiple consumers receiving 
copies of the message where one consumer ack's the message, while another 
nack's the message.  But that's something where the messaging system can't 
determine the proper course of action without knowing the business context. 
 In that case, I would imaging it should present that nack back to the 
producer as it currently does.

The bottom line in my question and proposal really has to do with message 
loss.  If the idea is to *not lose messages*, I can see a 
partition-tolerant configuration bringing a lot to the table and where the 
consuming application must be resilient to duplicate messages and ordering, 
thus freeing up RabbitMQ from having to worry so much about that.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111108/08c1f831/attachment.htm>

From al at ooyala.com  Tue Nov  8 18:22:55 2011
From: al at ooyala.com (Al Tobey)
Date: Tue, 8 Nov 2011 10:22:55 -0800
Subject: [rabbitmq-discuss] STOMP performance problems at > 1200
	messages/s
In-Reply-To: <4EB8DD36.6060104@rabbitmq.com>
References: <CA+w7haVt65BPyikvnHp8CrNhawwjjOz9CrwOiF2ZK_GAPpxkYA@mail.gmail.com>
	<4EB8DD36.6060104@rabbitmq.com>
Message-ID: <CA+w7haX0HM1d-fKRUfAGS+jBC4p3iKA_N9tAAYTuKXe+QU6kmg@mail.gmail.com>

On Mon, Nov 7, 2011 at 11:41 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> Al,
>
>
> On 08/11/11 00:18, Al Tobey wrote:
>
>> I mentioned some performance issues I experienced over the weekend with
>> STOMP on Twitter and @monadic asked me to send an email, so here it is.
>> [...]
>>
>
> What changed between...


1.) We started paying attention and caring about delays
2.) Load increased, by as much as 2x depending on time of day

When I say "seemed to be working fine", that was right after putting
everything together and verifying that messages were flowing at something
that, to my eyeballs, seemed like a reasonable rate.  Right after startup,
I didn't really watch for any kind of delay because I was basically doing "
stomp_drainer.pl |pv >/dev/null".


>  Everything seemed to be working fine when I set it up. Messages were
>> going in and coming out just fine at 5000-6000 messages/s (both sides
>> stomp).
>>
>
> ...and...
>
>  we started to notice that there was anywhere from 30-600 seconds of lag
>> between the logs and his client (a dead-simple Ruby app using
>> net-stomp).  [...] ~1200 messages/s is the observed limit
>>
>
> ?
>
> Matthias.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111108/0cdda78d/attachment.htm>

From matthias at rabbitmq.com  Tue Nov  8 19:11:22 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 08 Nov 2011 19:11:22 +0000
Subject: [rabbitmq-discuss] STOMP performance problems at > 1200
	messages/s
In-Reply-To: <CA+w7haX0HM1d-fKRUfAGS+jBC4p3iKA_N9tAAYTuKXe+QU6kmg@mail.gmail.com>
References: <CA+w7haVt65BPyikvnHp8CrNhawwjjOz9CrwOiF2ZK_GAPpxkYA@mail.gmail.com>	<4EB8DD36.6060104@rabbitmq.com>
	<CA+w7haX0HM1d-fKRUfAGS+jBC4p3iKA_N9tAAYTuKXe+QU6kmg@mail.gmail.com>
Message-ID: <4EB97EDA.1080507@rabbitmq.com>

On 08/11/11 18:22, Al Tobey wrote:
> 1.) We started paying attention and caring about delays

If messages were "going in and coming out just fine at 5000-6000 
messages/s", then no backlog, and hence no increasing delay, can have 
developed.

If rabbit was happily coping with 5-6kHz at one point, without creating 
a backlog, but later on it was only managing 1.2kHz then one possible 
explanation is that a temporary spike may have caused enough of a 
backlog to build up to force rabbit to page to disk, at which point 
performance drops until the backlog clears.

> 2.) Load increased, by as much as 2x depending on time of day

So is your main complaint then that the message rates rabbit can cope 
with when using stomp are lower than what you expect to see? If so, what 
is that expectation based on? A comparison with using RabbitMQ with 
AMQP? Rabbit's stomp processing is a fair bit slower than handling AMQP.


Regards,

Matthias.

From al at ooyala.com  Tue Nov  8 19:56:59 2011
From: al at ooyala.com (Al Tobey)
Date: Tue, 8 Nov 2011 11:56:59 -0800
Subject: [rabbitmq-discuss] STOMP performance problems at > 1200
	messages/s
In-Reply-To: <4EB97EDA.1080507@rabbitmq.com>
References: <CA+w7haVt65BPyikvnHp8CrNhawwjjOz9CrwOiF2ZK_GAPpxkYA@mail.gmail.com>
	<4EB8DD36.6060104@rabbitmq.com>
	<CA+w7haX0HM1d-fKRUfAGS+jBC4p3iKA_N9tAAYTuKXe+QU6kmg@mail.gmail.com>
	<4EB97EDA.1080507@rabbitmq.com>
Message-ID: <CA+w7haVeSnH5t-Yr8CBvO69348TV_NGHBCNN_f6_Mh-7q5a4jA@mail.gmail.com>

On Tue, Nov 8, 2011 at 11:11 AM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> On 08/11/11 18:22, Al Tobey wrote:
>
>> 1.) We started paying attention and caring about delays
>>
>
> If messages were "going in and coming out just fine at 5000-6000
> messages/s", then no backlog, and hence no increasing delay, can have
> developed.
>
> If rabbit was happily coping with 5-6kHz at one point, without creating a
> backlog, but later on it was only managing 1.2kHz then one possible
> explanation is that a temporary spike may have caused enough of a backlog
> to build up to force rabbit to page to disk, at which point performance
> drops until the backlog clears.


Sorry, I wasn't clear or thorough. I don't know if they were backing up or
not, because I turned it all up and moved on to other things. It might have
been backing up or delayed without tipping the server over; I wasn't
watching until the engineers using it notified me that they were seeing
delay.

 2.) Load increased, by as much as 2x depending on time of day
>>
>
> So is your main complaint then that the message rates rabbit can cope with
> when using stomp are lower than what you expect to see? If so, what is that
> expectation based on? A comparison with using RabbitMQ with AMQP? Rabbit's
> stomp processing is a fair bit slower than handling AMQP.
>

Yeah, that's my complaint (really, more of an observation).  I would hope
it could be within a few percent of AMQP or even faster since the protocol
is smaller & simpler, but I totally understand why RabbitMQ chose to back
it on AMQP.

I'm pretty sure I've pushed way more messages through RabbitMQ+STOMP
before, but that was a couple years ago at another company, and also on
rather nice bare metal so it's an unfair comparison.

"Rabbit's stomp processing is a fair bit slower than handling AMQP" is what
I suspected and is a satisfactory answer.

Thanks,
-Al


> Regards,
>
> Matthias.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111108/a035e389/attachment.htm>

From matthias at rabbitmq.com  Tue Nov  8 20:15:16 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 08 Nov 2011 20:15:16 +0000
Subject: [rabbitmq-discuss] STOMP performance problems at > 1200
	messages/s
In-Reply-To: <CA+w7haVeSnH5t-Yr8CBvO69348TV_NGHBCNN_f6_Mh-7q5a4jA@mail.gmail.com>
References: <CA+w7haVt65BPyikvnHp8CrNhawwjjOz9CrwOiF2ZK_GAPpxkYA@mail.gmail.com>	<4EB8DD36.6060104@rabbitmq.com>	<CA+w7haX0HM1d-fKRUfAGS+jBC4p3iKA_N9tAAYTuKXe+QU6kmg@mail.gmail.com>	<4EB97EDA.1080507@rabbitmq.com>
	<CA+w7haVeSnH5t-Yr8CBvO69348TV_NGHBCNN_f6_Mh-7q5a4jA@mail.gmail.com>
Message-ID: <4EB98DD4.9030904@rabbitmq.com>

Al,

On 08/11/11 19:56, Al Tobey wrote:
> I would hope [STOMP] could be within a few percent of AMQP or even
> faster since the protocol is smaller & simpler, but I totally
> understand why RabbitMQ chose to back it on AMQP.

We certainly could optimise STOMP processing quite a bit; but so far 
only very few users have expressed the need for that, so we are not 
planning any major improvements in the near term.

Whether STOMP processing can be faster than AMQP remains to be seen. 
While the structure of a message is more complex in AMQP than STOMP 
message, its representation is easier to parse in the former than the 
latter - AMQP's fixed-length and length-prefixed binary data can be 
processed more efficiently (and, in case of Erlang, with less code) than 
the newline-terminated text in STOMP headers.

Matthias.

From pdezwart at rubiconproject.com  Tue Nov  8 22:01:25 2011
From: pdezwart at rubiconproject.com (Pieter de Zwart)
Date: Tue, 8 Nov 2011 16:01:25 -0600
Subject: [rabbitmq-discuss] Stuck waiting for frame during
 amqp_basic_qos?
In-Reply-To: <yrv4c7h3ahjfb.fsf@dwragg.eng.vmware.com>
Message-ID: <CADED990.285BD%pdezwart@rubiconproject.com>

Hey David,

Thanks for the pointer. I fixed that particular item, but as predicted, it
did not resolve the issue. With a fresh perspective I dug in some more,
and figured out that the culprit was calling amqp_basic_ack when no
message was consumed. Somehow that created the situation whereby the next
call to amqp_basic_qos got stuck.

If I write some very basic C code that replicates this behavior ? la
rabbitmq-c/examples, do you think you can help me figure out what the hell
im doing wrong? =)

me




On 11/8/11 4:45 AM, "David Wragg" <david at rabbitmq.com> wrote:

>Hi Pieter,
>
>Pieter de Zwart <pdezwart at rubiconproject.com> writes:
>> I am doing something wrong, and I could use some help.  I
>> maintain/develop the PHP extension that interfaces with RabbitMQ via
>> the rabbitmq-c library. We have implemented all of the low level
>> calls, but have also added some helpful wrappers to let poor PHP users
>> not have to deal with all the complexity of the protocol. One of these
>> wrapper methods is AMQPQueue::getMessages(). Unfortunately, I have
>> built a bug I don?t know how to squash.
>>
>> During the second call to the AMQPQueue::getMessages() function within
>> a loop (reusing connection and channel), the process get stuck in busy
>> wait. In the attached file on line 37, we call amqp_basic_qos() to
>> prevent any prefetching by the server. That call goes through the
>> following stack in rabbitmq-c:
>>
>> librabbitmq/amqp_framing.c:1999: amqp_basic_qos
>> librabbitmq/amqp_socket.c:356: amqp_simple_rpc_decoded
>> librabbitmq/amqp_socket.c:264: amqp_simple_rpc
>> librabbitmq/amqp_socket.c:157: wait_frame_inner
>>
>> And then it gets stuck in that while(1) loop.
>
>Nothing stands out as being obviously wrong in your code (I do notice
>one issue, but it is not responsible for the problem you describe).
>
>If you think you can guide a PHP newbie through how to trigger the
>problem within PHP, I'd be happy to try.
>
>Here is the issue I mentioned:
>
>> 	/* Set the QOS for this channel to match the max_messages */
>> 	amqp_basic_qos(
>> 		connection->connection_resource->connection_state,
>> 		channel->channel_id,
>> 		0,						/* prefetch window size */
>> 		0,						/* prefetch message count */
>> 		0						/* global flag */
>> 	);
>
>The AMQP terminology here is a bit confusing.  Setting the prefetch
>count to 0 does not mean "no prefetch".  The prefetch count represents a
>limit on the number of unacked messages for the channel/connection.
>Actually setting it to zero wouldn't make sense, as the server would not
>be able to deliver any messages to the client.  So a prefetch count of
>zero is specified to mean "no limit".
>
>Instead, you should set the prefetch count to one, meaning "allow me to
>have one unacked message, but no more".  In other words, no messages are
>prefetched.
>
>The prefetch size should be left as zero, because you don't want to
>limit that.
>
>David
>
>-- 
>David Wragg
>Staff Engineer, RabbitMQ
>VMware, Inc.


From chrisch at ecollege.com  Wed Nov  9 00:02:08 2011
From: chrisch at ecollege.com (Chris Chew)
Date: Wed, 9 Nov 2011 00:02:08 +0000
Subject: [rabbitmq-discuss] Unicode Characters In AMQP Headers?
Message-ID: <1C7E61787A08F34BBBBD9E7A7CBC368B0A3C5759@EXMB02OSG.eclg.org>

Hello.

Is there definition somewhere within the AMQP spec for the range of allowable characters in the header values for messages and/or bindings?

Furthermore, what should one expect of Rabbit when publishing a message to an exchange with a header named something like "username" with a value of "??"?

It appears to work properly...I'm just wondering if there are any known side-affects of doing this.

Thank you!

-Chris

From mihirm at omc-international.com.au  Wed Nov  9 00:33:52 2011
From: mihirm at omc-international.com.au (Mihir Mone)
Date: Wed, 09 Nov 2011 08:33:52 +0800
Subject: [rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
Message-ID: <4EB9CA70.5070107@omc-international.com.au>

Hi guys,

I have been unable to get the shovel management plugin to work. I have 
installed all the necessary plugin dependency files. The actual message 
shovelling is working but when I click on the Shovels tab in the Web UI, 
I keep getting "TypeError: point is undefined" and nothing happens. Is 
there a better way to debug what is actually going wrong ?

I am using v2.6.1.

-- 
Mihir Mone | Software Engineer

OMC-International
6 Paterson St,
Abbotsford,
VIC 3067 Melbourne | Australia

Phone +61 (3) 9412 6525
Fax +61 (3) 9415 9105
http://www.omc-international.com.au/

Smarter Ports | Safer Shipping.

CONFIDENTIAL COMMUNICATIONS. The information contained in this e-mail is confidential and may be subject to legal professional privilege. It is intended solely for the addressee. If you received this correspondence by mistake, please promptly inform us by reply e-mail or by telephoning +61 3 9412 6500 and then delete the e-mail and destroy
any printed copy. You must not disclose, copy or rely on any part of this correspondence if you are not the intended recipient.


From shenyute at gmail.com  Wed Nov  9 00:43:19 2011
From: shenyute at gmail.com (Yu-Teh Shen)
Date: Wed, 9 Nov 2011 08:43:19 +0800
Subject: [rabbitmq-discuss] RabbitMQ network issue (IP change) on cluster
In-Reply-To: <20111108150614.GB17350@rabbitmq.com>
References: <CABWH_X6DNiw=zXQw4NvLHdr1-qu6jnuLssQ6jSWvpa97BMFVwg@mail.gmail.com>
	<20111030072933.GA7731@rabbitmq.com>
	<CABWH_X6Sk5+zBfTfR+XLtq-_g3B73izzun8s8LBN9uX77rqO-Q@mail.gmail.com>
	<20111108150614.GB17350@rabbitmq.com>
Message-ID: <CABWH_X6-ergbjWOdbpCuL3AF3PrMhwLTaJcHnBqJj3L6j26jJA@mail.gmail.com>

Hi,

So I need to manually reset the cluster after each node reboot?

Is it because I need to reboot for sequentially?
For example, halt sequence A, B, C and I need to boot C, B, A?

Thanks

Shen, Yu-Teh


On Tue, Nov 8, 2011 at 11:06 PM, Matthew Sackman <matthew at rabbitmq.com>wrote:

> Hi,
>
> On Mon, Oct 31, 2011 at 08:34:04PM +0800, Yu-Teh Shen wrote:
> > I got the following log after I restart three machines in cluster.
> >
> > =ERROR REPORT==== 31-Oct-2011::20:26:36 ===
> > Mnesia(rabbit at lab002): ** ERROR ** mnesia_event got
> {inconsistent_database,
> > starting_partitioned_network, rabbit at lab001}
> >
> > =ERROR REPORT==== 31-Oct-2011::20:26:36 ===
> > Mnesia(rabbit at lab002): ** ERROR ** mnesia_event got
> {inconsistent_database,
> > starting_partitioned_network, rabbit at lab003}
> >
> > And this make each node in the cluster can only see itself.
>
> Ok, so the one that you're trying to add back in will need fully
> resetting. This will likely require manually removing the database
> directory it's using so to allow the rabbit to startup, and then the
> usual stop_app, reset, cluster, start_app cycle.
>
> Matthew
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111109/8933ee44/attachment.htm>

From toby.corkindale at strategicdata.com.au  Wed Nov  9 00:47:49 2011
From: toby.corkindale at strategicdata.com.au (Toby Corkindale)
Date: Wed, 09 Nov 2011 11:47:49 +1100
Subject: [rabbitmq-discuss] Are there any good Perl AMQP libraries?
Message-ID: <4EB9CDB5.1080201@strategicdata.com.au>

Hi,
It's become fairly clear through my discussions here that I'd be better
off talking to RabbitMQ over AMQP rather than through the STOMP adapter.
Because:
  * I could define HA queues.
  * I could enable message expiry.
  * I can use more complex routing.

However, I wondered if there are any decent AMQP libraries available for 
Perl?

As far as I can tell, there is only one library on CPAN, Net::AMQP. This 
library is version 0.01.1, has the lowest possible user rating (one 
star), hasn't had any releases in the last 2.5 years, and only targets 
AMQP protocol version 0-8.

Are there any others around?

Cheers,
Toby

From al at ooyala.com  Wed Nov  9 01:19:22 2011
From: al at ooyala.com (Al Tobey)
Date: Tue, 8 Nov 2011 17:19:22 -0800
Subject: [rabbitmq-discuss] Are there any good Perl AMQP libraries?
In-Reply-To: <4EB9CDB5.1080201@strategicdata.com.au>
References: <4EB9CDB5.1080201@strategicdata.com.au>
Message-ID: <CA+w7haWGyxuFKq+eO9GyNKphYYGiSSOs4_U86mK+w4iY7Ra-tg@mail.gmail.com>

On Tue, Nov 8, 2011 at 4:47 PM, Toby Corkindale <
toby.corkindale at strategicdata.com.au> wrote:

> Hi,
> It's become fairly clear through my discussions here that I'd be better
> off talking to RabbitMQ over AMQP rather than through the STOMP adapter.
> Because:
>  * I could define HA queues.
>  * I could enable message expiry.
>  * I can use more complex routing.
>
> However, I wondered if there are any decent AMQP libraries available for
> Perl?
>
> As far as I can tell, there is only one library on CPAN, Net::AMQP. This
> library is version 0.01.1, has the lowest possible user rating (one star),
> hasn't had any releases in the last 2.5 years, and only targets AMQP
> protocol version 0-8.
>
> Are there any others around?
>

I've seen, but not used Net::RabbitMQ.
http://search.cpan.org/~jesus/Net--RabbitMQ-0.2.2/RabbitMQ.pm


> Cheers,
> Toby
> ______________________________**_________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111108/b925a8cf/attachment.htm>

From alexandru at rabbitmq.com  Wed Nov  9 01:19:45 2011
From: alexandru at rabbitmq.com (Alexandru =?utf-8?B?U2N2b3LFo292?=)
Date: Wed, 9 Nov 2011 01:19:45 +0000
Subject: [rabbitmq-discuss] Unicode Characters In AMQP Headers?
In-Reply-To: <1C7E61787A08F34BBBBD9E7A7CBC368B0A3C5759@EXMB02OSG.eclg.org>
References: <1C7E61787A08F34BBBBD9E7A7CBC368B0A3C5759@EXMB02OSG.eclg.org>
Message-ID: <20111109011944.GB4293@southbank.Home>

Hi Chris,

> Furthermore, what should one expect of Rabbit when publishing a message to an exchange with a header named something like "username" with a value of "??"?

The headers, queue names and exchange names are treated as binary
strings by the broker, i.e. it doesn't ever try to decode them, so they
can have whatever encoding you want.  It's up to the client applications
to make sense of the binary content of the headers.

(The few headers names RabbitMQ *does* interpret, such as
"x-message-ttl", should be ASCII.) 

Cheers,
Alex

On Wed, Nov 09, 2011 at 12:02:08AM +0000, Chris Chew wrote:
> Hello.
> 
> Is there definition somewhere within the AMQP spec for the range of allowable characters in the header values for messages and/or bindings?
> 
> Furthermore, what should one expect of Rabbit when publishing a message to an exchange with a header named something like "username" with a value of "??"?
> 
> It appears to work properly...I'm just wondering if there are any known side-affects of doing this.
> 
> Thank you!
> 
> -Chris
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From alexandru at rabbitmq.com  Wed Nov  9 01:33:23 2011
From: alexandru at rabbitmq.com (Alexandru =?utf-8?B?U2N2b3LFo292?=)
Date: Wed, 9 Nov 2011 01:33:23 +0000
Subject: [rabbitmq-discuss] Channel error handling
In-Reply-To: <CAObKvBdrU_zH0v4zg60hxay+3xO7hhqbmrM1WifbKA4YPc8A4w@mail.gmail.com>
References: <CAObKvBdrU_zH0v4zg60hxay+3xO7hhqbmrM1WifbKA4YPc8A4w@mail.gmail.com>
Message-ID: <20111109013323.GC4293@southbank.Home>

Hi Jesse,

> I find that when I do a
> basicPublish and something goes wrong with communicating the message to
> RabbitMQ, I do not get told anything (in this case I was setting a UserID
> that did not match the logged-in id). 

That's the expected behaviour, unfortunately.

The trouble is that AMQP publishes are asynchronous, so basicPublish in
the client returns immediately after sending the message to the server
(because it has nothing to wait for).  So, if the server closes the
channel as a result of the publish, you'll only find out about it on the
next method.

> However that
> error will often be in a completely different part of the code, so the
> stack trace is basically useless.  Is there something I should call after I
> do a publish to verify that the message went through correctly?

If it's for debugging purposes, you could just add a queueDeclarePassive
after the publish; that'll trigger the exception.

If not, you should be prepared to handle it.  In a long chain of
publishes, you should use something like publisher confirms, and resend
messages that were not confirmed before the channel died (for whatever
reason).

  http://www.rabbitmq.com/extensions.html#confirms

If you don't care about performance (i.e. if the throughput of these
messages is very small), set the channel into tx mode, and do a
tx.commit after each publish.

Also, why does the error pop up in a "completely different part of the
code"?  Channels are very cheap; there's no need to reuse channels for
different tasks.

Hope this helps.

Cheers,
Alex

On Mon, Nov 07, 2011 at 02:05:14PM -0800, Jesse C wrote:
> Hey,
> 
> So I'm working on writing a program using the Java client and I'm not sure
> the best way to handle channel errors.  I find that when I do a
> basicPublish and something goes wrong with communicating the message to
> RabbitMQ, I do not get told anything (in this case I was setting a UserID
> that did not match the logged-in id).  The next time I attempt to access
> the channel, I get an error that relates to what went wrong.  However that
> error will often be in a completely different part of the code, so the
> stack trace is basically useless.  Is there something I should call after I
> do a publish to verify that the message went through correctly?
> 
> thanks,
> 
> jesse c

> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


From mailing.list.viewer at gmail.com  Wed Nov  9 02:27:38 2011
From: mailing.list.viewer at gmail.com (Jon Jon)
Date: Tue, 8 Nov 2011 19:27:38 -0700
Subject: [rabbitmq-discuss] MCollective using a RabbitMQ Cluster
Message-ID: <CANSYJoK7d-fL+4j-ygcPCr0Z85_fyObprN0zaJZ8J9x976a4Bg@mail.gmail.com>

Hello All,

I'm looking to implement an MCollective platform in my data center.
I would like to use a High Availability RabbitMQ cluster as we already have
RabbitMQ
implementations and I feel that it is a far superior product to other MQs
on the market.

I understand that RabbitMQ doesn't work well over a WAN connection yet,
however,
with the Federation plugin becoming part of the distribution I believe this
may change
soon enough. Based on discussions I've read and participated in, I am a bit
confused
as to what is considered "WAN Clustering".  In my mind, two machines (or
five) on
one public /29 would not be considered to be connected over the WAN,
however, I was
directed to the Federation plugin when I brought up connecting two public
IPs.
Can someone please define "WAN Clustering", is it two machines connected on
separate
networks, in separate data centers?

My second question is about HA Clusters and MCollective specifically.

I drew this picture to illustrate my problem. http://i.imgur.com/Ms0mv.png

Basically, as I understand it, because MCollective is pointed to an IP, if
that machine is down,
there is no failover...  Maybe I'm just going about it wrong.

A co-worker (literally moments ago) pointed out RabbitMQ now has a HA
plugin that lays
on top of a Rabbit Cluster.  I'll investigate this further.

The wisdom of the MCollective group is to use ActiveMQ.  This is not an
acceptable solution.

In the mean time, I am way off here?  Does anyone have a suggestion to
solve the HA problem
with MCollective?


Thanks,
Jon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111108/b18a4368/attachment.htm>

From pavankumar.manikonda at schneider-electric.com  Wed Nov  9 05:50:10 2011
From: pavankumar.manikonda at schneider-electric.com (pavuuu)
Date: Tue, 8 Nov 2011 21:50:10 -0800 (PST)
Subject: [rabbitmq-discuss] asynchronous fetching messages from rabbitMQ
 queues
In-Reply-To: <20111024125737.GA4565@rabbitmq.com>
References: <32709671.post@talk.nabble.com>
	<20111024125737.GA4565@rabbitmq.com>
Message-ID: <32808823.post@talk.nabble.com>


Hello Matthew,

Calling BaiscQos on my channel helped me prefetch(say 100 messages) as
required.

But, when I call "consumer.Queue.Dequeue()" I get only 1 message. Do I have
to call Dequeue 100 times to fetch 100 messages? Cant I do it with one call
??



Matthew Sackman-3 wrote:
> 
> On Mon, Oct 24, 2011 at 04:51:35AM -0700, pavuuu wrote:
>> Is it possible to fetch messages asynchronously from rabbitMQ queues ?
> 
> Yes. Basic.consume will deliver msgs asynchronously to the client.
> 
>> Colz when I do two consecutive BasicConsume's on any particular queue, I
>> get
>> the same message twice.
> 
> Please provide code that demonstrates this - this should not happen.
> Multiple basic.consumes on the _same_ queue will make the queue deliver
> each message to one consumer (in the absence of requeuings).
> 
>> If I have to fetch the first two messages, I have to do
>> 
>> BasicConsume -- BasicAck -- BasicConsume -- BasicAck
> 
> No.
> 
> BasicConsume -> BasicDeliver -> BasicAck -> BasicDeliver -> BasicAck ...
> 
>> Also, will the client library supports fetching, say top 100, messages of
>> any particular queue. ?
> 
> Yes, you want want to use basic.qos and set the msg prefetch count to
> 100.
> 
> Matthew
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 
> 

-- 
View this message in context: http://old.nabble.com/asynchronous-fetching-messages-from-rabbitMQ-queues-tp32709671p32808823.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From toby.corkindale at strategicdata.com.au  Wed Nov  9 06:34:49 2011
From: toby.corkindale at strategicdata.com.au (Toby Corkindale)
Date: Wed, 09 Nov 2011 17:34:49 +1100
Subject: [rabbitmq-discuss] Are there any good Perl AMQP libraries?
In-Reply-To: <CA+w7haWGyxuFKq+eO9GyNKphYYGiSSOs4_U86mK+w4iY7Ra-tg@mail.gmail.com>
References: <4EB9CDB5.1080201@strategicdata.com.au>
	<CA+w7haWGyxuFKq+eO9GyNKphYYGiSSOs4_U86mK+w4iY7Ra-tg@mail.gmail.com>
Message-ID: <4EBA1F09.8040003@strategicdata.com.au>

On 09/11/11 12:19, Al Tobey wrote:
> > On Tue, Nov 8, 2011 at 4:47 PM, Toby Corkindale  wrote:
<snip>
> > However, I wondered if there are any decent AMQP libraries available
> > for Perl?
>
> I've seen, but not used Net::RabbitMQ.
> http://search.cpan.org/~jesus/Net--RabbitMQ-0.2.2/RabbitMQ.pm

Hey Al,
I didn't think to search for RabbitMQ, just AMQP. >.<

I've just been having a play with Net::RabbitMQ today, and am not 
getting a great feeling about it. The documentation is, at best, sparse, 
and in places simply incomplete.

It also seems to be missing any kind of 'wait for message' functionality.
ie. As far as I can tell, you need to do a busy-loop on get, which'll 
spin your CPU at 100% until a message comes in. Not ideal :/

I'm filing a bug with the author about that now - I think they need to 
add a method to expose amqp_simple_wait_frame() from the underlying C 
library.

Toby

From toby.corkindale at strategicdata.com.au  Wed Nov  9 06:39:51 2011
From: toby.corkindale at strategicdata.com.au (Toby Corkindale)
Date: Wed, 09 Nov 2011 17:39:51 +1100
Subject: [rabbitmq-discuss] Are there any good Perl AMQP libraries?
In-Reply-To: <4EBA1F09.8040003@strategicdata.com.au>
References: <4EB9CDB5.1080201@strategicdata.com.au>
	<CA+w7haWGyxuFKq+eO9GyNKphYYGiSSOs4_U86mK+w4iY7Ra-tg@mail.gmail.com>
	<4EBA1F09.8040003@strategicdata.com.au>
Message-ID: <4EBA2037.1000005@strategicdata.com.au>

On 09/11/11 17:34, Toby Corkindale wrote:
> On 09/11/11 12:19, Al Tobey wrote:
>> > On Tue, Nov 8, 2011 at 4:47 PM, Toby Corkindale wrote:
> <snip>
>> > However, I wondered if there are any decent AMQP libraries available
>> > for Perl?
>>
>> I've seen, but not used Net::RabbitMQ.
>> http://search.cpan.org/~jesus/Net--RabbitMQ-0.2.2/RabbitMQ.pm
>
> Hey Al,
> I didn't think to search for RabbitMQ, just AMQP. >.<
>
> I've just been having a play with Net::RabbitMQ today, and am not
> getting a great feeling about it. The documentation is, at best, sparse,
> and in places simply incomplete.
>
> It also seems to be missing any kind of 'wait for message' functionality.
> ie. As far as I can tell, you need to do a busy-loop on get, which'll
> spin your CPU at 100% until a message comes in. Not ideal :/
>
> I'm filing a bug with the author about that now - I think they need to
> add a method to expose amqp_simple_wait_frame() from the underlying C
> library.

Ah, wait, the recv() method in Net::RabbitMQ does what I want; it's just 
not clear from the documentation at all. :/

From therevoltingx at gmail.com  Wed Nov  9 06:55:38 2011
From: therevoltingx at gmail.com (Miguel Morales)
Date: Tue, 8 Nov 2011 22:55:38 -0800
Subject: [rabbitmq-discuss] Are there any good Perl AMQP libraries?
In-Reply-To: <4EBA2037.1000005@strategicdata.com.au>
References: <4EB9CDB5.1080201@strategicdata.com.au>
	<CA+w7haWGyxuFKq+eO9GyNKphYYGiSSOs4_U86mK+w4iY7Ra-tg@mail.gmail.com>
	<4EBA1F09.8040003@strategicdata.com.au>
	<4EBA2037.1000005@strategicdata.com.au>
Message-ID: <CAMq-y23FKHA+cp-wRqHkAyayta6TZYJU3OdMZ6q5BBN=5-NMuA@mail.gmail.com>

I've had a decent experience with combining POE, Component::Client::AMQP,
and Net::RabbitMQ.
You use the POE mechanism for creating an event loop.

On Tue, Nov 8, 2011 at 10:39 PM, Toby Corkindale <
toby.corkindale at strategicdata.com.au> wrote:

> On 09/11/11 17:34, Toby Corkindale wrote:
>
>> On 09/11/11 12:19, Al Tobey wrote:
>>
>>> > On Tue, Nov 8, 2011 at 4:47 PM, Toby Corkindale wrote:
>>>
>> <snip>
>>
>>> > However, I wondered if there are any decent AMQP libraries available
>>> > for Perl?
>>>
>>> I've seen, but not used Net::RabbitMQ.
>>> http://search.cpan.org/~jesus/**Net--RabbitMQ-0.2.2/RabbitMQ.**pm<http://search.cpan.org/~jesus/Net--RabbitMQ-0.2.2/RabbitMQ.pm>
>>>
>>
>> Hey Al,
>> I didn't think to search for RabbitMQ, just AMQP. >.<
>>
>> I've just been having a play with Net::RabbitMQ today, and am not
>> getting a great feeling about it. The documentation is, at best, sparse,
>> and in places simply incomplete.
>>
>> It also seems to be missing any kind of 'wait for message' functionality.
>> ie. As far as I can tell, you need to do a busy-loop on get, which'll
>> spin your CPU at 100% until a message comes in. Not ideal :/
>>
>> I'm filing a bug with the author about that now - I think they need to
>> add a method to expose amqp_simple_wait_frame() from the underlying C
>> library.
>>
>
> Ah, wait, the recv() method in Net::RabbitMQ does what I want; it's just
> not clear from the documentation at all. :/
>
> ______________________________**_________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>



-- 
~ Jeremiah:9:23-24
Android 2D MMORPG: http://solrpg.com/,
http://www.youtube.com/user/revoltingx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111108/26170d4a/attachment.htm>

From Simone.Busoli at ferrari.com  Wed Nov  9 10:01:34 2011
From: Simone.Busoli at ferrari.com (Busoli, Simone)
Date: Wed, 9 Nov 2011 10:01:34 +0000
Subject: [rabbitmq-discuss] .NET ConnetionParameters class
Message-ID: <88E590DC4586974D825FC82AE798294E52082A24@GSVCLU03.ges.ferlan.it>

The .NET client docs mention on page 5 the ConnectionParameters class but I don't think it exists anymore, if ever.

_________________________________________________________________________________________________________________
Questo messaggio e da intendersi esclusivamente ad uso del destinatario e puo contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non e il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione e 
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from 
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the 
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly 
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from 
your system.
_________________________________________________________________________________________________________________


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111109/8052d33f/attachment.htm>

From emile at rabbitmq.com  Wed Nov  9 10:19:33 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 09 Nov 2011 10:19:33 +0000
Subject: [rabbitmq-discuss] .NET ConnetionParameters class
In-Reply-To: <88E590DC4586974D825FC82AE798294E52082A24@GSVCLU03.ges.ferlan.it>
References: <88E590DC4586974D825FC82AE798294E52082A24@GSVCLU03.ges.ferlan.it>
Message-ID: <4EBA53B5.8070209@rabbitmq.com>

Hi Simon,

On 09/11/11 10:01, Busoli, Simone wrote:
> The .NET client docs mention on page 5 the ConnectionParameters class
> but I don?t think it exists anymore, if ever.

That class has not existed for a few years now. Thanks for letting us 
know - I'll get that updated.


-Emile

From simon at rabbitmq.com  Wed Nov  9 10:46:30 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 09 Nov 2011 10:46:30 +0000
Subject: [rabbitmq-discuss] Unicode Characters In AMQP Headers?
In-Reply-To: <20111109011944.GB4293@southbank.Home>
References: <1C7E61787A08F34BBBBD9E7A7CBC368B0A3C5759@EXMB02OSG.eclg.org>
	<20111109011944.GB4293@southbank.Home>
Message-ID: <4EBA5A06.1020005@rabbitmq.com>

On 09/11/11 01:19, Alexandru Scvor?ov wrote:
> The headers, queue names and exchange names are treated as binary
> strings by the broker, i.e. it doesn't ever try to decode them, so they
> can have whatever encoding you want.  It's up to the client applications
> to make sense of the binary content of the headers.

That's not quite true.

The broker will pretty much accept any binary, however in the AMQP spec 
they are defined to be UTF-8, so really that's what you should use - for 
example the management plugin is likely to be unhappy if they are not 
valid UTF-8.

Note that this does *not* apply to message bodies, which really are any 
binary content.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From rgilland1966 at gmail.com  Wed Nov  9 06:24:06 2011
From: rgilland1966 at gmail.com (Robert Gilland)
Date: Tue, 8 Nov 2011 22:24:06 -0800 (PST)
Subject: [rabbitmq-discuss] Server connections not closing
Message-ID: <1b88645e-26fe-45b5-bdb8-ad42e551f7e4@u24g2000pru.googlegroups.com>

Hi,

we cannot find out why our server connections are not closing.

There are no connections open on the client machine ( WinXP )

But server machine has all the below listed connections open
( CentOS6  64bit )

Client Software using "HabariSoft" library.

It seems to be an error with RabbitMQ version 2.6.1

What can we do?

See below netstat at server machine.

Kind Regards,

Robert.



root at akira ~]# netstat -n ?pan

Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address               Foreign
Address             State       PID/Program name
tcp        0      0 0.0.0.0:34719
0.0.0.0:*                   LISTEN      1048/beam
tcp        0      0 0.0.0.0:10000
0.0.0.0:*                   LISTEN      1065/perl
tcp        0      0 0.0.0.0:4369
0.0.0.0:*                   LISTEN      1014/epmd
tcp        0      0 0.0.0.0:22
0.0.0.0:*                   LISTEN      971/sshd
tcp        0      0 0.0.0.0:55672
0.0.0.0:*                   LISTEN      1048/beam
tcp        0      0 127.0.0.1:25
0.0.0.0:*                   LISTEN      992/sendmail: accep
tcp        0      0 127.0.0.1:39044
127.0.0.1:4369              ESTABLISHED 1048/beam
tcp        0      0 10.230.0.20:55672
10.230.0.110:1783           ESTABLISHED 1048/beam
tcp        0   1000 10.230.0.20:22
10.230.0.116:54833          ESTABLISHED 1148/sshd: root at pts
tcp        0      0 10.230.0.20:55672
10.230.0.110:4187           ESTABLISHED 1048/beam
tcp        0      0 10.230.0.20:55672
10.230.0.110:1781           ESTABLISHED 1048/beam
tcp        0      0 10.230.0.20:55672
10.230.0.110:1784           ESTABLISHED 1048/beam
tcp        0      0 127.0.0.1:4369
127.0.0.1:39044             ESTABLISHED 1014/epmd
tcp        0      0 10.230.0.20:55672
10.230.0.110:1785           ESTABLISHED 1048/beam
tcp        0      0 10.230.0.20:55672
10.230.0.110:1782           ESTABLISHED 1048/beam
tcp        0      0 :::
5672                     :::*                        LISTEN      1048/
beam
tcp        0      0 :::
61613                    :::*                        LISTEN      1048/
beam
tcp        0      0 :::
61614                    :::*                        LISTEN      1048/
beam
tcp        0      0 :::
22                       :::*                        LISTEN      971/
sshd
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1644     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1659     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1656     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1508     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4892     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4698     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1514     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4714     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1167     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1700     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1794     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1512     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4993     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4695     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1642     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4307     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1493     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1648     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4697     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1153     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1523     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4922     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1515     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4315     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4895     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1516     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1657     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4526     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4555     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1268     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1598     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4905     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4702     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1647     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4447     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1217     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1650     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4615     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4570     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4579     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1649     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1524     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1741     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4701     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4607     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4844     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4875     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1643     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1770     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1509     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4704     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1510     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4703     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1141     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1519     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4311     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4680     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4696     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1154     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1599     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1653     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4721     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1652     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1755     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4699     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4611     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4486     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1522     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4681     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1279     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4700     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1743     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:4552     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1513     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1658     ESTABLISHED 1048/beam
tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
10.232.5.90:1646     ESTABLISHED 1048/beam
udp        0      0 0.0.0.0:10000
0.0.0.0:*                               1065/perl
udp        0      0 10.230.0.20:123
0.0.0.0:*                               567/ntpd
udp        0      0 127.0.0.1:123
0.0.0.0:*                               567/ntpd
udp        0      0 0.0.0.0:123
0.0.0.0:*                               567/ntpd
udp        0      0 fe80::20c:
29ff:fe38:123     :::*                                    567/ntpd
udp        0      0 ::
1:123                     :::*                                    567/
ntpd
udp        0      0 :::
123                      :::*                                    567/
ntpd
Active UNIX domain sockets (servers and established)
Proto RefCnt Flags       Type       State         I-Node PID/Program
name    Path
unix  2      [ ACC ]     STREAM     LISTENING     9237   1/
init              /var/run/dbus/system_bus_socket
unix  2      [ ]         DGRAM                    7219   1/
init              /run/systemd/shutdownd
unix  12     [ ]         DGRAM                    7222   1/
init              /dev/log
unix  2      [ ]         DGRAM                    7291   1/
init              @/org/kernel/udev/udevd
unix  2      [ ACC ]     STREAM     LISTENING     7292   1/
init              /run/systemd/logger
unix  2      [ ]         DGRAM                    7108   1/
init              /run/systemd/notify
unix  2      [ ACC ]     STREAM     LISTENING     7110   1/
init              /run/systemd/private
unix  2      [ ]         DGRAM                    12801  1148/sshd:
root at pts
unix  2      [ ]         DGRAM                    11577  1047/su
unix  2      [ ]         DGRAM                    11453  1010/
sendmail: Queu
unix  2      [ ]         DGRAM                    11404  992/sendmail:
accep
unix  2      [ ]         DGRAM                    11352  1065/perl
unix  2      [ ]         DGRAM                    10398  918/auditd
unix  3      [ ]         STREAM     CONNECTED     9664   582/dbus-
daemon
unix  3      [ ]         STREAM     CONNECTED     9663   582/dbus-
daemon
unix  3      [ ]         STREAM     CONNECTED     9665   582/dbus-
daemon     /var/run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     9614   1/init
unix  2      [ ]         DGRAM                    9573   574/crond
unix  2      [ ]         DGRAM                    9567   1/init
unix  2      [ ]         DGRAM                    9566   567/ntpd
unix  2      [ ]         DGRAM                    7956   356/udevd
unix  3      [ ]         DGRAM                    7920   356/udevd
unix  3      [ ]         DGRAM                    7919   356

From steve at rabbitmq.com  Wed Nov  9 11:16:46 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Wed, 9 Nov 2011 11:16:46 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
Message-ID: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>

The RabbitMQ team is delighted to announce the release of RabbitMQ 2.7.0.

New features in this release include:

   - order preserved of messages re-queued for a consumer
   - plugins are included in the main rabbitmq-server release, with a new
     command, rabbitmq-plugins, to enable and disable them
   - clients accept a new "amqp" URI scheme for connections
   - significant performance improvements to connection creation, durable
     queues, message storage, and large numbers of consumers
   - thread-safe Java client consumer callbacks

See the attached release notes for more details.

Binary and source distributions of the new release can be found at
http://www.rabbitmq.com/download.html .

As always, we welcome any questions, bug reports, and other feedback on this
release, as well as general suggestions for features and enhancements in future
releases. Mail us on the RabbitMQ discussion list (signup on
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss and then
mail to rabbitmq-discuss at lists.rabbitmq.com), or contact us directly by
mailing to info at rabbitmq.com.

Regards,
              The RabbitMQ Team
              (http://www.rabbitmq.com)
----
Steve Powell
RabbitMQ, VMware
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: README-2.7.0.txt
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111109/116e9fd4/attachment.txt>

From michael.s.klishin at gmail.com  Wed Nov  9 11:46:08 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 9 Nov 2011 15:46:08 +0400
Subject: [rabbitmq-discuss] [announcement] Ruby amqp gem 0.8.3,
	amq-client 0.8.6 and amq-protocol 0.8.4 are released
Message-ID: <7CADC33E-EF90-457C-8DAC-FF14860268CA@gmail.com>

Ruby amqp gem 0.8.3 is released [1]. This is a bug fix release that updates dependencies to partially fix
a concurrency/framing issue [2]. Just for the record: yes, a more complete solution is to follow.

All users are recommended to upgrade. Have a good day.


1. https://rubygems.org/gems/amqp/versions/0.8.3
2. https://github.com/ruby-amqp/amq-client/issues/10

MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin


From Simone.Busoli at ferrari.com  Wed Nov  9 13:08:09 2011
From: Simone.Busoli at ferrari.com (Busoli, Simone)
Date: Wed, 9 Nov 2011 13:08:09 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
Message-ID: <88E590DC4586974D825FC82AE798294E52082C0D@GSVCLU03.ges.ferlan.it>

As a side note, in the User/API guide of the client libraries, it would be quite useful to be able to see just what has changed from the previous revision. To the naked eye is quite difficult to spot the differences.

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Steve Powell
Sent: mercoled? 9 novembre 2011 12:17
To: Rabbit-Mq Discuss-Mailing List
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released

The RabbitMQ team is delighted to announce the release of RabbitMQ 2.7.0.

New features in this release include:

   - order preserved of messages re-queued for a consumer
   - plugins are included in the main rabbitmq-server release, with a new
     command, rabbitmq-plugins, to enable and disable them
   - clients accept a new "amqp" URI scheme for connections
   - significant performance improvements to connection creation, durable
     queues, message storage, and large numbers of consumers
   - thread-safe Java client consumer callbacks

See the attached release notes for more details.

Binary and source distributions of the new release can be found at http://www.rabbitmq.com/download.html .

As always, we welcome any questions, bug reports, and other feedback on this release, as well as general suggestions for features and enhancements in future releases. Mail us on the RabbitMQ discussion list (signup on https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss and then mail to rabbitmq-discuss at lists.rabbitmq.com), or contact us directly by mailing to info at rabbitmq.com.

Regards,
              The RabbitMQ Team
              (http://www.rabbitmq.com)
----
Steve Powell
RabbitMQ, VMware

_________________________________________________________________________________________________________________
Questo messaggio ? da intendersi esclusivamente ad uso del destinatario e pu? contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non ? il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione ? 
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from 
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the 
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly 
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from 
your system.
_________________________________________________________________________________________________________________


From michael.s.klishin at gmail.com  Wed Nov  9 13:26:54 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 9 Nov 2011 17:26:54 +0400
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
Message-ID: <2DA34106-A447-4117-94F4-0B1542B1FEFE@gmail.com>

Steve Powell:

>  - plugins are included in the main rabbitmq-server release, with a new
>    command, rabbitmq-plugins, to enable and disable them

Does it mean that the old way of installing plugins will no longer work (or is deprecated)?

Thanks.

MK

From ekirpichov at gmail.com  Wed Nov  9 13:27:31 2011
From: ekirpichov at gmail.com (Eugene Kirpichov)
Date: Wed, 9 Nov 2011 17:27:31 +0400
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <88E590DC4586974D825FC82AE798294E52082C0D@GSVCLU03.ges.ferlan.it>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
	<88E590DC4586974D825FC82AE798294E52082C0D@GSVCLU03.ges.ferlan.it>
Message-ID: <CANVKUrV_0OHJgGfWK6vq2Vd2xkJ1tKysESdFAh4fTnKCH3Te-g@mail.gmail.com>

I'm very intrigued by the promise of higher performance for many consumers
with low prefetch counts - this is exactly my case.

How much of a performance increase should one expect, with respect to 2.6.1?
(I'm not able to replace the RabbitMQ instance on our production cluster
now and do benchmarks myself, so I'd like to know what to expect in advance)

On Wed, Nov 9, 2011 at 5:08 PM, Busoli, Simone <Simone.Busoli at ferrari.com>wrote:

> As a side note, in the User/API guide of the client libraries, it would be
> quite useful to be able to see just what has changed from the previous
> revision. To the naked eye is quite difficult to spot the differences.
>
> -----Original Message-----
> From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:
> rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Steve Powell
> Sent: mercoled? 9 novembre 2011 12:17
> To: Rabbit-Mq Discuss-Mailing List
> Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
>
> The RabbitMQ team is delighted to announce the release of RabbitMQ 2.7.0.
>
> New features in this release include:
>
>   - order preserved of messages re-queued for a consumer
>   - plugins are included in the main rabbitmq-server release, with a new
>     command, rabbitmq-plugins, to enable and disable them
>   - clients accept a new "amqp" URI scheme for connections
>   - significant performance improvements to connection creation, durable
>     queues, message storage, and large numbers of consumers
>   - thread-safe Java client consumer callbacks
>
> See the attached release notes for more details.
>
> Binary and source distributions of the new release can be found at
> http://www.rabbitmq.com/download.html .
>
> As always, we welcome any questions, bug reports, and other feedback on
> this release, as well as general suggestions for features and enhancements
> in future releases. Mail us on the RabbitMQ discussion list (signup on
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss and
> then mail to rabbitmq-discuss at lists.rabbitmq.com), or contact us
> directly by mailing to info at rabbitmq.com.
>
> Regards,
>              The RabbitMQ Team
>              (http://www.rabbitmq.com)
> ----
> Steve Powell
> RabbitMQ, VMware
>
>
> _________________________________________________________________________________________________________________
> Questo messaggio ? da intendersi esclusivamente ad uso del destinatario e
> pu? contenere informazioni che sono di natura privilegiata, confidenziale
> o non divulgabile secondo le leggi vigenti. Se il lettore del presente
> messaggio non ? il destinatario designato, o il dipendente/agente
> responsabile
> per la consegna del messaggio al destinatario designato, si informa che
> ogni disseminazione, distribuzione o copiatura di questa comunicazione ?
> strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se
> avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
> immediatamente a mezzo e-mail di risposta e successivamente di procedere
> alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
>
> _________________________________________________________________________________________________________________
> This message is intended only for the use of the addressee and may contain
> information that is privileged, confidential and exempt from
> disclosure under applicable law. If the reader of this message is not the
> intended recipient, or the employee or agent responsible for delivering the
> message to the intended recipient, you are hereby notified that any
> dissemination, distribution or copying of this communication is strictly
> prohibited. If you have received this e-mail in error, please notify us
> immediately by return e-mail and delete this e-mail and all attachments from
> your system.
>
> _________________________________________________________________________________________________________________
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>



-- 
Eugene Kirpichov
Principal Engineer, Mirantis Inc. http://www.mirantis.com/
Editor, http://fprog.ru/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111109/bcaed2b4/attachment.htm>

From Simone.Busoli at ferrari.com  Wed Nov  9 13:04:04 2011
From: Simone.Busoli at ferrari.com (Busoli, Simone)
Date: Wed, 9 Nov 2011 13:04:04 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
Message-ID: <88E590DC4586974D825FC82AE798294E52082BFD@GSVCLU03.ges.ferlan.it>

Hi, does "clients accept a new "amqp" URI scheme" mean that the Java/.NET/... clients are going to accept this URI in addition/instead of individual parameters?

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Steve Powell
Sent: mercoled? 9 novembre 2011 12:17
To: Rabbit-Mq Discuss-Mailing List
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released

The RabbitMQ team is delighted to announce the release of RabbitMQ 2.7.0.

New features in this release include:

   - order preserved of messages re-queued for a consumer
   - plugins are included in the main rabbitmq-server release, with a new
     command, rabbitmq-plugins, to enable and disable them
   - clients accept a new "amqp" URI scheme for connections
   - significant performance improvements to connection creation, durable
     queues, message storage, and large numbers of consumers
   - thread-safe Java client consumer callbacks

See the attached release notes for more details.

Binary and source distributions of the new release can be found at http://www.rabbitmq.com/download.html .

As always, we welcome any questions, bug reports, and other feedback on this release, as well as general suggestions for features and enhancements in future releases. Mail us on the RabbitMQ discussion list (signup on https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss and then mail to rabbitmq-discuss at lists.rabbitmq.com), or contact us directly by mailing to info at rabbitmq.com.

Regards,
              The RabbitMQ Team
              (http://www.rabbitmq.com)
----
Steve Powell
RabbitMQ, VMware

_________________________________________________________________________________________________________________
Questo messaggio ? da intendersi esclusivamente ad uso del destinatario e pu? contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non ? il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione ? 
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from 
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the 
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly 
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from 
your system.
_________________________________________________________________________________________________________________



From simon at rabbitmq.com  Wed Nov  9 13:48:22 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 09 Nov 2011 13:48:22 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <2DA34106-A447-4117-94F4-0B1542B1FEFE@gmail.com>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
	<2DA34106-A447-4117-94F4-0B1542B1FEFE@gmail.com>
Message-ID: <4EBA84A6.1060509@rabbitmq.com>

On 09/11/11 13:26, Michael Klishin wrote:
> Does it mean that the old way of installing plugins will no longer
> work (or is deprecated)?

The differences consist of:

* The plugins directory is now pre-populated with all our plugins. You 
can still install extra third party plugins there.

* Plugins will only be started if they have been enabled with 
"rabbitmq-plugins enable <plugin>"

So it's not really deprecated per se, but things have changed. Does this 
answer your question?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Wed Nov  9 13:50:57 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 09 Nov 2011 13:50:57 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <88E590DC4586974D825FC82AE798294E52082BFD@GSVCLU03.ges.ferlan.it>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
	<88E590DC4586974D825FC82AE798294E52082BFD@GSVCLU03.ges.ferlan.it>
Message-ID: <4EBA8541.5070108@rabbitmq.com>

On 09/11/11 13:04, Busoli, Simone wrote:
> Hi, does "clients accept a new "amqp" URI scheme" mean that the
> Java/.NET/... clients are going to accept this URI in
> addition/instead of individual parameters?

Yes. You can still use individual parameters, it's not deprecated.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From matthias at rabbitmq.com  Wed Nov  9 14:02:43 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 09 Nov 2011 14:02:43 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <CANVKUrV_0OHJgGfWK6vq2Vd2xkJ1tKysESdFAh4fTnKCH3Te-g@mail.gmail.com>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>	<88E590DC4586974D825FC82AE798294E52082C0D@GSVCLU03.ges.ferlan.it>
	<CANVKUrV_0OHJgGfWK6vq2Vd2xkJ1tKysESdFAh4fTnKCH3Te-g@mail.gmail.com>
Message-ID: <4EBA8803.2000905@rabbitmq.com>

Eugene,

On 09/11/11 13:27, Eugene Kirpichov wrote:
> I'm very intrigued by the promise of higher performance for many
> consumers with low prefetch counts - this is exactly my case.
>
> How much of a performance increase should one expect, with respect to 2.6.1?

I've seen a 30% improvement in some simple tests (small messages, low 
latency, prefetch=1, 8 consumers), with hipe compilation enabled. The 
figure is highly usage dependent, so YMMV.

Matthias.

From emile at rabbitmq.com  Wed Nov  9 14:08:24 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 09 Nov 2011 14:08:24 +0000
Subject: [rabbitmq-discuss] Server connections not closing
In-Reply-To: <1b88645e-26fe-45b5-bdb8-ad42e551f7e4@u24g2000pru.googlegroups.com>
References: <1b88645e-26fe-45b5-bdb8-ad42e551f7e4@u24g2000pru.googlegroups.com>
Message-ID: <4EBA8958.20406@rabbitmq.com>

Hi Robert,

On 09/11/11 06:24, Robert Gilland wrote:
> Hi,
> 
> we cannot find out why our server connections are not closing.
> 
> There are no connections open on the client machine ( WinXP )
> 
> But server machine has all the below listed connections open
> ( CentOS6  64bit )
> 
> Client Software using "HabariSoft" library.

> tcp        0      0 ::ffff:10.230.0.20:61613    ::ffff:
> 10.232.5.90:1644     ESTABLISHED 1048/beam

A quick scan of the HabariSoft documentation suggests that this is a
STOMP client, and the connections that remain open are STOMP ports
(61613). The included examples all end with

finally
 Connection.Close;
end;

Can you tell whether that succeeds in your case?

Is there any device on the network that intermediates between the broker
and client, and potentially keeping the server connections open? Do you
get the same issue if the broker and client run on the same server
(using localhost)?

Comparing a network trace on the client and the server sides might also
aid diagnosis.

Failing that you should contact the library author. If the problem turns
out to be caused by rabbit then we want to set that right, so please get
back to us if that is the case.


-Emile

From simon at rabbitmq.com  Wed Nov  9 14:12:24 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 09 Nov 2011 14:12:24 +0000
Subject: [rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
In-Reply-To: <4EB9CA70.5070107@omc-international.com.au>
References: <4EB9CA70.5070107@omc-international.com.au>
Message-ID: <4EBA8A48.2090305@rabbitmq.com>

On 09/11/11 00:33, Mihir Mone wrote:
> I keep getting "TypeError: point is undefined"

Hmm. Maybe you found a bug. Does this fix it?

http://www.rabbitmq.com/releases/plugins/v2.6.1/rabbitmq_shovel_management-2.6.1.1.ez

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From david at rabbitmq.com  Wed Nov  9 14:16:12 2011
From: david at rabbitmq.com (David Wragg)
Date: Wed, 09 Nov 2011 14:16:12 +0000
Subject: [rabbitmq-discuss] Stuck waiting for frame during
	amqp_basic_qos?
In-Reply-To: <CADED990.285BD%pdezwart@rubiconproject.com> (Pieter de Zwart's
	message of "Tue, 8 Nov 2011 16:01:25 -0600")
References: <CADED990.285BD%pdezwart@rubiconproject.com>
Message-ID: <yrv4clirpfkk3.fsf@dwragg.eng.vmware.com>

Hi Pieter,

Pieter de Zwart <pdezwart at rubiconproject.com> writes:
> Thanks for the pointer. I fixed that particular item, but as predicted, it
> did not resolve the issue. With a fresh perspective I dug in some more,
> and figured out that the culprit was calling amqp_basic_ack when no
> message was consumed. Somehow that created the situation whereby the next
> call to amqp_basic_qos got stuck.

I had a go at reproducing this from C code, with no luck so far.  See
below.

> If I write some very basic C code that replicates this behavior ? la
> rabbitmq-c/examples, do you think you can help me figure out what the hell
> im doing wrong? =)

Yes please.

Another thing that might help understand the cause is to use the tracer
provuided with the rabbitmq java client to see what the client and
server are saying to each other.  See
<http://www.rabbitmq.com/examples.html#tracer>.

Here's the relevant part of the tracer output for my test program:

1320847892203: <Tracer-3> ch#1 -> {#method<basic.ack>(delivery-tag=666, multiple=false),null,""}
1320847892203: <Tracer-3> ch#0 -> {#method<basic.qos>(prefetch-size=0, prefetch-count=1, global=false),null,""}
1320847892241: <Tracer-3> ch#1 <- {#method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - unknown delivery tag 666, class-id=60, method-id=80),null,""}
1320847892242: <Tracer-3> ch#0 <- {#method<connection.close>(reply-code=504, reply-text=CHANNEL_ERROR - unexpected method in connection state running, class-id=60, method-id=10),null,""}

So:

- My client program acks with a non-existent delivery tag.

- Before the server responds to that, the client sends the basic.qos

- Because of the delivery tag issue, the server sends a channel.close to
  signal the channel exception.

- The server now processes the basic.qos, and because the channel was in
  the wrong state (it is expecting a close-ok from the client), it
  signals a connection-level exception.

In my client program, the amqp_basic_qos call returns NULL when the
channel.close is received, to signal the error.  The details of that
error are available by calling amqp_get_rpc_reply on the connection.

David

-- 
David Wragg
Staff Engineer, RabbitMQ
VMware, Inc.

From simon at rabbitmq.com  Wed Nov  9 14:38:50 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 09 Nov 2011 14:38:50 +0000
Subject: [rabbitmq-discuss] MCollective using a RabbitMQ Cluster
In-Reply-To: <CANSYJoK7d-fL+4j-ygcPCr0Z85_fyObprN0zaJZ8J9x976a4Bg@mail.gmail.com>
References: <CANSYJoK7d-fL+4j-ygcPCr0Z85_fyObprN0zaJZ8J9x976a4Bg@mail.gmail.com>
Message-ID: <4EBA907A.8050306@rabbitmq.com>

On 09/11/11 02:27, Jon Jon wrote:
> Hello All,
>
> I'm looking to implement an MCollective platform in my data center.

Cool!

> I would like to use a High Availability RabbitMQ cluster as we already
> have RabbitMQ
> implementations and I feel that it is a far superior product to other
> MQs on the market.
>
> I understand that RabbitMQ doesn't work well over a WAN connection yet,
> however,

RabbitMQ *clustering* does not work well if the network can be 
partitioned. That's really what we mean by "avoid WAN clustering".

> with the Federation plugin becoming part of the distribution I believe
> this may change
> soon enough. Based on discussions I've read and participated in, I am a
> bit confused
> as to what is considered "WAN Clustering".  In my mind, two machines (or
> five) on
> one public /29 would not be considered to be connected over the WAN,

No, if they're on the same network segment then you should be safe.

> however, I was
> directed to the Federation plugin when I brought up connecting two
> public IPs.

This may have been a misunderstanding.

> Can someone please define "WAN Clustering", is it two machines connected
> on separate
> networks, in separate data centers?

Yes.

> Basically, as I understand it, because MCollective is pointed to an IP,
> if that machine is down,
> there is no failover...  Maybe I'm just going about it wrong.

You need to either:

* Make sure that your clients can connect to one of several machines, in 
case one goes down.

* Use an IP load balancer in front of the cluster.

> A co-worker (literally moments ago) pointed out RabbitMQ now has a HA
> plugin that lays
> on top of a Rabbit Cluster.  I'll investigate this further.

This mirrors queues across nodes in the cluster. Prior to 2.6.0 queues 
were always tied to one node in the cluster and could thus form a SPOF.

> The wisdom of the MCollective group is to use ActiveMQ.  This is not an
> acceptable solution.

Clearly ;-)

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From david at rabbitmq.com  Wed Nov  9 14:56:23 2011
From: david at rabbitmq.com (David Wragg)
Date: Wed, 09 Nov 2011 14:56:23 +0000
Subject: [rabbitmq-discuss] Stuck waiting for frame during
	amqp_basic_qos?
In-Reply-To: <yrv4clirpfkk3.fsf@dwragg.eng.vmware.com> (David Wragg's message
	of "Wed, 09 Nov 2011 14:16:12 +0000")
References: <CADED990.285BD%pdezwart@rubiconproject.com>
	<yrv4clirpfkk3.fsf@dwragg.eng.vmware.com>
Message-ID: <yrv4c8vnpfip4.fsf@dwragg.eng.vmware.com>

Ignore the trace in my last mail.  On closer inspection, I see that my
code was doing a basic.qos on channel 0.

With that corrected:

1320850428494: <Tracer-8> ch#1 -> {#method<basic.ack>(delivery-tag=666, multiple=false),null,""}
1320850428494: <Tracer-8> ch#1 -> {#method<basic.qos>(prefetch-size=0, prefetch-count=1, global=false),null,""}
1320850428533: <Tracer-8> ch#1 <- {#method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - unknown delivery tag 666, class-id=60, method-id=80),null,""}

- My client program acks with a non-existent delivery tag.

- Before the server responds to that, the client sends the basic.qos

- Because of the delivery tag issue, the server sends a channel.close to
  signal the channel exception.

In my client program, the amqp_basic_qos call returns NULL when the
channel.close is received, to signal the error.  The details of that
error are available by calling amqp_get_rpc_reply on the connection.

-- 
David Wragg
Staff Engineer, RabbitMQ
VMware, Inc.

From michael.s.klishin at gmail.com  Wed Nov  9 14:59:08 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 9 Nov 2011 18:59:08 +0400
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <4EBA84A6.1060509@rabbitmq.com>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
	<2DA34106-A447-4117-94F4-0B1542B1FEFE@gmail.com>
	<4EBA84A6.1060509@rabbitmq.com>
Message-ID: <2B19ACF8-DFD4-418A-B3A1-97A0E02BEE2B@gmail.com>

Simon MacMullen:

> * The plugins directory is now pre-populated with all our plugins. You can still install extra third party plugins there.
> 
> * Plugins will only be started if they have been enabled with "rabbitmq-plugins enable <plugin>"
> 
> So it's not really deprecated per se, but things have changed. Does this answer your question?

It does, thanks. I needed to update some Chef cookbooks that install RabbitMQ + plugins. This change makes this much easier to maintain.

MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin


From simon at rabbitmq.com  Wed Nov  9 15:01:43 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 09 Nov 2011 15:01:43 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <2B19ACF8-DFD4-418A-B3A1-97A0E02BEE2B@gmail.com>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
	<2DA34106-A447-4117-94F4-0B1542B1FEFE@gmail.com>
	<4EBA84A6.1060509@rabbitmq.com>
	<2B19ACF8-DFD4-418A-B3A1-97A0E02BEE2B@gmail.com>
Message-ID: <4EBA95D7.9000208@rabbitmq.com>

On 09/11/11 14:59, Michael Klishin wrote:
> It does, thanks. I needed to update some Chef cookbooks that install
> RabbitMQ + plugins. This change makes this much easier to maintain.

Cool. That was part of the point ;)

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From Marek.Cermak at Honeywell.com  Wed Nov  9 15:08:11 2011
From: Marek.Cermak at Honeywell.com (Cermak, Marek)
Date: Wed, 9 Nov 2011 16:08:11 +0100
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
Message-ID: <C19F278955DE32459441209A75FC1B2AD082EC@FR44EV808.global.ds.honeywell.com>

good job, thanks.
is there any document how does the order preservation work? Does it work
even for more consumers from one queue? in what way?

marek

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com
[mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Steve
Powell
Sent: Wednesday, November 09, 2011 12:17
To: Rabbit-Mq Discuss-Mailing List
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released

The RabbitMQ team is delighted to announce the release of RabbitMQ
2.7.0.

New features in this release include:

   - order preserved of messages re-queued for a consumer
   - plugins are included in the main rabbitmq-server release, with a
new
     command, rabbitmq-plugins, to enable and disable them
   - clients accept a new "amqp" URI scheme for connections
   - significant performance improvements to connection creation,
durable
     queues, message storage, and large numbers of consumers
   - thread-safe Java client consumer callbacks

See the attached release notes for more details.

Binary and source distributions of the new release can be found at
http://www.rabbitmq.com/download.html .

As always, we welcome any questions, bug reports, and other feedback on
this release, as well as general suggestions for features and
enhancements in future releases. Mail us on the RabbitMQ discussion list
(signup on
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss and
then mail to rabbitmq-discuss at lists.rabbitmq.com), or contact us
directly by mailing to info at rabbitmq.com.

Regards,
              The RabbitMQ Team
              (http://www.rabbitmq.com)
----
Steve Powell
RabbitMQ, VMware

From steve at rabbitmq.com  Wed Nov  9 15:09:51 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Wed, 9 Nov 2011 15:09:51 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <88E590DC4586974D825FC82AE798294E52082C0D@GSVCLU03.ges.ferlan.it>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
	<88E590DC4586974D825FC82AE798294E52082C0D@GSVCLU03.ges.ferlan.it>
Message-ID: <C575F3D7-26F2-4D2A-9C14-C2DECB98DDA8@rabbitmq.com>

On 9 Nov 2011, at 13:08, Busoli, Simone wrote:

> As a side note, in the User/API guide of the client libraries, it would be quite useful to be able to see just what has changed from the previous revision. To the naked eye is quite difficult to spot the differences.

This is quite a good point, and we can certainly look to do this,
but although it is quite easy to get detailed diff information from the code repositories
we currently don't have a way of easily generating this information
for the documentation.  It would be a mammoth task at present.

If anyone has any ideas for helping to do this, we would be all ears.

Steve Powell  (a big-eared bunny)
----------some definitions from the SPD----------
Rigatoni n. A prime-ministerial grin.
Nigella n. The next bottle-size up from a Nebuchadnezzar.
Homily adv. Rather like a frenchman.

From emile at rabbitmq.com  Wed Nov  9 15:26:42 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 09 Nov 2011 15:26:42 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <C19F278955DE32459441209A75FC1B2AD082EC@FR44EV808.global.ds.honeywell.com>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
	<C19F278955DE32459441209A75FC1B2AD082EC@FR44EV808.global.ds.honeywell.com>
Message-ID: <4EBA9BB2.7070408@rabbitmq.com>

Hi Marek,

On 09/11/11 15:08, Cermak, Marek wrote:
> good job, thanks.
> is there any document how does the order preservation work? Does it work
> even for more consumers from one queue? in what way?

The FAQ contains an entry that describes the new ordering guarantees for
a queue with one consumer:
http://www.rabbitmq.com/faq.html#message-ordering

The same guarantees do not hold in the presence of multiple consumers.

From chrisch at ecollege.com  Wed Nov  9 16:04:13 2011
From: chrisch at ecollege.com (Chris Chew)
Date: Wed, 9 Nov 2011 16:04:13 +0000
Subject: [rabbitmq-discuss] Unicode Characters In AMQP Headers?
In-Reply-To: <4EBA5A06.1020005@rabbitmq.com>
References: <1C7E61787A08F34BBBBD9E7A7CBC368B0A3C5759@EXMB02OSG.eclg.org>
	<20111109011944.GB4293@southbank.Home>, <4EBA5A06.1020005@rabbitmq.com>
Message-ID: <1C7E61787A08F34BBBBD9E7A7CBC368B0A3C5D61@EXMB02OSG.eclg.org>

> From: rabbitmq-discuss-bounces at lists.rabbitmq.com [rabbitmq-discuss-bounces at lists.rabbitmq.com] on behalf of > > Simon MacMullen [simon at rabbitmq.com]
> 
> On 09/11/11 01:19, Alexandru Scvor?ov wrote:
> > The headers, queue names and exchange names are treated as binary
> > strings by the broker, i.e. it doesn't ever try to decode them, so they
> > can have whatever encoding you want.  It's up to the client applications
> > to make sense of the binary content of the headers.
>?
> That's not quite true.
>?
> The broker will pretty much accept any binary, however in the AMQP spec
> they are defined to be UTF-8, so really that's what you should use - for
> example the management plugin is likely to be unhappy if they are not
> valid UTF-8.
>?
> Note that this does *not* apply to message bodies, which really are any
> binary content.

Great, thank you both for the information.  I'll be sure to use UTF-8 strings and will report any oddities I encounter.

Thanks!

-Chris

From steve at rabbitmq.com  Wed Nov  9 16:54:52 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Wed, 9 Nov 2011 16:54:52 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <4EBA9F74.60205@fitb.eu>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
	<88E590DC4586974D825FC82AE798294E52082C0D@GSVCLU03.ges.ferlan.it>
	<C575F3D7-26F2-4D2A-9C14-C2DECB98DDA8@rabbitmq.com>
	<4EBA9F74.60205@fitb.eu>
Message-ID: <E570E1FA-7ED6-4860-AA17-9DDC55251304@rabbitmq.com>

Thanks for your note. Please use the rabbitmq-discuss mailing list.

Unfortunately, we have a lot of different pieces of documentation, generated from
code changes, markdown, xml, docbook and so on (see below).  [A valid response to
this point is 'you can't get there from here.']

In my limited experience, docbook comes with other issues, but we should
properly look into this.

Thank you for pointing out the formatting problems in the NDocProc-generated
API guide for the C# .NET client. I have raised a bug for this.

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
Avoirdupois phr. 'Would you like peas with that?'
Abbey adj. Quite like an Abbe.
Definite phr. 'It's hard of hearing, I think.'
Modest n. The most mod.

On 9 Nov 2011, at 15:42, Emanuele Aliberti wrote:

> On 09/11/2011 16:09, Steve Powell wrote:
>> On 9 Nov 2011, at 13:08, Busoli, Simone wrote:
>> 
>>> As a side note, in the User/API guide of the client libraries, it would be quite useful to be able to see just what has changed from the previous revision. To the naked eye is quite difficult to spot the differences.
>> This is quite a good point, and we can certainly look to do this,
>> but although it is quite easy to get detailed diff information from the code repositories
>> we currently don't have a way of easily generating this information
>> for the documentation.  It would be a mammoth task at present.
>> 
>> If anyone has any ideas for helping to do this, we would be all ears.
> XML based documentation (DocBook?), with change traking editor?
> 
> Note: in "RabbitMQ .NET client library API guide", page range 2-7, text overflows.
> 
> 
> 


From steve at rabbitmq.com  Wed Nov  9 16:56:35 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Wed, 9 Nov 2011 16:56:35 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <CALrPf1710Gduz00-CBeX84L0kNiVm58RgFFfKFj=iHRJLecXxw@mail.gmail.com>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
	<CALrPf1710Gduz00-CBeX84L0kNiVm58RgFFfKFj=iHRJLecXxw@mail.gmail.com>
Message-ID: <5C736108-89FC-4BD5-AFD0-8F01FE8EC2EC@rabbitmq.com>

On 9 Nov 2011, at 14:56, Tarjei Romtveit wrote:
> Noticed that the amqp-client 2.7.0 package is not located in the central maven repo (16:00 CET) http://search.maven.org/#search%7Cga%7C1%7Camqp-client
> 
> Regards
> 
> T

Thank you for pointing this out. It appears that our Maven package generation step may have not
worked flawlessly. We are currently looking into this.

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
Avoirdupois phr. 'Would you like peas with that?'
Abbey adj. Quite like an Abbe.
Definite phr. 'It's hard of hearing, I think.'
Modest n. The most mod.


From matthias at rabbitmq.com  Wed Nov  9 17:35:10 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 09 Nov 2011 17:35:10 +0000
Subject: [rabbitmq-discuss] Unable to consume message from queue?
In-Reply-To: <32788702.post@talk.nabble.com>
References: <32788702.post@talk.nabble.com>
Message-ID: <4EBAB9CE.609@rabbitmq.com>

On 07/11/11 05:50, sameekmishra wrote:
> I am using rabbitmq server 2.1.0 using java client API i have published
> messages into queue,but i'm not able to consume those publish message from
> queue. i have checked details of following points using rabbitmqctl command:
>
> 1. list_queue
>
> ->   define queue is available in list.
>
> 2. message_unacknowledge
>
> ->  count 2 because i have publish two messages in queue those are
> unacknowledge.

Are you saying the 'messages_unacknowledged' count is 2? If so that 
means the messages have been sent to a consumer but not yet acknowledged.


Matthias.

From matthias at rabbitmq.com  Wed Nov  9 17:46:49 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 09 Nov 2011 17:46:49 +0000
Subject: [rabbitmq-discuss] Performance issue over time in a consumer
 using	basic qos (mirrored queues)
In-Reply-To: <CALrPf14YXFg3PmvQ8-c2vgsxkxLiLXR4syCJtRhDXEh3njCwTQ@mail.gmail.com>
References: <CALrPf14YXFg3PmvQ8-c2vgsxkxLiLXR4syCJtRhDXEh3njCwTQ@mail.gmail.com>
Message-ID: <4EBABC89.4020202@rabbitmq.com>

Tarjei,

On 08/11/11 14:11, Tarjei Romtveit wrote:
> 3. We have currently two brokers in a cluster
> 4. The queues are set up in mirrored (We can not lose any messages),
> durable and non-exclusive.

What do you mean by "mirrored"? Presumably not rabbit's active-active HA 
queue mirroring, since that only became available in 2.6.0 and you are 
running 2.5.1.

> Over time we see a larger performance decrease in consuming the messages
> from the broker. The consumer is deadly fast in the start. 1-2 ms per
> message. Then the retrieval gradually decreases to 25-26 ms per message.

At the risk of stating the obvious, the slow-down isn't just due to 
there being no more messages in the queue, right? Are you seeing a 
backlog build up? If so, is the server busy?


Regards,

Matthias.

From matthias at rabbitmq.com  Wed Nov  9 17:50:45 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 09 Nov 2011 17:50:45 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely
	replicated	queues
In-Reply-To: <20111107142240.GF6082@rabbitmq.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>	<20111107135014.GD6082@rabbitmq.com>	<CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>
	<20111107142240.GF6082@rabbitmq.com>
Message-ID: <4EBABD75.3020400@rabbitmq.com>

On 07/11/11 14:22, Matthew Sackman wrote:
> On Mon, Nov 07, 2011 at 02:15:23PM +0000, Ashley Brown wrote:
>> My issue here is that for this one queue, it claims to have more copies of
>> the queue than nodes in the cluster.
>
> Ahh. That's impressive. That's definitely a bug in the mgmt plugin

Can we get a screenshot of that, please?


Matthias.

From matthias at rabbitmq.com  Wed Nov  9 18:05:49 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 09 Nov 2011 18:05:49 +0000
Subject: [rabbitmq-discuss] asynchronous fetching messages from rabbitMQ
 queues
In-Reply-To: <32808823.post@talk.nabble.com>
References: <32709671.post@talk.nabble.com>	<20111024125737.GA4565@rabbitmq.com>
	<32808823.post@talk.nabble.com>
Message-ID: <4EBAC0FD.7000400@rabbitmq.com>

On 09/11/11 05:50, pavuuu wrote:
> But, when I call "consumer.Queue.Dequeue()" I get only 1 message. Do I have
> to call Dequeue 100 times to fetch 100 messages?

Yes, you do.

> Cant I do it with one call??

There may not be a 100 messages ready to be dequeued. In fact there may 
be none to start with. And then some may arrive. And then some more may 
arrive.

Do you want an api call that waits for n messages to arrive and then 
returns them in, say, an array?


Matthias.

From matthias at rabbitmq.com  Wed Nov  9 18:27:36 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 09 Nov 2011 18:27:36 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated
	queues
In-Reply-To: <CAGn3ETE2n8FW89yntBhV3aEpOTqVKO+4tWh3pc143RV5nsTqgg@mail.gmail.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>	<20111107135014.GD6082@rabbitmq.com>	<CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>	<20111107142240.GF6082@rabbitmq.com>	<4EBABD75.3020400@rabbitmq.com>
	<CAGn3ETE2n8FW89yntBhV3aEpOTqVKO+4tWh3pc143RV5nsTqgg@mail.gmail.com>
Message-ID: <4EBAC618.4080608@rabbitmq.com>

On 09/11/11 18:02, Ashley Brown wrote:
> See the Evernote link further up.

Ah, yes. Bug found. No doubt Simon will be along with a patch shortly.

Matthias.

From pdezwart at rubiconproject.com  Wed Nov  9 20:44:48 2011
From: pdezwart at rubiconproject.com (Pieter de Zwart)
Date: Wed, 9 Nov 2011 14:44:48 -0600
Subject: [rabbitmq-discuss] Stuck waiting for frame during
 amqp_basic_qos?
In-Reply-To: <yrv4c8vnpfip4.fsf@dwragg.eng.vmware.com>
Message-ID: <CAE025C2.2875A%pdezwart@rubiconproject.com>

I have managed to reproduce it using C code only. Caveat: this code is
really messy and leaks like a sieve.

Let me know what you think. And please don?t judge me =)

me




On 11/9/11 6:56 AM, "David Wragg" <david at rabbitmq.com> wrote:

>Ignore the trace in my last mail.  On closer inspection, I see that my
>code was doing a basic.qos on channel 0.
>
>With that corrected:
>
>1320850428494: <Tracer-8> ch#1 -> {#method<basic.ack>(delivery-tag=666,
>multiple=false),null,""}
>1320850428494: <Tracer-8> ch#1 -> {#method<basic.qos>(prefetch-size=0,
>prefetch-count=1, global=false),null,""}
>1320850428533: <Tracer-8> ch#1 <- {#method<channel.close>(reply-code=406,
>reply-text=PRECONDITION_FAILED - unknown delivery tag 666, class-id=60,
>method-id=80),null,""}
>
>- My client program acks with a non-existent delivery tag.
>
>- Before the server responds to that, the client sends the basic.qos
>
>- Because of the delivery tag issue, the server sends a channel.close to
>  signal the channel exception.
>
>In my client program, the amqp_basic_qos call returns NULL when the
>channel.close is received, to signal the error.  The details of that
>error are available by calling amqp_get_rpc_reply on the connection.
>
>-- 
>David Wragg
>Staff Engineer, RabbitMQ
>VMware, Inc.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: amqp_weird.c
Type: application/octet-stream
Size: 7057 bytes
Desc: amqp_weird.c
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111109/649b1e4b/attachment.obj>

From david at rabbitmq.com  Wed Nov  9 22:19:18 2011
From: david at rabbitmq.com (David Wragg)
Date: Wed, 09 Nov 2011 22:19:18 +0000
Subject: [rabbitmq-discuss] Stuck waiting for frame during
	amqp_basic_qos?
In-Reply-To: <CAE025C2.2875A%pdezwart@rubiconproject.com> (Pieter de Zwart's
	message of "Wed, 9 Nov 2011 14:44:48 -0600")
References: <CAE025C2.2875A%pdezwart@rubiconproject.com>
Message-ID: <yrv4cpqh1os61.fsf@dwragg.eng.vmware.com>

Hi Pieter,

Pieter de Zwart <pdezwart at rubiconproject.com> writes:
> I have managed to reproduce it using C code only. Caveat: this code is
> really messy and leaks like a sieve.
>
> Let me know what you think. And please don?t judge me =)

Thanks.  That was very helpful to work out what is going on here.

Here's the tracer output with your program:

[...]
1320874543711: <Tracer-0> ch#1 -> {#method<basic.ack>(delivery-tag=22,multiple=true),null,""}
1320874543711: <Tracer-0> ch#1 -> {#method<basic.qos>(prefetch-size=0,prefetch-count=3, global=false),null,""}
1320874543752: <Tracer-0> ch#1 <- {#method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - unknown delivery tag 22, class-id=60, method-id=80),null,""}
1320874543791: <Tracer-0> ch#1 -> {#method<basic.qos>(prefetch-size=0,prefetch-count=1, global=false),null,""}

The client sends the bad ack, and immediately follows up with the
basic.qos.  That first amqp_basic_qos call after the ack does return
NULL to indicate an error, although your program doesn't report that
error.

Then your program does another basic.qos.  And the server never replies
to it.  That's actually what the AMQP spec requires: Once a peer sends a
channel.close, it should ignore all frames on that channel except the
channel.close-ok indicating that the channel is fully closed.

However, librabbitmq never sends a channel.close-ok, and in fact provides
no way to do so.

That seems like a bug in librabbitmq to me.  But I'll have to have a
think about the best way to fix it.

In the meanwhile, you should always check for errors from API calls.
When you get an error, you should not re-use the relevant channel.  And
if your connection is potentially long-lived, that means that you should
probably close and re-open it.

-- 
David Wragg
Staff Engineer, RabbitMQ
VMware, Inc.

From pdezwart at rubiconproject.com  Wed Nov  9 22:46:19 2011
From: pdezwart at rubiconproject.com (Pieter de Zwart)
Date: Wed, 9 Nov 2011 16:46:19 -0600
Subject: [rabbitmq-discuss] Stuck waiting for frame during
 amqp_basic_qos?
In-Reply-To: <yrv4cpqh1os61.fsf@dwragg.eng.vmware.com>
Message-ID: <CAE0428F.287B2%pdezwart@rubiconproject.com>

Awesome! That makes a lot of sense. I will rejigger my code to check all
RPC calls, there really is no reason I did not do that earlier apart from
sheer laziness =)

Thanks!
me





On 11/9/11 2:19 PM, "David Wragg" <david at rabbitmq.com> wrote:

>Hi Pieter,
>
>Pieter de Zwart <pdezwart at rubiconproject.com> writes:
>> I have managed to reproduce it using C code only. Caveat: this code is
>> really messy and leaks like a sieve.
>>
>> Let me know what you think. And please don?t judge me =)
>
>Thanks.  That was very helpful to work out what is going on here.
>
>Here's the tracer output with your program:
>
>[...]
>1320874543711: <Tracer-0> ch#1 ->
>{#method<basic.ack>(delivery-tag=22,multiple=true),null,""}
>1320874543711: <Tracer-0> ch#1 ->
>{#method<basic.qos>(prefetch-size=0,prefetch-count=3,
>global=false),null,""}
>1320874543752: <Tracer-0> ch#1 <- {#method<channel.close>(reply-code=406,
>reply-text=PRECONDITION_FAILED - unknown delivery tag 22, class-id=60,
>method-id=80),null,""}
>1320874543791: <Tracer-0> ch#1 ->
>{#method<basic.qos>(prefetch-size=0,prefetch-count=1,
>global=false),null,""}
>
>The client sends the bad ack, and immediately follows up with the
>basic.qos.  That first amqp_basic_qos call after the ack does return
>NULL to indicate an error, although your program doesn't report that
>error.
>
>Then your program does another basic.qos.  And the server never replies
>to it.  That's actually what the AMQP spec requires: Once a peer sends a
>channel.close, it should ignore all frames on that channel except the
>channel.close-ok indicating that the channel is fully closed.
>
>However, librabbitmq never sends a channel.close-ok, and in fact provides
>no way to do so.
>
>That seems like a bug in librabbitmq to me.  But I'll have to have a
>think about the best way to fix it.
>
>In the meanwhile, you should always check for errors from API calls.
>When you get an error, you should not re-use the relevant channel.  And
>if your connection is potentially long-lived, that means that you should
>probably close and re-open it.
>
>-- 
>David Wragg
>Staff Engineer, RabbitMQ
>VMware, Inc.


From videlalvaro at gmail.com  Wed Nov  9 22:48:02 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Wed, 9 Nov 2011 23:48:02 +0100
Subject: [rabbitmq-discuss] Stuck waiting for frame during
	amqp_basic_qos?
In-Reply-To: <CAE0428F.287B2%pdezwart@rubiconproject.com>
References: <CAE0428F.287B2%pdezwart@rubiconproject.com>
Message-ID: <6369939A-94C9-4DAC-A083-097C99FD8E1A@gmail.com>

Pieter,

Just a bit off topic? where's the source code for this extension? What's the official repo?

Cheers,

Alvaro

On Nov 9, 2011, at 11:46 PM, Pieter de Zwart wrote:

> Awesome! That makes a lot of sense. I will rejigger my code to check all
> RPC calls, there really is no reason I did not do that earlier apart from
> sheer laziness =)
> 
> Thanks!
> me
> 
> 
> 
> 
> 
> On 11/9/11 2:19 PM, "David Wragg" <david at rabbitmq.com> wrote:
> 
>> Hi Pieter,
>> 
>> Pieter de Zwart <pdezwart at rubiconproject.com> writes:
>>> I have managed to reproduce it using C code only. Caveat: this code is
>>> really messy and leaks like a sieve.
>>> 
>>> Let me know what you think. And please don?t judge me =)
>> 
>> Thanks.  That was very helpful to work out what is going on here.
>> 
>> Here's the tracer output with your program:
>> 
>> [...]
>> 1320874543711: <Tracer-0> ch#1 ->
>> {#method<basic.ack>(delivery-tag=22,multiple=true),null,""}
>> 1320874543711: <Tracer-0> ch#1 ->
>> {#method<basic.qos>(prefetch-size=0,prefetch-count=3,
>> global=false),null,""}
>> 1320874543752: <Tracer-0> ch#1 <- {#method<channel.close>(reply-code=406,
>> reply-text=PRECONDITION_FAILED - unknown delivery tag 22, class-id=60,
>> method-id=80),null,""}
>> 1320874543791: <Tracer-0> ch#1 ->
>> {#method<basic.qos>(prefetch-size=0,prefetch-count=1,
>> global=false),null,""}
>> 
>> The client sends the bad ack, and immediately follows up with the
>> basic.qos.  That first amqp_basic_qos call after the ack does return
>> NULL to indicate an error, although your program doesn't report that
>> error.
>> 
>> Then your program does another basic.qos.  And the server never replies
>> to it.  That's actually what the AMQP spec requires: Once a peer sends a
>> channel.close, it should ignore all frames on that channel except the
>> channel.close-ok indicating that the channel is fully closed.
>> 
>> However, librabbitmq never sends a channel.close-ok, and in fact provides
>> no way to do so.
>> 
>> That seems like a bug in librabbitmq to me.  But I'll have to have a
>> think about the best way to fix it.
>> 
>> In the meanwhile, you should always check for errors from API calls.
>> When you get an error, you should not re-use the relevant channel.  And
>> if your connection is potentially long-lived, that means that you should
>> probably close and re-open it.
>> 
>> -- 
>> David Wragg
>> Staff Engineer, RabbitMQ
>> VMware, Inc.
> 
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

Sent form my Nokia 1100




From mihirm at omc-international.com.au  Wed Nov  9 23:39:15 2011
From: mihirm at omc-international.com.au (Mihir Mone)
Date: Thu, 10 Nov 2011 07:39:15 +0800
Subject: [rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
In-Reply-To: <4EBA8A48.2090305@rabbitmq.com>
References: <4EB9CA70.5070107@omc-international.com.au>
	<4EBA8A48.2090305@rabbitmq.com>
Message-ID: <4EBB0F23.7030601@omc-international.com.au>

Hi Simon,

Nope, that doesn't seem to work. Attached is the error displayed on the 
Web UI. I have removed the actual paths for the key, cert and cacert 
files for security reasons. Again the shovel functionality is still 
working with the same config file.

Cheers,
Mihir

On 9/11/2011 10:12 PM, Simon MacMullen wrote:
> On 09/11/11 00:33, Mihir Mone wrote:
>> I keep getting "TypeError: point is undefined"
>
> Hmm. Maybe you found a bug. Does this fix it?
>
> http://www.rabbitmq.com/releases/plugins/v2.6.1/rabbitmq_shovel_management-2.6.1.1.ez 
>
>
> Cheers, Simon
>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: error.txt
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/a3c7cf49/attachment.txt>

From pdezwart at rubiconproject.com  Thu Nov 10 00:34:23 2011
From: pdezwart at rubiconproject.com (Pieter de Zwart)
Date: Wed, 9 Nov 2011 18:34:23 -0600
Subject: [rabbitmq-discuss] Stuck waiting for frame during
 amqp_basic_qos?
In-Reply-To: <6369939A-94C9-4DAC-A083-097C99FD8E1A@gmail.com>
Message-ID: <CAE05BAF.287ED%pdezwart@rubiconproject.com>

The source code for the extension is in the PECL SVN repository:
https://svn.php.net/repository/pecl/amqp

We are currently working on the 1.0 release, which has a much different
signature. That code is mainline:
https://svn.php.net/repository/pecl/amqp/trunk

I have a bunch of documentation pending that I can send you as well if you
are interested. I would rather bypass the list though since it is a large
attachment.

me




On 11/9/11 2:48 PM, "Alvaro Videla" <videlalvaro at gmail.com> wrote:

>Pieter,
>
>Just a bit off topic? where's the source code for this extension? What's
>the official repo?
>
>Cheers,
>
>Alvaro
>
>On Nov 9, 2011, at 11:46 PM, Pieter de Zwart wrote:
>
>> Awesome! That makes a lot of sense. I will rejigger my code to check all
>> RPC calls, there really is no reason I did not do that earlier apart
>>from
>> sheer laziness =)
>> 
>> Thanks!
>> me
>> 
>> 
>> 
>> 
>> 
>> On 11/9/11 2:19 PM, "David Wragg" <david at rabbitmq.com> wrote:
>> 
>>> Hi Pieter,
>>> 
>>> Pieter de Zwart <pdezwart at rubiconproject.com> writes:
>>>> I have managed to reproduce it using C code only. Caveat: this code is
>>>> really messy and leaks like a sieve.
>>>> 
>>>> Let me know what you think. And please don?t judge me =)
>>> 
>>> Thanks.  That was very helpful to work out what is going on here.
>>> 
>>> Here's the tracer output with your program:
>>> 
>>> [...]
>>> 1320874543711: <Tracer-0> ch#1 ->
>>> {#method<basic.ack>(delivery-tag=22,multiple=true),null,""}
>>> 1320874543711: <Tracer-0> ch#1 ->
>>> {#method<basic.qos>(prefetch-size=0,prefetch-count=3,
>>> global=false),null,""}
>>> 1320874543752: <Tracer-0> ch#1 <-
>>>{#method<channel.close>(reply-code=406,
>>> reply-text=PRECONDITION_FAILED - unknown delivery tag 22, class-id=60,
>>> method-id=80),null,""}
>>> 1320874543791: <Tracer-0> ch#1 ->
>>> {#method<basic.qos>(prefetch-size=0,prefetch-count=1,
>>> global=false),null,""}
>>> 
>>> The client sends the bad ack, and immediately follows up with the
>>> basic.qos.  That first amqp_basic_qos call after the ack does return
>>> NULL to indicate an error, although your program doesn't report that
>>> error.
>>> 
>>> Then your program does another basic.qos.  And the server never replies
>>> to it.  That's actually what the AMQP spec requires: Once a peer sends
>>>a
>>> channel.close, it should ignore all frames on that channel except the
>>> channel.close-ok indicating that the channel is fully closed.
>>> 
>>> However, librabbitmq never sends a channel.close-ok, and in fact
>>>provides
>>> no way to do so.
>>> 
>>> That seems like a bug in librabbitmq to me.  But I'll have to have a
>>> think about the best way to fix it.
>>> 
>>> In the meanwhile, you should always check for errors from API calls.
>>> When you get an error, you should not re-use the relevant channel.  And
>>> if your connection is potentially long-lived, that means that you
>>>should
>>> probably close and re-open it.
>>> 
>>> -- 
>>> David Wragg
>>> Staff Engineer, RabbitMQ
>>> VMware, Inc.
>> 
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>Sent form my Nokia 1100
>
>
>


From mailing.list.viewer at gmail.com  Thu Nov 10 00:57:29 2011
From: mailing.list.viewer at gmail.com (Jon Jon)
Date: Wed, 9 Nov 2011 17:57:29 -0700
Subject: [rabbitmq-discuss] For what applications are you using RabbitMQ?
Message-ID: <CANSYJo+jkWgy3NQCyYjyhjDHJYt8DYeQmZ3p0QrD2MzUS+oyig@mail.gmail.com>

Hello All,

I have just recently begun my foray into the world of enterprise class
message queuing.
To be honest, it's a bit intimidating at first, but that feeling is quickly
overwhelmed with excitement and wonder. :)
There is so much to learn!  But message queuing really seems to be the way
to go for scalable, distributed workloads.
(I have been trying to get a Kerrighed cluster up and running and had been
only mildly successful
when I started a parallel MCollective project using RabbitMQ, and thus, the
introduction to Rabbit)

Anyway, with the seemingly limitless applications for Message Queuing,
I'm really curious as to what everyone is using their message queues to do
and how they have them configured,

would anyone care to share their setup(s)?

Thanks, and I look forward to reading your responses.
Jon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111109/ae13d9c7/attachment.htm>

From jasonjwwilliams at gmail.com  Thu Nov 10 01:18:36 2011
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 9 Nov 2011 18:18:36 -0700
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <CAHZAEpe17=2TxYdLbn3TPFiO6GLohT9UUZkh-B0rqk-s7n+pyg@mail.gmail.com>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>
	<2DA34106-A447-4117-94F4-0B1542B1FEFE@gmail.com>
	<4EBA84A6.1060509@rabbitmq.com>
	<CAHZAEpe17=2TxYdLbn3TPFiO6GLohT9UUZkh-B0rqk-s7n+pyg@mail.gmail.com>
Message-ID: <CAHZAEpcCcQ3r9+637stSJEHxRKMYKv2rrgX+w0uZoH35Jucp-Q@mail.gmail.com>

Hey Simon,


> * Plugins will only be started if they have been enabled with
> "rabbitmq-plugins enable <plugin>"


Is that the only way to enable a plugin, or can it also be done from the
config file?

-J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111109/e9e2f7ab/attachment.htm>

From toby.corkindale at strategicdata.com.au  Thu Nov 10 03:49:53 2011
From: toby.corkindale at strategicdata.com.au (Toby Corkindale)
Date: Thu, 10 Nov 2011 14:49:53 +1100
Subject: [rabbitmq-discuss] temp-queues in STOMP adaptor - missing
	subscription header
Message-ID: <4EBB49E1.7090109@strategicdata.com.au>

Hi,
I've discovered that the /temp-queue/ feature in rabbitmq's stomp 
adaptor causes a problem with at least one STOMP library 
(Net::STOMP::Client).

This is because the STOMP specification says that a MESSAGE frame must 
include a "subscription" header.

However, messages sent via a temp-queue do not have this header set.
I can understand why not - it's meaningless - however libraries which 
insist on frames strictly matching the specification will throw an error 
here.

-Toby

From rgilland1966 at gmail.com  Thu Nov 10 04:31:44 2011
From: rgilland1966 at gmail.com (Robert Gilland)
Date: Wed, 9 Nov 2011 20:31:44 -0800 (PST)
Subject: [rabbitmq-discuss] Server connections not closing
In-Reply-To: <4EBA8958.20406@rabbitmq.com>
References: <1b88645e-26fe-45b5-bdb8-ad42e551f7e4@u24g2000pru.googlegroups.com>
	<4EBA8958.20406@rabbitmq.com>
Message-ID: <b2a63d75-6175-42a8-9f03-fae5d1df823a@m26g2000prn.googlegroups.com>



>On Nov 10, 12:08?am, Emile Joubert <em... at rabbitmq.com> wrote:

> Can you tell whether that succeeds in your case?
>

Yes I am closing the connection correctly. I have verified this with a
counter up and down based on connect/disconnect calls.


> Is there any device on the network that intermediates between the broker
> and client, and potentially keeping the server connections open?

Yes There are 4 hops on the traceroute between the client and server
machine.
according to our network guy. So it is failing on the WAN.

> Do you
> get the same issue if the broker and client run on the same server
> (using localhost)?
>

On local LAN between my machine and the server machine. all
connections
are being closed successfully.


> Comparing a network trace on the client and the server sides might also
> aid diagnosis.

There are 4 hops between client and server machine in this case fails
to close connections.
Testing when client is on same LAN as server ( 1 hop )  closes
connections as expected.

>
> Failing that you should contact the library author.

In constant communications with the library author.

There must be some process not happening to close a connection at the
RabbitMQ server machine.
Something must be failing to get across the network. so the system is
failing to close it's connections.

Not being a network guy myself. I am simply guessing.

Kind Regards,

Robert.

From toby.corkindale at strategicdata.com.au  Thu Nov 10 04:33:03 2011
From: toby.corkindale at strategicdata.com.au (Toby Corkindale)
Date: Thu, 10 Nov 2011 15:33:03 +1100
Subject: [rabbitmq-discuss] "Processing error" on server with STOMP
	reply-queues on 2.7.0
Message-ID: <4EBB53FF.90201@strategicdata.com.au>

Hi,
I've hit another issue with the temp-queue/reply-queue functionality in 
rabbitmq's stomp adapter.

I basically just wrote a couple of little apps that ping a message back 
and forth between each other, using the /temp-queue stuff in the 
reply-to fields.

The first message goes through, but after that the server kicks me off, 
and reports:

=ERROR REPORT==== 10-Nov-2011::04:25:53 ===
STOMP error frame sent:
Message: "Processing error"
Detail: "Processing error\n"
Server private detail: {badarg,
                            [{erlang,list_to_binary,
                                 [<<"amq.gen-X4QkaphR9pZCvDYz5aNXKg==">>]},
                             {rabbit_stomp_frame,binary_header,2},
                             {rabbit_stomp_frame,binary_header,3},
                             {rabbit_stomp_util,message_properties,1},
                             {rabbit_stomp_processor,do_send,4},
                             {rabbit_stomp_processor,process_request,3},
                             {gen_server2,handle_msg,2},
                             {proc_lib,wake_up,3}]}




I'm pretty sure I'm sending valid messages to the server, so I'm not 
sure what's going on here.
Any thoughts?

Thanks,
Toby

From pavankumar.manikonda at schneider-electric.com  Thu Nov 10 05:08:27 2011
From: pavankumar.manikonda at schneider-electric.com (pavuuu)
Date: Wed, 9 Nov 2011 21:08:27 -0800 (PST)
Subject: [rabbitmq-discuss] asynchronous fetching messages from rabbitMQ
 queues
In-Reply-To: <4EBAC0FD.7000400@rabbitmq.com>
References: <32709671.post@talk.nabble.com>
	<20111024125737.GA4565@rabbitmq.com>
	<32808823.post@talk.nabble.com> <4EBAC0FD.7000400@rabbitmq.com>
Message-ID: <32816304.post@talk.nabble.com>


If there are no messages to be dequeued, the call has to get blocked till a
message arrives.

If there are messages (say only 10) in the queue the call should not get
blocked until it reaches the prefetch(say 100 messages).


Matthias Radestock-3 wrote:
> 
> On 09/11/11 05:50, pavuuu wrote:
>> But, when I call "consumer.Queue.Dequeue()" I get only 1 message. Do I
>> have
>> to call Dequeue 100 times to fetch 100 messages?
> 
> Yes, you do.
> 
>> Cant I do it with one call??
> 
> There may not be a 100 messages ready to be dequeued. In fact there may 
> be none to start with. And then some may arrive. And then some more may 
> arrive.
> 
> Do you want an api call that waits for n messages to arrive and then 
> returns them in, say, an array?
> 
> 
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 
> 

-- 
View this message in context: http://old.nabble.com/asynchronous-fetching-messages-from-rabbitMQ-queues-tp32709671p32816304.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From toby.corkindale at strategicdata.com.au  Thu Nov 10 05:50:50 2011
From: toby.corkindale at strategicdata.com.au (Toby Corkindale)
Date: Thu, 10 Nov 2011 16:50:50 +1100
Subject: [rabbitmq-discuss] "Processing error" on server with STOMP
 reply-queues on 2.7.0
In-Reply-To: <4EBB53FF.90201@strategicdata.com.au>
References: <4EBB53FF.90201@strategicdata.com.au>
Message-ID: <4EBB663A.30503@strategicdata.com.au>

By the way - a bit more info I've worked out here..

The error occurs if I try to send multiple messages using the same 
reply-to temporary address.

ie. Something like this:

SEND
destination:/some/where
reply-to:/temp-queue/foo

SEND
destination:/some/where/else
reply-to:/temp-queue/foo


Is that meant to work or not?
I realise it's not quite the intended use of the /temp-queue/ 
functionality, but I thought it would be OK.

If I change the above to send to /temp-queue/foo1 and then 
/temp-queue/foo2 it all works as expected.


I've changed my code to result in something like this instead:

SUBSCRIBE
destination:/exchange/amq.direct/${unique_id}

SEND
destination:/some/where
reply-to:/exchange/amq.direct/${unique_id}

SEND
destination:/some/where/else
reply-to:/exchange/amq.direct/${unique_id}


As this has the desired effect of receiving messages just to me, and 
disposing of the messages if I've disappeared.

However, I thought the "processing error" might still be a bug in Rabbit?

-Toby

On 10/11/11 15:33, Toby Corkindale wrote:
> Hi,
> I've hit another issue with the temp-queue/reply-queue functionality in
> rabbitmq's stomp adapter.
>
> I basically just wrote a couple of little apps that ping a message back
> and forth between each other, using the /temp-queue stuff in the
> reply-to fields.
>
> The first message goes through, but after that the server kicks me off,
> and reports:
>
> =ERROR REPORT==== 10-Nov-2011::04:25:53 ===
> STOMP error frame sent:
> Message: "Processing error"
> Detail: "Processing error\n"
> Server private detail: {badarg,
> [{erlang,list_to_binary,
> [<<"amq.gen-X4QkaphR9pZCvDYz5aNXKg==">>]},
> {rabbit_stomp_frame,binary_header,2},
> {rabbit_stomp_frame,binary_header,3},
> {rabbit_stomp_util,message_properties,1},
> {rabbit_stomp_processor,do_send,4},
> {rabbit_stomp_processor,process_request,3},
> {gen_server2,handle_msg,2},
> {proc_lib,wake_up,3}]}
>
>
>
>
> I'm pretty sure I'm sending valid messages to the server, so I'm not
> sure what's going on here.
> Any thoughts?
>
> Thanks,
> Toby
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


-- 
.signature

From matthias at rabbitmq.com  Thu Nov 10 06:13:53 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 10 Nov 2011 06:13:53 +0000
Subject: [rabbitmq-discuss] asynchronous fetching messages from rabbitMQ
 queues
In-Reply-To: <32816304.post@talk.nabble.com>
References: <32709671.post@talk.nabble.com>	<20111024125737.GA4565@rabbitmq.com>	<32808823.post@talk.nabble.com>
	<4EBAC0FD.7000400@rabbitmq.com> <32816304.post@talk.nabble.com>
Message-ID: <4EBB6BA1.3000709@rabbitmq.com>

On 10/11/11 05:08, pavuuu wrote:
>
> If there are no messages to be dequeued, the call has to get blocked till a
> message arrives.
>
> If there are messages (say only 10) in the queue the call should not get
> blocked until it reaches the prefetch(say 100 messages).

So you want a DequeueEverythingButWaitIfThereIsNothingThere() ?

That should be straightforward to implement as a helper function. We 
could add it to the library, but I am curious about the use case here - 
I would have thought that most apps process messages individual rather 
than in blocks.

Btw, you do realise that the Dequeue() operation is client-side only, 
right? i.e. it is simply manipulating a client side buffer which is 
filled as and when the client receives a message from the server.

Matthias.

From matthias at rabbitmq.com  Thu Nov 10 06:28:18 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 10 Nov 2011 06:28:18 +0000
Subject: [rabbitmq-discuss] "Processing error" on server with STOMP
 reply-queues on 2.7.0
In-Reply-To: <4EBB663A.30503@strategicdata.com.au>
References: <4EBB53FF.90201@strategicdata.com.au>
	<4EBB663A.30503@strategicdata.com.au>
Message-ID: <4EBB6F02.1010708@rabbitmq.com>

Toby,

On 10/11/11 05:50, Toby Corkindale wrote:
> The error occurs if I try to send multiple messages using the same
> reply-to temporary address.
>
> ie. Something like this:
>
> SEND
> destination:/some/where
> reply-to:/temp-queue/foo
>
> SEND
> destination:/some/where/else
> reply-to:/temp-queue/foo
>
>
> Is that meant to work or not?

Yes it is. Alas there is a bug, so it doesn't.

Matthias.

From lionel.cons at cern.ch  Thu Nov 10 06:36:58 2011
From: lionel.cons at cern.ch (Lionel Cons)
Date: Thu, 10 Nov 2011 07:36:58 +0100
Subject: [rabbitmq-discuss] temp-queues in STOMP adaptor - missing
	subscription header
In-Reply-To: <4EBB49E1.7090109@strategicdata.com.au>
References: <4EBB49E1.7090109@strategicdata.com.au>
Message-ID: <20155.28938.36955.534278@mail.cern.ch>

Toby Corkindale writes:
 > I've discovered that the /temp-queue/ feature in rabbitmq's stomp 
 > adaptor causes a problem with at least one STOMP library 
 > (Net::STOMP::Client).
 > 
 > This is because the STOMP specification says that a MESSAGE frame must 
 > include a "subscription" header.
 > 
 > However, messages sent via a temp-queue do not have this header set.
 > I can understand why not - it's meaningless - however libraries which 
 > insist on frames strictly matching the specification will throw an error 
 > here.

Toby,

Indeed, Net::STOMP::Client checks that the "subscription" header is
set, as described in the STOMP 1.1 spec.

Since RabbitMQ automatically creates a new subscription (without an
explicit SUBSCRIBE frame) because of the presence of the
reply-to:/temp-queue/foo header in a SEND frame, it would make sense
to use this value (/temp-queue/foo) as the subscription id. After all,
the purpose of this header is to match a received message with
something that the client initiated.

In any case, you can tell Net::STOMP::Client to be less strict about
protocol validation by tuning $Net::STOMP::Client::Frame::CheckLevel.

Cheers,

Lionel

From toby.corkindale at strategicdata.com.au  Thu Nov 10 06:40:02 2011
From: toby.corkindale at strategicdata.com.au (Toby Corkindale)
Date: Thu, 10 Nov 2011 17:40:02 +1100
Subject: [rabbitmq-discuss] temp-queues in STOMP adaptor - missing
	subscription header
In-Reply-To: <20155.28938.36955.534278@mail.cern.ch>
References: <4EBB49E1.7090109@strategicdata.com.au>
	<20155.28938.36955.534278@mail.cern.ch>
Message-ID: <4EBB71C2.5010001@strategicdata.com.au>

On 10/11/11 17:36, Lionel Cons wrote:
> Toby Corkindale writes:
>   >  I've discovered that the /temp-queue/ feature in rabbitmq's stomp
>   >  adaptor causes a problem with at least one STOMP library
>   >  (Net::STOMP::Client).
>   >
>   >  This is because the STOMP specification says that a MESSAGE frame must
>   >  include a "subscription" header.
>   >
>   >  However, messages sent via a temp-queue do not have this header set.
>   >  I can understand why not - it's meaningless - however libraries which
>   >  insist on frames strictly matching the specification will throw an error
>   >  here.
>
> Toby,
>
> Indeed, Net::STOMP::Client checks that the "subscription" header is
> set, as described in the STOMP 1.1 spec.
>
> Since RabbitMQ automatically creates a new subscription (without an
> explicit SUBSCRIBE frame) because of the presence of the
> reply-to:/temp-queue/foo header in a SEND frame, it would make sense
> to use this value (/temp-queue/foo) as the subscription id. After all,
> the purpose of this header is to match a received message with
> something that the client initiated.

I agree, it seems to make sense that RMQ should still set that field. 
Maybe it was just an oversight in the temp-queue code?


> In any case, you can tell Net::STOMP::Client to be less strict about
> protocol validation by tuning $Net::STOMP::Client::Frame::CheckLevel.

Ah, I adjusted it this way:

$Net::STOMP::Client::Protocol::FieldFlags{"1.1"}{MESSAGE}{"subscription"} = 
FLAG_FIELD_OPTIONAL;

From michael.justin at gmx.net  Thu Nov 10 06:40:07 2011
From: michael.justin at gmx.net (Michael Justin)
Date: Thu, 10 Nov 2011 07:40:07 +0100
Subject: [rabbitmq-discuss] temp-queues in STOMP adaptor - missing
	subscription header
In-Reply-To: <4EBB49E1.7090109@strategicdata.com.au>
References: <4EBB49E1.7090109@strategicdata.com.au>
Message-ID: <j9frka$dnl$3@dough.gmane.org>

Am 10.11.2011 04:49, Toby Corkindale wrote:
> Hi,
> I've discovered that the /temp-queue/ feature in rabbitmq's stomp
> adaptor causes a problem with at least one STOMP library
> (Net::STOMP::Client).
>
> This is because the STOMP specification says that a MESSAGE frame must
> include a "subscription" header.
>
> However, messages sent via a temp-queue do not have this header set.
> I can understand why not - it's meaningless - however libraries which
> insist on frames strictly matching the specification will throw an error
> here.

I think it is meaningless only when a client has only one active 
subscription. But if a client has for example both a temp-queue 
subscription and a normal subscription on the same connection, the 
subscription header in the MESSAGE frame is necessary to route the 
message inside the client.

So I would prefer a subscription header too, as my Delphi Stomp client 
library for RabbitMQ could support temp-queues without workarounds.

Michael Justin





From matthias at rabbitmq.com  Thu Nov 10 07:20:26 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 10 Nov 2011 07:20:26 +0000
Subject: [rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
In-Reply-To: <4EBB0F23.7030601@omc-international.com.au>
References: <4EB9CA70.5070107@omc-international.com.au>	<4EBA8A48.2090305@rabbitmq.com>
	<4EBB0F23.7030601@omc-international.com.au>
Message-ID: <4EBB7B3A.1040201@rabbitmq.com>

Mihir,

On 09/11/11 23:39, Mihir Mone wrote:
> Nope, that doesn't seem to work. Attached is the error displayed on the
> Web UI.

Oops, looks like the patch was compiled against the 2.7.0 version of the 
erlang client rather than 2.6.1. Simon is on holiday today but will 
hopefully look into this on his return.

Matthias.

From evkdev at gmail.com  Thu Nov 10 07:36:20 2011
From: evkdev at gmail.com (evkdev at gmail.com)
Date: Thu, 10 Nov 2011 13:36:20 +0600
Subject: [rabbitmq-discuss] Problem with creating cluster on Windows Server
	2008 machines
Message-ID: <87197392EBDB449F90F3E6C5620B7B98@EvKPC>

I?m trying to create a RabbitMQ cluster with 3 nodes (A, B and C) on 3 Windows machines. 
I?m able to launch a node on each server, and able to join two of them (B and C) into one cluster.
However, I cannot join node A to that cluster, also cannot create a 2-node cluster with AB or AC. So the problem is definetly in some configuration of A server.
Erlang cookies are the same on all machines. Nodes are listen to specific network interface (not to all, as by default), all firewalls are off (for testing purposes).
The error message I see when trying to join A node to cluster: no_running_cluster_nodes, on the machine I?m trying to join to.
Any suggestions?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/ae5ef189/attachment.htm>

From pavankumar.manikonda at schneider-electric.com  Thu Nov 10 08:51:47 2011
From: pavankumar.manikonda at schneider-electric.com (pavuuu)
Date: Thu, 10 Nov 2011 00:51:47 -0800 (PST)
Subject: [rabbitmq-discuss] asynchronous fetching messages from rabbitMQ
 queues
In-Reply-To: <4EBB6BA1.3000709@rabbitmq.com>
References: <32709671.post@talk.nabble.com>
	<20111024125737.GA4565@rabbitmq.com>
	<32808823.post@talk.nabble.com> <4EBAC0FD.7000400@rabbitmq.com>
	<32816304.post@talk.nabble.com> <4EBB6BA1.3000709@rabbitmq.com>
Message-ID: <32816959.post@talk.nabble.com>




Matthias Radestock-3 wrote:
> 
> 
>>> So you want a DequeueEverythingButWaitIfThereIsNothingThere() ?
> 
> exactly. That is what I want.
> 
>>> That should be straightforward to implement as a helper function. We 
>>> could add it to the library, but I am curious about the use case here - 
>>> I would have thought that most apps process messages individual rather 
>>> than in blocks.
> 
> My use case is that I am implementing a message processor which fetches
> messages from rabbitMQ, process them and save in database. 
> 
> When using 'BasicConsume' without setting BasicQos on channel, it seems it
> is connecting to RabbitMQ everytime I call 'consumer.Queue.Dequeue()'.
> This operation is getting costly because of network overhead. I resolved
> it as you suggested by setting the BasicQos with a very high value.
> 
> Now instead of calling 'consumer.Queue.Dequeue()' everytime to fetch a
> message, If I was able to get these messages in an array or list, I can
> parallelize my operations on messages I have fetched.
> 
> Hope the usecase is clear.
> 
>>> Btw, you do realise that the Dequeue() operation is client-side only, 
>>> right? i.e. it is simply manipulating a client side buffer which is 
>>> filled as and when the client receives a message from the server.
> 
> yes, I understood that. When I set the prefetch to 1000, at client side a
> buffer is being maintained which will contain a maximum of 1000 messages.
> When I call dequeue, it is giving me the message from this buffer. 
> 
> And if there are less than 1000 messages in buffer, it refills the buffer
> if there are any messages in the queue bound to it.
> 
> correct me if my understanding is wrong.
> 
> Also, I have a suggestion. Please add appropriate comments to the dotnet
> client library. It hard to understand what the methods are doing for new
> bibes like me.
> 
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 
> 

-- 
View this message in context: http://old.nabble.com/asynchronous-fetching-messages-from-rabbitMQ-queues-tp32709671p32816959.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From matthias at rabbitmq.com  Thu Nov 10 09:07:17 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 10 Nov 2011 09:07:17 +0000
Subject: [rabbitmq-discuss] asynchronous fetching messages from rabbitMQ
 queues
In-Reply-To: <32816959.post@talk.nabble.com>
References: <32709671.post@talk.nabble.com>	<20111024125737.GA4565@rabbitmq.com>	<32808823.post@talk.nabble.com>
	<4EBAC0FD.7000400@rabbitmq.com>	<32816304.post@talk.nabble.com>
	<4EBB6BA1.3000709@rabbitmq.com> <32816959.post@talk.nabble.com>
Message-ID: <4EBB9445.4060509@rabbitmq.com>

On 10/11/11 08:51, pavuuu wrote:
>> When using 'BasicConsume' without setting BasicQos on channel, it seems it
>> is connecting to RabbitMQ everytime I call 'consumer.Queue.Dequeue()'.

Dequeue *never* triggers an interaction with the server. Messages are 
sent by the server to the client (and buffered in the consumer.Queue) in 
the background. Basic.Qos controls the flow of these messages. Without a 
prefetch limit, the server sends messages to the client as soon as they 
become available in the queue. With a prefetch limit of N, the server 
will send at most N message and then send no more until it receives one 
or more acks.

>>>> Btw, you do realise that the Dequeue() operation is client-side only,
>>>> right? i.e. it is simply manipulating a client side buffer which is
>>>> filled as and when the client receives a message from the server.
>>
>> yes, I understood that. When I set the prefetch to 1000, at client side a
>> buffer is being maintained which will contain a maximum of 1000 messages.
>> When I call dequeue, it is giving me the message from this buffer.

The buffer is there regardless of Basic.Qos. But without Basic.Qos it 
can grow unbounded if the client app isn't draining it fast enough. With 
Basic.Qos the size is bounded to the prefetch size.

>> And if there are less than 1000 messages in buffer, it refills the buffer
>> if there are any messages in the queue bound to it.

The refilling is triggered by the client ack'ing messages.


Matthias.

From andrea.rosa at hp.com  Thu Nov 10 10:17:42 2011
From: andrea.rosa at hp.com (Rosa, Andrea)
Date: Thu, 10 Nov 2011 10:17:42 +0000
Subject: [rabbitmq-discuss] Rabbitmq crash
Message-ID: <5F389C517756284F80239F55BCA5DDDD17D47651@G9W0721.americas.hpqcorp.net>

Hi all,

Rabbitmq crashed and  in the log file I can find three different type of errors.
I attached here a snip of the log file, these issues are due to a problem in the server?
We are running Rabbimq 2.5.1.

Thanks
--
Andrea
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/51f264b9/attachment.htm>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Crash1.txt
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/51f264b9/attachment.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Crash2.txt
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/51f264b9/attachment-0001.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Crash3.txt
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/51f264b9/attachment-0002.txt>

From emile at rabbitmq.com  Thu Nov 10 10:28:38 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 10 Nov 2011 10:28:38 +0000
Subject: [rabbitmq-discuss] Server connections not closing
In-Reply-To: <b2a63d75-6175-42a8-9f03-fae5d1df823a@m26g2000prn.googlegroups.com>
References: <1b88645e-26fe-45b5-bdb8-ad42e551f7e4@u24g2000pru.googlegroups.com>
	<4EBA8958.20406@rabbitmq.com>
	<b2a63d75-6175-42a8-9f03-fae5d1df823a@m26g2000prn.googlegroups.com>
Message-ID: <4EBBA756.8050701@rabbitmq.com>

Hi Robert,

On 10/11/11 04:31, Robert Gilland wrote:
>> Is there any device on the network that intermediates between the broker
>> and client, and potentially keeping the server connections open?
> 
> Yes There are 4 hops on the traceroute between the client and server
> machine. according to our network guy. So it is failing on the WAN.
> 
>> Do you
>> get the same issue if the broker and client run on the same server
>> (using localhost)?
> 
> On local LAN between my machine and the server machine. all
> connections are being closed successfully.

If the problem can only be reproduced over the WAN then I strongly
suspect the problem is with the WAN. Unless there is any AMQP-specific
configuration you should be able to reproduce the problem with other
protocols.

> There must be some process not happening to close a connection at the
> RabbitMQ server machine.
> Something must be failing to get across the network. so the system is
> failing to close it's connections.

The RabbitMQ server uses sockets in the same way as any application.
(Nagle is turned off by default). The connection teardown is done by the
TCP stack as implemented in your OS. If there is something that you
believe RabbitMQ should be doing differently then let us know.


-Emile


From steve at rabbitmq.com  Thu Nov 10 11:16:28 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Thu, 10 Nov 2011 11:16:28 +0000
Subject: [rabbitmq-discuss] temp-queues in STOMP adaptor - missing
	subscription header
In-Reply-To: <j9frka$dnl$3@dough.gmane.org>
References: <4EBB49E1.7090109@strategicdata.com.au>
	<j9frka$dnl$3@dough.gmane.org>
Message-ID: <D81D440E-86C4-4FD7-97C2-B3BFD121B4DE@rabbitmq.com>

On 10 Nov 2011, Toby Corkindale, Lionel Cons and Michael Justin wrote under the thread starting:
> http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-November/016105.html

Yes, indeed, we are generating frames that  were valid in STOMP 1.0 but
are now invalid in STOMP 1.1.

I have raised a bug and this should be fixed in the next release.

The proposal is:
  The subscription id will be determined by the /temp-queue name used
  in the reply-to header of the SEND frame.
  This id will be documented, just in case the client wants to avoid clashes
  with other subscription ids used on her SUBSCRIBE frames.

Thank you for pointing this out.

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
Avoirdupois phr. 'Would you like peas with that?'
Abbey adj. Quite like an Abbe.
Definite phr. 'It's hard of hearing, I think.'
Modest n. The most mod.


From videlalvaro at gmail.com  Thu Nov 10 12:14:21 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Thu, 10 Nov 2011 13:14:21 +0100
Subject: [rabbitmq-discuss] Priority Queue Implementation
Message-ID: <CAMcAHLV_LbOMoDEV_K2qiYXDTh06EA1uWnhB+hhO9KOc4M6Kug@mail.gmail.com>

Hi,

I just wanted to bring to your attention this priority queue implementation
in Erlang that somehow compares itself against RabbitMQ and Riak
implementations.

https://github.com/okeuday/pqueue/

More info in Russian Here:
http://erlanger.ru//page/1886/ochered-s-prioritetom

Cheers,

-Alvaro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/70428e52/attachment.htm>

From emile at rabbitmq.com  Thu Nov 10 13:01:57 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 10 Nov 2011 13:01:57 +0000
Subject: [rabbitmq-discuss] Rabbitmq crash
In-Reply-To: <5F389C517756284F80239F55BCA5DDDD17D47651@G9W0721.americas.hpqcorp.net>
References: <5F389C517756284F80239F55BCA5DDDD17D47651@G9W0721.americas.hpqcorp.net>
Message-ID: <4EBBCB45.4010104@rabbitmq.com>

Hi Andrea,
On 10/11/11 10:17, Rosa, Andrea wrote:
> Rabbitmq crashed and  in the log file I can find three different type
> of errors.

Is it possible that some .beam files in your RabbitMQ installation are
missing? It is unlikely that these errors appeared spontaneously - what
event preceded their onset?


-Emile

From emile at rabbitmq.com  Thu Nov 10 13:14:02 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 10 Nov 2011 13:14:02 +0000
Subject: [rabbitmq-discuss] Rabbitmq crash
In-Reply-To: <4EBBCB45.4010104@rabbitmq.com>
References: <5F389C517756284F80239F55BCA5DDDD17D47651@G9W0721.americas.hpqcorp.net>
	<4EBBCB45.4010104@rabbitmq.com>
Message-ID: <4EBBCE1A.7090107@rabbitmq.com>

On 10/11/11 13:01, Emile Joubert wrote:
> Hi Andrea,
> On 10/11/11 10:17, Rosa, Andrea wrote:
>> Rabbitmq crashed and  in the log file I can find three different type
>> of errors.

Of course we'll be able to make better guesses with access to more of
the logfile. Could you send the complete logfile as well as the sasl
logfile (compressed) to support at rabbitmq.com ?


Emile

From andrea.rosa at hp.com  Thu Nov 10 13:36:04 2011
From: andrea.rosa at hp.com (Rosa, Andrea)
Date: Thu, 10 Nov 2011 13:36:04 +0000
Subject: [rabbitmq-discuss] Rabbitmq crash
In-Reply-To: <4EBBCE1A.7090107@rabbitmq.com>
References: <5F389C517756284F80239F55BCA5DDDD17D47651@G9W0721.americas.hpqcorp.net>
	<4EBBCB45.4010104@rabbitmq.com> <4EBBCE1A.7090107@rabbitmq.com>
Message-ID: <5F389C517756284F80239F55BCA5DDDD17D47F36@G9W0721.americas.hpqcorp.net>

Hi

Thank for your time, I'll do all my best to give you the complete logfile
thanks
--
Andrea

> -----Original Message-----
> From: Emile Joubert [mailto:emile at rabbitmq.com]
> Sent: 10 November 2011 13:14
> To: Rosa, Andrea
> Cc: rabbitmq-discuss at lists.rabbitmq.com
> Subject: Re: [rabbitmq-discuss] Rabbitmq crash
> 
> On 10/11/11 13:01, Emile Joubert wrote:
> > Hi Andrea,
> > On 10/11/11 10:17, Rosa, Andrea wrote:
> >> Rabbitmq crashed and  in the log file I can find three different
> type
> >> of errors.
> 
> Of course we'll be able to make better guesses with access to more of
> the logfile. Could you send the complete logfile as well as the sasl
> logfile (compressed) to support at rabbitmq.com ?
> 
> 
> Emile

From cameron.davison at gmail.com  Thu Nov 10 15:09:08 2011
From: cameron.davison at gmail.com (Cameron Davison)
Date: Thu, 10 Nov 2011 09:09:08 -0600
Subject: [rabbitmq-discuss] asynchronous fetching messages from rabbitMQ
	queues
In-Reply-To: <4EBB9445.4060509@rabbitmq.com>
References: <32709671.post@talk.nabble.com>
	<20111024125737.GA4565@rabbitmq.com>
	<32808823.post@talk.nabble.com> <4EBAC0FD.7000400@rabbitmq.com>
	<32816304.post@talk.nabble.com> <4EBB6BA1.3000709@rabbitmq.com>
	<32816959.post@talk.nabble.com> <4EBB9445.4060509@rabbitmq.com>
Message-ID: <-4520158528214320116@unknownmsgid>

If you are using the java-client the QueueingConsumer accepts messages from
the rabbitmq and buffers them into a BlockingQueue so that when you call
nextDelivery you just grab the next one off the queue. You could implement
your own Consumer that does the same thing and use something like

list.add(blockingQueue.take());
blockingQueue.drainTo(list);

to drain all the elements in the array blocking queue into a passed in set.
Only thing that you have to worry about then would be dealing with
cancel,cancel-ok,shutdown signals without adding them into your passed in
set.

-Cameron Davison

On Nov 10, 2011, at 3:08 AM, Matthias Radestock <matthias at rabbitmq.com>
wrote:

On 10/11/11 08:51, pavuuu wrote:

When using 'BasicConsume' without setting BasicQos on channel, it seems it

is connecting to RabbitMQ everytime I call 'consumer.Queue.Dequeue()'.


Dequeue *never* triggers an interaction with the server. Messages are sent
by the server to the client (and buffered in the consumer.Queue) in the
background. Basic.Qos controls the flow of these messages. Without a
prefetch limit, the server sends messages to the client as soon as they
become available in the queue. With a prefetch limit of N, the server will
send at most N message and then send no more until it receives one or more
acks.

Btw, you do realise that the Dequeue() operation is client-side only,

right? i.e. it is simply manipulating a client side buffer which is

filled as and when the client receives a message from the server.


yes, I understood that. When I set the prefetch to 1000, at client side a

buffer is being maintained which will contain a maximum of 1000 messages.

When I call dequeue, it is giving me the message from this buffer.


The buffer is there regardless of Basic.Qos. But without Basic.Qos it can
grow unbounded if the client app isn't draining it fast enough. With
Basic.Qos the size is bounded to the prefetch size.

And if there are less than 1000 messages in buffer, it refills the buffer

if there are any messages in the queue bound to it.


The refilling is triggered by the client ack'ing messages.


Matthias.
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/36a8079a/attachment.htm>

From irmo.manie at gmail.com  Thu Nov 10 15:16:50 2011
From: irmo.manie at gmail.com (Irmo Manie)
Date: Thu, 10 Nov 2011 16:16:50 +0100
Subject: [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
Message-ID: <CAAcXTOaNsa_wLLArna9gUruXTE2D4EFc1Z1BTKBgFGJ+1ZU=Tw@mail.gmail.com>

Hi guys,

I was eager to update to the 2.7.0 java client, but when I dropped the
new jar in I ran into some braking changes (again I must really say
here).

I see that i.e. the connection factory now takes an optional executor
service as parameter for the channel threads (which is very nice
actually!).
With that change, the method for creating a new connection taking an
array of addresses is now gone and moved into a private method
together with he executor service parameter:

private Connection newConnection(ExecutorService executor, Address[] addrs)

This must be a mistake, because the public api now has no way of
passing in an array of addresses anymore for the connection, but the
implementation still uses this in the private method. This is now all
the public api offers:

public Connection newConnection()
public Connection newConnection(ExecutorService executor)

I am missing:
public Connection newConnection(Adress[] addrs)

And actually the private one could be publis too I reckon?
public Connection newConnection(Adress[] addrs, ExecutorService executor)


Also: why are the connection factory defaults private all of a sudden?
They are useful if you build an api around the java client and it
doesn't harm to keep this kind of static info into the public right?

These are the things I ran into and switched back again to 2.6.1,
because I 'need' the connection to multiple addresses to connect to a
cluster.

- Irmo

From acheremukhin.digitalguard at gmail.com  Thu Nov 10 15:20:43 2011
From: acheremukhin.digitalguard at gmail.com (Cheremukhin Andrey)
Date: Thu, 10 Nov 2011 07:20:43 -0800 (PST)
Subject: [rabbitmq-discuss]  Cluster and memory usage
Message-ID: <18077876.3094.1320938443955.JavaMail.geo-discussion-forums@yqiu15>

Hi all.

I am having rabbitmq cluster within 3 nodes and approximately 100 queues.
All queues lives on only ONE node.
Messages are publiched to all three nodes.
But using memory is growing constantly only on other two nodes. 
I am not using acknowledgement and plugins.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/2d0d8750/attachment.htm>

From tcellucci at apple.com  Thu Nov 10 15:23:19 2011
From: tcellucci at apple.com (Tom Cellucci)
Date: Thu, 10 Nov 2011 07:23:19 -0800
Subject: [rabbitmq-discuss] configuring an header exchange binding in
	rabbitmq.cfg
Message-ID: <64298C46-3E5A-4DCC-BC05-A827272EE69D@apple.com>

I am trying to configure a header exchange and some shovels using 'rabbitmq.cfg'.  In the shovel configuration, I declare a header exchange, a queue for the shovel, and would like to add a binding rule so that messages with a given header are routed into the shovel queue.  How can I declare the binding rule for exchange->queue for a given header value?  It's trivial to do through the web admin, but seemingly impossible through the rabbitmq.cfg.  I've tried many variations without success, and searched all over the web without finding an example. Please advise. 

From williamejsalt at gmail.com  Thu Nov 10 15:35:41 2011
From: williamejsalt at gmail.com (William Salt)
Date: Thu, 10 Nov 2011 15:35:41 +0000
Subject: [rabbitmq-discuss] init terminating in do_boot (badarg) - whilst
 trying to install on ubuntu 11.04
Message-ID: <CAEtJN8qCn1dCDDFZYZu7ZKZopgaq5hB8dKVnqtn_gPwnvXLrfQ@mail.gmail.com>

Hi,

I am trying to install chef (which depends on rabbitmq onto a ubuntu natty
11.04 host. When i try to install rabbitmq-server, it throws this error:
sudo apt-get install rabbitmq-server
...
Setting up rabbitmq-server (2.3.1-1ubuntu1) ...
Starting rabbitmq-server: FAILED - check /var/log/rabbitmq/startup_log, _err
rabbitmq-server.
invoke-rc.d: initscript rabbitmq-server, action "start" failed.
dpkg: error processing rabbitmq-server (--configure):


contents of  /var/log/rabbitmq/startup_log:
Starting all nodes...

contents of  /var/log/rabbitmq/startup_err:
Error: {'EXIT',badarg}


Trying to manually start the server yields this error:

sudo /usr/sbin/rabbitmq-server
Activating RabbitMQ plugins ...
0 plugins activated:

{"init terminating in do_boot",badarg}

Crash dump was written to: erl_crash.dump
init terminating in do_boot (badarg)

erl_crash.dump reflects the above.

I have made sure that all my FQDNs resolve, as i googled and thought it
could be that.

Cheers in advance for your help.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/db948219/attachment.htm>

From rj at metabrew.com  Thu Nov 10 16:15:15 2011
From: rj at metabrew.com (Richard Jones)
Date: Thu, 10 Nov 2011 16:15:15 +0000
Subject: [rabbitmq-discuss] Crash in rabbit_management_agent-2.7.0
Message-ID: <CACmxXrCsUaqjKZyAXzY288r4DR0ZAU-Yu_114RbweKMtBYJBxQ@mail.gmail.com>

I upgraded from 2.6.0 to 2.7.0 using the .deb from the rabbit website.
(64bit debian)
Enabled management_plugin using rabbitmq-plugins as per docs, crashed
with the following on startup (pasted below).
Same crash with just rabbitmq_management_agent plugin enabled.


From steve at rabbitmq.com  Thu Nov 10 17:17:45 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Thu, 10 Nov 2011 17:17:45 +0000
Subject: [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
In-Reply-To: <CAAcXTOaNsa_wLLArna9gUruXTE2D4EFc1Z1BTKBgFGJ+1ZU=Tw@mail.gmail.com>
References: <CAAcXTOaNsa_wLLArna9gUruXTE2D4EFc1Z1BTKBgFGJ+1ZU=Tw@mail.gmail.com>
Message-ID: <D1E9035C-9DB8-479D-8A5B-166411D19C24@rabbitmq.com>

Hi Irmo,

On 10 Nov 2011, at 15:16, Irmo Manie wrote:
> Hi guys,
> 
> I was eager to update to the 2.7.0 java client, but when I dropped the
> new jar in I ran into some braking changes (again I must really say
> here).
Nice to see you are eager, and sorry to hear that our changes
broke you. 

> I see that i.e. the connection factory now takes an optional executor
> service as parameter for the channel threads (which is very nice
> actually!).
(thanks...)
> With that change, the method for creating a new connection taking an
> array of addresses is now gone and moved into a private method
> together with he executor service parameter:
> 
> private Connection newConnection(ExecutorService executor, Address[] addrs)
> 
> This must be a mistake....
Well; this is something we decided wasn't needed. The Java API was
simplified (to make the classes' interfaces less cluttered).

This particular method is entirely equivalent to a loop in the
connecting client program, and the array of addresses is not used
except in that one place.  We didn't think it was particularly useful,
and it would mean two extra public factory methods.  We intend to
remove uses of the array entirely (even from the private method).

Thanks for spotting it; we are striving for simplicity.

Clearly, as the interface changed you might need to make some small
modifications; for which we apologise; but we hope this isn't a serious one. 
Was it really a breaking change for you?

> Also: why are the connection factory defaults private all of a sudden?
> They are useful if you build an api around the java client and it
> doesn't harm to keep this kind of static info into the public right?
Yes, I see that -- this was zeal again.  We see no real harm in exposing the
STATIC FINAL constants, though, so that will be done in future.
It might save some duplication in the client code.
Again, you can code them explicitly, if you need them, which has the
distinct advantage of you being able to dictate what defaults *you* want.

> These are the things I ran into and switched back again to 2.6.1,
> because I 'need' the connection to multiple addresses to connect to a
> cluster.

Sorry you couldn't continue with 2.7.0; please let us know if there are
insurmountable problems.  I hope I haven't missed anything obvious.

> - Irmo

Steve Powell  (a kitten)
----------some more definitions from the SPD----------
Avoirdupois phr. 'Would you like peas with that?'
Abbey adj. Quite like an Abbe.
Definite phr. 'It's hard of hearing, I think.'
Modest n. The most mod.


From matthew at rabbitmq.com  Thu Nov 10 17:31:26 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Thu, 10 Nov 2011 17:31:26 +0000
Subject: [rabbitmq-discuss] configuring an header exchange binding in
 rabbitmq.cfg
In-Reply-To: <64298C46-3E5A-4DCC-BC05-A827272EE69D@apple.com>
References: <64298C46-3E5A-4DCC-BC05-A827272EE69D@apple.com>
Message-ID: <20111110173125.GB17951@wellquite.org>

Hi Tom,

On Thu, Nov 10, 2011 at 07:23:19AM -0800, Tom Cellucci wrote:
> I am trying to configure a header exchange and some shovels using
> 'rabbitmq.cfg'.  In the shovel configuration, I declare a header
> exchange, a queue for the shovel, and would like to add a binding rule
> so that messages with a given header are routed into the shovel queue.
> How can I declare the binding rule for exchange->queue for a given
> header value?  It's trivial to do through the web admin, but seemingly
> impossible through the rabbitmq.cfg.  I've tried many variations
> without success, and searched all over the web without finding an
> example. Please advise.

Which version of RabbitMQ are you using? "rabbitmq.cfg" isn't a file
name that I recognise - I think you mean "rabbitmq.config", and indeed
that's the file name that the shovel README talks about:
http://hg.rabbitmq.com/rabbitmq-shovel/file/b9f4e6dc4fa3/README

The bind will look something like:

{'queue.bind',
       [{exchange, <<"my_exchange">>},
        {queue,    <<"my_queue">>},
        {arguments, [{"x-match",         longstr, "any"},
                     {"headerName",      longstr, "headerValue"},
                     {"otherHeaderName", longstr, "otherHeaderValue"}]}]}

I think.

Matthew

From matthew at rabbitmq.com  Thu Nov 10 17:42:34 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Thu, 10 Nov 2011 17:42:34 +0000
Subject: [rabbitmq-discuss] configuring an header exchange binding in
 rabbitmq.cfg
In-Reply-To: <20111110173125.GB17951@wellquite.org>
References: <64298C46-3E5A-4DCC-BC05-A827272EE69D@apple.com>
	<20111110173125.GB17951@wellquite.org>
Message-ID: <20111110174233.GC17951@wellquite.org>

Hi Tom,

On Thu, Nov 10, 2011 at 05:31:26PM +0000, Matthew Sackman wrote:
> Which version of RabbitMQ are you using? "rabbitmq.cfg" isn't a file
> name that I recognise - I think you mean "rabbitmq.config", and indeed
> that's the file name that the shovel README talks about:
> http://hg.rabbitmq.com/rabbitmq-shovel/file/b9f4e6dc4fa3/README
> 
> The bind will look something like:
> 
> {'queue.bind',
>        [{exchange, <<"my_exchange">>},
>         {queue,    <<"my_queue">>},
>         {arguments, [{"x-match",         longstr, "any"},
>                      {"headerName",      longstr, "headerValue"},
>                      {"otherHeaderName", longstr, "otherHeaderValue"}]}]}
> 
> I think.

That will work if the binding is being created on an endpoint which is
not a "direct" connection. Otherwise, you need to ensure the keys and
values are binaries. There is a bug open for this - it's a mistake in
the erlang client which the shovel uses, but alas it's not been fixed
yet. So if in doubt, use something like:

{'queue.bind',
       [{exchange, <<"my_exchange">>},
        {queue,    <<"my_queue">>},
        {arguments, [{<<"x-match">>,         longstr, <<"any">>},
                     {<<"headerName">>,      longstr, <<"headerValue">>},
                     {<<"otherHeaderName">>, longstr, <<"otherHeaderValue">>}]}]}


Matthew

From rj at metabrew.com  Thu Nov 10 17:50:53 2011
From: rj at metabrew.com (Richard Jones)
Date: Thu, 10 Nov 2011 17:50:53 +0000
Subject: [rabbitmq-discuss] Crash on startup in management_agent plugin-2.7.0
Message-ID: <CACmxXrCZqmfSr2tkiya5-SxVTUOEPxp7_VQqO7ZCQC=pX+=uJQ@mail.gmail.com>

[reposting, appears truncated with no logs in the list archive for some reason]

I upgraded from 2.6.0 to 2.7.0 using the .deb from the rabbit website.
(64bit debian)
Enabled management_plugin using rabbitmq-plugins as per docs, crashed
with the following on startup (pasted below).
Same crash with just rabbitmq_management_agent plugin enabled.


From irmo.manie at gmail.com  Thu Nov 10 18:59:19 2011
From: irmo.manie at gmail.com (Irmo Manie)
Date: Thu, 10 Nov 2011 19:59:19 +0100
Subject: [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
In-Reply-To: <D1E9035C-9DB8-479D-8A5B-166411D19C24@rabbitmq.com>
References: <CAAcXTOaNsa_wLLArna9gUruXTE2D4EFc1Z1BTKBgFGJ+1ZU=Tw@mail.gmail.com>
	<D1E9035C-9DB8-479D-8A5B-166411D19C24@rabbitmq.com>
Message-ID: <CAAcXTOaxGzSS=JbjG3LQ0nEvFPozvKg505z0QY1wFsqQzinwpA@mail.gmail.com>

Hi Steve,

> Well; this is something we decided wasn't needed. The Java API was
> simplified (to make the classes' interfaces less cluttered).
>
> This particular method is entirely equivalent to a loop in the
> connecting client program, and the array of addresses is not used
> except in that one place. ?We didn't think it was particularly useful,
> and it would mean two extra public factory methods. ?We intend to
> remove uses of the array entirely (even from the private method).

It was useful since you only need one ConnectionFactory and one call
to connect to a cluster.
Now I would have to change the internals (host/port) for every try to
a node in a cluster (nasty imo, who likes these mutable objects anyway
;-) ), or I would need a ConnectionFactory per connection I can make
but that seems a bit overkill too, since all of them would start
Executors etc.

So I'd say I actually really liked the fact that I could create a
single 'immutable' ConnectionFactory for my cluster and then just
leave it and (re)use it.

> Thanks for spotting it; we are striving for simplicity.
>
> Clearly, as the interface changed you might need to make some small
> modifications; for which we apologise; but we hope this isn't a serious one.
> Was it really a breaking change for you?

It was breaking in the sense that the new client jar was not a direct
drop-in replacement for the previous one.
I would usually expect either an update where some api would get a
@deprecated annotation and would be removed in a next version, or that
there at least would be a notice of any breaking api changes in the
release notes (no matter how small the change is).
Especially if you maintain an api library it's really important to
keep the api as stable as possible and otherwise be super clear in
documentation about the changes and examples on how to migrate and
have deprecated backwards compatible phases. Otherwise a new update of
the library should (certainly since you have nice binary compatibility
in java) always be a drop in replacement so user can benefit from
improved implementation without any hassle.

> Yes, I see that -- this was zeal again. ?We see no real harm in exposing the
> STATIC FINAL constants, though, so that will be done in future.
> It might save some duplication in the client code.
> Again, you can code them explicitly, if you need them, which has the
> distinct advantage of you being able to dictate what defaults *you* want.

It's a minor thing and yes I can also just define my own constants,
but with client/server apps its so nice if you get the defaults from
the server's client api, i.e for in integration unit test.

> Sorry you couldn't continue with 2.7.0; please let us know if there are
> insurmountable problems. ?I hope I haven't missed anything obvious.

Other then the api changes I usually have no problems with any updates
and they work flawlessly. :-)

- Irmo

From baldgoth at gmail.com  Thu Nov 10 20:17:11 2011
From: baldgoth at gmail.com (TrueWill)
Date: Thu, 10 Nov 2011 12:17:11 -0800 (PST)
Subject: [rabbitmq-discuss] Statistics database could not be contacted
Message-ID: <18139766.2400.1320956231128.JavaMail.geo-discussion-forums@yqhd1>

We recently started seeing a red warning message of "Statistics database 
could not be contacted. Message rates and queue lengths will not be shown." 
on the RabbitMQ Management web page for our test deployment. There's only 
one host in the cluster. Version is 2.6.1 / R14B03.

Apparently at least one other person is getting this: 
http://stackoverflow.com/questions/7711528/rabbitmq-statistics-database-could-not-be-contacted-message-rates-and-queue-l

Simon MacMullen suggested posting here. What do you need to diagnose?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/4f7600f8/attachment.htm>

From mihirm at omc-international.com.au  Thu Nov 10 22:24:44 2011
From: mihirm at omc-international.com.au (Mihir Mone)
Date: Fri, 11 Nov 2011 06:24:44 +0800
Subject: [rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
In-Reply-To: <4EBB7B3A.1040201@rabbitmq.com>
References: <4EB9CA70.5070107@omc-international.com.au>	<4EBA8A48.2090305@rabbitmq.com>
	<4EBB0F23.7030601@omc-international.com.au>
	<4EBB7B3A.1040201@rabbitmq.com>
Message-ID: <4EBC4F2C.7010001@omc-international.com.au>

Cheers mate, looking forward to it.

Mihir

On 10/11/2011 3:20 PM, Matthias Radestock wrote:
> Mihir,
>
> On 09/11/11 23:39, Mihir Mone wrote:
>> Nope, that doesn't seem to work. Attached is the error displayed on the
>> Web UI.
>
> Oops, looks like the patch was compiled against the 2.7.0 version of 
> the erlang client rather than 2.6.1. Simon is on holiday today but 
> will hopefully look into this on his return.
>
> Matthias.

From mattevans123 at hotmail.com  Thu Nov 10 22:58:28 2011
From: mattevans123 at hotmail.com (Matthew Evans)
Date: Thu, 10 Nov 2011 17:58:28 -0500
Subject: [rabbitmq-discuss] Newbie Questions
In-Reply-To: <4EBC4F2C.7010001@omc-international.com.au>
References: <4EB9CA70.5070107@omc-international.com.au>
	<4EBA8A48.2090305@rabbitmq.com>,
	<4EBB0F23.7030601@omc-international.com.au>,
	<4EBB7B3A.1040201@rabbitmq.com>,
	<4EBC4F2C.7010001@omc-international.com.au>
Message-ID: <SNT125-W256B0A44756D1B7DCE62CB9CDC0@phx.gbl>


Hi,
We are considering using RabbitMQ for a service that needs to exhibit high performance as well as reliability. The service is written in 3 languages (C, Java and Erlang).
There will be a single Java application, but this might have 3 RabbitMQ producers/consumers on different threads.
There will be 2 or 3 C applications (processes).
There will be 1 or 2 Erlang applications (all on the same Erlang VM).
A few questions:
1) Can the Erlang application(s) reside on the same VM as RabbitMQ? Is this recommended? In this case the Erlang app will have a NIF, and could be quite busy. How would you go about deploying this, can you just create an Erlang ez file and have RabbitMQ load it?
2) What is a typical configuration: Many exchanges, few queues? Or few exchanges with many queues? What are the rules of thumb in deciding how the exchange/queue layout is modeled?
3) What are the performance hits in using external exchanges? 
4) Can a queue be on a different node than an exchange?
5) This may sound like a really simple question, but I'm struggling with the idea of a broker. Is a broker a combination of exchange + queues, or is it a set of exchanges on the same Erlang VM?
Thanks, and looking forward to your responses
Matt 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/04500bbd/attachment.htm>

From tcellucci at apple.com  Fri Nov 11 00:28:38 2011
From: tcellucci at apple.com (Tom Cellucci)
Date: Thu, 10 Nov 2011 16:28:38 -0800
Subject: [rabbitmq-discuss] configuring an header exchange binding in
 rabbitmq.cfg
In-Reply-To: <20111110172758.GA17951@wellquite.org>
References: <64298C46-3E5A-4DCC-BC05-A827272EE69D@apple.com>
	<20111110172758.GA17951@wellquite.org>
Message-ID: <88E115CD-0B2F-4D4E-8470-28B2ED5D5350@apple.com>

Thanks to Matt for the help;  I was able to get a queue binding configured per his advice.  Now I'd like to configure an exchange binding, which sadly is not working like I'd hoped.  Here's what I have:

                                  {'exchange.declare', [{exchange, <<"events_forwarding_exchange">>}, {type, <<"headers">>}, durable]},
                                  {'exchange.declare', [{exchange, <<"events_local_exchange">>}, {type, <<"topic">>}, durable]},
                                  {'queue.declare', [{queue, <<"dc1_events">>}, durable]},
                                  {'queue.bind', [
                                     {exchange, <<"events_forwarding_exchange">>},
                                     {queue, <<"dc1_events">>},
                                     {arguments, [
                                        {"route_to_dc1", longstr, "true"}
                                     ]}
                                  ]},
                                  {'exchange.bind', [
                                     {exchange, <<"events_forwarding_exchange">>},
                                     {exchange, <<"events_local_exchange">>},
                                     {arguments, [
                                        {"x-match", longstr, "any"},
                                        {"route_to_local", longstr, "true"},
                                        {"route_to_dc2", longstr, "true"}
                                     ]}
                                  ]}

With the above configuration, the broker fails to start and emits the following error:

=INFO REPORT==== 10-Nov-2011::16:03:35 ===
    application: rabbitmq_shovel
    exited: {{invalid_shovel_configuration,master_events_shovel,
                 {invalid_parameter_value,sources,
                     {unknown_fields,'exchange.bind',[exchange]}}},
             {rabbit_shovel,start,[normal,[]]}}
    type: permanent

What's the right way set up an exchange binding in rabbitmq.config?   - I am running RabbitMQ 2.6.1.

Thanks,
Tom

On Nov 10, 2011, at 9:27 AM, Matthew Sackman wrote:

> Hi Tom,
> 
> On Thu, Nov 10, 2011 at 07:23:19AM -0800, Tom Cellucci wrote:
>> I am trying to configure a header exchange and some shovels using
>> 'rabbitmq.cfg'.  In the shovel configuration, I declare a header
>> exchange, a queue for the shovel, and would like to add a binding rule
>> so that messages with a given header are routed into the shovel queue.
>> How can I declare the binding rule for exchange->queue for a given
>> header value?  It's trivial to do through the web admin, but seemingly
>> impossible through the rabbitmq.cfg.  I've tried many variations
>> without success, and searched all over the web without finding an
>> example. Please advise.
> 
> Which version of RabbitMQ are you using? "rabbitmq.cfg" isn't a file
> name that I recognise - I think you mean "rabbitmq.config", and indeed
> that's the file name that the shovel README talks about:
> http://hg.rabbitmq.com/rabbitmq-shovel/file/b9f4e6dc4fa3/README
> 
> The bind will look something like:
> 
> {'queue.bind',
>       [{exchange, <<"my_exchange">>},
>        {queue,    <<"my_queue">>},
>        {arguments, [{"x-match",         longstr, "any"},
>                     {"headerName",      longstr, "headerValue"},
>                     {"otherHeaderName", longstr, "otherHeaderValue"}]}]}
> 
> I think.
> 
> Matthew


From acheremukhin.digitalguard at gmail.com  Fri Nov 11 05:07:55 2011
From: acheremukhin.digitalguard at gmail.com (Cheremukhin Andrey)
Date: Thu, 10 Nov 2011 21:07:55 -0800 (PST)
Subject: [rabbitmq-discuss] Statistics database could not be contacted
In-Reply-To: <18139766.2400.1320956231128.JavaMail.geo-discussion-forums@yqhd1>
References: <18139766.2400.1320956231128.JavaMail.geo-discussion-forums@yqhd1>
Message-ID: <25954964.5.1320988075256.JavaMail.geo-discussion-forums@yqie15>

I am having the problem too in cluster (2.6.0 + 2.6.1 + 2.6.1).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111110/01b534b8/attachment.htm>

From matthias at rabbitmq.com  Fri Nov 11 08:44:34 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 11 Nov 2011 08:44:34 +0000
Subject: [rabbitmq-discuss] configuring an header exchange binding in
 rabbitmq.cfg
In-Reply-To: <88E115CD-0B2F-4D4E-8470-28B2ED5D5350@apple.com>
References: <64298C46-3E5A-4DCC-BC05-A827272EE69D@apple.com>	<20111110172758.GA17951@wellquite.org>
	<88E115CD-0B2F-4D4E-8470-28B2ED5D5350@apple.com>
Message-ID: <4EBCE072.1070302@rabbitmq.com>

Tom,

On 11/11/11 00:28, Tom Cellucci wrote:
> I'd like to configure an exchange binding, which sadly is not
> working  like I'd hoped.
 > [...]
>                                    {'exchange.bind', [
>                                       {exchange,<<"events_forwarding_exchange">>},
>                                       {exchange,<<"events_local_exchange">>},
>                                       {arguments, [
>                                          {"x-match", longstr, "any"},
>                                          {"route_to_local", longstr, "true"},
>                                          {"route_to_dc2", longstr, "true"}
>                                       ]}
>                                    ]}
>
> With the above configuration, the broker fails to start and emits the following error:
>
> =INFO REPORT==== 10-Nov-2011::16:03:35 ===
>      application: rabbitmq_shovel
>      exited: {{invalid_shovel_configuration,master_events_shovel,
>                   {invalid_parameter_value,sources,
>                       {unknown_fields,'exchange.bind',[exchange]}}},
>               {rabbit_shovel,start,[normal,[]]}}
>      type: permanent

The field names need to match what is in the spec. See 
http://www.rabbitmq.com/amqp-0-9-1-reference.html#exchange.bind - so 
instead of having two 'exchange' fields you need one 'destination' and 
one 'source' field.

Matthias.

From matthias at rabbitmq.com  Fri Nov 11 08:57:19 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 11 Nov 2011 08:57:19 +0000
Subject: [rabbitmq-discuss] Statistics database could not be contacted
In-Reply-To: <18139766.2400.1320956231128.JavaMail.geo-discussion-forums@yqhd1>
References: <18139766.2400.1320956231128.JavaMail.geo-discussion-forums@yqhd1>
Message-ID: <4EBCE36F.9040207@rabbitmq.com>

On 10/11/11 20:17, TrueWill wrote:
> We recently started seeing a red warning message of "Statistics database
> could not be contacted. Message rates and queue lengths will not be
> shown." on the RabbitMQ Management web page for our test deployment.
> There's only one host in the cluster. Version is 2.6.1 / R14B03.
>
> Apparently at least one other person is getting this:
> http://stackoverflow.com/questions/7711528/rabbitmq-statistics-database-could-not-be-contacted-message-rates-and-queue-l

It is very odd indeed to see this when not running in the cluster. Is 
there anything of interesting in the log files?

Matthias.

From acheremukhin.digitalguard at gmail.com  Fri Nov 11 10:28:15 2011
From: acheremukhin.digitalguard at gmail.com (Cheremukhin Andrey)
Date: Fri, 11 Nov 2011 02:28:15 -0800 (PST)
Subject: [rabbitmq-discuss] Cluster and memory usage
In-Reply-To: <18077876.3094.1320938443955.JavaMail.geo-discussion-forums@yqiu15>
References: <18077876.3094.1320938443955.JavaMail.geo-discussion-forums@yqiu15>
Message-ID: <11397846.1351.1321007295339.JavaMail.geo-discussion-forums@vbct14>

I am setting type of all nodes to 'disc'. It's solution.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/a62aa9e8/attachment.htm>

From matthias at rabbitmq.com  Fri Nov 11 10:42:21 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 11 Nov 2011 10:42:21 +0000
Subject: [rabbitmq-discuss] Crash in rabbit_management_agent-2.7.0
In-Reply-To: <CACmxXrCsUaqjKZyAXzY288r4DR0ZAU-Yu_114RbweKMtBYJBxQ@mail.gmail.com>
References: <CACmxXrCsUaqjKZyAXzY288r4DR0ZAU-Yu_114RbweKMtBYJBxQ@mail.gmail.com>
Message-ID: <4EBCFC0D.3010009@rabbitmq.com>

Richard,

On 10/11/11 16:15, Richard Jones wrote:
> I upgraded from 2.6.0 to 2.7.0 using the .deb from the rabbit website.
> (64bit debian)
> Enabled management_plugin using rabbitmq-plugins as per docs, crashed
> with the following on startup (pasted below).
> Same crash with just rabbitmq_management_agent plugin enabled.
>
>  From what i can see, the get_used_fd function just tries to ls a
> directory in proc, not sure what that would fail, perms seem ok.

Permissions is indeed the likely cause.

Try running rabbit w/o the management plug-in enabled and then do an 'ls 
/proc/<rabbit-process-id>/fd' as the 'rabbitmq' user.

Matthias.

From emile at rabbitmq.com  Fri Nov 11 10:42:31 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 11 Nov 2011 10:42:31 +0000
Subject: [rabbitmq-discuss] Cluster and memory usage
In-Reply-To: <11397846.1351.1321007295339.JavaMail.geo-discussion-forums@vbct14>
References: <18077876.3094.1320938443955.JavaMail.geo-discussion-forums@yqiu15>
	<11397846.1351.1321007295339.JavaMail.geo-discussion-forums@vbct14>
Message-ID: <4EBCFC17.9020700@rabbitmq.com>

Hi Cheremukhin,

On 11/11/11 10:28, Cheremukhin Andrey wrote:
> I am setting type of all nodes to 'disc'. It's solution.

What version are you currently using? We have fixed a bug with a very
similar (though not identical) description in RabbitMQ version 2.6.0 .
Is it possible for you to upgrade and attempt to reproduce the problem
if you are using an older version?


-Emile

From emile at rabbitmq.com  Fri Nov 11 11:07:45 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 11 Nov 2011 11:07:45 +0000
Subject: [rabbitmq-discuss] init terminating in do_boot (badarg) -
 whilst trying to install on ubuntu 11.04
In-Reply-To: <CAEtJN8qCn1dCDDFZYZu7ZKZopgaq5hB8dKVnqtn_gPwnvXLrfQ@mail.gmail.com>
References: <CAEtJN8qCn1dCDDFZYZu7ZKZopgaq5hB8dKVnqtn_gPwnvXLrfQ@mail.gmail.com>
Message-ID: <4EBD0201.4050003@rabbitmq.com>

Hi William,

On 10/11/11 15:35, William Salt wrote:
> Activating RabbitMQ plugins ...
> 0 plugins activated:
> 
> {"init terminating in do_boot",badarg}

We've made many improvements since v2.3.1 . Is it possible to upgrade to
the latest version?

Failing that, does the rabbitmq user have access to the
/var/lib/rabbitmq and /usr/lib/rabbitmq folders? What files exist in
these directories after the error?


-Emile

From rj at metabrew.com  Fri Nov 11 11:07:55 2011
From: rj at metabrew.com (Richard Jones)
Date: Fri, 11 Nov 2011 11:07:55 +0000
Subject: [rabbitmq-discuss] Crash in rabbit_management_agent-2.7.0
In-Reply-To: <4EBCFC0D.3010009@rabbitmq.com>
References: <CACmxXrCsUaqjKZyAXzY288r4DR0ZAU-Yu_114RbweKMtBYJBxQ@mail.gmail.com>
	<4EBCFC0D.3010009@rabbitmq.com>
Message-ID: <CACmxXrD4+75w0NYgBP5ptpQu7x0ViX6k386P0aOOQSXhJ+EVQQ@mail.gmail.com>

The /proc/<pid> dir is owned by rabbitmq, but the /proc/<pid>/fd dir
is owned (and only readable) by root, along with a bunch of other
stuff in /proc/<pid>.

I start rabbit using "sudo /etc/init.d/rabbitmq-server start"

Did something change in how rabbit setuids or something since 2.6?  It
worked fine prior to installing the new deb.

Regards,
RJ


On 11 November 2011 10:42, Matthias Radestock <matthias at rabbitmq.com> wrote:
> Richard,
>
> On 10/11/11 16:15, Richard Jones wrote:
>>
>> I upgraded from 2.6.0 to 2.7.0 using the .deb from the rabbit website.
>> (64bit debian)
>> Enabled management_plugin using rabbitmq-plugins as per docs, crashed
>> with the following on startup (pasted below).
>> Same crash with just rabbitmq_management_agent plugin enabled.
>>
>> ?From what i can see, the get_used_fd function just tries to ls a
>> directory in proc, not sure what that would fail, perms seem ok.
>
> Permissions is indeed the likely cause.
>
> Try running rabbit w/o the management plug-in enabled and then do an 'ls
> /proc/<rabbit-process-id>/fd' as the 'rabbitmq' user.
>
> Matthias.
>

From simon at rabbitmq.com  Fri Nov 11 11:08:57 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 11 Nov 2011 11:08:57 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <CAHZAEpcCcQ3r9+637stSJEHxRKMYKv2rrgX+w0uZoH35Jucp-Q@mail.gmail.com>
References: <9959B089-565A-4292-837C-5FE7C217D046@rabbitmq.com>	<2DA34106-A447-4117-94F4-0B1542B1FEFE@gmail.com>	<4EBA84A6.1060509@rabbitmq.com>	<CAHZAEpe17=2TxYdLbn3TPFiO6GLohT9UUZkh-B0rqk-s7n+pyg@mail.gmail.com>
	<CAHZAEpcCcQ3r9+637stSJEHxRKMYKv2rrgX+w0uZoH35Jucp-Q@mail.gmail.com>
Message-ID: <4EBD0249.6050605@rabbitmq.com>

(Oops, didn't see you'd sent this to the list as well...)

On 10/11/11 01:18, Jason J. W. Williams wrote:
> Hey Simon,
>
>     * Plugins will only be started if they have been enabled with
>     "rabbitmq-plugins enable <plugin>"
>
>
> Is that the only way to enable a plugin, or can it also be done from the
> config file?

The command manipulates a separate configuration file - 
/etc/rabbitmq/enabled_plugins on most unixes. The format is just an 
Erlang list of atoms naming explicitly enabled plugins.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From emile at rabbitmq.com  Fri Nov 11 11:13:06 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 11 Nov 2011 11:13:06 +0000
Subject: [rabbitmq-discuss] Problem with creating cluster on Windows
 Server 2008 machines
In-Reply-To: <87197392EBDB449F90F3E6C5620B7B98@EvKPC>
References: <87197392EBDB449F90F3E6C5620B7B98@EvKPC>
Message-ID: <4EBD0342.6070405@rabbitmq.com>

Hi,

On 10/11/11 07:36, evkdev at gmail.com wrote:
> I?m trying to create a RabbitMQ cluster with 3 nodes (A, B and C) on 3
> Windows machines.
> I?m able to launch a node on each server, and able to join two of them
> (B and C) into one cluster.
> However, I cannot join node A to that cluster, also cannot create a
> 2-node cluster with AB or AC. So the problem is definetly in some
> configuration of A server.

Are any logfile entries written to any of the nodes at the time when
node A fails to join the cluster? Are all nodes running the same version
of Erlang?  Also, what happens when you use the force_cluster command?


-Emile

From steve at rabbitmq.com  Fri Nov 11 11:23:43 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Fri, 11 Nov 2011 11:23:43 +0000
Subject: [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
In-Reply-To: <CAAcXTOaxGzSS=JbjG3LQ0nEvFPozvKg505z0QY1wFsqQzinwpA@mail.gmail.com>
References: <CAAcXTOaNsa_wLLArna9gUruXTE2D4EFc1Z1BTKBgFGJ+1ZU=Tw@mail.gmail.com>
	<D1E9035C-9DB8-479D-8A5B-166411D19C24@rabbitmq.com>
	<CAAcXTOaxGzSS=JbjG3LQ0nEvFPozvKg505z0QY1wFsqQzinwpA@mail.gmail.com>
Message-ID: <E743030D-082A-4D3D-96BE-14FCAE7AFE60@rabbitmq.com>

Hi Irmo,

> It was useful since you only need one ConnectionFactory and one call
> to connect to a cluster.
> Now I would have to change the internals (host/port) for every try to
> a node in a cluster (nasty imo, who likes these mutable objects anyway
> ;-) ), or I would need a ConnectionFactory per connection I can make
> but that seems a bit overkill too, since all of them would start
> Executors etc.
Well, no -- you would simply issue newConnection for each address in your
array -- an array you had to pass on the newConnection method before.
(The ExecutorService is not used if the connection is not made.)

I admit it's an extra loop, but no set*() calls are necessary.

> So I'd say I actually really liked the fact that I could create a
> single 'immutable' ConnectionFactory for my cluster and then just
> leave it and (re)use it.
Since the array was never stored in the Factory, you could never do that.
A newConnection() call simply used the 'default' host and port set on 
the factory. It still does.

In general it might be quite a good idea to put a set of cluster
addresses somewhere where clients could not have to worry
about them when getting a connection.  It might be nice to 
put that in the ConnectionFactory (enhancement request?)
but on the other hand, you would probably want to implement
a more sophisticated algorithm than "connect to the first one
that's up".   I guess you would know best what algorithm to use.
It's not likely we would consider putting that in the Factory object.

> It was breaking in the sense that the new client jar was not a direct
> drop-in replacement for the previous one.
> I would usually expect either an update where some api would get a
> @deprecated annotation and would be removed in a next version, or that
> there at least would be a notice of any breaking api changes in the
> release notes (no matter how small the change is).
> Especially if you maintain an api library it's really important to
> keep the api as stable as possible and otherwise be super clear in
> documentation about the changes and examples on how to migrate and
> have deprecated backwards compatible phases. Otherwise a new update of
> the library should (certainly since you have nice binary compatibility
> in java) always be a drop in replacement so user can benefit from
> improved implementation without any hassle.
You are dead right, of course, and we could have handled this better.
Normally I would expect binary compatibility
if it was only a micro release update, but this was a minor release update,
so one might have expected some differences. Still, thanks for your
admonition: we'll try to flag api changes better in future.

Incidentally, we are interested if you see any anomalies in the
Java Client info on the rabbitmq documentation pages. Since
there have been some subtle threading changes in this release
we appreciate feedback on these issues.

> Other then the api changes I usually have no problems with any updates

> and they work flawlessly. :-)
Thank you.

Steve Powell
steve at rabbitmq.com
[wrk: +44-2380-111-528] [mob: +44-7815-838-558]

From simon at rabbitmq.com  Fri Nov 11 11:49:01 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 11 Nov 2011 11:49:01 +0000
Subject: [rabbitmq-discuss] Crash in rabbit_management_agent-2.7.0
In-Reply-To: <CACmxXrD4+75w0NYgBP5ptpQu7x0ViX6k386P0aOOQSXhJ+EVQQ@mail.gmail.com>
References: <CACmxXrCsUaqjKZyAXzY288r4DR0ZAU-Yu_114RbweKMtBYJBxQ@mail.gmail.com>	<4EBCFC0D.3010009@rabbitmq.com>
	<CACmxXrD4+75w0NYgBP5ptpQu7x0ViX6k386P0aOOQSXhJ+EVQQ@mail.gmail.com>
Message-ID: <4EBD0BAD.5000008@rabbitmq.com>

On 11/11/11 11:07, Richard Jones wrote:
> The /proc/<pid>  dir is owned by rabbitmq, but the /proc/<pid>/fd dir
> is owned (and only readable) by root, along with a bunch of other
> stuff in /proc/<pid>.

Hmm. Needless to say, that's not what I'm seeing here. I'm on Ubuntu 
10.04 - you?

> I start rabbit using "sudo /etc/init.d/rabbitmq-server start"
>
> Did something change in how rabbit setuids or something since 2.6?  It
> worked fine prior to installing the new deb.

2.6.1 did something like 'setsid sh -c "/usr/sbin/rabbitmq-server"'
2.7.0 does 'setsid /usr/sbin/rabbitmq-server'

(in both cases with come redirection and environment munging.)

This doesn't feel like something that could cause this failure though.

I'll patch rabbit_management_agent to fall back to lsof if it can't open 
/proc/<pid>/fd, but I'd like to find out why you're seeing this - I've 
googled a bit but can't see anything that would indicate why permissions 
are as they are.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From rj at metabrew.com  Fri Nov 11 12:19:02 2011
From: rj at metabrew.com (Richard Jones)
Date: Fri, 11 Nov 2011 12:19:02 +0000
Subject: [rabbitmq-discuss] Crash in rabbit_management_agent-2.7.0
In-Reply-To: <4EBD0BAD.5000008@rabbitmq.com>
References: <CACmxXrCsUaqjKZyAXzY288r4DR0ZAU-Yu_114RbweKMtBYJBxQ@mail.gmail.com>
	<4EBCFC0D.3010009@rabbitmq.com>
	<CACmxXrD4+75w0NYgBP5ptpQu7x0ViX6k386P0aOOQSXhJ+EVQQ@mail.gmail.com>
	<4EBD0BAD.5000008@rabbitmq.com>
Message-ID: <CACmxXrB7w8_kWWywy8aP2K7CNpCdtf7ATQX5x6mpYLLWB=8oqw@mail.gmail.com>

I'm running debian lenny: 2.6.26-2-amd64 #1 SMP Thu Nov 25 04:30:55
UTC 2010 x86_64 GNU/Linux

Same if I start rabbit manually, in the foreground, like so (as per
/usr/sbin/rabbitmq-server):
su rabbitmq -s /bin/sh -c "/usr/lib/rabbitmq/bin/rabbitmq-server"

Here's the /proc/PID for the relevant beam process:

dr-xr-xr-x   7 rabbitmq rabbitmq 0 2011-11-11 13:06 .
dr-xr-xr-x 527 root     root     0 2011-09-22 09:05 ..
dr-xr-xr-x   2 rabbitmq rabbitmq 0 2011-11-11 13:06 attr
-r--------   1 root     root     0 2011-11-11 13:06 auxv
-r--r--r--   1 root     root     0 2011-11-11 13:06 cgroup
--w-------   1 root     root     0 2011-11-11 13:06 clear_refs
-r--r--r--   1 root     root     0 2011-11-11 13:06 cmdline
-rw-r--r--   1 root     root     0 2011-11-11 13:06 coredump_filter
-r--r--r--   1 root     root     0 2011-11-11 13:06 cpuset
lrwxrwxrwx   1 root     root     0 2011-11-11 13:06 cwd -> /home/rj
-r--------   1 root     root     0 2011-11-11 13:06 environ
lrwxrwxrwx   1 root     root     0 2011-11-11 13:06 exe ->
/usr/local/lib/erlang/erts-5.8.1/bin/beam.smp
dr-x------   2 root     root     0 2011-11-11 13:06 fd
dr-x------   2 root     root     0 2011-11-11 13:06 fdinfo
-r--r--r--   1 root     root     0 2011-11-11 13:06 io
-r--------   1 root     root     0 2011-11-11 13:06 limits
-rw-r--r--   1 root     root     0 2011-11-11 13:06 loginuid
-r--r--r--   1 root     root     0 2011-11-11 13:06 maps
-rw-------   1 root     root     0 2011-11-11 13:06 mem
-r--r--r--   1 root     root     0 2011-11-11 13:06 mountinfo
-r--r--r--   1 root     root     0 2011-11-11 13:06 mounts
-r--------   1 root     root     0 2011-11-11 13:06 mountstats
dr-xr-xr-x   5 rabbitmq rabbitmq 0 2011-11-11 13:06 net
-r--r--r--   1 root     root     0 2011-11-11 13:06 numa_maps
-rw-r--r--   1 root     root     0 2011-11-11 13:06 oom_adj
-r--r--r--   1 root     root     0 2011-11-11 13:06 oom_score
-r--------   1 root     root     0 2011-11-11 13:06 pagemap
lrwxrwxrwx   1 root     root     0 2011-11-11 13:06 root -> /
-rw-r--r--   1 root     root     0 2011-11-11 13:06 sched
-r--r--r--   1 root     root     0 2011-11-11 13:06 sessionid
-r--r--r--   1 root     root     0 2011-11-11 13:06 smaps
-r--r--r--   1 root     root     0 2011-11-11 13:06 stat
-r--r--r--   1 root     root     0 2011-11-11 13:06 statm
-r--r--r--   1 root     root     0 2011-11-11 13:06 status
dr-xr-xr-x  49 rabbitmq rabbitmq 0 2011-11-11 13:06 task
-r--r--r--   1 root     root     0 2011-11-11 13:06 wchan

Conversely, if I just start vim, like so:
  su rabbitmq -s /bin/sh -c "vim"
then everything in the /proc/PID dir *is* owned by rabbitmq.

If I just start erl, it's the same as starting rabbit (proc/PID/fd
owned by root)

At a bit of a loss.

RJ




On 11 November 2011 11:49, Simon MacMullen <simon at rabbitmq.com> wrote:
> On 11/11/11 11:07, Richard Jones wrote:
>>
>> The /proc/<pid> ?dir is owned by rabbitmq, but the /proc/<pid>/fd dir
>> is owned (and only readable) by root, along with a bunch of other
>> stuff in /proc/<pid>.
>
> Hmm. Needless to say, that's not what I'm seeing here. I'm on Ubuntu 10.04 -
> you?
>
>> I start rabbit using "sudo /etc/init.d/rabbitmq-server start"
>>
>> Did something change in how rabbit setuids or something since 2.6? ?It
>> worked fine prior to installing the new deb.
>
> 2.6.1 did something like 'setsid sh -c "/usr/sbin/rabbitmq-server"'
> 2.7.0 does 'setsid /usr/sbin/rabbitmq-server'
>
> (in both cases with come redirection and environment munging.)
>
> This doesn't feel like something that could cause this failure though.
>
> I'll patch rabbit_management_agent to fall back to lsof if it can't open
> /proc/<pid>/fd, but I'd like to find out why you're seeing this - I've
> googled a bit but can't see anything that would indicate why permissions are
> as they are.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From simon at rabbitmq.com  Fri Nov 11 12:38:38 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 11 Nov 2011 12:38:38 +0000
Subject: [rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
In-Reply-To: <4EBB7B3A.1040201@rabbitmq.com>
References: <4EB9CA70.5070107@omc-international.com.au>	<4EBA8A48.2090305@rabbitmq.com>	<4EBB0F23.7030601@omc-international.com.au>
	<4EBB7B3A.1040201@rabbitmq.com>
Message-ID: <4EBD174E.8000102@rabbitmq.com>

On 10/11/11 07:20, Matthias Radestock wrote:
> Oops, looks like the patch was compiled against the 2.7.0 version of the
> erlang client rather than 2.6.1. Simon is on holiday today but will
> hopefully look into this on his return.

Oops. *Sticks head in bucket*

Mihir, I've updated the .ez at the URL upthread - can you try again?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From frederic.renard at morpho.com  Fri Nov 11 07:21:41 2011
From: frederic.renard at morpho.com (RENARD Frederic (MORPHO))
Date: Fri, 11 Nov 2011 08:21:41 +0100
Subject: [rabbitmq-discuss]  Can't Determine Cause of 541 - INTERNAL_ERROR
Message-ID: <B9558123B90B1E47B10C796290E2B0B94B02B7E98A@Y000IIIV01.rd1.rf1>

Dear Mathias,

I Went through forums and noticed you have great experience on RabbitMQ.

Can you help on the issue we encounter since we installed RQ 2.4.1 a few days ago ... RQ crashes almost every day with same error :

INFO REPORT==== 11-Nov-2011::03:04:40 ===
starting TCP connection <0.30593.5795> from 10.3.80.38:58872

=ERROR REPORT==== 11-Nov-2011::03:37:48 ===
** Generic server msg_store_transient terminating
** Last message in was {'$gen_cast',
                           {client_dying,
                               <<103,35,129,201,228,38,156,163,30,57,26,111,
                                 31,61,39,139>>}}
** When Server state == {msstate,
                         "/var/lib/rabbitmq/mnesia/rabbit at uidmsatmbss122/msg_store_transient",
                         rabbit_msg_store_ets_index,
                         {state,192570,
                          "/var/lib/rabbitmq/mnesia/rabbit at uidmsatmbss122/msg_store_transient"},
                         0,#Ref<0.0.0.15034>,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         [],undefined,0,7950105,[],<0.208.0>,196667,188473,
                         200764,
...................

** Reason for termination ==
** {noproc,
       {gen_server2,call,
           [msg_store_transient,
            {client_terminate,
                <<206,108,154,4,151,152,95,15,185,224,61,116,69,24,139,185>>},
            infinity]}}
** In 'terminate' callback with reason ==
** shutdown

TX !

Regards,

Fr?d?ric RENARD

[cid:image001.gif at 01CCA070.A90ACB60]

Mobile Tel  +91 96 50 89 21 11
www.morpho.com<http://www.sagem-securite.com>
[cid:image002.jpg at 01CCA070.A90ACB60] Please think about the environment before printing!


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/38e6f210/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.gif
Type: image/gif
Size: 2715 bytes
Desc: image001.gif
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/38e6f210/attachment-0001.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 1260 bytes
Desc: image002.jpg
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/38e6f210/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rabbit at uidmsatmbss122.log.7z
Type: application/octet-stream
Size: 1014443 bytes
Desc: rabbit at uidmsatmbss122.log.7z
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/38e6f210/attachment-0001.obj>
-------------- next part --------------
#
" Ce courriel et les documents qui lui sont joints peuvent contenir des informations confidentielles ou ayant un caract?re priv?. S'ils ne vous sont pas destin?s, nous vous signalons qu'il est strictement interdit de les divulguer, de les reproduire ou d'en utiliser de quelque mani?re que ce soit le contenu. Si ce message vous a ?t? transmis par erreur, merci d'en informer l'exp?diteur et de supprimer imm?diatement de votre syst?me informatique ce courriel ainsi que tous les documents qui y sont attach?s."
******
" This e-mail and any attached documents may contain confidential or proprietary information. If you are not the intended recipient, you are notified that any dissemination, copying of this e-mail and any attachments thereto or use of their contents by any means whatsoever is strictly prohibited. If you have received this e-mail in error, please advise the sender immediately and delete this e-mail and all attached documents from your computer system."
#

From steghio at eng.it  Fri Nov 11 09:38:24 2011
From: steghio at eng.it (Stefano Ghio)
Date: Fri, 11 Nov 2011 10:38:24 +0100
Subject: [rabbitmq-discuss] RabbitMQ Windows service dependencies
Message-ID: <4EBCED10.50902@eng.it>

Greetings,

I just installed RabbitMQ on Windows XP SP3 following the guide but when 
I try to start the rabbitmq-service it tells me it cannot start the 
service dependency group. Can someone tell me on which services it 
depends so that I can try to enable and start them?

Thank you,

regards

-- 
Dr. Stefano Ghio - ENG Engineering Italy

*If you received this message but you are not its recipient, please 
ignore it and warn me, thank you.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/2a21d34d/attachment.htm>

From matthias at rabbitmq.com  Fri Nov 11 12:51:06 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 11 Nov 2011 12:51:06 +0000
Subject: [rabbitmq-discuss] Can't Determine Cause of 541 - INTERNAL_ERROR
In-Reply-To: <B9558123B90B1E47B10C796290E2B0B94B02B7E98A@Y000IIIV01.rd1.rf1>
References: <B9558123B90B1E47B10C796290E2B0B94B02B7E98A@Y000IIIV01.rd1.rf1>
Message-ID: <4EBD1A3A.4090401@rabbitmq.com>

Frederic,

On 11/11/11 07:21, RENARD Frederic (MORPHO) wrote:
  > Can you help on the issue we encounter since we installed RQ 2.4.1 a 
few
> days ago ? RQ crashes almost every day with same error [...]

Please send the sasl log file. Also, I recommend upgrading to the latest 
(2.7.0) release.

Matthias.

From simon at rabbitmq.com  Fri Nov 11 12:52:59 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 11 Nov 2011 12:52:59 +0000
Subject: [rabbitmq-discuss] Crash in rabbit_management_agent-2.7.0
In-Reply-To: <CACmxXrB7w8_kWWywy8aP2K7CNpCdtf7ATQX5x6mpYLLWB=8oqw@mail.gmail.com>
References: <CACmxXrCsUaqjKZyAXzY288r4DR0ZAU-Yu_114RbweKMtBYJBxQ@mail.gmail.com>
	<4EBCFC0D.3010009@rabbitmq.com>
	<CACmxXrD4+75w0NYgBP5ptpQu7x0ViX6k386P0aOOQSXhJ+EVQQ@mail.gmail.com>
	<4EBD0BAD.5000008@rabbitmq.com>
	<CACmxXrB7w8_kWWywy8aP2K7CNpCdtf7ATQX5x6mpYLLWB=8oqw@mail.gmail.com>
Message-ID: <4EBD1AAB.1050801@rabbitmq.com>

On 11/11/11 12:19, Richard Jones wrote:
> Conversely, if I just start vim, like so:
>    su rabbitmq -s /bin/sh -c "vim"
> then everything in the /proc/PID dir *is* owned by rabbitmq.
>
> If I just start erl, it's the same as starting rabbit (proc/PID/fd
> owned by root)
>
> At a bit of a loss.

Yeah, that doesn't make sense to me either.

 > /usr/local/lib/erlang/erts-5.8.1/bin/beam.smp

This is the only thing to leap out - you have a self compiled Erlang but 
you installed RabbitMQ using the .deb? I still don't see how that would 
be the issue though.

Anyway, I've put a management agent plugin that should handle failure to 
open /proc/<pid>/fd at:

http://www.rabbitmq.com/releases/plugins/v2.7.0/rabbitmq_management_agent-2.7.0.proc-fix.ez

- could you download this to 
/usr/lib/rabbitmq/lib/rabbitmq_server-2.7.0/plugins/, delete the other 
management-agent, and see if this fixes the problem?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From frederic.renard at morpho.com  Fri Nov 11 12:58:49 2011
From: frederic.renard at morpho.com (RENARD Frederic (MORPHO))
Date: Fri, 11 Nov 2011 13:58:49 +0100
Subject: [rabbitmq-discuss] Can't Determine Cause of 541 - INTERNAL_ERROR
In-Reply-To: <4EBD1A3A.4090401@rabbitmq.com>
References: <B9558123B90B1E47B10C796290E2B0B94B02B7E98A@Y000IIIV01.rd1.rf1>
	<4EBD1A3A.4090401@rabbitmq.com>
Message-ID: <B9558123B90B1E47B10C796290E2B0B94F8678DE32@Y000IIIV01.rd1.rf1>

Dear Mathias,

Here is the required file.

Regards,

Fr?d?ric
-----Original Message-----
From: Matthias Radestock [mailto:matthias at rabbitmq.com] 
Sent: Friday, November 11, 2011 6:21 PM
To: RENARD Frederic (MORPHO)
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Can't Determine Cause of 541 - INTERNAL_ERROR

Frederic,

On 11/11/11 07:21, RENARD Frederic (MORPHO) wrote:
  > Can you help on the issue we encounter since we installed RQ 2.4.1 a 
few
> days ago . RQ crashes almost every day with same error [...]

Please send the sasl log file. Also, I recommend upgrading to the latest 
(2.7.0) release.

Matthias.
#
" Ce courriel et les documents qui lui sont joints peuvent contenir des informations confidentielles ou ayant un caract?re priv?. S'ils ne vous sont pas destin?s, nous vous signalons qu'il est strictement interdit de les divulguer, de les reproduire ou d'en utiliser de quelque mani?re que ce soit le contenu. Si ce message vous a ?t? transmis par erreur, merci d'en informer l'exp?diteur et de supprimer imm?diatement de votre syst?me informatique ce courriel ainsi que tous les documents qui y sont attach?s."
******
" This e-mail and any attached documents may contain confidential or proprietary information. If you are not the intended recipient, you are notified that any dissemination, copying of this e-mail and any attachments thereto or use of their contents by any means whatsoever is strictly prohibited. If you have received this e-mail in error, please advise the sender immediately and delete this e-mail and all attached documents from your computer system."
#
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rabbit at uidmsatmbss122-sasl.log.1.7z
Type: application/octet-stream
Size: 153404 bytes
Desc: rabbit at uidmsatmbss122-sasl.log.1.7z
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/5125eb48/attachment.obj>

From simon at rabbitmq.com  Fri Nov 11 13:04:08 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 11 Nov 2011 13:04:08 +0000
Subject: [rabbitmq-discuss] Newbie Questions
In-Reply-To: <SNT125-W256B0A44756D1B7DCE62CB9CDC0@phx.gbl>
References: <4EB9CA70.5070107@omc-international.com.au>	<4EBA8A48.2090305@rabbitmq.com>,
	<4EBB0F23.7030601@omc-international.com.au>,
	<4EBB7B3A.1040201@rabbitmq.com>,
	<4EBC4F2C.7010001@omc-international.com.au>
	<SNT125-W256B0A44756D1B7DCE62CB9CDC0@phx.gbl>
Message-ID: <4EBD1D48.4060301@rabbitmq.com>

On 10/11/11 22:58, Matthew Evans wrote:
> 1) Can the Erlang application(s) reside on the same VM as RabbitMQ? Is
> this recommended? In this case the Erlang app will have a NIF, and could
> be quite busy. How would you go about deploying this, can you just
> create an Erlang ez file and have RabbitMQ load it?

Yes, a RabbitMQ plugin is just an OTP application packaged as a .ez file.

So you can load your apps into the same VM as RabbitMQ. Obviously you 
have to trust them not to crash the VM.

One thing you should maybe be aware of is that when using the direct 
client there's no equivalent to the TCP backpressure we exert on network 
clients when the server starts to run out of memory.

> 2) What is a typical configuration: Many exchanges, few queues? Or few
> exchanges with many queues? What are the rules of thumb in deciding how
> the exchange/queue layout is modeled?

The usual rule of thumb is whatever makes sense for your app.

In general the cost of an exchange tends to be *usually* not worth 
bothering with. Queues are slightly more expensive (although it's still 
sane to have tens of thousands of them or even more in some circumstances).

Each queue is a single process, so if you have too few queues you might 
not get all the parallelism you might want.

> 3) What are the performance hits in using external exchanges?

If you mean the external-exchange plugin, fairly huge. Every routing 
decision gets converted into a couple of messages getting sent over the 
network. And it's a single process per node too.

But if you mean writing your own exchange type plugin in Erlang, 
basically free except you might not be as efficient as we are :-) - the 
built-in exchange types are essentially "internal" plugins.

> 4) Can a queue be on a different node than an exchange?

Exchanges only exist in Mnesia, and are therefore always on every node 
at once.

> 5) This may sound like a really simple question, but I'm struggling with
> the idea of a broker. Is a broker a combination of exchange + queues, or
> is it a set of exchanges on the same Erlang VM?

A broker is just another word for "RabbitMQ server".

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From steve at rabbitmq.com  Fri Nov 11 13:05:55 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Fri, 11 Nov 2011 13:05:55 +0000
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
	connection
In-Reply-To: <CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>
	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>
	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>
Message-ID: <1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>

Hi Benjamin,

After investigation of our code, I'm now no longer convinced that
your hangs occur because we haven't trapped the EOFException
correctly.  We ought to be handling it properly.

I cannot reproduce this problem here, yet.

Could you please do some more investigation for us?  What would
be helpful is for you to take a java stack dump (use jstack) when
the hang occurs.

    jstack -l <pid>

ought to be sufficient, with <pid> the process number of the client JVM.

That will help us to find out what is hung where.
(It would be most helpful if you could do this on the
latest release -- RabbitMQ 2.7.0, but an older one is fine.)

Steve Powell
steve at rabbitmq.com
[wrk: +44-2380-111-528] [mob: +44-7815-838-558]

On 3 Nov 2011, at 21:40, Benjamin Bennett wrote:
> http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-November/015980.html

From emile at rabbitmq.com  Fri Nov 11 13:06:54 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 11 Nov 2011 13:06:54 +0000
Subject: [rabbitmq-discuss] RabbitMQ Windows service dependencies
In-Reply-To: <4EBCED10.50902@eng.it>
References: <4EBCED10.50902@eng.it>
Message-ID: <4EBD1DEE.1060300@rabbitmq.com>

Hi Stefano,

On 11/11/11 09:38, Stefano Ghio wrote:
> Greetings,
> 
> I just installed RabbitMQ on Windows XP SP3 following the guide but when
> I try to start the rabbitmq-service it tells me it cannot start the
> service dependency group. Can someone tell me on which services it
> depends so that I can try to enable and start them?

There may be a generic dependency on the Workstation service. What does
the eventlog say?


-Emile

From rj at metabrew.com  Fri Nov 11 13:08:50 2011
From: rj at metabrew.com (Richard Jones)
Date: Fri, 11 Nov 2011 13:08:50 +0000
Subject: [rabbitmq-discuss] Crash in rabbit_management_agent-2.7.0
In-Reply-To: <4EBD1AAB.1050801@rabbitmq.com>
References: <CACmxXrCsUaqjKZyAXzY288r4DR0ZAU-Yu_114RbweKMtBYJBxQ@mail.gmail.com>
	<4EBCFC0D.3010009@rabbitmq.com>
	<CACmxXrD4+75w0NYgBP5ptpQu7x0ViX6k386P0aOOQSXhJ+EVQQ@mail.gmail.com>
	<4EBD0BAD.5000008@rabbitmq.com>
	<CACmxXrB7w8_kWWywy8aP2K7CNpCdtf7ATQX5x6mpYLLWB=8oqw@mail.gmail.com>
	<4EBD1AAB.1050801@rabbitmq.com>
Message-ID: <CACmxXrCmbFzGMYa4Q1emOnA-f1Ypxhmj73peWQyfaXFJ8pX2Ew@mail.gmail.com>

Ah, got it - bit of a weird one:

This erlang install has the beam.smp process setcap'ed to allow it to
bind ports <1024 without running as root.

# getcap /usr/local/lib/erlang/erts-5.8.1/bin/beam.smp
/usr/local/lib/erlang/erts-5.8.1/bin/beam.smp = cap_net_bind_service+ep

Once I do this to remove the capability:
# setcap cap_net_bind_service=-ep /usr/local/lib/erlang/erts-5.8.1/bin/beam.smp

this fixes the problem, and everything in proc/pid is owned by
rabbitmq as expected.

If i "setcap cap_net_bind_service=+ep vim" the same thing happens, so
looks like a general setcap issue.

Setcap isn't like suid, the process wasn't running as root or really
with root perms (just that it can bind ports <1024), but apparently it
was confused enough to break proc ownership. Don't know what the
intended behaviour is, can't find any warnings in the setcap docs
(which are sparse).

Sorry for the wild goose chase.. As it happens, I'm using an iptables
redirect now anyway, so don't need the setcap anymore.

I put the cap back on, and tested your fixed plugin: it boots up fine
with the fixed management_agent plugin installed. Might be worth
leaving that in as a fallback (and anywhere else that checks
/proc/self)


No idea why this happened after the upgrade - that setcap has been set
for ages, long before I upgraded to 2.7.0.

Thanks,
RJ



On 11 November 2011 12:52, Simon MacMullen <simon at rabbitmq.com> wrote:
> On 11/11/11 12:19, Richard Jones wrote:
>>
>> Conversely, if I just start vim, like so:
>> ? su rabbitmq -s /bin/sh -c "vim"
>> then everything in the /proc/PID dir *is* owned by rabbitmq.
>>
>> If I just start erl, it's the same as starting rabbit (proc/PID/fd
>> owned by root)
>>
>> At a bit of a loss.
>
> Yeah, that doesn't make sense to me either.
>
>> /usr/local/lib/erlang/erts-5.8.1/bin/beam.smp
>
> This is the only thing to leap out - you have a self compiled Erlang but you
> installed RabbitMQ using the .deb? I still don't see how that would be the
> issue though.
>
> Anyway, I've put a management agent plugin that should handle failure to
> open /proc/<pid>/fd at:
>
> http://www.rabbitmq.com/releases/plugins/v2.7.0/rabbitmq_management_agent-2.7.0.proc-fix.ez
>
> - could you download this to
> /usr/lib/rabbitmq/lib/rabbitmq_server-2.7.0/plugins/, delete the other
> management-agent, and see if this fixes the problem?
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
>

From matthias at rabbitmq.com  Fri Nov 11 13:11:00 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 11 Nov 2011 13:11:00 +0000
Subject: [rabbitmq-discuss] Can't Determine Cause of 541 - INTERNAL_ERROR
In-Reply-To: <B9558123B90B1E47B10C796290E2B0B94F8678DE32@Y000IIIV01.rd1.rf1>
References: <B9558123B90B1E47B10C796290E2B0B94B02B7E98A@Y000IIIV01.rd1.rf1>
	<4EBD1A3A.4090401@rabbitmq.com>
	<B9558123B90B1E47B10C796290E2B0B94F8678DE32@Y000IIIV01.rd1.rf1>
Message-ID: <4EBD1EE4.30306@rabbitmq.com>

Frederic,

On 11/11/11 12:58, RENARD Frederic (MORPHO) wrote:
> Here is the required file.

The root cause is this error...

=CRASH REPORT==== 11-Nov-2011::03:37:55 ===
   crasher:
     initial call: gen:init_it/7
     pid: <0.207.0>
     registered_name: msg_store_transient
     exception exit: {{badmatch,false},
                      [{rabbit_msg_store_ets_index,insert,2},
                       {rabbit_msg_store,write_message,3},
                       {rabbit_msg_store,handle_cast,2},
                       {gen_server2,handle_msg,2},
                       {proc_lib,wake_up,3}]}
       in function  gen_server2:terminate/3

There is a pretty good chance we have fixed this in a more recent 
release, so I suggest you upgrade to 2.7.0.


Matthias.

From steve at rabbitmq.com  Fri Nov 11 13:18:24 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Fri, 11 Nov 2011 13:18:24 +0000
Subject: [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
In-Reply-To: <CAAcXTOaNobCYKP7KrpzRDtbALTS8V5qLx=rSKGVaLosaz6RxHA@mail.gmail.com>
References: <CAAcXTOaNsa_wLLArna9gUruXTE2D4EFc1Z1BTKBgFGJ+1ZU=Tw@mail.gmail.com>
	<D1E9035C-9DB8-479D-8A5B-166411D19C24@rabbitmq.com>
	<CAAcXTOaxGzSS=JbjG3LQ0nEvFPozvKg505z0QY1wFsqQzinwpA@mail.gmail.com>
	<E743030D-082A-4D3D-96BE-14FCAE7AFE60@rabbitmq.com>
	<CAAcXTOaNobCYKP7KrpzRDtbALTS8V5qLx=rSKGVaLosaz6RxHA@mail.gmail.com>
Message-ID: <06AFE12F-2021-4A84-8A5A-9481669253F8@rabbitmq.com>

Ah!
Takes foot from mouth -- of course you need set*() calls, because we
don't expose any address on the newConnection() calls now!  Oops.

Apologies, I'll raise a bug to re-introduce the old API -- I guess it
should teach me to be careful how we simplify. To encourage people
to move away from the array interface, however, I think it may be
deprecated and we will have:
  newConnection(Address)
or
  newConnection(ExecutorService, Address)

or similar.

Thanks again.
Steve Powell
steve at rabbitmq.com
[wrk: +44-2380-111-528] [mob: +44-7815-838-558]

From simon at rabbitmq.com  Fri Nov 11 13:22:32 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 11 Nov 2011 13:22:32 +0000
Subject: [rabbitmq-discuss] Crash in rabbit_management_agent-2.7.0
In-Reply-To: <CACmxXrCmbFzGMYa4Q1emOnA-f1Ypxhmj73peWQyfaXFJ8pX2Ew@mail.gmail.com>
References: <CACmxXrCsUaqjKZyAXzY288r4DR0ZAU-Yu_114RbweKMtBYJBxQ@mail.gmail.com>
	<4EBCFC0D.3010009@rabbitmq.com>
	<CACmxXrD4+75w0NYgBP5ptpQu7x0ViX6k386P0aOOQSXhJ+EVQQ@mail.gmail.com>
	<4EBD0BAD.5000008@rabbitmq.com>
	<CACmxXrB7w8_kWWywy8aP2K7CNpCdtf7ATQX5x6mpYLLWB=8oqw@mail.gmail.com>
	<4EBD1AAB.1050801@rabbitmq.com>
	<CACmxXrCmbFzGMYa4Q1emOnA-f1Ypxhmj73peWQyfaXFJ8pX2Ew@mail.gmail.com>
Message-ID: <4EBD2198.1090407@rabbitmq.com>

Cool. Thanks for getting back to the list. So yes, the fix will probably 
go in some future release, but I'm glad to hear it's not a priority...

Cheers, Simon

On 11/11/11 13:08, Richard Jones wrote:
> Ah, got it - bit of a weird one:
>
> This erlang install has the beam.smp process setcap'ed to allow it to
> bind ports<1024 without running as root.
>
> # getcap /usr/local/lib/erlang/erts-5.8.1/bin/beam.smp
> /usr/local/lib/erlang/erts-5.8.1/bin/beam.smp = cap_net_bind_service+ep
>
> Once I do this to remove the capability:
> # setcap cap_net_bind_service=-ep /usr/local/lib/erlang/erts-5.8.1/bin/beam.smp
>
> this fixes the problem, and everything in proc/pid is owned by
> rabbitmq as expected.
>
> If i "setcap cap_net_bind_service=+ep vim" the same thing happens, so
> looks like a general setcap issue.
>
> Setcap isn't like suid, the process wasn't running as root or really
> with root perms (just that it can bind ports<1024), but apparently it
> was confused enough to break proc ownership. Don't know what the
> intended behaviour is, can't find any warnings in the setcap docs
> (which are sparse).
>
> Sorry for the wild goose chase.. As it happens, I'm using an iptables
> redirect now anyway, so don't need the setcap anymore.
>
> I put the cap back on, and tested your fixed plugin: it boots up fine
> with the fixed management_agent plugin installed. Might be worth
> leaving that in as a fallback (and anywhere else that checks
> /proc/self)
>
>
> No idea why this happened after the upgrade - that setcap has been set
> for ages, long before I upgraded to 2.7.0.
>
> Thanks,
> RJ
>
>
>
> On 11 November 2011 12:52, Simon MacMullen<simon at rabbitmq.com>  wrote:
>> On 11/11/11 12:19, Richard Jones wrote:
>>>
>>> Conversely, if I just start vim, like so:
>>>    su rabbitmq -s /bin/sh -c "vim"
>>> then everything in the /proc/PID dir *is* owned by rabbitmq.
>>>
>>> If I just start erl, it's the same as starting rabbit (proc/PID/fd
>>> owned by root)
>>>
>>> At a bit of a loss.
>>
>> Yeah, that doesn't make sense to me either.
>>
>>> /usr/local/lib/erlang/erts-5.8.1/bin/beam.smp
>>
>> This is the only thing to leap out - you have a self compiled Erlang but you
>> installed RabbitMQ using the .deb? I still don't see how that would be the
>> issue though.
>>
>> Anyway, I've put a management agent plugin that should handle failure to
>> open /proc/<pid>/fd at:
>>
>> http://www.rabbitmq.com/releases/plugins/v2.7.0/rabbitmq_management_agent-2.7.0.proc-fix.ez
>>
>> - could you download this to
>> /usr/lib/rabbitmq/lib/rabbitmq_server-2.7.0/plugins/, delete the other
>> management-agent, and see if this fixes the problem?
>>
>> Cheers, Simon
>>
>> --
>> Simon MacMullen
>> RabbitMQ, VMware
>>


-- 
Simon MacMullen
RabbitMQ, VMware

From acheremukhin.digitalguard at gmail.com  Fri Nov 11 13:29:58 2011
From: acheremukhin.digitalguard at gmail.com (Cheremukhin Andrey)
Date: Fri, 11 Nov 2011 05:29:58 -0800 (PST)
Subject: [rabbitmq-discuss] Cluster and memory usage
In-Reply-To: <4EBCFC17.9020700@rabbitmq.com>
References: <18077876.3094.1320938443955.JavaMail.geo-discussion-forums@yqiu15>
	<11397846.1351.1321007295339.JavaMail.geo-discussion-forums@vbct14>
	<4EBCFC17.9020700@rabbitmq.com>
Message-ID: <7494025.183.1321018198136.JavaMail.geo-discussion-forums@yqni5>

Ok, I will try to upgrade to 2.6.1.
I am using 2.6.0 now.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/d8ac9a6c/attachment.htm>

From matthew at rabbitmq.com  Fri Nov 11 13:38:04 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Fri, 11 Nov 2011 13:38:04 +0000
Subject: [rabbitmq-discuss] Priority Queue Implementation
In-Reply-To: <CAMcAHLV_LbOMoDEV_K2qiYXDTh06EA1uWnhB+hhO9KOc4M6Kug@mail.gmail.com>
References: <CAMcAHLV_LbOMoDEV_K2qiYXDTh06EA1uWnhB+hhO9KOc4M6Kug@mail.gmail.com>
Message-ID: <20111111133804.GA3730@rabbitmq.com>

Hi,

On Thu, Nov 10, 2011 at 01:14:21PM +0100, Alvaro Videla wrote:
> I just wanted to bring to your attention this priority queue implementation
> in Erlang that somehow compares itself against RabbitMQ and Riak
> implementations.
> 
> https://github.com/okeuday/pqueue/
> 
> More info in Russian Here:
> http://erlanger.ru//page/1886/ochered-s-prioritetom

In general, beware of large constant overheads. For simple use cases,
it's often the case that a less-efficient but simpler algorithm is
faster.

Our priority_queue is not intended to be a general purpose priority
queue that performs brilliantly for billions of items with uniformly
distributed random priorities. It's intended for use with a very small
number of priorities (we never use it with more than ten), and very
heavily skewed use to one particular priority (normally 0).

I've not analysed it, but my instinct is that a priority queue built
from a 2,3-fingertree will have better theoretical characteristics than
the pqueue2 linked above simply because it avoids the possibility of a
heavily skewed unbalanced tree forming. However, having implemented such
a thing myself (
http://hg.rabbitmq.com/erlang-data-structures/file/default/finger_tree/src/
) I know that in reality it doesn't perform brilliantly because it tends
to produce quite a lot of garbage and intermediate structures and whilst
its theoretical characteristics are vastly better than our
priority_queue.erl module, for our use case, it performs worse (not to
mention being the proverbial hammer to crack a nut).

I note from the wikipedia page for skew heaps:
"In contrast with binary heaps, there are no structural constraints, so
there is no guarantee that the height of the tree is logarithmic."

This suggests that pqueue2:in is not even guaranteed O(log_2(N)).
priority_queue:in will be O(M/2) where M is the number of priorities
(the actual insert to the sub-queue will be amortized O(1)). The
2,3-finger_tree as a priority queue is amortized O(1) for insert and
O(log_2(N)) for out. That said, except in rather extreme use cases, I'd
expect pqueue2 and priority_queue to beat it.

I'd be curious to see what the benchmark tests were that Michael Truog
used. I suspect they'd have been rather random and wide ranging in
nature.

Thanks for the heads up though - always interesting stuff.


Matthew

From cameron.davison at gmail.com  Fri Nov 11 13:59:03 2011
From: cameron.davison at gmail.com (Cameron Davison)
Date: Fri, 11 Nov 2011 07:59:03 -0600
Subject: [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
In-Reply-To: <06AFE12F-2021-4A84-8A5A-9481669253F8@rabbitmq.com>
References: <CAAcXTOaNsa_wLLArna9gUruXTE2D4EFc1Z1BTKBgFGJ+1ZU=Tw@mail.gmail.com>
	<D1E9035C-9DB8-479D-8A5B-166411D19C24@rabbitmq.com>
	<CAAcXTOaxGzSS=JbjG3LQ0nEvFPozvKg505z0QY1wFsqQzinwpA@mail.gmail.com>
	<E743030D-082A-4D3D-96BE-14FCAE7AFE60@rabbitmq.com>
	<CAAcXTOaNobCYKP7KrpzRDtbALTS8V5qLx=rSKGVaLosaz6RxHA@mail.gmail.com>
	<06AFE12F-2021-4A84-8A5A-9481669253F8@rabbitmq.com>
Message-ID: <7854271066478526212@unknownmsgid>

Why isn't there a setAddresses on the connection factory? You seem to
be recommending everyone wrap the connection factory in another
factory that then gets passed into your object that will need to get
connections to rabbit. It would make a lot more sense to be able to
set all the available addresses on the ConnectionFactory and then be
able to pass that around to things that would need to create
connections.

-Cameron Davison

On Nov 11, 2011, at 7:19 AM, Steve Powell <steve at rabbitmq.com> wrote:

> Ah!
> Takes foot from mouth -- of course you need set*() calls, because we
> don't expose any address on the newConnection() calls now!  Oops.
>
> Apologies, I'll raise a bug to re-introduce the old API -- I guess it
> should teach me to be careful how we simplify. To encourage people
> to move away from the array interface, however, I think it may be
> deprecated and we will have:
>  newConnection(Address)
> or
>  newConnection(ExecutorService, Address)
>
> or similar.
>
> Thanks again.
> Steve Powell
> steve at rabbitmq.com
> [wrk: +44-2380-111-528] [mob: +44-7815-838-558]
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From otacorp at gmail.com  Fri Nov 11 14:00:09 2011
From: otacorp at gmail.com (Stefano Ghio)
Date: Fri, 11 Nov 2011 15:00:09 +0100
Subject: [rabbitmq-discuss] RabbitMQ Windows service dependencies
In-Reply-To: <4EBD1DEE.1060300@rabbitmq.com>
References: <4EBCED10.50902@eng.it>
	<4EBD1DEE.1060300@rabbitmq.com>
Message-ID: <CAOSZum5e4-XmekoS1=vh=rSxwuoZ9e9Z-XZbi9fpRw2ukq8oXw@mail.gmail.com>

Cheers,

that service is disabled for sure on the machine I tried. I will be able to
confirm if it was the solution on Monday however.

Thanks for your reply,

have a nice day

On 11 November 2011 14:06, Emile Joubert <emile at rabbitmq.com> wrote:

> Hi Stefano,
>
> On 11/11/11 09:38, Stefano Ghio wrote:
> > Greetings,
> >
> > I just installed RabbitMQ on Windows XP SP3 following the guide but when
> > I try to start the rabbitmq-service it tells me it cannot start the
> > service dependency group. Can someone tell me on which services it
> > depends so that I can try to enable and start them?
>
> There may be a generic dependency on the Workstation service. What does
> the eventlog say?
>
>
> -Emile
>
>


-- 
Dr. Stefano Ghio - Italy

Website: http://groglogs.blogspot.com/

*If you received this message but you are not its recipient, please ignore
it and warn me, thank you.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/dd27dac4/attachment.htm>

From frederic.renard at morpho.com  Fri Nov 11 14:23:10 2011
From: frederic.renard at morpho.com (RENARD Frederic (MORPHO))
Date: Fri, 11 Nov 2011 15:23:10 +0100
Subject: [rabbitmq-discuss] Can't Determine Cause of 541 - INTERNAL_ERROR
In-Reply-To: <4EBD1EE4.30306@rabbitmq.com>
References: <B9558123B90B1E47B10C796290E2B0B94B02B7E98A@Y000IIIV01.rd1.rf1>
	<4EBD1A3A.4090401@rabbitmq.com>
	<B9558123B90B1E47B10C796290E2B0B94F8678DE32@Y000IIIV01.rd1.rf1>
	<4EBD1EE4.30306@rabbitmq.com>
Message-ID: <B9558123B90B1E47B10C796290E2B0B94F8678DE3B@Y000IIIV01.rd1.rf1>

Dear Matthias,

Can you give more details ?

How can you tell "initial call: gen:init_it/7" is the root cause ? (What does it mean ?)

How Can I know if a bug a has been opened for this issue ?

Can I be sure the issue is not related to my application?

TX a lot for your feedback !

Regards,

Fr?d?ric

-----Original Message-----
From: Matthias Radestock [mailto:matthias at rabbitmq.com] 
Sent: Friday, November 11, 2011 6:41 PM
To: RENARD Frederic (MORPHO)
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Can't Determine Cause of 541 - INTERNAL_ERROR

Frederic,

On 11/11/11 12:58, RENARD Frederic (MORPHO) wrote:
> Here is the required file.

The root cause is this error...

=CRASH REPORT==== 11-Nov-2011::03:37:55 ===
   crasher:
     initial call: gen:init_it/7
     pid: <0.207.0>
     registered_name: msg_store_transient
     exception exit: {{badmatch,false},
                      [{rabbit_msg_store_ets_index,insert,2},
                       {rabbit_msg_store,write_message,3},
                       {rabbit_msg_store,handle_cast,2},
                       {gen_server2,handle_msg,2},
                       {proc_lib,wake_up,3}]}
       in function  gen_server2:terminate/3

There is a pretty good chance we have fixed this in a more recent 
release, so I suggest you upgrade to 2.7.0.


Matthias.
#
" Ce courriel et les documents qui lui sont joints peuvent contenir des informations confidentielles ou ayant un caract?re priv?. S'ils ne vous sont pas destin?s, nous vous signalons qu'il est strictement interdit de les divulguer, de les reproduire ou d'en utiliser de quelque mani?re que ce soit le contenu. Si ce message vous a ?t? transmis par erreur, merci d'en informer l'exp?diteur et de supprimer imm?diatement de votre syst?me informatique ce courriel ainsi que tous les documents qui y sont attach?s."
******
" This e-mail and any attached documents may contain confidential or proprietary information. If you are not the intended recipient, you are notified that any dissemination, copying of this e-mail and any attachments thereto or use of their contents by any means whatsoever is strictly prohibited. If you have received this e-mail in error, please advise the sender immediately and delete this e-mail and all attached documents from your computer system."
#


From acheremukhin.digitalguard at gmail.com  Fri Nov 11 14:26:29 2011
From: acheremukhin.digitalguard at gmail.com (Cheremukhin Andrey)
Date: Fri, 11 Nov 2011 06:26:29 -0800 (PST)
Subject: [rabbitmq-discuss] Cluster and memory usage
In-Reply-To: <7494025.183.1321018198136.JavaMail.geo-discussion-forums@yqni5>
References: <18077876.3094.1320938443955.JavaMail.geo-discussion-forums@yqiu15>
	<11397846.1351.1321007295339.JavaMail.geo-discussion-forums@vbct14>
	<4EBCFC17.9020700@rabbitmq.com>
	<7494025.183.1321018198136.JavaMail.geo-discussion-forums@yqni5>
Message-ID: <145608.361.1321021590022.JavaMail.geo-discussion-forums@yqff21>

I set up cluster within two nodes - rabbitmq 2.6.1. 
And I am seeing

node1$ 
PID USERNAME  THR PRI NICE   SIZE    RES STATE   C   TIME   WCPU COMMAND
31196 rabbitmq   51  50    0  2990M  2170M ucond  10   1:52 170.90% beam.smp

node2$ 
22915 rabbitmq   51 103    0   442M   402M CPU11  11   7:49 495.65% beam.smp

All queues live on on node2.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/08a489f0/attachment.htm>

From matthias at rabbitmq.com  Fri Nov 11 14:29:36 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 11 Nov 2011 14:29:36 +0000
Subject: [rabbitmq-discuss] Can't Determine Cause of 541 - INTERNAL_ERROR
In-Reply-To: <B9558123B90B1E47B10C796290E2B0B94F8678DE3B@Y000IIIV01.rd1.rf1>
References: <B9558123B90B1E47B10C796290E2B0B94B02B7E98A@Y000IIIV01.rd1.rf1>
	<4EBD1A3A.4090401@rabbitmq.com>
	<B9558123B90B1E47B10C796290E2B0B94F8678DE32@Y000IIIV01.rd1.rf1>
	<4EBD1EE4.30306@rabbitmq.com>
	<B9558123B90B1E47B10C796290E2B0B94F8678DE3B@Y000IIIV01.rd1.rf1>
Message-ID: <4EBD3150.9020000@rabbitmq.com>

Frederic,

On 11/11/11 14:23, RENARD Frederic (MORPHO) wrote:
> How can you tell "initial call: gen:init_it/7" is the root cause ?
> (What does it mean ?)

The root cause is actually the {badmatch,false} in 
rabbit_msg_store_ets:index:insert/2.

One needs a fairly in-depth knowledge of Erlang and rabbit to determine 
that.

> How Can I know if a bug a has been opened for this issue ?

There isn't a bug for that specific error, but the code in that area has 
changed a lot in the last few releases.

> Can I be sure the issue is not related to my application?

Yes. Nothing you do in your app should ever crash the broker.


Matthias.

From matthias at rabbitmq.com  Fri Nov 11 14:34:09 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 11 Nov 2011 14:34:09 +0000
Subject: [rabbitmq-discuss] Cluster and memory usage
In-Reply-To: <145608.361.1321021590022.JavaMail.geo-discussion-forums@yqff21>
References: <18077876.3094.1320938443955.JavaMail.geo-discussion-forums@yqiu15>	<11397846.1351.1321007295339.JavaMail.geo-discussion-forums@vbct14>	<4EBCFC17.9020700@rabbitmq.com>	<7494025.183.1321018198136.JavaMail.geo-discussion-forums@yqni5>
	<145608.361.1321021590022.JavaMail.geo-discussion-forums@yqff21>
Message-ID: <4EBD3261.7040403@rabbitmq.com>

On 11/11/11 14:26, Cheremukhin Andrey wrote:
> I set up cluster within two nodes - rabbitmq 2.6.1.
> And I am seeing
>
> node1$
> PID USERNAME THR PRI NICE SIZE RES STATE C TIME WCPU COMMAND
> 31196 rabbitmq 51 50 0 2990M 2170M ucond 10 1:52 170.90% beam.smp
>
> node2$
> 22915 rabbitmq 51 103 0 442M 402M CPU11 11 7:49 495.65% beam.smp
>
> All queues live on on node2.

What is node1 doing? Are publishers connecting to it? If so the memory 
might simply be taken up by message backlogs, i.e. the producers are 
producing messages at a faster rate than rabbit can sustain. Eventually 
this would result in a memory alarm and producer connections getting 
blocked until the backlog has been reduced.

Regards,

Matthias.

From acheremukhin.digitalguard at gmail.com  Fri Nov 11 14:36:40 2011
From: acheremukhin.digitalguard at gmail.com (Cheremukhin Andrey)
Date: Fri, 11 Nov 2011 06:36:40 -0800 (PST)
Subject: [rabbitmq-discuss] Cluster and memory usage
In-Reply-To: <4EBD3261.7040403@rabbitmq.com>
References: <18077876.3094.1320938443955.JavaMail.geo-discussion-forums@yqiu15>	<11397846.1351.1321007295339.JavaMail.geo-discussion-forums@vbct14>	<4EBCFC17.9020700@rabbitmq.com>	<7494025.183.1321018198136.JavaMail.geo-discussion-forums@yqni5>
	<145608.361.1321021590022.JavaMail.geo-discussion-forums@yqff21>
	<4EBD3261.7040403@rabbitmq.com>
Message-ID: <7594977.848.1321022200950.JavaMail.geo-discussion-forums@yqjc16>

node1 and node2 have approximately count of publishers and messages. I am 
sure.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/67e06567/attachment.htm>

From acheremukhin.digitalguard at gmail.com  Fri Nov 11 14:39:37 2011
From: acheremukhin.digitalguard at gmail.com (Cheremukhin Andrey)
Date: Fri, 11 Nov 2011 06:39:37 -0800 (PST)
Subject: [rabbitmq-discuss] Cluster and memory usage
In-Reply-To: <4EBD3261.7040403@rabbitmq.com>
References: <18077876.3094.1320938443955.JavaMail.geo-discussion-forums@yqiu15>	<11397846.1351.1321007295339.JavaMail.geo-discussion-forums@vbct14>	<4EBCFC17.9020700@rabbitmq.com>	<7494025.183.1321018198136.JavaMail.geo-discussion-forums@yqni5>
	<145608.361.1321021590022.JavaMail.geo-discussion-forums@yqff21>
	<4EBD3261.7040403@rabbitmq.com>
Message-ID: <4330837.3290.1321022377617.JavaMail.geo-discussion-forums@yqcm23>

UI managment shows than queue don't have messages.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/a3503906/attachment.htm>

From acheremukhin.digitalguard at gmail.com  Fri Nov 11 14:42:59 2011
From: acheremukhin.digitalguard at gmail.com (Cheremukhin Andrey)
Date: Fri, 11 Nov 2011 06:42:59 -0800 (PST)
Subject: [rabbitmq-discuss] Cluster and memory usage
In-Reply-To: <7594977.848.1321022200950.JavaMail.geo-discussion-forums@yqjc16>
References: <18077876.3094.1320938443955.JavaMail.geo-discussion-forums@yqiu15>	<11397846.1351.1321007295339.JavaMail.geo-discussion-forums@vbct14>	<4EBCFC17.9020700@rabbitmq.com>	<7494025.183.1321018198136.JavaMail.geo-discussion-forums@yqni5>
	<145608.361.1321021590022.JavaMail.geo-discussion-forums@yqff21>
	<4EBD3261.7040403@rabbitmq.com>
	<7594977.848.1321022200950.JavaMail.geo-discussion-forums@yqjc16>
Message-ID: <16147772.1157.1321022579601.JavaMail.geo-discussion-forums@yqoo7>

Every node is receiving approximately 4K messages per second.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/a2edfa34/attachment.htm>

From matthias at rabbitmq.com  Fri Nov 11 14:46:42 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 11 Nov 2011 14:46:42 +0000
Subject: [rabbitmq-discuss] Cluster and memory usage
In-Reply-To: <7594977.848.1321022200950.JavaMail.geo-discussion-forums@yqjc16>
References: <18077876.3094.1320938443955.JavaMail.geo-discussion-forums@yqiu15>	<11397846.1351.1321007295339.JavaMail.geo-discussion-forums@vbct14>	<4EBCFC17.9020700@rabbitmq.com>	<7494025.183.1321018198136.JavaMail.geo-discussion-forums@yqni5>	<145608.361.1321021590022.JavaMail.geo-discussion-forums@yqff21>	<4EBD3261.7040403@rabbitmq.com>
	<7594977.848.1321022200950.JavaMail.geo-discussion-forums@yqjc16>
Message-ID: <4EBD3552.1040205@rabbitmq.com>

On 11/11/11 14:36, Cheremukhin Andrey wrote:
> node1 and node2 have approximately count of publishers and messages. I
> am sure.  UI managment shows than queue don't have messages.

The backlog isn't in the queues, it's in the various buffers prior to 
that. And publishing a message to node1 when it needs to go into a queue 
on node2 is more expensive than publishing the same message to node2.

> Every node is receiving approximately 4K messages per second.

That may simply be too high a rate in your setup. If this is just a 
test, try reducing the rate to, say 1k/s and check whether the memory 
usage is more stable.

Note that nothing really bad should happen in any case. As I explained 
in my previous reply, eventually the memory alarm will trigger and 
rabbit will pause producers to allow the backlog to shrink.

Regards,

Matthias.

From stuckinwigan at gmail.com  Fri Nov 11 15:12:27 2011
From: stuckinwigan at gmail.com (Ben Lewis)
Date: Fri, 11 Nov 2011 15:12:27 +0000
Subject: [rabbitmq-discuss] Acknowledged Messages Requeued
Message-ID: <CAHQ1f1X+t9TETRt0YveordZC2=HhCOscDNPgAZ54LetyXJQx7A@mail.gmail.com>

Hi there,

I'm new to the concepts of AMQP and RabbitMQ and was wondering if someone
may be able to point me in the right direction or offer some advice.

I have got a direct exchange feeding a durable queue, if I load say 50,000
messages onto the queue and then start a consumer to work through those
item's.

My consumer creates the connection, then creates the model (I'm using .NET)
and sets the Qos prefetch count to 1, then calls BasicGet, processes the
message, sends an ack (BasicAck), then enumerates until BasicGet returns
null. Finally disposing the model and closing the connection.

If I restart the host I have the RabbitMQ broker running on (Windows) after
processing and ack'ing 40,000 messages while my consumer is working through
the remaining items, when the RabbitMQ broker comes back online the 40,000
messages are redelivered (even though they were acknowledged).

Is this supposed to happen? I would anticipate a number of them being
requeued if the broker was shutdown abruptly (i.e. loss of power) as it may
not have been written to disk at that stage, but a graceful restart I
thought it may flush any uncommitted changes to disk.

If this is by design, any suggestions or advice on how I can minimise the
number of redelivered messages if the broker dies/restarts?

Thanks in advance,

Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/7022b742/attachment.htm>

From emile at rabbitmq.com  Fri Nov 11 16:10:59 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 11 Nov 2011 16:10:59 +0000
Subject: [rabbitmq-discuss] Acknowledged Messages Requeued
In-Reply-To: <CAHQ1f1X+t9TETRt0YveordZC2=HhCOscDNPgAZ54LetyXJQx7A@mail.gmail.com>
References: <CAHQ1f1X+t9TETRt0YveordZC2=HhCOscDNPgAZ54LetyXJQx7A@mail.gmail.com>
Message-ID: <4EBD4913.6030405@rabbitmq.com>

Hi Ben,

On 11/11/11 15:12, Ben Lewis wrote:
> I have got a direct exchange feeding a durable queue, if I load say
> 50,000 messages onto the queue and then start a consumer to work through
> those item's.
> 
> My consumer creates the connection, then creates the model (I'm using
> .NET) and sets the Qos prefetch count to 1, then calls BasicGet,
> processes the message, sends an ack (BasicAck), then enumerates until
> BasicGet returns null. Finally disposing the model and closing the
> connection.

You don't need to set QoS if you retrieve messages synchronously
(BasicGet). QoS makes sense with BasicConsume. That is not the cause of
your trouble though.

> If I restart the host I have the RabbitMQ broker running on (Windows)
> after processing and ack'ing 40,000 messages while my consumer is
> working through the remaining items, when the RabbitMQ broker comes back
> online the 40,000 messages are redelivered (even though they were
> acknowledged).
> 
> Is this supposed to happen?

No. Acknowledged messages are forgotten about by the broker, so you
should not be seeing them again. What is the output of

rabbitmqctl list_queues name messages_ready messages_unacknowledged

before and after the restart? Is it possible that you are somehow not
acknowledging the messages? Do you get the same result if you use the
noAck flag of BasicGet?

If you are using transactions and failing to commit the transaction then
you could see apparently acknowledged message reappearing - is that a
possibility?

> If this is by design, any suggestions or advice on how I can minimise
> the number of redelivered messages if the broker dies/restarts?

If you don't care about persisting messages then you can publish the
messages in non-persistent mode (set the delivery mode in the basic
properties to 1).


-Emile

From stuckinwigan at gmail.com  Fri Nov 11 17:44:00 2011
From: stuckinwigan at gmail.com (Ben Lewis)
Date: Fri, 11 Nov 2011 17:44:00 +0000
Subject: [rabbitmq-discuss] Acknowledged Messages Requeued
In-Reply-To: <4EBD4913.6030405@rabbitmq.com>
References: <CAHQ1f1X+t9TETRt0YveordZC2=HhCOscDNPgAZ54LetyXJQx7A@mail.gmail.com>
	<4EBD4913.6030405@rabbitmq.com>
Message-ID: <CAHQ1f1UU+h1bv1GbuuF0JkoqL+zkua1Lp07SCpJaDX21GjED2w@mail.gmail.com>

Hi Emile,

Thanks for the response. Here's the output with from the rabbitmqctl
command at different stages:

First, with me ack'ing the messages:

Prior to starting consumer
------------------------
Listing queues ...
Test.ItemProcess    67645    0
...done.

As consumer is consuming, just reboot rebooting broker
------------------------
Listing queues ...
Test.ItemProcess    42936    1
...done.

After broker rebooted and RabbitMQ started
------------------------
Listing queues ...
Test.ItemProcess    67645    0
...done.

With noack=true the messages are delivered to the client quicker than I can
reboot the broker, but when it comes back up the queue is empty with 0
unacknowledged messages.

I'm not using transactions (I put a seperate console app together to test
this) and I do want to persist and acknowledge the message. I've stepped
through my code in debug and its hitting the BasicAck method.

Kind Regards,

Ben

On Fri, Nov 11, 2011 at 4:10 PM, Emile Joubert <emile at rabbitmq.com> wrote:

> Hi Ben,
>
> On 11/11/11 15:12, Ben Lewis wrote:
> > I have got a direct exchange feeding a durable queue, if I load say
> > 50,000 messages onto the queue and then start a consumer to work through
> > those item's.
> >
> > My consumer creates the connection, then creates the model (I'm using
> > .NET) and sets the Qos prefetch count to 1, then calls BasicGet,
> > processes the message, sends an ack (BasicAck), then enumerates until
> > BasicGet returns null. Finally disposing the model and closing the
> > connection.
>
> You don't need to set QoS if you retrieve messages synchronously
> (BasicGet). QoS makes sense with BasicConsume. That is not the cause of
> your trouble though.
>
> > If I restart the host I have the RabbitMQ broker running on (Windows)
> > after processing and ack'ing 40,000 messages while my consumer is
> > working through the remaining items, when the RabbitMQ broker comes back
> > online the 40,000 messages are redelivered (even though they were
> > acknowledged).
> >
> > Is this supposed to happen?
>
> No. Acknowledged messages are forgotten about by the broker, so you
> should not be seeing them again. What is the output of
>
> rabbitmqctl list_queues name messages_ready messages_unacknowledged
>
> before and after the restart? Is it possible that you are somehow not
> acknowledging the messages? Do you get the same result if you use the
> noAck flag of BasicGet?
>
> If you are using transactions and failing to commit the transaction then
> you could see apparently acknowledged message reappearing - is that a
> possibility?
>
> > If this is by design, any suggestions or advice on how I can minimise
> > the number of redelivered messages if the broker dies/restarts?
>
> If you don't care about persisting messages then you can publish the
> messages in non-persistent mode (set the delivery mode in the basic
> properties to 1).
>
>
> -Emile
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/1e42d996/attachment.htm>

From james.r.carr at gmail.com  Fri Nov 11 21:24:51 2011
From: james.r.carr at gmail.com (James Carr)
Date: Fri, 11 Nov 2011 15:24:51 -0600
Subject: [rabbitmq-discuss] Blueprint Java Project
Message-ID: <CAJreXKDP2Unb_7JggMc5nvr0dYnZ9GFPdMcay1+hKNNnViLHaA@mail.gmail.com>

Hi All,

I thought I'd share a project we created at my workplace intended to
give developers various examples of using rabbitmq in java based
projects. It also gives our in house developers a good starting point
to learn rabbitMQ.

You can find it at https://github.com/CARFAX/blueprint-rabbitmq.
Please feel free to contibute or provide feedback... I'm trying to
make this a nice starting point for devs getting started with
rabbitMQ.

Thanks,
James

From baldgoth at gmail.com  Fri Nov 11 21:30:17 2011
From: baldgoth at gmail.com (TrueWill)
Date: Fri, 11 Nov 2011 13:30:17 -0800 (PST)
Subject: [rabbitmq-discuss] Statistics database could not be contacted
In-Reply-To: <4EBCE36F.9040207@rabbitmq.com>
References: <18139766.2400.1320956231128.JavaMail.geo-discussion-forums@yqhd1>
	<4EBCE36F.9040207@rabbitmq.com>
Message-ID: <26389243.1966.1321047017198.JavaMail.geo-discussion-forums@yqoo7>

I am seeing a fair number of errors similar to the following in 
rabbit at ourservername.log:

=ERROR REPORT==== 11-Nov-2011::15:19:26 ===
exception on TCP connection <0.22389.969> from someIPaddress:59538
{channel0_error,opening,
                {amqp_error,access_refused,
                            "access to vhost '2147483647' refused for user 
'ourAdminUserName'",
                            'connection.open'}}

The user name is a valid one. We did use the Management page to remove the 
guest user for security.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/53fbe6cb/attachment.htm>

From jolong at vmware.com  Fri Nov 11 21:31:52 2011
From: jolong at vmware.com (Josh Long)
Date: Fri, 11 Nov 2011 13:31:52 -0800 (PST)
Subject: [rabbitmq-discuss] Blueprint Java Project
In-Reply-To: <CAJreXKDP2Unb_7JggMc5nvr0dYnZ9GFPdMcay1+hKNNnViLHaA@mail.gmail.com>
References: <CAJreXKDP2Unb_7JggMc5nvr0dYnZ9GFPdMcay1+hKNNnViLHaA@mail.gmail.com>
Message-ID: <A5272C91-EDDC-4A77-9BC1-E30C8F029739@vmware.com>

SOOO going in next Tuesday's SpringSource.org roundup of communal awesomeness ! (Called "this week in spring")

Well done!

Thanks, 
Josh Long
Spring Developer Advocate
SpringSource, a division of VMware
....
Sent from my iPad


On Nov 11, 2011, at 1:25 PM, James Carr <james.r.carr at gmail.com> wrote:

> Hi All,
> 
> I thought I'd share a project we created at my workplace intended to
> give developers various examples of using rabbitmq in java based
> projects. It also gives our in house developers a good starting point
> to learn rabbitMQ.
> 
> You can find it at https://github.com/CARFAX/blueprint-rabbitmq.
> Please feel free to contibute or provide feedback... I'm trying to
> make this a nice starting point for devs getting started with
> rabbitMQ.
> 
> Thanks,
> James
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From simone.busoli at gmail.com  Fri Nov 11 21:33:07 2011
From: simone.busoli at gmail.com (Simone Busoli)
Date: Fri, 11 Nov 2011 22:33:07 +0100
Subject: [rabbitmq-discuss] Acknowledged Messages Requeued
In-Reply-To: <CAHQ1f1UU+h1bv1GbuuF0JkoqL+zkua1Lp07SCpJaDX21GjED2w@mail.gmail.com>
References: <CAHQ1f1X+t9TETRt0YveordZC2=HhCOscDNPgAZ54LetyXJQx7A@mail.gmail.com>
	<4EBD4913.6030405@rabbitmq.com>
	<CAHQ1f1UU+h1bv1GbuuF0JkoqL+zkua1Lp07SCpJaDX21GjED2w@mail.gmail.com>
Message-ID: <CAOn7oW9EHUxJC3-x9R924OA=RCaXCBaWPjs9AEiEtkK0cGxf6A@mail.gmail.com>

Ben, are you supplying the correct deliveryTag to the BasicAck?
On Nov 11, 2011 6:44 PM, "Ben Lewis" <stuckinwigan at gmail.com> wrote:

> Hi Emile,
>
> Thanks for the response. Here's the output with from the rabbitmqctl
> command at different stages:
>
> First, with me ack'ing the messages:
>
> Prior to starting consumer
> ------------------------
> Listing queues ...
> Test.ItemProcess    67645    0
> ...done.
>
> As consumer is consuming, just reboot rebooting broker
> ------------------------
> Listing queues ...
> Test.ItemProcess    42936    1
> ...done.
>
> After broker rebooted and RabbitMQ started
> ------------------------
> Listing queues ...
> Test.ItemProcess    67645    0
> ...done.
>
> With noack=true the messages are delivered to the client quicker than I
> can reboot the broker, but when it comes back up the queue is empty with 0
> unacknowledged messages.
>
> I'm not using transactions (I put a seperate console app together to test
> this) and I do want to persist and acknowledge the message. I've stepped
> through my code in debug and its hitting the BasicAck method.
>
> Kind Regards,
>
> Ben
>
> On Fri, Nov 11, 2011 at 4:10 PM, Emile Joubert <emile at rabbitmq.com> wrote:
>
>> Hi Ben,
>>
>> On 11/11/11 15:12, Ben Lewis wrote:
>> > I have got a direct exchange feeding a durable queue, if I load say
>> > 50,000 messages onto the queue and then start a consumer to work through
>> > those item's.
>> >
>> > My consumer creates the connection, then creates the model (I'm using
>> > .NET) and sets the Qos prefetch count to 1, then calls BasicGet,
>> > processes the message, sends an ack (BasicAck), then enumerates until
>> > BasicGet returns null. Finally disposing the model and closing the
>> > connection.
>>
>> You don't need to set QoS if you retrieve messages synchronously
>> (BasicGet). QoS makes sense with BasicConsume. That is not the cause of
>> your trouble though.
>>
>> > If I restart the host I have the RabbitMQ broker running on (Windows)
>> > after processing and ack'ing 40,000 messages while my consumer is
>> > working through the remaining items, when the RabbitMQ broker comes back
>> > online the 40,000 messages are redelivered (even though they were
>> > acknowledged).
>> >
>> > Is this supposed to happen?
>>
>> No. Acknowledged messages are forgotten about by the broker, so you
>> should not be seeing them again. What is the output of
>>
>> rabbitmqctl list_queues name messages_ready messages_unacknowledged
>>
>> before and after the restart? Is it possible that you are somehow not
>> acknowledging the messages? Do you get the same result if you use the
>> noAck flag of BasicGet?
>>
>> If you are using transactions and failing to commit the transaction then
>> you could see apparently acknowledged message reappearing - is that a
>> possibility?
>>
>> > If this is by design, any suggestions or advice on how I can minimise
>> > the number of redelivered messages if the broker dies/restarts?
>>
>> If you don't care about persisting messages then you can publish the
>> messages in non-persistent mode (set the delivery mode in the basic
>> properties to 1).
>>
>>
>> -Emile
>>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111111/3a5f63c1/attachment.htm>

From shenyute at gmail.com  Sat Nov 12 12:18:22 2011
From: shenyute at gmail.com (Yu-Teh Shen)
Date: Sat, 12 Nov 2011 20:18:22 +0800
Subject: [rabbitmq-discuss] [HA] restart node and restart mirror node issue
Message-ID: <CABWH_X5kPRW3sm5eccrZqB+y966Jqj2Qkfe-k_-43K6LTE7ybQ@mail.gmail.com>

Hello all.

I use  rabbitMQ 2.7's mirror queue with 'x-ha-policy: nodes'.

I just found a weird situation.

I have a queue with master node: A and mirror node: B.

I sent message to the queue. And then I stop Node A.

The message can still access because it is in node B (for mirror queue).

But after I restart node A, now the management webgui shows Node is B and
there is no Mirrors for the queue.

If I send message to the same queue and stop node B, the message will not
mirrored in node A.

Is the behavior correct? I thought after I restart Node A, it should back
to the mirror node of Node B.

Thanks

Shen, Yu-Teh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111112/a15fd543/attachment.htm>

From jonathan.s.oliver42 at gmail.com  Sat Nov 12 21:47:44 2011
From: jonathan.s.oliver42 at gmail.com (Jonathan Oliver)
Date: Sat, 12 Nov 2011 13:47:44 -0800 (PST)
Subject: [rabbitmq-discuss] Message durability and partition tolerence
In-Reply-To: <CACOPnvdQvnOQh+jbvVOq-aGWsdaihwoydKj8fDN=fxSvUZLUeg@mail.gmail.com>
References: <2159662.547.1320769605606.JavaMail.geo-discussion-forums@prog16>
	<CACOPnvdQvnOQh+jbvVOq-aGWsdaihwoydKj8fDN=fxSvUZLUeg@mail.gmail.com>
Message-ID: <8131840.733.1321134464746.JavaMail.geo-discussion-forums@yqiu15>

I'm just thinking of normal cloud-computing/distributed scenarios where any 
instance may be transient and may go offline at any time for any reason. 
 Ideally when the instance comes back online (and the local storage isn't 
transient/ephemeral), whatever was in the queue will still be there when it 
rejoins the cluster.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111112/0bd7ad2b/attachment.htm>

From benbennett at gmail.com  Sun Nov 13 20:50:20 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Sun, 13 Nov 2011 14:50:20 -0600
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
	connection
In-Reply-To: <1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>
	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>
	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>
	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>
Message-ID: <CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>

Here is the stacktrace from the running test cases. I just ran the
test cases 4 times without a hang on the same vm , then last 3 times
it hangs.

The tests hang for 20 minutes then the junit run kills the jvm for
timeout exception.

In the rabbitmq log it is just says the connection abruptly close at
the same time of the junit runner killed the unit tests.

I was going to attempt to put a timeout on the connection close method
but that really would be a hack.


The stacktrace is exactly the same as this one
http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-August/014789.html
.
http://pastebin.com/u1Z0Qyrr

Also before the test cases are run I reinstall rabbitmq , delete all
vhosts and recreate them . So there should not be any memory issues .

The only thread that is in the RUNNABLE state is at the beginning of
the the stacktrace. I realize this is causing the hang but I don't
understand why no reply is getting through from rabbit.

at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:129)

Searching the interwebs points to the remote server not responding.
http://javaeesupportpatterns.blogspot.com/2011/04/javanetsocketinputstreamsocketread0.html

I can hook up wireshark next to try to diagnose the problem , but I
thought tracer class would be sufficient.



On Fri, Nov 11, 2011 at 7:05 AM, Steve Powell <steve at rabbitmq.com> wrote:
> Hi Benjamin,
>
> After investigation of our code, I'm now no longer convinced that
> your hangs occur because we haven't trapped the EOFException
> correctly. ?We ought to be handling it properly.
>
> I cannot reproduce this problem here, yet.
>
> Could you please do some more investigation for us? ?What would
> be helpful is for you to take a java stack dump (use jstack) when
> the hang occurs.
>
> ? ?jstack -l <pid>
>
> ought to be sufficient, with <pid> the process number of the client JVM.
>
> That will help us to find out what is hung where.
> (It would be most helpful if you could do this on the
> latest release -- RabbitMQ 2.7.0, but an older one is fine.)
>
> Steve Powell
> steve at rabbitmq.com
> [wrk: +44-2380-111-528] [mob: +44-7815-838-558]
>
> On 3 Nov 2011, at 21:40, Benjamin Bennett wrote:
>> http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-November/015980.html
>

From benbennett at gmail.com  Sun Nov 13 20:54:11 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Sun, 13 Nov 2011 14:54:11 -0600
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
	connection
In-Reply-To: <CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>
	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>
	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>
	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>
	<CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>
Message-ID: <CAGnU7ui17iGzP9116aYDtcQ5F8fGWihWm=u9z21uGtsrcDBL0g@mail.gmail.com>

Is there any setting to put rabbitmq into debug logging state?

On Sun, Nov 13, 2011 at 2:50 PM, Benjamin Bennett <benbennett at gmail.com> wrote:
> Here is the stacktrace from the running test cases. I just ran the
> test cases 4 times without a hang on the same vm , then last 3 times
> it hangs.
>
> The tests hang for 20 minutes then the junit run kills the jvm for
> timeout exception.
>
> In the rabbitmq log it is just says the connection abruptly close at
> the same time of the junit runner killed the unit tests.
>
> I was going to attempt to put a timeout on the connection close method
> but that really would be a hack.
>
>
> The stacktrace is exactly the same as this one
> http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-August/014789.html
> .
> http://pastebin.com/u1Z0Qyrr
>
> Also before the test cases are run I reinstall rabbitmq , delete all
> vhosts and recreate them . So there should not be any memory issues .
>
> The only thread that is in the RUNNABLE state is at the beginning of
> the the stacktrace. I realize this is causing the hang but I don't
> understand why no reply is getting through from rabbit.
>
> at java.net.SocketInputStream.socketRead0(Native Method)
> at java.net.SocketInputStream.read(SocketInputStream.java:129)
>
> Searching the interwebs points to the remote server not responding.
> http://javaeesupportpatterns.blogspot.com/2011/04/javanetsocketinputstreamsocketread0.html
>
> I can hook up wireshark next to try to diagnose the problem , but I
> thought tracer class would be sufficient.
>
>
>
> On Fri, Nov 11, 2011 at 7:05 AM, Steve Powell <steve at rabbitmq.com> wrote:
>> Hi Benjamin,
>>
>> After investigation of our code, I'm now no longer convinced that
>> your hangs occur because we haven't trapped the EOFException
>> correctly. ?We ought to be handling it properly.
>>
>> I cannot reproduce this problem here, yet.
>>
>> Could you please do some more investigation for us? ?What would
>> be helpful is for you to take a java stack dump (use jstack) when
>> the hang occurs.
>>
>> ? ?jstack -l <pid>
>>
>> ought to be sufficient, with <pid> the process number of the client JVM.
>>
>> That will help us to find out what is hung where.
>> (It would be most helpful if you could do this on the
>> latest release -- RabbitMQ 2.7.0, but an older one is fine.)
>>
>> Steve Powell
>> steve at rabbitmq.com
>> [wrk: +44-2380-111-528] [mob: +44-7815-838-558]
>>
>> On 3 Nov 2011, at 21:40, Benjamin Bennett wrote:
>>> http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-November/015980.html
>>
>

From matthias at rabbitmq.com  Sun Nov 13 21:04:35 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 13 Nov 2011 21:04:35 +0000
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
 connection
In-Reply-To: <CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>
	<CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>
Message-ID: <4EC030E3.1090807@rabbitmq.com>

Benjamin,

On 13/11/11 20:50, Benjamin Bennett wrote:
> Here is the stacktrace from the running test cases. I just ran the
> test cases 4 times without a hang on the same vm , then last 3 times
> it hangs.
>
> The tests hang for 20 minutes

When that happens, please run 'rabbitmqctl report' and send us the output.

> I can hook up wireshark next to try to diagnose the problem , but I
> thought tracer class would be sufficient.

Since you were unable to reproduce the problem with the tracer, 
wireshark is the next logical step.

Regards,

Matthias.

From benbennett at gmail.com  Mon Nov 14 00:24:55 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Sun, 13 Nov 2011 18:24:55 -0600
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
	connection
In-Reply-To: <4EC030E3.1090807@rabbitmq.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>
	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>
	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>
	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>
	<CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>
	<4EC030E3.1090807@rabbitmq.com>
Message-ID: <CAGnU7uj8PhXp+7JMcJ-XsDrcYNDKno-t5HnGnrwup+F41vCyHw@mail.gmail.com>

I was able to with tracer see beginning of thread, tracer threw an exception
On Nov 13, 2011 3:04 PM, "Matthias Radestock" <matthias at rabbitmq.com> wrote:

> Benjamin,
>
> On 13/11/11 20:50, Benjamin Bennett wrote:
>
>> Here is the stacktrace from the running test cases. I just ran the
>> test cases 4 times without a hang on the same vm , then last 3 times
>> it hangs.
>>
>> The tests hang for 20 minutes
>>
>
> When that happens, please run 'rabbitmqctl report' and send us the output.
>
>  I can hook up wireshark next to try to diagnose the problem , but I
>> thought tracer class would be sufficient.
>>
>
> Since you were unable to reproduce the problem with the tracer, wireshark
> is the next logical step.
>
> Regards,
>
> Matthias.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111113/59b05154/attachment.htm>

From mihirm at omc-international.com.au  Mon Nov 14 02:44:23 2011
From: mihirm at omc-international.com.au (Mihir Mone)
Date: Mon, 14 Nov 2011 10:44:23 +0800
Subject: [rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
In-Reply-To: <4EBD174E.8000102@rabbitmq.com>
References: <4EB9CA70.5070107@omc-international.com.au>	<4EBA8A48.2090305@rabbitmq.com>	<4EBB0F23.7030601@omc-international.com.au>
	<4EBB7B3A.1040201@rabbitmq.com> <4EBD174E.8000102@rabbitmq.com>
Message-ID: <4EC08087.7090003@omc-international.com.au>

Cheers mate, All hunky dory now.

I do have a doubt/suggestion though. What do the keyfile, certfile and 
cacert fields in the source and destination columns show ? The MD5 
hashes ? It becomes cumbersome since if you have a number of shovels 
defined with SSL the page becomes very very large due to these fields. 
Can't we just show the location of the files ? I know that suggestion 
might be a security fail but then having the page become huge is also 
not desirable. See attached image. Look how big the page is and I have 
only 4 shovels defined at this point. We will potentially have around 
12-13 in the near future.

Also I think the host field can be shown in plain text. I don't think 
that would be a security risk.

Regards,
Mihir

On 11/11/2011 8:38 PM, Simon MacMullen wrote:
> On 10/11/11 07:20, Matthias Radestock wrote:
>> Oops, looks like the patch was compiled against the 2.7.0 version of the
>> erlang client rather than 2.6.1. Simon is on holiday today but will
>> hopefully look into this on his return.
>
> Oops. *Sticks head in bucket*
>
> Mihir, I've updated the .ez at the URL upthread - can you try again?
>
> Cheers, Simon
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: shovels.png
Type: image/png
Size: 71422 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/7795d9d7/attachment.png>

From rgilland1966 at gmail.com  Mon Nov 14 06:45:04 2011
From: rgilland1966 at gmail.com (Robert Gilland)
Date: Sun, 13 Nov 2011 22:45:04 -0800 (PST)
Subject: [rabbitmq-discuss] Server connections not closing
In-Reply-To: <4EBBA756.8050701@rabbitmq.com>
References: <1b88645e-26fe-45b5-bdb8-ad42e551f7e4@u24g2000pru.googlegroups.com>
	<4EBA8958.20406@rabbitmq.com>
	<b2a63d75-6175-42a8-9f03-fae5d1df823a@m26g2000prn.googlegroups.com>
	<4EBBA756.8050701@rabbitmq.com>
Message-ID: <d175b484-ec2e-4275-8b56-0e014b89ef19@u37g2000prh.googlegroups.com>

Just an update

We are no closer currently to finding this gremlin.

We think it has something to do with the DSL Routers firewall,
stopping the TCP tear down process.

Kind Regards,

Robert.

From David.Xie at morningstar.com  Mon Nov 14 07:55:30 2011
From: David.Xie at morningstar.com (David Xie)
Date: Mon, 14 Nov 2011 01:55:30 -0600
Subject: [rabbitmq-discuss] How to exit from the email list.
In-Reply-To: <d175b484-ec2e-4275-8b56-0e014b89ef19@u37g2000prh.googlegroups.com>
References: <1b88645e-26fe-45b5-bdb8-ad42e551f7e4@u24g2000pru.googlegroups.com><4EBA8958.20406@rabbitmq.com><b2a63d75-6175-42a8-9f03-fae5d1df823a@m26g2000prn.googlegroups.com><4EBBA756.8050701@rabbitmq.com>
	<d175b484-ec2e-4275-8b56-0e014b89ef19@u37g2000prh.googlegroups.com>
Message-ID: <78B6C79154CC464F8ACDD67E8CE55431023B786D@MSEX891.morningstar.com>

Hi all,

I don't know how to exit from the e-mail list.  

Who can tell me? 

Thanks!

________________________________
David Xie
???
One Team
Morningstar Shenzhen Ltd.

Morningstar. Illuminating investing worldwide.

+86 755 0000-0000 voice
+86 135-xxxx-4676 mobile
David.Xie at morningstar.com
4F, HuaRong Insurance building, Mintian Road, Futian district, Shenzhen

http://cn.morningstar.com

This e-mail contains privileged and confidential information and is intended only for the use of the person(s) named above. Any dissemination, distribution, or duplication of this communication without prior written consent from Morningstar is strictly prohibited. If you have received this message in error, please contact the sender immediately and delete the materials from any computer.

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Robert Gilland
Sent: Monday, November 14, 2011 2:45 PM
To: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Server connections not closing

Just an update

We are no closer currently to finding this gremlin.

We think it has something to do with the DSL Routers firewall, stopping the TCP tear down process.

Kind Regards,

Robert.
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From matthias at rabbitmq.com  Mon Nov 14 08:10:06 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 14 Nov 2011 08:10:06 +0000
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
 connection
In-Reply-To: <CAGnU7uj8PhXp+7JMcJ-XsDrcYNDKno-t5HnGnrwup+F41vCyHw@mail.gmail.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>	<CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>	<4EC030E3.1090807@rabbitmq.com>
	<CAGnU7uj8PhXp+7JMcJ-XsDrcYNDKno-t5HnGnrwup+F41vCyHw@mail.gmail.com>
Message-ID: <4EC0CCDE.3030505@rabbitmq.com>

Benjamin,

On 14/11/11 00:24, Benjamin Bennett wrote:
> I was able to with tracer see beginning of thread, tracer threw an exception

That's not unusual. Neither the client or the tracer got stuck though, 
which is the problem we are trying to investigate here.

Matthias.

From otacorp at gmail.com  Mon Nov 14 09:24:37 2011
From: otacorp at gmail.com (Stefano Ghio)
Date: Mon, 14 Nov 2011 10:24:37 +0100
Subject: [rabbitmq-discuss] RabbitMQ Windows service dependencies
In-Reply-To: <4EBD1DEE.1060300@rabbitmq.com>
References: <4EBCED10.50902@eng.it> <4EBD1DEE.1060300@rabbitmq.com>
Message-ID: <4EC0DE55.5070908@gmail.com>

Hi,

yes that was it. Starting Workstation service before RabbitMQ service 
solved the issue.

Thank you,

regards

On 11/11/2011 14.06, Emile Joubert wrote:
> Hi Stefano,
>
> On 11/11/11 09:38, Stefano Ghio wrote:
>> Greetings,
>>
>> I just installed RabbitMQ on Windows XP SP3 following the guide but when
>> I try to start the rabbitmq-service it tells me it cannot start the
>> service dependency group. Can someone tell me on which services it
>> depends so that I can try to enable and start them?
> There may be a generic dependency on the Workstation service. What does
> the eventlog say?
>
>
> -Emile
>


-- 
Dr. Stefano Ghio - Italy

Website: http://groglogs.blogspot.com/
Facebook: http://www.facebook.com/grog.brush
LinkedIn: http://www.linkedin.com/in/ghiostefano

*If you received this message but you are not its recipient, please 
ignore it and warn me, thank you.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/4e2d384b/attachment.htm>

From alexandru at rabbitmq.com  Mon Nov 14 10:11:26 2011
From: alexandru at rabbitmq.com (Alexandru =?utf-8?B?U2N2b3LFo292?=)
Date: Mon, 14 Nov 2011 10:11:26 +0000
Subject: [rabbitmq-discuss] For what applications are you using RabbitMQ?
In-Reply-To: <CANSYJo+jkWgy3NQCyYjyhjDHJYt8DYeQmZ3p0QrD2MzUS+oyig@mail.gmail.com>
References: <CANSYJo+jkWgy3NQCyYjyhjDHJYt8DYeQmZ3p0QrD2MzUS+oyig@mail.gmail.com>
Message-ID: <20111114101125.GA4273@southbank.eng.vmware.com>

Hi Jon,

> Anyway, with the seemingly limitless applications for Message Queuing,
> I'm really curious as to what everyone is using their message queues to do
> and how they have them configured,
> 
> would anyone care to share their setup(s)?

Since nobody else seems to be picking this up, here are a bunch of "Use
Cases" and other assorted links:
  http://www.rabbitmq.com/delicious.html

Cheers,
Alex

On Wed, Nov 09, 2011 at 05:57:29PM -0700, Jon Jon wrote:
> Hello All,
> 
> I have just recently begun my foray into the world of enterprise class
> message queuing.
> To be honest, it's a bit intimidating at first, but that feeling is quickly
> overwhelmed with excitement and wonder. :)
> There is so much to learn!  But message queuing really seems to be the way
> to go for scalable, distributed workloads.
> (I have been trying to get a Kerrighed cluster up and running and had been
> only mildly successful
> when I started a parallel MCollective project using RabbitMQ, and thus, the
> introduction to Rabbit)
> 
> Anyway, with the seemingly limitless applications for Message Queuing,
> I'm really curious as to what everyone is using their message queues to do
> and how they have them configured,
> 
> would anyone care to share their setup(s)?
> 
> Thanks, and I look forward to reading your responses.
> Jon

> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


From irmo.manie at gmail.com  Mon Nov 14 10:43:24 2011
From: irmo.manie at gmail.com (Irmo Manie)
Date: Mon, 14 Nov 2011 11:43:24 +0100
Subject: [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
In-Reply-To: <E743030D-082A-4D3D-96BE-14FCAE7AFE60@rabbitmq.com>
References: <CAAcXTOaNsa_wLLArna9gUruXTE2D4EFc1Z1BTKBgFGJ+1ZU=Tw@mail.gmail.com>
	<D1E9035C-9DB8-479D-8A5B-166411D19C24@rabbitmq.com>
	<CAAcXTOaxGzSS=JbjG3LQ0nEvFPozvKg505z0QY1wFsqQzinwpA@mail.gmail.com>
	<E743030D-082A-4D3D-96BE-14FCAE7AFE60@rabbitmq.com>
Message-ID: <CAAcXTOa1xRyqqkm7CkuTGM0rXNy6-13YEk-OB12=M3FpQ6OfiA@mail.gmail.com>

Hi Steve,

> Incidentally, we are interested if you see any anomalies in the
> Java Client info on the rabbitmq documentation pages. Since
> there have been some subtle threading changes in this release
> we appreciate feedback on these issues.

There is an expectation (at least mine) that the passed in
ExecutorService on newConnection is managed by the underlying
connection.
On any shutdown signal I see that the ChannelManager does this when
handling the exception.

There is a problem when connecting to a non-existing host. The
FrameHandler is created, and throwing a UnknownHostException, before
the AMQConnection is created and the ExecutorService is 'managed' and
thus the shutdown of the ExecutorService is left to the user again.

You can imagine that this causes a nice leak when you have an
automatic reconnection setup in place.

------------------

Also I noticed that basicConsume still causes the whole connection to
go down if you throw an exception.
I know that in previous client versions this was because it was called
from the connection thread, but I was expected this to be 'fixed' in
this release because of the separate thread pool for channels.

- Irmo

From stuckinwigan at gmail.com  Mon Nov 14 10:46:04 2011
From: stuckinwigan at gmail.com (Ben Lewis)
Date: Mon, 14 Nov 2011 10:46:04 +0000
Subject: [rabbitmq-discuss] Acknowledged Messages Requeued
In-Reply-To: <CAHQ1f1UU+h1bv1GbuuF0JkoqL+zkua1Lp07SCpJaDX21GjED2w@mail.gmail.com>
References: <CAHQ1f1X+t9TETRt0YveordZC2=HhCOscDNPgAZ54LetyXJQx7A@mail.gmail.com>
	<4EBD4913.6030405@rabbitmq.com>
	<CAHQ1f1UU+h1bv1GbuuF0JkoqL+zkua1Lp07SCpJaDX21GjED2w@mail.gmail.com>
Message-ID: <CAHQ1f1U1OYpFTfWdkCkU8PHR0bcWZbbXTHRo2z6_bKr3fq5dTw@mail.gmail.com>

I've done some more testing and knocked up two sample apps:

Publisher (loads up 100,000 items)
http://pastebin.com/E0ixXP8c

Consumer
http://pastebin.com/yAMcHkbu

If I run the publisher, then once that has enqueued 100,000 items run the
consumer. If after it has consumed 20,000 and still consuming, I do a
graceful start of the RabbitMQ broker's OS (running on Windows Server 2008,
so Start, Shutdown/Restart), when the broker comes back online I have
100,000 items in the queue (even though approx 20,000 are consumed and
acknowledged).

I built a test host running Ubuntu which seems to handle the graceful OS
restarts and will report the queue size (approx 80,000).

If I do a dirty shutdown (remove power, forcefully stop VM, etc) neither
Windows or Ubuntu have persisted to disc but I assume that may be related
to it not being committed to disk at that stage.

Kind Regards,

Ben

On Fri, Nov 11, 2011 at 5:44 PM, Ben Lewis <stuckinwigan at gmail.com> wrote:

> Hi Emile,
>
> Thanks for the response. Here's the output with from the rabbitmqctl
> command at different stages:
>
> First, with me ack'ing the messages:
>
> Prior to starting consumer
> ------------------------
> Listing queues ...
> Test.ItemProcess    67645    0
> ...done.
>
> As consumer is consuming, just reboot rebooting broker
> ------------------------
> Listing queues ...
> Test.ItemProcess    42936    1
> ...done.
>
> After broker rebooted and RabbitMQ started
> ------------------------
> Listing queues ...
> Test.ItemProcess    67645    0
> ...done.
>
> With noack=true the messages are delivered to the client quicker than I
> can reboot the broker, but when it comes back up the queue is empty with 0
> unacknowledged messages.
>
> I'm not using transactions (I put a seperate console app together to test
> this) and I do want to persist and acknowledge the message. I've stepped
> through my code in debug and its hitting the BasicAck method.
>
> Kind Regards,
>
> Ben
>
> On Fri, Nov 11, 2011 at 4:10 PM, Emile Joubert <emile at rabbitmq.com> wrote:
>
>> Hi Ben,
>>
>> On 11/11/11 15:12, Ben Lewis wrote:
>> > I have got a direct exchange feeding a durable queue, if I load say
>> > 50,000 messages onto the queue and then start a consumer to work through
>> > those item's.
>> >
>> > My consumer creates the connection, then creates the model (I'm using
>> > .NET) and sets the Qos prefetch count to 1, then calls BasicGet,
>> > processes the message, sends an ack (BasicAck), then enumerates until
>> > BasicGet returns null. Finally disposing the model and closing the
>> > connection.
>>
>> You don't need to set QoS if you retrieve messages synchronously
>> (BasicGet). QoS makes sense with BasicConsume. That is not the cause of
>> your trouble though.
>>
>> > If I restart the host I have the RabbitMQ broker running on (Windows)
>> > after processing and ack'ing 40,000 messages while my consumer is
>> > working through the remaining items, when the RabbitMQ broker comes back
>> > online the 40,000 messages are redelivered (even though they were
>> > acknowledged).
>> >
>> > Is this supposed to happen?
>>
>> No. Acknowledged messages are forgotten about by the broker, so you
>> should not be seeing them again. What is the output of
>>
>> rabbitmqctl list_queues name messages_ready messages_unacknowledged
>>
>> before and after the restart? Is it possible that you are somehow not
>> acknowledging the messages? Do you get the same result if you use the
>> noAck flag of BasicGet?
>>
>> If you are using transactions and failing to commit the transaction then
>> you could see apparently acknowledged message reappearing - is that a
>> possibility?
>>
>> > If this is by design, any suggestions or advice on how I can minimise
>> > the number of redelivered messages if the broker dies/restarts?
>>
>> If you don't care about persisting messages then you can publish the
>> messages in non-persistent mode (set the delivery mode in the basic
>> properties to 1).
>>
>>
>> -Emile
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/f09bf1b7/attachment.htm>

From stuckinwigan at gmail.com  Mon Nov 14 10:28:22 2011
From: stuckinwigan at gmail.com (Ben Lewis)
Date: Mon, 14 Nov 2011 10:28:22 +0000
Subject: [rabbitmq-discuss] Acknowledged Messages Requeued
In-Reply-To: <CAOn7oW9EHUxJC3-x9R924OA=RCaXCBaWPjs9AEiEtkK0cGxf6A@mail.gmail.com>
References: <CAHQ1f1X+t9TETRt0YveordZC2=HhCOscDNPgAZ54LetyXJQx7A@mail.gmail.com>
	<4EBD4913.6030405@rabbitmq.com>
	<CAHQ1f1UU+h1bv1GbuuF0JkoqL+zkua1Lp07SCpJaDX21GjED2w@mail.gmail.com>
	<CAOn7oW9EHUxJC3-x9R924OA=RCaXCBaWPjs9AEiEtkK0cGxf6A@mail.gmail.com>
Message-ID: <CAHQ1f1WT+WObSugQ08-8ZRGN+p5aRkkZCsEEc9FwAUxre8234w@mail.gmail.com>

-- Ben, are you supplying the correct deliveryTag to the BasicAck?

Yes, I'm passing into BasicAck the DeliveryTag property on the
BasicDeliverEventArgs class that is returned from the Dequeue method.

Kind Regards,

Ben

On Fri, Nov 11, 2011 at 9:33 PM, Simone Busoli <simone.busoli at gmail.com>wrote:

> Ben, are you supplying the correct deliveryTag to the BasicAck?
> On Nov 11, 2011 6:44 PM, "Ben Lewis" <stuckinwigan at gmail.com> wrote:
>
>> Hi Emile,
>>
>> Thanks for the response. Here's the output with from the rabbitmqctl
>> command at different stages:
>>
>> First, with me ack'ing the messages:
>>
>> Prior to starting consumer
>> ------------------------
>> Listing queues ...
>> Test.ItemProcess    67645    0
>> ...done.
>>
>> As consumer is consuming, just reboot rebooting broker
>> ------------------------
>> Listing queues ...
>> Test.ItemProcess    42936    1
>> ...done.
>>
>> After broker rebooted and RabbitMQ started
>> ------------------------
>> Listing queues ...
>> Test.ItemProcess    67645    0
>> ...done.
>>
>> With noack=true the messages are delivered to the client quicker than I
>> can reboot the broker, but when it comes back up the queue is empty with 0
>> unacknowledged messages.
>>
>> I'm not using transactions (I put a seperate console app together to test
>> this) and I do want to persist and acknowledge the message. I've stepped
>> through my code in debug and its hitting the BasicAck method.
>>
>> Kind Regards,
>>
>> Ben
>>
>> On Fri, Nov 11, 2011 at 4:10 PM, Emile Joubert <emile at rabbitmq.com>wrote:
>>
>>> Hi Ben,
>>>
>>> On 11/11/11 15:12, Ben Lewis wrote:
>>> > I have got a direct exchange feeding a durable queue, if I load say
>>> > 50,000 messages onto the queue and then start a consumer to work
>>> through
>>> > those item's.
>>> >
>>> > My consumer creates the connection, then creates the model (I'm using
>>> > .NET) and sets the Qos prefetch count to 1, then calls BasicGet,
>>> > processes the message, sends an ack (BasicAck), then enumerates until
>>> > BasicGet returns null. Finally disposing the model and closing the
>>> > connection.
>>>
>>> You don't need to set QoS if you retrieve messages synchronously
>>> (BasicGet). QoS makes sense with BasicConsume. That is not the cause of
>>> your trouble though.
>>>
>>> > If I restart the host I have the RabbitMQ broker running on (Windows)
>>> > after processing and ack'ing 40,000 messages while my consumer is
>>> > working through the remaining items, when the RabbitMQ broker comes
>>> back
>>> > online the 40,000 messages are redelivered (even though they were
>>> > acknowledged).
>>> >
>>> > Is this supposed to happen?
>>>
>>> No. Acknowledged messages are forgotten about by the broker, so you
>>> should not be seeing them again. What is the output of
>>>
>>> rabbitmqctl list_queues name messages_ready messages_unacknowledged
>>>
>>> before and after the restart? Is it possible that you are somehow not
>>> acknowledging the messages? Do you get the same result if you use the
>>> noAck flag of BasicGet?
>>>
>>> If you are using transactions and failing to commit the transaction then
>>> you could see apparently acknowledged message reappearing - is that a
>>> possibility?
>>>
>>> > If this is by design, any suggestions or advice on how I can minimise
>>> > the number of redelivered messages if the broker dies/restarts?
>>>
>>> If you don't care about persisting messages then you can publish the
>>> messages in non-persistent mode (set the delivery mode in the basic
>>> properties to 1).
>>>
>>>
>>> -Emile
>>>
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/38f62e16/attachment.htm>

From simon at rabbitmq.com  Mon Nov 14 11:39:08 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 14 Nov 2011 11:39:08 +0000
Subject: [rabbitmq-discuss] Statistics database could not be contacted
In-Reply-To: <26389243.1966.1321047017198.JavaMail.geo-discussion-forums@yqoo7>
References: <18139766.2400.1320956231128.JavaMail.geo-discussion-forums@yqhd1>	<4EBCE36F.9040207@rabbitmq.com>
	<26389243.1966.1321047017198.JavaMail.geo-discussion-forums@yqoo7>
Message-ID: <4EC0FDDC.7090505@rabbitmq.com>

On 11/11/11 21:30, TrueWill wrote:
> I am seeing a fair number of errors similar to the following in
> rabbit at ourservername.log:
>
> =ERROR REPORT==== 11-Nov-2011::15:19:26 ===
> exception on TCP connection <0.22389.969> from someIPaddress:59538
> {channel0_error,opening,
> {amqp_error,access_refused,
> "access to vhost '2147483647' refused for user 'ourAdminUserName'",
> 'connection.open'}}
>
> The user name is a valid one. We did use the Management page to remove
> the guest user for security.

That really does just look like a failed login attempt.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Mon Nov 14 12:19:17 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 14 Nov 2011 12:19:17 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely
	replicated	queues
In-Reply-To: <4EBAC618.4080608@rabbitmq.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>	<20111107135014.GD6082@rabbitmq.com>	<CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>	<20111107142240.GF6082@rabbitmq.com>	<4EBABD75.3020400@rabbitmq.com>	<CAGn3ETE2n8FW89yntBhV3aEpOTqVKO+4tWh3pc143RV5nsTqgg@mail.gmail.com>
	<4EBAC618.4080608@rabbitmq.com>
Message-ID: <4EC10745.2010209@rabbitmq.com>

On 09/11/11 18:27, Matthias Radestock wrote:
> On 09/11/11 18:02, Ashley Brown wrote:
>> See the Evernote link further up.
>
> Ah, yes. Bug found. No doubt Simon will be along with a patch shortly.

Indeed. If five days counts as "shortly".

Can you try:
http://www.rabbitmq.com/releases/plugins/v2.6.1/rabbitmq_management-2.6.1.ha-sync-fix.ez

(should work with 2.6.0 too) please?

(also available as 
http://www.rabbitmq.com/releases/plugins/v2.7.0/rabbitmq_management-2.7.0.ha-sync-fix.ez)

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From steghio at eng.it  Mon Nov 14 12:22:18 2011
From: steghio at eng.it (Stefano Ghio)
Date: Mon, 14 Nov 2011 13:22:18 +0100
Subject: [rabbitmq-discuss] Create exchanges and queues beforehand
Message-ID: <4EC107FA.5080800@eng.it>

Cheers,

I was fiddling with the Topic examples and I ran into a problem. If I 
start the client "ReceiveLogsTopic" before the sender "EmitLogTopic" I 
see everything working fine. Sender sends and client receives and 
displays right.

However, if I start the sender before the client, the message gets sent 
but then nothing happens, the queue appears to be empty and the client 
keeps waiting for nothing.

I think that's correct since the queue is created at runtime and is 
destroyed when there's nothing more to do with it as explained in the 
documentation:

channel.exchangeDeclare(*exchangeName*,*"direct"*,*true*);
String*queueName*  = channel.queueDeclare().getQueue();
channel.queueBind(*queueName*,*exchangeName*,*routingKey*);

This will actively declare the following objects, both of which can be 
customised by using additional parameters. Here neither of them have any 
special arguments.

 1. a durable, non-autodelete exchange of "direct" type
 2. a non-durable, exclusive, autodelete queue with a generated name



What I would like to do instead is (example):

1)
create 3 exchanges: EXA, EXB and EXC
for every exchange, create 2 queues and bind them to it: Q1 and Q2. All 
queues have the same name but are not the same object (see attached PNG 
if needed)
2)
send a message to be queued in queue Q1 through EXA
send the same message to be queued in queue Q1 through EXB
message then is queued in two different queues which happen to have the 
same name but are binded to different exchanges
3)
poll Q1 through EXA to read messages and delete message
poll Q1 through EXB to read messages and leave message there
message then is no longer in EXA-Q1 but is still available through EXB-Q1

I don't and can't know if and when someone will try to send or read 
messages.

I guess it would require me to declare and bind a queue beforehand, 
maybe by using 3 classes: setUpExchangeAndQueues, sendMessage, 
pollMessages, but I'm a bit at loss here, could anyone point me in the 
right direction?

I read that:

If several clients want to share a queue with a well-known name, this 
code would be appropriate:

channel.exchangeDeclare(*exchangeName*,*"direct"*,*true*);
channel.queueDeclare(*queueName*,*true*,*false*,*false*,*null*);
channel.queueBind(*queueName*,*exchangeName*,*routingKey*);

This will actively declare:

 1. a durable, non-autodelete exchange of "direct" type
 2. a durable, non-exclusive, non-autodelete queue with a well-known name

Tried it but failed.

Please advise, I'm going crazy on this.

Thank you,

have a nice day
-- 
Dr. Stefano Ghio - ENG Engineering Italy

Website: http://groglogs.blogspot.com/

*If you received this message but you are not its recipient, please 
ignore it and warn me, thank you.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/c323acb7/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: exq.PNG
Type: image/png
Size: 8402 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/c323acb7/attachment.png>

From ashley at spider.io  Mon Nov 14 12:23:23 2011
From: ashley at spider.io (Ashley Brown)
Date: Mon, 14 Nov 2011 12:23:23 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated
	queues
In-Reply-To: <4EC10745.2010209@rabbitmq.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>
	<20111107135014.GD6082@rabbitmq.com>
	<CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>
	<20111107142240.GF6082@rabbitmq.com>
	<4EBABD75.3020400@rabbitmq.com>
	<CAGn3ETE2n8FW89yntBhV3aEpOTqVKO+4tWh3pc143RV5nsTqgg@mail.gmail.com>
	<4EBAC618.4080608@rabbitmq.com> <4EC10745.2010209@rabbitmq.com>
Message-ID: <CAGn3ETErCLHmP_tCZ56eQZma-RDXq2N3ES7MN3ZQgX=V9ipEdQ@mail.gmail.com>

>
>
>>  See the Evernote link further up.
>>>
>>
>> Ah, yes. Bug found. No doubt Simon will be along with a patch shortly.
>>
>
> Indeed. If five days counts as "shortly".
>
> Can you try:
> http://www.rabbitmq.com/**releases/plugins/v2.6.1/**
> rabbitmq_management-2.6.1.ha-**sync-fix.ez<http://www.rabbitmq.com/releases/plugins/v2.6.1/rabbitmq_management-2.6.1.ha-sync-fix.ez>
>
>
I will endeavour to test this 'shortly'. We're going to production without
HA and I'll have to test this when we start our next iteration.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/cb2aa002/attachment.htm>

From smetj.net at gmail.com  Mon Nov 14 12:36:32 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Mon, 14 Nov 2011 04:36:32 -0800 (PST)
Subject: [rabbitmq-discuss] Architecture question
In-Reply-To: <4EB6F3B0.80903@rabbitmq.com>
References: <28243733.885.1320526802712.JavaMail.geo-discussion-forums@yqiu15>
	<4EB6F3B0.80903@rabbitmq.com>
Message-ID: <19869477.4193.1321274192706.JavaMail.geo-discussion-forums@yqpp12>

Hi Matthias,

Will have a look into this.

Thanks,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/2c4ab9df/attachment.htm>

From emile at rabbitmq.com  Mon Nov 14 13:01:46 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 14 Nov 2011 13:01:46 +0000
Subject: [rabbitmq-discuss] Acknowledged Messages Requeued
In-Reply-To: <CAHQ1f1U1OYpFTfWdkCkU8PHR0bcWZbbXTHRo2z6_bKr3fq5dTw@mail.gmail.com>
References: <CAHQ1f1X+t9TETRt0YveordZC2=HhCOscDNPgAZ54LetyXJQx7A@mail.gmail.com>
	<4EBD4913.6030405@rabbitmq.com>
	<CAHQ1f1UU+h1bv1GbuuF0JkoqL+zkua1Lp07SCpJaDX21GjED2w@mail.gmail.com>
	<CAHQ1f1U1OYpFTfWdkCkU8PHR0bcWZbbXTHRo2z6_bKr3fq5dTw@mail.gmail.com>
Message-ID: <4EC1113A.7020500@rabbitmq.com>

Hi Ben,

On 14/11/11 10:46, Ben Lewis wrote:
> If I run the publisher, then once that has enqueued 100,000 items run
> the consumer. If after it has consumed 20,000 and still consuming, I do
> a graceful start of the RabbitMQ broker's OS (running on Windows Server
> 2008, so Start, Shutdown/Restart), when the broker comes back online I
> have 100,000 items in the queue (even though approx 20,000 are consumed
> and acknowledged).

I'm only able to reproduce your result if I shut down the broker
forcefully. Stopping the the broker by using the service control manager
or using the rabbitmq-service.bat script does stop the broker
gracefully, allowing all acknowledgements to be written to disk. I can
only assume that hitting the Shutdown/Restart button on Windows does not
first stop all the running services.

If the broker is not stopped gracefully then clients must be prepared to
received duplicate messages for which acknowledgements were sent, but
not yet written to disk by the broker. That is the case regardless of
OS. That may be just a few messages, or tens of thousands.


-Emile


From smetj.net at gmail.com  Mon Nov 14 13:29:19 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Mon, 14 Nov 2011 05:29:19 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ Shovel Connections
In-Reply-To: <20111107105054.GB4248@southbank.eng.vmware.com>
References: <4E7929EC.1070906@omc-international.com.au>
	<4E7A7266.5050800@omc-international.com.au>
	<20110926115420.GC31944@rabbitmq.com>
	<13456440.173.1319125870200.JavaMail.geo-discussion-forums@yqja14>
	<20111025151433.GG3231@southbank>
	<21315328.129.1320240694623.JavaMail.geo-discussion-forums@yqoo7>
	<20111107105054.GB4248@southbank.eng.vmware.com>
Message-ID: <16591088.1761.1321277359415.JavaMail.geo-discussion-forums@yqcm23>

Hi Alex,

Thank you for the detailed feedback.
Meanwhile I have found and fixed some issues on the software making use of 
RabbitMQ.
I made a tool which has a work pool of multiple processes running 
(Python/multiprocessing/Pika).
Under certain circumstances a worker crashes while the connection to the 
broker stays alive, which left the message in a permanent unacknowledged 
state as long the work pool manager stayed alive.
This has been fixed.  I'm afraid this situation has clouded my judgement on 
finding the reason for this behavior.

Here are the relevant portions of version info.  (All brokers run the same 
version)

... snip ...
{erlando,"Syntax extensions for Erlang","2.6.1"},
      {rabbitmq_federation,"RabbitMQ Federation","2.6.1"},
      {rabbitmq_shovel,"Data Shovel for RabbitMQ","2.6.1"},
      {rabbitmq_shovel_management,"Shovel Status","2.6.1"},
      {rabbitmq_management,"RabbitMQ Management Console","2.6.1"},
      {webmachine,"webmachine","1.7.0-rmq2.6.1-hg0c4b60a"},
      {rabbitmq_management_agent,"RabbitMQ Management Agent","2.6.1"},
      {amqp_client,"RabbitMQ AMQP Client","2.6.1"},
      {rabbit,"RabbitMQ","2.6.1"},
      {os_mon,"CPO  CXC 138 46","2.2.6"},
      {sasl,"SASL  CXC 138 11","2.1.9.4"},
      {rabbitmq_mochiweb,"RabbitMQ Mochiweb Embedding","2.6.1"},
      {mochiweb,"MochiMedia Web Server","1.3-rmq2.6.1-git9a53dbd"},
      {inets,"INETS  CXC 138 49","5.6"},
      {mnesia,"MNESIA  CXC 138 12","4.4.19"},
      {stdlib,"ERTS  CXC 138 10","1.17.4"},
      {kernel,"ERTS  CXC 138 10","2.14.4"}]},
... snip ...

I will upgrade my environment to the latest stable version 2.7.0 as this is 
the latest stable release.

since a broker restart
>     will mark the unacknowledged messages as ready again, and deliver
>     them to a consumer.


In my case I was unable to restart the broker, ... it just 
hung indefinitely forcing me to kill the RabbitMQ process.

What I will do is the following:

   - Upgrade all participating RabbitMQ servers to the latest stable 
   version (2.7.0)
   - Try to reproduce the problem.
      - If the problem occurs I provide you detailed and complete 
      information broker configuration (I rather do this offline then)
      - If the problem can't be reproduced, I'll provide feedback on that 
      to this post.
   
Thanks again Alex for the time taken to read through an analyse the 
provided information, much appreciated.


Cheers,

Jelle




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/842513db/attachment.htm>

From simon at rabbitmq.com  Mon Nov 14 14:35:37 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 14 Nov 2011 14:35:37 +0000
Subject: [rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
In-Reply-To: <4EC08087.7090003@omc-international.com.au>
References: <4EB9CA70.5070107@omc-international.com.au>	<4EBA8A48.2090305@rabbitmq.com>	<4EBB0F23.7030601@omc-international.com.au>	<4EBB7B3A.1040201@rabbitmq.com>
	<4EBD174E.8000102@rabbitmq.com>
	<4EC08087.7090003@omc-international.com.au>
Message-ID: <4EC12739.5080105@rabbitmq.com>

Ah.

As you can probably tell, rabbitmq-shovel-management is still quite new. 
I don't think I tested it with SSL. Bug filed.

Cheers, Simon

On 14/11/11 02:44, Mihir Mone wrote:
> Cheers mate, All hunky dory now.
>
> I do have a doubt/suggestion though. What do the keyfile, certfile and
> cacert fields in the source and destination columns show ? The MD5
> hashes ? It becomes cumbersome since if you have a number of shovels
> defined with SSL the page becomes very very large due to these fields.
> Can't we just show the location of the files ? I know that suggestion
> might be a security fail but then having the page become huge is also
> not desirable. See attached image. Look how big the page is and I have
> only 4 shovels defined at this point. We will potentially have around
> 12-13 in the near future.
>
> Also I think the host field can be shown in plain text. I don't think
> that would be a security risk.
>
> Regards,
> Mihir
>
> On 11/11/2011 8:38 PM, Simon MacMullen wrote:
>> On 10/11/11 07:20, Matthias Radestock wrote:
>>> Oops, looks like the patch was compiled against the 2.7.0 version of the
>>> erlang client rather than 2.6.1. Simon is on holiday today but will
>>> hopefully look into this on his return.
>>
>> Oops. *Sticks head in bucket*
>>
>> Mihir, I've updated the .ez at the URL upthread - can you try again?
>>
>> Cheers, Simon
>>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Mon Nov 14 15:14:04 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 14 Nov 2011 15:14:04 +0000
Subject: [rabbitmq-discuss] Message durability and partition tolerence
In-Reply-To: <2159662.547.1320769605606.JavaMail.geo-discussion-forums@prog16>
References: <2159662.547.1320769605606.JavaMail.geo-discussion-forums@prog16>
Message-ID: <4EC1303C.3080709@rabbitmq.com>

Hi Jonathan. Thanks for an interesting mail!

On 08/11/11 16:26, Jonathan Oliver wrote:
> Since the introduction of better clustering support and message queue
> failover in v2.6, my company is starting to consider moving to RabbitMQ.
> But we had a few questions about the roadmap.
>
> We are looking to ensure that a message is only considered received by
> an exchange from a producing app when at least two physical instances of
> Rabbit acknowledge the receipt of the message--similar to Riak's method.
> Furthermore, we are looking to ensure that a message is considered
> consumed (ack'd) when when at least one physical instance receives the
> ack, which may result in a message being delivered more than once.
> Essentially, we'd like to propose a configuration where Rabbit can fall
> on the AP side of CAP instead of the CA side.

This starts to sound quite a lot like federation. Especially the 
AP-as-opposed-to-CA part, which could almost have been taken from 
http://www.rabbitmq.com/blog/2011/06/22/federation-plugin-preview-release/ 
:-)

(Incidentally this is reminding me that federation really needs better 
documentation right now! Sigh...)

Where your vision differs is the "at least two physical instances" part. 
I always assumed that people would use federations-of-clusters to get HA 
with partition tolerance. But that does require that you can specify 
that some groups of nodes *won't* get partitioned from each other. Easy 
if you're thinking in terms of data centres linked by WANs, less easy in 
the cloud. Hmm.

...snip discussion of ordering...

> For example, if an instance of
> Rabbit goes offline under the current HA configuration, when it rejoins
> the cluster the queues are wiped clean. Yuck. So much for guaranteed
> delivery.

With our current HA queues any offline slave queue has to be wiped and 
restarted because it doesn't know what happened while it was down - but 
that's just the same as having to sync up a RAID after a similar event. 
In particular it doesn't mean that messages were lost - the whole point 
is that the queue has other mirrors which will keep it up.

Non-HA queues don't get wiped at rejoin, since we know nothing can have 
happened to them while they were down.

> While under some kind of partition-tolerant configuration, the
> queues wouldn't need to be cleaned. Instead, the consuming application
> would be responsible for message idempotency.
>
> At the same time, I realize that you guys might be bumping against
> restrictions in the AMQP standard, for example multiple consumers
> receiving copies of the message where one consumer ack's the message,
> while another nack's the message.  But that's something where the
> messaging system can't determine the proper course of action without
> knowing the business context. In that case, I would imaging it should
> present that nack back to the producer as it currently does.

One thing that the federation plugin does not attempt to do at all is 
make the resultant network look like a single broker as defined by AMQP 
(or in any other sense). As far as I can see this is the only thing to 
do for an AP system. Trying to look like "a broker" is going to imply 
global state, which... ugh. So one corollary is that things like 
mandatory can't work across federation.

> The bottom line in my question and proposal really has to do with
> message loss. If the idea is to *not lose messages*, I can see a
> partition-tolerant configuration bringing a lot to the table and where
> the consuming application must be resilient to duplicate messages and
> ordering, thus freeing up RabbitMQ from having to worry so much about that.

I wonder about message loss in an AP Rabbit, with your "at least two 
instances" constraint. (Using that term rather than federated to imply 
that we're not inherently talking about the current plugin here).

You're a producer. You connect to a node and send it a message. That's 
one instance. So it needs to forward the message on to another instance 
before it can send you a confirm...

...but we need to cope with partitions. What happens if you and the node 
you're talking to are on a network partition? How long should it wait? 
If the answer is "forever" then I think you just lost Availability. If 
it isn't, then the partition can always heal just after you timed out, 
which I guess also means you weren't Available. How should this work?

FTR the current federation will confirm your message as soon as the 
first node has it, and will forward it when connectivity is available.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From davegreggory at yahoo.com  Mon Nov 14 15:17:11 2011
From: davegreggory at yahoo.com (Dave Greggory)
Date: Mon, 14 Nov 2011 07:17:11 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ Crash
Message-ID: <1321283831.68598.YahooMailNeo@web111007.mail.gq1.yahoo.com>

We're running RabbitMQ 2.5.1 in production and it crashed last week. Crash = Dropped all connections and process died (i.e. rabbitmqctl status and ps -ef | grep rabbitmq both showed that the process itself was not running).?

Setup -
2 non-clustered RabbitMQ nodes behind a load balancer with only 1 node being active in the load balancer (2nd one is there for failover in case situations like this).?
No special config (All defaults)
Only Management plugin used.?

CentOS Linux?2.6.18-164.el5 x86_64
Erlang R13B04

Clients mostly Java-library 2.5.1 (some older apps with 2.3.1 and 2.0.0 clients).?

I attached the logs (errors starting at 8-Nov-2011::18:13:02 mark). I also backed up mnesia in its error state and can provide if needed. There's an erl_crash.dump which I can provide if needed as well.?No CPU or memory spikes.

I was able to start it up again no problem. Just saw the following in the logs at startup (which seemed unusual).

? ?=WARNING REPORT==== 8-Nov-2011::18:42:03 ===

? ?msg_store_persistent: recovery terms differ from present
? ?rebuilding indices from scratch


We did not upgraded to 2.6.1 because it seemed to be a buggy release (purely based on this mailing list)... i.e. HA nodes config didn't work, etc. I will upgrade our QA environment to 2.7.0 shortly but probably will not go live with 2.7.0 for at least a month (to verify stability).?In the mean time, we'd like to understand what happened.

We've been pretty happy with RabbitMQ so far, and it has been quite stable on the server side (the java client library is another issue, but that's for another topic). I'm excited to start using HA functionality in 2.7.0.?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: incident-logs.tar.gz
Type: application/x-gzip
Size: 111956 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/c0d57e3f/attachment.bin>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: report-minimal-post-restart.txt
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/c0d57e3f/attachment.txt>

From majek04 at gmail.com  Mon Nov 14 15:34:58 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Mon, 14 Nov 2011 15:34:58 +0000
Subject: [rabbitmq-discuss] Create exchanges and queues beforehand
In-Reply-To: <4EC107FA.5080800@eng.it>
References: <4EC107FA.5080800@eng.it>
Message-ID: <CABzX+qyERYFCBMcHKFpTY2tQr-=aVWp1ujw=_QQ4xSnJO_GhXA@mail.gmail.com>

On Mon, Nov 14, 2011 at 12:22, Stefano Ghio <steghio at eng.it> wrote:
> I was fiddling with the Topic examples and I ran into a problem. If I start
> the client "ReceiveLogsTopic" before the sender "EmitLogTopic" I see
> everything working fine. Sender sends and client receives and displays
> right.
>
> However, if I start the sender before the client, the message gets sent but
> then nothing happens, the queue appears to be empty and the client keeps
> waiting for nothing.

Yes. RabbitMQ doesn't store 'old' messages. After the queue
is created only 'new' messages will go to it.

If you need to hear about previous messages, you should
create queue beforehand.

If you can't do it (you don't know about consumers while
you're sending messages), you probably have it solved
in an application layer - store data in a database
and query it after the queue was created.
(beware race conditions there)

> I think that's correct since the queue is created at runtime and is
> destroyed when there's nothing more to do with it as explained in the
> documentation:
>
> channel.exchangeDeclare(exchangeName, "direct", true);
> String queueName = channel.queueDeclare().getQueue();
> channel.queueBind(queueName, exchangeName, routingKey);
>
> This will actively declare the following objects, both of which can be
> customised by using additional parameters. Here neither of them have any
> special arguments.
>
> a durable, non-autodelete exchange of "direct" type
> a non-durable, exclusive, autodelete queue with a generated name
>
> What I would like to do instead is (example):
>
> 1)
> create 3 exchanges: EXA, EXB and EXC
> for every exchange, create 2 queues and bind them to it: Q1 and Q2. All
> queues have the same name but are not the same object (see attached PNG if
> needed)

Nope. A queue is identified by a name. The same name= the same
queue. You can bind multiple exchanges to a queue though,
and receive data from multiple exchanges on a single queue.
(also, see some magical properties on received messages,
you should be able to get routing key and exchange name
per message)

> 2)
> send a message to be queued in queue Q1 through EXA
> send the same message to be queued in queue Q1 through EXB
> message then is queued in two different queues which happen to have the same
> name but are binded to different exchanges
> 3)
> poll Q1 through EXA to read messages and delete message
> poll Q1 through EXB to read messages and leave message there
> message then is no longer in EXA-Q1 but is still available through EXB-Q1
>
> I don't and can't know if and when someone will try to send or read
> messages.
>
> I guess it would require me to declare and bind a queue beforehand, maybe by
> using 3 classes: setUpExchangeAndQueues, sendMessage, pollMessages, but I'm
> a bit at loss here, could anyone point me in the right direction?
>
> I read that:
>
> If several clients want to share a queue with a well-known name, this code
> would be appropriate:
>
> channel.exchangeDeclare(exchangeName, "direct", true);
> channel.queueDeclare(queueName, true, false, false, null);
> channel.queueBind(queueName, exchangeName, routingKey);
>
> This will actively declare:
>
> a durable, non-autodelete exchange of "direct" type
> a durable, non-exclusive, non-autodelete queue with a well-known name
>
> Tried it but failed.
>
> Please advise, I'm going crazy on this.

Sorry, I'm not really following the last part.

Marek

From matthias at rabbitmq.com  Mon Nov 14 15:37:17 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 14 Nov 2011 15:37:17 +0000
Subject: [rabbitmq-discuss] RabbitMQ Crash
In-Reply-To: <1321283831.68598.YahooMailNeo@web111007.mail.gq1.yahoo.com>
References: <1321283831.68598.YahooMailNeo@web111007.mail.gq1.yahoo.com>
Message-ID: <4EC135AD.9060008@rabbitmq.com>

On 14/11/11 15:17, Dave Greggory wrote:
> We're running RabbitMQ 2.5.1 in production and it crashed last week.

The error in the logs is the same as reported in 
http://old.nabble.com/Can%27t-Determine-Cause-of-541---INTERNAL_ERROR-ts32825393.html

The advice, as there, is to upgrade.

Matthias.

From davegreggory at yahoo.com  Mon Nov 14 15:47:07 2011
From: davegreggory at yahoo.com (Dave Greggory)
Date: Mon, 14 Nov 2011 07:47:07 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ Crash
In-Reply-To: <4EC135AD.9060008@rabbitmq.com>
References: <1321283831.68598.YahooMailNeo@web111007.mail.gq1.yahoo.com>
	<4EC135AD.9060008@rabbitmq.com>
Message-ID: <1321285627.67686.YahooMailNeo@web111007.mail.gq1.yahoo.com>

Thanks for the quick response. But that thread is not very clear on what exactly the problem is.

1) What went wrong? Why did it happen all of a sudden after running perfectly for months? What triggered it? It must be serious bug to cause RabbitMQ process itself to die.
2) Have you identified the bug that caused it?

We'd be happy to upgrade, but we'd like to know with a bit more confidence that upgrading is going to fix the problem.?

Thanks again
Dave


________________________________
From: Matthias Radestock <matthias at rabbitmq.com>
To: Dave Greggory <davegreggory at yahoo.com>
Cc: "rabbitmq-discuss at lists.rabbitmq.com" <rabbitmq-discuss at lists.rabbitmq.com>
Sent: Monday, November 14, 2011 10:37 AM
Subject: Re: [rabbitmq-discuss] RabbitMQ Crash

On 14/11/11 15:17, Dave Greggory wrote:
> We're running RabbitMQ 2.5.1 in production and it crashed last week.

The error in the logs is the same as reported in http://old.nabble.com/Can%27t-Determine-Cause-of-541---INTERNAL_ERROR-ts32825393.html

The advice, as there, is to upgrade.

Matthias.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/30cdf8fd/attachment.htm>

From matthias at rabbitmq.com  Mon Nov 14 15:58:15 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 14 Nov 2011 15:58:15 +0000
Subject: [rabbitmq-discuss] RabbitMQ Crash
In-Reply-To: <1321285627.67686.YahooMailNeo@web111007.mail.gq1.yahoo.com>
References: <1321283831.68598.YahooMailNeo@web111007.mail.gq1.yahoo.com>
	<4EC135AD.9060008@rabbitmq.com>
	<1321285627.67686.YahooMailNeo@web111007.mail.gq1.yahoo.com>
Message-ID: <4EC13A97.4020801@rabbitmq.com>

Dave,

On 14/11/11 15:47, Dave Greggory wrote:
> Thanks for the quick response. But that thread is not very clear on what
> exactly the problem is.
>
> 1) What went wrong? Why did it happen all of a sudden after running
> perfectly for months? What triggered it?

We have no idea.

> It must be serious bug to cause RabbitMQ process itself to die.

Correct. But it clearly is also very rare.

> 2) Have you identified the bug that caused it?

No.

> We'd be happy to upgrade, but we'd like to know with a bit more
> confidence that upgrading is going to fix the problem.

As I said in the other thread, the code around the area in which the 
crash occurred has changed substantially in the last few releases. So 
while upgrading may not fix the problem, there is a good chance that it 
will and if it doesn't then we'll get better data points to help us 
track down the problem.

Regards,

Matthias.

From davegreggory at yahoo.com  Mon Nov 14 16:14:33 2011
From: davegreggory at yahoo.com (Dave Greggory)
Date: Mon, 14 Nov 2011 08:14:33 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ Crash
In-Reply-To: <4EC13A97.4020801@rabbitmq.com>
References: <1321283831.68598.YahooMailNeo@web111007.mail.gq1.yahoo.com>
	<4EC135AD.9060008@rabbitmq.com>
	<1321285627.67686.YahooMailNeo@web111007.mail.gq1.yahoo.com>
	<4EC13A97.4020801@rabbitmq.com>
Message-ID: <1321287273.14321.YahooMailNeo@web111010.mail.gq1.yahoo.com>

:-(

Since we don't know what the problem is and it happens rarely, there's no way to confirm even after upgrading that the problem has been fixed. Is there any more information that we can provide so you can troubleshoot the problem? Should we open a ticket using our support contract with SpringSource/RabbitMQ support?


________________________________
From: Matthias Radestock <matthias at rabbitmq.com>
To: Dave Greggory <davegreggory at yahoo.com>
Cc: "rabbitmq-discuss at lists.rabbitmq.com" <rabbitmq-discuss at lists.rabbitmq.com>
Sent: Monday, November 14, 2011 10:58 AM
Subject: Re: [rabbitmq-discuss] RabbitMQ Crash

Dave,

On 14/11/11 15:47, Dave Greggory wrote:
> Thanks for the quick response. But that thread is not very clear on what
> exactly the problem is.
> 
> 1) What went wrong? Why did it happen all of a sudden after running
> perfectly for months? What triggered it?

We have no idea.

> It must be serious bug to cause RabbitMQ process itself to die.

Correct. But it clearly is also very rare.

> 2) Have you identified the bug that caused it?

No.

> We'd be happy to upgrade, but we'd like to know with a bit more
> confidence that upgrading is going to fix the problem.

As I said in the other thread, the code around the area in which the crash occurred has changed substantially in the last few releases. So while upgrading may not fix the problem, there is a good chance that it will and if it doesn't then we'll get better data points to help us track down the problem.

Regards,

Matthias.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/804376cf/attachment.htm>

From benbennett at gmail.com  Mon Nov 14 16:15:51 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Mon, 14 Nov 2011 10:15:51 -0600
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
	connection
In-Reply-To: <4EC0CCDE.3030505@rabbitmq.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>
	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>
	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>
	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>
	<CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>
	<4EC030E3.1090807@rabbitmq.com>
	<CAGnU7uj8PhXp+7JMcJ-XsDrcYNDKno-t5HnGnrwup+F41vCyHw@mail.gmail.com>
	<4EC0CCDE.3030505@rabbitmq.com>
Message-ID: <CAGnU7uj3U-CHE-Bo_TcxuPxsGdRLyUcngnx-F9xrP=Q3jR-uuA@mail.gmail.com>

I apologize if I am sounding rude, not trying.  Just trying to find
out what is going on.
Here is report from  rabbitmqctrl report
http://pastebin.com/MSwv82C3

The same stacktrace is happening onIy difference is different test
case is hanging.

I ran the same test cases for the exact same git revision on all are
build agents and the ran without issues , everything passed.

It is crap shoot on whether it is happens.

It is an SDC machine so it has all kinds of extra security GPO and
services . I am going to attempt to shut down all other services that
I can. And see if it has an benefit.


On Mon, Nov 14, 2011 at 2:10 AM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
> Benjamin,
>
> On 14/11/11 00:24, Benjamin Bennett wrote:
>>
>> I was able to with tracer see beginning of thread, tracer threw an
>> exception
>
> That's not unusual. Neither the client or the tracer got stuck though, which
> is the problem we are trying to investigate here.
>
> Matthias.
>

From baldgoth at gmail.com  Mon Nov 14 17:30:35 2011
From: baldgoth at gmail.com (TrueWill)
Date: Mon, 14 Nov 2011 09:30:35 -0800 (PST)
Subject: [rabbitmq-discuss] Statistics database could not be contacted
In-Reply-To: <4EC0FDDC.7090505@rabbitmq.com>
References: <18139766.2400.1320956231128.JavaMail.geo-discussion-forums@yqhd1>	<4EBCE36F.9040207@rabbitmq.com>
	<26389243.1966.1321047017198.JavaMail.geo-discussion-forums@yqoo7>
	<4EC0FDDC.7090505@rabbitmq.com>
Message-ID: <16716780.1149.1321291835714.JavaMail.geo-discussion-forums@yqff21>

I did some more testing - I believe you're correct. That login may have 
been generated by another developer attempting to connect to the wrong 
vhost. I did verify that if I use the client API and use an invalid login, 
the rabbit at MyServer.log file was updated with the appropriate error 
message. However, if I use the HTML management page, it displays the 
"statistics" error but does not generate any messages in that log file.

The -sasl.log in the same folder has only one old error from a month ago:

=SUPERVISOR REPORT==== 11-Oct-2011::09:32:02 ===
     Supervisor: {<0.#####.16>,
                                           rabbit_channel_sup_sup}
     Context:    shutdown_error
     Reason:     shutdown
     Offender:   [{pid,<0.#####.16>},
                  {name,channel_sup},
                  {mfa,{rabbit_channel_sup,start_link,[]}},
                  {restart_type,temporary},
                  {shutdown,infinity},
                  {child_type,supervisor}]

Are there other logs I should be checking or other diagnostics I can run? 
Thank you!

On Monday, November 14, 2011 5:39:08 AM UTC-6, Simon MacMullen wrote:
>
> That really does just look like a failed login attempt.
>
> Cheers, Simon
>
> -- 
> Simon MacMullen
> RabbitMQ, VMware
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/5a29dbdd/attachment.htm>

From kilian.ciuffolo at gmail.com  Mon Nov 14 16:10:14 2011
From: kilian.ciuffolo at gmail.com (Kilian Ciuffolo)
Date: Mon, 14 Nov 2011 08:10:14 -0800 (PST)
Subject: [rabbitmq-discuss] retrieve the original publisher routekey
Message-ID: <00d8883a-b6a5-4d8c-b9f3-1a426b2b8d2f@u6g2000vbg.googlegroups.com>

Hi!
Is it possible to retrieve the routekey wich was used to publish a
message?

this is my configuration:
 - a topic exchange
 - a queue binded to the exchange

when i will publish a message with a routekey like this: 'foo.bar' i
will receive the message in my queue
binded through the 'foo.*' route key.

How can i retrieve the original routekey?

From jruiz at johnruiz.com  Mon Nov 14 17:16:29 2011
From: jruiz at johnruiz.com (John Ruiz)
Date: Mon, 14 Nov 2011 09:16:29 -0800 (PST)
Subject: [rabbitmq-discuss] Management Web Server on Windows with 2.7.0
Message-ID: <ae3ea24a-c157-41b9-8d5e-80b87f85d55c@y7g2000vbe.googlegroups.com>

Hello,

I used the exe installer to install rabbitmq-server-2.7.0 on Windows
2008 R2 on top of erlang R14B01.

I've enabled the rabbitmq_management plugin and restarted the windows
service for rabbitmq, but I cannot connect to http://localhost:55672/
and netstat tells me that nothing is listening on port 55672.

When I execute rabbitmq-plugins.bat list, I see that
rabbitmq_management (and its dependent plugins) are enabled.

I've also tried executing:
rabbitmq-server remove
rabbitmq-server install
rabbitmq-server start

with the same results.

From videlalvaro at gmail.com  Mon Nov 14 17:59:04 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Mon, 14 Nov 2011 18:59:04 +0100
Subject: [rabbitmq-discuss] retrieve the original publisher routekey
In-Reply-To: <00d8883a-b6a5-4d8c-b9f3-1a426b2b8d2f@u6g2000vbg.googlegroups.com>
References: <00d8883a-b6a5-4d8c-b9f3-1a426b2b8d2f@u6g2000vbg.googlegroups.com>
Message-ID: <CAMcAHLXwbupddrc9DZv72pHim8M9x_vC_B7OgM+j=Rvrua4BiQ@mail.gmail.com>

Hi,

Yes it's possible. See how your library implements basic delivery:

http://www.rabbitmq.com/amqp-0-9-1-quickref.html#basic.deliver

Cheers,

Alvaro

On Mon, Nov 14, 2011 at 5:10 PM, Kilian Ciuffolo
<kilian.ciuffolo at gmail.com>wrote:

> Hi!
> Is it possible to retrieve the routekey wich was used to publish a
> message?
>
> this is my configuration:
>  - a topic exchange
>  - a queue binded to the exchange
>
> when i will publish a message with a routekey like this: 'foo.bar' i
> will receive the message in my queue
> binded through the 'foo.*' route key.
>
> How can i retrieve the original routekey?
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/bb0afc28/attachment.htm>

From alexandru at rabbitmq.com  Mon Nov 14 18:09:22 2011
From: alexandru at rabbitmq.com (Alexandru =?utf-8?B?U2N2b3LFo292?=)
Date: Mon, 14 Nov 2011 18:09:22 +0000
Subject: [rabbitmq-discuss] Management Web Server on Windows with 2.7.0
In-Reply-To: <ae3ea24a-c157-41b9-8d5e-80b87f85d55c@y7g2000vbe.googlegroups.com>
References: <ae3ea24a-c157-41b9-8d5e-80b87f85d55c@y7g2000vbe.googlegroups.com>
Message-ID: <20111114180922.GA3599@southbank>

Hi,

> I've also tried executing:
> rabbitmq-server remove
> rabbitmq-server install
> rabbitmq-server start

That looks really strange.  I assume you meant, rabbitmq-service.

> When I execute rabbitmq-plugins.bat list, I see that
> rabbitmq_management (and its dependent plugins) are enabled.

That's good.  After starting the broker, run
  rabbitmqctl status

The stuff at the top of the output lists running applications.  You
should see rabbitmq_management in the list.

> I've enabled the rabbitmq_management plugin and restarted the windows
> service for rabbitmq, but I cannot connect to http://localhost:55672/
> and netstat tells me that nothing is listening on port 55672.

For the Windows service, you need to re-install it for the changes in
plugins configuration to show.  I think you're already doing this, but
to rule out problems related to this, could you try running:
  rabbitmqctl stop
  rabbitmq-server
and check the URL?

If this works, you're not re-installing the service correctly.

Cheers,
Alex

On Mon, Nov 14, 2011 at 09:16:29AM -0800, John Ruiz wrote:
> Hello,
> 
> I used the exe installer to install rabbitmq-server-2.7.0 on Windows
> 2008 R2 on top of erlang R14B01.
> 
> I've enabled the rabbitmq_management plugin and restarted the windows
> service for rabbitmq, but I cannot connect to http://localhost:55672/
> and netstat tells me that nothing is listening on port 55672.
> 
> When I execute rabbitmq-plugins.bat list, I see that
> rabbitmq_management (and its dependent plugins) are enabled.
> 
> I've also tried executing:
> rabbitmq-server remove
> rabbitmq-server install
> rabbitmq-server start
> 
> with the same results.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From emile at rabbitmq.com  Mon Nov 14 18:28:02 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 14 Nov 2011 18:28:02 +0000
Subject: [rabbitmq-discuss] [HA] restart node and restart mirror node
 issue
In-Reply-To: <CABWH_X5kPRW3sm5eccrZqB+y966Jqj2Qkfe-k_-43K6LTE7ybQ@mail.gmail.com>
References: <CABWH_X5kPRW3sm5eccrZqB+y966Jqj2Qkfe-k_-43K6LTE7ybQ@mail.gmail.com>
Message-ID: <4EC15DB2.9090606@rabbitmq.com>

Hi,

On 12/11/11 12:18, Yu-Teh Shen wrote:
> Is the behavior correct? I thought after I restart Node A, it should
> back to the mirror node of Node B.

You may have found a bug. I'm able to reproduce this problem, which
appears to be 'x-ha-policy=nodes' specific. I'm looking at how this can
be fixed. I would suggest using 'x-ha-policy=all' in the meantime.


-Emile

From simon at rabbitmq.com  Mon Nov 14 18:32:02 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 14 Nov 2011 18:32:02 +0000
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
 connection
In-Reply-To: <CAGnU7uj3U-CHE-Bo_TcxuPxsGdRLyUcngnx-F9xrP=Q3jR-uuA@mail.gmail.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>	<CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>	<4EC030E3.1090807@rabbitmq.com>	<CAGnU7uj8PhXp+7JMcJ-XsDrcYNDKno-t5HnGnrwup+F41vCyHw@mail.gmail.com>	<4EC0CCDE.3030505@rabbitmq.com>
	<CAGnU7uj3U-CHE-Bo_TcxuPxsGdRLyUcngnx-F9xrP=Q3jR-uuA@mail.gmail.com>
Message-ID: <4EC15EA2.4010507@rabbitmq.com>

On 14/11/11 16:15, Benjamin Bennett wrote:
> Here is report from  rabbitmqctrl report
> http://pastebin.com/MSwv82C3

Ah, thank you. After some poking, that genuinely looks like a server 
bug. Damn.

In order for it to happen you need the last channel close / close_ok to 
overlap with the connection close / close_ok. With the Java client you 
have to invoke Channel.close() and Connection.close() from different 
threads to get this to happen, and still be unlucky.

You should be allowed to do this, but right now it's racy.

 > I was going to attempt to put a timeout on the connection close method
 > but that really would be a hack.

Indeed! Other slightly less hacky workarounds until we get this fixed:

* Invoke Channel.close() and Connection.close() from the same thread, or 
otherwise ensure they don't overlap.

* Don't invoke Channel.close() if you know you're going to invoke 
Connection.close() anyway.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From kilian.ciuffolo at gmail.com  Mon Nov 14 18:39:06 2011
From: kilian.ciuffolo at gmail.com (Kilian C.)
Date: Mon, 14 Nov 2011 19:39:06 +0100
Subject: [rabbitmq-discuss] know when a consumer disconnect from a node
Message-ID: <C42506BFC6F045D9B460480A3F1417F3@gmail.com>

Hi to all, 
is it possible to know when a client is disconnected from a rabbitmq node?

This is my env:

1 rabbitmq node.
3 client (publishers/subscribers) severs

when a server crashes/shutdown/disconnects from the rabbitmq server, other client server needs to be notified about that.

Is there a way to route/publish a simple (dis)connection message to a certain queue/exchange? 

-- 
Kilian C.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/a29fc82e/attachment.htm>

From matthias at rabbitmq.com  Mon Nov 14 18:59:26 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 14 Nov 2011 18:59:26 +0000
Subject: [rabbitmq-discuss] know when a consumer disconnect from a node
In-Reply-To: <C42506BFC6F045D9B460480A3F1417F3@gmail.com>
References: <C42506BFC6F045D9B460480A3F1417F3@gmail.com>
Message-ID: <4EC1650E.2000209@rabbitmq.com>

Kilian,

On 14/11/11 18:39, Kilian C. wrote:
> is it possible to know when a client is disconnected from a rabbitmq node?
>
> This is my env:
>
> 1 rabbitmq node.
> 3 client (publishers/subscribers) severs
>
> when a server crashes/shutdown/disconnects from the rabbitmq server,
> other client server needs to be notified about that.
>
> Is there a way to route/publish a simple (dis)connection message to a
> certain queue/exchange?

There is nothing built-in, but you could implement a custom exchange 
type for this.

The basic idea is that a client, after connecting, creates an exclusive 
queue and binds it to an exchange of the custom exchange type. Due to 
the exclusivity, the queue and hence the binding will get removed when 
the connection is closed. The exchange sees both the bind and unbind 
events and can publish notification messages when it gets them.

See https://github.com/tonyg/presence-exchange for an exchange type that 
does s.t. like that. Warning: this may need some tweaking to get to work 
with recent versions of RabbitMQ.


Regards,

Matthias.

From tcellucci at apple.com  Mon Nov 14 19:22:17 2011
From: tcellucci at apple.com (Tom Cellucci)
Date: Mon, 14 Nov 2011 11:22:17 -0800
Subject: [rabbitmq-discuss] configuring an header exchange binding in
 rabbitmq.cfg
In-Reply-To: <4EBCE072.1070302@rabbitmq.com>
References: <64298C46-3E5A-4DCC-BC05-A827272EE69D@apple.com>
	<20111110172758.GA17951@wellquite.org>
	<88E115CD-0B2F-4D4E-8470-28B2ED5D5350@apple.com>
	<4EBCE072.1070302@rabbitmq.com>
Message-ID: <6E525CCD-2A48-47B0-B349-F9FE5366E20C@apple.com>

While the description may have been available in the spec, I suppose it was lost on me that the configuration file itself is somehow an implementation of that spec.  So a couple follow up questions:

* Do all the names / parameters in the specification correspond precisely with syntax in rabbitmq.config?  

* If Exchange to Exchange Bindings are listed in the "extensions" section of the RabbitMQ documentation here: http://www.rabbitmq.com/extensions.html (presumedly non-standard), why would the feature also be present in the specification link you provided?

* A 'how-to' showing exchange-to-exchange binding in the shovel pages would be golden; seems it would be a fairly common scenario.

-Tom

On Nov 11, 2011, at 12:44 AM, Matthias Radestock wrote:

> Tom,
> 
> On 11/11/11 00:28, Tom Cellucci wrote:
>> I'd like to configure an exchange binding, which sadly is not
>> working  like I'd hoped.
> > [...]
>>                                   {'exchange.bind', [
>>                                      {exchange,<<"events_forwarding_exchange">>},
>>                                      {exchange,<<"events_local_exchange">>},
>>                                      {arguments, [
>>                                         {"x-match", longstr, "any"},
>>                                         {"route_to_local", longstr, "true"},
>>                                         {"route_to_dc2", longstr, "true"}
>>                                      ]}
>>                                   ]}
>> 
>> With the above configuration, the broker fails to start and emits the following error:
>> 
>> =INFO REPORT==== 10-Nov-2011::16:03:35 ===
>>     application: rabbitmq_shovel
>>     exited: {{invalid_shovel_configuration,master_events_shovel,
>>                  {invalid_parameter_value,sources,
>>                      {unknown_fields,'exchange.bind',[exchange]}}},
>>              {rabbit_shovel,start,[normal,[]]}}
>>     type: permanent
> 
> The field names need to match what is in the spec. See http://www.rabbitmq.com/amqp-0-9-1-reference.html#exchange.bind - so instead of having two 'exchange' fields you need one 'destination' and one 'source' field.
> 
> Matthias.


From matthias at rabbitmq.com  Mon Nov 14 19:40:10 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 14 Nov 2011 19:40:10 +0000
Subject: [rabbitmq-discuss] configuring an header exchange binding in
 rabbitmq.cfg
In-Reply-To: <6E525CCD-2A48-47B0-B349-F9FE5366E20C@apple.com>
References: <64298C46-3E5A-4DCC-BC05-A827272EE69D@apple.com>
	<20111110172758.GA17951@wellquite.org>
	<88E115CD-0B2F-4D4E-8470-28B2ED5D5350@apple.com>
	<4EBCE072.1070302@rabbitmq.com>
	<6E525CCD-2A48-47B0-B349-F9FE5366E20C@apple.com>
Message-ID: <4EC16E9A.4030907@rabbitmq.com>

Tom,

On 14/11/11 19:22, Tom Cellucci wrote:
> * Do all the names / parameters in the specification correspond
> precisely with syntax in rabbitmq.config?

Yes, modulo syntactic substitutions to make names etc more erlang-ish. 
Specifically '-' is mapped to '_'.

> * If Exchange to Exchange Bindings are listed in the "extensions"
> section of the RabbitMQ documentation here:
> http://www.rabbitmq.com/extensions.html (presumedly non-standard),
> why would the feature also be present in the specification link you
> provided?

The reference guide includes rabbit's protocol extensions. It says so at 
the top, though perhaps that could be clearer.

> * A 'how-to' showing exchange-to-exchange binding in the shovel pages
> would be golden; seems it would be a fairly common scenario.

The shovel documentation could certainly be improved.

Would you consider publishing a blog post after you've got it all 
working? Looks like your use of the shovel is a bit more complex than 
most, so I am sure other rabbit users would find it interesting.

Regards,

Matthias.

From benbennett at gmail.com  Mon Nov 14 23:21:01 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Mon, 14 Nov 2011 17:21:01 -0600
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
	connection
In-Reply-To: <4EC15EA2.4010507@rabbitmq.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>
	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>
	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>
	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>
	<CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>
	<4EC030E3.1090807@rabbitmq.com>
	<CAGnU7uj8PhXp+7JMcJ-XsDrcYNDKno-t5HnGnrwup+F41vCyHw@mail.gmail.com>
	<4EC0CCDE.3030505@rabbitmq.com>
	<CAGnU7uj3U-CHE-Bo_TcxuPxsGdRLyUcngnx-F9xrP=Q3jR-uuA@mail.gmail.com>
	<4EC15EA2.4010507@rabbitmq.com>
Message-ID: <CAGnU7ugZ-QkC7n8n7XxqcV_AVyLDRaVTA6bo2vK+S7=Nki6yjw@mail.gmail.com>

I am using the spring amqp lib and it is doing the connection closing when
the spring context is closed. I do not think it has a property to inject
the hack. Also if you know any of the spring amqp devs. Having you telling
them to check to make sure it is doing the way you have described will have
much more authority than me.

I will probably hack the spring amqp lib for now
On Nov 14, 2011 12:32 PM, "Simon MacMullen" <simon at rabbitmq.com> wrote:

> On 14/11/11 16:15, Benjamin Bennett wrote:
>
>> Here is report from  rabbitmqctrl report
>> http://pastebin.com/MSwv82C3
>>
>
> Ah, thank you. After some poking, that genuinely looks like a server bug.
> Damn.
>
> In order for it to happen you need the last channel close / close_ok to
> overlap with the connection close / close_ok. With the Java client you have
> to invoke Channel.close() and Connection.close() from different threads to
> get this to happen, and still be unlucky.
>
> You should be allowed to do this, but right now it's racy.
>
> > I was going to attempt to put a timeout on the connection close method
> > but that really would be a hack.
>
> Indeed! Other slightly less hacky workarounds until we get this fixed:
>
> * Invoke Channel.close() and Connection.close() from the same thread, or
> otherwise ensure they don't overlap.
>
> * Don't invoke Channel.close() if you know you're going to invoke
> Connection.close() anyway.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> ______________________________**_________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111114/f6a2d5e6/attachment.htm>

From mihirm at omc-international.com.au  Mon Nov 14 23:51:19 2011
From: mihirm at omc-international.com.au (Mihir Mone)
Date: Tue, 15 Nov 2011 07:51:19 +0800
Subject: [rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
In-Reply-To: <4EC12739.5080105@rabbitmq.com>
References: <4EB9CA70.5070107@omc-international.com.au>	<4EBA8A48.2090305@rabbitmq.com>	<4EBB0F23.7030601@omc-international.com.au>	<4EBB7B3A.1040201@rabbitmq.com>
	<4EBD174E.8000102@rabbitmq.com>
	<4EC08087.7090003@omc-international.com.au>
	<4EC12739.5080105@rabbitmq.com>
Message-ID: <4EC1A977.8050102@omc-international.com.au>

Can you please let me when this bug/enhancement is done ? Also will 
these enhancements be ported back for 2.6.1 or will I need to get 2.7.0 ?

Regards,
Mihir

On 14/11/2011 10:35 PM, Simon MacMullen wrote:
> Ah.
>
> As you can probably tell, rabbitmq-shovel-management is still quite 
> new. I don't think I tested it with SSL. Bug filed.
>
> Cheers, Simon
>
> On 14/11/11 02:44, Mihir Mone wrote:
>> Cheers mate, All hunky dory now.
>>
>> I do have a doubt/suggestion though. What do the keyfile, certfile and
>> cacert fields in the source and destination columns show ? The MD5
>> hashes ? It becomes cumbersome since if you have a number of shovels
>> defined with SSL the page becomes very very large due to these fields.
>> Can't we just show the location of the files ? I know that suggestion
>> might be a security fail but then having the page become huge is also
>> not desirable. See attached image. Look how big the page is and I have
>> only 4 shovels defined at this point. We will potentially have around
>> 12-13 in the near future.
>>
>> Also I think the host field can be shown in plain text. I don't think
>> that would be a security risk.
>>
>> Regards,
>> Mihir
>>
>> On 11/11/2011 8:38 PM, Simon MacMullen wrote:
>>> On 10/11/11 07:20, Matthias Radestock wrote:
>>>> Oops, looks like the patch was compiled against the 2.7.0 version 
>>>> of the
>>>> erlang client rather than 2.6.1. Simon is on holiday today but will
>>>> hopefully look into this on his return.
>>>
>>> Oops. *Sticks head in bucket*
>>>
>>> Mihir, I've updated the .ez at the URL upthread - can you try again?
>>>
>>> Cheers, Simon
>>>
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>

From kilian.ciuffolo at gmail.com  Tue Nov 15 00:26:43 2011
From: kilian.ciuffolo at gmail.com (Kilian C.)
Date: Tue, 15 Nov 2011 01:26:43 +0100
Subject: [rabbitmq-discuss] know when a consumer disconnect from a node
In-Reply-To: <4EC1650E.2000209@rabbitmq.com>
References: <C42506BFC6F045D9B460480A3F1417F3@gmail.com>
	<4EC1650E.2000209@rabbitmq.com>
Message-ID: <5802837840E044778E857B5FF44E4331@gmail.com>

actually i am using https://github.com/postwait/node-amqp (nodejs)
the only way is to write a custom exchange? the topic exchange doesn't have the bind/unbind event?

i am not so good at erlang :)



-- 
Kilian C.


On Monday, November 14, 2011 at 7:59 PM, Matthias Radestock wrote:

> Kilian,
> 
> On 14/11/11 18:39, Kilian C. wrote:
> > is it possible to know when a client is disconnected from a rabbitmq node?
> > 
> > This is my env:
> > 
> > 1 rabbitmq node.
> > 3 client (publishers/subscribers) severs
> > 
> > when a server crashes/shutdown/disconnects from the rabbitmq server,
> > other client server needs to be notified about that.
> > 
> > Is there a way to route/publish a simple (dis)connection message to a
> > certain queue/exchange?
> > 
> 
> 
> There is nothing built-in, but you could implement a custom exchange 
> type for this.
> 
> The basic idea is that a client, after connecting, creates an exclusive 
> queue and binds it to an exchange of the custom exchange type. Due to 
> the exclusivity, the queue and hence the binding will get removed when 
> the connection is closed. The exchange sees both the bind and unbind 
> events and can publish notification messages when it gets them.
> 
> See https://github.com/tonyg/presence-exchange for an exchange type that 
> does s.t. like that. Warning: this may need some tweaking to get to work 
> with recent versions of RabbitMQ.
> 
> 
> Regards,
> 
> Matthias. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111115/e284ac25/attachment.htm>

From matthias at rabbitmq.com  Tue Nov 15 00:37:50 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 15 Nov 2011 00:37:50 +0000
Subject: [rabbitmq-discuss] know when a consumer disconnect from a node
In-Reply-To: <5802837840E044778E857B5FF44E4331@gmail.com>
References: <C42506BFC6F045D9B460480A3F1417F3@gmail.com>
	<4EC1650E.2000209@rabbitmq.com>
	<5802837840E044778E857B5FF44E4331@gmail.com>
Message-ID: <4EC1B45E.2010409@rabbitmq.com>

Kilian,

On 15/11/11 00:26, Kilian C. wrote:
> actually i am using https://github.com/postwait/node-amqp (nodejs)
> the only way is to write a custom exchange? the topic exchange doesn't
> have the bind/unbind event?
>
> i am not so good at erlang :)

You could implement everything via an external exchange without needing 
to touch Erlang: https://github.com/rabbitmq/rabbitmq-external-exchange.

Matthias.

From majek04 at gmail.com  Tue Nov 15 00:44:36 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Tue, 15 Nov 2011 00:44:36 +0000
Subject: [rabbitmq-discuss] know when a consumer disconnect from a node
In-Reply-To: <4EC1650E.2000209@rabbitmq.com>
References: <C42506BFC6F045D9B460480A3F1417F3@gmail.com>
	<4EC1650E.2000209@rabbitmq.com>
Message-ID: <CABzX+qzdnU+jCiWe1TsRAPfMDu5GmHcTw7Xay8V1v+r7oSeJvQ@mail.gmail.com>

On Mon, Nov 14, 2011 at 18:59, Matthias Radestock <matthias at rabbitmq.com> wrote:
> See https://github.com/tonyg/presence-exchange for an exchange type that
> does s.t. like that. Warning: this may need some tweaking to get to work
> with recent versions of RabbitMQ.

Just a brief note, I got it working few months ago:
  https://github.com/majek/rabbitmq-x-presence

Again, things might have changed since then and the code may
require some minor changes, but at least it should be easier to
get it working.

Cheers,
    Marek

From pursanovd at gmail.com  Tue Nov 15 08:20:08 2011
From: pursanovd at gmail.com (0x49D1)
Date: Tue, 15 Nov 2011 00:20:08 -0800 (PST)
Subject: [rabbitmq-discuss] Clustering problem
Message-ID: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>

Hello,
i have a problem when trying to create rabbitmq cluster on windows.
Servers are r1 and r2. r1 can ping r2, r2-r1.
I did all, mentioned in instruction http://www.rabbitmq.com/clustering.html#creating
but get such message:
Clustering node rabbit at R2 with [rabbit at R1] ...
Error: {no_running_cluster_nodes,[rabbit at R1],[rabbit at R1]}

When i try to see status of r2 from r1 i see such message:
C:\Program Files (x86)\RabbitMQ Server
\rabbitmq_server-2.7.0\sbin>rabbitmqctl -n
 rabbit at r2 status
Status of node rabbit at r2 ...
Error: unable to connect to node rabbit at r2: nodedown
diagnostics:
- nodes and their ports on r2: [{rabbit,49214}]
- current node: rabbitmqctl12518 at r1
- current node home dir: C:\Users\Administrator
- current node cookie hash: QsJXNAJ4kikETB6oLkVJbw==
sane on r1-r1:
C:\Program Files (x86)\RabbitMQ Server
\rabbitmq_server-2.7.0\sbin>rabbitmqctl -n
 rabbit at r1 status
Status of node rabbit at r1 ...
Error: unable to connect to node rabbit at r1: nodedown
diagnostics:
- nodes and their ports on r1: [{rabbit,49355},
{rabbitmqctl2810,49624}]
- current node: rabbitmqctl2810 at r1
- current node home dir: C:\Users\Administrator
- current node cookie hash: QsJXNAJ4kikETB6oLkVJbw==

Tho firewalls are off on both servers. r2 is in r1's hosts. Dont know
where the problem is and cant find any solutions on discussion or
troubleshooting.

From matthias at rabbitmq.com  Tue Nov 15 08:32:36 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 15 Nov 2011 08:32:36 +0000
Subject: [rabbitmq-discuss] Clustering problem
In-Reply-To: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
Message-ID: <4EC223A4.8020904@rabbitmq.com>

On 15/11/11 08:20, 0x49D1 wrote:
> sane on r1-r1:

So rabbitmqctl on r1 cannot talk to the server on the same node?

Check that the cookie hash reported by rabbit on startup is the same as 
shown in the rabbitmqctl diagnostics.

Regards,

Matthias.

From matthias at rabbitmq.com  Tue Nov 15 09:14:37 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 15 Nov 2011 09:14:37 +0000
Subject: [rabbitmq-discuss] RabbitMQ Crash
In-Reply-To: <1321287273.14321.YahooMailNeo@web111010.mail.gq1.yahoo.com>
References: <1321283831.68598.YahooMailNeo@web111007.mail.gq1.yahoo.com>
	<4EC135AD.9060008@rabbitmq.com>
	<1321285627.67686.YahooMailNeo@web111007.mail.gq1.yahoo.com>
	<4EC13A97.4020801@rabbitmq.com>
	<1321287273.14321.YahooMailNeo@web111010.mail.gq1.yahoo.com>
Message-ID: <4EC22D7D.6090902@rabbitmq.com>

Dave,

On 14/11/11 16:14, Dave Greggory wrote:
> Since we don't know what the problem is and it happens rarely, there's
> no way to confirm even after upgrading that the problem has been fixed.
> Is there any more information that we can provide so you can
> troubleshoot the problem?

I do now have a theory for why the problem may occur.

How long was the rabbit running before it crashed? Could you send us the 
*complete* rabbit log, going all the way from the startup to the crash? 
It's probably too long for the list, so please send it to 
info at rabbitmq.com. Thanks.

Regards,

Matthias.

From simon at rabbitmq.com  Tue Nov 15 11:36:33 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 15 Nov 2011 11:36:33 +0000
Subject: [rabbitmq-discuss] know when a consumer disconnect from a node
In-Reply-To: <CABzX+qzdnU+jCiWe1TsRAPfMDu5GmHcTw7Xay8V1v+r7oSeJvQ@mail.gmail.com>
References: <C42506BFC6F045D9B460480A3F1417F3@gmail.com>	<4EC1650E.2000209@rabbitmq.com>
	<CABzX+qzdnU+jCiWe1TsRAPfMDu5GmHcTw7Xay8V1v+r7oSeJvQ@mail.gmail.com>
Message-ID: <4EC24EC1.4030206@rabbitmq.com>

On 15/11/11 00:44, Marek Majkowski wrote:
> Again, things might have changed since then and the code may
> require some minor changes, but at least it should be easier to
> get it working.

This postdates the serialise_events change so it should be as good as it 
ever was.

I wonder about importing this into public-umbrella. Hmm.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From 0x6e6562 at gmail.com  Tue Nov 15 12:30:54 2011
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Tue, 15 Nov 2011 12:30:54 +0000
Subject: [rabbitmq-discuss] CommandAssembler
Message-ID: <CAB-G1jiBDeasSeYeEwJ+Ry_5_UKEWPHR7x9+av1q1CVYWVR_Nw@mail.gmail.com>

Dear list,

I know that there is already a thread on the 2.6/2.7 client side API
changes, but I thought this one might fall into it's own thread.

I was wondering whether there was a conscious design choice to reduce
the visibility of the ported CommandAssembler to default package
scope?

We were using the old AMQCommand.Assembler which was public in the
com.rabbitmq.client.impl namespace.

Cheers,

Ben

From schramm.ingo at googlemail.com  Tue Nov 15 13:38:02 2011
From: schramm.ingo at googlemail.com (ingo schramm)
Date: Tue, 15 Nov 2011 05:38:02 -0800 (PST)
Subject: [rabbitmq-discuss] Rabbit 2.7.0: how to relocate
	/etc/rabbitmq/enabled_plugins
Message-ID: <f44089f1-2cd5-4ed6-aec9-168a406b227f@x7g2000yqb.googlegroups.com>

How could I relocate "/etc/rabbitmq/enabled_plugins", e.g. when
starting multiple nodes with different setups on one machine (for
testing, clustering etc.). By environment variable? What's its name?

Regards,
Ingo

From alexandru at rabbitmq.com  Tue Nov 15 14:35:54 2011
From: alexandru at rabbitmq.com (Alexandru =?utf-8?B?U2N2b3LFo292?=)
Date: Tue, 15 Nov 2011 14:35:54 +0000
Subject: [rabbitmq-discuss] Rabbit 2.7.0: how to relocate
 /etc/rabbitmq/enabled_plugins
In-Reply-To: <f44089f1-2cd5-4ed6-aec9-168a406b227f@x7g2000yqb.googlegroups.com>
References: <f44089f1-2cd5-4ed6-aec9-168a406b227f@x7g2000yqb.googlegroups.com>
Message-ID: <20111115143554.GC3387@southbank>

Hi Ingo,

> By environment variable? What's its name?

It's RABBITMQ_ENABLED_PLUGINS_FILE

Cheers,
Alex

On Tue, Nov 15, 2011 at 05:38:02AM -0800, ingo schramm wrote:
> How could I relocate "/etc/rabbitmq/enabled_plugins", e.g. when
> starting multiple nodes with different setups on one machine (for
> testing, clustering etc.). By environment variable? What's its name?
> 
> Regards,
> Ingo
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From steghio at eng.it  Tue Nov 15 14:39:13 2011
From: steghio at eng.it (Stefano Ghio)
Date: Tue, 15 Nov 2011 15:39:13 +0100
Subject: [rabbitmq-discuss] Create exchanges and queues beforehand
In-Reply-To: <CABzX+qyERYFCBMcHKFpTY2tQr-=aVWp1ujw=_QQ4xSnJO_GhXA@mail.gmail.com>
References: <CABzX+qyERYFCBMcHKFpTY2tQr-=aVWp1ujw=_QQ4xSnJO_GhXA@mail.gmail.com>
Message-ID: <4EC27991.8030904@eng.it>

>If you need to hear about previous messages, you should
>create queue beforehand.

Done but with issues as my problem lies there:
/
/>A queue is identified by a name. The same name= the same
>queue. You can bind multiple exchanges to a queue though,
>and receive data from multiple exchanges on a single queue.

I need to declare one queue for every receiver and bind it to the same exchange but I don't know how many there will be, furthermore everything has to be done at runtime.

Say I have a client CLIENT0 at t0 which declares:
- queue A
- exchange EX

 From its code, I bind EX-A with routing "client.something":

ConnectionFactory factory = new ConnectionFactory();
factory.setHost("localhost");
connection = factory.newConnection();
channel = connection.createChannel();
channel.exchangeDeclare("EX", "topic");
channel.queueDeclare("A", false, false, false, null);
channel.queueBind("A", "EX", "client.something");

Now if I send a message:

[...]
channel.basicPublish("EX", "client.*", null, message.getBytes());

it gets queued in queue A and I can read it with:

[...]
QueueingConsumer consumer = new QueueingConsumer(channel);
channel.basicConsume("A", true, consumer);

Later at t1, two more clients CLIENT1, CLIENT2 show up and declare:
- queues B, C
on the same exchange EX

 From their code, I bind EX-B with routing "client.else" and EX-C with routing "another.something" so that I can send messages to both CLIENT0 and CLIENT1 by using routing "client.*", and to CLIENT0 and CLIENT2 using routing "*.something".

If I now send another message from CLIENT0, it only gets queued in queue A and never goes in queue B or C. Declaring and binding all three queues at time t0 instead works and messages are delivered correctly to the right clients.

My question is:

How can I dynamically declare and bind queues to already existing exchanges so that already running senders can continue sending messages as they did before and have them delivered properly?
Back to my example, I'd like CLIENT0 to keep sending messages routing them with "client.*" and see those messages added in the newly created queue B too after CLIENT1 has declared and binded it. Maybe I need some sort of refresh in CLIENT0?

Any help is much appreciated,

have a nice day


-- 
Dr. Stefano Ghio - ENG Engineering Italy

Website: http://groglogs.blogspot.com/

*If you received this message but you are not its recipient, please 
ignore it and warn me, thank you.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111115/43f9e636/attachment.htm>

From steghio at eng.it  Tue Nov 15 15:41:11 2011
From: steghio at eng.it (Stefano Ghio)
Date: Tue, 15 Nov 2011 16:41:11 +0100
Subject: [rabbitmq-discuss] Create exchanges and queues beforehand
In-Reply-To: <4EC27991.8030904@eng.it>
References: <4EC27991.8030904@eng.it>
Message-ID: <4EC28817.6030005@eng.it>

Never mind,

solved by having every receiver create its own queue at startup and 
sending messages using defined rules common to everyone.

Send is then done as:

[...]
exchangeDeclare(..);
basicPublish(..);

Of course sending before the receiver has spawned results in message loss.

Thanks for your help anyway,

cheers
-- 
Dr. Stefano Ghio - ENG Engineering Italy

Website: http://groglogs.blogspot.com/

*If you received this message but you are not its recipient, please 
ignore it and warn me, thank you.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111115/b899aee9/attachment.htm>

From simon at rabbitmq.com  Tue Nov 15 15:48:59 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 15 Nov 2011 15:48:59 +0000
Subject: [rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
In-Reply-To: <4EC1A977.8050102@omc-international.com.au>
References: <4EB9CA70.5070107@omc-international.com.au>	<4EBA8A48.2090305@rabbitmq.com>	<4EBB0F23.7030601@omc-international.com.au>	<4EBB7B3A.1040201@rabbitmq.com>	<4EBD174E.8000102@rabbitmq.com>	<4EC08087.7090003@omc-international.com.au>	<4EC12739.5080105@rabbitmq.com>
	<4EC1A977.8050102@omc-international.com.au>
Message-ID: <4EC289EB.6050306@rabbitmq.com>

On 14/11/11 23:51, Mihir Mone wrote:
> Can you please let me when this bug/enhancement is done ? Also will
> these enhancements be ported back for 2.6.1 or will I need to get 2.7.0 ?

Well, since you asked nicely I backported it:

http://www.rabbitmq.com/releases/plugins/v2.6.1/rabbitmq_shovel_management-2.6.1.2.ez

http://www.rabbitmq.com/releases/plugins/v2.7.0/rabbitmq_shovel_management-2.7.0.1.ez

This just removes all the SSL file info and substitutes a flag to tell 
you whether the connection is SSL or not.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From andrea.rosa at hp.com  Tue Nov 15 15:56:44 2011
From: andrea.rosa at hp.com (Rosa, Andrea)
Date: Tue, 15 Nov 2011 15:56:44 +0000
Subject: [rabbitmq-discuss] Error message
Message-ID: <5F389C517756284F80239F55BCA5DDDD17D5D0B1@G9W0721.americas.hpqcorp.net>

Hi

I have got this message in the log file:

=ERROR REPORT==== 14-Nov-2011::16:34:05 === connection <0.25350.263>, channel 1 - error:

{amqp_error,command_invalid,"second 'channel.open' seen",'channel.open'}



=INFO REPORT==== 14-Nov-2011::16:34:05 === closing TCP connection <0.25350.263> from ipadd:port

We are running rabbitmq 2.6.1 version
Cheers
--
Andrea
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111115/e891b549/attachment.htm>

From matthias at rabbitmq.com  Tue Nov 15 16:04:43 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 15 Nov 2011 16:04:43 +0000
Subject: [rabbitmq-discuss] Error message
In-Reply-To: <5F389C517756284F80239F55BCA5DDDD17D5D0B1@G9W0721.americas.hpqcorp.net>
References: <5F389C517756284F80239F55BCA5DDDD17D5D0B1@G9W0721.americas.hpqcorp.net>
Message-ID: <4EC28D9B.309@rabbitmq.com>

Andrea,

On 15/11/11 15:56, Rosa, Andrea wrote:
> =ERROR REPORT==== 14-Nov-2011::16:34:05 === connection <0.25350.263>,
> channel 1 - error:
>
> {amqp_error,command_invalid,"second 'channel.open' seen",'channel.open'}

The error means pretty much exactly what it says - a client sent a 
channel.open on a channel that was already open. This is most likely a 
problem with the client library you are using.

Regards,

Matthias.

From majek04 at gmail.com  Tue Nov 15 17:53:25 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Tue, 15 Nov 2011 17:53:25 +0000
Subject: [rabbitmq-discuss] Create exchanges and queues beforehand
In-Reply-To: <4EC28817.6030005@eng.it>
References: <4EC27991.8030904@eng.it>
	<4EC28817.6030005@eng.it>
Message-ID: <CABzX+qzg-nyMOCupy+7NV=rinFkLVHB3HsjHktN7FN8fK=45xw@mail.gmail.com>

On Tue, Nov 15, 2011 at 15:41, Stefano Ghio <steghio at eng.it> wrote:
> Never mind,
>
> solved by having every receiver create its own queue at startup and sending
> messages using defined rules common to everyone.
>
> Send is then done as:
>
> [...]
> exchangeDeclare(..);
> basicPublish(..);
>
> Of course sending before the receiver has spawned results in message loss.
>
> Thanks for your help anyway,


Yes, that's how it should be done.

I'm happy to hear that you get it working.

Cheers,
  Marek


> cheers
> --
> Dr. Stefano Ghio - ENG Engineering Italy
>
> Website: http://groglogs.blogspot.com/
>
> If you received this message but you are not its recipient, please ignore it
> and warn me, thank you.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>

From jasonjwwilliams at gmail.com  Tue Nov 15 19:25:41 2011
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Tue, 15 Nov 2011 12:25:41 -0700
Subject: [rabbitmq-discuss] Rabbit book update
Message-ID: <CAHZAEpfCOUDV-HsWvqZy_nX1i7GPse6+FnP5FrXMnHoaHf0sDw@mail.gmail.com>

Hi All,

We've had a lot of requests to add mirrored-queues, publisher confirms, and
chapters on performance tuning and security. Just wanted to let everyone
know the latest MEAP release adds all that: http://manning.com/videla/

-J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111115/58cf1345/attachment.htm>

From alexis at rabbitmq.com  Tue Nov 15 19:39:18 2011
From: alexis at rabbitmq.com (Alexis Richardson)
Date: Tue, 15 Nov 2011 19:39:18 +0000
Subject: [rabbitmq-discuss] Rabbit book update
In-Reply-To: <CAHZAEpfCOUDV-HsWvqZy_nX1i7GPse6+FnP5FrXMnHoaHf0sDw@mail.gmail.com>
References: <CAHZAEpfCOUDV-HsWvqZy_nX1i7GPse6+FnP5FrXMnHoaHf0sDw@mail.gmail.com>
Message-ID: <CACOPnvejwkq9qN8DVpi47bkjtgC5u4q72pXjDWG0bN0u2DdVog@mail.gmail.com>

Cool!

On Tue, Nov 15, 2011 at 7:25 PM, Jason J. W. Williams
<jasonjwwilliams at gmail.com> wrote:
> Hi All,
> We've had a lot of requests to add mirrored-queues, publisher confirms, and
> chapters on performance tuning and security. Just wanted to let everyone
> know the latest MEAP release adds all that:?http://manning.com/videla/
> -J
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>

From michael.s.klishin at gmail.com  Tue Nov 15 21:36:46 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 16 Nov 2011 00:36:46 +0300
Subject: [rabbitmq-discuss] [announcement] New Ruby clients documentation
	site
Message-ID: <CAE3HoVRh4b-ufNMsLcf0gEJ=s+Q=AB+JW+Tr2KfS1ddQ7qz60w@mail.gmail.com>

I am happy to announce new amqp gem documentation site: it is at
http://ruby-amqp.github.com
right now but will soon [1] be available as rubyamqp.info and
rubyrabbitmq.info.

It is the same content as http://bit.ly/amqp-gem-docs right now but we will
keep expanding it.
The plan is to use this as an opportunity to write documentation guides for
two other Ruby clients,
Bunny and Hot Bunnies [2].

I hope people who use Ruby and RabbitMQ will like this new guides site as
much as I do. Kudos
to Alexander Petrov for doing all the work on CSS.


1. "soon" here means "as soon as I am done fighting with the dns registrar".
2. http://github.com/ruby-amqp/hot_bunnies
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/cfc387ef/attachment.htm>

From baldgoth at gmail.com  Tue Nov 15 22:03:33 2011
From: baldgoth at gmail.com (TrueWill)
Date: Tue, 15 Nov 2011 14:03:33 -0800 (PST)
Subject: [rabbitmq-discuss] Statistics database could not be contacted
In-Reply-To: <18139766.2400.1320956231128.JavaMail.geo-discussion-forums@yqhd1>
References: <18139766.2400.1320956231128.JavaMail.geo-discussion-forums@yqhd1>
Message-ID: <28267807.50.1321394613903.JavaMail.geo-discussion-forums@yqoo7>

We updated to RabbitMQ 2.7.0 / Erlang R14B04 and the issue disappeared. It 
might just have been from shutting down the service, though.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111115/19f008d8/attachment.htm>

From mihirm at omc-international.com.au  Wed Nov 16 00:12:43 2011
From: mihirm at omc-international.com.au (Mihir Mone)
Date: Wed, 16 Nov 2011 08:12:43 +0800
Subject: [rabbitmq-discuss] RabbitMQ Shovel Management plugin not working
In-Reply-To: <4EC289EB.6050306@rabbitmq.com>
References: <4EB9CA70.5070107@omc-international.com.au>	<4EBA8A48.2090305@rabbitmq.com>	<4EBB0F23.7030601@omc-international.com.au>	<4EBB7B3A.1040201@rabbitmq.com>	<4EBD174E.8000102@rabbitmq.com>	<4EC08087.7090003@omc-international.com.au>	<4EC12739.5080105@rabbitmq.com>
	<4EC1A977.8050102@omc-international.com.au>
	<4EC289EB.6050306@rabbitmq.com>
Message-ID: <4EC2FFFB.10803@omc-international.com.au>

Cheers mate, much appreciated.

Regards,
Mihir

On 15/11/2011 11:48 PM, Simon MacMullen wrote:
> On 14/11/11 23:51, Mihir Mone wrote:
>> Can you please let me when this bug/enhancement is done ? Also will
>> these enhancements be ported back for 2.6.1 or will I need to get 
>> 2.7.0 ?
>
> Well, since you asked nicely I backported it:
>
> http://www.rabbitmq.com/releases/plugins/v2.6.1/rabbitmq_shovel_management-2.6.1.2.ez 
>
>
> http://www.rabbitmq.com/releases/plugins/v2.7.0/rabbitmq_shovel_management-2.7.0.1.ez 
>
>
> This just removes all the SSL file info and substitutes a flag to tell 
> you whether the connection is SSL or not.
>
> Cheers, Simon
>

From pursanovd at gmail.com  Wed Nov 16 06:05:22 2011
From: pursanovd at gmail.com (Pursanov Dmitry)
Date: Wed, 16 Nov 2011 10:05:22 +0400
Subject: [rabbitmq-discuss] Fwd: Re:  Clustering problem
In-Reply-To: <op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
	<4EC223A4.8020904@rabbitmq.com>
	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
Message-ID: <op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>

Matthias,
sorry, cant find information on how to check that..
Cookie hashes on r1 and r2 are same(just copied cookie file)

On Tue, 15 Nov 2011 12:32:36 +0400, Matthias Radestock
<matthias at rabbitmq.com> wrote:

> Check that the cookie hash reported by rabbit on startup is the same as  
> shown in the rabbitmqctl diagnostics.

-On 15/11/11 06:42, Pursanov Dmitry wrote:
-i have a problem when trying to create rabbitmq cluster on windows.

-Please re-post this question on rabbitmq-discuss.

--Servers are r1 and r2. r1 can ping r2, r2-r1.
--I did all, mentioned in instruction
--http://www.rabbitmq.com/clustering.html#creating but get such message:
--Clustering node rabbit at R2 with [rabbit at R1] ...
--Error: {no_running_cluster_nodes,[rabbit at R1],[rabbit at R1]}

--When i try to see status of r2 from r1 i see such message:
--C:\Program Files (x86)\RabbitMQ
--Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl -n
--rabbit at r2 status

-What are th results for repeating this for a) r1 from r2, b) r1 from r1,  
c) r2 from r2?

-Matthias.

-- 
DPursanov

From matthias at rabbitmq.com  Wed Nov 16 07:06:58 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 16 Nov 2011 07:06:58 +0000
Subject: [rabbitmq-discuss] Fwd: Re:  Clustering problem
In-Reply-To: <op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>	<4EC223A4.8020904@rabbitmq.com>	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
	<op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>
Message-ID: <4EC36112.2000806@rabbitmq.com>

Dmitry,

On 16/11/11 06:05, Pursanov Dmitry wrote:
> On Tue, 15 Nov 2011 12:32:36 +0400, Matthias Radestock
> <matthias at rabbitmq.com> wrote:
>> Check that the cookie hash reported by rabbit on startup is the same
>> as shown in the rabbitmqctl diagnostics.
>
> sorry, cant find information on how to check that..
> Cookie hashes on r1 and r2 are same(just copied cookie file)

Are you running the rabbits as windows services? If so then then see 
RABBITMQ_CONSOLE_LOG env var 
(http://www.rabbitmq.com/configure.html#define-environment-variables) 
for enabling logging of the startup output.

Regards,

Matthias.

From pursanovd at gmail.com  Wed Nov 16 07:52:24 2011
From: pursanovd at gmail.com (Pursanov Dmitry)
Date: Wed, 16 Nov 2011 11:52:24 +0400
Subject: [rabbitmq-discuss] Clustering problem
In-Reply-To: <4EC36112.2000806@rabbitmq.com>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
	<4EC223A4.8020904@rabbitmq.com>
	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
	<op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36112.2000806@rabbitmq.com>
Message-ID: <op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>

Matthias,
yes, im running them as windows services.
Added RABBITMQ_CONSOLE_LOG to env variables, set to reuse(and new after  
some tries), restarted service. But `RabbitMQ.debug` is not being created  
in %APPDATA%\RabbitMQ . COnsole still reports same:

C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl stop_app
Stopping node rabbit at R1 ...
...done.

C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl reset
Resetting node rabbit at R1 ...
...done.

C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl start_app
Starting node rabbit at R1 ...
...done.

C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl cluster rabbit at r2
Clustering node rabbit at R1 with [rabbit at r2] ...
Error: mnesia_unexpectedly_running


On Wed, 16 Nov 2011 11:06:58 +0400, Matthias Radestock  
<matthias at rabbitmq.com> wrote:

> Dmitry,
>
> On 16/11/11 06:05, Pursanov Dmitry wrote:
>> On Tue, 15 Nov 2011 12:32:36 +0400, Matthias Radestock
>> <matthias at rabbitmq.com> wrote:
>>> Check that the cookie hash reported by rabbit on startup is the same
>>> as shown in the rabbitmqctl diagnostics.
>>
>> sorry, cant find information on how to check that..
>> Cookie hashes on r1 and r2 are same(just copied cookie file)
>
> Are you running the rabbits as windows services? If so then then see  
> RABBITMQ_CONSOLE_LOG env var  
> (http://www.rabbitmq.com/configure.html#define-environment-variables)  
> for enabling logging of the startup output.
>
> Regards,
>
> Matthias.


-- 
DPursanov

From matthias at rabbitmq.com  Wed Nov 16 08:01:52 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 16 Nov 2011 08:01:52 +0000
Subject: [rabbitmq-discuss] Clustering problem
In-Reply-To: <op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
	<4EC223A4.8020904@rabbitmq.com>
	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
	<op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36112.2000806@rabbitmq.com>
	<op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>
Message-ID: <4EC36DF0.8000403@rabbitmq.com>

Dmitry,

On 16/11/11 07:52, Pursanov Dmitry wrote:
> Added RABBITMQ_CONSOLE_LOG to env variables, set to reuse(and new after
> some tries), restarted service. But `RabbitMQ.debug` is not being
> created in %APPDATA%\RabbitMQ.

Restarting the service is not enough; you need to re-install the service 
with rabbitmq-service.bat. See 
http://www.rabbitmq.com/install.html#running-windows-service

> C:\Program Files (x86)\RabbitMQ
> Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl stop_app
> Stopping node rabbit at R1 ...
> ...done.
>
> C:\Program Files (x86)\RabbitMQ
> Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl reset
> Resetting node rabbit at R1 ...
> ...done.
>
> C:\Program Files (x86)\RabbitMQ
> Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl start_app
> Starting node rabbit at R1 ...
> ...done.
>
> C:\Program Files (x86)\RabbitMQ
> Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl cluster rabbit at r2
> Clustering node rabbit at R1 with [rabbit at r2] ...
> Error: mnesia_unexpectedly_running

The last two steps are reversed - you need to configure the cluster 
before starting the app.

Regards,

Matthias.

From pursanovd at gmail.com  Wed Nov 16 08:07:25 2011
From: pursanovd at gmail.com (Pursanov Dmitry)
Date: Wed, 16 Nov 2011 12:07:25 +0400
Subject: [rabbitmq-discuss] Clustering problem
In-Reply-To: <4EC36DF0.8000403@rabbitmq.com>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
	<4EC223A4.8020904@rabbitmq.com>
	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
	<op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36112.2000806@rabbitmq.com>
	<op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36DF0.8000403@rabbitmq.com>
Message-ID: <op.v404ume17xm61f@ds-dev-020.delta-comm.ge>

Thank you, Matthias,
did as you told:

C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl cl
uster rabbit at r2
Clustering node rabbit at R1 with [rabbit at r2] ...
Error: {no_running_cluster_nodes,[rabbit at r2],[rabbit at r2]}

still no luck.
Here is what i did on R2 server, before starting configuring clustering on  
R1:

C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.6.0\sbin>rabbitmq-serve
r -detached
Activating RabbitMQ plugins ...
1 plugins activated:
* rabbitmq_management_agent-2.6.0

node with name "rabbit" already running on "R2"
diagnostics:
- nodes and their ports on R2:  
[{rabbit,49214},{rabbitmqprelaunch11002,49335}]
- current node: rabbitmqprelaunch11002 at r2
- current node home dir: C:\Users\Administrator
- current node cookie hash: QsJXNAJ4kikETB6oLkVJbw==

C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.6.0\sbin>rabbitmqctl st
op_app
Stopping node rabbit at R2 ...
...done.

C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.6.0\sbin>rabbitmqctl re
set
Resetting node rabbit at R2 ...
...done.

C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.6.0\sbin>rabbitmqctl st
art_app
Starting node rabbit at R2 ...
...done.


BTW, hope these are not problems, because of versioning conflicts(r1-2.7,  
r2-2.6)?


On Wed, 16 Nov 2011 12:01:52 +0400, Matthias Radestock  
<matthias at rabbitmq.com> wrote:

> Dmitry,
>
> On 16/11/11 07:52, Pursanov Dmitry wrote:
>> Added RABBITMQ_CONSOLE_LOG to env variables, set to reuse(and new after
>> some tries), restarted service. But `RabbitMQ.debug` is not being
>> created in %APPDATA%\RabbitMQ.
>
> Restarting the service is not enough; you need to re-install the service  
> with rabbitmq-service.bat. See  
> http://www.rabbitmq.com/install.html#running-windows-service
>
>> C:\Program Files (x86)\RabbitMQ
>> Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl stop_app
>> Stopping node rabbit at R1 ...
>> ...done.
>>
>> C:\Program Files (x86)\RabbitMQ
>> Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl reset
>> Resetting node rabbit at R1 ...
>> ...done.
>>
>> C:\Program Files (x86)\RabbitMQ
>> Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl start_app
>> Starting node rabbit at R1 ...
>> ...done.
>>
>> C:\Program Files (x86)\RabbitMQ
>> Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl cluster rabbit at r2
>> Clustering node rabbit at R1 with [rabbit at r2] ...
>> Error: mnesia_unexpectedly_running
>
> The last two steps are reversed - you need to configure the cluster  
> before starting the app.
>
> Regards,
>
> Matthias.


-- 
DPursanov

From matthias at rabbitmq.com  Wed Nov 16 08:26:21 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 16 Nov 2011 08:26:21 +0000
Subject: [rabbitmq-discuss] Clustering problem
In-Reply-To: <op.v404ume17xm61f@ds-dev-020.delta-comm.ge>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
	<4EC223A4.8020904@rabbitmq.com>
	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
	<op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36112.2000806@rabbitmq.com>
	<op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36DF0.8000403@rabbitmq.com>
	<op.v404ume17xm61f@ds-dev-020.delta-comm.ge>
Message-ID: <4EC373AD.4050408@rabbitmq.com>

Dmitry,

On 16/11/11 08:07, Pursanov Dmitry wrote:
> hope these are not problems, because of versioning
> conflicts(r1-2.7, r2-2.6)?

You certainly shouldn't mix rabbit versions in a cluster. I don't think 
that's the problem here, but I suggest you run 2.7.0 on both.

> C:\Program Files (x86)\RabbitMQ
> Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl cl
> uster rabbit at r2
> Clustering node rabbit at R1 with [rabbit at r2] ...
> Error: {no_running_cluster_nodes,[rabbit at r2],[rabbit at r2]}

Forget about clustering for the moment. First try to get both nodes up 
and running independently, and rabbitmqctl on both nodes to talk to the 
other nodes.

So please, on both nodes

1) remove the service with 'rabbitmq-service remove'
2) set the RABBITMQ_CONSOLE_LOG env var to 'new'.
3) install the service with 'rabbitmq-service install'
4) start the service with 'rabbitmq-service start'

Then, on R1 run

- rabbitmqctl status
- rabbitmqctl -n rabbit at R2 status

and on R2

- rabbitmqctl status
- rabbitmqctl -n rabbit at R2 status

If these all work then we can move on to clustering. If they don't then 
please post their output and the contents of the server console log 
(which after the above steps should hopefully be present now).

Regards,

Matthias.

From pursanovd at gmail.com  Wed Nov 16 08:57:12 2011
From: pursanovd at gmail.com (Pursanov Dmitry)
Date: Wed, 16 Nov 2011 12:57:12 +0400
Subject: [rabbitmq-discuss] Clustering problem
In-Reply-To: <4EC373AD.4050408@rabbitmq.com>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
	<4EC223A4.8020904@rabbitmq.com>
	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
	<op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36112.2000806@rabbitmq.com>
	<op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36DF0.8000403@rabbitmq.com>
	<op.v404ume17xm61f@ds-dev-020.delta-comm.ge>
	<4EC373AD.4050408@rabbitmq.com>
Message-ID: <op.v4065msp7xm61f@ds-dev-020.delta-comm.ge>

Matthias,
done, as you told(thank you for nice instructions again..). Renewed erlang  
and rabbit on R2.
Now, r1 status gives this:
C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl st
atus
Status of node rabbit at R1 ...
[{pid,3184},
  {running_applications,[{rabbit,"RabbitMQ","2.7.0"},
                         {mnesia,"MNESIA  CXC 138 12","4.5"},
                         {os_mon,"CPO  CXC 138 46","2.2.7"},
                         {sasl,"SASL  CXC 138 11","2.1.10"},
                         {stdlib,"ERTS  CXC 138 10","1.17.5"},
                         {kernel,"ERTS  CXC 138 10","2.14.5"}]},
  {os,{win32,nt}},
  {erlang_version,"Erlang R14B04 (erts-5.8.5) [smp:16:16] [rq:16]  
[async-threads:
30]\n"},
  {memory,[{total,14580864},
           {processes,5424760},
           {processes_used,5421512},
           {system,9156104},
           {atom,744181},
           {atom_used,739327},
           {binary,138920},
           {code,5973281},
           {ets,427508}]},
  {vm_memory_high_watermark,0.1001466035958343},
  {vm_memory_limit,858993459}]
...done.
r1-r2:
C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl -n
  rabbit at R2 status
Status of node rabbit at R2 ...
[{pid,3724},
  {running_applications,[{rabbit,"RabbitMQ","2.7.0"},
                         {os_mon,"CPO  CXC 138 46","2.2.7"},
                         {sasl,"SASL  CXC 138 11","2.1.10"},
                         {mnesia,"MNESIA  CXC 138 12","4.5"},
                         {stdlib,"ERTS  CXC 138 10","1.17.5"},
                         {kernel,"ERTS  CXC 138 10","2.14.5"}]},
  {os,{win32,nt}},
  {erlang_version,"Erlang R14B04 (erts-5.8.5) [smp:16:16] [rq:16]  
[async-threads:
30]\n"},
  {memory,[{total,19287248},
           {processes,6514840},
           {processes_used,6500440},
           {system,12772408},
           {atom,744181},
           {atom_used,739164},
           {binary,3664920},
           {code,5973281},
           {ets,510300}]},
  {vm_memory_high_watermark,0.1001466035958343},
  {vm_memory_limit,858993459}]
...done.
----------------
r2 status:
C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl st
atus
Status of node rabbit at R2 ...
[{pid,3724},
  {running_applications,[{rabbit,"RabbitMQ","2.7.0"},
                         {os_mon,"CPO  CXC 138 46","2.2.7"},
                         {sasl,"SASL  CXC 138 11","2.1.10"},
                         {mnesia,"MNESIA  CXC 138 12","4.5"},
                         {stdlib,"ERTS  CXC 138 10","1.17.5"},
                         {kernel,"ERTS  CXC 138 10","2.14.5"}]},
  {os,{win32,nt}},
  {erlang_version,"Erlang R14B04 (erts-5.8.5) [smp:16:16] [rq:16]  
[async-threads:
30]\n"},
  {memory,[{total,19460752},
           {processes,6604920},
           {processes_used,6600648},
           {system,12855832},
           {atom,744181},
           {atom_used,739004},
           {binary,3758456},
           {code,5973281},
           {ets,506908}]},
  {vm_memory_high_watermark,0.1001466035958343},
  {vm_memory_limit,858993459}]
...done.

r2-r1:
C:\Program Files (x86)\RabbitMQ  
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl -n
  rabbit at R1 status
Status of node rabbit at R1 ...
[{pid,3184},
  {running_applications,[{rabbit,"RabbitMQ","2.7.0"},
                         {mnesia,"MNESIA  CXC 138 12","4.5"},
                         {os_mon,"CPO  CXC 138 46","2.2.7"},
                         {sasl,"SASL  CXC 138 11","2.1.10"},
                         {stdlib,"ERTS  CXC 138 10","1.17.5"},
                         {kernel,"ERTS  CXC 138 10","2.14.5"}]},
  {os,{win32,nt}},
  {erlang_version,"Erlang R14B04 (erts-5.8.5) [smp:16:16] [rq:16]  
[async-threads:
30]\n"},
  {memory,[{total,14696512},
           {processes,5539692},
           {processes_used,5527004},
           {system,9156820},
           {atom,744181},
           {atom_used,739411},
           {binary,139808},
           {code,5973281},
           {ets,428924}]},
  {vm_memory_high_watermark,0.1001466035958343},
  {vm_memory_limit,858993459}]
...done.
-----
Debugs are created, saying that all is "ok" and services started.
Ready for clustering?..







On Wed, 16 Nov 2011 12:26:21 +0400, Matthias Radestock  
<matthias at rabbitmq.com> wrote:

> rabbitmqctl -n rabbit at R2 status


-- 
DPursanov

From sampo.savolainen at spatineo.com  Wed Nov 16 08:59:16 2011
From: sampo.savolainen at spatineo.com (Sampo Savolainen)
Date: Wed, 16 Nov 2011 10:59:16 +0200
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
Message-ID: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>

Hi,

I've installed RabbitMQ server on an Ubuntu 11.10 (desktop) box from the
.deb's provided on rabbitmq's website. After installing the server, the box
is unable to shut down. Powering off just results in logging off the
current session (and probably turning off some of the OS services in the
process). The only way "real" way to power off the computer is to do: "sudo
/sbin/poweroff now"

This bug has been confirmed on the Ubuntu Launchpad bugtracker:
https://bugs.launchpad.net/ubuntu/+source/rabbitmq-server/+bug/670289

Both releases 2.6.1 and 2.7.0 exhibit this behavior.


 Sampo Savolainen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/be1e01ff/attachment.htm>

From matthias at rabbitmq.com  Wed Nov 16 09:03:39 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 16 Nov 2011 09:03:39 +0000
Subject: [rabbitmq-discuss] Clustering problem
In-Reply-To: <op.v4065msp7xm61f@ds-dev-020.delta-comm.ge>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
	<4EC223A4.8020904@rabbitmq.com>
	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
	<op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36112.2000806@rabbitmq.com>
	<op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36DF0.8000403@rabbitmq.com>
	<op.v404ume17xm61f@ds-dev-020.delta-comm.ge>
	<4EC373AD.4050408@rabbitmq.com>
	<op.v4065msp7xm61f@ds-dev-020.delta-comm.ge>
Message-ID: <4EC37C6B.8090303@rabbitmq.com>

On 16/11/11 08:57, Pursanov Dmitry wrote:
> Ready for clustering?..

Yes. So on R2 run

rabbitmqctl stop_app
rabbitmqctl reset
rabbitmqctl cluster rabbit at R1
rabbitmqctl start_app

(this makes R2 a 'ram' node; if you want it to be a disk node then just 
change the 'cluster' line to "rabbitmqctl cluster rabbit at R1 rabbit at R2")

Matthias.

From pursanovd at gmail.com  Wed Nov 16 09:15:55 2011
From: pursanovd at gmail.com (Pursanov Dmitry)
Date: Wed, 16 Nov 2011 13:15:55 +0400
Subject: [rabbitmq-discuss] Clustering problem
In-Reply-To: <4EC37C6B.8090303@rabbitmq.com>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
	<4EC223A4.8020904@rabbitmq.com>
	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
	<op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36112.2000806@rabbitmq.com>
	<op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36DF0.8000403@rabbitmq.com>
	<op.v404ume17xm61f@ds-dev-020.delta-comm.ge>
	<4EC373AD.4050408@rabbitmq.com>
	<op.v4065msp7xm61f@ds-dev-020.delta-comm.ge>
	<4EC37C6B.8090303@rabbitmq.com>
Message-ID: <op.v4070tm67xm61f@ds-dev-020.delta-comm.ge>

..And it WORKS!!
Thank you so much for patience and help!
Wish you a nice day.

On Wed, 16 Nov 2011 13:03:39 +0400, Matthias Radestock  
<matthias at rabbitmq.com> wrote:

> On 16/11/11 08:57, Pursanov Dmitry wrote:
>> Ready for clustering?..
>
> Yes. So on R2 run
>
> rabbitmqctl stop_app
> rabbitmqctl reset
> rabbitmqctl cluster rabbit at R1
> rabbitmqctl start_app
>
> (this makes R2 a 'ram' node; if you want it to be a disk node then just  
> change the 'cluster' line to "rabbitmqctl cluster rabbit at R1 rabbit at R2")
>
> Matthias.


-- 
DPursanov

From matthias at rabbitmq.com  Wed Nov 16 09:19:26 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 16 Nov 2011 09:19:26 +0000
Subject: [rabbitmq-discuss] Clustering problem
In-Reply-To: <op.v4070tm67xm61f@ds-dev-020.delta-comm.ge>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
	<4EC223A4.8020904@rabbitmq.com>
	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
	<op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36112.2000806@rabbitmq.com>
	<op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36DF0.8000403@rabbitmq.com>
	<op.v404ume17xm61f@ds-dev-020.delta-comm.ge>
	<4EC373AD.4050408@rabbitmq.com>
	<op.v4065msp7xm61f@ds-dev-020.delta-comm.ge>
	<4EC37C6B.8090303@rabbitmq.com>
	<op.v4070tm67xm61f@ds-dev-020.delta-comm.ge>
Message-ID: <4EC3801E.3000004@rabbitmq.com>

Dmitry,

On 16/11/11 09:15, Pursanov Dmitry wrote:
> ..And it WORKS!!

Glad to hear it. Now if only we could figure out what you did wrong 
before so we can improve our docs. Could have just been the version 
mismatch, but the errors you were getting suggest otherwise.

Matthias.


From pursanovd at gmail.com  Wed Nov 16 09:25:16 2011
From: pursanovd at gmail.com (Pursanov Dmitry)
Date: Wed, 16 Nov 2011 13:25:16 +0400
Subject: [rabbitmq-discuss] Clustering problem
In-Reply-To: <4EC3801E.3000004@rabbitmq.com>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
	<4EC223A4.8020904@rabbitmq.com>
	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
	<op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36112.2000806@rabbitmq.com>
	<op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36DF0.8000403@rabbitmq.com>
	<op.v404ume17xm61f@ds-dev-020.delta-comm.ge>
	<4EC373AD.4050408@rabbitmq.com>
	<op.v4065msp7xm61f@ds-dev-020.delta-comm.ge>
	<4EC37C6B.8090303@rabbitmq.com>
	<op.v4070tm67xm61f@ds-dev-020.delta-comm.ge>
	<4EC3801E.3000004@rabbitmq.com>
Message-ID: <op.v408gepd7xm61f@ds-dev-020.delta-comm.ge>

Matthias,
error was: no_running_cluster_nodes..By the way, if i restart on of the  
servers- will the clustering work after it or i'll have to run commands  
again(or should i write autocluster configuration in rabbitmq.config?..)?
Also i had web console plugin enabled on R1(tho dont think it was its  
fault + Will have to enable it later again for some tests and statistics.).

On Wed, 16 Nov 2011 13:19:26 +0400, Matthias Radestock  
<matthias at rabbitmq.com> wrote:

> Dmitry,
>
> On 16/11/11 09:15, Pursanov Dmitry wrote:
>> ..And it WORKS!!
>
> Glad to hear it. Now if only we could figure out what you did wrong  
> before so we can improve our docs. Could have just been the version  
> mismatch, but the errors you were getting suggest otherwise.
>
> Matthias.
>


-- 
DPursanov

From matthias at rabbitmq.com  Wed Nov 16 09:27:00 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 16 Nov 2011 09:27:00 +0000
Subject: [rabbitmq-discuss] Clustering problem
In-Reply-To: <op.v408gepd7xm61f@ds-dev-020.delta-comm.ge>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
	<4EC223A4.8020904@rabbitmq.com>
	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
	<op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36112.2000806@rabbitmq.com>
	<op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>
	<4EC36DF0.8000403@rabbitmq.com>
	<op.v404ume17xm61f@ds-dev-020.delta-comm.ge>
	<4EC373AD.4050408@rabbitmq.com>
	<op.v4065msp7xm61f@ds-dev-020.delta-comm.ge>
	<4EC37C6B.8090303@rabbitmq.com>
	<op.v4070tm67xm61f@ds-dev-020.delta-comm.ge>
	<4EC3801E.3000004@rabbitmq.com>
	<op.v408gepd7xm61f@ds-dev-020.delta-comm.ge>
Message-ID: <4EC381E4.1050208@rabbitmq.com>

On 16/11/11 09:25, Pursanov Dmitry wrote:
> if i restart on of the servers- will the clustering work after it

yes, it should.

Matthias.

From simon at rabbitmq.com  Wed Nov 16 10:53:57 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 16 Nov 2011 10:53:57 +0000
Subject: [rabbitmq-discuss] Statistics database could not be contacted
In-Reply-To: <28267807.50.1321394613903.JavaMail.geo-discussion-forums@yqoo7>
References: <18139766.2400.1320956231128.JavaMail.geo-discussion-forums@yqhd1>
	<28267807.50.1321394613903.JavaMail.geo-discussion-forums@yqoo7>
Message-ID: <4EC39645.3060204@rabbitmq.com>

On 15/11/11 22:03, TrueWill wrote:
> We updated to RabbitMQ 2.7.0 / Erlang R14B04 and the issue disappeared.
> It might just have been from shutting down the service, though.

Well restarting the server should certainly fix it. The error message 
appears if the statistics database crashes (which it shouldn't) and is 
not restarted by its supervisor (which it should be).

If you see this happening again I'd be interested to see log files from 
around the time the DB stopped working...

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Wed Nov 16 10:57:37 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 16 Nov 2011 10:57:37 +0000
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
Message-ID: <4EC39721.7000201@rabbitmq.com>

On 16/11/11 08:59, Sampo Savolainen wrote:
> I've installed RabbitMQ server on an Ubuntu 11.10 (desktop) box from the
> .deb's provided on rabbitmq's website. After installing the server, the
> box is unable to shut down. Powering off just results in logging off the
> current session (and probably turning off some of the OS services in the
> process). The only way "real" way to power off the computer is to do:
> "sudo /sbin/poweroff now"

Hi, thanks for the bug report. I'll try setting up a VM to replicate this.

> This bug has been confirmed on the Ubuntu Launchpad bugtracker:
> https://bugs.launchpad.net/ubuntu/+source/rabbitmq-server/+bug/670289

Hmm, that bug seems is a bit garbled. Lots of different claims about 
what might be going on and what versions of Ubuntu are affected. I'm not 
sure how much I trust it. But I'll see if I can replicate it here. Sadly 
I don't know much about upstart...

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From shuklagauravjn at gmail.com  Wed Nov 16 12:00:39 2011
From: shuklagauravjn at gmail.com (GS)
Date: Wed, 16 Nov 2011 04:00:39 -0800 (PST)
Subject: [rabbitmq-discuss] Clustering of Rabbit MQ on thwo physical boxes.
Message-ID: <0e84b28f-d017-47ea-9773-74a13b0d77f7@41g2000pry.googlegroups.com>

I had a question about clustering rabbit on two separate physical
machine. The OS is unix. I was going through some blogs like
http://www.godlikemouse.com/2010/12/14/how-to-cluster-rabbit-mq/ and
it says that you have to change the /etc/hosts file. My organization
does not permits that change. IS it still possible to have a cluster
setup on two separate physical machines, without changing the /etc/
hosts file?

Are the steps mentioned at http://www.rabbitmq.com/clustering.html
sufficient? I am not doubting the content, but my experience of
http://www.rabbitmq.com/clustering.html#single-machine was not good.

From Gaurav.Shukla at hcl.com  Wed Nov 16 07:55:11 2011
From: Gaurav.Shukla at hcl.com (Gaurav Shukla)
Date: Wed, 16 Nov 2011 13:25:11 +0530
Subject: [rabbitmq-discuss] Clustering problem
In-Reply-To: <op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>
References: <353a46fe-61f4-4b4b-9cf6-6991f3167f3d@14g2000yqo.googlegroups.com>
	<4EC223A4.8020904@rabbitmq.com>	<op.v4zbte1a7xm61f@ds-dev-020.delta-comm.ge>
	<op.v40y67or7xm61f@ds-dev-020.delta-comm.ge>	<4EC36112.2000806@rabbitmq.com>
	<op.v4035mmc7xm61f@ds-dev-020.delta-comm.ge>
Message-ID: <8706360947A56E45B1418C635D3659640226FECFACFA@NDA-HCLT-EVS04.HCLT.CORP.HCL.IN>

I just got rabbitmq cluster done in unix box. I too got the same log. All I did was that I removed the rabbitmq-env.conf file and went as directed in the official site for clustering a single machine.

Gaurav Shukla
Senior Technical Architect -ADCOE
HCL Technologies Ltd.
Plot 1 & 2, Maple Towers, Sector 125, Noida (India)
Mob: +91-9899 89 9189
www.hcltech.com
www.hcl.com



-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Pursanov Dmitry
Sent: Wednesday, November 16, 2011 1:22 PM
To: Matthias Radestock
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Clustering problem

Matthias,
yes, im running them as windows services.
Added RABBITMQ_CONSOLE_LOG to env variables, set to reuse(and new after
some tries), restarted service. But `RabbitMQ.debug` is not being created
in %APPDATA%\RabbitMQ . COnsole still reports same:

C:\Program Files (x86)\RabbitMQ
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl stop_app
Stopping node rabbit at R1 ...
...done.

C:\Program Files (x86)\RabbitMQ
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl reset
Resetting node rabbit at R1 ...
...done.

C:\Program Files (x86)\RabbitMQ
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl start_app
Starting node rabbit at R1 ...
...done.

C:\Program Files (x86)\RabbitMQ
Server\rabbitmq_server-2.7.0\sbin>rabbitmqctl cluster rabbit at r2
Clustering node rabbit at R1 with [rabbit at r2] ...
Error: mnesia_unexpectedly_running


On Wed, 16 Nov 2011 11:06:58 +0400, Matthias Radestock
<matthias at rabbitmq.com> wrote:

> Dmitry,
>
> On 16/11/11 06:05, Pursanov Dmitry wrote:
>> On Tue, 15 Nov 2011 12:32:36 +0400, Matthias Radestock
>> <matthias at rabbitmq.com> wrote:
>>> Check that the cookie hash reported by rabbit on startup is the same
>>> as shown in the rabbitmqctl diagnostics.
>>
>> sorry, cant find information on how to check that..
>> Cookie hashes on r1 and r2 are same(just copied cookie file)
>
> Are you running the rabbits as windows services? If so then then see
> RABBITMQ_CONSOLE_LOG env var
> (http://www.rabbitmq.com/configure.html#define-environment-variables)
> for enabling logging of the startup output.
>
> Regards,
>
> Matthias.


--
DPursanov
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

::DISCLAIMER::
-----------------------------------------------------------------------------------------------------------------------

The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
It shall not attach any liability on the originator or HCL or its affiliates. Any views or opinions presented in
this email are solely those of the author and may not necessarily reflect the opinions of HCL or its affiliates.
Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of
this message without the prior written consent of the author of this e-mail is strictly prohibited. If you have
received this email in error please delete it and notify the sender immediately. Before opening any mail and
attachments please check them for viruses and defect.

-----------------------------------------------------------------------------------------------------------------------

From nmqhoan at gmail.com  Wed Nov 16 12:20:47 2011
From: nmqhoan at gmail.com (Nguyen Mau Quoc Hoan)
Date: Wed, 16 Nov 2011 12:20:47 +0000
Subject: [rabbitmq-discuss] Send message to rabbit server?
Message-ID: <CAAmbASydxeV6GB5sQMUSnMvB-R8KEX9XRca1hHe1RjxXumE5MQ@mail.gmail.com>

Hi. I'm very interested in using rabbitmq. I've tried all the examples in
Rabbit website and its work.Now I want to do something further but I could
not know how to do it.I installed the rabbitmq server in one computer
(rabbit server computer) and I will user another computer as a client to
push the message to rabbit server. What should I need to configure in my
client java code?
Something like this:
  public static void main(String[] argv) throws Exception {

    ConnectionFactory factory = new ConnectionFactory();
>     factory.setHost("10.2.17.66:4369");  (it's not localhost anymore,
> intead of this, the host has to be the server address and rabbit port
> number)
>     Connection connection = factory.newConnection();
>     Channel channel = connection.createChannel();
>
>     channel.exchangeDeclare(EXCHANGE_NAME, "fanout");
>     String message = "Hello world";
>
>     channel.basicPublish(EXCHANGE_NAME, "", null, message.getBytes());
>     System.out.println(" [x] Sent '" + message + "'");
>
>     channel.close();
>     connection.close();
>   }
>

I tried but it didn't work.What should I do?
Thanks a lot.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/3fcb7f83/attachment.htm>

From simon at rabbitmq.com  Wed Nov 16 12:24:25 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 16 Nov 2011 12:24:25 +0000
Subject: [rabbitmq-discuss] Send message to rabbit server?
In-Reply-To: <CAAmbASydxeV6GB5sQMUSnMvB-R8KEX9XRca1hHe1RjxXumE5MQ@mail.gmail.com>
References: <CAAmbASydxeV6GB5sQMUSnMvB-R8KEX9XRca1hHe1RjxXumE5MQ@mail.gmail.com>
Message-ID: <4EC3AB79.9060606@rabbitmq.com>

On 16/11/11 12:20, Nguyen Mau Quoc Hoan wrote:
>      factory.setHost("10.2.17.66:4369 <http://10.2.17.66:4369>");  (it's
> not localhost anymore, intead of this, the host has to be the server
> address and rabbit port number)

1) ConnectionFactory.setHost() takes a hostname / IP address *without* a 
port number.

2) The default port number is not 4369, it's 5672. But you should not 
need to set this.

(Port 4369 is epmd which is used to help Erlang nodes find each other...)

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Wed Nov 16 12:25:25 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 16 Nov 2011 12:25:25 +0000
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <4EC39721.7000201@rabbitmq.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com>
Message-ID: <4EC3ABB5.5080602@rabbitmq.com>

On 16/11/11 10:57, Simon MacMullen wrote:
> On 16/11/11 08:59, Sampo Savolainen wrote:
>> I've installed RabbitMQ server on an Ubuntu 11.10 (desktop) box from the
>> .deb's provided on rabbitmq's website. After installing the server, the
>> box is unable to shut down. Powering off just results in logging off the
>> current session (and probably turning off some of the OS services in the
>> process). The only way "real" way to power off the computer is to do:
>> "sudo /sbin/poweroff now"
>
> Hi, thanks for the bug report. I'll try setting up a VM to replicate this.

...and of course I cannot replicate this.

>> This bug has been confirmed on the Ubuntu Launchpad bugtracker:
>> https://bugs.launchpad.net/ubuntu/+source/rabbitmq-server/+bug/670289
>
> Hmm, that bug seems is a bit garbled. Lots of different claims about
> what might be going on and what versions of Ubuntu are affected. I'm not
> sure how much I trust it. But I'll see if I can replicate it here. Sadly
> I don't know much about upstart...

So one theme from the bug report is that NetworkManager is making 
changes to /etc/hosts that are confusing Rabbit. So to help figure out 
if this is the problem, can you tell me:

* What does "ping ${hostname}" look like when networking is up?
* What does "ping ${hostname}" look like when networking is down?

please?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From sampo.savolainen at spatineo.com  Wed Nov 16 12:34:57 2011
From: sampo.savolainen at spatineo.com (Sampo Savolainen)
Date: Wed, 16 Nov 2011 14:34:57 +0200
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <4EC3ABB5.5080602@rabbitmq.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
Message-ID: <CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>

On Wed, Nov 16, 2011 at 2:25 PM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 16/11/11 10:57, Simon MacMullen wrote:
>
>> On 16/11/11 08:59, Sampo Savolainen wrote:
>>
>>> I've installed RabbitMQ server on an Ubuntu 11.10 (desktop) box from the
>>> .deb's provided on rabbitmq's website. After installing the server, the
>>> box is unable to shut down. Powering off just results in logging off the
>>> current session (and probably turning off some of the OS services in the
>>> process). The only way "real" way to power off the computer is to do:
>>> "sudo /sbin/poweroff now"
>>>
>>
>> Hi, thanks for the bug report. I'll try setting up a VM to replicate this.
>>
>
> ...and of course I cannot replicate this.


Oh crap. Did you set up an Ubuntu server or desktop image?

My setup is a laptop with a desktop image installed. The issue comes up (at
least) when using wifi networking.



> So one theme from the bug report is that NetworkManager is making changes
> to /etc/hosts that are confusing Rabbit. So to help figure out if this is
> the problem, can you tell me:
>
> * What does "ping ${hostname}" look like when networking is up?
> * What does "ping ${hostname}" look like when networking is down?
>

By networking is up / down, do you mean when NetworkManager is running or
not? Did you mean "any host" by ${hostname}? Or did you mean the hostname
of my box?

Theses are with NetworkManager running, first with networking and the
second after removing the ethernet cable:

$ ping www.google.com
PING www.l.google.com (173.194.32.18) 56(84) bytes of data.
64 bytes from arn06s01-in-f18.1e100.net (173.194.32.18): icmp_req=1 ttl=55
time=8.32 ms
64 bytes from arn06s01-in-f18.1e100.net (173.194.32.18): icmp_req=2 ttl=55
time=8.64 ms

vs

$ ping www.google.com
ping: unknown host www.google.com



  Sampo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/a2e6186c/attachment.htm>

From simon at rabbitmq.com  Wed Nov 16 12:41:35 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 16 Nov 2011 12:41:35 +0000
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>	<4EC39721.7000201@rabbitmq.com>	<4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
Message-ID: <4EC3AF7F.3040905@rabbitmq.com>

On 16/11/11 12:34, Sampo Savolainen wrote:
>     ...and of course I cannot replicate this.
>
>
> Oh crap. Did you set up an Ubuntu server or desktop image?

Desktop, but running in a VM.

> My setup is a laptop with a desktop image installed. The issue comes up
> (at least) when using wifi networking.
>
>     So one theme from the bug report is that NetworkManager is making
>     changes to /etc/hosts that are confusing Rabbit. So to help figure
>     out if this is the problem, can you tell me:
>
>     * What does "ping ${hostname}" look like when networking is up?
>     * What does "ping ${hostname}" look like when networking is down?
>
>
> By networking is up / down, do you mean when NetworkManager is running
> or not?

Yes, or if you tell NetworkManager to stop networking with the 
gnome-panel applet.

> Did you mean "any host" by ${hostname}? Or did you mean the
> hostname of my box?

Yes, but I think the hostname might be changing, so I mean the command:

ping $(hostname)

typed exactly like that. But yes, I mean round brackets () rather than 
curly ones {}, that was a typo to add to the confusion...

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From sampo.savolainen at spatineo.com  Wed Nov 16 12:52:34 2011
From: sampo.savolainen at spatineo.com (Sampo Savolainen)
Date: Wed, 16 Nov 2011 14:52:34 +0200
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <4EC3AF7F.3040905@rabbitmq.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
	<4EC3AF7F.3040905@rabbitmq.com>
Message-ID: <CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>

On Wed, Nov 16, 2011 at 2:41 PM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 16/11/11 12:34, Sampo Savolainen wrote:
>
>>    ...and of course I cannot replicate this.
>>
>>
>> Oh crap. Did you set up an Ubuntu server or desktop image?
>>
>
> Desktop, but running in a VM.
>
>
>  My setup is a laptop with a desktop image installed. The issue comes up
>> (at least) when using wifi networking.
>>
>>    So one theme from the bug report is that NetworkManager is making
>>    changes to /etc/hosts that are confusing Rabbit. So to help figure
>>    out if this is the problem, can you tell me:
>>
>>    * What does "ping ${hostname}" look like when networking is up?
>>    * What does "ping ${hostname}" look like when networking is down?
>>
>>
>> By networking is up / down, do you mean when NetworkManager is running
>> or not?
>>
>
> Yes, or if you tell NetworkManager to stop networking with the gnome-panel
> applet.
>
>
>  Did you mean "any host" by ${hostname}? Or did you mean the
>> hostname of my box?
>>
>
> Yes, but I think the hostname might be changing, so I mean the command:
>
> ping $(hostname)
>
> typed exactly like that. But yes, I mean round brackets () rather than
> curly ones {}, that was a typo to add to the confusion...


:)

v2 at blanko:~$ ping $(hostname)
PING blanko (127.0.1.1) 56(84) bytes of data.
64 bytes from blanko (127.0.1.1): icmp_req=1 ttl=64 time=0.103 ms
64 bytes from blanko (127.0.1.1): icmp_req=2 ttl=64 time=0.062 ms
^C
--- blanko ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 999ms
rtt min/avg/max/mdev = 0.062/0.082/0.103/0.022 ms
v2 at blanko:~$ echo "disabled networking via unchecking 'Enable networking'
from the gnome/unity NetworkManager applet"
disabled networking via unchecking 'Enable networking' from the gnome/unity
NetworkManager applet
v2 at blanko:~$ ping $(hostname)
PING blanko (127.0.1.1) 56(84) bytes of data.
64 bytes from blanko (127.0.1.1): icmp_req=1 ttl=64 time=0.101 ms
64 bytes from blanko (127.0.1.1): icmp_req=2 ttl=64 time=0.071 ms
64 bytes from blanko (127.0.1.1): icmp_req=3 ttl=64 time=0.071 ms
^C
--- blanko ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 1998ms
rtt min/avg/max/mdev = 0.071/0.081/0.101/0.014 ms


Should I try disabling the networking services via "sudo /etc/init.d/[xxx]
stop" where [xxx] is 'networking', 'network-interface', 'network-manager'
or something else?


  Sampo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/1f2c21ab/attachment.htm>

From simon at rabbitmq.com  Wed Nov 16 13:08:35 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 16 Nov 2011 13:08:35 +0000
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>	<4EC39721.7000201@rabbitmq.com>	<4EC3ABB5.5080602@rabbitmq.com>	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>	<4EC3AF7F.3040905@rabbitmq.com>
	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
Message-ID: <4EC3B5D3.9040204@rabbitmq.com>

On 16/11/11 12:52, Sampo Savolainen wrote:
> 64 bytes from blanko (127.0.1.1): icmp_req=1 ttl=64 time=0.103 ms

> 64 bytes from blanko (127.0.1.1): icmp_req=1 ttl=64 time=0.101 ms

Damn. Oh well, it was a nice theory.

> Should I try disabling the networking services via "sudo
> /etc/init.d/[xxx] stop" where [xxx] is 'networking',
> 'network-interface', 'network-manager' or something else?

You could try but I'm not too optimistic. I fiddled with these and none 
of them actually took my network interface down (as shown with 
"ifconfig") the way the NetworkManager applet did.

I'd also be interested to see if "/etc/init.d/rabbitmq-server stop" 
hangs for you with networking disabled. If it doesn't then there's 
definitely something else going on.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From sampo.savolainen at spatineo.com  Wed Nov 16 13:17:05 2011
From: sampo.savolainen at spatineo.com (Sampo Savolainen)
Date: Wed, 16 Nov 2011 15:17:05 +0200
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <4EC3B5D3.9040204@rabbitmq.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
	<4EC3AF7F.3040905@rabbitmq.com>
	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
	<4EC3B5D3.9040204@rabbitmq.com>
Message-ID: <CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>

Hi,

This is with networking disabled via the applet:

v2 at blanko:~$ sudo /etc/init.d/rabbitmq-server stop && echo ok
[sudo] password for v2:
Stopping rabbitmq-server: rabbitmq-server.
ok
v2 at blanko:~$ ps -fe | grep rabbit
rabbitmq  2085     1  0 09:08 ?        00:00:00
/usr/lib/erlang/erts-5.8.3/bin/epmd -daemon
v2       11738 11561  0 15:12 pts/0    00:00:00 grep --color=auto rabbit
v2 at blanko:~$

So 1) the script does not hang or fail, 2) at least some processes are left
behind. But epmd is left behind even if I stop rabbitmq when networking is
enabled.

Is there a logfile I should look at after shutdown fails?

 Sampo

On Wed, Nov 16, 2011 at 3:08 PM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 16/11/11 12:52, Sampo Savolainen wrote:
>
>> 64 bytes from blanko (127.0.1.1): icmp_req=1 ttl=64 time=0.103 ms
>>
>
>  64 bytes from blanko (127.0.1.1): icmp_req=1 ttl=64 time=0.101 ms
>>
>
> Damn. Oh well, it was a nice theory.
>
>
>  Should I try disabling the networking services via "sudo
>> /etc/init.d/[xxx] stop" where [xxx] is 'networking',
>> 'network-interface', 'network-manager' or something else?
>>
>
> You could try but I'm not too optimistic. I fiddled with these and none of
> them actually took my network interface down (as shown with "ifconfig") the
> way the NetworkManager applet did.
>
> I'd also be interested to see if "/etc/init.d/rabbitmq-server stop" hangs
> for you with networking disabled. If it doesn't then there's definitely
> something else going on.
>
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/412513ef/attachment.htm>

From simon at rabbitmq.com  Wed Nov 16 13:33:50 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 16 Nov 2011 13:33:50 +0000
Subject: [rabbitmq-discuss] Clustering of Rabbit MQ on thwo physical
	boxes.
In-Reply-To: <0e84b28f-d017-47ea-9773-74a13b0d77f7@41g2000pry.googlegroups.com>
References: <0e84b28f-d017-47ea-9773-74a13b0d77f7@41g2000pry.googlegroups.com>
Message-ID: <4EC3BBBE.9000005@rabbitmq.com>

On 16/11/11 12:00, GS wrote:
> I had a question about clustering rabbit on two separate physical
> machine. The OS is unix. I was going through some blogs like
> http://www.godlikemouse.com/2010/12/14/how-to-cluster-rabbit-mq/ and
> it says that you have to change the /etc/hosts file. My organization
> does not permits that change. IS it still possible to have a cluster
> setup on two separate physical machines, without changing the /etc/
> hosts file?

Yes. That blog seems slightly confused. The point is that RabbitMQ will 
identify each cluster node based on its short (non-fully-qualified) 
hostname, and thus these hostnames are expected to resolve to the 
correct IP addresses. (I would argue that if they don't then your 
network is broken.) The blog author was presumably on a network where 
this was not the case, and used /etc/hosts hacking to fix it.

> Are the steps mentioned at http://www.rabbitmq.com/clustering.html
> sufficient?

They certainly should be.

> I am not doubting the content, but my experience of
> http://www.rabbitmq.com/clustering.html#single-machine was not good.

Hmm. Clustering on a single machine is more painful: you have to make 
sure that the multiple copies of RabbitMQ that you're running don't 
clash on any ports, store data in different locations, etc. That 
requires a bit of fiddling. It's still possible but it's easier to get 
something wrong and thus not even be able to start all your nodes.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Wed Nov 16 13:42:01 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 16 Nov 2011 13:42:01 +0000
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>	<4EC39721.7000201@rabbitmq.com>	<4EC3ABB5.5080602@rabbitmq.com>	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>	<4EC3AF7F.3040905@rabbitmq.com>	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>	<4EC3B5D3.9040204@rabbitmq.com>
	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>
Message-ID: <4EC3BDA9.30207@rabbitmq.com>

On 16/11/11 13:17, Sampo Savolainen wrote:
> This is with networking disabled via the applet:
>
> v2 at blanko:~$ sudo /etc/init.d/rabbitmq-server stop && echo ok
> [sudo] password for v2:
> Stopping rabbitmq-server: rabbitmq-server.
> ok
> v2 at blanko:~$ ps -fe | grep rabbit
> rabbitmq  2085     1  0 09:08 ?        00:00:00
> /usr/lib/erlang/erts-5.8.3/bin/epmd -daemon
> v2       11738 11561  0 15:12 pts/0    00:00:00 grep --color=auto rabbit
> v2 at blanko:~$
>
> So 1) the script does not hang or fail, 2) at least some processes are
> left behind. But epmd is left behind even if I stop rabbitmq when
> networking is enabled.

1) Damn.

2) epmd should be left behind - it's shared by all Erlang apps on the 
system, it's not owned solely by RabbitMQ. But having an extra process 
around will not cause shutdown to hang.

> Is there a logfile I should look at after shutdown fails?

/var/log/rabbitmq/shutdown_log
/var/log/rabbitmq/shutdown_err

might have interesting things in them.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From sampo.savolainen at spatineo.com  Wed Nov 16 13:52:07 2011
From: sampo.savolainen at spatineo.com (Sampo Savolainen)
Date: Wed, 16 Nov 2011 15:52:07 +0200
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <4EC3BDA9.30207@rabbitmq.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
	<4EC3AF7F.3040905@rabbitmq.com>
	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
	<4EC3B5D3.9040204@rabbitmq.com>
	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>
	<4EC3BDA9.30207@rabbitmq.com>
Message-ID: <CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>

On Wed, Nov 16, 2011 at 3:42 PM, Simon MacMullen <simon at rabbitmq.com> wrote:
>
>  Is there a logfile I should look at after shutdown fails?
>>
>
> /var/log/rabbitmq/shutdown_log
> /var/log/rabbitmq/shutdown_err
>
> might have interesting things in them.


err was empty and log contained only this:

Stopping and halting node rabbit at blanko ...
...done.

So much for that then. Any other ideas?


 Sampo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/a95ff67b/attachment.htm>

From steve at rabbitmq.com  Wed Nov 16 14:52:31 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Wed, 16 Nov 2011 14:52:31 +0000
Subject: [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
In-Reply-To: <CAAcXTOa1xRyqqkm7CkuTGM0rXNy6-13YEk-OB12=M3FpQ6OfiA@mail.gmail.com>
References: <CAAcXTOaNsa_wLLArna9gUruXTE2D4EFc1Z1BTKBgFGJ+1ZU=Tw@mail.gmail.com>
	<D1E9035C-9DB8-479D-8A5B-166411D19C24@rabbitmq.com>
	<CAAcXTOaxGzSS=JbjG3LQ0nEvFPozvKg505z0QY1wFsqQzinwpA@mail.gmail.com>
	<E743030D-082A-4D3D-96BE-14FCAE7AFE60@rabbitmq.com>
	<CAAcXTOa1xRyqqkm7CkuTGM0rXNy6-13YEk-OB12=M3FpQ6OfiA@mail.gmail.com>
Message-ID: <1552CB63-B89F-443D-AEC8-D1BD9B3BE2CA@rabbitmq.com>

Dear Irmo,
| On 14 Nov 2011, at 10:43, Irmo Manie wrote:
| There is an expectation (at least mine) that the passed in
| ExecutorService on newConnection is managed by the underlying
| connection.
Correct; when the connection goes away the Service will be shutdown.

| On any shutdown signal I see that the ChannelManager does this when
| handling the exception.
Well, it schedules the shutdown, which  happens on another thread.

| There is a problem when connecting to a non-existing host. The
| FrameHandler is created, and throwing a UnknownHostException, before
| the AMQConnection is created and the ExecutorService is 'managed' and
| thus the shutdown of the ExecutorService is left to the user again.
I see, if the connection fails we don't use the ExecutorService. Which
means you are free to use it on another connection attempt.

| You can imagine that this causes a nice leak when you have an
| automatic reconnection setup in place.
I think I see your point.

It might be possible to arrange that we do not shutdown client-supplied
Services, only our own private ones.  Would that be appropriate?
We would then have to relax some of the callback contract on termination.

| Also I noticed that basicConsume still causes the whole connection to
| go down if you throw an exception.
| I know that in previous client versions this was because it was called
| from the connection thread, but I was expected this to be 'fixed' in
| this release because of the separate thread pool for channels.
I presume you mean if you throw an exception in a consumer callback?
The answer is Yes, that is what is supposed to happen, so we didn't
change the behaviour.

We actually call the 
ExceptionHandler.handleConsumerException() method, in general.
And an ExceptionHandler can be set on the AMQConnection constructor.
This parameter is not exposed on the newConnection() (or ConnectionFactory)
interface.  These are all impl classes.

In fact, this whole thread highlights how tricky the ConnectionFactory
interface is. We are minded to deprecate the whole lot and use a Builder
interface instead. This would allow named parameter extensions rather
easily, and make it trivial to explain the interactions between, say, uri()
and host()/port() settings.  We could also add extra parameters without
requiring recoding callers, or adding lots of constructors. It would be
trivial to expose an ExceptionHandler on such an interface.

Let us know your thoughts.

Steve Powell  (a kitten)
----------some more definitions from the SPD----------
Avoirdupois phr. 'Would you like peas with that?'
Abbey adj. Quite like an Abbe.
Definite phr. 'It's hard of hearing, I think.'
Modest n. The most mod.

From steve at rabbitmq.com  Wed Nov 16 15:18:55 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Wed, 16 Nov 2011 15:18:55 +0000
Subject: [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
In-Reply-To: <1552CB63-B89F-443D-AEC8-D1BD9B3BE2CA@rabbitmq.com>
References: <CAAcXTOaNsa_wLLArna9gUruXTE2D4EFc1Z1BTKBgFGJ+1ZU=Tw@mail.gmail.com>
	<D1E9035C-9DB8-479D-8A5B-166411D19C24@rabbitmq.com>
	<CAAcXTOaxGzSS=JbjG3LQ0nEvFPozvKg505z0QY1wFsqQzinwpA@mail.gmail.com>
	<E743030D-082A-4D3D-96BE-14FCAE7AFE60@rabbitmq.com>
	<CAAcXTOa1xRyqqkm7CkuTGM0rXNy6-13YEk-OB12=M3FpQ6OfiA@mail.gmail.com>
	<1552CB63-B89F-443D-AEC8-D1BD9B3BE2CA@rabbitmq.com>
Message-ID: <C9B490D1-4634-44A8-B10D-AC76F3203423@rabbitmq.com>

And, of course, I read it again, and we leak our private ExecutorService
under the connection failure scenario, too.  Well spotted.

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
Avoirdupois phr. 'Would you like peas with that?'
Abbey adj. Quite like an Abbe.
Definite phr. 'It's hard of hearing, I think.'
Modest n. The most mod.

> | On 14 Nov 2011, at 10:43, Irmo Manie wrote:
> | There is a problem when connecting to a non-existing host. The
> | FrameHandler is created, and throwing a UnknownHostException, before
> | the AMQConnection is created and the ExecutorService is 'managed' and
> | thus the shutdown of the ExecutorService is left to the user again.
> 
> | You can imagine that this causes a nice leak when you have an
> | automatic reconnection setup in place.


From tpletch001 at gmail.com  Wed Nov 16 15:25:58 2011
From: tpletch001 at gmail.com (p2w)
Date: Wed, 16 Nov 2011 07:25:58 -0800 (PST)
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after one
	message
Message-ID: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>

I have a rails 3.1 app (using thin server which is Event Machine
based) using the AMQP gem to connect to two server cluster on EC2. the
broker is running on ubuntu 11.10 and is version 2.6.1 with erlang
version 5.8.3.

I have an initializer that connects to and subscribes to a specifc
queue. when i place a single message into the queue then start the
server it consumes the message properly and the management console
shows a consumer attached to the queue, all good so far. then when i
place another message into the queue it gets consumed, but subsequent
to that message being consumed the broker log shows a "connection
closed abruptly" error and of course the consumer gets cut off.

I'm sure I'm doing something wrong in the initializer but can't figure
out what as its really pretty vanilla. Any help greatly appreciated...

here's the initializer code:

-------------------------------------------------------
connect_params = YAML::load_file(File.join(Rails.root, "config",
"rabbitmq.yml"))[Rails.env]

EventMachine.next_tick {
  AMQP.connect(connect_params['uri'], :auto_delete => false) do |
connection, open_ok|
    puts "Connected to MQ Server to Retreive API Submissions..."
    AMQP::Channel.new(connection) do |channel, open_ok|
      puts "Channel ##{channel.id} is open..."
      exchange = channel.direct('inbound', :durable => true)
      channel.on_error do |ch, close|
        puts "Handling channel-level error"
        connection.close
      end
      channel.queue('dropbox', :durable => true) do |queue,
declare_ok|
        queue.bind(exchange).subscribe do |metadata, payload|
          message_h = '#{metadata.headers}'
          message_p = '#{payload}'
          Resque.enqueue(ApiIntake, message_h, message_p)
        end
      end
   end
  end
  }

From michael.s.klishin at gmail.com  Wed Nov 16 15:39:08 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 16 Nov 2011 18:39:08 +0300
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
Message-ID: <CAE3HoVT-QsjETfX1VzrVuOJUwyFURSy9RFbphu2=Xt8SqjuqdQ@mail.gmail.com>

2011/11/16 p2w <tpletch001 at gmail.com>

> I have a rails 3.1 app (using thin server which is Event Machine
> based) using the AMQP gem to connect to two server cluster on EC2. the
> broker is running on ubuntu 11.10 and is version 2.6.1 with erlang
> version 5.8.3.
>

What application server are you using? If it is something that forks
(Unicorn or Passenger), you need to connect
after that happens. Otherwise only one thread will be inherited (but not
EventMachine's one). This is how fork(2) works, unfortunately.

One more thing you need to do is to set up connection exception handler as
described here:
http://rubydoc.info/github/ruby-amqp/amqp/master/file/docs/ErrorHandling.textile
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/3a3cda52/attachment.htm>

From michael.s.klishin at gmail.com  Wed Nov 16 15:40:51 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 16 Nov 2011 18:40:51 +0300
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
Message-ID: <CAE3HoVR=jP6_tLm8m-W5y11YNni_+g7-nqVKZADHYzaoFy39Eg@mail.gmail.com>

2011/11/16 p2w <tpletch001 at gmail.com>

> AMQP.connect(connect_params['uri'], :auto_delete => false) d
>


One more note: AMQP.connect does not take :auto_delete option. It only
makes sense for
queues and exchanges.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/ded2109f/attachment.htm>

From andrea.rosa at hp.com  Wed Nov 16 15:48:09 2011
From: andrea.rosa at hp.com (Rosa, Andrea)
Date: Wed, 16 Nov 2011 15:48:09 +0000
Subject: [rabbitmq-discuss] IPv6 issue?
Message-ID: <5F389C517756284F80239F55BCA5DDDD17D60BA7@G9W0721.americas.hpqcorp.net>

Hi all,

I had a strange problem this morning.
I had some communication problem with rabbitmq, from netstat command I was able to verify that the connection between client and server was ESTABLISHED, but form the client the connection was using TCP and from Rabbimq the connection was using TCP6.
In this situation my client wasn't able to publish messages.
I changed my rabbitmq configuration file adding the following line:
RABBITMQ_NODE_IP_ADDRESS = 0.0.0.0
and I restarted the server and the problem has been fixed.

Anyone has experienced with this similar issue before?
Could you confirm that the change I did, can be used to enforce rabbitmq to use just IPv4?

I have installed the rabbitmq 2.6.1 version, the client is Kombu python library using the py-amqplib.
Cheers
--
Andrea Rosa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/c2332fde/attachment.htm>

From michael.s.klishin at gmail.com  Wed Nov 16 15:52:54 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 16 Nov 2011 18:52:54 +0300
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
Message-ID: <CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>

2011/11/16 p2w <tpletch001 at gmail.com>

> I'm sure I'm doing something wrong in the initializer but can't figure
> out what as its really pretty vanilla. Any help greatly appreciated...
>

I apologize for not noticing that you are using Thin. One thing that may
cause abrupt TCP connection termination is uncaught exception on the
EventMachine
thread (in this case, your applications' main thread). In some cases it may
be swallowed by
various "helpful" libraries. Can you try removing more and more
code from your consumer handlers to see at what point connection becomes
stable?

Also, with at least a couple of most recent point amqp gem releases you can
simplify your initializer
a little bit by renaming config file to amqp.yml and using
AMQP::Integration::Rails:

https://gist.github.com/3d995824090df94558b0

Sorry that it is undocumented yet.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/16aa403b/attachment.htm>

From nick.pateman at certivox.com  Wed Nov 16 16:55:27 2011
From: nick.pateman at certivox.com (Nick Pateman)
Date: Wed, 16 Nov 2011 16:55:27 +0000
Subject: [rabbitmq-discuss] Messages disappearing
Message-ID: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>

Hey there,

I've got a small application writing messages to a message queue.  I basically modified an example taken from the C driver.

Anyway, I can see incoming and outgoing message rate increasing for the queue within the administration web page but I don't currently have any application picking up the messages, they seem to be getting instantly delivered somewhere else.

My rates jump from 0/0 to 10/10, 10 in a second and 10 out a second.

Any idea where my messages are going?  I want to see the counters increase before I get my daemon running.  Many thanks!

Nick.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/c22281f3/attachment.htm>

From simon at rabbitmq.com  Wed Nov 16 16:56:57 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 16 Nov 2011 16:56:57 +0000
Subject: [rabbitmq-discuss] IPv6 issue?
In-Reply-To: <5F389C517756284F80239F55BCA5DDDD17D60BA7@G9W0721.americas.hpqcorp.net>
References: <5F389C517756284F80239F55BCA5DDDD17D60BA7@G9W0721.americas.hpqcorp.net>
Message-ID: <4EC3EB59.9010408@rabbitmq.com>

Hi Andrea.

On 16/11/11 15:48, Rosa, Andrea wrote:
> I had some communication problem with rabbitmq, from netstat command I
> was able to verify that the connection between client and server was
> ESTABLISHED, but form the client the connection was using TCP and from
> Rabbimq the connection was using TCP6.

This is rather OS-dependent. Are we talking about Linux?

On Linux (by default, because on Linux everything's configurable) IPv4 
is considered to be a tiny subrange of IPv6. Since we added IPv6 support 
in 2.3.1 we listen on "::" by default (i.e. all IPv6 addresses) and IPv4 
is included in that. This means that some OS tools might report 
connections as being IPv6 when they are "really" IPv4.

On other OSes (and Linux when it's been configured differently) we 
listen on both "::" and 0.0.0.0. We can't do that on default-Linux 
because binding to 0.0.0.0 fails.

> In this situation my client wasn?t able to publish messages.
>
> I changed my rabbitmq configuration file adding the following line:
>
> RABBITMQ_NODE_IP_ADDRESS = 0.0.0.0
>
> and I restarted the server and the problem has been fixed.
>
> Anyone has experienced with this similar issue before?
>
> Could you confirm that the change I did, can be used to enforce rabbitmq
> to use just IPv4?

Anyway, yes you can use RABBITMQ_NODE_IP_ADDRESS to force the server to 
use IPv4 only, or add something like

  {tcp_listeners, [{5672, "0.0.0.0"}]}

to rabbitmq.config.

I would like to figure out why this isn't working for you though - the 
TCP6 thing *should* be a red herring. Could this have been some 
transient problem that went away by coincidence? Or am I being optimistic?

> I have installed the rabbitmq 2.6.1 version, the client is Kombu python
> library using the py-amqplib.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From videlalvaro at gmail.com  Wed Nov 16 16:57:52 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Wed, 16 Nov 2011 17:57:52 +0100
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
Message-ID: <CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>

If you post some sample code people might be able to help. Specifically the
binding code and the publish code with routing keys.

Also does the original code works as expected?

On Wed, Nov 16, 2011 at 5:55 PM, Nick Pateman <nick.pateman at certivox.com>wrote:

>  Hey there,****
>
> ** **
>
> I?ve got a small application writing messages to a message queue.  I
> basically modified an example taken from the C driver.****
>
> ** **
>
> Anyway, I can see incoming and outgoing message rate increasing for the
> queue within the administration web page but I don?t currently have any
> application picking up the messages, they seem to be getting instantly
> delivered somewhere else.****
>
> ** **
>
> My rates jump from 0/0 to 10/10, 10 in a second and 10 out a second.****
>
> ** **
>
> Any idea where my messages are going?  I want to see the counters increase
> before I get my daemon running.  Many thanks!****
>
> ** **
>
> Nick.****
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/53726c37/attachment.htm>

From nick.pateman at certivox.com  Wed Nov 16 17:02:40 2011
From: nick.pateman at certivox.com (Nick Pateman)
Date: Wed, 16 Nov 2011 17:02:40 +0000
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>
Message-ID: <F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>

Here's the method I'm using to send the messages, the connection has already been established by this point...

void send_batch(amqp_connection_state_t conn,
               char const *queue_name,
               int rate_limit,
               int message_count)
{
  uint64_t start_time = now_microseconds();
  int i;
  int sent = 0;
  int previous_sent = 0;
  uint64_t previous_report_time = start_time;
  uint64_t next_summary_time = start_time + SUMMARY_EVERY_US;

  char message[256];
  amqp_bytes_t message_bytes;

  for (i = 0; i < sizeof(message); i++) {
    message[i] = i & 0xff;
  }

  message_bytes.len = sizeof(message);
  message_bytes.bytes = message;

  for (i = 0; i < message_count; i++) {
    uint64_t now = now_microseconds();

    amqp_basic_properties_t props;
    props._flags = AMQP_BASIC_CONTENT_TYPE_FLAG | AMQP_BASIC_DELIVERY_MODE_FLAG;
    props.content_type = amqp_cstring_bytes("text/plain");
    props.delivery_mode = 2; /* persistent delivery mode */
    die_on_error(amqp_basic_publish(conn,
            1,
            amqp_cstring_bytes("amq.direct"),
            amqp_cstring_bytes(queue_name),
            0,
            0,
            &props,
            amqp_cstring_bytes("Hello world!")),
            "Publishing");

    sent++;
    if (now > next_summary_time) {
      int countOverInterval = sent - previous_sent;
      double intervalRate = countOverInterval / ((now - previous_report_time) / 1000000.0);
      printf("%d ms: Sent %d - %d since last report (%d Hz)\n",
         (int)(now - start_time) / 1000, sent, countOverInterval, (int) intervalRate);

      previous_sent = sent;
      previous_report_time = now;
      next_summary_time += SUMMARY_EVERY_US;
    }

    while (((i * 1000000.0) / (now - start_time)) > rate_limit) {
      microsleep(2000);
      now = now_microseconds();
    }
  }

  {
    uint64_t stop_time = now_microseconds();
    int total_delta = stop_time - start_time;

    printf("PRODUCER - Message count: %d\n", message_count);
    printf("Total time, milliseconds: %d\n", total_delta / 1000);
    printf("Overall messages-per-second: %g\n", (message_count / (total_delta / 1000000.0)));
  }
}


From: Alvaro Videla [mailto:videlalvaro at gmail.com]
Sent: 16 November 2011 16:58
To: Nick Pateman
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

If you post some sample code people might be able to help. Specifically the binding code and the publish code with routing keys.

Also does the original code works as expected?
On Wed, Nov 16, 2011 at 5:55 PM, Nick Pateman <nick.pateman at certivox.com<mailto:nick.pateman at certivox.com>> wrote:
Hey there,

I've got a small application writing messages to a message queue.  I basically modified an example taken from the C driver.

Anyway, I can see incoming and outgoing message rate increasing for the queue within the administration web page but I don't currently have any application picking up the messages, they seem to be getting instantly delivered somewhere else.

My rates jump from 0/0 to 10/10, 10 in a second and 10 out a second.

Any idea where my messages are going?  I want to see the counters increase before I get my daemon running.  Many thanks!

Nick.

_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/340d673d/attachment.htm>

From simon at rabbitmq.com  Wed Nov 16 17:06:52 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 16 Nov 2011 17:06:52 +0000
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>	<CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>
Message-ID: <4EC3EDAC.4050807@rabbitmq.com>

On 16/11/11 17:02, Nick Pateman wrote:
>              amqp_cstring_bytes("amq.direct"),
>              amqp_cstring_bytes(queue_name),

So have you set up a binding from the exchange "amq.direct" to your queue?

"amq.direct" is not the default exchange that auto-routes to queues - 
you should use the name "" for that.

Otherwise your messages will get to the exchange and then be dropped as 
unroutable. If you're looking at the exchanges tab in mgmt you would see 
your message rate there, but nothing in the queues tab - is that what 
you're seeing?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From tpletch001 at gmail.com  Wed Nov 16 17:11:36 2011
From: tpletch001 at gmail.com (p2w)
Date: Wed, 16 Nov 2011 09:11:36 -0800 (PST)
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
	<CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>
Message-ID: <0c76e395-c37d-465c-9706-9a687141edce@p16g2000yqd.googlegroups.com>

Michael,

Thanks for the heads up on all accounts. I added the following to my
initializer per the documentation:
---------------------------------------------------------
connection.on_tcp_connection_loss do |connection, settings|
     puts "recovering RabbitMQ TCP Connection"
     connection.reconnect(false, 10)
---------------------------------------------------------

What's interesting is that if there is absolutely no activity in the
app through the application interface itself, then this exception code
reconnects the consumer consistently after the TCP exception
disconnects the client. However as soon as any activity occurs in the
app interface the reconnect fails. This makes me pretty sure this is
an issue with Thin/EM blocking AMQP at thread level. I can replicate
this consistently.

I'm going to make sure I am up to date on the EM and AMQP gems, then
try the AMQP::Integration::Rails...

On Nov 16, 9:52?am, Michael Klishin <michael.s.klis... at gmail.com>
wrote:
> 2011/11/16 p2w <tpletch... at gmail.com>
>
> > I'm sure I'm doing something wrong in the initializer but can't figure
> > out what as its really pretty vanilla. Any help greatly appreciated...
>
> I apologize for not noticing that you are using Thin. One thing that may
> cause abrupt TCP connection termination is uncaught exception on the
> EventMachine
> thread (in this case, your applications' main thread). In some cases it may
> be swallowed by
> various "helpful" libraries. Can you try removing more and more
> code from your consumer handlers to see at what point connection becomes
> stable?
>
> Also, with at least a couple of most recent point amqp gem releases you can
> simplify your initializer
> a little bit by renaming config file to amqp.yml and using
> AMQP::Integration::Rails:
>
> https://gist.github.com/3d995824090df94558b0
>
> Sorry that it is undocumented yet.
> --
> MK
>
> http://github.com/michaelklishinhttp://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From nick.pateman at certivox.com  Wed Nov 16 17:11:55 2011
From: nick.pateman at certivox.com (Nick Pateman)
Date: Wed, 16 Nov 2011 17:11:55 +0000
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <4EC3EDAC.4050807@rabbitmq.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<4EC3EDAC.4050807@rabbitmq.com>
Message-ID: <F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>

Aahaa, I had no idea to be honest.  I've changed it to "" and have got an error out of it so that's one step closer...

"operation not permitted on the default exchange"

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Simon MacMullen
Sent: 16 November 2011 17:07
To: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

On 16/11/11 17:02, Nick Pateman wrote:
>              amqp_cstring_bytes("amq.direct"),
>              amqp_cstring_bytes(queue_name),

So have you set up a binding from the exchange "amq.direct" to your queue?

"amq.direct" is not the default exchange that auto-routes to queues - you should use the name "" for that.

Otherwise your messages will get to the exchange and then be dropped as unroutable. If you're looking at the exchanges tab in mgmt you would see your message rate there, but nothing in the queues tab - is that what you're seeing?

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss



From videlalvaro at gmail.com  Wed Nov 16 17:18:49 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Wed, 16 Nov 2011 18:18:49 +0100
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<4EC3EDAC.4050807@rabbitmq.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
Message-ID: <CAMcAHLU7qaK-p2qPQw3-9g8B8xAcP=Jk3U4O=MDGsAC6=d3SeQ@mail.gmail.com>

You can't bind queues to the default exchange. Your new queue should be
automatically bound to it.

On Wed, Nov 16, 2011 at 6:11 PM, Nick Pateman <nick.pateman at certivox.com>wrote:

> Aahaa, I had no idea to be honest.  I've changed it to "" and have got an
> error out of it so that's one step closer...
>
> "operation not permitted on the default exchange"
>
> -----Original Message-----
> From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:
> rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Simon MacMullen
> Sent: 16 November 2011 17:07
> To: rabbitmq-discuss at lists.rabbitmq.com
> Subject: Re: [rabbitmq-discuss] Messages disappearing
>
> On 16/11/11 17:02, Nick Pateman wrote:
> >              amqp_cstring_bytes("amq.direct"),
> >              amqp_cstring_bytes(queue_name),
>
> So have you set up a binding from the exchange "amq.direct" to your queue?
>
> "amq.direct" is not the default exchange that auto-routes to queues - you
> should use the name "" for that.
>
> Otherwise your messages will get to the exchange and then be dropped as
> unroutable. If you're looking at the exchanges tab in mgmt you would see
> your message rate there, but nothing in the queues tab - is that what
> you're seeing?
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/6cfaad1c/attachment.htm>

From guillem at trovit.com  Wed Nov 16 16:13:54 2011
From: guillem at trovit.com (Guillem Anguera)
Date: Wed, 16 Nov 2011 17:13:54 +0100
Subject: [rabbitmq-discuss] RabbitMQ general and cluster doubts
Message-ID: <CABF24PWqfmMKsqu8Yn5rWsRZW23TkR5VtRc5juqDJxZmer9gVw@mail.gmail.com>

Dear RabbitMQ members,

We're testing a two nodes cluster running RabbitMQ (2.6.1) and we don't
understand the cluster benefits beyond having a shared knowledge about the
metadata, as queues are sticky to the node upon which they are created,
queues are limited to node's hardware capabilities (CPU, Memory, Disk,
...). Can you explain us the cluster benefits? After adding another node to
the cluster, is there any way to rebalance the existing queues among all
nodes?

We're planning to set up about 30.000 queues and 100.000.000 messages with
an average of 1 Kb each, every time a message is consumed it reenters the
corresponding queue until it's deleted. What do you think?

Looking forward to hearing from you.


-- 
Guillem Anguera
guillem at trovit.com
Tel: 686.528.792


 <http://www.trovit.com>www.trovit.com
Your partner for qualified users
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/8da6d523/attachment.htm>

From jasonjwwilliams at gmail.com  Wed Nov 16 17:35:10 2011
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Wed, 16 Nov 2011 10:35:10 -0700
Subject: [rabbitmq-discuss] RabbitMQ general and cluster doubts
In-Reply-To: <CABF24PWqfmMKsqu8Yn5rWsRZW23TkR5VtRc5juqDJxZmer9gVw@mail.gmail.com>
References: <CABF24PWqfmMKsqu8Yn5rWsRZW23TkR5VtRc5juqDJxZmer9gVw@mail.gmail.com>
Message-ID: <CAHZAEpcSv3qc5y3bF3E5LTVPJxVTSAv5GHuWxVQMrtSu3YTahg@mail.gmail.com>

The primary benefit to clustering (without using mirrored queues) is
scalability and publishing availability. If you put the Rabbit nodes behind
a load balancer like HAProxy, you'll get fairly even queue distribution
across the nodes. Queues are created on the node their creator was attached
to at the time of creation, and there is no re-balancing. Clustering also
ensures your producers always have a place to publish.

Mirrored queues give you the ability sustain node failure and not lose
access to the queues on that node. But you get a performance hit for the
additional overhead.

-J

On Wed, Nov 16, 2011 at 9:13 AM, Guillem Anguera <guillem at trovit.com> wrote:

> Dear RabbitMQ members,
>
> We're testing a two nodes cluster running RabbitMQ (2.6.1) and we don't
> understand the cluster benefits beyond having a shared knowledge about the
> metadata, as queues are sticky to the node upon which they are created,
> queues are limited to node's hardware capabilities (CPU, Memory, Disk,
> ...). Can you explain us the cluster benefits? After adding another node to
> the cluster, is there any way to rebalance the existing queues among all
> nodes?
>
> We're planning to set up about 30.000 queues and 100.000.000 messages with
> an average of 1 Kb each, every time a message is consumed it reenters the
> corresponding queue until it's deleted. What do you think?
>
> Looking forward to hearing from you.
>
>
> --
> Guillem Anguera
> guillem at trovit.com
> Tel: 686.528.792
>
>
>  <http://www.trovit.com>www.trovit.com
> Your partner for qualified users
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/b9832dd1/attachment.htm>

From tpletch001 at gmail.com  Wed Nov 16 17:52:21 2011
From: tpletch001 at gmail.com (p2w)
Date: Wed, 16 Nov 2011 09:52:21 -0800 (PST)
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
	<CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>
Message-ID: <3801cfba-31a0-465e-8568-4c04456deb23@k26g2000yqd.googlegroups.com>

Michael,

OK, so I was a little premature in the statement that reproducing
behavior was one-hundred percent consistent. It's still failing
intermittently....


On Nov 16, 9:52?am, Michael Klishin <michael.s.klis... at gmail.com>
wrote:
> 2011/11/16 p2w <tpletch... at gmail.com>
>
> > I'm sure I'm doing something wrong in the initializer but can't figure
> > out what as its really pretty vanilla. Any help greatly appreciated...
>
> I apologize for not noticing that you are using Thin. One thing that may
> cause abrupt TCP connection termination is uncaught exception on the
> EventMachine
> thread (in this case, your applications' main thread). In some cases it may
> be swallowed by
> various "helpful" libraries. Can you try removing more and more
> code from your consumer handlers to see at what point connection becomes
> stable?
>
> Also, with at least a couple of most recent point amqp gem releases you can
> simplify your initializer
> a little bit by renaming config file to amqp.yml and using
> AMQP::Integration::Rails:
>
> https://gist.github.com/3d995824090df94558b0
>
> Sorry that it is undocumented yet.
> --
> MK
>
> http://github.com/michaelklishinhttp://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From michael.s.klishin at gmail.com  Wed Nov 16 18:18:43 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 16 Nov 2011 22:18:43 +0400
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <0c76e395-c37d-465c-9706-9a687141edce@p16g2000yqd.googlegroups.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
	<CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>
	<0c76e395-c37d-465c-9706-9a687141edce@p16g2000yqd.googlegroups.com>
Message-ID: <746596F0-DEDE-4507-B2B9-ED54F0BD7F7C@gmail.com>

Le 16/nov/2011 ? 21:11, p2w a ?crit :

> This makes me pretty sure this is
> an issue with Thin/EM blocking AMQP at thread level. I can replicate
> this consistently.

With Thin you do not typically start EventMachine in a separate thread. This is the case with Unicorn and Passenger but almost never with Thin.

This can be an EventMachine issue. We depend on EventMachine for TCP connection failure notifications. Maybe try EventMachine 1.0 pre-releases? amqp gem will work with that and we run CI against that version against 7 Rubies or so.

MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin


From michael.s.klishin at gmail.com  Wed Nov 16 18:19:46 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 16 Nov 2011 22:19:46 +0400
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <3801cfba-31a0-465e-8568-4c04456deb23@k26g2000yqd.googlegroups.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
	<CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>
	<3801cfba-31a0-465e-8568-4c04456deb23@k26g2000yqd.googlegroups.com>
Message-ID: <93568A63-38BF-4DDC-8BF6-7F9AAEC26257@gmail.com>

Le 16/nov/2011 ? 21:52, p2w a ?crit :

> Michael,
> 
> OK, so I was a little premature in the statement that reproducing
> behavior was one-hundred percent consistent. It's still failing
> intermittently....

This may be a concurrency issue. Can you try putting together a script that reproduces it? (even if it is just 1 time out of 100)

MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin


From tpletch001 at gmail.com  Wed Nov 16 18:47:43 2011
From: tpletch001 at gmail.com (p2w)
Date: Wed, 16 Nov 2011 10:47:43 -0800 (PST)
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <746596F0-DEDE-4507-B2B9-ED54F0BD7F7C@gmail.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
	<CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>
	<0c76e395-c37d-465c-9706-9a687141edce@p16g2000yqd.googlegroups.com>
	<746596F0-DEDE-4507-B2B9-ED54F0BD7F7C@gmail.com>
Message-ID: <cab61499-fa87-414f-99bb-41e74090a925@q16g2000yqn.googlegroups.com>

Right, the doc indicates that for Thin you do an
EventMachine.next_tick {.......}, which was my first pass approach...

separately, when i try to use the approach in that gist you pointed me
at it is not reading the amqp.yml file properly. is there a particular
format it wants? I am using uri's in that file....can you let me know
if it wants something specific? here is the current format of that
file i looked at the doc and it should be working...but it keeps
trying to connect to localhost...:

development:
  uri: amqp://###:####@mq.#########.com/test
test:
  uri: amqp://###:####@mq.#########.com/test
sandbox:
  uri: amqp://###:####@mq.#########.com/sandbox
staging:
  uri: amqp://###:####@mq.#########.com/staging
production:
  uri: amqp://###:####@mq.#########.com/barzmedia

On Nov 16, 12:18?pm, Michael Klishin <michael.s.klis... at gmail.com>
wrote:
> Le 16/nov/2011 ? 21:11, p2w a ?crit :
>
> > This makes me pretty sure this is
> > an issue with Thin/EM blocking AMQP at thread level. I can replicate
> > this consistently.
>
> With Thin you do not typically start EventMachine in a separate thread. This is the case with Unicorn and Passenger but almost never with Thin.
>
> This can be an EventMachine issue. We depend on EventMachine for TCP connection failure notifications. Maybe try EventMachine 1.0 pre-releases? amqp gem will work with that and we run CI against that version against 7 Rubies or so.
>
> MK
>
> http://github.com/michaelklishinhttp://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From michael.s.klishin at gmail.com  Wed Nov 16 19:23:39 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 16 Nov 2011 23:23:39 +0400
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <cab61499-fa87-414f-99bb-41e74090a925@q16g2000yqn.googlegroups.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
	<CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>
	<0c76e395-c37d-465c-9706-9a687141edce@p16g2000yqd.googlegroups.com>
	<746596F0-DEDE-4507-B2B9-ED54F0BD7F7C@gmail.com>
	<cab61499-fa87-414f-99bb-41e74090a925@q16g2000yqn.googlegroups.com>
Message-ID: <4B8E3F4E-88F3-469C-887C-867241F76C1A@gmail.com>


Le 16/nov/2011 ? 22:47, p2w a ?crit :

> separately, when i try to use the approach in that gist you pointed me
> at it is not reading the amqp.yml file properly. is there a particular
> format it wants? I am using uri's in that file....can you let me know
> if it wants something specific? here is the current format of that
> file i looked at the doc and it should be working...but it keeps
> trying to connect to localhost...:

URI support is only available in master, I believe. Here is a couple of examples:
https://gist.github.com/b26e4af5970c76130b7d

URI support was committed in
https://github.com/ruby-amqp/amqp/commit/50d15f19971daf2f289cb527922298a4a94ab947

Feel free to switch to master, it is identical to the tip of 0.8.x-stable branch right now.

MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin


From tpletch001 at gmail.com  Wed Nov 16 19:29:04 2011
From: tpletch001 at gmail.com (p2w)
Date: Wed, 16 Nov 2011 11:29:04 -0800 (PST)
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <4B8E3F4E-88F3-469C-887C-867241F76C1A@gmail.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
	<CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>
	<0c76e395-c37d-465c-9706-9a687141edce@p16g2000yqd.googlegroups.com>
	<746596F0-DEDE-4507-B2B9-ED54F0BD7F7C@gmail.com>
	<cab61499-fa87-414f-99bb-41e74090a925@q16g2000yqn.googlegroups.com>
	<4B8E3F4E-88F3-469C-887C-867241F76C1A@gmail.com>
Message-ID: <da94effd-3b7e-4a69-a3be-6010d3a5c635@q16g2000yqn.googlegroups.com>

Cool.

Hey I just noticed something in the new code. You are doing an
AMQP.start inside the EventMachine.next_tick. In my original code I am
doing a connect because the doc indicates that Thin already starts the
EM reactor.

Could that be an issue?


On Nov 16, 1:23?pm, Michael Klishin <michael.s.klis... at gmail.com>
wrote:
> Le 16/nov/2011 ? 22:47, p2w a ?crit :
>
> > separately, when i try to use the approach in that gist you pointed me
> > at it is not reading the amqp.yml file properly. is there a particular
> > format it wants? I am using uri's in that file....can you let me know
> > if it wants something specific? here is the current format of that
> > file i looked at the doc and it should be working...but it keeps
> > trying to connect to localhost...:
>
> URI support is only available in master, I believe. Here is a couple of examples:https://gist.github.com/b26e4af5970c76130b7d
>
> URI support was committed inhttps://github.com/ruby-amqp/amqp/commit/50d15f19971daf2f289cb5279222...
>
> Feel free to switch to master, it is identical to the tip of 0.8.x-stable branch right now.
>
> MK
>
> http://github.com/michaelklishinhttp://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From michael.s.klishin at gmail.com  Wed Nov 16 19:44:07 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 16 Nov 2011 23:44:07 +0400
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <da94effd-3b7e-4a69-a3be-6010d3a5c635@q16g2000yqn.googlegroups.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
	<CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>
	<0c76e395-c37d-465c-9706-9a687141edce@p16g2000yqd.googlegroups.com>
	<746596F0-DEDE-4507-B2B9-ED54F0BD7F7C@gmail.com>
	<cab61499-fa87-414f-99bb-41e74090a925@q16g2000yqn.googlegroups.com>
	<4B8E3F4E-88F3-469C-887C-867241F76C1A@gmail.com>
	<da94effd-3b7e-4a69-a3be-6010d3a5c635@q16g2000yqn.googlegroups.com>
Message-ID: <B55D469D-1DEB-4E36-AE08-F350151DFBA4@gmail.com>

Le 16/nov/2011 ? 23:29, p2w a ?crit :

> Cool.
> 
> Hey I just noticed something in the new code. You are doing an
> AMQP.start inside the EventMachine.next_tick. In my original code I am
> doing a connect because the doc indicates that Thin already starts the
> EM reactor.
> 
> Could that be an issue?

I doubt it. EventMachine is smart enough to detect that the reactor is running. In 1.0 it should
be smart enough to also detect when forking has killed it.


MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin


From cameron.davison at gmail.com  Wed Nov 16 20:06:57 2011
From: cameron.davison at gmail.com (Cameron Davison)
Date: Wed, 16 Nov 2011 14:06:57 -0600
Subject: [rabbitmq-discuss] Cluster Memory Usage
Message-ID: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>

I have a cluster of 2 rabbitmq on 2 machines in the same datacenter. I
am sending messages to them at a rate of about 250 message a second
each message is about 2k in size on average. The software is able to
read them back out at about the same rate. Sometime slower usually
faster, which is why I am using a message queue. My question though is
about the memory usage. The machine has 24 gigs of ram but rabbitmq is
not the only thing running on it. I set the high water mark to .1 so
about 2.4 GB of RAM and have had it running for about a week now. The
cluster is using mirrored queue and confirmations on the writes as
well as batch acking on the consumes. The master rabbitmq is reporting
a memory usage by the erlang processer of about 200MB and the slave
rabbitmq is reporting around 800MB but sometimes jumps back and forth
between 400MB and 900MB rapidly. Is there any reason that the memory
usage is so different between the master and the slave, I have seen it
go into memory alert, which makes all the producers slow down, once
before and have been monitoring it every since. When it went into
memory alert I restarted both of the rabbitmqs and things have been
better since. There are about 10 publishers channels/connections, and
about 30 consumer channels/connections. The prefetch is set to 1000
for each channel of the consumers.

Thanks,
Cameron

From tpletch001 at gmail.com  Wed Nov 16 20:53:45 2011
From: tpletch001 at gmail.com (p2w)
Date: Wed, 16 Nov 2011 12:53:45 -0800 (PST)
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <B55D469D-1DEB-4E36-AE08-F350151DFBA4@gmail.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
	<CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>
	<0c76e395-c37d-465c-9706-9a687141edce@p16g2000yqd.googlegroups.com>
	<746596F0-DEDE-4507-B2B9-ED54F0BD7F7C@gmail.com>
	<cab61499-fa87-414f-99bb-41e74090a925@q16g2000yqn.googlegroups.com>
	<4B8E3F4E-88F3-469C-887C-867241F76C1A@gmail.com>
	<da94effd-3b7e-4a69-a3be-6010d3a5c635@q16g2000yqn.googlegroups.com>
	<B55D469D-1DEB-4E36-AE08-F350151DFBA4@gmail.com>
Message-ID: <64edfa5b-c1ac-4784-8a37-6238a095f90e@l24g2000yqm.googlegroups.com>

OK, I think I have some more concrete behavior to work off of.

First of all some of the earlier issues were due to orphaned
connections on the server. I'm not sure how that happens and why those
idle connections were not killed of by the broker, but i'll sort that
out later.

Once those connections and channels were deleted i was able to do the
following with 100% reproducibility: 1) publish a message to the
server, 2) start the server and consume the message, pass it to the
Resque work queue, do some stuff there. 3) bounce back and forth
between doing things in the app gui and publishing/consuming messages
on the rabbitmq server.

Now here's where it gets interesting. if i then stop all activities
the connection is closed after a couple minutes and is not reconnected
by the recovery code in the initializer.  I am unable to tell whether
the connection is severed at the broker or the client side. i do see
in the doc where there is a timeout setting in some of the code
samples but i am not seeing anything in the doc on how it works or
what the recommended params are.

for reference here is the initializer code as it sits right now:

------------------------------------------------------------------------------------------------------------------
connect_params = YAML::load_file(File.join(Rails.root, "config",
"amqp.yml"))[Rails.env]

EventMachine.next_tick {
  AMQP.connect(connect_params['uri']) do |connection, open_ok|
    puts "Connected to MQ Server to Retreive API Submissions..."
    AMQP::Channel.new(connection, :auto_recovery => true) do |channel,
open_ok|
      puts "Channel ##{channel.id} is open..."
      exchange = channel.direct('inbound', :durable => true)
      channel.on_error do |ch, close|
        puts "Handling channel-level error"
        connection.close
      end
      channel.queue('dropbox', :durable => true) do |queue,
declare_ok|
        queue.bind(exchange).subscribe do |metadata, payload|
          message_h = metadata.headers
          message_p = payload
          puts message_h
          puts message_p
          Resque.enqueue(ApiIntake, message_h, message_p)
        end
      end
   end
   connection.on_tcp_connection_loss do |connection, settings|
     # reconnect in 2 seconds, with enforcement
     connection.reconnect(true, 2)
   end
end
}
----------------------------------------------------------------------------

So I guess the next question is how is inactivity handled at the amqp
client side?


On Nov 16, 1:44?pm, Michael Klishin <michael.s.klis... at gmail.com>
wrote:
> Le 16/nov/2011 ? 23:29, p2w a ?crit :
>
> > Cool.
>
> > Hey I just noticed something in the new code. You are doing an
> > AMQP.start inside the EventMachine.next_tick. In my original code I am
> > doing a connect because the doc indicates that Thin already starts the
> > EM reactor.
>
> > Could that be an issue?
>
> I doubt it. EventMachine is smart enough to detect that the reactor is running. In 1.0 it should
> be smart enough to also detect when forking has killed it.
>
> MK
>
> http://github.com/michaelklishinhttp://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From major at mhtx.net  Wed Nov 16 21:44:45 2011
From: major at mhtx.net (Major Hayden)
Date: Wed, 16 Nov 2011 15:44:45 -0600
Subject: [rabbitmq-discuss] RabbitMQ mirrored queues and node failure
Message-ID: <17A5514D-8CD9-405E-AEEF-0CB74829DF80@mhtx.net>

Hey there,

I'm looking at using the mirrored queue functionality in RabbitMQ cluster and I had a question about node failure and what happens to the messages in the queues.

Here's an example: consider you have node A, B, and C (all disk nodes) and a single durable mirrored queue.  They start like this:

node A: 10 messages in the 'foo' queue
node B: 10 messages in the 'foo' queue
node C: 10 messages in the 'foo' queue

Let's say node C is in a rack that loses power and it drops offline.  We end up with this:

node A: 10 messages in the 'foo' queue
node B: 10 messages in the 'foo' queue
node C: offline

While repairs are being made to C's rack, consumers still talk to nodes A and B to pick up and drop off messages.  Let's say the queues on A and B are reduced to zero several times while C is offline and then C comes back online:

node A: has a bunch of messages node C has never seen
node B: has a bunch of messages node C has never seen
node C: back online with the 10 messages it had before it failed?

What I'm interested to know is:

1) Does C come back up with the 10 messages that it had on it before it failed?
2) What happens to those 10 stale, old messages that node C had on it before it failed (that were already picked up from nodes A and B by consumers)?

Thanks in advance for the the help and I apologize if I misunderstood the documentation[1]!

[1] http://www.rabbitmq.com/ha.html#behaviour

--
Major Hayden
major at mhtx.net


From matthias at rabbitmq.com  Wed Nov 16 21:55:56 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 16 Nov 2011 21:55:56 +0000
Subject: [rabbitmq-discuss] RabbitMQ mirrored queues and node failure
In-Reply-To: <17A5514D-8CD9-405E-AEEF-0CB74829DF80@mhtx.net>
References: <17A5514D-8CD9-405E-AEEF-0CB74829DF80@mhtx.net>
Message-ID: <4EC4316C.7060808@rabbitmq.com>

On 16/11/11 21:44, Major Hayden wrote:
> 1) Does C come back up with the 10 messages that it had on it before
> it failed?
> 2) What happens to those 10 stale, old messages that node C had on it
> before it failed (that were already picked up from nodes A and B by
> consumers)?

 From http://www.rabbitmq.com/ha.html#start-stop

<quote>
when a slave rejoins a mirrored-queue, it throws away any durable local
contents it already has and starts empty. It's behaviour is at this
point the same as if it were a new node joining the cluster.
</quote>

Btw, ...

> While repairs are being made to C's rack, consumers still talk to
> nodes A and B to pick up and drop off messages.  Let's say the queues
> on A and B are reduced to zero several times while C is offline and
> then C comes back online.

I think you may have misunderstood the master/slave behaviour of 
mirrored queues. From http://www.rabbitmq.com/ha.html#behaviour

<quote>
All actions other than publishes go only to the master, and the master 
then broadcasts the effect of the actions to the slaves. Thus clients 
consuming from a mirrored queue are in fact consuming from the master.
</quote>


Regards,

Matthias.

From baldgoth at gmail.com  Wed Nov 16 23:34:19 2011
From: baldgoth at gmail.com (TrueWill)
Date: Wed, 16 Nov 2011 15:34:19 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ.Client CLS compliance
Message-ID: <19847428.540.1321486459674.JavaMail.geo-discussion-forums@yqff21>

This has been brought up before, but It Would Be Nice :) if the .NET client 
were CLS-compliant.

For example, the lack of this prevents the client from being used in 
PowerShell (for, say, SCOM monitoring):

Add-Type -Path "RabbitMQ.Client.dll"
$connectionFactory = New-Object RabbitMQ.Client.ConnectionFactory

New-Object : The field/property: "Uri" for type: 
"RabbitMQ.Client.ConnectionFactory" differs only in case from the 
field/property: "uri". Failed to use non CLS compliant type.

All it takes to enforce this is adding
[assembly: CLSCompliant(true)]
to the AssemblyInfo.cs, then turning on Treat warnings as errors. Please 
consider this. Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/642215c4/attachment.htm>

From matthias at rabbitmq.com  Wed Nov 16 23:38:03 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 16 Nov 2011 23:38:03 +0000
Subject: [rabbitmq-discuss] RabbitMQ network issue (IP change) on cluster
In-Reply-To: <CABWH_X6-ergbjWOdbpCuL3AF3PrMhwLTaJcHnBqJj3L6j26jJA@mail.gmail.com>
References: <CABWH_X6DNiw=zXQw4NvLHdr1-qu6jnuLssQ6jSWvpa97BMFVwg@mail.gmail.com>	<20111030072933.GA7731@rabbitmq.com>	<CABWH_X6Sk5+zBfTfR+XLtq-_g3B73izzun8s8LBN9uX77rqO-Q@mail.gmail.com>	<20111108150614.GB17350@rabbitmq.com>
	<CABWH_X6-ergbjWOdbpCuL3AF3PrMhwLTaJcHnBqJj3L6j26jJA@mail.gmail.com>
Message-ID: <4EC4495B.20100@rabbitmq.com>

On 09/11/11 00:43, Yu-Teh Shen wrote:
> So I need to manually reset the cluster after each node reboot?

No, you don't.

> Is it because I need to reboot for sequentially?
> For example, halt sequence A, B, C and I need to boot C, B, A?

That is preferable, but nothing bad should happen if you start the nodes 
in a different order; at worst some nodes may wait until other nodes are up.

The "partitioned network" error you were getting is usually an 
indication that nodes were operating independently from each other. That 
shouldn't happen if all you did was to restart them, so it's not clear 
what caused the error.


Matthias.

From matthias at rabbitmq.com  Wed Nov 16 23:42:02 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 16 Nov 2011 23:42:02 +0000
Subject: [rabbitmq-discuss] RabbitMQ.Client CLS compliance
In-Reply-To: <19847428.540.1321486459674.JavaMail.geo-discussion-forums@yqff21>
References: <19847428.540.1321486459674.JavaMail.geo-discussion-forums@yqff21>
Message-ID: <4EC44A4A.3080401@rabbitmq.com>

On 16/11/11 23:34, TrueWill wrote:
> This has been brought up before, but It Would Be Nice :) if the .NET
> client were CLS-compliant.

ok, we hear you :)

Could you perhaps submit a patch?

Regards,

Matthias.

From aj.esler at gmail.com  Wed Nov 16 23:42:56 2011
From: aj.esler at gmail.com (Andrew Esler)
Date: Wed, 16 Nov 2011 15:42:56 -0800 (PST)
Subject: [rabbitmq-discuss] Queue and filtering questions
Message-ID: <02fd6668-030f-4018-9424-cc96a1306404@j19g2000pro.googlegroups.com>

I am looking at using RabbitMQ for a prototype project I am doing. I
have a couple of questions:

1. Is there a way to have a queue that deletes messages if there are
no consumers attached? I don't want to use autoDelete, as I want
consumers to be able to attach and detach at any time and have the
queue exist.

2. Is there any way to attach a filter to the end of a queue, so that
when a client wants the next message, the message passes through the
filter and may be discarded, and the next message in the queue
considered for delivery to the client. Ideally, it would be possible
to hook into a Java program so that I can check that the message is
one the program should send. Obviously, this will introduce a
potentially large performance overhead, but that is unlikely to be a
problem in my case, as I am not dealing with a particularly high
throughput.

The use case is when I am receiving results from workers for a task,
where each task may produce many results that are put in an output
queue. In order to make the system fault tolerant to a worker becoming
unresponsive or failing, I would like to be able to filter messages
from the output queue that were sent before the worker failed so they
are not delivered twice.
Buffering the messages on the workers is not an option as the output
is a stream, so we need to be able to send results to the output queue
as soon as they are found, and avoid sending any duplicated results if
a worker is restarted. The order of the results is not important, just
that they all arrive eventually.

Cheers,
Andrew

From benbennett at gmail.com  Thu Nov 17 01:44:22 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Wed, 16 Nov 2011 19:44:22 -0600
Subject: [rabbitmq-discuss] Queue and filtering questions
Message-ID: <CAGnU7uhDu3TsOVK3MTn5=6pYaYdPHFSR_0q5BcJxFLhwzPAE7A@mail.gmail.com>

For the first item in our deployed system we used the xmessagettl option
when the queue is created.  Messages expire after a certain amount of time.
http://www.rabbitmq.com/extensions.html

For the second one I would do it in the client and I don't know if rabbit
supports it.  Example in our system there are 10 consumer machines reading
from the same queue,  it goes quick when every node can filter out
messages, if you have to parse through the contents of the message.
On Nov 16, 2011 6:13 PM, "Andrew Esler" <aj.esler at gmail.com> wrote:
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/a1efe561/attachment.htm>

From aj.esler at gmail.com  Thu Nov 17 02:49:18 2011
From: aj.esler at gmail.com (Andrew Esler)
Date: Wed, 16 Nov 2011 18:49:18 -0800 (PST)
Subject: [rabbitmq-discuss] Queue and filtering questions
In-Reply-To: <CAGnU7uhDu3TsOVK3MTn5=6pYaYdPHFSR_0q5BcJxFLhwzPAE7A@mail.gmail.com>
References: <CAGnU7uhDu3TsOVK3MTn5=6pYaYdPHFSR_0q5BcJxFLhwzPAE7A@mail.gmail.com>
Message-ID: <2a1ed006-b5e6-48f3-9d43-94f8d61d15ae@u10g2000prl.googlegroups.com>

Thanks for the info about the ttl, it seems like a good solution.

The reason I want to do filtering server side is then I have easy
access to the info I need for filtering. If filtering is done client
side, then all clients have to know about each other and tasks they
are working on in order to be able to find the information they need
to make filtering decisions.

On Nov 17, 2:44?pm, Benjamin Bennett <benbenn... at gmail.com> wrote:
> For the first item in our deployed system we used the xmessagettl option
> when the queue is created. ?Messages expire after a certain amount of time.http://www.rabbitmq.com/extensions.html
>
> For the second one I would do it in the client and I don't know if rabbit
> supports it. ?Example in our system there are 10 consumer machines reading
> from the same queue, ?it goes quick when every node can filter out
> messages, if you have to parse through the contents of the message.
> On Nov 16, 2011 6:13 PM, "Andrew Esler" <aj.es... at gmail.com> wrote:
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From benbennett at gmail.com  Thu Nov 17 03:01:33 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Wed, 16 Nov 2011 21:01:33 -0600
Subject: [rabbitmq-discuss] Queue and filtering questions
In-Reply-To: <2a1ed006-b5e6-48f3-9d43-94f8d61d15ae@u10g2000prl.googlegroups.com>
References: <CAGnU7uhDu3TsOVK3MTn5=6pYaYdPHFSR_0q5BcJxFLhwzPAE7A@mail.gmail.com>
	<2a1ed006-b5e6-48f3-9d43-94f8d61d15ae@u10g2000prl.googlegroups.com>
Message-ID: <CAGnU7uhVedbah3X6_7s=Bsu1KHtSOZzgirj5-S+HzSgjU_X-1A@mail.gmail.com>

The application we have is server side clustered application . The
database server and message server are on the same cluster and we have
10 application servers behind a h proxy.

On Wed, Nov 16, 2011 at 8:49 PM, Andrew Esler <aj.esler at gmail.com> wrote:
> Thanks for the info about the ttl, it seems like a good solution.
>
> The reason I want to do filtering server side is then I have easy
> access to the info I need for filtering. If filtering is done client
> side, then all clients have to know about each other and tasks they
> are working on in order to be able to find the information they need
> to make filtering decisions.
>
> On Nov 17, 2:44?pm, Benjamin Bennett <benbenn... at gmail.com> wrote:
>> For the first item in our deployed system we used the xmessagettl option
>> when the queue is created. ?Messages expire after a certain amount of time.http://www.rabbitmq.com/extensions.html
>>
>> For the second one I would do it in the client and I don't know if rabbit
>> supports it. ?Example in our system there are 10 consumer machines reading
>> from the same queue, ?it goes quick when every node can filter out
>> messages, if you have to pacrse through the contents of the message.
>> On Nov 16, 2011 6:13 PM, "Andrew Esler" <aj.es... at gmail.com> wrote:
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From pdezwart at rubiconproject.com  Thu Nov 17 03:19:48 2011
From: pdezwart at rubiconproject.com (Pieter de Zwart)
Date: Wed, 16 Nov 2011 21:19:48 -0600
Subject: [rabbitmq-discuss] Disagreeing with the broker over argument type
Message-ID: <CAE9BD54.29B44%pdezwart@rubiconproject.com>

I am having a disagreement with the broker and I am hoping one of you can act as a neutral third party. I am trying to create a queue with arguments using the rabbitmq-c library, and I think im giving a string, but the broker is complaining that I am passing in binary data.

I have attached the interesting portions of the code. Can someone take a peek and tell me who is right? And then tell the broker to stop being a whinny pain in the butt.

Thanks =)
Pieter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/34caa54a/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bad-broker.bad.c
Type: application/octet-stream
Size: 3253 bytes
Desc: bad-broker.bad.c
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111116/34caa54a/attachment.obj>

From michael.s.klishin at gmail.com  Thu Nov 17 07:29:20 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 17 Nov 2011 11:29:20 +0400
Subject: [rabbitmq-discuss] Consumer connection closes abruptly after
	one message
In-Reply-To: <64edfa5b-c1ac-4784-8a37-6238a095f90e@l24g2000yqm.googlegroups.com>
References: <49d8ed6f-0864-44c7-b26a-9f6a8fa5c93b@p2g2000vbj.googlegroups.com>
	<CAE3HoVTCpe=dsKvdqDgM5StSr_GLa3xzvmMqRdryq6m7Lc8buQ@mail.gmail.com>
	<0c76e395-c37d-465c-9706-9a687141edce@p16g2000yqd.googlegroups.com>
	<746596F0-DEDE-4507-B2B9-ED54F0BD7F7C@gmail.com>
	<cab61499-fa87-414f-99bb-41e74090a925@q16g2000yqn.googlegroups.com>
	<4B8E3F4E-88F3-469C-887C-867241F76C1A@gmail.com>
	<da94effd-3b7e-4a69-a3be-6010d3a5c635@q16g2000yqn.googlegroups.com>
	<B55D469D-1DEB-4E36-AE08-F350151DFBA4@gmail.com>
	<64edfa5b-c1ac-4784-8a37-6238a095f90e@l24g2000yqm.googlegroups.com>
Message-ID: <042290E9-032A-4019-A41E-599993FF7A6B@gmail.com>

Le 17/nov/2011 ? 00:53, p2w a ?crit :

> there is a timeout setting in some of the code
> samples but i am not seeing anything in the doc on how it works or
> what the recommended params are.

That must be initial connection timeout, not inactivity timeout. amqp gem does not close connections
on inactivity. EventMachine may do that, I am not sure. Event missing heartbeats detection will result in an event
handler called, not automatic connection termination.

MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin


From matthias at rabbitmq.com  Thu Nov 17 07:58:58 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 17 Nov 2011 07:58:58 +0000
Subject: [rabbitmq-discuss] Disagreeing with the broker over argument
 type
In-Reply-To: <CAE9BD54.29B44%pdezwart@rubiconproject.com>
References: <CAE9BD54.29B44%pdezwart@rubiconproject.com>
Message-ID: <4EC4BEC2.6060801@rabbitmq.com>

Pieter,

On 17/11/11 03:19, Pieter de Zwart wrote:
> I am having a disagreement with the broker and I am hoping one of you
> can act as a neutral third party. I am trying to create a queue with
> arguments using the rabbitmq-c library, and I think im giving a string,
> but the broker is complaining that I am passing in binary data.


From matthias at rabbitmq.com  Thu Nov 17 08:39:45 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 17 Nov 2011 08:39:45 +0000
Subject: [rabbitmq-discuss] Queue and filtering questions
In-Reply-To: <2a1ed006-b5e6-48f3-9d43-94f8d61d15ae@u10g2000prl.googlegroups.com>
References: <CAGnU7uhDu3TsOVK3MTn5=6pYaYdPHFSR_0q5BcJxFLhwzPAE7A@mail.gmail.com>
	<2a1ed006-b5e6-48f3-9d43-94f8d61d15ae@u10g2000prl.googlegroups.com>
Message-ID: <4EC4C851.8040508@rabbitmq.com>

Andrew,

On 17/11/11 02:49, Andrew Esler wrote:
> The reason I want to do filtering server side is then I have easy
> access to the info I need for filtering. If filtering is done client
> side, then all clients have to know about each other and tasks they
> are working on in order to be able to find the information they need
> to make filtering decisions.

It is not obvious from your earlier problem statement why there would be 
a need for clients to know about each other.

You said "I would like to be able to filter messages from the output 
queue that were sent before the worker failed so they are not delivered 
twice.". So there must be some mechanism in place that detects worker 
failure. Could that not trigger an event that is broadcast to all the 
consumers of the output queue, so that they can subsequently filter out 
the results of the failed worker?

I wonder though whether this complexity is really necessary. The failure 
detection can never prevent duplicates completely - after all, some of 
the results of the dying worker may already have been processed. So 
given that the system needs to cope with that anyway, is really worth 
putting a secondary mechanism in place? That would only make sense if 
the worker failure frequency is high and the cost of ordinary duplicate 
handling is high.

Regards,

Matthias.

From andrea.rosa at hp.com  Thu Nov 17 09:43:48 2011
From: andrea.rosa at hp.com (Rosa, Andrea)
Date: Thu, 17 Nov 2011 09:43:48 +0000
Subject: [rabbitmq-discuss] IPv6 issue?
In-Reply-To: <4EC3EB59.9010408@rabbitmq.com>
References: <5F389C517756284F80239F55BCA5DDDD17D60BA7@G9W0721.americas.hpqcorp.net>
	<4EC3EB59.9010408@rabbitmq.com>
Message-ID: <5F389C517756284F80239F55BCA5DDDD17D637D4@G9W0721.americas.hpqcorp.net>



> -----Original Message-----
> From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-
> discuss-bounces at lists.rabbitmq.com] On Behalf Of Simon MacMullen
> Sent: 16 November 2011 16:57
> To: rabbitmq-discuss at lists.rabbitmq.com
> Subject: Re: [rabbitmq-discuss] IPv6 issue?
> 
> Hi Andrea.
> 

Hi Simon,

Thanks for your reply.
[snip]


> 
> I would like to figure out why this isn't working for you though - the
> TCP6 thing *should* be a red herring. Could this have been some
> transient problem that went away by coincidence? Or am I being
> optimistic?

I agree with you, maybe the TCP6 is a red herring, we are monitoring the system to verify if this issue appear again.

From aj.esler at gmail.com  Thu Nov 17 10:27:50 2011
From: aj.esler at gmail.com (Andrew Esler)
Date: Thu, 17 Nov 2011 02:27:50 -0800 (PST)
Subject: [rabbitmq-discuss] Queue and filtering questions
In-Reply-To: <4EC4C851.8040508@rabbitmq.com>
References: <CAGnU7uhDu3TsOVK3MTn5=6pYaYdPHFSR_0q5BcJxFLhwzPAE7A@mail.gmail.com>
	<2a1ed006-b5e6-48f3-9d43-94f8d61d15ae@u10g2000prl.googlegroups.com>
	<4EC4C851.8040508@rabbitmq.com>
Message-ID: <e4545c84-64c2-4d91-b036-6da40a147f64@q39g2000prg.googlegroups.com>

Matthias,

Ideally, I dont want my clients to know about each other.

" So there must be some mechanism in place that detects worker
failure. Could that not trigger an event that is broadcast to all the
consumers of the output queue, so that they can subsequently filter
out
the results of the failed worker?"

This is pretty much what I am planning to do now. Each client
subscribe to a queue, and when a worker fails (expected to be very
infrequently), then an update is broadcast to all clients saying
ignore any messages with id of XXXXXX.
The only problem I can see with this method is that we cant know when
its safe to delete the notices saying 'ignore anything with id of
XXXXX' as we cant search the messages in the system to say that there
are no more messages with id XXXXX. However, this is unlikely to be a
major problem in practice.

As for the added complexity, I was only going to do it server side if
it was possible to do simply. As such, its not a problem.

Thanks for such a simple and easy to use yet powerful messaging
system.

Andrew

On Nov 17, 9:39?pm, Matthias Radestock <matth... at rabbitmq.com> wrote:
> Andrew,
>
> On 17/11/11 02:49, Andrew Esler wrote:
>
> > The reason I want to do filtering server side is then I have easy
> > access to the info I need for filtering. If filtering is done client
> > side, then all clients have to know about each other and tasks they
> > are working on in order to be able to find the information they need
> > to make filtering decisions.
>
> It is not obvious from your earlier problem statement why there would be
> a need for clients to know about each other.
>
> You said "I would like to be able to filter messages from the output
> queue that were sent before the worker failed so they are not delivered
> twice.". So there must be some mechanism in place that detects worker
> failure. Could that not trigger an event that is broadcast to all the
> consumers of the output queue, so that they can subsequently filter out
> the results of the failed worker?
>
> I wonder though whether this complexity is really necessary. The failure
> detection can never prevent duplicates completely - after all, some of
> the results of the dying worker may already have been processed. So
> given that the system needs to cope with that anyway, is really worth
> putting a secondary mechanism in place? That would only make sense if
> the worker failure frequency is high and the cost of ordinary duplicate
> handling is high.
>
> Regards,
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From nick.pateman at certivox.com  Thu Nov 17 11:44:35 2011
From: nick.pateman at certivox.com (Nick Pateman)
Date: Thu, 17 Nov 2011 11:44:35 +0000
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <CAMcAHLU7qaK-p2qPQw3-9g8B8xAcP=Jk3U4O=MDGsAC6=d3SeQ@mail.gmail.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<4EC3EDAC.4050807@rabbitmq.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLU7qaK-p2qPQw3-9g8B8xAcP=Jk3U4O=MDGsAC6=d3SeQ@mail.gmail.com>
Message-ID: <F3E9C1826A037A4A84F4D58424D54D7B02E18663@AMSPRD0302MB111.eurprd03.prod.outlook.com>

Hi Alvaro,

Sorry for the delayed reply.  What do you mean exactly?  I created the queue through the web interface as opposed to being created in code so it's setup at it's default values.

Nick.

From: Alvaro Videla [mailto:videlalvaro at gmail.com]
Sent: 16 November 2011 17:19
To: Nick Pateman
Cc: Simon MacMullen; rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

You can't bind queues to the default exchange. Your new queue should be automatically bound to it.
On Wed, Nov 16, 2011 at 6:11 PM, Nick Pateman <nick.pateman at certivox.com<mailto:nick.pateman at certivox.com>> wrote:
Aahaa, I had no idea to be honest.  I've changed it to "" and have got an error out of it so that's one step closer...

"operation not permitted on the default exchange"

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com<mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com> [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com<mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com>] On Behalf Of Simon MacMullen
Sent: 16 November 2011 17:07
To: rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
Subject: Re: [rabbitmq-discuss] Messages disappearing
On 16/11/11 17:02, Nick Pateman wrote:
>              amqp_cstring_bytes("amq.direct"),
>              amqp_cstring_bytes(queue_name),

So have you set up a binding from the exchange "amq.direct" to your queue?

"amq.direct" is not the default exchange that auto-routes to queues - you should use the name "" for that.

Otherwise your messages will get to the exchange and then be dropped as unroutable. If you're looking at the exchanges tab in mgmt you would see your message rate there, but nothing in the queues tab - is that what you're seeing?

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111117/cc2e4651/attachment.htm>

From simon at rabbitmq.com  Thu Nov 17 11:47:53 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 17 Nov 2011 11:47:53 +0000
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>	<4EC39721.7000201@rabbitmq.com>	<4EC3ABB5.5080602@rabbitmq.com>	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>	<4EC3AF7F.3040905@rabbitmq.com>	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>	<4EC3B5D3.9040204@rabbitmq.com>	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>	<4EC3BDA9.30207@rabbitmq.com>
	<CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>
Message-ID: <4EC4F469.70306@rabbitmq.com>

On 16/11/11 13:52, Sampo Savolainen wrote:
> err was empty and log contained only this:
>
> Stopping and halting node rabbit at blanko ...
> ...done.

...and this was definitely after shutdown had *hung*? Because that looks 
like it had succeeded. Was the timestamp on the log plausible?

> So much for that then. Any other ideas?

I might try to scrounge up a laptop and stick ubuntu on it just to see 
if it's somehow connected to wifi being in use, but I'm not optimistic.

If you were feeling energetic you could try patching

ping -c 1 $(hostname) > /some/file

into the init script just before the "$CONTROL stop ..." line, to see if 
somehow the network is in another state at this point. But again it 
feels like a long shot.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From steve at rabbitmq.com  Thu Nov 17 12:05:54 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Thu, 17 Nov 2011 12:05:54 +0000
Subject: [rabbitmq-discuss] CommandAssembler
In-Reply-To: <CAB-G1jiBDeasSeYeEwJ+Ry_5_UKEWPHR7x9+av1q1CVYWVR_Nw@mail.gmail.com>
References: <CAB-G1jiBDeasSeYeEwJ+Ry_5_UKEWPHR7x9+av1q1CVYWVR_Nw@mail.gmail.com>
Message-ID: <5D933E69-981D-4588-9478-72658560F29F@rabbitmq.com>

Hi Ben,

Yes, it was a conscious decision -- it goes with the concurrency and
thread-safety changes we introduced.  Previously AMQCommand was not thread-safe.
This was partly due to its use of the Assembler inner class, which serially
shared state with the AMQCommand class.  Also, other parts of the implementation
called AMQCommand.Assembler methods.

When re-factoring AMQCommand we extracted CommandAssembler and synchronised on
it.  This allowed us to remove the back reference to AMQCommand from the
assembler, and encapsulate its state. If we expose the object we have problems
with thread-safety and deadlocking again; but I guess exposing the class
wouldn't be a problem.  However, its relationship with the AMQCommand class is
now different, and the use of Assembler is limited entirely to the AMQCommand
class in the new code.

We kept it package private on general principles, and to enforce no leakage into
the public client interface.  In general I am taking the view that the less
visible the internals the harder it is for clients to break them.

Can you explain how you were using Assembler? We would also be interested in how
the com.rabbitmq.client.impl packages are being used in general. As a matter of
long-term intent, the impl classes ought only to be used internally. Though I
know they are pretty well exposed at present.

Thank you for your feedback.
Steve Powell

On 15 Nov 2011, at 12:30, Ben Hood wrote:
> I was wondering whether there was a conscious design choice to reduce
> the visibility of the ported CommandAssembler to default package
> scope?
> 
> We were using the old AMQCommand.Assembler which was public in the
> com.rabbitmq.client.impl namespace.
> 
> Cheers,
> 
> Ben

From mh at foldr3.com  Thu Nov 17 12:29:55 2011
From: mh at foldr3.com (Muharem Hrnjadovic)
Date: Thu, 17 Nov 2011 13:29:55 +0100
Subject: [rabbitmq-discuss] performance with thousands of auto_delete queues
Message-ID: <4EC4FE43.6050502@foldr3.com>

Hello there!

We are using rabbitmq rev. 2.3.1 with python-celery for large-scale
seismic calculations. Celery seems to create an auto_delete queue for
each task and I am observing a severe performance degradation once
approx. 15,000 queues have been created (this a tenth of the overall
calculation).

Most of these queues have served their purpose, however, and can be
"garbage collected". Is there a way to request that auto_delete queues
be actually removed?

Best regards/Mit freundlichen Gr??en

-- 
Muharem Hrnjadovic <mh at foldr3.com>
Public key id   : B2BBFCFC
Key fingerprint : A5A3 CC67 2B87 D641 103F  5602 219F 6B60 B2BB FCFC

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 900 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111117/c0365794/attachment.pgp>

From videlalvaro at gmail.com  Thu Nov 17 12:36:51 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Thu, 17 Nov 2011 13:36:51 +0100
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <F3E9C1826A037A4A84F4D58424D54D7B02E18663@AMSPRD0302MB111.eurprd03.prod.outlook.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<4EC3EDAC.4050807@rabbitmq.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLU7qaK-p2qPQw3-9g8B8xAcP=Jk3U4O=MDGsAC6=d3SeQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18663@AMSPRD0302MB111.eurprd03.prod.outlook.com>
Message-ID: <CAMcAHLUQdHoem848QHLgKSiUHCDqb1zPw=i20PZhqBgS5=F=Ww@mail.gmail.com>

Hi,

What I tried to convey is that in your code you can't say
queue_bind('my_queue', ''); where '' is the anon exchange.

I thought the error "operation not permitted on the default exchange" you
mentioned in your past email could be related to that.

-Alvaro

On Thu, Nov 17, 2011 at 12:44 PM, Nick Pateman <nick.pateman at certivox.com>wrote:

>  Hi Alvaro,****
>
> ** **
>
> Sorry for the delayed reply.  What do you mean exactly?  I created the
> queue through the web interface as opposed to being created in code so it?s
> setup at it?s default values.****
>
> ** **
>
> Nick.****
>
> ** **
>
> *From:* Alvaro Videla [mailto:videlalvaro at gmail.com]
> *Sent:* 16 November 2011 17:19
> *To:* Nick Pateman
> *Cc:* Simon MacMullen; rabbitmq-discuss at lists.rabbitmq.com
>
> *Subject:* Re: [rabbitmq-discuss] Messages disappearing****
>
> ** **
>
> You can't bind queues to the default exchange. Your new queue should be
> automatically bound to it.****
>
> On Wed, Nov 16, 2011 at 6:11 PM, Nick Pateman <nick.pateman at certivox.com>
> wrote:****
>
> Aahaa, I had no idea to be honest.  I've changed it to "" and have got an
> error out of it so that's one step closer...
>
> "operation not permitted on the default exchange"****
>
>
> -----Original Message-----
> From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:
> rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Simon MacMullen
> Sent: 16 November 2011 17:07
> To: rabbitmq-discuss at lists.rabbitmq.com
> Subject: Re: [rabbitmq-discuss] Messages disappearing****
>
> On 16/11/11 17:02, Nick Pateman wrote:
> >              amqp_cstring_bytes("amq.direct"),
> >              amqp_cstring_bytes(queue_name),
>
> So have you set up a binding from the exchange "amq.direct" to your queue?
>
> "amq.direct" is not the default exchange that auto-routes to queues - you
> should use the name "" for that.
>
> Otherwise your messages will get to the exchange and then be dropped as
> unroutable. If you're looking at the exchanges tab in mgmt you would see
> your message rate there, but nothing in the queues tab - is that what
> you're seeing?
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss****
>
> ** **
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111117/d41baed7/attachment.htm>

From videlalvaro at gmail.com  Thu Nov 17 12:39:54 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Thu, 17 Nov 2011 13:39:54 +0100
Subject: [rabbitmq-discuss] performance with thousands of auto_delete
	queues
In-Reply-To: <4EC4FE43.6050502@foldr3.com>
References: <4EC4FE43.6050502@foldr3.com>
Message-ID: <CAMcAHLV9oLC9C3vSBVQ0+ksHHazFnZrtuvxpPUWmmkzJDkuaxQ@mail.gmail.com>

Hi Muharem,

I think if you don't close the channel or actually the connection that
created the queues then they won't be auto-deleted.

Might that be the problem?

Cheers,

-Alvaro

On Thu, Nov 17, 2011 at 1:29 PM, Muharem Hrnjadovic <mh at foldr3.com> wrote:

> Hello there!
>
> We are using rabbitmq rev. 2.3.1 with python-celery for large-scale
> seismic calculations. Celery seems to create an auto_delete queue for
> each task and I am observing a severe performance degradation once
> approx. 15,000 queues have been created (this a tenth of the overall
> calculation).
>
> Most of these queues have served their purpose, however, and can be
> "garbage collected". Is there a way to request that auto_delete queues
> be actually removed?
>
> Best regards/Mit freundlichen Gr??en
>
> --
> Muharem Hrnjadovic <mh at foldr3.com>
> Public key id   : B2BBFCFC
> Key fingerprint : A5A3 CC67 2B87 D641 103F  5602 219F 6B60 B2BB FCFC
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111117/24cf1b1e/attachment.htm>

From ask at rabbitmq.com  Thu Nov 17 13:35:59 2011
From: ask at rabbitmq.com (Ask Solem)
Date: Thu, 17 Nov 2011 13:35:59 +0000
Subject: [rabbitmq-discuss] performance with thousands of auto_delete
	queues
In-Reply-To: <4EC4FE43.6050502@foldr3.com>
References: <4EC4FE43.6050502@foldr3.com>
Message-ID: <F39C2631-9F27-45DC-98C6-B31049B56F9C@rabbitmq.com>


On 17 Nov 2011, at 12:29, Muharem Hrnjadovic wrote:

> Hello there!
> 
> We are using rabbitmq rev. 2.3.1 with python-celery for large-scale
> seismic calculations. Celery seems to create an auto_delete queue for
> each task and I am observing a severe performance degradation once
> approx. 15,000 queues have been created (this a tenth of the overall
> calculation).
> 
> Most of these queues have served their purpose, however, and can be
> "garbage collected". Is there a way to request that auto_delete queues
> be actually removed?


The queues you are seeing are the task's progress and results.
If you don't need them you should disable them.  You can do so
by upgrading to the latest version (where results are disabled
by default), or setting @task(ignore_result=True) for individual
tasks, or CELERY_IGNORE_RESULT=True globally.


An auto_delete queue is only deleted when it's empty,
so you have to collect the results.  Another option is to enable
expiration:
   CELERY_AMQP_TASK_RESULT_EXPIRES = 300
This can either be an unsigned integer, or a datetime.timedelta
object describing the number of seconds to pass before the queue
is expired (deleted) when unused. Expiration is also enabled by default
in the latest version, but the expire time is set to 1 day, which may be
too infrequent for your use.

From smetj.net at gmail.com  Thu Nov 17 13:39:46 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Thu, 17 Nov 2011 05:39:46 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ Shovel Connections
In-Reply-To: <004201cc735b$b4aa9c80$1dffd580$@omc-international.com.au>
References: <004201cc735b$b4aa9c80$1dffd580$@omc-international.com.au>
Message-ID: <33495078.665.1321537186592.JavaMail.geo-discussion-forums@yqni5>

Hi Alexandru,

I still have the same issue going on.  Here's a recap:


   - I have upgraded to the latest stable (2.7.0) Rabbmitmq on all nodes.
   - Messages which should be shoveled to a remote broker stay 
   unacknowledged in the queue which Shovel is using as a source.
   - Restarting RabbitMQ on that moment isn't possible.  Killing is 
   required, often having to issue "epmd -kill"
   - When restarting RabbitMQ containing Shovel after that all messages are 
   shoveled correctly to their destination.
   - ack_mode has value "on_confirm", when changing this to "no_ack" all 
   messages get lost.

I must say that it's possible that small network interruptions happen, or 
occasional packetloss occurs... but that doesn't explain that restarting 
Rabbit, makes all messages arrive.

Here's my complete Shovel configuration (I replaced hostnames & queue 
names):

[{rabbitmq_shovel,
  [{shovels,
    [
     {scan_orders_amsterdam,
      [{sources,      [{broker,"amqp://localhost"}]},
       {destinations, [{broker, "amqp://server01"}]},
       {queue, <<"messages_server01">>},
       {ack_mode, on_confirm},
       {publish_properties, [{delivery_mode, 2}]},
       {publish_fields, [{exchange, <<"">>},
                         {routing_key, <<"assignments">>}]},
       {reconnect_delay, 5}
      ]},
     {scan_orders_gent,
      [{sources,      [{broker,"amqp://localhost"}]},
       {destinations, [{broker, "amqp://server02"}]},
       {queue, <<"messages_server02">>},
       {ack_mode, on_confirm},
       {publish_properties, [{delivery_mode, 2}]},
       {publish_fields, [{exchange, <<"">>},
                         {routing_key, <<"assignments">>}]},
       {reconnect_delay, 5}
      ]},
     {scan_orders_lebanon,
      [{sources,      [{broker,"amqp://localhost"}]},
       {destinations, [{broker, "amqp://server03"}]},
       {queue, <<"messages_server03">>},
       {ack_mode, on_confirm},
       {publish_properties, [{delivery_mode, 2}]},
       {publish_fields, [{exchange, <<"">>},
                         {routing_key, <<"assignments">>}]},
       {reconnect_delay, 5}
      ]},
     {scan_orders_pune,
      [{sources,      [{broker,"amqp://localhost"}]},
       {destinations, [{broker, "amqp://server04"}]},
       {queue, <<"messages_server04">>},
       {ack_mode, on_confirm},
       {publish_properties, [{delivery_mode, 2}]},
       {publish_fields, [{exchange, <<"">>},
                         {routing_key, <<"assignments">>}]},
       {reconnect_delay, 5}
      ]},
     {scan_orders_lodz,
      [{sources,      [{broker,"amqp://localhost"}]},
       {destinations, [{broker, "amqp://server05"}]},
       {queue, <<"messages_server05">>},
       {ack_mode, on_confirm},
       {publish_properties, [{delivery_mode, 2}]},
       {publish_fields, [{exchange, <<"">>},
                         {routing_key, <<"assignments">>}]},
       {reconnect_delay, 5}
      ]}
     ]
   }]
}].


Any idea how to troubleshoot this?

Cheers,

Jelle



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111117/0008f429/attachment.htm>

From mh at foldr3.com  Thu Nov 17 14:42:49 2011
From: mh at foldr3.com (Muharem Hrnjadovic)
Date: Thu, 17 Nov 2011 15:42:49 +0100
Subject: [rabbitmq-discuss] performance with thousands of auto_delete
 queues
In-Reply-To: <F39C2631-9F27-45DC-98C6-B31049B56F9C@rabbitmq.com>
References: <4EC4FE43.6050502@foldr3.com>
	<F39C2631-9F27-45DC-98C6-B31049B56F9C@rabbitmq.com>
Message-ID: <4EC51D69.2030206@foldr3.com>

On 11/17/2011 02:35 PM, Ask Solem wrote:
> 
> On 17 Nov 2011, at 12:29, Muharem Hrnjadovic wrote:
> 
>> Hello there!
>>
>> We are using rabbitmq rev. 2.3.1 with python-celery for large-scale
>> seismic calculations. Celery seems to create an auto_delete queue for
>> each task and I am observing a severe performance degradation once
>> approx. 15,000 queues have been created (this a tenth of the overall
>> calculation).
>>
>> Most of these queues have served their purpose, however, and can be
>> "garbage collected". Is there a way to request that auto_delete queues
>> be actually removed?
> 
> The queues you are seeing are the task's progress and results.
> If you don't need them you should disable them.
We do need the results.

> You can do so by upgrading to the latest version (where results are
> disabled by default), or setting @task(ignore_result=True) for
> individual tasks, or CELERY_IGNORE_RESULT=True globally.

> An auto_delete queue is only deleted when it's empty,
> so you have to collect the results.
How does one collect the results? We do

    result = TaskSet(tasks=subtasks).apply_async()

    # Wait for all subtasks to complete.
    while not result.ready():
        time.sleep(0.25)

    the_results = result.join()

Is there something we need to do beyond that?

[..]

Best regards/Mit freundlichen Gr??en

-- 
Muharem Hrnjadovic <mh at foldr3.com>
Public key id   : B2BBFCFC
Key fingerprint : A5A3 CC67 2B87 D641 103F  5602 219F 6B60 B2BB FCFC

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 900 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111117/5c1fdc6e/attachment.pgp>

From allard.guy.m at gmail.com  Thu Nov 17 14:50:26 2011
From: allard.guy.m at gmail.com (gmallard)
Date: Thu, 17 Nov 2011 06:50:26 -0800 (PST)
Subject: [rabbitmq-discuss] STOMP 1.1 Repeated Headers
Message-ID: <dcf121bc-835f-4c14-a127-591817e070dc@m19g2000yqh.googlegroups.com>

Hello - As background, I am running this build: rabbitmq-
server_2.6.1-1_all.deb on Ubuntu 11.10.

I establish a 1.1 level connection, and send a frame:

SEND
destination:/queue/tq
dupkey1:latest
dupkey1:before1
dupkey1:before2

Payload.^@

Later I SUBSCRIBE, and receive that message.

When the MESSAGE frame comes off the wire, I expect to see all three
of those 'dupkey1' headers, in order.  I do not.  Only the first of
the 'dupkey1' headers is present.

Seeking comments please, along the lines of bug/spec compliance,
etc .......

Thanks, Guy

From nick.pateman at certivox.com  Thu Nov 17 15:13:12 2011
From: nick.pateman at certivox.com (Nick Pateman)
Date: Thu, 17 Nov 2011 15:13:12 +0000
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <CAMcAHLUQdHoem848QHLgKSiUHCDqb1zPw=i20PZhqBgS5=F=Ww@mail.gmail.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<4EC3EDAC.4050807@rabbitmq.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLU7qaK-p2qPQw3-9g8B8xAcP=Jk3U4O=MDGsAC6=d3SeQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18663@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLUQdHoem848QHLgKSiUHCDqb1zPw=i20PZhqBgS5=F=Ww@mail.gmail.com>
Message-ID: <F3E9C1826A037A4A84F4D58424D54D7B02E187EF@AMSPRD0302MB111.eurprd03.prod.outlook.com>

Hi Alvaro,

I've tried removing the binding code as suggested and the error does not appear, so the message appears to be going somewhere but it's doing the same as it was prior to changing the exchange to an empty string.

/*printf("Binding RabbitMQ queue\r\n");
amqp_queue_bind(conn, 1, queuename, amqp_cstring_bytes(exchange), amqp_cstring_bytes(bindingkey),
amqp_empty_table);

The above line has now gone which removed the previous error.


Nick.

From: Alvaro Videla [mailto:videlalvaro at gmail.com]
Sent: 17 November 2011 12:37
To: Nick Pateman
Cc: Simon MacMullen; rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

Hi,

What I tried to convey is that in your code you can't say queue_bind('my_queue', ''); where '' is the anon exchange.

I thought the error "operation not permitted on the default exchange" you mentioned in your past email could be related to that.

-Alvaro

On Thu, Nov 17, 2011 at 12:44 PM, Nick Pateman <nick.pateman at certivox.com<mailto:nick.pateman at certivox.com>> wrote:
Hi Alvaro,

Sorry for the delayed reply.  What do you mean exactly?  I created the queue through the web interface as opposed to being created in code so it's setup at it's default values.

Nick.

From: Alvaro Videla [mailto:videlalvaro at gmail.com<mailto:videlalvaro at gmail.com>]
Sent: 16 November 2011 17:19
To: Nick Pateman
Cc: Simon MacMullen; rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>

Subject: Re: [rabbitmq-discuss] Messages disappearing

You can't bind queues to the default exchange. Your new queue should be automatically bound to it.
On Wed, Nov 16, 2011 at 6:11 PM, Nick Pateman <nick.pateman at certivox.com<mailto:nick.pateman at certivox.com>> wrote:
Aahaa, I had no idea to be honest.  I've changed it to "" and have got an error out of it so that's one step closer...

"operation not permitted on the default exchange"

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com<mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com> [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com<mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com>] On Behalf Of Simon MacMullen
Sent: 16 November 2011 17:07
To: rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
Subject: Re: [rabbitmq-discuss] Messages disappearing
On 16/11/11 17:02, Nick Pateman wrote:
>              amqp_cstring_bytes("amq.direct"),
>              amqp_cstring_bytes(queue_name),

So have you set up a binding from the exchange "amq.direct" to your queue?

"amq.direct" is not the default exchange that auto-routes to queues - you should use the name "" for that.

Otherwise your messages will get to the exchange and then be dropped as unroutable. If you're looking at the exchanges tab in mgmt you would see your message rate there, but nothing in the queues tab - is that what you're seeing?

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111117/abe88f53/attachment.htm>

From nick.pateman at certivox.com  Thu Nov 17 15:21:34 2011
From: nick.pateman at certivox.com (Nick Pateman)
Date: Thu, 17 Nov 2011 15:21:34 +0000
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <F3E9C1826A037A4A84F4D58424D54D7B02E187EF@AMSPRD0302MB111.eurprd03.prod.outlook.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<4EC3EDAC.4050807@rabbitmq.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLU7qaK-p2qPQw3-9g8B8xAcP=Jk3U4O=MDGsAC6=d3SeQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18663@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLUQdHoem848QHLgKSiUHCDqb1zPw=i20PZhqBgS5=F=Ww@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E187EF@AMSPRD0302MB111.eurprd03.prod.outlook.com>
Message-ID: <F3E9C1826A037A4A84F4D58424D54D7B02E1880E@AMSPRD0302MB111.eurprd03.prod.outlook.com>

Just to clarify my connection code...

queuename = testing


conn = amqp_new_connection();

die_on_error(sockfd = amqp_open_socket(hostname, port),
"Opening socket");

amqp_set_sockfd(conn, sockfd);
die_on_amqp_error(amqp_login(conn, "/", 0, 131072, 0, AMQP_SASL_METHOD_PLAIN, "guest", "guest"),
"Logging in");

amqp_channel_open(conn, 1);
die_on_amqp_error(amqp_get_rpc_reply(conn),
"Opening channel");

amqp_basic_consume(conn, 1, queuename, amqp_empty_bytes, 0, 1, 0, amqp_empty_table);
die_on_amqp_error(amqp_get_rpc_reply(conn),
"Consuming");

//Messages are being sent here

//****************************************************
// TODO: Free any allocated resources before exiting
//****************************************************
die_on_amqp_error(amqp_channel_close(conn, 1, AMQP_REPLY_SUCCESS),
"Closing channel");

die_on_amqp_error(amqp_connection_close(conn, AMQP_REPLY_SUCCESS),
"Closing connection");

die_on_error(amqp_destroy_connection(conn),
"Ending connection");


From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Nick Pateman
Sent: 17 November 2011 15:13
To: Alvaro Videla
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

Hi Alvaro,

I've tried removing the binding code as suggested and the error does not appear, so the message appears to be going somewhere but it's doing the same as it was prior to changing the exchange to an empty string.

/*printf("Binding RabbitMQ queue\r\n");
amqp_queue_bind(conn, 1, queuename, amqp_cstring_bytes(exchange), amqp_cstring_bytes(bindingkey),
amqp_empty_table);
The above line has now gone which removed the previous error.


Nick.

From: Alvaro Videla [mailto:videlalvaro at gmail.com]
Sent: 17 November 2011 12:37
To: Nick Pateman
Cc: Simon MacMullen; rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

Hi,

What I tried to convey is that in your code you can't say queue_bind('my_queue', ''); where '' is the anon exchange.

I thought the error "operation not permitted on the default exchange" you mentioned in your past email could be related to that.

-Alvaro

On Thu, Nov 17, 2011 at 12:44 PM, Nick Pateman <nick.pateman at certivox.com<mailto:nick.pateman at certivox.com>> wrote:
Hi Alvaro,

Sorry for the delayed reply.  What do you mean exactly?  I created the queue through the web interface as opposed to being created in code so it's setup at it's default values.

Nick.

From: Alvaro Videla [mailto:videlalvaro at gmail.com<mailto:videlalvaro at gmail.com>]
Sent: 16 November 2011 17:19
To: Nick Pateman
Cc: Simon MacMullen; rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>

Subject: Re: [rabbitmq-discuss] Messages disappearing

You can't bind queues to the default exchange. Your new queue should be automatically bound to it.
On Wed, Nov 16, 2011 at 6:11 PM, Nick Pateman <nick.pateman at certivox.com<mailto:nick.pateman at certivox.com>> wrote:
Aahaa, I had no idea to be honest.  I've changed it to "" and have got an error out of it so that's one step closer...

"operation not permitted on the default exchange"

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com<mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com> [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com<mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com>] On Behalf Of Simon MacMullen
Sent: 16 November 2011 17:07
To: rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
Subject: Re: [rabbitmq-discuss] Messages disappearing
On 16/11/11 17:02, Nick Pateman wrote:
>              amqp_cstring_bytes("amq.direct"),
>              amqp_cstring_bytes(queue_name),

So have you set up a binding from the exchange "amq.direct" to your queue?

"amq.direct" is not the default exchange that auto-routes to queues - you should use the name "" for that.

Otherwise your messages will get to the exchange and then be dropped as unroutable. If you're looking at the exchanges tab in mgmt you would see your message rate there, but nothing in the queues tab - is that what you're seeing?

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111117/dc7669eb/attachment.htm>

From nick.pateman at certivox.com  Thu Nov 17 15:25:27 2011
From: nick.pateman at certivox.com (Nick Pateman)
Date: Thu, 17 Nov 2011 15:25:27 +0000
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <F3E9C1826A037A4A84F4D58424D54D7B02E1880E@AMSPRD0302MB111.eurprd03.prod.outlook.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<4EC3EDAC.4050807@rabbitmq.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLU7qaK-p2qPQw3-9g8B8xAcP=Jk3U4O=MDGsAC6=d3SeQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18663@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLUQdHoem848QHLgKSiUHCDqb1zPw=i20PZhqBgS5=F=Ww@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E187EF@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1880E@AMSPRD0302MB111.eurprd03.prod.outlook.com>
Message-ID: <F3E9C1826A037A4A84F4D58424D54D7B02E18827@AMSPRD0302MB111.eurprd03.prod.outlook.com>

I've also checked the exchange "AMQP default" and this appears to be delivering the messages to my queue which is named "testing".  At least that's what appears in the outgoing rate section at 10/s.

From: Nick Pateman
Sent: 17 November 2011 15:22
To: Nick Pateman; Alvaro Videla
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: RE: [rabbitmq-discuss] Messages disappearing

Just to clarify my connection code...

queuename = testing


conn = amqp_new_connection();

die_on_error(sockfd = amqp_open_socket(hostname, port),
"Opening socket");

amqp_set_sockfd(conn, sockfd);
die_on_amqp_error(amqp_login(conn, "/", 0, 131072, 0, AMQP_SASL_METHOD_PLAIN, "guest", "guest"),
"Logging in");

amqp_channel_open(conn, 1);
die_on_amqp_error(amqp_get_rpc_reply(conn),
"Opening channel");

amqp_basic_consume(conn, 1, queuename, amqp_empty_bytes, 0, 1, 0, amqp_empty_table);
die_on_amqp_error(amqp_get_rpc_reply(conn),
"Consuming");

//Messages are being sent here

//****************************************************
// TODO: Free any allocated resources before exiting
//****************************************************
die_on_amqp_error(amqp_channel_close(conn, 1, AMQP_REPLY_SUCCESS),
"Closing channel");

die_on_amqp_error(amqp_connection_close(conn, AMQP_REPLY_SUCCESS),
"Closing connection");

die_on_error(amqp_destroy_connection(conn),
"Ending connection");


From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Nick Pateman
Sent: 17 November 2011 15:13
To: Alvaro Videla
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

Hi Alvaro,

I've tried removing the binding code as suggested and the error does not appear, so the message appears to be going somewhere but it's doing the same as it was prior to changing the exchange to an empty string.

/*printf("Binding RabbitMQ queue\r\n");
amqp_queue_bind(conn, 1, queuename, amqp_cstring_bytes(exchange), amqp_cstring_bytes(bindingkey),
amqp_empty_table);
The above line has now gone which removed the previous error.


Nick.

From: Alvaro Videla [mailto:videlalvaro at gmail.com]
Sent: 17 November 2011 12:37
To: Nick Pateman
Cc: Simon MacMullen; rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

Hi,

What I tried to convey is that in your code you can't say queue_bind('my_queue', ''); where '' is the anon exchange.

I thought the error "operation not permitted on the default exchange" you mentioned in your past email could be related to that.

-Alvaro

On Thu, Nov 17, 2011 at 12:44 PM, Nick Pateman <nick.pateman at certivox.com<mailto:nick.pateman at certivox.com>> wrote:
Hi Alvaro,

Sorry for the delayed reply.  What do you mean exactly?  I created the queue through the web interface as opposed to being created in code so it's setup at it's default values.

Nick.

From: Alvaro Videla [mailto:videlalvaro at gmail.com<mailto:videlalvaro at gmail.com>]
Sent: 16 November 2011 17:19
To: Nick Pateman
Cc: Simon MacMullen; rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>

Subject: Re: [rabbitmq-discuss] Messages disappearing

You can't bind queues to the default exchange. Your new queue should be automatically bound to it.
On Wed, Nov 16, 2011 at 6:11 PM, Nick Pateman <nick.pateman at certivox.com<mailto:nick.pateman at certivox.com>> wrote:
Aahaa, I had no idea to be honest.  I've changed it to "" and have got an error out of it so that's one step closer...

"operation not permitted on the default exchange"

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com<mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com> [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com<mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com>] On Behalf Of Simon MacMullen
Sent: 16 November 2011 17:07
To: rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
Subject: Re: [rabbitmq-discuss] Messages disappearing
On 16/11/11 17:02, Nick Pateman wrote:
>              amqp_cstring_bytes("amq.direct"),
>              amqp_cstring_bytes(queue_name),

So have you set up a binding from the exchange "amq.direct" to your queue?

"amq.direct" is not the default exchange that auto-routes to queues - you should use the name "" for that.

Otherwise your messages will get to the exchange and then be dropped as unroutable. If you're looking at the exchanges tab in mgmt you would see your message rate there, but nothing in the queues tab - is that what you're seeing?

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111117/ce6d316e/attachment.htm>

From nick.pateman at certivox.com  Thu Nov 17 15:38:47 2011
From: nick.pateman at certivox.com (Nick Pateman)
Date: Thu, 17 Nov 2011 15:38:47 +0000
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <F3E9C1826A037A4A84F4D58424D54D7B02E18827@AMSPRD0302MB111.eurprd03.prod.outlook.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<4EC3EDAC.4050807@rabbitmq.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLU7qaK-p2qPQw3-9g8B8xAcP=Jk3U4O=MDGsAC6=d3SeQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18663@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLUQdHoem848QHLgKSiUHCDqb1zPw=i20PZhqBgS5=F=Ww@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E187EF@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1880E@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18827@AMSPRD0302MB111.eurprd03.prod.outlook.com>
Message-ID: <F3E9C1826A037A4A84F4D58424D54D7B02E18842@AMSPRD0302MB111.eurprd03.prod.outlook.com>

I've set no_ack to 0 in my amq_basic_consume call and the messages are now appearing in the queue but as unacknowledged.

From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Nick Pateman
Sent: 17 November 2011 15:25
To: Alvaro Videla
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

I've also checked the exchange "AMQP default" and this appears to be delivering the messages to my queue which is named "testing".  At least that's what appears in the outgoing rate section at 10/s.

From: Nick Pateman
Sent: 17 November 2011 15:22
To: Nick Pateman; Alvaro Videla
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: RE: [rabbitmq-discuss] Messages disappearing

Just to clarify my connection code...

queuename = testing


conn = amqp_new_connection();

die_on_error(sockfd = amqp_open_socket(hostname, port),
"Opening socket");

amqp_set_sockfd(conn, sockfd);
die_on_amqp_error(amqp_login(conn, "/", 0, 131072, 0, AMQP_SASL_METHOD_PLAIN, "guest", "guest"),
"Logging in");

amqp_channel_open(conn, 1);
die_on_amqp_error(amqp_get_rpc_reply(conn),
"Opening channel");

amqp_basic_consume(conn, 1, queuename, amqp_empty_bytes, 0, 1, 0, amqp_empty_table);
die_on_amqp_error(amqp_get_rpc_reply(conn),
"Consuming");

//Messages are being sent here

//****************************************************
// TODO: Free any allocated resources before exiting
//****************************************************
die_on_amqp_error(amqp_channel_close(conn, 1, AMQP_REPLY_SUCCESS),
"Closing channel");

die_on_amqp_error(amqp_connection_close(conn, AMQP_REPLY_SUCCESS),
"Closing connection");

die_on_error(amqp_destroy_connection(conn),
"Ending connection");


From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Nick Pateman
Sent: 17 November 2011 15:13
To: Alvaro Videla
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

Hi Alvaro,

I've tried removing the binding code as suggested and the error does not appear, so the message appears to be going somewhere but it's doing the same as it was prior to changing the exchange to an empty string.

/*printf("Binding RabbitMQ queue\r\n");
amqp_queue_bind(conn, 1, queuename, amqp_cstring_bytes(exchange), amqp_cstring_bytes(bindingkey),
amqp_empty_table);
The above line has now gone which removed the previous error.


Nick.

From: Alvaro Videla [mailto:videlalvaro at gmail.com]
Sent: 17 November 2011 12:37
To: Nick Pateman
Cc: Simon MacMullen; rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

Hi,

What I tried to convey is that in your code you can't say queue_bind('my_queue', ''); where '' is the anon exchange.

I thought the error "operation not permitted on the default exchange" you mentioned in your past email could be related to that.

-Alvaro

On Thu, Nov 17, 2011 at 12:44 PM, Nick Pateman <nick.pateman at certivox.com<mailto:nick.pateman at certivox.com>> wrote:
Hi Alvaro,

Sorry for the delayed reply.  What do you mean exactly?  I created the queue through the web interface as opposed to being created in code so it's setup at it's default values.

Nick.

From: Alvaro Videla [mailto:videlalvaro at gmail.com<mailto:videlalvaro at gmail.com>]
Sent: 16 November 2011 17:19
To: Nick Pateman
Cc: Simon MacMullen; rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>

Subject: Re: [rabbitmq-discuss] Messages disappearing

You can't bind queues to the default exchange. Your new queue should be automatically bound to it.
On Wed, Nov 16, 2011 at 6:11 PM, Nick Pateman <nick.pateman at certivox.com<mailto:nick.pateman at certivox.com>> wrote:
Aahaa, I had no idea to be honest.  I've changed it to "" and have got an error out of it so that's one step closer...

"operation not permitted on the default exchange"

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com<mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com> [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com<mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com>] On Behalf Of Simon MacMullen
Sent: 16 November 2011 17:07
To: rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
Subject: Re: [rabbitmq-discuss] Messages disappearing
On 16/11/11 17:02, Nick Pateman wrote:
>              amqp_cstring_bytes("amq.direct"),
>              amqp_cstring_bytes(queue_name),

So have you set up a binding from the exchange "amq.direct" to your queue?

"amq.direct" is not the default exchange that auto-routes to queues - you should use the name "" for that.

Otherwise your messages will get to the exchange and then be dropped as unroutable. If you're looking at the exchanges tab in mgmt you would see your message rate there, but nothing in the queues tab - is that what you're seeing?

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111117/bfc1154c/attachment.htm>

From simon at rabbitmq.com  Thu Nov 17 15:43:40 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 17 Nov 2011 15:43:40 +0000
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <F3E9C1826A037A4A84F4D58424D54D7B02E18842@AMSPRD0302MB111.eurprd03.prod.outlook.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>	<CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>	<F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>	<4EC3EDAC.4050807@rabbitmq.com>	<F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>	<CAMcAHLU7qaK-p2qPQw3-9g8B8xAcP=Jk3U4O=MDGsAC6=d3SeQ@mail.gmail.com>	<F3E9C1826A037A4A84F4D58424D54D7B02E18663@AMSPRD0302MB111.eurprd03.prod.outlook.com>	<CAMcAHLUQdHoem848QHLgKSiUHCDqb1zPw=i20PZhqBgS5=F=Ww@mail.gmail.com>	<F3E9C1826A037A4A84F4D58424D54D7B02E187EF@AMSPRD0302MB111.eurprd03.prod.outlook.com>	<F3E9C1826A037A4A84F4D58424D54D7B02E1880E@AMSPRD0302MB111.eurprd03.prod.outlook.com>	<F3E9C1826A037A4A84F4D58424D54D7B02E18827@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18842@AMSPRD0302MB111.eurprd03.prod.outlook.com>
Message-ID: <4EC52BAC.8090807@rabbitmq.com>

On 17/11/11 15:38, Nick Pateman wrote:
> I?ve set no_ack to 0 in my amq_basic_consume call and the messages are
> now appearing in the queue but as unacknowledged.

So all this sounds like the messages are being sent to your application:

no_ack = 1 -> messages are sent to your app, RabbitMQ forgets about them 
immediately.

no_ack = 0 -> messages are sent to your app, RabbitMQ treats them as 
unacknowledged until you ack.

The source code you posted doesn't show any code that actually handles 
received message frames - you do have some right?

Can you post your whole source somewhere? It's quite difficult to tell 
what is going on looking at fragments.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From benbennett at gmail.com  Thu Nov 17 15:55:42 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Thu, 17 Nov 2011 09:55:42 -0600
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <4EC4F469.70306@rabbitmq.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
	<4EC3AF7F.3040905@rabbitmq.com>
	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
	<4EC3B5D3.9040204@rabbitmq.com>
	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>
	<4EC3BDA9.30207@rabbitmq.com>
	<CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>
	<4EC4F469.70306@rabbitmq.com>
Message-ID: <CAGnU7uhdzTkfhPsy9uHQ9VO4tm3mmQU_1Wfgu5-uApdUPiyLtA@mail.gmail.com>

I have seen this issue when the machine changes ip addresses one of
the erlang processes gets hung after  a suspend and connecting to
another network with different ip address.

The process escapes me right now something along the lines of ip***,
think it is dns resolution .

Thanks,
Benjamin Bennett

On Thu, Nov 17, 2011 at 5:47 AM, Simon MacMullen <simon at rabbitmq.com> wrote:
> On 16/11/11 13:52, Sampo Savolainen wrote:
>>
>> err was empty and log contained only this:
>>
>> Stopping and halting node rabbit at blanko ...
>> ...done.
>
> ...and this was definitely after shutdown had *hung*? Because that looks
> like it had succeeded. Was the timestamp on the log plausible?
>
>> So much for that then. Any other ideas?
>
> I might try to scrounge up a laptop and stick ubuntu on it just to see if
> it's somehow connected to wifi being in use, but I'm not optimistic.
>
> If you were feeling energetic you could try patching
>
> ping -c 1 $(hostname) > /some/file
>
> into the init script just before the "$CONTROL stop ..." line, to see if
> somehow the network is in another state at this point. But again it feels
> like a long shot.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From benbennett at gmail.com  Thu Nov 17 16:06:13 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Thu, 17 Nov 2011 10:06:13 -0600
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <CAGnU7uhdzTkfhPsy9uHQ9VO4tm3mmQU_1Wfgu5-uApdUPiyLtA@mail.gmail.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
	<4EC3AF7F.3040905@rabbitmq.com>
	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
	<4EC3B5D3.9040204@rabbitmq.com>
	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>
	<4EC3BDA9.30207@rabbitmq.com>
	<CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>
	<4EC4F469.70306@rabbitmq.com>
	<CAGnU7uhdzTkfhPsy9uHQ9VO4tm3mmQU_1Wfgu5-uApdUPiyLtA@mail.gmail.com>
Message-ID: <CAGnU7ujJMgb38xbaTx+18XZrEkiMreR0pHHvTwYdr3Uani1N1w@mail.gmail.com>

It was the inet_gethost 4 process that would hang. I am trying to
reproduce but I forgot the steps usually it was after a suspend and
awake it would hose up .

On Thu, Nov 17, 2011 at 9:55 AM, Benjamin Bennett <benbennett at gmail.com> wrote:
> I have seen this issue when the machine changes ip addresses one of
> the erlang processes gets hung after ?a suspend and connecting to
> another network with different ip address.
>
> The process escapes me right now something along the lines of ip***,
> think it is dns resolution .
>
> Thanks,
> Benjamin Bennett
>
> On Thu, Nov 17, 2011 at 5:47 AM, Simon MacMullen <simon at rabbitmq.com> wrote:
>> On 16/11/11 13:52, Sampo Savolainen wrote:
>>>
>>> err was empty and log contained only this:
>>>
>>> Stopping and halting node rabbit at blanko ...
>>> ...done.
>>
>> ...and this was definitely after shutdown had *hung*? Because that looks
>> like it had succeeded. Was the timestamp on the log plausible?
>>
>>> So much for that then. Any other ideas?
>>
>> I might try to scrounge up a laptop and stick ubuntu on it just to see if
>> it's somehow connected to wifi being in use, but I'm not optimistic.
>>
>> If you were feeling energetic you could try patching
>>
>> ping -c 1 $(hostname) > /some/file
>>
>> into the init script just before the "$CONTROL stop ..." line, to see if
>> somehow the network is in another state at this point. But again it feels
>> like a long shot.
>>
>> Cheers, Simon
>>
>> --
>> Simon MacMullen
>> RabbitMQ, VMware
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>

From ask at rabbitmq.com  Thu Nov 17 16:20:18 2011
From: ask at rabbitmq.com (Ask Solem)
Date: Thu, 17 Nov 2011 16:20:18 +0000
Subject: [rabbitmq-discuss] performance with thousands of auto_delete
	queues
In-Reply-To: <4EC51D69.2030206@foldr3.com>
References: <4EC4FE43.6050502@foldr3.com>
	<F39C2631-9F27-45DC-98C6-B31049B56F9C@rabbitmq.com>
	<4EC51D69.2030206@foldr3.com>
Message-ID: <842DE705-1D79-463A-AF4B-E8862A555AAB@rabbitmq.com>


On 17 Nov 2011, at 14:42, Muharem Hrnjadovic wrote:
>> 
> We do need the results.
> 
>> You can do so by upgrading to the latest version (where results are
>> disabled by default), or setting @task(ignore_result=True) for
>> individual tasks, or CELERY_IGNORE_RESULT=True globally.
> 
>> An auto_delete queue is only deleted when it's empty,
>> so you have to collect the results.
> How does one collect the results? We do
> 
>   result = TaskSet(tasks=subtasks).apply_async()
> 
>   # Wait for all subtasks to complete.
>   while not result.ready():
>       time.sleep(0.25)
> 
>   the_results = result.join()
> 
> Is there something we need to do beyond that?
> 

This would collect the result, but maybe there are cases where it's not collected,
or you have so many tasks that using one queue per task is not feasible.

If the process to publish the task, and to collect the result is always the same,
you can use reply-to style replies (one queue per publisher, instead of
one queue per task). There's no built-in support for this in Celery, but adding
the capability to your task should be fairly easy.
Of course if there are as many publishers as there are tasks, then this doesn't help much.

The best thing you can do right now is to set an expiry
time for the results, that would probably help at least in the short term.

Also you could consider using a database, Redis or memcached to store the
results in. The downside then is that you have to use polling to retrieve
the results in the way you are doing (join).

Note also that you should never wait for the results of a subtask within a task:

   @task
   def X():
       r = TaskSet(Y.subtask((i, ))
			for i in iterable).apply_async()
       r.join() # <-- VERY BAD

This is bad because it can result in a deadlock;
Imagine that there are only 5 worker process available,
and that there are 5 X tasks currently running. In this scenario
there are no more worker processes to finish the subtasks X
is waiting for: it deadlocks and waits forever.
See http://docs.celeryproject.org/en/latest/userguide/tasks.html#avoid-launching-synchronous-subtasks

Instead you should use callbacks for single task invocations and chords
for groups of tasks that needs to be synchronized (TaskSet callbacks).
http://docs.celeryproject.org/en/latest/userguide/tasksets.html

The Celery master branch in git contains support for chords when using
the AMQP result backend too (will be part of 2.5.0).


> 


From 0x6e6562 at gmail.com  Thu Nov 17 16:33:26 2011
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Thu, 17 Nov 2011 16:33:26 +0000
Subject: [rabbitmq-discuss] CommandAssembler
In-Reply-To: <5D933E69-981D-4588-9478-72658560F29F@rabbitmq.com>
References: <CAB-G1jiBDeasSeYeEwJ+Ry_5_UKEWPHR7x9+av1q1CVYWVR_Nw@mail.gmail.com>
	<5D933E69-981D-4588-9478-72658560F29F@rabbitmq.com>
Message-ID: <74361ED0-5019-424E-8477-5D26CF6A333D@gmail.com>

Hey Steve,

Thanks for the heads up. I can understand that you want to keep the internal stuff internal and not have to maintain it for external consumers.

The reason why we were using it was for a test that uses a patched version of the tracer, so basically we had an import from there.

Having said that, I should maybe look at the new version of the tracer to see of we can just re-patch that, which may save us from monkey patching the assembler (or the code that links against it).

BTW I was wondering under what circumstances you were seeing race conditions in this section of the library. Of late, we've seen a few oddities at some loads (ca. 2000 shovel out-ins/sec) but it is difficult to reproduce and we always just assumed it was a bug in the threading of our shovel.

Cheers,

Ben

On Nov 17, 2011, at 12:05 PM, Steve Powell <steve at rabbitmq.com> wrote:

> Hi Ben,
> 
> Yes, it was a conscious decision -- it goes with the concurrency and
> thread-safety changes we introduced.  Previously AMQCommand was not thread-safe.
> This was partly due to its use of the Assembler inner class, which serially
> shared state with the AMQCommand class.  Also, other parts of the implementation
> called AMQCommand.Assembler methods.
> 
> When re-factoring AMQCommand we extracted CommandAssembler and synchronised on
> it.  This allowed us to remove the back reference to AMQCommand from the
> assembler, and encapsulate its state. If we expose the object we have problems
> with thread-safety and deadlocking again; but I guess exposing the class
> wouldn't be a problem.  However, its relationship with the AMQCommand class is
> now different, and the use of Assembler is limited entirely to the AMQCommand
> class in the new code.
> 
> We kept it package private on general principles, and to enforce no leakage into
> the public client interface.  In general I am taking the view that the less
> visible the internals the harder it is for clients to break them.
> 
> Can you explain how you were using Assembler? We would also be interested in how
> the com.rabbitmq.client.impl packages are being used in general. As a matter of
> long-term intent, the impl classes ought only to be used internally. Though I
> know they are pretty well exposed at present.
> 
> Thank you for your feedback.
> Steve Powell
> 
> On 15 Nov 2011, at 12:30, Ben Hood wrote:
>> I was wondering whether there was a conscious design choice to reduce
>> the visibility of the ported CommandAssembler to default package
>> scope?
>> 
>> We were using the old AMQCommand.Assembler which was public in the
>> com.rabbitmq.client.impl namespace.
>> 
>> Cheers,
>> 
>> Ben

From benbennett at gmail.com  Thu Nov 17 18:12:00 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Thu, 17 Nov 2011 12:12:00 -0600
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
	connection
In-Reply-To: <CAGnU7ugZ-QkC7n8n7XxqcV_AVyLDRaVTA6bo2vK+S7=Nki6yjw@mail.gmail.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>
	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>
	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>
	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>
	<CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>
	<4EC030E3.1090807@rabbitmq.com>
	<CAGnU7uj8PhXp+7JMcJ-XsDrcYNDKno-t5HnGnrwup+F41vCyHw@mail.gmail.com>
	<4EC0CCDE.3030505@rabbitmq.com>
	<CAGnU7uj3U-CHE-Bo_TcxuPxsGdRLyUcngnx-F9xrP=Q3jR-uuA@mail.gmail.com>
	<4EC15EA2.4010507@rabbitmq.com>
	<CAGnU7ugZ-QkC7n8n7XxqcV_AVyLDRaVTA6bo2vK+S7=Nki6yjw@mail.gmail.com>
Message-ID: <CAGnU7uiEduM3C3cvd=f3VeBGUEhudSDU9KDRMmUtxcHv-TzMQA@mail.gmail.com>

Had a question if no one is working on patch for the java client do
accept external patches?

I was going to either change it to the following .

1) Remove the infinite wait on a connection close.

Or

Place a BlockingQueue on the channel closes during the close call.

The sychronize on the BlockingQueue for the connection close  , of
which it cannot close the connection if a channel is currently be
closed.

The second is more code but it would keep the infinity timeout in
place will working around the deadlock issue.

It would save a lot of pain if people are using 2.7.1 and below.

On Mon, Nov 14, 2011 at 5:21 PM, Benjamin Bennett <benbennett at gmail.com> wrote:
> I am using the spring amqp lib and it is doing the connection closing when
> the spring context is closed. I do not think it has a property to inject the
> hack. Also if you know any of the spring amqp devs. Having you telling them
> to check to make sure it is doing the way you have described will have much
> more authority than me.
>
> I will probably hack the spring amqp lib for now
>
> On Nov 14, 2011 12:32 PM, "Simon MacMullen" <simon at rabbitmq.com> wrote:
>>
>> On 14/11/11 16:15, Benjamin Bennett wrote:
>>>
>>> Here is report from ?rabbitmqctrl report
>>> http://pastebin.com/MSwv82C3
>>
>> Ah, thank you. After some poking, that genuinely looks like a server bug.
>> Damn.
>>
>> In order for it to happen you need the last channel close / close_ok to
>> overlap with the connection close / close_ok. With the Java client you have
>> to invoke Channel.close() and Connection.close() from different threads to
>> get this to happen, and still be unlucky.
>>
>> You should be allowed to do this, but right now it's racy.
>>
>> > I was going to attempt to put a timeout on the connection close method
>> > but that really would be a hack.
>>
>> Indeed! Other slightly less hacky workarounds until we get this fixed:
>>
>> * Invoke Channel.close() and Connection.close() from the same thread, or
>> otherwise ensure they don't overlap.
>>
>> * Don't invoke Channel.close() if you know you're going to invoke
>> Connection.close() anyway.
>>
>> Cheers, Simon
>>
>> --
>> Simon MacMullen
>> RabbitMQ, VMware
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From adamka at dgt.com.pl  Thu Nov 17 18:19:44 2011
From: adamka at dgt.com.pl (Adam Kaminiecki)
Date: Thu, 17 Nov 2011 19:19:44 +0100
Subject: [rabbitmq-discuss] .net client Windows Mobile
Message-ID: <4EC55040.7020900@dgt.com.pl>

Hi,

Can anybody tell me is client library version working on windows mobile 
6, 6.5 or windows mobile 7??

Im asking because I cant find any information about it...
Thank you for any information or link where can I get the necessary 
information

Best regards,
Adam

-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.


From pdezwart at rubiconproject.com  Thu Nov 17 18:54:58 2011
From: pdezwart at rubiconproject.com (Pieter de Zwart)
Date: Thu, 17 Nov 2011 12:54:58 -0600
Subject: [rabbitmq-discuss] Disagreeing with the broker over argument
 type
In-Reply-To: <4EC4BEC2.6060801@rabbitmq.com>
Message-ID: <CAEA9841.29DBD%pdezwart@rubiconproject.com>

Oh. Bytes. Binary. Doh. =)

Thanks!
me

On 11/16/11 11:58 PM, "Matthias Radestock" <matthias at rabbitmq.com> wrote:

>Pieter,
>
>On 17/11/11 03:19, Pieter de Zwart wrote:
>> I am having a disagreement with the broker and I am hoping one of you
>> can act as a neutral third party. I am trying to create a queue with
>> arguments using the rabbitmq-c library, and I think im giving a string,
>> but the broker is complaining that I am passing in binary data.
>
>From http://www.rabbitmq.com/ha.html#genesis
>
><quote>The value of this entry is a long string</quote>
>
>and in your code you have:
>
>			case IS_STRING:
>				field->kind = AMQP_FIELD_KIND_BYTES;
>				char *strValue = estrndup(Z_STRVAL_P(&value), Z_STRLEN_P(&value));
>				field->value.bytes = amqp_cstring_bytes(strValue);
>				break;
>
>According to 
>http://hg.rabbitmq.com/rabbitmq-c/file/default/librabbitmq/amqp.h,
>AMQP_FIELD_KIND_BYTES corresponds to the 'x' "Byte array" AMQP type,
>whereas what the broker is expecting is the 'S' "Long string" type,
>which is AMQP_FIELD_KIND_UTF8 in the C code.
>
>Matthias.


From major at mhtx.net  Thu Nov 17 20:23:12 2011
From: major at mhtx.net (Major Hayden)
Date: Thu, 17 Nov 2011 14:23:12 -0600
Subject: [rabbitmq-discuss] RabbitMQ mirrored queues and node failure
In-Reply-To: <4EC4316C.7060808@rabbitmq.com>
References: <17A5514D-8CD9-405E-AEEF-0CB74829DF80@mhtx.net>
	<4EC4316C.7060808@rabbitmq.com>
Message-ID: <C1EA0243-5544-405F-8BFB-BECF413330A2@mhtx.net>

Thanks for the emphasis on those points.  It's all very clear now.

--
Major Hayden
major at mhtx.net

On Nov 16, 2011, at 3:55 PM, Matthias Radestock wrote:

> I think you may have misunderstood the master/slave behaviour of mirrored queues. From http://www.rabbitmq.com/ha.html#behaviour
> 
> <quote>
> All actions other than publishes go only to the master, and the master then broadcasts the effect of the actions to the slaves. Thus clients consuming from a mirrored queue are in fact consuming from the master.
> </quote>


From mgrouchy at gmail.com  Fri Nov 18 01:27:57 2011
From: mgrouchy at gmail.com (Mike Grouchy)
Date: Thu, 17 Nov 2011 17:27:57 -0800 (PST)
Subject: [rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541
Message-ID: <3eecd8a3-f3d2-4aa0-b670-e0538d4bd635@gi1g2000vbb.googlegroups.com>

Hi There,

I'm having this issue where I have a script that runs on a cronjob
that runs a rather large amount of tasks against celery(around 60K or
so tasks). It seems like after I get through a large portion of the
tasks I start getting error 541's returned from the celery workers
which seems to be bubbling up from rabbitmq.

Here is the relevant portion of the log https://gist.github.com/c92d42929e514cbb69fa

The weird thing is I am not seeing any error in the rabbitmq logs, but
as far as I know the error is coming from rabbitmq.

Can anyone point me in the direction on what I can do to prevent this
from continuing to happen?

Thanks,
Mike

From jonathan.s.oliver42 at gmail.com  Fri Nov 18 04:14:43 2011
From: jonathan.s.oliver42 at gmail.com (Jonathan Oliver)
Date: Thu, 17 Nov 2011 20:14:43 -0800 (PST)
Subject: [rabbitmq-discuss] Message durability and partition tolerence
In-Reply-To: <CACOPnvfaFsWH5EByjFBK8wOPYryzYgtTapo3X2Gw1oiz9hVxmA@mail.gmail.com>
References: <2159662.547.1320769605606.JavaMail.geo-discussion-forums@prog16>
	<CACOPnvdQvnOQh+jbvVOq-aGWsdaihwoydKj8fDN=fxSvUZLUeg@mail.gmail.com>
	<8131840.733.1321134464746.JavaMail.geo-discussion-forums@yqiu15>
	<CACOPnvfaFsWH5EByjFBK8wOPYryzYgtTapo3X2Gw1oiz9hVxmA@mail.gmail.com>
Message-ID: <2437700.367.1321589683508.JavaMail.geo-discussion-forums@yqcm23>

Alexis,

That's a really good idea.  Duplicating the message flows is probably the 
best option because we're already taking the latency hit anyway to 
duplicate.  The bottom line here is there are some messages that can't be 
lost.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111117/6f88701a/attachment.htm>

From hanxu at x6game.cn  Fri Nov 18 05:26:10 2011
From: hanxu at x6game.cn (=?gb18030?B?uqvQ8Q==?=)
Date: Fri, 18 Nov 2011 13:26:10 +0800
Subject: [rabbitmq-discuss] Some simple problems about Clustering
Message-ID: <tencent_6301311E267137DE361E5E4B@qq.com>

hello everyone, 
I come across some questions.
1.
quote:
"A node can be a RAM node or a disk node. RAM nodes keep their state only in memory (with the exception of the persistent contents of durable queues which are still stored safely on disc). Disk nodes keep state in memory and on disk."


I wonder what does the "state" mean on earth. It is just "the state of the cluster" or includes the messages?


2.if the ram of a ram node is full or reach the "alert" level, how does it process new messages? Save them on the disk or just throw away?  Will a ram node occupy disk space? if Yes, what is the category?


Thanks all
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111118/34c9c9f0/attachment.htm>

From lionel.cons at cern.ch  Fri Nov 18 06:40:34 2011
From: lionel.cons at cern.ch (Lionel Cons)
Date: Fri, 18 Nov 2011 07:40:34 +0100
Subject: [rabbitmq-discuss] STOMP 1.1 Repeated Headers
In-Reply-To: <dcf121bc-835f-4c14-a127-591817e070dc@m19g2000yqh.googlegroups.com>
	(gmallard's message of "Thu, 17 Nov 2011 06:50:26 -0800")
References: <dcf121bc-835f-4c14-a127-591817e070dc@m19g2000yqh.googlegroups.com>
Message-ID: <vfqipmiszkt.fsf@mail.cern.ch>

gmallard <allard.guy.m at gmail.com> writes:
> I establish a 1.1 level connection, and send a frame:
>
> SEND
> destination:/queue/tq
> dupkey1:latest
> dupkey1:before1
> dupkey1:before2
>
> Payload.^@
>
> Later I SUBSCRIBE, and receive that message.
>
> When the MESSAGE frame comes off the wire, I expect to see all three
> of those 'dupkey1' headers, in order.  I do not.  Only the first of
> the 'dupkey1' headers is present.

To my understanding, this is compatible with the STOMP 1.1 spec that
says that, in case of repeated header entries, "only the first header
entry SHOULD be used as the value". So RabbitMQ just considers "latest"
as the value for dupkey1. When it later sends the MESSAGE frame, only
this value is sent.

Cheers,

Lionel

From smetj.net at gmail.com  Fri Nov 18 09:43:21 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Fri, 18 Nov 2011 01:43:21 -0800 (PST)
Subject: [rabbitmq-discuss] Shovel messages get lost or stay unacknowledged.
Message-ID: <14498961.743.1321609401734.JavaMail.geo-discussion-forums@yqcm23>

Hi all,

Sorry for double posting, but I wanted to start a new thread on this topic 
as the previous one<https://groups.google.com/forum/#!topic/rabbitmq-discuss/7grvcHWvp3s/discussion>had multiple angles covering multiple cases.

I'm having issues with the Shovel plugin, which currently makes my work 
with RabbitMQ difficult.
My goal is to get the content of a queue to a queue of a remote broker.

Here's a recap:

   - All RabbitMQ instances run the latest stable version 2.7.0 (the 
   problem also occurred with 2.6.1)
   - Messages which should be shoveled to a remote broker stay 
   unacknowledged in the queue which Shovel is using as a source.
   - Restarting RabbitMQ on that moment isn't possible.  Killing is 
   required, often having to issue "epmd -kill"
   - When I restart RabbitMQ which has the Shovel plugin, all messages get 
   delivered correctly.

By default I use ack_mode with value "on_confirm".  When I change this into 
"no_ack" and I run into the above situation all messages get lost.

I must say occasional network interruptions, or occasional packetloss is a 
fact.  But not to that extent it should be a problem. Besides that, it 
doesn't explain that restarting Rabbit, makes all messages arrive correctly 
all of a sudden.

Here's my complete Shovel configuration (I replaced hostnames & queue 
names):

[{rabbitmq_shovel,
  [{shovels,
    [
     {scan_orders_amsterdam,
      [{sources,      [{broker,"amqp://localhost"}]},
       {destinations, [{broker, "amqp://server01"}]},
       {queue, <<"messages_server01">>},
       {ack_mode, on_confirm},
       {publish_properties, [{delivery_mode, 2}]},
       {publish_fields, [{exchange, <<"">>},
                         {routing_key, <<"assignments">>}]},
       {reconnect_delay, 5}
      ]},
     {scan_orders_gent,
      [{sources,      [{broker,"amqp://localhost"}]},
       {destinations, [{broker, "amqp://server02"}]},
       {queue, <<"messages_server02">>},
       {ack_mode, on_confirm},
       {publish_properties, [{delivery_mode, 2}]},
       {publish_fields, [{exchange, <<"">>},
                         {routing_key, <<"assignments">>}]},
       {reconnect_delay, 5}
      ]},
     {scan_orders_lebanon,
      [{sources,      [{broker,"amqp://localhost"}]},
       {destinations, [{broker, "amqp://server03"}]},
       {queue, <<"messages_server03">>},
       {ack_mode, on_confirm},
       {publish_properties, [{delivery_mode, 2}]},
       {publish_fields, [{exchange, <<"">>},
                         {routing_key, <<"assignments">>}]},
       {reconnect_delay, 5}
      ]},
     {scan_orders_pune,
      [{sources,      [{broker,"amqp://localhost"}]},
       {destinations, [{broker, "amqp://server04"}]},
       {queue, <<"messages_server04">>},
       {ack_mode, on_confirm},
       {publish_properties, [{delivery_mode, 2}]},
       {publish_fields, [{exchange, <<"">>},
                         {routing_key, <<"assignments">>}]},
       {reconnect_delay, 5}
      ]},
     {scan_orders_lodz,
      [{sources,      [{broker,"amqp://localhost"}]},
       {destinations, [{broker, "amqp://server05"}]},
       {queue, <<"messages_server05">>},
       {ack_mode, on_confirm},
       {publish_properties, [{delivery_mode, 2}]},
       {publish_fields, [{exchange, <<"">>},
                         {routing_key, <<"assignments">>}]},
       {reconnect_delay, 5}
      ]}
     ]
   }]
}].

The problem I would like to get solved is that my messages just arrive on 
their destination, without having to restart Rabbit frequently.
Any pointers, work-arounds, fixes, tips are welcome.

Cheers,

Jelle
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111118/376fc0dd/attachment.htm>

From alexandru at rabbitmq.com  Fri Nov 18 10:04:02 2011
From: alexandru at rabbitmq.com (Alexandru =?utf-8?B?U2N2b3LFo292?=)
Date: Fri, 18 Nov 2011 10:04:02 +0000
Subject: [rabbitmq-discuss] Some simple problems about Clustering
In-Reply-To: <tencent_6301311E267137DE361E5E4B@qq.com>
References: <tencent_6301311E267137DE361E5E4B@qq.com>
Message-ID: <20111118100402.GF4029@southbank.Home>

Hi,

> I wonder what does the "state" mean on earth. It is just "the state of the cluster" or includes the messages?

State here means queues, exchanges and bindings.

> 2.if the ram of a ram node is full or reach the "alert" level, how does it process new messages? Save them on the disk or just throw away?  Will a ram node occupy disk space? if Yes, what is the category?

How nodes deal with messages has nothing to do with whether they're ram
or disc.

Both kinds of nodes will try to keep messages in memory (optionally
writing them to disk).  If they're running out of memory, they'll begin
paging messages to disk (regardless of anything else).  If they're
*really* running low on memory, they'll prevent publishers from sending
new messages.

RabbitMQ does not throw away messages.

Does this  answer your questions?

Cheers,
Alex

On Fri, Nov 18, 2011 at 01:26:10PM +0800, ?? wrote:
> hello everyone, 
> I come across some questions.
> 1.
> quote:
> "A node can be a RAM node or a disk node. RAM nodes keep their state only in memory (with the exception of the persistent contents of durable queues which are still stored safely on disc). Disk nodes keep state in memory and on disk."
> 
> 
> I wonder what does the "state" mean on earth. It is just "the state of the cluster" or includes the messages?
> 
> 
> 2.if the ram of a ram node is full or reach the "alert" level, how does it process new messages? Save them on the disk or just throw away?  Will a ram node occupy disk space? if Yes, what is the category?
> 
> 
> Thanks all

> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


From simon at rabbitmq.com  Fri Nov 18 10:53:20 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 18 Nov 2011 10:53:20 +0000
Subject: [rabbitmq-discuss] Shovel messages get lost or stay
	unacknowledged.
In-Reply-To: <14498961.743.1321609401734.JavaMail.geo-discussion-forums@yqcm23>
References: <14498961.743.1321609401734.JavaMail.geo-discussion-forums@yqcm23>
Message-ID: <4EC63920.9060507@rabbitmq.com>

On 18/11/11 09:43, Jelle Smet wrote:
> I must say occasional network interruptions, or occasional packetloss is
> a fact. But not to that extent it should be a problem. Besides that, it
> doesn't explain that restarting Rabbit, makes all messages arrive
> correctly all of a sudden.

No, absolutely. Your configuration looks sane.

Are you saying it works for a while then stops working until you restart 
the server? If so, can you send us logs from around the time it stops 
working?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Fri Nov 18 11:26:12 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 18 Nov 2011 11:26:12 +0000
Subject: [rabbitmq-discuss] .net client Windows Mobile
In-Reply-To: <4EC55040.7020900@dgt.com.pl>
References: <4EC55040.7020900@dgt.com.pl>
Message-ID: <4EC640D4.2000208@rabbitmq.com>

On 17/11/11 18:19, Adam Kaminiecki wrote:
> Can anybody tell me is client library version working on windows mobile
> 6, 6.5 or windows mobile 7??

OK, this is based on my hazy understanding of the relationship between 
the various development environments Microsoft offers, and may be wrong. 
Please, someone chime in if you know more.

The RabbitMQ .NET client will definitely *not* work on Windows Mobile 
6.x or lower. That only supports the .NET compact framework, which is 
not particularly compatible with the full .NET runtime.

The RabbitMQ .NET client *might* work on Windows Phone 7. If I am 
reading Wikipedia correctly ;) Windows Phone 7 is based on Silverlight 
4, which in turn is based on a subset of .NET. It's not clear to me 
whether that subset is large or small, and whether it's likely to 
contain everything we use.

If you try it, let us know how you get on...

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From allard.guy.m at gmail.com  Fri Nov 18 12:10:02 2011
From: allard.guy.m at gmail.com (Guy M. Allard)
Date: Fri, 18 Nov 2011 07:10:02 -0500
Subject: [rabbitmq-discuss] STOMP 1.1 Repeated Headers
In-Reply-To: <vfqipmiszkt.fsf@mail.cern.ch>
References: <dcf121bc-835f-4c14-a127-591817e070dc@m19g2000yqh.googlegroups.com>
	<vfqipmiszkt.fsf@mail.cern.ch>
Message-ID: <4EC64B1A.7070400@gmail.com>

I agree that is a possible interpretation of the spec.

The spec could also be read as:  brokers forward as is,  clients deal 
with the 'SHOULD use only the first' part.

I am testing a 1.1 client against Rabbit and Apollo.  The behavior is 
different.

This implementation does seem to imply that a client can not ever act as 
a pure server-to-server transfer mechanism.

I will deal with either.  Thanks for the info that this is expected.


On 11/18/2011 01:40 AM, Lionel Cons wrote:
> gmallard<allard.guy.m at gmail.com>  writes:
>> I establish a 1.1 level connection, and send a frame:
>>
>> SEND
>> destination:/queue/tq
>> dupkey1:latest
>> dupkey1:before1
>> dupkey1:before2
>>
>> Payload.^@
>>
>> Later I SUBSCRIBE, and receive that message.
>>
>> When the MESSAGE frame comes off the wire, I expect to see all three
>> of those 'dupkey1' headers, in order.  I do not.  Only the first of
>> the 'dupkey1' headers is present.
> To my understanding, this is compatible with the STOMP 1.1 spec that
> says that, in case of repeated header entries, "only the first header
> entry SHOULD be used as the value". So RabbitMQ just considers "latest"
> as the value for dupkey1. When it later sends the MESSAGE frame, only
> this value is sent.
>
> Cheers,
>
> Lionel


From steve at rabbitmq.com  Fri Nov 18 12:50:21 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Fri, 18 Nov 2011 12:50:21 +0000
Subject: [rabbitmq-discuss] CommandAssembler
In-Reply-To: <74361ED0-5019-424E-8477-5D26CF6A333D@gmail.com>
References: <CAB-G1jiBDeasSeYeEwJ+Ry_5_UKEWPHR7x9+av1q1CVYWVR_Nw@mail.gmail.com>
	<5D933E69-981D-4588-9478-72658560F29F@rabbitmq.com>
	<74361ED0-5019-424E-8477-5D26CF6A333D@gmail.com>
Message-ID: <985D7FD4-FF52-40FD-9FC9-1672F198B4B6@rabbitmq.com>

Ho Ben,

By 'this library' do you mean Tracer? Or was this question from another thread?
(Pun intended).

I've not seen races directly related to Tracer or Assembler, but there have been
some anomalies in shutdown in the Java Client---normally when the channels and
their connection were explicitly closed on distinct client threads.  Of course
the lack of thread-safety of the Java client in general might have given rise
to races.

We'd be happy to look at any evidence of these oddities, if you think we could
help in diagnosis.

Steve Powell
steve at rabbitmq.com
[wrk: +44-2380-111-528] [mob: +44-7815-838-558]

On 17 Nov 2011, at 16:33, Ben Hood wrote:
> BTW I was wondering under what circumstances you were seeing race conditions
> in this section of the library. Of late, we've seen a few oddities at some
> loads (ca. 2000 shovel out-ins/sec) but it is difficult to reproduce and we
> always just assumed it was a bug in the threading of our shovel.
> Ben

From ask at rabbitmq.com  Fri Nov 18 13:09:36 2011
From: ask at rabbitmq.com (Ask Solem)
Date: Fri, 18 Nov 2011 13:09:36 +0000
Subject: [rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541
In-Reply-To: <3eecd8a3-f3d2-4aa0-b670-e0538d4bd635@gi1g2000vbb.googlegroups.com>
References: <3eecd8a3-f3d2-4aa0-b670-e0538d4bd635@gi1g2000vbb.googlegroups.com>
Message-ID: <69E1EC29-F4D7-4E05-949E-107B12E504B8@rabbitmq.com>


On 18 Nov 2011, at 01:27, Mike Grouchy wrote:

> Hi There,
> 
> I'm having this issue where I have a script that runs on a cronjob
> that runs a rather large amount of tasks against celery(around 60K or
> so tasks). It seems like after I get through a large portion of the
> tasks I start getting error 541's returned from the celery workers
> which seems to be bubbling up from rabbitmq.
> 
> Here is the relevant portion of the log https://gist.github.com/c92d42929e514cbb69fa
> 
> The weird thing is I am not seeing any error in the rabbitmq logs, but
> as far as I know the error is coming from rabbitmq.
> 
> Can anyone point me in the direction on what I can do to prevent this
> from continuing to happen?
> 
> 

Seems to me like you have lost the connection to RabbitMQ while trying
to publish task results.

Are you using BROKER_POOL_LIMIT?

From 0x6e6562 at gmail.com  Fri Nov 18 13:33:29 2011
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Fri, 18 Nov 2011 13:33:29 +0000
Subject: [rabbitmq-discuss] CommandAssembler
In-Reply-To: <985D7FD4-FF52-40FD-9FC9-1672F198B4B6@rabbitmq.com>
References: <CAB-G1jiBDeasSeYeEwJ+Ry_5_UKEWPHR7x9+av1q1CVYWVR_Nw@mail.gmail.com>
	<5D933E69-981D-4588-9478-72658560F29F@rabbitmq.com>
	<74361ED0-5019-424E-8477-5D26CF6A333D@gmail.com>
	<985D7FD4-FF52-40FD-9FC9-1672F198B4B6@rabbitmq.com>
Message-ID: <CAB-G1jij1+BsH76Zq3bDf_rU2PT5ecS7WP7ThoPSStPKC4RCng@mail.gmail.com>

Hey Steve,

On Fri, Nov 18, 2011 at 12:50 PM, Steve Powell <steve at rabbitmq.com> wrote:
> By 'this library' do you mean Tracer? Or was this question from another thread?
> (Pun intended).

No, the question is on the current executing thread :-)

To be clear, the code I am talking about is this:
https://github.com/lshift/accent/blob/master/src/test/java/net/lshift/accent/ControlledConnectionProxy.java

It's basically a patched version of the tracer out of the official
Rabbit library, which is why it has your copyright headers on it.

I ran into the issue with the visibility of the assembler when trying
to uprev this patched from ControlledConnectionProxy 2.6.1 to 2.7.0.

> I've not seen races directly related to Tracer or Assembler, but there have been
> some anomalies in shutdown in the Java Client---normally when the channels and
> their connection were explicitly closed on distinct client threads. ?Of course
> the lack of thread-safety of the Java client in general might have given rise
> to races.
>
> We'd be happy to look at any evidence of these oddities, if you think we could
> help in diagnosis.

The races I _think_ I have seen have been with the main client
library. However, without being able to reproduce them reliably, I'm
not going to troll a public mailing list with insinuations which are
most likely to be due to bugs in our own code. I was merely asking
whether there was any general background characteristics that caused
you guys to make the library thread safe, or was it just a case of
doing so being the right thing to do.

Cheers,

Ben

From nick.pateman at certivox.com  Fri Nov 18 13:35:46 2011
From: nick.pateman at certivox.com (Nick Pateman)
Date: Fri, 18 Nov 2011 13:35:46 +0000
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <4EC52BAC.8090807@rabbitmq.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLXj7CDU4FK_V5c0qG5qEkQbAeiCLqAXtUoX3A-i7QGXLQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E181AA@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<4EC3EDAC.4050807@rabbitmq.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLU7qaK-p2qPQw3-9g8B8xAcP=Jk3U4O=MDGsAC6=d3SeQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18663@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLUQdHoem848QHLgKSiUHCDqb1zPw=i20PZhqBgS5=F=Ww@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E187EF@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1880E@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18827@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18842@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<4EC52BAC.8090807@rabbitmq.com>
Message-ID: <F3E9C1826A037A4A84F4D58424D54D7B02E19D4A@AMSPRD0302MB111.eurprd03.prod.outlook.com>

Hey Simon,

I do have message receipt code but I'm not actually running it yet, it's in a completely separate application I'm developing and It's definitely not loaded yet.  The code for my message sending application, which is the only one that I am currently running at the moment is....


#include <sys/types.h>
#include <sys/stat.h>
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <errno.h>
#include <unistd.h>
#include <syslog.h>
#include <string.h>
#include <assert.h>
#include <signal.h>
#include <stdint.h>
#include <amqp.h>
#include <amqp_framing.h>
#include <assert.h>
#include <sys/time.h>
#include <unistd.h>

#define SUMMARY_EVERY_US 1000000

const amqp_bytes_t amqp_empty_bytes = { 0, NULL };
const amqp_table_t amqp_empty_table = { 0, NULL };

uint64_t now_microseconds(void)
{
  struct timeval tv;
  gettimeofday(&tv, NULL);
  return (uint64_t) tv.tv_sec * 1000000 + (uint64_t) tv.tv_usec;
}

void microsleep(int usec)
{
  usleep(usec);
}

void die_on_error(int x, char const *context) {
  if (x < 0) {
    char *errstr = amqp_error_string(-x);
    fprintf(stderr, "%s: %s\n", context, errstr);
    free(errstr);
    exit(1);
  }
}

void die_on_amqp_error(amqp_rpc_reply_t x, char const *context) {
  switch (x.reply_type) {
    case AMQP_RESPONSE_NORMAL:
      return;

    case AMQP_RESPONSE_NONE:
      fprintf(stderr, "%s: missing RPC reply type!\n", context);
      break;

    case AMQP_RESPONSE_LIBRARY_EXCEPTION:
      fprintf(stderr, "%s: %s\n", context, amqp_error_string(x.library_error));
      break;

    case AMQP_RESPONSE_SERVER_EXCEPTION:
      switch (x.reply.id) {
	case AMQP_CONNECTION_CLOSE_METHOD: {
	  amqp_connection_close_t *m = (amqp_connection_close_t *) x.reply.decoded;
	  fprintf(stderr, "%s: server connection error %d, message: %.*s\n",
		  context,
		  m->reply_code,
		  (int) m->reply_text.len, (char *) m->reply_text.bytes);
	  break;  FILE* pFilFile = fopen("cekencapsulatereq.js", "r");
	}
	case AMQP_CHANNEL_CLOSE_METHOD: {
	  amqp_channel_close_t *m = (amqp_channel_close_t *) x.reply.decoded;
	  fprintf(stderr, "%s: server channel error %d, message: %.*s\n",
		  context,
		  m->reply_code,
		  (int) m->reply_text.len, (char *) m->reply_text.bytes);
	  break;
	}
	default:
	  fprintf(stderr, "%s: unknown server error, method id 0x%08X\n", context, x.reply.id);
	  break;
      }
      break;
  }

  exit(1);
}

static void dump_row(long count, int numinrow, int *chs) {
  int i;

  printf("%08lX:", count - numinrow);

  if (numinrow > 0) {
    for (i = 0; i < numinrow; i++) {
      if (i == 8)
	printf(" :");
      printf(" %02X", chs[i]);
    }
    for (i = numinrow; i < 16; i++) {
      if (i == 8)
	printf(" :");
      printf("   ");
    }
    printf("  ");
    for (i = 0; i < numinrow; i++) {
      if (isprint(chs[i]))
	printf("%c", chs[i]);
      else
	printf(".");
    }
  }
  printf("\n");
}

static int rows_eq(int *a, int *b) {
  int i;

  for (i=0; i<16; i++)
    if (a[i] != b[i])
      return 0;

  return 1;
}

void amqp_dump(void const *buffer, size_t len) {
  unsigned char *buf = (unsigned char *) buffer;
  long count = 0;
  int numinrow = 0;
  int chs[16];
  int oldchs[16];
  int showed_dots = 0;
  int i;

  for (i = 0; i < len; i++) {
    int ch = buf[i];

    if (numinrow == 16) {
      int i;

      if (rows_eq(oldchs, chs)) {
	if (!showed_dots) {
	  showed_dots = 1;
	  printf("          .. .. .. .. .. .. .. .. : .. .. .. .. .. .. .. ..\n");
	}
      } else {
	showed_dots = 0;
	dump_row(count, numinrow, chs);
      }

      for (i=0; i<16; i++)
	oldchs[i] = chs[i];

      numinrow = 0;
    }

    count++;
    chs[numinrow++] = ch;
  }

  dump_row(count, numinrow, chs);

  if (numinrow != 0)
    printf("%08lX:\n", count);
}

/**************************************************************************
    Function: main

    Description:
        The c standard 'main' entry point function.

    Returns:
        returns integer which is passed back to the parent process
**************************************************************************/
int main(int argc, char *argv[]) {

    char const *hostname;
    int port;
    char const *exchange;
    char const *bindingkey;

    int sockfd;
    amqp_connection_state_t conn;

    amqp_bytes_t queuename = amqp_cstring_bytes("testing");

    hostname = "localhost";
    port = 5672;

    conn = amqp_new_connection();

    die_on_error(sockfd = amqp_open_socket(hostname, port),
    		"Opening socket");

    amqp_set_sockfd(conn, sockfd);
    die_on_amqp_error(amqp_login(conn, "/", 0, 131072, 0, AMQP_SASL_METHOD_PLAIN, "guest", "guest"),
  		    "Logging in");

    amqp_channel_open(conn, 1);
    die_on_amqp_error(amqp_get_rpc_reply(conn),
    		"Opening channel");

    amqp_basic_consume(conn, 1, queuename, amqp_empty_bytes, 0, 0, 0, amqp_empty_table);
    die_on_amqp_error(amqp_get_rpc_reply(conn),
    		"Consuming");

    //****************************************************
    // TODO: Insert core of your message queueing code here
    //****************************************************
    send_batch(conn, (char*)queuename.bytes, 10, 1000);

    //****************************************************
    // TODO: Free any allocated resources before exiting
    //****************************************************
    die_on_amqp_error(amqp_channel_close(conn, 1, AMQP_REPLY_SUCCESS),
    		"Closing channel");

    die_on_amqp_error(amqp_connection_close(conn, AMQP_REPLY_SUCCESS),
    		"Closing connection");

    die_on_error(amqp_destroy_connection(conn),
    		"Ending connection");

    exit(0);
}

void send_batch(amqp_connection_state_t conn,
		       char const *queue_name,
		       int rate_limit,
		       int message_count)
{
  uint64_t start_time = now_microseconds();
  int i;
  int sent = 0;
  int previous_sent = 0;
  uint64_t previous_report_time = start_time;
  uint64_t next_summary_time = start_time + SUMMARY_EVERY_US;

  for (i = 0; i < message_count; i++) {
    uint64_t now = now_microseconds();

    amqp_basic_properties_t props;
    props._flags = AMQP_BASIC_CONTENT_TYPE_FLAG | AMQP_BASIC_DELIVERY_MODE_FLAG;
    props.content_type = amqp_cstring_bytes("text/plain");
    props.delivery_mode = 2; /* persistent delivery mode */
    die_on_error(amqp_basic_publish(conn,
    		1,
    		amqp_cstring_bytes(""),
    		amqp_cstring_bytes(queue_name),
    		0,
    		0,
    		&props,
    		amqp_cstring_bytes("Hello world!")),
    		"Publishing");

    sent++;
    if (now > next_summary_time) {
      int countOverInterval = sent - previous_sent;
      double intervalRate = countOverInterval / ((now - previous_report_time) / 1000000.0);
      printf("%d ms: Sent %d - %d since last report (%d Hz)\n",
	     (int)(now - start_time) / 1000, sent, countOverInterval, (int) intervalRate);

      previous_sent = sent;
      previous_report_time = now;
      next_summary_time += SUMMARY_EVERY_US;
    }

    while (((i * 1000000.0) / (now - start_time)) > rate_limit) {
      microsleep(20  FILE* pFilFile = fopen("cekencapsulatereq.js", "r");00);
      now = now_microseconds();
    }
  }

  {
    uint64_t stop_time = now_microseconds();
    int total_delta = stop_time - start_time;

    printf("PRODUCER - Message count: %d\n", message_count);
    printf("Total time, milliseconds: %d\n", total_delta / 1000);
    printf("Overall messages-per-second: %g\n", (message_count / (total_delta / 1000000.0)));
  }
}



-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Simon MacMullen
Sent: 17 November 2011 15:44
To: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

On 17/11/11 15:38, Nick Pateman wrote:
> I've set no_ack to 0 in my amq_basic_consume call and the messages are 
> now appearing in the queue but as unacknowledged.

So all this sounds like the messages are being sent to your application:

no_ack = 1 -> messages are sent to your app, RabbitMQ forgets about them immediately.

no_ack = 0 -> messages are sent to your app, RabbitMQ treats them as unacknowledged until you ack.

The source code you posted doesn't show any code that actually handles received message frames - you do have some right?

Can you post your whole source somewhere? It's quite difficult to tell what is going on looking at fragments.

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss



From john.doe44210 at gmail.com  Fri Nov 18 13:58:33 2011
From: john.doe44210 at gmail.com (john doe)
Date: Fri, 18 Nov 2011 14:58:33 +0100
Subject: [rabbitmq-discuss] questions about RpcClient
In-Reply-To: <CALbPev=K4WWDv-W8=vggYEx7EqJCMcb+VwWiFLCR62dD800y7A@mail.gmail.com>
References: <CALbPev=K4WWDv-W8=vggYEx7EqJCMcb+VwWiFLCR62dD800y7A@mail.gmail.com>
Message-ID: <CALbPevnW53Tv7JiTunV1iQOHZU0kEkMp+J6HG0oiha2-erE5Lw@mail.gmail.com>

>
> hello,
>
> Is this class threadsafe? I guess not because channels are not threadsafe?
>
> Why is the routing key a final attribute? Why is it not a parameter of
> primitiveCall(...)?
>
> thx
>
> john
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111118/5c11539d/attachment.htm>

From john.doe44210 at gmail.com  Fri Nov 18 13:42:13 2011
From: john.doe44210 at gmail.com (john doe)
Date: Fri, 18 Nov 2011 14:42:13 +0100
Subject: [rabbitmq-discuss] questions about RpcClient
Message-ID: <CALbPev=K4WWDv-W8=vggYEx7EqJCMcb+VwWiFLCR62dD800y7A@mail.gmail.com>

hello,

Is this class threadsafe? I guess not because channels are not threadsafe?

Why is the routing key a final attribute? Why is it not a parameter of
primitiveCall(...)?

thx

john
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111118/b94076bd/attachment.htm>

From major at mhtx.net  Fri Nov 18 14:31:52 2011
From: major at mhtx.net (Major Hayden)
Date: Fri, 18 Nov 2011 08:31:52 -0600
Subject: [rabbitmq-discuss] RabbitMQ mirrored queues and node failure
In-Reply-To: <4EC4316C.7060808@rabbitmq.com>
References: <17A5514D-8CD9-405E-AEEF-0CB74829DF80@mhtx.net>
	<4EC4316C.7060808@rabbitmq.com>
Message-ID: <9DA88CB8-7F53-420F-8F40-9707F971BC1C@mhtx.net>

I'm still a bit confused on some of the operations behind the scenes with mirrored queues.  The documentation states:

  "All actions other than publishes go only to the master, 
  and the master then broadcasts the effect of the actions 
  to the slaves."

This makes it sounds like publishes go to the slaves and everything else goes to the master.  This confuses me because the documentation also states:

  "... slaves apply the operations that occur to the master 
  in exactly the same order"

The statements seem contradictory.  The first statement makes it seem like publishes go to slaves, but wouldn't publishes need to go to the master (and be replicated to the slaves)?

My goal is to place a load balancer in front of the cluster running mirrored queues and I'm unsure where to direct the traffic.

--
Major Hayden
major at mhtx.net

On Nov 16, 2011, at 3:55 PM, Matthias Radestock wrote:

> On 16/11/11 21:44, Major Hayden wrote:
>> 1) Does C come back up with the 10 messages that it had on it before
>> it failed?
>> 2) What happens to those 10 stale, old messages that node C had on it
>> before it failed (that were already picked up from nodes A and B by
>> consumers)?
> 
> From http://www.rabbitmq.com/ha.html#start-stop
> 
> <quote>
> when a slave rejoins a mirrored-queue, it throws away any durable local
> contents it already has and starts empty. It's behaviour is at this
> point the same as if it were a new node joining the cluster.
> </quote>
> 
> Btw, ...
> 
>> While repairs are being made to C's rack, consumers still talk to
>> nodes A and B to pick up and drop off messages.  Let's say the queues
>> on A and B are reduced to zero several times while C is offline and
>> then C comes back online.
> 
> I think you may have misunderstood the master/slave behaviour of mirrored queues. From http://www.rabbitmq.com/ha.html#behaviour
> 
> <quote>
> All actions other than publishes go only to the master, and the master then broadcasts the effect of the actions to the slaves. Thus clients consuming from a mirrored queue are in fact consuming from the master.
> </quote>
> 
> 
> Regards,
> 
> Matthias.


From vbernard42 at gmail.com  Fri Nov 18 14:40:55 2011
From: vbernard42 at gmail.com (Valentin BERNARD)
Date: Fri, 18 Nov 2011 06:40:55 -0800 (PST)
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <F3E9C1826A037A4A84F4D58424D54D7B02E19D4A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLU7qaK-p2qPQw3-9g8B8xAcP=Jk3U4O=MDGsAC6=d3SeQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18663@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLUQdHoem848QHLgKSiUHCDqb1zPw=i20PZhqBgS5=F=Ww@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E187EF@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1880E@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18827@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18842@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<4EC52BAC.8090807@rabbitmq.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E19D4A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
Message-ID: <1c2c573f-94ed-41d4-90cf-46ca6f1bfc78@v38g2000prh.googlegroups.com>

Hi,

You probably shouldn't call basic_consume on your message sending
application. If I understand correctly, you're consuming on the queue
you're sending messages to ? so they just come back at you, and since
you have no code to handle them they get lost.

Try removing the following lines:
   amqp_basic_consume(conn, 1, queuename, amqp_empty_bytes, 0, 0, 0,
amqp_empty_table);
   die_on_amqp_error(amqp_get_rpc_reply(conn),
                 "Consuming");

Cheers,

Valentin.


On 18 nov, 14:35, Nick Pateman <nick.pate... at certivox.com> wrote:
> Hey Simon,
>
> I do have message receipt code but I'm not actually running it yet, it's in a completely separate application I'm developing and It's definitely not loaded yet. ?The code for my message sending application, which is the only one that I am currently running at the moment is....
>
> #include <sys/types.h>
> #include <sys/stat.h>
> #include <stdio.h>
> #include <stdlib.h>
> #include <fcntl.h>
> #include <errno.h>
> #include <unistd.h>
> #include <syslog.h>
> #include <string.h>
> #include <assert.h>
> #include <signal.h>
> #include <stdint.h>
> #include <amqp.h>
> #include <amqp_framing.h>
> #include <assert.h>
> #include <sys/time.h>
> #include <unistd.h>
>
> #define SUMMARY_EVERY_US 1000000
>
> const amqp_bytes_t amqp_empty_bytes = { 0, NULL };
> const amqp_table_t amqp_empty_table = { 0, NULL };
>
> uint64_t now_microseconds(void)
> {
> ? struct timeval tv;
> ? gettimeofday(&tv, NULL);
> ? return (uint64_t) tv.tv_sec * 1000000 + (uint64_t) tv.tv_usec;
>
> }
>
> void microsleep(int usec)
> {
> ? usleep(usec);
>
> }
>
> void die_on_error(int x, char const *context) {
> ? if (x < 0) {
> ? ? char *errstr = amqp_error_string(-x);
> ? ? fprintf(stderr, "%s: %s\n", context, errstr);
> ? ? free(errstr);
> ? ? exit(1);
> ? }
>
> }
>
> void die_on_amqp_error(amqp_rpc_reply_t x, char const *context) {
> ? switch (x.reply_type) {
> ? ? case AMQP_RESPONSE_NORMAL:
> ? ? ? return;
>
> ? ? case AMQP_RESPONSE_NONE:
> ? ? ? fprintf(stderr, "%s: missing RPC reply type!\n", context);
> ? ? ? break;
>
> ? ? case AMQP_RESPONSE_LIBRARY_EXCEPTION:
> ? ? ? fprintf(stderr, "%s: %s\n", context, amqp_error_string(x.library_error));
> ? ? ? break;
>
> ? ? case AMQP_RESPONSE_SERVER_EXCEPTION:
> ? ? ? switch (x.reply.id) {
> ? ? ? ? case AMQP_CONNECTION_CLOSE_METHOD: {
> ? ? ? ? ? amqp_connection_close_t *m = (amqp_connection_close_t *) x.reply.decoded;
> ? ? ? ? ? fprintf(stderr, "%s: server connection error %d, message: %.*s\n",
> ? ? ? ? ? ? ? ? ? context,
> ? ? ? ? ? ? ? ? ? m->reply_code,
> ? ? ? ? ? ? ? ? ? (int) m->reply_text.len, (char *) m->reply_text.bytes);
> ? ? ? ? ? break; ?FILE* pFilFile = fopen("cekencapsulatereq.js", "r");
> ? ? ? ? }
> ? ? ? ? case AMQP_CHANNEL_CLOSE_METHOD: {
> ? ? ? ? ? amqp_channel_close_t *m = (amqp_channel_close_t *) x.reply.decoded;
> ? ? ? ? ? fprintf(stderr, "%s: server channel error %d, message: %.*s\n",
> ? ? ? ? ? ? ? ? ? context,
> ? ? ? ? ? ? ? ? ? m->reply_code,
> ? ? ? ? ? ? ? ? ? (int) m->reply_text.len, (char *) m->reply_text.bytes);
> ? ? ? ? ? break;
> ? ? ? ? }
> ? ? ? ? default:
> ? ? ? ? ? fprintf(stderr, "%s: unknown server error, method id 0x%08X\n", context, x.reply.id);
> ? ? ? ? ? break;
> ? ? ? }
> ? ? ? break;
> ? }
>
> ? exit(1);
>
> }
>
> static void dump_row(long count, int numinrow, int *chs) {
> ? int i;
>
> ? printf("%08lX:", count - numinrow);
>
> ? if (numinrow > 0) {
> ? ? for (i = 0; i < numinrow; i++) {
> ? ? ? if (i == 8)
> ? ? ? ? printf(" :");
> ? ? ? printf(" %02X", chs[i]);
> ? ? }
> ? ? for (i = numinrow; i < 16; i++) {
> ? ? ? if (i == 8)
> ? ? ? ? printf(" :");
> ? ? ? printf(" ? ");
> ? ? }
> ? ? printf(" ?");
> ? ? for (i = 0; i < numinrow; i++) {
> ? ? ? if (isprint(chs[i]))
> ? ? ? ? printf("%c", chs[i]);
> ? ? ? else
> ? ? ? ? printf(".");
> ? ? }
> ? }
> ? printf("\n");
>
> }
>
> static int rows_eq(int *a, int *b) {
> ? int i;
>
> ? for (i=0; i<16; i++)
> ? ? if (a[i] != b[i])
> ? ? ? return 0;
>
> ? return 1;
>
> }
>
> void amqp_dump(void const *buffer, size_t len) {
> ? unsigned char *buf = (unsigned char *) buffer;
> ? long count = 0;
> ? int numinrow = 0;
> ? int chs[16];
> ? int oldchs[16];
> ? int showed_dots = 0;
> ? int i;
>
> ? for (i = 0; i < len; i++) {
> ? ? int ch = buf[i];
>
> ? ? if (numinrow == 16) {
> ? ? ? int i;
>
> ? ? ? if (rows_eq(oldchs, chs)) {
> ? ? ? ? if (!showed_dots) {
> ? ? ? ? ? showed_dots = 1;
> ? ? ? ? ? printf(" ? ? ? ? ?.. .. .. .. .. .. .. .. : .. .. .. .. .. .. .. ..\n");
> ? ? ? ? }
> ? ? ? } else {
> ? ? ? ? showed_dots = 0;
> ? ? ? ? dump_row(count, numinrow, chs);
> ? ? ? }
>
> ? ? ? for (i=0; i<16; i++)
> ? ? ? ? oldchs[i] = chs[i];
>
> ? ? ? numinrow = 0;
> ? ? }
>
> ? ? count++;
> ? ? chs[numinrow++] = ch;
> ? }
>
> ? dump_row(count, numinrow, chs);
>
> ? if (numinrow != 0)
> ? ? printf("%08lX:\n", count);
>
> }
>
> /**************************************************************************
> ? ? Function: main
>
> ? ? Description:
> ? ? ? ? The c standard 'main' entry point function.
>
> ? ? Returns:
> ? ? ? ? returns integer which is passed back to the parent process
> **************************************************************************/
> int main(int argc, char *argv[]) {
>
> ? ? char const *hostname;
> ? ? int port;
> ? ? char const *exchange;
> ? ? char const *bindingkey;
>
> ? ? int sockfd;
> ? ? amqp_connection_state_t conn;
>
> ? ? amqp_bytes_t queuename = amqp_cstring_bytes("testing");
>
> ? ? hostname = "localhost";
> ? ? port = 5672;
>
> ? ? conn = amqp_new_connection();
>
> ? ? die_on_error(sockfd = amqp_open_socket(hostname, port),
> ? ? ? ? ? ? ? ? "Opening socket");
>
> ? ? amqp_set_sockfd(conn, sockfd);
> ? ? die_on_amqp_error(amqp_login(conn, "/", 0, 131072, 0, AMQP_SASL_METHOD_PLAIN, "guest", "guest"),
> ? ? ? ? ? ? ? ? ? ? "Logging in");
>
> ? ? amqp_channel_open(conn, 1);
> ? ? die_on_amqp_error(amqp_get_rpc_reply(conn),
> ? ? ? ? ? ? ? ? "Opening channel");
>
> ? ? amqp_basic_consume(conn, 1, queuename, amqp_empty_bytes, 0, 0, 0, amqp_empty_table);
> ? ? die_on_amqp_error(amqp_get_rpc_reply(conn),
> ? ? ? ? ? ? ? ? "Consuming");
>
> ? ? //****************************************************
> ? ? // TODO: Insert core of your message queueing code here
> ? ? //****************************************************
> ? ? send_batch(conn, (char*)queuename.bytes, 10, 1000);
>
> ? ? //****************************************************
> ? ? // TODO: Free any allocated resources before exiting
> ? ? //****************************************************
> ? ? die_on_amqp_error(amqp_channel_close(conn, 1, AMQP_REPLY_SUCCESS),
> ? ? ? ? ? ? ? ? "Closing channel");
>
> ? ? die_on_amqp_error(amqp_connection_close(conn, AMQP_REPLY_SUCCESS),
> ? ? ? ? ? ? ? ? "Closing connection");
>
> ? ? die_on_error(amqp_destroy_connection(conn),
> ? ? ? ? ? ? ? ? "Ending connection");
>
> ? ? exit(0);
>
> }
>
> void send_batch(amqp_connection_state_t conn,
> ? ? ? ? ? ? ? ? ? ? ? ?char const *queue_name,
> ? ? ? ? ? ? ? ? ? ? ? ?int rate_limit,
> ? ? ? ? ? ? ? ? ? ? ? ?int message_count)
> {
> ? uint64_t start_time = now_microseconds();
> ? int i;
> ? int sent = 0;
> ? int previous_sent = 0;
> ? uint64_t previous_report_time = start_time;
> ? uint64_t next_summary_time = start_time + SUMMARY_EVERY_US;
>
> ? for (i = 0; i < message_count; i++) {
> ? ? uint64_t now = now_microseconds();
>
> ? ? amqp_basic_properties_t props;
> ? ? props._flags = AMQP_BASIC_CONTENT_TYPE_FLAG | AMQP_BASIC_DELIVERY_MODE_FLAG;
> ? ? props.content_type = amqp_cstring_bytes("text/plain");
> ? ? props.delivery_mode = 2; /* persistent delivery mode */
> ? ? die_on_error(amqp_basic_publish(conn,
> ? ? ? ? ? ? ? ? 1,
> ? ? ? ? ? ? ? ? amqp_cstring_bytes(""),
> ? ? ? ? ? ? ? ? amqp_cstring_bytes(queue_name),
> ? ? ? ? ? ? ? ? 0,
> ? ? ? ? ? ? ? ? 0,
> ? ? ? ? ? ? ? ? &props,
> ? ? ? ? ? ? ? ? amqp_cstring_bytes("Hello world!")),
> ? ? ? ? ? ? ? ? "Publishing");
>
> ? ? sent++;
> ? ? if (now > next_summary_time) {
> ? ? ? int countOverInterval = sent - previous_sent;
> ? ? ? double intervalRate = countOverInterval / ((now - previous_report_time) / 1000000.0);
> ? ? ? printf("%d ms: Sent %d - %d since last report (%d Hz)\n",
> ? ? ? ? ? ? ?(int)(now - start_time) / 1000, sent, countOverInterval, (int) intervalRate);
>
> ? ? ? previous_sent = sent;
> ? ? ? previous_report_time = now;
> ? ? ? next_summary_time += SUMMARY_EVERY_US;
> ? ? }
>
> ? ? while (((i * 1000000.0) / (now - start_time)) > rate_limit) {
> ? ? ? microsleep(20 ?FILE* pFilFile = fopen("cekencapsulatereq.js", "r");00);
> ? ? ? now = now_microseconds();
> ? ? }
> ? }
>
> ? {
> ? ? uint64_t stop_time = now_microseconds();
> ? ? int total_delta = stop_time - start_time;
>
> ? ? printf("PRODUCER - Message count: %d\n", message_count);
> ? ? printf("Total time, milliseconds: %d\n", total_delta / 1000);
> ? ? printf("Overall messages-per-second: %g\n", (message_count / (total_delta / 1000000.0)));
> ? }
>
>
>
> }
> -----Original Message-----
> From: rabbitmq-discuss-boun... at lists.rabbitmq.com [mailto:rabbitmq-discuss-boun... at lists.rabbitmq.com] On Behalf Of Simon MacMullen
> Sent: 17 November 2011 15:44
> To: rabbitmq-disc... at lists.rabbitmq.com
> Subject: Re: [rabbitmq-discuss] Messages disappearing
>
> On 17/11/11 15:38, Nick Pateman wrote:
> > I've set no_ack to 0 in my amq_basic_consume call and the messages are
> > now appearing in the queue but as unacknowledged.
>
> So all this sounds like the messages are being sent to your application:
>
> no_ack = 1 -> messages are sent to your app, RabbitMQ forgets about them immediately.
>
> no_ack = 0 -> messages are sent to your app, RabbitMQ treats them as unacknowledged until you ack.
>
> The source code you posted doesn't show any code that actually handles received message frames - you do have some right?
>
> Can you post your whole source somewhere? It's quite difficult to tell what is going on looking at fragments.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From nick.pateman at certivox.com  Fri Nov 18 15:13:55 2011
From: nick.pateman at certivox.com (Nick Pateman)
Date: Fri, 18 Nov 2011 15:13:55 +0000
Subject: [rabbitmq-discuss] Messages disappearing
In-Reply-To: <1c2c573f-94ed-41d4-90cf-46ca6f1bfc78@v38g2000prh.googlegroups.com>
References: <F3E9C1826A037A4A84F4D58424D54D7B02E18143@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1823A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLU7qaK-p2qPQw3-9g8B8xAcP=Jk3U4O=MDGsAC6=d3SeQ@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18663@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<CAMcAHLUQdHoem848QHLgKSiUHCDqb1zPw=i20PZhqBgS5=F=Ww@mail.gmail.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E187EF@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E1880E@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18827@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E18842@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<4EC52BAC.8090807@rabbitmq.com>
	<F3E9C1826A037A4A84F4D58424D54D7B02E19D4A@AMSPRD0302MB111.eurprd03.prod.outlook.com>
	<1c2c573f-94ed-41d4-90cf-46ca6f1bfc78@v38g2000prh.googlegroups.com>
Message-ID: <F3E9C1826A037A4A84F4D58424D54D7B02E19DA6@AMSPRD0302MB111.eurprd03.prod.outlook.com>

Awesome! You're a star, it's working great now thanks a million for your time.

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Valentin BERNARD
Sent: 18 November 2011 14:41
To: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Messages disappearing

Hi,

You probably shouldn't call basic_consume on your message sending application. If I understand correctly, you're consuming on the queue you're sending messages to - so they just come back at you, and since you have no code to handle them they get lost.

Try removing the following lines:
   amqp_basic_consume(conn, 1, queuename, amqp_empty_bytes, 0, 0, 0, amqp_empty_table);
   die_on_amqp_error(amqp_get_rpc_reply(conn),
                 "Consuming");

Cheers,

Valentin.


On 18 nov, 14:35, Nick Pateman <nick.pate... at certivox.com> wrote:
> Hey Simon,
>
> I do have message receipt code but I'm not actually running it yet, it's in a completely separate application I'm developing and It's definitely not loaded yet. ?The code for my message sending application, which is the only one that I am currently running at the moment is....
>
> #include <sys/types.h>
> #include <sys/stat.h>
> #include <stdio.h>
> #include <stdlib.h>
> #include <fcntl.h>
> #include <errno.h>
> #include <unistd.h>
> #include <syslog.h>
> #include <string.h>
> #include <assert.h>
> #include <signal.h>
> #include <stdint.h>
> #include <amqp.h>
> #include <amqp_framing.h>
> #include <assert.h>
> #include <sys/time.h>
> #include <unistd.h>
>
> #define SUMMARY_EVERY_US 1000000
>
> const amqp_bytes_t amqp_empty_bytes = { 0, NULL }; const amqp_table_t 
> amqp_empty_table = { 0, NULL };
>
> uint64_t now_microseconds(void)
> {
> ? struct timeval tv;
> ? gettimeofday(&tv, NULL);
> ? return (uint64_t) tv.tv_sec * 1000000 + (uint64_t) tv.tv_usec;
>
> }
>
> void microsleep(int usec)
> {
> ? usleep(usec);
>
> }
>
> void die_on_error(int x, char const *context) {
> ? if (x < 0) {
> ? ? char *errstr = amqp_error_string(-x);
> ? ? fprintf(stderr, "%s: %s\n", context, errstr);
> ? ? free(errstr);
> ? ? exit(1);
> ? }
>
> }
>
> void die_on_amqp_error(amqp_rpc_reply_t x, char const *context) {
> ? switch (x.reply_type) {
> ? ? case AMQP_RESPONSE_NORMAL:
> ? ? ? return;
>
> ? ? case AMQP_RESPONSE_NONE:
> ? ? ? fprintf(stderr, "%s: missing RPC reply type!\n", context);
> ? ? ? break;
>
> ? ? case AMQP_RESPONSE_LIBRARY_EXCEPTION:
> ? ? ? fprintf(stderr, "%s: %s\n", context, 
> amqp_error_string(x.library_error));
> ? ? ? break;
>
> ? ? case AMQP_RESPONSE_SERVER_EXCEPTION:
> ? ? ? switch (x.reply.id) {
> ? ? ? ? case AMQP_CONNECTION_CLOSE_METHOD: {
> ? ? ? ? ? amqp_connection_close_t *m = (amqp_connection_close_t *) 
> x.reply.decoded;
> ? ? ? ? ? fprintf(stderr, "%s: server connection error %d, message: 
> %.*s\n",
> ? ? ? ? ? ? ? ? ? context,
> ? ? ? ? ? ? ? ? ? m->reply_code,
> ? ? ? ? ? ? ? ? ? (int) m->reply_text.len, (char *) 
> m->reply_text.bytes);
> ? ? ? ? ? break; ?FILE* pFilFile = fopen("cekencapsulatereq.js", "r");
> ? ? ? ? }
> ? ? ? ? case AMQP_CHANNEL_CLOSE_METHOD: {
> ? ? ? ? ? amqp_channel_close_t *m = (amqp_channel_close_t *) 
> x.reply.decoded;
> ? ? ? ? ? fprintf(stderr, "%s: server channel error %d, message: 
> %.*s\n",
> ? ? ? ? ? ? ? ? ? context,
> ? ? ? ? ? ? ? ? ? m->reply_code,
> ? ? ? ? ? ? ? ? ? (int) m->reply_text.len, (char *) 
> m->reply_text.bytes);
> ? ? ? ? ? break;
> ? ? ? ? }
> ? ? ? ? default:
> ? ? ? ? ? fprintf(stderr, "%s: unknown server error, method id 
> 0x%08X\n", context, x.reply.id);
> ? ? ? ? ? break;
> ? ? ? }
> ? ? ? break;
> ? }
>
> ? exit(1);
>
> }
>
> static void dump_row(long count, int numinrow, int *chs) {
> ? int i;
>
> ? printf("%08lX:", count - numinrow);
>
> ? if (numinrow > 0) {
> ? ? for (i = 0; i < numinrow; i++) {
> ? ? ? if (i == 8)
> ? ? ? ? printf(" :");
> ? ? ? printf(" %02X", chs[i]);
> ? ? }
> ? ? for (i = numinrow; i < 16; i++) {
> ? ? ? if (i == 8)
> ? ? ? ? printf(" :");
> ? ? ? printf(" ? ");
> ? ? }
> ? ? printf(" ?");
> ? ? for (i = 0; i < numinrow; i++) {
> ? ? ? if (isprint(chs[i]))
> ? ? ? ? printf("%c", chs[i]);
> ? ? ? else
> ? ? ? ? printf(".");
> ? ? }
> ? }
> ? printf("\n");
>
> }
>
> static int rows_eq(int *a, int *b) {
> ? int i;
>
> ? for (i=0; i<16; i++)
> ? ? if (a[i] != b[i])
> ? ? ? return 0;
>
> ? return 1;
>
> }
>
> void amqp_dump(void const *buffer, size_t len) {
> ? unsigned char *buf = (unsigned char *) buffer;
> ? long count = 0;
> ? int numinrow = 0;
> ? int chs[16];
> ? int oldchs[16];
> ? int showed_dots = 0;
> ? int i;
>
> ? for (i = 0; i < len; i++) {
> ? ? int ch = buf[i];
>
> ? ? if (numinrow == 16) {
> ? ? ? int i;
>
> ? ? ? if (rows_eq(oldchs, chs)) {
> ? ? ? ? if (!showed_dots) {
> ? ? ? ? ? showed_dots = 1;
> ? ? ? ? ? printf(" ? ? ? ? ?.. .. .. .. .. .. .. .. : .. .. .. .. .. 
> .. .. ..\n");
> ? ? ? ? }
> ? ? ? } else {
> ? ? ? ? showed_dots = 0;
> ? ? ? ? dump_row(count, numinrow, chs);
> ? ? ? }
>
> ? ? ? for (i=0; i<16; i++)
> ? ? ? ? oldchs[i] = chs[i];
>
> ? ? ? numinrow = 0;
> ? ? }
>
> ? ? count++;
> ? ? chs[numinrow++] = ch;
> ? }
>
> ? dump_row(count, numinrow, chs);
>
> ? if (numinrow != 0)
> ? ? printf("%08lX:\n", count);
>
> }
>
> /*********************************************************************
> *****
> ? ? Function: main
>
> ? ? Description:
> ? ? ? ? The c standard 'main' entry point function.
>
> ? ? Returns:
> ? ? ? ? returns integer which is passed back to the parent process 
> **********************************************************************
> ****/
> int main(int argc, char *argv[]) {
>
> ? ? char const *hostname;
> ? ? int port;
> ? ? char const *exchange;
> ? ? char const *bindingkey;
>
> ? ? int sockfd;
> ? ? amqp_connection_state_t conn;
>
> ? ? amqp_bytes_t queuename = amqp_cstring_bytes("testing");
>
> ? ? hostname = "localhost";
> ? ? port = 5672;
>
> ? ? conn = amqp_new_connection();
>
> ? ? die_on_error(sockfd = amqp_open_socket(hostname, port),
> ? ? ? ? ? ? ? ? "Opening socket");
>
> ? ? amqp_set_sockfd(conn, sockfd);
> ? ? die_on_amqp_error(amqp_login(conn, "/", 0, 131072, 0, 
> AMQP_SASL_METHOD_PLAIN, "guest", "guest"),
> ? ? ? ? ? ? ? ? ? ? "Logging in");
>
> ? ? amqp_channel_open(conn, 1);
> ? ? die_on_amqp_error(amqp_get_rpc_reply(conn),
> ? ? ? ? ? ? ? ? "Opening channel");
>
> ? ? amqp_basic_consume(conn, 1, queuename, amqp_empty_bytes, 0, 0, 0, 
> amqp_empty_table);
> ? ? die_on_amqp_error(amqp_get_rpc_reply(conn),
> ? ? ? ? ? ? ? ? "Consuming");
>
> ? ? //****************************************************
> ? ? // TODO: Insert core of your message queueing code here
> ? ? //****************************************************
> ? ? send_batch(conn, (char*)queuename.bytes, 10, 1000);
>
> ? ? //****************************************************
> ? ? // TODO: Free any allocated resources before exiting
> ? ? //****************************************************
> ? ? die_on_amqp_error(amqp_channel_close(conn, 1, AMQP_REPLY_SUCCESS),
> ? ? ? ? ? ? ? ? "Closing channel");
>
> ? ? die_on_amqp_error(amqp_connection_close(conn, AMQP_REPLY_SUCCESS),
> ? ? ? ? ? ? ? ? "Closing connection");
>
> ? ? die_on_error(amqp_destroy_connection(conn),
> ? ? ? ? ? ? ? ? "Ending connection");
>
> ? ? exit(0);
>
> }
>
> void send_batch(amqp_connection_state_t conn,
> ? ? ? ? ? ? ? ? ? ? ? ?char const *queue_name,
> ? ? ? ? ? ? ? ? ? ? ? ?int rate_limit,
> ? ? ? ? ? ? ? ? ? ? ? ?int message_count) {
> ? uint64_t start_time = now_microseconds();
> ? int i;
> ? int sent = 0;
> ? int previous_sent = 0;
> ? uint64_t previous_report_time = start_time;
> ? uint64_t next_summary_time = start_time + SUMMARY_EVERY_US;
>
> ? for (i = 0; i < message_count; i++) {
> ? ? uint64_t now = now_microseconds();
>
> ? ? amqp_basic_properties_t props;
> ? ? props._flags = AMQP_BASIC_CONTENT_TYPE_FLAG | 
> AMQP_BASIC_DELIVERY_MODE_FLAG;
> ? ? props.content_type = amqp_cstring_bytes("text/plain");
> ? ? props.delivery_mode = 2; /* persistent delivery mode */
> ? ? die_on_error(amqp_basic_publish(conn,
> ? ? ? ? ? ? ? ? 1,
> ? ? ? ? ? ? ? ? amqp_cstring_bytes(""),
> ? ? ? ? ? ? ? ? amqp_cstring_bytes(queue_name),
> ? ? ? ? ? ? ? ? 0,
> ? ? ? ? ? ? ? ? 0,
> ? ? ? ? ? ? ? ? &props,
> ? ? ? ? ? ? ? ? amqp_cstring_bytes("Hello world!")),
> ? ? ? ? ? ? ? ? "Publishing");
>
> ? ? sent++;
> ? ? if (now > next_summary_time) {
> ? ? ? int countOverInterval = sent - previous_sent;
> ? ? ? double intervalRate = countOverInterval / ((now - 
> previous_report_time) / 1000000.0);
> ? ? ? printf("%d ms: Sent %d - %d since last report (%d Hz)\n",
> ? ? ? ? ? ? ?(int)(now - start_time) / 1000, sent, countOverInterval, 
> (int) intervalRate);
>
> ? ? ? previous_sent = sent;
> ? ? ? previous_report_time = now;
> ? ? ? next_summary_time += SUMMARY_EVERY_US;
> ? ? }
>
> ? ? while (((i * 1000000.0) / (now - start_time)) > rate_limit) {
> ? ? ? microsleep(20 ?FILE* pFilFile = fopen("cekencapsulatereq.js", 
> "r");00);
> ? ? ? now = now_microseconds();
> ? ? }
> ? }
>
> ? {
> ? ? uint64_t stop_time = now_microseconds();
> ? ? int total_delta = stop_time - start_time;
>
> ? ? printf("PRODUCER - Message count: %d\n", message_count);
> ? ? printf("Total time, milliseconds: %d\n", total_delta / 1000);
> ? ? printf("Overall messages-per-second: %g\n", (message_count / 
> (total_delta / 1000000.0)));
> ? }
>
>
>
> }
> -----Original Message-----
> From: rabbitmq-discuss-boun... at lists.rabbitmq.com 
> [mailto:rabbitmq-discuss-boun... at lists.rabbitmq.com] On Behalf Of 
> Simon MacMullen
> Sent: 17 November 2011 15:44
> To: rabbitmq-disc... at lists.rabbitmq.com
> Subject: Re: [rabbitmq-discuss] Messages disappearing
>
> On 17/11/11 15:38, Nick Pateman wrote:
> > I've set no_ack to 0 in my amq_basic_consume call and the messages 
> > are now appearing in the queue but as unacknowledged.
>
> So all this sounds like the messages are being sent to your application:
>
> no_ack = 1 -> messages are sent to your app, RabbitMQ forgets about them immediately.
>
> no_ack = 0 -> messages are sent to your app, RabbitMQ treats them as unacknowledged until you ack.
>
> The source code you posted doesn't show any code that actually handles received message frames - you do have some right?
>
> Can you post your whole source somewhere? It's quite difficult to tell what is going on looking at fragments.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/
> mailman/listinfo/rabbitmq-discuss
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/
> mailman/listinfo/rabbitmq-discuss
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss



From deckerego at gmail.com  Fri Nov 18 17:25:49 2011
From: deckerego at gmail.com (DeckerEgo)
Date: Fri, 18 Nov 2011 09:25:49 -0800 (PST)
Subject: [rabbitmq-discuss] Camel RabbitMQ Component Available
Message-ID: <bea63f83-86f7-42f4-9dd8-57c18059841f@13g2000prw.googlegroups.com>

For those who might be interested - I've recently released a new AMQP
component for Apache Camel, now available at https://github.com/deckerego/camel-spring-amqp
.

The current AMQP component within Camel largely just builds a
connection factory for Qpid, Apache's AMQP implementation, then sends
the rest on to the JMS component. While that works as a fantastic
solution for those who might be making a migration away from JMS,
those accustomed to header exchanges or other AMQP-specific features
may want to use something else. This camel-spring-amqp component was
created to expose RabbitMQ features natively within a Camel endpoint.

The component leverages the Spring team's AMQP framework to help with
better consumer abstraction and dependency injection. Since Spring's
AMQP framework performs JSON marshalling with Jackson, I've also
included an XStream marshaller with this component so that messages
can be formatted using the XStream JSON libraries prior to being sent
over the wire.

I'm open to any feedback, testing or pull requests for camel-spring-
amqp. If you find the URI format to be a bit odd let me know - I'm
open to new ideas on how to better format the endpoint string.

From baldgoth at gmail.com  Fri Nov 18 18:12:15 2011
From: baldgoth at gmail.com (TrueWill)
Date: Fri, 18 Nov 2011 10:12:15 -0800 (PST)
Subject: [rabbitmq-discuss] Invalid JSON returned by RabbitMQ Management
	HTTP API
Message-ID: <22964390.1057.1321639935434.JavaMail.geo-discussion-forums@yqhz20>

Any particular reason the HTTP API returns raw JSON arrays rather than a 
JSON object with an array field?

Example:
/api/vhosts
[{"name":"/","tracing":false},{"name":"MyHost","tracing":false}]

At least one library (Json.NET) fails to parse that. I'm not sure if it's 
in the standard.

A workaround is to create a JSON object on the client and assign this to a 
field.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111118/d51ad570/attachment.htm>

From baldgoth at gmail.com  Fri Nov 18 18:15:45 2011
From: baldgoth at gmail.com (TrueWill)
Date: Fri, 18 Nov 2011 10:15:45 -0800 (PST)
Subject: [rabbitmq-discuss] Invalid JSON returned by RabbitMQ Management
	HTTP API
In-Reply-To: <22964390.1057.1321639935434.JavaMail.geo-discussion-forums@yqhz20>
References: <22964390.1057.1321639935434.JavaMail.geo-discussion-forums@yqhz20>
Message-ID: <13513809.1925.1321640145691.JavaMail.geo-discussion-forums@yqoo7>

Correction - JArray.Parse in Json.NET will parse it. I just have to use 
that rather than JObject.Parse when dealing with collections.

On Friday, November 18, 2011 12:12:15 PM UTC-6, TrueWill wrote:
>
> Any particular reason the HTTP API returns raw JSON arrays rather than a 
> JSON object with an array field?
>
> Example:
> /api/vhosts
> [{"name":"/","tracing":false},{"name":"MyHost","tracing":false}]
>
> At least one library (Json.NET) fails to parse that. I'm not sure if it's 
> in the standard.
>
> A workaround is to create a JSON object on the client and assign this to a 
> field.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111118/73ba5512/attachment.htm>

From ask at celeryproject.org  Fri Nov 18 18:26:43 2011
From: ask at celeryproject.org (Ask Solem)
Date: Fri, 18 Nov 2011 18:26:43 +0000
Subject: [rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541
In-Reply-To: <EF4007AD-47A0-4992-9CFF-0C549E71D3F0@gmail.com>
References: <3eecd8a3-f3d2-4aa0-b670-e0538d4bd635@gi1g2000vbb.googlegroups.com>
	<69E1EC29-F4D7-4E05-949E-107B12E504B8@rabbitmq.com>
	<EF4007AD-47A0-4992-9CFF-0C549E71D3F0@gmail.com>
Message-ID: <D7646C55-B2DA-46D2-B0FD-7B2180E425A8@celeryproject.org>

Maybe you should try enabling the pool.  Either way it should retry publishing the result, so maybe this is yet another corner case in amqplib.  It would be great if you could try to create a small test case that is able to reproduce the issue.

-- 
Ask Solem

On Nov 18, 2011, at 1:15 PM, Mike Grouchy <mgrouchy at gmail.com> wrote:

> 
> 
> On 2011-11-18, at 8:09 AM, Ask Solem <ask at rabbitmq.com> wrote:
> 
>> 
>> On 18 Nov 2011, at 01:27, Mike Grouchy wrote:
>> 
>>> Hi There,
>>> 
>>> I'm having this issue where I have a script that runs on a cronjob
>>> that runs a rather large amount of tasks against celery(around 60K or
>>> so tasks). It seems like after I get through a large portion of the
>>> tasks I start getting error 541's returned from the celery workers
>>> which seems to be bubbling up from rabbitmq.
>>> 
>>> Here is the relevant portion of the log https://gist.github.com/c92d42929e514cbb69fa
>>> 
>>> The weird thing is I am not seeing any error in the rabbitmq logs, but
>>> as far as I know the error is coming from rabbitmq.
>>> 
>>> Can anyone point me in the direction on what I can do to prevent this
>>> from continuing to happen?
>>> 
>>> 
>> 
>> Seems to me like you have lost the connection to RabbitMQ while trying
>> to publish task results.
>> 
>> Are you using BROKER_POOL_LIMIT?
> 
> No. Currently just the defaults.


From justin.adam.miller at gmail.com  Fri Nov 18 18:29:15 2011
From: justin.adam.miller at gmail.com (justin.adam.miller at gmail.com)
Date: Fri, 18 Nov 2011 10:29:15 -0800 (PST)
Subject: [rabbitmq-discuss] Backwards compatibility?
Message-ID: <4927748.987.1321640955642.JavaMail.geo-discussion-forums@yqff21>

Is version 2.5.1 of the java client compatible with all newer versions of 
the server, >= 2.5.1 ? Or at a bare minimum version 2.6.0 of the server?

Justin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111118/aebc1f3a/attachment.htm>

From mgrouchy at gmail.com  Fri Nov 18 18:53:25 2011
From: mgrouchy at gmail.com (Mike Grouchy)
Date: Fri, 18 Nov 2011 13:53:25 -0500
Subject: [rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541
In-Reply-To: <D7646C55-B2DA-46D2-B0FD-7B2180E425A8@celeryproject.org>
References: <3eecd8a3-f3d2-4aa0-b670-e0538d4bd635@gi1g2000vbb.googlegroups.com>
	<69E1EC29-F4D7-4E05-949E-107B12E504B8@rabbitmq.com>
	<EF4007AD-47A0-4992-9CFF-0C549E71D3F0@gmail.com>
	<D7646C55-B2DA-46D2-B0FD-7B2180E425A8@celeryproject.org>
Message-ID: <CADuqQqbGhvwbXxu9rgmkn+i-n7TRwGB3wH0zTDUbJNK3J1aXew@mail.gmail.com>

On Fri, Nov 18, 2011 at 1:26 PM, Ask Solem <ask at celeryproject.org> wrote:
> Maybe you should try enabling the pool. ?Either way it should retry publishing the result, so maybe this is yet another corner case in amqplib. ?It would be great if you could try to create a small test case that is able to reproduce the issue.
>
> --
> Ask Solem
>


Okay,

So I enabled the pool set it to 12 (Seemed like a reasonable number
for the BROKER_POOL_LIMIT). So I ran the task the first time and it
seemed like it ran okay. I just got back from lunch and tried to run
it again to see if maybe enabling the pool fixed the problem, but now
we seem to have some more datapoints here.

I have attached the celery log output (from --INFO ) and the rabbitmq.log

https://gist.github.com/81e6f762410e6e4813aa

So it seems like we are running into a too many processes error, but I
thought the upper bound was around 30K, which I can't imagine I would
be using (even though, there are around 60k tasks).

I can't seem to replicate it consistently, which is making it hard to
narrow down to a specific test case.

Any insight here?

Thanks,
Mike





> On Nov 18, 2011, at 1:15 PM, Mike Grouchy <mgrouchy at gmail.com> wrote:
>
>>
>>
>> On 2011-11-18, at 8:09 AM, Ask Solem <ask at rabbitmq.com> wrote:
>>
>>>
>>> On 18 Nov 2011, at 01:27, Mike Grouchy wrote:
>>>
>>>> Hi There,
>>>>
>>>> I'm having this issue where I have a script that runs on a cronjob
>>>> that runs a rather large amount of tasks against celery(around 60K or
>>>> so tasks). It seems like after I get through a large portion of the
>>>> tasks I start getting error 541's returned from the celery workers
>>>> which seems to be bubbling up from rabbitmq.
>>>>
>>>> Here is the relevant portion of the log https://gist.github.com/c92d42929e514cbb69fa
>>>>
>>>> The weird thing is I am not seeing any error in the rabbitmq logs, but
>>>> as far as I know the error is coming from rabbitmq.
>>>>
>>>> Can anyone point me in the direction on what I can do to prevent this
>>>> from continuing to happen?
>>>>
>>>>
>>>
>>> Seems to me like you have lost the connection to RabbitMQ while trying
>>> to publish task results.
>>>
>>> Are you using BROKER_POOL_LIMIT?
>>
>> No. Currently just the defaults.
>
>

From julio at hawaii.edu  Fri Nov 18 19:16:01 2011
From: julio at hawaii.edu (Julio Polo)
Date: Fri, 18 Nov 2011 09:16:01 -1000
Subject: [rabbitmq-discuss] Millions of possible values in a message routing
	key
Message-ID: <CA+0gB9nsuQGFGchpmd9Fh96KY-NP0LavAfaa0-OixaVeLNw9MA@mail.gmail.com>

I'm wondering if it's feasible to set up a topic exchange and have the
message routing key's first word be the person's identifier:

<personNumericID>.<action>.<attribute>

This way, applications may subscribe only to messages for the few
people they are interested in.

Are there any performance issues if a word in a message routing key
can have a very large range of values?  Let's say 70,000 possible
values. What if it grows to a million and beyond? Does it matter?

I doubt we'd implement the above, but it's nice to know if it ever
comes up.   We're most likely to implement a message routing key like
<deptCode>.<action>.<attribute> where <deptCode> can have about 1000
possible values.  I assume that should be no problem.

Julio Polo
University of Hawaii

From baldgoth at gmail.com  Fri Nov 18 19:20:42 2011
From: baldgoth at gmail.com (TrueWill)
Date: Fri, 18 Nov 2011 11:20:42 -0800 (PST)
Subject: [rabbitmq-discuss] Invalid JSON returned by RabbitMQ Management
	HTTP API
In-Reply-To: <13513809.1925.1321640145691.JavaMail.geo-discussion-forums@yqoo7>
References: <22964390.1057.1321639935434.JavaMail.geo-discussion-forums@yqhz20>
	<13513809.1925.1321640145691.JavaMail.geo-discussion-forums@yqoo7>
Message-ID: <21787595.1172.1321644042724.JavaMail.geo-discussion-forums@yqhz20>

I guess I should have looked at the RFC. http://www.ietf.org/rfc/rfc4627

  A JSON text is a serialized object or array.
>
>       JSON-text = object / array
>

So never mind. Sorry to take up people's time.

On Friday, November 18, 2011 12:15:45 PM UTC-6, TrueWill wrote:
>
> Correction - JArray.Parse in Json.NET will parse it. I just have to use 
> that rather than JObject.Parse when dealing with collections.
>
> On Friday, November 18, 2011 12:12:15 PM UTC-6, TrueWill wrote:
>>
>> Any particular reason the HTTP API returns raw JSON arrays rather than a 
>> JSON object with an array field?
>>
>> Example:
>> /api/vhosts
>> [{"name":"/","tracing":false},{"name":"MyHost","tracing":false}]
>>
>> At least one library (Json.NET) fails to parse that. I'm not sure if it's 
>> in the standard.
>>
>> A workaround is to create a JSON object on the client and assign this to 
>> a field.
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111118/54823cbd/attachment.htm>

From deckerego at gmail.com  Fri Nov 18 20:43:01 2011
From: deckerego at gmail.com (DeckerEgo)
Date: Fri, 18 Nov 2011 12:43:01 -0800 (PST)
Subject: [rabbitmq-discuss] Camel RabbitMQ Component Available
In-Reply-To: <bea63f83-86f7-42f4-9dd8-57c18059841f@13g2000prw.googlegroups.com>
References: <bea63f83-86f7-42f4-9dd8-57c18059841f@13g2000prw.googlegroups.com>
Message-ID: <e3e81212-5bf4-41f0-ba83-f4953d6ac0b2@w29g2000pri.googlegroups.com>

Being the genius I am, the code was published to the wrong repo. Find
the CORRECT repo at https://github.com/Bluelock/camel-spring-amqp

Thanks!

On Nov 18, 12:25?pm, DeckerEgo <decker... at gmail.com> wrote:
> For those who might be interested - I've recently released a new AMQP
> component for Apache Camel, now available at...

From matthias at rabbitmq.com  Fri Nov 18 21:37:35 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 18 Nov 2011 21:37:35 +0000
Subject: [rabbitmq-discuss] RabbitMQ mirrored queues and node failure
In-Reply-To: <9DA88CB8-7F53-420F-8F40-9707F971BC1C@mhtx.net>
References: <17A5514D-8CD9-405E-AEEF-0CB74829DF80@mhtx.net>
	<4EC4316C.7060808@rabbitmq.com>
	<9DA88CB8-7F53-420F-8F40-9707F971BC1C@mhtx.net>
Message-ID: <4EC6D01F.6060106@rabbitmq.com>

On 18/11/11 14:31, Major Hayden wrote:
> I'm still a bit confused on some of the operations behind the scenes
> with mirrored queues.  The documentation states:
>
> "All actions other than publishes go only to the master, and the
> master then broadcasts the effect of the actions to the slaves."
>
> This makes it sounds like publishes go to the slaves

The key word in the above is "only". Publishes go to the slaves *and* 
the master.

Matthias.

From matthias at rabbitmq.com  Fri Nov 18 21:48:01 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 18 Nov 2011 21:48:01 +0000
Subject: [rabbitmq-discuss] Backwards compatibility?
In-Reply-To: <4927748.987.1321640955642.JavaMail.geo-discussion-forums@yqff21>
References: <4927748.987.1321640955642.JavaMail.geo-discussion-forums@yqff21>
Message-ID: <4EC6D291.7010504@rabbitmq.com>

On 18/11/11 18:29, justin.adam.miller at gmail.com wrote:
> Is version 2.5.1 of the java client compatible with all newer versions
> of the server, >= 2.5.1 ? Or at a bare minimum version 2.6.0 of the server?

All client libraries >= 2.0.0 are compatible with all servers >= 2.0.0.

Matthias.

From sacha.molin at evolope.se  Fri Nov 18 20:08:40 2011
From: sacha.molin at evolope.se (Sacha Molin)
Date: Fri, 18 Nov 2011 21:08:40 +0100
Subject: [rabbitmq-discuss] erlang examples
Message-ID: <CAE3QcPK5O1Ra5+g26Tns=Ku5VeBKomReu5NdKmTkCAWG7KGt3w@mail.gmail.com>

Hi
,
 I decidec to use rabbitmq for the first time, i got everything up and
running, but when i tried the erlang examples i just got this error message:

can't find include lib "amqp_client/include/amqp_
client.hrl"

any ideas how i can solve it and what makes it not find it ?

best regards
Sacha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111118/967b757f/attachment.htm>

From Stefan.Kaes at xing.com  Sat Nov 19 05:52:01 2011
From: Stefan.Kaes at xing.com (Stefan Kaes)
Date: Sat, 19 Nov 2011 06:52:01 +0100
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <4EBA9BB2.7070408@rabbitmq.com>
Message-ID: <CAED0291.2DC5B%stefan.kaes@xing.com>

Hi,

it appears that the FAQ page describing the new reject semantics has
disappeared.

Here's my current understanding:

Let's say we have a message queue containing messages <m2, m1>, where m1
will be delivered next.

Let's further assume we have a prefetch count of 1 on our single consumer,
which is subscribed to the queue.

Then, if the consumer rejects the message, it will be resend to the consumer
before m2 is sent, right?

In other words: from a consumer perspective, "reject(requeue=true)" behaves
exactly like "recover" in the scenario above.

Correct?


Am 09.11.11 16:26 schrieb "Emile Joubert" unter <emile at rabbitmq.com>:

> Hi Marek,
> 
> On 09/11/11 15:08, Cermak, Marek wrote:
>> good job, thanks.
>> is there any document how does the order preservation work? Does it work
>> even for more consumers from one queue? in what way?
> 
> The FAQ contains an entry that describes the new ordering guarantees for
> a queue with one consumer:
> http://www.rabbitmq.com/faq.html#message-ordering
> 
> The same guarantees do not hold in the presence of multiple consumers.
> From the perspective of the queue, messages will always be in the order
> in which they entered the queue. If a queue has multiple consumers then
> they may see messages out of order, due to the actions of other
> consumers, even if the messages in the queue are always in the correct
> order.
> 
> 
> - Emile
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

Dr. Stefan Kaes
Principal System Architect
 
XING AG
Gaensemarkt 43, 20354 Hamburg, Germany
Tel. +49 40 419131-801, Fax +49 40 419131-11
 
Commercial Reg. (Registergericht): Amtsgericht Hamburg, HRB 98807
Exec. Board (Vorstand): Dr. Stefan Gro?-Selbeck (Vorsitzender), Ingo Chu,
Dr. Helmut Becker, Jens Pape;
Chairman of the Supervisory Board (Aufsichtsratsvorsitzender): Dr. Neil
Sunderland
 
Please join my network on XING: http://www.xing.com/go/invite/Stefan.Kaes

This email may contain confidential and/or privileged information. If you
are not the intended recipient (or have received this email in error) please
notify the sender immediately and destroy this email. Any unauthorized
copying, disclosure or distribution of the material in this email is
strictly forbidden and may be unlawful.


From ciprian.craciun at gmail.com  Sat Nov 19 06:49:19 2011
From: ciprian.craciun at gmail.com (Ciprian Dorin Craciun)
Date: Sat, 19 Nov 2011 08:49:19 +0200
Subject: [rabbitmq-discuss] erlang examples
In-Reply-To: <CAE3QcPK5O1Ra5+g26Tns=Ku5VeBKomReu5NdKmTkCAWG7KGt3w@mail.gmail.com>
References: <CAE3QcPK5O1Ra5+g26Tns=Ku5VeBKomReu5NdKmTkCAWG7KGt3w@mail.gmail.com>
Message-ID: <CA+Tk8fw42FmCPeOurjUz97MN2r1mOLYSzaq4rgsj7AKAzSr=JQ@mail.gmail.com>

On Fri, Nov 18, 2011 at 22:08, Sacha Molin <sacha.molin at evolope.se> wrote:
> Hi
> ,
> ?I decidec to use rabbitmq for the first time, i got everything up and
> running, but when i tried the erlang examples i just got this error message:
>
> can't find include lib "amqp_client/include/amqp_
> client.hrl"
>
> any ideas how i can solve it and what makes it not find it ?
>
> best regards
> Sacha

    To run the erlang client examples, you need to build (or get it
built from the site) the `rabbitmq_erlang_client` "plugin". (I've just
barely found it on the site... Where did the link disappeared???)
       http://www.rabbitmq.com/releases/rabbitmq-erlang-client/v2.7.0/

    After that there are two ways:
    * quick and dirty: from the `amqp_client-xxx.ez` just take the
`amqp_client.hrl` (and any other referenced include files) and throw
them in your code folder (also replace all lines from `-include_lib
(".../amqp_client.hrl")." to just `-include ("amqp_client.hrl").`;
    * the correct way (?) put the `.ez` files in a folder and extract
(with `unzip`) them there (you should have a folder for each `.ez`
with the same name but without the extension, I don't remember if that
folder is in the `.ez` or you have to create it manually) (you can
remove then the `.ez` files), then export the environment variable
`ERL_LIBS` to point to that folder, and now you can run the compiler;

    Hope it helps. (I haven't tested it right now, but I use something similar.)
    Ciprian.

From irrer at umich.edu  Sat Nov 19 12:47:54 2011
From: irrer at umich.edu (Jim Irrer)
Date: Sat, 19 Nov 2011 07:47:54 -0500
Subject: [rabbitmq-discuss] Millions of possible values in a message
 routing key
In-Reply-To: <CA+0gB9nsuQGFGchpmd9Fh96KY-NP0LavAfaa0-OixaVeLNw9MA@mail.gmail.com>
References: <CA+0gB9nsuQGFGchpmd9Fh96KY-NP0LavAfaa0-OixaVeLNw9MA@mail.gmail.com>
Message-ID: <CAK27CLoV8XjMnpf0o4gZFX4S3RnrFsM6wb_3dT_wToN1nC-T=Q@mail.gmail.com>

That should work just fine.

Thanks,

- Jim

Jim Irrer     irrer at umich.edu       (734) 647-4409
University of Michigan Hospital Radiation Oncology
519 W. William St.             Ann Arbor, MI 48103


On Fri, Nov 18, 2011 at 2:16 PM, Julio Polo <julio at hawaii.edu> wrote:

> I'm wondering if it's feasible to set up a topic exchange and have the
> message routing key's first word be the person's identifier:
>
> <personNumericID>.<action>.<attribute>
>
> This way, applications may subscribe only to messages for the few
> people they are interested in.
>
> Are there any performance issues if a word in a message routing key
> can have a very large range of values?  Let's say 70,000 possible
> values. What if it grows to a million and beyond? Does it matter?
>
> I doubt we'd implement the above, but it's nice to know if it ever
> comes up.   We're most likely to implement a message routing key like
> <deptCode>.<action>.<attribute> where <deptCode> can have about 1000
> possible values.  I assume that should be no problem.
>
> Julio Polo
> University of Hawaii
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111119/11e0d05d/attachment.htm>

From michael.s.klishin at gmail.com  Sat Nov 19 16:30:29 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Sat, 19 Nov 2011 20:30:29 +0400
Subject: [rabbitmq-discuss] [announcement] New Ruby amqp clients
	documentation site is available at rubyamqp.info
Message-ID: <5AFE515F-FB3F-4D14-A664-CCCDB215A559@gmail.com>

Hi,

We are happy to announce that Ruby AMQP clients doc site is finally available at http://rubyamqp.info. Right now it only includes amqp gem guides but we are already
writing Hot Bunnies documentation and hope to include bunny gem at some point as well.

So, rubyamqp.info is now the place to point newcomers to. Have a great weekend.

MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin


From theo at iconara.net  Sat Nov 19 17:31:43 2011
From: theo at iconara.net (Theo Hultberg)
Date: Sat, 19 Nov 2011 18:31:43 +0100
Subject: [rabbitmq-discuss] [amqp] [announcement] New Ruby amqp clients
 documentation site is available at rubyamqp.info
In-Reply-To: <5AFE515F-FB3F-4D14-A664-CCCDB215A559@gmail.com>
References: <5AFE515F-FB3F-4D14-A664-CCCDB215A559@gmail.com>
Message-ID: <CAMR1f-eiDRPS_aBn9ON7HBzwi4q1igmFqna7ydgSTP=2AC-EDA@mail.gmail.com>

Your documentation writing skills are epic.

T#

On Sat, Nov 19, 2011 at 5:30 PM, Michael Klishin
<michael.s.klishin at gmail.com> wrote:
> Hi,
>
> We are happy to announce that Ruby AMQP clients doc site is finally available at http://rubyamqp.info. Right now it only includes amqp gem guides but we are already
> writing Hot Bunnies documentation and hope to include bunny gem at some point as well.
>
> So, rubyamqp.info is now the place to point newcomers to. Have a great weekend.
>
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> --
> Documentation guides: http://bit.ly/amqp-gem-docs
> Code examples: http://bit.ly/amq-gem-examples
> API reference: http://bit.ly/mDm1JE
>
> Drop by #rabbitmq on irc.freenode.net
> Bug tracker: https://github.com/ruby-amqp/amqp/issues
>
> Post to the group: ruby-amqp at googlegroups.com | unsubscribe: ruby-amqp+unsubscribe at googlegroups.com
>
> Group page: http://groups.google.com/group/ruby-amqp?hl=en
>

From simone.busoli at gmail.com  Sat Nov 19 20:57:47 2011
From: simone.busoli at gmail.com (Simone Busoli)
Date: Sat, 19 Nov 2011 21:57:47 +0100
Subject: [rabbitmq-discuss] [announcement] New Ruby amqp clients
 documentation site is available at rubyamqp.info
In-Reply-To: <5AFE515F-FB3F-4D14-A664-CCCDB215A559@gmail.com>
References: <5AFE515F-FB3F-4D14-A664-CCCDB215A559@gmail.com>
Message-ID: <CAOn7oW8PTc==Js=D+Yg2fj9C7Tx0=gr91-Ju8bj=Exb-icezew@mail.gmail.com>

Very good work indeed, makes reading it very pleasant, and people coming
from a .NET background somewhat envious (.chm anyone?)

On Sat, Nov 19, 2011 at 17:30, Michael Klishin
<michael.s.klishin at gmail.com>wrote:

> Hi,
>
> We are happy to announce that Ruby AMQP clients doc site is finally
> available at http://rubyamqp.info. Right now it only includes amqp gem
> guides but we are already
> writing Hot Bunnies documentation and hope to include bunny gem at some
> point as well.
>
> So, rubyamqp.info is now the place to point newcomers to. Have a great
> weekend.
>
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111119/aba30c7e/attachment.htm>

From matthias at rabbitmq.com  Sat Nov 19 22:27:52 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sat, 19 Nov 2011 22:27:52 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <CAED0291.2DC5B%stefan.kaes@xing.com>
References: <CAED0291.2DC5B%stefan.kaes@xing.com>
Message-ID: <4EC82D68.3000200@rabbitmq.com>

Stefan,

On 19/11/11 05:52, Stefan Kaes wrote:
> it appears that the FAQ page describing the new reject semantics has
> disappeared.

Indeed it has.

> Here's my current understanding:
>
> Let's say we have a message queue containing messages<m2, m1>, where m1
> will be delivered next.
>
> Let's further assume we have a prefetch count of 1 on our single consumer,
> which is subscribed to the queue.
>
> Then, if the consumer rejects the message, it will be resend to the consumer
> before m2 is sent, right?
>
> In other words: from a consumer perspective, "reject(requeue=true)" behaves
> exactly like "recover" in the scenario above.
>
> Correct?

The second message the consumer receives could be either m1 or m2. 
Arguably that is surprising behaviour so I will raise a bug to look into 
this.

Regards,

Matthias.

From jasonjwwilliams at gmail.com  Sat Nov 19 23:09:58 2011
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sat, 19 Nov 2011 16:09:58 -0700
Subject: [rabbitmq-discuss] EventingBasicConsumer is still experimentals?
	(.NET client)
Message-ID: <CAHZAEpdgHBEpuNjdaNBm2ov+xk9rj35VMRu4=87BfBg023O9fQ@mail.gmail.com>

Hi Guys,

I see that that EventingBasicConsumer is still marked experimental. Is that
true or is it safe to use for examples in our book?

http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v2.7.0/rabbitmq-dotnet-client-2.7.0-client-htmldoc/html/type-RabbitMQ.Client.Events.EventingBasicConsumer.html

We're trying to find an equivalent to the event loop in Pika that allows
multiple consumption loops to be active non-blocking at the same time.

-J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111119/be475104/attachment.htm>

From matthias at rabbitmq.com  Sun Nov 20 10:01:21 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 20 Nov 2011 10:01:21 +0000
Subject: [rabbitmq-discuss] EventingBasicConsumer is still
 experimentals? (.NET client)
In-Reply-To: <CAHZAEpdgHBEpuNjdaNBm2ov+xk9rj35VMRu4=87BfBg023O9fQ@mail.gmail.com>
References: <CAHZAEpdgHBEpuNjdaNBm2ov+xk9rj35VMRu4=87BfBg023O9fQ@mail.gmail.com>
Message-ID: <4EC8CFF1.2020909@rabbitmq.com>

Jason,

On 19/11/11 23:09, Jason J. W. Williams wrote:
> I see that that EventingBasicConsumer is still marked experimental.
> Is that true or is it safe to use for examples in our book?

It is probably safe to use.

>  We're trying to find an equivalent to the event loop in Pika that
> allows multiple consumption loops to be active non-blocking at the
> same time.

EventingBasicConsumer is blocking, i.e. it invokes the event handlers in 
the connection thread.

Can you post the pika code you want to emulate?

Matthias.

From jasonjwwilliams at gmail.com  Sun Nov 20 10:46:57 2011
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sun, 20 Nov 2011 03:46:57 -0700
Subject: [rabbitmq-discuss] EventingBasicConsumer is still
 experimentals? (.NET client)
In-Reply-To: <4EC8CFF1.2020909@rabbitmq.com>
References: <CAHZAEpdgHBEpuNjdaNBm2ov+xk9rj35VMRu4=87BfBg023O9fQ@mail.gmail.com>
	<4EC8CFF1.2020909@rabbitmq.com>
Message-ID: <CAHZAEpeHjTJJc4iD1jnPXjXWiu5hhBkJP9dq+DKd0xbhtaOGsA@mail.gmail.com>

Hi Matthias,


> It is probably safe to use.
>
>
That's great.


>  EventingBasicConsumer is blocking, i.e. it invokes the event handlers in
> the connection thread.
>
> Can you post the pika code you want to emulate?


Actually, I mean non-blocking in a much looser sense...that one queue
consumption loop while waiting on messages doesn't block other consumption
loops in the same thread (rather than non-blocking all network I/O).

EventBasicConsumer actually provides the analog I was looking for...here's
the C# code I ended up with:

https://github.com/rabbitinaction/sourcecode/blob/master/csharp/appendix-a/AlertingServerConsumer/alerting_server_consumer.cs

And the original Pika/Python code:

https://github.com/rabbitinaction/sourcecode/blob/master/python/chapter-4/alert_consumer.py


Thank you very much for your quick reply and help. Will EventBasicConsumer
ever lose the "experimental" badge on the API and class docs?

-J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111120/f31670db/attachment.htm>

From harvey.robin at gmail.com  Sun Nov 20 10:57:30 2011
From: harvey.robin at gmail.com (Robin Harvey)
Date: Sun, 20 Nov 2011 10:57:30 +0000
Subject: [rabbitmq-discuss] Amqphp - new release
Message-ID: <CAOvN6FAC_1tm2EA=+BGs_jCzPUg3-mXfWs2+PzCAGxa_HiPKrw@mail.gmail.com>

Hi,

I thought you may be interested to know that I've just tagged a new release
(0.9.2) of the Amqphp project, noteworthy changes in this version are:

 * Support for persistent connections, channels and consumers in web
servers.
 * A new Factory component which can help externalize connection and broker
configuration
 * Improved event loop implementation allows the user more flexibility to
escape from a consuming event loop
 * Much improved user documentation:
https://github.com/BraveSirRobin/amqphp/wiki/Documentation
 * Simplified and consolidated the demos:
https://github.com/BraveSirRobin/amqphp/tree/master/demos

I'm starting out on my own in January so this is likely to be the last
"major" release for a while, although I'll still be around to fix bugs.


Thanks,
--Robin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111120/f1cb2cb8/attachment.htm>

From matthias at rabbitmq.com  Sun Nov 20 11:09:32 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 20 Nov 2011 11:09:32 +0000
Subject: [rabbitmq-discuss] EventingBasicConsumer is still
 experimentals? (.NET client)
In-Reply-To: <CAHZAEpeHjTJJc4iD1jnPXjXWiu5hhBkJP9dq+DKd0xbhtaOGsA@mail.gmail.com>
References: <CAHZAEpdgHBEpuNjdaNBm2ov+xk9rj35VMRu4=87BfBg023O9fQ@mail.gmail.com>	<4EC8CFF1.2020909@rabbitmq.com>
	<CAHZAEpeHjTJJc4iD1jnPXjXWiu5hhBkJP9dq+DKd0xbhtaOGsA@mail.gmail.com>
Message-ID: <4EC8DFEC.6050204@rabbitmq.com>

Jason,

On 20/11/11 10:46, Jason J. W. Williams wrote:
> Actually, I mean non-blocking in a much looser sense...that one queue
> consumption loop while waiting on messages doesn't block other
> consumption loops in the same thread (rather than non-blocking all
> network I/O).

Where are those "consumption loops"? I do not see any in your examples.

> EventBasicConsumer actually provides the analog I was looking
> for...here's the C# code I ended up with:
>
> https://github.com/rabbitinaction/sourcecode/blob/master/csharp/appendix-a/AlertingServerConsumer/alerting_server_consumer.cs

That doesn't look any different, control-flow wise, than implementing 
IBasicConsumer (or sub-classing DefaultConsumer) and then passing that 
instance to BasicConsume. In fact EventBasicConsumer is just a rather 
trivial sub-class of DefaultConsumer - there's no threading/async magic 
in it.

Matthias.

From sampo.savolainen at spatineo.com  Sun Nov 20 11:47:39 2011
From: sampo.savolainen at spatineo.com (Sampo Savolainen)
Date: Sun, 20 Nov 2011 13:47:39 +0200
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <4EC4F469.70306@rabbitmq.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
	<4EC3AF7F.3040905@rabbitmq.com>
	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
	<4EC3B5D3.9040204@rabbitmq.com>
	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>
	<4EC3BDA9.30207@rabbitmq.com>
	<CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>
	<4EC4F469.70306@rabbitmq.com>
Message-ID: <CAL8b_0eNz6bw=j7Qfcw02fJ0r_iokXY8z_YRAmhN8=WVPSy=gQ@mail.gmail.com>

On Thu, Nov 17, 2011 at 1:47 PM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 16/11/11 13:52, Sampo Savolainen wrote:
>
>> err was empty and log contained only this:
>>
>> Stopping and halting node rabbit at blanko ...
>> ...done.
>>
>
> ...and this was definitely after shutdown had *hung*? Because that looks
> like it had succeeded. Was the timestamp on the log plausible?


You were right that this is worth checking out: It seems it's not the
rabbitmq service script which fails. I deleted the shutdown logs, and
checked the /var/log/rabbitmq directory after shutdown failed. The logs had
not been created.

So it seems having rabbitmq running is preventing another service
(network-manager perhaps?) from shutting down cleanly.


 Sampo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111120/3bb050be/attachment.htm>

From matthias at rabbitmq.com  Sun Nov 20 13:34:43 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 20 Nov 2011 13:34:43 +0000
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
Message-ID: <4EC901F3.4040500@rabbitmq.com>

Cameron,

On 16/11/11 20:06, Cameron Davison wrote:
> I have a cluster of 2 rabbitmq on 2 machines in the same datacenter.
> I am sending messages to them at a rate of about 250 message a second
> each message is about 2k in size on average. The software is able to
> read them back out at about the same rate. Sometime slower usually
> faster, which is why I am using a message queue. [...] There are
> about 10 publishers channels/connections, and about 30 consumer
> channels/connections. The prefetch is set to 1000 for each channel
> of the consumers. [...] The cluster is using mirrored queue and
> confirmations on the writes as well as batch acking on the consumes.

Do all the queue masters reside on the same machine? Or perhaps there is 
just one queue (in which case the answer obviously is 'yes').

Also, what machine do the publishers and consumers connect to?

Are the queues durable and the messages persistent?

> The master rabbitmq is reporting a memory usage by the erlang
> processer of about 200MB and the slave rabbitmq is reporting around
> 800MB but sometimes jumps back and forth between 400MB and 900MB
> rapidly. Is there any reason that the memory usage is so different
> between the master and the slave.

The workload of the master and slave are quite different, so a 
difference in the memory profile is not surprising.

Inspecting the memory details of the nodes with 'rabbitmqctl status', or 
with the management plug-in, might shed some light on where the memory 
is going.


Regards,

Matthias.

From matthias at rabbitmq.com  Sun Nov 20 14:02:03 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 20 Nov 2011 14:02:03 +0000
Subject: [rabbitmq-discuss] RabbitMQ Shovel Connections
In-Reply-To: <33495078.665.1321537186592.JavaMail.geo-discussion-forums@yqni5>
References: <004201cc735b$b4aa9c80$1dffd580$@omc-international.com.au>
	<33495078.665.1321537186592.JavaMail.geo-discussion-forums@yqni5>
Message-ID: <4EC9085B.7000009@rabbitmq.com>

Jelle,

On 17/11/11 13:39, Jelle Smet wrote:
> I still have the same issue going on. Here's a recap:
>
> * I have upgraded to the latest stable (2.7.0) Rabbmitmq on all
> nodes.
> * Messages which should be shoveled to a remote broker stay
> unacknowledged in the queue which Shovel is using as a source.
> * When restarting RabbitMQ containing Shovel after that all messages
> are shoveled correctly to their destination.
> * ack_mode has value "on_confirm", when changing this to "no_ack" all
> messages get lost.
>
>
> I must say that it's possible that small network interruptions
> happen, or occasional packetloss occurs... but that doesn't explain
> that restarting Rabbit, makes all messages arrive.

All the above observations are consistent with the network connection
having gone stale, i.e. there has been a network interruption but the
shovel hasn't noticed that yet. Depending on your OS / network setup it
can take hours for that to happen.

Try configuring heartbeats for the connections, which will allow rabbit
to detect this situation much more promptly. See the shovel readme for
how to do that.

> Here's my complete Shovel configuration

This looks ok except I'd suggest that you use "amqp://" instead of
"amqp://localhost". That way the much more efficient direct connection
is used, which also eliminates any possible network-related issues for
that hop.

> * Restarting RabbitMQ on that moment isn't possible.

That certainly shouldn't happen. Does 'rabbitmqctl report' work when 
rabbit is in that state? (NB: try running this *before* you attempt to 
stop rabbit).

> Killing is  required, often having to issue "epmd -kill"

epmd should have nothing to do with this. And killing epmd does not kill 
rabbit. Indeed epmd should refuse to stop if rabbit on that node is 
still running.

Regards,

Matthias.

From matthias at rabbitmq.com  Sun Nov 20 15:43:41 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 20 Nov 2011 15:43:41 +0000
Subject: [rabbitmq-discuss] questions about RpcClient
In-Reply-To: <CALbPev=K4WWDv-W8=vggYEx7EqJCMcb+VwWiFLCR62dD800y7A@mail.gmail.com>
References: <CALbPev=K4WWDv-W8=vggYEx7EqJCMcb+VwWiFLCR62dD800y7A@mail.gmail.com>
Message-ID: <4EC9202D.30303@rabbitmq.com>

On 18/11/11 13:42, john doe wrote:
> Is this class threadsafe? I guess not because channels are not threadsafe?

Correct.

> Why is the routing key a final attribute? Why is it not a parameter of
> primitiveCall(...)?

The idea is that you create RpcClients to talk to specific rpc servers. 
The latter are typically identified by a combination of exchange and 
routing key.

Matthias.

From cameron.davison at gmail.com  Sun Nov 20 16:27:27 2011
From: cameron.davison at gmail.com (Cameron Davison)
Date: Sun, 20 Nov 2011 10:27:27 -0600
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <4EC901F3.4040500@rabbitmq.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
	<4EC901F3.4040500@rabbitmq.com>
Message-ID: <6250190793052131212@unknownmsgid>

Matthias,

On Nov 20, 2011, at 7:34 AM, Matthias Radestock <matthias at rabbitmq.com> wrote:

> Cameron,
>
> On 16/11/11 20:06, Cameron Davison wrote:
>> I have a cluster of 2 rabbitmq on 2 machines in the same datacenter.
>> I am sending messages to them at a rate of about 250 message a second
>> each message is about 2k in size on average. The software is able to
>> read them back out at about the same rate. Sometime slower usually
>> faster, which is why I am using a message queue. [...] There are
>> about 10 publishers channels/connections, and about 30 consumer
>> channels/connections. The prefetch is set to 1000 for each channel
>> of the consumers. [...] The cluster is using mirrored queue and
>> confirmations on the writes as well as batch acking on the consumes.
>
> Do all the queue masters reside on the same machine? Or perhaps there is just one queue (in which case the answer obviously is 'yes').
There is only one queue.
>
> Also, what machine do the publishers and consumers connect to?
All of the publishers and consumers connect to the master. We set them
to connect to the first one available, but since we restarted them in
order to get the memory to go once or twice they all ended up
connected to the master.
>
> Are the queues durable and the messages persistent?
Both persistent and durable. I set both in the cluster to be durable
since we have only one queue and did not expect to make anymore.
Seemed like it would not cause extra work to save the queue to disk. I
am using persistent and high available mirrored queues because I
really don't want to lose messages.
>
>> The master rabbitmq is reporting a memory usage by the erlang
>> processer of about 200MB and the slave rabbitmq is reporting around
>> 800MB but sometimes jumps back and forth between 400MB and 900MB
>> rapidly. Is there any reason that the memory usage is so different
>> between the master and the slave.
>
> The workload of the master and slave are quite different, so a difference in the memory profile is not surprising.
>
> Inspecting the memory details of the nodes with 'rabbitmqctl status', or with the management plug-in, might shed some light on where the memory is going.
>
It looks like all the memory is being used by the erlang processes.
Even though the slave has less then a fourth the processes and double
the memory.
>
> Regards,
>
> Matthias.

From matthias at rabbitmq.com  Sun Nov 20 16:49:14 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 20 Nov 2011 16:49:14 +0000
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <6250190793052131212@unknownmsgid>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
	<4EC901F3.4040500@rabbitmq.com> <6250190793052131212@unknownmsgid>
Message-ID: <4EC92F8A.4080300@rabbitmq.com>

Cameron,

On 20/11/11 16:27, Cameron Davison wrote:
> It looks like all the memory is being used by the erlang processes.

And that's at a point when the slave is using substantially more memory 
than the master?

To investigate this further, connect to the slave erlang node with

erl -sname foo -remsh rabbit@<slave-host>

(you'll need to make sure the Erlang cookie is the same as your 
cluster's; so either copy the cookie or run the above as the same user 
as your rabbit server)

Once connected, evaluate

io:format("~p", [lists:reverse(lists:sort([{process_info(Pid, memory), 
Pid, process_info(Pid)} || Pid <- processes()]))]).

Post the result and the output of 'rabbitmqctl status' at the time.

Regards,

Matthias.

From alexis at rabbitmq.com  Sun Nov 20 17:51:13 2011
From: alexis at rabbitmq.com (Alexis Richardson)
Date: Sun, 20 Nov 2011 17:51:13 +0000
Subject: [rabbitmq-discuss] Crash on startup in management_agent
	plugin-2.7.0
In-Reply-To: <CACmxXrCZqmfSr2tkiya5-SxVTUOEPxp7_VQqO7ZCQC=pX+=uJQ@mail.gmail.com>
References: <CACmxXrCZqmfSr2tkiya5-SxVTUOEPxp7_VQqO7ZCQC=pX+=uJQ@mail.gmail.com>
Message-ID: <CACOPnvcmEHr83PfZP5WizwZCuihFcJBwgKkjuWkFN0=x8sonTA@mail.gmail.com>

RJ

Did this get resolved?

alexis

On Thu, Nov 10, 2011 at 5:50 PM, Richard Jones <rj at metabrew.com> wrote:
> [reposting, appears truncated with no logs in the list archive for some reason]
>
> I upgraded from 2.6.0 to 2.7.0 using the .deb from the rabbit website.
> (64bit debian)
> Enabled management_plugin using rabbitmq-plugins as per docs, crashed
> with the following on startup (pasted below).
> Same crash with just rabbitmq_management_agent plugin enabled.
>
> From what i can see, the get_used_fd function just tries to ls a
> directory in proc, not sure what that would fail, perms seem ok.
>
> Any ideas?
>
> RJ
>
> SUPERVISOR REPORT==== 10-Nov-2011::16:39:41 ===
> ? ?Supervisor: {local,rabbit_mgmt_agent_sup}
> ? ?Context: ? ?start_error
> ? ?Reason: ? ? {{badmatch,{error,eacces}},
> ? ? ? ? ? ? ? ? [{rabbit_mgmt_external_stats,get_used_fd,1},
> ? ? ? ? ? ? ? ? ?{rabbit_mgmt_external_stats,internal_update,1},
> ? ? ? ? ? ? ? ? ?{rabbit_mgmt_external_stats,init,1},
> ? ? ? ? ? ? ? ? ?{gen_server,init_it,6},
> ? ? ? ? ? ? ? ? ?{proc_lib,init_p_do_apply,3}]}
> ? ?Offender: ? [{pid,undefined},
> ? ? ? ? ? ? ? ? {name,rabbit_mgmt_external_stats},
> ? ? ? ? ? ? ? ? {mfargs,{rabbit_mgmt_external_stats,start_link,[]}},
> ? ? ? ? ? ? ? ? {restart_type,permanent},
> ? ? ? ? ? ? ? ? {shutdown,5000},
> ? ? ? ? ? ? ? ? {child_type,worker}]
>
>
> $ cat /var/log/rabbitmq/startup_log
> Activating RabbitMQ plugins ...
> 1 plugins activated:
> * rabbitmq_management_agent-2.7.0
>
>
> +---+ ? +---+
> | ? | ? | ? |
> | ? | ? | ? |
> | ? | ? | ? |
> | ? +---+ ? +-------+
> | ? ? ? ? ? ? ? ? ? |
> | RabbitMQ ?+---+ ? |
> | ? ? ? ? ? | ? | ? |
> | ? v2.7.0 ?+---+ ? |
> | ? ? ? ? ? ? ? ? ? |
> +-------------------+
> AMQP 0-9-1 / 0-9 / 0-8
> Copyright (C) 2007-2011 VMware, Inc.
> Licensed under the MPL. ?See http://www.rabbitmq.com/
>
> node ? ? ? ? ? : rabbit at irccloud
> app descriptor :
> /usr/lib/rabbitmq/lib/rabbitmq_server-2.7.0/sbin/../ebin/rabbit.app
> home dir ? ? ? : /var/lib/rabbitmq
> config file(s) : /etc/rabbitmq/rabbitmq.config
> cookie hash ? ?: tmXxxxxxxxxxxxxLyw==
> log ? ? ? ? ? ?: /var/log/rabbitmq/rabbit at irccloud.log
> sasl log ? ? ? : /var/log/rabbitmq/rabbit at irccloud-sasl.log
> database dir ? : /var/lib/rabbitmq/mnesia/rabbit at irccloud
> erlang version : 5.8.1
>
> -- rabbit boot start
> starting file handle cache server ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting worker pool ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?...done
> starting database ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting codec correctness check ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?...done
> -- external infrastructure ready
> starting plugin registry ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?...done
> starting auth mechanism cr-demo ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting auth mechanism amqplain ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?...done
> starting auth mechanism plain ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting statistics event manager ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting logging server ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting exchange type direct ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting exchange type fanout ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting exchange type headers ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?...done
> starting exchange type topic ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?...done
> -- kernel ready
> starting alarm handler ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?...done
> starting node monitor ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting cluster delegate ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting guid generator ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting memory monitor ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> -- core initialized
> starting empty DB check ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting management agent ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting exchange, queue and binding recovery ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting mirror queue slave sup ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting adding mirrors to queues ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> -- message delivery logic ready
> starting error log relay ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?...done
> starting networking ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
> starting direct_client ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?...done
> starting notify cluster nodes ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ...done
>
> broker running
> {"Kernel pid terminated",application_controller,"{application_start_failure,rabbitmq_management_agent,{shutdown,{rabbit_mgmt_agent_app,start,[normal,[]]}}}"}
>
>
> $ cat /etc/rabbitmq/rabbitmq.config
> [
> ? {mnesia, [
> ? ? ? {dc_dump_limit, 40},
> ? ? ? {dump_log_write_threshold, 50000}
> ? ? ? ]},
>
> ? {rabbit, [
> ? ? ? {tcp_listeners, [{"127.0.0.1", 5672}]},
> ? ? ? {ssl_listeners, [{"redacted", 5671}]},
> ? ? ? {ssl_options, [
> ? ? ? ? ? {certfile, "/etc/rabbitmq/server-cert.pem"},
> ? ? ? ? ? {cacertfile, "/etc/rabbitmq/ca-cert.pem"},
> ? ? ? ? ? {keyfile, "/etc/rabbitmq/server-key.pem"},
> ? ? ? ? ? {depth, 9}
> ? ? ? ? ? ]}
> ? ? ? ]}
> ].
>
>
> $ cat /etc/rabbitmq/enabled_plugins
> [rabbitmq_management_agent].
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From matthias at rabbitmq.com  Sun Nov 20 18:03:18 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 20 Nov 2011 18:03:18 +0000
Subject: [rabbitmq-discuss] Crash on startup in
	management_agent	plugin-2.7.0
In-Reply-To: <CACOPnvcmEHr83PfZP5WizwZCuihFcJBwgKkjuWkFN0=x8sonTA@mail.gmail.com>
References: <CACmxXrCZqmfSr2tkiya5-SxVTUOEPxp7_VQqO7ZCQC=pX+=uJQ@mail.gmail.com>
	<CACOPnvcmEHr83PfZP5WizwZCuihFcJBwgKkjuWkFN0=x8sonTA@mail.gmail.com>
Message-ID: <4EC940E6.9020500@rabbitmq.com>

On 20/11/11 17:51, Alexis Richardson wrote:
> Did this get resolved?

yes it did: http://markmail.org/message/q76fifmzzrv335ez

Matthias.

From simone.busoli at gmail.com  Sun Nov 20 20:14:00 2011
From: simone.busoli at gmail.com (Simone Busoli)
Date: Sun, 20 Nov 2011 21:14:00 +0100
Subject: [rabbitmq-discuss] EventingBasicConsumer is still
 experimentals? (.NET client)
In-Reply-To: <4EC8CFF1.2020909@rabbitmq.com>
References: <CAHZAEpdgHBEpuNjdaNBm2ov+xk9rj35VMRu4=87BfBg023O9fQ@mail.gmail.com>
	<4EC8CFF1.2020909@rabbitmq.com>
Message-ID: <CAOn7oW_V8E8jz=ONWUJhz0eWoqKoT=o7kQyUQ6R0wGLAothrOw@mail.gmail.com>

Sorry to hijack the discussion but I always thought that this class was
very unsafe to use, although the implementation is stable.
As you point out the events are fired on the connection thread, which
should not block. Now I am expecting that if there's a place in an
application using RabbitMQ where there is a chance of blocking it is indeed
callbacks on message deliveries, rather than the other events exposed by
IModel or IConnection, therefore I would avoid using EventingBasicConsumer
unless there's a reason to use it.

On Sun, Nov 20, 2011 at 11:01, Matthias Radestock <matthias at rabbitmq.com>wrote:

> Jason,
>
>
> On 19/11/11 23:09, Jason J. W. Williams wrote:
>
>> I see that that EventingBasicConsumer is still marked experimental.
>> Is that true or is it safe to use for examples in our book?
>>
>
> It is probably safe to use.
>
>
>   We're trying to find an equivalent to the event loop in Pika that
>> allows multiple consumption loops to be active non-blocking at the
>> same time.
>>
>
> EventingBasicConsumer is blocking, i.e. it invokes the event handlers in
> the connection thread.
>
> Can you post the pika code you want to emulate?
>
> Matthias.
> ______________________________**_________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111120/ccba16c7/attachment.htm>

From matthias at rabbitmq.com  Sun Nov 20 21:27:48 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 20 Nov 2011 21:27:48 +0000
Subject: [rabbitmq-discuss] EventingBasicConsumer is still
 experimentals? (.NET client)
In-Reply-To: <CAHZAEpfjnUkCNjU7WM_csvBBkXUZ2SumUwA-R-gXP7dBOZi3=Q@mail.gmail.com>
References: <CAHZAEpdgHBEpuNjdaNBm2ov+xk9rj35VMRu4=87BfBg023O9fQ@mail.gmail.com>	<4EC8CFF1.2020909@rabbitmq.com>	<CAHZAEpeHjTJJc4iD1jnPXjXWiu5hhBkJP9dq+DKd0xbhtaOGsA@mail.gmail.com>	<4EC8DFEC.6050204@rabbitmq.com>
	<CAHZAEpfjnUkCNjU7WM_csvBBkXUZ2SumUwA-R-gXP7dBOZi3=Q@mail.gmail.com>
Message-ID: <4EC970D4.1070304@rabbitmq.com>

Jason,

On 20/11/11 21:11, Jason J. W. Williams wrote:
> Where are those "consumption loops"? I do not see any in your
> examples.
>
> EventingBasicConsumer c_consumer = new EventingBasicConsumer {Model =
> chan};
 > c_consumer.Received += critical_notify;
> chan.BasicConsume("critical", false, c_consumer);

That's not much of a *loop* :)

> the user-guide for the .NET client recommends using
> QueuingBasicConsumer

...because that way the connection thread does not get blocked,
regardless of what the consumer code does.

> which when consuming from two queues would necessitate two
> consumer.Queue.Dequeue(); in a row. In that configuration, the first
> invocation waits/blocks to receive any message from it's queue before
> the second invocation gets hit.

One can pass the same consumer instance to multiple BasicConsume calls. 
Then the messages end up in just a single client-side queue.

> EventingBasicConsumer doesn't have that problem

Just implementing IBasicConsumer or sub-classing DefaultConsumer has the 
same effect. EventingBasicConsumer simply provides a different API.

Alas the risk of consumer code blocking the connection thread remains.


Regards,

Matthias.

From jasonjwwilliams at gmail.com  Sun Nov 20 21:34:50 2011
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sun, 20 Nov 2011 14:34:50 -0700
Subject: [rabbitmq-discuss] EventingBasicConsumer is still
 experimentals? (.NET client)
In-Reply-To: <4EC970D4.1070304@rabbitmq.com>
References: <CAHZAEpdgHBEpuNjdaNBm2ov+xk9rj35VMRu4=87BfBg023O9fQ@mail.gmail.com>
	<4EC8CFF1.2020909@rabbitmq.com>
	<CAHZAEpeHjTJJc4iD1jnPXjXWiu5hhBkJP9dq+DKd0xbhtaOGsA@mail.gmail.com>
	<4EC8DFEC.6050204@rabbitmq.com>
	<CAHZAEpfjnUkCNjU7WM_csvBBkXUZ2SumUwA-R-gXP7dBOZi3=Q@mail.gmail.com>
	<4EC970D4.1070304@rabbitmq.com>
Message-ID: <CAHZAEpcmSw+fYTQsOO=Sod2UHHZo-HxqmJpjitPvdH2Yho81KA@mail.gmail.com>

>
> One can pass the same consumer instance to multiple BasicConsume calls.
>> Then the messages end up in just a single client-side queue.
>
>
>
Right, but then messages from both RMQ queues get lumped into the same
client-side queue and processed the same by the consumer.
 EventingBasicConsumer provides the callback-based interface I was looking
for that provides a clear and easy to read mechanism for subscribing
different processing functions to different queues in a single-thread.


> Alas the risk of consumer code blocking the connection thread remains.
>

That's true of any callback-based code (as are most of the other language
AMQP clients), and it's not that hard to design for.

-J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111120/2f525df7/attachment.htm>

From matthias at rabbitmq.com  Sun Nov 20 21:58:36 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 20 Nov 2011 21:58:36 +0000
Subject: [rabbitmq-discuss] EventingBasicConsumer is still
 experimentals? (.NET client)
In-Reply-To: <CAHZAEpcmSw+fYTQsOO=Sod2UHHZo-HxqmJpjitPvdH2Yho81KA@mail.gmail.com>
References: <CAHZAEpdgHBEpuNjdaNBm2ov+xk9rj35VMRu4=87BfBg023O9fQ@mail.gmail.com>	<4EC8CFF1.2020909@rabbitmq.com>	<CAHZAEpeHjTJJc4iD1jnPXjXWiu5hhBkJP9dq+DKd0xbhtaOGsA@mail.gmail.com>	<4EC8DFEC.6050204@rabbitmq.com>	<CAHZAEpfjnUkCNjU7WM_csvBBkXUZ2SumUwA-R-gXP7dBOZi3=Q@mail.gmail.com>	<4EC970D4.1070304@rabbitmq.com>
	<CAHZAEpcmSw+fYTQsOO=Sod2UHHZo-HxqmJpjitPvdH2Yho81KA@mail.gmail.com>
Message-ID: <4EC9780C.9020409@rabbitmq.com>

Jason,

On 20/11/11 21:34, Jason J. W. Williams wrote:
>> One can pass the same consumer instance to multiple BasicConsume
>> calls. Then the messages end up in just a single client-side
>> queue.
> Right, but then messages from both RMQ queues get lumped into the
> same client-side queue and processed the same by the consumer.

They can be disambiguated by the consumer code, though...

>   EventingBasicConsumer provides the callback-based interface I was
> looking for that provides a clear and easy to read mechanism for
> subscribing different processing functions to different queues in a
> single-thread.

Fair enough. We released EventingBasicConsumer in the hope that somebody 
might find it useful.

>> Alas the risk of consumer code blocking the connection thread
>> remains.
> That's true of any callback-based code (as are most of the other
> language AMQP clients), and it's not that hard to design for.

It catches out a surprising number of users.

On that note, in 
https://github.com/rabbitinaction/sourcecode/blob/master/csharp/appendix-a/AlertingServerConsumer/alerting_server_consumer.cs 
the System.Net.Mail.Send is blocking, according to MSDN.


Regards,

Matthias.

From jasonjwwilliams at gmail.com  Sun Nov 20 22:04:28 2011
From: jasonjwwilliams at gmail.com (Jason J. W. Williams)
Date: Sun, 20 Nov 2011 15:04:28 -0700
Subject: [rabbitmq-discuss] EventingBasicConsumer is still
 experimentals? (.NET client)
In-Reply-To: <4EC9780C.9020409@rabbitmq.com>
References: <CAHZAEpdgHBEpuNjdaNBm2ov+xk9rj35VMRu4=87BfBg023O9fQ@mail.gmail.com>
	<4EC8CFF1.2020909@rabbitmq.com>
	<CAHZAEpeHjTJJc4iD1jnPXjXWiu5hhBkJP9dq+DKd0xbhtaOGsA@mail.gmail.com>
	<4EC8DFEC.6050204@rabbitmq.com>
	<CAHZAEpfjnUkCNjU7WM_csvBBkXUZ2SumUwA-R-gXP7dBOZi3=Q@mail.gmail.com>
	<4EC970D4.1070304@rabbitmq.com>
	<CAHZAEpcmSw+fYTQsOO=Sod2UHHZo-HxqmJpjitPvdH2Yho81KA@mail.gmail.com>
	<4EC9780C.9020409@rabbitmq.com>
Message-ID: <CAHZAEpfmoJFzTFt0udjDYxJkidP97GyvkgBQDOAs=xiO3jNjCw@mail.gmail.com>

>
> On that note, in https://github.com/**rabbitinaction/sourcecode/**
> blob/master/csharp/appendix-a/**AlertingServerConsumer/**
> alerting_server_consumer.cs<https://github.com/rabbitinaction/sourcecode/blob/master/csharp/appendix-a/AlertingServerConsumer/alerting_server_consumer.cs>the System.Net.Mail.Send is blocking, according to MSDN.
>

Yeah it is, but both code paths end up sending e-mail to the same server,
so if that server is unavailable both paths would be unable to successfully
process messages anyway. Also, it's an example so it's very simplified over
what I would do for production code.

-J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111120/07779995/attachment.htm>

From videlalvaro at gmail.com  Sun Nov 20 22:12:45 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Sun, 20 Nov 2011 23:12:45 +0100
Subject: [rabbitmq-discuss] rabbitmq-server repo inaccessible over http
Message-ID: <93B9807E-A853-4411-A6AA-4A14DFD7C189@gmail.com>

Hi,

I was trying to acces this URL: http://hg.rabbitmq.com/rabbitmq-server/

But i get an error like this:

Script output follows

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, [no address given] and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log.

Apache/2.2.16 (Debian) Server at hg.rabbitmq.com Port 80


I was seeing that my RSS feed with changes was "down" so I went to the website and got the same result.

hg clone http://hg.rabbitmq.com/rabbitmq-server/ seems to work tho.

-Alvaro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111120/619e6319/attachment.htm>

From matthias at rabbitmq.com  Sun Nov 20 22:20:42 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 20 Nov 2011 22:20:42 +0000
Subject: [rabbitmq-discuss] rabbitmq-server repo inaccessible over http
In-Reply-To: <93B9807E-A853-4411-A6AA-4A14DFD7C189@gmail.com>
References: <93B9807E-A853-4411-A6AA-4A14DFD7C189@gmail.com>
Message-ID: <4EC97D3A.1000305@rabbitmq.com>

Alvaro,

On 20/11/11 22:12, Alvaro Videla wrote:
> I was trying to acces this URL: http://hg.rabbitmq.com/rabbitmq-server/
>
> But i get an error

Thanks for reporting this. I saw the same earlier today but then it 
started working again.

Looks like a time out to me; pages for other repos work fine but some 
take quite a while to load.

We upgraded the debian version on some of our machines recently, so it 
may be related to that. Will look into it tomorrow.

Regards,

Matthias.

From john.doe44210 at gmail.com  Mon Nov 21 09:11:01 2011
From: john.doe44210 at gmail.com (john doe)
Date: Mon, 21 Nov 2011 10:11:01 +0100
Subject: [rabbitmq-discuss] questions about RpcClient
In-Reply-To: <4EC9202D.30303@rabbitmq.com>
References: <CALbPev=K4WWDv-W8=vggYEx7EqJCMcb+VwWiFLCR62dD800y7A@mail.gmail.com>
	<4EC9202D.30303@rabbitmq.com>
Message-ID: <CALbPev=G3YT_mz-o_7ZX__OjBajHO+tou5euHV8JRm+QoKqPXw@mail.gmail.com>

Thank you Matthias.

If this class is known to *not* be threadsafe, why is there a
"synchronized" statement in primitiveCall? It somewhat confuses me.

John

2011/11/20 Matthias Radestock <matthias at rabbitmq.com>

> On 18/11/11 13:42, john doe wrote:
>
>> Is this class threadsafe? I guess not because channels are not threadsafe?
>>
>
> Correct.
>
>
> Why is the routing key a final attribute? Why is it not a parameter of
>> primitiveCall(...)?
>>
>
> The idea is that you create RpcClients to talk to specific rpc servers.
> The latter are typically identified by a combination of exchange and
> routing key.
>
> Matthias.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111121/71483d3a/attachment.htm>

From matthias at rabbitmq.com  Mon Nov 21 09:24:48 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 21 Nov 2011 09:24:48 +0000
Subject: [rabbitmq-discuss] questions about RpcClient
In-Reply-To: <CALbPev=G3YT_mz-o_7ZX__OjBajHO+tou5euHV8JRm+QoKqPXw@mail.gmail.com>
References: <CALbPev=K4WWDv-W8=vggYEx7EqJCMcb+VwWiFLCR62dD800y7A@mail.gmail.com>	<4EC9202D.30303@rabbitmq.com>
	<CALbPev=G3YT_mz-o_7ZX__OjBajHO+tou5euHV8JRm+QoKqPXw@mail.gmail.com>
Message-ID: <4ECA18E0.3080601@rabbitmq.com>

On 21/11/11 09:11, john doe wrote:
> Thank you Matthias.
> If this class is known to *not* be threadsafe, why is there a
> "synchronized" statement in primitiveCall? It somewhat confuses me.

That synchronisation is necessary for the coordination of the thread 
issuing a call with the thread on which the reply arrives.

The code calls _channel.basicPublish, which is not threadsafe, outside 
of any synchronisation context. Hence it is not safe to issue calls from 
multiple threads or use the underlying channel in other threads.

Matthias.

From smetj.net at gmail.com  Mon Nov 21 10:00:42 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Mon, 21 Nov 2011 02:00:42 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ Shovel Connections
In-Reply-To: <4EC9085B.7000009@rabbitmq.com>
References: <004201cc735b$b4aa9c80$1dffd580$@omc-international.com.au>
	<33495078.665.1321537186592.JavaMail.geo-discussion-forums@yqni5>
	<4EC9085B.7000009@rabbitmq.com>
Message-ID: <29483802.904.1321869642710.JavaMail.geo-discussion-forums@yqan20>


>
> Try configuring heartbeats for the connections, which will allow rabbit
> to detect this situation much more promptly. See the shovel readme for
> how to do that.


ok, done that.

I'd suggest that you use "amqp://" instead of "amqp://localhost".


ok, done that.

 epmd should have nothing to do with this. And killing epmd does not kill 
> rabbit


Well after killing the rabbit processes there's one which can't be killed 
and stays open, which is epmd.


Thanks for the pointers, I'll leave the setup running with these changes 
and report any changes.

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111121/0b99d6f6/attachment.htm>

From matthias at rabbitmq.com  Mon Nov 21 10:05:55 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 21 Nov 2011 10:05:55 +0000
Subject: [rabbitmq-discuss] RabbitMQ Shovel Connections
In-Reply-To: <29483802.904.1321869642710.JavaMail.geo-discussion-forums@yqan20>
References: <004201cc735b$b4aa9c80$1dffd580$@omc-international.com.au>	<33495078.665.1321537186592.JavaMail.geo-discussion-forums@yqni5>	<4EC9085B.7000009@rabbitmq.com>
	<29483802.904.1321869642710.JavaMail.geo-discussion-forums@yqan20>
Message-ID: <4ECA2283.2050300@rabbitmq.com>

On 21/11/11 10:00, Jelle Smet wrote:
> Well after killing the rabbit processes there's one which can't be
> killed and stays open, which is epmd.

There's no need to kill epmd. It gets started by whichever Erlang 
program first starts up on the machine and thereafter just stays running.

> Thanks for the pointers, I'll leave the setup running with these
> changes and report any changes.

Great. Thanks.

Matthias.

From majek04 at gmail.com  Mon Nov 21 10:51:57 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Mon, 21 Nov 2011 10:51:57 +0000
Subject: [rabbitmq-discuss] Amqphp - new release
In-Reply-To: <CAOvN6FAC_1tm2EA=+BGs_jCzPUg3-mXfWs2+PzCAGxa_HiPKrw@mail.gmail.com>
References: <CAOvN6FAC_1tm2EA=+BGs_jCzPUg3-mXfWs2+PzCAGxa_HiPKrw@mail.gmail.com>
Message-ID: <CABzX+qzT=_Ya+f5po_EHjcdgGhmcT=ZRqn-Xfq23CSiNHhXhvw@mail.gmail.com>

On Sun, Nov 20, 2011 at 10:57, Robin Harvey <harvey.robin at gmail.com> wrote:
> I thought you may be interested to know that I've just tagged a new release
> (0.9.2) of the Amqphp project, noteworthy changes in this version are:
>
> ?* Support for persistent connections, channels and consumers in web
> servers.
> ?* A new Factory component which can help externalize connection and broker
> configuration
> ?* Improved event loop implementation allows the user more flexibility to
> escape from a consuming event loop
> ?* Much improved user documentation:
> https://github.com/BraveSirRobin/amqphp/wiki/Documentation
> ?* Simplified and consolidated the demos:
> https://github.com/BraveSirRobin/amqphp/tree/master/demos
>
> I'm starting out on my own in January so this is likely to be the last
> "major" release for a while, although I'll still be around to fix bugs.

Hi,

Sorry for a stupid question, but how does the `amqphp` relate
to `php-amqplib` we're using in tutorials?
    https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/php

If it's a different beast, I'd be more than happy to add this library
to our tutorials repo! (assuming someone will write the code,
following our strict tutorial style).

Cheers,
  Marek

From smetj.net at gmail.com  Mon Nov 21 10:53:10 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Mon, 21 Nov 2011 02:53:10 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ Shovel Connections
In-Reply-To: <4EC9085B.7000009@rabbitmq.com>
References: <004201cc735b$b4aa9c80$1dffd580$@omc-international.com.au>
	<33495078.665.1321537186592.JavaMail.geo-discussion-forums@yqni5>
	<4EC9085B.7000009@rabbitmq.com>
Message-ID: <12509632.984.1321872790705.JavaMail.geo-discussion-forums@yqan20>



> Try configuring heartbeats for the connections, which will allow rabbit
> to detect this situation much more promptly. See the shovel readme for
> how to do that.

 
I had some probs enabling this at first, ... Not sure this is due to 
incorrect documentation or implementation bug. 
https://github.com/rabbitmq/rabbitmq-shovel/issues/1
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111121/7a037078/attachment.htm>

From majek04 at gmail.com  Mon Nov 21 10:53:36 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Mon, 21 Nov 2011 10:53:36 +0000
Subject: [rabbitmq-discuss] erlang examples
In-Reply-To: <CAE3QcPK5O1Ra5+g26Tns=Ku5VeBKomReu5NdKmTkCAWG7KGt3w@mail.gmail.com>
References: <CAE3QcPK5O1Ra5+g26Tns=Ku5VeBKomReu5NdKmTkCAWG7KGt3w@mail.gmail.com>
Message-ID: <CABzX+qxpDZweDh7ML=trb51SzzmQkf1ND+hiNkipRqsMGZPX2A@mail.gmail.com>

On Fri, Nov 18, 2011 at 20:08, Sacha Molin <sacha.molin at evolope.se> wrote:
> ?I decidec to use rabbitmq for the first time, i got everything up and
> running, but when i tried the erlang examples i just got this error message:
>
> can't find include lib "amqp_client/include/amqp_
> client.hrl"
>
> any ideas how i can solve it and what makes it not find it ?

Hi,

Did you follow the instructions from erlang tutorial readme?
   https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/erlang#readme

Cheers,
    Marek

From videlalvaro at gmail.com  Mon Nov 21 10:59:27 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Mon, 21 Nov 2011 11:59:27 +0100
Subject: [rabbitmq-discuss] Amqphp - new release
In-Reply-To: <CABzX+qzT=_Ya+f5po_EHjcdgGhmcT=ZRqn-Xfq23CSiNHhXhvw@mail.gmail.com>
References: <CAOvN6FAC_1tm2EA=+BGs_jCzPUg3-mXfWs2+PzCAGxa_HiPKrw@mail.gmail.com>
	<CABzX+qzT=_Ya+f5po_EHjcdgGhmcT=ZRqn-Xfq23CSiNHhXhvw@mail.gmail.com>
Message-ID: <CAMcAHLXraceV5i-LsDON7cuitqoq6BvXKgLj802GROSPJ80zNw@mail.gmail.com>

Hi Marek,

The libraries are not related.

Cheers,

Alvaro

On Mon, Nov 21, 2011 at 11:51 AM, Marek Majkowski <majek04 at gmail.com> wrote:

> On Sun, Nov 20, 2011 at 10:57, Robin Harvey <harvey.robin at gmail.com>
> wrote:
> > I thought you may be interested to know that I've just tagged a new
> release
> > (0.9.2) of the Amqphp project, noteworthy changes in this version are:
> >
> >  * Support for persistent connections, channels and consumers in web
> > servers.
> >  * A new Factory component which can help externalize connection and
> broker
> > configuration
> >  * Improved event loop implementation allows the user more flexibility to
> > escape from a consuming event loop
> >  * Much improved user documentation:
> > https://github.com/BraveSirRobin/amqphp/wiki/Documentation
> >  * Simplified and consolidated the demos:
> > https://github.com/BraveSirRobin/amqphp/tree/master/demos
> >
> > I'm starting out on my own in January so this is likely to be the last
> > "major" release for a while, although I'll still be around to fix bugs.
>
> Hi,
>
> Sorry for a stupid question, but how does the `amqphp` relate
> to `php-amqplib` we're using in tutorials?
>    https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/php
>
> If it's a different beast, I'd be more than happy to add this library
> to our tutorials repo! (assuming someone will write the code,
> following our strict tutorial style).
>
> Cheers,
>  Marek
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111121/f4a31738/attachment.htm>

From vveludan at gmail.com  Sun Nov 20 22:37:10 2011
From: vveludan at gmail.com (Venkat)
Date: Sun, 20 Nov 2011 14:37:10 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq clustering using mirrored queues
Message-ID: <9e116867-9a68-4bd7-b78b-168dfdb0c47c@cc2g2000vbb.googlegroups.com>

Good evening.
We are testing out mirrored queues using RabbitMQ 2.6.1 and spring-
amqp 1.0 on Cent OS in cloud environment.
Assuming that we create a cluster with the following criteria:
- Create cluster with two RabbitMQ nodes Node1 and Node2 (Node2 is
clustered with Node1).
- Queues are created with x-ha-policy = all

Once the cluster is set up and everything is up and running, Node1 is
down (hard failure for the purpose of testing). In cloud environment I
may not be able to bring back Node1 instead a brand new Node is joined
to the cluster. In other words the Master node Node1 is not there
anymore. Could you please let me know what could be consequences in
this situation.

Referring to http://www.rabbitmq.com/ha.html:
All actions other than publishes go only to the master, and the master
then broadcasts the effect of the actions to the slaves. Thus clients
consuming from a mirrored queue are in fact consuming from the master.

I am concerned about the above said, would there be any damage done to
the slave node Node2 in case Node1 (master) is not retained and a
brand new node is joined to the cluster. Could you please suggest
better approach in a situation where a Master Node cannot be brought
back at all.

Thanks
Venkat

From vveludan at gmail.com  Sun Nov 20 22:49:30 2011
From: vveludan at gmail.com (Venkat)
Date: Sun, 20 Nov 2011 14:49:30 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq clustering using mirrored queues
Message-ID: <5432a937-112a-40e2-b805-010ac291a067@g7g2000vbd.googlegroups.com>

Good evening.
We are testing out mirrored queues using RabbitMQ 2.6.1 and spring-
amqp 1.0 on Cent OS in cloud environment.
Assuming that we create a cluster with the following criteria:
- Create cluster with two RabbitMQ nodes Node1 and Node2 (Node2 is
clustered with Node1).
- Queues are created with x-ha-policy = all

Once the cluster is set up and everything is up and running, Node1 is
down (hard failure for the purpose of testing). In cloud environment I
may not be able to bring back Node1 instead a brand new Node is joined
to the cluster. In other words the Master node Node1 is not there
anymore. Could you please let me know what could be consequences in
this situation.

Referring to http://www.rabbitmq.com/ha.html:
All actions other than publishes go only to the master, and the master
then broadcasts the effect of the actions to the slaves. Thus clients
consuming from a mirrored queue are in fact consuming from the master.

I am concerned about the above said, would there be any damage done to
the slave node Node2 in case Node1 (master) is not retained and a
brand new node is joined to the cluster. Could you please suggest
better approach in a situation where a Master Node cannot be brought
back at all.

Thanks
Venkat

From pl at danskscanning.dk  Mon Nov 21 08:23:55 2011
From: pl at danskscanning.dk (Peter Larsen)
Date: Mon, 21 Nov 2011 09:23:55 +0100
Subject: [rabbitmq-discuss] Wrong result retrieving messages from 1 queue
	bound to 2 exchanges
Message-ID: <4CF8CF5F8BDDB14AB6EA467D21B4164A7E3AB67E07@owa.webmail.danskscanning.dk>

Hello

I have a problem that is really frustrating. Can you help me?

Here is the scenario: (See codesnippets further down)

I have declared one queue "pp-queue" and is binding this queue to exchange "weblager-exchange with binding key "#.tiff.#" and to exchange "pp-exchange" with binding key "#.tif.#". Both exchanges are declared as type "topic".

Then publishing 2 messages say "wl message 1" and "wl message 2" to exchange "weblager-exchange" using routing key "wl.tiff.tiff2pdf"
and publishing  2 messages say "pp message 1" and "pp message 2" to exchange "pp-exchange" using routing key "pp.tif.cmpt" the result as follows:

consume command of queue "pp-queue" with binding to "weblager-exchange" retrieves message " wl message 1" and " pp message 1" and
consume command of queue "pp-queue" with binding to "pp-exchange" retrieves message " wl message 2" and " pp message 2".

Why does it not return the correct messages according to the binding keys?




Codesnippet - declaration of pp-queue, binding to weblager-exchange and consume - first call

$channel->basic_declare(
                      'pp-queue',
                      false,
                      true,
                      false,
                      false
);

$channel->queue_bind(
'pp-queue',
                      'weblager-exchange',
                      '#.tiff.#',
                      false,
                      NULL,
                      NULL
);

$channel->basic_qos(
                      null,
                      1,
                      null
);

$channel->basic_consume(
                      'pp-queue',
                      'wl',
                      false
                      false
                      false
                      false
$settings->callback // callback
);

Codesnippet - declaration of pp-queue, binding to pp-exchange and consume - second call

$channel->basic_consume(
                      'pp-queue',
                      false,
                      true,
                      false,
                      false
);

$channel->queue_bind(
'pp-queue',
                      'pp-exchange',
                      '#.tif.#',
                      false,
                      NULL,
                      NULL
);

$channel->basic_qos(
                      null,
                      1,
                      null
);

$channel->basic_consume(
                      'pp-queue',
                      'pp',
                      false
                      false
                      false
                      false
$settings->callback // callback
);

Codesnippet - declaration of and publishing to weblager-exchange

$channel->exchange_declare(
                      'weblager-exchange',
                      'topic',
                      false,
                      true,
                      false,
                      false,
                      false,
                      NULL,
                      NULL
);

$msg = new AMQPMessage(json_encode('wl.tiff.tiff2pdf'));

$channel->basic_publish(
                      $msg,
                      'weblager-exchange',
                      'wl.tiff.tiff2pdf',
                      false,
                      false,
                      NULL
);

Codesnippet - declaration of and publishing to pp-exchange

$channel->exchange_declare(
                      'pp-exchange',
                      'topic',
                      false,
                      true,
                      false,
                      false,
                      false,
                      NULL,
                      NULL
);

$msg = new AMQPMessage(json_encode('pp.tif.cmpt'));

$channel->basic_publish(
                      $msg,
                      'pp-exchange',
                      'pp.tif.cmpt',
                      false,
                      false,
                      NULL
);





Best regards
Dansk Scanning A/S

Peter Larsen
Senior IT-developer

E-mail: pl at danskscanning.dk

Lilleb?ltsvej 33
DK-6715 Esbjerg N

Phone:              +45 70 114 116
Fax:                     +45 76 114 269

---------------------------------------------------------------------------------------------------------------------------------
This e-mail may contain confidential and/or privileged information.
If you are not the addressee or authorised to receive this for the addressee, you must not use, copy, disclose or take any action based on this e-mail  or any information herein.
If you have received this e-mail in error, please advise the sender immediately and delete this e-mail. Non-compliance with this disclaimer may be subject to Legal Professional Previlege.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111121/bc4dfa5d/attachment.htm>

From harvey.robin at gmail.com  Mon Nov 21 11:43:26 2011
From: harvey.robin at gmail.com (Robin Harvey)
Date: Mon, 21 Nov 2011 11:43:26 +0000
Subject: [rabbitmq-discuss] Amqphp - new release
In-Reply-To: <CAMcAHLXraceV5i-LsDON7cuitqoq6BvXKgLj802GROSPJ80zNw@mail.gmail.com>
References: <CAOvN6FAC_1tm2EA=+BGs_jCzPUg3-mXfWs2+PzCAGxa_HiPKrw@mail.gmail.com>
	<CABzX+qzT=_Ya+f5po_EHjcdgGhmcT=ZRqn-Xfq23CSiNHhXhvw@mail.gmail.com>
	<CAMcAHLXraceV5i-LsDON7cuitqoq6BvXKgLj802GROSPJ80zNw@mail.gmail.com>
Message-ID: <CAOvN6FCZeEHkaNZQKcCfRd=TD+zyPJ4AtkeNS9TZeZgX7YyeiA@mail.gmail.com>

Hi Marek,

Mine is a complete rewrite from the ground up.  I'd be happy to implement
the tutorial demos - I've already done a basic port of Alvaro's "Thumper"
demos - have a look in the Amqphp demos dir on Github.

Thanks,
--Robin


On 21 November 2011 10:59, Alvaro Videla <videlalvaro at gmail.com> wrote:

> Hi Marek,
>
> The libraries are not related.
>
> Cheers,
>
> Alvaro
>
> On Mon, Nov 21, 2011 at 11:51 AM, Marek Majkowski <majek04 at gmail.com>wrote:
>
>> On Sun, Nov 20, 2011 at 10:57, Robin Harvey <harvey.robin at gmail.com>
>> wrote:
>> > I thought you may be interested to know that I've just tagged a new
>> release
>> > (0.9.2) of the Amqphp project, noteworthy changes in this version are:
>> >
>> >  * Support for persistent connections, channels and consumers in web
>> > servers.
>> >  * A new Factory component which can help externalize connection and
>> broker
>> > configuration
>> >  * Improved event loop implementation allows the user more flexibility
>> to
>> > escape from a consuming event loop
>> >  * Much improved user documentation:
>> > https://github.com/BraveSirRobin/amqphp/wiki/Documentation
>> >  * Simplified and consolidated the demos:
>> > https://github.com/BraveSirRobin/amqphp/tree/master/demos
>> >
>> > I'm starting out on my own in January so this is likely to be the last
>> > "major" release for a while, although I'll still be around to fix bugs.
>>
>> Hi,
>>
>> Sorry for a stupid question, but how does the `amqphp` relate
>> to `php-amqplib` we're using in tutorials?
>>    https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/php
>>
>> If it's a different beast, I'd be more than happy to add this library
>> to our tutorials repo! (assuming someone will write the code,
>> following our strict tutorial style).
>>
>> Cheers,
>>  Marek
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111121/41c05382/attachment.htm>

From simon at rabbitmq.com  Mon Nov 21 11:50:37 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 21 Nov 2011 11:50:37 +0000
Subject: [rabbitmq-discuss] rabbitmq clustering using mirrored queues
In-Reply-To: <9e116867-9a68-4bd7-b78b-168dfdb0c47c@cc2g2000vbb.googlegroups.com>
References: <9e116867-9a68-4bd7-b78b-168dfdb0c47c@cc2g2000vbb.googlegroups.com>
Message-ID: <4ECA3B0D.1070602@rabbitmq.com>

On 20/11/11 22:37, Venkat wrote:
> I am concerned about the above said, would there be any damage done to
> the slave node Node2 in case Node1 (master) is not retained and a
> brand new node is joined to the cluster. Could you please suggest
> better approach in a situation where a Master Node cannot be brought
> back at all.

There will always be a master node for the queue as long as the cluster 
remains alive - as soon as the old master goes down one of the slaves 
will be promoted. Even if you bring the old master back it will be a new 
slave.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Mon Nov 21 11:55:14 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 21 Nov 2011 11:55:14 +0000
Subject: [rabbitmq-discuss] Wrong result retrieving messages from 1
 queue bound to 2 exchanges
In-Reply-To: <4CF8CF5F8BDDB14AB6EA467D21B4164A7E3AB67E07@owa.webmail.danskscanning.dk>
References: <4CF8CF5F8BDDB14AB6EA467D21B4164A7E3AB67E07@owa.webmail.danskscanning.dk>
Message-ID: <4ECA3C22.7060400@rabbitmq.com>

On 21/11/11 08:23, Peter Larsen wrote:
> Codesnippet - declaration of pp-queue, binding to weblager-exchange and
> consume - first call

Please can you state which language and library this is using? It's not 
always obvious to us...

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From chadtomkiss at hotmail.co.uk  Mon Nov 21 12:07:25 2011
From: chadtomkiss at hotmail.co.uk (Chad Tomkiss)
Date: Mon, 21 Nov 2011 04:07:25 -0800 (PST)
Subject: [rabbitmq-discuss] Rebilling Customers
Message-ID: <cf4f6df2-a156-4ee8-958c-87e9c20fd5a2@h42g2000yqd.googlegroups.com>

Hi,

Im thinking of using a message queue to deal with our customer's
subscriptions.

Currently, we run a cron every 5 mins to bill 20 people/send invoice
etc, but not comfortable with this approach as the num of people
needed to bill increases, with the chance of cron overlapping etc.

Would it make sense to add all subscriptionIDs to a queue.. and then
set up workers to process the queue by getting the ID and then billing
that subscription?

Any help or suggestions would be much appreciated.


Kind regards,

Chad

From videlalvaro at gmail.com  Mon Nov 21 12:38:52 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Mon, 21 Nov 2011 13:38:52 +0100
Subject: [rabbitmq-discuss] Wrong result retrieving messages from 1
 queue bound to 2 exchanges
In-Reply-To: <4ECA3C22.7060400@rabbitmq.com>
References: <4CF8CF5F8BDDB14AB6EA467D21B4164A7E3AB67E07@owa.webmail.danskscanning.dk>
	<4ECA3C22.7060400@rabbitmq.com>
Message-ID: <CAMcAHLUTbB-=TRb4vKpFyS23A9kz2i5UcC7r6_BkvfWU0avn=Q@mail.gmail.com>

You seem to be using the php-amqplib library? but:

If that's the case there's no "basic_declare" method. Also in your second
snippet you start with a "basic_consume". Maybe you meant "queue_declare"?

On Mon, Nov 21, 2011 at 12:55 PM, Simon MacMullen <simon at rabbitmq.com>wrote:

> On 21/11/11 08:23, Peter Larsen wrote:
>
>> Codesnippet - declaration of pp-queue, binding to weblager-exchange and
>> consume - first call
>>
>
> Please can you state which language and library this is using? It's not
> always obvious to us...
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> ______________________________**_________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111121/cdfa0c0c/attachment.htm>

From simon at rabbitmq.com  Mon Nov 21 13:07:10 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 21 Nov 2011 13:07:10 +0000
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
 connection
In-Reply-To: <CAGnU7uiEduM3C3cvd=f3VeBGUEhudSDU9KDRMmUtxcHv-TzMQA@mail.gmail.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>	<CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>	<4EC030E3.1090807@rabbitmq.com>	<CAGnU7uj8PhXp+7JMcJ-XsDrcYNDKno-t5HnGnrwup+F41vCyHw@mail.gmail.com>	<4EC0CCDE.3030505@rabbitmq.com>	<CAGnU7uj3U-CHE-Bo_TcxuPxsGdRLyUcngnx-F9xrP=Q3jR-uuA@mail.gmail.com>	<4EC15EA2.4010507@rabbitmq.com>	<CAGnU7ugZ-QkC7n8n7XxqcV_AVyLDRaVTA6bo2vK+S7=Nki6yjw@mail.gmail.com>
	<CAGnU7uiEduM3C3cvd=f3VeBGUEhudSDU9KDRMmUtxcHv-TzMQA@mail.gmail.com>
Message-ID: <4ECA4CFE.5000406@rabbitmq.com>

Hi Benjamin.

In general we do accept patches, although due to our Corporate Overlords 
you would have to sign a contributor agreement.

I would be reluctant to merge such a patch though, since:

* It's to work around a server bug which will be fixed in the next release

* This bug has been around for most of a year without attracting much 
attention

* Option 1) is ugly; option 2) is (somewhat) complicated.

BTW, I got a reply from the spring-amqp maintainer, Dave Syer:

 > Spring AMQP doesn't explicitly invoke close() in different threads.
 > There's nothing to stop it happening (as is the case with the Java
 > client itself I suppose), but we actually hardly ever call
 > Channel.close() so it is pretty unlikely.  I would be interested to
 > hear of a way to tickle a normal app into this behaviour.

So I still wonder if the threading thing is something you are doing in 
your app.

Cheers, Simon

On 17/11/11 18:12, Benjamin Bennett wrote:
> Had a question if no one is working on patch for the java client do
> accept external patches?
>
> I was going to either change it to the following .
>
> 1) Remove the infinite wait on a connection close.
>
> Or
>
> Place a BlockingQueue on the channel closes during the close call.
>
> The sychronize on the BlockingQueue for the connection close  , of
> which it cannot close the connection if a channel is currently be
> closed.
>
> The second is more code but it would keep the infinity timeout in
> place will working around the deadlock issue.
>
> It would save a lot of pain if people are using 2.7.1 and below.
>
> On Mon, Nov 14, 2011 at 5:21 PM, Benjamin Bennett<benbennett at gmail.com>  wrote:
>> I am using the spring amqp lib and it is doing the connection closing when
>> the spring context is closed. I do not think it has a property to inject the
>> hack. Also if you know any of the spring amqp devs. Having you telling them
>> to check to make sure it is doing the way you have described will have much
>> more authority than me.
>>
>> I will probably hack the spring amqp lib for now
>>
>> On Nov 14, 2011 12:32 PM, "Simon MacMullen"<simon at rabbitmq.com>  wrote:
>>>
>>> On 14/11/11 16:15, Benjamin Bennett wrote:
>>>>
>>>> Here is report from  rabbitmqctrl report
>>>> http://pastebin.com/MSwv82C3
>>>
>>> Ah, thank you. After some poking, that genuinely looks like a server bug.
>>> Damn.
>>>
>>> In order for it to happen you need the last channel close / close_ok to
>>> overlap with the connection close / close_ok. With the Java client you have
>>> to invoke Channel.close() and Connection.close() from different threads to
>>> get this to happen, and still be unlucky.
>>>
>>> You should be allowed to do this, but right now it's racy.
>>>
>>>> I was going to attempt to put a timeout on the connection close method
>>>> but that really would be a hack.
>>>
>>> Indeed! Other slightly less hacky workarounds until we get this fixed:
>>>
>>> * Invoke Channel.close() and Connection.close() from the same thread, or
>>> otherwise ensure they don't overlap.
>>>
>>> * Don't invoke Channel.close() if you know you're going to invoke
>>> Connection.close() anyway.
>>>
>>> Cheers, Simon
>>>
>>> --
>>> Simon MacMullen
>>> RabbitMQ, VMware
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>


-- 
Simon MacMullen
RabbitMQ, VMware

From steve at rabbitmq.com  Mon Nov 21 14:25:40 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Mon, 21 Nov 2011 14:25:40 +0000
Subject: [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
In-Reply-To: <C9B490D1-4634-44A8-B10D-AC76F3203423@rabbitmq.com>
References: <CAAcXTOaNsa_wLLArna9gUruXTE2D4EFc1Z1BTKBgFGJ+1ZU=Tw@mail.gmail.com>
	<D1E9035C-9DB8-479D-8A5B-166411D19C24@rabbitmq.com>
	<CAAcXTOaxGzSS=JbjG3LQ0nEvFPozvKg505z0QY1wFsqQzinwpA@mail.gmail.com>
	<E743030D-082A-4D3D-96BE-14FCAE7AFE60@rabbitmq.com>
	<CAAcXTOa1xRyqqkm7CkuTGM0rXNy6-13YEk-OB12=M3FpQ6OfiA@mail.gmail.com>
	<1552CB63-B89F-443D-AEC8-D1BD9B3BE2CA@rabbitmq.com>
	<C9B490D1-4634-44A8-B10D-AC76F3203423@rabbitmq.com>
Message-ID: <ABEA7638-7A54-4DE8-8DE7-78A416101D5A@rabbitmq.com>

And, of course, I read the JavaThreadPool implementations again, and we don't
have to shutdown our private ExecutorService when the connection fails, because
if it is not used it allocates no threads, and can be successfully GC'd when we
lose the reference.  Ergo, no leak.

We have to shut it down when we close the connection of course, and we do.

The best solution here is *not* to shutdown the executor service on connection
close *unless it is our own private one*. And to lift the restriction that the
ExecutorService must not be shared between connections.  This then allows the
user to allocate any ExecutorService to the consumer callbacks of a connection,
including sharing a service among several connections.

Let me know what you think.

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
Avoirdupois phr. 'Would you like peas with that?'
Abbey adj. Quite like an Abbe.
Definite phr. 'It's hard of hearing, I think.'
Modest n. The most mod.

On 16 Nov 2011, at 15:18, Steve Powell wrote:

> And, of course, I read it again, and we leak our private ExecutorService
> under the connection failure scenario, too.  Well spotted.
> 
> Steve Powell  (a happy bunny)
> ----------some more definitions from the SPD----------
> Avoirdupois phr. 'Would you like peas with that?'
> Abbey adj. Quite like an Abbe.
> Definite phr. 'It's hard of hearing, I think.'
> Modest n. The most mod.
> 
>> On 14 Nov 2011, at 10:43, Irmo Manie wrote:
>> There is a problem when connecting to a non-existing host. The
>> FrameHandler is created, and throwing a UnknownHostException, before
>> the AMQConnection is created and the ExecutorService is 'managed' and
>> thus the shutdown of the ExecutorService is left to the user again.
>> 
>> You can imagine that this causes a nice leak when you have an
>> automatic reconnection setup in place.

From simon at rabbitmq.com  Mon Nov 21 15:50:19 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 21 Nov 2011 15:50:19 +0000
Subject: [rabbitmq-discuss] rabbitmq-server repo inaccessible over http
In-Reply-To: <4EC97D3A.1000305@rabbitmq.com>
References: <93B9807E-A853-4411-A6AA-4A14DFD7C189@gmail.com>
	<4EC97D3A.1000305@rabbitmq.com>
Message-ID: <4ECA733B.6000505@rabbitmq.com>

On 20/11/11 22:20, Matthias Radestock wrote:
> We upgraded the debian version on some of our machines recently, so it
> may be related to that. Will look into it tomorrow.

So it looks like hgweb as shipped with Mercurial 1.6 is simply that much 
slower. Lovely.

I've tweaked it a bit to go faster again, hopefully it's usable now at 
least.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From videlalvaro at gmail.com  Mon Nov 21 15:52:29 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Mon, 21 Nov 2011 16:52:29 +0100
Subject: [rabbitmq-discuss] rabbitmq-server repo inaccessible over http
In-Reply-To: <4ECA733B.6000505@rabbitmq.com>
References: <93B9807E-A853-4411-A6AA-4A14DFD7C189@gmail.com>
	<4EC97D3A.1000305@rabbitmq.com> <4ECA733B.6000505@rabbitmq.com>
Message-ID: <0C20213D-E3BA-4A22-B2D4-8FD29E99C497@gmail.com>

Thanks!

Now I will be able to keep up with your commit messages ;-)

On Nov 21, 2011, at 4:50 PM, Simon MacMullen wrote:

> On 20/11/11 22:20, Matthias Radestock wrote:
>> We upgraded the debian version on some of our machines recently, so it
>> may be related to that. Will look into it tomorrow.
> 
> So it looks like hgweb as shipped with Mercurial 1.6 is simply that much slower. Lovely.
> 
> I've tweaked it a bit to go faster again, hopefully it's usable now at least.
> 
> Cheers, Simon
> 
> -- 
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

Sent form my Nokia 1100




From benbennett at gmail.com  Mon Nov 21 16:10:56 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Mon, 21 Nov 2011 10:10:56 -0600
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
	connection
In-Reply-To: <4ECA4CFE.5000406@rabbitmq.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>
	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>
	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>
	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>
	<CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>
	<4EC030E3.1090807@rabbitmq.com>
	<CAGnU7uj8PhXp+7JMcJ-XsDrcYNDKno-t5HnGnrwup+F41vCyHw@mail.gmail.com>
	<4EC0CCDE.3030505@rabbitmq.com>
	<CAGnU7uj3U-CHE-Bo_TcxuPxsGdRLyUcngnx-F9xrP=Q3jR-uuA@mail.gmail.com>
	<4EC15EA2.4010507@rabbitmq.com>
	<CAGnU7ugZ-QkC7n8n7XxqcV_AVyLDRaVTA6bo2vK+S7=Nki6yjw@mail.gmail.com>
	<CAGnU7uiEduM3C3cvd=f3VeBGUEhudSDU9KDRMmUtxcHv-TzMQA@mail.gmail.com>
	<4ECA4CFE.5000406@rabbitmq.com>
Message-ID: <CAGnU7uhPjyUWkhWf82Vj-LmxwSijM6kUx9==MEEDx6ykGWw0vA@mail.gmail.com>

Our application is using the CachingConnectionFactory, Spring
Integration AMQP .
The way this is happening is just by applying the @DirtiesContext in
our unit test , that we need to reload the context, at that time the
channel close and connection close are closed in different threads.
The BlockingQueueConsumer is the one that end ups doing the channel
closes but the CachingConnectionFactory actually  does the closes .


The stacktraces have no other threads running except spring-amqp
threads BlockingQueueConsumer and CachingConnectionFactory.

My only comment about attracting attention it is a race condition ,
and race conditions are the most painful bugs to have to deal with.

On my dev box I have only seen the issue one time in 200 runs that ran
over night.
On our test windows 7 vms it happens 50% of the time, sample size was 40 runs.
On our windows xp test vms it has never happened.

In our production we get a "The service failed to close in timely
manner" and doesn't shut down.

Finally if you are fixing it in the server , what about the previous
versions? I don't even think spring-amqp has migrated to 2.7 series
java client because it is backwards incompatible.

Thanks,
Benjamin Bennett

On Mon, Nov 21, 2011 at 7:07 AM, Simon MacMullen <simon at rabbitmq.com> wrote:
> Hi Benjamin.
>
> In general we do accept patches, although due to our Corporate Overlords you
> would have to sign a contributor agreement.
>
> I would be reluctant to merge such a patch though, since:
>
> * It's to work around a server bug which will be fixed in the next release
>
> * This bug has been around for most of a year without attracting much
> attention
>
> * Option 1) is ugly; option 2) is (somewhat) complicated.
>
> BTW, I got a reply from the spring-amqp maintainer, Dave Syer:
>
>> Spring AMQP doesn't explicitly invoke close() in different threads.
>> There's nothing to stop it happening (as is the case with the Java
>> client itself I suppose), but we actually hardly ever call
>> Channel.close() so it is pretty unlikely. ?I would be interested to
>> hear of a way to tickle a normal app into this behaviour.
>
> So I still wonder if the threading thing is something you are doing in your
> app.
>
> Cheers, Simon
>
> On 17/11/11 18:12, Benjamin Bennett wrote:
>>
>> Had a question if no one is working on patch for the java client do
>> accept external patches?
>>
>> I was going to either change it to the following .
>>
>> 1) Remove the infinite wait on a connection close.
>>
>> Or
>>
>> Place a BlockingQueue on the channel closes during the close call.
>>
>> The sychronize on the BlockingQueue for the connection close ?, of
>> which it cannot close the connection if a channel is currently be
>> closed.
>>
>> The second is more code but it would keep the infinity timeout in
>> place will working around the deadlock issue.
>>
>> It would save a lot of pain if people are using 2.7.1 and below.
>>
>> On Mon, Nov 14, 2011 at 5:21 PM, Benjamin Bennett<benbennett at gmail.com>
>> ?wrote:
>>>
>>> I am using the spring amqp lib and it is doing the connection closing
>>> when
>>> the spring context is closed. I do not think it has a property to inject
>>> the
>>> hack. Also if you know any of the spring amqp devs. Having you telling
>>> them
>>> to check to make sure it is doing the way you have described will have
>>> much
>>> more authority than me.
>>>
>>> I will probably hack the spring amqp lib for now
>>>
>>> On Nov 14, 2011 12:32 PM, "Simon MacMullen"<simon at rabbitmq.com> ?wrote:
>>>>
>>>> On 14/11/11 16:15, Benjamin Bennett wrote:
>>>>>
>>>>> Here is report from ?rabbitmqctrl report
>>>>> http://pastebin.com/MSwv82C3
>>>>
>>>> Ah, thank you. After some poking, that genuinely looks like a server
>>>> bug.
>>>> Damn.
>>>>
>>>> In order for it to happen you need the last channel close / close_ok to
>>>> overlap with the connection close / close_ok. With the Java client you
>>>> have
>>>> to invoke Channel.close() and Connection.close() from different threads
>>>> to
>>>> get this to happen, and still be unlucky.
>>>>
>>>> You should be allowed to do this, but right now it's racy.
>>>>
>>>>> I was going to attempt to put a timeout on the connection close method
>>>>> but that really would be a hack.
>>>>
>>>> Indeed! Other slightly less hacky workarounds until we get this fixed:
>>>>
>>>> * Invoke Channel.close() and Connection.close() from the same thread, or
>>>> otherwise ensure they don't overlap.
>>>>
>>>> * Don't invoke Channel.close() if you know you're going to invoke
>>>> Connection.close() anyway.
>>>>
>>>> Cheers, Simon
>>>>
>>>> --
>>>> Simon MacMullen
>>>> RabbitMQ, VMware
>>>> _______________________________________________
>>>> rabbitmq-discuss mailing list
>>>> rabbitmq-discuss at lists.rabbitmq.com
>>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>
>
> --
> Simon MacMullen
> RabbitMQ, VMware
>

From irmo.manie at gmail.com  Mon Nov 21 19:13:28 2011
From: irmo.manie at gmail.com (Irmo Manie)
Date: Mon, 21 Nov 2011 20:13:28 +0100
Subject: [rabbitmq-discuss] Breaking API changes in JAva API 2.7.0
In-Reply-To: <ABEA7638-7A54-4DE8-8DE7-78A416101D5A@rabbitmq.com>
References: <CAAcXTOaNsa_wLLArna9gUruXTE2D4EFc1Z1BTKBgFGJ+1ZU=Tw@mail.gmail.com>
	<D1E9035C-9DB8-479D-8A5B-166411D19C24@rabbitmq.com>
	<CAAcXTOaxGzSS=JbjG3LQ0nEvFPozvKg505z0QY1wFsqQzinwpA@mail.gmail.com>
	<E743030D-082A-4D3D-96BE-14FCAE7AFE60@rabbitmq.com>
	<CAAcXTOa1xRyqqkm7CkuTGM0rXNy6-13YEk-OB12=M3FpQ6OfiA@mail.gmail.com>
	<1552CB63-B89F-443D-AEC8-D1BD9B3BE2CA@rabbitmq.com>
	<C9B490D1-4634-44A8-B10D-AC76F3203423@rabbitmq.com>
	<ABEA7638-7A54-4DE8-8DE7-78A416101D5A@rabbitmq.com>
Message-ID: <CAAcXTOabuAyUzwJSkQ7zm+VTc6WaeKabP7p4WqW+OFK8ujJA=g@mail.gmail.com>

> And, of course, I read the JavaThreadPool implementations again, and we don't
> have to shutdown our private ExecutorService when the connection fails, because
> if it is not used it allocates no threads, and can be successfully GC'd when we
> lose the reference. ?Ergo, no leak.
>
> We have to shut it down when we close the connection of course, and we do.

Ah, you're absolutely right there!

> The best solution here is *not* to shutdown the executor service on connection
> close *unless it is our own private one*. And to lift the restriction that the
> ExecutorService must not be shared between connections. ?This then allows the
> user to allocate any ExecutorService to the consumer callbacks of a connection,
> including sharing a service among several connections.
>
> Let me know what you think.

To differentiate between private and given is a good thing I reckon.
When someone provides its own Executor, they should take full
responsibility for it and thus also close/stop it.

- Irmo

From matthias at rabbitmq.com  Mon Nov 21 20:39:18 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 21 Nov 2011 20:39:18 +0000
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <4EC92F8A.4080300@rabbitmq.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
	<4EC901F3.4040500@rabbitmq.com> <6250190793052131212@unknownmsgid>
	<4EC92F8A.4080300@rabbitmq.com>
Message-ID: <4ECAB6F6.9090502@rabbitmq.com>

Cameron,

On 20/11/11 16:49, Matthias Radestock wrote:
> Once connected, evaluate
>
> io:format("~p", [lists:reverse(lists:sort([{process_info(Pid, memory),
> Pid, process_info(Pid)} || Pid <- processes()]))]).
>
> Post the result and the output of 'rabbitmqctl status' at the time.

[output received off-list - thanks]

The memory is taken up by the mirror queue slave Erlang process.

How many messages were in the queue at the time?

Also, what memory limit does rabbit report in its log?

Are both nodes configured as disk nodes?

You mentioned that acks are batched; what is the batch size?

You mentioned that publishers use 'confirms'. Do they wait for 
confirmation after every message, after some batch of messages, or do 
they let confirms stream in completely independently?

I have so far failed to reproduce your observations locally. Is there 
any chance you could give us access to the slave machine?


Regards,

Matthias.

From hcoyote at ghostar.org  Mon Nov 21 21:11:57 2011
From: hcoyote at ghostar.org (Travis)
Date: Mon, 21 Nov 2011 15:11:57 -0600
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <4ECAB6F6.9090502@rabbitmq.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
	<4EC901F3.4040500@rabbitmq.com> <6250190793052131212@unknownmsgid>
	<4EC92F8A.4080300@rabbitmq.com> <4ECAB6F6.9090502@rabbitmq.com>
Message-ID: <CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>

[note:  Cameron and I work for the same place; I'm the sysadmin he's
working with on our rabbit cluster]

On Mon, Nov 21, 2011 at 2:39 PM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
> Cameron,
>
> On 20/11/11 16:49, Matthias Radestock wrote:
>>
>> Once connected, evaluate
>>
>> io:format("~p", [lists:reverse(lists:sort([{process_info(Pid, memory),
>> Pid, process_info(Pid)} || Pid <- processes()]))]).
>>
>> Post the result and the output of 'rabbitmqctl status' at the time.
>
> [output received off-list - thanks]
>
> The memory is taken up by the mirror queue slave Erlang process.
>
> How many messages were in the queue at the time?

The queue was sitting at about 10 thousand messages.

>
> Also, what memory limit does rabbit report in its log?

Memory limit set to 2408MB.

We have the vm_memory_high_watermark set to 10%.  The system has 24GB of memory.

>
> Are both nodes configured as disk nodes?

Yes.

>
> You mentioned that acks are batched; what is the batch size?

We ack in batches of 100.

>
> You mentioned that publishers use 'confirms'. Do they wait for confirmation
> after every message, after some batch of messages, or do they let confirms
> stream in completely independently?

We're shoveling from remote rabbitmqs into the cluster.  The shovels have a
prefetch of 1000.  They are set to confirm.  So I presume that the answer to
your questions depends on how the shovel works.


>
> I have so far failed to reproduce your observations locally. Is there any
> chance you could give us access to the slave machine?

Unfortunately no, but I can certainly run whatever diags you need.

Travis
-- 
Travis Campbell
travis at ghostar.org

From matthias at rabbitmq.com  Mon Nov 21 21:41:12 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 21 Nov 2011 21:41:12 +0000
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>	<4EC901F3.4040500@rabbitmq.com>	<6250190793052131212@unknownmsgid>	<4EC92F8A.4080300@rabbitmq.com>	<4ECAB6F6.9090502@rabbitmq.com>
	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>
Message-ID: <4ECAC578.3070202@rabbitmq.com>

Travis,

On 21/11/11 21:11, Travis wrote:
>> How many messages were in the queue at the time?
>
> The queue was sitting at about 10 thousand messages.

Have you ever seen the excessive memory use when there were no / very 
few messages in the queue?

Also, what CPU usage do you see when memory use is excessive? On the 
slave you are probably never going to be able to utilise much more than 
one core, since there is only one queue and no connections. So if CPU 
usage is getting near maxing out one core then the system will be 
operating at the limit.

>> Also, what memory limit does rabbit report in its log?
>
> Memory limit set to 2408MB.
>
> We have the vm_memory_high_watermark set to 10%.  The system has 24GB
> of memory.

The reason I was asking for what gets reported in the logs is just to 
make sure the settings have taken effect.

>> You mentioned that publishers use 'confirms'. Do they wait for confirmation
>> after every message, after some batch of messages, or do they let confirms
>> stream in completely independently?
>
> We're shoveling from remote rabbitmqs into the cluster.  The shovels have a
> prefetch of 1000.  They are set to confirm.  So I presume that the answer to
> your questions depends on how the shovel works.

The shovel simply converts confirms from the destination to acks on the 
source. So in your setup, due to the prefetch on the source, publishing 
will pause if there are 1000 confirms pending.


Regards,

Matthias.

From jerryk at vmware.com  Mon Nov 21 21:41:26 2011
From: jerryk at vmware.com (Jerry Kuch)
Date: Mon, 21 Nov 2011 13:41:26 -0800 (PST)
Subject: [rabbitmq-discuss] Rebilling Customers
In-Reply-To: <cf4f6df2-a156-4ee8-958c-87e9c20fd5a2@h42g2000yqd.googlegroups.com>
Message-ID: <619703537.454769.1321911686106.JavaMail.root@zimbra-prod-mbox-4.vmware.com>

Hi, Chad...

What you're describing sounds like a fairly standard work queue type 
design and many people use RabbitMQ for such things.  I assume that
the billing/invoice-generation process is something potentially time
consuming that you want to be doing with multiple workers running in
parallel asynchronously?

In that case the pattern in this tutorial (available in Python and 
Java versions) will be of interest to you:

http://www.rabbitmq.com/tutorials/tutorial-two-python.html

Best regards,
Jerry

----- Original Message -----
From: "Chad Tomkiss" <chadtomkiss at hotmail.co.uk>
To: rabbitmq-discuss at lists.rabbitmq.com
Sent: Monday, November 21, 2011 4:07:25 AM
Subject: [rabbitmq-discuss] Rebilling Customers

Hi,

Im thinking of using a message queue to deal with our customer's
subscriptions.

Currently, we run a cron every 5 mins to bill 20 people/send invoice
etc, but not comfortable with this approach as the num of people
needed to bill increases, with the chance of cron overlapping etc.

Would it make sense to add all subscriptionIDs to a queue.. and then
set up workers to process the queue by getting the ID and then billing
that subscription?

Any help or suggestions would be much appreciated.


Kind regards,

Chad
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From hcoyote at ghostar.org  Mon Nov 21 22:16:16 2011
From: hcoyote at ghostar.org (Travis)
Date: Mon, 21 Nov 2011 16:16:16 -0600
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <4ECAC578.3070202@rabbitmq.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
	<4EC901F3.4040500@rabbitmq.com> <6250190793052131212@unknownmsgid>
	<4EC92F8A.4080300@rabbitmq.com> <4ECAB6F6.9090502@rabbitmq.com>
	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>
	<4ECAC578.3070202@rabbitmq.com>
Message-ID: <CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>

On Mon, Nov 21, 2011 at 3:41 PM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
>
> Have you ever seen the excessive memory use when there were no / very few
> messages in the queue?

Yes.  We've seen this problem when there are only a few dozen messages
and when there
are hundreds of thousands.

Basically, it seems like the slave is always taking up 2-5x the amount
of memory that the
master uses.

>
> Also, what CPU usage do you see when memory use is excessive? On the slave
> you are probably never going to be able to utilise much more than one core,
> since there is only one queue and no connections. So if CPU usage is getting
> near maxing out one core then the system will be operating at the limit.

I do see short periods where cpu utilization goes to 100% for the
beam.smp, but it's not consistently at 100%.  The average cpu
utilization over the life of the process is about 48% right now.  The
system itself is not otherwise overloaded, sitting at about 70% idle
for today.

Looking at the two servers, the slave shows that it's beam.smp has
spent 12 more hours on cpu than the beam.smp on the master.  This
doesn't make sense to me if the slave is doing less work because it's
only handling traffic coming from the master.

master:
UID        PID  PPID  C    SZ   RSS PSR STIME TTY          TIME CMD
rabbitmq 15213 15211 30 246127 550868 4 Nov18 ?        23:30:42
/usr/lib64/erlang/erts-5.8.4/bin/beam.smp -W w -K true -A30 -P 1048576
-- -root /usr/lib64/erlan
rabbitmq 15331 15213  0  2634   452   2 Nov18 ?        00:00:00 inet_gethost 4
rabbitmq 15332 15331  0  4207   748   2 Nov18 ?        00:00:00 inet_gethost 4
rabbitmq 15333 15213  0   950   356   3 Nov18 ?        00:00:00
/usr/lib64/erlang/lib/os_mon-2.2.6/priv/bin/cpu_sup
rabbitmq 21654     1  0  2643   492   2 Nov17 ?        00:00:00
/usr/lib64/erlang/erts-5.8.4/bin/epmd -daemon


slave:
UID        PID  PPID  C    SZ   RSS PSR STIME TTY          TIME CMD
rabbitmq 27918     1  0  2643   364   4 Nov18 ?        00:00:00
/usr/lib64/erlang/erts-5.8.4/bin/epmd -daemon
rabbitmq 27965 27964 47 906682 2334424 5 Nov18 ?       1-12:05:24
/usr/lib64/erlang/erts-5.8.4/bin/beam.smp -W w -K true -A30 -P 1048576
-- -roo
rabbitmq 28065 27965  0  2634   452   7 Nov18 ?        00:00:00 inet_gethost 4
rabbitmq 28066 28065  0  4207   744   7 Nov18 ?        00:00:00 inet_gethost 4
rabbitmq 28067 27965  0   950   360   7 Nov18 ?        00:00:00
/usr/lib64/erlang/lib/os_mon-2.2.6/priv/bin/cpu_sup




Travis


-- 
Travis Campbell
travis at ghostar.org

From matthias at rabbitmq.com  Mon Nov 21 22:50:39 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 21 Nov 2011 22:50:39 +0000
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>	<4EC901F3.4040500@rabbitmq.com>	<6250190793052131212@unknownmsgid>	<4EC92F8A.4080300@rabbitmq.com>	<4ECAB6F6.9090502@rabbitmq.com>	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>	<4ECAC578.3070202@rabbitmq.com>
	<CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>
Message-ID: <4ECAD5BF.6050505@rabbitmq.com>

Travis,

On 21/11/11 22:16, Travis wrote:
> Yes.  We've seen this problem when there are only a few dozen messages
> and when there are hundreds of thousands.
>
> Basically, it seems like the slave is always taking up 2-5x the amount
> of memory that the master uses.

In my tests the slave uses a bit less memory than the master, which is 
what I would expect in a relatively lightly loaded system when there are 
no connections to the slave node.

> Looking at the two servers, the slave shows that it's beam.smp has
> spent 12 more hours on cpu than the beam.smp on the master.  This
> doesn't make sense to me if the slave is doing less work because it's
> only handling traffic coming from the master.

That's odd indeed. In my test I see the slave getting by with less than 
half the CPU utilisation of the master.

Do you see this memory and CPU pattern - with the slave using more than 
the master - all the time, including shortly after a restart?

I still haven't got a good trail to follow here. One thing to look at is 
the output of 'rabbitmqctl report' when the system is in the "excessive 
memory use" state. Please send us that.

Regards,

Matthias.

From cameron.davison at gmail.com  Mon Nov 21 23:09:59 2011
From: cameron.davison at gmail.com (Cameron Davison)
Date: Mon, 21 Nov 2011 17:09:59 -0600
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <4ECAD5BF.6050505@rabbitmq.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
	<4EC901F3.4040500@rabbitmq.com> <6250190793052131212@unknownmsgid>
	<4EC92F8A.4080300@rabbitmq.com> <4ECAB6F6.9090502@rabbitmq.com>
	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>
	<4ECAC578.3070202@rabbitmq.com>
	<CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>
	<4ECAD5BF.6050505@rabbitmq.com>
Message-ID: <CAGWz9vXODCKNvpQgFikhzF5--Ny4bHsuHq3zH6tg-C8=Mk_3ZQ@mail.gmail.com>

To help out maybe I can give you the exact topology of our rabbit instances.

We have 6 RabbitMQ servers in remote servers. Then we have 2 local
RabbitMQ servers local to a cluster of 2 more RabbitMQ servers. Each
of these servers is on its own box.

The 8 RabbitMQ standalone servers are using the shovel plugin to send
data across the network to the Cluster of 2 RabbitMQ servers. The
shovel is set to prefetch 1000 messages and as you said is just
forwarding the acks from the cluster as confirms. Each one of these 8
RabbitMQs has threads that are writing messages sometimes 100 at a
time sometimes 1 at a time. The channel is set to confirm so they wait
for confirms from the 8 RabbitMQs.

The shovel seems to only be able to send about 100/200 messages a
second to the cluster and so we see it back up considerably whenever
messages are produced at a higher rate than this. Not all of the 8
servers produce messages higher than 100/s but the two that are local
in the same datacenter often will.

Like I said earlier the cluster is x-ha policy set to "all" so that
the messages are mirrored from the master to the slave. Then there are
about 40 consumer threads consuming from the cluster. Each of these
threads opens 1 connection, and then creates 1 channel. They are set
to prefetch 1000 messages and then send acks in batches up to 100
(depending on if there was 100 messages to be read within a 500ms
timeout).

Maybe this will help you replicate it?

On Mon, Nov 21, 2011 at 4:50 PM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
> Travis,
>
> On 21/11/11 22:16, Travis wrote:
>>
>> Yes. ?We've seen this problem when there are only a few dozen messages
>> and when there are hundreds of thousands.
>>
>> Basically, it seems like the slave is always taking up 2-5x the amount
>> of memory that the master uses.
>
> In my tests the slave uses a bit less memory than the master, which is what
> I would expect in a relatively lightly loaded system when there are no
> connections to the slave node.
>
>> Looking at the two servers, the slave shows that it's beam.smp has
>> spent 12 more hours on cpu than the beam.smp on the master. ?This
>> doesn't make sense to me if the slave is doing less work because it's
>> only handling traffic coming from the master.
>
> That's odd indeed. In my test I see the slave getting by with less than half
> the CPU utilisation of the master.
>
> Do you see this memory and CPU pattern - with the slave using more than the
> master - all the time, including shortly after a restart?
>
> I still haven't got a good trail to follow here. One thing to look at is the
> output of 'rabbitmqctl report' when the system is in the "excessive memory
> use" state. Please send us that.
>
> Regards,
>
> Matthias.
>

From hcoyote at ghostar.org  Mon Nov 21 23:14:20 2011
From: hcoyote at ghostar.org (Travis)
Date: Mon, 21 Nov 2011 17:14:20 -0600
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <4ECAD5BF.6050505@rabbitmq.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
	<4EC901F3.4040500@rabbitmq.com> <6250190793052131212@unknownmsgid>
	<4EC92F8A.4080300@rabbitmq.com> <4ECAB6F6.9090502@rabbitmq.com>
	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>
	<4ECAC578.3070202@rabbitmq.com>
	<CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>
	<4ECAD5BF.6050505@rabbitmq.com>
Message-ID: <CAChq9g0jOixn=zN4dM3iJ6ArpYzPUspGoudi=FJrBXcU4DZfHw@mail.gmail.com>

On Mon, Nov 21, 2011 at 4:50 PM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
> Travis,
>
> On 21/11/11 22:16, Travis wrote:
>>
>> Yes. ?We've seen this problem when there are only a few dozen messages
>> and when there are hundreds of thousands.
>>
>> Basically, it seems like the slave is always taking up 2-5x the amount
>> of memory that the master uses.
>
> In my tests the slave uses a bit less memory than the master, which is what
> I would expect in a relatively lightly loaded system when there are no
> connections to the slave node.
>
>> Looking at the two servers, the slave shows that it's beam.smp has
>> spent 12 more hours on cpu than the beam.smp on the master. ?This
>> doesn't make sense to me if the slave is doing less work because it's
>> only handling traffic coming from the master.
>
> That's odd indeed. In my test I see the slave getting by with less than half
> the CPU utilisation of the master.
>
> Do you see this memory and CPU pattern - with the slave using more than the
> master - all the time, including shortly after a restart?

It usually takes some time to build up to this state.  Basically when
we get into it, the remote rabbits are only able to shovel data in at
a very small trickle (on the order of tens of messages a second).

We presume that what's happening is that the slave is bouncing in and
out of the vm_memory_high_watermark warning state causing the master
to slow down sending messages to the slave.  The master would then
tell everything up stream to slow down because it wasn't able to
handle messages fast enough.  We thought killing the slave would get
the master out of this state since it wouldn't be attempting to pass
messages to it.  But, this is not the case.  The throughput doesn't go
back up to "normal" levels until we restart the master.

In today's case, we were seeing about 40-80 messages a second being
delivered when in this weird state, both before and after the slave
was stopped.  When we restarted the master, we began seeing about 4000
messages a second being delivered.  So, something strange is
definitely occurring.


>
> I still haven't got a good trail to follow here. One thing to look at is the
> output of 'rabbitmqctl report' when the system is in the "excessive memory
> use" state. Please send us that.

I can do that when we next get into this state; it takes a day or two
between restarts of the service.  Unfortunately, we had to restart
both the master and slave about 30 minutes ago because we had a
backlog of about a million messages queued on the shoveling rabbitmq's
that just weren't making it to the cluster in a timely manner.  For
reference, we're only pushing about 14 million messages through the
cluster a day, which doesn't seem like a lot to us.

Travis
-- 
Travis Campbell
travis at ghostar.org

From cpthk at hotmail.com  Tue Nov 22 01:14:51 2011
From: cpthk at hotmail.com (Jeffrey Chen)
Date: Mon, 21 Nov 2011 17:14:51 -0800
Subject: [rabbitmq-discuss] active/active message persistence problem
Message-ID: <BLU149-W23E6119B58C2C429854031ABC80@phx.gbl>


Hi RabbitMQ community:

I am encounter this problem about message persistence. Here is my case, I have 2 server nodes with active/active setup, both are persisted to DISK. The queue declarations are defined as durable.
This is what I got when doing:

# rabbitmqctl cluster_status
Cluster status of node 'rabbit at aaron-vm177' ...
[{nodes,[{disc,['rabbit at vm1','rabbit at vm2']}]},
 {running_nodes,['rabbit at vm1','rabbit at vm2']}]
...done.

# rabbitmqctl list_queues
Listing queues ...
test    10
...done.


My vm1 is currently master node. When I stop RabbitMQ service in vm1, and start it back up. I check my messages in the queue, the messages are still there. This time when I stop RabbitMQ service in vm2. The messages will be gone. It seems like when I restart both server nodes, the data will be lost. Does anyone know the reason? Is there any way to work around this?

My goal is that any server nodes down, and when I bring it back up, no data will be lost.

Jeffrey.
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111121/1a3ee86a/attachment.htm>

From matthias at rabbitmq.com  Tue Nov 22 01:18:27 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 22 Nov 2011 01:18:27 +0000
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <CAChq9g0jOixn=zN4dM3iJ6ArpYzPUspGoudi=FJrBXcU4DZfHw@mail.gmail.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>	<4EC901F3.4040500@rabbitmq.com>	<6250190793052131212@unknownmsgid>	<4EC92F8A.4080300@rabbitmq.com>	<4ECAB6F6.9090502@rabbitmq.com>	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>	<4ECAC578.3070202@rabbitmq.com>	<CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>	<4ECAD5BF.6050505@rabbitmq.com>
	<CAChq9g0jOixn=zN4dM3iJ6ArpYzPUspGoudi=FJrBXcU4DZfHw@mail.gmail.com>
Message-ID: <4ECAF863.7030300@rabbitmq.com>

Travis, Cameron,

On 21/11/11 23:14, Travis wrote:
> On Mon, Nov 21, 2011 at 4:50 PM, Matthias Radestock
> <matthias at rabbitmq.com>  wrote:
>> Do you see this memory and CPU pattern - with the slave using more
>> than the master - all the time, including shortly after a restart?
>
> It usually takes some time to build up to this state.

I have managed to reproduce the problem. There is a small per-message
memory leak in slave queues, triggered by the combination of
persistence, confirms and mirrored queues. It is present in both 2.6.1
and 2.7.0 (and, most certainly, 2.6.0, though I haven't checked).

Regards,

Matthias.

From vveludan at gmail.com  Tue Nov 22 03:10:20 2011
From: vveludan at gmail.com (Venkat)
Date: Mon, 21 Nov 2011 19:10:20 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq clustering using mirrored queues
In-Reply-To: <4ECA3B0D.1070602@rabbitmq.com>
References: <9e116867-9a68-4bd7-b78b-168dfdb0c47c@cc2g2000vbb.googlegroups.com>
	<4ECA3B0D.1070602@rabbitmq.com>
Message-ID: <ab408676-8d61-416f-9499-d70cc7cff8f6@o13g2000vbo.googlegroups.com>

Thanks Simon.

Venkat

On Nov 21, 6:50?am, Simon MacMullen <si... at rabbitmq.com> wrote:
> On 20/11/11 22:37, Venkat wrote:
>
> > I am concerned about the above said, would there be any damage done to
> > the slave node Node2 in case Node1 (master) is not retained and a
> > brand new node is joined to the cluster. Could you please suggest
> > better approach in a situation where a Master Node cannot be brought
> > back at all.
>
> There will always be a master node for the queue as long as the cluster
> remains alive - as soon as the old master goes down one of the slaves
> will be promoted. Even if you bring the old master back it will be a new
> slave.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From cameron.davison at gmail.com  Tue Nov 22 05:39:49 2011
From: cameron.davison at gmail.com (Cameron Davison)
Date: Mon, 21 Nov 2011 23:39:49 -0600
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <4ECAF863.7030300@rabbitmq.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
	<4EC901F3.4040500@rabbitmq.com> <6250190793052131212@unknownmsgid>
	<4EC92F8A.4080300@rabbitmq.com> <4ECAB6F6.9090502@rabbitmq.com>
	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>
	<4ECAC578.3070202@rabbitmq.com>
	<CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>
	<4ECAD5BF.6050505@rabbitmq.com>
	<CAChq9g0jOixn=zN4dM3iJ6ArpYzPUspGoudi=FJrBXcU4DZfHw@mail.gmail.com>
	<4ECAF863.7030300@rabbitmq.com>
Message-ID: <CAGWz9vWTmo2jkYAgyO0Rz9=y7H4w=x78L1bLYQo2LJMTwDW3zA@mail.gmail.com>

I am glad that you were able to reproduce it. Do you forsee any chance
of being able to get a patch out soon? Or do you think that this will
not be fixed until the next version.

Thanks,
Cameron

On Mon, Nov 21, 2011 at 7:18 PM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
> Travis, Cameron,
>
> On 21/11/11 23:14, Travis wrote:
>>
>> On Mon, Nov 21, 2011 at 4:50 PM, Matthias Radestock
>> <matthias at rabbitmq.com> ?wrote:
>>>
>>> Do you see this memory and CPU pattern - with the slave using more
>>> than the master - all the time, including shortly after a restart?
>>
>> It usually takes some time to build up to this state.
>
> I have managed to reproduce the problem. There is a small per-message
> memory leak in slave queues, triggered by the combination of
> persistence, confirms and mirrored queues. It is present in both 2.6.1
> and 2.7.0 (and, most certainly, 2.6.0, though I haven't checked).
>
> Regards,
>
> Matthias.
>

From cameron.davison at gmail.com  Tue Nov 22 05:46:24 2011
From: cameron.davison at gmail.com (Cameron Davison)
Date: Mon, 21 Nov 2011 23:46:24 -0600
Subject: [rabbitmq-discuss] active/active message persistence problem
In-Reply-To: <BLU149-W23E6119B58C2C429854031ABC80@phx.gbl>
References: <BLU149-W23E6119B58C2C429854031ABC80@phx.gbl>
Message-ID: <CAGWz9vUbQ00kM3yJPOe68pWgG_BL6H1oL=fQe4FUu4d4Rj0b3w@mail.gmail.com>

What order are you restarting the nodes? Any rabbitmq server that
connects to a cluster will start its queue fresh and begin replicating
from the master. You should wait and make sure that all the queues are
synchronized before you shut down the master, or new master. Old
messages are not read from nodes that connect to the cluster because
the assumption is that the queue will go to 0 soon and then the old
messages will not matter so only the new messages will be important.
Also, you should make sure that the "x-ha-policy" is set to "all" or
to the "nodes" that you would like the queue to be mirrored to.

Cameron

On Mon, Nov 21, 2011 at 7:14 PM, Jeffrey Chen <cpthk at hotmail.com> wrote:
> Hi RabbitMQ community:
>
> I am encounter this problem about message persistence. Here is my case, I
> have 2 server nodes with active/active setup, both are persisted to DISK.
> The queue declarations are defined as durable.
> This is what I got when doing:
>
> # rabbitmqctl cluster_status
> Cluster status of node 'rabbit at aaron-vm177' ...
> [{nodes,[{disc,['rabbit at vm1','rabbit at vm2']}]},
> ?{running_nodes,['rabbit at vm1','rabbit at vm2']}]
> ...done.
>
> # rabbitmqctl list_queues
> Listing queues ...
> test ?? 10
> ...done.
>
>
> My vm1 is currently master node. When I stop RabbitMQ service in vm1, and
> start it back up. I check my messages in the queue, the messages are still
> there. This time when I stop RabbitMQ service in vm2. The messages will be
> gone. It seems like when I restart both server nodes, the data will be lost.
> Does anyone know the reason? Is there any way to work around this?
>
> My goal is that any server nodes down, and when I bring it back up, no data
> will be lost.
>
> Jeffrey.
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>

From cpthk at hotmail.com  Tue Nov 22 06:37:14 2011
From: cpthk at hotmail.com (Jeffrey Chen)
Date: Mon, 21 Nov 2011 22:37:14 -0800
Subject: [rabbitmq-discuss] active/active message persistence problem
In-Reply-To: <CAGWz9vUbQ00kM3yJPOe68pWgG_BL6H1oL=fQe4FUu4d4Rj0b3w@mail.gmail.com>
References: <BLU149-W23E6119B58C2C429854031ABC80@phx.gbl>,
	<CAGWz9vUbQ00kM3yJPOe68pWgG_BL6H1oL=fQe4FUu4d4Rj0b3w@mail.gmail.com>
Message-ID: <BLU149-W37D5B8D2E7ED64C4714CC6ABC80@phx.gbl>


Hello Cameron:



To resolve any confusion, let me make a table to clarify. I DO have "x-ha-policy" set to "all"



  Steps    |   vm1                                       |        vm2

  ------------------------------------------------------------------------------

  1.         |  started (10 msg, disk, master)   |  started (10 msg, disk)

  2.         |  stop                                         |  started (10 msg, disk, became master)

  3.         |  started (10 msg, disk, slave)      |  started (10 msg, disk, master)

  4.         |  started (0 msg, disk, master)     | stop



Noticed that in my step 4, when I stop my VM2, the message in VM1 
immediately disappear. You are right, each step has interval of about 10
 seconds, I didn't wait very long to stop the new master. You mentioned 
that I have to I have to wait until the queues are synchronized. How 
long is that waiting? Is there a command that I could find out if they 
finished the synchronization? Like rabbitmqctl command or anything? Or 
any way to force synchronize right now. I am only testing 10 messages, 
it shouldn't take that long.



Thanks for your help.



Jeffrey.

> From: cameron.davison at gmail.com
> Date: Mon, 21 Nov 2011 23:46:24 -0600
> Subject: Re: [rabbitmq-discuss] active/active message persistence problem
> To: cpthk at hotmail.com
> CC: rabbitmq-discuss at lists.rabbitmq.com
> 
> What order are you restarting the nodes? Any rabbitmq server that
> connects to a cluster will start its queue fresh and begin replicating
> from the master. You should wait and make sure that all the queues are
> synchronized before you shut down the master, or new master. Old
> messages are not read from nodes that connect to the cluster because
> the assumption is that the queue will go to 0 soon and then the old
> messages will not matter so only the new messages will be important.
> Also, you should make sure that the "x-ha-policy" is set to "all" or
> to the "nodes" that you would like the queue to be mirrored to.
> 
> Cameron
> 
> On Mon, Nov 21, 2011 at 7:14 PM, Jeffrey Chen <cpthk at hotmail.com> wrote:
> > Hi RabbitMQ community:
> >
> > I am encounter this problem about message persistence. Here is my case, I
> > have 2 server nodes with active/active setup, both are persisted to DISK.
> > The queue declarations are defined as durable.
> > This is what I got when doing:
> >
> > # rabbitmqctl cluster_status
> > Cluster status of node 'rabbit at aaron-vm177' ...
> > [{nodes,[{disc,['rabbit at vm1','rabbit at vm2']}]},
> >  {running_nodes,['rabbit at vm1','rabbit at vm2']}]
> > ...done.
> >
> > # rabbitmqctl list_queues
> > Listing queues ...
> > test    10
> > ...done.
> >
> >
> > My vm1 is currently master node. When I stop RabbitMQ service in vm1, and
> > start it back up. I check my messages in the queue, the messages are still
> > there. This time when I stop RabbitMQ service in vm2. The messages will be
> > gone. It seems like when I restart both server nodes, the data will be lost.
> > Does anyone know the reason? Is there any way to work around this?
> >
> > My goal is that any server nodes down, and when I bring it back up, no data
> > will be lost.
> >
> > Jeffrey.
> >
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-discuss at lists.rabbitmq.com
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> >
> >
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111121/807ca663/attachment.htm>

From cameron.davison at gmail.com  Tue Nov 22 06:54:57 2011
From: cameron.davison at gmail.com (Cameron Davison)
Date: Tue, 22 Nov 2011 00:54:57 -0600
Subject: [rabbitmq-discuss] active/active message persistence problem
In-Reply-To: <BLU149-W37D5B8D2E7ED64C4714CC6ABC80@phx.gbl>
References: <BLU149-W23E6119B58C2C429854031ABC80@phx.gbl>
	<CAGWz9vUbQ00kM3yJPOe68pWgG_BL6H1oL=fQe4FUu4d4Rj0b3w@mail.gmail.com>
	<BLU149-W37D5B8D2E7ED64C4714CC6ABC80@phx.gbl>
Message-ID: <CAGWz9vUQdP+SrWCQQeS2SUjgXpSZYE5rFE8Mei5pEad7gWXGdw@mail.gmail.com>

You can run "rabbitmqctl list_queues name slave_pids
synchronised_slave_pids" to see if the cluster is synchronized or not
but I can tell you right now that they will not be. In step 3 when you
start vm1 back up and it is the slave. It is telling you that there
are 10 messages in the vm2 queue. When you talk to a broker in a
cluster it will talk to the master queue. VM1 will not be synchronized
until all 10 messages are read out of the vm2 queue, because rabbitmq
mirrored clusters do not read old messages that are already in the
master queue. The slave reads the tail of the new message being sent
to the master and expects that once it has been long enough then it
will catch up to the same state as the master.

http://www.rabbitmq.com/ha.html "Unsynchronised Slaves" I think does a
good job of explaining it.

Cameron

On Tue, Nov 22, 2011 at 12:37 AM, Jeffrey Chen <cpthk at hotmail.com> wrote:
> Hello Cameron:
>
> To resolve any confusion, let me make a table to clarify. I DO have
> "x-ha-policy" set to "all"
>
> ? Steps ?? |?? vm1 ? ? ? ? ? ? ? ? ? ?? ? ? ? ? ? ? ? ?? | ? ?? ? vm2
>
> ------------------------------------------------------------------------------
> ? 1.???????? |? started (10 msg, disk, master) ? |? started (10 msg, disk)
> ? 2.???????? |? stop?????????????????????? ? ? ? ? ? ?? ? ?? |? started (10
> msg, disk, became master)
> ? 3.???????? |? started (10 msg, disk, slave)?? ?? |? started (10 msg, disk,
> master)
> ? 4.???????? |? started (0 msg, disk, master)???? | stop
>
> Noticed that in my step 4, when I stop my VM2, the message in VM1
> immediately disappear. You are right, each step has interval of about 10
> seconds, I didn't wait very long to stop the new master. You mentioned that
> I have to I have to wait until the queues are synchronized. How long is that
> waiting? Is there a command that I could find out if they finished the
> synchronization? Like rabbitmqctl command or anything? Or any way to force
> synchronize right now. I am only testing 10 messages, it shouldn't take that
> long.
>
> Thanks for your help.
>
> Jeffrey.
>
>> From: cameron.davison at gmail.com
>> Date: Mon, 21 Nov 2011 23:46:24 -0600
>> Subject: Re: [rabbitmq-discuss] active/active message persistence problem
>> To: cpthk at hotmail.com
>> CC: rabbitmq-discuss at lists.rabbitmq.com
>>
>> What order are you restarting the nodes? Any rabbitmq server that
>> connects to a cluster will start its queue fresh and begin replicating
>> from the master. You should wait and make sure that all the queues are
>> synchronized before you shut down the master, or new master. Old
>> messages are not read from nodes that connect to the cluster because
>> the assumption is that the queue will go to 0 soon and then the old
>> messages will not matter so only the new messages will be important.
>> Also, you should make sure that the "x-ha-policy" is set to "all" or
>> to the "nodes" that you would like the queue to be mirrored to.
>>
>> Cameron
>>
>> On Mon, Nov 21, 2011 at 7:14 PM, Jeffrey Chen <cpthk at hotmail.com> wrote:
>> > Hi RabbitMQ community:
>> >
>> > I am encounter this problem about message persistence. Here is my case,
>> > I
>> > have 2 server nodes with active/active setup, both are persisted to
>> > DISK.
>> > The queue declarations are defined as durable.
>> > This is what I got when doing:
>> >
>> > # rabbitmqctl cluster_status
>> > Cluster status of node 'rabbit at aaron-vm177' ...
>> > [{nodes,[{disc,['rabbit at vm1','rabbit at vm2']}]},
>> > ?{running_nodes,['rabbit at vm1','rabbit at vm2']}]
>> > ...done.
>> >
>> > # rabbitmqctl list_queues
>> > Listing queues ...
>> > test ?? 10
>> > ...done.
>> >
>> >
>> > My vm1 is currently master node. When I stop RabbitMQ service in vm1,
>> > and
>> > start it back up. I check my messages in the queue, the messages are
>> > still
>> > there. This time when I stop RabbitMQ service in vm2. The messages will
>> > be
>> > gone. It seems like when I restart both server nodes, the data will be
>> > lost.
>> > Does anyone know the reason? Is there any way to work around this?
>> >
>> > My goal is that any server nodes down, and when I bring it back up, no
>> > data
>> > will be lost.
>> >
>> > Jeffrey.
>> >
>> > _______________________________________________
>> > rabbitmq-discuss mailing list
>> > rabbitmq-discuss at lists.rabbitmq.com
>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>> >
>> >
>

From Stefan.Kaes at xing.com  Tue Nov 22 07:12:44 2011
From: Stefan.Kaes at xing.com (Stefan Kaes)
Date: Tue, 22 Nov 2011 08:12:44 +0100
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <4EC82D68.3000200@rabbitmq.com>
Message-ID: <CAF109FC.2DE4E%stefan.kaes@xing.com>

I wasn't my intent to trigger a bug report, only to understand what the
intended behavior is.

As far as I understand it so far, the new behavior is designed to keep as
much ordering in the queue as possible, whereas the old behavior was to
simply move the rejected message to the end of the queue.

For us, this change is rather unfortunate.

The most common scenario for rejects in our messaging layer is that we want
to process it at some later time, because some external service needed to
process the queue is currently unavailable, or we know some other consumer
is already processing a copy of a redundantly queued message.

See http://xing.github.com/beetle/

With the new behavior, a consumer will immediately see the rejected message
again, even though there might be hundreds of messages in the queue which
could be processed right away.

I think the new behavior is also very surprising given the name of the
parameter to reject is "requeue".

Could you please explain what motivated the change?

Frankly, we'd prefer to get the old behavior back.

-- stefan


Am 19.11.11 23:27 schrieb "Matthias Radestock" unter
<matthias at rabbitmq.com>:

> Stefan,
> 
> On 19/11/11 05:52, Stefan Kaes wrote:
>> it appears that the FAQ page describing the new reject semantics has
>> disappeared.
> 
> Indeed it has.
> 
>> Here's my current understanding:
>> 
>> Let's say we have a message queue containing messages<m2, m1>, where m1
>> will be delivered next.
>> 
>> Let's further assume we have a prefetch count of 1 on our single consumer,
>> which is subscribed to the queue.
>> 
>> Then, if the consumer rejects the message, it will be resend to the consumer
>> before m2 is sent, right?
>> 
>> In other words: from a consumer perspective, "reject(requeue=true)" behaves
>> exactly like "recover" in the scenario above.
>> 
>> Correct?
> 
> The second message the consumer receives could be either m1 or m2.
> Arguably that is surprising behaviour so I will raise a bug to look into
> this.
> 
> Regards,
> 
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

Dr. Stefan Kaes
Principal System Architect
 
XING AG
Gaensemarkt 43, 20354 Hamburg, Germany
Tel. +49 40 419131-801, Fax +49 40 419131-11
 
Commercial Reg. (Registergericht): Amtsgericht Hamburg, HRB 98807
Exec. Board (Vorstand): Dr. Stefan Gro?-Selbeck (Vorsitzender), Ingo Chu,
Dr. Helmut Becker, Jens Pape;
Chairman of the Supervisory Board (Aufsichtsratsvorsitzender): Dr. Neil
Sunderland
 
Please join my network on XING: http://www.xing.com/go/invite/Stefan.Kaes

This email may contain confidential and/or privileged information. If you
are not the intended recipient (or have received this email in error) please
notify the sender immediately and destroy this email. Any unauthorized
copying, disclosure or distribution of the material in this email is
strictly forbidden and may be unlawful.


From sameek at arosys.com  Tue Nov 22 07:44:10 2011
From: sameek at arosys.com (sameekmishra)
Date: Mon, 21 Nov 2011 23:44:10 -0800 (PST)
Subject: [rabbitmq-discuss]  Is Connection is thead safe?
Message-ID: <32872118.post@talk.nabble.com>


Hi

I have created worker threads  that consume message from same queue.

 class wokerThread implements Runnable 
{
     public Connection connection;
     public workThread(Connection conn)
     {this.connection=conn;
     }

      public void run() 
      {
          Channel channel=connection.createchannel();
          //read message from queue 
     }
   
}


public class TestThreads 
{
public static void main (String [] args) 
{
Thread[] worker=new Thread[3];
wokerThread  r = new wokerThread ;

for(int i=0;i<3;i++)
{
 
   worker[i]=new Thread(r);
   worker[i].start();

}
}
}

I got the following error:

java.lang.IllegalStateException: cannot execute more than one synchronous
AMQP command at a time

 please help me where the problem in my code.

Regrads


-- 
View this message in context: http://old.nabble.com/Is-Connection-is-thead-safe--tp32872118p32872118.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From sameek at arosys.com  Tue Nov 22 07:44:28 2011
From: sameek at arosys.com (sameekmishra)
Date: Mon, 21 Nov 2011 23:44:28 -0800 (PST)
Subject: [rabbitmq-discuss]  Is Connection is thead safe?
Message-ID: <32872119.post@talk.nabble.com>


Hi

I have created worker threads  that consume message from same queue.

 class wokerThread implements Runnable 
{
     public Connection connection;
     public workThread(Connection conn)
     {this.connection=conn;
     }

      public void run() 
      {
          Channel channel=connection.createchannel();
          //read message from queue 
     }
   
}


public class TestThreads 
{
public static void main (String [] args) 
{
Thread[] worker=new Thread[3];
wokerThread  r = new wokerThread ;

for(int i=0;i<3;i++)
{
 
   worker[i]=new Thread(r);
   worker[i].start();

}
}
}

I got the following error:

java.lang.IllegalStateException: cannot execute more than one synchronous
AMQP command at a time

 please help me where the problem in my code.

Regrads


-- 
View this message in context: http://old.nabble.com/Is-Connection-is-thead-safe--tp32872119p32872119.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From matthias at rabbitmq.com  Tue Nov 22 07:54:53 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 22 Nov 2011 07:54:53 +0000
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <CAGWz9vWTmo2jkYAgyO0Rz9=y7H4w=x78L1bLYQo2LJMTwDW3zA@mail.gmail.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
	<4EC901F3.4040500@rabbitmq.com> <6250190793052131212@unknownmsgid>
	<4EC92F8A.4080300@rabbitmq.com> <4ECAB6F6.9090502@rabbitmq.com>
	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>
	<4ECAC578.3070202@rabbitmq.com>
	<CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>
	<4ECAD5BF.6050505@rabbitmq.com>
	<CAChq9g0jOixn=zN4dM3iJ6ArpYzPUspGoudi=FJrBXcU4DZfHw@mail.gmail.com>
	<4ECAF863.7030300@rabbitmq.com>
	<CAGWz9vWTmo2jkYAgyO0Rz9=y7H4w=x78L1bLYQo2LJMTwDW3zA@mail.gmail.com>
Message-ID: <4ECB554D.8070401@rabbitmq.com>

Cameron,

On 22/11/11 05:39, Cameron Davison wrote:
> I am glad that you were able to reproduce it. Do you forsee any chance
> of being able to get a patch out soon? Or do you think that this will
> not be fixed until the next version.

The fix will appear in the next version, though if you are prepared to 
build rabbit from source you can get hold of it as soon as it's gone 
through qa.

Matthias.

From matthias at rabbitmq.com  Tue Nov 22 08:13:21 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 22 Nov 2011 08:13:21 +0000
Subject: [rabbitmq-discuss] Is Connection is thead safe?
In-Reply-To: <32872118.post@talk.nabble.com>
References: <32872118.post@talk.nabble.com>
Message-ID: <4ECB59A1.8000404@rabbitmq.com>

On 22/11/11 07:44, sameekmishra wrote:
> I have created worker threads  that consume message from same queue.
> [...]  I got the following error:
> java.lang.IllegalStateException: cannot execute more than one synchronous
> AMQP command at a time

The problem must be in the portion of the code you didn't post; please 
send the complete code to reproduce the problem. Thanks.

Matthias.

From sameek at arosys.com  Tue Nov 22 08:29:22 2011
From: sameek at arosys.com (sameekmishra)
Date: Tue, 22 Nov 2011 00:29:22 -0800 (PST)
Subject: [rabbitmq-discuss] Is Connection is thead safe?
In-Reply-To: <4ECB59A1.8000404@rabbitmq.com>
References: <32872118.post@talk.nabble.com> <4ECB59A1.8000404@rabbitmq.com>
Message-ID: <32872176.post@talk.nabble.com>


Thanks for reply.i have upload two files workerThread.java and
MQConnectionManager.java MQConnectionManager class reads configuration and
return rabbitmqconnection Object which is passed to workThread class.


http://old.nabble.com/file/p32872176/workerThread.java workerThread.java 
http://old.nabble.com/file/p32872176/MQConnectionManager.java
MQConnectionManager.java 

Thanks


Matthias Radestock-3 wrote:
> 
> On 22/11/11 07:44, sameekmishra wrote:
>> I have created worker threads  that consume message from same queue.
>> [...]  I got the following error:
>> java.lang.IllegalStateException: cannot execute more than one synchronous
>> AMQP command at a time
> 
> The problem must be in the portion of the code you didn't post; please 
> send the complete code to reproduce the problem. Thanks.
> 
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 
> 

-- 
View this message in context: http://old.nabble.com/Is-Connection-is-thead-safe--tp32872118p32872176.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From matthias at rabbitmq.com  Tue Nov 22 08:42:23 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 22 Nov 2011 08:42:23 +0000
Subject: [rabbitmq-discuss] Is Connection is thead safe?
In-Reply-To: <32872176.post@talk.nabble.com>
References: <32872118.post@talk.nabble.com> <4ECB59A1.8000404@rabbitmq.com>
	<32872176.post@talk.nabble.com>
Message-ID: <4ECB606F.9050802@rabbitmq.com>

On 22/11/11 08:29, sameekmishra wrote:
> Thanks for reply.i have upload two files workerThread.java and
> MQConnectionManager.java MQConnectionManager class reads configuration and
> return rabbitmqconnection Object which is passed to workThread class.

Where is 'channel' declared? It is used in workerThread.run() but not 
declared in that class or method. So I suspect it is declared in a 
containing class and thus shared between the workerThread instances, 
which will cause all sorts of problems.


Matthias.

From sameek at arosys.com  Tue Nov 22 08:57:36 2011
From: sameek at arosys.com (sameekmishra)
Date: Tue, 22 Nov 2011 00:57:36 -0800 (PST)
Subject: [rabbitmq-discuss] Is Connection is thead safe?
In-Reply-To: <4ECB606F.9050802@rabbitmq.com>
References: <32872118.post@talk.nabble.com> <4ECB59A1.8000404@rabbitmq.com>
	<32872176.post@talk.nabble.com> <4ECB606F.9050802@rabbitmq.com>
Message-ID: <32872220.post@talk.nabble.com>


now I declared channel but this error will comes again. 



Matthias Radestock-3 wrote:
> 
> On 22/11/11 08:29, sameekmishra wrote:
>> Thanks for reply.i have upload two files workerThread.java and
>> MQConnectionManager.java MQConnectionManager class reads configuration
>> and
>> return rabbitmqconnection Object which is passed to workThread class.
> 
> Where is 'channel' declared? It is used in workerThread.run() but not 
> declared in that class or method. So I suspect it is declared in a 
> containing class and thus shared between the workerThread instances, 
> which will cause all sorts of problems.
> 
> 
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 
> 

-- 
View this message in context: http://old.nabble.com/Is-Connection-is-thead-safe--tp32872118p32872220.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From matthias at rabbitmq.com  Tue Nov 22 09:02:35 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 22 Nov 2011 09:02:35 +0000
Subject: [rabbitmq-discuss] Is Connection is thead safe?
In-Reply-To: <32872220.post@talk.nabble.com>
References: <32872118.post@talk.nabble.com>
	<4ECB59A1.8000404@rabbitmq.com>	<32872176.post@talk.nabble.com>
	<4ECB606F.9050802@rabbitmq.com> <32872220.post@talk.nabble.com>
Message-ID: <4ECB652B.7050309@rabbitmq.com>

On 22/11/11 08:57, sameekmishra wrote:
> now I declared channel but this error will comes again.

We really need complete, executable code exhibiting the problem in order 
to help you further. I suggest you condense your code into a small 
example that you can post in complete form to the mailing list. Thanks.

Matthias.

From emile at rabbitmq.com  Tue Nov 22 11:16:34 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 22 Nov 2011 11:16:34 +0000
Subject: [rabbitmq-discuss] RabbitMQ 2.7.0 is released
In-Reply-To: <CAF109FC.2DE4E%stefan.kaes@xing.com>
References: <CAF109FC.2DE4E%stefan.kaes@xing.com>
Message-ID: <4ECB8492.7020909@rabbitmq.com>

Hi Stefan,

On 22/11/11 07:12, Stefan Kaes wrote:
> As far as I understand it so far, the new behavior is designed to keep as
> much ordering in the queue as possible, whereas the old behavior was to
> simply move the rejected message to the end of the queue.
> 
> For us, this change is rather unfortunate.
> 
> The most common scenario for rejects in our messaging layer is that we want
> to process it at some later time, because some external service needed to
> process the queue is currently unavailable, or we know some other consumer
> is already processing a copy of a redundantly queued message.
> 
> See http://xing.github.com/beetle/
> 
> With the new behavior, a consumer will immediately see the rejected message
> again, even though there might be hundreds of messages in the queue which
> could be processed right away.
> 
> I think the new behavior is also very surprising given the name of the
> parameter to reject is "requeue".
> 
> Could you please explain what motivated the change?
> 
> Frankly, we'd prefer to get the old behavior back.

I'm sorry to hear that this change has a negative impact for you. The
requeue ordering behaviour is left unspecified leaving room for
implementations to differ in this regard. You should avoid relying on
unspecified behaviour for maximum interoperability.

The change was motivated by popular demand. Not being able to preserve
message order was a gap in rabbit's feature set which many customers
have asked us to correct.

We felt it important that requeue behaviour be consistent across all
methods of requeueing (closing channel, basic.recover, basic.reject and
basic.nack). It would be very surprising if some of these requeued at
the front of a queue while others requeued at the back.

We are aware that some customers use requeueing to emulate queue
browsing. This is discouraged. A database is more suitable for this use.
We made no attempt to facilitate this use case. The documentation for
nack says:

"""
The client MUST NOT use this method as a means of selecting messages to
process.
"""

Your options at the moment are:

Don't use requeueing. Match messages and consumers in such a way that
consumers do not need to requeue messages. Use separate queues for
different kinds of messages and design your system in such a way that
consumers can be guaranteed to be able to process the messages they receive.

Acknowledge and republish messages instead of requeueing. This will
place a message at the back of the queue. The "redelivered" flag will
not record the fact that a consumer has already seen the message, so you
may want to set your own header in this case.

There is work underway to implement dead letter exchanges. I can make no
guarantees about when it will be released, but this feature will provide
an alternative means to have a message republished to an exchange of
your choice. If urgency is low then you could wait for this feature and
see if suits your needs.

Don't upgrade to 2.7.0 or beyond. Rabbit is improving all the time, so
this is obviously not a real option if you need future enhancements and
bugfixes.






The FAQ was a victim of a recent website reorganisation effort. Here is
a copy of the relevant question. Hopefully the FAQ will be resurrected soon.

====
Q:
I have read that RabbitMQ preserves the order of messages in queues. Is
this correct?

A:
For the most part, yes. Say a publisher publishes messages M1, M2, M3
and M4 (in that order) on the same channel and with the same routing
information. If these messages are routed to a queue then they will end
up in the same order that they were published. Consuming on the queue
will yield M1, M2, M3 and then M4.

Message order is maintained if messages are returned to the queue using
AMQP methods that feature a requeue parameter (basic.recover,
basic.reject and basic.nack), or due to a channel closing while holding
unacknowledged messages. E.g. a publisher sends messages M1, M2, M3 and
M4 and these messages are routed to the same queue. A consumer fetches
two messages, rejecting (with requeue) the first and acknowledging the
second. The queue now contains M1, M3 and M4. The consumer again fetches
two messages without acknowledgement when a network error causes the
connection with the broker to be terminated. The queue contains M1, M3
and M4 (in that order) after the broker discovers that the consumer has
disconnected.

Section 4.7 of the AMQP 0-9-1 specification explains the conditions
under which ordering is guaranteed. RabbitMQ offers stronger guarantees
than required by the specification, as explained above.
====



-Emile

From manisha.kare at barclays.com  Tue Nov 22 06:42:26 2011
From: manisha.kare at barclays.com (manisha.kare at barclays.com)
Date: Tue, 22 Nov 2011 06:42:26 +0000
Subject: [rabbitmq-discuss] How rabbitMq Works betwwen two application
Message-ID: <F9023D4143187D489A9A59D1B4476F215A1EB9C91B@MUKPBCC1XMB703C.collab.barclayscorp.com>

Hi,
My Name is Manisha Khare. I have a created a application in Android for RabbitMq using RabbitMQ-Android tutorial. Its working fine. Now i want to create two applications in android and want to make a communication between them using RabbitMq.

I am not getting any example or any tutorial regarding. Can anybody help me in this regard. Can anybody provide me any kind of example or any kind of tutorial in this regards.

Thanks
Manisha Khare



This e-mail and any attachments are confidential and intended
solely for the addressee and may also be privileged or exempt from
disclosure under applicable law. If you are not the addressee, or
have received this e-mail in error, please notify the sender
immediately, delete it from your system and do not copy, disclose
or otherwise act upon any part of this e-mail or its attachments.

Internet communications are not guaranteed to be secure or
virus-free.
The Barclays Group does not accept responsibility for any loss
arising from unauthorised access to, or interference with, any
Internet communications by any third party, or from the
transmission of any viruses. Replies to this e-mail may be
monitored by the Barclays Group for operational or business
reasons.

Any opinion or other information in this e-mail or its attachments
that does not relate to the business of the Barclays Group is
personal to the sender and is not given or endorsed by the Barclays
Group.

Barclays Bank PLC. Registered in England and Wales (registered no.
1026167).
Registered Office: 1 Churchill Place, London, E14 5HP, United
Kingdom.

Barclays Bank PLC is authorised and regulated by the Financial
Services Authority.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/492d93e4/attachment.htm>

From steve.flitcroft at gmail.com  Tue Nov 22 08:10:01 2011
From: steve.flitcroft at gmail.com (steve flitcroft)
Date: Tue, 22 Nov 2011 00:10:01 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ Windows 2008r2 Setup
Message-ID: <d2127fc2-2a05-4651-b473-c1d836256d7f@w3g2000vbw.googlegroups.com>

Hi,

I am currently investigating the best way to setup RabbitMQ on our
infrastructure. Over the last few days I have been playing with the
idea of using Cluster and Failover feature of Win2008 r2 however this
would only give me an single Active/Passive cluster and I would have
to use shared storage for the rabbitmq instances and the nature in
which the windows services install make this a bit of a nightmare to
configure. Another option to enable a load balanced cluster is to use
NLB however this does not really give the resilience that i need since
NLB only listens for the NIC and not configured to ensure that
rabbitmq service is actually in a fit state. I really need the
consumers to use the same dns entry without any intelligence to be
dynamically switching addresses.

Could I draw upon anybody else's experience in configuring RabbitMQ on
a windows infrastructure. I have considered using some linux boxes and
ha proxy to load balance a windows rabbitmq cluster however our
corporate IT are reluctant to introduce different OS's onto the
estate!

Any help or thoughts welcome.

Thanks

From matthew at rabbitmq.com  Tue Nov 22 11:34:43 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Tue, 22 Nov 2011 11:34:43 +0000
Subject: [rabbitmq-discuss] active/active message persistence problem
In-Reply-To: <CAGWz9vUQdP+SrWCQQeS2SUjgXpSZYE5rFE8Mei5pEad7gWXGdw@mail.gmail.com>
References: <BLU149-W23E6119B58C2C429854031ABC80@phx.gbl>
	<CAGWz9vUbQ00kM3yJPOe68pWgG_BL6H1oL=fQe4FUu4d4Rj0b3w@mail.gmail.com>
	<BLU149-W37D5B8D2E7ED64C4714CC6ABC80@phx.gbl>
	<CAGWz9vUQdP+SrWCQQeS2SUjgXpSZYE5rFE8Mei5pEad7gWXGdw@mail.gmail.com>
Message-ID: <20111122113442.GD32040@rabbitmq.com>

On Tue, Nov 22, 2011 at 12:54:57AM -0600, Cameron Davison wrote:
> You can run "rabbitmqctl list_queues name slave_pids
> synchronised_slave_pids" to see if the cluster is synchronized or not
> but I can tell you right now that they will not be. In step 3 when you
> start vm1 back up and it is the slave. It is telling you that there
> are 10 messages in the vm2 queue. When you talk to a broker in a
> cluster it will talk to the master queue. VM1 will not be synchronized
> until all 10 messages are read out of the vm2 queue, because rabbitmq
> mirrored clusters do not read old messages that are already in the
> master queue. The slave reads the tail of the new message being sent
> to the master and expects that once it has been long enough then it
> will catch up to the same state as the master.

Indeed, this is precisely correct. There is currently no eager
synchronisation of the queue from the master to any slaves. There is
only passive synchronisation which is achieved by draining the queue of
the unsynchronised queue head.

> http://www.rabbitmq.com/ha.html "Unsynchronised Slaves" I think does a
> good job of explaining it.

I'm glad someone's read it! ;)

Matthew

From majek04 at gmail.com  Tue Nov 22 11:42:04 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Tue, 22 Nov 2011 11:42:04 +0000
Subject: [rabbitmq-discuss] erlang examples
In-Reply-To: <CAE3QcP+ZBVX3Q2QOB5xKquTGiiunRhoxiai6G_POyyGwDdqESA@mail.gmail.com>
References: <CAE3QcPK5O1Ra5+g26Tns=Ku5VeBKomReu5NdKmTkCAWG7KGt3w@mail.gmail.com>
	<CABzX+qxpDZweDh7ML=trb51SzzmQkf1ND+hiNkipRqsMGZPX2A@mail.gmail.com>
	<CAE3QcP+ZBVX3Q2QOB5xKquTGiiunRhoxiai6G_POyyGwDdqESA@mail.gmail.com>
Message-ID: <CABzX+qyi1v7-NTN0BSyw6x7XL+kuFb6A=rb6zk-c67DoHh6xjA@mail.gmail.com>

On Tue, Nov 22, 2011 at 07:51, Sacha Molin <sacha.molin at evolope.se> wrote:
> Yeah i followed the tutorial from the erlang tutorial read me, but not
> working as it should

Following Readme verbatim works for me (Ubuntu).
I'm afraid you must be more specific. Can you paste
exactly what have you done and what is the result?
What erlang version are you using? What operating system?

Cheers,
  Marek

> 2011/11/21 Marek Majkowski <majek04 at gmail.com>
>>
>> On Fri, Nov 18, 2011 at 20:08, Sacha Molin <sacha.molin at evolope.se> wrote:
>> > ?I decidec to use rabbitmq for the first time, i got everything up and
>> > running, but when i tried the erlang examples i just got this error
>> > message:
>> >
>> > can't find include lib "amqp_client/include/amqp_
>> > client.hrl"
>> >
>> > any ideas how i can solve it and what makes it not find it ?
>>
>> Hi,
>>
>> Did you follow the instructions from erlang tutorial readme?
>> ? https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/erlang#readme
>>
>> Cheers,
>> ? ?Marek
>
>

From rtrlists at googlemail.com  Tue Nov 22 11:49:22 2011
From: rtrlists at googlemail.com (Robert Raschke)
Date: Tue, 22 Nov 2011 11:49:22 +0000
Subject: [rabbitmq-discuss] RabbitMQ Windows 2008r2 Setup
In-Reply-To: <d2127fc2-2a05-4651-b473-c1d836256d7f@w3g2000vbw.googlegroups.com>
References: <d2127fc2-2a05-4651-b473-c1d836256d7f@w3g2000vbw.googlegroups.com>
Message-ID: <CAH+xwdC-diaRO9RZLUpQayXo5UhN6QKMEtBRNQRoK8URqoHvPA@mail.gmail.com>

Hi Steve,

On Tue, Nov 22, 2011 at 8:10 AM, steve flitcroft
<steve.flitcroft at gmail.com>wrote:

> I am currently investigating the best way to setup RabbitMQ on our
> infrastructure. Over the last few days I have been playing with the
> idea of using Cluster and Failover feature of Win2008 r2 however this
> would only give me an single Active/Passive cluster and I would have
> to use shared storage for the rabbitmq instances and the nature in
> which the windows services install make this a bit of a nightmare to
> configure. Another option to enable a load balanced cluster is to use
> NLB however this does not really give the resilience that i need since
> NLB only listens for the NIC and not configured to ensure that
> rabbitmq service is actually in a fit state. I really need the
> consumers to use the same dns entry without any intelligence to be
> dynamically switching addresses.
>
> Could I draw upon anybody else's experience in configuring RabbitMQ on
> a windows infrastructure. I have considered using some linux boxes and
> ha proxy to load balance a windows rabbitmq cluster however our
> corporate IT are reluctant to introduce different OS's onto the
> estate!
>
>
What exactly makes shared storage so difficult?

Personally, I always recommend that the data for my Windows hosted apps
reside on a network storage device. This allows for "easy" passive
failover, log file access, and backup. I have also found that most
companies frown very heavily on machine local data storage, mostly for the
same reasons. The only reason to have data stored on the local machine,
would be performance. But I've yet to see network storage be a bottleneck.
YMMV.

Robby
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/90b229f0/attachment.htm>

From emile at rabbitmq.com  Tue Nov 22 12:43:45 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 22 Nov 2011 12:43:45 +0000
Subject: [rabbitmq-discuss] How rabbitMq Works betwwen two application
In-Reply-To: <F9023D4143187D489A9A59D1B4476F215A1EB9C91B@MUKPBCC1XMB703C.collab.barclayscorp.com>
References: <F9023D4143187D489A9A59D1B4476F215A1EB9C91B@MUKPBCC1XMB703C.collab.barclayscorp.com>
Message-ID: <4ECB9901.8070203@rabbitmq.com>

Hi Manisha,

On 22/11/11 06:42, manisha.kare at barclays.com wrote:
> I am not getting any example or any tutorial regarding. Can anybody help
> me in this regard. Can anybody provide me any kind of example or any
> kind of tutorial in this regards.

If you have one application that is based on the RabbitMQ Java client
then you should look at the Java tutorials for examples of how to
combine multiple applications using a variety of standard patterns:

http://www.rabbitmq.com/tutorials/tutorial-one-java.html

Please let us know how you get on.

-Emile

From steve.flitcroft at gmail.com  Tue Nov 22 13:23:16 2011
From: steve.flitcroft at gmail.com (steve flitcroft)
Date: Tue, 22 Nov 2011 05:23:16 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ Windows 2008r2 Setup
In-Reply-To: <CAH+xwdC-diaRO9RZLUpQayXo5UhN6QKMEtBRNQRoK8URqoHvPA@mail.gmail.com>
References: <d2127fc2-2a05-4651-b473-c1d836256d7f@w3g2000vbw.googlegroups.com>
	<CAH+xwdC-diaRO9RZLUpQayXo5UhN6QKMEtBRNQRoK8URqoHvPA@mail.gmail.com>
Message-ID: <7159630b-71cd-4748-a397-1dab6bcbbd9e@h21g2000yqg.googlegroups.com>

Hi Rob,

Not really the shared storage but the way the RabbitMq windows
installer appends a guid to the service name means there is a
difference between the nodes in the cluster therefore they do not play
nice with the Cluster and Failover manager and everything has to be
identical. I have got around this by manually creating the service
using the earl service add.
However I have moved on in my thoughts since I believe we need an
Active/Active setup rather than Active/Passive.
I think I am going to go with the use of HaProxy to load balance
requests to a windows rabbitmq cluster.


On Nov 22, 11:49?am, Robert Raschke <rtrli... at googlemail.com> wrote:
> Hi Steve,
>
> On Tue, Nov 22, 2011 at 8:10 AM, steve flitcroft
> <steve.flitcr... at gmail.com>wrote:
>
>
>
>
>
>
>
>
>
> > I am currently investigating the best way to setup RabbitMQ on our
> > infrastructure. Over the last few days I have been playing with the
> > idea of using Cluster and Failover feature of Win2008 r2 however this
> > would only give me an single Active/Passive cluster and I would have
> > to use shared storage for the rabbitmq instances and the nature in
> > which the windows services install make this a bit of a nightmare to
> > configure. Another option to enable a load balanced cluster is to use
> > NLB however this does not really give the resilience that i need since
> > NLB only listens for the NIC and not configured to ensure that
> > rabbitmq service is actually in a fit state. I really need the
> > consumers to use the same dns entry without any intelligence to be
> > dynamically switching addresses.
>
> > Could I draw upon anybody else's experience in configuring RabbitMQ on
> > a windows infrastructure. I have considered using some linux boxes and
> > ha proxy to load balance a windows rabbitmq cluster however our
> > corporate IT are reluctant to introduce different OS's onto the
> > estate!
>
> What exactly makes shared storage so difficult?
>
> Personally, I always recommend that the data for my Windows hosted apps
> reside on a network storage device. This allows for "easy" passive
> failover, log file access, and backup. I have also found that most
> companies frown very heavily on machine local data storage, mostly for the
> same reasons. The only reason to have data stored on the local machine,
> would be performance. But I've yet to see network storage be a bottleneck.
> YMMV.
>
> Robby
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From emile at rabbitmq.com  Tue Nov 22 13:47:42 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 22 Nov 2011 13:47:42 +0000
Subject: [rabbitmq-discuss] RabbitMQ.Client CLS compliance
In-Reply-To: <19847428.540.1321486459674.JavaMail.geo-discussion-forums@yqff21>
References: <19847428.540.1321486459674.JavaMail.geo-discussion-forums@yqff21>
Message-ID: <4ECBA7FE.5010004@rabbitmq.com>

Hi,

On 16/11/11 23:34, TrueWill wrote:
> All it takes to enforce this is adding
> [assembly: CLSCompliant(true)]
> to the AssemblyInfo.cs, then turning on Treat warnings as errors. Please
> consider this. Thanks!

Trying this produces close to 1000 warnings/errors due to the wide use
of unsigned integers. The large scope of the changes required makes this
unlike to happen soon.

You may wish to use the HTTP API of the management plugin for monitoring
in the meantime:

http://www.rabbitmq.com/management.html



-Emile


From videlalvaro at gmail.com  Tue Nov 22 14:04:32 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Tue, 22 Nov 2011 15:04:32 +0100
Subject: [rabbitmq-discuss] Where's the old FAQ
Message-ID: <CAMcAHLUGSLJebHE-Ydmm6xDfugCXnyX3kLMd_JC=pU9PvFoa1w@mail.gmail.com>

Hi,

I've noticed that his page has been greatly improved:
http://www.rabbitmq.com/documentation.html thanks for that!

Now. I'm having trouble finding the old FAQ.

Is it gone?

Cheers,

Alvaro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/ae33e4b7/attachment.htm>

From simone.busoli at gmail.com  Tue Nov 22 14:08:50 2011
From: simone.busoli at gmail.com (Simone Busoli)
Date: Tue, 22 Nov 2011 15:08:50 +0100
Subject: [rabbitmq-discuss] RabbitMQ.Client CLS compliance
In-Reply-To: <4ECBA7FE.5010004@rabbitmq.com>
References: <19847428.540.1321486459674.JavaMail.geo-discussion-forums@yqff21>
	<4ECBA7FE.5010004@rabbitmq.com>
Message-ID: <CAOn7oW8-4aJmhkKtSO3wQgcaAWTry10sGwED+TZnO7u36yOpbA@mail.gmail.com>

I have been writing a .NET library which wraps the HTTP API if you're
interested. It's lacking lots of the features, but it's also very easy to
add them:
http://code.google.com/p/mexexp/source/browse/trunk/RabbitMQ/Resbit/ResbitClient.cs


On Tue, Nov 22, 2011 at 14:47, Emile Joubert <emile at rabbitmq.com> wrote:

> Hi,
>
> On 16/11/11 23:34, TrueWill wrote:
> > All it takes to enforce this is adding
> > [assembly: CLSCompliant(true)]
> > to the AssemblyInfo.cs, then turning on Treat warnings as errors. Please
> > consider this. Thanks!
>
> Trying this produces close to 1000 warnings/errors due to the wide use
> of unsigned integers. The large scope of the changes required makes this
> unlike to happen soon.
>
> You may wish to use the HTTP API of the management plugin for monitoring
> in the meantime:
>
> http://www.rabbitmq.com/management.html
>
>
>
> -Emile
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/4ac756c2/attachment.htm>

From vbernard42 at gmail.com  Tue Nov 22 14:39:09 2011
From: vbernard42 at gmail.com (Valentin BERNARD)
Date: Tue, 22 Nov 2011 06:39:09 -0800 (PST)
Subject: [rabbitmq-discuss] Where's the old FAQ
In-Reply-To: <CAMcAHLUGSLJebHE-Ydmm6xDfugCXnyX3kLMd_JC=pU9PvFoa1w@mail.gmail.com>
References: <CAMcAHLUGSLJebHE-Ydmm6xDfugCXnyX3kLMd_JC=pU9PvFoa1w@mail.gmail.com>
Message-ID: <6b2bd94c-67bb-4d76-bab6-327f562fe6ac@c18g2000yqj.googlegroups.com>

Hi,

I'm quoting Emile Joubert earlier today:
"The FAQ was a victim of a recent website reorganisation effort. (...)
Hopefully the FAQ will be resurrected soon."

Cheers. :)

Valentin.

On 22 nov, 15:04, Alvaro Videla <videlalv... at gmail.com> wrote:
> Hi,
>
> I've noticed that his page has been greatly improved:http://www.rabbitmq.com/documentation.htmlthanks for that!
>
> Now. I'm having trouble finding the old FAQ.
>
> Is it gone?
>
> Cheers,
>
> Alvaro
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From vbernard42 at gmail.com  Tue Nov 22 14:43:45 2011
From: vbernard42 at gmail.com (Valentin BERNARD)
Date: Tue, 22 Nov 2011 06:43:45 -0800 (PST)
Subject: [rabbitmq-discuss] Where's the old FAQ
In-Reply-To: <6b2bd94c-67bb-4d76-bab6-327f562fe6ac@c18g2000yqj.googlegroups.com>
References: <CAMcAHLUGSLJebHE-Ydmm6xDfugCXnyX3kLMd_JC=pU9PvFoa1w@mail.gmail.com>
	<6b2bd94c-67bb-4d76-bab6-327f562fe6ac@c18g2000yqj.googlegroups.com>
Message-ID: <0b88b6e0-1683-4983-a610-c04ed8509dfa@da3g2000vbb.googlegroups.com>

(By the way, you can still access the old FAQ using archive.org:
http://web.archive.org/web/20110703223643/http://www.rabbitmq.com/faq.html

Valentin.)

On 22 nov, 15:39, Valentin BERNARD <vbernar... at gmail.com> wrote:
> Hi,
>
> I'm quoting Emile Joubert earlier today:
> "The FAQ was a victim of a recent website reorganisation effort. (...)
> Hopefully the FAQ will be resurrected soon."
>
> Cheers. :)
>
> Valentin.
>
> On 22 nov, 15:04, Alvaro Videla <videlalv... at gmail.com> wrote:> Hi,
>
> > I've noticed that his page has been greatly improved:http://www.rabbitmq.com/documentation.htmlthanksfor that!
>
> > Now. I'm having trouble finding the old FAQ.
>
> > Is it gone?
>
> > Cheers,
>
> > Alvaro
>
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From smetj.net at gmail.com  Tue Nov 22 14:49:01 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Tue, 22 Nov 2011 06:49:01 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ Shovel Connections
In-Reply-To: <4ECA2283.2050300@rabbitmq.com>
References: <004201cc735b$b4aa9c80$1dffd580$@omc-international.com.au>	<33495078.665.1321537186592.JavaMail.geo-discussion-forums@yqni5>	<4EC9085B.7000009@rabbitmq.com>
	<29483802.904.1321869642710.JavaMail.geo-discussion-forums@yqan20>
	<4ECA2283.2050300@rabbitmq.com>
Message-ID: <2776405.373.1321973341983.JavaMail.geo-discussion-forums@yqhd1>

Hi Matthias,

I have defined my connections with a heartbeat setting of 5 seconds and I 
must say it looks like the problem doesn't occur anymore.
I'll leave the setup running like this for the time being and see what 
happens.  I'll report back when similar issues arise again.

As a reference:

...snip...
{destinations, [{broker, "amqp://some_server?heartbeat=5"}]},
...snip...

Thanks,

Jelle

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/7787fc9c/attachment.htm>

From simon at rabbitmq.com  Tue Nov 22 15:05:59 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 22 Nov 2011 15:05:59 +0000
Subject: [rabbitmq-discuss] Where's the old FAQ
In-Reply-To: <CAMcAHLUGSLJebHE-Ydmm6xDfugCXnyX3kLMd_JC=pU9PvFoa1w@mail.gmail.com>
References: <CAMcAHLUGSLJebHE-Ydmm6xDfugCXnyX3kLMd_JC=pU9PvFoa1w@mail.gmail.com>
Message-ID: <4ECBBA57.6000908@rabbitmq.com>

On 22/11/11 14:04, Alvaro Videla wrote:
> I've noticed that his page has been greatly improved:
> http://www.rabbitmq.com/documentation.html thanks for that!
>
> Now. I'm having trouble finding the old FAQ.
>
> Is it gone?

Yes.

There's been a fairly substantial reorganisation of the website. Quite a 
lot of stuff has been moved around and is (hopefully!) more findable.

The old FAQ is about the only thing that's actually gone though. Quite a 
lot of it had become inaccurate over the years and very few of the 
"Questions" in it were really Frequently Asked.

Having said that we were probably a bit overhasty in removing it 
completely, the previously discussed question on requeuing order was 
worth having. So we'll revisit the old FAQ and bring back any bits that 
were valuable, although probably not in an FAQ format (the whole website 
is meant to be answering people's questions about RabbitMQ, after all...)

With that in mind, was there anything in particular you were looking for 
in there?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From videlalvaro at gmail.com  Tue Nov 22 15:08:42 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Tue, 22 Nov 2011 16:08:42 +0100
Subject: [rabbitmq-discuss] Where's the old FAQ
In-Reply-To: <4ECBBA57.6000908@rabbitmq.com>
References: <CAMcAHLUGSLJebHE-Ydmm6xDfugCXnyX3kLMd_JC=pU9PvFoa1w@mail.gmail.com>
	<4ECBBA57.6000908@rabbitmq.com>
Message-ID: <CAMcAHLV+HfgPMcimntCGwxQTkMdFXCSCiFHa01raiZRem9K0cA@mail.gmail.com>

Hi,

I remember there was a question / answer about the maximum size of messages
in rabbit.

A client asked me about that today.

BTW the new system looks pretty cool.

Cheers,

Alvaro

On Tue, Nov 22, 2011 at 4:05 PM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 22/11/11 14:04, Alvaro Videla wrote:
>
>> I've noticed that his page has been greatly improved:
>> http://www.rabbitmq.com/**documentation.html<http://www.rabbitmq.com/documentation.html>thanks for that!
>>
>> Now. I'm having trouble finding the old FAQ.
>>
>> Is it gone?
>>
>
> Yes.
>
> There's been a fairly substantial reorganisation of the website. Quite a
> lot of stuff has been moved around and is (hopefully!) more findable.
>
> The old FAQ is about the only thing that's actually gone though. Quite a
> lot of it had become inaccurate over the years and very few of the
> "Questions" in it were really Frequently Asked.
>
> Having said that we were probably a bit overhasty in removing it
> completely, the previously discussed question on requeuing order was worth
> having. So we'll revisit the old FAQ and bring back any bits that were
> valuable, although probably not in an FAQ format (the whole website is
> meant to be answering people's questions about RabbitMQ, after all...)
>
> With that in mind, was there anything in particular you were looking for
> in there?
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
>
> ______________________________**_________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/ad5ec7ae/attachment.htm>

From cao at ll.mit.edu  Tue Nov 22 16:02:55 2011
From: cao at ll.mit.edu (Cao, Yican - 0661 - MITLL)
Date: Tue, 22 Nov 2011 11:02:55 -0500
Subject: [rabbitmq-discuss] trouble to upgrade from 2.6.1 to 2.7.0 on OS X
Message-ID: <C7560413-EC2C-4A47-A5D5-22F96846CBEE@ll.mit.edu>

Anyone experiences similar problem? 
I could not upgrade from 2.6.1 to 2.7.0 using macports. 
Besides out of box rabbitmq server, I have management plugin installed. 

Running:
port install rabbitmq-server
or
port upgrade rabbitmq-server

No errors, just won't upgrade. 

If do:
port search rabbitmq-server
rabbitmq-server @2.6.1 (net)
    The RabbitMQ AMQP Server

rabbitmq-server @2.7.0 (net)
    The RabbitMQ AMQP Server

Found 2 ports.

Any ideas? Thanks.


Yican Cao
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 6299 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/af347baa/attachment.bin>

From rtrlists at googlemail.com  Tue Nov 22 16:09:09 2011
From: rtrlists at googlemail.com (Robert Raschke)
Date: Tue, 22 Nov 2011 16:09:09 +0000
Subject: [rabbitmq-discuss] RabbitMQ Windows 2008r2 Setup
In-Reply-To: <7159630b-71cd-4748-a397-1dab6bcbbd9e@h21g2000yqg.googlegroups.com>
References: <d2127fc2-2a05-4651-b473-c1d836256d7f@w3g2000vbw.googlegroups.com>
	<CAH+xwdC-diaRO9RZLUpQayXo5UhN6QKMEtBRNQRoK8URqoHvPA@mail.gmail.com>
	<7159630b-71cd-4748-a397-1dab6bcbbd9e@h21g2000yqg.googlegroups.com>
Message-ID: <CAH+xwdCO5bwrw71x_3sf8MdsEzqG5nonBKHwSmTySx6PFedh=Q@mail.gmail.com>

On Tue, Nov 22, 2011 at 1:23 PM, steve flitcroft
<steve.flitcroft at gmail.com>wrote:

> Hi Rob,
>
> Not really the shared storage but the way the RabbitMq windows
> installer appends a guid to the service name means there is a
> difference between the nodes in the cluster therefore they do not play
> nice with the Cluster and Failover manager and everything has to be
> identical. I have got around this by manually creating the service
> using the earl service add.
> However I have moved on in my thoughts since I believe we need an
> Active/Active setup rather than Active/Passive.
> I think I am going to go with the use of HaProxy to load balance
> requests to a windows rabbitmq cluster.
>
>
Ahhhh, yes, that pesky hex string at the end of the service name.

Find the script that registers the service, within there will be a call to
erlsrv.

Add a command line option to erlsrv: -internalservicename "RabbitMQ_Service"
or whatever nice name you want to use.

Maybe this will allow you to set things up in a nicer way?

/Robby
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/3aa40e6e/attachment.htm>

From ask at rabbitmq.com  Tue Nov 22 16:14:34 2011
From: ask at rabbitmq.com (Ask Solem)
Date: Tue, 22 Nov 2011 16:14:34 +0000
Subject: [rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541
In-Reply-To: <CADuqQqbGhvwbXxu9rgmkn+i-n7TRwGB3wH0zTDUbJNK3J1aXew@mail.gmail.com>
References: <3eecd8a3-f3d2-4aa0-b670-e0538d4bd635@gi1g2000vbb.googlegroups.com>
	<69E1EC29-F4D7-4E05-949E-107B12E504B8@rabbitmq.com>
	<EF4007AD-47A0-4992-9CFF-0C549E71D3F0@gmail.com>
	<D7646C55-B2DA-46D2-B0FD-7B2180E425A8@celeryproject.org>
	<CADuqQqbGhvwbXxu9rgmkn+i-n7TRwGB3wH0zTDUbJNK3J1aXew@mail.gmail.com>
Message-ID: <8B2398B7-C209-44B8-9B93-A64EE8E6C935@rabbitmq.com>


On 18 Nov 2011, at 18:53, Mike Grouchy wrote:
> 
> 
> Okay,
> 
> So I enabled the pool set it to 12 (Seemed like a reasonable number
> for the BROKER_POOL_LIMIT). So I ran the task the first time and it
> seemed like it ran okay. I just got back from lunch and tried to run
> it again to see if maybe enabling the pool fixed the problem, but now
> we seem to have some more datapoints here.
> 
> I have attached the celery log output (from --INFO ) and the rabbitmq.log
> 
> https://gist.github.com/81e6f762410e6e4813aa
> 
> So it seems like we are running into a too many processes error, but I
> thought the upper bound was around 30K, which I can't imagine I would
> be using (even though, there are around 60k tasks).
> 
> I can't seem to replicate it consistently, which is making it hard to
> narrow down to a specific test case.


I guess you are running out of erlang processes for the result queues.
The amqp result backend is rather stupid, in that it creates one queue per result.
But this is necessary since the results should be delivered even though
there are no consumers currently waiting for it.

I'd suggest that you either switch to one of the other result backends (redis, database, memcached),

or if you use the results in RPC like calls (the one to retrieve the result
is always the same process as the one that published the task), you could
create your own backend that creates one queue per publisher instead (of course
this will eventually lead to problems too if the number of publishers exceed the process limit).  You could also increase the erlang process limit, the answer how to should be in 
the list archives.

From rtrlists at googlemail.com  Tue Nov 22 16:14:44 2011
From: rtrlists at googlemail.com (Robert Raschke)
Date: Tue, 22 Nov 2011 16:14:44 +0000
Subject: [rabbitmq-discuss] RabbitMQ Windows 2008r2 Setup
In-Reply-To: <7159630b-71cd-4748-a397-1dab6bcbbd9e@h21g2000yqg.googlegroups.com>
References: <d2127fc2-2a05-4651-b473-c1d836256d7f@w3g2000vbw.googlegroups.com>
	<CAH+xwdC-diaRO9RZLUpQayXo5UhN6QKMEtBRNQRoK8URqoHvPA@mail.gmail.com>
	<7159630b-71cd-4748-a397-1dab6bcbbd9e@h21g2000yqg.googlegroups.com>
Message-ID: <CAH+xwdAV7Bo2H-i7cv7F4m_8gkpupS0Z_f5DZg2t21q3fC0MRw@mail.gmail.com>

On Tue, Nov 22, 2011 at 1:23 PM, steve flitcroft
<steve.flitcroft at gmail.com>wrote:

> Hi Rob,
>
> Not really the shared storage but the way the RabbitMq windows
> installer appends a guid to the service name means there is a
> difference between the nodes in the cluster therefore they do not play
> nice with the Cluster and Failover manager and everything has to be
> identical. I have got around this by manually creating the service
> using the earl service add.
> However I have moved on in my thoughts since I believe we need an
> Active/Active setup rather than Active/Passive.
> I think I am going to go with the use of HaProxy to load balance
> requests to a windows rabbitmq cluster.
>
>
Ah, only just noticed that there is now an installer that is doing the
registering.

Maybe the powers that be could be persuaded to add the -internalservicename
option (simply using the same name as the service getting registered) into
the appropriate erlsrv invocation in the installer?

Thanks,
Robby
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/5c9d258e/attachment.htm>

From mgrouchy at gmail.com  Tue Nov 22 16:24:46 2011
From: mgrouchy at gmail.com (Mike Grouchy)
Date: Tue, 22 Nov 2011 11:24:46 -0500
Subject: [rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541
In-Reply-To: <8B2398B7-C209-44B8-9B93-A64EE8E6C935@rabbitmq.com>
References: <3eecd8a3-f3d2-4aa0-b670-e0538d4bd635@gi1g2000vbb.googlegroups.com>
	<69E1EC29-F4D7-4E05-949E-107B12E504B8@rabbitmq.com>
	<EF4007AD-47A0-4992-9CFF-0C549E71D3F0@gmail.com>
	<D7646C55-B2DA-46D2-B0FD-7B2180E425A8@celeryproject.org>
	<CADuqQqbGhvwbXxu9rgmkn+i-n7TRwGB3wH0zTDUbJNK3J1aXew@mail.gmail.com>
	<8B2398B7-C209-44B8-9B93-A64EE8E6C935@rabbitmq.com>
Message-ID: <CADuqQqZ+wafUo_-HPrLh0_dYOFAvACA0YoRMOA8LVbprcMRevg@mail.gmail.com>

On Tue, Nov 22, 2011 at 11:14 AM, Ask Solem <ask at rabbitmq.com> wrote:
>
> On 18 Nov 2011, at 18:53, Mike Grouchy wrote:
>>
>>
>> Okay,
>>
>> So I enabled the pool set it to 12 (Seemed like a reasonable number
>> for the BROKER_POOL_LIMIT). So I ran the task the first time and it
>> seemed like it ran okay. I just got back from lunch and tried to run
>> it again to see if maybe enabling the pool fixed the problem, but now
>> we seem to have some more datapoints here.
>>
>> I have attached the celery log output (from --INFO ) and the rabbitmq.log
>>
>> https://gist.github.com/81e6f762410e6e4813aa
>>
>> So it seems like we are running into a too many processes error, but I
>> thought the upper bound was around 30K, which I can't imagine I would
>> be using (even though, there are around 60k tasks).
>>
>> I can't seem to replicate it consistently, which is making it hard to
>> narrow down to a specific test case.
>
>
> I guess you are running out of erlang processes for the result queues.
> The amqp result backend is rather stupid, in that it creates one queue per result.
> But this is necessary since the results should be delivered even though
> there are no consumers currently waiting for it.
>
> I'd suggest that you either switch to one of the other result backends (redis, database, memcached),
>
> or if you use the results in RPC like calls (the one to retrieve the result
> is always the same process as the one that published the task), you could
> create your own backend that creates one queue per publisher instead (of course
> this will eventually lead to problems too if the number of publishers exceed the process limit). ?You could also increase the erlang process limit, the answer how to should be in
> the list archives.

Thanks, this is the idea I have been toying around with as
well(switching queues to redis), I think in the long run, it might be
the better solution. I just wasn't sure if there was something that I
had been doing particularly wrong in general.

Thanks a lot for the help and feedback.

Cheers,
Mike

From john.doe44210 at gmail.com  Tue Nov 22 16:22:53 2011
From: john.doe44210 at gmail.com (john doe)
Date: Tue, 22 Nov 2011 17:22:53 +0100
Subject: [rabbitmq-discuss] questions about RpcClient
In-Reply-To: <4ECA18E0.3080601@rabbitmq.com>
References: <CALbPev=K4WWDv-W8=vggYEx7EqJCMcb+VwWiFLCR62dD800y7A@mail.gmail.com>
	<4EC9202D.30303@rabbitmq.com>
	<CALbPev=G3YT_mz-o_7ZX__OjBajHO+tou5euHV8JRm+QoKqPXw@mail.gmail.com>
	<4ECA18E0.3080601@rabbitmq.com>
Message-ID: <CALbPevn3eQto0eLu8X0TsBALH0TG5gb2PLnHSZA-h1aKkYjnWg@mail.gmail.com>

Ok, now I understand, thanks.

I find strange that primitiveCall do not follow the signature of original
functions, with exchange and routing key provided along with the message.

I am using extensively routing facilities of amqp, and I need to manage
thousands of clients, one per routing key (or do you think creating a
channel and a private queue is cheap enough to be done tens of time per
second?)

I guess you designed this RpcClient class more as an example, to be
customized? That's fine but code of RpcClient is not that simple and I
would have prefered not to maintain that kind of risky low-level things...

Would you consider putting a primitiveCall(String exchange, String
routingKey, AMQP.BasicProperties props, byte[] message) in a future release?

John


2011/11/21 Matthias Radestock <matthias at rabbitmq.com>

> On 21/11/11 09:11, john doe wrote:
>
>> Thank you Matthias.
>> If this class is known to *not* be threadsafe, why is there a
>> "synchronized" statement in primitiveCall? It somewhat confuses me.
>>
>
> That synchronisation is necessary for the coordination of the thread
> issuing a call with the thread on which the reply arrives.
>
> The code calls _channel.basicPublish, which is not threadsafe, outside of
> any synchronisation context. Hence it is not safe to issue calls from
> multiple threads or use the underlying channel in other threads.
>
> Matthias.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/29ac6ca2/attachment.htm>

From andrea.rosa at hp.com  Tue Nov 22 17:30:47 2011
From: andrea.rosa at hp.com (Rosa, Andrea)
Date: Tue, 22 Nov 2011 17:30:47 +0000
Subject: [rabbitmq-discuss] IPv6 issue?
In-Reply-To: <4EC3EB59.9010408@rabbitmq.com>
References: <5F389C517756284F80239F55BCA5DDDD17D60BA7@G9W0721.americas.hpqcorp.net>
	<4EC3EB59.9010408@rabbitmq.com>
Message-ID: <5F389C517756284F80239F55BCA5DDDD17D76F3C@G9W0721.americas.hpqcorp.net>

Hi Simon

> -----Original Message-----
> From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-
> discuss-bounces at lists.rabbitmq.com] On Behalf Of Simon MacMullen
> Sent: 16 November 2011 16:57
> To: rabbitmq-discuss at lists.rabbitmq.com
> Subject: Re: [rabbitmq-discuss] IPv6 issue?
> 
> 
> I would like to figure out why this isn't working for you though - the
> TCP6 thing *should* be a red herring. Could this have been some
> transient problem that went away by coincidence? Or am I being
> optimistic?
> 

You are right, I deeply investigated in that problem and the root cause it not the IPv6 configuration but a problem in our client library.

Thanks for your time
--
Andrea Rosa

From ask at rabbitmq.com  Tue Nov 22 18:26:13 2011
From: ask at rabbitmq.com (Ask Solem)
Date: Tue, 22 Nov 2011 18:26:13 +0000
Subject: [rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541
In-Reply-To: <CADuqQqZ+wafUo_-HPrLh0_dYOFAvACA0YoRMOA8LVbprcMRevg@mail.gmail.com>
References: <3eecd8a3-f3d2-4aa0-b670-e0538d4bd635@gi1g2000vbb.googlegroups.com>
	<69E1EC29-F4D7-4E05-949E-107B12E504B8@rabbitmq.com>
	<EF4007AD-47A0-4992-9CFF-0C549E71D3F0@gmail.com>
	<D7646C55-B2DA-46D2-B0FD-7B2180E425A8@celeryproject.org>
	<CADuqQqbGhvwbXxu9rgmkn+i-n7TRwGB3wH0zTDUbJNK3J1aXew@mail.gmail.com>
	<8B2398B7-C209-44B8-9B93-A64EE8E6C935@rabbitmq.com>
	<CADuqQqZ+wafUo_-HPrLh0_dYOFAvACA0YoRMOA8LVbprcMRevg@mail.gmail.com>
Message-ID: <CEF05D95-A4EF-499F-AB41-4D313CF301C9@rabbitmq.com>


On 22 Nov 2011, at 16:24, Mike Grouchy wrote:

> 
> Thanks, this is the idea I have been toying around with as
> well(switching queues to redis), I think in the long run, it might be
> the better solution. I just wasn't sure if there was something that I
> had been doing particularly wrong in general.
> 
> Thanks a lot for the help and feedback.


Note that I didn't recommend switching everything to Redis,
only the results.  There are durability concerns with the Redis
message transport that you should take into account before using it.


From mgrouchy at gmail.com  Tue Nov 22 18:57:58 2011
From: mgrouchy at gmail.com (Mike Grouchy)
Date: Tue, 22 Nov 2011 13:57:58 -0500
Subject: [rabbitmq-discuss] Rabbitmq With Celery Problem, Error 541
In-Reply-To: <CEF05D95-A4EF-499F-AB41-4D313CF301C9@rabbitmq.com>
References: <3eecd8a3-f3d2-4aa0-b670-e0538d4bd635@gi1g2000vbb.googlegroups.com>
	<69E1EC29-F4D7-4E05-949E-107B12E504B8@rabbitmq.com>
	<EF4007AD-47A0-4992-9CFF-0C549E71D3F0@gmail.com>
	<D7646C55-B2DA-46D2-B0FD-7B2180E425A8@celeryproject.org>
	<CADuqQqbGhvwbXxu9rgmkn+i-n7TRwGB3wH0zTDUbJNK3J1aXew@mail.gmail.com>
	<8B2398B7-C209-44B8-9B93-A64EE8E6C935@rabbitmq.com>
	<CADuqQqZ+wafUo_-HPrLh0_dYOFAvACA0YoRMOA8LVbprcMRevg@mail.gmail.com>
	<CEF05D95-A4EF-499F-AB41-4D313CF301C9@rabbitmq.com>
Message-ID: <CADuqQqZAHpokakHgxd1A=WJa5H4t29MH6NOk9JoqvvwONm1TdQ@mail.gmail.com>

On Tue, Nov 22, 2011 at 1:26 PM, Ask Solem <ask at rabbitmq.com> wrote:
>
> On 22 Nov 2011, at 16:24, Mike Grouchy wrote:
>
>>
>> Thanks, this is the idea I have been toying around with as
>> well(switching queues to redis), I think in the long run, it might be
>> the better solution. I just wasn't sure if there was something that I
>> had been doing particularly wrong in general.
>>
>> Thanks a lot for the help and feedback.
>
>
> Note that I didn't recommend switching everything to Redis,
> only the results. ?There are durability concerns with the Redis
> message transport that you should take into account before using it.
>
>

Ah yes, I should have been clear in my response, when I said
"switching queues to redis", I meant results backend(which isn't the
same thing at all I know). Im still going to use rabbitmq as the
broker, but redis as the celery result backend. Hopefully this will
clear up the issue.

Thanks.

From mailing.list.viewer at gmail.com  Tue Nov 22 20:54:39 2011
From: mailing.list.viewer at gmail.com (Jon Jon)
Date: Tue, 22 Nov 2011 13:54:39 -0700
Subject: [rabbitmq-discuss] For what applications are you using RabbitMQ?
In-Reply-To: <20111114101125.GA4273@southbank.eng.vmware.com>
References: <CANSYJo+jkWgy3NQCyYjyhjDHJYt8DYeQmZ3p0QrD2MzUS+oyig@mail.gmail.com>
	<20111114101125.GA4273@southbank.eng.vmware.com>
Message-ID: <CANSYJoJK_W5jbG3Jm80aHP=xG1uoxjr_VYeDYjP0ErUZZw_4UQ@mail.gmail.com>

Hello Alexandru,

Thanks for the reply, but it seems the link is broken.  Do you know if it
has changed?

I really am interested in hearing specific use cases, personally, we are
finding new uses for RabbitMQ every day.

Thanks,
Jon

On Mon, Nov 14, 2011 at 3:11 AM, Alexandru Scvor?ov
<alexandru at rabbitmq.com>wrote:

> Hi Jon,
>
> > Anyway, with the seemingly limitless applications for Message Queuing,
> > I'm really curious as to what everyone is using their message queues to
> do
> > and how they have them configured,
> >
> > would anyone care to share their setup(s)?
>
> Since nobody else seems to be picking this up, here are a bunch of "Use
> Cases" and other assorted links:
>  http://www.rabbitmq.com/delicious.html
>
> Cheers,
> Alex
>
> On Wed, Nov 09, 2011 at 05:57:29PM -0700, Jon Jon wrote:
> > Hello All,
> >
> > I have just recently begun my foray into the world of enterprise class
> > message queuing.
> > To be honest, it's a bit intimidating at first, but that feeling is
> quickly
> > overwhelmed with excitement and wonder. :)
> > There is so much to learn!  But message queuing really seems to be the
> way
> > to go for scalable, distributed workloads.
> > (I have been trying to get a Kerrighed cluster up and running and had
> been
> > only mildly successful
> > when I started a parallel MCollective project using RabbitMQ, and thus,
> the
> > introduction to Rabbit)
> >
> > Anyway, with the seemingly limitless applications for Message Queuing,
> > I'm really curious as to what everyone is using their message queues to
> do
> > and how they have them configured,
> >
> > would anyone care to share their setup(s)?
> >
> > Thanks, and I look forward to reading your responses.
> > Jon
>
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-discuss at lists.rabbitmq.com
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/3d04c17e/attachment.htm>

From jim at rabbitmq.com  Tue Nov 22 21:06:37 2011
From: jim at rabbitmq.com (Jim Apperly)
Date: Tue, 22 Nov 2011 21:06:37 +0000
Subject: [rabbitmq-discuss] For what applications are you using RabbitMQ?
In-Reply-To: <CANSYJoJK_W5jbG3Jm80aHP=xG1uoxjr_VYeDYjP0ErUZZw_4UQ@mail.gmail.com>
References: <CANSYJo+jkWgy3NQCyYjyhjDHJYt8DYeQmZ3p0QrD2MzUS+oyig@mail.gmail.com>
	<20111114101125.GA4273@southbank.eng.vmware.com>
	<CANSYJoJK_W5jbG3Jm80aHP=xG1uoxjr_VYeDYjP0ErUZZw_4UQ@mail.gmail.com>
Message-ID: <CAMdQUi-Sxtjvsuoyq1aPWaq4DJj94hNLU1Jzg6zSGJ2A+yDnrg@mail.gmail.com>

Another victim of the website reorganisation effort...

The original content linked to this, which is stale but still accessible:
http://delicious.com/alexisrichardson/rabbitmq

For use-cases, there is some some stuff that you may find useful here:
http://www.rabbitmq.com/how.html#specific-examples

Or perhaps even here:
http://www.rabbitmq.com/how.html#messaging-patterns

Jim

On 22 November 2011 20:54, Jon Jon <mailing.list.viewer at gmail.com> wrote:
> Hello Alexandru,
>
> Thanks for the reply, but it seems the link is broken.? Do you know if it
> has changed?
>
> I really am interested in hearing specific use cases, personally, we are
> finding new uses for RabbitMQ every day.
>
> Thanks,
> Jon
>
> On Mon, Nov 14, 2011 at 3:11 AM, Alexandru Scvor?ov <alexandru at rabbitmq.com>
> wrote:
>>
>> Hi Jon,
>>
>> > Anyway, with the seemingly limitless applications for Message Queuing,
>> > I'm really curious as to what everyone is using their message queues to
>> > do
>> > and how they have them configured,
>> >
>> > would anyone care to share their setup(s)?
>>
>> Since nobody else seems to be picking this up, here are a bunch of "Use
>> Cases" and other assorted links:
>> ?http://www.rabbitmq.com/delicious.html
>>
>> Cheers,
>> Alex
>>
>> On Wed, Nov 09, 2011 at 05:57:29PM -0700, Jon Jon wrote:
>> > Hello All,
>> >
>> > I have just recently begun my foray into the world of enterprise class
>> > message queuing.
>> > To be honest, it's a bit intimidating at first, but that feeling is
>> > quickly
>> > overwhelmed with excitement and wonder. :)
>> > There is so much to learn! ?But message queuing really seems to be the
>> > way
>> > to go for scalable, distributed workloads.
>> > (I have been trying to get a Kerrighed cluster up and running and had
>> > been
>> > only mildly successful
>> > when I started a parallel MCollective project using RabbitMQ, and thus,
>> > the
>> > introduction to Rabbit)
>> >
>> > Anyway, with the seemingly limitless applications for Message Queuing,
>> > I'm really curious as to what everyone is using their message queues to
>> > do
>> > and how they have them configured,
>> >
>> > would anyone care to share their setup(s)?
>> >
>> > Thanks, and I look forward to reading your responses.
>> > Jon
>>
>> > _______________________________________________
>> > rabbitmq-discuss mailing list
>> > rabbitmq-discuss at lists.rabbitmq.com
>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>

From dagda1 at scotalt.net  Tue Nov 22 22:06:59 2011
From: dagda1 at scotalt.net (Paul Cowan)
Date: Tue, 22 Nov 2011 22:06:59 +0000
Subject: [rabbitmq-discuss] reply_to header problems
Message-ID: <CAEBV8YQYbuK3QGdYiUDoTSd56M0012w8tTBsVZbkOCM4OnojPw@mail.gmail.com>

Hi,

I am trying to get my head round rabbitmq and I want 1 queue to listen and
when it receives a message, I want it to reply to an anonymous queue that
is specified via the reply_to header with multiple messages.

So far I have the following thor task that is doing what I want in the
following gist:

https://gist.github.com/1387174

My calling code is in this gist

https://gist.github.com/1387178

The problem is that messages are not sent until the all the messages in the
iteration have been published.

That is after the iteration in the (0..5) loop has finished then all the
messages are published.

Can anyone please tell me how I can publish each message individually and
asynchronously without having to wait until they are all published?
Cheers

Paul Cowan

Cutting-Edge Solutions (Scotland)

http://thesoftwaresimpleton.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/7c6c6889/attachment.htm>

From mdworkin.spm at gmail.com  Wed Nov 23 00:15:23 2011
From: mdworkin.spm at gmail.com (Marc Dworkin)
Date: Tue, 22 Nov 2011 19:15:23 -0500
Subject: [rabbitmq-discuss] Count Constraining Q
Message-ID: <CALNLX2hEkThwPP3e=80E8goYFDRqBDnad8Ss6FPVcy+P0k9MLA@mail.gmail.com>

Hi All,

I have just started dabbling with RabbitMQ with the goal of setting up a
distributed task running platform.

My naive set-up has one Topic Exchange, with routing
key "taskName"."messageType" (eg: fibonacciJob.jobFinished).  There is one
Job Q for each taskName bound to the Exchange on "taskName".jobPosted.  Job
Running consumers can connect to one or many Job Qs to retrieve and run
jobs (and post back status messages and downstream jobs).  I also have a
concept of Audit Consumers, who can bind to the Topic Exchange in all the
permutations of the routing key.

My Question is this: I would like to be able to specify the number of
instances of a particular job running at any given time.  Currently I have
a partial/kludgey implementation where the Job Poster listens to the Audit
Q for job completion before posting another job.  Is there a better
way/pattern to implement this?

Thanks!

Marc
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111122/694f569c/attachment.htm>

From cameron.davison at gmail.com  Wed Nov 23 04:37:31 2011
From: cameron.davison at gmail.com (Cameron Davison)
Date: Tue, 22 Nov 2011 22:37:31 -0600
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <4ECB554D.8070401@rabbitmq.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
	<4EC901F3.4040500@rabbitmq.com> <6250190793052131212@unknownmsgid>
	<4EC92F8A.4080300@rabbitmq.com> <4ECAB6F6.9090502@rabbitmq.com>
	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>
	<4ECAC578.3070202@rabbitmq.com>
	<CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>
	<4ECAD5BF.6050505@rabbitmq.com>
	<CAChq9g0jOixn=zN4dM3iJ6ArpYzPUspGoudi=FJrBXcU4DZfHw@mail.gmail.com>
	<4ECAF863.7030300@rabbitmq.com>
	<CAGWz9vWTmo2jkYAgyO0Rz9=y7H4w=x78L1bLYQo2LJMTwDW3zA@mail.gmail.com>
	<4ECB554D.8070401@rabbitmq.com>
Message-ID: <CAGWz9vWqVmUbfWKxW1jT5VTmpAiL5DFvsjeuXU3Q3N5FF0+mYw@mail.gmail.com>

Matthias,

Ideally we could get only the diff of the fix to 2.6.1 rather than all
of the features on the current trunk. Currently we are running with
the slave turned off because the memory pressure was stopping
publishes too often and causing the queues to back up considerably. Do
you have any timeline on when things will be QA'd or the next version
will be available with the fix? Would you know of any work around that
we could do rather than just turning off the slave? Thanks again for
all of your help tracking down this problem.

Cameron

On Tue, Nov 22, 2011 at 1:54 AM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
> Cameron,
>
> On 22/11/11 05:39, Cameron Davison wrote:
>>
>> I am glad that you were able to reproduce it. Do you forsee any chance
>> of being able to get a patch out soon? Or do you think that this will
>> not be fixed until the next version.
>
> The fix will appear in the next version, though if you are prepared to build
> rabbit from source you can get hold of it as soon as it's gone through qa.
>
> Matthias.
>

From manisha.kare at barclays.com  Wed Nov 23 05:33:34 2011
From: manisha.kare at barclays.com (manisha.kare at barclays.com)
Date: Wed, 23 Nov 2011 05:33:34 +0000
Subject: [rabbitmq-discuss] How rabbitMq Works betwwen two application
In-Reply-To: <4ECB9901.8070203@rabbitmq.com>
References: <F9023D4143187D489A9A59D1B4476F215A1EB9C91B@MUKPBCC1XMB703C.collab.barclayscorp.com>
	<4ECB9901.8070203@rabbitmq.com>
Message-ID: <F9023D4143187D489A9A59D1B4476F215A1EB9CD99@MUKPBCC1XMB703C.collab.barclayscorp.com>

Hi Emile,

Thanks for your reply and for your help. 

I will try to with this example and let you know. 

But my main concern is about development in android. Since Java is not my background, so I was searching for a example which is directly in android.

Thanks
Manisha

-----Original Message-----
From: Emile Joubert [mailto:emile at rabbitmq.com] 
Sent: 22 November 2011 18:14
To: Kare, Manisha : RBB COO
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] How rabbitMq Works betwwen two application

Hi Manisha,

On 22/11/11 06:42, manisha.kare at barclays.com wrote:
> I am not getting any example or any tutorial regarding. Can anybody help
> me in this regard. Can anybody provide me any kind of example or any
> kind of tutorial in this regards.

If you have one application that is based on the RabbitMQ Java client
then you should look at the Java tutorials for examples of how to
combine multiple applications using a variety of standard patterns:

http://www.rabbitmq.com/tutorials/tutorial-one-java.html

Please let us know how you get on.

-Emile
This e-mail and any attachments are confidential and intended
solely for the addressee and may also be privileged or exempt from
disclosure under applicable law. If you are not the addressee, or
have received this e-mail in error, please notify the sender
immediately, delete it from your system and do not copy, disclose
or otherwise act upon any part of this e-mail or its attachments.

Internet communications are not guaranteed to be secure or
virus-free.
The Barclays Group does not accept responsibility for any loss
arising from unauthorised access to, or interference with, any
Internet communications by any third party, or from the
transmission of any viruses. Replies to this e-mail may be
monitored by the Barclays Group for operational or business
reasons.

Any opinion or other information in this e-mail or its attachments
that does not relate to the business of the Barclays Group is
personal to the sender and is not given or endorsed by the Barclays
Group.

Barclays Bank PLC. Registered in England and Wales (registered no.
1026167).
Registered Office: 1 Churchill Place, London, E14 5HP, United
Kingdom.

Barclays Bank PLC is authorised and regulated by the Financial
Services Authority.


From michael.s.klishin at gmail.com  Wed Nov 23 06:07:17 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 23 Nov 2011 10:07:17 +0400
Subject: [rabbitmq-discuss] reply_to header problems
In-Reply-To: <CAEBV8YQYbuK3QGdYiUDoTSd56M0012w8tTBsVZbkOCM4OnojPw@mail.gmail.com>
References: <CAEBV8YQYbuK3QGdYiUDoTSd56M0012w8tTBsVZbkOCM4OnojPw@mail.gmail.com>
Message-ID: <CAE3HoVTiqzSgE0PcGPkY-UhWJQV3W4DoFEJjLtZoDZ8j7ug8YQ@mail.gmail.com>

2011/11/23 Paul Cowan <dagda1 at scotalt.net>

> The problem is that messages are not sent until the all the messages in
> the iteration have been published.
>
> That is after the iteration in the (0..5) loop has finished then all the
> messages are published.
>

amqp gem is event-driven and care needs to be taken to not block the event
loop. You can use EventMachine.defer
for processing of each message, then it will be executed in a thread pool.
Remember, however, that sharing channels between
threads is a no-no so you will have to use a separate channel for
publishing responses. It may potentially negate all the
benefits of publishing messages concurrently.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111123/77a7d07a/attachment.htm>

From steve at rabbitmq.com  Wed Nov 23 10:12:13 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Wed, 23 Nov 2011 10:12:13 +0000
Subject: [rabbitmq-discuss] trouble to upgrade from 2.6.1 to 2.7.0 on OS
	X
In-Reply-To: <C7560413-EC2C-4A47-A5D5-22F96846CBEE@ll.mit.edu>
References: <C7560413-EC2C-4A47-A5D5-22F96846CBEE@ll.mit.edu>
Message-ID: <B8E3D6D7-AF27-4D2B-9B97-D23ACF065DB4@rabbitmq.com>

Hi,
I'm sorry to hear you are having problems installing rabbitmq-server using
macports.

We have had one report of a problem internally, but not with the same symptoms
as yours.

Your note implies that port thinks rabbitmq-server is already installed at the
highest version (although it is hard to tell from so little information),

so let me ask the usual questions:

What do you have in the macports sources.conf file?

(I have:
    http://www.rabbitmq.com/releases/macports
    rsync://rsync.macports.org/release/ports/ [default]

in that order.... please check the *order* of your lines.)

(It appears that 2.7.0 hasn't yet reached rsync.macports.org.)

Do a 'port list rabbitmq-server' (not a search) -- you should see:
    rabbitmq-server                @2.7.0          net/rabbitmq-server
    rabbitmq-server                @2.6.1          net/rabbitmq-server
do you?

Did you do a sudo port sync? Have you done a 'selfupdate' recently?

When I do a port upgrade (after including rabbitmq /releases/macports in
sources.conf and 'sudo port sync') it works fine for me, so if everything checks
out, then you should do:

    sudo port unload rabbitmq-server
    sudo port uninstall rabbitmq-server
    sudo port -u -v uninstall

and repeat the install sequence (port sync, list and install steps) and see what
version you get.

If this continues to be a problem, then please attach macports logs with your
reply, and I'll try to diagnose it.

Steve Powell  (a curious bunny)
----------some more definitions from the SPD----------
avoirdupois (phr.) 'Would you like peas with that?'
distribute (v.) To denigrate an award.
definite (phr.) 'It's hard of hearing, I think.'
modest (n.) The most mod.

On 22 Nov 2011, at 16:02, Cao, Yican - 0661 - MITLL wrote:
> Anyone experiences similar problem? 
> I could not upgrade from 2.6.1 to 2.7.0 using macports. 
. . .
> Any ideas? Thanks.
> Yican Cao_______________________________________________

From mh at foldr3.com  Wed Nov 23 10:30:11 2011
From: mh at foldr3.com (Muharem Hrnjadovic)
Date: Wed, 23 Nov 2011 11:30:11 +0100
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
	31GB of RAM
Message-ID: <4ECCCB33.3040803@foldr3.com>

Hello there!

I am running a seismic calculation using python-celery (rev. 2.4.2, on
an ubuntu 11.04 server) and the number of task queues peaks at 6700.

nevertheless rabbitmq-server (rev. 2.7.0) crashes approx. 2.5 hours into
the calculation having 3912 queues and consuming 31GB of RAM at that
point.

99.9% of the queues are celery task queues and contain 0 or 1 messages;
the main celery task queue contains up to 4096 messages.

How do I figure out why rabbitmq is consuming that much RAM and why it's
crashing?

BTW, there was nothing in the logs but I do have a crash dump:

$ ll /var/lib/rabbitmq
total 487852
-r-------- 1 rabbitmq rabbitmq        20 2011-11-18 00:00 .erlang.cookie
-rw-r----- 1 rabbitmq rabbitmq 499544558 2011-11-23 10:23 erl_crash.dump
drwxr-xr-x 4 rabbitmq rabbitmq      4096 2011-11-23 07:38 mnesia/

Best regards/Mit freundlichen Gr??en

-- 
Muharem Hrnjadovic <mh at foldr3.com>
Public key id   : B2BBFCFC
Key fingerprint : A5A3 CC67 2B87 D641 103F  5602 219F 6B60 B2BB FCFC

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 900 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111123/19832ae2/attachment.pgp>

From simon at rabbitmq.com  Wed Nov 23 10:31:12 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 23 Nov 2011 10:31:12 +0000
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <CAGWz9vWqVmUbfWKxW1jT5VTmpAiL5DFvsjeuXU3Q3N5FF0+mYw@mail.gmail.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>	<4EC901F3.4040500@rabbitmq.com>
	<6250190793052131212@unknownmsgid>	<4EC92F8A.4080300@rabbitmq.com>
	<4ECAB6F6.9090502@rabbitmq.com>	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>	<4ECAC578.3070202@rabbitmq.com>	<CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>	<4ECAD5BF.6050505@rabbitmq.com>	<CAChq9g0jOixn=zN4dM3iJ6ArpYzPUspGoudi=FJrBXcU4DZfHw@mail.gmail.com>	<4ECAF863.7030300@rabbitmq.com>	<CAGWz9vWTmo2jkYAgyO0Rz9=y7H4w=x78L1bLYQo2LJMTwDW3zA@mail.gmail.com>	<4ECB554D.8070401@rabbitmq.com>
	<CAGWz9vWqVmUbfWKxW1jT5VTmpAiL5DFvsjeuXU3Q3N5FF0+mYw@mail.gmail.com>
Message-ID: <4ECCCB70.3040701@rabbitmq.com>

On 23/11/11 04:37, Cameron Davison wrote:
> Ideally we could get only the diff of the fix to 2.6.1

QA is ongoing, however it looks like the diff is rather small:

http://hg.rabbitmq.com/rabbitmq-server/rev/89315378597d

The only other workarounds would be to turn off either persistence or 
confirms - which I imagine you might be rather reluctant to do.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From matthias at rabbitmq.com  Wed Nov 23 10:43:38 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 23 Nov 2011 10:43:38 +0000
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <4ECCCB33.3040803@foldr3.com>
References: <4ECCCB33.3040803@foldr3.com>
Message-ID: <4ECCCE5A.3020909@rabbitmq.com>

Muharem,

On 23/11/11 10:30, Muharem Hrnjadovic wrote:
> I am running a seismic calculation using python-celery (rev. 2.4.2, on
> an ubuntu 11.04 server) and the number of task queues peaks at 6700.
>
> nevertheless rabbitmq-server (rev. 2.7.0) crashes approx. 2.5 hours into
> the calculation having 3912 queues and consuming 31GB of RAM at that
> point.
>
> 99.9% of the queues are celery task queues and contain 0 or 1 messages;
> the main celery task queue contains up to 4096 messages.
>
> How do I figure out why rabbitmq is consuming that much RAM and why it's
> crashing?

Post the output of 'rabbitmqctl report' when rabbit is getting close to 
eating that amount of memory.

> there was nothing in the logs

Really? I would have expected to at least see a memory alarm. Unless you 
have enormous quantities of RAM and/or changed the thresholds. Please 
post the logs.


Regards,

Matthias.

From emile at rabbitmq.com  Wed Nov 23 10:55:21 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 23 Nov 2011 10:55:21 +0000
Subject: [rabbitmq-discuss] Count Constraining Q
In-Reply-To: <CALNLX2hEkThwPP3e=80E8goYFDRqBDnad8Ss6FPVcy+P0k9MLA@mail.gmail.com>
References: <CALNLX2hEkThwPP3e=80E8goYFDRqBDnad8Ss6FPVcy+P0k9MLA@mail.gmail.com>
Message-ID: <4ECCD119.5010307@rabbitmq.com>

Hi Marc,

On 23/11/11 00:15, Marc Dworkin wrote:
> My Question is this: I would like to be able to specify the number of
> instances of a particular job running at any given time.  Currently I

If I understand your question correctly it could be rephrased as "how
can I limit the number of unacknowledged messages in a queue with
multiple consumers?"

If you had a way of limiting the number of consumers to the queue to the
desired number then that can limit the number of unacknowledged
messages. Declaring or redeclaring a queue returns the current consumer
count. This number could be used to determine whether a queue is allowed
any more consumers. Each consumer should only be allowed one
unacknowledged message.

It is possible to limit the number of unacknowledged messages held by a
single consumer, using the basic.qos method. A single specialised
consumer that used the desired QoS value, and redistributed jobs to
workers might also solve the problem.


-Emile

From karthikeyan.manoharan at barclays.com  Wed Nov 23 11:07:38 2011
From: karthikeyan.manoharan at barclays.com (karthikeyan.manoharan at barclays.com)
Date: Wed, 23 Nov 2011 11:07:38 +0000
Subject: [rabbitmq-discuss] Need Help
Message-ID: <E2816E4A2A254E4A941B5DFE49F56F6F38E461B2D6@MUKPBCC1XMB706C.collab.barclayscorp.com>

> My Name     : Karthikeyan
> Designation  : Developer
>
> I have started using Rabbit Mq for past 1 month.
> I able to connect rabbitmq with Android and send message from rabbit
> mq management plugin console to android application.
> The message is successfully send and I am able to see the message in
> android application.
>
> I need to connect rabbit mq with other mobile applications other than
> Android. How do I do it ?
> Please provide any tutorial to work with mobile portal accelerator (
> all devices ) , RAD , Portal Server with rabbit mq.
> Also, please send me  working sample of spring - rabbitmq integration.
> When I try to create exchange, queues, channels and bind and send
> message using spring ,exchanges , virtual host, queues are created But
> message is not send.
>
> When I try sending messaging using a simple java application with
> rabbit mq , everything is working.
> But, when using spring I am facing problems , the sample amqp-spring
> project is not working .I am using the latest rabbitmq server and client.
>
> I also need to connect to mainframe applications and invoke jcl,cics,cobol.
> With simple java program and ibm's jar's I am able to connect to mainframe.
> But, I need to use Rabbit Mq as middleware to connect to mainframe
> from a spring application.
> Need a proper tutorial or sample source .




This e-mail and any attachments are confidential and intended
solely for the addressee and may also be privileged or exempt from
disclosure under applicable law. If you are not the addressee, or
have received this e-mail in error, please notify the sender
immediately, delete it from your system and do not copy, disclose
or otherwise act upon any part of this e-mail or its attachments.

Internet communications are not guaranteed to be secure or
virus-free.
The Barclays Group does not accept responsibility for any loss
arising from unauthorised access to, or interference with, any
Internet communications by any third party, or from the
transmission of any viruses. Replies to this e-mail may be
monitored by the Barclays Group for operational or business
reasons.

Any opinion or other information in this e-mail or its attachments
that does not relate to the business of the Barclays Group is
personal to the sender and is not given or endorsed by the Barclays
Group.

Barclays Bank PLC. Registered in England and Wales (registered no.
1026167).
Registered Office: 1 Churchill Place, London, E14 5HP, United
Kingdom.

Barclays Bank PLC is authorised and regulated by the Financial
Services Authority.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111123/cc2fab39/attachment.htm>

From simon at rabbitmq.com  Wed Nov 23 11:19:45 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 23 Nov 2011 11:19:45 +0000
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <CAL8b_0eNz6bw=j7Qfcw02fJ0r_iokXY8z_YRAmhN8=WVPSy=gQ@mail.gmail.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>	<4EC39721.7000201@rabbitmq.com>	<4EC3ABB5.5080602@rabbitmq.com>	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>	<4EC3AF7F.3040905@rabbitmq.com>	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>	<4EC3B5D3.9040204@rabbitmq.com>	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>	<4EC3BDA9.30207@rabbitmq.com>	<CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>	<4EC4F469.70306@rabbitmq.com>
	<CAL8b_0eNz6bw=j7Qfcw02fJ0r_iokXY8z_YRAmhN8=WVPSy=gQ@mail.gmail.com>
Message-ID: <4ECCD6D1.4020402@rabbitmq.com>

On 20/11/11 11:47, Sampo Savolainen wrote:
> So it seems having rabbitmq running is preventing another service
> (network-manager perhaps?) from shutting down cleanly.

I have no idea how on earth that could happen, but I don't know much 
about NetworkManager.

There are also reports from Ubuntu users that "ConsoleKit" (whatever 
that is) considers the RabbitMQ service to be a regular logged in user. 
I wonder if the two issues could be related?

The trouble is, we don't know much about how this is supposed to work 
(and it doesn't seem very documented), and can't replicate things.

I'll go and poke some Launchpad bugs and see if I can get anyone from 
Ubuntu / Canonical to help.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From matthias at rabbitmq.com  Wed Nov 23 11:25:24 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 23 Nov 2011 11:25:24 +0000
Subject: [rabbitmq-discuss] Need Help
In-Reply-To: <E2816E4A2A254E4A941B5DFE49F56F6F38E461B2D6@MUKPBCC1XMB706C.collab.barclayscorp.com>
References: <E2816E4A2A254E4A941B5DFE49F56F6F38E461B2D6@MUKPBCC1XMB706C.collab.barclayscorp.com>
Message-ID: <4ECCD824.4060406@rabbitmq.com>

Karthikeyan,

On 23/11/11 11:07, karthikeyan.manoharan at barclays.com wrote:
> *> Also, please send me working sample of spring - rabbitmq integration.*
>  > When I try to create exchange, queues, channels and bind and send
>  > message using spring ,exchanges , virtual host, queues are created But
>  > message is not send.

I suggest you direct this query to the spring-amqp forum at 
http://forum.springsource.org/forumdisplay.php?74-AMQP

Your other questions regard the interaction of rabbit with a variety of 
proprietary technologies. It is possible that somebody on this list has 
used those combinations and can give you some pointers, but I suspect 
for most of them you are going to have to work out the solutions yourself.

Regards,

Matthias.

From kamauallan at gmail.com  Wed Nov 23 11:41:37 2011
From: kamauallan at gmail.com (Allan Kamau)
Date: Wed, 23 Nov 2011 14:41:37 +0300
Subject: [rabbitmq-discuss] Need Help
In-Reply-To: <4ECCD824.4060406@rabbitmq.com>
References: <E2816E4A2A254E4A941B5DFE49F56F6F38E461B2D6@MUKPBCC1XMB706C.collab.barclayscorp.com>
	<4ECCD824.4060406@rabbitmq.com>
Message-ID: <CAF3N6oQR2NDFbRSx1mVMVBYz_DZEVfMYZu21-cmZbgbKQDz8ZA@mail.gmail.com>

On Wed, Nov 23, 2011 at 2:25 PM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
> Karthikeyan,
>
> On 23/11/11 11:07, karthikeyan.manoharan at barclays.com wrote:
>>
>> *> Also, please send me working sample of spring - rabbitmq integration.*
>> ?> When I try to create exchange, queues, channels and bind and send
>> ?> message using spring ,exchanges , virtual host, queues are created But
>> ?> message is not send.
>
> I suggest you direct this query to the spring-amqp forum at
> http://forum.springsource.org/forumdisplay.php?74-AMQP
>
> Your other questions regard the interaction of rabbit with a variety of
> proprietary technologies. It is possible that somebody on this list has used
> those combinations and can give you some pointers, but I suspect for most of
> them you are going to have to work out the solutions yourself.
>
> Regards,
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

How about simply sending AMQP messages using plain Java (or other
program code) from all these servers/application containers you have
mentioned. When your code is executed within an application container
you would need to know when in your application life cycle within the
container you would need to open a connection to rabbitMQ and when to
close it.

Allan.

From steve at rabbitmq.com  Wed Nov 23 12:09:59 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Wed, 23 Nov 2011 12:09:59 +0000
Subject: [rabbitmq-discuss] questions about RpcClient
In-Reply-To: <CALbPevn3eQto0eLu8X0TsBALH0TG5gb2PLnHSZA-h1aKkYjnWg@mail.gmail.com>
References: <CALbPev=K4WWDv-W8=vggYEx7EqJCMcb+VwWiFLCR62dD800y7A@mail.gmail.com>
	<4EC9202D.30303@rabbitmq.com>
	<CALbPev=G3YT_mz-o_7ZX__OjBajHO+tou5euHV8JRm+QoKqPXw@mail.gmail.com>
	<4ECA18E0.3080601@rabbitmq.com>
	<CALbPevn3eQto0eLu8X0TsBALH0TG5gb2PLnHSZA-h1aKkYjnWg@mail.gmail.com>
Message-ID: <93CFF773-AE22-4F11-BC1B-471BF1D96AE4@rabbitmq.com>

Dear John,

On 22 Nov 2011, at 16:22, john doe wrote:
> I find strange that primitiveCall do not follow the signature of original
> functions, with exchange and routing key provided along with the message.

Well, there are a lot of strange things about this code; and it is not very
good Java, to be honest (it calls protected methods in its constructor for one
thing). I guess I'd like to re-write it. The protected methods seem to encourage
you to sub-class it, for instance. In general I'm not keen on subclassing
as a user API, unless it is very carefully controlled (as in Consumer),
and in this case it would be easy to break things.
 
> I am using extensively routing facilities of amqp, and I need to manage
> thousands of clients, one per routing key (or do you think creating a channel
> and a private queue is cheap enough to be done tens of time per second?)

The overhead of an RpcClient creation is non-trivial; but the creation of the
private (reply)queue is essential, so that we can't get away from that. Tens of
times a second ought to be easy, though.  Creating a channel each time would
be a serious problem -- don't do that.  Multiple consumers on the same channel
are OK (there's even a way to beef up the callback threads in 2.7.0)
and ought to perform well.

Having thousands of RPCs on a single channel at once might be pushing
it, though.

> I guess you designed this RpcClient class more as an example, to be customized?
> That's fine but code of RpcClient is not that simple and I would have prefered
> not to maintain that kind of risky low-level things...

Yes, I agree. It certainly is just an example. A simpler and cleaner one suited to
your needs should be derived from it.
 
> Would you consider putting a primitiveCall(String exchange, String routingKey,
> AMQP.BasicProperties props, byte[] message) in a future release?

Yes; but I would like to clean up RpcClient before that. I'd be delighted with
any comments from the field.

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
avoirdupois (phr.) 'Would you like peas with that?'
distribute (v.) To denigrate an award ceremony.
definite (phr.) 'It's hard of hearing, I think.'
modest (n.) The most mod.



From steve at rabbitmq.com  Wed Nov 23 12:14:06 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Wed, 23 Nov 2011 12:14:06 +0000
Subject: [rabbitmq-discuss] How rabbitMq Works betwwen two application
In-Reply-To: <F9023D4143187D489A9A59D1B4476F215A1EB9CD99@MUKPBCC1XMB703C.collab.barclayscorp.com>
References: <F9023D4143187D489A9A59D1B4476F215A1EB9C91B@MUKPBCC1XMB703C.collab.barclayscorp.com>
	<4ECB9901.8070203@rabbitmq.com>
	<F9023D4143187D489A9A59D1B4476F215A1EB9CD99@MUKPBCC1XMB703C.collab.barclayscorp.com>
Message-ID: <91394CCC-5DAF-4DDF-91AD-6A893B155691@rabbitmq.com>

On 23 Nov 2011, at 05:33, <manisha.kare at barclays.com> wrote:
> But my main concern is about development in android. Since Java is not my
> background, so I was searching for a example which is directly in android.

Dear Manisha, 

Which 'RabbitMQ-Android tutorial' were you using?

We have no official support for running the Java Client on Android, though
recently we did avoid a dependency on javax Sasl code to make this less painful.
The way to go on android is to use the Java tutorial examples as far as
possible. If these don't work, then come back here and we will try to help.

Steve Powell  (a nervous bunny)
----------some more definitions from the SPD----------
avoirdupois (phr.) 'Would you like peas with that?'
distribute (v.) To denigrate an award ceremony.
definite (phr.) 'It's hard of hearing, I think.'
modest (n.) The most mod.

From emile at rabbitmq.com  Wed Nov 23 12:29:27 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 23 Nov 2011 12:29:27 +0000
Subject: [rabbitmq-discuss] RabbitMQ Windows 2008r2 Setup
In-Reply-To: <CAH+xwdAV7Bo2H-i7cv7F4m_8gkpupS0Z_f5DZg2t21q3fC0MRw@mail.gmail.com>
References: <d2127fc2-2a05-4651-b473-c1d836256d7f@w3g2000vbw.googlegroups.com>
	<CAH+xwdC-diaRO9RZLUpQayXo5UhN6QKMEtBRNQRoK8URqoHvPA@mail.gmail.com>
	<7159630b-71cd-4748-a397-1dab6bcbbd9e@h21g2000yqg.googlegroups.com>
	<CAH+xwdAV7Bo2H-i7cv7F4m_8gkpupS0Z_f5DZg2t21q3fC0MRw@mail.gmail.com>
Message-ID: <4ECCE727.3010307@rabbitmq.com>

Hi Robert,

On 22/11/11 16:14, Robert Raschke wrote:
> Ah, only just noticed that there is now an installer that is doing the
> registering.
> 
> Maybe the powers that be could be persuaded to add the
> -internalservicename option (simply using the same name as the service
> getting registered) into the appropriate erlsrv invocation in the installer?

That should be possible. I have filed a bug.


-Emile

From mh at foldr3.com  Wed Nov 23 12:45:13 2011
From: mh at foldr3.com (Muharem Hrnjadovic)
Date: Wed, 23 Nov 2011 13:45:13 +0100
Subject: [rabbitmq-discuss] performance with thousands of auto_delete
 queues
In-Reply-To: <842DE705-1D79-463A-AF4B-E8862A555AAB@rabbitmq.com>
References: <4EC4FE43.6050502@foldr3.com>
	<F39C2631-9F27-45DC-98C6-B31049B56F9C@rabbitmq.com>
	<4EC51D69.2030206@foldr3.com>
	<842DE705-1D79-463A-AF4B-E8862A555AAB@rabbitmq.com>
Message-ID: <4ECCEAD9.3060809@foldr3.com>

On 11/17/2011 05:20 PM, Ask Solem wrote:
> 
> On 17 Nov 2011, at 14:42, Muharem Hrnjadovic wrote:
[..]
>>> An auto_delete queue is only deleted when it's empty,
>>> so you have to collect the results.
>> How does one collect the results? We do
>>
>>   result = TaskSet(tasks=subtasks).apply_async()
>>
>>   # Wait for all subtasks to complete.
>>   while not result.ready():
>>       time.sleep(0.25)
>>
>>   the_results = result.join()
>>
>> Is there something we need to do beyond that?
>>
> 
> This would collect the result, but maybe there are cases where it's
> not collected, or you have so many tasks that using one queue per task
> is not feasible.
> 
> If the process to publish the task, and to collect the result is
> always the same, you can use reply-to style replies (one queue per
> publisher, instead of one queue per task). There's no built-in support
> for this in Celery, but adding the capability to your task should be
> fairly easy.
This is an interesting idea. It would be great if you could sketch out
how the "one queue per publisher" solution would look like.

> The best thing you can do right now is to set an expiry
> time for the results, that would probably help at least in the short term.
I did upgrade to the latest version and see that task queues are garbage
collected. Thanks for the advice!

[..]

Best regards/Mit freundlichen Gr??en

-- 
Muharem Hrnjadovic <mh at foldr3.com>
Public key id   : B2BBFCFC
Key fingerprint : A5A3 CC67 2B87 D641 103F  5602 219F 6B60 B2BB FCFC

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 900 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111123/72007931/attachment.pgp>

From cao at ll.mit.edu  Wed Nov 23 14:56:04 2011
From: cao at ll.mit.edu (Cao, Yican - 0661 - MITLL)
Date: Wed, 23 Nov 2011 09:56:04 -0500
Subject: [rabbitmq-discuss] trouble to upgrade from 2.6.1 to 2.7.0 on OS
 X
In-Reply-To: <B8E3D6D7-AF27-4D2B-9B97-D23ACF065DB4@rabbitmq.com>
References: <C7560413-EC2C-4A47-A5D5-22F96846CBEE@ll.mit.edu>
	<B8E3D6D7-AF27-4D2B-9B97-D23ACF065DB4@rabbitmq.com>
Message-ID: <09ACFC76-FA54-4618-BC5A-1C7A9C63F96A@ll.mit.edu>

Hi Steve,

Thanks for answering my email.

I have these lines in my sources.conf.

rsync://rsync.macports.org/release/ports/ [default]
http://www.rabbitmq.com/releases/macports
rsync://rsync.macports.org/release/ports/

I thought last 'rsync...' will over write first 'rsync...'
Actually not, after I remove first one. It worked.

Strange thing: I used same sources.conf without any problem when I upgrade from 2.3.1 to 2.5.1 to 2.6.1  
                                         
Thanks again.

Yican


On Nov 23, 2011, at 5:12 AM, Steve Powell wrote:

> Hi,
> I'm sorry to hear you are having problems installing rabbitmq-server using
> macports.
> 
> We have had one report of a problem internally, but not with the same symptoms
> as yours.
> 
> Your note implies that port thinks rabbitmq-server is already installed at the
> highest version (although it is hard to tell from so little information),
> 
> so let me ask the usual questions:
> 
> What do you have in the macports sources.conf file?
> 
> (I have:
>    http://www.rabbitmq.com/releases/macports
>    rsync://rsync.macports.org/release/ports/ [default]
> 
> in that order.... please check the *order* of your lines.)
> 
> (It appears that 2.7.0 hasn't yet reached rsync.macports.org.)
> 
> Do a 'port list rabbitmq-server' (not a search) -- you should see:
>    rabbitmq-server                @2.7.0          net/rabbitmq-server
>    rabbitmq-server                @2.6.1          net/rabbitmq-server
> do you?
> 
> Did you do a sudo port sync? Have you done a 'selfupdate' recently?
> 
> When I do a port upgrade (after including rabbitmq /releases/macports in
> sources.conf and 'sudo port sync') it works fine for me, so if everything checks
> out, then you should do:
> 
>    sudo port unload rabbitmq-server
>    sudo port uninstall rabbitmq-server
>    sudo port -u -v uninstall
> 
> and repeat the install sequence (port sync, list and install steps) and see what
> version you get.
> 
> If this continues to be a problem, then please attach macports logs with your
> reply, and I'll try to diagnose it.
> 
> Steve Powell  (a curious bunny)
> ----------some more definitions from the SPD----------
> avoirdupois (phr.) 'Would you like peas with that?'
> distribute (v.) To denigrate an award.
> definite (phr.) 'It's hard of hearing, I think.'
> modest (n.) The most mod.
> 
> On 22 Nov 2011, at 16:02, Cao, Yican - 0661 - MITLL wrote:
>> Anyone experiences similar problem? 
>> I could not upgrade from 2.6.1 to 2.7.0 using macports. 
> . . .
>> Any ideas? Thanks.
>> Yican Cao_______________________________________________

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 6299 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111123/9d73a637/attachment.bin>

From mh at foldr3.com  Wed Nov 23 15:05:47 2011
From: mh at foldr3.com (Muharem Hrnjadovic)
Date: Wed, 23 Nov 2011 16:05:47 +0100
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <4ECCCE5A.3020909@rabbitmq.com>
References: <4ECCCB33.3040803@foldr3.com> <4ECCCE5A.3020909@rabbitmq.com>
Message-ID: <4ECD0BCB.3090304@foldr3.com>

On 11/23/2011 11:43 AM, Matthias Radestock wrote:
> Muharem,
> 
> On 23/11/11 10:30, Muharem Hrnjadovic wrote:
>> I am running a seismic calculation using python-celery (rev. 2.4.2, on
>> an ubuntu 11.04 server) and the number of task queues peaks at 6700.
>>
>> nevertheless rabbitmq-server (rev. 2.7.0) crashes approx. 2.5 hours into
>> the calculation having 3912 queues and consuming 31GB of RAM at that
>> point.
>>
>> 99.9% of the queues are celery task queues and contain 0 or 1 messages;
>> the main celery task queue contains up to 4096 messages.
>>
>> How do I figure out why rabbitmq is consuming that much RAM and why it's
>> crashing?
> 
> Post the output of 'rabbitmqctl report' when rabbit is getting close
> to eating that amount of memory.
Please see the "sudo rabbitmqctl report" link on:
    https://bugs.launchpad.net/openquake/+bug/894024/comments/1

>> there was nothing in the logs
> 
> Really? I would have expected to at least see a memory alarm. Unless
> you have enormous quantities of RAM and/or changed the thresholds.
The machine in question has 64GB of RAM. I did not change any
thresholds.

> Please post the logs.
Please see the "rabbitmq logs" link on:
    https://bugs.launchpad.net/openquake/+bug/894024/comments/2

Best regards/Mit freundlichen Gr??en

-- 
Muharem Hrnjadovic <mh at foldr3.com>
Public key id   : B2BBFCFC
Key fingerprint : A5A3 CC67 2B87 D641 103F  5602 219F 6B60 B2BB FCFC

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 900 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111123/4f31bb45/attachment.pgp>

From james.r.carr at gmail.com  Wed Nov 23 15:13:19 2011
From: james.r.carr at gmail.com (James Carr)
Date: Wed, 23 Nov 2011 09:13:19 -0600
Subject: [rabbitmq-discuss] [Slightly OT] JNDI in non-webcontainers?
Message-ID: <CAJreXKC-e1cGwbXVx9cLK=Hp5BPwvtpBxtQSQOfGsgs1Od41WQ@mail.gmail.com>

One setup we've been using at work that has been working well for us
is putting the amqp connection information in JNDI. This allows apps
to simply lookup broker hostnames and other details via amqp/hostname,
amqp/vhost, etc.

Like I said, it's worked great and I'd like to port the same thing to
our apps that don't run in a web container. Does anyone know of a good
way to use JNDI outside of a web container?

Thanks,
James

From cameron.davison at gmail.com  Wed Nov 23 15:51:09 2011
From: cameron.davison at gmail.com (Cameron Davison)
Date: Wed, 23 Nov 2011 09:51:09 -0600
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <4ECCCB70.3040701@rabbitmq.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
	<4EC901F3.4040500@rabbitmq.com> <6250190793052131212@unknownmsgid>
	<4EC92F8A.4080300@rabbitmq.com> <4ECAB6F6.9090502@rabbitmq.com>
	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>
	<4ECAC578.3070202@rabbitmq.com>
	<CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>
	<4ECAD5BF.6050505@rabbitmq.com>
	<CAChq9g0jOixn=zN4dM3iJ6ArpYzPUspGoudi=FJrBXcU4DZfHw@mail.gmail.com>
	<4ECAF863.7030300@rabbitmq.com>
	<CAGWz9vWTmo2jkYAgyO0Rz9=y7H4w=x78L1bLYQo2LJMTwDW3zA@mail.gmail.com>
	<4ECB554D.8070401@rabbitmq.com>
	<CAGWz9vWqVmUbfWKxW1jT5VTmpAiL5DFvsjeuXU3Q3N5FF0+mYw@mail.gmail.com>
	<4ECCCB70.3040701@rabbitmq.com>
Message-ID: <CAGWz9vVnco-DfrwAZVcoRQ_VRdo_8+ArZ18tz7nu2JyO+3o7vA@mail.gmail.com>

I see, that is rather small. When you say QA is ongoing do you mean
that y'all are always QAing things and that this fix has been QA'd, or
do you mean that the QA for this is still going on and has not yet
finished?

Would it be safe to make that change to the 2.6.1 codebase recompile
it and start running with that patch?

Thanks,
Cameron

On Wed, Nov 23, 2011 at 4:31 AM, Simon MacMullen <simon at rabbitmq.com> wrote:
> On 23/11/11 04:37, Cameron Davison wrote:
>>
>> Ideally we could get only the diff of the fix to 2.6.1
>
> QA is ongoing, however it looks like the diff is rather small:
>
> http://hg.rabbitmq.com/rabbitmq-server/rev/89315378597d
>
> The only other workarounds would be to turn off either persistence or
> confirms - which I imagine you might be rather reluctant to do.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From matthias at rabbitmq.com  Wed Nov 23 16:00:13 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 23 Nov 2011 16:00:13 +0000
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <CAGWz9vVnco-DfrwAZVcoRQ_VRdo_8+ArZ18tz7nu2JyO+3o7vA@mail.gmail.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>	<4EC901F3.4040500@rabbitmq.com>
	<6250190793052131212@unknownmsgid>	<4EC92F8A.4080300@rabbitmq.com>
	<4ECAB6F6.9090502@rabbitmq.com>	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>	<4ECAC578.3070202@rabbitmq.com>	<CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>	<4ECAD5BF.6050505@rabbitmq.com>	<CAChq9g0jOixn=zN4dM3iJ6ArpYzPUspGoudi=FJrBXcU4DZfHw@mail.gmail.com>	<4ECAF863.7030300@rabbitmq.com>	<CAGWz9vWTmo2jkYAgyO0Rz9=y7H4w=x78L1bLYQo2LJMTwDW3zA@mail.gmail.com>	<4ECB554D.8070401@rabbitmq.com>	<CAGWz9vWqVmUbfWKxW1jT5VTmpAiL5DFvsjeuXU3Q3N5FF0+mYw@mail.gmail.com>	<4ECCCB70.3040701@rabbitmq.com>
	<CAGWz9vVnco-DfrwAZVcoRQ_VRdo_8+ArZ18tz7nu2JyO+3o7vA@mail.gmail.com>
Message-ID: <4ECD188D.1090003@rabbitmq.com>

Cameron,

On 23/11/11 15:51, Cameron Davison wrote:
> I see, that is rather small. When you say QA is ongoing do you mean
> that y'all are always QAing things and that this fix has been QA'd, or
> do you mean that the QA for this is still going on and has not yet
> finished?

The latter.

> Would it be safe to make that change to the 2.6.1 codebase recompile
> it and start running with that patch?

It's difficult to see how the patch could break anything more than 
already is.

We haven't checked whether the patch is suitable for 2.6.1. It probably is.

Btw, what's stopping you from upgrading to 2.7.0?


Matthias.

From michael.s.klishin at gmail.com  Wed Nov 23 16:00:13 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 23 Nov 2011 20:00:13 +0400
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <4ECCD6D1.4020402@rabbitmq.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
	<4EC3AF7F.3040905@rabbitmq.com>
	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
	<4EC3B5D3.9040204@rabbitmq.com>
	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>
	<4EC3BDA9.30207@rabbitmq.com>
	<CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>
	<4EC4F469.70306@rabbitmq.com>
	<CAL8b_0eNz6bw=j7Qfcw02fJ0r_iokXY8z_YRAmhN8=WVPSy=gQ@mail.gmail.com>
	<4ECCD6D1.4020402@rabbitmq.com>
Message-ID: <CAE3HoVSeh4eFdDWGqAyr5x5okNj=00geat5iGEGDf9SfaKJqjA@mail.gmail.com>

2011/11/23 Simon MacMullen <simon at rabbitmq.com>

> The trouble is, we don't know much about how this is supposed to work (and
> it doesn't seem very documented), and can't replicate things.


I can reproduce this after installing rabbitmq 2.7.0 from the
rabbitmq.comapt repository on ubuntu 11.10. No custom configuration or
anything like
that.

-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111123/6f6b64ea/attachment.htm>

From matthias at rabbitmq.com  Wed Nov 23 16:04:38 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 23 Nov 2011 16:04:38 +0000
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <CAE3HoVSeh4eFdDWGqAyr5x5okNj=00geat5iGEGDf9SfaKJqjA@mail.gmail.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>	<4EC39721.7000201@rabbitmq.com>
	<4EC3ABB5.5080602@rabbitmq.com>	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>	<4EC3AF7F.3040905@rabbitmq.com>	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>	<4EC3B5D3.9040204@rabbitmq.com>	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>	<4EC3BDA9.30207@rabbitmq.com>	<CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>	<4EC4F469.70306@rabbitmq.com>	<CAL8b_0eNz6bw=j7Qfcw02fJ0r_iokXY8z_YRAmhN8=WVPSy=gQ@mail.gmail.com>	<4ECCD6D1.4020402@rabbitmq.com>
	<CAE3HoVSeh4eFdDWGqAyr5x5okNj=00geat5iGEGDf9SfaKJqjA@mail.gmail.com>
Message-ID: <4ECD1996.1080403@rabbitmq.com>

Michael,

On 23/11/11 16:00, Michael Klishin wrote:
> I can reproduce this after installing rabbitmq 2.7.0 from the
> rabbitmq.com <http://rabbitmq.com> apt repository on ubuntu 11.10. No
> custom configuration or anything like that.

And the shutdown fails 100% of the time? And if you uninstall rabbit it 
works 100% of the time?

When the shutdown gets stuck, is there anything you can do, e.g. can you 
get a shell? Would be good to find out what processes are running at the 
time.

Matthias.

From simon at rabbitmq.com  Wed Nov 23 16:05:03 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 23 Nov 2011 16:05:03 +0000
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <CAE3HoVSeh4eFdDWGqAyr5x5okNj=00geat5iGEGDf9SfaKJqjA@mail.gmail.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
	<4EC3AF7F.3040905@rabbitmq.com>
	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
	<4EC3B5D3.9040204@rabbitmq.com>
	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>
	<4EC3BDA9.30207@rabbitmq.com>
	<CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>
	<4EC4F469.70306@rabbitmq.com>
	<CAL8b_0eNz6bw=j7Qfcw02fJ0r_iokXY8z_YRAmhN8=WVPSy=gQ@mail.gmail.com>
	<4ECCD6D1.4020402@rabbitmq.com>
	<CAE3HoVSeh4eFdDWGqAyr5x5okNj=00geat5iGEGDf9SfaKJqjA@mail.gmail.com>
Message-ID: <4ECD19AF.1080101@rabbitmq.com>

On 23/11/11 16:00, Michael Klishin wrote:
> I can reproduce this after installing rabbitmq 2.7.0 from the
> rabbitmq.com <http://rabbitmq.com> apt repository on ubuntu 11.10. No
> custom configuration or anything like that.

Oh sure, but it seems to be at least somewhat network dependent - I've 
installed 11.10 and 2.7.0 in a VM and do not see this.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From hcoyote at ghostar.org  Wed Nov 23 16:18:15 2011
From: hcoyote at ghostar.org (Travis)
Date: Wed, 23 Nov 2011 10:18:15 -0600
Subject: [rabbitmq-discuss] Cluster Memory Usage
In-Reply-To: <4ECD188D.1090003@rabbitmq.com>
References: <CAGWz9vWtmJEkbv18dwAkFGXM+NbOo4215Xk2sebSVoqXvyvTPQ@mail.gmail.com>
	<4EC901F3.4040500@rabbitmq.com> <6250190793052131212@unknownmsgid>
	<4EC92F8A.4080300@rabbitmq.com> <4ECAB6F6.9090502@rabbitmq.com>
	<CAChq9g1CUfDg-KAeuSeKWBkEcfcwq57fHZ7XVW96oi0nsBh_dQ@mail.gmail.com>
	<4ECAC578.3070202@rabbitmq.com>
	<CAChq9g2xsyoOaoAUvrpakVEQRV=3j_TeD5MY6jqYkk5nRkP7hg@mail.gmail.com>
	<4ECAD5BF.6050505@rabbitmq.com>
	<CAChq9g0jOixn=zN4dM3iJ6ArpYzPUspGoudi=FJrBXcU4DZfHw@mail.gmail.com>
	<4ECAF863.7030300@rabbitmq.com>
	<CAGWz9vWTmo2jkYAgyO0Rz9=y7H4w=x78L1bLYQo2LJMTwDW3zA@mail.gmail.com>
	<4ECB554D.8070401@rabbitmq.com>
	<CAGWz9vWqVmUbfWKxW1jT5VTmpAiL5DFvsjeuXU3Q3N5FF0+mYw@mail.gmail.com>
	<4ECCCB70.3040701@rabbitmq.com>
	<CAGWz9vVnco-DfrwAZVcoRQ_VRdo_8+ArZ18tz7nu2JyO+3o7vA@mail.gmail.com>
	<4ECD188D.1090003@rabbitmq.com>
Message-ID: <CAChq9g0Lstbe4J-u+XWT5hvvgLEy8iZdaYjqTa-4=SiDQZST5A@mail.gmail.com>

On Wed, Nov 23, 2011 at 10:00 AM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
>
> Btw, what's stopping you from upgrading to 2.7.0?

Two things:

1) we haven't updated our puppet modules to handle the management
changes for 2.7.X for things like plugins
2) we're at the beginning of a 4 day weekend in the US and we don't
want to make a drastic change like this without more operations and
developers around.  (We've only been running puppet in production for
about 3 weeks now ...)

Right now, we're just running with the slave turned off which is
giving us acceptable throughput and mitigates the problem (even though
it puts us at an elevated risk of an outage by having only one
rabbitmq-server instance running right now).

Travis
-- 
Travis Campbell
hcoyote at ghostar.org

From michael.s.klishin at gmail.com  Wed Nov 23 16:20:17 2011
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 23 Nov 2011 20:20:17 +0400
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <4ECD1996.1080403@rabbitmq.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
	<4EC3AF7F.3040905@rabbitmq.com>
	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
	<4EC3B5D3.9040204@rabbitmq.com>
	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>
	<4EC3BDA9.30207@rabbitmq.com>
	<CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>
	<4EC4F469.70306@rabbitmq.com>
	<CAL8b_0eNz6bw=j7Qfcw02fJ0r_iokXY8z_YRAmhN8=WVPSy=gQ@mail.gmail.com>
	<4ECCD6D1.4020402@rabbitmq.com>
	<CAE3HoVSeh4eFdDWGqAyr5x5okNj=00geat5iGEGDf9SfaKJqjA@mail.gmail.com>
	<4ECD1996.1080403@rabbitmq.com>
Message-ID: <CAE3HoVSVTry-VERjqrqo84Zw=HJDcz0dzX9WEf3YJFe36_MNXA@mail.gmail.com>

2011/11/23 Matthias Radestock <matthias at rabbitmq.com>

> And the shutdown fails 100% of the time? And if you uninstall rabbit it
> works 100% of the time?
>
>
Yes and yes. I just tried a few more times, the same behavior every time.


>  When the shutdown gets stuck, is there anything you can do, e.g. can you
> get a shell? Would be good to find out what processes are running at the
> time.
>

Ubuntu shows some kind of a "standby screen" where I can either choose to
reboot/power off (powering off does not work either) or sign back in.
sudo poweroff from the shell shuts it down successfully.

Let me know if you want me to investigate something else.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111123/ab542efc/attachment.htm>

From matthias at rabbitmq.com  Wed Nov 23 16:34:41 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 23 Nov 2011 16:34:41 +0000
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <CAE3HoVSVTry-VERjqrqo84Zw=HJDcz0dzX9WEf3YJFe36_MNXA@mail.gmail.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
	<4EC3AF7F.3040905@rabbitmq.com>
	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
	<4EC3B5D3.9040204@rabbitmq.com>
	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>
	<4EC3BDA9.30207@rabbitmq.com>
	<CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>
	<4EC4F469.70306@rabbitmq.com>
	<CAL8b_0eNz6bw=j7Qfcw02fJ0r_iokXY8z_YRAmhN8=WVPSy=gQ@mail.gmail.com>
	<4ECCD6D1.4020402@rabbitmq.com>
	<CAE3HoVSeh4eFdDWGqAyr5x5okNj=00geat5iGEGDf9SfaKJqjA@mail.gmail.com>
	<4ECD1996.1080403@rabbitmq.com>
	<CAE3HoVSVTry-VERjqrqo84Zw=HJDcz0dzX9WEf3YJFe36_MNXA@mail.gmail.com>
Message-ID: <4ECD20A1.3030106@rabbitmq.com>

Michael,

On 23/11/11 16:20, Michael Klishin wrote:
> Ubuntu shows some kind of a "standby screen" where I can either choose
> to reboot/power off (powering off does not work either) or sign back in.
> sudo poweroff from the shell shuts it down successfully.

Can you get a non-GUI shell with 'ctrl-alt-f1'? If so, log in and then 
run 'ps auxfwww' and post the output.

Matthias.

From simon at rabbitmq.com  Wed Nov 23 16:40:54 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 23 Nov 2011 16:40:54 +0000
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <4ECD0BCB.3090304@foldr3.com>
References: <4ECCCB33.3040803@foldr3.com> <4ECCCE5A.3020909@rabbitmq.com>
	<4ECD0BCB.3090304@foldr3.com>
Message-ID: <4ECD2216.40300@rabbitmq.com>

On 23/11/11 15:05, Muharem Hrnjadovic wrote:
> Please see the "sudo rabbitmqctl report" link on:
>      https://bugs.launchpad.net/openquake/+bug/894024/comments/1

Hi. Thanks for this.

There are a number of interesting things going on:

1) Your "rabbitmqctl report" invocation shows about 28000 channels open 
and no connections. Did you edit connection details out of this?

2) About 9GB of memory is used by binaries. This may indicate that you 
have some large messages around - are your messages particularly large?

3) While the memory alarm was set and cleared a number of times, in the 
end the Erlang VM crashed with:

   no next heap size found: -2106532246, offset 0
   Aborted

This error message indicates that the Erlang VM was not available to 
increase the heap size of a particular process as it ran off the end of 
a table of permitted heap sizes. On a 64GB machine the maximum heap size 
is 6.6 Exabytes: I hope you did not run in to that. Unfortunately there 
is a bug in Erlang R13 which garbles the error message above (hence why 
the alleged heap size is a negative number). So:

3a) is this a 64 bit machine?

3b) Can you run:

su rabbitmq -s /bin/sh -c 'erl -remsh rabbit@`hostname -s` -sname foo 
-eval "io:format(\"~p\", 
[lists:sublist(lists:reverse(lists:sort([{process_info(Pid, memory), 
Pid, process_info(Pid)} || Pid <- processes()])), 30)]), halt()."'

(all on one line, as root) when rabbit is eating a lot of memory and 
send us the output? This should let us see if there are individual 
processes that are eating huge amounts of memory.

3c) Can you upgrade the Erlang VM to see if we can get a better version 
of that error message? Updated debs are available at:

  http://www.erlang-solutions.com/section/132/erlang-otp-packages

Due to limitations in dpkg you might need to:

# apt-get remove erlang-base
# dpkg -i esl-erlang_14.b.4-1_amd64.deb
# apt-get install erlang-nox
# dpkg -i rabbitmq-server_2.7.0-1_all.deb

(Yes, this is less than ideal but we've only just found out about the 
ESL packages...)

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From andreas.lundberg at integrasco.no  Wed Nov 23 16:44:55 2011
From: andreas.lundberg at integrasco.no (Andreas Lundberg)
Date: Wed, 23 Nov 2011 08:44:55 -0800 (PST)
Subject: [rabbitmq-discuss] Messages disappearing from queues when clustered
	brokers are restarted.
Message-ID: <2b52f8ec-d00f-479f-9a8d-9b4cc6264b26@r9g2000vbw.googlegroups.com>

Hi.

We have a problem where messages are disappearing from queues when
broker is restarted.

Case:
We running a test scenario of RabbitMQ 2.7 with several queues, where
we have two brokers (nodes) in cluster running on two different
RabbitMQ servers on two different machines.
We are testing with durable queues and persistent messages where we
execute the following procedure on the brokers:

1. Declare multiple queues and populate them with several messages
2. Restart the "master" broker(A) (and wait to the other broker (B)
becomes master)
3. Restart broker(B) and wait to broker(A) becomes master

Problem:

Wen we restart the "master" broker(A) everything behave as it should
and the other broker(B) becomes master,
but when we restart broker B(the new master) every message in every
queue disappears, but the brokers seems to run as normal.

Is there any way to prevent this kind of message loss, and why does it
happen?

Cluster setup:

* We follow the Clustering guide @ http://www.rabbitmq.com/clustering.html
to set up the cluster.
* Both brokers in clusters is set up to be disk nodes.

1. Setting up both machines with same cookie
2. Executing rabbitmq -detached to create independent broker on both
machines.
3. Execute rabbitmqctl cluster rabbit at brokerB on machine A
4. Execute rabbitmqctl cluster rabbit at brokerA rabbit at brokerB on
machine A (To make sure both brokers are disc nodes)

This results in two brokers(A and B) in a cluster, where both brokers
are disc nodes.

Executing rabbitmqctl cluster_status returns the following:
[{nodes,[{disc,[rabbit at brokerA,'rabbit at brokerB']}]},
 {running_nodes,[rabbit at brokerA,'rabbit at brokerB']}]


Queue setup:

We call declare queue (queueDeclare) with durable = true and RabbitMQ
properties containing x-ha-policy set to "all"
We also call publish (basicPublish) with PERSISTENT_BASIC
(deliveryMode 2 (persistent)).
We use publish confirms instead of transactions.



Hints and suggestions are highly appreciated.

From simon at rabbitmq.com  Wed Nov 23 16:59:05 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 23 Nov 2011 16:59:05 +0000
Subject: [rabbitmq-discuss] Messages disappearing from queues when
 clustered brokers are restarted.
In-Reply-To: <2b52f8ec-d00f-479f-9a8d-9b4cc6264b26@r9g2000vbw.googlegroups.com>
References: <2b52f8ec-d00f-479f-9a8d-9b4cc6264b26@r9g2000vbw.googlegroups.com>
Message-ID: <4ECD2659.6050806@rabbitmq.com>

On 23/11/11 16:44, Andreas Lundberg wrote:
> Is there any way to prevent this kind of message loss, and why does it
> happen?

When you initially stop broker A, all the queues switch over to B as the 
master.

When you then start A again, all the queues get a new slave on A.

It's important to understand that these slaves initially start up 
without messages in them. They can't just pick up where they left off, 
as A might have been down for an arbitrary period of time and doesn't 
know what's happened.

These slaves are thus said to be "unsynchronised". You can see whether 
slaves are synchronised or not in rabbitmqctl and the management plugin.

New messages published to the queues will go to all slaves including the 
new ones. When the last old message is consumed/acked from the new 
master, the new slave will be considered synchronised again.

But I suspect you're restarting B before this happens. Then the 
unsynchronised slave on A becomes the new master, and messages are lost.

In the future we'd like to add the ability for new slaves to eagerly 
synchronise, but it hasn't happened yet and it's quite a big task.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From steve at rabbitmq.com  Wed Nov 23 17:50:05 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Wed, 23 Nov 2011 17:50:05 +0000
Subject: [rabbitmq-discuss] trouble to upgrade from 2.6.1 to 2.7.0 on OS
	X
In-Reply-To: <09ACFC76-FA54-4618-BC5A-1C7A9C63F96A@ll.mit.edu>
References: <C7560413-EC2C-4A47-A5D5-22F96846CBEE@ll.mit.edu>
	<B8E3D6D7-AF27-4D2B-9B97-D23ACF065DB4@rabbitmq.com>
	<09ACFC76-FA54-4618-BC5A-1C7A9C63F96A@ll.mit.edu>
Message-ID: <337B5FCB-E180-4D5A-969A-E1C8B4380CD3@rabbitmq.com>

Glad it is now ok.  The sources order is relevant for searches.
In previous versions the latest release was probably already in the macports.org repository.
Not sure why 2.7.0 isn't there yet :-( 

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
avoirdupois (phr.) 'Would you like peas with that?'
distribute (v.) To denigrate an award ceremony.
definite (phr.) 'It's hard of hearing, I think.'
modest (n.) The most mod.

On 23 Nov 2011, at 14:56, Cao, Yican - 0661 - MITLL wrote:
> I have these lines in my sources.conf.
> 
> rsync://rsync.macports.org/release/ports/ [default]
> http://www.rabbitmq.com/releases/macports
> rsync://rsync.macports.org/release/ports/
> 
> I thought last 'rsync...' will over write first 'rsync...'
> Actually not, after I remove first one. It worked.


From andrea.rosa at hp.com  Wed Nov 23 18:02:14 2011
From: andrea.rosa at hp.com (Rosa, Andrea)
Date: Wed, 23 Nov 2011 18:02:14 +0000
Subject: [rabbitmq-discuss] Exchange disappear
Message-ID: <5F389C517756284F80239F55BCA5DDDD17D7B540@G9W0721.americas.hpqcorp.net>

Hi to all,

I have got a problem using the py-amqplib as client (version 0.6.1), It's more likely that my problem is in the client library but just to be 100% sure I will ask to you to confirm my idea and maybe you could also give me some aextra information to fix it.
I have got this exception in my client log file :
AMQPChannelException: (404, u"NOT_FOUND - no exchange 'a61f445d611d4f40a972d1f0c5449c77' in vhost '/'", (60, 40), 'Channel.basic_publish')
And after that this error
AMQPConnectionException: (503, u"COMMAND_INVALID - second 'channel.open' seen", (20, 10), 'Channel.open')

The strange thing is that I can see the exchange in rabbitmq server.

Sometimes I found this exception in rabbitmq log file:
=ERROR REPORT==== 23-Nov-2011::14:56:29 ===
exception on TCP connection <0.20319.56> from ipaddr:port
{handshake_timeout,handshake}

Thanks
--
andrea
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111123/5e9b4f32/attachment.htm>

From cpthk at hotmail.com  Wed Nov 23 21:40:56 2011
From: cpthk at hotmail.com (Jeffrey Chen)
Date: Wed, 23 Nov 2011 13:40:56 -0800
Subject: [rabbitmq-discuss] Performence issue with clustering setup
Message-ID: <BLU149-W13BDB6817881D71160F446ABC90@phx.gbl>


Hello RabbitMQ community:

I am testing performance on rabbitmq clustering setup. I have 2 nodes with active/active setup, both nodes write to disk, and they both are in a local area network. When I start my publisher and consumer, the publisher is very fast, is it able to send 100000 in few seconds. The problem is the consumer. My consumer is only able to consume around 500 messages per second. I tried to change my setup like disable manual ack, but they don't help so much. When I tried single node rabbitmq setup, it is so much faster than this. Can anyone give any recommendation on the what could be the problem? Or is it just normal to you?

Thanks,
Jeffrey.
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111123/ad931651/attachment.htm>

From ekirpichov at gmail.com  Thu Nov 24 08:18:42 2011
From: ekirpichov at gmail.com (Eugene Kirpichov)
Date: Thu, 24 Nov 2011 12:18:42 +0400
Subject: [rabbitmq-discuss] Performence issue with clustering setup
In-Reply-To: <BLU149-W13BDB6817881D71160F446ABC90@phx.gbl>
References: <BLU149-W13BDB6817881D71160F446ABC90@phx.gbl>
Message-ID: <7CD254E6-FBED-4348-B13F-46490E007F01@gmail.com>

Hi, what size are the messages? How big is the consumer prefetch? What throughput do you see without HA?



24.11.2011, ? 1:40, Jeffrey Chen <cpthk at hotmail.com> ???????(?):

> Hello RabbitMQ community:
> 
> I am testing performance on rabbitmq clustering setup. I have 2 nodes with active/active setup, both nodes write to disk, and they both are in a local area network. When I start my publisher and consumer, the publisher is very fast, is it able to send 100000 in few seconds. The problem is the consumer. My consumer is only able to consume around 500 messages per second. I tried to change my setup like disable manual ack, but they don't help so much. When I tried single node rabbitmq setup, it is so much faster than this. Can anyone give any recommendation on the what could be the problem? Or is it just normal to you?
> 
> Thanks,
> Jeffrey.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111124/ce8f5e63/attachment.htm>

From matthias at rabbitmq.com  Thu Nov 24 10:08:54 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 24 Nov 2011 10:08:54 +0000
Subject: [rabbitmq-discuss] Performence issue with clustering setup
In-Reply-To: <BLU149-W13BDB6817881D71160F446ABC90@phx.gbl>
References: <BLU149-W13BDB6817881D71160F446ABC90@phx.gbl>
Message-ID: <4ECE17B6.40105@rabbitmq.com>

Jeffrey,

On 23/11/11 21:40, Jeffrey Chen wrote:
> I am testing performance on rabbitmq clustering setup. I have 2 nodes
> with active/active setup, both nodes write to disk, and they both are in
> a local area network. When I start my publisher and consumer, the
> publisher is very fast, is it able to send 100000 in few seconds. The
> problem is the consumer. My consumer is only able to consume around 500
> messages per second.

Publishing in AMQP is asynchronous. So when a test is measuring the rate 
at the publisher, one has no idea of the status of those published 
messages - they could all be sitting in local buffers in the client 
libraries, or in various network buffers, etc.

Furthermore, rabbit is designed to cope with producer spikes, but that 
comes at the cost of reduced consumer rates. So if in your test the 
producer is simply bombarding rabbit with messages, the consumer rate 
will be much lower than it would be otherwise.

For meaningful benchmark results one needs to rate limit the producer.


Regards,

Matthias.

From ekirpichov at gmail.com  Thu Nov 24 10:15:11 2011
From: ekirpichov at gmail.com (Eugene Kirpichov)
Date: Thu, 24 Nov 2011 14:15:11 +0400
Subject: [rabbitmq-discuss] Performence issue with clustering setup
In-Reply-To: <4ECE17B6.40105@rabbitmq.com>
References: <BLU149-W13BDB6817881D71160F446ABC90@phx.gbl>
	<4ECE17B6.40105@rabbitmq.com>
Message-ID: <CANVKUrUHt502zXeLoDJ-1DagHN7-C0LTHvWcRTyqOLUV-oF5uQ@mail.gmail.com>

...And you can do this rate limiting by watching the so called "publisher
confirms" (ConfirmSelect).

On Thu, Nov 24, 2011 at 2:08 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> Jeffrey,
>
>
> On 23/11/11 21:40, Jeffrey Chen wrote:
>
>> I am testing performance on rabbitmq clustering setup. I have 2 nodes
>> with active/active setup, both nodes write to disk, and they both are in
>> a local area network. When I start my publisher and consumer, the
>> publisher is very fast, is it able to send 100000 in few seconds. The
>> problem is the consumer. My consumer is only able to consume around 500
>> messages per second.
>>
>
> Publishing in AMQP is asynchronous. So when a test is measuring the rate
> at the publisher, one has no idea of the status of those published messages
> - they could all be sitting in local buffers in the client libraries, or in
> various network buffers, etc.
>
> Furthermore, rabbit is designed to cope with producer spikes, but that
> comes at the cost of reduced consumer rates. So if in your test the
> producer is simply bombarding rabbit with messages, the consumer rate will
> be much lower than it would be otherwise.
>
> For meaningful benchmark results one needs to rate limit the producer.
>
>
> Regards,
>
> Matthias.
>
> ______________________________**_________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>



-- 
Eugene Kirpichov
Principal Engineer, Mirantis Inc. http://www.mirantis.com/
Editor, http://fprog.ru/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111124/e7ab9a91/attachment.htm>

From matthias at rabbitmq.com  Thu Nov 24 10:17:17 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 24 Nov 2011 10:17:17 +0000
Subject: [rabbitmq-discuss] Performence issue with clustering setup
In-Reply-To: <CANVKUrUHt502zXeLoDJ-1DagHN7-C0LTHvWcRTyqOLUV-oF5uQ@mail.gmail.com>
References: <BLU149-W13BDB6817881D71160F446ABC90@phx.gbl>	<4ECE17B6.40105@rabbitmq.com>
	<CANVKUrUHt502zXeLoDJ-1DagHN7-C0LTHvWcRTyqOLUV-oF5uQ@mail.gmail.com>
Message-ID: <4ECE19AD.60700@rabbitmq.com>

On 24/11/11 10:15, Eugene Kirpichov wrote:
> ...And you can do this rate limiting by watching the so called
> "publisher confirms" (ConfirmSelect).

Indeed. Though selecting 'confirm' mode has an adverse effect on 
performance.

Matthias.

From majek04 at gmail.com  Thu Nov 24 10:23:06 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Thu, 24 Nov 2011 10:23:06 +0000
Subject: [rabbitmq-discuss] Exchange disappear
In-Reply-To: <5F389C517756284F80239F55BCA5DDDD17D7B540@G9W0721.americas.hpqcorp.net>
References: <5F389C517756284F80239F55BCA5DDDD17D7B540@G9W0721.americas.hpqcorp.net>
Message-ID: <CABzX+qyjx4P3k8d-c4wR7JD+GQ1O_PQhsB8cj2JqdYwxi044aA@mail.gmail.com>

Hi,

On Wed, Nov 23, 2011 at 18:02, Rosa, Andrea <andrea.rosa at hp.com> wrote:
> I have got a problem using the py-amqplib as client (version 0.6.1), It?s
> more likely that my problem is in the client library but just to be 100%
> sure I will ask to you to confirm my idea and maybe you could also give me
> some aextra information to fix it.
>
> I have got this exception in my client log file :
>
> AMQPChannelException: (404, u"NOT_FOUND - no exchange
> 'a61f445d611d4f40a972d1f0c5449c77' in vhost '/'", (60, 40),
> 'Channel.basic_publish')

`basic_publish` must be run against an existing exchange. If the exchange
is not available - RabbitMQ will complain and abruptly close an amqp channel.

Make sure the exchange exists at that point - maybe put `exchange_declare`
before the `publish` ?

> And after that this error
>
> AMQPConnectionException: (503, u"COMMAND_INVALID - second 'channel.open'
> seen", (20, 10), 'Channel.open')

This looks like a client library issue. Not many AMQP client libraries know
how to behave after an error ocurred.

> The strange thing is that I can see the exchange in rabbitmq server.

This is quite unlikely. Maybe you checked at different point in time?
Maybe the exchange was `auto_delete=True` ?

You can verify that using `rabbitmqctl list_exchanges`, or even better,
using rabbitmq management plugin.

Hope that helps,
    Marek

From ekirpichov at gmail.com  Thu Nov 24 10:29:06 2011
From: ekirpichov at gmail.com (Eugene Kirpichov)
Date: Thu, 24 Nov 2011 14:29:06 +0400
Subject: [rabbitmq-discuss] Performence issue with clustering setup
In-Reply-To: <4ECE19AD.60700@rabbitmq.com>
References: <BLU149-W13BDB6817881D71160F446ABC90@phx.gbl>
	<4ECE17B6.40105@rabbitmq.com>
	<CANVKUrUHt502zXeLoDJ-1DagHN7-C0LTHvWcRTyqOLUV-oF5uQ@mail.gmail.com>
	<4ECE19AD.60700@rabbitmq.com>
Message-ID: <CANVKUrVtZqsD-_wa_OHG+sHyJsuaO5QbEkWZVWRt2v0Qb+GXeA@mail.gmail.com>

Oh, that sucks. How large is the effect?

On Thu, Nov 24, 2011 at 2:17 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> On 24/11/11 10:15, Eugene Kirpichov wrote:
>
>> ...And you can do this rate limiting by watching the so called
>> "publisher confirms" (ConfirmSelect).
>>
>
> Indeed. Though selecting 'confirm' mode has an adverse effect on
> performance.
>
> Matthias.
>



-- 
Eugene Kirpichov
Principal Engineer, Mirantis Inc. http://www.mirantis.com/
Editor, http://fprog.ru/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111124/66a94099/attachment.htm>

From ekirpichov at gmail.com  Thu Nov 24 10:31:57 2011
From: ekirpichov at gmail.com (Eugene Kirpichov)
Date: Thu, 24 Nov 2011 14:31:57 +0400
Subject: [rabbitmq-discuss] Hacking on RabbitMQ?
Message-ID: <CANVKUrXgeMfOVj3cFG4SveyJVnEW0pF3ttNcfmULqjwo2Jcmfw@mail.gmail.com>

Hi,

Does there exist an openly accessible list of open issues in RabbitMQ (not
client libraries), classified by difficulty / severity?
Does there exist an architectural guide for developers? (I saw the comments
in source - they're very informative, but a still higher-level overview
would be even better)

I'd be interested in spending some of my free time trying to fix them -
both for helping RabbitMQ and for getting some experience with Erlang :)

-- 
Eugene Kirpichov
Principal Engineer, Mirantis Inc. http://www.mirantis.com/
Editor, http://fprog.ru/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111124/7a71762a/attachment.htm>

From matthias at rabbitmq.com  Thu Nov 24 10:43:31 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 24 Nov 2011 10:43:31 +0000
Subject: [rabbitmq-discuss] Performence issue with clustering setup
In-Reply-To: <CANVKUrVtZqsD-_wa_OHG+sHyJsuaO5QbEkWZVWRt2v0Qb+GXeA@mail.gmail.com>
References: <BLU149-W13BDB6817881D71160F446ABC90@phx.gbl>	<4ECE17B6.40105@rabbitmq.com>	<CANVKUrUHt502zXeLoDJ-1DagHN7-C0LTHvWcRTyqOLUV-oF5uQ@mail.gmail.com>	<4ECE19AD.60700@rabbitmq.com>
	<CANVKUrVtZqsD-_wa_OHG+sHyJsuaO5QbEkWZVWRt2v0Qb+GXeA@mail.gmail.com>
Message-ID: <4ECE1FD3.4030504@rabbitmq.com>

Eugene,

On 24/11/11 10:29, Eugene Kirpichov wrote:
> Oh, that sucks. How large is the effect?

The answer is "it depends", of course :)

On 2.7.0, with hipe-compilation enabled, I can get a sustained rate of 
37kHz in a straight-through test (one producer, one queue, one 
consumer), with auto-ack, tiny messages, no persistence. [using our Java 
client's MulticastMain example with '-a -r 37000']. Turning on acks and 
persistence, I get a rate of 12kHz ['-f persistent -r 12000'].

If I enable confirms and throttle producers s.t. at most 1000 confirms 
are outstanding ['-a -c 1000'], I get 26kHz. And with acks and 
persistence ['-f persistent -c 1000'] this drops to about 3kHz.

Regards,

Matthias.

From videlalvaro at gmail.com  Thu Nov 24 10:44:00 2011
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Thu, 24 Nov 2011 11:44:00 +0100
Subject: [rabbitmq-discuss] Hacking on RabbitMQ?
In-Reply-To: <CANVKUrXgeMfOVj3cFG4SveyJVnEW0pF3ttNcfmULqjwo2Jcmfw@mail.gmail.com>
References: <CANVKUrXgeMfOVj3cFG4SveyJVnEW0pF3ttNcfmULqjwo2Jcmfw@mail.gmail.com>
Message-ID: <CAMcAHLV=7=he4LOiGn+shVi4tUVce74s=VjKfyeVG=gD9qMYPg@mail.gmail.com>

Hi,

I wrote a couple of docs some months ago and you can find them here:
https://github.com/videlalvaro/rabbit-internals

Feel free to fix them/expand them but I'm not sure if they will help much.

Regarding the msg_store and the msg_index the modules there have a lot of
docs in the source code itself.

Then take a look at the .hrl files, specially those that define Erlang
behaviours? those have a lot of docs on what each function should
implement. I always open the behaviour definitions and then grep for
modules implementing them and start from there.

Then on the rabbit_types.erl you can get a lot of insights since you can
see what a "binding_destination" is for example. You can see what the
record structures are and so on.

Read the module proper/quickcheck specs. Those can give you some info about
the expected behavior.

For exchanges I would just read other plugin exchanges. Notably those
written by Matthew like the consistent hashing exchange. I think the
implementation of the topic exchange is quite interesting too.

Regarding Erlang/OTP itself keep in mind that RabbitMQ uses its of
gen_server2 module. There might be other custom modules too that improve on
OTP itself.

I hope this helps,

Alvaro

On Thu, Nov 24, 2011 at 11:31 AM, Eugene Kirpichov <ekirpichov at gmail.com>wrote:

> Hi,
>
> Does there exist an openly accessible list of open issues in RabbitMQ (not
> client libraries), classified by difficulty / severity?
> Does there exist an architectural guide for developers? (I saw the
> comments in source - they're very informative, but a still higher-level
> overview would be even better)
>
> I'd be interested in spending some of my free time trying to fix them -
> both for helping RabbitMQ and for getting some experience with Erlang :)
>
> --
> Eugene Kirpichov
> Principal Engineer, Mirantis Inc. http://www.mirantis.com/
> Editor, http://fprog.ru/
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111124/9acf8f8b/attachment.htm>

From ekirpichov at gmail.com  Thu Nov 24 11:02:50 2011
From: ekirpichov at gmail.com (Eugene Kirpichov)
Date: Thu, 24 Nov 2011 15:02:50 +0400
Subject: [rabbitmq-discuss] Hacking on RabbitMQ?
In-Reply-To: <CAMcAHLV=7=he4LOiGn+shVi4tUVce74s=VjKfyeVG=gD9qMYPg@mail.gmail.com>
References: <CANVKUrXgeMfOVj3cFG4SveyJVnEW0pF3ttNcfmULqjwo2Jcmfw@mail.gmail.com>
	<CAMcAHLV=7=he4LOiGn+shVi4tUVce74s=VjKfyeVG=gD9qMYPg@mail.gmail.com>
Message-ID: <CANVKUrWM2M6aWztktm59Y4qYXwyCbU_B1+VgV2BNYYGWAzk6sw@mail.gmail.com>

Thanks, this will definitely help! (though I do not promise that I'll start
doing something immediately)

What about the list of open issues? I found an email from 2009 that there
is no public bugtracker, but maybe did one appear?..

On Thu, Nov 24, 2011 at 2:44 PM, Alvaro Videla <videlalvaro at gmail.com>wrote:

> Hi,
>
> I wrote a couple of docs some months ago and you can find them here:
> https://github.com/videlalvaro/rabbit-internals
>
> Feel free to fix them/expand them but I'm not sure if they will help much.
>
> Regarding the msg_store and the msg_index the modules there have a lot of
> docs in the source code itself.
>
> Then take a look at the .hrl files, specially those that define Erlang
> behaviours? those have a lot of docs on what each function should
> implement. I always open the behaviour definitions and then grep for
> modules implementing them and start from there.
>
> Then on the rabbit_types.erl you can get a lot of insights since you can
> see what a "binding_destination" is for example. You can see what the
> record structures are and so on.
>
> Read the module proper/quickcheck specs. Those can give you some info
> about the expected behavior.
>
> For exchanges I would just read other plugin exchanges. Notably those
> written by Matthew like the consistent hashing exchange. I think the
> implementation of the topic exchange is quite interesting too.
>
> Regarding Erlang/OTP itself keep in mind that RabbitMQ uses its of
> gen_server2 module. There might be other custom modules too that improve on
> OTP itself.
>
> I hope this helps,
>
> Alvaro
>
> On Thu, Nov 24, 2011 at 11:31 AM, Eugene Kirpichov <ekirpichov at gmail.com>wrote:
>
>> Hi,
>>
>> Does there exist an openly accessible list of open issues in RabbitMQ
>> (not client libraries), classified by difficulty / severity?
>> Does there exist an architectural guide for developers? (I saw the
>> comments in source - they're very informative, but a still higher-level
>> overview would be even better)
>>
>> I'd be interested in spending some of my free time trying to fix them -
>> both for helping RabbitMQ and for getting some experience with Erlang :)
>>
>> --
>> Eugene Kirpichov
>> Principal Engineer, Mirantis Inc. http://www.mirantis.com/
>> Editor, http://fprog.ru/
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>


-- 
Eugene Kirpichov
Principal Engineer, Mirantis Inc. http://www.mirantis.com/
Editor, http://fprog.ru/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111124/ce145e6a/attachment.htm>

From simon at rabbitmq.com  Thu Nov 24 11:44:46 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 24 Nov 2011 11:44:46 +0000
Subject: [rabbitmq-discuss] Hacking on RabbitMQ?
In-Reply-To: <CANVKUrWM2M6aWztktm59Y4qYXwyCbU_B1+VgV2BNYYGWAzk6sw@mail.gmail.com>
References: <CANVKUrXgeMfOVj3cFG4SveyJVnEW0pF3ttNcfmULqjwo2Jcmfw@mail.gmail.com>	<CAMcAHLV=7=he4LOiGn+shVi4tUVce74s=VjKfyeVG=gD9qMYPg@mail.gmail.com>
	<CANVKUrWM2M6aWztktm59Y4qYXwyCbU_B1+VgV2BNYYGWAzk6sw@mail.gmail.com>
Message-ID: <4ECE2E2E.4090606@rabbitmq.com>

On 24/11/11 11:02, Eugene Kirpichov wrote:
> What about the list of open issues? I found an email from 2009 that
> there is no public bugtracker, but maybe did one appear?..

Sorry, no. It's still on the TODO list :(

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From andrea.rosa at hp.com  Thu Nov 24 11:50:30 2011
From: andrea.rosa at hp.com (Rosa, Andrea)
Date: Thu, 24 Nov 2011 11:50:30 +0000
Subject: [rabbitmq-discuss] Exchange disappear
In-Reply-To: <CABzX+qyjx4P3k8d-c4wR7JD+GQ1O_PQhsB8cj2JqdYwxi044aA@mail.gmail.com>
References: <5F389C517756284F80239F55BCA5DDDD17D7B540@G9W0721.americas.hpqcorp.net>
	<CABzX+qyjx4P3k8d-c4wR7JD+GQ1O_PQhsB8cj2JqdYwxi044aA@mail.gmail.com>
Message-ID: <5F389C517756284F80239F55BCA5DDDD17D7DFDE@G9W0721.americas.hpqcorp.net>

Hi Marek

Thanks for your help

> -----Original Message-----
> From: Marek Majkowski [mailto:majek04 at gmail.com]
> Sent: 24 November 2011 10:23
> To: Rosa, Andrea
> Cc: rabbitmq-discuss at lists.rabbitmq.com
> Subject: Re: [rabbitmq-discuss] Exchange disappear
> 
> Hi,
> 
> On Wed, Nov 23, 2011 at 18:02, Rosa, Andrea <andrea.rosa at hp.com> wrote:
> > I have got a problem using the py-amqplib as client (version 0.6.1),
> It?s
> > more likely that my problem is in the client library but just to be
> 100%
> > sure I will ask to you to confirm my idea and maybe you could also
> give me
> > some aextra information to fix it.
> >
> > I have got this exception in my client log file :
> >
> > AMQPChannelException: (404, u"NOT_FOUND - no exchange
> > 'a61f445d611d4f40a972d1f0c5449c77' in vhost '/'", (60, 40),
> > 'Channel.basic_publish')
> 
> `basic_publish` must be run against an existing exchange. If the
> exchange
> is not available - RabbitMQ will complain and abruptly close an amqp
> channel.
> 
> Make sure the exchange exists at that point - maybe put
> `exchange_declare`
> before the `publish` ?
> 

I am sure that the publish command is called after the exchange_declare, because I can see the process work correctly for the 95% of my messages, but sometimes I have got this error.
Maybe some race condition?


> > And after that this error
> >
> > AMQPConnectionException: (503, u"COMMAND_INVALID - second
> 'channel.open'
> > seen", (20, 10), 'Channel.open')
> 
> This looks like a client library issue. Not many AMQP client libraries
> know
> how to behave after an error ocurred.
> 

> > The strange thing is that I can see the exchange in rabbitmq server.
> 
> This is quite unlikely. Maybe you checked at different point in time?
> Maybe the exchange was `auto_delete=True` ?
> 
> You can verify that using `rabbitmqctl list_exchanges`, or even better,
> using rabbitmq management plugin.

Yes, I agree with you maybe I check at different point of time.
The exchange has auto_delete=true, so maybe a possible scenario could be:
1 try to publish a message 
2 the exchange is not yet created
3 second attempt to publish a message which generates the second exception (503)
4 the message is not published and the exchange is created. 
I verified also that that exchange has not a binding.

> 
> Hope that helps,
>     Marek

Yes thanks!
--
Andrea

From majek04 at gmail.com  Thu Nov 24 12:23:48 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Thu, 24 Nov 2011 12:23:48 +0000
Subject: [rabbitmq-discuss] Exchange disappear
In-Reply-To: <5F389C517756284F80239F55BCA5DDDD17D7DFDE@G9W0721.americas.hpqcorp.net>
References: <5F389C517756284F80239F55BCA5DDDD17D7B540@G9W0721.americas.hpqcorp.net>
	<CABzX+qyjx4P3k8d-c4wR7JD+GQ1O_PQhsB8cj2JqdYwxi044aA@mail.gmail.com>
	<5F389C517756284F80239F55BCA5DDDD17D7DFDE@G9W0721.americas.hpqcorp.net>
Message-ID: <CABzX+qwEtSxA_413ApLZFgZSZdj-JaszHFRa4H981C11_uS7Xg@mail.gmail.com>

On Thu, Nov 24, 2011 at 11:50, Rosa, Andrea <andrea.rosa at hp.com> wrote:
> Hi Marek
>
> Thanks for your help
>
>> -----Original Message-----
>> From: Marek Majkowski [mailto:majek04 at gmail.com]
>> Sent: 24 November 2011 10:23
>> To: Rosa, Andrea
>> Cc: rabbitmq-discuss at lists.rabbitmq.com
>> Subject: Re: [rabbitmq-discuss] Exchange disappear
>>
>> Hi,
>>
>> On Wed, Nov 23, 2011 at 18:02, Rosa, Andrea <andrea.rosa at hp.com> wrote:
>> > I have got a problem using the py-amqplib as client (version 0.6.1),
>> It?s
>> > more likely that my problem is in the client library but just to be
>> 100%
>> > sure I will ask to you to confirm my idea and maybe you could also
>> give me
>> > some aextra information to fix it.
>> >
>> > I have got this exception in my client log file :
>> >
>> > AMQPChannelException: (404, u"NOT_FOUND - no exchange
>> > 'a61f445d611d4f40a972d1f0c5449c77' in vhost '/'", (60, 40),
>> > 'Channel.basic_publish')
>>
>> `basic_publish` must be run against an existing exchange. If the
>> exchange
>> is not available - RabbitMQ will complain and abruptly close an amqp
>> channel.
>>
>> Make sure the exchange exists at that point - maybe put
>> `exchange_declare`
>> before the `publish` ?
>>
>
> I am sure that the publish command is called after the exchange_declare, because I can see the process work correctly for the 95% of my messages, but sometimes I have got this error.
> Maybe some race condition?

Quite possible - but rather on the client side. Just a quick question:
you're not using `no_wait`, right?

>> > And after that this error
>> >
>> > AMQPConnectionException: (503, u"COMMAND_INVALID - second
>> 'channel.open'
>> > seen", (20, 10), 'Channel.open')
>>
>> This looks like a client library issue. Not many AMQP client libraries
>> know
>> how to behave after an error ocurred.
>>
>
>> > The strange thing is that I can see the exchange in rabbitmq server.
>>
>> This is quite unlikely. Maybe you checked at different point in time?
>> Maybe the exchange was `auto_delete=True` ?
>>
>> You can verify that using `rabbitmqctl list_exchanges`, or even better,
>> using rabbitmq management plugin.
>
> Yes, I agree with you maybe I check at different point of time.
> The exchange has auto_delete=true, so maybe a possible scenario could be:
> 1 try to publish a message
> 2 the exchange is not yet created

That is going to crash the AMQP channel, you can't publish to non-existing
exchange.

> 3 second attempt to publish a message which generates the second exception (503)
> 4 the message is not published and the exchange is created.
> I verified also that that exchange has not a binding.

Publishing to existing exchange will always succeed, bindings doesn't make
a difference.

`auto-delete` exchange is deleted when last queue unbinds, is that
what you're doing?

Cheers,
   Marek

From matthew at rabbitmq.com  Thu Nov 24 12:34:32 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Thu, 24 Nov 2011 12:34:32 +0000
Subject: [rabbitmq-discuss] Performence issue with clustering setup
In-Reply-To: <4ECE1FD3.4030504@rabbitmq.com>
References: <BLU149-W13BDB6817881D71160F446ABC90@phx.gbl>
	<4ECE17B6.40105@rabbitmq.com>
	<CANVKUrUHt502zXeLoDJ-1DagHN7-C0LTHvWcRTyqOLUV-oF5uQ@mail.gmail.com>
	<4ECE19AD.60700@rabbitmq.com>
	<CANVKUrVtZqsD-_wa_OHG+sHyJsuaO5QbEkWZVWRt2v0Qb+GXeA@mail.gmail.com>
	<4ECE1FD3.4030504@rabbitmq.com>
Message-ID: <20111124123431.GA27066@rabbitmq.com>

On Thu, Nov 24, 2011 at 10:43:31AM +0000, Matthias Radestock wrote:
> And with acks
> and persistence ['-f persistent -c 1000'] this drops to about 3kHz.

With this one, you're essentially testing how fast your disk can fsync.
Thus on my non-HiPE'd Rabbit, but running on an SSD, this happily sits
at just above 6kHz.

Matthew

From ask at rabbitmq.com  Thu Nov 24 13:13:22 2011
From: ask at rabbitmq.com (Ask Solem)
Date: Thu, 24 Nov 2011 13:13:22 +0000
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
	31GB of RAM
In-Reply-To: <4ECD0BCB.3090304@foldr3.com>
References: <4ECCCB33.3040803@foldr3.com> <4ECCCE5A.3020909@rabbitmq.com>
	<4ECD0BCB.3090304@foldr3.com>
Message-ID: <A3371751-2889-402C-8AAD-BD17BF29E43A@rabbitmq.com>


On 23 Nov 2011, at 15:05, Muharem Hrnjadovic wrote:

> On 11/23/2011 11:43 AM, Matthias Radestock wrote:
>> 
>>> 99.9% of the queues are celery task queues and contain 0 or 1 messages;
>>> the main celery task queue contains up to 4096 messages.

I would guess that the queues that contain 0 or 1 messages are not task queues
but result queues, right?

6700 queues are not *that* many though, but it depends on the size of the result.
How large are these result messages?


From mh at foldr3.com  Thu Nov 24 14:03:52 2011
From: mh at foldr3.com (Muharem Hrnjadovic)
Date: Thu, 24 Nov 2011 15:03:52 +0100
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <A3371751-2889-402C-8AAD-BD17BF29E43A@rabbitmq.com>
References: <4ECCCB33.3040803@foldr3.com> <4ECCCE5A.3020909@rabbitmq.com>
	<4ECD0BCB.3090304@foldr3.com>
	<A3371751-2889-402C-8AAD-BD17BF29E43A@rabbitmq.com>
Message-ID: <4ECE4EC8.9060300@foldr3.com>

On 11/24/2011 02:13 PM, Ask Solem wrote:
> 
> On 23 Nov 2011, at 15:05, Muharem Hrnjadovic wrote:
> 
>> On 11/23/2011 11:43 AM, Matthias Radestock wrote:
>>>
>>>> 99.9% of the queues are celery task queues and contain 0 or 1 messages;
>>>> the main celery task queue contains up to 4096 messages.
> 
> I would guess that the queues that contain 0 or 1 messages are not
> task queues but result queues, right?
You are right, I meant the result queues.

> 
> 6700 queues are not *that* many though, but it depends on the size of
> the result.
> How large are these result messages?
The messages are strings like these:
    '::JOB::635::!hazard_curve_poes!0!-8684302006989106665'

While looking at the code again it occurred at me that the results
returned by the workers *are* actually ignored i.e. we can afford to
use the

    ignore_result=True

parameter setting in the @task decorator. Will try that and see how far
I get.

Best regards/Mit freundlichen Gr??en

-- 
Muharem Hrnjadovic <mh at foldr3.com>
Public key id   : B2BBFCFC
Key fingerprint : A5A3 CC67 2B87 D641 103F  5602 219F 6B60 B2BB FCFC

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 900 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111124/bf8cd0f2/attachment.pgp>

From mh at foldr3.com  Thu Nov 24 14:08:34 2011
From: mh at foldr3.com (Muharem Hrnjadovic)
Date: Thu, 24 Nov 2011 15:08:34 +0100
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <4ECD2216.40300@rabbitmq.com>
References: <4ECCCB33.3040803@foldr3.com>
	<4ECCCE5A.3020909@rabbitmq.com>	<4ECD0BCB.3090304@foldr3.com>
	<4ECD2216.40300@rabbitmq.com>
Message-ID: <4ECE4FE2.3050500@foldr3.com>

On 11/23/2011 05:40 PM, Simon MacMullen wrote:
> On 23/11/11 15:05, Muharem Hrnjadovic wrote:
>> Please see the "sudo rabbitmqctl report" link on:
>>      https://bugs.launchpad.net/openquake/+bug/894024/comments/1
> 
> Hi. Thanks for this.
Hello Simon, thank *you* for looking into this.

> There are a number of interesting things going on:
> 
> 1) Your "rabbitmqctl report" invocation shows about 28000 channels
> open and no connections. Did you edit connection details out of this?
No.

> 2) About 9GB of memory is used by binaries. This may indicate that you
> have some large messages around - are your messages particularly
> large?
No, as I said in my response to Ask, the messages are all strings like:

    '::JOB::635::!hazard_curve_poes!0!-6708111403636643040'

> 3) While the memory alarm was set and cleared a number of times, in
> the end the Erlang VM crashed with:
> 
>   no next heap size found: -2106532246, offset 0
>   Aborted
> 
> This error message indicates that the Erlang VM was not available to
> increase the heap size of a particular process as it ran off the end
> of a table of permitted heap sizes. On a 64GB machine the maximum heap
> size is 6.6 Exabytes: I hope you did not run in to that. Unfortunately
> there is a bug in Erlang R13 which garbles the error message above
> (hence why the alleged heap size is a negative number). So:
> 
> 3a) is this a 64 bit machine?
Yes.

> 3b) Can you run:
> 
> su rabbitmq -s /bin/sh -c 'erl -remsh rabbit@`hostname -s` -sname foo -eval "io:format(\"~p\", [lists:sublist(lists:reverse(lists:sort([{process_info(Pid, memory), Pid, process_info(Pid)} || Pid <- processes()])), 30)]), halt()."'
> 
> (all on one line, as root) when rabbit is eating a lot of memory and send us the output? This should let us see if there are individual processes that are eating huge amounts of memory.
Will do as soon as I have reproduced the problem.

> 3c) Can you upgrade the Erlang VM to see if we can get a better
> version of that error message? Updated debs are available at:
> 
>  http://www.erlang-solutions.com/section/132/erlang-otp-packages
> 
> Due to limitations in dpkg you might need to:
> 
> # apt-get remove erlang-base
> # dpkg -i esl-erlang_14.b.4-1_amd64.deb
> # apt-get install erlang-nox
> # dpkg -i rabbitmq-server_2.7.0-1_all.deb
> 
> (Yes, this is less than ideal but we've only just found out about the
> ESL packages...)
Let me provide the answer to 3b) first and we'll take it from there.

Best regards/Mit freundlichen Gr??en

-- 
Muharem Hrnjadovic <mh at foldr3.com>
Public key id   : B2BBFCFC
Key fingerprint : A5A3 CC67 2B87 D641 103F  5602 219F 6B60 B2BB FCFC

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 900 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111124/cef48010/attachment.pgp>

From andrea.rosa at hp.com  Thu Nov 24 14:18:17 2011
From: andrea.rosa at hp.com (Rosa, Andrea)
Date: Thu, 24 Nov 2011 14:18:17 +0000
Subject: [rabbitmq-discuss] Exchange disappear
In-Reply-To: <CABzX+qwEtSxA_413ApLZFgZSZdj-JaszHFRa4H981C11_uS7Xg@mail.gmail.com>
References: <5F389C517756284F80239F55BCA5DDDD17D7B540@G9W0721.americas.hpqcorp.net>
	<CABzX+qyjx4P3k8d-c4wR7JD+GQ1O_PQhsB8cj2JqdYwxi044aA@mail.gmail.com>
	<5F389C517756284F80239F55BCA5DDDD17D7DFDE@G9W0721.americas.hpqcorp.net>
	<CABzX+qwEtSxA_413ApLZFgZSZdj-JaszHFRa4H981C11_uS7Xg@mail.gmail.com>
Message-ID: <5F389C517756284F80239F55BCA5DDDD17D7E632@G9W0721.americas.hpqcorp.net>

Hi 


> -----Original Message-----
> From: Marek Majkowski [mailto:majek04 at gmail.com]
> Sent: 24 November 2011 12:24
> To: Rosa, Andrea
> Cc: rabbitmq-discuss at lists.rabbitmq.com
> Subject: Re: [rabbitmq-discuss] Exchange disappear
> 
> >> Make sure the exchange exists at that point - maybe put
> >> `exchange_declare`
> >> before the `publish` ?
> >>
> >
> > I am sure that the publish command is called after the
> exchange_declare, because I can see the process work correctly for the
> 95% of my messages, but sometimes I have got this error.
> > Maybe some race condition?
> 
> Quite possible - but rather on the client side. Just a quick question:
> you're not using `no_wait`, right?
> 

no_wait=False

> > The exchange has auto_delete=true, so maybe a possible scenario could
> be:
> > 1 try to publish a message
> > 2 the exchange is not yet created
> 
> That is going to crash the AMQP channel, you can't publish to non-
> existing
> exchange.
> 
The channel can crash for some network problems or some issues with the socket, isn't it?


> > 3 second attempt to publish a message which generates the second
> exception (503)
> > 4 the message is not published and the exchange is created.
> > I verified also that that exchange has not a binding.
> 
> Publishing to existing exchange will always succeed, bindings doesn't
> make
> a difference.

> `auto-delete` exchange is deleted when last queue unbinds, is that
> what you're doing?

Yes, that's my case

--
Andrea

From mh at foldr3.com  Thu Nov 24 14:25:41 2011
From: mh at foldr3.com (Muharem Hrnjadovic)
Date: Thu, 24 Nov 2011 15:25:41 +0100
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <4ECD2216.40300@rabbitmq.com>
References: <4ECCCB33.3040803@foldr3.com>
	<4ECCCE5A.3020909@rabbitmq.com>	<4ECD0BCB.3090304@foldr3.com>
	<4ECD2216.40300@rabbitmq.com>
Message-ID: <4ECE53E5.5000002@foldr3.com>

On 11/23/2011 05:40 PM, Simon MacMullen wrote:
> On 23/11/11 15:05, Muharem Hrnjadovic wrote:
[..]
> 3b) Can you run:
> 
> su rabbitmq -s /bin/sh -c 'erl -remsh rabbit@`hostname -s` -sname foo -eval "io:format(\"~p\", [lists:sublist(lists:reverse(lists:sort([{process_info(Pid, memory), Pid, process_info(Pid)} || Pid <- processes()])), 30)]), halt()."'
Hello Simon,

I "tested" your command above, please see: http://paste.ubuntu.com/748229/
There are a number of "File operation error:.." entries in there. Is
that something you expected to see?

[..]

Best regards/Mit freundlichen Gr??en

-- 
Muharem Hrnjadovic <mh at foldr3.com>
Public key id   : B2BBFCFC
Key fingerprint : A5A3 CC67 2B87 D641 103F  5602 219F 6B60 B2BB FCFC

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 900 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111124/5c4a462c/attachment.pgp>

From matthias at rabbitmq.com  Thu Nov 24 14:42:03 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 24 Nov 2011 14:42:03 +0000
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <4ECE4FE2.3050500@foldr3.com>
References: <4ECCCB33.3040803@foldr3.com>	<4ECCCE5A.3020909@rabbitmq.com>	<4ECD0BCB.3090304@foldr3.com>	<4ECD2216.40300@rabbitmq.com>
	<4ECE4FE2.3050500@foldr3.com>
Message-ID: <4ECE57BB.8030201@rabbitmq.com>

On 24/11/11 14:08, Muharem Hrnjadovic wrote:
> On 11/23/2011 05:40 PM, Simon MacMullen wrote:
>> 1) Your "rabbitmqctl report" invocation shows about 28000 channels
>> open and no connections. Did you edit connection details out of this?
> No.

That turns out to be a bug in the connection reporting code, which ends 
up timing out.

Matthias.

From majek04 at gmail.com  Thu Nov 24 14:59:47 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Thu, 24 Nov 2011 14:59:47 +0000
Subject: [rabbitmq-discuss] Exchange disappear
In-Reply-To: <5F389C517756284F80239F55BCA5DDDD17D7E632@G9W0721.americas.hpqcorp.net>
References: <5F389C517756284F80239F55BCA5DDDD17D7B540@G9W0721.americas.hpqcorp.net>
	<CABzX+qyjx4P3k8d-c4wR7JD+GQ1O_PQhsB8cj2JqdYwxi044aA@mail.gmail.com>
	<5F389C517756284F80239F55BCA5DDDD17D7DFDE@G9W0721.americas.hpqcorp.net>
	<CABzX+qwEtSxA_413ApLZFgZSZdj-JaszHFRa4H981C11_uS7Xg@mail.gmail.com>
	<5F389C517756284F80239F55BCA5DDDD17D7E632@G9W0721.americas.hpqcorp.net>
Message-ID: <CABzX+qwEUHdoE6jCT2mD+fuqeiMahW7yPT_uOHj53Q=ncn4y8w@mail.gmail.com>

On Thu, Nov 24, 2011 at 14:18, Rosa, Andrea <andrea.rosa at hp.com> wrote:
>
>> -----Original Message-----
>> From: Marek Majkowski [mailto:majek04 at gmail.com]
>> Sent: 24 November 2011 12:24
>> To: Rosa, Andrea
>> Cc: rabbitmq-discuss at lists.rabbitmq.com
>> Subject: Re: [rabbitmq-discuss] Exchange disappear
>>
>> >> Make sure the exchange exists at that point - maybe put
>> >> `exchange_declare`
>> >> before the `publish` ?
>> >>
>> >
>> > I am sure that the publish command is called after the
>> exchange_declare, because I can see the process work correctly for the
>> 95% of my messages, but sometimes I have got this error.
>> > Maybe some race condition?
>>
>> Quite possible - but rather on the client side. Just a quick question:
>> you're not using `no_wait`, right?
>>
>
> no_wait=False

Good.

>> > The exchange has auto_delete=true, so maybe a possible scenario could
>> be:
>> > 1 try to publish a message
>> > 2 the exchange is not yet created
>>
>> That is going to crash the AMQP channel, you can't publish to non-
>> existing
>> exchange.
>>
> The channel can crash for some network problems or some issues with the socket, isn't it?

Or when any AMQP error occurs. Closing channels is the AMQP way
of signalling errors.

In case of socket/network problems you will hear connection error
(as opposed to channel error).

IE: "channel error" is almost always caused by application doing
AMQP things its not supposed to do.

>> > 3 second attempt to publish a message which generates the second
>> exception (503)
>> > 4 the message is not published and the exchange is created.
>> > I verified also that that exchange has not a binding.
>>
>> Publishing to existing exchange will always succeed, bindings doesn't
>> make
>> a difference.
>
>> `auto-delete` exchange is deleted when last queue unbinds, is that
>> what you're doing?
>
> Yes, that's my case

Well, in such case on `unbind` (or when queues are deleted or auto-deleted)
the exchange will be removed and any subsequent publishes will fail
with "channel errors".

Hope that helps,
 Marek

From mh at foldr3.com  Thu Nov 24 15:20:59 2011
From: mh at foldr3.com (Muharem Hrnjadovic)
Date: Thu, 24 Nov 2011 16:20:59 +0100
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <4ECE57BB.8030201@rabbitmq.com>
References: <4ECCCB33.3040803@foldr3.com>	<4ECCCE5A.3020909@rabbitmq.com>	<4ECD0BCB.3090304@foldr3.com>	<4ECD2216.40300@rabbitmq.com>
	<4ECE4FE2.3050500@foldr3.com> <4ECE57BB.8030201@rabbitmq.com>
Message-ID: <4ECE60DB.6010308@foldr3.com>

On 11/24/2011 03:42 PM, Matthias Radestock wrote:
> On 24/11/11 14:08, Muharem Hrnjadovic wrote:
>> On 11/23/2011 05:40 PM, Simon MacMullen wrote:
>>> 1) Your "rabbitmqctl report" invocation shows about 28000 channels
>>> open and no connections. Did you edit connection details out of this?
>> No.
> 
> That turns out to be a bug in the connection reporting code, which
> ends up timing out.
Hmm .. I took a number of snapshots .. one was twice as big as all the
others. It was taken 20 minutes before the crash. Maybe it is complete?
Please see:
    https://bugs.launchpad.net/openquake/+bug/894024/comments/3

Best regards/Mit freundlichen Gr??en

-- 
Muharem Hrnjadovic <mh at foldr3.com>
Public key id   : B2BBFCFC
Key fingerprint : A5A3 CC67 2B87 D641 103F  5602 219F 6B60 B2BB FCFC

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 900 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111124/9a18a0b9/attachment.pgp>

From sophiewenxizhang at googlemail.com  Thu Nov 24 15:54:28 2011
From: sophiewenxizhang at googlemail.com (TZHA)
Date: Thu, 24 Nov 2011 07:54:28 -0800 (PST)
Subject: [rabbitmq-discuss] Problem with the example_consume from the c++
	wrapper amqpccp
Message-ID: <ce551ba9-8b40-475e-aa1e-28b969168f7a@cc2g2000vbb.googlegroups.com>

I am using the c++ wrapper for librabbitmq (C client) - with windows
client and linux server. The example with get and different
configurations is ok.  The example_consume.cpp does work.

It seems to me that the consumer was registered at the server (I could
see it the web admin for the rabbitmq server).  However, the client
didn't get any result from  the queue.

It seems to me that in AMQPQueue::sendConsumeCommand()

while(1) {
		amqp_maybe_release_buffers(*cnn);
		int result = amqp_simple_wait_frame(*cnn, &frame);
		if (result <= 0) return;

The "result" is always 0.   It seems to me that the "delivery" was not
called.

The queue was not empty.

Am i missing something?

From sophiewenxizhang at googlemail.com  Thu Nov 24 16:13:24 2011
From: sophiewenxizhang at googlemail.com (TZHA)
Date: Thu, 24 Nov 2011 08:13:24 -0800 (PST)
Subject: [rabbitmq-discuss] Problem with the example_consume from the
	c++ wrapper amqpccp
In-Reply-To: <ce551ba9-8b40-475e-aa1e-28b969168f7a@cc2g2000vbb.googlegroups.com>
References: <ce551ba9-8b40-475e-aa1e-28b969168f7a@cc2g2000vbb.googlegroups.com>
Message-ID: <2d054434-c057-4e6e-94a5-4c641c4e6917@o9g2000vbc.googlegroups.com>

Rabbitmq version 2.4.1 / R14B03 is used.

On 24 Nov., 16:54, TZHA <sophiewenxizh... at googlemail.com> wrote:
> I am using the c++ wrapper for librabbitmq (C client) - with windows
> client and linux server. The example with get and different
> configurations is ok. ?The example_consume.cpp does work.
>
> It seems to me that the consumer was registered at the server (I could
> see it the web admin for the rabbitmq server). ?However, the client
> didn't get any result from ?the queue.
>
> It seems to me that in AMQPQueue::sendConsumeCommand()
>
> while(1) {
> ? ? ? ? ? ? ? ? amqp_maybe_release_buffers(*cnn);
> ? ? ? ? ? ? ? ? int result = amqp_simple_wait_frame(*cnn, &frame);
> ? ? ? ? ? ? ? ? if (result <= 0) return;
>
> The "result" is always 0. ? It seems to me that the "delivery" was not
> called.
>
> The queue was not empty.
>
> Am i missing something?
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From simon at rabbitmq.com  Thu Nov 24 16:23:14 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 24 Nov 2011 16:23:14 +0000
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <4ECE53E5.5000002@foldr3.com>
References: <4ECCCB33.3040803@foldr3.com>
	<4ECCCE5A.3020909@rabbitmq.com>	<4ECD0BCB.3090304@foldr3.com>
	<4ECD2216.40300@rabbitmq.com> <4ECE53E5.5000002@foldr3.com>
Message-ID: <4ECE6F72.7020502@rabbitmq.com>

On 24/11/11 14:25, Muharem Hrnjadovic wrote:
> On 11/23/2011 05:40 PM, Simon MacMullen wrote:
>> On 23/11/11 15:05, Muharem Hrnjadovic wrote:
> [..]
>> 3b) Can you run:
>>
>> su rabbitmq -s /bin/sh -c 'erl -remsh rabbit@`hostname -s` -sname foo -eval "io:format(\"~p\", [lists:sublist(lists:reverse(lists:sort([{process_info(Pid, memory), Pid, process_info(Pid)} || Pid<- processes()])), 30)]), halt()."'
> Hello Simon,
>
> I "tested" your command above, please see: http://paste.ubuntu.com/748229/
> There are a number of "File operation error:.." entries in there. Is
> that something you expected to see?

They should be harmless - I expect you ran that from a cwd that the 
rabbitmq user could not read. You could "cd /var/lib/rabbitmq" first to 
shut it up.

However, I realise now that the above command does not work: -eval and 
-remsh do not work together so it's reporting on the Erlang processes in 
the shell, not RabbitMQ. Please try:

su rabbitmq -s /bin/sh -c "erl -sname foo -eval 
\"rpc:call(rabbit@`hostname -s`, erlang, apply, [fun() -> 
io:format(\\\"~p\\\", 
[lists:sublist(lists:reverse(lists:sort([{process_info(Pid, memory), 
Pid, process_info(Pid)} || Pid <- processes()])), 30)]) end, []]), 
halt().\""

...instead, and try to ignore the fact that it looks like the result of 
an obfuscation contest.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From andrea.rosa at hp.com  Thu Nov 24 17:24:52 2011
From: andrea.rosa at hp.com (Rosa, Andrea)
Date: Thu, 24 Nov 2011 17:24:52 +0000
Subject: [rabbitmq-discuss] Exchange disappear
In-Reply-To: <CABzX+qwEUHdoE6jCT2mD+fuqeiMahW7yPT_uOHj53Q=ncn4y8w@mail.gmail.com>
References: <5F389C517756284F80239F55BCA5DDDD17D7B540@G9W0721.americas.hpqcorp.net>
	<CABzX+qyjx4P3k8d-c4wR7JD+GQ1O_PQhsB8cj2JqdYwxi044aA@mail.gmail.com>
	<5F389C517756284F80239F55BCA5DDDD17D7DFDE@G9W0721.americas.hpqcorp.net>
	<CABzX+qwEtSxA_413ApLZFgZSZdj-JaszHFRa4H981C11_uS7Xg@mail.gmail.com>
	<5F389C517756284F80239F55BCA5DDDD17D7E632@G9W0721.americas.hpqcorp.net>
	<CABzX+qwEUHdoE6jCT2mD+fuqeiMahW7yPT_uOHj53Q=ncn4y8w@mail.gmail.com>
Message-ID: <5F389C517756284F80239F55BCA5DDDD17D7EE91@G9W0721.americas.hpqcorp.net>



> -----Original Message-----
> From: Marek Majkowski [mailto:majek04 at gmail.com]
> Sent: 24 November 2011 15:00
> To: Rosa, Andrea
> Cc: rabbitmq-discuss at lists.rabbitmq.com
> Subject: Re: [rabbitmq-discuss] Exchange disappear
> 
> 
> >> > The exchange has auto_delete=true, so maybe a possible scenario
> could
> >> be:
> >> > 1 try to publish a message
> >> > 2 the exchange is not yet created
> >>
> >> That is going to crash the AMQP channel, you can't publish to non-
> >> existing
> >> exchange.
> >>
> > The channel can crash for some network problems or some issues with
> the socket, isn't it?
> 
> Or when any AMQP error occurs. Closing channels is the AMQP way
> of signalling errors.
> 
> In case of socket/network problems you will hear connection error
> (as opposed to channel error).
> 
> IE: "channel error" is almost always caused by application doing
> AMQP things its not supposed to do.

So in my case the "thing not allowed" is trying to publish a message using a non existing exchange.

> 
> >> > 3 second attempt to publish a message which generates the second
> >> exception (503)
> >> > 4 the message is not published and the exchange is created.
> >> > I verified also that that exchange has not a binding.
> >>
> >> Publishing to existing exchange will always succeed, bindings
> doesn't
> >> make
> >> a difference.
> >
> >> `auto-delete` exchange is deleted when last queue unbinds, is that
> >> what you're doing?
> >
> > Yes, that's my case
> 
> Well, in such case on `unbind` (or when queues are deleted or auto-
> deleted)
> the exchange will be removed and any subsequent publishes will fail
> with "channel errors".


In my case the publishing process creates an exchange on the broker, before sending/publishing a message.
Thank you so much for your help!

> 
> Hope that helps,
>  Marek

--
Andrea 

From majek04 at gmail.com  Thu Nov 24 17:30:49 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Thu, 24 Nov 2011 17:30:49 +0000
Subject: [rabbitmq-discuss] Exchange disappear
In-Reply-To: <5F389C517756284F80239F55BCA5DDDD17D7EE91@G9W0721.americas.hpqcorp.net>
References: <5F389C517756284F80239F55BCA5DDDD17D7B540@G9W0721.americas.hpqcorp.net>
	<CABzX+qyjx4P3k8d-c4wR7JD+GQ1O_PQhsB8cj2JqdYwxi044aA@mail.gmail.com>
	<5F389C517756284F80239F55BCA5DDDD17D7DFDE@G9W0721.americas.hpqcorp.net>
	<CABzX+qwEtSxA_413ApLZFgZSZdj-JaszHFRa4H981C11_uS7Xg@mail.gmail.com>
	<5F389C517756284F80239F55BCA5DDDD17D7E632@G9W0721.americas.hpqcorp.net>
	<CABzX+qwEUHdoE6jCT2mD+fuqeiMahW7yPT_uOHj53Q=ncn4y8w@mail.gmail.com>
	<5F389C517756284F80239F55BCA5DDDD17D7EE91@G9W0721.americas.hpqcorp.net>
Message-ID: <CABzX+qw1BKWeEnhDri7gyEOrARDt9R4sytsRr+A2LZzD0=yxTw@mail.gmail.com>

On Thu, Nov 24, 2011 at 17:24, Rosa, Andrea <andrea.rosa at hp.com> wrote:
>> IE: "channel error" is almost always caused by application doing
>> AMQP things its not supposed to do.
>
> So in my case the "thing not allowed" is trying to publish a message using a non existing exchange.

Correct.

Publishing a message to a non existing exchange is invalid and will
result in a channel error.

>> Well, in such case on `unbind` (or when queues are deleted or auto-
>> deleted)
>> the exchange will be removed and any subsequent publishes will fail
>> with "channel errors".
>
>
> In my case the publishing process creates an exchange on the broker, before sending/publishing a message.
> Thank you so much for your help!

As you're using `auto_delete` exchanges, it is theoretically possible
that in a time
after the exchange was created and between you published a message
some other queue was bound and unbound to/from that exchange.

If that happens, the exchange will be removed before you do publish.
And subsequent publish will fail, as the exchange won't be there.

Marek

From andrea.rosa at hp.com  Thu Nov 24 17:34:47 2011
From: andrea.rosa at hp.com (Rosa, Andrea)
Date: Thu, 24 Nov 2011 17:34:47 +0000
Subject: [rabbitmq-discuss] Exchange disappear
In-Reply-To: <CABzX+qw1BKWeEnhDri7gyEOrARDt9R4sytsRr+A2LZzD0=yxTw@mail.gmail.com>
References: <5F389C517756284F80239F55BCA5DDDD17D7B540@G9W0721.americas.hpqcorp.net>
	<CABzX+qyjx4P3k8d-c4wR7JD+GQ1O_PQhsB8cj2JqdYwxi044aA@mail.gmail.com>
	<5F389C517756284F80239F55BCA5DDDD17D7DFDE@G9W0721.americas.hpqcorp.net>
	<CABzX+qwEtSxA_413ApLZFgZSZdj-JaszHFRa4H981C11_uS7Xg@mail.gmail.com>
	<5F389C517756284F80239F55BCA5DDDD17D7E632@G9W0721.americas.hpqcorp.net>
	<CABzX+qwEUHdoE6jCT2mD+fuqeiMahW7yPT_uOHj53Q=ncn4y8w@mail.gmail.com>
	<5F389C517756284F80239F55BCA5DDDD17D7EE91@G9W0721.americas.hpqcorp.net>
	<CABzX+qw1BKWeEnhDri7gyEOrARDt9R4sytsRr+A2LZzD0=yxTw@mail.gmail.com>
Message-ID: <5F389C517756284F80239F55BCA5DDDD17D7EF31@G9W0721.americas.hpqcorp.net>

Excellent!
Thanks for your time you give me a really big help....now it's up to me to understand how I can reproduce the problem.
Thanks again!

--
Andrea

> -----Original Message-----
> From: Marek Majkowski [mailto:majek04 at gmail.com]
> Sent: 24 November 2011 17:31
> To: Rosa, Andrea
> Cc: rabbitmq-discuss at lists.rabbitmq.com
> Subject: Re: [rabbitmq-discuss] Exchange disappear
> 
> On Thu, Nov 24, 2011 at 17:24, Rosa, Andrea <andrea.rosa at hp.com> wrote:
> >> IE: "channel error" is almost always caused by application doing
> >> AMQP things its not supposed to do.
> >
> > So in my case the "thing not allowed" is trying to publish a message
> using a non existing exchange.
> 
> Correct.
> 
> Publishing a message to a non existing exchange is invalid and will
> result in a channel error.
> 
> >> Well, in such case on `unbind` (or when queues are deleted or auto-
> >> deleted)
> >> the exchange will be removed and any subsequent publishes will fail
> >> with "channel errors".
> >
> >
> > In my case the publishing process creates an exchange on the broker,
> before sending/publishing a message.
> > Thank you so much for your help!
> 
> As you're using `auto_delete` exchanges, it is theoretically possible
> that in a time
> after the exchange was created and between you published a message
> some other queue was bound and unbound to/from that exchange.
> 
> If that happens, the exchange will be removed before you do publish.
> And subsequent publish will fail, as the exchange won't be there.
> 
> Marek

From tonygarnockjones+rabbitmq at gmail.com  Thu Nov 24 23:20:28 2011
From: tonygarnockjones+rabbitmq at gmail.com (Tony Garnock-Jones)
Date: Thu, 24 Nov 2011 18:20:28 -0500
Subject: [rabbitmq-discuss] Presence exchange updated
In-Reply-To: <CAM8fPiQEKyiiE0ry5tWMx_M7eRtnKNe9XW79R50NQGZX-FFgJQ@mail.gmail.com>
References: <CAM8fPiQEKyiiE0ry5tWMx_M7eRtnKNe9XW79R50NQGZX-FFgJQ@mail.gmail.com>
Message-ID: <CAM8fPiQBtnt=vE99Bh1xMOnEmoXww0srkQ2_B0SxPX4NNnJ_dg@mail.gmail.com>

Hi all,

I've finally managed to find some time to incorporate fixes and
improvements, some from Marek and some of my own, to the presence-exchange,
https://github.com/tonyg/presence-exchange.

It now

   - compiles against and runs with the master branch of rabbitmq-server
   (thanks to Marek's fixes for the latest build system and exchange-plugin
   API)
   - supports separation of presence senders from presence listeners (again
   thanks to Marek)
   - supports sending an optional initial summary of bindings to
   newly-arriving presence listeners, controlled by an argument to Queue.Bind

Enjoy!

Regards,
  Tony
-- 
Tony Garnock-Jones
tonygarnockjones at gmail.com
http://homepages.kcbbs.gen.nz/tonyg/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111124/1fbae84c/attachment.htm>

From james.r.carr at gmail.com  Fri Nov 25 00:25:55 2011
From: james.r.carr at gmail.com (James Carr)
Date: Thu, 24 Nov 2011 18:25:55 -0600
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <4ECD20A1.3030106@rabbitmq.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
	<4EC3AF7F.3040905@rabbitmq.com>
	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
	<4EC3B5D3.9040204@rabbitmq.com>
	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>
	<4EC3BDA9.30207@rabbitmq.com>
	<CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>
	<4EC4F469.70306@rabbitmq.com>
	<CAL8b_0eNz6bw=j7Qfcw02fJ0r_iokXY8z_YRAmhN8=WVPSy=gQ@mail.gmail.com>
	<4ECCD6D1.4020402@rabbitmq.com>
	<CAE3HoVSeh4eFdDWGqAyr5x5okNj=00geat5iGEGDf9SfaKJqjA@mail.gmail.com>
	<4ECD1996.1080403@rabbitmq.com>
	<CAE3HoVSVTry-VERjqrqo84Zw=HJDcz0dzX9WEf3YJFe36_MNXA@mail.gmail.com>
	<4ECD20A1.3030106@rabbitmq.com>
Message-ID: <CAJreXKDvJxyz9ifBWz0d48XV2hLcKPnx7RBKuxMhP4FXjDSSRQ@mail.gmail.com>

FYI, this is an ubuntu problem, not a rabbitMQ problem. I've had this
problem on our desktop and laptop after upgrading to 11.10. The issue
persists with and without rabbitMQ.

Thanks,
James

On Wed, Nov 23, 2011 at 10:34 AM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
> Michael,
>
>
> On 23/11/11 16:20, Michael Klishin wrote:
>>
>> Ubuntu shows some kind of a "standby screen" where I can either choose
>> to reboot/power off (powering off does not work either) or sign back in.
>> sudo poweroff from the shell shuts it down successfully.
>
>
> Can you get a non-GUI shell with 'ctrl-alt-f1'? If so, log in and then run
> 'ps auxfwww' and post the output.
>
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From tonygarnockjones at gmail.com  Thu Nov 24 23:17:41 2011
From: tonygarnockjones at gmail.com (Tony Garnock-Jones)
Date: Thu, 24 Nov 2011 18:17:41 -0500
Subject: [rabbitmq-discuss] Presence exchange updated
Message-ID: <CAM8fPiQEKyiiE0ry5tWMx_M7eRtnKNe9XW79R50NQGZX-FFgJQ@mail.gmail.com>

Hi all,

I've finally managed to find some time to incorporate fixes and
improvements, some from Marek and some of my own, to the presence-exchange,
https://github.com/tonyg/presence-exchange.

It now

   - compiles against and runs with the master branch of rabbitmq-server
   (thanks to Marek's fixes for the latest build system and exchange-plugin
   API)
   - supports separation of presence senders from presence listeners (again
   thanks to Marek)
   - supports sending an optional initial summary of bindings to
   newly-arriving presence listeners, controlled by an argument to Queue.Bind

Enjoy!

Regards,
  Tony
-- 
Tony Garnock-Jones
tonygarnockjones at gmail.com
http://homepages.kcbbs.gen.nz/tonyg/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111124/43a53461/attachment.htm>

From simon at rabbitmq.com  Fri Nov 25 10:53:37 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 25 Nov 2011 10:53:37 +0000
Subject: [rabbitmq-discuss] Presence exchange updated
In-Reply-To: <CAM8fPiQEKyiiE0ry5tWMx_M7eRtnKNe9XW79R50NQGZX-FFgJQ@mail.gmail.com>
References: <CAM8fPiQEKyiiE0ry5tWMx_M7eRtnKNe9XW79R50NQGZX-FFgJQ@mail.gmail.com>
Message-ID: <4ECF73B1.4010300@rabbitmq.com>

Oh cool, thank you.

FTR the build system and exchange plugin API are less likely to change 
in the future[0] so hopefully this should keep working for a while.

Cheers, Simon

[0] Famous last words, I know.

On 24/11/11 23:17, Tony Garnock-Jones wrote:
> Hi all,
>
> I've finally managed to find some time to incorporate fixes and
> improvements, some from Marek and some of my own, to the
> presence-exchange, https://github.com/tonyg/presence-exchange.
>
> It now
>
>     * compiles against and runs with the master branch of
>       rabbitmq-server (thanks to Marek's fixes for the latest build
>       system and exchange-plugin API)
>     * supports separation of presence senders from presence listeners
>       (again thanks to Marek)
>     * supports sending an optional initial summary of bindings to
>       newly-arriving presence listeners, controlled by an argument to
>       Queue.Bind
>
> Enjoy!
>
> Regards,
>    Tony
> --
> Tony Garnock-Jones
> tonygarnockjones at gmail.com <mailto:tonygarnockjones at gmail.com>
> http://homepages.kcbbs.gen.nz/tonyg/
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


-- 
Simon MacMullen
RabbitMQ, VMware

From david at rabbitmq.com  Fri Nov 25 16:21:10 2011
From: david at rabbitmq.com (David Wragg)
Date: Fri, 25 Nov 2011 16:21:10 +0000
Subject: [rabbitmq-discuss] Problem with the example_consume from the
	c++ wrapper amqpccp
In-Reply-To: <ce551ba9-8b40-475e-aa1e-28b969168f7a@cc2g2000vbb.googlegroups.com>
	(TZHA's message of "Thu, 24 Nov 2011 07:54:28 -0800 (PST)")
References: <ce551ba9-8b40-475e-aa1e-28b969168f7a@cc2g2000vbb.googlegroups.com>
Message-ID: <yrv4cfwhcp409.fsf@dwragg.eng.vmware.com>

Hi,

TZHA <sophiewenxizhang at googlemail.com> writes:
> I am using the c++ wrapper for librabbitmq (C client) - with windows
> client and linux server. The example with get and different
> configurations is ok.  The example_consume.cpp does work.

I think you mean that the example_consume.cpp does *not* work?

Could you point to the C++ wrapper you are using?  There are at least
two out there.

> It seems to me that the consumer was registered at the server (I could
> see it the web admin for the rabbitmq server).  However, the client
> didn't get any result from  the queue.

If no-one on this list can help, maybe file an issue against the project
on github?

David

-- 
David Wragg
Staff Engineer, RabbitMQ
VMware, Inc.

From sophiewenxizhang at googlemail.com  Fri Nov 25 16:43:19 2011
From: sophiewenxizhang at googlemail.com (TZHA)
Date: Fri, 25 Nov 2011 08:43:19 -0800 (PST)
Subject: [rabbitmq-discuss] Problem with the example_consume from the
	c++ wrapper amqpccp
In-Reply-To: <yrv4cfwhcp409.fsf@dwragg.eng.vmware.com>
References: <ce551ba9-8b40-475e-aa1e-28b969168f7a@cc2g2000vbb.googlegroups.com>
	<yrv4cfwhcp409.fsf@dwragg.eng.vmware.com>
Message-ID: <332c7677-3f88-44d4-9cdf-e96f21e6041f@p2g2000vbj.googlegroups.com>

Hi,

i am using amqpcpp.

I modified the lines
  if (result <= 0) return;
in AMQPQueue::sendConsumeCommand() to
  if (result < 0) return;

The client example  (consume) works now under VS 2010 debug - but it
does not work when started stand alone.

amqp_rpc_reply_t res = amqp_simple_rpc(*cnn, channelNum,
AMQP_BASIC_CONSUME_METHOD, replies, &s);

returns AMQP_RESPONSE_LIBRARY_EXCEPTION

In debug modus (even without any breakpoints) it returns
AMQP_RESPONSE_NORMAL.

On 25 Nov., 17:21, David Wragg <da... at rabbitmq.com> wrote:
> Hi,
>
> TZHA <sophiewenxizh... at googlemail.com> writes:
> > I am using the c++ wrapper for librabbitmq (C client) - with windows
> > client and linux server. The example with get and different
> > configurations is ok. ?The example_consume.cpp does work.
>
> I think you mean that the example_consume.cpp does *not* work?
>
> Could you point to the C++ wrapper you are using? ?There are at least
> two out there.
>
> > It seems to me that the consumer was registered at the server (I could
> > see it the web admin for the rabbitmq server). ?However, the client
> > didn't get any result from ?the queue.
>
> If no-one on this list can help, maybe file an issue against the project
> on github?
>
> David
>
> --
> David Wragg
> Staff Engineer, RabbitMQ
> VMware, Inc.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From james at 2600hz.com  Sat Nov 26 18:27:04 2011
From: james at 2600hz.com (James Aimonetti)
Date: Sat, 26 Nov 2011 10:27:04 -0800
Subject: [rabbitmq-discuss] Federation help
Message-ID: <4ED12F78.2090501@2600hz.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hey all,

Wanting to add federation to existing brokers but not sure I'm
understanding the semantics involved.

Let's say I have three exchanges, {events, topic}, {control, direct},
and {config, topic}, all three of which are on both brokers (in
different datacenters).

My current rabbit.config looks like:

[{rabbitmq_federation
  ,[{exchanges, [
		 [{exchange, "config"}
		  ,{type, "topic"}
		  ,{upstream_set, "config_exchanges"}
		 ]
		 ,[{exchange, "control"}
		  ,{type, "direct"}
		  ,{upstream_set, "control_exchanges"}
		 ]
		 ,[{exchange, "events"}
		  ,{type, "topic"}
		  ,{upstream_set, "events_exchanges"}
		 ]
                ]
         ,{upstream_sets, [{"control_exchanges", [[{connection,
"broker2"}]]}
                          ,{"events_exchanges", [[{connection, "broker2"}]]}
		          ,{"config_exchanges", [[{connection, "broker2"}]]}
	]}
    ,{connections, [{"broker2", [{host, "broker2.example.com"}]}]}
    ,{local_nodename, "broker1.example.com"}
  ]}
 ...more config


I have an almost identical config on brokers 1 and 2 (with hostnames
obviously adapted). Both startup fine (*sidenote: I had to set
ERL_LIBS=/path/to/rabbit/plugins to get the federation plugin to work -
the VM couldn't find the amqp_connection module, even after enabling the
amqp_client plugin). I see both brokers communicating about the
exchanges - lines similar to:

=INFO REPORT==== 26-Nov-2011::18:04:01 ===
Federation exchange 'control' in vhost '/' connected to
broker2.example.com:/:control

I start my application (in a separate VM) connecting to broker1, try to
declare my exchanges as part of my app's init, and get errors like:

...snip...
{server_initiated_close,406,
                      <<"PRECONDITION_FAILED - cannot redeclare exchange
'control' in vhost '/' with different type, durable, internal or
autodelete value">>}},
              {gen_server,call,
                  [<0.78.0>,
                   {call,
                       {'exchange.declare',1,<<"control">>,<<"direct">>,
                           false,false,false,false,false,[]},
...snip...

So I explicitly set type, durable, internal, and autodelete to 'false'
in my federation configs, but to no avail. I should note I have no
durable exchanges or queues in this system; everything is ephemeral.
Neither broker is clustered with any others.

I do see errors when I restart a broker similar to:

=ERROR REPORT==== 26-Nov-2011::18:04:00 ===
connection <0.2064.0>, channel 2 - error:
{amqp_error,not_found,
            "no exchange 'federation: control -> broker2.example.com B'
in vhost '/'",
            'exchange.delete'}

My understanding (which may be bass-ackwards) is that by setting up the
'control' exchange to federate with broker2, broker1 will receive
payloads from broker2's 'control' exchange and route them to any queues
bound to broker1's 'control' exchange, and that my application code
remains relatively unchanged to take advantage of that. The converse
too: since broker2 is connecting to broker1, any payloads my apps on
broker1 send to the 'control' exchange will be relayed to broker2.

Thanks for any guidance; sorry for the wall of text.

James

PS: My broker output when starting up:

Activating RabbitMQ plugins ...
2 plugins activated:
* amqp_client-2.7.0
* rabbitmq_federation-2.7.0


+---+   +---+
|   |   |   |
|   |   |   |
|   |   |   |
|   +---+   +-------+
|                   |
| RabbitMQ  +---+   |
|           |   |   |
|   v2.7.0  +---+   |
|                   |
+-------------------+
AMQP 0-9-1 / 0-9 / 0-8
Copyright (C) 2007-2011 VMware, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

node           : rabbit at broker1.example.com
app descriptor :
/var/lib/rabbitmq/rabbitmq_server-2.7.0/sbin/../ebin/rabbit.app
home dir       : /var/lib/rabbitmq
config file(s) : /etc/rabbitmq/rabbitmq.config
cookie hash    : SgcmwZTTAvznNXVC3eUfkQ==
log            : /var/log/rabbitmq/rabbit at broker1.example.com.log
sasl log       : /var/log/rabbitmq/rabbit at broker1.example.com-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at broker1.example.com
erlang version : 5.8.4

- -- rabbit boot start
starting file handle cache server
...done
starting worker pool
...done
starting database
...done
starting codec correctness check
...done
- -- external infrastructure ready
starting plugin registry
...done
starting auth mechanism cr-demo
...done
starting auth mechanism amqplain
...done
starting auth mechanism plain
...done
starting statistics event manager
...done
starting logging server
...done
starting exchange type direct
...done
starting exchange type fanout
...done
starting exchange type headers
...done
starting exchange type topic
...done
- -- kernel ready
starting alarm handler
...done
starting node monitor
...done
starting cluster delegate
...done
starting guid generator
...done
starting memory monitor
...done
- -- core initialized
starting empty DB check
...done
starting federation
...done
starting federation exchange type
...done
starting exchange, queue and binding recovery
...done
starting mirror queue slave sup
...done
starting adding mirrors to queues
...done
- -- message delivery logic ready
starting error log relay
...done
starting networking
...done
starting direct_client
...done
starting notify cluster nodes
...done

broker running


- -- 
James Aimonetti
Distributed Systems Engineer / DJ MC_

2600hz | http://2600hz.com
sip:james at 2600hz.com
tel: 415.886.7905
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQEcBAEBAgAGBQJO0S94AAoJENc77s1OYoGg79gIAJwI7bN1cgq2vgz+Wk/rtqUm
KWxKdMvn6tH4kfPK6LPEw2lviXBesE9KJ7oSv/4GCWKlRRxoQ5DqKyIWyfuJDZ15
HYpbq8Ne1hdDzmtFCtUR6FhTBg5Oor9atO9EMdCZCQ3IKWLE3rsE71Mek4lvFtYu
8QMxHHTZ1lDWUJtHpzrpUNG0KLKkpz67gACP4cXsjLDggFZHwc1wZpcFko7odgld
0LSoPA7qZzqPfwnZ8LabPmD3tCKGelTQolkl8P6YGtMGrbwzFDhav/KFVUYTEGuP
JOqOmyPi6d4X+/gCtxiRwtde1X4EPaEVQpB4BC7ttmny7rbimLLz6Vjwc4biFGE=
=OppA
-----END PGP SIGNATURE-----

From christian.weyer.cw at gmail.com  Sat Nov 26 19:51:26 2011
From: christian.weyer.cw at gmail.com (Christian Weyer)
Date: Sat, 26 Nov 2011 11:51:26 -0800 (PST)
Subject: [rabbitmq-discuss] Issue running Management Plugin (on Windows 7)
Message-ID: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>

Hi all,

I cannot get the Management Plugin to work on my Windows 7 x64
installation.
After adding it with "rabbitmq-plugins enable rabbitmq_management" and
restarting the service I actually see an open port (with tcpview.exe).
But it is 5672, not 55672 as stated in the docs.

If I use any browser to navigate to the given URLs from the docs
(http://www.rabbitmq.com/management.html), modulo the changed port, I
get nothing...

Any idea what is wrong?
Thanks!

From vveludan at gmail.com  Sun Nov 27 02:32:09 2011
From: vveludan at gmail.com (Venkat)
Date: Sat, 26 Nov 2011 18:32:09 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ Clustering
Message-ID: <1d3c8608-e6c7-450f-a152-cadb220e5cc1@p16g2000yqd.googlegroups.com>

Good evening.
Following is our clustering scenario:
- Using RabbitMQ 2.6.1 with spring amqp 1.0 using RabbitMQ mirrored
queues
- We have two nodes on which queue consumers are running: q_c_node1
and q_c_node2.
- We have two rabbitmq nodes rmq_node1 and rmq_node2.
- Using HA Proxy to load balance.
- When q_c_node1 is started assume that there are two queue consumers
q_c1 using queue q1 and q_c2 using queue q2 are started. Assume that
HA Proxy routed the q1 creation to rmq_node1 and q2 creation to
rmq_node2.
- When q_c_node2 is started, q_c1 and q_c2 will be pointing to q1 on
rmq_node1 and q2 on rmq_node2 as q1 and q2 are already created (please
correct me if I am wrong).
- Assume that rmq_node1 is down. Since mirrored queues are used, we
have rmq_node2 as back up. The q_c1 consumer on q_c_node1 and
q_c_node2 will be pointed to rmq_node2 using HA Proxy and spring-
amqp's reconnecting mechanism. At this point two queue consumers
runnning on q_c_node1 and q_c_node2 are using rmq_node2 (as rmq_node1
is down). If a brand new rabbitmq node rmq_new_node joins the cluster
(using ha-x-policy-all, therefore this node also is mirrored) will it
scale as expected?. My concern is, q_c_node1 and q_c_node2 are
pointing to rmq_node2. Whenever requests go to rmq_new_node I am
assuming that they will be simply passed on to rmq_node1. How will the
CPU Utilization and I/O activity will be affected on rmq_node2 and
rmq_new_node?.

Thanks
Venkat

From glen.mazza at gmail.com  Sun Nov 27 11:46:41 2011
From: glen.mazza at gmail.com (gmazza)
Date: Sun, 27 Nov 2011 03:46:41 -0800 (PST)
Subject: [rabbitmq-discuss] Website change suggestions
Message-ID: <30acc20d-179e-46bd-8a41-a59ca82157a3@u6g2000vbg.googlegroups.com>

Hello, I just started to look at RabbitMQ and ran into some newbie
hiccups slowing me down.  A few website changes could makes things
easier:

1.) On the contact page (http://www.rabbitmq.com/contact.html), this
is where people will go to try to find the bugtracker.  As you
presently keep your bugtracker internal and instead use the discuss
list for people to mention bugs, it would be good to include a
sentence to that effect on this page, so people aren't spending time
searching for an external bugtracker that doesn't exist.

2.) I'm running Ubuntu so my first RabbitMQ download choice was to
install the .deb package: http://www.rabbitmq.com/install-debian.html
-- I was concerned however that this daemon is always running by
default when I start my machine (and not when I explicitly choose to
start it).  It would be good to mention in the "Run RabbitMQ Server/
Start the Server" section that we can use sysv-rc-conf to have the
rabbitmq server disabled by default, and that we can reactivate it
using this same program prior to running "sudo invoke-rc.d rabbitmq-
server start".  (Maybe you know of a cleaner way you can describe
instead.)  Alternatively, refer people to the generic Unix download if
they don't want an always-running daemon.

3.) Looking for a rabbitmq server that I could manually start and stop
(before I figured out the above), I then tried the Generic Unix
section: http://www.rabbitmq.com/install-generic-unix.html.  In the
section "Start the Server", good to remind users that they will need
to run the rabbitmq server as a superuser (i.e., "sudo sbin/rabbitmq-
server" for Ubuntu).

Not doing so raised errors for me such as this:

gmazza at gmazza-work:~/dataExt3/myapps/rabbitmq_server-2.7.0$ sbin/
rabbitmq-server
Activating RabbitMQ plugins ...
ERROR: Could not delete dir /var/lib/rabbitmq/mnesia/rabbit at gmazza-
work-plugins-expand ({cannot_delete,
       "/var/lib/rabbitmq/mnesia/rabbit at gmazza-work-plugins-expand/
rabbit.rel",
       eacces})

(Alternatively, should they be manually creating the "rabbitmq" user
and running under that account?  If so, then inform the user of that.)

Thanks,
Glen

From talakosk at gmail.com  Sun Nov 27 15:17:51 2011
From: talakosk at gmail.com (Timo Alakoski)
Date: Sun, 27 Nov 2011 07:17:51 -0800 (PST)
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <4ECCD6D1.4020402@rabbitmq.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
	<4EC39721.7000201@rabbitmq.com> <4EC3ABB5.5080602@rabbitmq.com>
	<CAL8b_0cWxwUAByo8UU9d8DUwfqe865uaR+oQfUV713M9_sgEMA@mail.gmail.com>
	<4EC3AF7F.3040905@rabbitmq.com>
	<CAL8b_0dTyV5X5u8sUxAkFxTmPFwmG4Mb88OY9mugykfM8MeywQ@mail.gmail.com>
	<4EC3B5D3.9040204@rabbitmq.com>
	<CAL8b_0dvrVNp8Svd9vXaAjFRkrumqaGDxQ92+9sC-VBkBa+mpQ@mail.gmail.com>
	<4EC3BDA9.30207@rabbitmq.com>
	<CAL8b_0faqoLvGEDYo2VN9XSF5kYK69pq-XMas6TiP3-+kB_usg@mail.gmail.com>
	<4EC4F469.70306@rabbitmq.com>
	<CAL8b_0eNz6bw=j7Qfcw02fJ0r_iokXY8z_YRAmhN8=WVPSy=gQ@mail.gmail.com>
	<4ECCD6D1.4020402@rabbitmq.com>
Message-ID: <70248621-cc49-400a-b163-d085d953e2e5@m10g2000vbc.googlegroups.com>

I believe the problem is with lightdm with rabbitmq service user.

Lightdm thinks there is another user logged in and doesn't know what
to
do so it doesn't do anything. There are bug reports here:
https://bugs.launchpad.net/lightdm/+bug/861171
https://bugs.launchpad.net/ubuntu/+source/gnome-session/+bug/855556

There is no solution for it as today. I switched from lightdm to gdm
and
the shutdown works but only from the gdm login screen. When you give
shutdown
while in gnome session it still logs you out which seems to be "a
default
behaviour".

You can change gdm with this command:

sudo dpkg-reconfigure gdm
(reboot)

Unrelated to this problem, but if shutdown still doesn't work with gdm
then you
might problems with acpid.  Adding "acpi=force" to your grub config
file might help:
http://ubuntuforums.org/showthread.php?t=1861356&page=3


--Timo


On Nov 23, 1:19?pm, Simon MacMullen <si... at rabbitmq.com> wrote:
> On 20/11/11 11:47, Sampo Savolainen wrote:
>
> > So it seems having rabbitmq running is preventing another service
> > (network-manager perhaps?) from shutting down cleanly.
>
> I have no idea how on earth that could happen, but I don't know much
> about NetworkManager.
>
> There are also reports from Ubuntu users that "ConsoleKit" (whatever
> that is) considers the RabbitMQ service to be a regular logged in user.
> I wonder if the two issues could be related?
>
> The trouble is, we don't know much about how this is supposed to work
> (and it doesn't seem very documented), and can't replicate things.
>
> I'll go and poke some Launchpad bugs and see if I can get anyone from
> Ubuntu / Canonical to help.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From roey.berman at gmail.com  Sun Nov 27 15:20:11 2011
From: roey.berman at gmail.com (bergundy)
Date: Sun, 27 Nov 2011 07:20:11 -0800 (PST)
Subject: [rabbitmq-discuss] publisher confirmations
Message-ID: <2f9ce68b-ce6a-4a67-b650-8ab433e2e502@n10g2000vbg.googlegroups.com>

Hi everyone,

I couldn't find code for implementing publisher confirmations.

I wrote this piece of code using pika 0.9.5 (python client).
Would like to get feedback on this, I hope I got it right ...

---
class ConfirmingProducer(object):
    def __init__(self, channel):
        self.delivery_tag = 1
        self.acked        = 0
        self._callbacks   = {}
        self.chan = channel
        self.chan.confirm_delivery(self.on_delivered)

    def publish(self, message, callback, **kwargs):
        self._callbacks[self.delivery_tag] = callback
        self.delivery_tag += 1
        self.chan.basic_publish(message, **kwargs)

    def on_delivered(self, frame):
        success = isinstance(frame.method, pika.spec.Basic.Ack)

        if frame.method.multiple:
            for dtag in range(self.acked+1, frame.method.delivery_tag
+1):
                self._callbacks.pop(dtag)(success)
            self.acked = frame.method.delivery_tag
        else:
            self._callbacks.pop(frame.method.delivery_tag)(success)
            self.acked += 1

From toby.corkindale at strategicdata.com.au  Mon Nov 28 00:53:46 2011
From: toby.corkindale at strategicdata.com.au (Toby Corkindale)
Date: Mon, 28 Nov 2011 11:53:46 +1100
Subject: [rabbitmq-discuss] Ubuntu 11.10 does not shutdown
In-Reply-To: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
References: <CAL8b_0dORe_EO88mp5R_aSUOZYJ7ujnbNScG6ai60An+0fKK2A@mail.gmail.com>
Message-ID: <4ED2DB9A.5060903@strategicdata.com.au>

On 16/11/11 19:59, Sampo Savolainen wrote:
> Hi,
>
> I've installed RabbitMQ server on an Ubuntu 11.10 (desktop) box from the
> .deb's provided on rabbitmq's website. After installing the server, the
> box is unable to shut down. Powering off just results in logging off the
> current session (and probably turning off some of the OS services in the
> process). The only way "real" way to power off the computer is to do:
> "sudo /sbin/poweroff now"
>
> This bug has been confirmed on the Ubuntu Launchpad bugtracker:
> https://bugs.launchpad.net/ubuntu/+source/rabbitmq-server/+bug/670289
>
> Both releases 2.6.1 and 2.7.0 exhibit this behavior.

Curiously, this doesn't seem to affect me - I've been running 2.6.1 and 
2.7.0 on Ubuntu 11.10 just fine.

I'm not using the desktop-style NetworkManager to manage my ethernet 
though - I'm using the server-style /etc/network/interfaces file, since 
I have eth0 bound to a bridge, br0, so that I can bridge my virtual 
machines too.

I don't know if that's helping or if it's a red herring.

From matthias at rabbitmq.com  Mon Nov 28 10:34:51 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 28 Nov 2011 10:34:51 +0000
Subject: [rabbitmq-discuss] Issue running Management Plugin (on Windows
 7)
In-Reply-To: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>
References: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>
Message-ID: <4ED363CB.1020701@rabbitmq.com>

Christian,

On 26/11/11 19:51, Christian Weyer wrote:
> I cannot get the Management Plugin to work on my Windows 7 x64
> installation.
> After adding it with "rabbitmq-plugins enable rabbitmq_management" and
> restarting the service I actually see an open port (with tcpview.exe).
> But it is 5672, not 55672 as stated in the docs.

5672 is the AMQP port.

Did you re-*install* (rather than just restart) the service after making 
changes to the plugin configuration? See 
http://www.rabbitmq.com/plugins.html#windows-restart

Regards,

Matthias.

From tianning.zhang at zanox.com  Mon Nov 28 10:38:14 2011
From: tianning.zhang at zanox.com (John)
Date: Mon, 28 Nov 2011 10:38:14 +0000 (UTC)
Subject: [rabbitmq-discuss] rabbitmq-c (librabbizmq) works only partially.
Message-ID: <loom.20111128T112008-575@post.gmane.org>

I am using rabbitmq-c under windows (VS 2010). The basic get features works just
fine. However when I tested the "consumer" feature I encountered the following
problem. 

1. Starting application debugging from VS 2010 (even without any break points
and in release configuration) everything looks ok (calling amqp_simple_rpc
returns AMQP_RESPONSE_NORMAL)! 

2. Starting the application without debuging I got an error in calling 
amqp_rpc_reply_t amqp_simple_rpc

with amqp_response_type_enum reply_type = AMQP_RESPONSE_LIBRARY_EXCEPTION
and library_error = ERROR_BAD_AMQP_DATA

I guess there is some "DEBUG" coding in source. Can anyone tell we where I can
make changes to solve this problem??

I have downloaded rabbitmq-c-default from 21.09.2011 and rebuild the sources
under windows. Rabbitmq servers have the version 2.4.1 and 2.6.1. 

I also tried the newest version from the server (dated 25.11, default and the
version 7cecf64752fd) - there I got the buffer overrun error. 






From simon at rabbitmq.com  Mon Nov 28 10:56:40 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 28 Nov 2011 10:56:40 +0000
Subject: [rabbitmq-discuss] Federation help
In-Reply-To: <4ED12F78.2090501@2600hz.com>
References: <4ED12F78.2090501@2600hz.com>
Message-ID: <4ED368E8.7090404@rabbitmq.com>

On 26/11/11 18:27, James Aimonetti wrote:
> Wanting to add federation to existing brokers but not sure I'm
> understanding the semantics involved.

Hi. Thanks for the reminder that an upgrade to the federation docs is 
overdue :)

> Let's say I have three exchanges, {events, topic}, {control, direct},
> and {config, topic}, all three of which are on both brokers (in
> different datacenters).
>
> My current rabbit.config looks like:
>
> [{rabbitmq_federation
>    ,[{exchanges, [
> 		 [{exchange, "config"}
> 		  ,{type, "topic"}
> 		  ,{upstream_set, "config_exchanges"}
> 		 ]
> 		 ,[{exchange, "control"}
> 		  ,{type, "direct"}
> 		  ,{upstream_set, "control_exchanges"}
> 		 ]
> 		 ,[{exchange, "events"}
> 		  ,{type, "topic"}
> 		  ,{upstream_set, "events_exchanges"}
> 		 ]
>                  ]
>           ,{upstream_sets, [{"control_exchanges", [[{connection,
> "broker2"}]]}
>                            ,{"events_exchanges", [[{connection, "broker2"}]]}
> 		          ,{"config_exchanges", [[{connection, "broker2"}]]}
> 	]}
>      ,{connections, [{"broker2", [{host, "broker2.example.com"}]}]}
>      ,{local_nodename, "broker1.example.com"}
>    ]}
>   ...more config

For the record you don't need to have a different upstream_set for each 
exchange, unless you actually want each exchange to federate with 
different brokers.

> I have an almost identical config on brokers 1 and 2 (with hostnames
> obviously adapted). Both startup fine (*sidenote: I had to set
> ERL_LIBS=/path/to/rabbit/plugins to get the federation plugin to work -
> the VM couldn't find the amqp_connection module, even after enabling the
> amqp_client plugin).

Really? Are you using deb / rpms? Have you moved anything around?

> I see both brokers communicating about the
> exchanges - lines similar to:
>
> =INFO REPORT==== 26-Nov-2011::18:04:01 ===
> Federation exchange 'control' in vhost '/' connected to
> broker2.example.com:/:control
>
> I start my application (in a separate VM) connecting to broker1, try to
> declare my exchanges as part of my app's init, and get errors like:

You don't need to. The exchanges part of the federation config will 
declare those exchanges when the broker starts up.

If you do want to declare them in your app, read the section "Declaring 
Federation Exchanges Over AMQP" in the README.

> ...snip...
> {server_initiated_close,406,
>                        <<"PRECONDITION_FAILED - cannot redeclare exchange
> 'control' in vhost '/' with different type, durable, internal or
> autodelete value">>}},
>                {gen_server,call,
>                    [<0.78.0>,
>                     {call,
>                         {'exchange.declare',1,<<"control">>,<<"direct">>,
>                             false,false,false,false,false,[]},
> ...snip...
>
> So I explicitly set type, durable, internal, and autodelete to 'false'
> in my federation configs, but to no avail.

The problem is likely to be the type - they need to be of type 
"x-federation". You might want to temporarily enable the management 
plugin so you can see what's going on.

> I should note I have no
> durable exchanges or queues in this system; everything is ephemeral.
> Neither broker is clustered with any others.
>
> I do see errors when I restart a broker similar to:
>
> =ERROR REPORT==== 26-Nov-2011::18:04:00 ===
> connection<0.2064.0>, channel 2 - error:
> {amqp_error,not_found,
>              "no exchange 'federation: control ->  broker2.example.com B'
> in vhost '/'",
>              'exchange.delete'}

Yeah, these are harmless - federation uses an intermediate exchange on 
the upstream which gets recreated on connect. It has to try to delete it 
to make *sure* it's not there (although it probably isn't anyway) - but 
there's currently no way to not treat that as an error.

> My understanding (which may be bass-ackwards) is that by setting up the
> 'control' exchange to federate with broker2, broker1 will receive
> payloads from broker2's 'control' exchange and route them to any queues
> bound to broker1's 'control' exchange, and that my application code
> remains relatively unchanged to take advantage of that. The converse
> too: since broker2 is connecting to broker1, any payloads my apps on
> broker1 send to the 'control' exchange will be relayed to broker2.

Yes, although the links are unidirectional so you need to set up 
federation in both directions.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From tianning.zhang at zanox.com  Mon Nov 28 10:56:58 2011
From: tianning.zhang at zanox.com (TZHA)
Date: Mon, 28 Nov 2011 02:56:58 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq-c (librabbizmq) works only partially
 under windows.
Message-ID: <32877962.post@talk.nabble.com>


I am using rabbitmq-c under windows (VS 2010). The basic get features works
just fine. However when I tested the "consumer" feature I encountered the
following problem. 

1. Starting application debugging from VS 2010 (even without any break
points and in release configuration) everything looks ok (calling
amqp_simple_rpc returns AMQP_RESPONSE_NORMAL)! 

2. Starting the application without debuging I got an error in calling 
amqp_rpc_reply_t amqp_simple_rpc

with amqp_response_type_enum reply_type = AMQP_RESPONSE_LIBRARY_EXCEPTION
and library_error = ERROR_BAD_AMQP_DATA

I guess there is some "DEBUG" coding in source. Can anyone tell we where I
can make changes to solve this problem??

I have downloaded rabbitmq-c-default from 21.09.2011 and rebuild the sources
under windows. Rabbitmq servers have the version 2.4.1 and 2.6.1. 

I also tried the newest version from the server (dated 25.11, default and
the version 7cecf64752fd) - there I got the buffer overrun error. 

Thanks in advance
-- 
View this message in context: http://old.nabble.com/rabbitmq-c-%28librabbizmq%29-works-only-partially-under-windows.-tp32877962p32877962.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From tianning.zhang at zanox.com  Mon Nov 28 10:57:13 2011
From: tianning.zhang at zanox.com (TZHA)
Date: Mon, 28 Nov 2011 02:57:13 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq-c (librabbizmq) works only partially
 under windows.
Message-ID: <32877964.post@talk.nabble.com>


I am using rabbitmq-c under windows (VS 2010). The basic get features works
just fine. However when I tested the "consumer" feature I encountered the
following problem. 

1. Starting application debugging from VS 2010 (even without any break
points and in release configuration) everything looks ok (calling
amqp_simple_rpc returns AMQP_RESPONSE_NORMAL)! 

2. Starting the application without debuging I got an error in calling 
amqp_rpc_reply_t amqp_simple_rpc

with amqp_response_type_enum reply_type = AMQP_RESPONSE_LIBRARY_EXCEPTION
and library_error = ERROR_BAD_AMQP_DATA

I guess there is some "DEBUG" coding in source. Can anyone tell we where I
can make changes to solve this problem??

I have downloaded rabbitmq-c-default from 21.09.2011 and rebuild the sources
under windows. Rabbitmq servers have the version 2.4.1 and 2.6.1. 

I also tried the newest version from the server (dated 25.11, default and
the version 7cecf64752fd) - there I got the buffer overrun error. 

Thanks in advance
-- 
View this message in context: http://old.nabble.com/rabbitmq-c-%28librabbizmq%29-works-only-partially-under-windows.-tp32877964p32877964.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From tianning.zhang at zanox.com  Mon Nov 28 10:53:47 2011
From: tianning.zhang at zanox.com (TZHA)
Date: Mon, 28 Nov 2011 02:53:47 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq-c (librabbizmq) works only partially.
Message-ID: <32877956.post@talk.nabble.com>


I am using rabbitmq-c under windows (VS 2010). The basic get features works
just fine. However when I tested the "consumer" feature I encountered the
following problem. 

1. Starting application debugging from VS 2010 (even without any break
points and in release configuration) everything looks ok (calling
amqp_simple_rpc returns AMQP_RESPONSE_NORMAL)! 

2. Starting the application without debuging I got an error in calling 
amqp_rpc_reply_t amqp_simple_rpc

with amqp_response_type_enum reply_type = AMQP_RESPONSE_LIBRARY_EXCEPTION
and library_error = ERROR_BAD_AMQP_DATA

I guess there is some "DEBUG" coding in source. Can anyone tell we where I
can make changes to solve this problem??

I have downloaded rabbitmq-c-default from 21.09.2011 and rebuild the sources
under windows. Rabbitmq servers have the version 2.4.1 and 2.6.1. 

I also tried the newest version from the server (dated 25.11, default and
the version 7cecf64752fd) - there I got the buffer overrun error. 

Thanks in advance. 
-- 
View this message in context: http://old.nabble.com/rabbitmq-c-%28librabbizmq%29-works-only-partially.-tp32877956p32877956.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From tianning.zhang at zanox.com  Mon Nov 28 10:54:17 2011
From: tianning.zhang at zanox.com (TZHA)
Date: Mon, 28 Nov 2011 02:54:17 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq-c (librabbizmq) works only partially.
Message-ID: <32877957.post@talk.nabble.com>


I am using rabbitmq-c under windows (VS 2010). The basic get features works
just fine. However when I tested the "consumer" feature I encountered the
following problem. 

1. Starting application debugging from VS 2010 (even without any break
points and in release configuration) everything looks ok (calling
amqp_simple_rpc returns AMQP_RESPONSE_NORMAL)! 

2. Starting the application without debuging I got an error in calling 
amqp_rpc_reply_t amqp_simple_rpc

with amqp_response_type_enum reply_type = AMQP_RESPONSE_LIBRARY_EXCEPTION
and library_error = ERROR_BAD_AMQP_DATA

I guess there is some "DEBUG" coding in source. Can anyone tell we where I
can make changes to solve this problem??

I have downloaded rabbitmq-c-default from 21.09.2011 and rebuild the sources
under windows. Rabbitmq servers have the version 2.4.1 and 2.6.1. 

I also tried the newest version from the server (dated 25.11, default and
the version 7cecf64752fd) - there I got the buffer overrun error. 

Thanks in advance. 
-- 
View this message in context: http://old.nabble.com/rabbitmq-c-%28librabbizmq%29-works-only-partially.-tp32877957p32877957.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From tianning.zhang at zanox.com  Mon Nov 28 10:55:09 2011
From: tianning.zhang at zanox.com (TZHA)
Date: Mon, 28 Nov 2011 02:55:09 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq-c (librabbizmq) works only partially
 under windows.
Message-ID: <32877958.post@talk.nabble.com>


I am using rabbitmq-c under windows (VS 2010). The basic get features works
just fine. However when I tested the "consumer" feature I encountered the
following problem. 

1. Starting application debugging from VS 2010 (even without any break
points and in release configuration) everything looks ok (calling
amqp_simple_rpc returns AMQP_RESPONSE_NORMAL)! 

2. Starting the application without debuging I got an error in calling 
amqp_rpc_reply_t amqp_simple_rpc

with amqp_response_type_enum reply_type = AMQP_RESPONSE_LIBRARY_EXCEPTION
and library_error = ERROR_BAD_AMQP_DATA

I guess there is some "DEBUG" coding in source. Can anyone tell we where I
can make changes to solve this problem??

I have downloaded rabbitmq-c-default from 21.09.2011 and rebuild the sources
under windows. Rabbitmq servers have the version 2.4.1 and 2.6.1. 

I also tried the newest version from the server (dated 25.11, default and
the version 7cecf64752fd) - there I got the buffer overrun error. 
-- 
View this message in context: http://old.nabble.com/rabbitmq-c-%28librabbizmq%29-works-only-partially-under-windows.-tp32877958p32877958.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


From majek04 at gmail.com  Mon Nov 28 11:01:33 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Mon, 28 Nov 2011 11:01:33 +0000
Subject: [rabbitmq-discuss] publisher confirmations
In-Reply-To: <2f9ce68b-ce6a-4a67-b650-8ab433e2e502@n10g2000vbg.googlegroups.com>
References: <2f9ce68b-ce6a-4a67-b650-8ab433e2e502@n10g2000vbg.googlegroups.com>
Message-ID: <CABzX+qwFQ8MARZkkyt1h7+GrFY9p-YqGO4qNCbm_tXLAd+FTuA@mail.gmail.com>

Hi,

I'm not sure if it works - but the pika example showing
publisher confirms usage looks rather similar:

https://github.com/pika/pika/blob/120fdea5913e7ed80536ff55634ab0f8f4554e79/examples/demo_send_confirmed.py

Cheer,
  Marek

On Sun, Nov 27, 2011 at 15:20, bergundy <roey.berman at gmail.com> wrote:
> Hi everyone,
>
> I couldn't find code for implementing publisher confirmations.
>
> I wrote this piece of code using pika 0.9.5 (python client).
> Would like to get feedback on this, I hope I got it right ...
>
> ---
> class ConfirmingProducer(object):
> ? ?def __init__(self, channel):
> ? ? ? ?self.delivery_tag = 1
> ? ? ? ?self.acked ? ? ? ?= 0
> ? ? ? ?self._callbacks ? = {}
> ? ? ? ?self.chan = channel
> ? ? ? ?self.chan.confirm_delivery(self.on_delivered)
>
> ? ?def publish(self, message, callback, **kwargs):
> ? ? ? ?self._callbacks[self.delivery_tag] = callback
> ? ? ? ?self.delivery_tag += 1
> ? ? ? ?self.chan.basic_publish(message, **kwargs)
>
> ? ?def on_delivered(self, frame):
> ? ? ? ?success = isinstance(frame.method, pika.spec.Basic.Ack)
>
> ? ? ? ?if frame.method.multiple:
> ? ? ? ? ? ?for dtag in range(self.acked+1, frame.method.delivery_tag
> +1):
> ? ? ? ? ? ? ? ?self._callbacks.pop(dtag)(success)
> ? ? ? ? ? ?self.acked = frame.method.delivery_tag
> ? ? ? ?else:
> ? ? ? ? ? ?self._callbacks.pop(frame.method.delivery_tag)(success)
> ? ? ? ? ? ?self.acked += 1
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From sophiewenxizhang at googlemail.com  Mon Nov 28 11:06:57 2011
From: sophiewenxizhang at googlemail.com (TZHA)
Date: Mon, 28 Nov 2011 03:06:57 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq-c (librabbizmq) works only
	partially.
In-Reply-To: <32877957.post@talk.nabble.com>
References: <32877957.post@talk.nabble.com>
Message-ID: <815f0925-c4e3-4e34-bbec-f2745a9c9c70@s6g2000vbc.googlegroups.com>

Sorry. It is duplicated after server network errors. Please close this
thread.

On 28 Nov., 11:54, TZHA <tianning.zh... at zanox.com> wrote:
> I am using rabbitmq-c under windows (VS 2010). The basic get features works
> just fine. However when I tested the "consumer" feature I encountered the
> following problem.
>
> 1. Starting application debugging from VS 2010 (even without any break
> points and in release configuration) everything looks ok (calling
> amqp_simple_rpc returns AMQP_RESPONSE_NORMAL)!
>
> 2. Starting the application without debuging I got an error in calling
> amqp_rpc_reply_t amqp_simple_rpc
>
> with amqp_response_type_enum reply_type = AMQP_RESPONSE_LIBRARY_EXCEPTION
> and library_error = ERROR_BAD_AMQP_DATA
>
> I guess there is some "DEBUG" coding in source. Can anyone tell we where I
> can make changes to solve this problem??
>
> I have downloaded rabbitmq-c-default from 21.09.2011 and rebuild the sources
> under windows. Rabbitmq servers have the version 2.4.1 and 2.6.1.
>
> I also tried the newest version from the server (dated 25.11, default and
> the version 7cecf64752fd) - there I got the buffer overrun error.
>
> Thanks in advance.
> --
> View this message in context:http://old.nabble.com/rabbitmq-c-%28librabbizmq%29-works-only-partial...
> Sent from the RabbitMQ mailing list archive at Nabble.com.
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From roey.berman at gmail.com  Mon Nov 28 11:08:34 2011
From: roey.berman at gmail.com (Roey Berman)
Date: Mon, 28 Nov 2011 13:08:34 +0200
Subject: [rabbitmq-discuss] publisher confirmations
In-Reply-To: <CABzX+qwFQ8MARZkkyt1h7+GrFY9p-YqGO4qNCbm_tXLAd+FTuA@mail.gmail.com>
References: <2f9ce68b-ce6a-4a67-b650-8ab433e2e502@n10g2000vbg.googlegroups.com>
	<CABzX+qwFQ8MARZkkyt1h7+GrFY9p-YqGO4qNCbm_tXLAd+FTuA@mail.gmail.com>
Message-ID: <CAK=jQfHedRCKjRRaTpkJyg7w80mFRxG-dQc=h3OaBrKqYZnrGw@mail.gmail.com>

Thanks for the quick reply.

At first I used the code from the example you referred me to but it doesn't
handle the "multiple" flag and NAcks from the server.

I know my code handles the "multiple" flag, but don't know about NAcks.
I don't really know how to test for nacks since I've never gotten them from
rabbitmq server.

Once I know my code handles all responses correctly I will create a pull
request for the pika example code.

On Mon, Nov 28, 2011 at 1:01 PM, Marek Majkowski <majek04 at gmail.com> wrote:

> Hi,
>
> I'm not sure if it works - but the pika example showing
> publisher confirms usage looks rather similar:
>
>
> https://github.com/pika/pika/blob/120fdea5913e7ed80536ff55634ab0f8f4554e79/examples/demo_send_confirmed.py
>
> Cheer,
>  Marek
>
> On Sun, Nov 27, 2011 at 15:20, bergundy <roey.berman at gmail.com> wrote:
> > Hi everyone,
> >
> > I couldn't find code for implementing publisher confirmations.
> >
> > I wrote this piece of code using pika 0.9.5 (python client).
> > Would like to get feedback on this, I hope I got it right ...
> >
> > ---
> > class ConfirmingProducer(object):
> >    def __init__(self, channel):
> >        self.delivery_tag = 1
> >        self.acked        = 0
> >        self._callbacks   = {}
> >        self.chan = channel
> >        self.chan.confirm_delivery(self.on_delivered)
> >
> >    def publish(self, message, callback, **kwargs):
> >        self._callbacks[self.delivery_tag] = callback
> >        self.delivery_tag += 1
> >        self.chan.basic_publish(message, **kwargs)
> >
> >    def on_delivered(self, frame):
> >        success = isinstance(frame.method, pika.spec.Basic.Ack)
> >
> >        if frame.method.multiple:
> >            for dtag in range(self.acked+1, frame.method.delivery_tag
> > +1):
> >                self._callbacks.pop(dtag)(success)
> >            self.acked = frame.method.delivery_tag
> >        else:
> >            self._callbacks.pop(frame.method.delivery_tag)(success)
> >            self.acked += 1
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-discuss at lists.rabbitmq.com
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/b40ae62e/attachment.htm>

From sophiewenxizhang at googlemail.com  Mon Nov 28 11:08:51 2011
From: sophiewenxizhang at googlemail.com (TZHA)
Date: Mon, 28 Nov 2011 03:08:51 -0800 (PST)
Subject: [rabbitmq-discuss] Problem with the example_consume from the
	c++ wrapper amqpccp
In-Reply-To: <332c7677-3f88-44d4-9cdf-e96f21e6041f@p2g2000vbj.googlegroups.com>
References: <ce551ba9-8b40-475e-aa1e-28b969168f7a@cc2g2000vbb.googlegroups.com>
	<yrv4cfwhcp409.fsf@dwragg.eng.vmware.com>
	<332c7677-3f88-44d4-9cdf-e96f21e6041f@p2g2000vbj.googlegroups.com>
Message-ID: <1c7e6488-b4f0-4bd9-b1fa-f2de58942315@u5g2000vbd.googlegroups.com>

It seems to be a problem in rabbitmq-c. Can I close this thread and
repose it with another subject?

On 25 Nov., 17:43, TZHA <sophiewenxizh... at googlemail.com> wrote:
> Hi,
>
> i am using amqpcpp.
>
> I modified the lines
> ? if (result <= 0) return;
> in AMQPQueue::sendConsumeCommand() to
> ? if (result < 0) return;
>
> The client example ?(consume) works now under VS 2010 debug - but it
> does not work when started stand alone.
>
> amqp_rpc_reply_t res = amqp_simple_rpc(*cnn, channelNum,
> AMQP_BASIC_CONSUME_METHOD, replies, &s);
>
> returns AMQP_RESPONSE_LIBRARY_EXCEPTION
>
> In debug modus (even without any breakpoints) it returns
> AMQP_RESPONSE_NORMAL.
>
> On 25 Nov., 17:21, David Wragg <da... at rabbitmq.com> wrote:
>
>
>
>
>
>
>
> > Hi,
>
> > TZHA <sophiewenxizh... at googlemail.com> writes:
> > > I am using the c++ wrapper for librabbitmq (C client) - with windows
> > > client and linux server. The example with get and different
> > > configurations is ok. ?The example_consume.cpp does work.
>
> > I think you mean that the example_consume.cpp does *not* work?
>
> > Could you point to the C++ wrapper you are using? ?There are at least
> > two out there.
>
> > > It seems to me that the consumer was registered at the server (I could
> > > see it the web admin for the rabbitmq server). ?However, the client
> > > didn't get any result from ?the queue.
>
> > If no-one on this list can help, maybe file an issue against the project
> > on github?
>
> > David
>
> > --
> > David Wragg
> > Staff Engineer, RabbitMQ
> > VMware, Inc.
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From roey.berman at gmail.com  Mon Nov 28 11:11:28 2011
From: roey.berman at gmail.com (Roey Berman)
Date: Mon, 28 Nov 2011 13:11:28 +0200
Subject: [rabbitmq-discuss] publisher confirmations
In-Reply-To: <CAK=jQfHedRCKjRRaTpkJyg7w80mFRxG-dQc=h3OaBrKqYZnrGw@mail.gmail.com>
References: <2f9ce68b-ce6a-4a67-b650-8ab433e2e502@n10g2000vbg.googlegroups.com>
	<CABzX+qwFQ8MARZkkyt1h7+GrFY9p-YqGO4qNCbm_tXLAd+FTuA@mail.gmail.com>
	<CAK=jQfHedRCKjRRaTpkJyg7w80mFRxG-dQc=h3OaBrKqYZnrGw@mail.gmail.com>
Message-ID: <CAK=jQfHR5TtR3yCCzRErRtZ7mNGJQbdpYP+T9LpBn8V5+T33UA@mail.gmail.com>

Oh one fix:
self.chan.basic_publish(message, **kwargs) -> self.chan.basic_publish(body
= message, **kwargs)

On Mon, Nov 28, 2011 at 1:08 PM, Roey Berman <roey.berman at gmail.com> wrote:

> Thanks for the quick reply.
>
> At first I used the code from the example you referred me to but it
> doesn't handle the "multiple" flag and NAcks from the server.
>
> I know my code handles the "multiple" flag, but don't know about NAcks.
> I don't really know how to test for nacks since I've never gotten them
> from rabbitmq server.
>
> Once I know my code handles all responses correctly I will create a pull
> request for the pika example code.
>
> On Mon, Nov 28, 2011 at 1:01 PM, Marek Majkowski <majek04 at gmail.com>wrote:
>
>> Hi,
>>
>> I'm not sure if it works - but the pika example showing
>> publisher confirms usage looks rather similar:
>>
>>
>> https://github.com/pika/pika/blob/120fdea5913e7ed80536ff55634ab0f8f4554e79/examples/demo_send_confirmed.py
>>
>> Cheer,
>>  Marek
>>
>> On Sun, Nov 27, 2011 at 15:20, bergundy <roey.berman at gmail.com> wrote:
>> > Hi everyone,
>> >
>> > I couldn't find code for implementing publisher confirmations.
>> >
>> > I wrote this piece of code using pika 0.9.5 (python client).
>> > Would like to get feedback on this, I hope I got it right ...
>> >
>> > ---
>> > class ConfirmingProducer(object):
>> >    def __init__(self, channel):
>> >        self.delivery_tag = 1
>> >        self.acked        = 0
>> >        self._callbacks   = {}
>> >        self.chan = channel
>> >        self.chan.confirm_delivery(self.on_delivered)
>> >
>> >    def publish(self, message, callback, **kwargs):
>> >        self._callbacks[self.delivery_tag] = callback
>> >        self.delivery_tag += 1
>> >        self.chan.basic_publish(message, **kwargs)
>> >
>> >    def on_delivered(self, frame):
>> >        success = isinstance(frame.method, pika.spec.Basic.Ack)
>> >
>> >        if frame.method.multiple:
>> >            for dtag in range(self.acked+1, frame.method.delivery_tag
>> > +1):
>> >                self._callbacks.pop(dtag)(success)
>> >            self.acked = frame.method.delivery_tag
>> >        else:
>> >            self._callbacks.pop(frame.method.delivery_tag)(success)
>> >            self.acked += 1
>> > _______________________________________________
>> > rabbitmq-discuss mailing list
>> > rabbitmq-discuss at lists.rabbitmq.com
>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>> >
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/a43adc57/attachment.htm>

From simon at rabbitmq.com  Mon Nov 28 11:21:39 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 28 Nov 2011 11:21:39 +0000
Subject: [rabbitmq-discuss] publisher confirmations
In-Reply-To: <CAK=jQfHedRCKjRRaTpkJyg7w80mFRxG-dQc=h3OaBrKqYZnrGw@mail.gmail.com>
References: <2f9ce68b-ce6a-4a67-b650-8ab433e2e502@n10g2000vbg.googlegroups.com>	<CABzX+qwFQ8MARZkkyt1h7+GrFY9p-YqGO4qNCbm_tXLAd+FTuA@mail.gmail.com>
	<CAK=jQfHedRCKjRRaTpkJyg7w80mFRxG-dQc=h3OaBrKqYZnrGw@mail.gmail.com>
Message-ID: <4ED36EC3.8000005@rabbitmq.com>

On 28/11/11 11:08, Roey Berman wrote:
> I know my code handles the "multiple" flag, but don't know about NAcks.
> I don't really know how to test for nacks since I've never gotten them
> from rabbitmq server.

Yeah, that's problematic. The only reason that a nack will ever get sent 
is if a queue process crashes. Unsurprisingly we go to some lengths to 
prevent this from happening...

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From majek04 at gmail.com  Mon Nov 28 11:26:14 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Mon, 28 Nov 2011 11:26:14 +0000
Subject: [rabbitmq-discuss] publisher confirmations
In-Reply-To: <CAK=jQfHR5TtR3yCCzRErRtZ7mNGJQbdpYP+T9LpBn8V5+T33UA@mail.gmail.com>
References: <2f9ce68b-ce6a-4a67-b650-8ab433e2e502@n10g2000vbg.googlegroups.com>
	<CABzX+qwFQ8MARZkkyt1h7+GrFY9p-YqGO4qNCbm_tXLAd+FTuA@mail.gmail.com>
	<CAK=jQfHedRCKjRRaTpkJyg7w80mFRxG-dQc=h3OaBrKqYZnrGw@mail.gmail.com>
	<CAK=jQfHR5TtR3yCCzRErRtZ7mNGJQbdpYP+T9LpBn8V5+T33UA@mail.gmail.com>
Message-ID: <CABzX+qz8-yKwhvhkD+=YbNUkBfecHShtQobD5VUaV1_4-NbWhQ@mail.gmail.com>

On Mon, Nov 28, 2011 at 11:11, Roey Berman <roey.berman at gmail.com> wrote:
> Oh one fix:
> self.chan.basic_publish(message, **kwargs) ->?self.chan.basic_publish(body =
> message, **kwargs)
>
> On Mon, Nov 28, 2011 at 1:08 PM, Roey Berman <roey.berman at gmail.com> wrote:
>>
>> Thanks for the quick reply.
>> At first I used the code from the example you referred me to but it
>> doesn't handle the "multiple" flag and NAcks from the server.
>> I know my code handles the "multiple" flag, but don't know about NAcks.
>> I don't really know how to test for nacks since I've never gotten them
>> from rabbitmq server.

http://www.rabbitmq.com/extensions.html#publishing

"In exceptional cases when the broker is unable to handle messages
successfully, instead of a basic.ack, the broker will send a
basic.nack. In this context, fields of the basic.nack have the same
meaning as the corresponding ones in basic.ack and the requeue field
should be ignored. By nack'ing one or more messages, the broker
indicates that it was unable to process the messages and refuses
responsibility for them; at that point, the client may choose to
re-publish the messages.

After a channel is put into confirm mode, all subsequently published
messages will be confirmed or nack'd once. No guarantees are made as
to how soon a message is confirmed. No message will be both confirmed
and nack'd."

That's all I know.


>> Once I know my code handles all responses correctly I will create a pull
>> request for the pika example code.

Good!

Marek


>> On Mon, Nov 28, 2011 at 1:01 PM, Marek Majkowski <majek04 at gmail.com>
>> wrote:
>>>
>>> Hi,
>>>
>>> I'm not sure if it works - but the pika example showing
>>> publisher confirms usage looks rather similar:
>>>
>>>
>>> https://github.com/pika/pika/blob/120fdea5913e7ed80536ff55634ab0f8f4554e79/examples/demo_send_confirmed.py
>>>
>>> Cheer,
>>> ?Marek
>>>
>>> On Sun, Nov 27, 2011 at 15:20, bergundy <roey.berman at gmail.com> wrote:
>>> > Hi everyone,
>>> >
>>> > I couldn't find code for implementing publisher confirmations.
>>> >
>>> > I wrote this piece of code using pika 0.9.5 (python client).
>>> > Would like to get feedback on this, I hope I got it right ...
>>> >
>>> > ---
>>> > class ConfirmingProducer(object):
>>> > ? ?def __init__(self, channel):
>>> > ? ? ? ?self.delivery_tag = 1
>>> > ? ? ? ?self.acked ? ? ? ?= 0
>>> > ? ? ? ?self._callbacks ? = {}
>>> > ? ? ? ?self.chan = channel
>>> > ? ? ? ?self.chan.confirm_delivery(self.on_delivered)
>>> >
>>> > ? ?def publish(self, message, callback, **kwargs):
>>> > ? ? ? ?self._callbacks[self.delivery_tag] = callback
>>> > ? ? ? ?self.delivery_tag += 1
>>> > ? ? ? ?self.chan.basic_publish(message, **kwargs)
>>> >
>>> > ? ?def on_delivered(self, frame):
>>> > ? ? ? ?success = isinstance(frame.method, pika.spec.Basic.Ack)
>>> >
>>> > ? ? ? ?if frame.method.multiple:
>>> > ? ? ? ? ? ?for dtag in range(self.acked+1, frame.method.delivery_tag
>>> > +1):
>>> > ? ? ? ? ? ? ? ?self._callbacks.pop(dtag)(success)
>>> > ? ? ? ? ? ?self.acked = frame.method.delivery_tag
>>> > ? ? ? ?else:
>>> > ? ? ? ? ? ?self._callbacks.pop(frame.method.delivery_tag)(success)
>>> > ? ? ? ? ? ?self.acked += 1
>>> > _______________________________________________
>>> > rabbitmq-discuss mailing list
>>> > rabbitmq-discuss at lists.rabbitmq.com
>>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>> >
>>
>
>

From christian.weyer.cw at gmail.com  Mon Nov 28 11:52:49 2011
From: christian.weyer.cw at gmail.com (Christian Weyer)
Date: Mon, 28 Nov 2011 03:52:49 -0800 (PST)
Subject: [rabbitmq-discuss] Issue running Management Plugin (on Windows
	7)
In-Reply-To: <4ED363CB.1020701@rabbitmq.com>
References: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>
	<4ED363CB.1020701@rabbitmq.com>
Message-ID: <cb05542c-c083-4574-9f60-203f1d84ab56@p16g2000yqd.googlegroups.com>

Ah! OK, if I do this I see 6 plugins. But still no open port 55672.
Thanks.


On Nov 28, 11:34?am, Matthias Radestock <matth... at rabbitmq.com> wrote:
> Christian,
>
> On 26/11/11 19:51, Christian Weyer wrote:
>
> > I cannot get the Management Plugin to work on my Windows 7 x64
> > installation.
> > After adding it with "rabbitmq-plugins enable rabbitmq_management" and
> > restarting the service I actually see an open port (with tcpview.exe).
> > But it is 5672, not 55672 as stated in the docs.
>
> 5672 is the AMQP port.
>
> Did you re-*install* (rather than just restart) the service after making
> changes to the plugin configuration? Seehttp://www.rabbitmq.com/plugins.html#windows-restart
>
> Regards,
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From roey.berman at gmail.com  Mon Nov 28 11:53:43 2011
From: roey.berman at gmail.com (Roey Berman)
Date: Mon, 28 Nov 2011 13:53:43 +0200
Subject: [rabbitmq-discuss] publisher confirmations
In-Reply-To: <CABzX+qz8-yKwhvhkD+=YbNUkBfecHShtQobD5VUaV1_4-NbWhQ@mail.gmail.com>
References: <2f9ce68b-ce6a-4a67-b650-8ab433e2e502@n10g2000vbg.googlegroups.com>
	<CABzX+qwFQ8MARZkkyt1h7+GrFY9p-YqGO4qNCbm_tXLAd+FTuA@mail.gmail.com>
	<CAK=jQfHedRCKjRRaTpkJyg7w80mFRxG-dQc=h3OaBrKqYZnrGw@mail.gmail.com>
	<CAK=jQfHR5TtR3yCCzRErRtZ7mNGJQbdpYP+T9LpBn8V5+T33UA@mail.gmail.com>
	<CABzX+qz8-yKwhvhkD+=YbNUkBfecHShtQobD5VUaV1_4-NbWhQ@mail.gmail.com>
Message-ID: <CAK=jQfGDBOPFt7d=c_+YtfFXtxiWBCxm_qbS7nXh27Zfgde+Vg@mail.gmail.com>

Thanks again for the quick response.

I also read http://www.rabbitmq.com/extensions.html#publishing before
posting this question.

But again my problem is with simulating server nacks so i can create a test
case for my code.

Do you have any idea how I can do that?

On Mon, Nov 28, 2011 at 1:26 PM, Marek Majkowski <majek04 at gmail.com> wrote:

> On Mon, Nov 28, 2011 at 11:11, Roey Berman <roey.berman at gmail.com> wrote:
> > Oh one fix:
> > self.chan.basic_publish(message, **kwargs)
> -> self.chan.basic_publish(body =
> > message, **kwargs)
> >
> > On Mon, Nov 28, 2011 at 1:08 PM, Roey Berman <roey.berman at gmail.com>
> wrote:
> >>
> >> Thanks for the quick reply.
> >> At first I used the code from the example you referred me to but it
> >> doesn't handle the "multiple" flag and NAcks from the server.
> >> I know my code handles the "multiple" flag, but don't know about NAcks.
> >> I don't really know how to test for nacks since I've never gotten them
> >> from rabbitmq server.
>
> http://www.rabbitmq.com/extensions.html#publishing
>
> "In exceptional cases when the broker is unable to handle messages
> successfully, instead of a basic.ack, the broker will send a
> basic.nack. In this context, fields of the basic.nack have the same
> meaning as the corresponding ones in basic.ack and the requeue field
> should be ignored. By nack'ing one or more messages, the broker
> indicates that it was unable to process the messages and refuses
> responsibility for them; at that point, the client may choose to
> re-publish the messages.
>
> After a channel is put into confirm mode, all subsequently published
> messages will be confirmed or nack'd once. No guarantees are made as
> to how soon a message is confirmed. No message will be both confirmed
> and nack'd."
>
> That's all I know.
>
>
> >> Once I know my code handles all responses correctly I will create a pull
> >> request for the pika example code.
>
> Good!
>
> Marek
>
>
> >> On Mon, Nov 28, 2011 at 1:01 PM, Marek Majkowski <majek04 at gmail.com>
> >> wrote:
> >>>
> >>> Hi,
> >>>
> >>> I'm not sure if it works - but the pika example showing
> >>> publisher confirms usage looks rather similar:
> >>>
> >>>
> >>>
> https://github.com/pika/pika/blob/120fdea5913e7ed80536ff55634ab0f8f4554e79/examples/demo_send_confirmed.py
> >>>
> >>> Cheer,
> >>>  Marek
> >>>
> >>> On Sun, Nov 27, 2011 at 15:20, bergundy <roey.berman at gmail.com> wrote:
> >>> > Hi everyone,
> >>> >
> >>> > I couldn't find code for implementing publisher confirmations.
> >>> >
> >>> > I wrote this piece of code using pika 0.9.5 (python client).
> >>> > Would like to get feedback on this, I hope I got it right ...
> >>> >
> >>> > ---
> >>> > class ConfirmingProducer(object):
> >>> >    def __init__(self, channel):
> >>> >        self.delivery_tag = 1
> >>> >        self.acked        = 0
> >>> >        self._callbacks   = {}
> >>> >        self.chan = channel
> >>> >        self.chan.confirm_delivery(self.on_delivered)
> >>> >
> >>> >    def publish(self, message, callback, **kwargs):
> >>> >        self._callbacks[self.delivery_tag] = callback
> >>> >        self.delivery_tag += 1
> >>> >        self.chan.basic_publish(message, **kwargs)
> >>> >
> >>> >    def on_delivered(self, frame):
> >>> >        success = isinstance(frame.method, pika.spec.Basic.Ack)
> >>> >
> >>> >        if frame.method.multiple:
> >>> >            for dtag in range(self.acked+1, frame.method.delivery_tag
> >>> > +1):
> >>> >                self._callbacks.pop(dtag)(success)
> >>> >            self.acked = frame.method.delivery_tag
> >>> >        else:
> >>> >            self._callbacks.pop(frame.method.delivery_tag)(success)
> >>> >            self.acked += 1
> >>> > _______________________________________________
> >>> > rabbitmq-discuss mailing list
> >>> > rabbitmq-discuss at lists.rabbitmq.com
> >>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> >>> >
> >>
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/8aa0321b/attachment.htm>

From matthias at rabbitmq.com  Mon Nov 28 11:59:33 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 28 Nov 2011 11:59:33 +0000
Subject: [rabbitmq-discuss] Issue running Management Plugin (on Windows
 7)
In-Reply-To: <cb05542c-c083-4574-9f60-203f1d84ab56@p16g2000yqd.googlegroups.com>
References: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>	<4ED363CB.1020701@rabbitmq.com>
	<cb05542c-c083-4574-9f60-203f1d84ab56@p16g2000yqd.googlegroups.com>
Message-ID: <4ED377A5.4040607@rabbitmq.com>

Christian,

On 28/11/11 11:52, Christian Weyer wrote:
> I see 6 plugins. But still no open port 55672.

Check the rabbit log file. It should have an entry stating "Management 
plugin started. Port: ..., path: ...".

Matthias.

From christian.weyer.cw at gmail.com  Mon Nov 28 12:09:08 2011
From: christian.weyer.cw at gmail.com (Christian Weyer)
Date: Mon, 28 Nov 2011 04:09:08 -0800 (PST)
Subject: [rabbitmq-discuss] Issue running Management Plugin (on Windows
	7)
In-Reply-To: <4ED377A5.4040607@rabbitmq.com>
References: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>
	<4ED363CB.1020701@rabbitmq.com>
	<cb05542c-c083-4574-9f60-203f1d84ab56@p16g2000yqd.googlegroups.com>
	<4ED377A5.4040607@rabbitmq.com>
Message-ID: <1eacaa1b-2081-4b83-b603-6e972253a7d9@m10g2000vbc.googlegroups.com>

I should have warned you: absolute newbie ahead ;)
Where exactly is this log file?

Thanks again,


On Nov 28, 12:59?pm, Matthias Radestock <matth... at rabbitmq.com> wrote:
> Christian,
>
> On 28/11/11 11:52, Christian Weyer wrote:
>
> > I see 6 plugins. But still no open port 55672.
>
> Check the rabbit log file. It should have an entry stating "Management
> plugin started. Port: ..., path: ...".
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From matthias at rabbitmq.com  Mon Nov 28 12:17:48 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 28 Nov 2011 12:17:48 +0000
Subject: [rabbitmq-discuss] Issue running Management Plugin (on Windows
 7)
In-Reply-To: <1eacaa1b-2081-4b83-b603-6e972253a7d9@m10g2000vbc.googlegroups.com>
References: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>	<4ED363CB.1020701@rabbitmq.com>	<cb05542c-c083-4574-9f60-203f1d84ab56@p16g2000yqd.googlegroups.com>	<4ED377A5.4040607@rabbitmq.com>
	<1eacaa1b-2081-4b83-b603-6e972253a7d9@m10g2000vbc.googlegroups.com>
Message-ID: <4ED37BEC.9090209@rabbitmq.com>

On 28/11/11 12:09, Christian Weyer wrote:
> I should have warned you: absolute newbie ahead ;)
> Where exactly is this log file?

You presumably did find the startup log, since that's where the server 
reports which plug-ins got activated, right? In the same log file it 
will also tell you where the main server log is located. iirc the 
default location is %APPDATA%\RabbitMQ\log\<nodename>.log

Matthias.

From iain.hull at workday.com  Mon Nov 28 12:26:13 2011
From: iain.hull at workday.com (Iain Hull)
Date: Mon, 28 Nov 2011 06:26:13 -0600
Subject: [rabbitmq-discuss] Socket leak in java client library
Message-ID: <925DDDE9D69E7143B3252E2D4680A36704CED46C@34093-C5-EVS1.exchange.rackspace.com>

Hi,

 

I have discovered a socket leak in the java client library when you try
to connect to a non-existent host.  I discovered this in version 2.5.1
but it also affects all versions after this.  

 

The problem occurs when
com.rabbitmq.client.ConnectionFactory.newConnection() is called with a
bad hostname. In this case
com.rabbitmq.client.ConnectionFactory.createFrameHandler(Address)
creates a socket that is never returned or closed because of an
IOException.

 

I have attached a simple java file, SocketLeak.java, file that
reproduces the problem, simply run it and monitor the number of open
files (or handles on windows).

I have applied a fix for this and tested it on version 2.5.1 and to the
latest from the default branch in the hg repo.  The patch is attached,
SocketLeakFix.diff.  All the client tests pass, however there are
currently 3 functional tests failing for me on the default branch both
with and without my changes.

 

There appears to be a similar leak in
com.rabbitmq.client.ConnectionFactory.newConnection(Address[]) where
connections are created and never returned or closed when an IOException
occurs, however I have not been able to reproduce a leak in this code,
but have attached a speculative fix anyway.

 

I understand that you do not have a public bug tracker that I can use to
monitor this issue, but can you give me a bug number to track?

 

Regards,

Iain.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/46ef2964/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocketLeak.java
Type: application/octet-stream
Size: 1107 bytes
Desc: SocketLeak.java
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/46ef2964/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocketLeakFix.diff
Type: application/octet-stream
Size: 1308 bytes
Desc: SocketLeakFix.diff
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/46ef2964/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: AMQConnectionLeakSpeculativeFix.diff
Type: application/octet-stream
Size: 1624 bytes
Desc: AMQConnectionLeakSpeculativeFix.diff
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/46ef2964/attachment-0002.obj>

From david at rabbitmq.com  Mon Nov 28 12:28:11 2011
From: david at rabbitmq.com (David Wragg)
Date: Mon, 28 Nov 2011 12:28:11 +0000
Subject: [rabbitmq-discuss] rabbitmq-c (librabbizmq) works only
	partially.
In-Reply-To: <loom.20111128T112008-575@post.gmane.org> (John's message of
	"Mon, 28 Nov 2011 10:38:14 +0000 (UTC)")
References: <loom.20111128T112008-575@post.gmane.org>
Message-ID: <yrv4cobvwfn38.fsf@dwragg.eng.vmware.com>

Hi,

John  <tianning.zhang at zanox.com> writes:
> I am using rabbitmq-c under windows (VS 2010). The basic get features
> works just fine. However when I tested the "consumer" feature I
> encountered the following problem.

What approach to building rabbitmq-c under windows are you using?  Are
you running the amqp_consumer example program, or your own consumer
code?

If you are developing under Visual Studio, I recommend using the
cmake-based build, as that allows you to build librabbitmq and the
examples within VS.

> 1. Starting application debugging from VS 2010 (even without any break points
> and in release configuration) everything looks ok (calling amqp_simple_rpc
> returns AMQP_RESPONSE_NORMAL)! 
>
> 2. Starting the application without debuging I got an error in calling 
> amqp_rpc_reply_t amqp_simple_rpc
>
> with amqp_response_type_enum reply_type = AMQP_RESPONSE_LIBRARY_EXCEPTION
> and library_error = ERROR_BAD_AMQP_DATA
>
> I guess there is some "DEBUG" coding in source. Can anyone tell we
> where I can make changes to solve this problem??

There's nothing in the rabbitmq-c codebase ot make it behave differently
in debug builds.

> I have downloaded rabbitmq-c-default from 21.09.2011 and rebuild the
> sources under windows. Rabbitmq servers have the version 2.4.1 and
> 2.6.1.
>
> I also tried the newest version from the server (dated 25.11, default
> and the version 7cecf64752fd) - there I got the buffer overrun error.

There have not been significant changes to the rabbitmq-c code between
those two versions.  I recommend that you use the latest version,
because it has cmake build support.  Could you say more about the buffer
overrun you are seeing?

David

-- 
David Wragg
Staff Engineer, RabbitMQ
VMware, Inc.

From mh at foldr3.com  Mon Nov 28 12:43:48 2011
From: mh at foldr3.com (Muharem Hrnjadovic)
Date: Mon, 28 Nov 2011 13:43:48 +0100
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <4ECE6F72.7020502@rabbitmq.com>
References: <4ECCCB33.3040803@foldr3.com>
	<4ECCCE5A.3020909@rabbitmq.com>	<4ECD0BCB.3090304@foldr3.com>
	<4ECD2216.40300@rabbitmq.com> <4ECE53E5.5000002@foldr3.com>
	<4ECE6F72.7020502@rabbitmq.com>
Message-ID: <4ED38204.802@foldr3.com>

On 11/24/2011 05:23 PM, Simon MacMullen wrote:
> On 24/11/11 14:25, Muharem Hrnjadovic wrote:
>> On 11/23/2011 05:40 PM, Simon MacMullen wrote:
>>> On 23/11/11 15:05, Muharem Hrnjadovic wrote:
>> [..]
>>> 3b) Can you run:
>>>
>>> su rabbitmq -s /bin/sh -c 'erl -remsh rabbit@`hostname -s` -sname foo -eval "io:format(\"~p\", [lists:sublist(lists:reverse(lists:sort([{process_info(Pid, memory), Pid, process_info(Pid)} || Pid<- processes()])), 30)]), halt()."'
>> Hello Simon,
>>
>> I "tested" your command above, please see: http://paste.ubuntu.com/748229/
>> There are a number of "File operation error:.." entries in there. Is
>> that something you expected to see?
> 
> They should be harmless - I expect you ran that from a cwd that the rabbitmq user could not read. You could "cd /var/lib/rabbitmq" first to shut it up.
> 
> However, I realise now that the above command does not work: -eval and -remsh do not work together so it's reporting on the Erlang processes in the shell, not RabbitMQ. Please try:
> 
> su rabbitmq -s /bin/sh -c "erl -sname foo -eval \"rpc:call(rabbit@`hostname -s`, erlang, apply, [fun() -> io:format(\\\"~p\\\", [lists:sublist(lists:reverse(lists:sort([{process_info(Pid, memory), Pid, process_info(Pid)} || Pid <- processes()])), 30)]) end, []]), halt().\""
ugh!

> ...instead, and try to ignore the fact that it looks like the result of an obfuscation contest.
OK, did that, please the attachment on
    https://bugs.launchpad.net/openquake/+bug/894024/comments/4

Sorry, it took a while to provide that data.

Best regards/Mit freundlichen Gr??en

-- 
Muharem Hrnjadovic <mh at foldr3.com>
Public key id   : B2BBFCFC
Key fingerprint : A5A3 CC67 2B87 D641 103F  5602 219F 6B60 B2BB FCFC

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 900 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/8223e7fb/attachment.pgp>

From christian.weyer.cw at gmail.com  Mon Nov 28 12:56:44 2011
From: christian.weyer.cw at gmail.com (Christian Weyer)
Date: Mon, 28 Nov 2011 04:56:44 -0800 (PST)
Subject: [rabbitmq-discuss] Issue running Management Plugin (on Windows
	7)
In-Reply-To: <4ED37BEC.9090209@rabbitmq.com>
References: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>
	<4ED363CB.1020701@rabbitmq.com>
	<cb05542c-c083-4574-9f60-203f1d84ab56@p16g2000yqd.googlegroups.com>
	<4ED377A5.4040607@rabbitmq.com>
	<1eacaa1b-2081-4b83-b603-6e972253a7d9@m10g2000vbc.googlegroups.com>
	<4ED37BEC.9090209@rabbitmq.com>
Message-ID: <201418d1-b2bc-472a-99c1-e0da1948879b@h3g2000yqa.googlegroups.com>

Thx again Matthias.

This is what is in the log file:

=WARNING REPORT==== 28-Nov-2011::12:46:37 ===
Mnesia(rabbit at RENOVATOR): ** WARNING ** Mnesia is overloaded:
{dump_log,
 
time_threshold}

=WARNING REPORT==== 28-Nov-2011::12:46:38 ===
Mnesia(rabbit at RENOVATOR): ** WARNING ** Mnesia is overloaded:
{dump_log,
 
time_threshold}

=WARNING REPORT==== 28-Nov-2011::12:46:38 ===
Mnesia(rabbit at RENOVATOR): ** WARNING ** Mnesia is overloaded:
{dump_log,
 
time_threshold}

=WARNING REPORT==== 28-Nov-2011::13:44:37 ===
Mnesia(rabbit at RENOVATOR): ** WARNING ** Mnesia is overloaded:
{dump_log,
 
time_threshold}

=WARNING REPORT==== 28-Nov-2011::13:44:37 ===
Mnesia(rabbit at RENOVATOR): ** WARNING ** Mnesia is overloaded:
{dump_log,
 
time_threshold}


On Nov 28, 1:17?pm, Matthias Radestock <matth... at rabbitmq.com> wrote:
> On 28/11/11 12:09, Christian Weyer wrote:
>
> > I should have warned you: absolute newbie ahead ;)
> > Where exactly is this log file?
>
> You presumably did find the startup log, since that's where the server
> reports which plug-ins got activated, right? In the same log file it
> will also tell you where the main server log is located. iirc the
> default location is %APPDATA%\RabbitMQ\log\<nodename>.log
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From matthias at rabbitmq.com  Mon Nov 28 13:00:56 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 28 Nov 2011 13:00:56 +0000
Subject: [rabbitmq-discuss] Issue running Management Plugin (on Windows
 7)
In-Reply-To: <201418d1-b2bc-472a-99c1-e0da1948879b@h3g2000yqa.googlegroups.com>
References: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>	<4ED363CB.1020701@rabbitmq.com>	<cb05542c-c083-4574-9f60-203f1d84ab56@p16g2000yqd.googlegroups.com>	<4ED377A5.4040607@rabbitmq.com>	<1eacaa1b-2081-4b83-b603-6e972253a7d9@m10g2000vbc.googlegroups.com>	<4ED37BEC.9090209@rabbitmq.com>
	<201418d1-b2bc-472a-99c1-e0da1948879b@h3g2000yqa.googlegroups.com>
Message-ID: <4ED38608.5000805@rabbitmq.com>

Christian,

On 28/11/11 12:56, Christian Weyer wrote:
> Thx again Matthias.
>
> This is what is in the log file:
>
> =WARNING REPORT==== 28-Nov-2011::12:46:37 ===
> Mnesia(rabbit at RENOVATOR): ** WARNING ** Mnesia is overloaded:
> {dump_log, time_threshold}
> [etc]

Is that all? There should be a few other log messages. Perhaps you could 
post the complete log file.


Regards,

Matthias.

From christian.weyer.cw at gmail.com  Mon Nov 28 13:11:32 2011
From: christian.weyer.cw at gmail.com (Christian Weyer)
Date: Mon, 28 Nov 2011 05:11:32 -0800 (PST)
Subject: [rabbitmq-discuss] Issue running Management Plugin (on Windows
	7)
In-Reply-To: <4ED38608.5000805@rabbitmq.com>
References: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>
	<4ED363CB.1020701@rabbitmq.com>
	<cb05542c-c083-4574-9f60-203f1d84ab56@p16g2000yqd.googlegroups.com>
	<4ED377A5.4040607@rabbitmq.com>
	<1eacaa1b-2081-4b83-b603-6e972253a7d9@m10g2000vbc.googlegroups.com>
	<4ED37BEC.9090209@rabbitmq.com>
	<201418d1-b2bc-472a-99c1-e0da1948879b@h3g2000yqa.googlegroups.com>
	<4ED38608.5000805@rabbitmq.com>
Message-ID: <43b60e59-38db-42b6-90f7-770c03634267@o9g2000vbc.googlegroups.com>

Hallo :)

I did a fresh uninstall/install. And this is the entire log file
contents:


=INFO REPORT==== 28-Nov-2011::14:10:17 ===
Limiting to approx 924 file handles (829 sockets)

=INFO REPORT==== 28-Nov-2011::14:10:17 ===
Memory limit set to 819MB of 8051MB total.

=INFO REPORT==== 28-Nov-2011::14:10:17 ===
Management plugin upgraded statistics to fine.

=INFO REPORT==== 28-Nov-2011::14:10:17 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 28-Nov-2011::14:10:17 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide
index

=INFO REPORT==== 28-Nov-2011::14:10:17 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 28-Nov-2011::14:10:17 ===
started TCP Listener on 0.0.0.0:5672

=INFO REPORT==== 28-Nov-2011::14:10:17 ===
Management agent started.

=INFO REPORT==== 28-Nov-2011::14:10:17 ===
Management plugin started. Port: 55672, path: /

=INFO REPORT==== 28-Nov-2011::14:10:17 ===
Statistics database started.


Thanks.


On Nov 28, 2:00?pm, Matthias Radestock <matth... at rabbitmq.com> wrote:
> Christian,
>
> On 28/11/11 12:56, Christian Weyer wrote:
>
> > Thx again Matthias.
>
> > This is what is in the log file:
>
> > =WARNING REPORT==== 28-Nov-2011::12:46:37 ===
> > Mnesia(rabbit at RENOVATOR): ** WARNING ** Mnesia is overloaded:
> > {dump_log, time_threshold}
> > [etc]
>
> Is that all? There should be a few other log messages. Perhaps you could
> post the complete log file.
>
> Regards,
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From christian.weyer.cw at gmail.com  Mon Nov 28 13:13:53 2011
From: christian.weyer.cw at gmail.com (Christian Weyer)
Date: Mon, 28 Nov 2011 05:13:53 -0800 (PST)
Subject: [rabbitmq-discuss] Issue running Management Plugin (on Windows
	7)
In-Reply-To: <43b60e59-38db-42b6-90f7-770c03634267@o9g2000vbc.googlegroups.com>
References: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>
	<4ED363CB.1020701@rabbitmq.com>
	<cb05542c-c083-4574-9f60-203f1d84ab56@p16g2000yqd.googlegroups.com>
	<4ED377A5.4040607@rabbitmq.com>
	<1eacaa1b-2081-4b83-b603-6e972253a7d9@m10g2000vbc.googlegroups.com>
	<4ED37BEC.9090209@rabbitmq.com>
	<201418d1-b2bc-472a-99c1-e0da1948879b@h3g2000yqa.googlegroups.com>
	<4ED38608.5000805@rabbitmq.com>
	<43b60e59-38db-42b6-90f7-770c03634267@o9g2000vbc.googlegroups.com>
Message-ID: <bccb91dd-d617-4671-a9e6-50e24bee3a7c@o9g2000vbc.googlegroups.com>

... and now it seems to work and the port is available ...
Very strange.


On Nov 28, 2:11?pm, Christian Weyer <christian.weyer... at gmail.com>
wrote:
> Hallo :)
>
> I did a fresh uninstall/install. And this is the entire log file
> contents:
>
> =INFO REPORT==== 28-Nov-2011::14:10:17 ===
> Limiting to approx 924 file handles (829 sockets)
>
> =INFO REPORT==== 28-Nov-2011::14:10:17 ===
> Memory limit set to 819MB of 8051MB total.
>
> =INFO REPORT==== 28-Nov-2011::14:10:17 ===
> Management plugin upgraded statistics to fine.
>
> =INFO REPORT==== 28-Nov-2011::14:10:17 ===
> msg_store_transient: using rabbit_msg_store_ets_index to provide index
>
> =INFO REPORT==== 28-Nov-2011::14:10:17 ===
> msg_store_persistent: using rabbit_msg_store_ets_index to provide
> index
>
> =INFO REPORT==== 28-Nov-2011::14:10:17 ===
> started TCP Listener on [::]:5672
>
> =INFO REPORT==== 28-Nov-2011::14:10:17 ===
> started TCP Listener on 0.0.0.0:5672
>
> =INFO REPORT==== 28-Nov-2011::14:10:17 ===
> Management agent started.
>
> =INFO REPORT==== 28-Nov-2011::14:10:17 ===
> Management plugin started. Port: 55672, path: /
>
> =INFO REPORT==== 28-Nov-2011::14:10:17 ===
> Statistics database started.
>
> Thanks.
>
> On Nov 28, 2:00?pm, Matthias Radestock <matth... at rabbitmq.com> wrote:
>
>
>
>
>
>
>
> > Christian,
>
> > On 28/11/11 12:56, Christian Weyer wrote:
>
> > > Thx again Matthias.
>
> > > This is what is in the log file:
>
> > > =WARNING REPORT==== 28-Nov-2011::12:46:37 ===
> > > Mnesia(rabbit at RENOVATOR): ** WARNING ** Mnesia is overloaded:
> > > {dump_log, time_threshold}
> > > [etc]
>
> > Is that all? There should be a few other log messages. Perhaps you could
> > post the complete log file.
>
> > Regards,
>
> > Matthias.
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From sophiewenxizhang at googlemail.com  Mon Nov 28 13:13:57 2011
From: sophiewenxizhang at googlemail.com (TZHA)
Date: Mon, 28 Nov 2011 05:13:57 -0800 (PST)
Subject: [rabbitmq-discuss] rabbitmq-c (librabbizmq) works only
	partially.
In-Reply-To: <yrv4cobvwfn38.fsf@dwragg.eng.vmware.com>
References: <loom.20111128T112008-575@post.gmane.org>
	<yrv4cobvwfn38.fsf@dwragg.eng.vmware.com>
Message-ID: <abedf3db-60b0-4369-9dce-676629672d02@r28g2000yqj.googlegroups.com>

Hi David,

thanks for the reply.

The error I got with the latest version of rabbitmq-c was:

"A buffer overrun has occurred in z_rabbitmq_client_consumer.exe which
has corrupted the program's internal state. Press Break to debug the
program or Continue to terminate the program.

For more details please see Help topic 'How to debug Buffer Overrun
Issues'.

Beaks point went to "#if defined (_CRTBLD) && !defined (_SYSCRT)
    DebuggerWasPresent = IsDebuggerPresent();
    _CRT_DEBUGGER_HOOK(_CRT_DEBUGGER_GSFAILURE);
#endif  /* defined (_CRTBLD) && !defined (_SYSCRT) */" in gs_report.c
from VS 2010.

I started VS 2010 debugging on a consumer project (c++) which uses the
rabbitmq-c c api.

I guess I finally found out at least the reason for my previous
error.  I used a c++ wrapper (amqpcpp  - modified) which calls
amqp_simple_rpc to implement the consumer, which then caused the error
(but runs correctly with DEBUG).

I modified the code to use amqp_basic_consume (following the
consumer.c), the c++ consumer  application works now.

However, I still have the buffer overrun problem with the latest
version. I used MinGW to build the package.  Do you whether there is a
guide/readme for cmake build?





On 28 Nov., 13:28, David Wragg <da... at rabbitmq.com> wrote:
> Hi,
>
> John ?<tianning.zh... at zanox.com> writes:
> > I am using rabbitmq-c under windows (VS 2010). The basic get features
> > works just fine. However when I tested the "consumer" feature I
> > encountered the following problem.
>
> What approach to building rabbitmq-c under windows are you using? ?Are
> you running the amqp_consumer example program, or your own consumer
> code?
>
> If you are developing under Visual Studio, I recommend using the
> cmake-based build, as that allows you to build librabbitmq and the
> examples within VS.
>
> > 1. Starting application debugging from VS 2010 (even without any break points
> > and in release configuration) everything looks ok (calling amqp_simple_rpc
> > returns AMQP_RESPONSE_NORMAL)!
>
> > 2. Starting the application without debuging I got an error in calling
> > amqp_rpc_reply_t amqp_simple_rpc
>
> > with amqp_response_type_enum reply_type = AMQP_RESPONSE_LIBRARY_EXCEPTION
> > and library_error = ERROR_BAD_AMQP_DATA
>
> > I guess there is some "DEBUG" coding in source. Can anyone tell we
> > where I can make changes to solve this problem??
>
> There's nothing in the rabbitmq-c codebase ot make it behave differently
> in debug builds.
>
> > I have downloaded rabbitmq-c-default from 21.09.2011 and rebuild the
> > sources under windows. Rabbitmq servers have the version 2.4.1 and
> > 2.6.1.
>
> > I also tried the newest version from the server (dated 25.11, default
> > and the version 7cecf64752fd) - there I got the buffer overrun error.
>
> There have not been significant changes to the rabbitmq-c code between
> those two versions. ?I recommend that you use the latest version,
> because it has cmake build support. ?Could you say more about the buffer
> overrun you are seeing?
>
> David
>
> --
> David Wragg
> Staff Engineer, RabbitMQ
> VMware, Inc.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From matthias at rabbitmq.com  Mon Nov 28 13:15:39 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 28 Nov 2011 13:15:39 +0000
Subject: [rabbitmq-discuss] Issue running Management Plugin (on Windows
 7)
In-Reply-To: <bccb91dd-d617-4671-a9e6-50e24bee3a7c@o9g2000vbc.googlegroups.com>
References: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>	<4ED363CB.1020701@rabbitmq.com>	<cb05542c-c083-4574-9f60-203f1d84ab56@p16g2000yqd.googlegroups.com>	<4ED377A5.4040607@rabbitmq.com>	<1eacaa1b-2081-4b83-b603-6e972253a7d9@m10g2000vbc.googlegroups.com>	<4ED37BEC.9090209@rabbitmq.com>	<201418d1-b2bc-472a-99c1-e0da1948879b@h3g2000yqa.googlegroups.com>	<4ED38608.5000805@rabbitmq.com>	<43b60e59-38db-42b6-90f7-770c03634267@o9g2000vbc.googlegroups.com>
	<bccb91dd-d617-4671-a9e6-50e24bee3a7c@o9g2000vbc.googlegroups.com>
Message-ID: <4ED3897B.2000300@rabbitmq.com>

On 28/11/11 13:13, Christian Weyer wrote:
> ... and now it seems to work and the port is available ...

and indeed that's what it says in the log file...

>> =INFO REPORT==== 28-Nov-2011::14:10:17 ===
>> Management plugin started. Port: 55672, path: /

No idea what happened before.

Matthias.

From christian.weyer.cw at gmail.com  Mon Nov 28 13:19:33 2011
From: christian.weyer.cw at gmail.com (Christian Weyer)
Date: Mon, 28 Nov 2011 05:19:33 -0800 (PST)
Subject: [rabbitmq-discuss] Issue running Management Plugin (on Windows
	7)
In-Reply-To: <4ED3897B.2000300@rabbitmq.com>
References: <09b16ed9-1f37-4863-b617-61050af410b8@g21g2000yqc.googlegroups.com>
	<4ED363CB.1020701@rabbitmq.com>
	<cb05542c-c083-4574-9f60-203f1d84ab56@p16g2000yqd.googlegroups.com>
	<4ED377A5.4040607@rabbitmq.com>
	<1eacaa1b-2081-4b83-b603-6e972253a7d9@m10g2000vbc.googlegroups.com>
	<4ED37BEC.9090209@rabbitmq.com>
	<201418d1-b2bc-472a-99c1-e0da1948879b@h3g2000yqa.googlegroups.com>
	<4ED38608.5000805@rabbitmq.com>
	<43b60e59-38db-42b6-90f7-770c03634267@o9g2000vbc.googlegroups.com>
	<bccb91dd-d617-4671-a9e6-50e24bee3a7c@o9g2000vbc.googlegroups.com>
	<4ED3897B.2000300@rabbitmq.com>
Message-ID: <bf07ed3d-83ee-418d-9b9e-077e94bcaee7@e2g2000vbb.googlegroups.com>

Thanks again a lot for your help.


On Nov 28, 2:15?pm, Matthias Radestock <matth... at rabbitmq.com> wrote:
> On 28/11/11 13:13, Christian Weyer wrote:
>
> > ... and now it seems to work and the port is available ...
>
> and indeed that's what it says in the log file...
>
> >> =INFO REPORT==== 28-Nov-2011::14:10:17 ===
> >> Management plugin started. Port: 55672, path: /
>
> No idea what happened before.
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From david at rabbitmq.com  Mon Nov 28 14:33:54 2011
From: david at rabbitmq.com (David Wragg)
Date: Mon, 28 Nov 2011 14:33:54 +0000
Subject: [rabbitmq-discuss] rabbitmq-c (librabbizmq) works only
	partially.
In-Reply-To: <abedf3db-60b0-4369-9dce-676629672d02@r28g2000yqj.googlegroups.com>
	(TZHA's message of "Mon, 28 Nov 2011 05:13:57 -0800 (PST)")
References: <loom.20111128T112008-575@post.gmane.org>
	<yrv4cobvwfn38.fsf@dwragg.eng.vmware.com>
	<abedf3db-60b0-4369-9dce-676629672d02@r28g2000yqj.googlegroups.com>
Message-ID: <yrv4ck46kfh9p.fsf@dwragg.eng.vmware.com>

TZHA <sophiewenxizhang at googlemail.com> writes:
> The error I got with the latest version of rabbitmq-c was:
>
> "A buffer overrun has occurred in z_rabbitmq_client_consumer.exe which
> has corrupted the program's internal state. Press Break to debug the
> program or Continue to terminate the program.

This is because you are trying to use a mingw build of librabbitmq from
Visual Studio.  This doesn't work because VS and gcc disagree about x86
calling conventions.  As a result, the program crashes is a way that VS
diagnoses as a buffer overrun.

> I started VS 2010 debugging on a consumer project (c++) which uses the
> rabbitmq-c c api.
>
> I guess I finally found out at least the reason for my previous
> error.  I used a c++ wrapper (amqpcpp  - modified) which calls
> amqp_simple_rpc to implement the consumer, which then caused the error
> (but runs correctly with DEBUG).
>
> I modified the code to use amqp_basic_consume (following the
> consumer.c), the c++ consumer  application works now.
>
> However, I still have the buffer overrun problem with the latest
> version. I used MinGW to build the package.  Do you whether there is a
> guide/readme for cmake build?

There are some brief instructions in the rabbitmq-c README.  In more
detail:

Install cmake (from <http://cmake.org/>).  Then open up a command
prompt, create a build directory, and from there run cmake with the path
to the rabbitmq-c source directory:

Z:\>cd tmp

Z:\tmp>mkdir rabbitmq-c-build

Z:\tmp>cd rabbitmq-c-build

Z:\tmp\rabbitmq-c-build>cmake ..\rabbitmq-c
-- Building for: Visual Studio 10
-- Check for working C compiler using: Visual Studio 10
-- Check for working C compiler using: Visual Studio 10 -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Found PythonInterp: C:/Python27/python.exe (found version "2.7")
-- Using amqp_codegen.py in Z:/tmp/rabbitmq-codegen
-- Configuring done
-- Generating done
-- Build files have been written to: Z:/tmp/rabbitmq-c-build

Then open up the rabbitmq-c.sln file in VS, and build.

-- 
David Wragg
Staff Engineer, RabbitMQ
VMware, Inc.

From james.r.carr at gmail.com  Mon Nov 28 14:41:13 2011
From: james.r.carr at gmail.com (James Carr)
Date: Mon, 28 Nov 2011 08:41:13 -0600
Subject: [rabbitmq-discuss] Viewing what applications are connected
Message-ID: <CAJreXKAsi3A2Dcp4VC-U=eBs_scTn2YfBXK93N5bRGBPXj_+NA@mail.gmail.com>

Hi All,

At work the setup we've put in place is to create a new
username/password per application so that it's easy to see what apps
have what connections from the management console. Although this works
great it does have the slight management overhead of having to create
a username/password for each app.

Are there any other good ways of accomplishing the identification of
publishing and consuming applications other than this?


Thanks,
James

From danbarua at gmail.com  Mon Nov 28 15:12:39 2011
From: danbarua at gmail.com (Dan B)
Date: Mon, 28 Nov 2011 07:12:39 -0800 (PST)
Subject: [rabbitmq-discuss] Viewing what applications are connected
In-Reply-To: <CAJreXKAsi3A2Dcp4VC-U=eBs_scTn2YfBXK93N5bRGBPXj_+NA@mail.gmail.com>
References: <CAJreXKAsi3A2Dcp4VC-U=eBs_scTn2YfBXK93N5bRGBPXj_+NA@mail.gmail.com>
Message-ID: <29873648.543.1322493159937.JavaMail.geo-discussion-forums@yqoo7>

You could use the management plugin's REST API to automate provisioning of 
users and passwords if you're not already?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/dcf72431/attachment.htm>

From iain.hull at workday.com  Mon Nov 28 15:27:42 2011
From: iain.hull at workday.com (Iain Hull)
Date: Mon, 28 Nov 2011 09:27:42 -0600
Subject: [rabbitmq-discuss] Socket leak in java client library
In-Reply-To: <925DDDE9D69E7143B3252E2D4680A36704CED46C@34093-C5-EVS1.exchange.rackspace.com>
References: <925DDDE9D69E7143B3252E2D4680A36704CED46C@34093-C5-EVS1.exchange.rackspace.com>
Message-ID: <925DDDE9D69E7143B3252E2D4680A36704DFEDE3@34093-C5-EVS1.exchange.rackspace.com>

Sorry I forgot to mention that this bug can cause java clients which
retry connections in the background to run out of open files/handles and
crash the JVM.

 

From: rabbitmq-discuss-bounces at lists.rabbitmq.com
[mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Iain
Hull
Sent: 28 November 2011 12:26
To: rabbitmq-discuss at lists.rabbitmq.com
Subject: [rabbitmq-discuss] Socket leak in java client library

 

Hi,

 

I have discovered a socket leak in the java client library when you try
to connect to a non-existent host.  I discovered this in version 2.5.1
but it also affects all versions after this.  

 

The problem occurs when
com.rabbitmq.client.ConnectionFactory.newConnection() is called with a
bad hostname. In this case
com.rabbitmq.client.ConnectionFactory.createFrameHandler(Address)
creates a socket that is never returned or closed because of an
IOException.

 

I have attached a simple java file, SocketLeak.java, file that
reproduces the problem, simply run it and monitor the number of open
files (or handles on windows).

 

I have applied a fix for this and tested it on version 2.5.1 and to the
latest from the default branch in the hg repo.  The patch is attached,
SocketLeakFix.diff.  All the client tests pass, however there are
currently 3 functional tests failing for me on the default branch both
with and without my changes.

 

There appears to be a similar leak in
com.rabbitmq.client.ConnectionFactory.newConnection(Address[]) where
connections are created and never returned or closed when an IOException
occurs, however I have not been able to reproduce a leak in this code,
but have attached a speculative fix anyway.

 

I understand that you do not have a public bug tracker that I can use to
monitor this issue, but can you give me a bug number to track?

 

Regards,

Iain.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/dfb8d779/attachment.htm>

From simon at rabbitmq.com  Mon Nov 28 15:54:25 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 28 Nov 2011 15:54:25 +0000
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <4ED38204.802@foldr3.com>
References: <4ECCCB33.3040803@foldr3.com>
	<4ECCCE5A.3020909@rabbitmq.com>	<4ECD0BCB.3090304@foldr3.com>
	<4ECD2216.40300@rabbitmq.com> <4ECE53E5.5000002@foldr3.com>
	<4ECE6F72.7020502@rabbitmq.com> <4ED38204.802@foldr3.com>
Message-ID: <4ED3AEB1.60604@rabbitmq.com>

On 28/11/11 12:43, Muharem Hrnjadovic wrote:
> OK, did that, please the attachment on
>      https://bugs.launchpad.net/openquake/+bug/894024/comments/4
>
> Sorry, it took a while to provide that data.

Oh, that's fine. Thanks for this.

So we can see that one queue process is taking up 10G, and there's 
nothing much else that is eating up large quantities of memory. That's 
quite a lot, but if nothing else is using the memory then there's no 
reason to stop it.

So I'm afraid you'll have to upgrade Erlang - so we can find out whether 
the VM really is trying to allocate more than 6 exabytes of memory...

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Mon Nov 28 15:56:32 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 28 Nov 2011 15:56:32 +0000
Subject: [rabbitmq-discuss] Website change suggestions
In-Reply-To: <30acc20d-179e-46bd-8a41-a59ca82157a3@u6g2000vbg.googlegroups.com>
References: <30acc20d-179e-46bd-8a41-a59ca82157a3@u6g2000vbg.googlegroups.com>
Message-ID: <4ED3AF30.8070809@rabbitmq.com>

On 27/11/11 11:46, gmazza wrote:
> Hello, I just started to look at RabbitMQ and ran into some newbie
> hiccups slowing me down.  A few website changes could makes things
> easier:

Hi, thanks for the feedback. These are all good points.

Cheers, Simon

> 1.) On the contact page (http://www.rabbitmq.com/contact.html), this
> is where people will go to try to find the bugtracker.  As you
> presently keep your bugtracker internal and instead use the discuss
> list for people to mention bugs, it would be good to include a
> sentence to that effect on this page, so people aren't spending time
> searching for an external bugtracker that doesn't exist.
>
> 2.) I'm running Ubuntu so my first RabbitMQ download choice was to
> install the .deb package: http://www.rabbitmq.com/install-debian.html
> -- I was concerned however that this daemon is always running by
> default when I start my machine (and not when I explicitly choose to
> start it).  It would be good to mention in the "Run RabbitMQ Server/
> Start the Server" section that we can use sysv-rc-conf to have the
> rabbitmq server disabled by default, and that we can reactivate it
> using this same program prior to running "sudo invoke-rc.d rabbitmq-
> server start".  (Maybe you know of a cleaner way you can describe
> instead.)  Alternatively, refer people to the generic Unix download if
> they don't want an always-running daemon.
>
> 3.) Looking for a rabbitmq server that I could manually start and stop
> (before I figured out the above), I then tried the Generic Unix
> section: http://www.rabbitmq.com/install-generic-unix.html.  In the
> section "Start the Server", good to remind users that they will need
> to run the rabbitmq server as a superuser (i.e., "sudo sbin/rabbitmq-
> server" for Ubuntu).
>
> Not doing so raised errors for me such as this:
>
> gmazza at gmazza-work:~/dataExt3/myapps/rabbitmq_server-2.7.0$ sbin/
> rabbitmq-server
> Activating RabbitMQ plugins ...
> ERROR: Could not delete dir /var/lib/rabbitmq/mnesia/rabbit at gmazza-
> work-plugins-expand ({cannot_delete,
>         "/var/lib/rabbitmq/mnesia/rabbit at gmazza-work-plugins-expand/
> rabbit.rel",
>         eacces})
>
> (Alternatively, should they be manually creating the "rabbitmq" user
> and running under that account?  If so, then inform the user of that.)
>
> Thanks,
> Glen
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Mon Nov 28 16:05:59 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 28 Nov 2011 16:05:59 +0000
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
 connection
In-Reply-To: <CAGnU7uhPjyUWkhWf82Vj-LmxwSijM6kUx9==MEEDx6ykGWw0vA@mail.gmail.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>	<CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>	<4EC030E3.1090807@rabbitmq.com>	<CAGnU7uj8PhXp+7JMcJ-XsDrcYNDKno-t5HnGnrwup+F41vCyHw@mail.gmail.com>	<4EC0CCDE.3030505@rabbitmq.com>	<CAGnU7uj3U-CHE-Bo_TcxuPxsGdRLyUcngnx-F9xrP=Q3jR-uuA@mail.gmail.com>	<4EC15EA2.4010507@rabbitmq.com>	<CAGnU7ugZ-QkC7n8n7XxqcV_AVyLDRaVTA6bo2vK+S7=Nki6yjw@mail.gmail.com>	<CAGnU7uiEduM3C3cvd=f3VeBGUEhudSDU9KDRMmUtxcHv-TzMQA@mail.gmail.com>	<4ECA4CFE.5000406@rabbitmq.com>
	<CAGnU7uhPjyUWkhWf82Vj-LmxwSijM6kUx9==MEEDx6ykGWw0vA@mail.gmail.com>
Message-ID: <4ED3B167.20307@rabbitmq.com>

On 21/11/11 16:10, Benjamin Bennett wrote:
> Our application is using the CachingConnectionFactory, Spring
> Integration AMQP .
> The way this is happening is just by applying the @DirtiesContext in
> our unit test , that we need to reload the context, at that time the
> channel close and connection close are closed in different threads.
> The BlockingQueueConsumer is the one that end ups doing the channel
> closes but the CachingConnectionFactory actually  does the closes .
>
>
> The stacktraces have no other threads running except spring-amqp
> threads BlockingQueueConsumer and CachingConnectionFactory.

I'm afraid I can't really comment on spring-amqp - I don't know if Dave can?

But for the purpose of your tests maybe you could work around this by 
not closing the channels at all?

> My only comment about attracting attention it is a race condition ,
> and race conditions are the most painful bugs to have to deal with.

Oh, absolutely.

> On my dev box I have only seen the issue one time in 200 runs that ran
> over night.
> On our test windows 7 vms it happens 50% of the time, sample size was 40 runs.
> On our windows xp test vms it has never happened.
>
> In our production we get a "The service failed to close in timely
> manner" and doesn't shut down.
>
> Finally if you are fixing it in the server , what about the previous
> versions? I don't even think spring-amqp has migrated to 2.7 series
> java client because it is backwards incompatible.

You don't need to use the same versions of client and server - just 
upgrading the server should be fine.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From benbennett at gmail.com  Mon Nov 28 16:18:04 2011
From: benbennett at gmail.com (Benjamin Bennett)
Date: Mon, 28 Nov 2011 10:18:04 -0600
Subject: [rabbitmq-discuss] Rabbitmq 2.5-2.6.1 java hanging on close of
	connection
In-Reply-To: <4ED3B167.20307@rabbitmq.com>
References: <CAGnU7ug+99pP+POgULhXhc4LhAgVdtvjjM5Ge3a7dx_n5gtgZQ@mail.gmail.com>
	<D585A544-3AFF-402B-ABA6-0EDE650DC505@rabbitmq.com>
	<CAGnU7uianGGj9_L5MMa43u1+CHnvgGjbySqfCO695H=3jJnE+w@mail.gmail.com>
	<1AA56A76-6AB5-45B2-ABD1-5FFBE5F3DB39@rabbitmq.com>
	<CAGnU7ujONU1YHXbr8b_2XhMet12KMXzY0DBTpZOCKqoAXBjP-Q@mail.gmail.com>
	<4EC030E3.1090807@rabbitmq.com>
	<CAGnU7uj8PhXp+7JMcJ-XsDrcYNDKno-t5HnGnrwup+F41vCyHw@mail.gmail.com>
	<4EC0CCDE.3030505@rabbitmq.com>
	<CAGnU7uj3U-CHE-Bo_TcxuPxsGdRLyUcngnx-F9xrP=Q3jR-uuA@mail.gmail.com>
	<4EC15EA2.4010507@rabbitmq.com>
	<CAGnU7ugZ-QkC7n8n7XxqcV_AVyLDRaVTA6bo2vK+S7=Nki6yjw@mail.gmail.com>
	<CAGnU7uiEduM3C3cvd=f3VeBGUEhudSDU9KDRMmUtxcHv-TzMQA@mail.gmail.com>
	<4ECA4CFE.5000406@rabbitmq.com>
	<CAGnU7uhPjyUWkhWf82Vj-LmxwSijM6kUx9==MEEDx6ykGWw0vA@mail.gmail.com>
	<4ED3B167.20307@rabbitmq.com>
Message-ID: <CAGnU7uiTks2iiJ=-EhGUgbMzd5LPoRGmYP9ATa1KHkUPp9Xd3A@mail.gmail.com>

" But for the purpose of your tests maybe you could work around this by not
  closing the channels at all?"
Our code never actually closes any channels the spring-amqp lib closes
the channels when the spring context is destroyed.

I have a hack for now and just added a timeout to the spring-amqp lib
when it closes the connection.

Thanks for all your help. I will be looking for the release that fixes
this issue.



On Mon, Nov 28, 2011 at 10:05 AM, Simon MacMullen <simon at rabbitmq.com> wrote:
> On 21/11/11 16:10, Benjamin Bennett wrote:
>>
>> Our application is using the CachingConnectionFactory, Spring
>> Integration AMQP .
>> The way this is happening is just by applying the @DirtiesContext in
>> our unit test , that we need to reload the context, at that time the
>> channel close and connection close are closed in different threads.
>> The BlockingQueueConsumer is the one that end ups doing the channel
>> closes but the CachingConnectionFactory actually ?does the closes .
>>
>>
>> The stacktraces have no other threads running except spring-amqp
>> threads BlockingQueueConsumer and CachingConnectionFactory.
>
> I'm afraid I can't really comment on spring-amqp - I don't know if Dave can?
>
> But for the purpose of your tests maybe you could work around this by not
> closing the channels at all?
>
>> My only comment about attracting attention it is a race condition ,
>> and race conditions are the most painful bugs to have to deal with.
>
> Oh, absolutely.
>
>> On my dev box I have only seen the issue one time in 200 runs that ran
>> over night.
>> On our test windows 7 vms it happens 50% of the time, sample size was 40
>> runs.
>> On our windows xp test vms it has never happened.
>>
>> In our production we get a "The service failed to close in timely
>> manner" and doesn't shut down.
>>
>> Finally if you are fixing it in the server , what about the previous
>> versions? I don't even think spring-amqp has migrated to 2.7 series
>> java client because it is backwards incompatible.
>
> You don't need to use the same versions of client and server - just
> upgrading the server should be fine.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
>

From steve at rabbitmq.com  Mon Nov 28 16:53:17 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Mon, 28 Nov 2011 16:53:17 +0000
Subject: [rabbitmq-discuss] Socket leak in java client library
In-Reply-To: <925DDDE9D69E7143B3252E2D4680A36704DFEDE3@34093-C5-EVS1.exchange.rackspace.com>
References: <925DDDE9D69E7143B3252E2D4680A36704CED46C@34093-C5-EVS1.exchange.rackspace.com>
	<925DDDE9D69E7143B3252E2D4680A36704DFEDE3@34093-C5-EVS1.exchange.rackspace.com>
Message-ID: <DC16F33E-73F5-4E38-8B21-ED94DF501CAE@rabbitmq.com>

Hi Iain,

On 28 Nov 2011, at 15:27, Iain Hull wrote:
> The problem occurs when com.rabbitmq.client.ConnectionFactory.newConnection()
> is called with a bad hostname. In this case
> com.rabbitmq.client.ConnectionFactory.createFrameHandler(Address) creates a
> socket that is never returned or closed because of an IOException.

and

> There appears to be a similar leak in
> com.rabbitmq.client.ConnectionFactory.newConnection(Address[])
> where connections are created and never returned or closed
> when an IOException occurs...

We are working in this area; we are looking to replace the
ConnectionFactory with another mechanism (ConnectionBuilder) which doesn't
have this problem.  The ConnectionFactory will still exist, however, 
(though deprecated) and
this problem will be fixed therein.  I have raised Bug 24597 to track it.

(You should see it in the next release).

Thank you for spotting this.

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
avoirdupois (phr.) 'Would you like peas with that?'
distribute (v.) To denigrate an award ceremony.
definite (phr.) 'It's hard of hearing, I think.'
modest (n.) The most mod.


From evkdev at gmail.com  Mon Nov 28 16:53:47 2011
From: evkdev at gmail.com (evkdev at gmail.com)
Date: Mon, 28 Nov 2011 22:53:47 +0600
Subject: [rabbitmq-discuss] Multiple consumers of one exchange
Message-ID: <ED01E9FDB4A64BD6A2D48B68F95B590F@EvKPC>

Hi!
I have a durable Fanout exchange, where one or more producers post their messages. Multiple consumers are working with this exchange, each with it?s own queue binded to this exchange.
I want all consumers can receive all messages for (for example) last week, if they are listening now or not. So suppose I open some application and start listening. I want to receive all messages for the last week first, and then receive incoming messages too (together with other consumers). How can I do that? First, I created one named queue with x-message-ttl of one week, binded to the exchange. When receiving a message from this queue, I?m not sending ack. So every time I open application, I indeed see all messages. But if I have two clients connected, only first one receives all messages. Second one receives them only if I close first consumer. The same is when each consumer has it?s own queue. When multiple clients connected ? only one of them receives a message. What am I doing wrong? How can I get the desired behavior?

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/a14fd123/attachment.htm>

From alfonso.pantoja at gmail.com  Mon Nov 28 17:04:02 2011
From: alfonso.pantoja at gmail.com (Alfonso Pantoja)
Date: Mon, 28 Nov 2011 09:04:02 -0800 (PST)
Subject: [rabbitmq-discuss] Null messages in RabbitMq 2.6.1. Can't recover
Message-ID: <7c9803af-5199-4744-b566-c17de316b543@r9g2000vbw.googlegroups.com>

Hi,

We are using RabbitMq version 2.6.1 which receives messages from a
Ejabberd server (via a custom erlang mod).
After upgrading Rabbit from 2.2.1 (the module was adapted to work with
new rabbit version) I've noticed that the messages created in that
module can't be recovered using the .NET API (2.6.1 and 2.7.0.0)
because all messages are received as "null"
(using subscription.Next(millisecondsTimeout, out message))

The messages exists and are correct because in rabbit web
administration can be seen using the feature "Get Message(s) which
shows the body and properties.

I tried to sent the same message using a .NET publisher and it worked,
so I'm wondering which is the cause of the problem. It seems is the
way they are sent (maybe AMQP header properties?)...
Any ideas?


Thank you in advance

Regards,

Alfonso

From simon at rabbitmq.com  Mon Nov 28 17:22:00 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 28 Nov 2011 17:22:00 +0000
Subject: [rabbitmq-discuss] Multiple consumers of one exchange
In-Reply-To: <ED01E9FDB4A64BD6A2D48B68F95B590F@EvKPC>
References: <ED01E9FDB4A64BD6A2D48B68F95B590F@EvKPC>
Message-ID: <4ED3C338.6080808@rabbitmq.com>

Hi.

The behaviour you're seeing is by design - the idea is that for a single 
queue each message will only go to one consumer (but may be redelivered 
if the consumer dies without acking the message - this is what you're 
seeing).

You need to make sure each consumer has its own queue if every consumer 
should receive all messages.

You will want durable non-exclusive non-autodelete queues for this. It 
might be convenient to use server-named queues, in which case each 
consumer will have to stash the queue name somewhere while it is not 
running.

And yes, x-message-ttl would be useful in case a consumer does not come 
back for a while. x-expires might be useful too.

Cheers, Simon

On 28/11/11 16:53, evkdev at gmail.com wrote:
> Hi!
> I have a durable Fanout exchange, where one or more producers post their
> messages. Multiple consumers are working with this exchange, each with
> it?s own queue binded to this exchange.
> I want all consumers can receive all messages for (for example) last
> week, if they are listening now or not. So suppose I open some
> application and start listening. I want to receive all messages for the
> last week first, and then receive incoming messages too (together with
> other consumers). How can I do that? First, I created one named queue
> with x-message-ttl of one week, binded to the exchange. When receiving a
> message from this queue, I?m not sending ack. So every time I open
> application, I indeed see all messages. But if I have two clients
> connected, only first one receives all messages. Second one receives
> them only if I close first consumer. The same is when each consumer has
> it?s own queue. When multiple clients connected ? only one of them
> receives a message. What am I doing wrong? How can I get the desired
> behavior?
> Thanks.
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


-- 
Simon MacMullen
RabbitMQ, VMware

From christopher.grebs at native-instruments.de  Mon Nov 28 17:43:30 2011
From: christopher.grebs at native-instruments.de (Christopher Grebs)
Date: Mon, 28 Nov 2011 18:43:30 +0100
Subject: [rabbitmq-discuss] Restore parts of rabbitmq mnesia database after
	crash
In-Reply-To: <bc48cc57-17b0-47a9-b6f1-03278cb6599b@s7g2000yqa.googlegroups.com>
References: <bc48cc57-17b0-47a9-b6f1-03278cb6599b@s7g2000yqa.googlegroups.com>
Message-ID: <4ED3C842.6040902@native-instruments.de>



Hey there everyone,

we had a problem with our rabbitmq server that crashed and did not
start properly but aborted with this message:

Mnesia(rabbit at mq01): ** ERROR ** (core dumped to file: "/var/lib/
rabbitmq/MnesiaCore.rabbit at mq01_1322_497494_760300")
  ** FATAL ** Failed to merge schema: Bad cookie in table definition
rabbit_queue: rabbit at mq01 = {cstruct,rabbit_queue,set,
[rabbit at mq02,rabbit at mq01],[],[],0,read_write,[],[],false,amqqueue,
[name,durable,auto_delete,exclusive_owner,arguments,pid],[],[],
{{1298,52135,154226},rabbit at mq02},{{5,0},{rabbit at mq02,
{1312,883667,389675}}}}, rabbit at mq02 = {cstruct,rabbit_queue,set,
[rabbit at mq02],[],[],0,read_write,[],[],false,amqqueue,
[name,durable,auto_delete,exclusive_owner,arguments,pid],[],[],
{{1318,853352,227541},rabbit at mq02},{{2,0},[]}}


Indeed the message is kinda not the problem because we were working
with some partly-configured rabbitmq-cluster that was on the one hand
active and on the other hand not active so maybe this was expected.
Once I backed up the old mnesia database and created a new one
everything started to work properly.

But in fact it may happened that there was some required data in the
mnesia database and so the question is if there is any way to get out
messages/userdata/configuration of the "old" mnesia database?

Thanks!

Best,
Christopher.


From jonathan.s.oliver42 at gmail.com  Mon Nov 28 18:06:51 2011
From: jonathan.s.oliver42 at gmail.com (Jonathan Oliver)
Date: Mon, 28 Nov 2011 10:06:51 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ v2.7.0 .NET Client NuGet Package
Message-ID: <14625225.1761.1322503611903.JavaMail.geo-discussion-forums@yqiv14>

I was just curious when the latest .NET client (v2.7.0) was going to be 
published to the Microsoft NuGet repository:
http://nuget.org/List/Packages/RabbitMQ.Client

The most recent version of the client is v2.6.1
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/bd2e450f/attachment.htm>

From simon at rabbitmq.com  Mon Nov 28 18:14:27 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 28 Nov 2011 18:14:27 +0000
Subject: [rabbitmq-discuss] Restore parts of rabbitmq mnesia database
 after	crash
In-Reply-To: <4ED3C842.6040902@native-instruments.de>
References: <bc48cc57-17b0-47a9-b6f1-03278cb6599b@s7g2000yqa.googlegroups.com>
	<4ED3C842.6040902@native-instruments.de>
Message-ID: <4ED3CF83.1000808@rabbitmq.com>

Hmm. That error message should meant that you tried to get two separate 
clusters to merge (i.e. without resetting), or that Mnesia schemas got 
out of sync for some other reason (not obvious how).

Either way, you should have been left with at least one node that 
*would* start successfully - so if you needed the data from Mnesia, 
you'd have to start with that one...

Cheers, Simon

On 28/11/11 17:43, Christopher Grebs wrote:
>
>
> Hey there everyone,
>
> we had a problem with our rabbitmq server that crashed and did not
> start properly but aborted with this message:
>
> Mnesia(rabbit at mq01): ** ERROR ** (core dumped to file: "/var/lib/
> rabbitmq/MnesiaCore.rabbit at mq01_1322_497494_760300")
> ** FATAL ** Failed to merge schema: Bad cookie in table definition
> rabbit_queue: rabbit at mq01 = {cstruct,rabbit_queue,set,
> [rabbit at mq02,rabbit at mq01],[],[],0,read_write,[],[],false,amqqueue,
> [name,durable,auto_delete,exclusive_owner,arguments,pid],[],[],
> {{1298,52135,154226},rabbit at mq02},{{5,0},{rabbit at mq02,
> {1312,883667,389675}}}}, rabbit at mq02 = {cstruct,rabbit_queue,set,
> [rabbit at mq02],[],[],0,read_write,[],[],false,amqqueue,
> [name,durable,auto_delete,exclusive_owner,arguments,pid],[],[],
> {{1318,853352,227541},rabbit at mq02},{{2,0},[]}}
>
>
> Indeed the message is kinda not the problem because we were working
> with some partly-configured rabbitmq-cluster that was on the one hand
> active and on the other hand not active so maybe this was expected.
> Once I backed up the old mnesia database and created a new one
> everything started to work properly.
>
> But in fact it may happened that there was some required data in the
> mnesia database and so the question is if there is any way to get out
> messages/userdata/configuration of the "old" mnesia database?
>
> Thanks!
>
> Best,
> Christopher.
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


-- 
Simon MacMullen
RabbitMQ, VMware

From christopher.grebs at native-instruments.de  Mon Nov 28 18:20:25 2011
From: christopher.grebs at native-instruments.de (Christopher Grebs)
Date: Mon, 28 Nov 2011 19:20:25 +0100
Subject: [rabbitmq-discuss] Restore parts of rabbitmq mnesia database
 after	crash
In-Reply-To: <4ED3CF83.1000808@rabbitmq.com>
References: <bc48cc57-17b0-47a9-b6f1-03278cb6599b@s7g2000yqa.googlegroups.com>
	<4ED3C842.6040902@native-instruments.de>
	<4ED3CF83.1000808@rabbitmq.com>
Message-ID: <4ED3D0E9.1020201@native-instruments.de>

Hey Simon,

yea, maybe a short excurse on what we have done:

We had two rabbitmq nodes in a cluster configuration and sadly the 
second node got broken so the first (master node) was running in cluster 
configuration but without a second node - kinda broken thingy.

Now the master was restarted and did not start properly possibly - as 
you mentioned - because of some broken cluster, at least that's what I 
think when I read the error message.

So there was only one node in the whole cluster and this one did not 
start properly but raised this error - so I have no other node to try out.

Cheers, Christopher.

On 11/28/2011 07:14 PM, Simon MacMullen wrote:
> Hmm. That error message should meant that you tried to get two 
> separate clusters to merge (i.e. without resetting), or that Mnesia 
> schemas got out of sync for some other reason (not obvious how).
>
> Either way, you should have been left with at least one node that 
> *would* start successfully - so if you needed the data from Mnesia, 
> you'd have to start with that one...
>
> Cheers, Simon
>
> On 28/11/11 17:43, Christopher Grebs wrote:
>>
>>
>> Hey there everyone,
>>
>> we had a problem with our rabbitmq server that crashed and did not
>> start properly but aborted with this message:
>>
>> Mnesia(rabbit at mq01): ** ERROR ** (core dumped to file: "/var/lib/
>> rabbitmq/MnesiaCore.rabbit at mq01_1322_497494_760300")
>> ** FATAL ** Failed to merge schema: Bad cookie in table definition
>> rabbit_queue: rabbit at mq01 = {cstruct,rabbit_queue,set,
>> [rabbit at mq02,rabbit at mq01],[],[],0,read_write,[],[],false,amqqueue,
>> [name,durable,auto_delete,exclusive_owner,arguments,pid],[],[],
>> {{1298,52135,154226},rabbit at mq02},{{5,0},{rabbit at mq02,
>> {1312,883667,389675}}}}, rabbit at mq02 = {cstruct,rabbit_queue,set,
>> [rabbit at mq02],[],[],0,read_write,[],[],false,amqqueue,
>> [name,durable,auto_delete,exclusive_owner,arguments,pid],[],[],
>> {{1318,853352,227541},rabbit at mq02},{{2,0},[]}}
>>
>>
>> Indeed the message is kinda not the problem because we were working
>> with some partly-configured rabbitmq-cluster that was on the one hand
>> active and on the other hand not active so maybe this was expected.
>> Once I backed up the old mnesia database and created a new one
>> everything started to work properly.
>>
>> But in fact it may happened that there was some required data in the
>> mnesia database and so the question is if there is any way to get out
>> messages/userdata/configuration of the "old" mnesia database?
>>
>> Thanks!
>>
>> Best,
>> Christopher.
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
Christopher Grebs
Data Processing Developer

Tel +49-30-611035-1664
Fax -49-30-611035-2652
christopher.grebs at native-instruments.de

NATIVE INSTRUMENTS GmbH
Schlesische Strasse 29-30
10997 Berlin, Germany

http://www.native-instruments.com



***

KOMPLETE 8 ULTIMATE - the premium NI producer collection
=>   http://www.native-instruments.com/komplete8

TRAKTOR KONTROL S2 - the professional 2.1 DJ system
=>   http://www.native-instruments.com/s2

->>>>>>  NATIVE INSTRUMENTS - The Future of Sound<<<<<<-

Registergericht: Amtsgericht Charlottenburg
Registernummer: HRB 72458
UST.-ID.-Nr. DE 20 374 7747

Gesch?ftsf?hrung: Daniel Haver (CEO), Mate Galic


From emile at rabbitmq.com  Mon Nov 28 18:48:59 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 28 Nov 2011 18:48:59 +0000
Subject: [rabbitmq-discuss] RabbitMQ v2.7.0 .NET Client NuGet Package
In-Reply-To: <14625225.1761.1322503611903.JavaMail.geo-discussion-forums@yqiv14>
References: <14625225.1761.1322503611903.JavaMail.geo-discussion-forums@yqiv14>
Message-ID: <4ED3D79B.7030002@rabbitmq.com>

Hi Jonathan,

On 28/11/11 18:06, Jonathan Oliver wrote:
> I was just curious when the latest .NET client (v2.7.0) was going to be
> published to the Microsoft NuGet repository:
> http://nuget.org/List/Packages/RabbitMQ.Client
> 
> The most recent version of the client is v2.6.1

Thanks for bringing this to our attention. Unfortunately the NuGet
package doesn't really have a maintainer, so I can't say when it will be
updated.

This represents an opportunity for a member of the community to lend a
hand. If anyone is interested in keeping the NuGet package up-to-date at
each release then please get in touch.


-Emile

From cgrebs at googlemail.com  Mon Nov 28 17:34:47 2011
From: cgrebs at googlemail.com (Christopher Grebs)
Date: Mon, 28 Nov 2011 09:34:47 -0800 (PST)
Subject: [rabbitmq-discuss] Restore parts of rabbitmq mnesia database after
	crash
Message-ID: <bc48cc57-17b0-47a9-b6f1-03278cb6599b@s7g2000yqa.googlegroups.com>

Hey there everyone,

we had a problem with our rabbitmq server that crashed and did not
start properly but aborted with this message:

Mnesia(rabbit at mq01): ** ERROR ** (core dumped to file: "/var/lib/
rabbitmq/MnesiaCore.rabbit at mq01_1322_497494_760300")
 ** FATAL ** Failed to merge schema: Bad cookie in table definition
rabbit_queue: rabbit at mq01 = {cstruct,rabbit_queue,set,
[rabbit at mq02,rabbit at mq01],[],[],0,read_write,[],[],false,amqqueue,
[name,durable,auto_delete,exclusive_owner,arguments,pid],[],[],
{{1298,52135,154226},rabbit at mq02},{{5,0},{rabbit at mq02,
{1312,883667,389675}}}}, rabbit at mq02 = {cstruct,rabbit_queue,set,
[rabbit at mq02],[],[],0,read_write,[],[],false,amqqueue,
[name,durable,auto_delete,exclusive_owner,arguments,pid],[],[],
{{1318,853352,227541},rabbit at mq02},{{2,0},[]}}


Indeed the message is kinda not the problem because we were working
with some partly-configured rabbitmq-cluster that was on the one hand
active and on the other hand not active so maybe this was expected.
Once I backed up the old mnesia database and created a new one
everything started to work properly.

But in fact it may happened that there was some required data in the
mnesia database and so the question is if there is any way to get out
messages/userdata/configuration of the "old" mnesia database?

Thanks!

Best,
Christopher.

From brunoac88 at gmail.com  Mon Nov 28 18:57:10 2011
From: brunoac88 at gmail.com (Bruno Carneiro)
Date: Mon, 28 Nov 2011 16:57:10 -0200
Subject: [rabbitmq-discuss] Rabbit Crashing
Message-ID: <CAGy26MMymj4L-AAXG8oP0XTTts_uLvg0tOXTAFXqopAmweEaLg@mail.gmail.com>

Hi Folks,

I'm using Rabbit 2.6.1 with the plugins:

* amqp_client-2.6.1
* mochiweb-1.3-rmq2.6.1-git9a53dbd
* rabbitmq_jsonrpc-2.6.1
* rabbitmq_jsonrpc_channel-2.6.1
* rabbitmq_jsonrpc_channel_examples-2.6.1
* rabbitmq_mochiweb-2.6.1
* rfc4627_jsonrpc-2.6.1-git30c8498
* webmachine-1.7.0-rmq2.6.1-hg0c4b60a


When I start Rabbit it goes down after a few minutes. Using list_queues I
get:
unable to connect to node rabbit at HackSprintFreud: nodedown

Logs:

=ERROR REPORT==== 28-Nov-2011::16:46:58 ===
    application: mochiweb
    "Accept failed error"
    "{error,emfile}"

=ERROR REPORT==== 28-Nov-2011::16:46:58 ===
{mochiweb_socket_server,254,{acceptor_error,{error,accept_failed}}}






=CRASH REPORT==== 28-Nov-2011::15:53:29 ===
  crasher:
    initial call: mochiweb_acceptor:init/3
    pid: <0.4706.10>
    registered_name: []
    exception exit: {error,accept_failed}
      in function  mochiweb_acceptor:init/3
    ancestors: ['rabbit_mochiweb_web_*',rabbit_mochiweb_sup,<0.107.0>]
    messages: []
    links: [<0.114.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 233
    stack_size: 24
    reductions: 211
  neighbours:



=erl_crash_dump:0.1
Mon Nov 28 15:53:32 2011
Slogan: Kernel pid terminated (application_controller)
({application_terminated,mnesia,shutdown})
System version: Erlang R13B03 (erts-5.7.4) [source] [64-bit] [smp:4:4]
[rq:4] [async-threads:30] [hipe] [kernel-poll:true]
Compiled: Tue Oct  5 13:43:51 2010
Atoms: 18631
=memory
total: 28426552
processes: 9891808
processes_used: 8790816
system: 18534744
atom: 1273905
atom_used: 1269616
binary: 131960
code: 14923177
ets: 59944
=hash_table:atom_tab
size: 12853
used: 9873
objs: 18631
depth: 8
=index_table:atom_tab
size: 19456
limit: 1048576
entries: 18631
=hash_table:module_code
size: 797
used: 456
objs: 473
depth: 2
=index_table:module_code
size: 1024
limit: 65536
entries: 473
=hash_table:export_list
size: 6421
used: 4648
objs: 8159
depth: 8

Could anybody help me?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/2b60db6c/attachment.htm>

From james at 2600hz.com  Mon Nov 28 19:17:53 2011
From: james at 2600hz.com (James Aimonetti)
Date: Mon, 28 Nov 2011 19:17:53 +0000
Subject: [rabbitmq-discuss] Federation help
In-Reply-To: <4ED368E8.7090404@rabbitmq.com>
References: <4ED12F78.2090501@2600hz.com>,<4ED368E8.7090404@rabbitmq.com>
Message-ID: <154BCDD1990C6646BF01E722060F790D58A3F856@mbx022-w1-ca-1.exch022.domain.local>

Simon,

Thanks for the info.

My app will be running in environments that aren't necessarily federated, which is why I have my app declaring the exchanges on startup. Do you have recommendations for how to handle this? If federation is not enabled, and i declare the exchange as 'x-federation' with type='direct' in the args, will RabbitMQ know to declare the exchange as direct and not federated?

As for the amqp_client/ERL_LIBS issue, I installed via tarball. Not sure why starting up didn't have plugins/ in the code path. I'll check the installed Erlang lib and see if a conflicting version made it in there.

James

James Aimonetti
http://2600hz.com
email: james at 2600hz.com
work: 415.886.7905

________________________________________
From: rabbitmq-discuss-bounces at lists.rabbitmq.com [rabbitmq-discuss-bounces at lists.rabbitmq.com] on behalf of Simon MacMullen [simon at rabbitmq.com]
Sent: Monday, November 28, 2011 02:56
To: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Federation help

On 26/11/11 18:27, James Aimonetti wrote:
> Wanting to add federation to existing brokers but not sure I'm
> understanding the semantics involved.

Hi. Thanks for the reminder that an upgrade to the federation docs is
overdue :)

> Let's say I have three exchanges, {events, topic}, {control, direct},
> and {config, topic}, all three of which are on both brokers (in
> different datacenters).
>
> My current rabbit.config looks like:
>
> [{rabbitmq_federation
>    ,[{exchanges, [
>                [{exchange, "config"}
>                 ,{type, "topic"}
>                 ,{upstream_set, "config_exchanges"}
>                ]
>                ,[{exchange, "control"}
>                 ,{type, "direct"}
>                 ,{upstream_set, "control_exchanges"}
>                ]
>                ,[{exchange, "events"}
>                 ,{type, "topic"}
>                 ,{upstream_set, "events_exchanges"}
>                ]
>                  ]
>           ,{upstream_sets, [{"control_exchanges", [[{connection,
> "broker2"}]]}
>                            ,{"events_exchanges", [[{connection, "broker2"}]]}
>                         ,{"config_exchanges", [[{connection, "broker2"}]]}
>       ]}
>      ,{connections, [{"broker2", [{host, "broker2.example.com"}]}]}
>      ,{local_nodename, "broker1.example.com"}
>    ]}
>   ...more config

For the record you don't need to have a different upstream_set for each
exchange, unless you actually want each exchange to federate with
different brokers.

> I have an almost identical config on brokers 1 and 2 (with hostnames
> obviously adapted). Both startup fine (*sidenote: I had to set
> ERL_LIBS=/path/to/rabbit/plugins to get the federation plugin to work -
> the VM couldn't find the amqp_connection module, even after enabling the
> amqp_client plugin).

Really? Are you using deb / rpms? Have you moved anything around?

> I see both brokers communicating about the
> exchanges - lines similar to:
>
> =INFO REPORT==== 26-Nov-2011::18:04:01 ===
> Federation exchange 'control' in vhost '/' connected to
> broker2.example.com:/:control
>
> I start my application (in a separate VM) connecting to broker1, try to
> declare my exchanges as part of my app's init, and get errors like:

You don't need to. The exchanges part of the federation config will
declare those exchanges when the broker starts up.

If you do want to declare them in your app, read the section "Declaring
Federation Exchanges Over AMQP" in the README.

> ...snip...
> {server_initiated_close,406,
>                        <<"PRECONDITION_FAILED - cannot redeclare exchange
> 'control' in vhost '/' with different type, durable, internal or
> autodelete value">>}},
>                {gen_server,call,
>                    [<0.78.0>,
>                     {call,
>                         {'exchange.declare',1,<<"control">>,<<"direct">>,
>                             false,false,false,false,false,[]},
> ...snip...
>
> So I explicitly set type, durable, internal, and autodelete to 'false'
> in my federation configs, but to no avail.

The problem is likely to be the type - they need to be of type
"x-federation". You might want to temporarily enable the management
plugin so you can see what's going on.

> I should note I have no
> durable exchanges or queues in this system; everything is ephemeral.
> Neither broker is clustered with any others.
>
> I do see errors when I restart a broker similar to:
>
> =ERROR REPORT==== 26-Nov-2011::18:04:00 ===
> connection<0.2064.0>, channel 2 - error:
> {amqp_error,not_found,
>              "no exchange 'federation: control ->  broker2.example.com B'
> in vhost '/'",
>              'exchange.delete'}

Yeah, these are harmless - federation uses an intermediate exchange on
the upstream which gets recreated on connect. It has to try to delete it
to make *sure* it's not there (although it probably isn't anyway) - but
there's currently no way to not treat that as an error.

> My understanding (which may be bass-ackwards) is that by setting up the
> 'control' exchange to federate with broker2, broker1 will receive
> payloads from broker2's 'control' exchange and route them to any queues
> bound to broker1's 'control' exchange, and that my application code
> remains relatively unchanged to take advantage of that. The converse
> too: since broker2 is connecting to broker1, any payloads my apps on
> broker1 send to the 'control' exchange will be relayed to broker2.

Yes, although the links are unidirectional so you need to set up
federation in both directions.

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From majek04 at gmail.com  Mon Nov 28 19:19:42 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Mon, 28 Nov 2011 19:19:42 +0000
Subject: [rabbitmq-discuss] Rabbit Crashing
In-Reply-To: <CAGy26MMymj4L-AAXG8oP0XTTts_uLvg0tOXTAFXqopAmweEaLg@mail.gmail.com>
References: <CAGy26MMymj4L-AAXG8oP0XTTts_uLvg0tOXTAFXqopAmweEaLg@mail.gmail.com>
Message-ID: <CABzX+qzWJBHua-35g_OVGymJ+QzNsfOMVXW82XM19QWYhJBk=Q@mail.gmail.com>

On Mon, Nov 28, 2011 at 18:57, Bruno Carneiro <brunoac88 at gmail.com> wrote:
> Hi Folks,
> I'm using Rabbit 2.6.1 with the plugins:
> * amqp_client-2.6.1
> * mochiweb-1.3-rmq2.6.1-git9a53dbd
> * rabbitmq_jsonrpc-2.6.1
> * rabbitmq_jsonrpc_channel-2.6.1
> * rabbitmq_jsonrpc_channel_examples-2.6.1
> * rabbitmq_mochiweb-2.6.1
> * rfc4627_jsonrpc-2.6.1-git30c8498
> * webmachine-1.7.0-rmq2.6.1-hg0c4b60a
>
> When I start Rabbit it goes down after a few minutes. Using list_queues I
> get:
> unable to connect to node rabbit at HackSprintFreud: nodedown
> Logs:
> =ERROR REPORT==== 28-Nov-2011::16:46:58 ===
> ? ? application: mochiweb
> ? ? "Accept failed error"
> ? ? "{error,emfile}"


Just a blind guess:
 EMFILE (errno 24 - "too many file descriptors opened")

Maybe you have too many files opened? You can see
the numbers using management plugin.

On linux you can increase the limit by running
`ulimit -n <number>`, but you have to be root.

Usually, rabbit tries to optimize the usage of file descriptors,
in case when you have many queues it can mean that rabbit
opens loads of files. But as you open more and more network
sockets the number of opened files should drop.

This may not be a case for jsonrpc - AFAIK it doesn't have
code for dealing with usual rabbitmq file descriptor
counters. Theoretically in that case, when you have many
files opened by jsonrpc - you may hit the wall.

I suggest run the management plugin and checking the
file descriptors counters, trying to get understanding about
jsonrpc plugin usage. And increasing the file descriptor
limit if necessary.

Cheers,
    Marek

From amnema at gmail.com  Mon Nov 28 19:20:29 2011
From: amnema at gmail.com (Pierre Payet)
Date: Mon, 28 Nov 2011 11:20:29 -0800
Subject: [rabbitmq-discuss] Failing on restart and recovering queues
Message-ID: <CAFAu2w4=VgNs5__zGRb_CxPEQyCpZxuaHskkxM8wY7+Bw4EZWA@mail.gmail.com>

Hello,

I am using a persistent queue to store different URL. After a crash of the
Rabbitmq server, I tried to restart it but it get stuck on the step of
recovering the different exchanges, queues and bindings. I have checked in
/msg_store_persistent directory of the node and it seems the data are still
here.

So here little information about my configuration:
I am using Ubuntu 10.04 64-bit and Rabbitmq 2.7.0

Here is a copy of the startup_log :
-- rabbit boot start
starting file handle cache server
...done
starting worker pool
...done
starting database
...done
starting codec correctness check
...done
-- external infrastructure ready
starting plugin registry
...done
starting auth mechanism cr-demo
...done
starting auth mechanism amqplain
...done
starting auth mechanism plain
...done
starting statistics event manager
...done
starting logging server
...done
starting exchange type direct
...done
starting exchange type fanout
...done
starting exchange type headers
...done
starting exchange type topic
...done
-- kernel ready
starting alarm handler
...done
starting node monitor
...done
starting cluster delegate
...done
starting guid generator
...done
starting memory monitor
...done
-- core initialized
starting empty DB check
...done
starting management agent
...done
starting exchange, queue and binding recovery                         ...


And here is a copy of the crash report on start:
=CRASH REPORT==== 28-Nov-2011::09:09:36 ===
  crasher:
    initial call: gen:init_it/6
    pid: <0.155.0>
    registered_name: []
    exception exit: {{badmatch,eof},
                     [{rabbit_queue_index,load_segment,2},
                      {rabbit_queue_index,segment_entries_foldr,3},
                      {rabbit_queue_index,
                          '-queue_index_walker_reader/2-lc$^0/1-0-',4},
                      {rabbit_queue_index,queue_index_walker_reader,2},
                      {worker_pool_worker,handle_cast,2},
                      {gen_server2,handle_msg,2},
                      {proc_lib,init_p_do_apply,3}]}
      in function  gen_server2:terminate/3
    ancestors: [worker_pool_sup,rabbit_sup,<0.136.0>]
    messages: []
    links: [#Port<0.4788>,<0.151.0>,#Port<0.4724>]
    dictionary: [{{"/var/lib/rabbitmq/mnesia/rabbit at curtiz
/queues/67BZ7QWHYIY1S405V2E0881G9/journal.jif",
                    fhc_file},
                   {file,1,true}},
                  {{xtype_to_module,topic},rabbit_exchange_type_topic},
                  {{#Ref<0.0.0.556>,fhc_handle},
                   {handle,{file_descriptor,prim_file,{#Port<0.4724>,15}},
                           0,false,0,infinity,[],true,
                           "/var/lib/rabbitmq/mnesia/rabbit at curtiz
/queues/67BZ7QWHYIY1S405V2E0881G9/journal.jif",
                           [write,binary,raw,read],
                           [{write_buffer,infinity}],
                           true,true,
                           {1322,500175,181273}}},
                  {worker_pool_worker,true},
                  {{#Ref<0.0.0.79730>,fhc_handle},
                   {handle,{file_descriptor,prim_file,{#Port<0.4788>,17}},
                           0,false,0,0,[],true,
                           "/var/lib/rabbitmq/mnesia/rabbit at curtiz
/queues/67BZ7QWHYIY1S405V2E0881G9/37.idx",
                           [{read_ahead,491520},binary,raw,read],
                           [],false,true,
                           {1322,500176,916570}}},
                  {fhc_age_tree,{2,
                                 {{1322,500175,181273},
                                  #Ref<0.0.0.556>,nil,
                                  {{1322,500176,916570},
                                   #Ref<0.0.0.79730>,nil,nil}}}},
                  {{"/var/lib/rabbitmq/mnesia/rabbit at curtiz
/queues/67BZ7QWHYIY1S405V2E0881G9/37.idx",
                    fhc_file},
                   {file,1,false}}]
    trap_exit: false
    status: running
    heap_size: 514229


And finally the crash report itself:
=SUPERVISOR REPORT==== 23-Nov-2011::17:36:29 ===
     Supervisor: {<0.1220.149>,
                                           rabbit_channel_sup_sup}
     Context:    shutdown_error
     Reason:     shutdown
     Offender:   [{pid,<0.1222.149>},
                  {name,channel_sup},
                  {mfa,{rabbit_channel_sup,start_link,[]}},
                  {restart_type,temporary},
                  {shutdown,infinity},
                  {child_type,supervisor}]


Can anyone help me to recover the messages in the queue ?

Payet P
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/b72efd90/attachment.htm>

From joeyfitz at gmail.com  Mon Nov 28 19:12:05 2011
From: joeyfitz at gmail.com (joefitzgerald)
Date: Mon, 28 Nov 2011 11:12:05 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ v2.7.0 .NET Client NuGet Package
In-Reply-To: <4ED3D79B.7030002@rabbitmq.com>
References: <14625225.1761.1322503611903.JavaMail.geo-discussion-forums@yqiv14>
	<4ED3D79B.7030002@rabbitmq.com>
Message-ID: <d6e8d5ec-7baf-4484-a2f2-ade29374a928@cu3g2000vbb.googlegroups.com>

Jonathan,
I'm the maintainer of the NuGet package. It's a community contribution
(using the official binary distribution), although I would love for
the RabbitMQ team to pick it up (and have offered to help transition
it to them)! Unfortunately, I haven't had a chance to update the NuGet
package yet, but will try and get it done today.
If others on this list are using the NuGet package, please add your
voice to this thread to encourage the RabbitMQ team to support this as
an official binary distribution method.
Best Regards,Joe Fitzgerald
On Nov 28, 11:48?am, Emile Joubert <em... at rabbitmq.com> wrote:
> Hi Jonathan,
>
> On 28/11/11 18:06, Jonathan Oliver wrote:
>
> > I was just curious when the latest .NET client (v2.7.0) was going to be
> > published to the Microsoft NuGet repository:
> >http://nuget.org/List/Packages/RabbitMQ.Client
>
> > The most recent version of the client is v2.6.1
>
> Thanks for bringing this to our attention. Unfortunately the NuGet
> package doesn't really have a maintainer, so I can't say when it will be
> updated.
>
> This represents an opportunity for a member of the community to lend a
> hand. If anyone is interested in keeping the NuGet package up-to-date at
> each release then please get in touch.
>
> -Emile
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From joeyfitz at gmail.com  Mon Nov 28 19:22:17 2011
From: joeyfitz at gmail.com (joefitzgerald)
Date: Mon, 28 Nov 2011 11:22:17 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ v2.7.0 .NET Client NuGet Package
In-Reply-To: <14625225.1761.1322503611903.JavaMail.geo-discussion-forums@yqiv14>
References: <14625225.1761.1322503611903.JavaMail.geo-discussion-forums@yqiv14>
Message-ID: <6c673908-baf8-4643-bf44-aa878e4d71a6@t16g2000vba.googlegroups.com>

Jonathan,

I've updated the NuGet packages. See here:

* http://nuget.org/List/Packages/RabbitMQ.Client
* http://nuget.org/List/Packages/RabbitMQ.ServiceModel

Best Regards,
Joe Fitzgerald

On Nov 28, 11:06?am, Jonathan Oliver <jonathan.s.olive... at gmail.com>
wrote:
> I was just curious when the latest .NET client (v2.7.0) was going to be
> published to the Microsoft NuGet repository:http://nuget.org/List/Packages/RabbitMQ.Client
>
> The most recent version of the client is v2.6.1
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From steve.flitcroft at gmail.com  Mon Nov 28 19:22:44 2011
From: steve.flitcroft at gmail.com (steve flitcroft)
Date: Mon, 28 Nov 2011 11:22:44 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMQ v2.7.0 .NET Client NuGet Package
In-Reply-To: <4ED3D79B.7030002@rabbitmq.com>
References: <14625225.1761.1322503611903.JavaMail.geo-discussion-forums@yqiv14>
	<4ED3D79B.7030002@rabbitmq.com>
Message-ID: <347d3484-79ed-4383-b0f2-3d29774a9036@h3g2000yqa.googlegroups.com>

I can take this up - wow - whilst I was typing this it seems to have
been updated...!

On Nov 28, 6:48?pm, Emile Joubert <em... at rabbitmq.com> wrote:
> Hi Jonathan,
>
> On 28/11/11 18:06, Jonathan Oliver wrote:
>
> > I was just curious when the latest .NET client (v2.7.0) was going to be
> > published to the Microsoft NuGet repository:
> >http://nuget.org/List/Packages/RabbitMQ.Client
>
> > The most recent version of the client is v2.6.1
>
> Thanks for bringing this to our attention. Unfortunately the NuGet
> package doesn't really have a maintainer, so I can't say when it will be
> updated.
>
> This represents an opportunity for a member of the community to lend a
> hand. If anyone is interested in keeping the NuGet package up-to-date at
> each release then please get in touch.
>
> -Emile
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From mh at foldr3.com  Mon Nov 28 19:26:04 2011
From: mh at foldr3.com (Muharem Hrnjadovic)
Date: Mon, 28 Nov 2011 20:26:04 +0100
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <4ED3AEB1.60604@rabbitmq.com>
References: <4ECCCB33.3040803@foldr3.com>
	<4ECCCE5A.3020909@rabbitmq.com>	<4ECD0BCB.3090304@foldr3.com>
	<4ECD2216.40300@rabbitmq.com> <4ECE53E5.5000002@foldr3.com>
	<4ECE6F72.7020502@rabbitmq.com> <4ED38204.802@foldr3.com>
	<4ED3AEB1.60604@rabbitmq.com>
Message-ID: <4ED3E04C.9020508@foldr3.com>

On 11/28/2011 04:54 PM, Simon MacMullen wrote:
> On 28/11/11 12:43, Muharem Hrnjadovic wrote:
>> OK, did that, please the attachment on
>>      https://bugs.launchpad.net/openquake/+bug/894024/comments/4
>>
>> Sorry, it took a while to provide that data.
> 
> Oh, that's fine. Thanks for this.
> 
> So we can see that one queue process is taking up 10G, and there's
> nothing much else that is eating up large quantities of memory. That's
> quite a lot, but if nothing else is using the memory then there's no
> reason to stop it.
> 
> So I'm afraid you'll have to upgrade Erlang - so we can find out
> whether the VM really is trying to allocate more than 6 exabytes of
> memory...
Simon, I plan to upgrade that server to ubuntu 11.10 which would give me
erlang 14.b.2 out of the box. Would that be good enough?

Best regards/Mit freundlichen Gr??en

-- 
Muharem Hrnjadovic <mh at foldr3.com>
Public key id   : B2BBFCFC
Key fingerprint : A5A3 CC67 2B87 D641 103F  5602 219F 6B60 B2BB FCFC

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 900 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/8e51cda1/attachment.pgp>

From matthias at rabbitmq.com  Mon Nov 28 20:01:59 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 28 Nov 2011 20:01:59 +0000
Subject: [rabbitmq-discuss] Failing on restart and recovering queues
In-Reply-To: <CAFAu2w4=VgNs5__zGRb_CxPEQyCpZxuaHskkxM8wY7+Bw4EZWA@mail.gmail.com>
References: <CAFAu2w4=VgNs5__zGRb_CxPEQyCpZxuaHskkxM8wY7+Bw4EZWA@mail.gmail.com>
Message-ID: <4ED3E8B7.1070104@rabbitmq.com>

On 28/11/11 19:20, Pierre Payet wrote:
> After a crash of the Rabbitmq server,

Do you know what happened? Did it run out of disk space by any chance?

> I tried to restart it but it get stuck on the step of recovering the
> different exchanges, queues and bindings. I have checked in
> /msg_store_persistent directory of the node and it seems the data are
> still here.

Right. It looks like some of the data got corrupted though. We have a 
bug open to make rabbit skip over such data on restart - we already do 
this elsewhere on recovery, but not in this particular case.

> Can anyone help me to recover the messages in the queue ?

Try deleting 
/var/lib/rabbitmq/mnesia/rabbit at curtiz/queues/67BZ7QWHYIY1S405V2E0881G9/37.idx. 
Hopefully that will allow rabbit to start with at least some of the data 
still present.


Regards,

Matthias.

From iain.hull at workday.com  Mon Nov 28 20:39:28 2011
From: iain.hull at workday.com (Iain Hull)
Date: Mon, 28 Nov 2011 14:39:28 -0600
Subject: [rabbitmq-discuss] Socket leak in java client library
In-Reply-To: <DC16F33E-73F5-4E38-8B21-ED94DF501CAE@rabbitmq.com>
References: <925DDDE9D69E7143B3252E2D4680A36704CED46C@34093-C5-EVS1.exchange.rackspace.com>
	<925DDDE9D69E7143B3252E2D4680A36704DFEDE3@34093-C5-EVS1.exchange.rackspace.com>
	<DC16F33E-73F5-4E38-8B21-ED94DF501CAE@rabbitmq.com>
Message-ID: <925DDDE9D69E7143B3252E2D4680A36704DFF3A5@34093-C5-EVS1.exchange.rackspace.com>

Hi Steve,

Thanks for the prompt reply and sending on the bug number.

Regards,
Iain.

-----Original Message-----
From: Steve Powell [mailto:steve at rabbitmq.com] 
Sent: 28 November 2011 16:53
To: Iain Hull
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Socket leak in java client library

Hi Iain,

On 28 Nov 2011, at 15:27, Iain Hull wrote:
> The problem occurs when
com.rabbitmq.client.ConnectionFactory.newConnection()
> is called with a bad hostname. In this case
> com.rabbitmq.client.ConnectionFactory.createFrameHandler(Address)
creates a
> socket that is never returned or closed because of an IOException.

and

> There appears to be a similar leak in
> com.rabbitmq.client.ConnectionFactory.newConnection(Address[])
> where connections are created and never returned or closed
> when an IOException occurs...

We are working in this area; we are looking to replace the
ConnectionFactory with another mechanism (ConnectionBuilder) which
doesn't
have this problem.  The ConnectionFactory will still exist, however, 
(though deprecated) and
this problem will be fixed therein.  I have raised Bug 24597 to track
it.

(You should see it in the next release).

Thank you for spotting this.

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
avoirdupois (phr.) 'Would you like peas with that?'
distribute (v.) To denigrate an award ceremony.
definite (phr.) 'It's hard of hearing, I think.'
modest (n.) The most mod.


From amnema at gmail.com  Mon Nov 28 21:13:03 2011
From: amnema at gmail.com (Pierre Payet)
Date: Mon, 28 Nov 2011 13:13:03 -0800
Subject: [rabbitmq-discuss] Failing on restart and recovering queues
In-Reply-To: <4ED3E8B7.1070104@rabbitmq.com>
References: <CAFAu2w4=VgNs5__zGRb_CxPEQyCpZxuaHskkxM8wY7+Bw4EZWA@mail.gmail.com>
	<4ED3E8B7.1070104@rabbitmq.com>
Message-ID: <CAFAu2w6dW-k7F2AjQY_3V-HPynz7QXjksT6j-pQa7uDHEn6wvw@mail.gmail.com>

2011/11/28 Matthias Radestock <matthias at rabbitmq.com>

> On 28/11/11 19:20, Pierre Payet wrote:
>
>> After a crash of the Rabbitmq server,
>>
>
> Do you know what happened? Did it run out of disk space by any chance?


It's not the disk space but I'm not sure of how to answer this question.
Looking at the rabbitmq at curtiz.log.1, the last event reported is a tcp
connection attempt but no trace of the fulfilling of it.
Looking at rabbitmq-sasl.log.1 I just have this message :
=SUPERVISOR REPORT==== 23-Nov-2011::17:36:29 ===
     Supervisor: {<0.1220.149>,
                                           rabbit_channel_sup_sup}
     Context:    shutdown_error
     Reason:     shutdown
     Offender:   [{pid,<0.1222.149>},
                  {name,channel_sup},
                  {mfa,{rabbit_channel_sup,start_link,[]}},
                  {restart_type,temporary},
                  {shutdown,infinity},
                  {child_type,supervisor}]


I've limited the amount of memory to 20% and i'm using blocking connection
with pika to publish a message. Here is the python code :
    connection =
pika.BlockingConnection(pika.ConnectionParameters(host=host))
    channel = connection.channel()

    channel.queue_declare(queue=queue, durable=True)

    channel.basic_publish(exchange='', routing_key=queue, body=url,
properties=pika.BasicProperties(delivery_mode = 2,))

    connection.close()

I have remarked that i have a lot's of connection running at the same time.
Could it be a too high amount of connection to the server that crashed it ?
Do you think i don't close properly the connection knowing that there is 6
instances of my program running at the same time ?


>  Can anyone help me to recover the messages in the queue ?
>>
>
>
> Try deleting /var/lib/rabbitmq/mnesia/rabbit at curtiz/queues/67BZ7QWHYIY1S405V2E0881G9/37.idx.
> Hopefully that will allow rabbit to start with at least some of the data
> still present.
>
>
I managed to restart the server so it solved the problem. Thank you.

Regards

Payet P
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/e9a3530a/attachment.htm>

From pdezwart at rubiconproject.com  Mon Nov 28 21:30:26 2011
From: pdezwart at rubiconproject.com (Pieter de Zwart)
Date: Mon, 28 Nov 2011 15:30:26 -0600
Subject: [rabbitmq-discuss] Best Practices: Exposing messages as "Envelope"
	(PHP PECL extension)
Message-ID: <CAF93D5C.2B148%pdezwart@rubiconproject.com>

Hey everyone,

I want to run this up the flagpole and see who shoots it down. I am in the final stages of reworking the PHP AMQP extension for the v1.0 release. I was poking through the Java client, trying to steal as many of the good ideas in there as possible and I found the Envelope object, which is returned to a consumer on callback. The envelope is nice, but its lacking some basic things: properties and headers.

I am suggesting creating a new object for the PHP extension: AMQPEnvelope, which has the following signature:

// General getters
string getBody()
string getRoutingKey()
int getDeliveryTag()
string getExchange()
bool isRedelivery()

// Properties
string getContentType()
string getContentEncoding()
int getTimestamp()
int getPriority()
... list of all remaining properties except "headers" ...

// Headers
// Returns all headers as an array of key => value pairs
array getHeaders()
// Get a specific header identified by $headerName, and return (bool)false if it does not exist.
mixed getHeader($headerName)

I know the vast majority of people here are not PHP users, but I would love to hear about this in general as a broker client if this makes sense and sounds usable.


Thanks!
Pieter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/e3aedbbd/attachment.htm>

From matthias at rabbitmq.com  Mon Nov 28 22:02:23 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 28 Nov 2011 22:02:23 +0000
Subject: [rabbitmq-discuss] Failing on restart and recovering queues
In-Reply-To: <CAFAu2w6dW-k7F2AjQY_3V-HPynz7QXjksT6j-pQa7uDHEn6wvw@mail.gmail.com>
References: <CAFAu2w4=VgNs5__zGRb_CxPEQyCpZxuaHskkxM8wY7+Bw4EZWA@mail.gmail.com>	<4ED3E8B7.1070104@rabbitmq.com>
	<CAFAu2w6dW-k7F2AjQY_3V-HPynz7QXjksT6j-pQa7uDHEn6wvw@mail.gmail.com>
Message-ID: <4ED404EF.2090802@rabbitmq.com>

On 28/11/11 21:13, Pierre Payet wrote:
> It's not the disk space but I'm not sure of how to answer this question.
> Looking at the rabbitmq at curtiz.log.1, the last event reported is a tcp
> connection attempt but no trace of the fulfilling of it.
> Looking at rabbitmq-sasl.log.1 I just have this message :
> =SUPERVISOR REPORT==== 23-Nov-2011::17:36:29 ===
>       Supervisor: {<0.1220.149>,
>                                             rabbit_channel_sup_sup}
>       Context:    shutdown_error
>       Reason:     shutdown
>       Offender:   [{pid,<0.1222.149>},
>                    {name,channel_sup},
>                    {mfa,{rabbit_channel_sup,start_link,[]}},
>                    {restart_type,temporary},
>                    {shutdown,infinity},
>                    {child_type,supervisor}]

Are you sure that is the last event logged by the crashed rabbit? In 
recent rabbit releases we no longer move log contents to the .1 file on 
startup. Instead we simply append to the existing file. So perhaps there 
are errors in the rabbit at curtiz-sasl.log relating to the crash? Also, 
did you get an erl_crash.dump?

> I have remarked that i have a lot's of connection running at the same
> time. Could it be a too high amount of connection to the server that
> crashed it ?

The server guards against that; it should refuse connection attempts 
when file descriptors get tight.

Regards,

Matthias.

From matthias at rabbitmq.com  Mon Nov 28 23:27:40 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 28 Nov 2011 23:27:40 +0000
Subject: [rabbitmq-discuss] Failing on restart and recovering queues
In-Reply-To: <CAFAu2w6o1S6E5XdLUx0fctrX2Tv48O6kK4xc5VX4rvg==3XCKg@mail.gmail.com>
References: <CAFAu2w4=VgNs5__zGRb_CxPEQyCpZxuaHskkxM8wY7+Bw4EZWA@mail.gmail.com>	<4ED3E8B7.1070104@rabbitmq.com>	<CAFAu2w6dW-k7F2AjQY_3V-HPynz7QXjksT6j-pQa7uDHEn6wvw@mail.gmail.com>	<4ED404EF.2090802@rabbitmq.com>
	<CAFAu2w6o1S6E5XdLUx0fctrX2Tv48O6kK4xc5VX4rvg==3XCKg@mail.gmail.com>
Message-ID: <4ED418EC.7030603@rabbitmq.com>

On 28/11/11 22:42, Pierre Payet wrote:
> I attached the erl_crash.dump. It seems that i run out of memory.

Indeed it did. But it ran out when attempting to allocate just 100M on 
top of 250M, so only 350M in total. Do you have other processes running 
on the machine that could be taking up large amounts of memory? You said 
you limited the memory to 20%. You may have to reduce that further.

Regards,

Matthias

From amnema at gmail.com  Mon Nov 28 23:57:38 2011
From: amnema at gmail.com (Pierre Payet)
Date: Mon, 28 Nov 2011 15:57:38 -0800
Subject: [rabbitmq-discuss] Failing on restart and recovering queues
In-Reply-To: <4ED418EC.7030603@rabbitmq.com>
References: <CAFAu2w4=VgNs5__zGRb_CxPEQyCpZxuaHskkxM8wY7+Bw4EZWA@mail.gmail.com>
	<4ED3E8B7.1070104@rabbitmq.com>
	<CAFAu2w6dW-k7F2AjQY_3V-HPynz7QXjksT6j-pQa7uDHEn6wvw@mail.gmail.com>
	<4ED404EF.2090802@rabbitmq.com>
	<CAFAu2w6o1S6E5XdLUx0fctrX2Tv48O6kK4xc5VX4rvg==3XCKg@mail.gmail.com>
	<4ED418EC.7030603@rabbitmq.com>
Message-ID: <CAFAu2w5NquofQzRtg0NDBxnakqQNDgk_RG8M2kf+kUa19LgKyg@mail.gmail.com>

2011/11/28 Matthias Radestock <matthias at rabbitmq.com>

> On 28/11/11 22:42, Pierre Payet wrote:
>
>> I attached the erl_crash.dump. It seems that i run out of memory.
>>
>
> Indeed it did. But it ran out when attempting to allocate just 100M on top
> of 250M, so only 350M in total. Do you have other processes running on the
> machine that could be taking up large amounts of memory? You said you
> limited the memory to 20%. You may have to reduce that further.
>
> Yes I have a redis-server running at the same time that is taking lot's of
memory but at the time it happened it must have remain some free space over
the 8go available. I am running a test to reproduce the bug while
monitoring the memory and it looks like there is around 5go available
continuously. I will have more result later and let you know about it.

Regards,

Payet P
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/a00b1b7e/attachment.htm>

From don at unswrc.com  Tue Nov 29 00:30:01 2011
From: don at unswrc.com (Don Nguyen)
Date: Mon, 28 Nov 2011 16:30:01 -0800 (PST)
Subject: [rabbitmq-discuss] Can consumers communicate back to producers?
Message-ID: <2caf941d-9bf0-4c8c-9209-26542d2dd8f7@o11g2000prg.googlegroups.com>

For example, taking the basic "Hello World" case the producer sends a
message to the consumer. Is there a mechanism for the consumer to send
"Hello back to you" back to the producer? Or does this involves
setting up a pair of Producers/Consumers and then selectively
receiving messages as per tutorial 4.

From julio at hawaii.edu  Tue Nov 29 01:49:24 2011
From: julio at hawaii.edu (Julio Polo)
Date: Mon, 28 Nov 2011 15:49:24 -1000
Subject: [rabbitmq-discuss] Best practice for supporting both,
	XML and JSON messages
Message-ID: <CA+0gB9=MimvqjVR6Q9wSSU7AaFEa28DsWfezUqTOjCZMi5Fetw@mail.gmail.com>

Would it be unusual for a producer to publish two versions of every
message, one in XML, another in JSON?   If it's not unusual, is the
typical implementation to set up a separate exchange for each format?
I thought about encoding both formats into a single message (using
MIME for example) but that puts an extra burden that I don't my
consumer audience to have.

Julio Polo
University of Hawaii

From allard.guy.m at gmail.com  Tue Nov 29 02:54:19 2011
From: allard.guy.m at gmail.com (Guy M. Allard)
Date: Mon, 28 Nov 2011 21:54:19 -0500
Subject: [rabbitmq-discuss] STOMP 1.1 Repeated Headers
In-Reply-To: <4EC64B1A.7070400@gmail.com>
References: <dcf121bc-835f-4c14-a127-591817e070dc@m19g2000yqh.googlegroups.com>
	<vfqipmiszkt.fsf@mail.cern.ch> <4EC64B1A.7070400@gmail.com>
Message-ID: <4ED4495B.7020605@gmail.com>

After further consideration, I do not agree with this behavior.

The 1.1 spec specifically shows an example:

|MESSAGE
foo:World
foo:Hello

^@|


The frame above is a MESSAGE frame, and hence must be generated by the 
broker.

The implication is that this frame is presented to the client as-is, and 
the client is left to deal with (quote from the spec):

The value of the|foo|header is just|World|.



On 11/18/2011 07:10 AM, Guy M. Allard wrote:
> I agree that is a possible interpretation of the spec.
>
> The spec could also be read as:  brokers forward as is,  clients deal 
> with the 'SHOULD use only the first' part.
>
> I am testing a 1.1 client against Rabbit and Apollo.  The behavior is 
> different.
>
> This implementation does seem to imply that a client can not ever act 
> as a pure server-to-server transfer mechanism.
>
> I will deal with either.  Thanks for the info that this is expected.
>
>
> On 11/18/2011 01:40 AM, Lionel Cons wrote:
>> gmallard<allard.guy.m at gmail.com>  writes:
>>> I establish a 1.1 level connection, and send a frame:
>>>
>>> SEND
>>> destination:/queue/tq
>>> dupkey1:latest
>>> dupkey1:before1
>>> dupkey1:before2
>>>
>>> Payload.^@
>>>
>>> Later I SUBSCRIBE, and receive that message.
>>>
>>> When the MESSAGE frame comes off the wire, I expect to see all three
>>> of those 'dupkey1' headers, in order.  I do not.  Only the first of
>>> the 'dupkey1' headers is present.
>> To my understanding, this is compatible with the STOMP 1.1 spec that
>> says that, in case of repeated header entries, "only the first header
>> entry SHOULD be used as the value". So RabbitMQ just considers "latest"
>> as the value for dupkey1. When it later sends the MESSAGE frame, only
>> this value is sent.
>>
>> Cheers,
>>
>> Lionel
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111128/73c3b0bd/attachment.htm>

From deckerego at gmail.com  Tue Nov 29 04:45:06 2011
From: deckerego at gmail.com (DeckerEgo)
Date: Mon, 28 Nov 2011 20:45:06 -0800 (PST)
Subject: [rabbitmq-discuss] Best practice for supporting both,
	XML and JSON messages
In-Reply-To: <CA+0gB9=MimvqjVR6Q9wSSU7AaFEa28DsWfezUqTOjCZMi5Fetw@mail.gmail.com>
References: <CA+0gB9=MimvqjVR6Q9wSSU7AaFEa28DsWfezUqTOjCZMi5Fetw@mail.gmail.com>
Message-ID: <a8a543a4-df16-499b-b99a-13632fdf443b@w3g2000vbw.googlegroups.com>

The way the Spring AMQP project does it is by looking for a Content-
Type and Encoding header (not unlike HTTP) to determine how to marshal
the message. So if a Content-Type is JSON with UTF-8 Encoding it would
attempt to create a string using UTF-8 encoding and then unmarshal the
message using a JSON message decoder.

You could do something similar where you set Content-Type and Encoding
headers on your message, then encode/decode based on the type. It
would then be up to the endpoint creating the message to request its
desired format.

On Nov 28, 8:49?pm, Julio Polo <ju... at hawaii.edu> wrote:
> Would it be unusual for a producer to publish two versions of every
> message, one in XML, another in JSON? ? If it's not unusual, is the
> typical implementation to set up a separate exchange for each format?
> I thought about encoding both formats into a single message (using
> MIME for example) but that puts an extra burden that I don't my
> consumer audience to have.
>
> Julio Polo
> University of Hawaii
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From lionel.cons at cern.ch  Tue Nov 29 06:41:53 2011
From: lionel.cons at cern.ch (Lionel Cons)
Date: Tue, 29 Nov 2011 07:41:53 +0100
Subject: [rabbitmq-discuss] STOMP 1.1 Repeated Headers
In-Reply-To: <4ED4495B.7020605@gmail.com>
References: <dcf121bc-835f-4c14-a127-591817e070dc@m19g2000yqh.googlegroups.com>
	<vfqipmiszkt.fsf@mail.cern.ch> <4EC64B1A.7070400@gmail.com>
	<4ED4495B.7020605@gmail.com>
Message-ID: <20180.32433.692136.510861@mail.cern.ch>

Guy M. Allard writes:
 > After further consideration, I do not agree with this behavior.
 > 
 > The 1.1 spec specifically shows an example:
 > 
 > |MESSAGE
 > foo:World
 > foo:Hello
 > 
 > ^@|
 > 
 > The frame above is a MESSAGE frame, and hence must be generated by the 
 > broker.
 > 
 > The implication is that this frame is presented to the client as-is, and 
 > the client is left to deal with (quote from the spec):
 > 
 > The value of the|foo|header is just|World|.

Guy,

Please discuss this point on the stomp-spec at googlegroups.com list so
that other contributors to the 1.1 spec can give their point of view.

Cheers,

Lionel

From smetj.net at gmail.com  Tue Nov 29 08:37:16 2011
From: smetj.net at gmail.com (Jelle Smet)
Date: Tue, 29 Nov 2011 00:37:16 -0800 (PST)
Subject: [rabbitmq-discuss] Shovel messages get lost or stay
 unacknowledged.
In-Reply-To: <4EC63920.9060507@rabbitmq.com>
References: <14498961.743.1321609401734.JavaMail.geo-discussion-forums@yqcm23>
	<4EC63920.9060507@rabbitmq.com>
Message-ID: <12407363.681.1322555836806.JavaMail.geo-discussion-forums@yqim9>



> Are you saying it works for a while then stops working until you restart 
> the server?

Yes 

I have defined a heartbeat for each configured connection Shovel creates. 
(?heartbeat=5)
I haven't run into the same issue ever since, ...

Cheers,

Jelle



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111129/f3c4b257/attachment.htm>

From alexandru at rabbitmq.com  Tue Nov 29 09:35:20 2011
From: alexandru at rabbitmq.com (Alexandru =?utf-8?B?U2N2b3LFo292?=)
Date: Tue, 29 Nov 2011 09:35:20 +0000
Subject: [rabbitmq-discuss] Can consumers communicate back to producers?
In-Reply-To: <2caf941d-9bf0-4c8c-9209-26542d2dd8f7@o11g2000prg.googlegroups.com>
References: <2caf941d-9bf0-4c8c-9209-26542d2dd8f7@o11g2000prg.googlegroups.com>
Message-ID: <20111129093520.GB3575@southbank>

> For example, taking the basic "Hello World" case the producer sends a
> message to the consumer. Is there a mechanism for the consumer to send
> "Hello back to you" back to the producer? 

AMQP does not have an automatic way to do this.

> Or does this involves
> setting up a pair of Producers/Consumers and then selectively
> receiving messages as per tutorial 4.

That sounds about right, though I'm not sure what you mean by
*selectively* receiving messages.

I'd expect the producer to declare its own queue, and somehow let the
consumer know about it; then, the consumer could just publish back to
it.

Cheers,
Alex


On Mon, Nov 28, 2011 at 04:30:01PM -0800, Don Nguyen wrote:
> For example, taking the basic "Hello World" case the producer sends a
> message to the consumer. Is there a mechanism for the consumer to send
> "Hello back to you" back to the producer? Or does this involves
> setting up a pair of Producers/Consumers and then selectively
> receiving messages as per tutorial 4.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From alexandru at rabbitmq.com  Tue Nov 29 09:42:56 2011
From: alexandru at rabbitmq.com (Alexandru =?utf-8?B?U2N2b3LFo292?=)
Date: Tue, 29 Nov 2011 09:42:56 +0000
Subject: [rabbitmq-discuss] Null messages in RabbitMq 2.6.1. Can't
	recover
In-Reply-To: <7c9803af-5199-4744-b566-c17de316b543@r9g2000vbw.googlegroups.com>
References: <7c9803af-5199-4744-b566-c17de316b543@r9g2000vbw.googlegroups.com>
Message-ID: <20111129094256.GC3575@southbank>

Hi Alfonso,

> I've noticed that the messages created in that
> module can't be recovered using the .NET API (2.6.1 and 2.7.0.0)
> because all messages are received as "null"
> (using subscription.Next(millisecondsTimeout, out message))


From christian.weyer.cw at gmail.com  Tue Nov 29 10:39:48 2011
From: christian.weyer.cw at gmail.com (Christian Weyer)
Date: Tue, 29 Nov 2011 02:39:48 -0800 (PST)
Subject: [rabbitmq-discuss] Silent installation on Windows
Message-ID: <3e4895a1-8528-4557-b0a7-c2e8e74fbec7@h42g2000yqd.googlegroups.com>

Hi all,

has anybody ever tried and managed to get RabbitMQ (and Erlang)
installed in completely silent mode on Windows?
Thanks.

From simon at rabbitmq.com  Tue Nov 29 10:55:08 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 29 Nov 2011 10:55:08 +0000
Subject: [rabbitmq-discuss] Shovel messages get lost or stay
	unacknowledged.
In-Reply-To: <12407363.681.1322555836806.JavaMail.geo-discussion-forums@yqim9>
References: <14498961.743.1321609401734.JavaMail.geo-discussion-forums@yqcm23>	<4EC63920.9060507@rabbitmq.com>
	<12407363.681.1322555836806.JavaMail.geo-discussion-forums@yqim9>
Message-ID: <4ED4BA0C.1000805@rabbitmq.com>

On 29/11/11 08:37, Jelle Smet wrote:
> I have defined a heartbeat for each configured connection Shovel
> creates. (?heartbeat=5)
> I haven't run into the same issue ever since, ...

Well, that's good news at least. It's possible some networking thing 
somewhere in between might be failing to route packets for TCP 
connections that have been idle for a while. We've seen intimations of 
such things before I think.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Tue Nov 29 10:56:36 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 29 Nov 2011 10:56:36 +0000
Subject: [rabbitmq-discuss] rabbitmq-server crashes hard while consuming
 31GB of RAM
In-Reply-To: <4ED3E04C.9020508@foldr3.com>
References: <4ECCCB33.3040803@foldr3.com>
	<4ECCCE5A.3020909@rabbitmq.com>	<4ECD0BCB.3090304@foldr3.com>
	<4ECD2216.40300@rabbitmq.com> <4ECE53E5.5000002@foldr3.com>
	<4ECE6F72.7020502@rabbitmq.com> <4ED38204.802@foldr3.com>
	<4ED3AEB1.60604@rabbitmq.com> <4ED3E04C.9020508@foldr3.com>
Message-ID: <4ED4BA64.2060504@rabbitmq.com>

On 28/11/11 19:26, Muharem Hrnjadovic wrote:
> Simon, I plan to upgrade that server to ubuntu 11.10 which would give me
> erlang 14.b.2 out of the box. Would that be good enough?

Yes, that would be great. Thanks!

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Tue Nov 29 11:01:25 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 29 Nov 2011 11:01:25 +0000
Subject: [rabbitmq-discuss] Federation help
In-Reply-To: <154BCDD1990C6646BF01E722060F790D58A3F856@mbx022-w1-ca-1.exch022.domain.local>
References: <4ED12F78.2090501@2600hz.com>, <4ED368E8.7090404@rabbitmq.com>
	<154BCDD1990C6646BF01E722060F790D58A3F856@mbx022-w1-ca-1.exch022.domain.local>
Message-ID: <4ED4BB85.9070501@rabbitmq.com>

On 28/11/11 19:17, James Aimonetti wrote:
> My app will be running in environments that aren't necessarily
> federated, which is why I have my app declaring the exchanges on
> startup. Do you have recommendations for how to handle this? If
> federation is not enabled, and i declare the exchange as
> 'x-federation' with type='direct' in the args, will RabbitMQ know to
> declare the exchange as direct and not federated?

Ah, no.

Probably the best thing to do is require the federation plugin to always 
be installed, and in the non-federated environments declare your 
upstream_set(s) empty. This does require a bit of configuration on the 
non-federated environments though. I'll have a think about whether this 
can be improved.

> As for the amqp_client/ERL_LIBS issue, I installed via tarball. Not
> sure why starting up didn't have plugins/ in the code path. I'll
> check the installed Erlang lib and see if a conflicting version made
> it in there.

Thanks.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From alfonso.pantoja at gmail.com  Tue Nov 29 11:08:58 2011
From: alfonso.pantoja at gmail.com (Alfonso Pantoja)
Date: Tue, 29 Nov 2011 12:08:58 +0100
Subject: [rabbitmq-discuss] Null messages in RabbitMq 2.6.1. Can't
	recover
In-Reply-To: <20111129094256.GC3575@southbank>
References: <7c9803af-5199-4744-b566-c17de316b543@r9g2000vbw.googlegroups.com>
	<20111129094256.GC3575@southbank>
Message-ID: <CAGVpBAAk30CNuzx9bLBaK9HnN751EXS1rdV7ttKnj96i+ZumDg@mail.gmail.com>

Hi Alex,

You were right, the problem was not related with the headers.
In our custom ejabberd module we were not sending the messages in binary
format to RabbitMq.

Thank you very much

Regards,

Alfonso


El 29 de noviembre de 2011 10:42, Alexandru Scvor?ov <alexandru at rabbitmq.com
> escribi?:

> Hi Alfonso,
>
> > I've noticed that the messages created in that
> > module can't be recovered using the .NET API (2.6.1 and 2.7.0.0)
> > because all messages are received as "null"
> > (using subscription.Next(millisecondsTimeout, out message))
>
> From the docs:
> "Returns false only if the timeout expires before either a delivery
> appears or the end-of-stream is reached. If false is returned, the out
> parameter "result" is set to null, but LatestEvent is not updated."
>
> What value are you using for the timeout?  Does that function return
> true when the message is set to null?
>
> > It seems is the
> > way they are sent (maybe AMQP header properties?)...
>
> It's probably not related to the headers.
>
> Cheers,
> Alex
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111129/f8a4b7c1/attachment.htm>

From brunoac88 at gmail.com  Tue Nov 29 12:06:00 2011
From: brunoac88 at gmail.com (Bruno Carneiro)
Date: Tue, 29 Nov 2011 10:06:00 -0200
Subject: [rabbitmq-discuss] Rabbit Crashing
In-Reply-To: <CABzX+qzWJBHua-35g_OVGymJ+QzNsfOMVXW82XM19QWYhJBk=Q@mail.gmail.com>
References: <CAGy26MMymj4L-AAXG8oP0XTTts_uLvg0tOXTAFXqopAmweEaLg@mail.gmail.com>
	<CABzX+qzWJBHua-35g_OVGymJ+QzNsfOMVXW82XM19QWYhJBk=Q@mail.gmail.com>
Message-ID: <CAGy26MO79QSKKV_Fz+5OeXdOt7dCVN73bdQJ9i4fJYBAABMKYA@mail.gmail.com>

Merek,

Thank you! I installed the management plugin and I could see the file
descriptors increasing until the limit.
Then I set the limit using the command you suggest (ulimit -n).
Everything worked fine.
One more question, I would like to know where did you find
that  "{error,emfile}" is (errno 24 - "too many file descriptors opened").

Thank you again, you really help me!

Cheers,

Bruno Carneiro


2011/11/28 Marek Majkowski <majek04 at gmail.com>

> On Mon, Nov 28, 2011 at 18:57, Bruno Carneiro <brunoac88 at gmail.com> wrote:
> > Hi Folks,
> > I'm using Rabbit 2.6.1 with the plugins:
> > * amqp_client-2.6.1
> > * mochiweb-1.3-rmq2.6.1-git9a53dbd
> > * rabbitmq_jsonrpc-2.6.1
> > * rabbitmq_jsonrpc_channel-2.6.1
> > * rabbitmq_jsonrpc_channel_examples-2.6.1
> > * rabbitmq_mochiweb-2.6.1
> > * rfc4627_jsonrpc-2.6.1-git30c8498
> > * webmachine-1.7.0-rmq2.6.1-hg0c4b60a
> >
> > When I start Rabbit it goes down after a few minutes. Using list_queues I
> > get:
> > unable to connect to node rabbit at HackSprintFreud: nodedown
> > Logs:
> > =ERROR REPORT==== 28-Nov-2011::16:46:58 ===
> >     application: mochiweb
> >     "Accept failed error"
> >     "{error,emfile}"
>
>
> Just a blind guess:
>  EMFILE (errno 24 - "too many file descriptors opened")
>
> Maybe you have too many files opened? You can see
> the numbers using management plugin.
>
> On linux you can increase the limit by running
> `ulimit -n <number>`, but you have to be root.
>
> Usually, rabbit tries to optimize the usage of file descriptors,
> in case when you have many queues it can mean that rabbit
> opens loads of files. But as you open more and more network
> sockets the number of opened files should drop.
>
> This may not be a case for jsonrpc - AFAIK it doesn't have
> code for dealing with usual rabbitmq file descriptor
> counters. Theoretically in that case, when you have many
> files opened by jsonrpc - you may hit the wall.
>
> I suggest run the management plugin and checking the
> file descriptors counters, trying to get understanding about
> jsonrpc plugin usage. And increasing the file descriptor
> limit if necessary.
>
> Cheers,
>    Marek
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111129/1f7461bb/attachment.htm>

From andrea.rosa at hp.com  Tue Nov 29 12:25:40 2011
From: andrea.rosa at hp.com (Rosa, Andrea)
Date: Tue, 29 Nov 2011 12:25:40 +0000
Subject: [rabbitmq-discuss] Can consumers communicate back to producers?
In-Reply-To: <20111129093520.GB3575@southbank>
References: <2caf941d-9bf0-4c8c-9209-26542d2dd8f7@o11g2000prg.googlegroups.com>
	<20111129093520.GB3575@southbank>
Message-ID: <5F389C517756284F80239F55BCA5DDDD17D8DFDF@G9W0721.americas.hpqcorp.net>

Hi
 
> > For example, taking the basic "Hello World" case the producer sends a
> > message to the consumer. Is there a mechanism for the consumer to
> send
> > "Hello back to you" back to the producer?
> 
> AMQP does not have an automatic way to do this.
> 
> > Or does this involves
> > setting up a pair of Producers/Consumers and then selectively
> > receiving messages as per tutorial 4.
> 
> That sounds about right, though I'm not sure what you mean by
> *selectively* receiving messages.
> 
> I'd expect the producer to declare its own queue, and somehow let the
> consumer know about it; then, the consumer could just publish back to
> it.
> 
 I agree with Alex. In my application the producer declares a queue and an exchange and call them using a random id and in the message sent to the consumer there is the indication of this id.
The consumer when it receives the message publish back a reply on the exchange using the id found in the original message.
Hope this helps
--
Andrea

From majek04 at gmail.com  Tue Nov 29 12:53:20 2011
From: majek04 at gmail.com (Marek Majkowski)
Date: Tue, 29 Nov 2011 12:53:20 +0000
Subject: [rabbitmq-discuss] Rabbit Crashing
In-Reply-To: <CAGy26MO79QSKKV_Fz+5OeXdOt7dCVN73bdQJ9i4fJYBAABMKYA@mail.gmail.com>
References: <CAGy26MMymj4L-AAXG8oP0XTTts_uLvg0tOXTAFXqopAmweEaLg@mail.gmail.com>
	<CABzX+qzWJBHua-35g_OVGymJ+QzNsfOMVXW82XM19QWYhJBk=Q@mail.gmail.com>
	<CAGy26MO79QSKKV_Fz+5OeXdOt7dCVN73bdQJ9i4fJYBAABMKYA@mail.gmail.com>
Message-ID: <CABzX+qwM1wXchrMX47O_w4DYTaVNjtaSuThGJ4WHnjL-aB1LTA@mail.gmail.com>

On Tue, Nov 29, 2011 at 12:06, Bruno Carneiro <brunoac88 at gmail.com> wrote:
> Thank you! I installed the management plugin and I could see the file
> descriptors increasing until the limit.
> Then I set the limit using the command you suggest (ulimit -n).
> Everything worked fine.

Great. Rabbit usually behaves if it has enough room.
Monitoring memory, file descriptors, cpu and disk usage
is generally a good practice.

> One more question, I would like to know where did you find
> that??"{error,emfile}" is?(errno 24 - "too many file descriptors opened").

That was the easy part:
https://duckduckgo.com/?q=emfile

> Thank you again, you really help me!

Glad to hear that!

Cheers,
 Marek

> Cheers,
>
> Bruno Carneiro
>
>
> 2011/11/28 Marek Majkowski <majek04 at gmail.com>
>>
>> On Mon, Nov 28, 2011 at 18:57, Bruno Carneiro <brunoac88 at gmail.com> wrote:
>> > Hi Folks,
>> > I'm using Rabbit 2.6.1 with the plugins:
>> > * amqp_client-2.6.1
>> > * mochiweb-1.3-rmq2.6.1-git9a53dbd
>> > * rabbitmq_jsonrpc-2.6.1
>> > * rabbitmq_jsonrpc_channel-2.6.1
>> > * rabbitmq_jsonrpc_channel_examples-2.6.1
>> > * rabbitmq_mochiweb-2.6.1
>> > * rfc4627_jsonrpc-2.6.1-git30c8498
>> > * webmachine-1.7.0-rmq2.6.1-hg0c4b60a
>> >
>> > When I start Rabbit it goes down after a few minutes. Using list_queues
>> > I
>> > get:
>> > unable to connect to node rabbit at HackSprintFreud: nodedown
>> > Logs:
>> > =ERROR REPORT==== 28-Nov-2011::16:46:58 ===
>> > ? ? application: mochiweb
>> > ? ? "Accept failed error"
>> > ? ? "{error,emfile}"
>>
>>
>> Just a blind guess:
>> ?EMFILE (errno 24 - "too many file descriptors opened")
>>
>> Maybe you have too many files opened? You can see
>> the numbers using management plugin.
>>
>> On linux you can increase the limit by running
>> `ulimit -n <number>`, but you have to be root.
>>
>> Usually, rabbit tries to optimize the usage of file descriptors,
>> in case when you have many queues it can mean that rabbit
>> opens loads of files. But as you open more and more network
>> sockets the number of opened files should drop.
>>
>> This may not be a case for jsonrpc - AFAIK it doesn't have
>> code for dealing with usual rabbitmq file descriptor
>> counters. Theoretically in that case, when you have many
>> files opened by jsonrpc - you may hit the wall.
>>
>> I suggest run the management plugin and checking the
>> file descriptors counters, trying to get understanding about
>> jsonrpc plugin usage. And increasing the file descriptor
>> limit if necessary.
>>
>> Cheers,
>> ? ?Marek
>
>

From tonygarnockjones+rabbitmq at gmail.com  Tue Nov 29 13:44:15 2011
From: tonygarnockjones+rabbitmq at gmail.com (Tony Garnock-Jones)
Date: Tue, 29 Nov 2011 08:44:15 -0500
Subject: [rabbitmq-discuss] Best practice for supporting both,
 XML and JSON messages
In-Reply-To: <CA+0gB9=MimvqjVR6Q9wSSU7AaFEa28DsWfezUqTOjCZMi5Fetw@mail.gmail.com>
References: <CA+0gB9=MimvqjVR6Q9wSSU7AaFEa28DsWfezUqTOjCZMi5Fetw@mail.gmail.com>
Message-ID: <CAM8fPiTTNnPhgwg68M1+hw5fLAZZMRa2Hvb1rqFBdbKWA4P5-A@mail.gmail.com>

On 28 November 2011 20:49, Julio Polo <julio at hawaii.edu> wrote:

> Would it be unusual for a producer to publish two versions of every
> message, one in XML, another in JSON?   If it's not unusual, is the
> typical implementation to set up a separate exchange for each format?
>

That would work fine. Another possibility is that if you can mechanically
compute the one from the other, you might

   - make your producers emit one (say, the JSON)
   - have a special consumer program listening to the exchange for
   JSON-formatted messages, which
      - translates each message into XML, and
      - posts the translation back into the exchange (or a different one;
      or with a different routing key)

So long as you make sure to tag messages with their MIME type in the
content-type header, the translator process won't get confused. The benefit
is that your producers are simpler, and the logic for understanding the
equivalences between the JSON and the XML is gathered all in one place.

Regards,
  Tony
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111129/f4581454/attachment.htm>

From roey.berman at gmail.com  Tue Nov 29 13:55:17 2011
From: roey.berman at gmail.com (Roey Berman)
Date: Tue, 29 Nov 2011 15:55:17 +0200
Subject: [rabbitmq-discuss] publisher confirmations
In-Reply-To: <CAK=jQfGDBOPFt7d=c_+YtfFXtxiWBCxm_qbS7nXh27Zfgde+Vg@mail.gmail.com>
References: <2f9ce68b-ce6a-4a67-b650-8ab433e2e502@n10g2000vbg.googlegroups.com>
	<CABzX+qwFQ8MARZkkyt1h7+GrFY9p-YqGO4qNCbm_tXLAd+FTuA@mail.gmail.com>
	<CAK=jQfHedRCKjRRaTpkJyg7w80mFRxG-dQc=h3OaBrKqYZnrGw@mail.gmail.com>
	<CAK=jQfHR5TtR3yCCzRErRtZ7mNGJQbdpYP+T9LpBn8V5+T33UA@mail.gmail.com>
	<CABzX+qz8-yKwhvhkD+=YbNUkBfecHShtQobD5VUaV1_4-NbWhQ@mail.gmail.com>
	<CAK=jQfGDBOPFt7d=c_+YtfFXtxiWBCxm_qbS7nXh27Zfgde+Vg@mail.gmail.com>
Message-ID: <CAK=jQfG1wV1Ey+c8RTOOWdG-jOEQvFU91LGo2Ou=JnPs32BKDQ@mail.gmail.com>

I've created a pull request which fixes the demo:
https://github.com/pika/pika/pull/109

Note:
The stable pika release (0.9.5) doesn't add the Basic.Nack and
Confirm.SelectOk callbacks when you call channel.confirm_delivery()
you'll explicitly have to call channel.add_callback(on_delivered,
['Basic.Nack', 'Confirm.SelectOk'])

Would you recommend using the git master version of pika or 0.9.5 for a
production environment?

On Mon, Nov 28, 2011 at 1:53 PM, Roey Berman <roey.berman at gmail.com> wrote:

> Thanks again for the quick response.
>
> I also read http://www.rabbitmq.com/extensions.html#publishing before
> posting this question.
>
> But again my problem is with simulating server nacks so i can create a
> test case for my code.
>
> Do you have any idea how I can do that?
>
> On Mon, Nov 28, 2011 at 1:26 PM, Marek Majkowski <majek04 at gmail.com>wrote:
>
>> On Mon, Nov 28, 2011 at 11:11, Roey Berman <roey.berman at gmail.com> wrote:
>> > Oh one fix:
>> > self.chan.basic_publish(message, **kwargs)
>> -> self.chan.basic_publish(body =
>> > message, **kwargs)
>> >
>> > On Mon, Nov 28, 2011 at 1:08 PM, Roey Berman <roey.berman at gmail.com>
>> wrote:
>> >>
>> >> Thanks for the quick reply.
>> >> At first I used the code from the example you referred me to but it
>> >> doesn't handle the "multiple" flag and NAcks from the server.
>> >> I know my code handles the "multiple" flag, but don't know about NAcks.
>> >> I don't really know how to test for nacks since I've never gotten them
>> >> from rabbitmq server.
>>
>> http://www.rabbitmq.com/extensions.html#publishing
>>
>> "In exceptional cases when the broker is unable to handle messages
>> successfully, instead of a basic.ack, the broker will send a
>> basic.nack. In this context, fields of the basic.nack have the same
>> meaning as the corresponding ones in basic.ack and the requeue field
>> should be ignored. By nack'ing one or more messages, the broker
>> indicates that it was unable to process the messages and refuses
>> responsibility for them; at that point, the client may choose to
>> re-publish the messages.
>>
>> After a channel is put into confirm mode, all subsequently published
>> messages will be confirmed or nack'd once. No guarantees are made as
>> to how soon a message is confirmed. No message will be both confirmed
>> and nack'd."
>>
>> That's all I know.
>>
>>
>> >> Once I know my code handles all responses correctly I will create a
>> pull
>> >> request for the pika example code.
>>
>> Good!
>>
>> Marek
>>
>>
>> >> On Mon, Nov 28, 2011 at 1:01 PM, Marek Majkowski <majek04 at gmail.com>
>> >> wrote:
>> >>>
>> >>> Hi,
>> >>>
>> >>> I'm not sure if it works - but the pika example showing
>> >>> publisher confirms usage looks rather similar:
>> >>>
>> >>>
>> >>>
>> https://github.com/pika/pika/blob/120fdea5913e7ed80536ff55634ab0f8f4554e79/examples/demo_send_confirmed.py
>> >>>
>> >>> Cheer,
>> >>>  Marek
>> >>>
>> >>> On Sun, Nov 27, 2011 at 15:20, bergundy <roey.berman at gmail.com>
>> wrote:
>> >>> > Hi everyone,
>> >>> >
>> >>> > I couldn't find code for implementing publisher confirmations.
>> >>> >
>> >>> > I wrote this piece of code using pika 0.9.5 (python client).
>> >>> > Would like to get feedback on this, I hope I got it right ...
>> >>> >
>> >>> > ---
>> >>> > class ConfirmingProducer(object):
>> >>> >    def __init__(self, channel):
>> >>> >        self.delivery_tag = 1
>> >>> >        self.acked        = 0
>> >>> >        self._callbacks   = {}
>> >>> >        self.chan = channel
>> >>> >        self.chan.confirm_delivery(self.on_delivered)
>> >>> >
>> >>> >    def publish(self, message, callback, **kwargs):
>> >>> >        self._callbacks[self.delivery_tag] = callback
>> >>> >        self.delivery_tag += 1
>> >>> >        self.chan.basic_publish(message, **kwargs)
>> >>> >
>> >>> >    def on_delivered(self, frame):
>> >>> >        success = isinstance(frame.method, pika.spec.Basic.Ack)
>> >>> >
>> >>> >        if frame.method.multiple:
>> >>> >            for dtag in range(self.acked+1, frame.method.delivery_tag
>> >>> > +1):
>> >>> >                self._callbacks.pop(dtag)(success)
>> >>> >            self.acked = frame.method.delivery_tag
>> >>> >        else:
>> >>> >            self._callbacks.pop(frame.method.delivery_tag)(success)
>> >>> >            self.acked += 1
>> >>> > _______________________________________________
>> >>> > rabbitmq-discuss mailing list
>> >>> > rabbitmq-discuss at lists.rabbitmq.com
>> >>> >
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>> >>> >
>> >>
>> >
>> >
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111129/363a6253/attachment.htm>

From msteele at beringmedia.com  Tue Nov 29 14:40:15 2011
From: msteele at beringmedia.com (Mark Steele)
Date: Tue, 29 Nov 2011 09:40:15 -0500
Subject: [rabbitmq-discuss] Shovel messages get lost or stay
	unacknowledged.
In-Reply-To: <4ED4BA0C.1000805@rabbitmq.com>
References: <14498961.743.1321609401734.JavaMail.geo-discussion-forums@yqcm23>
	<4EC63920.9060507@rabbitmq.com>
	<12407363.681.1322555836806.JavaMail.geo-discussion-forums@yqim9>
	<4ED4BA0C.1000805@rabbitmq.com>
Message-ID: <CAH24rBPOSnpS3b9whD04ccTZvBmYL2CFbPBcYXJvvZKbTT=yzQ@mail.gmail.com>

We've seen similar issues with long lived connections being killed by
firewalls. I'd recommend Rabbit add TCP_KEEPALIVE to the socket options.
We've worked around it by using libkeepalive (
http://libkeepalive.sourceforge.net/) to force the rabbit server to do
this, but it'd be nice if it was an option that was baked in.

Mark Steele, CISSP, CSM
Bering Media Inc.


On Tue, Nov 29, 2011 at 5:55 AM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 29/11/11 08:37, Jelle Smet wrote:
>
>> I have defined a heartbeat for each configured connection Shovel
>> creates. (?heartbeat=5)
>> I haven't run into the same issue ever since, ...
>>
>
> Well, that's good news at least. It's possible some networking thing
> somewhere in between might be failing to route packets for TCP connections
> that have been idle for a while. We've seen intimations of such things
> before I think.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> ______________________________**_________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111129/a45aae34/attachment.htm>

From gmr at myyearbook.com  Tue Nov 29 14:58:32 2011
From: gmr at myyearbook.com (Gavin M. Roy)
Date: Tue, 29 Nov 2011 09:58:32 -0500
Subject: [rabbitmq-discuss] publisher confirmations
In-Reply-To: <CAK=jQfG1wV1Ey+c8RTOOWdG-jOEQvFU91LGo2Ou=JnPs32BKDQ@mail.gmail.com>
References: <2f9ce68b-ce6a-4a67-b650-8ab433e2e502@n10g2000vbg.googlegroups.com>
	<CABzX+qwFQ8MARZkkyt1h7+GrFY9p-YqGO4qNCbm_tXLAd+FTuA@mail.gmail.com>
	<CAK=jQfHedRCKjRRaTpkJyg7w80mFRxG-dQc=h3OaBrKqYZnrGw@mail.gmail.com>
	<CAK=jQfHR5TtR3yCCzRErRtZ7mNGJQbdpYP+T9LpBn8V5+T33UA@mail.gmail.com>
	<CABzX+qz8-yKwhvhkD+=YbNUkBfecHShtQobD5VUaV1_4-NbWhQ@mail.gmail.com>
	<CAK=jQfGDBOPFt7d=c_+YtfFXtxiWBCxm_qbS7nXh27Zfgde+Vg@mail.gmail.com>
	<CAK=jQfG1wV1Ey+c8RTOOWdG-jOEQvFU91LGo2Ou=JnPs32BKDQ@mail.gmail.com>
Message-ID: <A62CED95F8064668AF5E0B4BA1C75EC3@myyearbook.com>

I am not using it in production yet, but we do have all of those features in github Master, 0.9.6p0. I am in process of writing tests and cleaning up 0.9.6 for release.

Test it and see if it works for you. I'd not be concerned about production use if you do not run into any issues.

Gavin 


On Tuesday, November 29, 2011 at 8:55 AM, Roey Berman wrote:

> I've created a pull request which fixes the demo: https://github.com/pika/pika/pull/109
> 
> Note:
> The stable pika release (0.9.5) doesn't add the Basic.Nack and Confirm.SelectOk callbacks when you call channel.confirm_delivery()
> you'll explicitly have to call channel.add_callback(on_delivered, ['Basic.Nack', 'Confirm.SelectOk'])
> 
> 
> Would you recommend using the git master version of pika or 0.9.5 for a production environment? 
> On Mon, Nov 28, 2011 at 1:53 PM, Roey Berman <roey.berman at gmail.com (mailto:roey.berman at gmail.com)> wrote:
> > Thanks again for the quick response.
> > 
> > I also read http://www.rabbitmq.com/extensions.html#publishing before posting this question. 
> > 
> > But again my problem is with simulating server nacks so i can create a test case for my code.
> > 
> > Do you have any idea how I can do that?
> > 
> > On Mon, Nov 28, 2011 at 1:26 PM, Marek Majkowski <majek04 at gmail.com (mailto:majek04 at gmail.com)> wrote:
> > > On Mon, Nov 28, 2011 at 11:11, Roey Berman <roey.berman at gmail.com (mailto:roey.berman at gmail.com)> wrote:
> > > > Oh one fix:
> > > > self.chan.basic_publish(message, **kwargs) -> self.chan.basic_publish(body =
> > > > message, **kwargs)
> > > >
> > > > On Mon, Nov 28, 2011 at 1:08 PM, Roey Berman <roey.berman at gmail.com (mailto:roey.berman at gmail.com)> wrote:
> > > >>
> > > >> Thanks for the quick reply.
> > > >> At first I used the code from the example you referred me to but it
> > > >> doesn't handle the "multiple" flag and NAcks from the server.
> > > >> I know my code handles the "multiple" flag, but don't know about NAcks.
> > > >> I don't really know how to test for nacks since I've never gotten them
> > > >> from rabbitmq server.
> > > 
> > > http://www.rabbitmq.com/extensions.html#publishing
> > > 
> > > "In exceptional cases when the broker is unable to handle messages
> > > successfully, instead of a basic.ack, the broker will send a
> > > basic.nack. In this context, fields of the basic.nack have the same
> > > meaning as the corresponding ones in basic.ack and the requeue field
> > > should be ignored. By nack'ing one or more messages, the broker
> > > indicates that it was unable to process the messages and refuses
> > > responsibility for them; at that point, the client may choose to
> > > re-publish the messages.
> > > 
> > > After a channel is put into confirm mode, all subsequently published
> > > messages will be confirmed or nack'd once. No guarantees are made as
> > > to how soon a message is confirmed. No message will be both confirmed
> > > and nack'd."
> > > 
> > > That's all I know.
> > > 
> > > 
> > > >> Once I know my code handles all responses correctly I will create a pull
> > > >> request for the pika example code.
> > > 
> > > Good!
> > > 
> > > Marek
> > > 
> > > 
> > > >> On Mon, Nov 28, 2011 at 1:01 PM, Marek Majkowski <majek04 at gmail.com (mailto:majek04 at gmail.com)>
> > > >> wrote:
> > > >>>
> > > >>> Hi,
> > > >>>
> > > >>> I'm not sure if it works - but the pika example showing
> > > >>> publisher confirms usage looks rather similar:
> > > >>>
> > > >>>
> > > >>> https://github.com/pika/pika/blob/120fdea5913e7ed80536ff55634ab0f8f4554e79/examples/demo_send_confirmed.py
> > > >>>
> > > >>> Cheer,
> > > >>>  Marek
> > > >>>
> > > >>> On Sun, Nov 27, 2011 at 15:20, bergundy <roey.berman at gmail.com (mailto:roey.berman at gmail.com)> wrote:
> > > >>> > Hi everyone,
> > > >>> >
> > > >>> > I couldn't find code for implementing publisher confirmations.
> > > >>> >
> > > >>> > I wrote this piece of code using pika 0.9.5 (python client).
> > > >>> > Would like to get feedback on this, I hope I got it right ...
> > > >>> >
> > > >>> > ---
> > > >>> > class ConfirmingProducer(object):
> > > >>> >    def __init__(self, channel):
> > > >>> >        self.delivery_tag = 1
> > > >>> >        self.acked        = 0
> > > >>> >        self._callbacks   = {}
> > > >>> >        self.chan = channel
> > > >>> >        self.chan.confirm_delivery(self.on_delivered)
> > > >>> >
> > > >>> >    def publish(self, message, callback, **kwargs):
> > > >>> >        self._callbacks[self.delivery_tag] = callback
> > > >>> >        self.delivery_tag += 1
> > > >>> >        self.chan.basic_publish(message, **kwargs)
> > > >>> >
> > > >>> >    def on_delivered(self, frame):
> > > >>> >        success = isinstance(frame.method, pika.spec.Basic.Ack)
> > > >>> >
> > > >>> >        if frame.method.multiple:
> > > >>> >            for dtag in range(self.acked+1, frame.method.delivery_tag
> > > >>> > +1):
> > > >>> >                self._callbacks.pop(dtag)(success)
> > > >>> >            self.acked = frame.method.delivery_tag
> > > >>> >        else:
> > > >>> >            self._callbacks.pop(frame.method.delivery_tag)(success)
> > > >>> >            self.acked += 1
> > > >>> > _______________________________________________
> > > >>> > rabbitmq-discuss mailing list
> > > >>> > rabbitmq-discuss at lists.rabbitmq.com (mailto:rabbitmq-discuss at lists.rabbitmq.com)
> > > >>> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> > > >>> >
> > > >>
> > > >
> > > >
> > 
> 
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com (mailto:rabbitmq-discuss at lists.rabbitmq.com)
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 
> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111129/d39ed50d/attachment.htm>

From matthias at rabbitmq.com  Tue Nov 29 15:17:06 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 29 Nov 2011 15:17:06 +0000
Subject: [rabbitmq-discuss] Shovel messages get lost or
	stay	unacknowledged.
In-Reply-To: <CAH24rBPOSnpS3b9whD04ccTZvBmYL2CFbPBcYXJvvZKbTT=yzQ@mail.gmail.com>
References: <14498961.743.1321609401734.JavaMail.geo-discussion-forums@yqcm23>	<4EC63920.9060507@rabbitmq.com>	<12407363.681.1322555836806.JavaMail.geo-discussion-forums@yqim9>	<4ED4BA0C.1000805@rabbitmq.com>
	<CAH24rBPOSnpS3b9whD04ccTZvBmYL2CFbPBcYXJvvZKbTT=yzQ@mail.gmail.com>
Message-ID: <4ED4F772.70402@rabbitmq.com>

Mark,

On 29/11/11 14:40, Mark Steele wrote:
> We've seen similar issues with long lived connections being killed by
> firewalls. I'd recommend Rabbit add TCP_KEEPALIVE to the socket options.
> We've worked around it by using libkeepalive
> (http://libkeepalive.sourceforge.net/) to force the rabbit server to do
> this, but it'd be nice if it was an option that was baked in.

You can control Rabbit's tcp options through the Erlang kernel app's 
inet_default_connect_options and inet_default_listen_options. See 
http://www.erlang.org/doc/man/inet.html

However, iirc some firewalls suppress keepalive. AMQP's heartbeats 
provide a more reliable mechanisms.

Regards,

Matthias.

From simon at rabbitmq.com  Tue Nov 29 15:18:47 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 29 Nov 2011 15:18:47 +0000
Subject: [rabbitmq-discuss] Shovel messages get lost or
	stay	unacknowledged.
In-Reply-To: <4ED4F772.70402@rabbitmq.com>
References: <14498961.743.1321609401734.JavaMail.geo-discussion-forums@yqcm23>	<4EC63920.9060507@rabbitmq.com>	<12407363.681.1322555836806.JavaMail.geo-discussion-forums@yqim9>	<4ED4BA0C.1000805@rabbitmq.com>
	<CAH24rBPOSnpS3b9whD04ccTZvBmYL2CFbPBcYXJvvZKbTT=yzQ@mail.gmail.com>
	<4ED4F772.70402@rabbitmq.com>
Message-ID: <4ED4F7D7.1020105@rabbitmq.com>

On 29/11/11 15:17, Matthias Radestock wrote:
> You can control Rabbit's tcp options through the Erlang kernel app's
> inet_default_connect_options and inet_default_listen_options. See
> http://www.erlang.org/doc/man/inet.html

Or through RabbitMQ's tcp_listen_options, see 
http://www.rabbitmq.com/configure.html#configuration-file

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From steve.flitcroft at gmail.com  Tue Nov 29 16:25:04 2011
From: steve.flitcroft at gmail.com (steve flitcroft)
Date: Tue, 29 Nov 2011 08:25:04 -0800 (PST)
Subject: [rabbitmq-discuss] Cannot get 3 Node cluster to work
Message-ID: <32b7af80-af0d-45bc-80e3-f85cbda0dffd@i8g2000vbh.googlegroups.com>

Hi All,

I am having issues getting a 3 node cluster to work. I am able to
cluster any combination of the 3 nodes with each other however when i
try to join the third node into the cluster it keeps telling me that
"Mnesia could not connect to some nodes".

All nodes can ping each other, I can see the status of all nodes from
each other when running sudo rabbitmqctl -n <node> status, all share
the same cookie and all the host file entries are correct. Is there
anything extra that I need to allow 3 nodes to be clustered.

I am running three ubuntu vm's on a win 7 desktop, I setup the first
vm and cloned the other two from it then changed hostnames etc.
RabbitMQ version 2.7.0 and erlang R14B02


Any thoughts would be welcomed and be gentle as I am a linux novice.

Thanks

From 0x6e6562 at gmail.com  Tue Nov 29 18:16:50 2011
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Tue, 29 Nov 2011 18:16:50 +0000
Subject: [rabbitmq-discuss] Debugging AD
Message-ID: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>

Hi,

I'm trying to see if I can get 2.7.0 (RHEL 2.6.18-274.3.1.el5, OTP
R14B03) to authenticate against a corporate AD.

The first iteration of my /etc/rabbitmq/rabbitmq.config looks like this:

--------------------------------------------

{rabbit, [{auth_backends, [rabbit_auth_backend_ldap,
rabbitmq_auth_backend_internal]}]  },

%% I'm assuming that the internal DB does not use the _mq suffix,
whereas the ldap backend module
%% appears to derive it's origin from rabbitmq_auth_backend_ldap.app,
which seems to get tarred into the rabbitmq_auth_backend_ldap-2.7.0.ez

 {rabbitmq_auth_backend_ldap,
 [ {servers,               ["ad.acme.com"]},
   {user_dn_pattern,
"(sAMAccountName=${username}),DC=global,DC=acme,DC=Com"},

 %% Leave this commented out for now, so that we can get the basic
LDAP handshake going
 %%  {resource_access_query,
 %%    {for, [{resource, exchange,{for, [{permission, configure,
 %%                                       { in_group,
"cn=acme,ou=groups,dc=acme,dc=com" }
 %%                                      },
 %%                                      {permission, write, {constant, true}},
 %%                                      {permission, read,  {constant, true}}
 %%                                     ]}},
 %%           {resource, queue, {constant, true}} ]}},
 %%    {tag_queries,           [{administrator, {constant, false}}]},

     {use_ssl,               false},
     {port,                  389},
     {log,                   true} ] }
].

--------------------------------------------

However, the effect of this is that the management plugin no longer
responds to any requests (I haven't yet tried to establish an AMQP
connection yet). This is what I gleaned from the SASL log:

=CRASH REPORT==== 29-Nov-2011::18:06:59 ===
  crasher:
    initial call: mochiweb_acceptor:init/3
    pid: <0.288.0>
    registered_name: []
    exception error: undefined function
rabbitmq_auth_backend_ldap:check_user_login/2
      in function  rabbit_access_control:'-check_user_login/2-fun-0-'/4
      in call from lists:foldl/3
      in call from rabbit_mgmt_app:'-make_loop/0-fun-0-'/4
      in call from mochiweb_http:headers/5
    ancestors: [rabbit_mochiweb_web_mgmt,rabbit_mochiweb_sup,<0.127.0>]
    messages: []
    links: [<0.226.0>,#Port<0.5315>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 4181
    stack_size: 24
    reductions: 1490
  neighbours:


Looking at the source code of the app, the auth backend behavior
appears to be implemented in the rabbit_auth_backend_ldap module (sans
mq). So I've tried a few different combinations of mq/no mq in
rabbitmq.config, to no avail.

Does anybody know which way round I should define the mq in rabbitmq.config?

Cheers,

Ben

From matthias at rabbitmq.com  Tue Nov 29 18:33:49 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 29 Nov 2011 18:33:49 +0000
Subject: [rabbitmq-discuss] Debugging AD
In-Reply-To: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>
References: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>
Message-ID: <4ED5258D.3050000@rabbitmq.com>

Ben,

On 29/11/11 18:16, Ben Hood wrote:
> The first iteration of my /etc/rabbitmq/rabbitmq.config looks like this:
>
> --------------------------------------------
>
> {rabbit, [{auth_backends, [rabbit_auth_backend_ldap,
> rabbitmq_auth_backend_internal]}]  },

Those should all be sans mq, since they refer to module names. So the 
second one is wrong.

>   {rabbitmq_auth_backend_ldap,

Correct. This is referring to the app/plugin.

> However, the effect of this is that the management plugin no longer
> responds to any requests (I haven't yet tried to establish an AMQP
> connection yet). This is what I gleaned from the SASL log:
>
> =CRASH REPORT==== 29-Nov-2011::18:06:59 ===
>    crasher:
>      initial call: mochiweb_acceptor:init/3
>      pid:<0.288.0>
>      registered_name: []
>      exception error: undefined function
> rabbitmq_auth_backend_ldap:check_user_login/2
>        in function  rabbit_access_control:'-check_user_login/2-fun-0-'/4
>        in call from lists:foldl/3
>        in call from rabbit_mgmt_app:'-make_loop/0-fun-0-'/4
>        in call from mochiweb_http:headers/5

You'd get the above if the auth_backends config entry contained 
rabbitmq_auth_backend_ldap, which, as per the above, should be 
rabbit_auth_backend_ldap instead. That's what you have in the config you 
posted though, so I suspect the error is from a different run.

Regards,

Matthias.

From 0x6e6562 at gmail.com  Tue Nov 29 18:49:29 2011
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Tue, 29 Nov 2011 18:49:29 +0000
Subject: [rabbitmq-discuss] Debugging AD
In-Reply-To: <4ED5258D.3050000@rabbitmq.com>
References: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>
	<4ED5258D.3050000@rabbitmq.com>
Message-ID: <CAB-G1jge97D02yL+2uuHEOpvKE3_C93BWAO9dTDzFUBdXXi+zg@mail.gmail.com>

Matthias,

On Tue, Nov 29, 2011 at 6:33 PM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
> You'd get the above if the auth_backends config entry contained
> rabbitmq_auth_backend_ldap, which, as per the above, should be
> rabbit_auth_backend_ldap instead. That's what you have in the config you
> posted though, so I suspect the error is from a different run.

In the meantime, I've discovered what the issue was. When I activated
the plugin, I only activated the eldap module, not
rabbitmq_auth_backend_ldap. So after activating that, the LDAP query
appears to get submitting to the AD server.

However, now I appear to have problems with pushing my credentials through:

=INFO REPORT==== 29-Nov-2011::18:33:42 ===
LDAP backend: connecting to ["ad.acme.com"]

=INFO REPORT==== 29-Nov-2011::18:33:42 ===
LDAP backend: bind request = {'BindRequest',3,

"(sAMAccountName=ben.hood),DC=global,DC=acme,DC=Com",

{simple,<<"MLc#hv>Bk.Tr?M}$?TmruKNTaLXk{sDhmdLWoTC=xjcCWRP?g">>}}

=INFO REPORT==== 29-Nov-2011::18:33:42 ===
LDAP backend: bind reply = {ok,
                            {'LDAPMessage',1,
                             {bindResponse,
                              {'BindResponse',invalidCredentials,[],
                               [56,48,48,57,48,51,48,56,58,32,76,100,97,112,
                                69,114,114,58,32,68,83,73,68,45,48,67,48,57,
                                48,51,65,57,44,32,99,111,109,109,101,110,116,
                                58,32,65,99,99,101,112,116,83,101,99,117,114,
                                105,116,121,67,111,110,116,101,120,116,32,101,
                                114,114,111,114,44,32,100,97,116,97,32,53,50,
                                101,44,32,118,49,100,98,48,0],
                               asn1_NOVALUE,asn1_NOVALUE}},
                             asn1_NOVALUE}}

On other configurations that are known to work with this particular AD
server have to supply a AD username and password to submit the query,
so I was wondering whether I can configure this somewhere in the
rabbitmq.config?

Cheers,

Ben

From matthias at rabbitmq.com  Tue Nov 29 18:55:04 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 29 Nov 2011 18:55:04 +0000
Subject: [rabbitmq-discuss] Debugging AD
In-Reply-To: <CAB-G1jge97D02yL+2uuHEOpvKE3_C93BWAO9dTDzFUBdXXi+zg@mail.gmail.com>
References: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>	<4ED5258D.3050000@rabbitmq.com>
	<CAB-G1jge97D02yL+2uuHEOpvKE3_C93BWAO9dTDzFUBdXXi+zg@mail.gmail.com>
Message-ID: <4ED52A88.7030808@rabbitmq.com>

Ben,

On 29/11/11 18:49, Ben Hood wrote:
> In the meantime, I've discovered what the issue was. When I
> activated the plugin, I only activated the eldap module, not
> rabbitmq_auth_backend_ldap. So after activating that, the LDAP query
> appears to get submitting to the AD server.

Just activating rabbitmq_auth_backend_ldap should be sufficient since it
has eldap as a dependency.

> However, now I appear to have problems with pushing my credentials
> through: [...] On other configurations that are known to work with
> this particular AD server have to supply a AD username and password
> to submit the query, so I was wondering whether I can configure this
> somewhere in the rabbitmq.config?

I'm guessing the other_bind option might help here.

Matthias.

From julio at hawaii.edu  Tue Nov 29 19:38:08 2011
From: julio at hawaii.edu (Julio Polo)
Date: Tue, 29 Nov 2011 09:38:08 -1000
Subject: [rabbitmq-discuss] Best practice for supporting both,
 XML and JSON messages
In-Reply-To: <CAM8fPiTTNnPhgwg68M1+hw5fLAZZMRa2Hvb1rqFBdbKWA4P5-A@mail.gmail.com>
References: <CA+0gB9=MimvqjVR6Q9wSSU7AaFEa28DsWfezUqTOjCZMi5Fetw@mail.gmail.com>
	<CAM8fPiTTNnPhgwg68M1+hw5fLAZZMRa2Hvb1rqFBdbKWA4P5-A@mail.gmail.com>
Message-ID: <CA+0gB9mXK3HWL5nCjpdOKb-pBY7CjTmkd1tCdiiqcMTRttSWZw@mail.gmail.com>

Thanks everyone, so it sounds like it is not a huge aberration to
publish multiple representations of the same message.  I'll make sure
to set Content-type as well.  Tony, that's an interesting idea,
creating a separate process to do the translation.

Julio Polo
University of Hawaii

On Tue, Nov 29, 2011 at 3:44 AM, Tony Garnock-Jones
<tonygarnockjones+rabbitmq at gmail.com> wrote:
> On 28 November 2011 20:49, Julio Polo <julio at hawaii.edu> wrote:
>>
>> Would it be unusual for a producer to publish two versions of every
>> message, one in XML, another in JSON? ? If it's not unusual, is the
>> typical implementation to set up a separate exchange for each format?
>
> That would work fine. Another possibility is that if you can mechanically
> compute the one from the other, you might
>
> make your producers emit one (say, the JSON)
> have a special consumer program listening to the exchange for JSON-formatted
> messages, which
>
> translates each message into XML, and
> posts the translation back into the exchange (or a different one; or with a
> different routing key)
>
> So long as you make sure to tag messages with their MIME type in the
> content-type header, the translator process won't get confused. The benefit
> is that your producers are simpler, and the logic for understanding the
> equivalences between the JSON and the XML is gathered all in one place.
>
> Regards,
> ? Tony
>

From cpthk at hotmail.com  Tue Nov 29 21:31:55 2011
From: cpthk at hotmail.com (Jeffrey Chen)
Date: Tue, 29 Nov 2011 13:31:55 -0800
Subject: [rabbitmq-discuss] publisher confirm ack nack ordering
Message-ID: <BLU149-W22FD94D25BC2E51BABD5A2ABB30@phx.gbl>


Hi:

I am wondering if I have this sequence of publishing:
1 success
2 success
3 fail
4 success
5 fail
6 fail
7 success

Will the Ack and the Nack come in the sequence order:
(1, Ack) -> (2, Ack) -> (3, Nack) -> (4, Ack) -> (5, Nack) -> (6, Nack) -> (7, Ack)

Or they could come in a different order?

Thanks.
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111129/cd8fd68f/attachment.htm>

From CLefevre at Transparent.com  Tue Nov 29 21:33:08 2011
From: CLefevre at Transparent.com (Christopher Lefevre)
Date: Tue, 29 Nov 2011 21:33:08 +0000
Subject: [rabbitmq-discuss] Publish on a queue, Wait for Reply on another,
 add time out for the monitor (Select Connection)
Message-ID: <5798631D5F355D4C99FDF23580295AF8187B6C43@TLMAIL1.Transparent.local>

Hello,
I'm trying to do EXACTLY THIS:
http://stackoverflow.com/questions/2799731/wait-for-a-single-rabbitmq-message-with-a-timeout
However I'm using Pika for all of my RabbitMQ communications, and unfortunately the "Answer" is just "Fixed" which isn't really applicable to use in my situation.

For a quick summary, I'm trying to send a message to RabbitMQ, then wait on a reply from the workers on the other side of the RabbitMQ queue on an exclusive queue. I would like to have a timeout setting on the monitor to wait for the message, just in case the server is down, or taking an absurd amount of time.

For details on the connections, I've coded a synchronous publisher that uses one Select connection to connect to RabbitMQ, publishes the message on one channel, and consumes on a UUID channel.


From christian.weyer.cw at gmail.com  Tue Nov 29 21:42:44 2011
From: christian.weyer.cw at gmail.com (Christian Weyer)
Date: Tue, 29 Nov 2011 13:42:44 -0800 (PST)
Subject: [rabbitmq-discuss] Silent installation on Windows
In-Reply-To: <3e4895a1-8528-4557-b0a7-c2e8e74fbec7@h42g2000yqd.googlegroups.com>
References: <3e4895a1-8528-4557-b0a7-c2e8e74fbec7@h42g2000yqd.googlegroups.com>
Message-ID: <061f5b5f-39af-4b4e-9837-03e2ca62b6ea@j10g2000vbe.googlegroups.com>

FYI: something like this works:

start /w otp_win32_R14B04.exe /S /D=c:\tools\erlang
c:\tools\7zip\7za.exe x -oc:\tools\rabbitmq rabbitmq-server-
windows-2.7.0.zip
set ERLANG_HOME=c:\tools\erlang
c:\tools\rabbitmq\rabbitmq_server-2.7.0\sbin\rabbitmq-server.bat



On Nov 29, 11:39?am, Christian Weyer <christian.weyer... at gmail.com>
wrote:
> Hi all,
>
> has anybody ever tried and managed to get RabbitMQ (and Erlang)
> installed in completely silent mode on Windows?
> Thanks.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From matthias at rabbitmq.com  Tue Nov 29 21:49:02 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 29 Nov 2011 21:49:02 +0000
Subject: [rabbitmq-discuss] publisher confirm ack nack ordering
In-Reply-To: <BLU149-W22FD94D25BC2E51BABD5A2ABB30@phx.gbl>
References: <BLU149-W22FD94D25BC2E51BABD5A2ABB30@phx.gbl>
Message-ID: <4ED5534E.3010305@rabbitmq.com>

On 29/11/11 21:31, Jeffrey Chen wrote:
> I am wondering if I have this sequence of publishing:
> 1 success
> 2 success
> 3 fail
> 4 success
> 5 fail
> 6 fail
> 7 success
>
> Will the Ack and the Nack come in the sequence order:
> (1, Ack) -> (2, Ack) -> (3, Nack) -> (4, Ack) -> (5, Nack) -> (6, Nack)
> -> (7, Ack)
>
> Or they could come in a different order?

The latter.

Note that you are very unlikely to ever see nacks. Something would have 
to go seriously, and unexpectedly, wrong. Even with just acks though, 
the server may send them out in any order.

Matthias.

From andrew.maizels at gmail.com  Wed Nov 30 03:46:08 2011
From: andrew.maizels at gmail.com (Andrew Maizels)
Date: Wed, 30 Nov 2011 14:46:08 +1100
Subject: [rabbitmq-discuss] Message TTL working fine in 2.6.1,
	broken in 2.7.0?
Message-ID: <CACETAqiGo9hSGYxEr-zbL-aZ3Zm0eUJ5bkh-7Qm3A3gHfYD9sg@mail.gmail.com>

Hi.

We push about 1TB of data through RabbitMQ per day, and we use TTL-limited
queues extensively to prevent slow/dead consumers from taking out the
server.  While we had some hiccups with 2.5, this has been completely
reliable since we upgraded to 2.6.

2.7, on the other hand, seems to ignore TTL limits.  We had a slow consumer
leave about 1.8 million 40KB messages on the queue, which filled up the
available disk and brought RabbitMQ down.

We've reverted to 2.6.1 for now, and everything is working again.

Has anyone else experienced this?  Is there anything we need to configure
in 2.7 to make TTL work as expected, or is this a bug?

The queues are durable and bound to a single exchange; no special
parameters apart from the TTL, which is typically 600000 milliseconds.

Thanks,

Andrew Maizels
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111130/cba7057e/attachment.htm>

From matthias at rabbitmq.com  Wed Nov 30 07:42:46 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 30 Nov 2011 07:42:46 +0000
Subject: [rabbitmq-discuss] Message TTL working fine in 2.6.1,
 broken in 2.7.0?
In-Reply-To: <CACETAqiGo9hSGYxEr-zbL-aZ3Zm0eUJ5bkh-7Qm3A3gHfYD9sg@mail.gmail.com>
References: <CACETAqiGo9hSGYxEr-zbL-aZ3Zm0eUJ5bkh-7Qm3A3gHfYD9sg@mail.gmail.com>
Message-ID: <4ED5DE76.6060603@rabbitmq.com>

Andrew,

On 30/11/11 03:46, Andrew Maizels wrote:
> 2.7 seems to ignore TTL limits.

TTLs in 2.7 certainly can't be broken completely; we have tests that 
check that.

In fact they should work *better* in 2.7 in that requeued messages 
retain their original TTL rather than getting a fresh one.

> We had a slow  consumer leave about 1.8 million 40KB messages on the
> queue, which filled up the available disk and brought RabbitMQ down.
> The queues are durable and bound to a single exchange; no special
> parameters apart from the TTL, which is typically 600000
> milliseconds.

Were these 1.8 million messages the result of a relatively steady 
inbound stream? Over what period of time?

Can a single message get routed to multiple queues?

What memory limit does rabbit think it has (check the log for an entry like:
=INFO REPORT==== 28-Nov-2011::12:14:40 ===
Memory limit set to 4815MB of 12037MB total.
)?

Do you still have the log files from the time it failed?

> We've reverted to 2.6.1 for now, and everything is working again.

Is there any chance you could go back to 2.7.0, perhaps in a test setup, 
and see whether you can replicate the problem? If you do then taking a 
snapshot of the database dir at the time, together with the output of 
'rabbitmqctl report' should give us enough data to figure out what's 
going wrong.

Regards,

Matthias.

From andrew.maizels at gmail.com  Wed Nov 30 07:45:58 2011
From: andrew.maizels at gmail.com (Andrew Maizels)
Date: Wed, 30 Nov 2011 18:45:58 +1100
Subject: [rabbitmq-discuss] Message TTL working fine in 2.6.1,
	broken in 2.7.0?
In-Reply-To: <4ED5DE76.6060603@rabbitmq.com>
References: <CACETAqiGo9hSGYxEr-zbL-aZ3Zm0eUJ5bkh-7Qm3A3gHfYD9sg@mail.gmail.com>
	<4ED5DE76.6060603@rabbitmq.com>
Message-ID: <CACETAqj-usK9-Ln4djWfRKRp1a3nt7D7PL-VTisMMf437UOv3A@mail.gmail.com>

Yes, I'll set this up on a test server and see what happens.  I just wanted
to check first and see if it was a known problem.

Thanks,

Andrew

On Wed, Nov 30, 2011 at 6:42 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> Andrew,
>
> On 30/11/11 03:46, Andrew Maizels wrote:
>
>> 2.7 seems to ignore TTL limits.
>>
>
> TTLs in 2.7 certainly can't be broken completely; we have tests that check
> that.
>
> In fact they should work *better* in 2.7 in that requeued messages retain
> their original TTL rather than getting a fresh one.
>
>  We had a slow  consumer leave about 1.8 million 40KB messages on the
>> queue, which filled up the available disk and brought RabbitMQ down.
>> The queues are durable and bound to a single exchange; no special
>> parameters apart from the TTL, which is typically 600000
>> milliseconds.
>>
>
> Were these 1.8 million messages the result of a relatively steady inbound
> stream? Over what period of time?
>
> Can a single message get routed to multiple queues?
>
> What memory limit does rabbit think it has (check the log for an entry
> like:
> =INFO REPORT==== 28-Nov-2011::12:14:40 ===
> Memory limit set to 4815MB of 12037MB total.
> )?
>
> Do you still have the log files from the time it failed?
>
>
>  We've reverted to 2.6.1 for now, and everything is working again.
>>
>
> Is there any chance you could go back to 2.7.0, perhaps in a test setup,
> and see whether you can replicate the problem? If you do then taking a
> snapshot of the database dir at the time, together with the output of
> 'rabbitmqctl report' should give us enough data to figure out what's going
> wrong.
>
> Regards,
>
> Matthias.
>



-- 
Ahh... We are all heroes; you and Boo and I.
Hamsters and rangers everywhere, rejoice!
Read Peopleware!
http://www.amazon.com/Peopleware-Productive-Projects-Teams-Second/dp/0932633439
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111130/b7ce6acb/attachment.htm>

From emile at rabbitmq.com  Wed Nov 30 10:22:35 2011
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 30 Nov 2011 10:22:35 +0000
Subject: [rabbitmq-discuss] Cannot get 3 Node cluster to work
In-Reply-To: <32b7af80-af0d-45bc-80e3-f85cbda0dffd@i8g2000vbh.googlegroups.com>
References: <32b7af80-af0d-45bc-80e3-f85cbda0dffd@i8g2000vbh.googlegroups.com>
Message-ID: <4ED603EB.9000806@rabbitmq.com>

Hi Steve,

On 29/11/11 16:25, steve flitcroft wrote:
> Hi All,
> 
> I am having issues getting a 3 node cluster to work. I am able to
> cluster any combination of the 3 nodes with each other however when i
> try to join the third node into the cluster it keeps telling me that
> "Mnesia could not connect to some nodes".

If any two nodes can connect then all three should cluster without
difficulty. Have you tried following the clustering transcript exactly
and found the same error?
(http://www.rabbitmq.com/clustering.html#transcript)

What log entries appear at the time time of the error message?

Are the ports reported by "epmd.exe -names" reachable from the other
nodes in all cases, in addition to port 4369?

Does the use of the force_cluster command help?



-Emile

From steve.flitcroft at gmail.com  Wed Nov 30 10:35:40 2011
From: steve.flitcroft at gmail.com (steve flitcroft)
Date: Wed, 30 Nov 2011 02:35:40 -0800 (PST)
Subject: [rabbitmq-discuss] Cannot get 3 Node cluster to work
In-Reply-To: <4ED603EB.9000806@rabbitmq.com>
References: <32b7af80-af0d-45bc-80e3-f85cbda0dffd@i8g2000vbh.googlegroups.com>
	<4ED603EB.9000806@rabbitmq.com>
Message-ID: <00c7b594-1d8d-42ab-b6b0-6e4308d5eab7@u6g2000vbg.googlegroups.com>

Hi Emile,
Thanks for getting back to me. I have sorted the issue this morning.?I
reset all the clusters and reinstalled RMQ and followed that guide - I
was using an earlier blog post previously.Everything is good now. I
now have a HaProxy balanced three node cluster sorted.
Excellent.
On Nov 30, 10:22?am, Emile Joubert <em... at rabbitmq.com> wrote:
> Hi Steve,
>
> On 29/11/11 16:25, steve flitcroft wrote:
>
> > Hi All,
>
> > I am having issues getting a 3 node cluster to work. I am able to
> > cluster any combination of the 3 nodes with each other however when i
> > try to join the third node into the cluster it keeps telling me that
> > "Mnesia could not connect to some nodes".
>
> If any two nodes can connect then all three should cluster without
> difficulty. Have you tried following the clustering transcript exactly
> and found the same error?
> (http://www.rabbitmq.com/clustering.html#transcript)
>
> What log entries appear at the time time of the error message?
>
> Are the ports reported by "epmd.exe -names" reachable from the other
> nodes in all cases, in addition to port 4369?
>
> Does the use of the force_cluster command help?
>
> -Emile
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-disc... at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From simon at rabbitmq.com  Wed Nov 30 10:44:36 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 30 Nov 2011 10:44:36 +0000
Subject: [rabbitmq-discuss] Debugging AD
In-Reply-To: <4ED52A88.7030808@rabbitmq.com>
References: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>	<4ED5258D.3050000@rabbitmq.com>	<CAB-G1jge97D02yL+2uuHEOpvKE3_C93BWAO9dTDzFUBdXXi+zg@mail.gmail.com>
	<4ED52A88.7030808@rabbitmq.com>
Message-ID: <4ED60914.1010507@rabbitmq.com>

On 29/11/11 18:55, Matthias Radestock wrote:
>> However, now I appear to have problems with pushing my credentials
>> through: [...] On other configurations that are known to work with
>> this particular AD server have to supply a AD username and password
>> to submit the query, so I was wondering whether I can configure this
>> somewhere in the rabbitmq.config?
>
> I'm guessing the other_bind option might help here.

Partially. other_bind controls how to connect to the LDAP server to 
retrieve *authorisation* details (i.e. look up permissions). The plugin 
will still connect using your details to perform *authentication* (i.e. 
does this username / password combination work?)

Does this fit your needs? If not, how would you want it to work?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Wed Nov 30 11:07:20 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 30 Nov 2011 11:07:20 +0000
Subject: [rabbitmq-discuss] Best Practices: Exposing messages as
 "Envelope" (PHP PECL extension)
In-Reply-To: <CAF93D5C.2B148%pdezwart@rubiconproject.com>
References: <CAF93D5C.2B148%pdezwart@rubiconproject.com>
Message-ID: <4ED60E68.4070305@rabbitmq.com>

On 28/11/11 21:30, Pieter de Zwart wrote:

> I want to run this up the flagpole and see who shoots it down. I am in
> the final stages of reworking the PHP AMQP extension for the v1.0
> release. I was poking through the Java client, trying to steal as many
> of the good ideas in there as possible and I found the Envelope object,
> which is returned to a consumer on callback. The envelope is nice, but
> its lacking some basic things: properties and headers.

Well the Envelope in the Java client is just trying to abstract away the 
commonality between the basic.get-ok and basic.deliver methods. Having 
said that, if I'd designed it I would have been tempted to stick the 
properties and the body in there too.

> I am suggesting creating a new object for the PHP extension:
> AMQPEnvelope, which has the following signature:

It's your library, but if it were me I'd pull the properties out into 
another class to more closely mimic AMQP. But I don't know if that's the 
PHP Way.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From felix.devasia at accenture.com  Wed Nov 30 12:22:29 2011
From: felix.devasia at accenture.com (felix.devasia at accenture.com)
Date: Wed, 30 Nov 2011 17:52:29 +0530
Subject: [rabbitmq-discuss] RabbitMq  and REST
Message-ID: <58A663FD41E05249BB5047436BD656560AC5BA8AC1@INDXM3124.dir.svc.accenture.com>

Hi,
I have a RabbitMq server running in the cloud. I have a requirement where a web application running on a traditional server needs to post a message to the RabbitMq.

Can

1)      RabbitMq be tweaked to listen to REST requests,

2)      or should there be an adapter  (ratpack / custom) which can listen to REST messages and  talk to RabbitMq via AMQP?


Thanks for your time.

Warm regards,
Felix.

________________________________
Subject to local law, communications with Accenture and its affiliates including telephone calls and emails (including content), may be monitored by our systems for the purposes of security and the assessment of internal compliance with Accenture policy.
______________________________________________________________________________________

www.accenture.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111130/8d6eea2e/attachment.htm>

From matthew at rabbitmq.com  Wed Nov 30 14:22:16 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Wed, 30 Nov 2011 14:22:16 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated
	queues
In-Reply-To: <CAGn3ETFXWmD6ZaGMKUBV5ZNjnaceOLEBqNb78-S62ZOrpU9Yug@mail.gmail.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>
	<20111107135014.GD6082@rabbitmq.com>
	<CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>
	<20111107142240.GF6082@rabbitmq.com>
	<CAGn3ETE=bp9+pjM=qEEA=5EKRWun_rY7LUA5tZjb8f9E3Ad7Pw@mail.gmail.com>
	<20111107231939.GB7418@wellquite.org>
	<CAGn3ETFXWmD6ZaGMKUBV5ZNjnaceOLEBqNb78-S62ZOrpU9Yug@mail.gmail.com>
Message-ID: <20111130142215.GA29890@rabbitmq.com>

On Mon, Nov 07, 2011 at 11:46:26PM +0000, Ashley Brown wrote:
> Stop producers and consumers, delete queues. Deletions take a long time.
> Although I've also seen this with no-HA queues - it can take tens of
> minutes to delete a queue with 250k+ messages in.

Yeah, I've been testing this, and it's a known bug. Basically, Rabbit's
queues prioritise driving consumers as fast as possible. Thus if a queue
has a choice between processing an ack from a consumer, and processing a
publish, it will always choose the ack. This then means that a large
number of publishes can build up in the channel. This can be a very
large number of publishes. Then, the channel issues the delete. The
queue has to process all those publishes before it will see the delete,
and this can take a long time.

There is a heavy performance impact in general use if we disable this
priorisation. We have come up with various schemes which may allow a
more balanced approach, but they're rather complex and far from certain
to solve the problem.

On the whole, probably the best way to mitigate this is to reduce the
number of acks from consumers. This can be done as follows.

1. Make sure you set basic.qos, but don't set it to a very low number.
Often something around 100 to 1000 often works well. Call this number N.

2. Rather than acking every single message, instead only ack every N / 2
(for example), and when you do ack, turn on the multiple flag.

This means that the queue will throw N messages out to the consumer, but
then will be able to spend time processing publishes. Then, some time
later, it will receive the ack from the client, be able to process the
acks for the first N/2 quite efficiently, and then be able to spew out a
new N/2 msgs to the consumer. Essentially, this work-around relies on
the assumption that there should be some time when all consumers are
sated with messages during which the queue can spend some time
processing its backlog. If consumers are able to process messages
they're sent faster than the queue processes messages then this
assumption fails and this work-around won't work.

This problem is much worse for HA queues because the CPU hit per publish
is much higher due to the extra work that has to be done for each
publish. Consequently, even with high qos values (N > 10000), it's still
easy for a publisher to create a backlog in the channel which then can
cause a delay for any synchronous command (such as delete) to hit the
queue. Because of the lower throughput rates of HA queues, it's more
likely that consumers will be able to keep up with the msgs they're
being sent by the queue. This again, increases the likelihood that the
work-around won't work.

So in conclusion, we're aware of at least some of the things you're
reporting. It would be good if you could test with 2.7.0 given there
have been some substantial performance improvements over 2.6.0 -
especially if you do the HiPE compilation that's not possible. As with
all good engineering problems, there's no obvious win-win solution and
we've cogitated on this one for a while.

Matthew

From 0x6e6562 at gmail.com  Wed Nov 30 14:36:36 2011
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Wed, 30 Nov 2011 14:36:36 +0000
Subject: [rabbitmq-discuss] Debugging AD
In-Reply-To: <4ED52A88.7030808@rabbitmq.com>
References: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>
	<4ED5258D.3050000@rabbitmq.com>
	<CAB-G1jge97D02yL+2uuHEOpvKE3_C93BWAO9dTDzFUBdXXi+zg@mail.gmail.com>
	<4ED52A88.7030808@rabbitmq.com>
Message-ID: <CAB-G1jhuSOL=Gjeq8azbs1Opf_CNb5E6bAKK4MmM8_EDB-JVNg@mail.gmail.com>

Matthias,

On Tue, Nov 29, 2011 at 6:55 PM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
> Just activating rabbitmq_auth_backend_ldap should be sufficient since it
> has eldap as a dependency.

Yes, this was my mistake. I had seen the reference to the eldap module
somewhere, and had blindly assumed that this is the thing to activate.

However, the generic documentation on activating plugins lists
rabbitmq_auth_backend_ldap as the name of the plugin, so I had been
thinking logically, I would have used that instead.

Cheers,

Ben

From 0x6e6562 at gmail.com  Wed Nov 30 14:40:49 2011
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Wed, 30 Nov 2011 14:40:49 +0000
Subject: [rabbitmq-discuss] Debugging AD
In-Reply-To: <4ED60914.1010507@rabbitmq.com>
References: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>
	<4ED5258D.3050000@rabbitmq.com>
	<CAB-G1jge97D02yL+2uuHEOpvKE3_C93BWAO9dTDzFUBdXXi+zg@mail.gmail.com>
	<4ED52A88.7030808@rabbitmq.com> <4ED60914.1010507@rabbitmq.com>
Message-ID: <CAB-G1jhATsBxXmVE5HKL6Sxh7a2v1ooUZhZoC9MtAjkYanpQJQ@mail.gmail.com>

Simon,

On Wed, Nov 30, 2011 at 10:44 AM, Simon MacMullen <simon at rabbitmq.com> wrote:
> Partially. other_bind controls how to connect to the LDAP server to retrieve
> *authorisation* details (i.e. look up permissions). The plugin will still
> connect using your details to perform *authentication* (i.e. does this
> username / password combination work?)
>
> Does this fit your needs? If not, how would you want it to work?

Pardon my ignorance of how LDAP works, but basically I am trying to
port a known working LDAP configuration from some Java app that
supplies a statically defined username/password in order to submit the
authenication (aka bind) query.

So what you are suggesting seems to make sense, so  I'll give it a bash.

Cheers,

Ben

From matthew at rabbitmq.com  Wed Nov 30 14:51:21 2011
From: matthew at rabbitmq.com (Matthew Sackman)
Date: Wed, 30 Nov 2011 14:51:21 +0000
Subject: [rabbitmq-discuss] HA - missing or incompletely replicated
	queues
In-Reply-To: <20111130142215.GA29890@rabbitmq.com>
References: <CAGn3ETHXm9sqYkMaKDHAJNgmx-E1U8OBMdaAPE8rxT5BFtSw-Q@mail.gmail.com>
	<20111107135014.GD6082@rabbitmq.com>
	<CAGn3ETGwVAtVF21piwwCK0Xdd-cTW_s+eb4_jZgu9dMcscTmrQ@mail.gmail.com>
	<20111107142240.GF6082@rabbitmq.com>
	<CAGn3ETE=bp9+pjM=qEEA=5EKRWun_rY7LUA5tZjb8f9E3Ad7Pw@mail.gmail.com>
	<20111107231939.GB7418@wellquite.org>
	<CAGn3ETFXWmD6ZaGMKUBV5ZNjnaceOLEBqNb78-S62ZOrpU9Yug@mail.gmail.com>
	<20111130142215.GA29890@rabbitmq.com>
Message-ID: <20111130145120.GB29890@rabbitmq.com>

On Wed, Nov 30, 2011 at 02:22:16PM +0000, Matthew Sackman wrote:
> 1. Make sure you set basic.qos, but don't set it to a very low number.
> Often something around 100 to 1000 often works well. Call this number N.
> 
> 2. Rather than acking every single message, instead only ack every N / 2
> (for example), and when you do ack, turn on the multiple flag.

For example:

-module(test).
-compile([export_all]).

-include_lib("amqp_client/include/amqp_client.hrl").

mirror_create_delete(Count, N, Delay) ->
    {ok, Conn} = amqp_connection:start(#amqp_params_network{}),
    {ok, Chan} = amqp_connection:open_channel(Conn),
    #'queue.declare_ok' { queue = Q } =
        amqp_channel:call(
          Chan,
          #'queue.declare'{ queue     = mirror_queue(),
                            durable   = true,
                            exclusive = false,
                            arguments = [{<<"x-ha-policy">>, longstr, <<"all">>}]}),

    Msg = #amqp_msg { props = #'P_basic'{ delivery_mode = 1 }, payload = <<"hello">> },
    Publish = #'basic.publish'{ routing_key = Q },

    M = N div 2,

    spawn(fun () ->
                  {ok, Chan2} = amqp_connection:open_channel(Conn),

                  #'basic.qos_ok'{} =
                      amqp_channel:call(Chan2, #'basic.qos'{ prefetch_count = N }),
                  #'basic.consume_ok' { consumer_tag = Tag } =
                      amqp_channel:subscribe(Chan2, #'basic.consume' { queue = Q }, self()),
                  [begin
                       timer:sleep(Delay),
                       receive
                           {#'basic.deliver'{ delivery_tag = AckTag }, _Content} ->
                               case C rem M of
                                   0 ->
                                       amqp_channel:cast(Chan2, #'basic.ack'{ delivery_tag = AckTag,
                                                                              multiple = true });
                                   _ -> ok
                               end
                       after 30000 ->
                               amqp_channel:call(Chan2, #'basic.cancel'{ consumer_tag = Tag }),
                               amqp_channel:close(Chan2),
                               exit(normal)
                       end
                   end || C <- lists:seq(1, Count)]
          end),

    [amqp_channel:cast(Chan, Publish, Msg) || _ <- lists:seq(1, Count)],

    timer:sleep(10000),

    amqp_channel:call(Chan, #'queue.delete'{ queue = Q }),
    amqp_connection:close(Conn).



If you try running this with too small a Delay then you'll find a large
backlog builds up:

(amqp_client at hazel)2> test:mirror_create_delete(500000, 1000, 0). 

Does not perform well at all: the queue constantly reports that it's
empty because whenever it receives a message, it sends it out to the
consumer, and almost as soon as it has sent out the 1000th msg, it
gets an ack back for the first 500 msgs, so has no "spare" time to
process its backlog. Queue ingress and egress rates don't get above 1kHz
for me, and are frequently down at 100Hz.

However, if you simulate the consumer doing something a bit more complex
by increasing the delay then you get much better performance:

test:mirror_create_delete(500000, 1000, 5). 

Once the queue has sent out the first 1000 msgs to the consumer,
there'll then be a helpful gap before the first ack arrives. During this
time, the queue churns through a good chunk of its backlog. After this,
egress stays around 100Hz (not surprising - a 5ms processing time per
message would give a max of 200Hz egress), but ingress jumps up to
around 10kHz, and everything's much happier.

Even with

test:mirror_create_delete(500000, 1000, 1).

things are happier - the delay is sufficent. I see peaks of ingress at
20kHz and egress at 500Hz.


Matthew

From 0x6e6562 at gmail.com  Wed Nov 30 16:44:09 2011
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Wed, 30 Nov 2011 16:44:09 +0000
Subject: [rabbitmq-discuss] Debugging AD
In-Reply-To: <CAB-G1jhATsBxXmVE5HKL6Sxh7a2v1ooUZhZoC9MtAjkYanpQJQ@mail.gmail.com>
References: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>
	<4ED5258D.3050000@rabbitmq.com>
	<CAB-G1jge97D02yL+2uuHEOpvKE3_C93BWAO9dTDzFUBdXXi+zg@mail.gmail.com>
	<4ED52A88.7030808@rabbitmq.com> <4ED60914.1010507@rabbitmq.com>
	<CAB-G1jhATsBxXmVE5HKL6Sxh7a2v1ooUZhZoC9MtAjkYanpQJQ@mail.gmail.com>
Message-ID: <CAB-G1jgN3p=LK9m2sfaFpOOSLv=zBCsGrmTp+nvt5mZR14+ARA@mail.gmail.com>

Hi Simon,

So after spinning the underlying LDAP driver on it's own, I was able
to establish what combination of input parameters was going to work
with AD:

1> {_, C} = eldap:open(["172.20.3.21"],[]).
2> eldap:simple_bind(C,
"ben.hood at ACMEDOMAIN","DB/nUcPk?DdF<eCjp?erzpbi[g"BdJL.w;pFrT>tg at KnbCDsi").
ok

So this boils down to putting

{user_dn_pattern,       "${username}@ACMEDOMAIN"},

into rabbitmq.config.

I now have a follow up question: is it possible to create two
different groups in LDAP and assign them different levels of
privileges within the Management frontend?

I was thinking of having a group for admins who can do anything, and a
group for people who should be able to look at statistical info, but
can't do anything that would cause any messages to get binned (such as
queue/exchange deletions, queue purges or queue binds/unbinds).

Cheers,

Ben

On Wed, Nov 30, 2011 at 2:40 PM, Ben Hood <0x6e6562 at gmail.com> wrote:
> Pardon my ignorance of how LDAP works, but basically I am trying to
> port a known working LDAP configuration from some Java app that
> supplies a statically defined username/password in order to submit the
> authenication (aka bind) query.

From simon at rabbitmq.com  Wed Nov 30 17:41:54 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 30 Nov 2011 17:41:54 +0000
Subject: [rabbitmq-discuss] Debugging AD
In-Reply-To: <CAB-G1jgN3p=LK9m2sfaFpOOSLv=zBCsGrmTp+nvt5mZR14+ARA@mail.gmail.com>
References: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>	<4ED5258D.3050000@rabbitmq.com>	<CAB-G1jge97D02yL+2uuHEOpvKE3_C93BWAO9dTDzFUBdXXi+zg@mail.gmail.com>	<4ED52A88.7030808@rabbitmq.com>	<4ED60914.1010507@rabbitmq.com>	<CAB-G1jhATsBxXmVE5HKL6Sxh7a2v1ooUZhZoC9MtAjkYanpQJQ@mail.gmail.com>
	<CAB-G1jgN3p=LK9m2sfaFpOOSLv=zBCsGrmTp+nvt5mZR14+ARA@mail.gmail.com>
Message-ID: <4ED66AE2.4090507@rabbitmq.com>

On 30/11/11 16:44, Ben Hood wrote:
> I now have a follow up question: is it possible to create two
> different groups in LDAP and assign them different levels of
> privileges within the Management frontend?

Yes - see 
http://hg.rabbitmq.com/rabbitmq-auth-backend-ldap/file/rabbitmq_v2_7_0/README-authorisation

> I was thinking of having a group for admins who can do anything, and a
> group for people who should be able to look at statistical info, but
> can't do anything that would cause any messages to get binned (such as
> queue/exchange deletions, queue purges or queue binds/unbinds).

So the second group needs to have a tag_queries such that they get the 
"monitoring" tag, and a resource_access_query that restricts them 
from... well, from doing almost anything I guess.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From simon at rabbitmq.com  Wed Nov 30 17:46:02 2011
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 30 Nov 2011 17:46:02 +0000
Subject: [rabbitmq-discuss] RabbitMq  and REST
In-Reply-To: <58A663FD41E05249BB5047436BD656560AC5BA8AC1@INDXM3124.dir.svc.accenture.com>
References: <58A663FD41E05249BB5047436BD656560AC5BA8AC1@INDXM3124.dir.svc.accenture.com>
Message-ID: <4ED66BDA.1000402@rabbitmq.com>

On 30/11/11 12:22, felix.devasia at accenture.com wrote:
> I have a RabbitMq server running in the cloud. I have a requirement
> where a web application running on a traditional server needs to post a
> message to the RabbitMq.
>
> Can
>
> 1)RabbitMq be tweaked to listen to REST requests,

The management plugin provides a 
(very-nearly-REST-but-we-don't-call-it-that) API:

http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v2_7_0/priv/www/api/index.html

Note that the actual messaging bits of that are rather basic and don't 
take reliability into account, so I don't know if they will be adequate 
for you.

> 2)or should there be an adapter (ratpack / custom) which can listen to
> REST messages and talk to RabbitMq via AMQP?

I'm not aware of anything that's publicly available, although I'd be 
interested to hear if someone has written such a thing.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware

From steve at rabbitmq.com  Wed Nov 30 18:10:55 2011
From: steve at rabbitmq.com (Steve Powell)
Date: Wed, 30 Nov 2011 18:10:55 +0000
Subject: [rabbitmq-discuss] Socket leak in java client library
In-Reply-To: <925DDDE9D69E7143B3252E2D4680A36704DFF3A5@34093-C5-EVS1.exchange.rackspace.com>
References: <925DDDE9D69E7143B3252E2D4680A36704CED46C@34093-C5-EVS1.exchange.rackspace.com>
	<925DDDE9D69E7143B3252E2D4680A36704DFEDE3@34093-C5-EVS1.exchange.rackspace.com>
	<DC16F33E-73F5-4E38-8B21-ED94DF501CAE@rabbitmq.com>
	<925DDDE9D69E7143B3252E2D4680A36704DFF3A5@34093-C5-EVS1.exchange.rackspace.com>
Message-ID: <89C2D4F0-7A2D-4F9C-9EF9-149DE17046F6@rabbitmq.com>

Dear Iain,

Looking at the newConnection() code in detail, I have chosen not to do connection cleanup in newConnection() (as in your patch) but in AMQConnection.start() where (most of) it belongs.   In other words, when AMQConnection.start() detects a problem, it cleans up any debris (threads, heartbeat executors and/or sockets) it may have created during socket setup and connection negotiations before throwing an exception.  This allows us to ignore errors (except for reporting) in the newConnection loop without leaking resources.

If this passes QA it should appear in the next release, and be documented in the JavaDoc. These fixes are presently under the bug24597 track.

Steve Powell  (a tired bunny)
----------some more definitions from the SPD----------
avoirdupois (phr.) 'Would you like peas with that?'
distribute (v.) To denigrate an award ceremony.
definite (phr.) 'It's hard of hearing, I think.'
modest (n.) The most mod.

On 28 Nov 2011, at 20:39, Iain Hull wrote:
> http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-November/016612.html


From gmr at myyearbook.com  Wed Nov 30 18:40:27 2011
From: gmr at myyearbook.com (Gavin M. Roy)
Date: Wed, 30 Nov 2011 13:40:27 -0500
Subject: [rabbitmq-discuss] Debugging AD
In-Reply-To: <4ED66AE2.4090507@rabbitmq.com>
References: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>
	<4ED5258D.3050000@rabbitmq.com>
	<CAB-G1jge97D02yL+2uuHEOpvKE3_C93BWAO9dTDzFUBdXXi+zg@mail.gmail.com>
	<4ED52A88.7030808@rabbitmq.com> <4ED60914.1010507@rabbitmq.com>
	<CAB-G1jhATsBxXmVE5HKL6Sxh7a2v1ooUZhZoC9MtAjkYanpQJQ@mail.gmail.com>
	<CAB-G1jgN3p=LK9m2sfaFpOOSLv=zBCsGrmTp+nvt5mZR14+ARA@mail.gmail.com>
	<4ED66AE2.4090507@rabbitmq.com>
Message-ID: <CAL_e=0p-O3DgVfyrrMM7SBZGc+3qwio3zHOBWp4nspAQXL7ftg@mail.gmail.com>

I've been meaning to ask on this subject: is there any level of caching of
data received back from the LDAP server? I'd like to move to LDAP for our
infrastructure but am worried about connection rates and throttling due to
time spent making LDAP requests for the same connecting/disconnecting user.

Alternatively, does Rabbit check local auth prior to LDAP auth?

Gavin

On Wed, Nov 30, 2011 at 12:41 PM, Simon MacMullen <simon at rabbitmq.com>wrote:

> On 30/11/11 16:44, Ben Hood wrote:
>
>> I now have a follow up question: is it possible to create two
>> different groups in LDAP and assign them different levels of
>> privileges within the Management frontend?
>>
>
> Yes - see http://hg.rabbitmq.com/**rabbitmq-auth-backend-ldap/**
> file/rabbitmq_v2_7_0/README-**authorisation<http://hg.rabbitmq.com/rabbitmq-auth-backend-ldap/file/rabbitmq_v2_7_0/README-authorisation>
>
>  I was thinking of having a group for admins who can do anything, and a
>> group for people who should be able to look at statistical info, but
>> can't do anything that would cause any messages to get binned (such as
>> queue/exchange deletions, queue purges or queue binds/unbinds).
>>
>
> So the second group needs to have a tag_queries such that they get the
> "monitoring" tag, and a resource_access_query that restricts them from...
> well, from doing almost anything I guess.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, VMware
> ______________________________**_________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111130/6c4d0d1d/attachment.htm>

From matthias at rabbitmq.com  Wed Nov 30 18:51:18 2011
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 30 Nov 2011 18:51:18 +0000
Subject: [rabbitmq-discuss] Debugging AD
In-Reply-To: <CAL_e=0p-O3DgVfyrrMM7SBZGc+3qwio3zHOBWp4nspAQXL7ftg@mail.gmail.com>
References: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>	<4ED5258D.3050000@rabbitmq.com>	<CAB-G1jge97D02yL+2uuHEOpvKE3_C93BWAO9dTDzFUBdXXi+zg@mail.gmail.com>	<4ED52A88.7030808@rabbitmq.com>
	<4ED60914.1010507@rabbitmq.com>	<CAB-G1jhATsBxXmVE5HKL6Sxh7a2v1ooUZhZoC9MtAjkYanpQJQ@mail.gmail.com>	<CAB-G1jgN3p=LK9m2sfaFpOOSLv=zBCsGrmTp+nvt5mZR14+ARA@mail.gmail.com>	<4ED66AE2.4090507@rabbitmq.com>
	<CAL_e=0p-O3DgVfyrrMM7SBZGc+3qwio3zHOBWp4nspAQXL7ftg@mail.gmail.com>
Message-ID: <4ED67B26.8010607@rabbitmq.com>

Gavin,

On 30/11/11 18:40, Gavin M. Roy wrote:
> I've been meaning to ask on this subject: is there any level of caching
> of data received back from the LDAP server?

No.

> I'd like to move to LDAP for our infrastructure but am worried about
> connection rates and throttling due to time spent making LDAP
> requests for the same connecting/disconnecting user.

LDAP is designed to deliver exceptionally high query performance and to 
scale near linearly through replication. So if you are worried about 
latency, pick a high-performance LDAP server and co-locate it with 
RabbitMQ on the same machine, and make it a slave of the central LDAP 
server.

Would be interested to hear what results you are getting.

> Alternatively, does Rabbit check local auth prior to LDAP auth?

That is controlled by the order in which backends are listed in the 
auth_backends config.


Regards,

Matthias.

From jim at rabbitmq.com  Wed Nov 30 19:55:23 2011
From: jim at rabbitmq.com (Jim Apperly)
Date: Wed, 30 Nov 2011 19:55:23 +0000
Subject: [rabbitmq-discuss] RabbitMq and REST
In-Reply-To: <4ED66BDA.1000402@rabbitmq.com>
References: <58A663FD41E05249BB5047436BD656560AC5BA8AC1@INDXM3124.dir.svc.accenture.com>
	<4ED66BDA.1000402@rabbitmq.com>
Message-ID: <CAMdQUi_gTeCh1hvt43gO+P7Muvp6EhtNw2KCgA-df4b+TThrmw@mail.gmail.com>

On 30 November 2011 17:46, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 30/11/11 12:22, felix.devasia at accenture.com wrote:
>
>> 2)or should there be an adapter (ratpack / custom) which can listen to
>>
>
>> REST messages and talk to RabbitMq via AMQP?
>>
>
> I'm not aware of anything that's publicly available, although I'd be
> interested to hear if someone has written such a thing.
>

I'm not aware of anything that can do this OOTB but, if you're using
Java/.Net, you may be able to cobble something together with Spring
Integration.

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111130/ab1b155f/attachment.htm>

From tiago.tuxkiller at gmail.com  Wed Nov 30 20:18:24 2011
From: tiago.tuxkiller at gmail.com (Tiago Cruz)
Date: Wed, 30 Nov 2011 18:18:24 -0200
Subject: [rabbitmq-discuss] Cluster and nodes shutdown: not_found,
	"no queue 'XXXX' in vhost 'YYY'", 'queue.declare'
Message-ID: <CAGObxaS508keDfKW0DSjC+WQsTpBvpJt+gAL4+HtBMyj5k2dgw@mail.gmail.com>

Hello all!

I'm using  rabbitMQ 2.6.1's mirror queue without 'x-ha-policy' (yet!), and
I just found a weird situation.

I'm using keepalived to exchange IP address from clients, and my queues are
"Durable=True"

====
[root at qwar1 ~]# rabbitmqctl cluster_status
Cluster status of node rabbit at qwar1 ...
[{nodes,[{disc,[rabbit at qwar2,rabbit at qwar1]}]},
 {running_nodes,[rabbit at qwar2,rabbit at qwar1]}]
...done.

[root at qwar2 ~]# rabbitmqctl cluster_status
Cluster status of node rabbit at qwar2 ...
[{nodes,[{disc,[rabbit at qwar2,rabbit at qwar1]}]},
 {running_nodes,[rabbit at qwar1,rabbit at qwar2]}]
...done.
====

All my queues are created on node _qwc1_, how you can see here:

====
[root at qwar1 ~]# rabbitmqctl report
...
Consumers on encoder:
queue_name      channel_pid     consumer_tag    ack_required
videos  <rabbit at qwar1.3.2926.0> amq.ctag-7FoHaypQdRWWanL5CYjXug==       true
sender  <rabbit at qwar1.3.26415.0>
amq.ctag-6YYXJJxU/LsoGFpBTn47FA==       true
...

[root at qwar2 ~]# rabbitmqctl report
...
Consumers on encoder:
queue_name      channel_pid     consumer_tag    ack_required
videos  <rabbit at qwar1.3.2926.0> amq.ctag-7FoHaypQdRWWanL5CYjXug==       true
sender  <rabbit at qwar1.3.26415.0>
amq.ctag-6YYXJJxU/LsoGFpBTn47FA==       true
...
====

If I shutdown the _qwc2_ everything works as well.

If I shutdown the _qwc1_ the cluster stop to work, and I got this errors
messages on log:

=ERROR REPORT==== 30-Nov-2011::16:34:36 ===
connection <0.734.0>, channel 4 - error:
{amqp_error,not_found,"no queue 'videos' in vhost
'encoder'",'queue.declare'}

=ERROR REPORT==== 30-Nov-2011::16:34:36 ===
connection <0.734.0>, channel 5 - error:
{amqp_error,not_found,"no queue 'videos' in vhost
'encoder'",'queue.declare'}

=ERROR REPORT==== 30-Nov-2011::16:30:26 ===
connection <0.5263.0>, channel 1 - error:
{amqp_error,not_found,"no queue 'sender' in vhost
'encoder'",'queue.declare'}

=ERROR REPORT==== 30-Nov-2011::16:30:27 ===
connection <0.5263.0>, channel 1 - error:
{amqp_error,not_found,"no queue 'sender' in vhost
'encoder'",'queue.declare'}

When the node qwc1 turn back to live, everything works as well.

If, before the shutdown, I delete the queue 'videos' and 'sender',
everything works as well.

Is the behaviour correct? I thought that everything was still working as
well even with a crash of one of nodes of cluster :)

Thanks a lot,

Tiago Cruz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111130/b3ea9ab5/attachment.htm>

From markfisher at vmware.com  Wed Nov 30 20:23:48 2011
From: markfisher at vmware.com (Mark Fisher)
Date: Wed, 30 Nov 2011 12:23:48 -0800 (PST)
Subject: [rabbitmq-discuss] RabbitMq and REST
In-Reply-To: <CAMdQUi_gTeCh1hvt43gO+P7Muvp6EhtNw2KCgA-df4b+TThrmw@mail.gmail.com>
Message-ID: <32d266e0-4a6e-4f02-8b00-caec7d6dcb04@webern.local>

| On 30 November 2011 17:46, Simon MacMullen < simon at rabbitmq.com >
| wrote:

| | On 30/11/11 12:22, felix.devasia at accenture.com wrote:
| 

| | | 2)or should there be an adapter (ratpack / custom) which can
| | | listen
| | | to
| | 
| 
| | | REST messages and talk to RabbitMq via AMQP?
| | 
| 

| | I'm not aware of anything that's publicly available, although I'd
| | be
| | interested to hear if someone has written such a thing.
| 

| I'm not aware of anything that can do this OOTB but, if you're using
| Java/.Net, you may be able to cobble something together with Spring
| Integration.
This simple prototype does exactly that: https://github.com/SpringSource/cloudfoundry-samples/tree/master/rabbit-rest 

It consists of just web.xml and one other config file under src/main/webapp/WEB-INF 

-Mark 

| Jim
| _______________________________________________
| rabbitmq-discuss mailing list
| rabbitmq-discuss at lists.rabbitmq.com
| https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111130/ed36f09b/attachment.htm>

From imran.mirza at mibura.com  Wed Nov 30 19:34:39 2011
From: imran.mirza at mibura.com (Imran Mirza)
Date: Wed, 30 Nov 2011 11:34:39 -0800
Subject: [rabbitmq-discuss] Debugging AD
In-Reply-To: <4ED60914.1010507@rabbitmq.com>
References: <CAB-G1jj513G9QWVSs4HN3X1U+xBL-_8MN50ryTeK0Zcg5sWXeg@mail.gmail.com>
	<4ED5258D.3050000@rabbitmq.com>
	<CAB-G1jge97D02yL+2uuHEOpvKE3_C93BWAO9dTDzFUBdXXi+zg@mail.gmail.com>
	<4ED52A88.7030808@rabbitmq.com> <4ED60914.1010507@rabbitmq.com>
Message-ID: <54479B21F958A841A7BDF3521B0E38DC12746A61@VA3DIAXVS991.RED001.local>

Look in NTDS database for schema name " " where the name is your fqdn and copy that into you config

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Simon MacMullen
Sent: Wednesday, November 30, 2011 2:45 AM
To: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Debugging AD

On 29/11/11 18:55, Matthias Radestock wrote:
>> However, now I appear to have problems with pushing my credentials
>> through: [...] On other configurations that are known to work with 
>> this particular AD server have to supply a AD username and password 
>> to submit the query, so I was wondering whether I can configure this 
>> somewhere in the rabbitmq.config?
>
> I'm guessing the other_bind option might help here.

Partially. other_bind controls how to connect to the LDAP server to retrieve *authorisation* details (i.e. look up permissions). The plugin will still connect using your details to perform *authentication* (i.e. 
does this username / password combination work?)

Does this fit your needs? If not, how would you want it to work?

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


