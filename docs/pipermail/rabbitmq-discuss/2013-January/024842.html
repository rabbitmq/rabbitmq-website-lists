<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Instability in 3.0.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Instability%20in%203.0.1&In-Reply-To=%3CCAHW0W4NhRQYcoWaGVt7znHpiWbd8OdVKK%2BS_ek_5Yrw%2BPm5yUA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024853.html">
   <LINK REL="Next"  HREF="024852.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Instability in 3.0.1</H1>
    <B>Dave Seltzer</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Instability%20in%203.0.1&In-Reply-To=%3CCAHW0W4NhRQYcoWaGVt7znHpiWbd8OdVKK%2BS_ek_5Yrw%2BPm5yUA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Instability in 3.0.1">dseltzer at tveyes.com
       </A><BR>
    <I>Wed Jan  9 16:22:42 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="024853.html">[rabbitmq-discuss] Unsynchronised Slaves in 3.0
</A></li>
        <LI>Next message: <A HREF="024852.html">[rabbitmq-discuss] RabbitMQ Instability in 3.0.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24842">[ date ]</a>
              <a href="thread.html#24842">[ thread ]</a>
              <a href="subject.html#24842">[ subject ]</a>
              <a href="author.html#24842">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a RabbitMQ 3.0.1 cluster which I upgraded from 2.7.x

For the first couple of days it was quite stable.

This morning however I started noticing some odd behavior. Notably, I would
issue BasicPublish commands and they would run forever before finally
timing out. I attempted to restart the cluster and this ended with bad
results.

I finally got the cluster back online, but now its not behaving properly.

Node2 Starts up like this:

starting memory monitor
...done
-- core initialized
starting federation
...done
starting federation exchange decorator
 ...done
starting federation parameters
 ...done
starting federation upstream exchange type
 ...done
starting management agent
...done
starting HA policy validation
...done
starting policy parameters
 ...done
starting exchange, queue and binding recovery
...done
starting configured definitions
...done
starting empty DB check
...done
starting mirror queue slave sup                                       ...

BOOT FAILED
===========

Error description:
   {shutdown,
       {gen_server,call,
           [rabbit_sup,
            {start_child,
                {rabbit_mirror_queue_slave_sup,
                    {rabbit_mirror_queue_slave_sup,start_link,[]},
                    transient,infinity,supervisor,
                    [rabbit_mirror_queue_slave_sup]}},
            infinity]}}

Log files (may contain more information):
   /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at egressqueue02.log</A>
   /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at egressqueue02-sasl.log</A>

Stack trace:
   [{gen_server,call,3,[{file,&quot;gen_server.erl&quot;},{line,188}]},
    {rabbit_sup,start_supervisor_child,3,[]},
    {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
    {rabbit,run_boot_step,1,[]},
    {rabbit,'-start/2-lc$^0/1-0-',1,[]},
    {rabbit,start,2,[]},
    {application_master,start_it_old,4,
                        [{file,&quot;application_master.erl&quot;},{line,274}]}]



BOOT FAILED
===========

Error description:
   {could_not_start,rabbit,
    {bad_return,
     {{rabbit,start,[normal,[]]},
      {'EXIT',
       {rabbit,failure_during_boot,
        {shutdown,
         {gen_server,call,
          [rabbit_sup,
           {start_child,
            {rabbit_mirror_queue_slave_sup,
             {rabbit_mirror_queue_slave_sup,start_link,[]},
             transient,infinity,supervisor,
             [rabbit_mirror_queue_slave_sup]}},
           infinity]}}}}}}}

Log files (may contain more information):
   /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at egressqueue02.log</A>
   /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at egressqueue02-sasl.log</A>

{&quot;init terminating in
do_boot&quot;,{rabbit,failure_during_boot,{could_not_start,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot,{shutdown,{gen_server,call,[rabbit_sup,{start_child,{rabbit_mirror_queue_slave_sup,{rabbit_mirror_queue_slave_sup,start_link,[]},transient,infinity,supervisor,[rabbit_mirror_queue_slave_sup]}},infinity]}}}}}}}}}

I'm not sure how to proceed. Any advice would be hugely helpful.

Thanks!

-- 
Dave
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130109/18ec3dd5/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130109/18ec3dd5/attachment.htm</A>&gt;
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024853.html">[rabbitmq-discuss] Unsynchronised Slaves in 3.0
</A></li>
	<LI>Next message: <A HREF="024852.html">[rabbitmq-discuss] RabbitMQ Instability in 3.0.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24842">[ date ]</a>
              <a href="thread.html#24842">[ thread ]</a>
              <a href="subject.html#24842">[ subject ]</a>
              <a href="author.html#24842">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
