<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Publishing binary data using the java client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publishing%20binary%20data%20using%20the%20java%20client&In-Reply-To=%3C50F17613.8000308%40mathematik.uni-marburg.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024892.html">
   <LINK REL="Next"  HREF="024897.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Publishing binary data using the java client</H1>
    <B>Christian Strack</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publishing%20binary%20data%20using%20the%20java%20client&In-Reply-To=%3C50F17613.8000308%40mathematik.uni-marburg.de%3E"
       TITLE="[rabbitmq-discuss] Publishing binary data using the java client">strack at Mathematik.Uni-Marburg.de
       </A><BR>
    <I>Sat Jan 12 14:41:23 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="024892.html">[rabbitmq-discuss] RabbitMQ Management API Client for PHP
</A></li>
        <LI>Next message: <A HREF="024897.html">[rabbitmq-discuss] Publishing binary data using the java client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24896">[ date ]</a>
              <a href="thread.html#24896">[ thread ]</a>
              <a href="subject.html#24896">[ subject ]</a>
              <a href="author.html#24896">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

for benchmarking purposes i have set up a an astract testing suite to 
transfer data using several transport implementations. The transmitted 
data are integers converted to byte arrays using ByteBuffer. While the 
en- and decoding of these data is successful using UDP sockets, the 
decoding fails when being transmitted using rabbitmq and the rabbitmq 
java libraries. The results are just random bytes but the array size is 
correct. I have tried to set the encoding to different BasicProperties 
which had no impact. Is there a flag that needs to be set to prevent 
that rabbitmq alters the data? Below are the important snippets of my code.

Greetings and thanks in advance for any comment or answer
Christian

Sender:
         ConnectionFactory factory = new ConnectionFactory();
         factory.setHost(params[0]);
         factory.setUsername(params[1]);
         factory.setPassword(params[2]);

         connection = factory.newConnection();

         channel = connection.createChannel();
         channel.exchangeDeclare(exchange, &quot;fanout&quot;);

         try {
             channel.basicPublish(exchange, &quot;&quot;, false, 
MessageProperties.BASIC, sendData);
         } catch (IOException e) {
             // TODO Auto-generated catch block
             e.printStackTrace();
         }


Receiver:
         ConnectionFactory factory = new ConnectionFactory();
         factory.setHost(params[0]);
         factory.setUsername(params[1]);
         factory.setPassword(params[2]);

         connection = factory.newConnection();

         channel = connection.createChannel();
         channel.exchangeDeclare(exchange, &quot;fanout&quot;);

         String queue = channel.queueDeclare().getQueue();
         channel.queueBind(queue, exchange, &quot;&quot;);

         consumer = new QueueingConsumer(channel);
         channel.basicConsume(queue, true, consumer);

         Delivery delivery = consumer.nextDelivery();
         if (delivery != null){
              data = delivery.getBody();
         }
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024892.html">[rabbitmq-discuss] RabbitMQ Management API Client for PHP
</A></li>
	<LI>Next message: <A HREF="024897.html">[rabbitmq-discuss] Publishing binary data using the java client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24896">[ date ]</a>
              <a href="thread.html#24896">[ thread ]</a>
              <a href="subject.html#24896">[ subject ]</a>
              <a href="author.html#24896">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
