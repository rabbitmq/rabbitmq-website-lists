<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq boot failure with &quot;tables_not_present&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%20boot%20failure%20with%20%22tables_not_present%22&In-Reply-To=%3CD963620277BBFD4B87CF34F284738F2D3AA6F5E4%40ORSMSX102.amr.corp.intel.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024993.html">
   <LINK REL="Next"  HREF="024975.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq boot failure with &quot;tables_not_present&quot;</H1>
    <B>Zhao, Shanyu</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%20boot%20failure%20with%20%22tables_not_present%22&In-Reply-To=%3CD963620277BBFD4B87CF34F284738F2D3AA6F5E4%40ORSMSX102.amr.corp.intel.com%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq boot failure with &quot;tables_not_present&quot;">shanyu.zhao at intel.com
       </A><BR>
    <I>Wed Jan 16 19:54:23 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="024993.html">[rabbitmq-discuss] How to use federation with clustering for	best HA-behaviour?
</A></li>
        <LI>Next message: <A HREF="024975.html">[rabbitmq-discuss] Rabbitmq boot failure with	&quot;tables_not_present&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24968">[ date ]</a>
              <a href="thread.html#24968">[ thread ]</a>
              <a href="subject.html#24968">[ subject ]</a>
              <a href="author.html#24968">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We have two rabbitmq servers to form a cluster. It mostly runs great. But sometimes after redeploy, we saw some boot failure error in rabbitmq server log.

The relevant part of the log is shown below. But the problem is that we saw these log messages repeated every 7-8 seconds and can last as long as 80 minutes before rabbit finally start up correctly. During this time any connection to the rabbitmq cluster will get a disconnected exception.

Any idea on what might have caused this problem?

=INFO REPORT==== 16-Jan-2013::14:11:36 ===
Starting RabbitMQ 3.0.1 on Erlang R14B04

=INFO REPORT==== 16-Jan-2013::14:11:37 ===
Limiting to approx 924 file handles (829 sockets)

=INFO REPORT==== 16-Jan-2013::14:11:37 ===
Error description:
   {case_clause,{error,tables_not_present}}

Log files (may contain more information):
   /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-0-2-97.log</A>
   /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-0-2-97-sasl.log</A>

Stack trace:
   [{rabbit_mnesia,discover_cluster,1},
    {rabbit_mnesia,init_from_config,0},
    {rabbit_mnesia,init,0},
    {rabbit,'-run_boot_step/1-lc$^1/1-1-',1},
    {rabbit,run_boot_step,1},
    {rabbit,'-start/2-lc$^0/1-0-',1},
    {rabbit,start,2},
    {application_master,start_it_old,4}]


=INFO REPORT==== 16-Jan-2013::14:11:38 ===
    application: rabbit
    exited: {bad_return,
                {{rabbit,start,[normal,[]]},
                 {'EXIT',
                     {rabbit,failure_during_boot,
                         {case_clause,{error,tables_not_present}}}}}}
type: temporary


I really appreciate any insight into this problem!

Thanks,
Shanyu

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
&quot;I always like to point out that it isn't methodologies that succeed or fail, it's teams that succeed or fail. Taking on a process can help a team raise its game, but in the end it's the team that matters and carries the responsibility to do what works for them.&quot;
--by Martin Fowler

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130116/473989c4/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130116/473989c4/attachment.htm</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024993.html">[rabbitmq-discuss] How to use federation with clustering for	best HA-behaviour?
</A></li>
	<LI>Next message: <A HREF="024975.html">[rabbitmq-discuss] Rabbitmq boot failure with	&quot;tables_not_present&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24968">[ date ]</a>
              <a href="thread.html#24968">[ thread ]</a>
              <a href="subject.html#24968">[ subject ]</a>
              <a href="author.html#24968">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
