<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] consistent hashing plugin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20consistent%20hashing%20plugin&In-Reply-To=%3CCAE3ghBvo-EOQXG8s8Tr0AS2yd1QU4trD8%2BThEk1Pbj44998z%3Dw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025160.html">
   <LINK REL="Next"  HREF="024960.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] consistent hashing plugin</H1>
    <B>Gr&#233;goire Seux</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20consistent%20hashing%20plugin&In-Reply-To=%3CCAE3ghBvo-EOQXG8s8Tr0AS2yd1QU4trD8%2BThEk1Pbj44998z%3Dw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] consistent hashing plugin">kamaradclimber at gmail.com
       </A><BR>
    <I>Wed Jan 16 12:21:38 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025160.html">[rabbitmq-discuss] Implementing User Messaging Using RabbitMQ
</A></li>
        <LI>Next message: <A HREF="024960.html">[rabbitmq-discuss] consistent hashing plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24959">[ date ]</a>
              <a href="thread.html#24959">[ thread ]</a>
              <a href="subject.html#24959">[ subject ]</a>
              <a href="author.html#24959">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I was testing consistent hashing plugin and noticed a weird behavior
when using autodelete objects : some messages sent to an consistent
hashing exchange are never transferred to the bound queues.

To reproduce :
1. create a consistent hashing exchange (auto-delete, non durable),
start send messages with random routing key
2. create a queue (non durable, exlusive, auto delete) and bind it to
the exchange (routing key : &quot;20&quot;), consume messages from it
3. delete the queue
4. create a new queue with the same parameters and a different name,
consume messages

After 2., all messages are routed to the queue, after 4. around half
messages just disappear, the other are normally consumed by the new
queue.


If you replace the 4th step with
4b. create a new queue with the same parameters and the _same_ name
it works as expected.

Am I missing something?

I have reproduced this befavior with rabbitmq 2.8.2, 2.8.4 and 3.0.1
on centos. I have used the webinterface to see messages rates
(example: <A HREF="http://img832.imageshack.us/img832/2291/weirdhashing.png">http://img832.imageshack.us/img832/2291/weirdhashing.png</A>)

Any comment is welcome!

--
Gregoire
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025160.html">[rabbitmq-discuss] Implementing User Messaging Using RabbitMQ
</A></li>
	<LI>Next message: <A HREF="024960.html">[rabbitmq-discuss] consistent hashing plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24959">[ date ]</a>
              <a href="thread.html#24959">[ thread ]</a>
              <a href="subject.html#24959">[ subject ]</a>
              <a href="author.html#24959">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
