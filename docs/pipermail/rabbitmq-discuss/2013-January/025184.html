<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Instable HA cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Instable%20HA%20cluster&In-Reply-To=%3C5106592B.6000705%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025213.html">
   <LINK REL="Next"  HREF="025186.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Instable HA cluster</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Instable%20HA%20cluster&In-Reply-To=%3C5106592B.6000705%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Instable HA cluster">simon at rabbitmq.com
       </A><BR>
    <I>Mon Jan 28 10:55:39 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025213.html">[rabbitmq-discuss] How to debug queue memory leak
</A></li>
        <LI>Next message: <A HREF="025186.html">[rabbitmq-discuss] Instable HA cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25184">[ date ]</a>
              <a href="thread.html#25184">[ thread ]</a>
              <a href="subject.html#25184">[ subject ]</a>
              <a href="author.html#25184">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, thanks. So it looks like the cluster is experiencing network partitions:

<A HREF="http://www.rabbitmq.com/partitions.html">http://www.rabbitmq.com/partitions.html</A>

since we can see (for example) that around 18-Jan-2013 03:30:21 both 
nodes saw the other one go down. RabbitMQ clusters do not tolerate 
partitions well, so this needs to be fixed I'm afraid.

You should not need to rebuild the cluster when this happens however, 
just stopping and starting nodes should be enough to recover.

Cheers, Simon

On 25/01/13 17:04, Ben West wrote:
&gt;<i> Hi Simon,
</I>&gt;<i>
</I>&gt;<i> Please find attached.
</I>&gt;<i>
</I>&gt;<i> Thanks again,
</I>&gt;<i>
</I>&gt;<i> Ben
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 25 January 2013 16:41, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     Could you send the log for MOPAYPL2 as well? It would be useful to
</I>&gt;<i>     correlate what's happening with it too.
</I>&gt;<i>
</I>&gt;<i>     Cheers, Simon
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     On 25/01/13 16:28, Ben West wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         Hi Simon,
</I>&gt;<i>
</I>&gt;<i>         Thanks for for coming back to me.
</I>&gt;<i>
</I>&gt;<i>         Attached is a rabbit mq log from one of the nodes.
</I>&gt;<i>
</I>&gt;<i>         As I mentioned before, this seems to happen once every week or
</I>&gt;<i>         two. I
</I>&gt;<i>         can be too specific on when it happened because i only noticed
</I>&gt;<i>         when I
</I>&gt;<i>         check the console, however I believe the last occurrence would
</I>&gt;<i>         have been
</I>&gt;<i>         yesterday (24th Jan).
</I>&gt;<i>
</I>&gt;<i>         If you need further logs / info let me know and I'll dig it out
</I>&gt;<i>         for you.
</I>&gt;<i>
</I>&gt;<i>         Kind regards,
</I>&gt;<i>
</I>&gt;<i>         Ben
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         On 25 January 2013 15:32, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;
</I>&gt;<i>         &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>              On 25/01/13 09:52, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben.west at mobankgroup.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben.west at mobankgroup.com</A>&gt;
</I>&gt;<i>              &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben.west at mobankgroup.__com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben.west at mobankgroup.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>                  I'm more thank happy to provide logs if these may be
</I>&gt;<i>         useful?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>              That would be useful. Preferably if you can also tell us
</I>&gt;<i>         about the
</I>&gt;<i>              time at which the cluster broke (even if it's just &quot;some
</I>&gt;<i>         time on
</I>&gt;<i>              Wednesday&quot; or similar).
</I>&gt;<i>
</I>&gt;<i>              Cheers, Simon
</I>&gt;<i>              --
</I>&gt;<i>              Simon MacMullen
</I>&gt;<i>              RabbitMQ, VMware
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         &lt;<A HREF="http://www.mopowered.co.uk">http://www.mopowered.co.uk</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     --
</I>&gt;<i>     Simon MacMullen
</I>&gt;<i>     RabbitMQ, VMware
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &lt;<A HREF="http://www.mopowered.co.uk">http://www.mopowered.co.uk</A>&gt;
</I>

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025213.html">[rabbitmq-discuss] How to debug queue memory leak
</A></li>
	<LI>Next message: <A HREF="025186.html">[rabbitmq-discuss] Instable HA cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25184">[ date ]</a>
              <a href="thread.html#25184">[ thread ]</a>
              <a href="subject.html#25184">[ subject ]</a>
              <a href="author.html#25184">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
