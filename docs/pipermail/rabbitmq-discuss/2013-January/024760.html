<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%0A%20%3D%3Fwindows-1252%3Fq%3FAny_movement_on_RabbitMQ-%3DD8M%3F%3D%0A%20%3D%3Fwindows-1252%3Fq%3FQ%3D3F%3F%3D&In-Reply-To=%3C50E5AE38.8000700%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024759.html">
   <LINK REL="Next"  HREF="024764.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%0A%20%3D%3Fwindows-1252%3Fq%3FAny_movement_on_RabbitMQ-%3DD8M%3F%3D%0A%20%3D%3Fwindows-1252%3Fq%3FQ%3D3F%3F%3D&In-Reply-To=%3C50E5AE38.8000700%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?">simon at rabbitmq.com
       </A><BR>
    <I>Thu Jan  3 16:13:44 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="024759.html">[rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?
</A></li>
        <LI>Next message: <A HREF="024764.html">[rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24760">[ date ]</a>
              <a href="thread.html#24760">[ thread ]</a>
              <a href="subject.html#24760">[ subject ]</a>
              <a href="author.html#24760">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/01/13 15:50, Murray Williams wrote:
&gt;<i> In fact, I've been working pretty hard at seeing if I could bring that
</I>&gt;<i> code up to date.
</I>
Cool! I did not touch the 0mq plugin, but here are some half-answers...

  (And, in the process, I'm reading /Erlang and OTP in
&gt;<i> Action!/ so I'm not completely in the dark here.) I started by creating
</I>&gt;<i> a brand new RabbitMQ plugin&#8212;using the rabbitmq-metronome as an example,
</I>&gt;<i> since I'm guessing/hoping it follows the most current plugin conventions
</I>&gt;<i> for RabbitmQ 3.x.
</I>
Yes it does.

&gt;<i> Everything compiles, and I can install and enable the plugin, but right
</I>&gt;<i> now it looks like the supervisor keeps shutting down for some reason
</I>&gt;<i> that I can't quite figure out yet.
</I>
If you point me at the source I might be able to help.

&gt;<i> Part of it is just that I don't quite
</I>&gt;<i> understand the various init and start_link conventions for
</I>&gt;<i> gen_server&#8212;that will come in due time. The other thing is that I don't
</I>&gt;<i> know how the configuration information information makes it to the
</I>&gt;<i> supervisor. I thought it was being passed as the arguments in the
</I>&gt;<i> application's start/2 call, but that looks like it's being called with
</I>&gt;<i> an empty list.
</I>
That's a generic way to pass arguments to a new process, part of OTP.

&gt;<i> (Maybe that's how things worked with the older versions
</I>&gt;<i> of RabbitMQ? It's hard to know since there isn't much plugin
</I>&gt;<i> documentation out there.)
</I>&gt;<i>
</I>&gt;<i> Looking at rabbitmq-stomp, I'm guessing that actually entries in the
</I>&gt;<i> rabbit.config are supposed to update/replace elements in the .app.src
</I>&gt;<i> file's {env, []} element, and that I need to write code to extract all
</I>&gt;<i> that stuff from the environment. I was going to tackle playing with that
</I>&gt;<i> today.
</I>
...but yes, to read from the config file, use application:get_env/2. 
This hasn't changed in Rabbit versions.

&gt;<i> P.S. Being new to Erlang, I'm completely confused when I look at
</I>&gt;<i> r0mq_sup's full_address(Address) functions. Hopefully it'll just work in
</I>&gt;<i> place, but I would love it if you could just tell me what exactly it's
</I>&gt;<i> trying to validate, especially the part where
</I>&gt;<i> the io_lib:char_list(Address) test fails.
</I>
AFAICS that looks like full_address/1 can also take a list of addresses. 
So the io_lib:char_list/1 test is testing whether you have a 
string-implemented-as-list-of-integers, or a list of addresses.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024759.html">[rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?
</A></li>
	<LI>Next message: <A HREF="024764.html">[rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24760">[ date ]</a>
              <a href="thread.html#24760">[ thread ]</a>
              <a href="subject.html#24760">[ subject ]</a>
              <a href="author.html#24760">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
