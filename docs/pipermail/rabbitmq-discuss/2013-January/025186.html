<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Instable HA cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Instable%20HA%20cluster&In-Reply-To=%3CCAMQJgDrduyL%3D3c1aXWCmZJdQQ54vwLjzYq0XYVq3dvxAriK1kw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025184.html">
   <LINK REL="Next"  HREF="025187.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Instable HA cluster</H1>
    <B>Ben West</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Instable%20HA%20cluster&In-Reply-To=%3CCAMQJgDrduyL%3D3c1aXWCmZJdQQ54vwLjzYq0XYVq3dvxAriK1kw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Instable HA cluster">ben.west at mobankgroup.com
       </A><BR>
    <I>Mon Jan 28 11:17:16 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025184.html">[rabbitmq-discuss] Instable HA cluster
</A></li>
        <LI>Next message: <A HREF="025187.html">[rabbitmq-discuss] Potential Bug in C# Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25186">[ date ]</a>
              <a href="thread.html#25186">[ thread ]</a>
              <a href="subject.html#25186">[ subject ]</a>
              <a href="author.html#25186">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Simon,

Thanks for taking the time to look into this.

I had a feeling this was an environmental issue because it only occurred on
our QA and PreLive environments, we do not experience the same issue on our
LIVE environment (hosted in another service, not Azure).

I will get in touch with Microsoft and find out what our options are with
Azure VMs and establish if there is anything we can do to eliminate network
partitions. We do not currently use their Virtual Networks so we may try
setting up the two VMs in a virtual Network to increase the stability
between the two nodes. Failing that we may look at the Federation / Shovel
solutions mentioned in the link.

Cheers,

Ben


Ben West
Product Owner

Mobile: +44(0)7824 617 813
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben.west at mobankgroup.com</A>

www.mopowered.co.uk &lt;<A HREF="http://goog_1166506706/">http://goog_1166506706/</A>&gt;



On 28 January 2013 10:55, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> Hi, thanks. So it looks like the cluster is experiencing network
</I>&gt;<i> partitions:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/**partitions.html&lt;http://www.rabbitmq.com/partitions.html">http://www.rabbitmq.com/**partitions.html&lt;http://www.rabbitmq.com/partitions.html</A>&gt;
</I>&gt;<i>
</I>&gt;<i> since we can see (for example) that around 18-Jan-2013 03:30:21 both nodes
</I>&gt;<i> saw the other one go down. RabbitMQ clusters do not tolerate partitions
</I>&gt;<i> well, so this needs to be fixed I'm afraid.
</I>&gt;<i>
</I>&gt;<i> You should not need to rebuild the cluster when this happens however, just
</I>&gt;<i> stopping and starting nodes should be enough to recover.
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 25/01/13 17:04, Ben West wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Simon,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Please find attached.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks again,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ben
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 25 January 2013 16:41, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>
</I>&gt;&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Could you send the log for MOPAYPL2 as well? It would be useful to
</I>&gt;&gt;<i>     correlate what's happening with it too.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Cheers, Simon
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     On 25/01/13 16:28, Ben West wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         Hi Simon,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         Thanks for for coming back to me.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         Attached is a rabbit mq log from one of the nodes.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         As I mentioned before, this seems to happen once every week or
</I>&gt;&gt;<i>         two. I
</I>&gt;&gt;<i>         can be too specific on when it happened because i only noticed
</I>&gt;&gt;<i>         when I
</I>&gt;&gt;<i>         check the console, however I believe the last occurrence would
</I>&gt;&gt;<i>         have been
</I>&gt;&gt;<i>         yesterday (24th Jan).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         If you need further logs / info let me know and I'll dig it out
</I>&gt;&gt;<i>         for you.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         Kind regards,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         Ben
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         On 25 January 2013 15:32, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>
</I>&gt;&gt;<i>         &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;
</I>&gt;&gt;<i>         &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;&gt;&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>              On 25/01/13 09:52, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben.west at mobankgroup.com</A>
</I>&gt;&gt;<i>         &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben.west at mobankgroup.</A>**com &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben.west at mobankgroup.com</A>&gt;&gt;
</I>&gt;&gt;<i>              &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben.west at mobankgroup._</A>**_com
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben.west at mobankgroup.</A>**com &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben.west at mobankgroup.com</A>&gt;&gt;&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                  I'm more thank happy to provide logs if these may be
</I>&gt;&gt;<i>         useful?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>              That would be useful. Preferably if you can also tell us
</I>&gt;&gt;<i>         about the
</I>&gt;&gt;<i>              time at which the cluster broke (even if it's just &quot;some
</I>&gt;&gt;<i>         time on
</I>&gt;&gt;<i>              Wednesday&quot; or similar).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>              Cheers, Simon
</I>&gt;&gt;<i>              --
</I>&gt;&gt;<i>              Simon MacMullen
</I>&gt;&gt;<i>              RabbitMQ, VMware
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         &lt;<A HREF="http://www.mopowered.co.uk">http://www.mopowered.co.uk</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     --
</I>&gt;&gt;<i>     Simon MacMullen
</I>&gt;&gt;<i>     RabbitMQ, VMware
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;<A HREF="http://www.mopowered.co.uk">http://www.mopowered.co.uk</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, VMware
</I>&gt;<i>
</I>
-- 
 &lt;<A HREF="http://www.mopowered.co.uk">http://www.mopowered.co.uk</A>&gt;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130128/3556aea1/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130128/3556aea1/attachment.htm</A>&gt;
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025184.html">[rabbitmq-discuss] Instable HA cluster
</A></li>
	<LI>Next message: <A HREF="025187.html">[rabbitmq-discuss] Potential Bug in C# Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25186">[ date ]</a>
              <a href="thread.html#25186">[ thread ]</a>
              <a href="subject.html#25186">[ subject ]</a>
              <a href="author.html#25186">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
