<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%0A%09%3D%3Futf-8%3Fq%3FAny_movement_on_RabbitMQ-%3DC3%3D98MQ%3D3F%3F%3D&In-Reply-To=%3CCACDmYq9gGkiMfGQGSO%2B0h1DBFCFqBaM%3DvELdLPPMB1mjsAEv4g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024747.html">
   <LINK REL="Next"  HREF="024760.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?</H1>
    <B>Murray Williams</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%0A%09%3D%3Futf-8%3Fq%3FAny_movement_on_RabbitMQ-%3DC3%3D98MQ%3D3F%3F%3D&In-Reply-To=%3CCACDmYq9gGkiMfGQGSO%2B0h1DBFCFqBaM%3DvELdLPPMB1mjsAEv4g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?">murraytodd at gmail.com
       </A><BR>
    <I>Thu Jan  3 15:50:45 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="024747.html">[rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?
</A></li>
        <LI>Next message: <A HREF="024760.html">[rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24759">[ date ]</a>
              <a href="thread.html#24759">[ thread ]</a>
              <a href="subject.html#24759">[ subject ]</a>
              <a href="author.html#24759">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jan 3, 2013 at 6:08 AM, Martin Sustrik &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sustrik at 250bpm.com</A>&gt; wrote:

&gt;<i> Hi Murray,
</I>&gt;<i>
</I>&gt;<i> On 28/12/12 22:24, Murray Williams wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I'm trying to build some glue between a system that uses a low-level &#216;MQ
</I>&gt;&gt;<i> implementation and some Enterprise (J2EE for the moment) frameworks, and
</I>&gt;&gt;<i> I got excited when I read the blog about the RabbitMQ-&#216;MQ plugin.
</I>&gt;&gt;<i> Unfortunately, that plugin seems to depend on the older Erlang-&#216;MQ
</I>&gt;&gt;<i> (erlzmq) bindings instead of the newer erlzmq2 bindings, and the older
</I>&gt;&gt;<i> bindings don't compile against my recent version of Erlang (&quot;Driver
</I>&gt;&gt;<i> compiled with incorrect version of erl_driver.h&quot;) so I'm stuck, unless I
</I>&gt;&gt;<i> want to downgrade my system's Erlang version, but even if I did that,
</I>&gt;&gt;<i> this would give me a very brittle solution.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Here's Martin Sustrik, one of the original authors or RMQ/0MQ plug-in.
</I>&gt;<i>
</I>&gt;<i> I don't have time to look into the plugin at the moment, however, if you
</I>&gt;<i> have any specific questions about it feel free to ask.
</I>&gt;<i>
</I>&gt;<i> Martin
</I>&gt;<i>
</I>
Ah hello! Excellent!

In fact, I've been working pretty hard at seeing if I could bring that code
up to date. (And, in the process, I'm reading *Erlang and OTP in Action!* so
I'm not completely in the dark here.) I started by creating a brand new
RabbitMQ plugin&#8212;using the rabbitmq-metronome as an example, since I'm
guessing/hoping it follows the most current plugin conventions for RabbitmQ
3.x. I created each module from scratch and copied your original functions
one-by-one so I could examine them and catch-and-change the older zmq:
calls and update them to the newer Erlzmq2 APIs. (That's not very hard. The
biggest change is that you have to create a &quot;context&quot; and pass it to the
calls that create &#216;MQ sockets. Also, &quot;upstream&quot; and &quot;downstream&quot; names were
changed to &quot;push&quot; and &quot;pull&quot;.)

Everything compiles, and I can install and enable the plugin, but right now
it looks like the supervisor keeps shutting down for some reason that I
can't quite figure out yet. Part of it is just that I don't quite
understand the various init and start_link conventions for gen_server&#8212;that
will come in due time. The other thing is that I don't know how the
configuration information information makes it to the supervisor. I thought
it was being passed as the arguments in the application's start/2 call, but
that looks like it's being called with an empty list. (Maybe that's how
things worked with the older versions of RabbitMQ? It's hard to know since
there isn't much plugin documentation out there.)

Looking at rabbitmq-stomp, I'm guessing that actually entries in the
rabbit.config are supposed to update/replace elements in the .app.src
file's {env, []} element, and that I need to write code to extract all that
stuff from the environment. I was going to tackle playing with that today.

Does any of the above make sense? If you have any pieces of advice, I'd
love to hear any pointers. Also, I'll get everything I've done up on my
github fork soon.

Thanks,

Murray

P.S. Being new to Erlang, I'm completely confused when I look at r0mq_sup's
full_address(Address) functions. Hopefully it'll just work in place, but I
would love it if you could just tell me what exactly it's trying to
validate, especially the part where the io_lib:char_list(Address) test
fails. Is that suggesting that the ipv4 address is in a packed (4-byte)
representation as opposed to being written out in ascii characters?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130103/5d2a4856/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130103/5d2a4856/attachment.htm</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024747.html">[rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?
</A></li>
	<LI>Next message: <A HREF="024760.html">[rabbitmq-discuss] Any movement on RabbitMQ-&#216;MQ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24759">[ date ]</a>
              <a href="thread.html#24759">[ thread ]</a>
              <a href="subject.html#24759">[ subject ]</a>
              <a href="author.html#24759">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
