<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] User Permissions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20User%20Permissions&In-Reply-To=%3CCAE0Sz%3DwJ0obSX1TH9piGZvi_nT_ztmDx9pm69eExw_nLAPGWpA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025218.html">
   <LINK REL="Next"  HREF="025262.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] User Permissions</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20User%20Permissions&In-Reply-To=%3CCAE0Sz%3DwJ0obSX1TH9piGZvi_nT_ztmDx9pm69eExw_nLAPGWpA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] User Permissions">jerryk at rbcon.com
       </A><BR>
    <I>Wed Jan 30 19:33:45 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025218.html">[rabbitmq-discuss] User Permissions
</A></li>
        <LI>Next message: <A HREF="025262.html">[rabbitmq-discuss] User Permissions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25260">[ date ]</a>
              <a href="thread.html#25260">[ thread ]</a>
              <a href="subject.html#25260">[ subject ]</a>
              <a href="author.html#25260">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Nybras...

You're still a bit turned around...

That's great thank you very much. So if I wanted allow my users to only:
&gt;<i>
</I>
Consulting the table at:  <A HREF="http://www.rabbitmq.com/access-control.html">http://www.rabbitmq.com/access-control.html</A>

We see...


&gt;<i> queue.bind
</I>
queue.unbind
&gt;<i>
</I>
Both require you to be able to write the queue and read the exchange.


&gt;<i> basic.get
</I>
basic.consume
&gt;<i>
</I>
Both requires you to be able to read the queue.


&gt;<i> Would I create a user account (say 'users') and fill in regex parts (im
</I>&gt;<i> creating this in the Management Plugin)
</I>&gt;<i> Write regexp = '^amq\.queue.bind|amq\.queue.unbind$'
</I>&gt;<i> Read regexp = '^amq\.basic.get|amq\.basic.consume$'
</I>&gt;<i>
</I>&gt;<i> Or have I completely misunderstood this?
</I>&gt;<i>
</I>
Your regexes are referring to the names of AMQP operations.  The regexes
are supposed to match the names of the entities on which you're granting
those permissions (whether they exist yet or not).

So suppose you wanted a user to be able to bind a queue named &quot;fooqueue&quot; to
an exchange named &quot;barexchange&quot;.  Then you need to do a queue.bind you need
to make sure that whatever write permission regex you've given the user
will match &quot;fooqueue&quot; and that whatever read permission you've given the
user will match the name &quot;barexchange.&quot;

Naturally this requires a bit of planning of your namespace.


&gt;<i> My app is a publish/subscribe scenario where each user has their very own
</I>&gt;<i> queue with multiple binds to various exchanges (the producers).
</I>

Then a user coming in would need the configure permission with regex
including whatever name he plans to queue.declare his queues under, a read
regex that includes the names of those exchanges to which he may want to
bind things, and a write regex that includes the name of the queue he
wishes to bind.


&gt;<i> I'm guessing
</I>&gt;<i> to allow users to only consume from their own queue I would have to create
</I>&gt;<i> a
</I>&gt;<i> user account for each user of the app. Or I could randomly generate queue
</I>&gt;<i> names for each user so that these queue names could not be guessed (which
</I>&gt;<i> would be secure enough)??
</I>&gt;<i>
</I>
You certainly could do per user permissioning that only grants appropriate
permissions on resources that match a naming convention of your devising.
 I'd suggest you avoid the &quot;generate obscure queue names&quot; as a security
policy. You might also consider declaring *exclusive* queues which can only
be used by the declaring consumer.  Mixing those with the *auto-delete*
property can be a convenient way to make transient, private queues that
will go away when your consumer departs, which might be nice from a
resource management standpoint if you have a lot of distinct user
identities in the mix.

Best regards,
Jerry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130130/c3d0cda4/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130130/c3d0cda4/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025218.html">[rabbitmq-discuss] User Permissions
</A></li>
	<LI>Next message: <A HREF="025262.html">[rabbitmq-discuss] User Permissions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25260">[ date ]</a>
              <a href="thread.html#25260">[ thread ]</a>
              <a href="subject.html#25260">[ subject ]</a>
              <a href="author.html#25260">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
