<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to handle poison messages (version 3.0.1)?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20handle%20poison%20messages%20%28version%203.0.1%29%3F&In-Reply-To=%3C717579d0-3ac1-4c4e-83ef-c94ad7ed850b%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025043.html">
   <LINK REL="Next"  HREF="025020.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to handle poison messages (version 3.0.1)?</H1>
    <B>Sandeep Aggarwal</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20handle%20poison%20messages%20%28version%203.0.1%29%3F&In-Reply-To=%3C717579d0-3ac1-4c4e-83ef-c94ad7ed850b%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] How to handle poison messages (version 3.0.1)?">aggarwalsandeep at optonline.net
       </A><BR>
    <I>Thu Jan 17 22:49:37 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025043.html">[rabbitmq-discuss] c# wget gets 401 from RabbitMQ 3.0.1 management plugin
</A></li>
        <LI>Next message: <A HREF="025020.html">[rabbitmq-discuss] How to handle poison messages (version	3.0.1)?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25019">[ date ]</a>
              <a href="thread.html#25019">[ thread ]</a>
              <a href="subject.html#25019">[ subject ]</a>
              <a href="author.html#25019">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All -

I'm using RabbitMQ version 3.0.1 and trying to handle the case with poison 
messages. 

In our code here, if there is a problem with processing the message, we 
nack the message with redeliver flag set to true. However, this causes the 
message to go back in the queue and in turn the consumer reads the same 
message again (and again in a loop). This causes my consumer to crash or go 
fishing in a loop.

I know there are features in some other messaging libraries (such as MSMQ) 
to handle poison messages - there does not seem to be an out of the box 
option in RabbitMQ for this feature. Could someone please suggest what 
others are doing to handle this scenario? 

I do have an option in mind - we can check for the redelivered flag to be 
true and if its true more than 3 times for a given message, we can post 
this message to a poison queue and ack it in the main queue. It's do-able 
but I'm hoping there is some option directly from rabbitMQ. Thanks in 
advance. 

Thanks,
Sandy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130117/92090159/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130117/92090159/attachment.htm</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025043.html">[rabbitmq-discuss] c# wget gets 401 from RabbitMQ 3.0.1 management plugin
</A></li>
	<LI>Next message: <A HREF="025020.html">[rabbitmq-discuss] How to handle poison messages (version	3.0.1)?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25019">[ date ]</a>
              <a href="thread.html#25019">[ thread ]</a>
              <a href="subject.html#25019">[ subject ]</a>
              <a href="author.html#25019">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
