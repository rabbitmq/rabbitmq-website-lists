<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbit_auth_backend_ldap and Active Directory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbit_auth_backend_ldap%20and%20Active%20Directory&In-Reply-To=%3C8F348D9D79ADA24993FCE45FE44F16240271B444AA48%40exchange01.corp.corenap.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024811.html">
   <LINK REL="Next"  HREF="024803.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbit_auth_backend_ldap and Active Directory</H1>
    <B>Matt Bradbury</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbit_auth_backend_ldap%20and%20Active%20Directory&In-Reply-To=%3C8F348D9D79ADA24993FCE45FE44F16240271B444AA48%40exchange01.corp.corenap.com%3E"
       TITLE="[rabbitmq-discuss] rabbit_auth_backend_ldap and Active Directory">bradbury at corenap.com
       </A><BR>
    <I>Mon Jan  7 22:29:41 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="024811.html">[rabbitmq-discuss] .NET client with 0-9-1 protocol is sending the AMQP 0-8 header
</A></li>
        <LI>Next message: <A HREF="024803.html">[rabbitmq-discuss] rabbit_auth_backend_ldap and Active Directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24802">[ date ]</a>
              <a href="thread.html#24802">[ thread ]</a>
              <a href="subject.html#24802">[ subject ]</a>
              <a href="author.html#24802">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>All/Simon?

I'm new to the RabbitMQ world and like the product, but I'm about to pull my hair out on AD authentication.

So, I'm looking to authorize with my unix username which are the same as our windows logins.

I'm having a lot of trouble getting the DNs to play nice.  Since my DN has my fullname as the cn part, I don't know how to map the username to the full name.

If I login with my full name &quot;Matt Bradbury&quot; so that my full user_dn matches my group structure, it works just fine.
i.e.  {user_dn_pattern,       &quot;CN=${username},OU=Users,DC=corp,DC=example,DC=com&quot;},

To use my unix name I have to use: {user_dn_pattern,       &quot;${username}@CORP&quot;},

This lets me login, but I'm then unable to match the DN with my groups since they use my full name in the DN.

Does anyone have a nice little recipe that lets me login with my shortname, which corresponds to the sAMAccountName attribute in AD LDAP?

Also, I can't seem to get dn_lookup_base or dn_lookup_attribute to make any difference to the LDAP queries when I look at the logs.  I feel like the solution is with these commands but I think I'm missing something here.

Is there a way to search for a DN from the sAMAccountName when I do resource_access_query?

FYI, I'm using other_bind for directory lookups after the login check.

Thank you for your time.

-Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130107/3a0e8328/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130107/3a0e8328/attachment.htm</A>&gt;
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024811.html">[rabbitmq-discuss] .NET client with 0-9-1 protocol is sending the AMQP 0-8 header
</A></li>
	<LI>Next message: <A HREF="024803.html">[rabbitmq-discuss] rabbit_auth_backend_ldap and Active Directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24802">[ date ]</a>
              <a href="thread.html#24802">[ thread ]</a>
              <a href="subject.html#24802">[ subject ]</a>
              <a href="author.html#24802">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
