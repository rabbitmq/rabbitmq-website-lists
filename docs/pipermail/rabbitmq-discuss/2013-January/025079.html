<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] WCF .net problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20WCF%20.net%20problems&In-Reply-To=%3C50FD1C65.80907%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025070.html">
   <LINK REL="Next"  HREF="025078.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] WCF .net problems</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20WCF%20.net%20problems&In-Reply-To=%3C50FD1C65.80907%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] WCF .net problems">emile at rabbitmq.com
       </A><BR>
    <I>Mon Jan 21 10:45:57 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025070.html">[rabbitmq-discuss] WCF .net problems
</A></li>
        <LI>Next message: <A HREF="025078.html">[rabbitmq-discuss] The maximum array length quota (16384) has been exceeded while reading XML data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25079">[ date ]</a>
              <a href="thread.html#25079">[ thread ]</a>
              <a href="subject.html#25079">[ subject ]</a>
              <a href="author.html#25079">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 21/01/13 08:36, kecke wrote:
&gt;<i> 1. We want the queues messages to be persistant(e.g - if rabbitmq service is
</I>&gt;<i> stopped and restarted the messages will still be in the queue). Is there any
</I>&gt;<i> way to do this(e.g set deliverymode=2) in the app.config? 
</I>
The WCF binding currently publishes messages with default parameters, so
it is not possible to select deliverymode=2.

&gt;<i> 2. We want durable queues. We found in this messagelist a post about that,
</I>&gt;<i> and the trick was to change this on line 152 in
</I>&gt;<i> rabbitmq.servicemodel.rabbitmqinputchannel Before: string queue =
</I>&gt;<i> m_model.QueueDeclare(); After: string queue =
</I>&gt;<i> m_model.QueueDeclare(base.LocalAddress.Uri.AbsolutePath, true, false, false,
</I>&gt;<i> null); ...we then got durable queues. This couldnt be done in any other way?
</I>
A bug has been filed to enhance the WCF binding to offer this feature.
Unfortunately, as with deliverymode=2 the only way to obtain this
feature at the moment is to modify the source and recompile.

&gt;<i> 3. 
</I>&gt;<i> 
</I>&gt;<i> We want the client(which in our case is a WCF-service) to post a message to
</I>&gt;<i> the queue and then forget(and be sure that sometime in the future the
</I>&gt;<i> message will be delivered), so we have oneway=&quot;true&quot; in our app.configs. The
</I>&gt;<i> consumer is also a WCF-service. If we stop the rabbitmq server, then our
</I>&gt;<i> services get an error - like its always connected to RabbitMQ. Is there a
</I>&gt;<i> way in the app.config to tell the services we have to only connect when
</I>&gt;<i> messages is delivered or retrieved? 
</I>
That's not possible, because the service cannot predict when a message
will arrive and the queues used internally are transient. The service
must always be running.

&gt;<i> 4. It seems that the messages isn't consumed one by one-it seems that it
</I>&gt;<i> gets them all att once? Is there a way to tell service to fetch them one by
</I>&gt;<i> one? 
</I>
Unfortunately no control over the QoS parameter is provided. The WCF
binding consumes with the default QoS parameter. The only way currently
to obtain this functionality is to modify RabbitMQInputChannel and
recompile.

&gt;<i> 5. We try to do WCF and have all config in app.config, so we dont code
</I>&gt;<i> rabbitmq specific code. 
</I>
For  the degree of control that you require I would suggest that you use
the RabbitMQ .net client directly instead of WCF. This will give you all
the control that you need until the WCF binding is enhanced.



-Emile





</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025070.html">[rabbitmq-discuss] WCF .net problems
</A></li>
	<LI>Next message: <A HREF="025078.html">[rabbitmq-discuss] The maximum array length quota (16384) has been exceeded while reading XML data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25079">[ date ]</a>
              <a href="thread.html#25079">[ thread ]</a>
              <a href="subject.html#25079">[ subject ]</a>
              <a href="author.html#25079">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
