<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RPC with Erlang client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RPC%20with%20Erlang%20client&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006917.html">
   <LINK REL="Next"  HREF="006866.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RPC with Erlang client</H1>
    <B>Jones, Richard</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RPC%20with%20Erlang%20client&In-Reply-To="
       TITLE="[rabbitmq-discuss] RPC with Erlang client">rljones at lastminute.com
       </A><BR>
    <I>Mon Apr 12 12:03:42 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006917.html">[rabbitmq-discuss] &lt;rabbitmq-java-client-vxx&gt;\test\src\com\rabbitmq\examples ---	are these supposed to work out of the box on all platforms, i.e., if they do not, is it considered a bug?
</A></li>
        <LI>Next message: <A HREF="006866.html">[rabbitmq-discuss] RPC with Erlang client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6846">[ date ]</a>
              <a href="thread.html#6846">[ thread ]</a>
              <a href="subject.html#6846">[ subject ]</a>
              <a href="author.html#6846">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings Rabbiteers,

I've noticed that the RPC server that comes with the Erlang client doesn't acknowledge messages. This has the effect of replaying all previous RPC requests whenever the system is restarted. I've looked at the equivalent code in the Java client, and it does a 'basic.ack' after the result of the call has been sent to the reply queue.

So, with this in mind I humbly submit a patch (attached).

I'm a newbie in all three of: AMQP, RabbitMQ and Erlang, so apologies if I've missed something obvious or I'm barking up the wrong tree.

cheers,
Richard Lewis Jones
-- 
lastminute.com labs

-------------- next part --------------
A non-text attachment was scrubbed...
Name: amqp_rpc_server.erl.patch
Type: text/x-patch
Size: 835 bytes
Desc: amqp_rpc_server.erl.patch
Url : <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100412/73e0729c/attachment.bin">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100412/73e0729c/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006917.html">[rabbitmq-discuss] &lt;rabbitmq-java-client-vxx&gt;\test\src\com\rabbitmq\examples ---	are these supposed to work out of the box on all platforms, i.e., if they do not, is it considered a bug?
</A></li>
	<LI>Next message: <A HREF="006866.html">[rabbitmq-discuss] RPC with Erlang client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6846">[ date ]</a>
              <a href="thread.html#6846">[ thread ]</a>
              <a href="subject.html#6846">[ subject ]</a>
              <a href="author.html#6846">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
