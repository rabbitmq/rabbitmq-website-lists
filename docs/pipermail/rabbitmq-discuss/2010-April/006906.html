<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] to ack or not to ack? that is the question...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20to%20ack%20or%20not%20to%20ack%3F%20that%20is%20the%20question...&In-Reply-To=B4B5D733-D737-4FC9-A440-9ED18F747194%40npcinternational.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006901.html">
   <LINK REL="Next"  HREF="006907.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] to ack or not to ack? that is the question...</H1>
    <B>Tony Garnock-Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20to%20ack%20or%20not%20to%20ack%3F%20that%20is%20the%20question...&In-Reply-To=B4B5D733-D737-4FC9-A440-9ED18F747194%40npcinternational.com"
       TITLE="[rabbitmq-discuss] to ack or not to ack? that is the question...">tonyg at lshift.net
       </A><BR>
    <I>Thu Apr 15 22:29:09 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006901.html">[rabbitmq-discuss] to ack or not to ack? that is the question...
</A></li>
        <LI>Next message: <A HREF="006907.html">[rabbitmq-discuss] RabbitMQ running over XEN
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6906">[ date ]</a>
              <a href="thread.html#6906">[ thread ]</a>
              <a href="subject.html#6906">[ subject ]</a>
              <a href="author.html#6906">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jon,

Whether 'tis nobler in the client to suffer the tedium of constant redeliveries
or to take arms against the tide of poisoned messages and by acknowledging, end
them?

You've hit on the two major approaches to responsibility-transfer that AMQP
supports:

 - At most once, where acking is immediate, before processing, or where
   no-ack mode is used

 - At least once, where acking is delayed until after processing.

(You get exactly-once by setting expiry timers appropriately and using a
deduplication filter in conjunction with at-least-once.)

There's no point in acking immediately you receive a message: you may as well
use no-ack mode, which lets the server be more efficient internally besides
automatically &quot;acknowledging&quot; the outbound message as it hits the wire toward
the client. If you have acknowledgements enabled, it makes more sense to
acknowledge after processing the message. (If you're doing exactly-once, then
&quot;processing&quot; could simply entail making a note of the message in the
deduplication filter.)

With regard to not knowing the content/types of a message, we often find that
segregating message types onto separate queues makes good sense. It permits the
use of different acking policies, which are configured on a per-consumer basis.

Regards,
  Tony



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006901.html">[rabbitmq-discuss] to ack or not to ack? that is the question...
</A></li>
	<LI>Next message: <A HREF="006907.html">[rabbitmq-discuss] RabbitMQ running over XEN
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6906">[ date ]</a>
              <a href="thread.html#6906">[ thread ]</a>
              <a href="subject.html#6906">[ subject ]</a>
              <a href="author.html#6906">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
