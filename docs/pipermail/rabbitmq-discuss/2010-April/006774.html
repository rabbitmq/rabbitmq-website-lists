<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbit cluster keeps crashing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbit%20cluster%20keeps%20crashing&In-Reply-To=28023134.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006773.html">
   <LINK REL="Next"  HREF="006814.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbit cluster keeps crashing</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbit%20cluster%20keeps%20crashing&In-Reply-To=28023134.post%40talk.nabble.com"
       TITLE="[rabbitmq-discuss] rabbit cluster keeps crashing">matthew at lshift.net
       </A><BR>
    <I>Fri Apr  2 16:24:11 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006773.html">[rabbitmq-discuss] queues scheme at startup time
</A></li>
        <LI>Next message: <A HREF="006814.html">[rabbitmq-discuss] rabbit cluster keeps crashing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6774">[ date ]</a>
              <a href="thread.html#6774">[ thread ]</a>
              <a href="subject.html#6774">[ subject ]</a>
              <a href="author.html#6774">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Wed, Mar 24, 2010 at 06:07:09PM -0700, LoOoD wrote:
&gt;<i> We've been having a problem with our rabbit servers. We have a cluster setup,
</I>&gt;<i> one disk node and two ram nodes. All clients only connect to
</I>&gt;<i> the ram nodes. The ram nodes eventually stop accepting new connections.
</I>&gt;<i> 
</I>&gt;<i> The only way to fix so far is to restart the affected ram node. 
</I>&gt;<i> 
</I>&gt;<i> We're running 1.7.2-1 (installed via the deb repo) on ubuntu 8.10 64bit.
</I>&gt;<i> 
</I>&gt;<i> Here is are some crash reports from rabbit-sasl.log:
</I>
Hmm. The nodedown simply suggests that Erlang has lost touch with the other
nodes. What kind of a network are you suing - is this a LAN or WAN or...
and do you see any sort of packet loss with other applications?

You may want to experiment with lower values of net_ticktime in your
rabbitmq.config file:

[{kernel, [{net_ticktime, 5}]}].

See <A HREF="http://ftp.sunet.se/pub/lang/erlang/doc/man/net_kernel.html#set_net_ticktime-1">http://ftp.sunet.se/pub/lang/erlang/doc/man/net_kernel.html#set_net_ticktime-1</A>
for documentation. It could just be that getting the nodes to talk to each
other more frequently will solve this. On the other hand, that's likely to
only be a problem if there are large periods of inactivity in the cluster -
is this the case?

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006773.html">[rabbitmq-discuss] queues scheme at startup time
</A></li>
	<LI>Next message: <A HREF="006814.html">[rabbitmq-discuss] rabbit cluster keeps crashing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6774">[ date ]</a>
              <a href="thread.html#6774">[ thread ]</a>
              <a href="subject.html#6774">[ subject ]</a>
              <a href="author.html#6774">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
