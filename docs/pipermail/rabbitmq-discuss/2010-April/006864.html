<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Bound Queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Bound%20Queues&In-Reply-To=m2gab2aca561004131142h6cc049cfz1ea4ae6169ab09a8%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006859.html">
   <LINK REL="Next"  HREF="006867.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Bound Queues</H1>
    <B>Tony Garnock-Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Bound%20Queues&In-Reply-To=m2gab2aca561004131142h6cc049cfz1ea4ae6169ab09a8%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Bound Queues">tonyg at lshift.net
       </A><BR>
    <I>Wed Apr 14 03:07:01 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006859.html">[rabbitmq-discuss] Bound Queues
</A></li>
        <LI>Next message: <A HREF="006867.html">[rabbitmq-discuss] Bound Queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6864">[ date ]</a>
              <a href="thread.html#6864">[ thread ]</a>
              <a href="subject.html#6864">[ subject ]</a>
              <a href="author.html#6864">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jeff Lindsay wrote:
&gt;<i> I didn't realize this about queues. I thought that's where the state was
</I>&gt;<i> in Rabbit. For example, I thought when a node goes down, the messages in
</I>&gt;<i> the queues in that node are lost. 
</I>
Ah, I think Matthias is glossing over issues of clustering here and talking
just about a single node's behaviour. So where he says RabbitMQ keeps one copy
regardless of how many queues, he means each node that holds queues that a
message is destined for keeps one copy. Generally. There are lots of caveats.
The point, though, is that one message may end up on 100 queues, but be shared
between them, leading to nontrivial memory accounting.

In this case I'd be inclined to do the simplest thing: count each message on a
queue toward its budget, no matter if the system has cleverly managed to avoid
copying that same message out to a million other queues. But it really does
suggest that we're not really measuring the right thing here somehow; I'm
looking forward to discovering a better way of accounting for messages!

Tony



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006859.html">[rabbitmq-discuss] Bound Queues
</A></li>
	<LI>Next message: <A HREF="006867.html">[rabbitmq-discuss] Bound Queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6864">[ date ]</a>
              <a href="thread.html#6864">[ thread ]</a>
              <a href="subject.html#6864">[ subject ]</a>
              <a href="author.html#6864">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
