<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Release of HA + Pacemaker guide
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Release%20of%20HA%20%2B%20Pacemaker%20guide&In-Reply-To=k2ib22588821004260648p1a0bbdbbx7835be1614149d5f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006982.html">
   <LINK REL="Next"  HREF="006984.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Release of HA + Pacemaker guide</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Release%20of%20HA%20%2B%20Pacemaker%20guide&In-Reply-To=k2ib22588821004260648p1a0bbdbbx7835be1614149d5f%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Release of HA + Pacemaker guide">matthew at lshift.net
       </A><BR>
    <I>Mon Apr 26 14:59:38 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006982.html">[rabbitmq-discuss] Release of HA + Pacemaker guide
</A></li>
        <LI>Next message: <A HREF="006984.html">[rabbitmq-discuss] Release of HA + Pacemaker guide
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6983">[ date ]</a>
              <a href="thread.html#6983">[ thread ]</a>
              <a href="subject.html#6983">[ subject ]</a>
              <a href="author.html#6983">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Joe,

On Mon, Apr 26, 2010 at 11:48:12PM +1000, Joe Healy wrote:
&gt;<i> Thanks - this is a great guide for ha rabbit.
</I>
Good to hear!

&gt;<i> We've been using a similar set up for a couple of months with iscsi instead
</I>&gt;<i> of drdb.
</I>
Yup. I was simply using drbd because it's pretty much the lowest common
denominator - (e)nbd would also be possible (over RAID 1), but that's
more fiddly. iscsi / NAS / SAN and such ilk would, I'd expect, give
better results.

&gt;<i> Do you need to add resource grouping or colocation to the bunny and ip
</I>&gt;<i> resources to make sure that they move together? Is it important that the ip
</I>&gt;<i> migrates before the bunny starts so that it will listen on the right
</I>&gt;<i> address?
</I>
Yes and yes:

&quot;crm(ip)# configure primitive ip ocf:heartbeat:IPaddr2 params ip=&quot;192.168.50.1&quot; cidr_netmask=&quot;24&quot;
crm(ip)# configure colocation bunny_on_ip inf: bunny ip
crm(ip)# configure order bunny_after_ip inf: ip bunny

This should all be looking rather familiar by now. We create the ip
resource, we say that the bunny resource must run on the same node as
the ip resource, and we make sure that the bunny resource is started
after, and stopped before, the ip resource.&quot;

These are necessary steps - sure, you could have bunny just listen on
0.0.0.0 which is the default, but if the network i/f isn't there when it
starts then there may be problems. I'm not quite sure what the IPaddr2
script is doing, but it's clearly at least slightly magic - the
interface doesn't show up in the output of ifconfig. In general, I found
things more reliable if the IP address is already there before bunny
starts up.

Matthew

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006982.html">[rabbitmq-discuss] Release of HA + Pacemaker guide
</A></li>
	<LI>Next message: <A HREF="006984.html">[rabbitmq-discuss] Release of HA + Pacemaker guide
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6983">[ date ]</a>
              <a href="thread.html#6983">[ thread ]</a>
              <a href="subject.html#6983">[ subject ]</a>
              <a href="author.html#6983">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
