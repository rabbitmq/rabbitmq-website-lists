<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] New User: Questions and Comments
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20New%20User%3A%20Questions%20and%20Comments&In-Reply-To=6cf1763a1003110607p13c03fct5ec0fe7a69118f72%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006826.html">
   <LINK REL="Next"  HREF="006840.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] New User: Questions and Comments</H1>
    <B>Michael Bridgen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20New%20User%3A%20Questions%20and%20Comments&In-Reply-To=6cf1763a1003110607p13c03fct5ec0fe7a69118f72%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] New User: Questions and Comments">mikeb at lshift.net
       </A><BR>
    <I>Thu Apr  8 13:16:27 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006826.html">[rabbitmq-discuss] Erlang Client
</A></li>
        <LI>Next message: <A HREF="006840.html">[rabbitmq-discuss] New User: Questions and Comments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6828">[ date ]</a>
              <a href="thread.html#6828">[ thread ]</a>
              <a href="subject.html#6828">[ subject ]</a>
              <a href="author.html#6828">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Hello All!  I'm a potential new user of RabbitMQ and am also new to
</I>&gt;<i> AMQP and messaging in general.
</I>
Hi Cory, and welcome to the warren!

To the comments and questions:

&gt;<i> RabbitMQ is easy to set up, requires less configuration and works well
</I>&gt;<i> right out of the box.  It's also available in our distribution of
</I>&gt;<i> choice (Debian) which makes things easier.  Thanks!
</I>
Painless set-up-and-get-going is a major driver for us, so it's good to 
hear it was easy for you.

&gt;<i> * Cluster Setup *
</I>&gt;<i> 
</I>&gt;<i> Setting up a cluster works great but the status of a node as a disk
</I>&gt;<i> node is confusing.  This was exacerbated by problems I was having with
</I>&gt;<i> my client library not setting the delivery mode.  Regardless, I don't
</I>&gt;<i> see a way to determine (from rabbitmqctl) if a node is a disk node or
</I>&gt;<i> memory node.  It's therefore difficult to tell if I've set things up
</I>&gt;<i> correctly.
</I>
Just to be clear, the flavour of a node in a cluster has no bearing on 
delivery mode -- persistent messages are always persisted.  What's being 
saved to disk in a disk node is durable exchange, queue and binding 
configuration and cluster configuration.

Yes, it would be better if &quot;rabbitmqctl status&quot; listed whether the 
running nodes were disk or RAM nodes, at least for verifying 
configuration, as you say.  I've logged a bug here for it.

&gt;<i> Also, the method for specifying that the node should be a disk node is
</I>&gt;<i> confusing.  And I quote:
</I>&gt;<i> 
</I>&gt;<i> &quot;we list <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit3</A> as a node in the cluster command in order to
</I>&gt;<i> turn it into a disk rather than ram node&quot;
</I>
Yes it is, and it doesn't help that both &quot;rabbitmqctl&quot; and &quot;man 
rabbitmqctl&quot; give slightly the wrong syntax (we fixed that just now).

&gt;<i> I still don't grok that.  It sounds like when specifying the other
</I>&gt;<i> nodes this node should talk to, if we specify ourselves then it
</I>&gt;<i> becomes a disk node?
</I>
Yes that's exactly it.  &quot;man rabbitmqctl&quot; does give a better account 
than the web site guide, but it's still rather obscure.

&gt;<i> I'm not sure if there's some cultural/technical
</I>&gt;<i> reason for this type of configuration but it is completely lost on me.
</I>&gt;<i>  I'd be much more likely understand something like
</I>&gt;<i> 
</I>&gt;<i> rabbitmqctl cluster <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit3</A>[type=&quot;disk&quot;]
</I>&gt;<i> 
</I>&gt;<i> or whatever is easiest to parse.
</I>
Well, the idea is that at the point you are issuing the command you can 
specify only the diskiness of the local node.  So perhaps better would 
be a switch:

rabbitmqctl cluster [--disk | -D] &lt;clusternode&gt; ...

(bug logged for this too)

&gt;<i> * Cluster Capabilities *
</I>&gt;<i> [...]
</I>&gt;<i> When I originally read this I said &quot;great!&quot; and moved right down the
</I>&gt;<i> page to setup my cluster.  I was not really aware that this would
</I>&gt;<i> happen:
</I>&gt;<i>  * Create queue A on node 1
</I>&gt;<i>  * Send messages that are routed to queue A
</I>&gt;<i>  * Pull the plug on node A
</I>&gt;<i>  * Node 2 (if asked) says queue A doesn't exist
</I>&gt;<i> 
</I>&gt;<i> I realized afterward that this was what the earlier quote was trying
</I>&gt;<i> to tell me.  I'm not sure how to solve it in language.  There's a thin
</I>&gt;<i> line between warning users of shortcoming and being an alarmist.
</I>
Indeed.  The single most common misunderstanding about clustering that 
comes up is that it gives full redundancy, whereas it's for scalability 
(basically, being able to have more processors accepting, routing, and 
delivering messages).  So the guide should at least say that up-front.

There is an HA guide on its way -- consider your voice added to those 
willing it onward.

&gt;<i> I imagine that one could watch for the error saying that the queue
</I>&gt;<i> doesn't exist and retry later.  But how does one disambiguate this
</I>&gt;<i> from the unlikely occurrence that the queue has somehow disappeared?
</I>&gt;<i> Perhaps if I had asked node 2 about queue A it could've told me that
</I>&gt;<i> is was unavailable rather than non-existant?
</I>
Yes, there's no difference, observable by a client, between the queue 
being deleted by another client and it disappearing because it's located 
at a downed node.  There's not really a mechanism in AMQP to describe 
unavailability as such; and anyway, in an ideal world downing a node 
wouldn't have that effect.

&gt;<i> * Patterns *
</I>&gt;<i> 
</I>&gt;<i> I've watched the RabbitMQ Google tech talk opened by Alexis and would
</I>&gt;<i> love to see some recipes for setting up RabbitMQ to satisfy the
</I>&gt;<i> various patterns outlined.  Things like Service Bus, Client Server,
</I>&gt;<i> etc.  Having that as a guide would be great!
</I>
<A HREF="http://www.rabbitmq.com/how.html">http://www.rabbitmq.com/how.html</A> links to blog posts and so on with 
plenty of examples; in particular, 
<A HREF="http://blogs.digitar.com/jjww/2009/01/rabbits-and-warrens/">http://blogs.digitar.com/jjww/2009/01/rabbits-and-warrens/</A> seems to be 
popular as a primer.

I don't there's a single place with common recipes (e.g., on the 
RabbitMQ site) -- that's a great suggestion.

&gt;<i> * Configuration *
</I>&gt;<i> 
</I>&gt;<i> Is it possible to specify exchange/queue/binding creation in
</I>&gt;<i> configuration?  If not, I'm going to need to write a client
</I>&gt;<i> application that connects and establishes them for me.  That seems
</I>&gt;<i> clunky.
</I>
There's no AMQP-specified way of doing this, but you could look at BQL 
as a way of maintaining a repeatable configuration:
<A HREF="http://www.rabbitmq.com/rabbitmq-bql.html">http://www.rabbitmq.com/rabbitmq-bql.html</A>

&gt;<i> I hope that me pointing out a mole or two on your baby doesn't sound
</I>&gt;<i> like I'm implying that the whole thing is ugly!  Users rarely realize
</I>&gt;<i> that the BEST time to make comments about a complex system such as
</I>&gt;<i> this is when they are most confused.
</I>
For sure, and thank you for yours, they have indeed been a help.

Regards,
Michael



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006826.html">[rabbitmq-discuss] Erlang Client
</A></li>
	<LI>Next message: <A HREF="006840.html">[rabbitmq-discuss] New User: Questions and Comments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6828">[ date ]</a>
              <a href="thread.html#6828">[ thread ]</a>
              <a href="subject.html#6828">[ subject ]</a>
              <a href="author.html#6828">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
