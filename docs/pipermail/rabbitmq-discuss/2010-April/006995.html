<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] compiled plugin for debian packaged rabbitmq-server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20compiled%20plugin%20for%20debian%20packaged%0A%20rabbitmq-server&In-Reply-To=B809D4C8-5EEE-472F-9892-4219F3B4F772%40admob.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006992.html">
   <LINK REL="Next"  HREF="006993.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] compiled plugin for debian packaged rabbitmq-server</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20compiled%20plugin%20for%20debian%20packaged%0A%20rabbitmq-server&In-Reply-To=B809D4C8-5EEE-472F-9892-4219F3B4F772%40admob.com"
       TITLE="[rabbitmq-discuss] compiled plugin for debian packaged rabbitmq-server">matthew at lshift.net
       </A><BR>
    <I>Mon Apr 26 22:14:38 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006992.html">[rabbitmq-discuss] compiled plugin for debian packaged	rabbitmq-server
</A></li>
        <LI>Next message: <A HREF="006993.html">[rabbitmq-discuss] compiled plugin for debian packaged	rabbitmq-server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6995">[ date ]</a>
              <a href="thread.html#6995">[ thread ]</a>
              <a href="subject.html#6995">[ subject ]</a>
              <a href="author.html#6995">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Mark,

On Mon, Apr 26, 2010 at 02:06:36PM -0700, Mark Lin wrote:
&gt;<i> Rabbitmq-shovel plugin works  compiling from source and following README instructions.  When I copy the compiled .ez files 
</I>&gt;<i> 
</I>&gt;<i> amqp_client.ez  rabbit_common.ez  rabbitmq-shovel.ez
</I>&gt;<i> 
</I>&gt;<i> from rabbitmq-shovel/dist  to rabbitmq plugin directory that I specified in /etc/rabbitmq/rabbitmq.conf
</I>&gt;<i> 
</I>&gt;<i> RABBITMQ_PLUGINS_DIR=/usr/lib/rabbitmq/plugins
</I>&gt;<i> 
</I>&gt;<i> and issued rabbitmq-activate-plugins, I got this error:
</I>&gt;<i> 
</I>&gt;<i> ERROR: generation of boot script file /usr/lib/rabbitmq/lib/rabbitmq_server-1.7.2/sbin/../ebin/rabbit.script failed:
</I>&gt;<i> Duplicated modules: 
</I>&gt;<i>         rabbit_writer specified in rabbit and rabbit_common
</I>&gt;<i>         rabbit_reader specified in rabbit and rabbit_common
</I>&gt;<i>         rabbit_net specified in rabbit and rabbit_common
</I>&gt;<i>         rabbit_misc specified in rabbit and rabbit_common
</I>&gt;<i>         rabbit_heartbeat specified in rabbit and rabbit_common
</I>&gt;<i>         rabbit_framing_channel specified in rabbit and rabbit_common
</I>&gt;<i>         rabbit_framing specified in rabbit and rabbit_common
</I>&gt;<i>         rabbit_channel specified in rabbit and rabbit_common
</I>&gt;<i>         rabbit_binary_parser specified in rabbit and rabbit_common
</I>&gt;<i>         rabbit_binary_generator specified in rabbit and rabbit_common
</I>&gt;<i>         rabbit_basic specified in rabbit and rabbit_common
</I>&gt;<i>         priority_queue specified in rabbit and rabbit_common
</I>&gt;<i>         gen_server2 specified in rabbit and rabbit_common
</I>&gt;<i> 
</I>&gt;<i> If I remove rabbit_common.ez or use &quot;ln -s&quot; to create a soft link of rabbitmq-shovel in plugin directory, then activate works.  But when I kick off server, I got this error:
</I>
Yes. This is exactly what's meant to happen - though I do admit it's not
entirely explicitly explained by the instructions. Basically, copying
the .ez is fine, provided you don't copy in the rabbit_common.ez; or
linking is also fine, but you'll need to link to the shovel and
erlang-client.

We do have a bug open for everything we want to change about the plugin
mechanism. It's quite long.

&gt;<i> {&quot;Kernel pid terminated&quot;,application_controller,&quot;{application_start_failure,rabbit_shovel,{bad_return,{{rabbit_shovel,start,[normal,[]]},{'EXIT',{undef,[{rabbit_framing,method_record,['queue.declare']},{rabbit_shovel_sup,parse_declaration,1},{lists,foldl,3},{rabbit_shovel_sup,parse_endpoint,1},{rabbit_shovel_sup,'-parse_shovel_config_dict/1-fun-7-',4},{lists,foldl,3},{rabbit_shovel_sup,parse_shovel_config,3},{rabbit_shovel_sup,parse_configuration,3}]}}}}}&quot;}
</I>
Yes. You need something more up to date than Rabbit 1.7.2. You really
need to be compiling from the head of the default branch of
rabbitmq-server. In general, the only thing we try to ensure is that the
latest default revision on the plugin works with the latest default
revision on the server. Until we (finally) get around to packaging up
and releasing plugins, this is unlikely to change I'm afraid.

Matthew

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006992.html">[rabbitmq-discuss] compiled plugin for debian packaged	rabbitmq-server
</A></li>
	<LI>Next message: <A HREF="006993.html">[rabbitmq-discuss] compiled plugin for debian packaged	rabbitmq-server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6995">[ date ]</a>
              <a href="thread.html#6995">[ thread ]</a>
              <a href="subject.html#6995">[ subject ]</a>
              <a href="author.html#6995">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
