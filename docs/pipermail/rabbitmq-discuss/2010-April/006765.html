<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] New RabbitMQ Groovy DSL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20New%20RabbitMQ%20Groovy%20DSL&In-Reply-To=q2sf977c6861003311658hcd722d84kef587fa8ea2aa188%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006811.html">
   <LINK REL="Next"  HREF="006766.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] New RabbitMQ Groovy DSL</H1>
    <B>Jon Brisbin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20New%20RabbitMQ%20Groovy%20DSL&In-Reply-To=q2sf977c6861003311658hcd722d84kef587fa8ea2aa188%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] New RabbitMQ Groovy DSL">jon.brisbin at npcinternational.com
       </A><BR>
    <I>Thu Apr  1 15:24:57 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006811.html">[rabbitmq-discuss] clustering question
</A></li>
        <LI>Next message: <A HREF="006766.html">[rabbitmq-discuss] RabbitMQ 1.7.2 with Erlang R13B04 crashes after	several hours running MulticastMain from 1.7.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6765">[ date ]</a>
              <a href="thread.html#6765">[ thread ]</a>
              <a href="subject.html#6765">[ subject ]</a>
              <a href="author.html#6765">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've put the RabbitMQ Groovy DSL code up on Github:

<A HREF="http://github.com/jbrisbin/rabbitmq-dsl">http://github.com/jbrisbin/rabbitmq-dsl</A>

I've tried to include enough documentation to get people going with a command-line DSL runner. I'm always interested in feedback, so please don't be shy. :)

Jon Brisbin
Portal Webmaster
NPC International, Inc.



On Mar 31, 2010, at 6:58 PM, Rob Elsner wrote:

&gt;<i> Jon,
</I>&gt;<i> 
</I>&gt;<i> I've used Rabbit in some applications, so when you get that up I'd
</I>&gt;<i> like to help contribute.  I'm working on my Groovy, so it's a good
</I>&gt;<i> project.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Rob
</I>&gt;<i> 
</I>&gt;<i> On Wed, Mar 31, 2010 at 2:49 PM, Jon Brisbin
</I>&gt;<i> &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jon.brisbin at npcinternational.com</A>&gt; wrote:
</I>&gt;&gt;<i> Folks,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> &quot;I'm fixin' to&quot; (as we say here in the Midwest) upload some recent work I've done on a Groovy-language DSL for RabbitMQ that lets me integrate with our existing Groovy REST/MVC framework. A simple example looks like:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> mq.on error: {err -&gt;
</I>&gt;&gt;<i>  log.error(err.message)
</I>&gt;&gt;<i> }, myevent: {msg -&gt;
</I>&gt;&gt;<i>  log.info(msg.bodyAsString)
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> // Initialization
</I>&gt;&gt;<i> mq {channel -&gt;
</I>&gt;&gt;<i>  //channel.queueDelete(&quot;test&quot;)
</I>&gt;&gt;<i>  //channel.exchangeDelete(&quot;test&quot;)
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> mq.exchange(name: &quot;test&quot;) {
</I>&gt;&gt;<i>  // Named, non-durable queue
</I>&gt;&gt;<i>  queue name: &quot;test&quot;, routingKey: &quot;test.key&quot;, {
</I>&gt;&gt;<i>    consume tag: &quot;test&quot;, onmessage: &quot;myevent&quot;
</I>&gt;&gt;<i>  }
</I>&gt;&gt;<i>  // Anonymous (server-generated) non-durable queue
</I>&gt;&gt;<i>  queue name: null, routingKey: &quot;test2.key&quot;, {
</I>&gt;&gt;<i>    consume tag: &quot;test2&quot;, onmessage: {msg -&gt;
</I>&gt;&gt;<i>      log.info(msg.bodyAsString)
</I>&gt;&gt;<i>      log.info(&quot;myHeaderValue=&quot; + msg.properties.headers[&quot;myHeaderValue&quot;])
</I>&gt;&gt;<i>    }
</I>&gt;&gt;<i>  }
</I>&gt;&gt;<i>  // Poke some messages
</I>&gt;&gt;<i>  queue routingKey: &quot;test.key&quot;, {
</I>&gt;&gt;<i>    publish body: &quot;this is a test&quot;
</I>&gt;&gt;<i>  }
</I>&gt;&gt;<i>  queue routingKey: &quot;test2.key&quot;, {
</I>&gt;&gt;<i>    publish myHeaderValue: &quot;customHeader&quot;, body: {msg, out -&gt;
</I>&gt;&gt;<i>      msg.properties.contentType = &quot;text/plain&quot;
</I>&gt;&gt;<i>      out.write(&quot;test are test bytes&quot;.bytes)
</I>&gt;&gt;<i>    }
</I>&gt;&gt;<i>  }
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> To test it, I've got a command-line utility that takes RabbitMQ connection parameters and a Groovy DSL file to operate on (it also handles stdin/stdout for piping).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Basics of the system include:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> * Direct access to the channel when you need custom stuff.
</I>&gt;&gt;<i> * A very basic event system for dispatch error and custom application events.
</I>&gt;&gt;<i> * Using Groovy, I can get a lot of stuff done quickly (works great for utilities, etc...).
</I>&gt;&gt;<i> * On a &quot;consume&quot; closure, if you return a non-null/true result, it will keep listening for more messages (uses a QueuingConsumer).
</I>&gt;&gt;<i> * On a &quot;publish&quot; node, if you specify a closure for the body, it will call() that closure, passing an output stream for you to do custom byte processing, otherwise it'll try and fit whatever you tell it into the message body (strings automagically converted, etc...).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> There's more to this. This is just a simplistic example. I'll try and document some of that on my github account.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I'd be interested in some feedback. I'm wondering what might make this useful to more people than just me. I do make some assumptions about how I'm interacting with RabbitMQ because that's just how we're doing it. I'd be interested in hearing if that doesn't hold for others.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I'll post the link when I've got everything put into Git.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Jon Brisbin
</I>&gt;&gt;<i> Portal Webmaster
</I>&gt;&gt;<i> NPC International, Inc.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i> 
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006811.html">[rabbitmq-discuss] clustering question
</A></li>
	<LI>Next message: <A HREF="006766.html">[rabbitmq-discuss] RabbitMQ 1.7.2 with Erlang R13B04 crashes after	several hours running MulticastMain from 1.7.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6765">[ date ]</a>
              <a href="thread.html#6765">[ thread ]</a>
              <a href="subject.html#6765">[ subject ]</a>
              <a href="author.html#6765">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
