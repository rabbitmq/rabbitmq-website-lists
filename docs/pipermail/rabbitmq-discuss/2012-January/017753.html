<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Client Connection Issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Client%20Connection%20Issue&In-Reply-To=%3C20120130100755.GJ3692%40southbank.Home%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017751.html">
   <LINK REL="Next"  HREF="017749.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Client Connection Issue</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Client%20Connection%20Issue&In-Reply-To=%3C20120130100755.GJ3692%40southbank.Home%3E"
       TITLE="[rabbitmq-discuss] Client Connection Issue">alexandru at rabbitmq.com
       </A><BR>
    <I>Mon Jan 30 10:07:55 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017751.html">[rabbitmq-discuss] Client Connection Issue
</A></li>
        <LI>Next message: <A HREF="017749.html">[rabbitmq-discuss] ShutdownSignalException second 'channel.open'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17753">[ date ]</a>
              <a href="thread.html#17753">[ thread ]</a>
              <a href="subject.html#17753">[ subject ]</a>
              <a href="author.html#17753">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I guess that the problem is that the client didn't close the socket when
rebooting, so the broker won't find out that the client is missing until
it tries to send something to it.

The client should enable heartbeats when connecting to the broker (see
the various heartbeat methods in the connection factory classes).
Heartbeats are empty frames that get sent between the broker and client
periodically; if either doesn't respond to a few heartbeats in a row,
the other knows that the connection has failed for some reason and will
close it.

Cheers,
Alex

On Sun, Jan 29, 2012 at 06:10:23PM -0800, &#22521;&#26480; &#20446; wrote:
&gt;<i> Hi all,
</I>&gt;<i>     I have met a problem; Once I have a client node connection
</I>&gt;<i> RabbitMQ server, the connection will be list in the RabbitMQ
</I>&gt;<i> management Web UI, and also the corresponding connection could be see
</I>&gt;<i> in the server by netstat which state is ESTABLISHED; But while the
</I>&gt;<i> client node reboot, the connection still be alive form the RabbitMQ's
</I>&gt;<i> view from Web UI and netstat:
</I>&gt;<i> tcp        0      0 virt15-njhx-kvm-19:35673    virt15-njhx-
</I>&gt;<i> kvm-18:52893    ESTABLISHED 27069/beam.smp      off (0.00/0/0)
</I>&gt;<i>    By netstat --timer, the connection's timer is at off state;
</I>&gt;<i> 
</I>&gt;<i>    Thus, how to fix this or how to config the timeout value?
</I>&gt;<i> 
</I>&gt;<i> Thx
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017751.html">[rabbitmq-discuss] Client Connection Issue
</A></li>
	<LI>Next message: <A HREF="017749.html">[rabbitmq-discuss] ShutdownSignalException second 'channel.open'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17753">[ date ]</a>
              <a href="thread.html#17753">[ thread ]</a>
              <a href="subject.html#17753">[ subject ]</a>
              <a href="author.html#17753">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
