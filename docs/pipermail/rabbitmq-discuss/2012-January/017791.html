<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clustering - communication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%20-%20communication&In-Reply-To=%3CCAECZ8514mRD89av88Z1wWt4m69_4r6DK_HCLyZKW7eY_MyoKeA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017799.html">
   <LINK REL="Next"  HREF="017798.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clustering - communication</H1>
    <B>Dan Dart</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%20-%20communication&In-Reply-To=%3CCAECZ8514mRD89av88Z1wWt4m69_4r6DK_HCLyZKW7eY_MyoKeA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Clustering - communication">dan at canddi.com
       </A><BR>
    <I>Tue Jan 31 10:07:26 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017799.html">[rabbitmq-discuss] RabbitMQ Client Memory issues
</A></li>
        <LI>Next message: <A HREF="017798.html">[rabbitmq-discuss] Clustering - communication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17791">[ date ]</a>
              <a href="thread.html#17791">[ thread ]</a>
              <a href="subject.html#17791">[ subject ]</a>
              <a href="author.html#17791">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm having trouble getting two nodes talking. For reference they're
called backend and back2 - and each is in each other's hosts file
(with and without a FQDN).

Each can connect to each other on ports 4369 and 5672 - and have the
same .erlang.cookie file (had to hexedit to get it exact).
They're not connecting through the same network but they're not far
away (&lt;1ms ping)
When I try to cluster (taking the node down using stop_app first) - I
get the error:

Error: {no_running_cluster_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at backend</A>],[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at backend</A>]}

When I try to use rabbitmqctl -n <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at back2</A> status, from backend, I get:

Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at back2</A> ...
Error: unable to connect to node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at back2</A>: nodedown
diagnostics:
- nodes and their ports on back2: [{rabbit,48765}]
- current node: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl18870 at localhost</A>
- current node home dir: /var/lib/rabbitmq
- current node cookie hash: (the same each time)

and vice versa.

Can anyone give me some pointers? Do both servers need to be
stop_app'd at the same time for this to succeed or is it something
else?
Also, will stop_app kill any messages? I'm looking not to.
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017799.html">[rabbitmq-discuss] RabbitMQ Client Memory issues
</A></li>
	<LI>Next message: <A HREF="017798.html">[rabbitmq-discuss] Clustering - communication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17791">[ date ]</a>
              <a href="thread.html#17791">[ thread ]</a>
              <a href="subject.html#17791">[ subject ]</a>
              <a href="author.html#17791">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
