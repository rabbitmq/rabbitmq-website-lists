<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Uneven file descriptor use on HA Cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Uneven%20file%20descriptor%20use%20on%20HA%20Cluster&In-Reply-To=%3C2f82902763de2bc896f99d626169d5aa%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017706.html">
   <LINK REL="Next"  HREF="017696.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Uneven file descriptor use on HA Cluster</H1>
    <B>Dave Seltzer</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Uneven%20file%20descriptor%20use%20on%20HA%20Cluster&In-Reply-To=%3C2f82902763de2bc896f99d626169d5aa%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Uneven file descriptor use on HA Cluster">dseltzer at tveyes.com
       </A><BR>
    <I>Thu Jan 26 16:04:22 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017706.html">[rabbitmq-discuss] RabbitMQ publish
</A></li>
        <LI>Next message: <A HREF="017696.html">[rabbitmq-discuss] Uneven file descriptor use on HA Cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17695">[ date ]</a>
              <a href="thread.html#17695">[ thread ]</a>
              <a href="subject.html#17695">[ subject ]</a>
              <a href="author.html#17695">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Everyone,



My google-fu is failing me, so maybe someone can help me out with an issue
I&#8217;ve been having.



I have two RabbitMQ 2.6.1 servers running on Centos 5.7. The two servers
(QueuePool01 and QueuePool02) are running as a cluster as we have a number
of durable HA queues. I&#8217;m load-balancing client-interactions using HAproxy
on a third server.



I started noticing that QueuePool02was using ~800 out of 1024 file
descriptors (while QueuePool01 was only using ~50). So to decrease the risk
of running out of descriptors I increase the number to 4096 and restarted
the node.



Now, again I see the number of file descriptors on QueuePool02 increasing
even though QueuePool01 is remaining steady. Is it possible there is some
sort of leak? Should the two servers tend to use the same number of file
descriptors?



Here is what the current load looks like



Dave S
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120126/03b59cba/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120126/03b59cba/attachment.htm</A>&gt;
</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017706.html">[rabbitmq-discuss] RabbitMQ publish
</A></li>
	<LI>Next message: <A HREF="017696.html">[rabbitmq-discuss] Uneven file descriptor use on HA Cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17695">[ date ]</a>
              <a href="thread.html#17695">[ thread ]</a>
              <a href="subject.html#17695">[ subject ]</a>
              <a href="author.html#17695">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
