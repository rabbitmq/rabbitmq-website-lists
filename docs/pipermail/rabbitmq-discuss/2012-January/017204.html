<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Problem with transaction handling on high availability queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Problem%20with%20transaction%20handling%20on%20high%0A%20availability%20queues&In-Reply-To=%3C4F06D0AD.6090602%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017194.html">
   <LINK REL="Next"  HREF="017205.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Problem with transaction handling on high availability queues</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Problem%20with%20transaction%20handling%20on%20high%0A%20availability%20queues&In-Reply-To=%3C4F06D0AD.6090602%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Problem with transaction handling on high availability queues">simon at rabbitmq.com
       </A><BR>
    <I>Fri Jan  6 10:45:01 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017194.html">[rabbitmq-discuss] Problem with transaction handling on high	availability queues
</A></li>
        <LI>Next message: <A HREF="017205.html">[rabbitmq-discuss] Problem with transaction handling on high availability queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17204">[ date ]</a>
              <a href="thread.html#17204">[ thread ]</a>
              <a href="subject.html#17204">[ subject ]</a>
              <a href="author.html#17204">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/01/12 19:50, christopher.grebs wrote:
&gt;<i> =ERROR REPORT==== 5-Jan-2012::19:11:40 ===
</I>&gt;<i> connection&lt;0.20298.26&gt;, channel 1 - error:
</I>&gt;<i> {amqp_error,precondition_failed,&quot;partial tx completion&quot;,'tx.commit'}
</I>
Basically the transaction was not able to commit. In recent RabbitMQ 
versions transactions a implemented in terms of confirms; this error on 
commit is equivalent to the confirm mechanism having sent nacks.

And the confirm mechanism will only send a nack if a queue crashes. So 
I'm guessing that's what happened - you can check further up the log 
file (sorry, the URL you posted is not responding for me). There were 
several bugs in this area that were fixed in 2.7.1 so you might want to 
upgrade.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017194.html">[rabbitmq-discuss] Problem with transaction handling on high	availability queues
</A></li>
	<LI>Next message: <A HREF="017205.html">[rabbitmq-discuss] Problem with transaction handling on high availability queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17204">[ date ]</a>
              <a href="thread.html#17204">[ thread ]</a>
              <a href="subject.html#17204">[ subject ]</a>
              <a href="author.html#17204">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
