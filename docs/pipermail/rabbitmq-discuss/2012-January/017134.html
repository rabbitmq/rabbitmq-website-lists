<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Why are deliveries still showing even though	msg counts show 0 in admin?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Why%20are%20deliveries%20still%20showing%20even%20though%0A%09msg%20counts%20show%200%20in%20admin%3F&In-Reply-To=%3C0469d1e9-473c-4f02-8c7e-ed6300df0199%40k29g2000vbl.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017133.html">
   <LINK REL="Next"  HREF="017149.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Why are deliveries still showing even though	msg counts show 0 in admin?</H1>
    <B>AndyB</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Why%20are%20deliveries%20still%20showing%20even%20though%0A%09msg%20counts%20show%200%20in%20admin%3F&In-Reply-To=%3C0469d1e9-473c-4f02-8c7e-ed6300df0199%40k29g2000vbl.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Why are deliveries still showing even though	msg counts show 0 in admin?">andy.berryman at channeladvisor.com
       </A><BR>
    <I>Tue Jan  3 23:52:07 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017133.html">[rabbitmq-discuss] Why are deliveries still showing even though	msg counts show 0 in admin?
</A></li>
        <LI>Next message: <A HREF="017149.html">[rabbitmq-discuss] Why are deliveries still showing even though	msg counts show 0 in admin?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17134">[ date ]</a>
              <a href="thread.html#17134">[ thread ]</a>
              <a href="subject.html#17134">[ subject ]</a>
              <a href="author.html#17134">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Let me try and explain with a bit more detail.  My publisher and
consumer code are both written in C# and are using the C# driver from
the website.  I am using message acknowledgements and each of my
consumers is configured with a fetch count of 2.  So given that I have
30 consumers, here is what I typically see when monitoring the admin
page and the message counts ...

While messages are being published, the ready and unacknowledged
counts equal the value being displayed for total.  And the
unacknowledged value is equal to 60 (30 consumers * 2 fetch count).
The incoming message rates will show a pretty varying value, but lets
just say the average is ~300 messages/sec.  And the deliveries are
showing variable rates of ~60 messages/sec per consumer.  This remains
fairly constant while the messages are processed off the queue.

Where I'm getting confused is that when it seems to me like all of the
messages have been processed, the counts all show 0, I still see the
delivery rates showing values and they continue to do so for a good
amount of time.  During this time, the counts remain 0, as well as the
incoming messages rates (as nothing else is being published).  So it
seems to me like the counts arent showing messages that are really
there, which are still being delivered.  What's going on there?  Could
these possibly be messages that are being delivered from disk that got
streamed there because memory was too low to keep them in RAM?

Andy

On Jan 3, 5:06&#160;pm, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.s.klis... at gmail.com</A>&gt;
wrote:
&gt;<i> AndyB:
</I>&gt;<i>
</I>&gt;<i> &gt; What is confusing me is that I'm seeing the message counts for all
</I>&gt;<i> &gt; values go to 0, but the deliveries are continuing to show work for a
</I>&gt;<i> &gt; good bit of time (several minutes). &#160;So what messages are being
</I>&gt;<i> &gt; delivered if the counts are showing 0?
</I>&gt;<i>
</I>&gt;<i> It depends on your particular client but probably RabbitMQ delivers messages and clients then keep them around
</I>&gt;<i> until they are all processed. If you use message acknowledgements, there is no reason to worry: if your application crashes, RabbitMQ will notice that connection was closed and will requeue unacknowledged messages.
</I>&gt;<i>
</I>&gt;<i> See basic.qos AMQP method if you want to control this behavior.
</I>&gt;<i>
</I>&gt;<i> MK
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://github.com/michaelklishinhttp://twitter.com/michaelklishin">http://github.com/michaelklishinhttp://twitter.com/michaelklishin</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017133.html">[rabbitmq-discuss] Why are deliveries still showing even though	msg counts show 0 in admin?
</A></li>
	<LI>Next message: <A HREF="017149.html">[rabbitmq-discuss] Why are deliveries still showing even though	msg counts show 0 in admin?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17134">[ date ]</a>
              <a href="thread.html#17134">[ thread ]</a>
              <a href="subject.html#17134">[ subject ]</a>
              <a href="author.html#17134">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
