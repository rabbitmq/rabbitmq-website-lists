<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Getting Rid of a Faulty message
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Getting%20Rid%20of%20a%20Faulty%20message&In-Reply-To=%3CCAOn7oW_2-PxbRWfXfjHfAJFnpL88bHb-64Ygp1Wc4hg-bHVwjQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017390.html">
   <LINK REL="Next"  HREF="017394.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Getting Rid of a Faulty message</H1>
    <B>Simone Busoli</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Getting%20Rid%20of%20a%20Faulty%20message&In-Reply-To=%3CCAOn7oW_2-PxbRWfXfjHfAJFnpL88bHb-64Ygp1Wc4hg-bHVwjQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Getting Rid of a Faulty message">simone.busoli at gmail.com
       </A><BR>
    <I>Sun Jan 15 10:54:55 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017390.html">[rabbitmq-discuss] Getting Rid of a Faulty message
</A></li>
        <LI>Next message: <A HREF="017394.html">[rabbitmq-discuss] Getting Rid of a Faulty message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17391">[ date ]</a>
              <a href="thread.html#17391">[ thread ]</a>
              <a href="subject.html#17391">[ subject ]</a>
              <a href="author.html#17391">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Oren,

RabbitMQ has some mechanisms to handle this, but you'd first need to
describe what you want to do with the faulty message.

   - IF you know the message is going to bring down the other processors
   why aren't you just acking (or nacking or rejecting with requeue=false) it
   before crashing the first processor? I am assuming this is an option, it
   may not be.
   - If you cannot even modify the part of the code which interacts with
   RabbitMQ in the processors you could enable the autoack option, and each
   message will be considered acked as soon as it leaves the broker network
   stack. Beware that this relaxes the reliability constraints you may have,
   introducing the chance of loosing messages


On Sun, Jan 15, 2012 at 10:16, Oren Shochat &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">orenshome at gmail.com</A>&gt; wrote:

&gt;<i> I have a RabbitMQ on Amazon load balancing between N processors that do
</I>&gt;<i> heavy image processing algorithms (running 1-8 min on an 8 core computer) .
</I>&gt;<i> I'm using RabbitMQ fair dispatch and message acknowledgement to make sure
</I>&gt;<i> the Algorithm requests are distributed fairly amongst the processors.
</I>&gt;<i>
</I>&gt;<i> However once in a while I get a message that causes the processor to
</I>&gt;<i> crash. RabbitMQ of course (since no ack received and connection terminated)
</I>&gt;<i> makes sure the message goes to the next processor which also crashes
</I>&gt;<i> because processors share the same code.  Soon all the processors are
</I>&gt;<i> down. They go up again, but the faulty message stays in the system until I
</I>&gt;<i> get the alarms and purges the RabbitMQ queue.
</I>&gt;<i>
</I>&gt;<i> The processors have a 10 years old legacy code written by multiple
</I>&gt;<i> mathematicians and is almost impossible to protect against all faulty data.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Is there any mechanism in RabbitMQ that can still give me load balancing
</I>&gt;<i> but kick out a message that cannot be processed by consumers?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i> Oren
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120115/f259d60c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120115/f259d60c/attachment.htm</A>&gt;
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017390.html">[rabbitmq-discuss] Getting Rid of a Faulty message
</A></li>
	<LI>Next message: <A HREF="017394.html">[rabbitmq-discuss] Getting Rid of a Faulty message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17391">[ date ]</a>
              <a href="thread.html#17391">[ thread ]</a>
              <a href="subject.html#17391">[ subject ]</a>
              <a href="author.html#17391">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
