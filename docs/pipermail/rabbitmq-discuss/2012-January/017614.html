<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Shovel questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20questions&In-Reply-To=%3C4F1E9C17.8090006%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017615.html">
   <LINK REL="Next"  HREF="017551.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Shovel questions</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20questions&In-Reply-To=%3C4F1E9C17.8090006%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Shovel questions">simon at rabbitmq.com
       </A><BR>
    <I>Tue Jan 24 11:55:03 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017615.html">[rabbitmq-discuss] Shovel questions
</A></li>
        <LI>Next message: <A HREF="017551.html">[rabbitmq-discuss] Determining age of queue contents
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17614">[ date ]</a>
              <a href="thread.html#17614">[ thread ]</a>
              <a href="subject.html#17614">[ subject ]</a>
              <a href="author.html#17614">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/01/12 22:58, Elias Levy wrote:
&gt;<i> We are thinking of exposing a portion of our message bus to customers.
</I>&gt;<i>   To do we we will be creating a new cluster that can be exposed and
</I>&gt;<i> will be linking it to our existing cluster.
</I>&gt;<i>
</I>&gt;<i> I've looked a the Federation plug-in, but it has a feature disqualifies
</I>&gt;<i> it for our purposes.   We'd like to keep communications from our
</I>&gt;<i> existing cluster to the new exposed cluster unidirectional.  That means
</I>&gt;<i> now allowing incoming connections into the existing cluster, in case
</I>&gt;<i> there is ever a RabbitMQ vulnerability (or say, an Erlang or OpenSSL
</I>&gt;<i> vulnerability) that would allow the external cluster to be compromised.
</I>&gt;<i>   Since both cluster are running RabbitMQ, we don't want an attacker to
</I>&gt;<i> be able to jump from the external cluster to the internal one.  From
</I>&gt;<i> what I've gathered, the AMQP client that the Federation plug-in uses
</I>&gt;<i> executed within the downstream broker, and thus it has to be able to
</I>&gt;<i> make an AMQP connection to the upstream broker.
</I>&gt;<i>
</I>&gt;<i> Is that correct?  Any plans to allow for the opposite behavior (upstream
</I>&gt;<i> connects to the downstream broker)?
</I>
Not really. Although that could be useful in some situations it does 
mean the plugin wouldn't be able to be smart about which messages to 
send over gap, so it would start to look a lot more like the shovel.

&gt;<i> That leaves us with the Shovel plug-in, which can be configured to run
</I>&gt;<i> on either the upstream or downstream broker.
</I>&gt;<i>
</I>&gt;<i> One problem with the Shovel plug-in is that it appears you can only
</I>&gt;<i> manage the shovels within the configuration file.  Is there no way to
</I>&gt;<i> manage shovels online, either through AMQP or a management plug-in?
</I>
Not now, we'd like to do that in the future.

&gt;<i> If neither of those are possible, can RabbitMQ reload its configuration
</I>&gt;<i> without restarting?
</I>
Not now, we'd like to do that in the future.

&gt;<i> Finally, its unclear whether you should only define a shovel in a single
</I>&gt;<i> node in a cluster or in multiple ones?  If you define it in multiple
</I>&gt;<i> ones, does it create multiple shovel clients competing for messages?
</I>
Yes.

&gt;<i> If
</I>&gt;<i> not, will a shovel fail over if the node with the existing client fails?
</I>
No.

(Maybe we should look at that...)

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017615.html">[rabbitmq-discuss] Shovel questions
</A></li>
	<LI>Next message: <A HREF="017551.html">[rabbitmq-discuss] Determining age of queue contents
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17614">[ date ]</a>
              <a href="thread.html#17614">[ thread ]</a>
              <a href="subject.html#17614">[ subject ]</a>
              <a href="author.html#17614">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
