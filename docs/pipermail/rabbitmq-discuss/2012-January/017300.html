<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq persistence on federation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%20persistence%20on%20federation&In-Reply-To=%3C4F0D791C.8050000%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017299.html">
   <LINK REL="Next"  HREF="017302.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq persistence on federation</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%20persistence%20on%20federation&In-Reply-To=%3C4F0D791C.8050000%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq persistence on federation">simon at rabbitmq.com
       </A><BR>
    <I>Wed Jan 11 11:57:16 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017299.html">[rabbitmq-discuss] Rabbitmq persistence on federation
</A></li>
        <LI>Next message: <A HREF="017302.html">[rabbitmq-discuss] Fw: Rabbitmq persistence on federation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17300">[ date ]</a>
              <a href="thread.html#17300">[ thread ]</a>
              <a href="subject.html#17300">[ subject ]</a>
              <a href="author.html#17300">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/01/12 11:47, Dhivya Swaminathan wrote:
&gt;<i> Hi,
</I>
Hi,

&gt;<i> I am new to federation plugin in rabbitmq.From the federation plugin
</I>&gt;<i> release preview it is told--&quot;Queues that bind to a federation exchange
</I>&gt;<i> receive messages that were published to the upstream exchanges (or the
</I>&gt;<i> upstreams' upstreams) as well as messages that are published locally. In
</I>&gt;<i> the event of the network going down, messages will be queued upstream.&quot;
</I>&gt;<i>
</I>&gt;<i> My understanding
</I>&gt;<i>
</I>&gt;<i> Upstream exchanges-a set of exchanges each in a remote broker connected
</I>&gt;<i> through WAN to a federated exchange.
</I>&gt;<i> Federation exchange- a local broker which connects with Upstream
</I>&gt;<i> brokers.
</I>
Yes.

&gt;<i> Also it contains all the collection of published messages all
</I>&gt;<i> over remote m/c and the local m/c.
</I>
No. Federated exchanges (like all AMQP exchanges) do not really 
&quot;contain&quot; any messages.

&gt;<i> If so,if we pass a message from the local broker to a remote broker and
</I>&gt;<i> the connection goes down at that time,persistence of messages will be
</I>&gt;<i> there in local node or in remote node or duplication will occur on both
</I>&gt;<i> nodes.
</I>
Well, you've just swapped the definition of &quot;local&quot; and &quot;remote&quot; you 
were using before. Obviously every broker is local to somewhere, which 
is why we use the terms &quot;upstream&quot; and &quot;downstream&quot; instead :-)

A federated exchange will pull in messages from its upstreams (and so we 
would refer to it as the downstream). The messages published to the 
upstream exchange are queued in the upstream broker waiting for the 
downstream exchange to get them. So in the event of the connection going 
down, that's where they'll be.

Note that some messages may be in flight at this point - if so they can 
be duplicated.

&gt;<i> How is mnesia working in Rabbitmq-Federation.
</I>
It's not, really. It contains the definitions of the federated exchanges 
(as it does for all the exchanges).

&gt;<i> Also what are the
</I>&gt;<i> downstream exchnages?Is that the local exchange of the local broker?
</I>
As mentioned, &quot;local&quot; can be confusing. But when you declare a federated 
exchange, that is the downstream. Does that make sense?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017299.html">[rabbitmq-discuss] Rabbitmq persistence on federation
</A></li>
	<LI>Next message: <A HREF="017302.html">[rabbitmq-discuss] Fw: Rabbitmq persistence on federation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17300">[ date ]</a>
              <a href="thread.html#17300">[ thread ]</a>
              <a href="subject.html#17300">[ subject ]</a>
              <a href="author.html#17300">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
