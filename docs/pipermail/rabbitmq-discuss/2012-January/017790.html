<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Client Memory issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Client%20Memory%20issues&In-Reply-To=%3Ce5e42d8c-cc74-48d0-87bc-f43078fd1105%40kn4g2000pbc.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017795.html">
   <LINK REL="Next"  HREF="017799.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Client Memory issues</H1>
    <B>Yogesh Ketkar</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Client%20Memory%20issues&In-Reply-To=%3Ce5e42d8c-cc74-48d0-87bc-f43078fd1105%40kn4g2000pbc.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Client Memory issues">yogimogi at gmail.com
       </A><BR>
    <I>Tue Jan 31 09:56:38 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017795.html">[rabbitmq-discuss] What's the best way to monitor the client exit
</A></li>
        <LI>Next message: <A HREF="017799.html">[rabbitmq-discuss] RabbitMQ Client Memory issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17790">[ date ]</a>
              <a href="thread.html#17790">[ thread ]</a>
              <a href="subject.html#17790">[ subject ]</a>
              <a href="author.html#17790">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>After running a java client for a while (15-20 minutes), it runs out
of memory with OutOfMemoryError.
I probably can postpone the problem by giving high values for -Xmx.

Doing jmap and jhat gave following info.

173233 instances of class com.rabbitmq.client.impl.AMQCommand
173233 instances of class com.rabbitmq.client.impl.CommandAssembler
173132 instances of class com.rabbitmq.client.impl.ChannelN
173132 instances of class com.rabbitmq.client.impl.ConsumerDispatcher
173096 instances of class com.rabbitmq.client.ShutdownSignalException
173096 instances of class com.rabbitmq.client.impl.AMQImpl$Channel
$Close

I create a channel at the beginning of run() method of the thread and
close() it in the finally block.
But seems like all see all the instances of
com.rabbitmq.client.impl.ChannelN

any idea, what can be going wrong?

regards, Yogesh
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017795.html">[rabbitmq-discuss] What's the best way to monitor the client exit
</A></li>
	<LI>Next message: <A HREF="017799.html">[rabbitmq-discuss] RabbitMQ Client Memory issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17790">[ date ]</a>
              <a href="thread.html#17790">[ thread ]</a>
              <a href="subject.html#17790">[ subject ]</a>
              <a href="author.html#17790">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
