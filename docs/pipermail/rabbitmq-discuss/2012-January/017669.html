<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question	related to workload distribution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5Brabbitmq-consistent-hash-exchange%5D%20Question%0A%09related%20to%20workload%20distribution&In-Reply-To=%3Ce3ab17d5-9f76-490e-b12d-5b0073dfa0d6%40i18g2000yqf.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017667.html">
   <LINK REL="Next"  HREF="017673.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question	related to workload distribution</H1>
    <B>Josh Stone</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5Brabbitmq-consistent-hash-exchange%5D%20Question%0A%09related%20to%20workload%20distribution&In-Reply-To=%3Ce3ab17d5-9f76-490e-b12d-5b0073dfa0d6%40i18g2000yqf.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question	related to workload distribution">pacesysjosh at gmail.com
       </A><BR>
    <I>Wed Jan 25 19:33:41 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017667.html">[rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question related to workload distribution
</A></li>
        <LI>Next message: <A HREF="017673.html">[rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question	related to workload distribution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17669">[ date ]</a>
              <a href="thread.html#17669">[ thread ]</a>
              <a href="subject.html#17669">[ subject ]</a>
              <a href="author.html#17669">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the response Emile,

Key remapping is ok and expected. I'm just curious how users deal with
that when using the consistent hash exchange to distribute work. Do
you have any insight into what those strategies might look like?

Cheers,
Josh

On Jan 25, 10:31&#160;am, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">em... at rabbitmq.com</A>&gt; wrote:
&gt;<i> Hi Josh,
</I>&gt;<i>
</I>&gt;<i> On 24/01/12 23:39, Josh Stone wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; We're looking at using rabbitmq with the consistent hash exchange to
</I>&gt;<i> &gt; distribute workload to a set of workers with each worker subscribing
</I>&gt;<i> &gt; to one or more topics. It looks like this will work well, until a
</I>&gt;<i> &gt; worker along with its topics either comes or leaves, which will
</I>&gt;<i> &gt; disrupt the hashing.
</I>&gt;<i>
</I>&gt;<i> Keep in mind that when binding a queue to a consistent hash exchange you
</I>&gt;<i> don't bind with a topic. You bind with a number that indicates what
</I>&gt;<i> share of messages the queue will receive. Those messages can have any
</I>&gt;<i> routing key. If you want workers to handle only particular topics then
</I>&gt;<i> you should use a topic exchange.
</I>&gt;<i>
</I>&gt;<i> &gt; Particularly, if a new worker enters and creates some topics on the
</I>&gt;<i> &gt; exchange, messages that previously would have been delivered to
</I>&gt;<i> &gt; another topic will be directed to the new topic. And if an existing
</I>&gt;<i> &gt; worker was operating on some data from a previous message and a new
</I>&gt;<i> &gt; message to operate on that data is sent to a new topic, we could have
</I>&gt;<i> &gt; a race condition.
</I>&gt;<i>
</I>&gt;<i> For the consistent hash exchange some keys will be unavoidably be
</I>&gt;<i> remapped when the bindings change. The advantage is that not all keys
</I>&gt;<i> need to be remapped. If your workers can only deal with one or a limited
</I>&gt;<i> number of topics then you should not be using a consistent hash exchange.
</I>&gt;<i>
</I>&gt;<i> -Emile
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017667.html">[rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question related to workload distribution
</A></li>
	<LI>Next message: <A HREF="017673.html">[rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question	related to workload distribution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17669">[ date ]</a>
              <a href="thread.html#17669">[ thread ]</a>
              <a href="subject.html#17669">[ subject ]</a>
              <a href="author.html#17669">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
