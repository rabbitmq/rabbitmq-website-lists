<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 404,	&quot;NOT_FOUND - no queue 'foo' in vhost '/'&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20404%2C%0A%09%22NOT_FOUND%20-%20no%20queue%20%27foo%27%20in%20vhost%20%27/%27%22&In-Reply-To=%3C069c164a-6ac6-4dc8-86d8-24f67eb36ccb%40m4g2000vbc.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017474.html">
   <LINK REL="Next"  HREF="017489.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 404,	&quot;NOT_FOUND - no queue 'foo' in vhost '/'&quot;</H1>
    <B>Dave Stevens</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20404%2C%0A%09%22NOT_FOUND%20-%20no%20queue%20%27foo%27%20in%20vhost%20%27/%27%22&In-Reply-To=%3C069c164a-6ac6-4dc8-86d8-24f67eb36ccb%40m4g2000vbc.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] 404,	&quot;NOT_FOUND - no queue 'foo' in vhost '/'&quot;">daverstevens at gmail.com
       </A><BR>
    <I>Wed Jan 18 16:32:04 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017474.html">[rabbitmq-discuss] 404,	&quot;NOT_FOUND - no queue 'foo' in vhost '/'&quot;
</A></li>
        <LI>Next message: <A HREF="017489.html">[rabbitmq-discuss] 404, &quot;NOT_FOUND - no queue 'foo' in vhost '/'&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17475">[ date ]</a>
              <a href="thread.html#17475">[ thread ]</a>
              <a href="subject.html#17475">[ subject ]</a>
              <a href="author.html#17475">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It is important to note that the queue is durable. I just read after
sending this that none of the clients should have been allowed to
reconnect. I'm curious why two out of the three clients were able to
come up when they apparently should have also received the same error.
I will experiment some more with this knowledge about how durable
queues work. I originally wrote this assuming we would be using HA
queues and I have them on my brain...

On Jan 18, 11:24&#160;am, Dave Stevens &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">daverstev... at gmail.com</A>&gt; wrote:
&gt;<i> I'm having a similar issue with 2.7.1 installed on ubuntu.
</I>&gt;<i>
</I>&gt;<i> I'm running a cluster of three nodes. I have three consumers consuming
</I>&gt;<i> from a non-mirrored, non-exclusive queue. When I take down the node
</I>&gt;<i> containing the queue with rabbitmqctl stop_app, occasionally one of
</I>&gt;<i> the clients receives the following when attempting to reconnect and re-
</I>&gt;<i> declare the queue.
</I>&gt;<i>
</I>&gt;<i> {#method&lt;channel.close&gt;(reply-code=404, reply-text=NOT_FOUND - no
</I>&gt;<i> queue 'foo' in vhost '/', class-id=50, method-id=10),null,&quot;&quot;}
</I>&gt;<i>
</I>&gt;<i> Is this a race condition caused by the clients all trying to redeclare
</I>&gt;<i> the queue at the same time? I'm using the spring-amqp java client,
</I>&gt;<i> although I'm probably going to ditch it soon for other reasons.
</I>&gt;<i>
</I>&gt;<i> On Dec 20 2011, 6:58&#160;pm, Matt Pietrek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpiet... at skytap.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Indeed! In my hour or so of testing I just did, 2.7.1 seems much happier,
</I>&gt;<i> &gt; and appears to handle VIP failover reasonably well in my scenario.
</I>&gt;<i>
</I>&gt;<i> &gt; Thanks much!
</I>&gt;<i>
</I>&gt;<i> &gt; Matt
</I>&gt;<i>
</I>&gt;<i> &gt; On 12/20/11 3:12 PM, &quot;Matthias Radestock&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matth... at rabbitmq.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; &gt;On 20/12/11 22:44, Matt Pietrek wrote:
</I>&gt;<i> &gt; &gt;&gt; In addition, in the rabbit@&lt;nodename&gt;.log, I see a whole bunch of spew,
</I>&gt;<i> &gt; &gt;&gt; including many instances of this:
</I>&gt;<i>
</I>&gt;<i> &gt; &gt;&gt; =WARNING REPORT==== 20-Dec-2011::14:09:17 ===
</I>&gt;<i> &gt; &gt;&gt; Non-AMQP exit reason '{{{function_clause,
</I>&gt;<i> &gt; &gt;&gt; [{gb_trees,lookup,
</I>&gt;<i> &gt; &gt;&gt; [&lt;&lt;150,83,52,247,194,247,140,35,130,167,168,
</I>&gt;<i> &gt; &gt;&gt; 35,224,203,183,186&gt;&gt;,
</I>&gt;<i> &gt; &gt;&gt; {dict,0,16,16,8,80,48,
</I>&gt;<i> &gt; &gt;&gt; {[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i> &gt; &gt;&gt; [],[],[]},
</I>&gt;<i> &gt; &gt;&gt; {{[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i> &gt; &gt;&gt; [],[],[],[]}}}]},
</I>&gt;<i> &gt; &gt;&gt; {rabbit_amqqueue_process,
</I>&gt;<i> &gt; &gt;&gt; '-confirm_messages/2-fun-0-',2},
</I>&gt;<i> &gt; &gt;&gt; [...]
</I>&gt;<i> &gt; &gt;&gt; Again, this is a stock 2.7.0 install.
</I>&gt;<i>
</I>&gt;<i> &gt; &gt;The above got fixed in 2.7.1.
</I>&gt;<i>
</I>&gt;<i> &gt; &gt;Matthias.
</I>&gt;<i>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017474.html">[rabbitmq-discuss] 404,	&quot;NOT_FOUND - no queue 'foo' in vhost '/'&quot;
</A></li>
	<LI>Next message: <A HREF="017489.html">[rabbitmq-discuss] 404, &quot;NOT_FOUND - no queue 'foo' in vhost '/'&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17475">[ date ]</a>
              <a href="thread.html#17475">[ thread ]</a>
              <a href="subject.html#17475">[ subject ]</a>
              <a href="author.html#17475">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
