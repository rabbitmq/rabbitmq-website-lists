<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Forcing mirrored queue synchronization?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Forcing%20mirrored%20queue%20synchronization%3F&In-Reply-To=%3C4F27C7AE.8060109%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017778.html">
   <LINK REL="Next"  HREF="017781.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Forcing mirrored queue synchronization?</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Forcing%20mirrored%20queue%20synchronization%3F&In-Reply-To=%3C4F27C7AE.8060109%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Forcing mirrored queue synchronization?">simon at rabbitmq.com
       </A><BR>
    <I>Tue Jan 31 10:51:26 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017778.html">[rabbitmq-discuss] Forcing mirrored queue synchronization?
</A></li>
        <LI>Next message: <A HREF="017781.html">[rabbitmq-discuss] Clients reconnection logic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17794">[ date ]</a>
              <a href="thread.html#17794">[ thread ]</a>
              <a href="subject.html#17794">[ subject ]</a>
              <a href="author.html#17794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/01/12 19:11, Matt Pietrek wrote:
&gt;<i> We're moving towards a production deployment of mirrored queues for our
</I>&gt;<i> platform using RabbitMQ 2.71 on Ubuntu 10.04. One of the things we need
</I>&gt;<i> to support is rolling upgrades. Thus, while running in a mirrored
</I>&gt;<i> cluster, we plan to bring down one node at a time while leaving at least
</I>&gt;<i> one node running.
</I>
You may not want to hear this but: please be aware that all nodes in a 
cluster must run the same version of RabbitMQ.

&gt;<i> Questions: Are there any potential pitfalls with this approach?
</I>
Only the ones you'd think of - consuming from or publishing to the queue 
while this is going on could lead to your republisher getting confused.

If you have the same large messages routed to many queues from one 
publish, RabbitMQ will ensure the message body is only stored once in 
the broker. Republishing would break this.

&gt;<i> And is
</I>&gt;<i> there some optimal way to do this that's better than
</I>&gt;<i> &quot;read/re-publish/ack&quot; for each message in a loop?
</I>
I don't think so.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017778.html">[rabbitmq-discuss] Forcing mirrored queue synchronization?
</A></li>
	<LI>Next message: <A HREF="017781.html">[rabbitmq-discuss] Clients reconnection logic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17794">[ date ]</a>
              <a href="thread.html#17794">[ thread ]</a>
              <a href="subject.html#17794">[ subject ]</a>
              <a href="author.html#17794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
