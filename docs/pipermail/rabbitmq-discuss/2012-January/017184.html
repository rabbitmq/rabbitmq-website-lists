<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] x509 Authentication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20x509%20Authentication&In-Reply-To=%3C4B5D885B77E8CC43852B8F0315AD03BA0D4D1A88%40EXMBX03.austin.utexas.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017171.html">
   <LINK REL="Next"  HREF="017208.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] x509 Authentication</H1>
    <B>Warren Smith</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20x509%20Authentication&In-Reply-To=%3C4B5D885B77E8CC43852B8F0315AD03BA0D4D1A88%40EXMBX03.austin.utexas.edu%3E"
       TITLE="[rabbitmq-discuss] x509 Authentication">wsmith at tacc.utexas.edu
       </A><BR>
    <I>Thu Jan  5 14:44:22 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017171.html">[rabbitmq-discuss] x509 Authentication
</A></li>
        <LI>Next message: <A HREF="017208.html">[rabbitmq-discuss] x509 Authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17184">[ date ]</a>
              <a href="thread.html#17184">[ thread ]</a>
              <a href="subject.html#17184">[ subject ]</a>
              <a href="author.html#17184">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
The reason that I ended up removing quotes from DNs is because (if I remember correctly) for the same certificate, a DN from Erlang would sometimes have quotes but the DN from openssl would not. I was using a script that invoked &quot;openssl x509 -in &lt;cert.pem&gt; -subject&quot; and then &quot;rabbitmqctl add_user ...; rabbitmqctl set_permissions ...&quot; to add users to rabbitmq. I couldn't quickly figure out a pattern when erlang added quotes (it wasn't as simple as the RDN having a space in it), so I just stripped them all out in the DN received by my modified rabbitmq_auth_mechanism_ssl.

I agree that this type of DN cleanup isn't really required, but it made things easier for me and apparently for Lionel, also.


Warren


-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Simon MacMullen
Sent: Thursday, January 05, 2012 4:33 AM
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] x509 Authentication

On 21/12/11 07:22, Lionel Cons wrote:
&gt;<i> It would really be good to improve X.509 authentication in a 
</I>&gt;<i> consistent way in RabbitMQ. Things I can think of:
</I>&gt;<i>   - use common code between AMQP and STOMP
</I>
Yes.

&gt;<i>   - use DN rather than CN, maybe via a configurable option
</I>
Yes.

&gt;<i>   - standard DN cleanup (such as your quotes removal)
</I>
Umm, really? The question of how to canonically construct a string representation of a DN is annoyingly fiddly, but I really don't believe removing quotes is likely to be a part of it.

We'd probably have to aim for &quot;whatever OpenSSL does&quot; and &quot;whatever Active Directory does&quot; as goals for how to do it. Let us pray to the god of ASN.1 (some sort of Eldritch abomination I'm sure) that both of those are the same thing...

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017171.html">[rabbitmq-discuss] x509 Authentication
</A></li>
	<LI>Next message: <A HREF="017208.html">[rabbitmq-discuss] x509 Authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17184">[ date ]</a>
              <a href="thread.html#17184">[ thread ]</a>
              <a href="subject.html#17184">[ subject ]</a>
              <a href="author.html#17184">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
