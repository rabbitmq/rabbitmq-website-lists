<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question related to workload distribution
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5Brabbitmq-consistent-hash-exchange%5D%20Question%0A%20related%20to%20workload%20distribution&In-Reply-To=%3C4F209E36.3030504%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017678.html">
   <LINK REL="Next"  HREF="017699.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question related to workload distribution</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5Brabbitmq-consistent-hash-exchange%5D%20Question%0A%20related%20to%20workload%20distribution&In-Reply-To=%3C4F209E36.3030504%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question related to workload distribution">emile at rabbitmq.com
       </A><BR>
    <I>Thu Jan 26 00:28:38 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017678.html">[rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question	related to workload distribution
</A></li>
        <LI>Next message: <A HREF="017699.html">[rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question	related to workload distribution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17681">[ date ]</a>
              <a href="thread.html#17681">[ thread ]</a>
              <a href="subject.html#17681">[ subject ]</a>
              <a href="author.html#17681">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Josh,

On 25/01/12 23:47, Josh Stone wrote:
&gt;<i> Regarding workers seeing a message with a routing key they're not
</I>&gt;<i> expecting, I'm not sure how a worker would know if a message is
</I>&gt;<i> acceptable for them without knowing what the hash ring looks like. If
</I>&gt;<i> our workers did mirror the hash algorithm, when a re-mapping occurred
</I>&gt;<i> they could check locally to see what work was effected. This brings us
</I>&gt;<i> closer to something like Dynamo where each node maintains a view of
</I>&gt;<i> the hash ring. In our case, each worker's view of the hash ring would
</I>&gt;<i> match that on the consistent hash exchange. This is likely the only
</I>&gt;<i> way they could handle key-remappings.
</I>&gt;<i> 
</I>&gt;<i> Has anyone gone down this road?
</I>
I doubt it, because the consistent hash exchange uses a random number
generator to ensure a fair distribution among all the bindings. What you
are proposing will require workers to have access to the same random
number stream and therefore infeasible.

If you share more details about the problem you are trying to solve then
we may be able to make alternative suggestions. Is there any reason why
your problem cannot be solved by having multiple workers subscribe to
the same queue and sharing the load in that way?



-Emile
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017678.html">[rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question	related to workload distribution
</A></li>
	<LI>Next message: <A HREF="017699.html">[rabbitmq-discuss] [rabbitmq-consistent-hash-exchange] Question	related to workload distribution
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17681">[ date ]</a>
              <a href="thread.html#17681">[ thread ]</a>
              <a href="subject.html#17681">[ subject ]</a>
              <a href="author.html#17681">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
