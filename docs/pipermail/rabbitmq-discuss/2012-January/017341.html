<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clustering,	Mirrored queue and high availability in RabbitMQ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%2C%0A%09Mirrored%20queue%20and%20high%20availability%20in%20RabbitMQ&In-Reply-To=%3C55a4f04f-f3c2-4482-b844-30995ad7be90%40z1g2000vbx.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017330.html">
   <LINK REL="Next"  HREF="017344.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clustering,	Mirrored queue and high availability in RabbitMQ</H1>
    <B>Dave Stevens</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%2C%0A%09Mirrored%20queue%20and%20high%20availability%20in%20RabbitMQ&In-Reply-To=%3C55a4f04f-f3c2-4482-b844-30995ad7be90%40z1g2000vbx.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Clustering,	Mirrored queue and high availability in RabbitMQ">daverstevens at gmail.com
       </A><BR>
    <I>Thu Jan 12 16:00:30 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017330.html">[rabbitmq-discuss] Clustering,	Mirrored queue and high availability in RabbitMQ
</A></li>
        <LI>Next message: <A HREF="017344.html">[rabbitmq-discuss] Clustering, Mirrored queue and high availability in RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17341">[ date ]</a>
              <a href="thread.html#17341">[ thread ]</a>
              <a href="subject.html#17341">[ subject ]</a>
              <a href="author.html#17341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I believe all of these are at least partially incorrect and/or
implementation dependent.

On Jan 12, 4:04&#160;am, luke manner &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lukeman... at gmail.com</A>&gt; wrote:
&gt;<i> Hi all,
</I>&gt;<i> we are studing/testing RabbitMQ in order to use it on a big project.
</I>&gt;<i>
</I>&gt;<i> I'd like to know if it is correct:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160;1. If I have a mirrored queue, all consumers of this queue are all
</I>&gt;<i> &#160; &#160;connected to the master queue and not to the slaves (slaves are used for
</I>&gt;<i> &#160; &#160;backup if master node fails).
</I>
Consumers may be connected to slave nodes as well.

&gt;<i> &#160; &#160;2. When a queue (mirrored or not) is &#160;dinamically &#160;created &#160;by a client
</I>&gt;<i> &#160; &#160;in a cluster enviroment , it is created on the client's node and not in any
</I>&gt;<i> &#160; &#160;node of the cluster (so there is an automatic load balancing of queues in a
</I>&gt;<i> &#160; &#160;cluster)
</I>
When declaring an HA (mirrored) queue, it may be mirrored across all
nodes specified in the queue parameter. In regards to &quot;automatic load
balancing&quot;, if consumers are all connected to 1 out of N nodes in a
cluster, it is obviously not load balanced.

&gt;<i> &#160; &#160;3. If a client is connected to a mirrored queue and the master of the
</I>&gt;<i> &#160; &#160;queue fails/goes down, a slave is defined as a new master and new
</I>&gt;<i> &#160; &#160;connections go through the new node; but all old clients, that were using
</I>&gt;<i> &#160; &#160;connections to the old master node, have dead channel and RabbitMQ don't
</I>&gt;<i> &#160; &#160;create automatically connection to the new node.
</I>
In the process of being promoted to master, a slave queue will kick
off all of it's consumers (but not kill the connection obviously). The
recreation of these consumers must also be handled. Some higher level
client libraries support this. Spring Amqp (java/.NET) is one which
does to a certain degree at least. I believe Akka (java/scala) is also
able to take a collection of hosts and will attempt to reconnect to a
node on a different host if connection is lost.

&gt;<i>
</I>&gt;<i> Are these sentences right?
</I>&gt;<i>
</I>&gt;<i> Thanks in advance!
</I>&gt;<i> Luke
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>

































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017330.html">[rabbitmq-discuss] Clustering,	Mirrored queue and high availability in RabbitMQ
</A></li>
	<LI>Next message: <A HREF="017344.html">[rabbitmq-discuss] Clustering, Mirrored queue and high availability in RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17341">[ date ]</a>
              <a href="thread.html#17341">[ thread ]</a>
              <a href="subject.html#17341">[ subject ]</a>
              <a href="author.html#17341">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
