<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clients reconnection logic
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clients%20reconnection%20logic&In-Reply-To=%3C6bee8090-ae63-49a9-aa11-d31dcff138bf%40strongmad.batnest.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017781.html">
   <LINK REL="Next"  HREF="017815.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clients reconnection logic</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clients%20reconnection%20logic&In-Reply-To=%3C6bee8090-ae63-49a9-aa11-d31dcff138bf%40strongmad.batnest.org%3E"
       TITLE="[rabbitmq-discuss] Clients reconnection logic">jerryk at vmware.com
       </A><BR>
    <I>Tue Jan 31 19:41:20 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017781.html">[rabbitmq-discuss] Clients reconnection logic
</A></li>
        <LI>Next message: <A HREF="017815.html">[rabbitmq-discuss] Clients reconnection logic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17814">[ date ]</a>
              <a href="thread.html#17814">[ thread ]</a>
              <a href="subject.html#17814">[ subject ]</a>
              <a href="author.html#17814">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Pablo...

I confess I'm not up on the current state of the projects that you're looking
at, but the reconnect logic doesn't have to be much more exotic than catching
the connection failure and opening a new one (plus possibly recreating your
message fabric elements if appropriate) when it occurs.  Probably the most 
annoying part is making your client code aware of all the nodes in your cluster,
keeping track of those nodes that have spurned it in the past, and choosing other
ones to try (plus maybe re-trying a spurner at some point).

One thing you might consider to make that last part less annoying is putting
some sort of load balancer, like HAproxy, in front of your cluster.  Then it
can do the dirty work of making sure to wire your connection to a live cluster
node, and your clients only need to know one place to connect to...  Sure, it's
more of a deployment/infrastructural change, but it can make things simpler in
production...

Best regards,
Jerry

----- Original Message -----
From: &quot;Pablo Molnar&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">pablomolnar at gmail.com</A>&gt;
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Sent: Monday, January 30, 2012 1:01:36 PM
Subject: [rabbitmq-discuss] Clients reconnection logic

Hi everyone,
I've successfully set up a 3 instances cluster and now I'm dealing
with reconnect logic in my java clients.

Before reinventing the wheel, I'm aware of this 2 projects:
- <A HREF="https://github.com/joshdevins/rabbitmq-ha-client">https://github.com/joshdevins/rabbitmq-ha-client</A>
- <A HREF="http://hg.rabbitmq.com/rabbitmq-java-messagepatterns/">http://hg.rabbitmq.com/rabbitmq-java-messagepatterns/</A>

Anyone have tried this code? Both seems a little outdated...

I'm just wanna the simplest logic giving a fixed list of nodes to
successfully reconnect my clients in a transparent manner.

I'd appreciate any info regarding clients reconnection.

Cheers,
Pablo Molnar
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017781.html">[rabbitmq-discuss] Clients reconnection logic
</A></li>
	<LI>Next message: <A HREF="017815.html">[rabbitmq-discuss] Clients reconnection logic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17814">[ date ]</a>
              <a href="thread.html#17814">[ thread ]</a>
              <a href="subject.html#17814">[ subject ]</a>
              <a href="author.html#17814">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
