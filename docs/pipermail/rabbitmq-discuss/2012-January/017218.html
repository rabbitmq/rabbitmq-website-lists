<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] C# v2.7.1 Client Unhandled Exceptions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20C%23%20v2.7.1%20Client%20Unhandled%20Exceptions&In-Reply-To=%3CCAP%2B1M2eq3JOrTrjWA70u97fYbq7feoS9h-hiR_MAQQ-fGQdibA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017523.html">
   <LINK REL="Next"  HREF="017219.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] C# v2.7.1 Client Unhandled Exceptions</H1>
    <B>Bryan Murphy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20C%23%20v2.7.1%20Client%20Unhandled%20Exceptions&In-Reply-To=%3CCAP%2B1M2eq3JOrTrjWA70u97fYbq7feoS9h-hiR_MAQQ-fGQdibA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] C# v2.7.1 Client Unhandled Exceptions">bmurphy1976 at gmail.com
       </A><BR>
    <I>Fri Jan  6 21:17:22 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017523.html">[rabbitmq-discuss] RabbitMQ load issues
</A></li>
        <LI>Next message: <A HREF="017219.html">[rabbitmq-discuss] C# v2.7.1 Client Unhandled Exceptions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17218">[ date ]</a>
              <a href="thread.html#17218">[ thread ]</a>
              <a href="subject.html#17218">[ subject ]</a>
              <a href="author.html#17218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Guys,

Every since upgrading to v2.7.1 we've found that the RabbitMQ driver has
been killing our applications by throwing unhandled exceptions in
background threads.  Here are two stack traces that brought down one of our
test apps:

[2012-01-06 21:13:36,193] [ERROR] Unhandled Exception
System.Net.Sockets.SocketException: The descriptor is not a socket
  at System.Net.Sockets.Socket.SetSocketOption (SocketOptionLevel
optionLevel, SocketOptionName optionName, System.Object optionValue)
[0x00000] in &lt;filename unknown&gt;:0
  at System.Net.Sockets.TcpClient.set_LingerState
(System.Net.Sockets.LingerOption value) [0x00000] in &lt;filename unknown&gt;:0
  at RabbitMQ.Client.Impl.SocketFrameHandler_0_9.Close () [0x00000] in
&lt;filename unknown&gt;:0
  at RabbitMQ.Client.Impl.ConnectionBase.FinishClose () [0x00000] in
&lt;filename unknown&gt;:0
  at RabbitMQ.Client.Impl.ConnectionBase.HeartbeatReadLoop () [0x00000] in
&lt;filename unknown&gt;:0
  at System.Threading.Thread.StartUnsafe () [0x00000] in &lt;filename
unknown&gt;:0

[2012-01-06 21:13:20,706] [ERROR] Unhandled Exception
System.ObjectDisposedException: The object was used after being disposed.
  at System.Net.Sockets.Socket.SetSocketOption (SocketOptionLevel
optionLevel, SocketOptionName optionName, System.Object optionValue)
[0x00000] in &lt;filename unknown&gt;:0
  at System.Net.Sockets.TcpClient.set_LingerState
(System.Net.Sockets.LingerOption value) [0x00000] in &lt;filename unknown&gt;:0
  at RabbitMQ.Client.Impl.SocketFrameHandler_0_9.Close () [0x00000] in
&lt;filename unknown&gt;:0
  at RabbitMQ.Client.Impl.ConnectionBase.FinishClose () [0x00000] in
&lt;filename unknown&gt;:0
  at RabbitMQ.Client.Impl.ConnectionBase.HeartbeatReadLoop () [0x00000] in
&lt;filename unknown&gt;:0
  at System.Threading.Thread.StartUnsafe () [0x00000] in &lt;filename
unknown&gt;:0

This happens on both windows and mono 2.10.1 and never seems to originate
in any of our code.

Thanks,
Bryan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120106/20b08d6c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120106/20b08d6c/attachment.htm</A>&gt;
</PRE>




































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017523.html">[rabbitmq-discuss] RabbitMQ load issues
</A></li>
	<LI>Next message: <A HREF="017219.html">[rabbitmq-discuss] C# v2.7.1 Client Unhandled Exceptions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17218">[ date ]</a>
              <a href="thread.html#17218">[ thread ]</a>
              <a href="subject.html#17218">[ subject ]</a>
              <a href="author.html#17218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
