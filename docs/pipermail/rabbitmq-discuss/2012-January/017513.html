<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] beam.smp memory consumption keeps growing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20beam.smp%20memory%20consumption%20keeps%20growing&In-Reply-To=%3C14792372.1644.1327005193049.JavaMail.geo-discussion-forums%40vbek1%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017522.html">
   <LINK REL="Next"  HREF="017514.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] beam.smp memory consumption keeps growing</H1>
    <B>Dennis Jacobfeuerborn</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20beam.smp%20memory%20consumption%20keeps%20growing&In-Reply-To=%3C14792372.1644.1327005193049.JavaMail.geo-discussion-forums%40vbek1%3E"
       TITLE="[rabbitmq-discuss] beam.smp memory consumption keeps growing">djacobfeuerborn at gmail.com
       </A><BR>
    <I>Thu Jan 19 20:33:13 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017522.html">[rabbitmq-discuss] Pushing events to browser
</A></li>
        <LI>Next message: <A HREF="017514.html">[rabbitmq-discuss] beam.smp memory consumption keeps growing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17513">[ date ]</a>
              <a href="thread.html#17513">[ thread ]</a>
              <a href="subject.html#17513">[ subject ]</a>
              <a href="author.html#17513">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
we have a two-system cluster set up and the processing of messages works 
fine except that beam.smp keeps growing until it hits the high watermark 
and then stops working.
When I list the queues they all show mostly 0 messages and the message rate 
is about 90msgs/sec so not really that high and there are no messages 
piling up in the queues.
So why is the memory consumption hitting 800mb even though the queues are 
empty? Any idea what this could be or how I can find out what that memory 
is used for?
The memory growth isn't strictly linear and sometimes goes down a few MB 
but over the day it grows consistently. I checked the number of channels, 
connections, etc. and they are pretty much constant.

This is on an up-to-date centos 6.2 with RabbitMQ 1.7.1 and Erlang R14B04.

Right now we will probably have to resort to restarting the rabbitmq 
service every two or three hours on both systems just to keep things 
working but this is obviously just a workaround and no solution.

Regards,
  Dennis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120119/6e44e1ae/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120119/6e44e1ae/attachment.htm</A>&gt;
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017522.html">[rabbitmq-discuss] Pushing events to browser
</A></li>
	<LI>Next message: <A HREF="017514.html">[rabbitmq-discuss] beam.smp memory consumption keeps growing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17513">[ date ]</a>
              <a href="thread.html#17513">[ thread ]</a>
              <a href="subject.html#17513">[ subject ]</a>
              <a href="author.html#17513">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
