<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Federation Configuration and Duplicate	Messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation%20Configuration%20and%20Duplicate%0A%09Messages&In-Reply-To=%3C5D476051A786C040BF0D9CB87BCBE3AA05975254A4%40USNAVSXCHMBSB3.ndc.alcatel-lucent.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017103.html">
   <LINK REL="Next"  HREF="017129.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Federation Configuration and Duplicate	Messages</H1>
    <B>Letourneau, John P (John)</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation%20Configuration%20and%20Duplicate%0A%09Messages&In-Reply-To=%3C5D476051A786C040BF0D9CB87BCBE3AA05975254A4%40USNAVSXCHMBSB3.ndc.alcatel-lucent.com%3E"
       TITLE="[rabbitmq-discuss] Federation Configuration and Duplicate	Messages">john.letourneau at alcatel-lucent.com
       </A><BR>
    <I>Tue Jan  3 15:51:23 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="017103.html">[rabbitmq-discuss] Federation Configuration and Duplicate	Messages
</A></li>
        <LI>Next message: <A HREF="017129.html">[rabbitmq-discuss] Federation Configuration and Duplicate	Messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17109">[ date ]</a>
              <a href="thread.html#17109">[ thread ]</a>
              <a href="subject.html#17109">[ subject ]</a>
              <a href="author.html#17109">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well, perhaps a bit more about my configuration 8-)
3 nodes...call them N1, N2, N3.
On each I have federation configured.
N2 - exchange log, connects to N1/log and N3/log
N3 - exchange log, connects to N2/log
Right now I cannot seem to have the N1 exchange log connect to N2/log; will need to find out why sometime.
I do it this way so that regardless of where the producer of the log message is, everyone everywhere will see it.

Each layer in the hierarchy only knows about nodes in adjacent layers...N2 being the busy one with a layer above and below.
If everyone has hops=1, sending a log message to N1/log will only go to N2 and not N3 [this is correct].
Setting hops=4, sending a log to N1/log will go to N2 and N3...it will also be returned to N2 thus a consumer on N2 will see the original msg AND the one sent via N2/N3 federation link. Also N3 sees it twice also for a total of once on N1, twice on N2, and twice on N3...the message took a total of 4 hops.

So, this is what I mean by 'one might expect' 8-)
-John

From: Busoli, Simone [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Simone.Busoli at ferrari.com</A>]
Sent: Tuesday, January 03, 2012 10:23 AM
To: Letourneau, John P (John); <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: RE: Federation Configuration and Duplicate Messages

Hi John, I'm not sure about this:

As one might expect, this sometimes results in the message being seen &gt;1 time at some clients.

It shouldn't be the expected behavior except for certain scenarios (i.e. disconnection of the brokers). Am I missing something perhaps?

_________________________________________________________________________________________________________________
Questo messaggio e da intendersi esclusivamente ad uso del destinatario e puo contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non e il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione e
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from
your system.
_________________________________________________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120103/c8f94362/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120103/c8f94362/attachment.htm</A>&gt;
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017103.html">[rabbitmq-discuss] Federation Configuration and Duplicate	Messages
</A></li>
	<LI>Next message: <A HREF="017129.html">[rabbitmq-discuss] Federation Configuration and Duplicate	Messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17109">[ date ]</a>
              <a href="thread.html#17109">[ thread ]</a>
              <a href="subject.html#17109">[ subject ]</a>
              <a href="author.html#17109">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
