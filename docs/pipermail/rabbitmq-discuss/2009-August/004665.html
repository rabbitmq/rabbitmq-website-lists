<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] load balancing for consummer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20load%20balancing%20for%20consummer&In-Reply-To=b7cd8ed10908260123vaef751et7bb9a88303b8146f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004664.html">
   <LINK REL="Next"  HREF="004666.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] load balancing for consummer</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20load%20balancing%20for%20consummer&In-Reply-To=b7cd8ed10908260123vaef751et7bb9a88303b8146f%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] load balancing for consummer">0x6e6562 at gmail.com
       </A><BR>
    <I>Wed Aug 26 10:53:28 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004664.html">[rabbitmq-discuss] load balancing for consummer
</A></li>
        <LI>Next message: <A HREF="004666.html">[rabbitmq-discuss] Error while doing channel.basicConsume
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4665">[ date ]</a>
              <a href="thread.html#4665">[ thread ]</a>
              <a href="subject.html#4665">[ subject ]</a>
              <a href="author.html#4665">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Beno&#238;t,

On Wed, Aug 26, 2009 at 9:23 AM, Benoit Chesneau&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">bchesneau at gmail.com</A>&gt; wrote:
&gt;&gt;<i> Having said that, I am actually wondering whether we're speaking about
</I>&gt;&gt;<i> the same thing. The process that is subscribed to queue will only get
</I>&gt;&gt;<i> 3 types of messages from the amqp_channel process, namely
</I>&gt;&gt;<i> basic.consume_ok, basic.cancel_ok and basic.deliver. I don't see where
</I>&gt;&gt;<i> the socket exceptions are going to come from.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> socket is in the init. I guess that when the socket failed it didn't
</I>&gt;<i> receive connexion so the gen_serv failed and supervisor tried to
</I>&gt;<i> launch new instance then the error happend. I need to rethink that,
</I>&gt;<i> I'm not sure actually how i could simply wait a &#160;new instance come up
</I>&gt;<i> in the rabbitmq cluster.
</I>
Again, I'm not sure I completely follow.

This what the gen_server documentation says about the lifecycle of start_link/4:

&quot;The gen_server process calls Module:init/1 to initialize. To ensure a
synchronized start-up procedure, start_link/3,4 does not return until
Module:init/1 has returned.&quot;

If the connection fails during init, then the process will be
terminated and hence will not be able to receive anything, least of
all any subscription callbacks.

Are you maybe trying to get a supervisor catch the failure in the
initialization and iterate through a list of known Rabbit hosts?

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004664.html">[rabbitmq-discuss] load balancing for consummer
</A></li>
	<LI>Next message: <A HREF="004666.html">[rabbitmq-discuss] Error while doing channel.basicConsume
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4665">[ date ]</a>
              <a href="thread.html#4665">[ thread ]</a>
              <a href="subject.html#4665">[ subject ]</a>
              <a href="author.html#4665">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
