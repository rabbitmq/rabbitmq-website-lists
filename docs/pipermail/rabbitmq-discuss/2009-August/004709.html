<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss]  Consumer does not get error about queue dying
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%20Consumer%20does%20not%20get%20error%20about%20queue%20dying&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004712.html">
   <LINK REL="Next"  HREF="004713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss]  Consumer does not get error about queue dying</H1>
    <B>Anuj Agarwal</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%20Consumer%20does%20not%20get%20error%20about%20queue%20dying&In-Reply-To="
       TITLE="[rabbitmq-discuss]  Consumer does not get error about queue dying">aagarwal at yellowpages.com
       </A><BR>
    <I>Sat Aug 29 18:23:53 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004712.html">[rabbitmq-discuss] Is RabbitMQ indeed &quot;hype ware&quot;?
</A></li>
        <LI>Next message: <A HREF="004713.html">[rabbitmq-discuss] Consumer does not get error about queue dying
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4709">[ date ]</a>
              <a href="thread.html#4709">[ thread ]</a>
              <a href="subject.html#4709">[ subject ]</a>
              <a href="author.html#4709">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

So i realize that a queue's data only lives on the rabbit broker that
the queue was created in. It seems like if you have one consumer
connected to that broker and reading from that queue and another
consumer connected to a different broker in the same cluster and reading
from that same queue, then it will not be notified of the error if the
broker holding the queue's msgs is stopped.

Here's the scenario in detail -
 * rabbit1 &amp; rabbit2 make up a cluster.
 * Publisher P connects to default amq.direct exchange in rabbit1 and
starts writing messages
 * Consumer A creates queue named Queue1 in rabbit2 and starts
subscribing to above messages
 * Consumer B connects same queue Queue1 in rabbit1 and also starts
subscribing So now, A &amp; B receive messages in a round-robin manner. If i
stop the
rabbit2 node, then Consumer A encounters an exception but Consumer B
does not. I'm using the standard BasicConsume code and calling Dequeue
in a loop.

Is there a way for consumer B to detect this error so i can add code to
recover from it? I saw some threads about a heartbeat functionality but
it seemed like its currently broken. Is that true?

thanks...



-- 
View this message in context: <A HREF="http://www.nabble.com/Consumer-does-not-get-error-about-queue-dying-tp25204723p25204723.html">http://www.nabble.com/Consumer-does-not-get-error-about-queue-dying-tp25204723p25204723.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004712.html">[rabbitmq-discuss] Is RabbitMQ indeed &quot;hype ware&quot;?
</A></li>
	<LI>Next message: <A HREF="004713.html">[rabbitmq-discuss] Consumer does not get error about queue dying
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4709">[ date ]</a>
              <a href="thread.html#4709">[ thread ]</a>
              <a href="subject.html#4709">[ subject ]</a>
              <a href="author.html#4709">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
