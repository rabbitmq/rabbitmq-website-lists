<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Broker failover
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Broker%20failover&In-Reply-To=20090819144528.GD22620%40mrnibble.lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004599.html">
   <LINK REL="Next"  HREF="004605.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Broker failover</H1>
    <B>Niko Felger</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Broker%20failover&In-Reply-To=20090819144528.GD22620%40mrnibble.lshift.net"
       TITLE="[rabbitmq-discuss] Broker failover">niko.felger at googlemail.com
       </A><BR>
    <I>Thu Aug 20 11:09:32 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004599.html">[rabbitmq-discuss] Broker failover
</A></li>
        <LI>Next message: <A HREF="004605.html">[rabbitmq-discuss] Broker failover
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4604">[ date ]</a>
              <a href="thread.html#4604">[ thread ]</a>
              <a href="subject.html#4604">[ subject ]</a>
              <a href="author.html#4604">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthew,

Thanks a lot for all this info!

Is there a way to achieve some of this in a clustered setup? I guess our
requirements are not so much HA of the whole messaging subsystem, but rather
that an as-large-as-possible proportion of messages gets processed
_eventually_. The scenario I am mainly worried about is when producers
suddenly cannot publish anymore because the server has gone away and thus
any messages are lost at that point.

We tried using a dumb load balancer (in front of both producers and
consumers) to achieve this, but so far this has caused us more trouble than
it saved, see here:
<A HREF="http://www.nabble.com/RabbitMQ-load-balancing-failover-with-LVS-td24683230.html#a24683230">http://www.nabble.com/RabbitMQ-load-balancing-failover-with-LVS-td24683230.html#a24683230</A>

Thanks!
niko

On Wed, Aug 19, 2009 at 15:45, Matthew Sackman &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at lshift.net</A>&gt; wrote:

&gt;<i> Niko,
</I>&gt;<i>
</I>&gt;<i> On Wed, Aug 19, 2009 at 03:41:59PM +0100, Matthew Sackman wrote:
</I>&gt;<i> &gt; Therefore, if HA and failover is important to you, we'd recommend the
</I>&gt;<i> &gt; following:
</I>&gt;<i>
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i> One further issue with this is that it means really all the nodes need
</I>&gt;<i> to manually be configured the same, in terms of queues, exchanges and
</I>&gt;<i> bindings. As producers don't know which node they're connected to, this
</I>&gt;<i> really demands that:
</I>&gt;<i> a) Every producer can attempt configuration whenever it connects; or
</I>&gt;<i> b) As consumers may need to be connected to every node, they could do
</I>&gt;<i>   the configuration, as they're not in front of the load balancer; or
</I>&gt;<i> c) You have some other process that does configuration.
</I>&gt;<i>
</I>&gt;<i> This is definitely one area where the clustered setup saves you effort
</I>&gt;<i> as all nodes implicitly get configured in the same way.
</I>&gt;<i>
</I>&gt;<i> Matthew
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090820/a89c647a/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090820/a89c647a/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004599.html">[rabbitmq-discuss] Broker failover
</A></li>
	<LI>Next message: <A HREF="004605.html">[rabbitmq-discuss] Broker failover
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4604">[ date ]</a>
              <a href="thread.html#4604">[ thread ]</a>
              <a href="subject.html#4604">[ subject ]</a>
              <a href="author.html#4604">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
