<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Weird Crash (1M to 10M messages over STOMP?) -	Recovery logic for durable messages/queues/exchanges?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Weird%20Crash%20%281M%20to%2010M%20messages%20over%20STOMP%3F%29%0A%20-%09Recovery%20logic%20for%20durable%20messages/queues/exchanges%3F&In-Reply-To=50c8ffe90908071339le06bcdh64023d616d0eceb7%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004432.html">
   <LINK REL="Next"  HREF="004434.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Weird Crash (1M to 10M messages over STOMP?) -	Recovery logic for durable messages/queues/exchanges?</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Weird%20Crash%20%281M%20to%2010M%20messages%20over%20STOMP%3F%29%0A%20-%09Recovery%20logic%20for%20durable%20messages/queues/exchanges%3F&In-Reply-To=50c8ffe90908071339le06bcdh64023d616d0eceb7%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Weird Crash (1M to 10M messages over STOMP?) -	Recovery logic for durable messages/queues/exchanges?">matthias at lshift.net
       </A><BR>
    <I>Fri Aug  7 22:39:14 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004432.html">[rabbitmq-discuss] Weird Crash (1M to 10M messages over STOMP?)	- Recovery logic for durable messages/queues/exchanges?
</A></li>
        <LI>Next message: <A HREF="004434.html">[rabbitmq-discuss] Weird Crash (1M to 10M messages over STOMP?)	- Recovery logic for durable messages/queues/exchanges?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4433">[ date ]</a>
              <a href="thread.html#4433">[ thread ]</a>
              <a href="subject.html#4433">[ subject ]</a>
              <a href="author.html#4433">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Darien,

Darien Kindlund wrote:
&gt;<i> Back to the main crash issue.  It happened again.  The short version:
</I>&gt;<i> This crash may have to do with sending large messages over STOMP --
</I>&gt;<i> I'm not sure.  I've proposed a couple of unit test cases below and am
</I>&gt;<i> curious if you're able to replicate the issue, based upon those tests.
</I>
I forgot you were one of the STOMPers ;)

That opens up a new direction of investigation.

&gt;<i> Here's the details:
</I>&gt;<i> 
</I>&gt;<i> 1) Primary indication that RabbitMQ died, is when issuing a
</I>&gt;<i> 'rabbitmqctl' command:
</I>&gt;<i> # rabbitmqctl list_exchanges
</I>&gt;<i> Listing exchanges ...
</I>&gt;<i> Error: {badrpc,nodedown}
</I>&gt;<i> 
</I>&gt;<i> 2) Listing all the erlang relevant processes shows just this:
</I>&gt;<i> # ps ax | grep erla
</I>&gt;<i> 14488 ?        S      0:00 /usr/lib/erlang/erts-5.5.5/bin/epmd -daemon
</I>
ok. Looks like the rabbit had indeed perished.

&gt;<i> Then, I checked the /var/log/rabbitmq/startup_log file, which showed:
</I>&gt;<i> [...]
</I>
Can you send me a copy of the rabbit.log?

&gt;<i> Is there some sort of (implicit) upper limit on the allowable message
</I>&gt;<i> size when sending over STOMP?
</I>
Not that I am aware of.

&gt;<i> I'm sending you a copy of the mnesia directory in a separate
</I>&gt;<i> email directly to you. 
</I>
When I recover that into my local rabbit instance I get a whole bunch of 
exchanges, queues and bindings, but no messages - unacknowledged or 
otherwise. Do you see something different?


Regards,

Matthias.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004432.html">[rabbitmq-discuss] Weird Crash (1M to 10M messages over STOMP?)	- Recovery logic for durable messages/queues/exchanges?
</A></li>
	<LI>Next message: <A HREF="004434.html">[rabbitmq-discuss] Weird Crash (1M to 10M messages over STOMP?)	- Recovery logic for durable messages/queues/exchanges?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4433">[ date ]</a>
              <a href="thread.html#4433">[ thread ]</a>
              <a href="subject.html#4433">[ subject ]</a>
              <a href="author.html#4433">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
