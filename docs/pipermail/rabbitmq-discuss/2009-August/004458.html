<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Receiving Undelivered Persistent Messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Receiving%20Undelivered%20Persistent%20Messages&In-Reply-To=4e1b00700908091916x7cd53333i3f77e69de0238d5a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004457.html">
   <LINK REL="Next"  HREF="004460.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Receiving Undelivered Persistent Messages</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Receiving%20Undelivered%20Persistent%20Messages&In-Reply-To=4e1b00700908091916x7cd53333i3f77e69de0238d5a%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Receiving Undelivered Persistent Messages">matthias at lshift.net
       </A><BR>
    <I>Mon Aug 10 09:16:17 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004457.html">[rabbitmq-discuss] Receiving Undelivered Persistent Messages
</A></li>
        <LI>Next message: <A HREF="004460.html">[rabbitmq-discuss] Receiving Undelivered Persistent Messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4458">[ date ]</a>
              <a href="thread.html#4458">[ thread ]</a>
              <a href="subject.html#4458">[ subject ]</a>
              <a href="author.html#4458">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Vidit,

Vidit Drolia wrote:

&gt;<i> When a consumer's channel is closed, then all unacknowledged messages
</I>&gt;<i> are still available in the queue for subsequent consumers. If there
</I>&gt;<i> are N messages in the queue when the last consumer died, then when a
</I>&gt;<i> new consumer fires up, 1 message is delivered when the consumer
</I>&gt;<i> requests for a message by subscription. That is to say, executing:
</I>&gt;<i> 
</I>&gt;<i> while(true){
</I>&gt;<i>   delivery = consumer.nextDelivery();
</I>&gt;<i> //do something...
</I>&gt;<i> //acknowledge for delivery
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> will deliver 1 message leaving N-1 messages in the queue. However,
</I>&gt;<i> after one execution of the above loop, the consumer keeps waiting for
</I>&gt;<i> the next delivery, even though there are N-1 messages in the queue. My
</I>&gt;<i> question was, is this supposed to happen by design of a subscription.
</I>
No, that is not supposed to happen. If there are N messages in the queue 
and you have one consumer connecting to it and consuming messages as you 
describe then that consumer should receive all the messages.

What client are you using? Can you post all the code to reproduce this?


Regards,

Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004457.html">[rabbitmq-discuss] Receiving Undelivered Persistent Messages
</A></li>
	<LI>Next message: <A HREF="004460.html">[rabbitmq-discuss] Receiving Undelivered Persistent Messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4458">[ date ]</a>
              <a href="thread.html#4458">[ thread ]</a>
              <a href="subject.html#4458">[ subject ]</a>
              <a href="author.html#4458">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
