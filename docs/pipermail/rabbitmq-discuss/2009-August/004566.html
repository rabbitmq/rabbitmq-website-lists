<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] questions about distributed queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20questions%20about%20distributed%20queue&In-Reply-To=167204d20908171132m71c3e7b0t3d6e016ae96f3a6d%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004608.html">
   <LINK REL="Next"  HREF="004573.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] questions about distributed queue</H1>
    <B>Brian Mitchell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20questions%20about%20distributed%20queue&In-Reply-To=167204d20908171132m71c3e7b0t3d6e016ae96f3a6d%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] questions about distributed queue">binary42 at gmail.com
       </A><BR>
    <I>Mon Aug 17 20:38:20 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004608.html">[rabbitmq-discuss] questions about distributed queue
</A></li>
        <LI>Next message: <A HREF="004573.html">[rabbitmq-discuss] questions about distributed queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4566">[ date ]</a>
              <a href="thread.html#4566">[ thread ]</a>
              <a href="subject.html#4566">[ subject ]</a>
              <a href="author.html#4566">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Aug 17, 2009 at 14:32, Alexis
Richardson&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis.richardson at gmail.com</A>&gt; wrote:
&gt;<i> On Mon, Aug 17, 2009 at 5:22 PM, Paul Dix&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">paul at pauldix.net</A>&gt; wrote:
</I>&gt;&gt;<i> So what exactly does option 1 look like?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It sounds like it's possible to have a queue with the same id on two
</I>&gt;&gt;<i> different nodes bound to the same exchange.
</I>&gt;<i>
</I>&gt;<i> Not quite. &#160;Same routing - two queues, two ids. &#160;Actually now that I
</I>&gt;<i> think about it that won't give you exactly what you need. &#160;More below.
</I>
Right. I figured the producers would round robin their production in
some fashion for that method. Talking to Paul on IRC made it clear
that it would be ideal to limit the amount of logic and load balancing
that the producer and/or consumer is responsible for.

Another idea I've played with is splitting the vhosts or clusters up
and optionally only replicating internally on each one to a reasonable
limit for availability control. In this case, sharding methods like
bucket selection could be used to assign producers to a single cluster
or vhost combo taking the need to cycle out. Consumers could either
connect to a single cluster or vhost or many as appropriate for the
flow characteristics expected.

The only plusses of this are the fact that you can scale complex
exchange/queue setups w/o having to generate and track a lot of unique
routing keys that need to be coordinated with the consumer side.
Instead you just have a list of hosts that can be used. I've also
thought of a few ways one could put a load balancer in front of this
quite easily on either side if there is a concern with how smart a
client must be.

Brian.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004608.html">[rabbitmq-discuss] questions about distributed queue
</A></li>
	<LI>Next message: <A HREF="004573.html">[rabbitmq-discuss] questions about distributed queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4566">[ date ]</a>
              <a href="thread.html#4566">[ thread ]</a>
              <a href="subject.html#4566">[ subject ]</a>
              <a href="author.html#4566">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
