<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] direct queue throughput
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20direct%20queue%20throughput&In-Reply-To=f7541d9c0908311225q4ee47520g55435d388500a6d8%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004728.html">
   <LINK REL="Next"  HREF="004717.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] direct queue throughput</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20direct%20queue%20throughput&In-Reply-To=f7541d9c0908311225q4ee47520g55435d388500a6d8%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] direct queue throughput">matthew at lshift.net
       </A><BR>
    <I>Mon Aug 31 20:37:42 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004728.html">[rabbitmq-discuss] direct queue throughput
</A></li>
        <LI>Next message: <A HREF="004717.html">[rabbitmq-discuss] direct queue throughput
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4729">[ date ]</a>
              <a href="thread.html#4729">[ thread ]</a>
              <a href="subject.html#4729">[ subject ]</a>
              <a href="author.html#4729">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Charity,

On Mon, Aug 31, 2009 at 12:25:07PM -0700, Charity Majors wrote:
&gt;<i> &gt; Err, this seems odd. Do you mean that your consumers set noAck to true
</I>&gt;<i> &gt; when setting up the subscription to the queue? If you're not, and you're
</I>&gt;<i> &gt; not explicitly acking then Rabbit will be keeping a copy of the message
</I>&gt;<i> &gt; in memory all the time, because it won't discard messages until it
</I>&gt;<i> &gt; receives an ack from the consumer for the msg.
</I>&gt;<i> 
</I>&gt;<i> I'm a little confused about this sentence here, but no, I'm not
</I>&gt;<i> explicitly acking anything.  I have no_ack set to True, and no durable
</I>&gt;<i> queues or persistent delivery mode, so I shouldn't be storing anything
</I>&gt;<i> in memory or disk.  It doesn't appear as though I am.
</I>
Ahh right, yes. If noAck is true, then you're ok.

AMQP says that a broker shouldn't forget about a msg until it's been
ack'd. Now this can either happen by an explicit ack coming from the
consumer, or from an implicit ack, by setting noAck to true when
subscribing to the queue. Yes, the unfortunate naming of &quot;noAck&quot; is, um,
unfortunate. Internally, we tend to invert this and then call it
AckRequired.

&gt;<i> &gt; Yes, I think this backs up my theory - if a null consumer isn't going
</I>&gt;<i> &gt; any faster, then I would definitely point the finger at the producers.
</I>&gt;<i> &gt; How big are the messages you're sending? If you're all on the same box,
</I>&gt;<i> &gt; I find this a bit surprising - I can push above 400M*Bytes*/s over
</I>&gt;<i> &gt; localhost loopback to and from Rabbit.
</I>&gt;<i> 
</I>&gt;<i> Yeah, this makes sense.  Let me try taking RMQ out of the equation
</I>&gt;<i> completely and seeing how fast the producers are producing messages.
</I>
Do let us know how you get on.

Cheers,

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004728.html">[rabbitmq-discuss] direct queue throughput
</A></li>
	<LI>Next message: <A HREF="004717.html">[rabbitmq-discuss] direct queue throughput
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4729">[ date ]</a>
              <a href="thread.html#4729">[ thread ]</a>
              <a href="subject.html#4729">[ subject ]</a>
              <a href="author.html#4729">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
