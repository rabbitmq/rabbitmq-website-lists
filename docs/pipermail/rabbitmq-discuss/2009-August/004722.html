<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Priorities support in RabbitMQ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Priorities%20support%20in%20RabbitMQ&In-Reply-To=85E27B09-0AE2-4D0F-9558-9CF4D97E763E%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004721.html">
   <LINK REL="Next"  HREF="004723.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Priorities support in RabbitMQ</H1>
    <B>Holger Hoffst&#228;tte</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Priorities%20support%20in%20RabbitMQ&In-Reply-To=85E27B09-0AE2-4D0F-9558-9CF4D97E763E%40gmail.com"
       TITLE="[rabbitmq-discuss] Priorities support in RabbitMQ">holger.hoffstaette at googlemail.com
       </A><BR>
    <I>Mon Aug 31 13:19:59 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004721.html">[rabbitmq-discuss] Priorities support in RabbitMQ
</A></li>
        <LI>Next message: <A HREF="004723.html">[rabbitmq-discuss] Priorities support in RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4722">[ date ]</a>
              <a href="thread.html#4722">[ thread ]</a>
              <a href="subject.html#4722">[ subject ]</a>
              <a href="author.html#4722">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michal Chruszcz wrote:
&gt;<i> control order of message processing. Say I have distributed  
</I>&gt;<i> asynchronous data processing service, which uses RabbitMQ for queueing  
</I>&gt;<i> tasks, and would like to prioritize them depending on  data volume  
</I>&gt;<i> (tiny packages are processed first). Priorities seemed to be perfect  
</I>&gt;<i> solution, but unfortunately later I realized it's not supported yet.
</I>
It is a common misconception that priorities alone can be used to do this
&quot;properly&quot; - it will only work well if you are accidentally lucky with
your ingress patterns or really don't care about a total lack of
predictable processing latency for larger messages. Since Rabbit does not
page to disk yet, preferring small messages might even make it run out of
memory *sooner* as more and more large messages are held back. Do not
underestimate the effectiveness of randomized workloads. :)
Explicitly moding this with multiple queues and multiple consumers is much
more likely to result in better (both predictable and controllable)
scalability and a well-balanced throughput for both small and large
messages. Spin up multiple consumers for small messages (keeping those
cores busy and even hopefully reducing per-message latency), have one
low-priority consumer chew on larger tasks in the background or even on
another machine. It also gives you the option of having different
durability/persistence options for different priorities.

-h


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004721.html">[rabbitmq-discuss] Priorities support in RabbitMQ
</A></li>
	<LI>Next message: <A HREF="004723.html">[rabbitmq-discuss] Priorities support in RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4722">[ date ]</a>
              <a href="thread.html#4722">[ thread ]</a>
              <a href="subject.html#4722">[ subject ]</a>
              <a href="author.html#4722">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
