<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] direct queue throughput
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20direct%20queue%20throughput&In-Reply-To=20090828230109.GA4507%40wellquite.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004697.html">
   <LINK REL="Next"  HREF="004701.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] direct queue throughput</H1>
    <B>Charity Majors</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20direct%20queue%20throughput&In-Reply-To=20090828230109.GA4507%40wellquite.org"
       TITLE="[rabbitmq-discuss] direct queue throughput">charity at lindenlab.com
       </A><BR>
    <I>Sat Aug 29 00:51:19 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004697.html">[rabbitmq-discuss] direct queue throughput
</A></li>
        <LI>Next message: <A HREF="004701.html">[rabbitmq-discuss] direct queue throughput
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4699">[ date ]</a>
              <a href="thread.html#4699">[ thread ]</a>
              <a href="subject.html#4699">[ subject ]</a>
              <a href="author.html#4699">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Erlang has supported SMP for several releases, I believe first gaining
</I>&gt;<i> support about 4 years ago. Initially, yes, we found that very early
</I>&gt;<i> versions of Rabbit ran slower with the SMP support turned on that off.
</I>&gt;<i> However, Erlang's support for SMP has improved substantially over the
</I>&gt;<i> years and Rabbit benefits substantially from Erlang's SMP support.
</I>
Oh!  Hmm, okay, even better to know.  :)

&gt;<i> The rest of Chuck's points are absolutely valid though - we really need
</I>&gt;<i> a fair bit more information - which clients are you using, what is the
</I>&gt;<i> sustain network load, are the consumers, auto-acking, manually acking,
</I>&gt;<i> is qos being used?
</I>
I'm using python-amqplib.  There's no flow control, so I have an
option implemented that works kind of like a poor man's throttle.  We
already keep state on how many jobs are running or waiting at a given
time, so our job minder thread doesn't submit any more jobs to the
queue if there's more than a certain number already running or waiting
to execute.

This works pretty well.  With the SSDs, however, it runs so fast that
I don't even have to turn on the throttle.  The workers consume the
jobs, execute the SQL, and return their status faster than the
publisher can stuff jobs into the queue.

We aren't acking at all.

Network load ... I would have to check on that.  But I don't think
that's the ceiling we're bumping up against.  I can run it with a null
plugin, so it just pushes the jobs through the rabbitmq queues and
fakes the mysql responses, and everything stays on the same box.  And
my throughput rate looks identical to the rates I see testing the
SSDs.

Does that answer your questions?

Thanks,
charity.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004697.html">[rabbitmq-discuss] direct queue throughput
</A></li>
	<LI>Next message: <A HREF="004701.html">[rabbitmq-discuss] direct queue throughput
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4699">[ date ]</a>
              <a href="thread.html#4699">[ thread ]</a>
              <a href="subject.html#4699">[ subject ]</a>
              <a href="author.html#4699">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
