<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Problem with multiple subscribers on the	same queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Problem%20with%20multiple%20subscribers%20on%20the%0A%09same%20queue&In-Reply-To=4A929CFC.2060305%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004647.html">
   <LINK REL="Next"  HREF="004652.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Problem with multiple subscribers on the	same queue</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Problem%20with%20multiple%20subscribers%20on%20the%0A%09same%20queue&In-Reply-To=4A929CFC.2060305%40lshift.net"
       TITLE="[rabbitmq-discuss] Problem with multiple subscribers on the	same queue">0x6e6562 at gmail.com
       </A><BR>
    <I>Mon Aug 24 15:15:13 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004647.html">[rabbitmq-discuss] Problem with multiple subscribers on the	same queue
</A></li>
        <LI>Next message: <A HREF="004652.html">[rabbitmq-discuss] attempt to connect to broker with invalid	username/password hangs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4648">[ date ]</a>
              <a href="thread.html#4648">[ thread ]</a>
              <a href="subject.html#4648">[ subject ]</a>
              <a href="author.html#4648">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Frank,

On 8/24/09, Ben Hood &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben at lshift.net</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Thanks for this answer. The second solution is the one I have already
</I>&gt;<i> chosen (found it few hours after having written you my mail). But to be
</I>&gt;<i> honest, I am not very happy with that because it introduces some
</I>&gt;<i> potential failures on my system. For example, to publishers (the one
</I>&gt;<i> listening for subscription on marketdata.test#RPC in my previous
</I>&gt;<i> example) will be able to listen to the same subject (let's say TOTO.#
</I>&gt;<i> for example) and if a subscriber come and ask for a subscription on
</I>&gt;<i> TOTO.test1 (request is made through the marketdata.test#RPC exchange as
</I>&gt;<i> you can imagine), both of them will take it in account and will publish
</I>&gt;<i> data for TOTO.test1.
</I>&gt;<i> Anyway, I have no choice for the moment so I will handle that.
</I>
So if I understand you correctly, you want messages to be consumed
selectively but only once, i.e. only by one single consumer who
decides that they are capable of processing that message type?

So if that is the case, can't you use a topic exchange to only make
exact matches - i.e. when you construct your routing table, you just
make sure that you don't have bindings that cause a message to be
multicasted to more that one queue? Or as an alternative, since the
message type is a discriminating factor, why not make it out to be a
first class endpoint and send each different message type directly to
a well-known queue whose consumers only process that message type?

My original point was that you probably shouldn't being using message
rejection (if it were available) to do a selective receive. Selective
reception belongs *ideally* in the routing layer and message rejection
should generally only used as neat and tidy way to handle
unforeseeable exceptions.

Maybe I am missing the point though.

&gt;<i> Yes of course you can put this topic onto the publish discussion forum
</I>&gt;<i> (to be honest, I was thinking that I was writing to the public RabbitMQ
</I>&gt;<i> mailing list throught the <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">info at rabbitmq</A> email).
</I>
OK, I've now taken this discussion onto the public forum, please just
CC <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004647.html">[rabbitmq-discuss] Problem with multiple subscribers on the	same queue
</A></li>
	<LI>Next message: <A HREF="004652.html">[rabbitmq-discuss] attempt to connect to broker with invalid	username/password hangs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4648">[ date ]</a>
              <a href="thread.html#4648">[ thread ]</a>
              <a href="subject.html#4648">[ subject ]</a>
              <a href="author.html#4648">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
