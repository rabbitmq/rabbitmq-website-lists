<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] General approaches for tracking unreclaimed	memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20General%20approaches%20for%20tracking%20unreclaimed%0A%09memory&In-Reply-To=4AE797A6.10707%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005253.html">
   <LINK REL="Next"  HREF="005255.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] General approaches for tracking unreclaimed	memory</H1>
    <B>Garrett Smith</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20General%20approaches%20for%20tracking%20unreclaimed%0A%09memory&In-Reply-To=4AE797A6.10707%40lshift.net"
       TITLE="[rabbitmq-discuss] General approaches for tracking unreclaimed	memory">g at rre.tt
       </A><BR>
    <I>Wed Oct 28 15:48:39 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005253.html">[rabbitmq-discuss] General approaches for tracking unreclaimed memory
</A></li>
        <LI>Next message: <A HREF="005255.html">[rabbitmq-discuss] General approaches for tracking unreclaimed	memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5254">[ date ]</a>
              <a href="thread.html#5254">[ thread ]</a>
              <a href="subject.html#5254">[ subject ]</a>
              <a href="author.html#5254">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Oct 27, 2009 at 8:00 PM, Matthias Radestock &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>&gt; wrote:

&gt;&gt;<i> So, here's the problem, which everyone reasonably faces: when a
</I>&gt;&gt;<i> consumer goes away, their queues pile up, which is basically a &quot;leak&quot;
</I>&gt;&gt;<i> at the application/system level (not with rabbit).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm being a little lazy here by not looking into the docs or the AMQP
</I>&gt;&gt;<i> spec, but is there a way to guard against an eventual crash in this
</I>&gt;&gt;<i> case (I believe this has manifested itself for me once by running out
</I>&gt;&gt;<i> of Erlang processes, but memory is certainly an issue as well)?
</I>&gt;<i>
</I>&gt;<i> I'd definitely recommend reading the spec. If you did then you'd know about
</I>&gt;<i> the exclusive and auto-delete flags to queue.declare ;) Queues declared with
</I>&gt;<i> the former get automatically deleted when their creating connection
</I>&gt;<i> disappears, and the latter when their last consumer disappears.
</I>
Yup, I'm familiar with those flags (and actually have read the spec, a
few times even :)

I need both non-exclusive/non-auto-delete so that the queue is
preserved when either the creating connection or the last consumer
goes away. Various agents come and go (restarting is one example, but
there are other cases). Not to preach to the choir, but one of the
benefits of async messaging is you can insulate from dropped
connections.

It sounds like I'm left with the option of running a cleanup/check
process occasionally to ensure that we don't run into queues piling
up. No other options, given exclusive=false and autodelete=false?

I know that the expires/TTL is ignored in rabbit, and is perhaps not
entirely fleshed out in the 0.8 spec, but it seems an important
feature wrt resource resource management.

Garrett


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005253.html">[rabbitmq-discuss] General approaches for tracking unreclaimed memory
</A></li>
	<LI>Next message: <A HREF="005255.html">[rabbitmq-discuss] General approaches for tracking unreclaimed	memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5254">[ date ]</a>
              <a href="thread.html#5254">[ thread ]</a>
              <a href="subject.html#5254">[ subject ]</a>
              <a href="author.html#5254">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
