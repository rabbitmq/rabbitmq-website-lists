<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] General approaches for tracking unreclaimed memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20General%20approaches%20for%20tracking%20unreclaimed%0A%20memory&In-Reply-To=ce2570e20910281021u7f6b6131u1d4ee2532376729e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005257.html">
   <LINK REL="Next"  HREF="005249.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] General approaches for tracking unreclaimed memory</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20General%20approaches%20for%20tracking%20unreclaimed%0A%20memory&In-Reply-To=ce2570e20910281021u7f6b6131u1d4ee2532376729e%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] General approaches for tracking unreclaimed memory">matthias at lshift.net
       </A><BR>
    <I>Wed Oct 28 19:11:26 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005257.html">[rabbitmq-discuss] General approaches for tracking unreclaimed	memory
</A></li>
        <LI>Next message: <A HREF="005249.html">[rabbitmq-discuss] Unable to get STOMP plugin working with 1.7.0 on	Debian Lenny
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5258">[ date ]</a>
              <a href="thread.html#5258">[ thread ]</a>
              <a href="subject.html#5258">[ subject ]</a>
              <a href="author.html#5258">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Garrett,

Garrett Smith wrote:
&gt;<i> Let's say I restart a process and terminate a connection on an
</I>&gt;<i> exclusive queue. I'm interested in the messages -- I'm gonna come back
</I>&gt;<i> online after the restart. I don't want to delete the queue. Trust me
</I>&gt;<i> :)
</I>&gt;<i> 
</I>&gt;<i> Let's say, on the other hand, that I decommission the queue owner and
</I>&gt;<i> (admittedly sloppily) don't delete the queue. Messages pile up and I
</I>&gt;<i> run out of memory/processes.
</I>&gt;<i> 
</I>&gt;<i> I understand this is entirely application specific. It's like running
</I>&gt;<i> out of disk space when you keep writing to a database. I understand
</I>&gt;<i> that and will deal with it easily enough, though I do think that
</I>&gt;<i> protections against resource exhaustion are important.
</I>
Understood. However, message expiry is entirely in the control of the
client, so it's not something a server can rely on for keeping resources
bounded unless it can trust the clients and clients have been correctly
coded to supply a reasonable expiry time.

Also, you'd still want a mechanism to delete the queue in your scenario,
because otherwise the system will waste resources on publishing and then
deleting messages from it.

It seems like what you are really after is a server-controlled &quot;time to
live when unused&quot; setting for a queue, i.e. the server would
automatically delete the queue after it hasn't been used for a while.
And you'd probably want to put limits on queue sizes too. etc, etc.


Regards,

Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005257.html">[rabbitmq-discuss] General approaches for tracking unreclaimed	memory
</A></li>
	<LI>Next message: <A HREF="005249.html">[rabbitmq-discuss] Unable to get STOMP plugin working with 1.7.0 on	Debian Lenny
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5258">[ date ]</a>
              <a href="thread.html#5258">[ thread ]</a>
              <a href="subject.html#5258">[ subject ]</a>
              <a href="author.html#5258">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
