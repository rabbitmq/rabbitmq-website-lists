<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Simple benchmark and results
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Simple%20benchmark%20and%20results&In-Reply-To=25968960.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005177.html">
   <LINK REL="Next"  HREF="005187.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Simple benchmark and results</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Simple%20benchmark%20and%20results&In-Reply-To=25968960.post%40talk.nabble.com"
       TITLE="[rabbitmq-discuss] Simple benchmark and results">matthias at lshift.net
       </A><BR>
    <I>Tue Oct 20 07:10:11 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005177.html">[rabbitmq-discuss]  Simple benchmark and results
</A></li>
        <LI>Next message: <A HREF="005187.html">[rabbitmq-discuss] Simple benchmark and results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5181">[ date ]</a>
              <a href="thread.html#5181">[ thread ]</a>
              <a href="subject.html#5181">[ subject ]</a>
              <a href="author.html#5181">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David,

David Glaubman wrote:
&gt;<i> Hi, I am experimenting with RabbitMQ (v1.7.0) on Windows using the .Net
</I>&gt;<i> client.
</I>&gt;<i> [...]
</I>&gt;<i> Client machine: Quad CPU @ 2.4Ghz, 4Gb memory, running 32-bit Windows XP SP2
</I>&gt;<i> Server machine: Quad CPU @ 2.2GHz, 4Gb memory, running 64-bit Windows Server
</I>&gt;<i> 2008 Standard
</I>&gt;<i> Network: 1Gbps Ethernet, tracert shows 2 hops between machines
</I>&gt;<i> [...]
</I>&gt;<i> Benchmark consists of 
</I>&gt;<i> 	1. BasicPublish of 1000 24-byte messages to a Fanout exchange
</I>&gt;<i> (non-persistent)
</I>&gt;<i> 	2. Dequeuing these 1000 messages using a QueueingBasicConsumer
</I>&gt;<i>       3. Sending 1000 24-byte messages using MSMQ
</I>&gt;<i>       4. Receiving 1000 24-byte messages using MSMQ
</I>&gt;<i> (All benchmarks were run using MeasureIt, a free microbenchmarking tool for
</I>&gt;<i> .Net code.)
</I>&gt;<i> 
</I>&gt;<i> Results
</I>&gt;<i> -------
</I>&gt;<i> RabbitMQ:
</I>&gt;<i> In the local case, published about 4K messages per second, consumed about
</I>&gt;<i> 10K messages per second.
</I>&gt;<i> In the remote case, median times were the same as for local, but big
</I>&gt;<i> outliers occurred on some runs.
</I>&gt;<i> (Using BasicGet instead of QueueingBasicConsumer, I got around 1500 messages
</I>&gt;<i> per sec remote, 3K local)
</I>&gt;<i> 
</I>&gt;<i> MSMQ:
</I>&gt;<i> In the local case, MSMQ sent about 40K messages per second, received about
</I>&gt;<i> 40K messages per second.
</I>&gt;<i> In the remote case, MSMQ sent about 33K messages per second, received about
</I>&gt;<i> 1.2K per second.
</I>
It looks like MSMQ may have some optimisation for the local case - 
perhaps it bypasses the TCP/IP stack?

As for rabbit, I suspect the main bottleneck is actually the .net 
client. What's the CPU load like for the client? It may well be maxing 
out one core.

We and other users have seen much higher message rates from RabbitMQ on 
similar hardware than what you are reporting - not quite matching MSQM 
perhaps, but close.

If you can, try running some tests with the MulticastMain example that 
ships with the Java client, for comparison.

Also, note that in your particular test setup the RabbitMQ server will 
not be able to take full advantage of the multiple cores since there is 
too little inherent parallelism. Presumably your intended use case does 
have more than a single message stream, going from one producer to one 
consumer; such a configuration will produce higher message rates overall.


Regards,

Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005177.html">[rabbitmq-discuss]  Simple benchmark and results
</A></li>
	<LI>Next message: <A HREF="005187.html">[rabbitmq-discuss] Simple benchmark and results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5181">[ date ]</a>
              <a href="thread.html#5181">[ thread ]</a>
              <a href="subject.html#5181">[ subject ]</a>
              <a href="author.html#5181">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
