<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Job Server Resource Allocation Help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Job%20Server%20Resource%20Allocation%20Help&In-Reply-To=7fd310d10910071340w18237fagf5855c93f8dbbd3c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005069.html">
   <LINK REL="Next"  HREF="005072.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Job Server Resource Allocation Help</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Job%20Server%20Resource%20Allocation%20Help&In-Reply-To=7fd310d10910071340w18237fagf5855c93f8dbbd3c%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Job Server Resource Allocation Help">alexis.richardson at gmail.com
       </A><BR>
    <I>Wed Oct  7 22:02:44 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005069.html">[rabbitmq-discuss] Job Server Resource Allocation Help
</A></li>
        <LI>Next message: <A HREF="005072.html">[rabbitmq-discuss] Job Server Resource Allocation Help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5071">[ date ]</a>
              <a href="thread.html#5071">[ thread ]</a>
              <a href="subject.html#5071">[ subject ]</a>
              <a href="author.html#5071">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Bryan

I assume each job should be completed at most once.

You can achieve something almost like what you want by creating two
queues.  Use one for &quot;paying&quot; and one for &quot;non-paying&quot; jobs by binding
each queue to the (direct) exchange using the keys &quot;paying&quot; and
&quot;nonpaying&quot; respectively.  Assign N servers to the &quot;paying&quot; queue.
Let the remainder consume from both queues using some selection scheme
(eg worker randomly chooses a queue each time a new job is needed).

Many other schemes are possible.  However trying to achieve some total
order (eg 'first come first serve') may be more complex than you
really need.

alexis



On Wed, Oct 7, 2009 at 9:40 PM, Bryan Murphy &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">bmurphy1976 at gmail.com</A>&gt; wrote:
&gt;<i> We have paying and non-paying customers.&#160; We want to have a pool of servers,
</I>&gt;<i> where a fixed percentage of the servers are dedicated to processing jobs
</I>&gt;<i> from paying customers only.&#160; The remaining servers will process jobs from
</I>&gt;<i> both paying and non-paying customers on a first come first serve basis.
</I>&gt;<i>
</I>&gt;<i> Each job is very CPU sensitive.&#160; We never want more than one job running per
</I>&gt;<i> CPU, and each job should run one time.
</I>&gt;<i>
</I>&gt;<i> Down the road, we'll want to dedicate servers to specific customers, but we
</I>&gt;<i> don't need to solve that now.
</I>&gt;<i>
</I>&gt;<i> Is there a simple way to do this (using the .NET client)?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Bryan
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005069.html">[rabbitmq-discuss] Job Server Resource Allocation Help
</A></li>
	<LI>Next message: <A HREF="005072.html">[rabbitmq-discuss] Job Server Resource Allocation Help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5071">[ date ]</a>
              <a href="thread.html#5071">[ thread ]</a>
              <a href="subject.html#5071">[ subject ]</a>
              <a href="author.html#5071">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
