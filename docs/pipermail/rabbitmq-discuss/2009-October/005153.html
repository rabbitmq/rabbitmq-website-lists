<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Errors Running on Win 2008 as a service
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Errors%20Running%20on%20Win%202008%20as%20a%20service&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005224.html">
   <LINK REL="Next"  HREF="005179.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Errors Running on Win 2008 as a service</H1>
    <B>Allen Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Errors%20Running%20on%20Win%202008%20as%20a%20service&In-Reply-To="
       TITLE="[rabbitmq-discuss] Errors Running on Win 2008 as a service">allengeoffreyjones at gmail.com
       </A><BR>
    <I>Sat Oct 17 14:16:58 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005224.html">[rabbitmq-discuss] RabbitMQ randomly dying under Ubuntu 9.04
</A></li>
        <LI>Next message: <A HREF="005179.html">[rabbitmq-discuss] Errors Running on Win 2008 as a service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5153">[ date ]</a>
              <a href="thread.html#5153">[ thread ]</a>
              <a href="subject.html#5153">[ subject ]</a>
              <a href="author.html#5153">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

 

I tried to send this through Nabble, but it wouldn't post properly, so sorry
if you see this multiple times. 

 

I am having a recurring problem and don't know enough about Rabbit to
understand the cause how to fix it.

 

I am running RMQ 1.6 as a Windows Service on Windows Server 2008 sp1.
Generally things are fine, but there have been a few instances where the
service just stops/crashes. The debug info for one recent crash is pasted
below. Looks like some kind of memory allocation problem, but it doesn't
seem to be happening necessarily when the exchange is under the highest
usage/demand, or when the queues are at the largest. So not sure what the
cause might be. Would 


Eshell V5.5.5  (abort with ^G) 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; RabbitMQ 1.6.0 (AMQP 8-0) 
Copyright (C) 2007-2009 LShift Ltd., Cohesive Financial Technologies LLC.,
and Rabbit Technologies Ltd. 
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; node        : <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A> 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; log         :
C:/QuantumBlack/RabbitMQ/log/rabbit.log 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; sasl log    :
C:/QuantumBlack/RabbitMQ/log/rabbit-sasl.log 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; database dir:
c:/QuantumBlack/RabbitMQ/db/rabbit-mnesia 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; starting database
...(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; done 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; starting core processes
...(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; done 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; starting recovery
...(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; done 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; starting persister
...(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; done 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; starting guid generator
...(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; done 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; starting builtin applications
...(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; done 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; starting TCP listeners
...(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; done 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; 
broker running 
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at WIN-8SEQ2ZQC8P2</A>)1&gt; binary_alloc: Cannot allocate 319762309 bytes of
memory (of type &quot;binary&quot;). 

This application has requested the Runtime to terminate it in an unusual
way. 
Please contact the application's support team for more information.

 

I had the same thing occur again last night, but the error this time was: 

 binary_alloc: Cannot allocate 521936656 bytes of memory (of type &quot;binary&quot;).


Having a look around, I noticed that the rabbit_persister.log file was about
this size, so I am assuming the two are related. 

Any help much appreciated. 

Regards 
Allen

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20091017/f8dd33f2/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20091017/f8dd33f2/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005224.html">[rabbitmq-discuss] RabbitMQ randomly dying under Ubuntu 9.04
</A></li>
	<LI>Next message: <A HREF="005179.html">[rabbitmq-discuss] Errors Running on Win 2008 as a service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5153">[ date ]</a>
              <a href="thread.html#5153">[ thread ]</a>
              <a href="subject.html#5153">[ subject ]</a>
              <a href="author.html#5153">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
