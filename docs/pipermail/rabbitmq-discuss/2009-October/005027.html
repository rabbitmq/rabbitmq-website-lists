<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Adding new nodes to a cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Adding%20new%20nodes%20to%20a%20cluster&In-Reply-To=6bd5d4070910021256q52a9d1dftb4990834714d7620%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005017.html">
   <LINK REL="Next"  HREF="005031.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Adding new nodes to a cluster</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Adding%20new%20nodes%20to%20a%20cluster&In-Reply-To=6bd5d4070910021256q52a9d1dftb4990834714d7620%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Adding new nodes to a cluster">matthew at lshift.net
       </A><BR>
    <I>Mon Oct  5 17:21:29 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005017.html">[rabbitmq-discuss] Adding new nodes to a cluster
</A></li>
        <LI>Next message: <A HREF="005031.html">[rabbitmq-discuss] Adding new nodes to a cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5027">[ date ]</a>
              <a href="thread.html#5027">[ thread ]</a>
              <a href="subject.html#5027">[ subject ]</a>
              <a href="author.html#5027">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Sammy,

On Fri, Oct 02, 2009 at 12:56:21PM -0700, Sammy Yu wrote:
&gt;<i>    I've getting my rabbitmq cluster setup.  I noticed in the
</I>&gt;<i> documentation there was reference to two different kinds of nodes, a
</I>&gt;<i> ram and disk node and it seems to infer that there can only be one ram
</I>&gt;<i> node and N disk nodes.  My understanding is that the ram node has no
</I>&gt;<i> persistent information about the other nodes whereas the disk node
</I>&gt;<i> does.  What's the reasoning behind the constraint and why is it it
</I>&gt;<i> necessary to have a ram node (I'm assuming there are some performance
</I>&gt;<i> implications)?
</I>
You can have as many RAM nodes and you'd like and as many disk nodes as
you'd like. In some versions of Rabbit, we've tried to enforce that you
can't create a cluster only of RAM nodes, but in truth this is
impossible to achieve so we've actually dropped all attempts to enforce
this in v1.7.

RAM nodes can go faster because their mnesia tables are only in memory,
thus they do not have to wait for disks. However, although persistent
messages will still be sent to disk on a RAM node, routing tables,
and accountancy information for exchanges and queues is not held on
disk. As such, should you create a cluster only of RAM nodes, durable
queues and exchanges will not survive server restarts because although
the messages will survive, there will be no entries in mnesia saying the
exchange/queue ever existed.

Thus having at least one disk node solves this because mnesia shares all
information across all nodes in a cluster - thus the disk node will
record everything necessary.

&gt;<i> Also is it true that the output of the first node
</I>&gt;<i> listed in rabbitmqctl status is the ram node?  So given the following
</I>&gt;<i> output:
</I>&gt;<i>  {nodes,[<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A><A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at rabbit2</A><A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at rabbit3</A>]},
</I>&gt;<i> We can assume that rabbit1 is the ram node and rabbit2 and rabbit3 are
</I>&gt;<i> disk nodes.
</I>
No. The output of rabbitmqctl status indicates every node that is in the
cluster, and does not indicate which of the nodes are RAM nodes and
which are disk nodes.

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005017.html">[rabbitmq-discuss] Adding new nodes to a cluster
</A></li>
	<LI>Next message: <A HREF="005031.html">[rabbitmq-discuss] Adding new nodes to a cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5027">[ date ]</a>
              <a href="thread.html#5027">[ thread ]</a>
              <a href="subject.html#5027">[ subject ]</a>
              <a href="author.html#5027">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
