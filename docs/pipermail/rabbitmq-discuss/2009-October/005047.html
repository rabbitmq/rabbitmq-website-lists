<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] the select messages by routing-key
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20the%20select%20messages%20by%20routing-key&In-Reply-To=E1MvSCd-0003fs-00.akalend-mail-ru%40f288.mail.ru">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005045.html">
   <LINK REL="Next"  HREF="005050.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] the select messages by routing-key</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20the%20select%20messages%20by%20routing-key&In-Reply-To=E1MvSCd-0003fs-00.akalend-mail-ru%40f288.mail.ru"
       TITLE="[rabbitmq-discuss] the select messages by routing-key">alexis.richardson at gmail.com
       </A><BR>
    <I>Wed Oct  7 11:38:40 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005045.html">[rabbitmq-discuss] the select messages by routing-key
</A></li>
        <LI>Next message: <A HREF="005050.html">[rabbitmq-discuss] Publish with immediate for dynamic worker	creation?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5047">[ date ]</a>
              <a href="thread.html#5047">[ thread ]</a>
              <a href="subject.html#5047">[ subject ]</a>
              <a href="author.html#5047">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alexandre

2009/10/7 Alexandre Kalendarev &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">akalend at mail.ru</A>&gt;:
&gt;<i> Alexis,
</I>&gt;<i>
</I>&gt;<i> It is second path.
</I>
Understood.


&gt;<i> First path: &#160;I have million users, million queues.
</I>&gt;<i> Second path: I will to have two-five million queues.
</I>
In RabbitMQ:

* the messages are stored efficiently i.e. the same message, even if
in two queues, is only stored once per node
* the queues take up some (small) space
* the bindings take up space

So in fact there is little difference between one queue with two
bindings, and two queues with one binding each.  As the number of
bindings grows relative to the number of queues, the difference
between your 'path one' and 'path two' decreases monotonically towards
zero.  (All other things being equal).

Does this help?

alexis






&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To achieve this you need two queues and one exchange.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Bind queue 1 to the exchange with key 'news'.
</I>&gt;&gt;<i> Bind queue 2 to the exchange with key 'realty'.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To see messages with key 'news', consume from queue 1.
</I>&gt;&gt;<i> To see messages with key 'realty', consume from queue 2.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> alexis
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Wed, Oct 7, 2009 at 9:37 AM, Alexandre Kalendarev &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">akalend at mail.ru</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; Hi All,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I have the received messages into the queue with routing-key:
</I>&gt;&gt;<i> &gt; message #1 &#160;- key: news
</I>&gt;&gt;<i> &gt; message #2 &#160;- key: realty
</I>&gt;&gt;<i> &gt; message #3 &#160;- key: realty
</I>&gt;&gt;<i> &gt; message #4 &#160;- key: news
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Can I to read from queue only by single routing-key, for example:
</I>&gt;&gt;<i> &gt; only first reading block
</I>&gt;&gt;<i> &gt; message #2 &#160;- key: realty
</I>&gt;&gt;<i> &gt; message #3 &#160;- key: realty
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; only Second reading block:
</I>&gt;&gt;<i> &gt; message #1 &#160;- key: news
</I>&gt;&gt;<i> &gt; message #4 &#160;- key: news
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I see next path:
</I>&gt;&gt;<i> &gt; - read all messages with no_ack (basic.get )
</I>&gt;&gt;<i> &gt; - filtring by key
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; read second block:
</I>&gt;&gt;<i> &gt; - read all messages (basic.get )
</I>&gt;&gt;<i> &gt; - filtring by second key
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Lack of this method is duble the incoming flow
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; The second path is to have the two different queues.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; thanks
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Alexandre
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005045.html">[rabbitmq-discuss] the select messages by routing-key
</A></li>
	<LI>Next message: <A HREF="005050.html">[rabbitmq-discuss] Publish with immediate for dynamic worker	creation?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5047">[ date ]</a>
              <a href="thread.html#5047">[ thread ]</a>
              <a href="subject.html#5047">[ subject ]</a>
              <a href="author.html#5047">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
