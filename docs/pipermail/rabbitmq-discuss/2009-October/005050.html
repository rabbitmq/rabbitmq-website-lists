<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Publish with immediate for dynamic worker	creation?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Publish%20with%20immediate%20for%20dynamic%20worker%0A%09creation%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005047.html">
   <LINK REL="Next"  HREF="005051.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Publish with immediate for dynamic worker	creation?</H1>
    <B>Robert Raschke</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Publish%20with%20immediate%20for%20dynamic%20worker%0A%09creation%3F&In-Reply-To="
       TITLE="[rabbitmq-discuss] Publish with immediate for dynamic worker	creation?">rtrlists at googlemail.com
       </A><BR>
    <I>Wed Oct  7 12:28:01 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005047.html">[rabbitmq-discuss] the select messages by routing-key
</A></li>
        <LI>Next message: <A HREF="005051.html">[rabbitmq-discuss] Publish with immediate for dynamic worker	creation?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5050">[ date ]</a>
              <a href="thread.html#5050">[ thread ]</a>
              <a href="subject.html#5050">[ subject ]</a>
              <a href="author.html#5050">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm wondering if I'm wandering the right path here. (I'm using 1.6.0 with
erlang client.)

I was intending to use a basic.publish with mandatory and immediate set to
true, and a return handler to allow me to add new workers reading from a
queue.

I create a work queue with a return handler and a reply queue. I also create
one initial worker, subscribing to the work queue with no_ack set to false.

I then publish a work message onto the work queue and the worker picks it
up, does the work and publishes the answer back into the reply queue.

My intention was that my work message publish uses the immediate flag to
generate a basic.return if the message cannot be immediately delivered. I
thought that if my worker is busy it won't get the next message, leading to
the basic.return. But I believe my thinking is wrong. It looks like the
second work message is routed to the initial work consumer immediately, even
if it is still busy.

Have I overlooked something obvious, or would I need to implement a 1
message flow control on the channel that the work consumer is using?

Thanks for any pointers,
Robby
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20091007/0d2af3b3/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20091007/0d2af3b3/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005047.html">[rabbitmq-discuss] the select messages by routing-key
</A></li>
	<LI>Next message: <A HREF="005051.html">[rabbitmq-discuss] Publish with immediate for dynamic worker	creation?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5050">[ date ]</a>
              <a href="thread.html#5050">[ thread ]</a>
              <a href="subject.html#5050">[ subject ]</a>
              <a href="author.html#5050">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
