<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq File descriptor , socket descritor and memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%20File%20descriptor%20%2C%0A%20socket%20descritor%20and%20memory&In-Reply-To=%3CetPan.53b42c7f.515f007c.13d2b%40mercurio.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037053.html">
   <LINK REL="Next"  HREF="037058.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq File descriptor , socket descritor and memory</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%20File%20descriptor%20%2C%0A%20socket%20descritor%20and%20memory&In-Reply-To=%3CetPan.53b42c7f.515f007c.13d2b%40mercurio.local%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq File descriptor , socket descritor and memory">mklishin at gopivotal.com
       </A><BR>
    <I>Wed Jul  2 16:59:29 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="037053.html">[rabbitmq-discuss] Rabbitmq File descriptor , socket descritor and memory
</A></li>
        <LI>Next message: <A HREF="037058.html">[rabbitmq-discuss] Rabbitmq File descriptor , socket descritor and memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37054">[ date ]</a>
              <a href="thread.html#37054">[ thread ]</a>
              <a href="subject.html#37054">[ subject ]</a>
              <a href="author.html#37054">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2 July 2014 at 19:53:52, sagu prf (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sagu.prf1 at gmail.com</A>) wrote:
&gt;<i> &gt; I have increased the file descriptor value for the rabbitmq  
</I>&gt;<i> users to
</I>&gt;<i> 100K and now it showing socket decriptor value to 89908 .
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> So now we can connect maximum 89908 TCP connection (amqp) rights  
</I>&gt;<i> ?
</I>
File descriptors cover both file handles and sockets. RabbitMQ tries
to reuse file handles where possible to conserve them. With the file descriptor
limit of 100K you won't be able to have 100K open connections because RabbitMQ
will use at least some of them for open files (the more queues you have, the greater
the number).&#160;


&gt;<i> 2. Rabbitmq paging ..
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> {vm_memory_high_watermark,0.4}, - 100GB RAM - high water mark  
</I>&gt;<i> 40GB
</I>&gt;<i>  
</I>&gt;<i> {vm_memory_high_watermark_paging_ratio,0.5}] rabbitmq  
</I>&gt;<i> pagingout the
</I>&gt;<i> messages will start at 20GB Physical RAM utilization right ?  
</I>
From the example config [1]:

&#160; &#160;%% Fraction of the high watermark limit at which queues start to
&#160; &#160;%% page message out to disc in order to free up memory.
&#160; &#160;%%
&#160; &#160;%% {vm_memory_high_watermark_paging_ratio, 0.5},

1. <A HREF="http://hg.rabbitmq.com/rabbitmq-server/file/27d5539e2771/docs/rabbitmq.config.example">http://hg.rabbitmq.com/rabbitmq-server/file/27d5539e2771/docs/rabbitmq.config.example</A>
--  
MK  

Staff Software Engineer, Pivotal/RabbitMQ
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037053.html">[rabbitmq-discuss] Rabbitmq File descriptor , socket descritor and memory
</A></li>
	<LI>Next message: <A HREF="037058.html">[rabbitmq-discuss] Rabbitmq File descriptor , socket descritor and memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37054">[ date ]</a>
              <a href="thread.html#37054">[ thread ]</a>
              <a href="subject.html#37054">[ subject ]</a>
              <a href="author.html#37054">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
