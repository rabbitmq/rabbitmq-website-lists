<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Consumer gets blocked leaving messages	unacknowledged
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consumer%20gets%20blocked%20leaving%20messages%0A%09unacknowledged&In-Reply-To=%3CCAC7kndOd8JyohpDjaF2PDcH4edWnPuuNdpmBbtEmfpCHS9ccPg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037120.html">
   <LINK REL="Next"  HREF="037124.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Consumer gets blocked leaving messages	unacknowledged</H1>
    <B>Jagadish Nadimpalli</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consumer%20gets%20blocked%20leaving%20messages%0A%09unacknowledged&In-Reply-To=%3CCAC7kndOd8JyohpDjaF2PDcH4edWnPuuNdpmBbtEmfpCHS9ccPg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Consumer gets blocked leaving messages	unacknowledged">jagadish.nadimpalli at oneconvergence.com
       </A><BR>
    <I>Wed Jul  9 16:02:01 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="037120.html">[rabbitmq-discuss] RabbitMQ configuration issue
</A></li>
        <LI>Next message: <A HREF="037124.html">[rabbitmq-discuss] Consumer gets blocked leaving messages unacknowledged
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37123">[ date ]</a>
              <a href="thread.html#37123">[ thread ]</a>
              <a href="subject.html#37123">[ subject ]</a>
              <a href="author.html#37123">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I am using rabbitmq server and python-kombu client library for RPC
communication. It is observed that the client stops consuming the messages
from the queue and all these messages remain unacknowledged.

We found the following link which is near to our problem. But, we observe
that open fds are not greater that the max limit (1024). Anything else can
lead to this situation?
<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2014-May/036063.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2014-May/036063.html</A>

Following is the rabbitmq version.

[{rabbit,&quot;RabbitMQ&quot;,&quot;3.0.2&quot;},
                       {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.9&quot;},
                       {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.7&quot;},
                       {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.2.1&quot;},
                       {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.18.1&quot;},
                       {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.15.1&quot;}]},

The RPC client stack is as following. Looks like it is struck for some
reason. Did anybody observe this issue?

cat /proc/12733/stack
[&lt;ffffffff811a6609&gt;] poll_schedule_timeout+0x49/0x70
[&lt;ffffffff811a7d34&gt;] do_sys_poll+0x424/0x4d0
[&lt;ffffffff811a7e1c&gt;] do_restart_poll+0x3c/0x70
[&lt;ffffffff8106eabf&gt;] sys_restart_syscall+0x1f/0x30
[&lt;ffffffff816d379d&gt;] system_call_fastpath+0x1a/0x1f
[&lt;ffffffffffffffff&gt;] 0xffffffffffffffff

Attaching strace to client process show the following.
restart_syscall(&lt;... resuming interrupted call ...&gt;

Thanks,
Jagadish
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140709/27cc747a/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140709/27cc747a/attachment.html</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037120.html">[rabbitmq-discuss] RabbitMQ configuration issue
</A></li>
	<LI>Next message: <A HREF="037124.html">[rabbitmq-discuss] Consumer gets blocked leaving messages unacknowledged
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37123">[ date ]</a>
              <a href="thread.html#37123">[ thread ]</a>
              <a href="subject.html#37123">[ subject ]</a>
              <a href="author.html#37123">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
