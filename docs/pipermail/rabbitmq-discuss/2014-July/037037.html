<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] custom exchange checking auth user
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20custom%20exchange%20checking%20auth%20user&In-Reply-To=%3C53B2BD6D.2050803%40alertme.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037042.html">
   <LINK REL="Next"  HREF="037041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] custom exchange checking auth user</H1>
    <B>Dmitry Andrianov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20custom%20exchange%20checking%20auth%20user&In-Reply-To=%3C53B2BD6D.2050803%40alertme.com%3E"
       TITLE="[rabbitmq-discuss] custom exchange checking auth user">dmitry.andrianov at alertme.com
       </A><BR>
    <I>Tue Jul  1 14:53:49 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="037042.html">[rabbitmq-discuss] durability =?utf-8?Q?=3D_?=true &amp; auto delete =?utf-8?Q?=3D_?=true
</A></li>
        <LI>Next message: <A HREF="037041.html">[rabbitmq-discuss] custom exchange checking auth user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37037">[ date ]</a>
              <a href="thread.html#37037">[ thread ]</a>
              <a href="subject.html#37037">[ subject ]</a>
              <a href="author.html#37037">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Understood.

One more question: some time ago I was told that either custom exchange 
or decorator will both serve for my purpose.
However while with exchange if I return empty list from route callback, 
no routing happens, the same does not seem to work in decorator.
Reading Erlang in rabbit_exchange.erl is very hard for me so I can be 
wrong but it looks like whatever decorator returns from route is only 
appended to the list of destinations and decorator cannot override the 
ones selected by exchange.

Is it correct? What is the correct way to deny processing message in the 
decorator?

And is there a recommended best practice for what should be used for 
validation purposes - custom exchange or exchange decorator?

Many thanks.
Dmitry


On 26/06/14 18:13, Matthias Radestock wrote:
&gt;<i> On 26/06/14 18:10, Dmitry Andrianov wrote:
</I>&gt;&gt;<i> While we are there given that we have our custom exchange - how can we
</I>&gt;&gt;<i> &quot;enrich&quot; a message with some data like client's IP?
</I>&gt;<i>
</I>&gt;<i> you can't. That *would* require changes to APIs. And breaking some 
</I>&gt;<i> significant assumptions on the way.
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>
This email is for the use of the intended recipient(s) only.
If you have received this email in error, please notify the sender immediately and then delete it.
If you are not the intended recipient, you must not use, disclose or distribute this email without the
author's prior permission. AlertMe.com Ltd. is not responsible for any personal views expressed
in this message or any attachments that are those of the individual sender.

AlertMe.com Ltd, 30 Station Road, Cambridge, CB1 2RE, UK.
Registered in England, Company number 578 2908, VAT registration number GB 895 9914 42.


</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037042.html">[rabbitmq-discuss] durability =?utf-8?Q?=3D_?=true &amp; auto delete =?utf-8?Q?=3D_?=true
</A></li>
	<LI>Next message: <A HREF="037041.html">[rabbitmq-discuss] custom exchange checking auth user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37037">[ date ]</a>
              <a href="thread.html#37037">[ thread ]</a>
              <a href="subject.html#37037">[ subject ]</a>
              <a href="author.html#37037">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
