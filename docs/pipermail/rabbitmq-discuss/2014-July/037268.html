<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Confirmation IDs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Confirmation%20IDs&In-Reply-To=%3C53D54C2E.1000802%40fsn.hu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037266.html">
   <LINK REL="Next"  HREF="037269.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Confirmation IDs</H1>
    <B>Nagy, Attila</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Confirmation%20IDs&In-Reply-To=%3C53D54C2E.1000802%40fsn.hu%3E"
       TITLE="[rabbitmq-discuss] Confirmation IDs">bra at fsn.hu
       </A><BR>
    <I>Sun Jul 27 19:59:58 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="037266.html">[rabbitmq-discuss] Confirmation IDs
</A></li>
        <LI>Next message: <A HREF="037269.html">[rabbitmq-discuss] Confirmation IDs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37268">[ date ]</a>
              <a href="thread.html#37268">[ thread ]</a>
              <a href="subject.html#37268">[ subject ]</a>
              <a href="author.html#37268">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/27/14 16:25, Michael Klishin wrote:
&gt;<i> On 27 July 2014 at 15:54:44, Nagy, Attila (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">bra at fsn.hu</A>) wrote:
</I>&gt;&gt;&gt;<i> My case: I process a file, containing multiple records. I do
</I>&gt;&gt;<i> this in a
</I>&gt;&gt;<i> FIFO manner: reading the file from its head towards its tail,
</I>&gt;&gt;<i> sending
</I>&gt;&gt;<i> each record with AMQP and waiting for confirms.
</I>&gt;&gt;<i> The problem here is that I have to keep a local delivery tag to file
</I>&gt;&gt;<i> pointer table, so I know which delivery tag means which file pointer.
</I>&gt;<i> Yes, you need to correlate messages with delivery tags.
</I>Yeah, that's my problem. BTW, are confirmations guaranteed to be in the 
order the original messages have been submitted?
I can see no information about that, except the existence of multiple 
field, which I guess would be somewhat meaningless if the confirmations 
wouldn't be in original order.
&gt;<i>
</I>&gt;&gt;<i> I think it would be much easier and flexible if the confirmation
</I>&gt;&gt;<i> system
</I>&gt;&gt;<i> would allow data to be &quot;inherited&quot; from the original message,
</I>&gt;&gt;<i> like its
</I>&gt;&gt;<i> properties or headers.
</I>&gt;<i> So, calculated from the message? That won't work very well if you publish
</I>&gt;<i> exactly the same message N times in a row.
</I>Nope, from the record's identifier. I have an incoming task queue (for 
example a file which is appended with records, or a database which has 
rows), from which I can have a unique identifier which is always 
available and can directly point to the record.
So counting (because publish doesn't give it back) the sent messages 
(and resetting the counter on reconnects) and maintaining 
counter-&gt;original message pointers are unnecessary indirections to 
achieve this functionality.

BTW, RabbitMQ's STOMP plugin does this, you can set a receipt string and 
the message will be acknowledged back with that string, whatever it is.
But STOMP is not really an option if you want to do serious things in 
RabbitMQ. :)

&gt;<i>
</I>&gt;<i> Either way, it is probably too late to change how publisher confirms work
</I>Isn't it possible to add additional info in the ACK frame without 
breaking current clients?
Or making it only appear when publish has a given pattern? (like with STOMP)

Thanks,
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037266.html">[rabbitmq-discuss] Confirmation IDs
</A></li>
	<LI>Next message: <A HREF="037269.html">[rabbitmq-discuss] Confirmation IDs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37268">[ date ]</a>
              <a href="thread.html#37268">[ thread ]</a>
              <a href="subject.html#37268">[ subject ]</a>
              <a href="author.html#37268">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
