<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] MQTT plugin, QoS 1, Android, not consuming on reconnect
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20MQTT%20plugin%2C%20QoS%201%2C%20Android%2C%0A%20not%20consuming%20on%20reconnect&In-Reply-To=%3CetPan.53d2bcbf.74b0dc51.1552e%40mercurio.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037257.html">
   <LINK REL="Next"  HREF="037260.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] MQTT plugin, QoS 1, Android, not consuming on reconnect</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20MQTT%20plugin%2C%20QoS%201%2C%20Android%2C%0A%20not%20consuming%20on%20reconnect&In-Reply-To=%3CetPan.53d2bcbf.74b0dc51.1552e%40mercurio.local%3E"
       TITLE="[rabbitmq-discuss] MQTT plugin, QoS 1, Android, not consuming on reconnect">mklishin at gopivotal.com
       </A><BR>
    <I>Fri Jul 25 21:22:57 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="037257.html">[rabbitmq-discuss] MQTT plugin, QoS 1, Android, not consuming on reconnect
</A></li>
        <LI>Next message: <A HREF="037260.html">[rabbitmq-discuss] MQTT plugin, QoS 1, Android,	not consuming on reconnect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37258">[ date ]</a>
              <a href="thread.html#37258">[ thread ]</a>
              <a href="subject.html#37258">[ subject ]</a>
              <a href="author.html#37258">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>+rabbitmq-discuss

On 26 July 2014 at 00:18:32, Bryan Cliffe (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">bcliffe at gmail.com</A>) wrote:
&gt;<i> &gt; I'm disconnecting from wifi and reconnecting through cellular 
</I>&gt;<i> to test the robustness of the connection when the I.P changes. 
</I>&gt;<i> I wanted to see how the paho java client would handle message delivery 
</I>&gt;<i> on QoS 1 to Android. I'm then filling the queue during the handover 
</I>&gt;<i> phase and I can't consume on reconnect. I'm using two different 
</I>&gt;<i> values for the heartbeat which is 240000ms and 30000ms but I'm 
</I>&gt;<i> having the same problem with both. It would be interesting if 
</I>&gt;<i> it's not detecting the change over from wifi to cellular.
</I>
I'm not familiar with how exactly switching from WiFi to cellular data affects
TCP connections on Android but in general, this is exactly the kind of issue
heartbeats in MQTT are for.

Try using a value of 5-10 seconds. I'm all for improving RabbitMQ MQTT plugin
for this case but if Rabbit doesn't get a notification from the OS that the peer
disconnected, a low heartbeat interval is the only possible solution.
-- 
MK 

Staff Software Engineer, Pivotal/RabbitMQ
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037257.html">[rabbitmq-discuss] MQTT plugin, QoS 1, Android, not consuming on reconnect
</A></li>
	<LI>Next message: <A HREF="037260.html">[rabbitmq-discuss] MQTT plugin, QoS 1, Android,	not consuming on reconnect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37258">[ date ]</a>
              <a href="thread.html#37258">[ thread ]</a>
              <a href="subject.html#37258">[ subject ]</a>
              <a href="author.html#37258">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
