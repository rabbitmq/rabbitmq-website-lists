<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] MQTT plugin, QoS 1, Android,	not consuming on reconnect
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20MQTT%20plugin%2C%20QoS%201%2C%20Android%2C%0A%09not%20consuming%20on%20reconnect&In-Reply-To=%3CCAD34VhPCTcCOzOzNr1KtpG3HBkGUXKQACJ9ye_7DETRjF0A--w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037265.html">
   <LINK REL="Next"  HREF="037270.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] MQTT plugin, QoS 1, Android,	not consuming on reconnect</H1>
    <B>brydev</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20MQTT%20plugin%2C%20QoS%201%2C%20Android%2C%0A%09not%20consuming%20on%20reconnect&In-Reply-To=%3CCAD34VhPCTcCOzOzNr1KtpG3HBkGUXKQACJ9ye_7DETRjF0A--w%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] MQTT plugin, QoS 1, Android,	not consuming on reconnect">bcliffe at gmail.com
       </A><BR>
    <I>Sun Jul 27 15:35:03 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="037265.html">[rabbitmq-discuss] MQTT plugin, QoS 1, Android, not consuming on reconnect
</A></li>
        <LI>Next message: <A HREF="037270.html">[rabbitmq-discuss] MQTT plugin, QoS 1, Android, not consuming on reconnect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37267">[ date ]</a>
              <a href="thread.html#37267">[ thread ]</a>
              <a href="subject.html#37267">[ subject ]</a>
              <a href="author.html#37267">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The service on the application is unable to reconnect again after the
duplicate id is detected. It reconnects sometimes but if it does it doesn't
consume the missed messages on the queue. The log doesn't give me anything
else besides duplicate client id disconnected. And my device is throwing
the following error on loop and is unable to reconnect.

private boolean isConnected() {
if(mStarted &amp;&amp; mClient != null &amp;&amp; !mClient.isConnected()) {
Log.i(DEBUG_TAG,&quot;Mismatch between what we think is connected and what is
connected&quot;);
}

So I can't tell if the old, new or both connections are disconnected from
the broker.


On Sun, Jul 27, 2014 at 3:25 PM, Michael Klishin-2 [via RabbitMQ] &lt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ml-node+s1065348n36903h56 at n5.nabble.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 27 July 2014 at 17:07:14, brydev ([hidden email]
</I>&gt;<i> &lt;<A HREF="http://user/SendEmail.jtp?type=node&amp;node=36903&amp;i=0">http://user/SendEmail.jtp?type=node&amp;node=36903&amp;i=0</A>&gt;) wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; I have tested the lower heartbeat interval, having it as low
</I>&gt;<i> &gt; as 1 second but
</I>&gt;<i> &gt; the RabbitMQ broker is still disconnecting the new connection
</I>&gt;<i> &gt; after an
</I>&gt;<i> &gt; attempt in reconnect. Having a heartbeat interval this low also
</I>&gt;<i> &gt; affects the
</I>&gt;<i> &gt; power usage on the device. I was wondering maybe a possible solution
</I>&gt;<i> &gt; could
</I>&gt;<i> &gt; be a policy whereby if there is a duplicate connection attempt
</I>&gt;<i> &gt; on the broker
</I>&gt;<i> &gt; to then disconnect the oldest connection.
</I>&gt;<i>
</I>&gt;<i> MQTT 3.1 requires brokers to disconnect an old connection with the same
</I>&gt;<i> client id but (as I understand it) only after successful authentication.
</I>&gt;<i>
</I>&gt;<i> Are you saying that it's not what you're observing?
</I>&gt;<i> --
</I>&gt;<i> MK
</I>&gt;<i>
</I>&gt;<i> Staff Software Engineer, Pivotal/RabbitMQ
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list has moved to
</I>&gt;<i> <A HREF="https://groups.google.com/forum/#!forum/rabbitmq-users,">https://groups.google.com/forum/#!forum/rabbitmq-users,</A>
</I>&gt;<i> please subscribe to the new list!
</I>&gt;<i>
</I>&gt;<i> [hidden email] &lt;<A HREF="http://user/SendEmail.jtp?type=node&amp;node=36903&amp;i=1">http://user/SendEmail.jtp?type=node&amp;node=36903&amp;i=1</A>&gt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>  If you reply to this email, your message will be added to the discussion
</I>&gt;<i> below:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://rabbitmq.1065348.n5.nabble.com/MQTT-plugin-QoS-1-Android-not-consuming-on-reconnect-tp36888p36903.html">http://rabbitmq.1065348.n5.nabble.com/MQTT-plugin-QoS-1-Android-not-consuming-on-reconnect-tp36888p36903.html</A>
</I>&gt;<i>  To unsubscribe from MQTT plugin, QoS 1, Android, not consuming on
</I>&gt;<i> reconnect, click here
</I>&gt;<i> &lt;<A HREF="http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=36888&amp;code=YmNsaWZmZUBnbWFpbC5jb218MzY4ODh8MTQ1NzU4Njg1Mg==">http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=36888&amp;code=YmNsaWZmZUBnbWFpbC5jb218MzY4ODh8MTQ1NzU4Njg1Mg==</A>&gt;
</I>&gt;<i> .
</I>&gt;<i> NAML
</I>&gt;<i> &lt;<A HREF="http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml">http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml</A>&gt;
</I>&gt;<i>
</I>



--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/MQTT-plugin-QoS-1-Android-not-consuming-on-reconnect-tp36888p36905.html">http://rabbitmq.1065348.n5.nabble.com/MQTT-plugin-QoS-1-Android-not-consuming-on-reconnect-tp36888p36905.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140727/1b4424a1/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140727/1b4424a1/attachment.html</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037265.html">[rabbitmq-discuss] MQTT plugin, QoS 1, Android, not consuming on reconnect
</A></li>
	<LI>Next message: <A HREF="037270.html">[rabbitmq-discuss] MQTT plugin, QoS 1, Android, not consuming on reconnect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37267">[ date ]</a>
              <a href="thread.html#37267">[ thread ]</a>
              <a href="subject.html#37267">[ subject ]</a>
              <a href="author.html#37267">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
