<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Connection is always in &quot;flow&quot; State.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connection%20is%20always%20in%20%22flow%22%20State.&In-Reply-To=%3CCAD6m6fFY6AucRkDyMoDpNRJ0zBGmAAkpOdQdyc%3DmWq0fOqQ2gA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037102.html">
   <LINK REL="Next"  HREF="037140.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Connection is always in &quot;flow&quot; State.</H1>
    <B>Jason McIntosh</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connection%20is%20always%20in%20%22flow%22%20State.&In-Reply-To=%3CCAD6m6fFY6AucRkDyMoDpNRJ0zBGmAAkpOdQdyc%3DmWq0fOqQ2gA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Connection is always in &quot;flow&quot; State.">mcintoshj at gmail.com
       </A><BR>
    <I>Thu Jul 10 15:31:09 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="037102.html">[rabbitmq-discuss] Connection is always in &quot;flow&quot; State.
</A></li>
        <LI>Next message: <A HREF="037140.html">[rabbitmq-discuss] Connection is always in &quot;flow&quot; State.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37135">[ date ]</a>
              <a href="thread.html#37135">[ thread ]</a>
              <a href="subject.html#37135">[ subject ]</a>
              <a href="author.html#37135">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just a quick confirmation on this.  The documentation states that flow
control is:

   - A per-connection mechanism that prevents messages being published
   faster than they can be routed to queues.
   - A global mechanism that prevents any messages from being published
   when the memory usage &lt;<A HREF="http://www.rabbitmq.com/memory-use.html">http://www.rabbitmq.com/memory-use.html</A>&gt; exceeds
   a configured threshold or free disk space drops below a configured
   threshold.

In my testing, I've actually seen this as well - where messages can backlog
(so far seems to the point of available resources), while a consumer is
chugging along at half the publish speed.  SO is flow control also
triggered by consumer processing?  At what point does consumer handling
trigger flow control if so?  Just looking for a little bit of clarification
on this - I'm guessing there's some internal logic someplace I'm missing on
this,
Thanks!
Jason


On Tue, Jul 8, 2014 at 3:33 AM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt;
wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 8 July 2014 at 07:49:26, Lost (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">w_pg at qq.com</A>) wrote:
</I>&gt;<i> &gt; &gt; I have a client to publish message to rabbitmq(1 connection
</I>&gt;<i> &gt; and 1 channel, in same machine with rabbitmq), no consumer.
</I>&gt;<i> &gt; Message rates is 2000/s ~ 3000/s
</I>&gt;<i> &gt; Traffic is 300Kb/s ~ 750kB/s
</I>&gt;<i> &gt; The channel state is &quot;running&quot;, but the connection state is always
</I>&gt;<i> &gt; &quot;flow&quot;.
</I>&gt;<i> &gt; I found erl.exe cpu is only 5% ~ 10%, but why connection is in &quot;flow&quot;
</I>&gt;<i> &gt; state?
</I>&gt;<i>
</I>&gt;<i> Flow control does not depend on CPU usage but rather whether consumers
</I>&gt;<i> can keep up with producers. Try adding a consumer.
</I>&gt;<i> --
</I>&gt;<i> MK
</I>&gt;<i>
</I>&gt;<i> Staff Software Engineer, Pivotal/RabbitMQ
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list has moved to
</I>&gt;<i> <A HREF="https://groups.google.com/forum/#!forum/rabbitmq-users,">https://groups.google.com/forum/#!forum/rabbitmq-users,</A>
</I>&gt;<i> please subscribe to the new list!
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>


-- 
Jason McIntosh
<A HREF="https://github.com/jasonmcintosh/">https://github.com/jasonmcintosh/</A>
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140710/cd95c915/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140710/cd95c915/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037102.html">[rabbitmq-discuss] Connection is always in &quot;flow&quot; State.
</A></li>
	<LI>Next message: <A HREF="037140.html">[rabbitmq-discuss] Connection is always in &quot;flow&quot; State.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37135">[ date ]</a>
              <a href="thread.html#37135">[ thread ]</a>
              <a href="subject.html#37135">[ subject ]</a>
              <a href="author.html#37135">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
