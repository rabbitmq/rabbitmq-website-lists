<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Create an encrypted SSL connection without having to verify certificate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Create%20an%20encrypted%20SSL%20connection%20without%0A%20having%20to%20verify%20certificate&In-Reply-To=%3CetPan.53d9d74e.238e1f29.127c1%40mercurio.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037292.html">
   <LINK REL="Next"  HREF="037294.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Create an encrypted SSL connection without having to verify certificate</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Create%20an%20encrypted%20SSL%20connection%20without%0A%20having%20to%20verify%20certificate&In-Reply-To=%3CetPan.53d9d74e.238e1f29.127c1%40mercurio.local%3E"
       TITLE="[rabbitmq-discuss] Create an encrypted SSL connection without having to verify certificate">mklishin at pivotal.io
       </A><BR>
    <I>Thu Jul 31 06:42:12 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="037292.html">[rabbitmq-discuss] Create an encrypted SSL connection without	having to verify certificate
</A></li>
        <LI>Next message: <A HREF="037294.html">[rabbitmq-discuss] Create an encrypted SSL connection without	having to verify certificate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37293">[ date ]</a>
              <a href="thread.html#37293">[ thread ]</a>
              <a href="subject.html#37293">[ subject ]</a>
              <a href="author.html#37293">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 31 July 2014 at 09:33:17, Ankur5 C (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ankur5.c at tcs.com</A>) wrote:
&gt;<i> &gt; The example given in <A HREF="https://www.rabbitmq.com/ssl.htmlfor">https://www.rabbitmq.com/ssl.htmlfor</A>  
</I>&gt;<i> connecting a TLS port 5671 is not working.
</I>&gt;<i>  
</I>&gt;<i> Exception:
</I>&gt;<i> accepting AMQP connection &lt;0.231.0&gt; (192.168.161.171:65208  
</I>&gt;<i> -&gt; 192.168.161.197:5671)
</I>&gt;<i> =ERROR REPORT==== 30-Jul-2014::17:53:07  
</I>&gt;<i> error on AMQP connection &lt;0.231.0&gt;:
</I>&gt;<i> {ssl_upgrade_error,timeout}
</I>&gt;<i>  
</I>&gt;<i> In one of the solution you said &quot;somehow end up connecting with  
</I>&gt;<i> a non-TLS client on the TLS port. &quot;
</I>
It is not a solution, it is the problem. A client connects to RabbitMQ on
port 5671, RabbitMQ expects the client to perform a TLS upgrade (this is
the default TLS connections port) but the client is not instructed to do it,
so it never does. After waiting for some time, RabbitMQ declares that
TLS upgrade has timed out and drops the TCP connection.

&gt;<i> So the example in <A HREF="https://www.rabbitmq.com/ssl.htmlfor">https://www.rabbitmq.com/ssl.htmlfor</A> &quot;Connecting  
</I>&gt;<i> without validating certificates&quot;, what is that? Is it a non TLS  
</I>&gt;<i> client? How to make it TLS?
</I>
It demonstrates how to make the Java client use TLS connections, yes.

&gt;<i> I simply need to execute the java code right ? Or something more  
</I>&gt;<i> I have to do?
</I>&gt;<i>  
</I>&gt;<i> Please suggest how to resolve this.
</I>
The &quot;Connecting without validating certificates&quot;
example on&#160;<A HREF="https://www.rabbitmq.com/ssl.html">https://www.rabbitmq.com/ssl.html</A> demonstrates the bare
minimum you have to do but because you instructed RabbitMQ to perform
peer verification, you need to use the second example,
&quot;Presenting and validating certificates&quot;.

The guide at&#160;<A HREF="https://www.rabbitmq.com/ssl.html">https://www.rabbitmq.com/ssl.html</A> goes into a lot of detail
on every step you need to take to connect with TLS encryption from Java.

You can generate a bunch of certificates (including PCSK12 certificates used
by JDK's keytool) using tls-gen:
<A HREF="https://github.com/michaelklishin/tls-gen/">https://github.com/michaelklishin/tls-gen/</A>

Unless a new thread is started (I've asked you to do so twice )
and you post your actual code, I'll refrain from replying to this thread.
--  
MK  

Staff Software Engineer, Pivotal/RabbitMQ
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037292.html">[rabbitmq-discuss] Create an encrypted SSL connection without	having to verify certificate
</A></li>
	<LI>Next message: <A HREF="037294.html">[rabbitmq-discuss] Create an encrypted SSL connection without	having to verify certificate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37293">[ date ]</a>
              <a href="thread.html#37293">[ thread ]</a>
              <a href="subject.html#37293">[ subject ]</a>
              <a href="author.html#37293">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
