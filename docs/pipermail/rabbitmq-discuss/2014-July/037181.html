<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue data recovery after master failure
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20data%20recovery%20after%20master%20failure&In-Reply-To=%3C1405452870998-36808.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037180.html">
   <LINK REL="Next"  HREF="037185.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue data recovery after master failure</H1>
    <B>Andrei D.</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20data%20recovery%20after%20master%20failure&In-Reply-To=%3C1405452870998-36808.post%40n5.nabble.com%3E"
       TITLE="[rabbitmq-discuss] Queue data recovery after master failure">theonlyandrei at gmail.com
       </A><BR>
    <I>Tue Jul 15 20:34:31 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="037180.html">[rabbitmq-discuss] Node.js -&gt; RabbitMQ -&gt; Couchbase issue
</A></li>
        <LI>Next message: <A HREF="037185.html">[rabbitmq-discuss] Queue data recovery after master failure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37181">[ date ]</a>
              <a href="thread.html#37181">[ thread ]</a>
              <a href="subject.html#37181">[ subject ]</a>
              <a href="author.html#37181">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Great, I think we can make that assumption (slaves down) in the scenario I
described.
I'm thinking the recovery procedure would look like this:
1. power up all nodes without starting rabbit; say node X doesn't come up.
2. start rabbit on all the nodes that were not a slave for (any queue on) X
3. run the new and improved :) forget_cluster_node X. -&gt; this should promote
some (offline) slave S as master
4. start rabbit on S (and the rest of the nodes) which should now be master
and have all the messages it had when the cluster went down.
Assuming the above should work (could you kindly confirm?), what do you
think the ETA would be for the next official release that would include the
required forget_cluster_node fix? (the one that's already in the nightly
build)
Thanks!
Andrei



--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/Queue-data-recovery-after-master-failure-tp36298p36808.html">http://rabbitmq.1065348.n5.nabble.com/Queue-data-recovery-after-master-failure-tp36298p36808.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
</PRE>
















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037180.html">[rabbitmq-discuss] Node.js -&gt; RabbitMQ -&gt; Couchbase issue
</A></li>
	<LI>Next message: <A HREF="037185.html">[rabbitmq-discuss] Queue data recovery after master failure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37181">[ date ]</a>
              <a href="thread.html#37181">[ thread ]</a>
              <a href="subject.html#37181">[ subject ]</a>
              <a href="author.html#37181">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
