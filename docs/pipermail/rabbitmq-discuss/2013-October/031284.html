<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [Error] PRECONDITION_FAILED
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BError%5D%20PRECONDITION_FAILED&In-Reply-To=%3C5267E6D4.9060306%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031282.html">
   <LINK REL="Next"  HREF="031285.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [Error] PRECONDITION_FAILED</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BError%5D%20PRECONDITION_FAILED&In-Reply-To=%3C5267E6D4.9060306%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] [Error] PRECONDITION_FAILED">simon at rabbitmq.com
       </A><BR>
    <I>Wed Oct 23 16:10:12 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031282.html">[rabbitmq-discuss] [Error] PRECONDITION_FAILED
</A></li>
        <LI>Next message: <A HREF="031285.html">[rabbitmq-discuss] [Error] PRECONDITION_FAILED
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31284">[ date ]</a>
              <a href="thread.html#31284">[ thread ]</a>
              <a href="subject.html#31284">[ subject ]</a>
              <a href="author.html#31284">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I don't know whether the php client eats the error description or you 
just didn't post it, but the PRECONDITION_FAILED is telling you that you 
can't declare an exchange with the characteristics you asked for, since 
it already exists but with different characteristics. i.e. it might not 
be durable, or be of a different type, or might not be auto-delete.

My money's on auto-delete for what it's worth.

rabbitmqctl list_exchanges or the management plugin will let you see 
what form the exchange currently takes.

Cheers, Simon

On 23/10/13 13:18, Axansh Sheth wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I wanted to upgrade AMQP library [php] 0.9 to latest.
</I>&gt;<i> I have updated that and change my Publisher and consumer code.
</I>&gt;<i>
</I>&gt;<i> In publisher code for 0.9 :
</I>&gt;<i>
</I>&gt;<i> $this-&gt;ex = new AMQPExchange($conn);
</I>&gt;<i> $this-&gt;ex-&gt;declare($exchange, $type);
</I>&gt;<i>
</I>&gt;<i> I changed it :
</I>&gt;<i>
</I>&gt;<i> $this-&gt;ex = new AMQPExchange($ch);
</I>&gt;<i> $this-&gt;ex-&gt;setName($exchange);
</I>&gt;<i> $this-&gt;ex-&gt;setType($type);
</I>&gt;<i> $this-&gt;ex-&gt;setFlags(AMQP_DURABLE | AMQP_AUTODELETE);
</I>&gt;<i> $this-&gt;ex-&gt;declare();
</I>&gt;<i>
</I>&gt;<i> But i got this error : ncaught exception 'AMQPExchangeException' with
</I>&gt;<i> message 'Server channel error: 406, message: PRECONDITION_FAILED
</I>&gt;<i>
</I>&gt;<i> If i commented $this-&gt;ex-&gt;declare();
</I>&gt;<i> then works fine,
</I>&gt;<i>
</I>&gt;<i> I found this is redeclare problem.
</I>&gt;<i>
</I>&gt;<i> Shall i comment : $this-&gt;ex-&gt;declare(); or
</I>&gt;<i> shall i change some thing?
</I>&gt;<i>
</I>&gt;<i> I do not loose my earlier functionality.
</I>&gt;<i>
</I>&gt;<i> Please guide me for same.
</I>&gt;<i>
</I>&gt;<i> Thanks a lot.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>













































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031282.html">[rabbitmq-discuss] [Error] PRECONDITION_FAILED
</A></li>
	<LI>Next message: <A HREF="031285.html">[rabbitmq-discuss] [Error] PRECONDITION_FAILED
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31284">[ date ]</a>
              <a href="thread.html#31284">[ thread ]</a>
              <a href="subject.html#31284">[ subject ]</a>
              <a href="author.html#31284">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
