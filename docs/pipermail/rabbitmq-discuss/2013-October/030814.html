<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] CRL support
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20CRL%20support&In-Reply-To=%3C59c682a0-9a99-4105-89a2-e2ab7c459e06%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030813.html">
   <LINK REL="Next"  HREF="030828.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] CRL support</H1>
    <B>Balachandher Srinivasan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20CRL%20support&In-Reply-To=%3C59c682a0-9a99-4105-89a2-e2ab7c459e06%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] CRL support">sbchand at gmail.com
       </A><BR>
    <I>Tue Oct  8 01:23:09 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030813.html">[rabbitmq-discuss] CRL support
</A></li>
        <LI>Next message: <A HREF="030828.html">[rabbitmq-discuss] CRL support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30814">[ date ]</a>
              <a href="thread.html#30814">[ thread ]</a>
              <a href="subject.html#30814">[ subject ]</a>
              <a href="author.html#30814">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

Please find below my further observations,

1. Erlang adopted a more elegant way to express higher order functions 
(funs), based on <A HREF="http://www.erlang.org/eeps/eep-0023.html.">http://www.erlang.org/eeps/eep-0023.html.</A>  So, {Module, 
Function} would be typically represented as Module:Function/Arity

2. Based on the EEP mentioned above and the SSL documentation, I was able 
to write a test program and validate CRL successfully by referring a 
function either internally within the same module or from an external 
module. For internal module's function, I used the form, {verify_fun, {fun 
validate/3, []}}; for external module's function, I used the form 
{verify_fun, {fun cert_util:validate/3, []}}.

3. After successfully writing a test program, I tried to apply the same in 
rabbitmq; however, rabbitmq was unable to start and I witnessed the 
following in the logs,

*/var/log/rabbitmq/startup_log*
{&quot;could not start kernel pid&quot;,application_controller,&quot;error in config file 
\&quot;/etc/rabbitmq/rabbitmq.config\&quot; (1): bad term&quot;}

*/var/log/rabbitmq/startup_err*
Crash dump was written to: erl_crash.dump
could not start kernel pid (application_controller) (error in config file 
&quot;/etc/rabbitmq/rabbitmq.config&quot; (1): bad term)


4. It was clear from the above that rabbitmq was unable to take the EEP-23 
form for verify_fun; so I tried reverting back the funs to old type of the 
form {Module, Function}.   When I tried restarting, while it gave no errors 
and started successfully, my CRL validation function was never called.

5. RabbitMQ site suggests that in order to use SSL reliably use R14B(erts 
4.0.1) as the minimum version.  I tried using R16B (erts-5.10.1) on 64-bit 
Cent OS, which internally uses ssl-5.2.1.  Also, I tried 
R16B01(erts-5.10.2) on 64-bit Windows 7, which internally uses ssl-5.3.1. 
 Between these versions, there are lot of bugs fixed and enhancements 
applied in SSL application <A HREF="http://www.erlang.org/doc/apps/ssl/notes.html.">http://www.erlang.org/doc/apps/ssl/notes.html.</A>  

To summarize, though RabbitMQ states R14B as the minimum version for 
reliable SSL, I wonder whether it is compatible with the latest SSL 
available in the recent Erlang distributions.

Regards
Bala


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131007/ac747bea/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131007/ac747bea/attachment.htm</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030813.html">[rabbitmq-discuss] CRL support
</A></li>
	<LI>Next message: <A HREF="030828.html">[rabbitmq-discuss] CRL support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30814">[ date ]</a>
              <a href="thread.html#30814">[ thread ]</a>
              <a href="subject.html#30814">[ subject ]</a>
              <a href="author.html#30814">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
