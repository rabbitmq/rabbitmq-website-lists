<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ clustering issue - exception while	stopping the running node
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20clustering%20issue%20-%20exception%20while%0A%09stopping%20the%20running%20node&In-Reply-To=%3CCAH75Yb4G-efmvO3s1aH5C4NtnaciNZQF7M89nwbHMbqaTH%2BhGQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030772.html">
   <LINK REL="Next"  HREF="030776.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ clustering issue - exception while	stopping the running node</H1>
    <B>Rajasekhar P</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20clustering%20issue%20-%20exception%20while%0A%09stopping%20the%20running%20node&In-Reply-To=%3CCAH75Yb4G-efmvO3s1aH5C4NtnaciNZQF7M89nwbHMbqaTH%2BhGQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ clustering issue - exception while	stopping the running node">sekhar434145 at gmail.com
       </A><BR>
    <I>Mon Oct  7 12:01:55 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030772.html">[rabbitmq-discuss] ETS memory usage
</A></li>
        <LI>Next message: <A HREF="030776.html">[rabbitmq-discuss] RabbitMQ clustering issue - exception while stopping the running node
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30770">[ date ]</a>
              <a href="thread.html#30770">[ thread ]</a>
              <a href="subject.html#30770">[ subject ]</a>
              <a href="author.html#30770">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have created clustered environment with two nodes and started producer
and consumer at the same time. After sometime stopped one node but consumer
is not running on other rabbitmq node. After stopping the running node it
is giving below warning?


WARN  [.listener.SimpleMessageListenerContainer]: Consumer raised
exception, processing can restart if the connection factory supports it
com.rabbitmq.client.ShutdownSignalException: connection error; reason:
{#method&lt;connection.close&gt;(reply-code=541, reply-text=INTERNAL_ERROR,
class-id=0, method-id=0), null, &quot;&quot;}
at
com.rabbitmq.client.impl.AMQConnection.startShutdown(AMQConnection.java:678)
at com.rabbitmq.client.impl.AMQConnection.shutdown(AMQConnection.java:668)
at
com.rabbitmq.client.impl.AMQConnection.handleConnectionClose(AMQConnection.java:624)
at
com.rabbitmq.client.impl.AMQConnection.processControlCommand(AMQConnection.java:598)
at
com.rabbitmq.client.impl.AMQConnection$1.processAsync(AMQConnection.java:96)
at
com.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:144)
at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:91)
at
com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:523)
INFO  [.listener.SimpleMessageListenerContainer]: Restarting Consumer:
tag=[amq.ctag-5CJ3YJYfMZDnJOnXsds6_Q], channel=Cached Rabbit Channel:
AMQChannel(<A HREF="amqp://guest@192.168.97.70:5672/,1">amqp://guest@192.168.97.70:5672/,1</A>), acknowledgeMode=AUTO local
queue size=0

and the configuration is -
CachingConnectionFactory connectionFactory = new CachingConnectionFactory();
connectionFactory.setAddresses(&quot;node1:5672,node2:5672&quot;);

Along with above query, I have below queries in my mind-
1&gt; How to differenciate master and slave in rabbitmq cluster?
2&gt; Is there any load balancer do we need ti maintain ?
3&gt; How to dispatch requests to to particular node like below,
      1-100 queues =&gt; Node1
     101-200 queues =&gt; Node2
     201-300 queues =&gt; Node3, etc


Thanks in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131007/8e69cbee/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131007/8e69cbee/attachment.htm</A>&gt;
</PRE>


















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030772.html">[rabbitmq-discuss] ETS memory usage
</A></li>
	<LI>Next message: <A HREF="030776.html">[rabbitmq-discuss] RabbitMQ clustering issue - exception while stopping the running node
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30770">[ date ]</a>
              <a href="thread.html#30770">[ thread ]</a>
              <a href="subject.html#30770">[ subject ]</a>
              <a href="author.html#30770">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
