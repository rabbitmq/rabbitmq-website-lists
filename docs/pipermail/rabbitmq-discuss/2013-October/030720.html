<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Determining Cause of Flow-Control Invocation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Determining%20Cause%20of%20Flow-Control%20Invocation&In-Reply-To=%3CFB102DF9-A1AD-4828-9381-C4569D048893%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030719.html">
   <LINK REL="Next"  HREF="030721.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Determining Cause of Flow-Control Invocation</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Determining%20Cause%20of%20Flow-Control%20Invocation&In-Reply-To=%3CFB102DF9-A1AD-4828-9381-C4569D048893%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Determining Cause of Flow-Control Invocation">michael at rabbitmq.com
       </A><BR>
    <I>Fri Oct  4 18:44:44 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030719.html">[rabbitmq-discuss] Determining Cause of Flow-Control Invocation
</A></li>
        <LI>Next message: <A HREF="030721.html">[rabbitmq-discuss] Determining Cause of Flow-Control Invocation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30720">[ date ]</a>
              <a href="thread.html#30720">[ thread ]</a>
              <a href="subject.html#30720">[ subject ]</a>
              <a href="author.html#30720">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On oct 4, 2013, at 9:37 p.m., Richard Raseley &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">richard at raseley.com</A>&gt; wrote:

&gt;<i> (*) When a RabbitMQ broker has multiple queues, will it automatically disperse them across the available cores? For example if I have 8 queues on a broker with 8 cores, will it automatically ensure a 1:1 mapping of queues:cores?
</I>
For all intents and purposes, you can think that the answer is &quot;yes&quot;. 8 cores will be used,
but it's a little more complicated than &quot;1 queue per core&quot;.

&gt;<i> 
</I>&gt;<i> (*) In the situation where I have been using one queue that mapped well to a logical construct (e.g 1 queue for info, 1 queue for warning, 1 queue for errors) can you share your own personal opinions on the best way to divide that up to ensure distribution across all cores (e.g. one queue per type per core, one queue per producer per type, etc.)?
</I>
you can implement sharding in the client. That's basically how travis-ci.org worked
at some point (2012). To be more specific, you can have N queues named

info.1
info.2
&#8230;
info.N

and have consumers consume from all of them. Publisher can use any hashing
technique you like, e.g. consistent hashing or even basic module-based caching,
since there is no need to rebalance queue contents when you add or remove queues.

The key issue with this is ordering. E.g. if your stream must be ordered (e.g. CI build
log chunks must be), it is trickier but certainly doable. If not, you can parallelize the
stream between many queues pretty trivially.

See <A HREF="http://about.travis-ci.org/blog/2013-08-08-solving-the-puzzle-of-scalable-log-processing/">http://about.travis-ci.org/blog/2013-08-08-solving-the-puzzle-of-scalable-log-processing/</A> for
some more insights.

HTH.

MK



-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131004/d12a480b/attachment.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131004/d12a480b/attachment.pgp</A>&gt;
</PRE>



























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030719.html">[rabbitmq-discuss] Determining Cause of Flow-Control Invocation
</A></li>
	<LI>Next message: <A HREF="030721.html">[rabbitmq-discuss] Determining Cause of Flow-Control Invocation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30720">[ date ]</a>
              <a href="thread.html#30720">[ thread ]</a>
              <a href="subject.html#30720">[ subject ]</a>
              <a href="author.html#30720">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
