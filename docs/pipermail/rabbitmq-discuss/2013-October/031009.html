<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] abnormally large memory use in &quot;binaries&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20abnormally%20large%20memory%20use%20in%20%22binaries%22&In-Reply-To=%3C1381851261.61014.YahooMailNeo%40web122002.mail.ne1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031219.html">
   <LINK REL="Next"  HREF="031034.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] abnormally large memory use in &quot;binaries&quot;</H1>
    <B>Brian Hammond</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20abnormally%20large%20memory%20use%20in%20%22binaries%22&In-Reply-To=%3C1381851261.61014.YahooMailNeo%40web122002.mail.ne1.yahoo.com%3E"
       TITLE="[rabbitmq-discuss] abnormally large memory use in &quot;binaries&quot;">brianin3d at yahoo.com
       </A><BR>
    <I>Tue Oct 15 16:34:21 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031219.html">[rabbitmq-discuss] connection problem. i want reconnection if	failed
</A></li>
        <LI>Next message: <A HREF="031034.html">[rabbitmq-discuss] abnormally large memory use in &quot;binaries&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31009">[ date ]</a>
              <a href="thread.html#31009">[ thread ]</a>
              <a href="subject.html#31009">[ subject ]</a>
              <a href="author.html#31009">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> How did you determine the average message size? Is it possible that the
</I>&gt;<i> queue could contain a small number of extremely large messages that skew
</I>&gt;<i> the average?
</I>
The messages on that queue are generated from a very small Java model object.

I looked at a sample from the routing key that queue listens to and the average is from 1000 message.

&gt;&gt;<i> Does the memory use increase gradually or in large jumps?
</I>
It seems to be pretty gradual up until it hit the ceiling.

&gt;<i> I'm not aware of any bugs that could explain the problem you describe.
</I>&gt;<i> Could you supply the output of &quot;rabbitmqctl report&quot; while you observe
</I>&gt;<i> the reported condition?
</I>
Sure, thing. I grabbed it at 10 minute intervals, but can do a finer granularity if needed.

I'll try to attach it to this post.&#160;

If that doesn't work, I'll upload it somewhere are post a url.

I started it on 2013/10/14 at 10:53 and around 2:53 it hit 18gb and stayed there till one of the guys restarted it around 5:24 pm.

Just for fun, here is the size of &quot;binary&quot; as a sort of summary of the usage:

&#160;{&quot;10:53&quot;:0.13, &quot;11:03&quot;:1.03, &quot;11:13&quot;:2.25, &quot;11:23&quot;:2.98, &quot;11:33&quot;:3.27, &quot;11:43&quot;:3.66, &quot;11:53&quot;:4.09, &quot;12:03&quot;:4.55, &quot;12:13&quot;:5.21, &quot;12:23&quot;:6.87, &quot;12:33&quot;:9.28, &quot;12:43&quot;:9.49, &quot;12:53&quot;:10.58, &quot;13:03&quot;:10.16, &quot;13:13&quot;:11.28, &quot;13:23&quot;:12.13, &quot;13:33&quot;:12.72, &quot;13:43&quot;:14.01, &quot;13:53&quot;:13.03, &quot;14:03&quot;:14.16, &quot;14:13&quot;:15.37, &quot;14:23&quot;:15.21, &quot;14:33&quot;:16.27, &quot;14:43&quot;:17.33, &quot;14:53&quot;:18.37, &quot;15:03&quot;:18.79, &quot;15:13&quot;:18.78, &quot;15:23&quot;:18.89, &quot;15:33&quot;:18.72, &quot;15:43&quot;:18.83, &quot;15:53&quot;:18.83, &quot;16:03&quot;:18.79, &quot;16:14&quot;:18.79, &quot;16:24&quot;:18.79, &quot;16:34&quot;:18.78, &quot;16:44&quot;:18.84, &quot;16:54&quot;:18.84, &quot;17:04&quot;:18.84, &quot;17:14&quot;:18.84 }
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131015/b0a21ef2/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131015/b0a21ef2/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: send-rabbit-reports.tgz
Type: application/octet-stream
Size: 459311 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131015/b0a21ef2/attachment.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131015/b0a21ef2/attachment.obj</A>&gt;
</PRE>




























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031219.html">[rabbitmq-discuss] connection problem. i want reconnection if	failed
</A></li>
	<LI>Next message: <A HREF="031034.html">[rabbitmq-discuss] abnormally large memory use in &quot;binaries&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31009">[ date ]</a>
              <a href="thread.html#31009">[ thread ]</a>
              <a href="subject.html#31009">[ subject ]</a>
              <a href="author.html#31009">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
