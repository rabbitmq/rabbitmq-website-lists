<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] abnormally large memory use in &quot;binaries&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20abnormally%20large%20memory%20use%20in%20%22binaries%22&In-Reply-To=%3C1382381403.12000.YahooMailNeo%40web122001.mail.ne1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031182.html">
   <LINK REL="Next"  HREF="031229.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] abnormally large memory use in &quot;binaries&quot;</H1>
    <B>Brian Hammond</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20abnormally%20large%20memory%20use%20in%20%22binaries%22&In-Reply-To=%3C1382381403.12000.YahooMailNeo%40web122001.mail.ne1.yahoo.com%3E"
       TITLE="[rabbitmq-discuss] abnormally large memory use in &quot;binaries&quot;">brianin3d at yahoo.com
       </A><BR>
    <I>Mon Oct 21 19:50:03 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031182.html">[rabbitmq-discuss] abnormally large memory use in &quot;binaries&quot;
</A></li>
        <LI>Next message: <A HREF="031229.html">[rabbitmq-discuss] abnormally large memory use in &quot;binaries&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31188">[ date ]</a>
              <a href="thread.html#31188">[ thread ]</a>
              <a href="subject.html#31188">[ subject ]</a>
              <a href="author.html#31188">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Do you have a specific set of arguments in mind for netstat? If not I'll go look at the man page.

The one queue that had 4 messages in it was the only one with that size of message.

Other queues have variously sized messages. Some of which are quite large.

BTW, I'm working on a test program trying to reproduce the issue from the outside. Slim odds granted, but I noticed something weird: &#160;when I ctrl-c'd my test program at one point, all the queues, connections and channels went away, but the admin console still reports about 10gb of memory in use, 15 minutes later.

I'll provide more information as my tests progress.



On Monday, October 21, 2013 1:01 PM, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt; wrote:
 

Hi Brian,


On 18/10/13 20:33, Brian Hammond wrote:
&gt;<i> This is a topper:
</I>&gt;<i>&#160; <A HREF="https://www.dropbox.com/s/ccq0zidcck2ca8j/rabbitMQ-dead-with-0-messages.png">https://www.dropbox.com/s/ccq0zidcck2ca8j/rabbitMQ-dead-with-0-messages.png</A>
</I>&gt;<i> 
</I>&gt;<i> Using 18gb with 0 messages...
</I>
Thank you very much for this information. This has allowed me to form a
hypothesis about where the memory might be going. In order to confirm,
can you supply the output of netstat on the consumer connections? I'm
particularly interested in the size of the send and receive queue.

Also, you originally claimed that messages are about 280B. From the
information provided the sizes appear to be much larger than that, some
of them multiple megabytes in size. Can you think of an explanation for
the discrepancy?




-Emile
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131021/574fe3db/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131021/574fe3db/attachment.htm</A>&gt;
</PRE>






















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031182.html">[rabbitmq-discuss] abnormally large memory use in &quot;binaries&quot;
</A></li>
	<LI>Next message: <A HREF="031229.html">[rabbitmq-discuss] abnormally large memory use in &quot;binaries&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31188">[ date ]</a>
              <a href="thread.html#31188">[ thread ]</a>
              <a href="subject.html#31188">[ subject ]</a>
              <a href="author.html#31188">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
