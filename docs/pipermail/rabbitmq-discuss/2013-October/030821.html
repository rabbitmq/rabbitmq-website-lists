<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Open Connections when sender closes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Open%20Connections%20when%20sender%20closes&In-Reply-To=%3C7F6C463D-9415-46DE-9BE1-A851FA0B0E93%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030815.html">
   <LINK REL="Next"  HREF="030792.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Open Connections when sender closes</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Open%20Connections%20when%20sender%20closes&In-Reply-To=%3C7F6C463D-9415-46DE-9BE1-A851FA0B0E93%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Open Connections when sender closes">michael at rabbitmq.com
       </A><BR>
    <I>Tue Oct  8 10:23:23 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030815.html">[rabbitmq-discuss] Open Connections when sender closes
</A></li>
        <LI>Next message: <A HREF="030792.html">[rabbitmq-discuss] Federated Exchange Upstream / Downstream Names
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30821">[ date ]</a>
              <a href="thread.html#30821">[ thread ]</a>
              <a href="subject.html#30821">[ subject ]</a>
              <a href="author.html#30821">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On oct 8, 2013, at 12:21 a.m., Warrick Fitzgerald &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">warrick.fitzgerald at gmail.com</A>&gt; wrote:

&gt;<i> Obviously after this happens a few times there's a lot of connections open to RabbitMQ.
</I>&gt;<i> 
</I>&gt;<i> How should this be handled? Does the server have some kind of timeout of heartbeat that can be used so that it cleans up the connections that are no longer in use?
</I>
Those connections are very likely to be in TIME_WAIT state.

Yes, detecting peer failure early is exactly what AMQP 0-9-1 heartbeats
were added for:
<A HREF="http://www.rabbitmq.com/reliability.html#connection-failures">http://www.rabbitmq.com/reliability.html#connection-failures</A>

Alternatively you can try enabling SO_LINGER on the socket (if your client
allows modifying socket options).

See <A HREF="http://rabbitmq.1065348.n5.nabble.com/Long-timeout-if-server-host-becomes-unreachable-td30275.html,">http://rabbitmq.1065348.n5.nabble.com/Long-timeout-if-server-host-becomes-unreachable-td30275.html,</A>
which is the same question about a specific client.

MK



-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131008/442e0e95/attachment.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131008/442e0e95/attachment.pgp</A>&gt;
</PRE>














































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030815.html">[rabbitmq-discuss] Open Connections when sender closes
</A></li>
	<LI>Next message: <A HREF="030792.html">[rabbitmq-discuss] Federated Exchange Upstream / Downstream Names
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30821">[ date ]</a>
              <a href="thread.html#30821">[ thread ]</a>
              <a href="subject.html#30821">[ subject ]</a>
              <a href="author.html#30821">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
