<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [ANNOUNCEMENT] Introducing Lyra: A High Availability RabbitMQ Client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BANNOUNCEMENT%5D%20Introducing%20Lyra%3A%20A%20High%0A%20Availability%20RabbitMQ%20Client&In-Reply-To=%3CCA%2Bes_-wH0QEdBceYV8-SOe7XK4njD1buNHNjeDroUehvXzdMoA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031301.html">
   <LINK REL="Next"  HREF="031528.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [ANNOUNCEMENT] Introducing Lyra: A High Availability RabbitMQ Client</H1>
    <B>Jonathan Halterman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BANNOUNCEMENT%5D%20Introducing%20Lyra%3A%20A%20High%0A%20Availability%20RabbitMQ%20Client&In-Reply-To=%3CCA%2Bes_-wH0QEdBceYV8-SOe7XK4njD1buNHNjeDroUehvXzdMoA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] [ANNOUNCEMENT] Introducing Lyra: A High Availability RabbitMQ Client">jhalterman at gmail.com
       </A><BR>
    <I>Thu Oct 24 04:14:53 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031301.html">[rabbitmq-discuss] [ANNOUNCEMENT] Introducing Lyra: A High	Availability RabbitMQ Client
</A></li>
        <LI>Next message: <A HREF="031528.html">[rabbitmq-discuss] [ANNOUNCEMENT] Introducing Lyra: A High Availability RabbitMQ Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31304">[ date ]</a>
              <a href="thread.html#31304">[ thread ]</a>
              <a href="subject.html#31304">[ subject ]</a>
              <a href="author.html#31304">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Michael - Comments below:

On Wed, Oct 23, 2013 at 5:23 PM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt;wrote:

&gt;<i>
</I>&gt;<i> On 24 Oct 2013, at 03:38, Jonathan Halterman &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jhalterman at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Lyra is a RabbitMQ client that helps you achieve high availability in
</I>&gt;<i> your services by embracing failure, allowing for AMQP resources such as
</I>&gt;<i> connections, channels and consumers to be automatically recovered when
</I>&gt;<i> server or network failures occur. It also supports automatic invocation
</I>&gt;<i> retries, and exposes a simple, lightweight API built around the Java
</I>&gt;<i> AMQP-client library.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; For more info, visit the project page:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; <A HREF="https://github.com/jhalterman/lyra">https://github.com/jhalterman/lyra</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Questions, comments, and suggestions are welcome.
</I>&gt;<i>
</I>&gt;<i> Very nice!
</I>&gt;<i>
</I>&gt;<i> A couple of questions:
</I>&gt;<i>
</I>&gt;<i>  * &quot;Automatic resource recovery&quot; in README is a little vague. Can you
</I>&gt;<i> explain how it works and what kind of scenarios does it cover?
</I>&gt;<i>
</I>
Sure. Lyra distinguishes between recovery and retries. If an invocation
such as Channel.basicConsume fails due to an unexpected (not user
initiated) channel closure, the channel is automatically recovered, along
with any consumers, according to the configured recovery policy. Likewise,
if a Connection invocation fails as the result of an unexpected connection
closure, the connection, along with its channels and their consumers, are
recovered according to the configured policies. After the resources are
recovered, the failed invocation may be retried if it is deemed retryable,
according to the configured retry policy. For connection/channel closures
that are not the result of an invocation, the closed resources are simply
recovered in the background.

As for what recovery entails, it's basically recreating the closed resource
and copying any/all state from the closed resource to the recovered
resource. Lyra does this under the covers where the user isn't exposed to
the details.


&gt;<i>  * Are you familiar with how Ruby and Clojure clients perform recovery,
</I>&gt;<i> e.g. [1]?
</I>&gt;<i>
</I>
Definitely! I spent a good amount of time studying every client I could
find including Langohr and Bunny. The general goal of Lyra is along the
lines of what Bunny strives to do with recovery. What I found was that
there's a good amount of complexity in addressing the variety of failure
scenarios and the combination of failures that might occur both initially
and during the recovery process. For example, a channel invocation could
trigger a channel closure which kicks off a recovery that fails for some
other reason, requiring another channel recovery or perhaps even a
connection recovery. Failures can cascade in interesting ways. Lyra strives
to address this completely.

If you're interested in some of these scenarios, have a look at Lyra's
functional tests (particularly the *Invocation and *Recovery test classes):

<A HREF="https://github.com/jhalterman/lyra/tree/master/src/test/java/net/jodah/lyra/internal">https://github.com/jhalterman/lyra/tree/master/src/test/java/net/jodah/lyra/internal</A>


&gt;<i>
</I>&gt;<i> FYI, there are chances that similar features will eventually make it into
</I>&gt;<i> the Java client, although
</I>&gt;<i> there is no specific plan for this at the moment. But more 3rd party
</I>&gt;<i> clients that support recovery
</I>&gt;<i> demonstrates the need for such features.
</I>&gt;<i>
</I>&gt;<i> 1. <A HREF="http://rubybunny.info/articles/error_handling.html">http://rubybunny.info/articles/error_handling.html</A>
</I>&gt;<i>
</I>&gt;<i> MK
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131023/d3d624c8/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131023/d3d624c8/attachment.htm</A>&gt;
</PRE>





















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031301.html">[rabbitmq-discuss] [ANNOUNCEMENT] Introducing Lyra: A High	Availability RabbitMQ Client
</A></li>
	<LI>Next message: <A HREF="031528.html">[rabbitmq-discuss] [ANNOUNCEMENT] Introducing Lyra: A High Availability RabbitMQ Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31304">[ date ]</a>
              <a href="thread.html#31304">[ thread ]</a>
              <a href="subject.html#31304">[ subject ]</a>
              <a href="author.html#31304">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
