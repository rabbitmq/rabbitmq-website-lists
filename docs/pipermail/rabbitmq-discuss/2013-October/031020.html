<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq-C amqp_basic_publish crash on connection loss
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq-C%20amqp_basic_publish%20crash%20on%0A%20connection%20loss&In-Reply-To=%3CDD7729D61B083D48A2CDCB66A27AD4C98C9801%40BSDMSATMBX001.mahindrasatyam.ad%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031299.html">
   <LINK REL="Next"  HREF="031029.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq-C amqp_basic_publish crash on connection loss</H1>
    <B>Lothe Shashank</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq-C%20amqp_basic_publish%20crash%20on%0A%20connection%20loss&In-Reply-To=%3CDD7729D61B083D48A2CDCB66A27AD4C98C9801%40BSDMSATMBX001.mahindrasatyam.ad%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq-C amqp_basic_publish crash on connection loss">Shashank.Lothe at techmahindra.com
       </A><BR>
    <I>Wed Oct 16 08:20:03 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031299.html">[rabbitmq-discuss] AlreadyClosedException always sets hardError and initiatedByApplication to true
</A></li>
        <LI>Next message: <A HREF="031029.html">[rabbitmq-discuss] Messaging queue system for MS CRM 2011 to Klaes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31020">[ date ]</a>
              <a href="thread.html#31020">[ thread ]</a>
              <a href="subject.html#31020">[ subject ]</a>
              <a href="author.html#31020">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Can someone help me on this? Sample simulation is attached herewith.

Thanks and regards,
Shashank
________________________________
From: Lothe Shashank
Sent: Friday, October 11, 2013 1:20 PM
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Rabbitmq-C amqp_basic_publish crash on connection loss

Hi Alan,

Thanks for the clarification. I am attaching the simulation herewith. I don't have a stack trace. It was abort as I couldn't get the next console print. On similar lines, for a listner, if I stop rabbitmq broker using rabbitmq_ctl stop_app, amqp_maybe_release_buffers(conn) API crashed. I believe that  due to abrupt connection loss the conn value becomes invalid (though not changed) and amqp_basic_publish and amqp_maybe_release_buffers APIs fail.

Could you throw some light on this and help me to understand how can I handle abrupt connection loss during publish and listen?

Thanks and regards,
Shashank



________________________________

DISCLAIMER:
This email (including any attachments) is intended for the sole use of the intended recipient/s and may contain material that is CONFIDENTIAL AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or distribution or forwarding of any or all of the contents in this message is STRICTLY PROHIBITED. If you are not the intended recipient, please contact the sender by email and delete all copies; your cooperation in this regard is appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131016/2efe7183/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131016/2efe7183/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: amqp_sendstring.c
Type: text/x-csrc
Size: 4731 bytes
Desc: amqp_sendstring.c
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131016/2efe7183/attachment.c">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131016/2efe7183/attachment.c</A>&gt;
</PRE>


























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031299.html">[rabbitmq-discuss] AlreadyClosedException always sets hardError and initiatedByApplication to true
</A></li>
	<LI>Next message: <A HREF="031029.html">[rabbitmq-discuss] Messaging queue system for MS CRM 2011 to Klaes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31020">[ date ]</a>
              <a href="thread.html#31020">[ thread ]</a>
              <a href="subject.html#31020">[ subject ]</a>
              <a href="author.html#31020">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
