<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queries regarding rabbitmq-C APIs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queries%20regarding%20rabbitmq-C%20APIs&In-Reply-To=%3CCAAt2po%2B96WqDGapQAzf%2B5TP_QPwjXTe%2B61X-yLwsbS-2pd%3DyeA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031395.html">
   <LINK REL="Next"  HREF="031398.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queries regarding rabbitmq-C APIs</H1>
    <B>Alan Antonuk</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queries%20regarding%20rabbitmq-C%20APIs&In-Reply-To=%3CCAAt2po%2B96WqDGapQAzf%2B5TP_QPwjXTe%2B61X-yLwsbS-2pd%3DyeA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Queries regarding rabbitmq-C APIs">alan.antonuk at gmail.com
       </A><BR>
    <I>Tue Oct 29 16:34:45 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031395.html">[rabbitmq-discuss] Queries regarding rabbitmq-C APIs
</A></li>
        <LI>Next message: <A HREF="031398.html">[rabbitmq-discuss] SSL Certification Verification Fail
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31462">[ date ]</a>
              <a href="thread.html#31462">[ thread ]</a>
              <a href="subject.html#31462">[ subject ]</a>
              <a href="author.html#31462">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Shashank;

On Mon, Oct 28, 2013 at 3:15 AM, Lothe Shashank &lt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Shashank.Lothe at techmahindra.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 1. Is there is a way to check from rabbitmq-c library function, if the
</I>&gt;<i> network cable is pulled out?
</I>&gt;<i>
</I>As far as I know, there isn't a portable socket API for detecting a network
cable from being pulled. The best we can do is to detect when the TCP
connection has been closed. All rabbitmq-c functions that cause a read or
write to the socket check the return from these functions to detect the
socket being closed unexpectedly.  If the socket is closed the client will
receive an AMQP_STATUS_SOCKET_CLOSED or AMQP_STATUS_SOCKET_ERROR as a
return value.


&gt;<i> Why amqp_basic_publish API returns success if network cable is pulled out
</I>&gt;<i> from client?
</I>&gt;<i>
</I>What's happening most likely is that the OS has not detected that that the
socket has been closed, and since the message being published is smaller
than the socket's send buffer, the data is being buffered by the OS.

&gt;<i>
</I>&gt;<i>
</I>
&gt;<i> 2. Establish connection with broker. Pull out network cable, call
</I>&gt;<i> amqp_channel_close. It crashes.
</I>&gt;<i>
</I>3. Establish connection with broker for auto delete queue and do
&gt;<i> &quot;rabbitmqctl stop_app&quot; on broker. The connection is closed automatically.
</I>&gt;<i> Now call amqp_destroy_connection.  It crashes.
</I>&gt;<i>
</I>I've heard reports of this happening, but I haven't got any more detail on
what is happening besides &quot;it crashes&quot;. What is causing the crash?
Segfault? Some other uncaught signal? (SIGPIPE for example)? Something
else? If you have some other information about the crash or how I could
reproduce it that would be helpful.

-Alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131029/ab04e39d/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131029/ab04e39d/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031395.html">[rabbitmq-discuss] Queries regarding rabbitmq-C APIs
</A></li>
	<LI>Next message: <A HREF="031398.html">[rabbitmq-discuss] SSL Certification Verification Fail
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31462">[ date ]</a>
              <a href="thread.html#31462">[ thread ]</a>
              <a href="subject.html#31462">[ subject ]</a>
              <a href="author.html#31462">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
