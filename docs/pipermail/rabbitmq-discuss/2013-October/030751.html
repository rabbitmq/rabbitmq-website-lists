<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] message durability, cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20message%20durability%2C%20cluster&In-Reply-To=%3CCANOx8NnO114%3DaoS%3Db%3DBbTidXRFHZjy3_tqop_FkbQzgCVfMnGA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030748.html">
   <LINK REL="Next"  HREF="030742.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] message durability, cluster</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20message%20durability%2C%20cluster&In-Reply-To=%3CCANOx8NnO114%3DaoS%3Db%3DBbTidXRFHZjy3_tqop_FkbQzgCVfMnGA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] message durability, cluster">jkuch at gopivotal.com
       </A><BR>
    <I>Sun Oct  6 20:35:55 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030748.html">[rabbitmq-discuss] message durability, cluster
</A></li>
        <LI>Next message: <A HREF="030742.html">[rabbitmq-discuss] Interoperability between Qpid-JMS client and	rabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30751">[ date ]</a>
              <a href="thread.html#30751">[ thread ]</a>
              <a href="subject.html#30751">[ subject ]</a>
              <a href="author.html#30751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Oct 4, 2013 at 9:43 AM, Vasiliy Boulytchev &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">vasiliyb at gmail.com</A>&gt;wrote:

&gt;<i> Folks,
</I>&gt;<i>   Please correct me if I am wrong...  After each message is published to
</I>&gt;<i> an exchange, the client receives a confirmation that the message was
</I>&gt;<i> received.
</I>&gt;<i>
</I>
Not by default.  If you use an AMQP transaction or the RabbitMQ &quot;publisher
confirms&quot; extension, than you can get this sort of notification,
synchronously in the case of the former, and asynchronously in the case of
the latter.


&gt;<i> Does this message get sent by RabbitMQ server after this message has been
</I>&gt;<i> send to all nodes in the cluster?
</I>&gt;<i>
</I>
It depends.  For example if you publish to an exchange with no bound
queues, your message goes nowhere.  Otherwise it will be routed into bound
queues according to its routing key, the exchange type, and the binding
keys used.

By default a queue exists, backed by a single Erlang process, on a single
node in the cluster.  If you're using mirrored queues, then other replicas
of the queue will exist, on other nodes, and in that case the message will
be replicated into the mirrors.  The publish will be informed only if he's
using one of the above mechanisms (transactions or publisher confirms) as
for mirrored queues, the scopes of these mechanisms span all mirrors of the
queue.


&gt;<i>  Does this message get sent when the message has been written to disk?
</I>&gt;<i>
</I>
If you published your message with the persistence flag, then the operation
is not considered successfully done until the queue persists the message,
or in the case of mirroring, all mirrors do so.  The confirmation is sent
only when what you asked for is done.


&gt;<i>  Does this message get sent after a shovel policy has been applied?
</I>&gt;<i>
</I>
I'm not sure what you mean by shovel &quot;policy&quot; since in recent Rabbits that
term has a specific meaning.

But shovel works by having an Erlang process within the source broker
consume out of a queue bound to the source exchange and republish via AMQP
to an exchange on a remote broker.  The scope of transaction or confirm
gets you only as far as the hidden queue from which shovel is pulling for
republication and tells the initial publisher nothing about what the shovel
did or didn't do afterward.

Jerry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131006/1d51f0a9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131006/1d51f0a9/attachment.htm</A>&gt;
</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030748.html">[rabbitmq-discuss] message durability, cluster
</A></li>
	<LI>Next message: <A HREF="030742.html">[rabbitmq-discuss] Interoperability between Qpid-JMS client and	rabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30751">[ date ]</a>
              <a href="thread.html#30751">[ thread ]</a>
              <a href="subject.html#30751">[ subject ]</a>
              <a href="author.html#30751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
