<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ JMS Client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20JMS%20Client&In-Reply-To=%3C5F11F876-5C8A-45E3-A341-44671200AB0F%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031283.html">
   <LINK REL="Next"  HREF="031327.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ JMS Client</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20JMS%20Client&In-Reply-To=%3C5F11F876-5C8A-45E3-A341-44671200AB0F%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ JMS Client">steve at rabbitmq.com
       </A><BR>
    <I>Wed Oct 23 17:13:44 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031283.html">[rabbitmq-discuss] RabbitMQ JMS Client
</A></li>
        <LI>Next message: <A HREF="031327.html">[rabbitmq-discuss] RabbitMQ JMS Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31286">[ date ]</a>
              <a href="thread.html#31286">[ thread ]</a>
              <a href="subject.html#31286">[ subject ]</a>
              <a href="author.html#31286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jonathan,

Although The JMS Client for vFabric RabbitMQ (RJMS) doesn't supply a JNDI provider
it is quite happy using Destinations and ConnectionFactorys from JNDI. You will have to
write an admin application to populate your JNDI space (create these objects using
the RJMS client and the com.rabbitmq.jms.admin package).

Then once in you can retrieve connections and destinations from the JNDI in an RJMS 
app in the normal way.

The admin objects are Serializable and Referenceable as needed by the JNDI 
create/store/retrieve mechanisms.

Having said that, it should be possible for you to create and use the ConnectionFactory
and Destinations directly created by this API.

&gt;<i> I tried to get a connectionfactory from
</I>&gt;<i> ObjectFactory.createConnectionFactory(Reference ref, Name name), with no
</I>&gt;<i> luck.
</I>

An ObjectFactory is used by JNDI to create an object from a Reference. We produce a
reference (on demand) when JNDI stores an object, and JNDI recreates the object using
a Reference when you retrieve it. 

createConnectionFactory and createDestination are methods on RMQObjectFactory, 
which is presumably what you used but I wonder where you got the Reference argument
from?

To create a ConnectionFactory directly, first instantiate a RMQConnectionFactory:
	new RMQConnectionFactory()

set the host/port/etc individually, or use the setUri(String) method like this:
	setUri(&quot;<A HREF="amqp://uid:pass@host.name:port/vhost&quot;">amqp://uid:pass@host.name:port/vhost&quot;</A>)
(the RabbitMQ site tells you what you can put in the AMQP scheme and how, the
standard RabbitMQ defaults apply),

and then createConnection() will do the rest (or createQueueConnection or 
createTopicConnection). You can provide the userid/password pair on the
createConnection(String,String) method call instead if you prefer.

After you get a connection, you can create a Session and createQueue(QUEUE_NAME) to 
create a Queue destination on the fly, or else you can create a Destination (with
various parameter options) with a new RMQDestination(&#8230;) constructor and use it
directly.

Let me know how it goes.

I'm keen to know how hard you find it to work your way through this, and any
feedback should be passed through your support channel, or email me directly
on steve at rabbitmq.com. This mailing list continues to be for general queries.

Steve Powell  [Cell: +44-7815-838-558] [RabbitMQ, Pivotal]
&#8220;L&#8217;enfer, c&#8217;est les autres.&#8221; Sartre

On 23 Oct 2013, at 15:09, Jonathan Skrzypek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jonathan.skrzypek at gs.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I'm trying to test the JMS Client for vFabric RabbitMQ.
</I>&gt;<i> My understanding is that the JMS implementation in this client doesn't use
</I>&gt;<i> the classic JNDI/lookup way of doing things in the JMS world. 
</I>&gt;<i> Instead you have to use an ObjectFactor to create and register your factory.
</I>&gt;<i> 
</I>&gt;<i> I couldn't find java samples showing how to use the client. 
</I>&gt;<i> I know there is a reference app but it's using the Play Framework Scala.
</I>&gt;<i> 
</I>&gt;<i> I tried to get a connectionfactory from
</I>&gt;<i> ObjectFactory.createConnectionFactory(Reference ref, Name name), with no
</I>&gt;<i> luck.
</I>&gt;<i> I get a factory, but get a non-explicit exception when trying to call
</I>&gt;<i> createConnection(), like :
</I>&gt;<i> Exception occurred: com.rabbitmq.jms.util.RMQJMSException: <A HREF="tcp://broker:port">tcp://broker:port</A>
</I>&gt;<i> 
</I>&gt;<i> Is there a simple java sample anywhere ? Has somebody been able to build the
</I>&gt;<i> usual connectionfactory-&gt;connection-&gt;session-&gt;producer/consumer object tree
</I>&gt;<i> ?
</I>&gt;<i> 
</I>&gt;<i> Regards.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-JMS-Client-tp30766.html">http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-JMS-Client-tp30766.html</A>
</I>&gt;<i> Sent from the RabbitMQ mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>














































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031283.html">[rabbitmq-discuss] RabbitMQ JMS Client
</A></li>
	<LI>Next message: <A HREF="031327.html">[rabbitmq-discuss] RabbitMQ JMS Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31286">[ date ]</a>
              <a href="thread.html#31286">[ thread ]</a>
              <a href="subject.html#31286">[ subject ]</a>
              <a href="author.html#31286">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
