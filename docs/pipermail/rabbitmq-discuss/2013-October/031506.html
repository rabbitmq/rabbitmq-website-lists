<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] queue selection based on a 'feature list'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queue%20selection%20based%20on%20a%20%27feature%20list%27&In-Reply-To=%3CPrayer.1.0.16.1310301129120.22254%40dogwood.freil.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031504.html">
   <LINK REL="Next"  HREF="031512.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] queue selection based on a 'feature list'</H1>
    <B>Lawrence Freil</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queue%20selection%20based%20on%20a%20%27feature%20list%27&In-Reply-To=%3CPrayer.1.0.16.1310301129120.22254%40dogwood.freil.com%3E"
       TITLE="[rabbitmq-discuss] queue selection based on a 'feature list'">lef at apago.com
       </A><BR>
    <I>Wed Oct 30 15:29:12 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031504.html">[rabbitmq-discuss] queue selection based on a 'feature list'
</A></li>
        <LI>Next message: <A HREF="031512.html">[rabbitmq-discuss] queue selection based on a 'feature list'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31506">[ date ]</a>
              <a href="thread.html#31506">[ thread ]</a>
              <a href="subject.html#31506">[ subject ]</a>
              <a href="author.html#31506">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Emile,

Thanks for the reply.

I had considered this approach and could use this for initial testing, 
however the feature set that I am looking for is somewhat large and could 
expand, each time doubling the combinations. I think the end result will be 
creating an exchange plugin very similar to the topic exchange but where 
the '*' and '#' can also be used in the message routing keys. Using this 
wouldn't break any existing topic exchange usage but would allow messages 
to be crafted with 'I don't care', and if a trailing '#' was always used in 
the message, adding new features to the servers wouldn't break existing 
producers.

On Oct 30 2013, Emile Joubert wrote:

&gt;<i>On 30/10/13 13:54, Lawrence Freil wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Is there a way to accomplish this with the current exchanges?
</I>&gt;<i>
</I>&gt;<i>There may be a way to approximate this with a topic exchange if you
</I>&gt;<i>associate features with consumers rather than queues. You could create a
</I>&gt;<i>queue for each combination of features and bind so that it received
</I>&gt;<i>messages that require exactly those features.
</I>&gt;<i>
</I>&gt;<i>E.g. you could declare queues
</I>&gt;<i>
</I>&gt;<i>____, w___, _x___, __y_, ___z,
</I>&gt;<i>wx__, ... , w__z, ..., wxyz.
</I>&gt;<i>
</I>&gt;<i>and bind them:
</I>&gt;<i>
</I>&gt;<i>____ with binding key _._._._
</I>&gt;<i>w___ with binding key w._._._
</I>&gt;<i>_x__ with binding key _.x._._
</I>&gt;<i>__y_ with binding key _._.y._
</I>&gt;<i>___z with binding key _._._.z
</I>&gt;<i>...
</I>&gt;<i>wx__ with binding key w.x._._
</I>&gt;<i>w__z with binding key w._._.z
</I>&gt;<i>...
</I>&gt;<i>wxyz with binding key w.x.y.z
</I>&gt;<i>
</I>&gt;<i>Consumers can then consume from all queues that contain messages that
</I>&gt;<i>demand a subset of the features offered by that consumer, e.g. a
</I>&gt;<i>consumer that offers
</I>&gt;<i>
</I>&gt;<i>x and y consumes from ____ and _x__ and __y_ and _xy_
</I>&gt;<i>only z  consumes from ____ and ___z
</I>&gt;<i>w,x,y,z consumes from all queues
</I>&gt;<i>
</I>&gt;<i>Then if you publish a message with routing key _.x.y._ it will arrive at
</I>&gt;<i>queue _xy_ and be sent to a consumer that is guaranteed to offer x and y.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>If the number of features is large or rapidly changing then this will
</I>&gt;<i>become unmanageable. If the features are strictly associated with queues
</I>&gt;<i>rather than consumers then it also won't work.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>-Emile
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
-- 
Lawrence Freil
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lef at apago.com</A>
770-619-1884
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031504.html">[rabbitmq-discuss] queue selection based on a 'feature list'
</A></li>
	<LI>Next message: <A HREF="031512.html">[rabbitmq-discuss] queue selection based on a 'feature list'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31506">[ date ]</a>
              <a href="thread.html#31506">[ thread ]</a>
              <a href="subject.html#31506">[ subject ]</a>
              <a href="author.html#31506">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
