<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq-C amqp_basic_publish crash on connection loss
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq-C%20amqp_basic_publish%20crash%20on%0A%20connection%20loss&In-Reply-To=%3CCAAt2poL3wPGddPUH5ixvxMnpHDcX8Q2m7zPG%3DWDHnP%3DdH4dgwQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030879.html">
   <LINK REL="Next"  HREF="030881.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq-C amqp_basic_publish crash on connection loss</H1>
    <B>Alan Antonuk</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq-C%20amqp_basic_publish%20crash%20on%0A%20connection%20loss&In-Reply-To=%3CCAAt2poL3wPGddPUH5ixvxMnpHDcX8Q2m7zPG%3DWDHnP%3DdH4dgwQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq-C amqp_basic_publish crash on connection loss">alan.antonuk at gmail.com
       </A><BR>
    <I>Thu Oct 10 07:55:41 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030879.html">[rabbitmq-discuss] Rabbitmq-C amqp_basic_publish crash on	connection loss
</A></li>
        <LI>Next message: <A HREF="030881.html">[rabbitmq-discuss] Identifying and deleting messages from RMQ queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30891">[ date ]</a>
              <a href="thread.html#30891">[ thread ]</a>
              <a href="subject.html#30891">[ subject ]</a>
              <a href="author.html#30891">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If used correctly, rabbitmq-c should not cause your program to terminate.

I would need a bit more information by what you mean by &quot;program
terminated&quot; to help you diagnose your issue. Did it segfault? Did it
abort()? If so, is there a callstack indicating where this happened?


On Wed, Oct 9, 2013 at 5:56 AM, Lothe Shashank &lt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Shashank.Lothe at techmahindra.com</A>&gt; wrote:

&gt;<i>  1. if there is a way to check the connection before I publish
</I>&gt;<i>
</I>No, and even if there was, its entirely possible that the connection could
be closed between the time the program checked to see if the connection was
open and the time amqp_basic_publish() was called.


&gt;<i> 2. if the connection value becomes NULL, as we stop the broker.
</I>&gt;<i>
</I>amqp_connection_state_t objects are only allocated with
amqp_new_connection(), and only deallocated with amqp_destroy_connection().
No other function in rabbitmq-c should change the external facing value of
an amqp_connection_state_t. Its an opaque pointer.
<A HREF="http://stackoverflow.com/a/7553775/786714">http://stackoverflow.com/a/7553775/786714</A> for a better explanation on the
pattern in use here.

-Alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131009/7b8f7e70/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131009/7b8f7e70/attachment.htm</A>&gt;
</PRE>

































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030879.html">[rabbitmq-discuss] Rabbitmq-C amqp_basic_publish crash on	connection loss
</A></li>
	<LI>Next message: <A HREF="030881.html">[rabbitmq-discuss] Identifying and deleting messages from RMQ queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30891">[ date ]</a>
              <a href="thread.html#30891">[ thread ]</a>
              <a href="subject.html#30891">[ subject ]</a>
              <a href="author.html#30891">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
