<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] queue selection based on a 'feature list'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queue%20selection%20based%20on%20a%20%27feature%20list%27&In-Reply-To=%3C527119B6.8030802%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031502.html">
   <LINK REL="Next"  HREF="031506.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] queue selection based on a 'feature list'</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queue%20selection%20based%20on%20a%20%27feature%20list%27&In-Reply-To=%3C527119B6.8030802%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] queue selection based on a 'feature list'">emile at rabbitmq.com
       </A><BR>
    <I>Wed Oct 30 14:37:42 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031502.html">[rabbitmq-discuss] queue selection based on a 'feature list'
</A></li>
        <LI>Next message: <A HREF="031506.html">[rabbitmq-discuss] queue selection based on a 'feature list'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31504">[ date ]</a>
              <a href="thread.html#31504">[ thread ]</a>
              <a href="subject.html#31504">[ subject ]</a>
              <a href="author.html#31504">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/10/13 13:54, Lawrence Freil wrote:

&gt;<i> Is there a way to accomplish this with the current exchanges?
</I>
There may be a way to approximate this with a topic exchange if you
associate features with consumers rather than queues. You could create a
queue for each combination of features and bind so that it received
messages that require exactly those features.

E.g. you could declare queues

____, w___, _x___, __y_, ___z,
wx__, ... , w__z, ..., wxyz.

and bind them:

____ with binding key _._._._
w___ with binding key w._._._
_x__ with binding key _.x._._
__y_ with binding key _._.y._
___z with binding key _._._.z
...
wx__ with binding key w.x._._
w__z with binding key w._._.z
...
wxyz with binding key w.x.y.z

Consumers can then consume from all queues that contain messages that
demand a subset of the features offered by that consumer, e.g. a
consumer that offers

x and y consumes from ____ and _x__ and __y_ and _xy_
only z  consumes from ____ and ___z
w,x,y,z consumes from all queues

Then if you publish a message with routing key _.x.y._ it will arrive at
queue _xy_ and be sent to a consumer that is guaranteed to offer x and y.


If the number of features is large or rapidly changing then this will
become unmanageable. If the features are strictly associated with queues
rather than consumers then it also won't work.



-Emile






</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031502.html">[rabbitmq-discuss] queue selection based on a 'feature list'
</A></li>
	<LI>Next message: <A HREF="031506.html">[rabbitmq-discuss] queue selection based on a 'feature list'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31504">[ date ]</a>
              <a href="thread.html#31504">[ thread ]</a>
              <a href="subject.html#31504">[ subject ]</a>
              <a href="author.html#31504">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
