<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Management API and monitoring
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20API%20and%20monitoring&In-Reply-To=%3C526A32F1.9020804%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031339.html">
   <LINK REL="Next"  HREF="031370.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Management API and monitoring</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20API%20and%20monitoring&In-Reply-To=%3C526A32F1.9020804%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Management API and monitoring">simon at rabbitmq.com
       </A><BR>
    <I>Fri Oct 25 09:59:29 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031339.html">[rabbitmq-discuss] Management API and monitoring
</A></li>
        <LI>Next message: <A HREF="031370.html">[rabbitmq-discuss] Management API and monitoring
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31348">[ date ]</a>
              <a href="thread.html#31348">[ thread ]</a>
              <a href="subject.html#31348">[ subject ]</a>
              <a href="author.html#31348">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/10/2013 5:48PM, Jason McIntosh wrote:
&gt;<i> The question I have is on the queue - I'd like to be able to monitor
</I>&gt;<i> when the queue was last &quot;accessed&quot; for message publishes.
</I>
Probably your best bet is to look at the inbound message rate from the 
mgmt API.

&gt;<i> I was looking
</I>&gt;<i> at the idle_since but it looks like the date there gets reset anytime
</I>&gt;<i> you even look at the list of queues.
</I>
That reports on the last time anything contacted the queue to wake it up 
- this would include publishing, consuming, (re)declaring, or listing it 
with rabbitmqctl (not mgmt).

&gt;<i> One interesting thing I noticed while working on monitoring.
</I>&gt;<i>   rabbitmqctl does not seem like a very efficient mechanism for use by
</I>&gt;<i> monitoring tools.  I started off using ctl to get various queue and
</I>&gt;<i> server information and found that it was extremely expensive to call
</I>&gt;<i> repeatedly.  I tried using some python scripts to hit the management API
</I>&gt;<i> and my CPU load went down by about 70%.  Not sure if other people have
</I>&gt;<i> seem the same using rabbitmqctl?
</I>
This is expected. rabbitmqctl and the management API have quite 
different designs - in brief the management API maintains a database of 
current stats for everything that's going on, based on stats events 
emitted by queues, channels and connections. On the other hand when 
rabbitmqctl wants to know something it just goes and asks the queue / 
channel / connection directly - so it's a much simpler design but not as 
performant.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>












































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031339.html">[rabbitmq-discuss] Management API and monitoring
</A></li>
	<LI>Next message: <A HREF="031370.html">[rabbitmq-discuss] Management API and monitoring
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31348">[ date ]</a>
              <a href="thread.html#31348">[ thread ]</a>
              <a href="subject.html#31348">[ subject ]</a>
              <a href="author.html#31348">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
