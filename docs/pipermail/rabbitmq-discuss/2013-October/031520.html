<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to determine if my message was publish	successfully
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20determine%20if%20my%20message%20was%20publish%0A%09successfully&In-Reply-To=%3CCAETr1H87rpD_oV%2B5vyO5GRZQrUtj3YEnc_CC8RA7Dwx-1k_KyA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031519.html">
   <LINK REL="Next"  HREF="031521.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to determine if my message was publish	successfully</H1>
    <B>cw storm</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20determine%20if%20my%20message%20was%20publish%0A%09successfully&In-Reply-To=%3CCAETr1H87rpD_oV%2B5vyO5GRZQrUtj3YEnc_CC8RA7Dwx-1k_KyA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] How to determine if my message was publish	successfully">cwstorm at gmail.com
       </A><BR>
    <I>Wed Oct 30 20:42:46 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031519.html">[rabbitmq-discuss] How to determine if my message was publish	successfully
</A></li>
        <LI>Next message: <A HREF="031521.html">[rabbitmq-discuss] How to determine if my message was publish	successfully
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31520">[ date ]</a>
              <a href="thread.html#31520">[ thread ]</a>
              <a href="subject.html#31520">[ subject ]</a>
              <a href="author.html#31520">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>MK,

I want to capture the basic.return information (replyCode, replyText) if my
basisPublish fails.  I've set the channel to confirm.select and set
mandatory flag to true.  It's my understanding that if an invalid routing
key is provided, the message wouldn't route anywhere and the message should
return to the client since it fail to route to a queue.  I just don't
understand how to implement that in the java code.

channel.basicPublish(strExchangeName, strRoutingKey, true,
MessageProperties.PERSISTENT_TEXT_PLAIN, byteMessage);


On Wed, Oct 30, 2013 at 4:02 PM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt;wrote:

&gt;<i>
</I>&gt;<i> On 30 Oct 2013, at 23:56, cw storm &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">cwstorm at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; I'm using the java client libraries from RabbitMQ.  Just wondering if
</I>&gt;<i> it's possible to determine if a message was publish to the queue
</I>&gt;<i> successfully or not after invoking basicPublish.  If so, can you please
</I>&gt;<i> share example code how this is accomplish?
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/confirms.html">http://www.rabbitmq.com/confirms.html</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://hg.rabbitmq.com/rabbitmq-java-client/file/default/test/src/com/rabbitmq/examples/ConfirmDontLoseMessages.java">http://hg.rabbitmq.com/rabbitmq-java-client/file/default/test/src/com/rabbitmq/examples/ConfirmDontLoseMessages.java</A>
</I>&gt;<i>
</I>&gt;<i> (TL;DR: com.rabbitmq.client.Channel#waitForConfirms)
</I>&gt;<i>
</I>&gt;<i> Note that
</I>&gt;<i>
</I>&gt;<i> 1. You want confirm batches (of 16, 32, 64 messages) if possible
</I>&gt;<i> 2. Even with batch confirmation, Publisher Confirms have significant
</I>&gt;<i> impact on publishing throughput
</I>&gt;<i>
</I>&gt;<i> MK
</I>&gt;<i>
</I>&gt;<i> Software Engineer, Pivotal/RabbitMQ
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131030/af235c2a/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131030/af235c2a/attachment.htm</A>&gt;
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031519.html">[rabbitmq-discuss] How to determine if my message was publish	successfully
</A></li>
	<LI>Next message: <A HREF="031521.html">[rabbitmq-discuss] How to determine if my message was publish	successfully
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31520">[ date ]</a>
              <a href="thread.html#31520">[ thread ]</a>
              <a href="subject.html#31520">[ subject ]</a>
              <a href="author.html#31520">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
