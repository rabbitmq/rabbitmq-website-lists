<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq client timeouts, slow responses
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20client%20timeouts%2C%20slow%20responses&In-Reply-To=%3C1381959216602-30562.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031192.html">
   <LINK REL="Next"  HREF="031017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq client timeouts, slow responses</H1>
    <B>tsduncan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20client%20timeouts%2C%20slow%20responses&In-Reply-To=%3C1381959216602-30562.post%40n5.nabble.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq client timeouts, slow responses">terrysduncan at gmail.com
       </A><BR>
    <I>Wed Oct 16 22:33:36 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031192.html">[rabbitmq-discuss] rabbitmq client timeouts, slow responses
</A></li>
        <LI>Next message: <A HREF="031017.html">[rabbitmq-discuss] AlreadyClosedException always sets hardError and initiatedByApplication to true
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31082">[ date ]</a>
              <a href="thread.html#31082">[ thread ]</a>
              <a href="subject.html#31082">[ subject ]</a>
              <a href="author.html#31082">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have figured out the problem on the server side. The broker has reached its
limit of socket descriptors.  That, I can resolve. 

I'd like to still understand if there is a timeout value in the Java client
that can be changed to have it wait longer before timing out. The connection
timeout and the sotimeout value on the socket do not seem to affect it.

Thanks



tsduncan wrote
&gt;<i> I have a rabbit configuration with about 50-60 rabbitmq clients. Some
</I>&gt;<i> connect with python libraries and others with Java. After some time, new
</I>&gt;<i> connections seem to take longer to process and the Java clients time out
</I>&gt;<i> after 10 seconds.
</I>&gt;<i> 
</I>&gt;<i> com.rabbitmq.client.ShutdownSignalException: connection error; reason:
</I>&gt;<i> java.net.SocketTimeoutException: Timeout during Connection negotiation
</I>&gt;<i> 
</I>&gt;<i> There are two issues I'd like to understand: 
</I>&gt;<i> 1. why the server is taking so long to respond causing &gt; 10 second
</I>&gt;<i> responses
</I>&gt;<i> 2. how to extend the java client timeout so they will wait longer than 10
</I>&gt;<i> seconds. I cannot seem to find the right client side control that will
</I>&gt;<i> extend the timeout beyond 10 seconds.
</I>&gt;<i> 
</I>&gt;<i> Here is some information on the client:
</I>&gt;<i> Client Properties  {product=RabbitMQ, information=Licensed under the MPL.
</I>&gt;<i> See <A HREF="http://www.rabbitmq.com/,">http://www.rabbitmq.com/,</A> platform=Java,
</I>&gt;<i> capabilities={exchange_exchange_bindings=true,
</I>&gt;<i> consumer_cancel_notify=true, basic.nack=true, publisher_confirms=true},
</I>&gt;<i> copyright=Copyright (C) 2007-2013 VMware, Inc., version=3.1.0}
</I>&gt;<i> 
</I>&gt;<i> mqConnectionFactory.getConnectionTimeout() = 0
</I>&gt;<i> mqConnectionFactory.getSocketFactory().createSocket().getSoTimeout() = 0
</I>&gt;<i> mqConnectionFactory.getRequestedHeartbeat = 60
</I>&gt;<i> 
</I>&gt;<i> For the server side, I see the following in the logs for the client timing
</I>&gt;<i> out:
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 15-Oct-2013::13:47:19 ===
</I>&gt;<i> accepted TCP connection on [::]:5672 from 172.24.1.197:33543
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 15-Oct-2013::13:47:19 ===
</I>&gt;<i> starting TCP connection &lt;0.19149.1003&gt; from 172.24.1.197:33543
</I>&gt;<i> 
</I>&gt;<i> =WARNING REPORT==== 15-Oct-2013::13:47:19 ===
</I>&gt;<i> exception on TCP connection &lt;0.19149.1003&gt; from 172.24.1.197:33543
</I>&gt;<i> connection_closed_abruptly
</I>&gt;<i> 
</I>&gt;<i> I will attach the full rabbit and sasl.log files.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">clearbay at novamgmt12</A>:/var/log/rabbitmq$ sudo rabbitmqctl status
</I>&gt;<i> Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at novamgmt12</A> ...
</I>&gt;<i> [{pid,2041},
</I>&gt;<i>  {running_applications,
</I>&gt;<i>      [{rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;0.0.0&quot;},
</I>&gt;<i>       {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;0.0.0&quot;},
</I>&gt;<i>       {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;0.0.0&quot;},
</I>&gt;<i>       {rabbit,&quot;RabbitMQ&quot;,&quot;2.7.1&quot;},
</I>&gt;<i>       {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.7&quot;},
</I>&gt;<i>       {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.10&quot;},
</I>&gt;<i>       {rabbitmq_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;0.0.0&quot;},
</I>&gt;<i>       {webmachine,&quot;webmachine&quot;,&quot;1.7.0-rmq0.0.0-hg&quot;},
</I>&gt;<i>       {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;1.3-rmq0.0.0-git&quot;},
</I>&gt;<i>       {inets,&quot;INETS  CXC 138 49&quot;,&quot;5.7.1&quot;},
</I>&gt;<i>       {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.5&quot;},
</I>&gt;<i>       {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.17.5&quot;},
</I>&gt;<i>       {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.14.5&quot;}]},
</I>&gt;<i>  {os,{unix,linux}},
</I>&gt;<i>  {erlang_version,
</I>&gt;<i>      &quot;Erlang R14B04 (erts-5.8.5) [source] [64-bit] [smp:32:32] [rq:32]
</I>&gt;<i> [async-threads:30] [kernel-poll:true]\n&quot;},
</I>&gt;<i>  {memory,
</I>&gt;<i>      [{total,2521927344},
</I>&gt;<i>       {processes,1984606400},
</I>&gt;<i>       {processes_used,1984540336},
</I>&gt;<i>       {system,537320944},
</I>&gt;<i>       {atom,1351233},
</I>&gt;<i>       {atom_used,1331305},
</I>&gt;<i>       {binary,95355176},
</I>&gt;<i>       {code,14331631},
</I>&gt;<i>       {ets,365984592}]},
</I>&gt;<i>  {vm_memory_high_watermark,0.3999999999821877},
</I>&gt;<i>  {vm_memory_limit,13473855897}]
</I>&gt;<i> ...done.
</I>




--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/rabbitmq-client-timeouts-slow-responses-tp30510p30562.html">http://rabbitmq.1065348.n5.nabble.com/rabbitmq-client-timeouts-slow-responses-tp30510p30562.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
</PRE>























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031192.html">[rabbitmq-discuss] rabbitmq client timeouts, slow responses
</A></li>
	<LI>Next message: <A HREF="031017.html">[rabbitmq-discuss] AlreadyClosedException always sets hardError and initiatedByApplication to true
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31082">[ date ]</a>
              <a href="thread.html#31082">[ thread ]</a>
              <a href="subject.html#31082">[ subject ]</a>
              <a href="author.html#31082">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
