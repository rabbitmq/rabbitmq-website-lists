<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Cluster - node hanging on join_cluster - mnesia reporting connection issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Cluster%20-%20node%20hanging%20on%20join_cluster%0A%20-%20mnesia%20reporting%20connection%20issues&In-Reply-To=%3C972634e5-f3fd-48cd-a61f-d202e9329929%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030917.html">
   <LINK REL="Next"  HREF="030885.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Cluster - node hanging on join_cluster - mnesia reporting connection issues</H1>
    <B>Zach Austin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Cluster%20-%20node%20hanging%20on%20join_cluster%0A%20-%20mnesia%20reporting%20connection%20issues&In-Reply-To=%3C972634e5-f3fd-48cd-a61f-d202e9329929%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Cluster - node hanging on join_cluster - mnesia reporting connection issues">zachary.w.austin at gmail.com
       </A><BR>
    <I>Wed Oct  9 18:50:13 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030917.html">[rabbitmq-discuss] RabbitMQ startup error.
</A></li>
        <LI>Next message: <A HREF="030885.html">[rabbitmq-discuss] RabbitMQ Cluster - node hanging on	join_cluster - mnesia reporting connection issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30884">[ date ]</a>
              <a href="thread.html#30884">[ thread ]</a>
              <a href="subject.html#30884">[ subject ]</a>
              <a href="author.html#30884">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

We're having an issue getting one machine in our rabbit cluster back up and 
running after a reboot affected two of the 4 servers in the cluster.

Here is the cluster layout:
rabbit1
rabbit2
rabbit3 (master)
rabbit4

rabbit1 and rabbit2 were rebooted.  Rabbit2 successfully rejoined the 
cluster.  Rabbit1 did not.  Additionally, the rabbitMQ will no longer start 
on rabbit1.

Reviewing the log on rabbit1, I find: Mnesia on 'rabbit1' could not connect 
to node(s) ['rabbit2']

I can ping rabbit1 from rabbit2 and vice-versa.

What I've done so far:
1) Verified the erlang cookie values amongst all cluster nodes are identical
2) Verified the windows firewall is disabled on all cluster nodes.
2) Issued &quot;rabbitmqctl forget_cluster_node rabbit1&quot; on the rabbit3 master.
2) Deleted the mnesia database on rabbit1.
3) Successfully started RabbitMQ on rabbit1 (deleting mnesia DB did this).
4) Issued &quot;rabbitmqctl stop_app&quot;, followed by &quot;rabbitmqctl join_cluster 
rabbit3&quot;.

At this point, rabbitmqctl hangs after the &quot;cluster node... with node... &quot; 
line (I waited over 15 minutes).  Reviewing the log on rabbit1 again, I 
find the same issue logged: Mnesia on 'rabbit1' could not connect to 
node(s) ['rabbit2']

Can anyone point me in the direction of what I should check next?

Thank you.

Zach
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131009/176ff5ce/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131009/176ff5ce/attachment.htm</A>&gt;
</PRE>





































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030917.html">[rabbitmq-discuss] RabbitMQ startup error.
</A></li>
	<LI>Next message: <A HREF="030885.html">[rabbitmq-discuss] RabbitMQ Cluster - node hanging on	join_cluster - mnesia reporting connection issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30884">[ date ]</a>
              <a href="thread.html#30884">[ thread ]</a>
              <a href="subject.html#30884">[ subject ]</a>
              <a href="author.html#30884">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
