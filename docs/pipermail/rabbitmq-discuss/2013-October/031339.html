<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Management API and monitoring
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20API%20and%20monitoring&In-Reply-To=%3CCAD6m6fFOB5FcCkJpuR8W5gk0PYJ6v14%3DgO%2BdMjR2EiRO0hJ-1g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031385.html">
   <LINK REL="Next"  HREF="031348.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Management API and monitoring</H1>
    <B>Jason McIntosh</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20API%20and%20monitoring&In-Reply-To=%3CCAD6m6fFOB5FcCkJpuR8W5gk0PYJ6v14%3DgO%2BdMjR2EiRO0hJ-1g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Management API and monitoring">mcintoshj at gmail.com
       </A><BR>
    <I>Thu Oct 24 17:48:30 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031385.html">[rabbitmq-discuss] [rabbitmq] /var/log/messages flooded with su: (to rabbitmq) root on none
</A></li>
        <LI>Next message: <A HREF="031348.html">[rabbitmq-discuss] Management API and monitoring
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31339">[ date ]</a>
              <a href="thread.html#31339">[ thread ]</a>
              <a href="subject.html#31339">[ subject ]</a>
              <a href="author.html#31339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>SO I'm working on a set of monitoring tools (already have some python
scripts built for Nagios, now looking at Zabbix templates) to monitor
rabbit queues and their information.  The basic stuff I've got setup and
working right now are:

queue memory
queue messages
queue unack'd messages
queue consumers

aliveness of a vhost
mem used/limit
disk free/limit
fd used/limit
proc used/limit
sockets used/limit

The question I have is on the queue - I'd like to be able to monitor when
the queue was last &quot;accessed&quot; for message publishes.  I was looking at the
idle_since but it looks like the date there gets reset anytime you even
look at the list of queues.  Is there some field I'm missing that might
have that information?  Ideally, I'd like to alert on for example &quot;This
queue hasn't received messages in quite a long while, possibly the
publisher is not publishing messages correctly&quot;.  Anyone have any thoughts?
 Suggestions?  Other things they monitor?

One interesting thing I noticed while working on monitoring.  rabbitmqctl
does not seem like a very efficient mechanism for use by monitoring tools.
 I started off using ctl to get various queue and server information and
found that it was extremely expensive to call repeatedly.  I tried using
some python scripts to hit the management API and my CPU load went down by
about 70%.  Not sure if other people have seem the same using rabbitmqctl?

Thanks!
Jason

-- 
Jason McIntosh
<A HREF="https://github.com/jasonmcintosh/">https://github.com/jasonmcintosh/</A>
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131024/9ed68191/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131024/9ed68191/attachment.htm</A>&gt;
</PRE>



















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031385.html">[rabbitmq-discuss] [rabbitmq] /var/log/messages flooded with su: (to rabbitmq) root on none
</A></li>
	<LI>Next message: <A HREF="031348.html">[rabbitmq-discuss] Management API and monitoring
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31339">[ date ]</a>
              <a href="thread.html#31339">[ thread ]</a>
              <a href="subject.html#31339">[ subject ]</a>
              <a href="author.html#31339">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
