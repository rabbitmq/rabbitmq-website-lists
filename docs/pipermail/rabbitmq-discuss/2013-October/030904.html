<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Connection blocked by &quot;flow&quot; for more than	600 seconds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connection%20blocked%20by%20%22flow%22%20for%20more%20than%0A%09600%20seconds&In-Reply-To=%3C1381458152747-30402.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030876.html">
   <LINK REL="Next"  HREF="030932.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Connection blocked by &quot;flow&quot; for more than	600 seconds</H1>
    <B>Choo</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connection%20blocked%20by%20%22flow%22%20for%20more%20than%0A%09600%20seconds&In-Reply-To=%3C1381458152747-30402.post%40n5.nabble.com%3E"
       TITLE="[rabbitmq-discuss] Connection blocked by &quot;flow&quot; for more than	600 seconds">e34_520 at yahoo.com
       </A><BR>
    <I>Fri Oct 11 03:22:32 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030876.html">[rabbitmq-discuss] Connection blocked by &quot;flow&quot; for more than 600 seconds
</A></li>
        <LI>Next message: <A HREF="030932.html">[rabbitmq-discuss] Connection blocked by &quot;flow&quot; for more than 600 seconds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30904">[ date ]</a>
              <a href="thread.html#30904">[ thread ]</a>
              <a href="subject.html#30904">[ subject ]</a>
              <a href="author.html#30904">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Simon,

As memory is plenty, I found that file descriptors hit the default limit,
so, I bumped the limit up to 5,120, and finally to 10,240 on each nodes.  It
turned out that the file descriptors also touched the limit (around 10,086),
and things started to go downhill.

&lt;<A HREF="http://rabbitmq.1065348.n5.nabble.com/file/n30402/ScreenShot.jpg">http://rabbitmq.1065348.n5.nabble.com/file/n30402/ScreenShot.jpg</A>&gt; 

I started processes in reverse order, by starting subscriber-side first
(1:42), then the bigger publishers later (1:45).  The number of published
messages bounced up&amp;down, then just after 1:48, the most of the publishers
were blocked.

There are more than 350 of blocked connections like below now (and file
descriptors are running at 7,558 + 4,647 on 2 nodes):
10.95.212.11:33751 -&gt; 10.95.212.13:5672	blocked	1261.558817	flow
10.95.212.11:33752 -&gt; 10.95.212.13:5672	blocked	1326.324919	flow
10.95.212.11:33753 -&gt; 10.95.212.13:5672	blocked	1326.45322	flow
10.95.212.11:33754 -&gt; 10.95.212.13:5672	blocked	1278.581221	flow
10.95.212.11:33755 -&gt; 10.95.212.13:5672	blocked	1312.584426	flow
10.95.212.11:33756 -&gt; 10.95.212.13:5672	blocked	1279.623625	flow
10.95.212.11:33757 -&gt; 10.95.212.13:5672	blocked	1294.492535	flow
10.95.212.11:33758 -&gt; 10.95.212.13:5672	blocked	1276.134377	flow
10.95.212.11:33759 -&gt; 10.95.212.13:5672	blocked	1292.862081	flow
10.95.212.11:33760 -&gt; 10.95.212.13:5672	blocked	1290.695249	flow
10.95.212.11:33761 -&gt; 10.95.212.13:5672	blocked	1255.599642	flow
10.95.212.11:33762 -&gt; 10.95.212.13:5672	blocked	1284.984752	flow

Please kindly suggest.

Thank you and Best Regards,
Choo



--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/Connection-blocked-by-flow-for-more-than-600-seconds-tp30349p30402.html">http://rabbitmq.1065348.n5.nabble.com/Connection-blocked-by-flow-for-more-than-600-seconds-tp30349p30402.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
</PRE>












































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030876.html">[rabbitmq-discuss] Connection blocked by &quot;flow&quot; for more than 600 seconds
</A></li>
	<LI>Next message: <A HREF="030932.html">[rabbitmq-discuss] Connection blocked by &quot;flow&quot; for more than 600 seconds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30904">[ date ]</a>
              <a href="thread.html#30904">[ thread ]</a>
              <a href="subject.html#30904">[ subject ]</a>
              <a href="author.html#30904">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
