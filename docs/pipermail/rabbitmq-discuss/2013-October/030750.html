<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ with STOMP, messages that are requested after 10 min delay doesn't work there after
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20with%20STOMP%2C%0A%20messages%20that%20are%20requested%20after%2010%20min%20delay%20doesn%27t%20work%20there%0A%20after&In-Reply-To=%3C3fd788c1-a160-4d11-88b2-652b5a47c2b1%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031042.html">
   <LINK REL="Next"  HREF="030766.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ with STOMP, messages that are requested after 10 min delay doesn't work there after</H1>
    <B>Suhaib Fahad</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20with%20STOMP%2C%0A%20messages%20that%20are%20requested%20after%2010%20min%20delay%20doesn%27t%20work%20there%0A%20after&In-Reply-To=%3C3fd788c1-a160-4d11-88b2-652b5a47c2b1%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ with STOMP, messages that are requested after 10 min delay doesn't work there after">fahad007 at gmail.com
       </A><BR>
    <I>Sun Oct  6 13:56:42 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031042.html">[rabbitmq-discuss] mirrored queue cluster
</A></li>
        <LI>Next message: <A HREF="030766.html">[rabbitmq-discuss] RabbitMQ with STOMP, messages that are requested after 10 min delay doesn't work there after
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30750">[ date ]</a>
              <a href="thread.html#30750">[ thread ]</a>
              <a href="subject.html#30750">[ subject ]</a>
              <a href="author.html#30750">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have a rabbitmq setup that uses STOMP as a means to talk to end user 
devices (android/websockets in the browser). The situation is there is a 
problem if I wait for 10 mins between messages and then try to send some 
message from server -&gt; client, the client never receives it. I tried this 
in 2 systems, with different behaviors,


   - Dev VM - 4 core windows server
      - The issue gets reproduced very very rarely but happens after 
      working for an hour or so
   - Test VM - 1 core windows server
      - The issue gets reproduced often immediately after 10 mins.
   
I believe its a configuration issue, because as soon as I close my app (in 
android) or refresh the browser, it works immediately. Does this mean, 
rabbitmq somehow marks a STOMP queue stale after some timeout? 

Some more points to add up the discussion,


   - I use STOMP 1.0 definition in the header
   - No headers for heart-beating (its disabled by default in the protocol, 
   so I dint add it in the header), just thought to mention it.
   - All messages are send using UTF8 format

The server has a AMQP queue handle which is used to send messages as UTF8 
format, client receives it via STOMP but listening over amqp queue by using 
the standards mentioned in the documentation. This works whenever I have a 
new connection or restart the app, but fails after I wait for 10-15 mins, 
Is it something related to the 1-core machine? Does Erlang has to do 
anything here? or rabbitmq marks the STOMP queue stale? This never happened 
before when I used only AMQP queues, (point to remember is I can't use AMQP 
in my end client apps as its very big to implement + I use the same 
messaging layer over the web using websockets).

Any ideas or things that I need to check would be really helpful.

Thanks,
Suhaib
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131006/874fb4c1/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131006/874fb4c1/attachment.htm</A>&gt;
</PRE>




















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031042.html">[rabbitmq-discuss] mirrored queue cluster
</A></li>
	<LI>Next message: <A HREF="030766.html">[rabbitmq-discuss] RabbitMQ with STOMP, messages that are requested after 10 min delay doesn't work there after
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30750">[ date ]</a>
              <a href="thread.html#30750">[ thread ]</a>
              <a href="subject.html#30750">[ subject ]</a>
              <a href="author.html#30750">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
