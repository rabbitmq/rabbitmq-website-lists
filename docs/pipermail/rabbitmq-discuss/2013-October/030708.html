<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] mirrored queue cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20mirrored%20queue%20cluster&In-Reply-To=%3CCAKgmDnHoCw5Jc143nRDLEJ_-eKjk8RQtGUqPpmNLasKGRzbNYg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030701.html">
   <LINK REL="Next"  HREF="030712.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] mirrored queue cluster</H1>
    <B>Laing, Michael</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20mirrored%20queue%20cluster&In-Reply-To=%3CCAKgmDnHoCw5Jc143nRDLEJ_-eKjk8RQtGUqPpmNLasKGRzbNYg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] mirrored queue cluster">michael.laing at nytimes.com
       </A><BR>
    <I>Fri Oct  4 16:28:58 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030701.html">[rabbitmq-discuss] mirrored queue cluster
</A></li>
        <LI>Next message: <A HREF="030712.html">[rabbitmq-discuss] mirrored queue cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30708">[ date ]</a>
              <a href="thread.html#30708">[ thread ]</a>
              <a href="subject.html#30708">[ subject ]</a>
              <a href="author.html#30708">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We run mirrored queues within multiple parallel clusters in the 'backend'.

Internal apps are load-balanced into these 'pipelines'.

'Frontend' rabbits consume from each pipeline, and serve client apps via
load balancers, and our own gateway.

The 'frontends' autoscale out, depending upon actual load and predicted
load.

The 'backends' are first scaled up (larger boxes) and then more pipelines
are added (scale out).

One piece of advice for performance: do not use persistence. We use
Cassandra for that purpose: replica resolution, journaling, etc., and can
continuously run analysis a couple minutes after the fact that shows
latencies, outages, and so forth across the entire fabric from an
application point of view.

In fact our project is called 'nyt&#10765;a&#1073;rik'.

Our deployment spans multiple AWS regions, multiple zones per region, and
is headless.

We're currently transitioning into production so we don't have much time to
discuss, but we will do comprehensive blog posts, github projects etc about
the architecture including detailed configurations, frameworks, and so
forth later this year/early next. Almost all components will be
open-sourced.

Michael




On Fri, Oct 4, 2013 at 10:48 AM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael at rabbitmq.com</A>&gt;wrote:

&gt;<i>
</I>&gt;<i> On oct 4, 2013, at 6:40 p.m., &quot;PATAR, SAGAR&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sp345s at att.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Below when u say queues ..do you mean Exchanges ??
</I>&gt;<i>
</I>&gt;<i> When I say &quot;queues&quot; I mean &quot;queues&quot;.
</I>&gt;<i>
</I>&gt;<i> &gt; Do you suggest to have separate queues per consuming system (dynamically
</I>&gt;<i> by the consumer ??)
</I>&gt;<i>
</I>&gt;<i> I'm not sure what &quot;consuming system&quot; means but yes, if you can use
</I>&gt;<i> multiple queues in
</I>&gt;<i> some cases, do that. E.g. if you are streaming log events and have 5
</I>&gt;<i> severities,
</I>&gt;<i> you can use a Single Giant Queue&#8482; (SGQ) or 5 smaller queues, one per
</I>&gt;<i> severity. 5 smaller
</I>&gt;<i> queues will both utilize your hardware resources better and will let you
</I>&gt;<i> distributed
</I>&gt;<i> the load across nodes.
</I>&gt;<i>
</I>&gt;<i> SGQ is not a great design decision in general, but especially so for
</I>&gt;<i> loaded systems.
</I>&gt;<i>
</I>&gt;<i> Note that it's perfectly fine and not uncommon for a single application or
</I>&gt;<i> instance
</I>&gt;<i> to consume from multiple queues.
</I>&gt;<i>
</I>&gt;<i> MK
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131004/e5392c2a/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131004/e5392c2a/attachment.htm</A>&gt;
</PRE>














































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030701.html">[rabbitmq-discuss] mirrored queue cluster
</A></li>
	<LI>Next message: <A HREF="030712.html">[rabbitmq-discuss] mirrored queue cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30708">[ date ]</a>
              <a href="thread.html#30708">[ thread ]</a>
              <a href="subject.html#30708">[ subject ]</a>
              <a href="author.html#30708">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
