<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Memory High Watermark.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20High%20Watermark.&In-Reply-To=%3C525EAA13.7060309%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031050.html">
   <LINK REL="Next"  HREF="031057.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Memory High Watermark.</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20High%20Watermark.&In-Reply-To=%3C525EAA13.7060309%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Memory High Watermark.">simon at rabbitmq.com
       </A><BR>
    <I>Wed Oct 16 16:00:35 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031050.html">[rabbitmq-discuss] Memory High Watermark.
</A></li>
        <LI>Next message: <A HREF="031057.html">[rabbitmq-discuss] Memory High Watermark.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31053">[ date ]</a>
              <a href="thread.html#31053">[ thread ]</a>
              <a href="subject.html#31053">[ subject ]</a>
              <a href="author.html#31053">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 16/10/13 15:43, Chris Nicel wrote:
&gt;<i> I would like to know more about the decision to default the memory high
</I>&gt;<i> watermark to 40% of the installed RAM. Is this designed for use on a
</I>&gt;<i> server with contended resources? If the server is dedicated to running
</I>&gt;<i> RabbitMQ can this be raised to say 80% or 90% safely?
</I>
The original reason was a fear that although Erlang has per-process GC, 
we could theoretically end up in a situation where one process filled 
most of the VM, and the extra space required to GC it caused the machine 
to run out of space altogether.

That's quite unlikely though, the typical case is likely to be a VM with 
no one process dominating.

There's a second reason which I find more compelling: the high watermark 
is the point at which the broker stops accepting new messages, not the 
point at which it stops consuming more memory. In theory the one 
controls the other, but in practice there's likely to be some hysteresis.

We can't assume that swap space exists either, we have to assume that if 
we run out of memory then that's game over. If like almost everybody you 
do have swap space working then you can probably raise the limit 
somewhat. Personally I would be comfortable at 60 or 70%.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>






















































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031050.html">[rabbitmq-discuss] Memory High Watermark.
</A></li>
	<LI>Next message: <A HREF="031057.html">[rabbitmq-discuss] Memory High Watermark.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31053">[ date ]</a>
              <a href="thread.html#31053">[ thread ]</a>
              <a href="subject.html#31053">[ subject ]</a>
              <a href="author.html#31053">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
