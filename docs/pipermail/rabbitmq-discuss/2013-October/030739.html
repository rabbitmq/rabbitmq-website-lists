<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] mirrored queue cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20mirrored%20queue%20cluster&In-Reply-To=%3C59BF56992750434F89F8EBE141E64B1D01820698%40GAALPA1MSGUSR9C.ITServices.sbc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030737.html">
   <LINK REL="Next"  HREF="030777.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] mirrored queue cluster</H1>
    <B>PATAR, SAGAR</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20mirrored%20queue%20cluster&In-Reply-To=%3C59BF56992750434F89F8EBE141E64B1D01820698%40GAALPA1MSGUSR9C.ITServices.sbc.com%3E"
       TITLE="[rabbitmq-discuss] mirrored queue cluster">sp345s at att.com
       </A><BR>
    <I>Fri Oct  4 21:51:16 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030737.html">[rabbitmq-discuss] mirrored queue cluster
</A></li>
        <LI>Next message: <A HREF="030777.html">[rabbitmq-discuss] mirrored queue cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30739">[ date ]</a>
              <a href="thread.html#30739">[ thread ]</a>
              <a href="subject.html#30739">[ subject ]</a>
              <a href="author.html#30739">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You can have multiple consumers per queue. On exclusive queues, they all have to be on the same connection.
--&gt; will each consumer get a copy of the message?  Also connections will be different as the clients are different ...


&quot;If that's not sufficient, you can use exchange-to-exchange bindings to first distribute
messages between exchanges and those (fanout) exchanges will distribute messages
between queues.
That is only necessary if every consumer needs to get a copy of every message. If that's not
the case, simply add as many consumers as necessary on every queue.&quot;

We have exactly the above scenario BUT we don't want to create multiple queues .. one for each client and have them consume a copy ...
In the above case looks like we have to mirror all the queues from fanout exchange ..?? is there any way we can avoid that ..

Also when a new clients come in we have to create a new Queue ..... manual change we want to avoid ...I know we can have an exchange and have them consume from there but to avoid failover scenarios we have to have a queue and then mirror it right ...

-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Michael Klishin
Sent: Friday, October 04, 2013 4:38 PM
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] mirrored queue cluster


On oct 5, 2013, at 12:30 a.m., &quot;PATAR, SAGAR&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sp345s at att.com</A>&gt; wrote:

&gt;<i> Only 1 consumer can consume a message from a Queue right ...
</I>
You can have multiple consumers per queue. On exclusive queues, they all have to be
on the same connection.

&gt;<i> With multiple clients we are expecting multiple consumers .. and we need to have the same message consumed by all the consumers ..
</I>&gt;<i> I have seen the tutorial from that it looks like each consumer needs to have a separate queue and so a copy of a message will be forwarded ...
</I>
If that's not sufficient, you can use exchange-to-exchange bindings to first distribute
messages between exchanges and those (fanout) exchanges will distribute messages
between queues.

That is only necessary if every consumer needs to get a copy of every message. If that's not
the case, simply add as many consumers as necessary on every queue.

&gt;<i> In case we are mirroring queues..Why do we want to mirror all the queues since they have exactly same messages ...
</I>
Mirrored queues is a high availability feature. If only one node in a cluster has contents of a queue
and that node fails, the entire queue content is gone. With mirrored queues, one of the mirrors
is promoted to master.

MK



</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030737.html">[rabbitmq-discuss] mirrored queue cluster
</A></li>
	<LI>Next message: <A HREF="030777.html">[rabbitmq-discuss] mirrored queue cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30739">[ date ]</a>
              <a href="thread.html#30739">[ thread ]</a>
              <a href="subject.html#30739">[ subject ]</a>
              <a href="author.html#30739">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
