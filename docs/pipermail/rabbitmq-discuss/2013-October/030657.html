<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Questiong about plugins and clustering
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Questiong%20about%20plugins%20and%20clustering&In-Reply-To=%3CCAMcAHLUKKKrukuhc77Z3Hf4%3DguzfUhM%3Dn3a5V96AytuUHNc9MA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030674.html">
   <LINK REL="Next"  HREF="030668.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Questiong about plugins and clustering</H1>
    <B>Alvaro Videla</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Questiong%20about%20plugins%20and%20clustering&In-Reply-To=%3CCAMcAHLUKKKrukuhc77Z3Hf4%3DguzfUhM%3Dn3a5V96AytuUHNc9MA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Questiong about plugins and clustering">videlalvaro at gmail.com
       </A><BR>
    <I>Fri Oct  4 01:38:46 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030674.html">[rabbitmq-discuss] Question regarding setting up a shovel within a cluster
</A></li>
        <LI>Next message: <A HREF="030668.html">[rabbitmq-discuss] Questiong about plugins and clustering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30657">[ date ]</a>
              <a href="thread.html#30657">[ thread ]</a>
              <a href="subject.html#30657">[ subject ]</a>
              <a href="author.html#30657">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Emile,

I started a plugin which main logic is the gen_server here:
<A HREF="https://gist.github.com/videlalvaro/6819225">https://gist.github.com/videlalvaro/6819225</A>

As you can see it will subscribe to mnesia system events and also it will
listen into the amq.rabbitmq.log exchange.

The problem is that when I make other nodes join the cluster, it will not
always receive the message from the amq.rabbitmq.log exchange, also the
mnesia system events appear to not always be broadcasted.

Any ideas on what I might be doing wrong?

Regards,

Alvaro


On Mon, Sep 23, 2013 at 4:06 AM, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi Alvaro,
</I>&gt;<i>
</I>&gt;<i> On 21/09/13 02:53, Alvaro Videla wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Is there a way for a plugin to know when a node joins or leaves the
</I>&gt;<i> &gt; cluster?
</I>&gt;<i>
</I>&gt;<i> A plugin could subscribe to Mnesia system events that will report when
</I>&gt;<i> Mnesia stops and starts on nodes:
</I>&gt;<i>  <A HREF="http://www.erlang.org/doc/apps/mnesia/Mnesia_chap5.html#id76679">http://www.erlang.org/doc/apps/mnesia/Mnesia_chap5.html#id76679</A>
</I>&gt;<i>
</I>&gt;<i> Depending on the kind of plugin you are writing you could use the
</I>&gt;<i> information sent to the log exchange (amq.rabbitmq.log) to determine
</I>&gt;<i> when nodes leave and join.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -Emile
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131003/e52744c7/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131003/e52744c7/attachment.htm</A>&gt;
</PRE>
























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030674.html">[rabbitmq-discuss] Question regarding setting up a shovel within a cluster
</A></li>
	<LI>Next message: <A HREF="030668.html">[rabbitmq-discuss] Questiong about plugins and clustering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30657">[ date ]</a>
              <a href="thread.html#30657">[ thread ]</a>
              <a href="subject.html#30657">[ subject ]</a>
              <a href="author.html#30657">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
