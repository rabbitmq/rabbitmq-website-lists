<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to determine if my message was publish	successfully
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20determine%20if%20my%20message%20was%20publish%0A%09successfully&In-Reply-To=%3C221E959E-4BAD-463A-AEEF-264E281C3DD6%40gopivotal.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031524.html">
   <LINK REL="Next"  HREF="031526.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to determine if my message was publish	successfully</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20determine%20if%20my%20message%20was%20publish%0A%09successfully&In-Reply-To=%3C221E959E-4BAD-463A-AEEF-264E281C3DD6%40gopivotal.com%3E"
       TITLE="[rabbitmq-discuss] How to determine if my message was publish	successfully">mklishin at gopivotal.com
       </A><BR>
    <I>Wed Oct 30 21:16:31 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031524.html">[rabbitmq-discuss] How to determine if my message was publish	successfully
</A></li>
        <LI>Next message: <A HREF="031526.html">[rabbitmq-discuss] How to determine if my message was publish	successfully
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31525">[ date ]</a>
              <a href="thread.html#31525">[ thread ]</a>
              <a href="subject.html#31525">[ subject ]</a>
              <a href="author.html#31525">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 31 Oct 2013, at 01:12, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt; wrote:

&gt;<i> You can do something like
</I>&gt;<i> 
</I>&gt;<i> Exception e;
</I>&gt;<i> ch.addReturnListener(
</I>&gt;<i>  // initialize e here from message attributes 
</I>&gt;<i> );
</I>&gt;<i> ch.basicPublish(&#8230;);
</I>&gt;<i> ch.waitForConfirms();
</I>&gt;<i> 
</I>&gt;<i> if(e != null) {
</I>&gt;<i>  throw e;
</I>&gt;<i> }
</I>
I should add that this code is race condition prone and should
not be literally as is. It was only to demonstrate the basic idea.

The return listener will be racing with waitForConfirm even if
Rabbit delivers basic.return before basic.nack.
--
MK

Software Engineer, Pivotal/RabbitMQ

</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031524.html">[rabbitmq-discuss] How to determine if my message was publish	successfully
</A></li>
	<LI>Next message: <A HREF="031526.html">[rabbitmq-discuss] How to determine if my message was publish	successfully
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31525">[ date ]</a>
              <a href="thread.html#31525">[ thread ]</a>
              <a href="subject.html#31525">[ subject ]</a>
              <a href="author.html#31525">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
