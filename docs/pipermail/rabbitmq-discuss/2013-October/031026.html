<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq client timeouts, slow responses
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20client%20timeouts%2C%20slow%20responses&In-Reply-To=%3C1381871593738-30510.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031069.html">
   <LINK REL="Next"  HREF="031030.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq client timeouts, slow responses</H1>
    <B>tsduncan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20client%20timeouts%2C%20slow%20responses&In-Reply-To=%3C1381871593738-30510.post%40n5.nabble.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq client timeouts, slow responses">terrysduncan at gmail.com
       </A><BR>
    <I>Tue Oct 15 22:13:13 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031069.html">[rabbitmq-discuss] Stupid Newbie Question - what is the uri or	a queue?
</A></li>
        <LI>Next message: <A HREF="031030.html">[rabbitmq-discuss] rabbitmq client timeouts, slow responses
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31026">[ date ]</a>
              <a href="thread.html#31026">[ thread ]</a>
              <a href="subject.html#31026">[ subject ]</a>
              <a href="author.html#31026">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a rabbit configuration with about 50-60 rabbitmq clients. Some connect
with python libraries and others with Java. After some time, new connections
seem to take longer to process and the Java clients time out after 10
seconds.

com.rabbitmq.client.ShutdownSignalException: connection error; reason:
java.net.SocketTimeoutException: Timeout during Connection negotiation

There are two issues I'd like to understand: 
1. why the server is taking so long to respond causing &gt; 10 second responses
2. how to extend the java client timeout so they will wait longer than 10
seconds. I cannot seem to find the right client side control that will
extend the timeout beyond 10 seconds.

Here is some information on the client:
Client Properties  {product=RabbitMQ, information=Licensed under the MPL.
See <A HREF="http://www.rabbitmq.com/,">http://www.rabbitmq.com/,</A> platform=Java,
capabilities={exchange_exchange_bindings=true, consumer_cancel_notify=true,
basic.nack=true, publisher_confirms=true}, copyright=Copyright (C) 2007-2013
VMware, Inc., version=3.1.0}

mqConnectionFactory.getConnectionTimeout() = 0
mqConnectionFactory.getSocketFactory().createSocket().getSoTimeout() = 0
mqConnectionFactory.getRequestedHeartbeat = 60

For the server side, I see the following in the logs for the client timing
out:

=INFO REPORT==== 15-Oct-2013::13:47:19 ===
accepted TCP connection on [::]:5672 from 172.24.1.197:33543

=INFO REPORT==== 15-Oct-2013::13:47:19 ===
starting TCP connection &lt;0.19149.1003&gt; from 172.24.1.197:33543

=WARNING REPORT==== 15-Oct-2013::13:47:19 ===
exception on TCP connection &lt;0.19149.1003&gt; from 172.24.1.197:33543
connection_closed_abruptly

I will attach the full rabbit and sasl.log files.



<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">clearbay at novamgmt12</A>:/var/log/rabbitmq$ sudo rabbitmqctl status
Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at novamgmt12</A> ...
[{pid,2041},
 {running_applications,
     [{rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;0.0.0&quot;},
      {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;0.0.0&quot;},
      {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;0.0.0&quot;},
      {rabbit,&quot;RabbitMQ&quot;,&quot;2.7.1&quot;},
      {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.7&quot;},
      {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.10&quot;},
      {rabbitmq_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;0.0.0&quot;},
      {webmachine,&quot;webmachine&quot;,&quot;1.7.0-rmq0.0.0-hg&quot;},
      {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;1.3-rmq0.0.0-git&quot;},
      {inets,&quot;INETS  CXC 138 49&quot;,&quot;5.7.1&quot;},
      {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.5&quot;},
      {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.17.5&quot;},
      {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.14.5&quot;}]},
 {os,{unix,linux}},
 {erlang_version,
     &quot;Erlang R14B04 (erts-5.8.5) [source] [64-bit] [smp:32:32] [rq:32]
[async-threads:30] [kernel-poll:true]\n&quot;},
 {memory,
     [{total,2521927344},
      {processes,1984606400},
      {processes_used,1984540336},
      {system,537320944},
      {atom,1351233},
      {atom_used,1331305},
      {binary,95355176},
      {code,14331631},
      {ets,365984592}]},
 {vm_memory_high_watermark,0.3999999999821877},
 {vm_memory_limit,13473855897}]
...done.




--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/rabbitmq-client-timeouts-slow-responses-tp30510.html">http://rabbitmq.1065348.n5.nabble.com/rabbitmq-client-timeouts-slow-responses-tp30510.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
</PRE>






































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031069.html">[rabbitmq-discuss] Stupid Newbie Question - what is the uri or	a queue?
</A></li>
	<LI>Next message: <A HREF="031030.html">[rabbitmq-discuss] rabbitmq client timeouts, slow responses
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31026">[ date ]</a>
              <a href="thread.html#31026">[ thread ]</a>
              <a href="subject.html#31026">[ subject ]</a>
              <a href="author.html#31026">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
