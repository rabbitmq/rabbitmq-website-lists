<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Weird error on 3.2.0 causing failures
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Weird%20error%20on%203.2.0%20causing%20failures&In-Reply-To=%3CCAD6m6fFq46%3DKfTqZRwHp1vhBvEvzJqF0bZeSw7y4xV%2B7ewgD3g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031558.html">
   <LINK REL="Next"  HREF="031561.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Weird error on 3.2.0 causing failures</H1>
    <B>Jason McIntosh</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Weird%20error%20on%203.2.0%20causing%20failures&In-Reply-To=%3CCAD6m6fFq46%3DKfTqZRwHp1vhBvEvzJqF0bZeSw7y4xV%2B7ewgD3g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Weird error on 3.2.0 causing failures">mcintoshj at gmail.com
       </A><BR>
    <I>Thu Oct 31 16:47:58 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031558.html">[rabbitmq-discuss] segfault in beam.smp
</A></li>
        <LI>Next message: <A HREF="031561.html">[rabbitmq-discuss] Weird error on 3.2.0 causing failures
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31559">[ date ]</a>
              <a href="thread.html#31559">[ thread ]</a>
              <a href="subject.html#31559">[ subject ]</a>
              <a href="author.html#31559">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We have a consumer process that's just dying repeatedly throwing low level
channel errors.  This is using amqp-client 3.2.0.  We've tried with an
earlier version as well.  We die as soon as we try and do a basicConsume on
the channel.  On the server, I found the below logs.


Just wanted to see if anyone had any ideas?  We deleted the messages,
published them again and our consumer works fine.  This has us pretty
confused.  The ONLY guess I have right now is some sort of funky character
or a blank tag somehow got in, but I can't imagine what that would be -
nothing here seems out of place.  Note, the original problem message was
published through the management GUI.

Thanks for any advice!

Jason





=SUPERVISOR REPORT==== 31-Oct-2013::11:30:42 ===

     Supervisor: {&lt;0.1276.61&gt;,rabbit_channel_sup}

     Context:    child_terminated

     Reason:     badarg

     Offender:   [{pid,&lt;0.1275.61&gt;},

                  {name,writer},

                  {mfargs,

                      {rabbit_writer,start_link,


[#Port&lt;0.347665&gt;,2,131072,rabbit_framing_amqp_0_9_1,

                           &lt;0.1278.61&gt;,true]}},

                  {restart_type,intrinsic},

                  {shutdown,4294967295},

                  {child_type,worker}]





=SUPERVISOR REPORT==== 31-Oct-2013::11:30:42 ===

     Supervisor: {&lt;0.1276.61&gt;,rabbit_channel_sup}

     Context:    shutdown

     Reason:     reached_max_restart_intensity

     Offender:   [{pid,&lt;0.1275.61&gt;},

                  {name,writer},

                  {mfargs,

                      {rabbit_writer,start_link,


[#Port&lt;0.347665&gt;,2,131072,rabbit_framing_amqp_0_9_1,

                           &lt;0.1278.61&gt;,true]}},

                  {restart_type,intrinsic},

                  {shutdown,4294967295},

                  {child_type,worker}]





=CRASH REPORT==== 31-Oct-2013::11:30:43 ===

  crasher:

    initial call: rabbit_writer:mainloop/2

    pid: &lt;0.1299.61&gt;

    registered_name: []

    exception error: bad argument

      in function  rabbit_framing_amqp_0_9_1:encode_properties/1

      in call from rabbit_binary_generator:ensure_content_encoded/2

      in call from rabbit_binary_generator:build_simple_content_frames/4

      in call from rabbit_writer:assemble_frames/5

      in call from rabbit_writer:internal_send_command_async/3

      in call from rabbit_writer:handle_message/2

      in call from rabbit_writer:handle_message/3

      in call from rabbit_writer:mainloop1/2

    ancestors: [&lt;0.1300.61&gt;,&lt;0.1303.61&gt;,&lt;0.1272.61&gt;,&lt;0.1273.61&gt;,

                  rabbit_tcp_client_sup,rabbit_sup,&lt;0.165.0&gt;]

    messages: [{send_command_and_notify,&lt;0.14808.16&gt;,&lt;0.1293.61&gt;,


{'basic.deliver',&lt;&lt;&quot;amq.ctag-y_Tr2BuZFgx7A3XAmXxzSg&quot;&gt;&gt;,

                          2,true,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;extractions.summarizer&quot;&gt;&gt;},

                     {content,60,

                          {'P_basic',&lt;&lt;&quot;text/plain&quot;&gt;&gt;,&lt;&lt;&quot;UTF-8&quot;&gt;&gt;,[],1,


&lt;&lt;&quot;0&quot;&gt;&gt;,undefined,undefined,undefined,undefined,

                              undefined,undefined,undefined,undefined,

                              undefined},

                          none,none,


[&lt;&lt;&quot;{\&quot;jobName\&quot;:\&quot;BIGFauxTest2\&quot;,\&quot;creationTime\&quot;:\&quot;10-03-2013
14:36:10\&quot;}&quot;&gt;&gt;]}}]

    links: [&lt;0.1300.61&gt;]

    dictionary: []

    trap_exit: false

    status: running

    heap_size: 376

    stack_size: 27

    reductions: 423

  neighbours:



=SUPERVISOR REPORT==== 31-Oct-2013::11:30:43 ===

     Supervisor: {&lt;0.1300.61&gt;,rabbit_channel_sup}

     Context:    child_terminated

     Reason:     badarg

     Offender:   [{pid,&lt;0.1299.61&gt;},

                  {name,writer},

                  {mfargs,

                      {rabbit_writer,start_link,


[#Port&lt;0.347666&gt;,2,131072,rabbit_framing_amqp_0_9_1,

                           &lt;0.1271.61&gt;,true]}},

                  {restart_type,intrinsic},

                  {shutdown,4294967295},

                  {child_type,worker}]





=SUPERVISOR REPORT==== 31-Oct-2013::11:30:43 ===

     Supervisor: {&lt;0.1300.61&gt;,rabbit_channel_sup}

     Context:    shutdown

     Reason:     reached_max_restart_intensity

     Offender:   [{pid,&lt;0.1299.61&gt;},

                  {name,writer},

                  {mfargs,

                      {rabbit_writer,start_link,


[#Port&lt;0.347666&gt;,2,131072,rabbit_framing_amqp_0_9_1,

                           &lt;0.1271.61&gt;,true]}},

                  {restart_type,intrinsic},

                  {shutdown,4294967295},

                  {child_type,worker}]





=CRASH REPORT==== 31-Oct-2013::11:30:43 ===

  crasher:

    initial call: rabbit_writer:mainloop/2

    pid: &lt;0.1325.61&gt;

    registered_name: []

    exception error: bad argument

      in function  rabbit_framing_amqp_0_9_1:encode_properties/1

      in call from rabbit_binary_generator:ensure_content_encoded/2

      in call from rabbit_binary_generator:build_simple_content_frames/4

      in call from rabbit_writer:assemble_frames/5

      in call from rabbit_writer:internal_send_command_async/3

      in call from rabbit_writer:handle_message/2

      in call from rabbit_writer:handle_message/3

      in call from rabbit_writer:mainloop1/2

    ancestors: [&lt;0.1323.61&gt;,&lt;0.1317.61&gt;,&lt;0.1296.61&gt;,&lt;0.1297.61&gt;,

                  rabbit_tcp_client_sup,rabbit_sup,&lt;0.165.0&gt;]

    messages: [{send_command_and_notify,&lt;0.14808.16&gt;,&lt;0.1322.61&gt;,


{'basic.deliver',&lt;&lt;&quot;amq.ctag-ACPfvFFpUNKEw1WOwN9IbQ&quot;&gt;&gt;,

                          2,true,&lt;&lt;&gt;&gt;,&lt;&lt;&quot;extractions.summarizer&quot;&gt;&gt;},

                      {content,60,

                          {'P_basic',&lt;&lt;&quot;text/plain&quot;&gt;&gt;,&lt;&lt;&quot;UTF-8&quot;&gt;&gt;,[],1,


&lt;&lt;&quot;0&quot;&gt;&gt;,undefined,undefined,undefined,undefined,

                              undefined,undefined,undefined,undefined,

                              undefined},

                          none,none,


[&lt;&lt;&quot;{\&quot;jobName\&quot;:\&quot;BIGFauxTest2\&quot;,\&quot;creationTime\&quot;:\&quot;10-03-2013
14:36:10\&quot;}&quot;&gt;&gt;]}}]

    links: [&lt;0.1323.61&gt;]

    dictionary: []

    trap_exit: false

    status: running

    heap_size: 376

    stack_size: 27

    reductions: 438

  neighbours:



=SUPERVISOR REPORT==== 31-Oct-2013::11:30:43 ===

     Supervisor: {&lt;0.1323.61&gt;,rabbit_channel_sup}

     Context:    child_terminated

     Reason:     badarg

     Offender:   [{pid,&lt;0.1325.61&gt;},

                  {name,writer},

                  {mfargs,

                      {rabbit_writer,start_link,


[#Port&lt;0.347667&gt;,2,131072,rabbit_framing_amqp_0_9_1,

                           &lt;0.1295.61&gt;,true]}},

                  {restart_type,intrinsic},

                  {shutdown,4294967295},

                  {child_type,worker}]





=SUPERVISOR REPORT==== 31-Oct-2013::11:30:43 ===

     Supervisor: {&lt;0.1323.61&gt;,rabbit_channel_sup}

     Context:    shutdown

     Reason:     reached_max_restart_intensity

     Offender:   [{pid,&lt;0.1325.61&gt;},

                  {name,writer},

                  {mfargs,

                      {rabbit_writer,start_link,


[#Port&lt;0.347667&gt;,2,131072,rabbit_framing_amqp_0_9_1,

                           &lt;0.1295.61&gt;,true]}},

                  {restart_type,intrinsic},

                  {shutdown,4294967295},

                  {child_type,worker}]

-- 
Jason McIntosh
<A HREF="https://github.com/jasonmcintosh/">https://github.com/jasonmcintosh/</A>
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131031/a1620b43/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131031/a1620b43/attachment.htm</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031558.html">[rabbitmq-discuss] segfault in beam.smp
</A></li>
	<LI>Next message: <A HREF="031561.html">[rabbitmq-discuss] Weird error on 3.2.0 causing failures
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31559">[ date ]</a>
              <a href="thread.html#31559">[ thread ]</a>
              <a href="subject.html#31559">[ subject ]</a>
              <a href="author.html#31559">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
